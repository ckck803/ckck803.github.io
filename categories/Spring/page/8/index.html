<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="google" value="notranslate">

    

    
    <title>Category: Spring | Victor</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="description" content="개발 노트">
<meta property="og:type" content="website">
<meta property="og:title" content="Victor">
<meta property="og:url" content="https://ckck803.github.io/categories/Spring/page/8/index.html">
<meta property="og:site_name" content="Victor">
<meta property="og:description" content="개발 노트">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="ckck803">
<meta name="twitter:card" content="summary">
    

    

    
        <link rel="icon" href="/css/images/favicon/favicon.ico">
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/titillium-web/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/3.5.0/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    
    


    
<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosanskr.css">

    
<link rel="stylesheet" href="https://cdn.rawgit.com/innks/NanumSquareRound/master/nanumsquareround.css">
	
    
<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothiccoding.css">

<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/rss2.xml" title="Victor" type="application/rss+xml">
</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">딴짓하는 개발자</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                    <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AWS/">AWS</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AWS/EKS/">EKS</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/">CS</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/DataBase/">DataBase</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/Network/">Network</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/Process/">Process</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/Programming-Lanuage/">Programming Lanuage</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/">운영체제</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/">컴퓨터 구조</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/">DevOps</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/ArgoCD/">ArgoCD</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Git/">Git</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Gitea/">Gitea</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Harbor/">Harbor</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Jenkins/">Jenkins</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Jmeter/">Jmeter</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/KeyCloak/">KeyCloak</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Kiali/">Kiali</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Maven/">Maven</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Nexus/">Nexus</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/OpenSearch/">OpenSearch</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/SonarQube/">SonarQube</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Docker/">Docker</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/">Frontend</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/Login/">Login</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/React/">React</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/React-Query/">React Query</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/Redux/">Redux</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/To-do-List/">To do List</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/ToastUI/">ToastUI</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/Vite/">Vite</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/Vue/">Vue</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/Vue3/">Vue3</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/%EB%A1%9C%EA%B7%B8%EC%9D%B8/">로그인</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/">블로그</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/">Kubernetes</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/Autoscaler/">Autoscaler</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/Config/">Config</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/Custom/">Custom</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/Helm/">Helm</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/Istio/">Istio</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/">구성요소</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/%EC%84%9C%EB%B9%84%EC%8A%A4/">서비스</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/">워크로드</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/">Programming</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Beakjoon/">Beakjoon</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Cpp/">Cpp</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Django/">Django</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Docker/">Docker</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/JAVA/">JAVA</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/JPA/">JPA</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Kafka/">Kafka</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/MySQL/">MySQL</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Oracle/">Oracle</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/QueryDSL/">QueryDSL</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Redis/">Redis</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/">프로그래머스</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/">Spring</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Kafka/">Kafka</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Redis/">Redis</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-5/">Spring 5</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-AOP/">Spring AOP</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Batch/">Spring Batch</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Boot/">Spring Boot</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Cloud/">Spring Cloud</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Core/">Spring Core</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Data-JPA/">Spring Data JPA</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Framework/">Spring Framework</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-MVC/">Spring MVC</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Resource/">Spring Resource</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Rest/">Spring Rest</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Security/">Spring Security</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Test/">Spring Test</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-WebSocket/">Spring WebSocket</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/%EA%B0%95%EC%9D%98/">강의</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/">게시판 만들기</a></li></ul></li></ul>
                                
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <i class="icon fa fa-folder-open"></i>Category: <em class="page-title-link">Spring</em>
    </h1>
</div>

                        <div class="main-body-content">
                            

    
    
        
        
        <section class="archives-wrap">
            <div class="archive-year-wrap">
                <a href="/archives/2021" class="archive-year"><i class="icon fa fa-calendar-o"></i>2021</a>
            </div>
            <div class="archives">
    
    
    
        <div class="article-row">
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-06/" class="thumbnail">
    
    
        <span style="background-image:url(/images/springboot/advanced/sync-log.png)" alt="Spring 핵심원리 고급편 - ThreadLocal" class="thumbnail-image"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-06/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a>
            </div>
            <div class="date"><time datetime="2021-11-19T21:31:07.000Z" itemprop="datePublished">2021-11-20</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-06/">Spring 핵심원리 고급편 - ThreadLocal</a>
        </h1>
    

        <p class="article-excerpt">
            목차
Post not found: springboot/spring-aop/threadlocal/threadlocal-01
Post not found: springboot/spring-aop/threadlocal/threadlocal-02
Post not found: springboot/spring-aop/threadlocal/threadlocal-03
Post not found: springboot/spring-aop/threadlocal/threadlocal-04
Post not found: springboot/spring-aop/threadlocal/threadlocal-05
Post not found: springboot/spring-aop/threadlocal/threadlocal-06

ThreadLocal@Configurationpublic class LogTraceConfig &#123;//    @Bean//    public LogTrace logTrace()&#123;//        return new FieldLogTrace();//    &#125;    @Bean    public LogTrace logTrace()&#123;        return new ThreadLocalLogTrace();    &#125;&#125;


Thread 별로 로그가 정확하게 나눠진 것을 확인할 수 있다.


2021-12-06 02:15:37.485  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] OrderController.request()2021-12-06 02:15:37.485  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] |--&gt;OrderService.orderItem()2021-12-06 02:15:37.486  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] |   |--&gt;OrderRepository.save()2021-12-06 02:15:38.488  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] |   |&lt;--OrderRepository.save() time=1002ms2021-12-06 02:15:38.488  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] |&lt;--OrderService.orderItem() time=1003ms2021-12-06 02:15:38.488  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] OrderController.request() time=1003ms

2021-12-06 02:15:37.648  INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace     : [9e39132f] OrderController.request()2021-12-06 02:15:37.648  INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace     : [9e39132f] |--&gt;OrderService.orderItem()2021-12-06 02:15:37.648  INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace     : [9e39132f] |   |--&gt;OrderRepository.save()2021-12-06 02:15:38.652  INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace     : [9e39132f] |   |&lt;--OrderRepository.save() time=1004ms2021-12-06 02:15:38.653  INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace     : [9e39132f] |&lt;--OrderService.orderItem() time=1005ms2021-12-06 02:15:38.653  INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace     : [9e39132f] OrderController.request() time=1005ms
        </p>
    </div>
</article>
    

    
    
    
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-05/" class="thumbnail">
    
    
        <span style="background-image:url(/images/springboot/advanced/sync-log.png)" alt="Spring 핵심원리 고급편 - ThreadLocal 적용" class="thumbnail-image"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-05/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a>
            </div>
            <div class="date"><time datetime="2021-11-19T20:31:07.000Z" itemprop="datePublished">2021-11-20</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-05/">Spring 핵심원리 고급편 - ThreadLocal 적용</a>
        </h1>
    

        <p class="article-excerpt">
            목차
Post not found: springboot/spring-aop/threadlocal/threadlocal-01
Post not found: springboot/spring-aop/threadlocal/threadlocal-02
Post not found: springboot/spring-aop/threadlocal/threadlocal-03
Post not found: springboot/spring-aop/threadlocal/threadlocal-04
Post not found: springboot/spring-aop/threadlocal/threadlocal-05
Post not found: springboot/spring-aop/threadlocal/threadlocal-06

ThreadLocal 적용@Slf4jpublic class ThreadLocalLogTrace implements LogTrace &#123;    private static final String START_PREFIX = &quot;--&gt;&quot;;    private static final String COMPLETE_PREFIX = &quot;&lt;--&quot;;    private static final String EX_PREFIX = &quot;&lt;X-&quot;;    private ThreadLocal&lt;TraceId&gt; traceIdHolder; // traceId 동기화, 동시성 이슈    @Override    public TraceStatus begin(String message) &#123;        syncTraceId();        TraceId traceId = traceIdHolder.get();                Long startTimeMs = System.currentTimeMillis();        log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, traceId.getId(), addSpace(START_PREFIX,                traceId.getLevel()), message);                return new TraceStatus(traceId, startTimeMs, message);    &#125;    private void syncTraceId()&#123;        TraceId traceId = traceIdHolder.get();        if(traceId == null)&#123;            traceIdHolder.set(new TraceId());        &#125;else&#123;            traceIdHolder.set(traceId.createNextId());        &#125;    &#125;    @Override    public void end(TraceStatus status) &#123;        complete(status, null);    &#125;    @Override    public void exception(TraceStatus status, Exception e) &#123;        complete(status, e);    &#125;    private void complete(TraceStatus status, Exception e) &#123;                Long stopTimeMs = System.currentTimeMillis();        long resultTimeMs = stopTimeMs - status.getStartTimeMs();        TraceId traceId = status.getTraceId();        if (e == null) &#123;            log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms&quot;, traceId.getId(),                    addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(),                    resultTimeMs);        &#125; else &#123;            log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms ex=&#123;&#125;&quot;, traceId.getId(),                    addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs,                    e.toString());        &#125;        releaseTraceId();    &#125;    private void releaseTraceId() &#123;        TraceId traceId = traceIdHolder.get();        if(traceId.isFirstLevel())&#123;            traceIdHolder.remove(); // destroy        &#125;else&#123;            traceIdHolder.set(traceId.createPreviousId());        &#125;    &#125;    private static String addSpace(String prefix, int level) &#123;        StringBuilder sb = new StringBuilder();        for (int i = 0; i &lt; level; i++) &#123;            sb.append((i == level - 1) ? &quot;|&quot; + prefix : &quot;|   &quot;);        &#125;        return sb.toString();    &#125;&#125;


class ThreadLocalLogTraceTest &#123;    ThreadLocalLogTrace trace = new ThreadLocalLogTrace();    @Test    void begin_end_level2()&#123;        TraceStatus status1 = trace.begin(&quot;hello1&quot;);        TraceStatus status2 = trace.begin(&quot;hello2&quot;);        trace.end(status2);        trace.end(status1);    &#125;    @Test    void begin_end_level2_exception()&#123;        TraceStatus status1 = trace.begin(&quot;hello1&quot;);        TraceStatus status2 = trace.begin(&quot;hello2&quot;);        trace.exception(status2, new IllegalStateException());        trace.exception(status1,  new IllegalStateException());    &#125;&#125;

15:20:49.175 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] hello115:20:49.179 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] |--&gt;hello215:20:49.180 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] |&lt;--hello2 time=3ms15:20:49.180 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] hello1 time=6ms



@Configurationpublic class LogTraceConfig &#123;//    @Bean//    public LogTrace logTrace()&#123;//        return new FieldLogTrace();//    &#125;    @Bean    public LogTrace logTrace()&#123;        return new ThreadLocalLogTrace();    &#125;&#125;


Thread 별로 로그가 정확하게 나눠진 것을 확인할 수 있다.


2021-12-06 02:15:37.485  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] OrderController.request()2021-12-06 02:15:37.485  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] |--&gt;OrderService.orderItem()2021-12-06 02:15:37.486  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] |   |--&gt;OrderRepository.save()2021-12-06 02:15:38.488  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] |   |&lt;--OrderRepository.save() time=1002ms2021-12-06 02:15:38.488  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] |&lt;--OrderService.orderItem() time=1003ms2021-12-06 02:15:38.488  INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace     : [0b8754c1] OrderController.request() time=1003ms
        </p>
    </div>
</article>
    
        </div>
    

    
    
    
    
        <div class="article-row">
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-04/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-04/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a>
            </div>
            <div class="date"><time datetime="2021-11-19T19:31:07.000Z" itemprop="datePublished">2021-11-20</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-04/">Spring 핵심원리 고급편 - ThreadLocal</a>
        </h1>
    

        <p class="article-excerpt">
            목차
Post not found: springboot/spring-aop/threadlocal/threadlocal-01
Post not found: springboot/spring-aop/threadlocal/threadlocal-02
Post not found: springboot/spring-aop/threadlocal/threadlocal-03
Post not found: springboot/spring-aop/threadlocal/threadlocal-04
Post not found: springboot/spring-aop/threadlocal/threadlocal-05
Post not found: springboot/spring-aop/threadlocal/threadlocal-06

ThreadLocal
ThreadLocal은 해당 Thread 만 접근할 수 있는 저장소다ThreadLocal을 사용하게 되면 각 Thread마다 별도의 저장소를 제공한다.


사용법
값 저장 : ThreadLocal.set(value)
값 조회 : ThreadLocal.get()
값 삭제 : ThreadLocal.remove()




해당 Thread 가 ThreadLocal 을 모두 사용하고 나면 ThreadLocal.remove() 를 호출해 ThreadLocal 에 저장된 값을 제거해 줘야 한다. 

@Slf4jpublic class ThreadLocalService &#123;    private ThreadLocal&lt;String&gt; nameStore = new ThreadLocal&lt;&gt;();    public String logic(String name) &#123;        log.info(&quot;저장 name=&#123;&#125; -&gt; nameStore = &#123;&#125;&quot;, name, nameStore.get());        nameStore.set(name);        sleep(1000);                log.info(&quot;조회 nameStore = &#123;&#125;&quot;, nameStore.get());                return nameStore.get();    &#125;    private void sleep(int millis) &#123;        try &#123;            Thread.sleep(millis);        &#125; catch (InterruptedException e) &#123;            e.printStackTrace();        &#125;    &#125;&#125;


@Slf4jpublic class ThreadLocalServiceTest &#123;    private ThreadLocalService service = new ThreadLocalService();    @Test    public void field()&#123;        log.info(&quot;main start&quot;);        Runnable userA = () -&gt; &#123;            service.logic(&quot;userA&quot;);        &#125;;        Runnable userB = () -&gt; &#123;            service.logic(&quot;userB&quot;);        &#125;;        Thread threadA = new Thread(userA);        threadA.setName(&quot;thread - A&quot;);        Thread threadB = new Thread(userB);        threadB.setName(&quot;thread - B&quot;);        threadA.start();        sleep(100);        threadB.start();        sleep(2000); // 메인 Thread 종료 대기    &#125;    private void sleep(int millis)&#123;        try &#123;            Thread.sleep(millis);        &#125;catch (Exception e)&#123;            e.printStackTrace();        &#125;    &#125;&#125;

15:09:42.290 [Test worker] INFO com.example.advancedspring.trace.threadlocal.ThreadLocalServiceTest - main start15:09:42.293 [thread - A] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - 저장 name=userA -&gt; nameStore = null15:09:42.397 [thread - B] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - 저장 name=userB -&gt; nameStore = null15:09:43.301 [thread - A] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - 조회 nameStore = userA15:09:43.400 [thread - B] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - 조회 nameStore = userB15:09:44.402 [Test worker] INFO com.example.advancedspring.trace.threadlocal.ThreadLocalServiceTest - main exit
        </p>
    </div>
</article>
    

    
    
    
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-03/" class="thumbnail">
    
    
        <span style="background-image:url(/images/springboot/advanced/no-sync-log.png)" alt="Spring 핵심원리 고급편 - 동시성 이슈" class="thumbnail-image"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-03/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a>
            </div>
            <div class="date"><time datetime="2021-11-19T18:31:07.000Z" itemprop="datePublished">2021-11-20</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-03/">Spring 핵심원리 고급편 - 동시성 이슈</a>
        </h1>
    

        <p class="article-excerpt">
            목차
Post not found: springboot/spring-aop/threadlocal/threadlocal-01
Post not found: springboot/spring-aop/threadlocal/threadlocal-02
Post not found: springboot/spring-aop/threadlocal/threadlocal-03
Post not found: springboot/spring-aop/threadlocal/threadlocal-04
Post not found: springboot/spring-aop/threadlocal/threadlocal-05
Post not found: springboot/spring-aop/threadlocal/threadlocal-06

동시성 이슈 발생
여러 Thread가 동시에 Application 로직을 호출하게 되면서 Level 상태값이 꼬여서 보이게 된다.


Thread 로 구분해서 로그 확인2021-12-06 02:18:26.028  INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] OrderController.request()2021-12-06 02:18:26.029  INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] |--&gt;OrderService.orderItem()2021-12-06 02:18:26.029  INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] |   |--&gt;OrderRepository.save()2021-12-06 02:18:27.033  INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] |   |&lt;--OrderRepository.save() time=1004ms2021-12-06 02:18:27.033  INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] |&lt;--OrderService.orderItem() time=1004ms2021-12-06 02:18:27.033  INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] OrderController.request() time=1005ms

2021-12-06 02:18:26.114  INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] |   |   |--&gt;OrderController.request()2021-12-06 02:18:26.115  INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] |   |   |   |--&gt;OrderService.orderItem()2021-12-06 02:18:26.115  INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] |   |   |   |   |--&gt;OrderRepository.save()2021-12-06 02:18:27.119  INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] |   |   |   |   |&lt;--OrderRepository.save() time=1004ms2021-12-06 02:18:27.120  INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] |   |   |   |&lt;--OrderService.orderItem() time=1005ms2021-12-06 02:18:27.120  INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace       : [c0f5fc0a] |   |   |&lt;--OrderController.request() time=1006ms


Thread 를 이용한 테스트 코드 작성@Slf4jpublic class FieldService &#123;    private String nameStore;    public String logic(String name)&#123;        log.info(&quot;저장 name=&#123;&#125; -&gt; nameStore = &#123;&#125;&quot;, name, nameStore);        nameStore = name;        sleep(1000);        log.info(&quot;조회 nameStore = &#123;&#125;&quot;, nameStore);        return nameStore;    &#125;    private void sleep(int millis) &#123;        try &#123;            Thread.sleep(millis);        &#125;catch (InterruptedException e)&#123;            e.printStackTrace();        &#125;    &#125;&#125;
        </p>
    </div>
</article>
    
        </div>
    

    
    
    
    
        <div class="article-row">
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-02/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-02/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a>
            </div>
            <div class="date"><time datetime="2021-11-19T17:31:07.000Z" itemprop="datePublished">2021-11-20</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-02/">Spring 핵심원리 고급편 - 필드 동기화 적용</a>
        </h1>
    

        <p class="article-excerpt">
            목차
Post not found: springboot/spring-aop/threadlocal/threadlocal-01
Post not found: springboot/spring-aop/threadlocal/threadlocal-02
Post not found: springboot/spring-aop/threadlocal/threadlocal-03
Post not found: springboot/spring-aop/threadlocal/threadlocal-04
Post not found: springboot/spring-aop/threadlocal/threadlocal-05
Post not found: springboot/spring-aop/threadlocal/threadlocal-06

필드 동기화 적용Bean 으로 등록@Configuration public class LogTraceConfig &#123;    @Bean         public LogTrace logTrace() &#123;                 return new FieldLogTrace();         &#125; &#125;

@RestController@RequiredArgsConstructorpublic class OrderControllerV3 &#123;    private final OrderServiceV3 orderService;    private final LogTrace trace;    @GetMapping(&quot;/v3/request&quot;)    public String request(String itemId)&#123;        System.out.println(itemId);        TraceStatus status = null;        try &#123;            status = trace.begin(&quot;OrderController.request()&quot;);            orderService.orderItem(itemId);            trace.end(status);            return &quot;ok&quot;;        &#125;catch (Exception e)&#123;            trace.exception(status, e);            throw e; // 예외를 반드시 던져 줘야 한다.        &#125;    &#125;&#125;

@Service@RequiredArgsConstructorpublic class OrderServiceV3 &#123;    private final OrderRepositoryV3 orderRepository;    private final LogTrace trace;    public void orderItem (String itemId)&#123;        TraceStatus status = null;        try &#123;            status = trace.begin(&quot;OrderService.orderItem()&quot;);            orderRepository.save(itemId);            trace.end(status);        &#125;catch (Exception e)&#123;            trace.exception(status, e);            throw e; // 예외를 반드시 던져 줘야 한다.        &#125;    &#125;&#125;

@Repository@RequiredArgsConstructorpublic class OrderRepositoryV3 &#123;    private final LogTrace trace;    public void save(String itemId)&#123;        TraceStatus status = null;        try &#123;            status = trace.begin(&quot;OrderRepository.save()&quot;);            // 저장 로직            if(itemId.equals(&quot;ex&quot;))&#123;                throw new IllegalStateException(&quot;예외 발생!&quot;);            &#125;            sleep(1000);            trace.end(status);        &#125;catch (Exception e)&#123;            trace.exception(status, e);            throw e; // 예외를 반드시 던져 줘야 한다.        &#125;    &#125;    private void sleep(int millis) &#123;        try&#123;            Thread.sleep(millis);        &#125;catch (InterruptedException e)&#123;            e.printStackTrace();        &#125;    &#125;&#125;
        </p>
    </div>
</article>
    

    
    
    
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-01/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-01/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a>
            </div>
            <div class="date"><time datetime="2021-11-19T16:31:07.000Z" itemprop="datePublished">2021-11-20</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/20/spring/spring-aop/threadlocal/threadlocal-01/">Spring 핵심원리 고급편 - 필드 동기화</a>
        </h1>
    

        <p class="article-excerpt">
            목차
Post not found: springboot/spring-aop/threadlocal/threadlocal-01
Post not found: springboot/spring-aop/threadlocal/threadlocal-02
Post not found: springboot/spring-aop/threadlocal/threadlocal-03
Post not found: springboot/spring-aop/threadlocal/threadlocal-04
Post not found: springboot/spring-aop/threadlocal/threadlocal-05
Post not found: springboot/spring-aop/threadlocal/threadlocal-06

필드 동기화public interface LogTrace &#123;    TraceStatus begin(String message);    void end(TraceStatus status);    void exception(TraceStatus status, Exception e);&#125;

필드 동기화를 위한 로그 분석기 만들기
TraceId 객체가 없을 경우 새로 생성한다.
TraceId 객체가 있을 경우 Level 을 증가 시킨다.

private void syncTraceId()&#123;    if(traceIdHolder == null)&#123;        traceIdHolder  = new TraceId();    &#125;else&#123;        traceIdHolder = traceIdHolder.createNextId();    &#125;&#125;


TraceId 내 Level 이 0일 경우 해당 객체를 null 로 초기화 한다.
TraceId 내 Level 이 0이 아닐 경우 Level을 1 감소시킨다.

private void releaseTraceId() &#123;    if(traceIdHolder.isFirstLevel())&#123;        traceIdHolder = null; // destroy    &#125;else&#123;        traceIdHolder = traceIdHolder.createPreviousId();    &#125;&#125;


TraceId 객체는 파라미터로 전달되는 것이 아니라 traceIdHolder 필드에 저장된다.

        </p>
    </div>
</article>
    
        </div>
    

    
    
    
    
        <div class="article-row">
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/19/spring/spring-aop/log-trace/log-trace-03/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/19/spring/spring-aop/log-trace/log-trace-03/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a>
            </div>
            <div class="date"><time datetime="2021-11-18T18:31:07.000Z" itemprop="datePublished">2021-11-19</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/19/spring/spring-aop/log-trace/log-trace-03/">Spring 핵심원리 고급편 - Logging Filter 파라미터 동기화 개발</a>
        </h1>
    

        <p class="article-excerpt">
            목차
Post not found: springboot/spring-aop/log-trace/log-trace-01
Post not found: springboot/spring-aop/log-trace/log-trace-02
Post not found: springboot/spring-aop/log-trace/log-trace-03

Spring 핵심원리 고급편 - Logging Filter 파라미터 동기화 개발Logging Filter 파라미터 동기화 개발@Slf4j@Componentpublic class HelloTraceV2 &#123;    private static final String START_PREFIX = &quot;--&gt;&quot;;    private static final String COMPLETE_PREFIX = &quot;&lt;--&quot;;    private static final String EX_PREFIX = &quot;&lt;X-&quot;;    public TraceStatus begin(String message) &#123;        TraceId traceId = new TraceId();        Long startTimeMs = System.currentTimeMillis();        log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, traceId.getId(), addSpace(START_PREFIX,                traceId.getLevel()), message);                return new TraceStatus(traceId, startTimeMs, message);    &#125;    public TraceStatus beginSync(TraceId beforeTraceId, String message) &#123;        TraceId nextId = beforeTraceId.createNextId();        Long startTimeMs = System.currentTimeMillis();                log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, nextId.getId(), addSpace(START_PREFIX,                nextId.getLevel()), message);                return new TraceStatus(nextId, startTimeMs, message);    &#125;    public void end(TraceStatus status) &#123;        complete(status, null);    &#125;    public void exception(TraceStatus status, Exception e) &#123;        complete(status, e);    &#125;    private void complete(TraceStatus status, Exception e) &#123;                Long stopTimeMs = System.currentTimeMillis();        long resultTimeMs = stopTimeMs - status.getStartTimeMs();        TraceId traceId = status.getTraceId();                if (e == null) &#123;            log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms&quot;, traceId.getId(),                    addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(),                    resultTimeMs);        &#125; else &#123;            log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms ex=&#123;&#125;&quot;, traceId.getId(),                    addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs,                    e.toString());        &#125;    &#125;    private static String addSpace(String prefix, int level) &#123;                StringBuilder sb = new StringBuilder();                for (int i = 0; i &lt; level; i++) &#123;            sb.append((i == level - 1) ? &quot;|&quot; + prefix : &quot;|   &quot;);                &#125;        return sb.toString();    &#125;&#125;

@RestController@RequiredArgsConstructorpublic class OrderControllerV2 &#123;    private final OrderServiceV2 orderService;    private final HelloTraceV2 trace;    @GetMapping(&quot;/v2/request&quot;)    public String request(String itemId)&#123;        System.out.println(itemId);        TraceStatus status = null;        try &#123;            status = trace.begin(&quot;OrderController.request()&quot;);            orderService.orderItem(status.getTraceId(), itemId);            trace.end(status);            return &quot;ok&quot;;        &#125;catch (Exception e)&#123;            trace.exception(status, e);            throw e; // 예외를 반드시 던져 줘야 한다.        &#125;    &#125;&#125;

@Service@RequiredArgsConstructorpublic class OrderServiceV2 &#123;    private final OrderRepositoryV2 orderRepository;    private final HelloTraceV2 trace;    public void orderItem(TraceId traceId, String itemId)&#123;        TraceStatus status = null;        try &#123;            status = trace.beginSync(traceId, &quot;OrderService.orderItem()&quot;);            orderRepository.save(status.getTraceId(),itemId);            trace.end(status);        &#125;catch (Exception e)&#123;            trace.exception(status, e);            throw e; // 예외를 반드시 던져 줘야 한다.        &#125;    &#125;&#125;


@Repository@RequiredArgsConstructorpublic class OrderRepositoryV2 &#123;    private final HelloTraceV2 trace;    public void save(TraceId traceId, String itemId)&#123;        TraceStatus status = null;        try &#123;            status = trace.beginSync(traceId,&quot;OrderRepository.save()&quot;);            // 저장 로직            if(itemId.equals(&quot;ex&quot;))&#123;                throw new IllegalStateException(&quot;예외 발생!&quot;);            &#125;            sleep(1000);            trace.end(status);        &#125;catch (Exception e)&#123;            trace.exception(status, e);            throw e; // 예외를 반드시 던져 줘야 한다.        &#125;    &#125;    private void sleep(int millis) &#123;        try&#123;            Thread.sleep(millis);        &#125;catch (InterruptedException e)&#123;            e.printStackTrace();        &#125;    &#125;&#125;
        </p>
    </div>
</article>
    

    
    
    
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/19/spring/spring-aop/log-trace/log-trace-02/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/19/spring/spring-aop/log-trace/log-trace-02/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a>
            </div>
            <div class="date"><time datetime="2021-11-18T17:31:07.000Z" itemprop="datePublished">2021-11-19</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/19/spring/spring-aop/log-trace/log-trace-02/">Spring 핵심원리 고급편 - Logging Filter</a>
        </h1>
    

        <p class="article-excerpt">
            목차
Post not found: springboot/spring-aop/log-trace/log-trace-01
Post not found: springboot/spring-aop/log-trace/log-trace-02
Post not found: springboot/spring-aop/log-trace/log-trace-03

Spring 핵심원리 고급편 - Logging Filter@RestController@RequiredArgsConstructorpublic class OrderControllerV1 &#123;    private final OrderServiceV1 orderService;    private final HelloTraceV1 trace;    @GetMapping(&quot;/v1/request&quot;)    public String request(String itemId)&#123;        TraceStatus status = null;        try &#123;            status = trace.begin(&quot;OrderController.request()&quot;);            orderService.orderItem(itemId);            trace.end(status);            return &quot;ok&quot;;        &#125;catch (Exception e)&#123;            trace.exception(status, e);            throw e; // 예외를 반드시 던져 줘야 한다.        &#125;    &#125;&#125;

@Service@RequiredArgsConstructorpublic class OrderServiceV1 &#123;    private final OrderRepositoryV1 orderRepository;    private final HelloTraceV1 trace;    public void orderItem(String itemId)&#123;        TraceStatus status = null;        try &#123;            status = trace.begin(&quot;OrderService.orderItem()&quot;);            orderRepository.save(itemId);            trace.end(status);        &#125;catch (Exception e)&#123;            trace.exception(status, e);            throw e; // 예외를 반드시 던져 줘야 한다.        &#125;    &#125;&#125;


@Repository@RequiredArgsConstructorpublic class OrderRepositoryV1 &#123;    private final HelloTraceV1 trace;    public void save(String itemId)&#123;        TraceStatus status = null;        try &#123;            status = trace.begin(&quot;OrderRepository.save()&quot;);            // 저장 로직            if(itemId.equals(&quot;ex&quot;))&#123;                throw new IllegalStateException(&quot;예외 발생!&quot;);            &#125;            sleep(1000);            trace.end(status);        &#125;catch (Exception e)&#123;            trace.exception(status, e);            throw e; // 예외를 반드시 던져 줘야 한다.        &#125;    &#125;    private void sleep(int millis) &#123;        try&#123;            Thread.sleep(millis);        &#125;catch (InterruptedException e)&#123;            e.printStackTrace();        &#125;    &#125;&#125;
        </p>
    </div>
</article>
    
        </div>
    

    
    
    
    
        <div class="article-row">
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/18/spring/spring-aop/log-trace/log-trace-01/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/18/spring/spring-aop/log-trace/log-trace-01/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a>
            </div>
            <div class="date"><time datetime="2021-11-17T16:31:07.000Z" itemprop="datePublished">2021-11-18</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/18/spring/spring-aop/log-trace/log-trace-01/">Spring 핵심원리 고급편 - Logging Filter</a>
        </h1>
    

        <p class="article-excerpt">
            목차
Post not found: springboot/spring-aop/log-trace/log-trace-01
Post not found: springboot/spring-aop/log-trace/log-trace-02
Post not found: springboot/spring-aop/log-trace/log-trace-03

Spring 핵심원리 고급편 - Logging FilterTraceId -  트랜잭션 Id와 level을 관리public class TraceId &#123;    private String id; // 트랜잭션 ID    private int level; // 깊이를 표현할 수 있는 Level    public TraceId() &#123;        this.id = creatId();        this.level = 0;    &#125;    private TraceId(String id, int level)&#123;        this.id = id;        this.level = level;    &#125;    public String creatId() &#123;        return UUID.randomUUID().toString().substring(0, 8);    &#125;    public TraceId createNextId()&#123;        return new TraceId(id, level+1);    &#125;    // 트랜잭션 ID 는 기존과 같고 Level 은 하나 감소시킨다.    public TraceId createPreviousId()&#123;        return new TraceId(id, level-1);    &#125;    public boolean isFirstLevel()&#123;        return level == 0;    &#125;&#125;

TraceStatus - 로그 상태 정보를 나타낸다.
traceId
내부에 트랜잭션 Id 와 Level 을 가지고 있다.


startTimeMs
로그 시작 시간이다. 로그 종료시 이 시작 시간을 기준으로 시작 ~ 종료까지 수행시간을 구할 수 있다.


message
시작시 사용한 메시지다. 로그 종료시에 사용해 출력한다.



public class TraceStatus &#123;    private TraceId traceId;    private Long startTimeMs;    private String message;    public TraceStatus(TraceId traceId, Long startTimeMs, String message) &#123;        this.traceId = traceId;        this.startTimeMs = startTimeMs;        this.message = message;    &#125;    public TraceId getTraceId() &#123;        return traceId;    &#125;    public Long getStartTimeMs() &#123;        return startTimeMs;    &#125;    public String getMessage() &#123;        return message;    &#125;&#125;


@Slf4j@Componentpublic class HelloTraceV1 &#123;    private static final String START_PREFIX = &quot;--&gt;&quot;;    private static final String COMPLETE_PREFIX = &quot;&lt;--&quot;;    private static final String EX_PREFIX = &quot;&lt;X-&quot;;    public TraceStatus begin(String message) &#123;        TraceId traceId = new TraceId();        Long startTimeMs = System.currentTimeMillis();        log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, traceId.getId(), addSpace(START_PREFIX,                traceId.getLevel()), message);        return new TraceStatus(traceId, startTimeMs, message);    &#125;    public void end(TraceStatus status) &#123;        complete(status, null);    &#125;    public void exception(TraceStatus status, Exception e) &#123;        complete(status, e);    &#125;    private void complete(TraceStatus status, Exception e) &#123;        Long stopTimeMs = System.currentTimeMillis();        long resultTimeMs = stopTimeMs - status.getStartTimeMs();        TraceId traceId = status.getTraceId();        if (e == null) &#123;            log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms&quot;, traceId.getId(),                    addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(),                    resultTimeMs);        &#125; else &#123;            log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms ex=&#123;&#125;&quot;, traceId.getId(),                    addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs,                    e.toString());        &#125;    &#125;    private static String addSpace(String prefix, int level) &#123;        StringBuilder sb = new StringBuilder();        for (int i = 0; i &lt; level; i++) &#123;            sb.append((i == level - 1) ? &quot;|&quot; + prefix : &quot;|   &quot;);        &#125;        return sb.toString();    &#125;&#125;

테스트 코드 작성
        </p>
    </div>
</article>
    

    
    
    
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/04/spring/spring-framework/configuration/springboot-WebMvcConfigurer/" class="thumbnail">
    
    
        <span style="background-image:url(/images/springboot/spring-boot-logo.png)" alt="Spring Boot - WebMvcConfigurer" class="thumbnail-image"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/04/spring/spring-framework/configuration/springboot-WebMvcConfigurer/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-Boot/">Spring Boot</a>
            </div>
            <div class="date"><time datetime="2021-11-03T23:09:05.000Z" itemprop="datePublished">2021-11-04</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/04/spring/spring-framework/configuration/springboot-WebMvcConfigurer/">Spring Boot - WebMvcConfigurer</a>
        </h1>
    

        <p class="article-excerpt">
            
Matrix Variable 설정 참고
https://www.baeldung.com/spring-mvc-matrix-variables

WebMvcConfigurer
Spring MVC 설정을 추가, 변경하기 위해 사용하는 인터페이스WebMvcConfigurer 인터페이스는 CORS, Interceptor, ViewResolver, MessageConverter 등 여러가지 설정을 변경, 추가할 수 있게 도와준다.


WebMvcConfigurer 인터페이스내 메소드들은 default 로 선어돼 있어 필요한 것만 구현하면 된다.
add~: 기본 설정이 없는 Bean에 대하여 새로운 설정 Bean을 추가함
configure~: 기존 설정 대신 새롭게 정의한 설정 Bean을 사용한다. (set 메소드)
extend~: 기존 설정에 새롭게 정의한 설정 Bean을 추가한다. (add 메소드)



WebMvcConfigurer.java
public interface WebMvcConfigurer &#123;    default void configurePathMatch(PathMatchConfigurer configurer) &#123;&#125;    default void configureContentNegotiation(ContentNegotiationConfigurer configurer) &#123;&#125;    default void configureAsyncSupport(AsyncSupportConfigurer configurer) &#123;&#125;    default void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) &#123;&#125;    default void addFormatters(FormatterRegistry registry) &#123;&#125;    default void addInterceptors(InterceptorRegistry registry) &#123;&#125;    default void addResourceHandlers(ResourceHandlerRegistry registry) &#123;&#125;    default void addCorsMappings(CorsRegistry registry) &#123;&#125;    default void addViewControllers(ViewControllerRegistry registry) &#123;&#125;    default void configureViewResolvers(ViewResolverRegistry registry) &#123;&#125;    default void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; resolvers) &#123;&#125;    default void addReturnValueHandlers(List&lt;HandlerMethodReturnValueHandler&gt; handlers) &#123;&#125;    default void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) &#123;&#125;    default void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) &#123;&#125;    default void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;&#125;    default void extendHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;&#125;    @Nullable    default Validator getValidator() &#123;return null;&#125;    @Nullable    default MessageCodesResolver getMessageCodesResolver() &#123;return null;&#125;&#125;

CORS 설정Spring Boot 에서는 기본적으로 CORS에 대한 설정이 없기 때문에 CORS 를 사용하기 위해서는 WebMvcConfigurer 내 addCorsMappings 메소드를 이용해 설정해줘야 한다.
        </p>
    </div>
</article>
    
        </div>
    

    
    
    
    
        <div class="article-row">
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/11/03/spring/spring-rest/rest-api-05-swagger/" class="thumbnail">
    
    
        <span style="background-image:url(/images/springboot/spring-rest/swagger.png)" alt="Spring Rest API - Spring Boot Swagger 사용하기" class="thumbnail-image"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/11/03/spring/spring-rest/rest-api-05-swagger/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-Rest/">Spring Rest</a>
            </div>
            <div class="date"><time datetime="2021-11-03T14:47:05.000Z" itemprop="datePublished">2021-11-03</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/11/03/spring/spring-rest/rest-api-05-swagger/">Spring Rest API - Spring Boot Swagger 사용하기</a>
        </h1>
    

        <p class="article-excerpt">
            
목차
Spring Rest API - Spring Boot Swagger 사용하기
Spring Rest API - ExceptionHandling
Spring Rest API - HTTP Status Code 다루기
Spring Rest API - 도메인 및 서비스 로직 작성하기
Spring Rest API - Rest API 시작하기 Controller 작성

Spring Boot Rest API - Spring Boot Swagger 사용하기
Swagger 란 Open API Specification(OAS) 를 위한 프레임워크다. 개발자가 REST API 서비스를 설계, 빌드, 문서화 할 수 있도록 도와준다.

Swagger를 사용하기 위한 의존성 추가하기implementation &quot;io.springfox:springfox-boot-starter:3.0.0&quot;

Swagger를 사용하기 위한 설정 추가
Docket
Swagger 설정의 핵심이 되는 Bean


apis
ApiSelectorBuilder 를 생성
명시된 Package나 어노테이션를 대상으로 Swagger API 문서를 만든다.
RequestHandlerSelectors 클래스 메소드를 통해 설정한다.
any : 전부
basePackage : 명시된 패키지를 대상으로 Swagger API 문서를 만든다.
withClassAnnotation : 명시된 어노테이션이 붙은 Class만 Swagger API 문서를 만든다.
withMethodAnnotation : 명시된 어노테이션이 붙은 Method만 Swagger API 문서를 만든다.




paths
apis 에서 명시된 대상에서 paths 조건에 맞는 것만 Swagger API 문서를 만들 수 있도록 필터링 한다.



Open API 3.0 사용한 방법
        </p>
    </div>
</article>
    

    
    
    
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/10/26/spring/spring-security/security/authentication/usernamepasswordAuthenticationFilter/" class="thumbnail">
    
    
        <span style="background-image:url(/images/springboot/security/spring-security/usernamepasswordauthenticationfilter.png)" alt="Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter" class="thumbnail-image"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/10/26/spring/spring-security/security/authentication/usernamepasswordAuthenticationFilter/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-Security/">Spring Security</a>
            </div>
            <div class="date"><time datetime="2021-10-26T13:25:35.000Z" itemprop="datePublished">2021-10-26</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/10/26/spring/spring-security/security/authentication/usernamepasswordAuthenticationFilter/">Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter</a>
        </h1>
    

        <p class="article-excerpt">
            
목차
Spring Security 권한 계층 사용하기 - @RoleHierarcy
Spring Security -  DelegateFilterProxy
Spring Security - Remember Me와 관련된 인증 API - RememberMeConfigurer
Spring Security - RembmerMeAuthenticationFilter
Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter
Spring Security - 인가 API ExpressionUrlAuthorizationConfigurer
Spring Security - Security 설정을 위한 WebSecurityConfigurerAdatper
Spring Security - AuthenticationProvider
Spring Security - AuthenticationManager
Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter
Spring Security - SecurityContextHolder 와 SecurityContext  
Spring Security - Authentication 객체

참고
https://spring.io/guides/topicals/spring-security-architecture

AbstractAuthenticationProcessingFilter 인증 과정
AbstractAuthenticationProcessingFilter 는 Spring Security Filter에서 인증 과정을 구현한 추상 Class 다.


로그인을 진행하는 URL로 로그인 요청이 들어왔는지 확인한다.
요청에 대한 인증을 진행하고 Authentication 객체를 반환 받는다.
Session 전략에 따라 적절한 처리를 진행한다. (Session Id 변경)
인증이 완료 됐으면 Authentication 객체를 SecurityContext에 저장한다.

AbstractAuthenticationProcessingFilter.java
@Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123;    doFilter((HttpServletRequest)request, (HttpServletResponse)response, chain);&#125;private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain)        throws IOException, ServletException &#123;    // 로그인을 진행하는 URL로 로그인 요청이 들어왔는지 확인한다.    if (!requiresAuthentication(request, response)) &#123;        chain.doFilter(request, response);        return;    &#125;    try &#123;        // 인증을 진행하고 생성된 Authentication 객체를 반환받는다.        // AbstractAuthenticationProcessingFilter 를 상속받은 Class에 의해 구현되는 부분        Authentication authenticationResult = attemptAuthentication(request, response);        if (authenticationResult == null) &#123;            return;        &#125;        // Session에 대한 설정을 한다. Session Id를 변경        this.sessionStrategy.onAuthentication(authenticationResult, request, response);        // Authentication success        if (this.continueChainBeforeSuccessfulAuthentication) &#123;            chain.doFilter(request, response);        &#125;        // 인증 후 처리를 진행한다.        successfulAuthentication(request, response, chain, authenticationResult);    &#125;    catch (InternalAuthenticationServiceException failed) &#123;        this.logger.error(&quot;An internal error occurred while trying to authenticate the user.&quot;, failed);        unsuccessfulAuthentication(request, response, failed);    &#125;    catch (AuthenticationException ex) &#123;        // Authentication failed        unsuccessfulAuthentication(request, response, ex);    &#125;&#125;
        </p>
    </div>
</article>
    
        </div>
    

    
    
    
    
        <div class="article-row">
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/10/25/spring/spring-security/security/configure/authorization/" class="thumbnail">
    
    
        <span style="background-image:url(/images/springboot/security/inflearn-whiteship-security/spring-security.png)" alt="Spring Security - 인가 API ExpressionUrlAuthorizationConfigurer" class="thumbnail-image"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/10/25/spring/spring-security/security/configure/authorization/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-Security/">Spring Security</a>
            </div>
            <div class="date"><time datetime="2021-10-25T01:25:35.000Z" itemprop="datePublished">2021-10-25</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/10/25/spring/spring-security/security/configure/authorization/">Spring Security - 인가 API ExpressionUrlAuthorizationConfigurer</a>
        </h1>
    

        <p class="article-excerpt">
            
목차
Spring Security 권한 계층 사용하기 - @RoleHierarcy
Spring Security -  DelegateFilterProxy
Spring Security - Remember Me와 관련된 인증 API - RememberMeConfigurer
Spring Security - RembmerMeAuthenticationFilter
Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter
Spring Security - 인가 API ExpressionUrlAuthorizationConfigurer
Spring Security - Security 설정을 위한 WebSecurityConfigurerAdatper
Spring Security - AuthenticationProvider
Spring Security - AuthenticationManager
Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter
Spring Security - SecurityContextHolder 와 SecurityContext  
Spring Security - Authentication 객체

인가 API
ExpressionUrlAuthorizationConfigurer 를 통해 자원에 접근하기 위한 다양한 인가 방식을 지원한다.역할(ROLE) 기반 인가 방식, 권한(Authority) 기반 인가 방식, IP 를 통한 인가 방식등 다양한 API를 제공한다.


hasRole
명시된 권한에 접미사 ROLE_ 을 붙이고 해당 권한을 가진 사용자만 자원에 접근을 허용한다.
hasAuthority 와 비슷한 개념이지만 hasRole 은 USER, MANAGER, ADMIN과 같은 역할 에 따라 자원에 대한 접근을 허용한다.


hasAnyRole
명시된 권한들에 접미사 ROLE_ 을 붙이고 사용자가 하나라도 권한을 갖고 있으면 해당 자원에 대한 접근을 허용한다.


hasAuthority
해당 권한을 가진 사용자만 자원에 접근을 허용한다.
hasRole 와 비슷한 개념이지만 hasAuthority는 CREATE, READ, WRITE, DELETE 와 같이 권한 에 따라 자원에 대한 접근을 허용한다.


hasAnyAuthority
명시된 권한들 중 하나라도 권한이 있는 사용자만 자원에 접근을 허용한다.


hasIpAddress
특정 IP 에 대해 자원에 대한 접근을 허용할 때 사용한다.


permitAll
권한에 대한 검증 없이 자원에 대한 접근을 허용한다.


anonymous
익명 사용자의 접근을 허용
익명 사용자는 기본적으로 ROLE_ANONYMOUS 권한이 부여돼 있다.


rememberMe
Remember-Me 를 통해 인증된 사용자가 자원에 대한 접근을 허용한다.


denyAll
모든 접근을 허용하지 않는다.


authenticated
인증된 사용자만 자원에 대한 접근을 허용한다.


fullyAuthenticated
Remember-Me 를 통해 인증된 사용자를 제외하고 인증된 사용자에 대한 접근을 허용한다.



ExpressionUrlAuthorizationConfigurerpublic ExpressionInterceptUrlRegistry hasRole(String role) &#123;    return access(ExpressionUrlAuthorizationConfigurer        .hasRole(ExpressionUrlAuthorizationConfigurer.this.rolePrefix, role));&#125;public ExpressionInterceptUrlRegistry hasAnyRole(String... roles) &#123;    return access(ExpressionUrlAuthorizationConfigurer        .hasAnyRole(ExpressionUrlAuthorizationConfigurer.this.rolePrefix, roles));&#125;public ExpressionInterceptUrlRegistry hasAuthority(String authority) &#123;    return access(ExpressionUrlAuthorizationConfigurer.hasAuthority(authority));&#125;public ExpressionInterceptUrlRegistry hasAnyAuthority(String... authorities) &#123;    return access(ExpressionUrlAuthorizationConfigurer.hasAnyAuthority(authorities));&#125;public ExpressionInterceptUrlRegistry hasIpAddress(String ipaddressExpression) &#123;    return access(ExpressionUrlAuthorizationConfigurer.hasIpAddress(ipaddressExpression));&#125;public ExpressionInterceptUrlRegistry permitAll() &#123;    return access(permitAll);&#125;public ExpressionInterceptUrlRegistry anonymous() &#123;    return access(anonymous);&#125;public ExpressionInterceptUrlRegistry rememberMe() &#123;    return access(rememberMe);&#125;public ExpressionInterceptUrlRegistry denyAll() &#123;    return access(denyAll);&#125;public ExpressionInterceptUrlRegistry authenticated() &#123;    return access(authenticated);&#125;public ExpressionInterceptUrlRegistry fullyAuthenticated() &#123;    return access(fullyAuthenticated);&#125;public ExpressionInterceptUrlRegistry access(String attribute) &#123;    if (this.not) &#123;        attribute = &quot;!&quot; + attribute;    &#125;    interceptUrl(this.requestMatchers, SecurityConfig.createList(attribute));    return ExpressionUrlAuthorizationConfigurer.this.REGISTRY;&#125;
        </p>
    </div>
</article>
    

    
    
    
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/10/24/spring/spring-security/security/filter/sessionmanagementfilter/" class="thumbnail">
    
    
        <span style="background-image:url(/images/springboot/security/inflearn-whiteship-security/spring-security.png)" alt="Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter" class="thumbnail-image"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/10/24/spring/spring-security/security/filter/sessionmanagementfilter/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-Security/">Spring Security</a>
            </div>
            <div class="date"><time datetime="2021-10-24T14:25:35.000Z" itemprop="datePublished">2021-10-24</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/10/24/spring/spring-security/security/filter/sessionmanagementfilter/">Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter</a>
        </h1>
    

        <p class="article-excerpt">
            
목차
Spring Security 권한 계층 사용하기 - @RoleHierarcy
Spring Security -  DelegateFilterProxy
Spring Security - Remember Me와 관련된 인증 API - RememberMeConfigurer
Spring Security - RembmerMeAuthenticationFilter
Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter
Spring Security - 인가 API ExpressionUrlAuthorizationConfigurer
Spring Security - Security 설정을 위한 WebSecurityConfigurerAdatper
Spring Security - AuthenticationProvider
Spring Security - AuthenticationManager
Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter
Spring Security - SecurityContextHolder 와 SecurityContext  
Spring Security - Authentication 객체

SessionManagementFilter
SessionManagementFilter 는 인증된 사용자에 대한 Session 관리 와 Session 공격으로 부터의 보호 를 위한 Filter


Session 관리
인증시 사용자의 Session 등록, 조회, 삭제 등의 이력을 관리한다.


동시성 Session 제어
동일 계정으로 접속하는 최대 Session 수를 설정한다.


Session 고정 보호
인증할때 마다 새로운 Session 쿠키를 새로 발급해 쿠키 조작을 방지한다.


Session 생성 정책

SessionManagementFilter.java
private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain)        throws IOException, ServletException &#123;    if (request.getAttribute(FILTER_APPLIED) != null) &#123;        chain.doFilter(request, response);        return;    &#125;    request.setAttribute(FILTER_APPLIED, Boolean.TRUE);    if (!this.securityContextRepository.containsContext(request)) &#123;        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();        if (authentication != null &amp;&amp; !this.trustResolver.isAnonymous(authentication)) &#123;            try &#123;                // 최대 생성 개수를 넘어섰는지?, Session 고정 공격이 들어왔는지? 등                // Session에 대한 인증을 진행한다.                this.sessionAuthenticationStrategy.onAuthentication(authentication, request, response);            &#125; catch (SessionAuthenticationException ex) &#123;                this.logger.debug(&quot;SessionAuthenticationStrategy rejected the authentication object&quot;, ex);                SecurityContextHolder.clearContext();                this.failureHandler.onAuthenticationFailure(request, response, ex);                return;            &#125;            this.securityContextRepository.saveContext(SecurityContextHolder.getContext(), request, response);        &#125; else &#123;            if (request.getRequestedSessionId() != null &amp;&amp; !request.isRequestedSessionIdValid()) &#123;                if (this.logger.isDebugEnabled()) &#123;                    this.logger.debug(LogMessage.format(&quot;Request requested invalid session id %s&quot;,                            request.getRequestedSessionId()));                &#125;                if (this.invalidSessionStrategy != null) &#123;                    this.invalidSessionStrategy.onInvalidSessionDetected(request, response);                    return;                &#125;            &#125;        &#125;    &#125;    chain.doFilter(request, response);&#125;

Session 관리를 위한 SessionAuthenticationStrategy
SessionAuthenticationStrategy 는 Session 이 존재하는지 확인하거나 Session 고정 공격에 대한 보호를 위해 Session Id를 변경한다.

        </p>
    </div>
</article>
    
        </div>
    

    
    
    
    
        <div class="article-row">
    
        <article class="article article-summary">
    <div class="article-summary-inner">
        
        <a href="/2021/10/24/spring/spring-security/security/filter/remembermeauthenticationfilter/" class="thumbnail">
    
    
        <span style="background-image:url(/images/springboot/security/inflearn-whiteship-security/spring-security.png)" alt="Spring Security - RembmerMeAuthenticationFilter" class="thumbnail-image"></span>
    
    
        
<span class="comment-counter">
    <i class="fa fa-comments-o"></i>
    
        <span class="disqus-comment-count" data-disqus-identifier data-disqus-url="https://ckck803.github.io/2021/10/24/spring/spring-security/security/filter/remembermeauthenticationfilter/">0</span>
    
</span>


    
</a>

        
        <div class="article-meta">
            <div class="category">
            <a class="article-category-link" href="/categories/Spring/">Spring</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Spring/Spring-Security/">Spring Security</a>
            </div>
            <div class="date"><time datetime="2021-10-24T13:25:35.000Z" itemprop="datePublished">2021-10-24</time></div>
        </div>
        
    
        <h1 class="article-title" itemprop="name">
        <a href="/2021/10/24/spring/spring-security/security/filter/remembermeauthenticationfilter/">Spring Security - RembmerMeAuthenticationFilter</a>
        </h1>
    

        <p class="article-excerpt">
            
목차
Spring Security 권한 계층 사용하기 - @RoleHierarcy
Spring Security -  DelegateFilterProxy
Spring Security - Remember Me와 관련된 인증 API - RememberMeConfigurer
Spring Security - RembmerMeAuthenticationFilter
Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter
Spring Security - 인가 API ExpressionUrlAuthorizationConfigurer
Spring Security - Security 설정을 위한 WebSecurityConfigurerAdatper
Spring Security - AuthenticationProvider
Spring Security - AuthenticationManager
Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter
Spring Security - SecurityContextHolder 와 SecurityContext  
Spring Security - Authentication 객체

참고
https://docs.spring.io/spring-security/reference/servlet/authentication/rememberme.html

RembmerMeAuthenticationFilter
Client 로부터 Request(요청) 이 오게 되면 Request 객체 Cookie 에 Remember Me Token 이 있는지 확인한다.
Token 을 이용해 인증을 진행한 후 SecurityContext 에 Authentication 객체를 저장한다.

RememberMeAuthenticationFilter.java
private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain)        throws IOException, ServletException &#123;    // SecurityContext 내 Authentication 객체가 있는지 확인 한다.    if (SecurityContextHolder.getContext().getAuthentication() != null) &#123;        this.logger.debug(LogMessage                .of(() -&gt; &quot;SecurityContextHolder not populated with remember-me token, as it already contained: &#x27;&quot;                        + SecurityContextHolder.getContext().getAuthentication() + &quot;&#x27;&quot;));        chain.doFilter(request, response);        return;    &#125;    // Remember Me 인증을 진행한 후 Authentication 객체를 반환받는다.    Authentication rememberMeAuth = this.rememberMeServices.autoLogin(request, response);    if (rememberMeAuth != null) &#123;        // Attempt authenticaton via AuthenticationManager        try &#123;            // RememberMeAuthenticationToken 객체내 Key 값에 대한 Hash 비교를 통해 유효성 인증을 진행 후 객체를 그대로 반환받는다.            rememberMeAuth = this.authenticationManager.authenticate(rememberMeAuth);            // SecurityContextHolder 에 인증 받은 Authentication 객체를 저장한다.            SecurityContextHolder.getContext().setAuthentication(rememberMeAuth);            // 인증 성공 후 후작업을 진행한다.            onSuccessfulAuthentication(request, response, rememberMeAuth);            this.logger.debug(LogMessage.of(() -&gt; &quot;SecurityContextHolder populated with remember-me token: &#x27;&quot;                    + SecurityContextHolder.getContext().getAuthentication() + &quot;&#x27;&quot;));            if (this.eventPublisher != null) &#123;                this.eventPublisher.publishEvent(new InteractiveAuthenticationSuccessEvent(                        SecurityContextHolder.getContext().getAuthentication(), this.getClass()));            &#125;            if (this.successHandler != null) &#123;                this.successHandler.onAuthenticationSuccess(request, response, rememberMeAuth);                return;            &#125;        &#125; catch (AuthenticationException ex) &#123;            this.logger.debug(LogMessage                    .format(&quot;SecurityContextHolder not populated with remember-me token, as AuthenticationManager &quot;                            + &quot;rejected Authentication returned by RememberMeServices: &#x27;%s&#x27;; &quot;                            + &quot;invalidating remember-me token&quot;, rememberMeAuth),                    ex);            this.rememberMeServices.loginFail(request, response);            onUnsuccessfulAuthentication(request, response, ex);        &#125;    &#125;    chain.doFilter(request, response);&#125;

AbstractRememberMeServices
        </p>
    </div>
</article>
    
        </div>
    


    </div></section>


    <nav id="page-nav">
        <span class="pages">Page 8 of 19</span>
        <a class="extend prev" rel="prev" href="/categories/Spring/page/7/">&laquo;</a><a class="page-number" href="/categories/Spring/">1</a><span class="space">&hellip;</span><a class="page-number" href="/categories/Spring/page/6/">6</a><a class="page-number" href="/categories/Spring/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/categories/Spring/page/9/">9</a><a class="page-number" href="/categories/Spring/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/categories/Spring/page/19/">19</a><a class="extend next" rel="next" href="/categories/Spring/page/9/">&raquo;</a>
    </nav>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/ckck803" target="_blank" rel="external nofollow noopener noreferrer">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AWS/">AWS</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AWS/EKS/">EKS</a><span class="category-list-count">9</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a><span class="category-list-count">50</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/DataBase/">DataBase</a><span class="category-list-count">16</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/DataBase/SQL/">SQL</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/DataBase/Scan/">Scan</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/DataBase/Transaction/">Transaction</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Network/">Network</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Network/HTTP/">HTTP</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Network/Security/">Security</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Process/">Process</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Programming-Lanuage/">Programming Lanuage</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Programming-Lanuage/JAVA/">JAVA</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/">운영체제</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/">컴퓨터 구조</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B4%80%EB%A6%AC/">메모리 관리</a><span class="category-list-count">2</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a><span class="category-list-count">22</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/ArgoCD/">ArgoCD</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Gitea/">Gitea</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Harbor/">Harbor</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Jenkins/">Jenkins</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Jmeter/">Jmeter</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/KeyCloak/">KeyCloak</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Kiali/">Kiali</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Maven/">Maven</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Nexus/">Nexus</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/OpenSearch/">OpenSearch</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/SonarQube/">SonarQube</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/">Frontend</a><span class="category-list-count">53</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Login/">Login</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/React/">React</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/React/TypeScript/">TypeScript</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/React-Query/">React Query</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Redux/">Redux</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/To-do-List/">To do List</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/ToastUI/">ToastUI</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Vite/">Vite</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Vue/">Vue</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Vue3/">Vue3</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/%EB%A1%9C%EA%B7%B8%EC%9D%B8/">로그인</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/">블로그</a><span class="category-list-count">15</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/">Kubernetes</a><span class="category-list-count">39</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/Autoscaler/">Autoscaler</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/Config/">Config</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/Custom/">Custom</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/Helm/">Helm</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/Istio/">Istio</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/">구성요소</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/%EC%84%9C%EB%B9%84%EC%8A%A4/">서비스</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/">워크로드</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/">Programming</a><span class="category-list-count">166</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/">Beakjoon</a><span class="category-list-count">40</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/BFS/">BFS</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/DFS/">DFS</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/SAMSUNG/">SAMSUNG</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/SAMSUNG/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/">시뮬레이션</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/">경우의 수</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/%EA%B7%B8%EB%9E%98%ED%94%84/">그래프</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/">다익스트라</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/">시뮬레이션</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/%EC%9D%B4%EB%B6%84%ED%83%90%EC%83%89/">이분탐색</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/">자료구조</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/List/">List</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/SET/">SET</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/">스택</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/">카테고리</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Cpp/">Cpp</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Cpp/STL/">STL</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Django/">Django</a><span class="category-list-count">32</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Docker/">Docker</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Docker/Docker-Compose/">Docker Compose</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/JAVA/">JAVA</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/JAVA/Collection/">Collection</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/JAVA/REST/">REST</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/JAVA/Rest/">Rest</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/JPA/">JPA</a><span class="category-list-count">26</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/JPA/JPA-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EA%B8%B0%EB%B3%B8%ED%8E%B8/">JPA 프로그래밍(기본편)</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/">연관관계</a><span class="category-list-count">13</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Kafka/">Kafka</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/MySQL/">MySQL</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Oracle/">Oracle</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/QueryDSL/">QueryDSL</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/">프로그래머스</a><span class="category-list-count">23</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/">경우의 수</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/%EC%A4%91%EB%B3%B5-%EC%88%9C%EC%97%B4/">중복 순열</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/">문자열</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/%EC%A0%95%EA%B7%9C-%ED%91%9C%ED%98%84%EC%8B%9D/">정규 표현식</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/">자료구조</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/SET/">SET</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/">스택</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><span class="category-list-count">271</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Kafka/">Kafka</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-5/">Spring 5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/">Spring AOP</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/AOP-Aspect/">AOP Aspect</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/AspectJ/">AspectJ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/Bean-Post-Processor/">Bean Post Processor</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/Pointcut/">Pointcut</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/Spring-Proxy/">Spring Proxy</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%BB%B7/">포인트 컷</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Batch/">Spring Batch</a><span class="category-list-count">36</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Batch/Job/">Job</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Batch/Step/">Step</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Batch/Step/Chunk/">Chunk</a><span class="category-list-count">7</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Boot/">Spring Boot</a><span class="category-list-count">12</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Boot/Spring-Framework/">Spring Framework</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/">Spring Cloud</a><span class="category-list-count">34</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/Config/">Config</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/Feign-Client/">Feign Client</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/Gateway/">Gateway</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/Kafka/">Kafka</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/Service-Discovery/">Service Discovery</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Core/">Spring Core</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Data-JPA/">Spring Data JPA</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Framework/">Spring Framework</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Framework/lifecycle/">lifecycle</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-MVC/">Spring MVC</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Resource/">Spring Resource</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Resource/File/">File</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Rest/">Spring Rest</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/">Spring Security</a><span class="category-list-count">28</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/Filter/">Filter</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/Form-login/">Form login</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/JWT/">JWT</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/Oauth2/">Oauth2</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/Security/">Security</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/Security/Config/">Config</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95/">인증 과정</a><span class="category-list-count">5</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Test/">Spring Test</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-WebSocket/">Spring WebSocket</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a><span class="category-list-count">25</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/CGLIB/">CGLIB</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Decorator-%ED%8C%A8%ED%84%B4/">Decorator 패턴</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Dynamic-Proxy/">Dynamic Proxy</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Proxy-%ED%8C%A8%ED%84%B4/">Proxy 패턴</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Strategy-%ED%8C%A8%ED%84%B4/">Strategy 패턴</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Template-Callback-%ED%8C%A8%ED%84%B4/">Template Callback 패턴</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Template-Method-%ED%8C%A8%ED%84%B4/">Template Method 패턴</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/ThreadLocal/">ThreadLocal</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/%EA%B0%95%EC%9D%98/">강의</a><span class="category-list-count">19</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/">레스토랑 예약 사이트</a><span class="category-list-count">19</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/">게시판 만들기</a><span class="category-list-count">22</span></li></ul></li></ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2024 ckck803</p>
                
                <p>Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>. Theme by <a href="https://github.com/ppoffice" target="_blank" rel="external nofollow noopener noreferrer">PPOffice</a></p>
                
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

    </div>
    
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>





    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    

    
    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
