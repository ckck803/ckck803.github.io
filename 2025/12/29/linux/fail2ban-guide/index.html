<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="google" value="notranslate">

    

    
    <title>Fail2ban 설치 및 사용 가이드 | ddanzit</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="Linux,Security,Fail2ban,SSH,Firewall">
    
    <meta name="description" content="Fail2ban 개요Fail2ban은 로그 파일을 모니터링하여 악의적인 활동(무차별 대입 공격, 포트 스캔 등)을 탐지하고 자동으로 차단하는 침입 방지 소프트웨어입니다.  주요 기능 로그 파일 실시간 모니터링 정규표현식 기반 패턴 매칭 자동 IP 차단 (iptables, firewalld, ufw 등) 시간 기반 자동 차단 해제 이메일 알림 기능 다양한">
<meta property="og:type" content="article">
<meta property="og:title" content="Fail2ban 설치 및 사용 가이드">
<meta property="og:url" content="https://ckck803.github.io/2025/12/29/linux/fail2ban-guide/index.html">
<meta property="og:site_name" content="ddanzit">
<meta property="og:description" content="Fail2ban 개요Fail2ban은 로그 파일을 모니터링하여 악의적인 활동(무차별 대입 공격, 포트 스캔 등)을 탐지하고 자동으로 차단하는 침입 방지 소프트웨어입니다.  주요 기능 로그 파일 실시간 모니터링 정규표현식 기반 패턴 매칭 자동 IP 차단 (iptables, firewalld, ufw 등) 시간 기반 자동 차단 해제 이메일 알림 기능 다양한">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://ckck803.github.io/images/linux/linux.png">
<meta property="article:published_time" content="2025-12-29T03:00:00.000Z">
<meta property="article:modified_time" content="2025-12-29T03:47:15.365Z">
<meta property="article:author" content="ckck803">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Security">
<meta property="article:tag" content="Fail2ban">
<meta property="article:tag" content="SSH">
<meta property="article:tag" content="Firewall">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ckck803.github.io/images/linux/linux.png">
    

    

    
        <link rel="icon" href="/css/images/favicon/favicon.ico">
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/titillium-web/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/3.5.0/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    
    


    
<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosanskr.css">

    
<link rel="stylesheet" href="https://cdn.rawgit.com/innks/NanumSquareRound/master/nanumsquareround.css">
	
    
<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothiccoding.css">

<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/rss2.xml" title="ddanzit" type="application/rss+xml">
</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">딴짓하는 개발자</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                    <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AI/">AI</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AI/LLM/">LLM</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AI/RAG/">RAG</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AI/ollma/">ollma</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AWS/">AWS</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AWS/EKS/">EKS</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/">CS</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/DataBase/">DataBase</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/Network/">Network</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/Process/">Process</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/">운영체제</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/">컴퓨터 구조</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%96%B8%EC%96%B4/">프로그래밍 언어</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/">DevOps</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/CICD/">CICD</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Jmeter/">Jmeter</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/KeyCloak/">KeyCloak</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Kiali/">Kiali</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Linux/">Linux</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Maven/">Maven</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Nginx/">Nginx</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/OpenSearch/">OpenSearch</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/Repository/">Repository</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/DevOps/SonarQube/">SonarQube</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/">Develop</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/Beakjoon/">Beakjoon</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/Cpp/">Cpp</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/Database/">Database</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/Django/">Django</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/Docker/">Docker</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/Git/">Git</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/JAVA/">JAVA</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/JPA/">JPA</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/Kafka/">Kafka</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/Linux/">Linux</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/MySQL/">MySQL</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/Oracle/">Oracle</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/PostgreSQL/">PostgreSQL</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/QueryDSL/">QueryDSL</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/Redis/">Redis</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/">프로그래머스</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/">Frontend</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/Login/">Login</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/React/">React</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/React-Query/">React Query</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/Redux/">Redux</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/To-do-List/">To do List</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/ToastUI/">ToastUI</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/Vite/">Vite</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/Vue/">Vue</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/Vue3/">Vue3</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/%EB%A1%9C%EA%B7%B8%EC%9D%B8/">로그인</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/">블로그</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Infrastructure/">Infrastructure</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Infrastructure/DevOps/">DevOps</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/">Kubernetes</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/Autoscaler/">Autoscaler</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/Config/">Config</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/Custom/">Custom</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/Helm/">Helm</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/Istio/">Istio</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/">구성요소</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/%EC%84%9C%EB%B9%84%EC%8A%A4/">서비스</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/">워크로드</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kubernetes/%EC%9D%B8%EC%A6%9D-%EC%9D%B8%EA%B0%80/">인증/인가</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/">Spring</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/QueryDSL/">QueryDSL</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-AOP/">Spring AOP</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Batch/">Spring Batch</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Boot/">Spring Boot</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Cloud/">Spring Cloud</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Core/">Spring Core</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-DB/">Spring DB</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Data-JPA/">Spring Data JPA</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Framework/">Spring Framework</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-MVC/">Spring MVC</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Rest/">Spring Rest</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Security/">Spring Security</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-Test/">Spring Test</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-WebSocket/">Spring WebSocket</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/%EA%B0%95%EC%9D%98/">강의</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/">게시판 만들기</a></li></ul></li></ul>
                                
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Develop/">Develop</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/Develop/Linux/">Linux</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-linux/fail2ban-guide" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Fail2ban 설치 및 사용 가이드
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2025/12/29/linux/fail2ban-guide/" class="article-date">
       <time datetime="2025-12-29T03:00:00.000Z" itemprop="datePublished">2025-12-29</time>
    </a>
  </div>


<div class="article-date">
  <i class="fa fa-calendar-plus-o"></i>
  <a href="/2025/12/29/linux/fail2ban-guide/" class="article-date">
     <time datetime="2025-12-29T03:47:15.365Z" itemprop="dateModified">2025-12-29</time>
  </a>
</div>


                

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/Fail2ban/" rel="tag">Fail2ban</a>, <a class="tag-link-link" href="/tags/Firewall/" rel="tag">Firewall</a>, <a class="tag-link-link" href="/tags/Linux/" rel="tag">Linux</a>, <a class="tag-link-link" href="/tags/SSH/" rel="tag">SSH</a>, <a class="tag-link-link" href="/tags/Security/" rel="tag">Security</a>
    </div>

                

                

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            

            

            

            <p><img src="/images/linux/linux.png"></p>
<h2 id="Fail2ban-개요"><a href="#Fail2ban-개요" class="headerlink" title="Fail2ban 개요"></a>Fail2ban 개요</h2><p>Fail2ban은 로그 파일을 모니터링하여 악의적인 활동(무차별 대입 공격, 포트 스캔 등)을 탐지하고 자동으로 차단하는 침입 방지 소프트웨어입니다. </p>
<h3 id="주요-기능"><a href="#주요-기능" class="headerlink" title="주요 기능"></a>주요 기능</h3><ul>
<li>로그 파일 실시간 모니터링</li>
<li>정규표현식 기반 패턴 매칭</li>
<li>자동 IP 차단 (iptables, firewalld, ufw 등)</li>
<li>시간 기반 자동 차단 해제</li>
<li>이메일 알림 기능</li>
<li>다양한 서비스 지원 (SSH, Apache, Nginx, MySQL 등)</li>
</ul>
<h3 id="작동-원리"><a href="#작동-원리" class="headerlink" title="작동 원리"></a>작동 원리</h3><ol>
<li><strong>로그 모니터링</strong>: Fail2ban은 지정된 로그 파일을 실시간으로 감시합니다.</li>
<li><strong>패턴 매칭</strong>: 설정된 정규표현식 패턴(filter)과 로그를 비교합니다.</li>
<li><strong>실패 횟수 카운트</strong>: 특정 IP에서 실패가 발생할 때마다 카운트를 증가시킵니다.</li>
<li><strong>차단 실행</strong>: 설정된 임계값(maxretry)을 초과하면 해당 IP를 차단합니다.</li>
<li><strong>자동 해제</strong>: 설정된 시간(bantime) 후 자동으로 차단을 해제합니다.</li>
</ol>
<h2 id="1-설치"><a href="#1-설치" class="headerlink" title="1. 설치"></a>1. 설치</h2><h4 id="Ubuntu-Debian"><a href="#Ubuntu-Debian" class="headerlink" title="Ubuntu&#x2F;Debian"></a>Ubuntu&#x2F;Debian</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 패키지 업데이트</span></span><br><span class="line">sudo apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fail2ban 설치</span></span><br><span class="line">sudo apt install fail2ban -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 서비스 시작 및 자동 시작 설정</span></span><br><span class="line">sudo systemctl start fail2ban</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> fail2ban</span><br><span class="line"><span class="comment"># 상태 확인</span></span><br><span class="line">sudo systemctl status fail2ban</span><br></pre></td></tr></table></figure>


<h4 id="CentOS-RHEL"><a href="#CentOS-RHEL" class="headerlink" title="CentOS&#x2F;RHEL"></a>CentOS&#x2F;RHEL</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># EPEL 저장소 활성화</span></span><br><span class="line">sudo yum install epel-release -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fail2ban 설치</span></span><br><span class="line">sudo yum install fail2ban fail2ban-systemd -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 서비스 시작 및 자동 시작 설정</span></span><br><span class="line">sudo systemctl start fail2ban</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> fail2ban</span><br><span class="line"></span><br><span class="line"><span class="comment"># 상태 확인</span></span><br><span class="line">sudo systemctl status fail2ban</span><br></pre></td></tr></table></figure>

<h4 id="상태-확인"><a href="#상태-확인" class="headerlink" title="상태 확인"></a>상태 확인</h4><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&gt; sudo systemctl status fail2ban</span><br><span class="line"></span><br><span class="line">● fail2ban.service - Fail2Ban Service</span><br><span class="line">     Loaded: loaded (/usr/lib/systemd/system/fail2ban.service; enabled; preset: enabled)</span><br><span class="line">     Active: active (running) since Thu 2025-10-30 23:11:05 KST; 1 month 29 days ago</span><br><span class="line">       Docs: man:fail2ban(1)</span><br><span class="line">   Main PID: 1267 (fail2ban-server)</span><br><span class="line">      Tasks: 5 (<span class="built_in">limit</span>: 37661)</span><br><span class="line">     Memory: 48.9M (peak: 79.8M)</span><br><span class="line">        CPU: 44min 41.012s</span><br><span class="line">     CGroup: /system.slice/fail2ban.service</span><br><span class="line">             └─1267 /usr/bin/python3 /usr/bin/fail2ban-server -xf start</span><br></pre></td></tr></table></figure>

<h4 id="버전-확인"><a href="#버전-확인" class="headerlink" title="버전 확인"></a>버전 확인</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fail2ban-server --version</span><br></pre></td></tr></table></figure>

<h2 id="2-기본-설정"><a href="#2-기본-설정" class="headerlink" title="2. 기본 설정"></a>2. 기본 설정</h2><h4 id="설정-파일-구조"><a href="#설정-파일-구조" class="headerlink" title="설정 파일 구조"></a>설정 파일 구조</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/etc/fail2ban/</span><br><span class="line">├── fail2ban.conf          <span class="comment"># Fail2ban 데몬 설정 (수정 X)</span></span><br><span class="line">├── fail2ban.local         <span class="comment"># fail2ban.conf 오버라이드용</span></span><br><span class="line">├── jail.conf              <span class="comment"># Jail 기본 설정 (수정 X)</span></span><br><span class="line">├── jail.local             <span class="comment"># jail.conf 오버라이드용 (주요 설정 파일)</span></span><br><span class="line">├── jail.d/                <span class="comment"># 개별 jail 설정 디렉토리</span></span><br><span class="line">├── filter.d/              <span class="comment"># 필터 정의 파일들</span></span><br><span class="line">├── action.d/              <span class="comment"># 액션 정의 파일들</span></span><br><span class="line">└── fail2ban.d/            <span class="comment"># fail2ban 추가 설정</span></span><br></pre></td></tr></table></figure>

<h4 id="jail-local-생성"><a href="#jail-local-생성" class="headerlink" title="jail.local 생성"></a>jail.local 생성</h4><p>Fail2ban의 기본 설정 파일은 <strong>&#x2F;etc&#x2F;fail2ban&#x2F;jail.conf</strong> 에 있습니다. 그러나 기본 파일을 직접 수정하는 것은 업데이트 시 덮어쓰여질 수 있으므로, <strong>로컬 설정 파일</strong>인 <code>/etc/fail2ban/jail.local</code>을 만들어 사용자 설정을 오버라이드하는 것이 좋습니다.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 원본 설정 파일을 직접 수정하지 않고 `.local` 파일을 생성하여 설정을 오버라이드합니다.</span></span><br><span class="line"><span class="comment"># jail.conf를 복사하여 jail.local 생성</span></span><br><span class="line">sudo <span class="built_in">cp</span> /etc/fail2ban/jail.conf /etc/fail2ban/jail.local</span><br><span class="line"></span><br><span class="line"><span class="comment"># 또는 직접 생성</span></span><br><span class="line">sudo vim /etc/fail2ban/jail.local</span><br></pre></td></tr></table></figure>

<h4 id="기본-설정-예시"><a href="#기본-설정-예시" class="headerlink" title="기본 설정 예시"></a>기본 설정 예시</h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[DEFAULT]</span></span><br><span class="line"><span class="comment"># 무시할 IP 목록 (쉼표 또는 공백으로 구분)</span></span><br><span class="line"><span class="attr">ignoreip</span> = <span class="number">127.0</span>.<span class="number">0.1</span>/<span class="number">8</span> ::<span class="number">1</span> <span class="number">192.168</span>.<span class="number">1.0</span>/<span class="number">24</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 기본 차단 시간 (초) - 10분</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">10</span>m</span><br><span class="line"></span><br><span class="line"><span class="comment"># 차단 전 관찰 시간 (초) - 10분</span></span><br><span class="line"><span class="attr">findtime</span> = <span class="number">10</span>m</span><br><span class="line"></span><br><span class="line"><span class="comment"># 최대 재시도 횟수</span></span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 관리자 이메일 (알림 받을 주소)</span></span><br><span class="line"><span class="attr">destemail</span> = admin@example.com</span><br><span class="line"><span class="attr">sender</span> = fail2ban@example.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 이메일 알림 액션</span></span><br><span class="line"><span class="attr">action</span> = %(action_mwl)s</span><br><span class="line"></span><br><span class="line"><span class="comment"># 차단 방법 (iptables, firewalld 등)</span></span><br><span class="line"><span class="attr">banaction</span> = iptables-multiport</span><br></pre></td></tr></table></figure>

<h3 id="주요-파라미터-설명"><a href="#주요-파라미터-설명" class="headerlink" title="주요 파라미터 설명"></a>주요 파라미터 설명</h3><ul>
<li><strong>bantime</strong>: IP 차단 유지 시간 (예: 10m, 1h, 1d, -1은 영구)</li>
<li><strong>findtime</strong>: 실패 횟수를 세는 기간</li>
<li><strong>maxretry</strong>: findtime 동안 허용되는 최대 실패 횟수</li>
<li><strong>ignoreip</strong>: 차단하지 않을 IP 주소 또는 대역</li>
<li><strong>destemail</strong>: 알림을 받을 이메일 주소</li>
<li><strong>action</strong>: 차단 시 실행할 액션</li>
</ul>
<h2 id="3-Jail-설정"><a href="#3-Jail-설정" class="headerlink" title="3. Jail 설정"></a>3. Jail 설정</h2><p>Jail은 특정 서비스에 대한 보호 규칙을 정의합니다.</p>
<h4 id="SSH-보호-설정"><a href="#SSH-보호-설정" class="headerlink" title="SSH 보호 설정"></a>SSH 보호 설정</h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[sshd]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = ssh,<span class="number">22</span></span><br><span class="line"><span class="attr">filter</span> = sshd</span><br><span class="line"><span class="attr">logpath</span> = /var/log/auth.log    <span class="comment"># Ubuntu/Debian</span></span><br><span class="line"><span class="comment"># logpath = /var/log/secure     # CentOS/RHEL</span></span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">5</span></span><br><span class="line"><span class="attr">findtime</span> = <span class="number">10</span>m</span><br><span class="line"><span class="attr">bantime</span> = <span class="number">1</span>h</span><br></pre></td></tr></table></figure>

<h4 id="Apache-보호-설정"><a href="#Apache-보호-설정" class="headerlink" title="Apache 보호 설정"></a>Apache 보호 설정</h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[apache-auth]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = http,https</span><br><span class="line"><span class="attr">filter</span> = apache-auth</span><br><span class="line"><span class="attr">logpath</span> = /var/log/apache2/error.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">1</span>h</span><br><span class="line"></span><br><span class="line"><span class="section">[apache-badbots]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = http,https</span><br><span class="line"><span class="attr">filter</span> = apache-badbots</span><br><span class="line"><span class="attr">logpath</span> = /var/log/apache2/access.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">2</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">24</span>h</span><br><span class="line"></span><br><span class="line"><span class="section">[apache-noscript]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = http,https</span><br><span class="line"><span class="attr">filter</span> = apache-noscript</span><br><span class="line"><span class="attr">logpath</span> = /var/log/apache2/error.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">1</span>h</span><br></pre></td></tr></table></figure>

<h4 id="Nginx-보호-설정"><a href="#Nginx-보호-설정" class="headerlink" title="Nginx 보호 설정"></a>Nginx 보호 설정</h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[nginx-http-auth]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = http,https</span><br><span class="line"><span class="attr">filter</span> = nginx-http-auth</span><br><span class="line"><span class="attr">logpath</span> = /var/log/nginx/error.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">1</span>h</span><br><span class="line"></span><br><span class="line"><span class="section">[nginx-limit-req]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = http,https</span><br><span class="line"><span class="attr">filter</span> = nginx-limit-req</span><br><span class="line"><span class="attr">logpath</span> = /var/log/nginx/error.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">10</span></span><br><span class="line"><span class="attr">findtime</span> = <span class="number">60</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">1</span>h</span><br><span class="line"></span><br><span class="line"><span class="section">[nginx-botsearch]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = http,https</span><br><span class="line"><span class="attr">filter</span> = nginx-botsearch</span><br><span class="line"><span class="attr">logpath</span> = /var/log/nginx/access.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">2</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">24</span>h</span><br></pre></td></tr></table></figure>

<h4 id="MySQL-보호-설정"><a href="#MySQL-보호-설정" class="headerlink" title="MySQL 보호 설정"></a>MySQL 보호 설정</h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[mysqld-auth]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = <span class="number">3306</span></span><br><span class="line"><span class="attr">filter</span> = mysqld-auth</span><br><span class="line"><span class="attr">logpath</span> = /var/log/mysql/error.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">5</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">1</span>h</span><br></pre></td></tr></table></figure>

<h4 id="개별-Jail-파일-생성"><a href="#개별-Jail-파일-생성" class="headerlink" title="개별 Jail 파일 생성"></a>개별 Jail 파일 생성</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># jail.d 디렉토리에 개별 설정 생성</span></span><br><span class="line">sudo vim /etc/fail2ban/jail.d/sshd.local</span><br></pre></td></tr></table></figure>

<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[sshd]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = <span class="number">2222</span>           <span class="comment"># 사용자 정의 SSH 포트</span></span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">24</span>h</span><br><span class="line"><span class="attr">findtime</span> = <span class="number">10</span>m</span><br></pre></td></tr></table></figure>

<h2 id="4-필터-Filter-설정"><a href="#4-필터-Filter-설정" class="headerlink" title="4. 필터 (Filter) 설정"></a>4. 필터 (Filter) 설정</h2><p>필터는 로그에서 실패를 감지하는 정규표현식 패턴을 정의합니다.</p>
<h4 id="기본-제공-필터-확인"><a href="#기본-제공-필터-확인" class="headerlink" title="기본 제공 필터 확인"></a>기본 제공 필터 확인</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ls</span> /etc/fail2ban/filter.d/</span><br></pre></td></tr></table></figure>

<h4 id="사용자-정의-필터-생성"><a href="#사용자-정의-필터-생성" class="headerlink" title="사용자 정의 필터 생성"></a>사용자 정의 필터 생성</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/fail2ban/filter.d/custom-app.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[Definition]</span></span><br><span class="line"><span class="comment"># 실패 패턴 정의</span></span><br><span class="line"><span class="attr">failregex</span> = ^&lt;HOST&gt; .* <span class="string">&quot;POST /login HTTP.*&quot;</span> <span class="number">401</span></span><br><span class="line">            ^&lt;HOST&gt; .* &quot;Authentication failed for user&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 성공 패턴 정의 (선택사항)</span></span><br><span class="line">ignoreregex =</span><br></pre></td></tr></table></figure>

<h4 id="필터-테스트"><a href="#필터-테스트" class="headerlink" title="필터 테스트"></a>필터 테스트</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 필터가 로그와 매칭되는지 테스트</span></span><br><span class="line">fail2ban-regex /var/log/auth.log /etc/fail2ban/filter.d/sshd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 사용자 정의 패턴 테스트</span></span><br><span class="line">fail2ban-regex /var/log/myapp.log /etc/fail2ban/filter.d/custom-app.conf</span><br></pre></td></tr></table></figure>

<h2 id="5-액션-Action-설정"><a href="#5-액션-Action-설정" class="headerlink" title="5. 액션 (Action) 설정"></a>5. 액션 (Action) 설정</h2><p>액션은 차단 시 실행할 동작을 정의합니다.</p>
<h4 id="기본-제공-액션-확인"><a href="#기본-제공-액션-확인" class="headerlink" title="기본 제공 액션 확인"></a>기본 제공 액션 확인</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ls</span> /etc/fail2ban/action.d/</span><br></pre></td></tr></table></figure>

<h4 id="주요-액션"><a href="#주요-액션" class="headerlink" title="주요 액션"></a>주요 액션</h4><ul>
<li><strong>iptables-multiport</strong>: 여러 포트를 한 번에 차단</li>
<li><strong>iptables-allports</strong>: 모든 포트 차단</li>
<li><strong>firewalld-cmd</strong>: firewalld 사용</li>
<li><strong>sendmail-whois</strong>: 이메일 알림 + WHOIS 정보</li>
</ul>
<h4 id="이메일-알림-설정"><a href="#이메일-알림-설정" class="headerlink" title="이메일 알림 설정"></a>이메일 알림 설정</h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[DEFAULT]</span></span><br><span class="line"><span class="comment"># 이메일 액션 선택</span></span><br><span class="line"><span class="comment"># action_: 차단만 실행</span></span><br><span class="line"><span class="comment"># action_mw: 차단 + 이메일 알림</span></span><br><span class="line"><span class="comment"># action_mwl: 차단 + 이메일 알림 + 로그 포함</span></span><br><span class="line"></span><br><span class="line"><span class="attr">action</span> = %(action_mwl)s</span><br><span class="line"></span><br><span class="line"><span class="attr">destemail</span> = admin@example.com</span><br><span class="line"><span class="attr">sender</span> = fail2ban@hostname</span><br><span class="line"><span class="attr">mta</span> = sendmail</span><br></pre></td></tr></table></figure>

<h4 id="사용자-정의-액션-생성"><a href="#사용자-정의-액션-생성" class="headerlink" title="사용자 정의 액션 생성"></a>사용자 정의 액션 생성</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/fail2ban/action.d/custom-notify.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[Definition]</span><br><span class="line"><span class="comment"># 차단 시 실행할 명령</span></span><br><span class="line">actionban = curl -X POST https://api.example.com/alert \</span><br><span class="line">            -d <span class="string">&quot;ip=&lt;ip&gt;&amp;service=&lt;name&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 차단 해제 시 실행할 명령</span></span><br><span class="line">actionunban = curl -X POST https://api.example.com/unblock \</span><br><span class="line">              -d <span class="string">&quot;ip=&lt;ip&gt;&amp;service=&lt;name&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">[Init]</span><br><span class="line"><span class="comment"># 초기화 파라미터</span></span><br><span class="line">name = default</span><br></pre></td></tr></table></figure>

<h2 id="6-관리-명령어"><a href="#6-관리-명령어" class="headerlink" title="6. 관리 명령어"></a>6. 관리 명령어</h2><h4 id="서비스-관리"><a href="#서비스-관리" class="headerlink" title="서비스 관리"></a>서비스 관리</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 서비스 시작</span></span><br><span class="line">sudo systemctl start fail2ban</span><br><span class="line"></span><br><span class="line"><span class="comment"># 서비스 중지</span></span><br><span class="line">sudo systemctl stop fail2ban</span><br><span class="line"></span><br><span class="line"><span class="comment"># 서비스 재시작</span></span><br><span class="line">sudo systemctl restart fail2ban</span><br><span class="line"></span><br><span class="line"><span class="comment"># 서비스 상태 확인</span></span><br><span class="line">sudo systemctl status fail2ban</span><br><span class="line"></span><br><span class="line"><span class="comment"># 설정 다시 로드</span></span><br><span class="line">sudo systemctl reload fail2ban</span><br><span class="line">sudo fail2ban-client reload</span><br></pre></td></tr></table></figure>

<h4 id="fail2ban-client-명령어"><a href="#fail2ban-client-명령어" class="headerlink" title="fail2ban-client 명령어"></a>fail2ban-client 명령어</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 전체 상태 확인</span></span><br><span class="line">sudo fail2ban-client status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 특정 jail 상태 확인</span></span><br><span class="line">sudo fail2ban-client status sshd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 활성화된 jail 목록</span></span><br><span class="line">sudo fail2ban-client status</span><br><span class="line"></span><br><span class="line"><span class="comment"># jail 시작/중지</span></span><br><span class="line">sudo fail2ban-client start sshd</span><br><span class="line">sudo fail2ban-client stop sshd</span><br><span class="line"></span><br><span class="line"><span class="comment"># jail 다시 로드</span></span><br><span class="line">sudo fail2ban-client reload sshd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 설정 확인</span></span><br><span class="line">sudo fail2ban-client get sshd bantime</span><br><span class="line">sudo fail2ban-client get sshd maxretry</span><br></pre></td></tr></table></figure>

<h4 id="IP-차단-관리"><a href="#IP-차단-관리" class="headerlink" title="IP 차단 관리"></a>IP 차단 관리</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 현재 차단된 IP 확인</span></span><br><span class="line">sudo fail2ban-client status sshd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 수동으로 IP 차단</span></span><br><span class="line">sudo fail2ban-client <span class="built_in">set</span> sshd banip 192.168.1.100</span><br><span class="line"></span><br><span class="line"><span class="comment"># IP 차단 해제</span></span><br><span class="line">sudo fail2ban-client <span class="built_in">set</span> sshd unbanip 192.168.1.100</span><br><span class="line"></span><br><span class="line"><span class="comment"># 모든 IP 차단 해제</span></span><br><span class="line">sudo fail2ban-client unban --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 특정 jail의 모든 IP 차단 해제</span></span><br><span class="line">sudo fail2ban-client <span class="built_in">set</span> sshd unbanip --all</span><br></pre></td></tr></table></figure>

<h4 id="로그-확인"><a href="#로그-확인" class="headerlink" title="로그 확인"></a>로그 확인</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Fail2ban 로그 확인</span></span><br><span class="line">sudo <span class="built_in">tail</span> -f /var/log/fail2ban.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 차단 이벤트만 확인</span></span><br><span class="line">sudo grep <span class="string">&quot;Ban&quot;</span> /var/log/fail2ban.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 특정 IP 관련 로그</span></span><br><span class="line">sudo grep <span class="string">&quot;192.168.1.100&quot;</span> /var/log/fail2ban.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 최근 차단된 IP 목록</span></span><br><span class="line">sudo grep <span class="string">&quot;Ban&quot;</span> /var/log/fail2ban.<span class="built_in">log</span> | <span class="built_in">tail</span> -20</span><br><span class="line"></span><br><span class="line"><span class="comment"># journalctl 사용 (systemd)</span></span><br><span class="line">sudo journalctl -u fail2ban -f</span><br><span class="line">sudo journalctl -u fail2ban --since <span class="string">&quot;1 hour ago&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="7-iptables-방화벽-확인"><a href="#7-iptables-방화벽-확인" class="headerlink" title="7. iptables&#x2F;방화벽 확인"></a>7. iptables&#x2F;방화벽 확인</h2><h4 id="iptables로-차단-규칙-확인"><a href="#iptables로-차단-규칙-확인" class="headerlink" title="iptables로 차단 규칙 확인"></a>iptables로 차단 규칙 확인</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Fail2ban 체인 확인</span></span><br><span class="line">sudo iptables -L fail2ban-sshd -v -n</span><br><span class="line"></span><br><span class="line"><span class="comment"># 전체 iptables 규칙</span></span><br><span class="line">sudo iptables -L -n -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 차단된 IP 확인</span></span><br><span class="line">sudo iptables -L -n | grep -i reject</span><br></pre></td></tr></table></figure>

<h4 id="firewalld-사용-시"><a href="#firewalld-사용-시" class="headerlink" title="firewalld 사용 시"></a>firewalld 사용 시</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Rich rules 확인</span></span><br><span class="line">sudo firewall-cmd --list-rich-rules</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fail2ban zone 확인</span></span><br><span class="line">sudo firewall-cmd --zone=drop --list-sources</span><br></pre></td></tr></table></figure>

<h2 id="8-모니터링-및-통계"><a href="#8-모니터링-및-통계" class="headerlink" title="8. 모니터링 및 통계"></a>8. 모니터링 및 통계</h2><h4 id="차단-통계-확인"><a href="#차단-통계-확인" class="headerlink" title="차단 통계 확인"></a>차단 통계 확인</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># jail별 차단된 IP 수 확인</span></span><br><span class="line">sudo fail2ban-client status | grep <span class="string">&quot;Jail list&quot;</span></span><br><span class="line">sudo fail2ban-client status sshd | grep <span class="string">&quot;Currently banned&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 로그에서 차단 통계 추출</span></span><br><span class="line">sudo grep <span class="string">&quot;Ban&quot;</span> /var/log/fail2ban.<span class="built_in">log</span> | awk <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -rn | <span class="built_in">head</span> -10</span><br><span class="line"></span><br><span class="line"><span class="comment"># 가장 많이 차단된 IP Top 10</span></span><br><span class="line">sudo grep <span class="string">&quot;Ban&quot;</span> /var/log/fail2ban.<span class="built_in">log</span> | grep -oP <span class="string">&#x27;\d+\.\d+\.\d+\.\d+&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -rn | <span class="built_in">head</span> -10</span><br><span class="line"></span><br><span class="line"><span class="comment"># 날짜별 차단 통계</span></span><br><span class="line">sudo grep <span class="string">&quot;Ban&quot;</span> /var/log/fail2ban.<span class="built_in">log</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c</span><br></pre></td></tr></table></figure>

<h4 id="실시간-모니터링-스크립트"><a href="#실시간-모니터링-스크립트" class="headerlink" title="실시간 모니터링 스크립트"></a>실시간 모니터링 스크립트</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># fail2ban-monitor.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;=== Fail2ban Status ===&quot;</span></span><br><span class="line">sudo fail2ban-client status</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\n=== Currently Banned IPs (sshd) ===&quot;</span></span><br><span class="line">sudo fail2ban-client status sshd | grep <span class="string">&quot;Banned IP list&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\n=== Recent Ban Events ===&quot;</span></span><br><span class="line">sudo grep <span class="string">&quot;Ban&quot;</span> /var/log/fail2ban.<span class="built_in">log</span> | <span class="built_in">tail</span> -10</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\n=== Top 5 Banned IPs ===&quot;</span></span><br><span class="line">sudo grep <span class="string">&quot;Ban&quot;</span> /var/log/fail2ban.<span class="built_in">log</span> | grep -oP <span class="string">&#x27;\d+\.\d+\.\d+\.\d+&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -rn | <span class="built_in">head</span> -5</span><br></pre></td></tr></table></figure>

<h2 id="9-고급-설정"><a href="#9-고급-설정" class="headerlink" title="9. 고급 설정"></a>9. 고급 설정</h2><h4 id="영구-차단-설정"><a href="#영구-차단-설정" class="headerlink" title="영구 차단 설정"></a>영구 차단 설정</h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[sshd]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = ssh</span><br><span class="line"><span class="attr">filter</span> = sshd</span><br><span class="line"><span class="attr">logpath</span> = /var/log/auth.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">findtime</span> = <span class="number">10</span>m</span><br><span class="line"><span class="attr">bantime</span> = -<span class="number">1</span>          <span class="comment"># 영구 차단</span></span><br></pre></td></tr></table></figure>

<h4 id="증분-차단-시간-Incremental-Ban"><a href="#증분-차단-시간-Incremental-Ban" class="headerlink" title="증분 차단 시간 (Incremental Ban)"></a>증분 차단 시간 (Incremental Ban)</h4><p>반복적으로 차단되는 IP에 대해 차단 시간을 점진적으로 늘립니다.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/fail2ban/jail.d/recidive.local</span><br></pre></td></tr></table></figure>

<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[recidive]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">filter</span> = recidive</span><br><span class="line"><span class="attr">logpath</span> = /var/log/fail2ban.log</span><br><span class="line"><span class="attr">action</span> = iptables-allports[name=recidive]</span><br><span class="line">         sendmail-whois-lines<span class="section">[name=recidive, logpath=/var/log/fail2ban.log]</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">1</span>w          <span class="comment"># 1주일</span></span><br><span class="line"><span class="attr">findtime</span> = <span class="number">1</span>d         <span class="comment"># 하루 동안</span></span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">3</span>          <span class="comment"># 3번 차단되면</span></span><br></pre></td></tr></table></figure>

<h4 id="국가별-IP-차단"><a href="#국가별-IP-차단" class="headerlink" title="국가별 IP 차단"></a>국가별 IP 차단</h4><p>GeoIP를 사용하여 특정 국가의 IP를 차단합니다.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># GeoIP 설치</span></span><br><span class="line">sudo apt install geoip-bin geoip-database</span><br><span class="line"></span><br><span class="line"><span class="comment"># 필터 생성</span></span><br><span class="line">sudo vim /etc/fail2ban/filter.d/geoip.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[Definition]</span></span><br><span class="line"><span class="comment"># Python 스크립트를 사용한 GeoIP 체크</span></span><br><span class="line"><span class="attr">failregex</span> = &lt;HOST&gt;</span><br><span class="line"></span><br><span class="line"><span class="section">[geoip]</span></span><br><span class="line"><span class="comment"># 차단할 국가 코드 (ISO 2자리)</span></span><br><span class="line"><span class="attr">country</span> = CN,RU,KP</span><br></pre></td></tr></table></figure>

<h4 id="화이트리스트-설정"><a href="#화이트리스트-설정" class="headerlink" title="화이트리스트 설정"></a>화이트리스트 설정</h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[DEFAULT]</span></span><br><span class="line"><span class="comment"># 절대 차단하지 않을 IP</span></span><br><span class="line"><span class="attr">ignoreip</span> = <span class="number">127.0</span>.<span class="number">0.1</span>/<span class="number">8</span> ::<span class="number">1</span></span><br><span class="line">           192.168.1.0/24</span><br><span class="line">           10.0.0.0/8</span><br><span class="line">           your.trusted.ip.address</span><br><span class="line"></span><br><span class="line"><span class="comment"># 또는 파일로 관리</span></span><br><span class="line"><span class="attr">ignoreip</span> = %(ignoreip)s</span><br><span class="line"><span class="attr">ignorecommand</span> = cat /etc/fail2ban/whitelist.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 화이트리스트 파일 생성</span></span><br><span class="line">sudo vim /etc/fail2ban/whitelist.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">192.168.1.100</span><br><span class="line">203.0.113.0/24</span><br></pre></td></tr></table></figure>

<h4 id="systemd-통합-설정"><a href="#systemd-통합-설정" class="headerlink" title="systemd 통합 설정"></a>systemd 통합 설정</h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[DEFAULT]</span></span><br><span class="line"><span class="comment"># systemd journal 사용</span></span><br><span class="line"><span class="attr">backend</span> = systemd</span><br><span class="line"></span><br><span class="line"><span class="section">[sshd]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">filter</span> = sshd</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">5</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">1</span>h</span><br><span class="line"><span class="comment"># logpath 대신 backend 사용</span></span><br><span class="line"><span class="attr">backend</span> = systemd</span><br></pre></td></tr></table></figure>

<h2 id="10-문제-해결"><a href="#10-문제-해결" class="headerlink" title="10. 문제 해결"></a>10. 문제 해결</h2><h4 id="설정-검증"><a href="#설정-검증" class="headerlink" title="설정 검증"></a>설정 검증</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 설정 파일 문법 검사</span></span><br><span class="line">sudo fail2ban-client -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># 특정 jail 테스트</span></span><br><span class="line">sudo fail2ban-client -vvv start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 디버그 모드로 실행</span></span><br><span class="line">sudo fail2ban-client -x -v start</span><br></pre></td></tr></table></figure>

<h4 id="일반적인-문제"><a href="#일반적인-문제" class="headerlink" title="일반적인 문제"></a>일반적인 문제</h4><h4 id="Fail2ban이-시작되지-않음"><a href="#Fail2ban이-시작되지-않음" class="headerlink" title="Fail2ban이 시작되지 않음"></a>Fail2ban이 시작되지 않음</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 로그 확인</span></span><br><span class="line">sudo <span class="built_in">tail</span> -100 /var/log/fail2ban.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 설정 검증</span></span><br><span class="line">sudo fail2ban-client -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># systemd 상태</span></span><br><span class="line">sudo systemctl status fail2ban -l</span><br></pre></td></tr></table></figure>

<h4 id="차단이-작동하지-않음"><a href="#차단이-작동하지-않음" class="headerlink" title="차단이 작동하지 않음"></a>차단이 작동하지 않음</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># jail이 활성화되었는지 확인</span></span><br><span class="line">sudo fail2ban-client status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 로그 파일 경로 확인</span></span><br><span class="line"><span class="built_in">ls</span> -la /var/log/auth.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 필터 테스트</span></span><br><span class="line">fail2ban-regex /var/log/auth.log /etc/fail2ban/filter.d/sshd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 로그 권한 확인</span></span><br><span class="line">sudo <span class="built_in">chmod</span> 644 /var/log/auth.log</span><br></pre></td></tr></table></figure>

<h4 id="로그-파일을-찾을-수-없음"><a href="#로그-파일을-찾을-수-없음" class="headerlink" title="로그 파일을 찾을 수 없음"></a>로그 파일을 찾을 수 없음</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SELinux 확인 (CentOS/RHEL)</span></span><br><span class="line">sudo ausearch -c <span class="string">&#x27;fail2ban-server&#x27;</span> --raw | audit2allow -M my-fail2ban</span><br><span class="line">sudo semodule -i my-fail2ban.pp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 로그 파일 확인</span></span><br><span class="line">sudo journalctl -u fail2ban | grep <span class="string">&quot;File not found&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="이메일-알림이-작동하지-않음"><a href="#이메일-알림이-작동하지-않음" class="headerlink" title="이메일 알림이 작동하지 않음"></a>이메일 알림이 작동하지 않음</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># sendmail 또는 postfix 설치 확인</span></span><br><span class="line"><span class="built_in">which</span> sendmail</span><br><span class="line"></span><br><span class="line"><span class="comment"># sendmail 설치</span></span><br><span class="line">sudo apt install sendmail    <span class="comment"># Ubuntu/Debian</span></span><br><span class="line">sudo yum install sendmail    <span class="comment"># CentOS/RHEL</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 테스트 메일 발송</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Test&quot;</span> | mail -s <span class="string">&quot;Test&quot;</span> admin@example.com</span><br></pre></td></tr></table></figure>

<h3 id="수동-데이터베이스-초기화"><a href="#수동-데이터베이스-초기화" class="headerlink" title="수동 데이터베이스 초기화"></a>수동 데이터베이스 초기화</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Fail2ban 중지</span></span><br><span class="line">sudo systemctl stop fail2ban</span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터베이스 삭제</span></span><br><span class="line">sudo <span class="built_in">rm</span> /var/lib/fail2ban/fail2ban.sqlite3</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fail2ban 시작</span></span><br><span class="line">sudo systemctl start fail2ban</span><br></pre></td></tr></table></figure>

<h2 id="11-성능-최적화"><a href="#11-성능-최적화" class="headerlink" title="11. 성능 최적화"></a>11. 성능 최적화</h2><h3 id="로그-폴링-간격-조정"><a href="#로그-폴링-간격-조정" class="headerlink" title="로그 폴링 간격 조정"></a>로그 폴링 간격 조정</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/fail2ban/fail2ban.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[Definition]</span></span><br><span class="line"><span class="comment"># 로그 파일 확인 간격 (초)</span></span><br><span class="line"><span class="attr">logtarget</span> = /var/log/fail2ban.log</span><br><span class="line"><span class="attr">loglevel</span> = INFO</span><br><span class="line"><span class="attr">syslogsocket</span> = auto</span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터베이스 설정</span></span><br><span class="line"><span class="attr">dbfile</span> = /var/lib/fail2ban/fail2ban.sqlite3</span><br><span class="line"><span class="attr">dbpurgeage</span> = <span class="number">86400</span>    <span class="comment"># 1일 후 오래된 항목 삭제</span></span><br></pre></td></tr></table></figure>

<h3 id="jail별-최적화"><a href="#jail별-최적화" class="headerlink" title="jail별 최적화"></a>jail별 최적화</h3><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[sshd]</span></span><br><span class="line"><span class="comment"># 로그 인코딩 지정</span></span><br><span class="line"><span class="attr">logencoding</span> = auto</span><br><span class="line"></span><br><span class="line"><span class="comment"># 날짜 형식 지정</span></span><br><span class="line"><span class="attr">datepattern</span> = &#123;^LN-BEG&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-백업-및-복구"><a href="#12-백업-및-복구" class="headerlink" title="12. 백업 및 복구"></a>12. 백업 및 복구</h2><h3 id="설정-백업"><a href="#설정-백업" class="headerlink" title="설정 백업"></a>설정 백업</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 설정 파일 백업</span></span><br><span class="line">sudo tar -czf fail2ban-config-backup-$(<span class="built_in">date</span> +%Y%m%d).tar.gz \</span><br><span class="line">  /etc/fail2ban/jail.local \</span><br><span class="line">  /etc/fail2ban/jail.d/ \</span><br><span class="line">  /etc/fail2ban/filter.d/*.<span class="built_in">local</span> \</span><br><span class="line">  /etc/fail2ban/action.d/*.<span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터베이스 백업</span></span><br><span class="line">sudo <span class="built_in">cp</span> /var/lib/fail2ban/fail2ban.sqlite3 \</span><br><span class="line">  /backup/fail2ban.sqlite3.$(<span class="built_in">date</span> +%Y%m%d)</span><br></pre></td></tr></table></figure>

<h3 id="복구"><a href="#복구" class="headerlink" title="복구"></a>복구</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 설정 복구</span></span><br><span class="line">sudo tar -xzf fail2ban-config-backup-20241229.tar.gz -C /</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fail2ban 재시작</span></span><br><span class="line">sudo systemctl restart fail2ban</span><br></pre></td></tr></table></figure>

<h2 id="13-보안-베스트-프랙티스"><a href="#13-보안-베스트-프랙티스" class="headerlink" title="13. 보안 베스트 프랙티스"></a>13. 보안 베스트 프랙티스</h2><h3 id="권장-설정"><a href="#권장-설정" class="headerlink" title="권장 설정"></a>권장 설정</h3><ol>
<li><strong>적절한 bantime 설정</strong>: 너무 짧으면 효과 없음, 너무 길면 오탐 시 문제</li>
<li><strong>maxretry 조정</strong>: 서비스 특성에 맞게 설정 (SSH: 3-5, 웹: 5-10)</li>
<li><strong>ignoreip 관리</strong>: 신뢰할 수 있는 IP만 추가</li>
<li><strong>로그 모니터링</strong>: 정기적으로 차단 로그 검토</li>
<li><strong>recidive jail 활성화</strong>: 반복 공격자 장기 차단</li>
<li><strong>이메일 알림 설정</strong>: 중요한 이벤트 즉시 파악</li>
</ol>
<h3 id="추가-보안-조치"><a href="#추가-보안-조치" class="headerlink" title="추가 보안 조치"></a>추가 보안 조치</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SSH 포트 변경 (기본 22번에서 변경)</span></span><br><span class="line"><span class="comment"># /etc/ssh/sshd_config</span></span><br><span class="line">Port 2222</span><br><span class="line"></span><br><span class="line"><span class="comment"># SSH 키 기반 인증 사용</span></span><br><span class="line">PasswordAuthentication no</span><br><span class="line">PubkeyAuthentication <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># root 직접 로그인 차단</span></span><br><span class="line">PermitRootLogin no</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fail2ban jail 설정 업데이트</span></span><br><span class="line">[sshd]</span><br><span class="line">port = 2222</span><br></pre></td></tr></table></figure>

<h2 id="14-대안-및-보완-도구"><a href="#14-대안-및-보완-도구" class="headerlink" title="14. 대안 및 보완 도구"></a>14. 대안 및 보완 도구</h2><h3 id="함께-사용하면-좋은-도구"><a href="#함께-사용하면-좋은-도구" class="headerlink" title="함께 사용하면 좋은 도구"></a>함께 사용하면 좋은 도구</h3><ul>
<li><strong>DenyHosts</strong>: SSH 전용 차단 도구</li>
<li><strong>CSF (ConfigServer Security &amp; Firewall)</strong>: 종합 방화벽 솔루�</li>
<li><strong>ModSecurity</strong>: 웹 애플리케이션 방화벽 (WAF)</li>
<li><strong>OSSEC</strong>: 호스트 기반 침입 탐지 시스템</li>
<li><strong>Snort&#x2F;Suricata</strong>: 네트워크 침입 탐지 시스템</li>
</ul>
<h2 id="15-실전-예제"><a href="#15-실전-예제" class="headerlink" title="15. 실전 예제"></a>15. 실전 예제</h2><h3 id="완전한-설정-예제"><a href="#완전한-설정-예제" class="headerlink" title="완전한 설정 예제"></a>완전한 설정 예제</h3><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># /etc/fail2ban/jail.local</span></span><br><span class="line"></span><br><span class="line"><span class="section">[DEFAULT]</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">1</span>h</span><br><span class="line"><span class="attr">findtime</span> = <span class="number">10</span>m</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">5</span></span><br><span class="line"><span class="attr">destemail</span> = admin@example.com</span><br><span class="line"><span class="attr">sender</span> = fail2ban@server.example.com</span><br><span class="line"><span class="attr">action</span> = %(action_mwl)s</span><br><span class="line"><span class="attr">ignoreip</span> = <span class="number">127.0</span>.<span class="number">0.1</span>/<span class="number">8</span> <span class="number">192.168</span>.<span class="number">1.0</span>/<span class="number">24</span></span><br><span class="line"></span><br><span class="line"><span class="section">[sshd]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = ssh,<span class="number">2222</span></span><br><span class="line"><span class="attr">filter</span> = sshd</span><br><span class="line"><span class="attr">logpath</span> = /var/log/auth.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">bantime</span> = <span class="number">24</span>h</span><br><span class="line"></span><br><span class="line"><span class="section">[nginx-http-auth]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = http,https</span><br><span class="line"><span class="attr">filter</span> = nginx-http-auth</span><br><span class="line"><span class="attr">logpath</span> = /var/log/nginx/error.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="section">[nginx-limit-req]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">port</span> = http,https</span><br><span class="line"><span class="attr">filter</span> = nginx-limit-req</span><br><span class="line"><span class="attr">logpath</span> = /var/log/nginx/error.log</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">10</span></span><br><span class="line"><span class="attr">findtime</span> = <span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="section">[recidive]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">filter</span> = recidive</span><br><span class="line"><span class="attr">logpath</span> = /var/log/fail2ban.log</span><br><span class="line"><span class="attr">bantime</span> = <span class="number">1</span>w</span><br><span class="line"><span class="attr">findtime</span> = <span class="number">1</span>d</span><br><span class="line"><span class="attr">maxretry</span> = <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h3 id="모니터링-대시보드-스크립트"><a href="#모니터링-대시보드-스크립트" class="headerlink" title="모니터링 대시보드 스크립트"></a>모니터링 대시보드 스크립트</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># /usr/local/bin/fail2ban-dashboard.sh</span></span><br><span class="line"></span><br><span class="line">clear</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;╔════════════════════════════════════════════════════╗&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;║         Fail2ban Monitoring Dashboard              ║&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;╚════════════════════════════════════════════════════╝&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 전체 상태</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;📊 Overall Status:&quot;</span></span><br><span class="line">sudo fail2ban-client status</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Jail별 차단 현황</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;🔒 Banned IPs by Jail:&quot;</span></span><br><span class="line"><span class="keyword">for</span> jail <span class="keyword">in</span> $(sudo fail2ban-client status | grep <span class="string">&quot;Jail list&quot;</span> | sed <span class="string">&#x27;s/.*://;s/,//g&#x27;</span>); <span class="keyword">do</span></span><br><span class="line">    banned=$(sudo fail2ban-client status <span class="variable">$jail</span> | grep <span class="string">&quot;Currently banned&quot;</span> | awk <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span>)</span><br><span class="line">    total=$(sudo fail2ban-client status <span class="variable">$jail</span> | grep <span class="string">&quot;Total banned&quot;</span> | awk <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  - <span class="variable">$jail</span>: Currently <span class="variable">$banned</span> | Total <span class="variable">$total</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 최근 차단 이벤트</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;📝 Recent Ban Events (Last 10):&quot;</span></span><br><span class="line">sudo grep <span class="string">&quot;Ban&quot;</span> /var/log/fail2ban.<span class="built_in">log</span> | <span class="built_in">tail</span> -10 | <span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  <span class="variable">$line</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Top 공격 IP</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;🎯 Top 10 Attacking IPs:&quot;</span></span><br><span class="line">sudo grep <span class="string">&quot;Ban&quot;</span> /var/log/fail2ban.<span class="built_in">log</span> | grep -oP <span class="string">&#x27;\d+\.\d+\.\d+\.\d+&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -rn | <span class="built_in">head</span> -10</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 통계</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;📈 Statistics:&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;  Total bans today: <span class="subst">$(sudo grep <span class="string">&quot;Ban&quot;</span> /var/log/fail2ban.log | grep <span class="string">&quot;<span class="subst">$(date +%Y-%m-%d)</span>&quot;</span> | wc -l)</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;  Active jails: <span class="subst">$(sudo fail2ban-client status | grep <span class="string">&quot;Number of jail&quot;</span> | awk &#x27;&#123;print $NF&#125;&#x27;)</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>실행 권한 부여:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> +x /usr/local/bin/fail2ban-dashboard.sh</span><br><span class="line">sudo /usr/local/bin/fail2ban-dashboard.sh</span><br></pre></td></tr></table></figure>

<h2 id="참고-자료"><a href="#참고-자료" class="headerlink" title="참고 자료"></a>참고 자료</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://fail2ban.readthedocs.io/">Fail2ban 공식 문서</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/fail2ban/fail2ban">Fail2ban GitHub</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.fail2ban.org/wiki/">Fail2ban Wiki</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.digitalocean.com/community/tutorials/how-to-protect-ssh-with-fail2ban-on-ubuntu-20-04">DigitalOcean: How To Protect SSH with Fail2Ban</a></li>
</ul>

        </div>
        <footer class="article-footer">
            



    <a data-url="https://ckck803.github.io/2025/12/29/linux/fail2ban-guide/" data-id="cmk1y8sva004n8t8d28bg1ycm" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "ckck803"
        },
        "headline": "Fail2ban 설치 및 사용 가이드",
        "image": "https://ckck803.github.io/images/linux/linux.png",
        "keywords": "Linux Security Fail2ban SSH Firewall",
        "genre": "Develop Linux",
        "datePublished": "2025-12-29",
        "dateCreated": "2025-12-29",
        "dateModified": "2025-12-29",
        "url": "https://ckck803.github.io/2025/12/29/linux/fail2ban-guide/",
        "description": "
Fail2ban 개요Fail2ban은 로그 파일을 모니터링하여 악의적인 활동(무차별 대입 공격, 포트 스캔 등)을 탐지하고 자동으로 차단하는 침입 방지 소프트웨어입니다. 
주요 기능
로그 파일 실시간 모니터링
정규표현식 기반 패턴 매칭
자동 IP 차단 (iptables, firewalld, ufw 등)
시간 기반 자동 차단 해제
이메일 알림 기능
다양한 서비스 지원 (SSH, Apache, Nginx, MySQL 등)

작동 원리
로그 모니터링: Fail2ban은 지정된 로그 파일을 실시간으로 감시합니다.
패턴 매칭: 설정된 정규표현식 패턴(filter)과 로그를 비교합니다.
실패 횟수 카운트: 특정 IP에서 실패가 발생할 때마다 카운트를 증가시킵니다.
차단 실행: 설정된 임계값(maxretry)을 초과하면 해당 IP를 차단합니다.
자동 해제: 설정된 시간(bantime) 후 자동으로 차단을 해제합니다.

1. 설치Ubuntu&#x2F;Debian# 패키지 업데이트sudo apt update# Fail2ban 설치sudo apt install fail2ban -y# 서비스 시작 및 자동 시작 설정sudo systemctl start fail2bansudo systemctl enable fail2ban# 상태 확인sudo systemctl status fail2ban",
        "wordCount": 3649
    }
</script>

</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>


    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/ckck803" target="_blank" rel="external nofollow noopener noreferrer">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2025/12/29/linux/ubuntu-openvpn-install/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            Ubuntu Linux에 OpenVPN 설치 및 설정 가이드
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2025/12/28/computer-science/network/nat-gateway/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">[Network] NAT Gateway 란?</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AI/">AI</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AI/LLM/">LLM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/AI/RAG/">RAG</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/AI/ollma/">ollma</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/AWS/">AWS</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AWS/EKS/">EKS</a><span class="category-list-count">9</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a><span class="category-list-count">64</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/DataBase/">DataBase</a><span class="category-list-count">18</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/DataBase/SQL/">SQL</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/DataBase/Scan/">Scan</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/DataBase/Transaction/">Transaction</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Network/">Network</a><span class="category-list-count">25</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Network/HTTP/">HTTP</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Network/Security/">Security</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Process/">Process</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/">운영체제</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/">컴퓨터 구조</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B4%80%EB%A6%AC/">메모리 관리</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%96%B8%EC%96%B4/">프로그래밍 언어</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%96%B8%EC%96%B4/JAVA/">JAVA</a><span class="category-list-count">4</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a><span class="category-list-count">27</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/CICD/">CICD</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/CICD/Jenkins/">Jenkins</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/CICD/Repository/">Repository</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Jmeter/">Jmeter</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/KeyCloak/">KeyCloak</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Kiali/">Kiali</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Linux/">Linux</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Maven/">Maven</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Nginx/">Nginx</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/OpenSearch/">OpenSearch</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Repository/">Repository</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/Repository/Gitea/">Gitea</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/SonarQube/">SonarQube</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/">Develop</a><span class="category-list-count">207</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/">Beakjoon</a><span class="category-list-count">40</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/BFS/">BFS</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/DFS/">DFS</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/SAMSUNG/">SAMSUNG</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/SAMSUNG/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/">시뮬레이션</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/">경우의 수</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/%EA%B7%B8%EB%9E%98%ED%94%84/">그래프</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/">다익스트라</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/">시뮬레이션</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/%EC%9D%B4%EB%B6%84%ED%83%90%EC%83%89/">이분탐색</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/">자료구조</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/List/">List</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/SET/">SET</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/">스택</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/">카테고리</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Cpp/">Cpp</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Cpp/STL/">STL</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Database/">Database</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Database/PostgreSQL/">PostgreSQL</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Django/">Django</a><span class="category-list-count">33</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Docker/">Docker</a><span class="category-list-count">13</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Docker/Docker-Compose/">Docker Compose</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Git/">Git</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/JAVA/">JAVA</a><span class="category-list-count">17</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/JAVA/Collection/">Collection</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/JAVA/REST/">REST</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/JAVA/Rest/">Rest</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/JPA/">JPA</a><span class="category-list-count">26</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/JPA/JPA-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EA%B8%B0%EB%B3%B8%ED%8E%B8/">JPA 프로그래밍(기본편)</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/">연관관계</a><span class="category-list-count">13</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Kafka/">Kafka</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Linux/">Linux</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/MySQL/">MySQL</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Oracle/">Oracle</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/PostgreSQL/">PostgreSQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/QueryDSL/">QueryDSL</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/">프로그래머스</a><span class="category-list-count">23</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/">경우의 수</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/%EC%A4%91%EB%B3%B5-%EC%88%9C%EC%97%B4/">중복 순열</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/">문자열</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/%EC%A0%95%EA%B7%9C-%ED%91%9C%ED%98%84%EC%8B%9D/">정규 표현식</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/">자료구조</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/SET/">SET</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/">스택</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/">Frontend</a><span class="category-list-count">57</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Login/">Login</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/React/">React</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/React/TypeScript/">TypeScript</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/React-Query/">React Query</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Redux/">Redux</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/To-do-List/">To do List</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/ToastUI/">ToastUI</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Vite/">Vite</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Vue/">Vue</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Vue/Tailwind/">Tailwind</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Vue3/">Vue3</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/%EB%A1%9C%EA%B7%B8%EC%9D%B8/">로그인</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/">블로그</a><span class="category-list-count">15</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Infrastructure/">Infrastructure</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Infrastructure/DevOps/">DevOps</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/">Kubernetes</a><span class="category-list-count">50</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/Autoscaler/">Autoscaler</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/Config/">Config</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/Custom/">Custom</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/Helm/">Helm</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/Istio/">Istio</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/">구성요소</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/%EC%84%9C%EB%B9%84%EC%8A%A4/">서비스</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/">워크로드</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/%EC%9D%B8%EC%A6%9D-%EC%9D%B8%EA%B0%80/">인증/인가</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><span class="category-list-count">282</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/QueryDSL/">QueryDSL</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/QueryDSL/JPA/">JPA</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/">Spring AOP</a><span class="category-list-count">30</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/AOP-Aspect/">AOP Aspect</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/AspectJ/">AspectJ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/Bean-Post-Processor/">Bean Post Processor</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/Spring-Proxy/">Spring Proxy</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/%ED%8F%AC%EC%9D%B8%ED%8A%B8%EC%BB%B7/">포인트컷</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-AOP/%ED%8F%AC%EC%9D%B8%ED%8A%B8%EC%BB%B7-%ED%91%9C%ED%98%84%EC%8B%9D/">포인트컷 표현식</a><span class="category-list-count">9</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Batch/">Spring Batch</a><span class="category-list-count">36</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Batch/Job/">Job</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Batch/Step/">Step</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Batch/Step/Chunk/">Chunk</a><span class="category-list-count">7</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Boot/">Spring Boot</a><span class="category-list-count">27</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Boot/File/">File</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Boot/Kafka/">Kafka</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Boot/Redis/">Redis</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Boot/Spring-Framework/">Spring Framework</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/">Spring Cloud</a><span class="category-list-count">34</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/Config/">Config</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/Feign-Client/">Feign Client</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/Gateway/">Gateway</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/Kafka/">Kafka</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Cloud/Service-Discovery/">Service Discovery</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Core/">Spring Core</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-DB/">Spring DB</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Data-JPA/">Spring Data JPA</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Framework/">Spring Framework</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Framework/lifecycle/">lifecycle</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-MVC/">Spring MVC</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Rest/">Spring Rest</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/">Spring Security</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/Filter/">Filter</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/Form-login/">Form login</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/JWT/">JWT</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/Oauth2/">Oauth2</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/Security/">Security</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/Security/Config/">Config</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Security/%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95/">인증 과정</a><span class="category-list-count">5</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Test/">Spring Test</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-WebSocket/">Spring WebSocket</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/">Spring 고급편</a><span class="category-list-count">25</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/CGLIB/">CGLIB</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Decorator-%ED%8C%A8%ED%84%B4/">Decorator 패턴</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Dynamic-Proxy/">Dynamic Proxy</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Proxy-%ED%8C%A8%ED%84%B4/">Proxy 패턴</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Strategy-%ED%8C%A8%ED%84%B4/">Strategy 패턴</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Template-Callback-%ED%8C%A8%ED%84%B4/">Template Callback 패턴</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Template-Method-%ED%8C%A8%ED%84%B4/">Template Method 패턴</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/ThreadLocal/">ThreadLocal</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/%EA%B0%95%EC%9D%98/">강의</a><span class="category-list-count">19</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/">레스토랑 예약 사이트</a><span class="category-list-count">19</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/">게시판 만들기</a><span class="category-list-count">22</span></li></ul></li></ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2026 ckck803</p>
                
                <p>Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>. Theme by <a href="https://github.com/ppoffice" target="_blank" rel="external nofollow noopener noreferrer">PPOffice</a></p>
                
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

    </div>
    
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'https://ckck803.github.io/2025/12/29/linux/fail2ban-guide/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>





    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    

    
    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
