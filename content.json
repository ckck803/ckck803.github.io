{"meta":{"title":"Victor","subtitle":"ê°œë°œ ë…¸íŠ¸","description":"ê°œë°œ ë…¸íŠ¸","author":"ckck803","url":"https://ckck803.github.io","root":"/"},"pages":[],"posts":[{"title":"[Vue 3] - Tailwind ì‚¬ìš©í•˜ê¸°","slug":"vue/tailwind/vue-tailwind","date":"2025-03-09T11:10:40.000Z","updated":"2025-03-16T05:24:40.033Z","comments":true,"path":"2025/03/09/vue/tailwind/vue-tailwind/","link":"","permalink":"https://ckck803.github.io/2025/03/09/vue/tailwind/vue-tailwind/","excerpt":"1. Vue3 í”„ë¡œì íŠ¸ ìƒì„±npm init vue@latest my-vue3-appcd my-vue3-appnpm install 2. Tailwind Css ì„¤ì¹˜Tailwind CSSì™€ ê´€ë ¨ëœ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. npm install -D tailwindcss postcss autoprefixer ê·¸ëŸ° ë‹¤ìŒ Tailwind CSS ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤. npx tailwindcss init ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— tailwind.config.js íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤. 3. Tailwind CSS êµ¬ì„±","text":"1. Vue3 í”„ë¡œì íŠ¸ ìƒì„±npm init vue@latest my-vue3-appcd my-vue3-appnpm install 2. Tailwind Css ì„¤ì¹˜Tailwind CSSì™€ ê´€ë ¨ëœ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. npm install -D tailwindcss postcss autoprefixer ê·¸ëŸ° ë‹¤ìŒ Tailwind CSS ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤. npx tailwindcss init ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— tailwind.config.js íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤. 3. Tailwind CSS êµ¬ì„±ìƒì„±ëœ tailwind.config.js íŒŒì¼ì„ ì—´ê³ , ì•„ë˜ì™€ ê°™ì´ content í•„ë“œì— Vue íŒŒì¼ ê²½ë¡œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤: tailwind.config.js/** @type &#123;import(&#x27;tailwindcss&#x27;).Config&#125; */module.exports = &#123; content: [ &quot;./index.html&quot;, &quot;./src/**/*.&#123;vue,js,ts,jsx,tsx&#125;&quot;, // Vue íŒŒì¼ ê²½ë¡œ ], theme: &#123; extend: &#123;&#125;, &#125;, plugins: [],&#125;; 4. CSS íŒŒì¼ ì„¤ì •Tailwind CSSë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ CSS íŒŒì¼ì— Tailwindì˜ ê¸°ë³¸ ë””ë ‰í‹°ë¸Œë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. src/assets/tailwind.css íŒŒì¼ì„ ìƒì„±í•˜ê³ , ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€í•©ë‹ˆë‹¤: tailwind.css@tailwind base;@tailwind components;@tailwind utilities; 5. Tailwind CSSë¥¼ í”„ë¡œì íŠ¸ì— í¬í•¨src/main.js ë˜ëŠ” src/main.ts íŒŒì¼ì—ì„œ ìƒì„±í•œ CSS íŒŒì¼ì„ importí•©ë‹ˆë‹¤ main.tsimport &#123; createApp &#125; from &#x27;vue&#x27;;import App from &#x27;./App.vue&#x27;;// Tailwind CSS ì¶”ê°€import &#x27;./assets/tailwind.css&#x27;;createApp(App).mount(&#x27;#app&#x27;);","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue","slug":"Frontend/Vue","permalink":"https://ckck803.github.io/categories/Frontend/Vue/"},{"name":"Tailwind","slug":"Frontend/Vue/Tailwind","permalink":"https://ckck803.github.io/categories/Frontend/Vue/Tailwind/"}],"tags":[]},{"title":"[Vue 3] - Pinia ì‚¬ìš©í•˜ê¸°","slug":"vue/pinia/vue-pinia","date":"2025-03-05T11:10:40.000Z","updated":"2025-03-29T05:30:19.404Z","comments":true,"path":"2025/03/05/vue/pinia/vue-pinia/","link":"","permalink":"https://ckck803.github.io/2025/03/05/vue/pinia/vue-pinia/","excerpt":"Pinia ë€?Pinia ëŠ” Vue ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. Vue2 ì—ì„œëŠ” Vuex ë¥¼ ì‚¬ìš©í•˜ë‹¤ê°€ Pinia ì˜ ë“±ì¥ìœ¼ë¡œ ì ì°¨ Pinia ê°€ ëŒ€ì„¸ë¥¼ ì´ë£¨ê²Œ ëìŠµë‹ˆë‹¤. Vue ì—ì„œëŠ” ref, reactive ì™€ ê°™ì€ ìƒíƒœ ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ë“¤ì´ ìˆëŠ”ë° ì´ëŸ° í•¨ìˆ˜ë“¤ì„ ì´ìš©í•´ ìƒì„±ëœ ìƒíƒœë¥¼ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” props ë‚˜ event í˜¹ì€ provide ë‚˜ inject ë¥¼ ì´ìš©í•´ ì „ë‹¬í•  ìˆ˜ ìˆì§€ë§Œ, íŒŒì¼ì´ ë§ì•„ì§ˆìˆ˜ë¡ ì¶”ì í•˜ê¸°ê°€ ë³µì¡í•´ì§‘ë‹ˆë‹¤. Pinia ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë¡œì§ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆê³  ì¤‘ì•™ ì§‘ì¤‘ì‹ ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì´ì  ë•Œë¬¸ì— ê·¸ë ‡ìŠµë‹ˆë‹¤. 1. Pinia ì„¤ì¹˜npm install pinia 2. Pinia ëª¨ë“ˆ ì¶”ê°€í•˜ê¸°main.tsimport &#123; createApp &#125; from &#x27;vue&#x27;;import &#123; createPinia &#125; from &#x27;pinia&#x27;;import App from &#x27;./App.vue&#x27;;const app = createApp(App);const pinia = createPinia();app.use(pinia);app.mount(&#x27;#app&#x27;); 3. Pinia Store ìƒì„±","text":"Pinia ë€?Pinia ëŠ” Vue ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. Vue2 ì—ì„œëŠ” Vuex ë¥¼ ì‚¬ìš©í•˜ë‹¤ê°€ Pinia ì˜ ë“±ì¥ìœ¼ë¡œ ì ì°¨ Pinia ê°€ ëŒ€ì„¸ë¥¼ ì´ë£¨ê²Œ ëìŠµë‹ˆë‹¤. Vue ì—ì„œëŠ” ref, reactive ì™€ ê°™ì€ ìƒíƒœ ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ë“¤ì´ ìˆëŠ”ë° ì´ëŸ° í•¨ìˆ˜ë“¤ì„ ì´ìš©í•´ ìƒì„±ëœ ìƒíƒœë¥¼ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” props ë‚˜ event í˜¹ì€ provide ë‚˜ inject ë¥¼ ì´ìš©í•´ ì „ë‹¬í•  ìˆ˜ ìˆì§€ë§Œ, íŒŒì¼ì´ ë§ì•„ì§ˆìˆ˜ë¡ ì¶”ì í•˜ê¸°ê°€ ë³µì¡í•´ì§‘ë‹ˆë‹¤. Pinia ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë¡œì§ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆê³  ì¤‘ì•™ ì§‘ì¤‘ì‹ ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì´ì  ë•Œë¬¸ì— ê·¸ë ‡ìŠµë‹ˆë‹¤. 1. Pinia ì„¤ì¹˜npm install pinia 2. Pinia ëª¨ë“ˆ ì¶”ê°€í•˜ê¸°main.tsimport &#123; createApp &#125; from &#x27;vue&#x27;;import &#123; createPinia &#125; from &#x27;pinia&#x27;;import App from &#x27;./App.vue&#x27;;const app = createApp(App);const pinia = createPinia();app.use(pinia);app.mount(&#x27;#app&#x27;); 3. Pinia Store ìƒì„±ìƒíƒœë“¤ì„ ì €ì¥ ë° ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” pinia store ë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤. store/counterStore.jsimport &#123; defineStore &#125; from &#x27;pinia&#x27;;export const useCounterStore = defineStore(&#x27;counter&#x27;, &#123; state: () =&gt; (&#123; count: 0, &#125;), getters: &#123; doubleCount: (state) =&gt; state.count * 2, &#125;, actions: &#123; increment() &#123; this.count++; &#125;, decrement() &#123; this.count--; &#125;, &#125;,&#125;); 4. Pinia ì‚¬ìš©í•˜ê¸°ìœ„ì—ì„œ ìƒì„±ëœ Store ë¥¼ í†µí•´ Store ë‚´ì— ìˆëŠ” ê°’ì„ ê°€ì ¸ì˜¤ê±°ë‚˜, Store ë‚´ì— ìˆëŠ” ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•´ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ì´ìš©í•´ Store ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;template&gt; &lt;div class=&quot;app&quot;&gt; &lt;h1&gt;Counter: &#123;&#123; counter &#125;&#125;&lt;/h1&gt; &lt;h2&gt;Double Count: &#123;&#123; doubleCounter &#125;&#125;&lt;/h2&gt; &lt;button @click=&quot;increment&quot;&gt;Increment&lt;/button&gt; &lt;button @click=&quot;decrement&quot;&gt;Decrement&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; useCounterStore &#125; from &#x27;./store/counterStore&#x27;;import &#123; defineComponent &#125; from &#x27;vue&#x27;;export default defineComponent(&#123; setup() &#123; const counterStore = useCounterStore(); return &#123; counter: counterStore.count, doubleCounter: counterStore.doubleCount, increment: counterStore.increment, decrement: counterStore.decrement, &#125;; &#125;,&#125;);&lt;/script&gt;&lt;style&gt;.app &#123; text-align: center; margin-top: 50px;&#125;button &#123; margin: 5px;&#125;&lt;/style&gt;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue","slug":"Frontend/Vue","permalink":"https://ckck803.github.io/categories/Frontend/Vue/"},{"name":"Tailwind","slug":"Frontend/Vue/Tailwind","permalink":"https://ckck803.github.io/categories/Frontend/Vue/Tailwind/"}],"tags":[]},{"title":"[Vue 3] - unplugin-vue-router ì‚¬ìš©í•˜ê¸°","slug":"vue/router/vue-unplugin-vue-router","date":"2025-03-05T11:10:40.000Z","updated":"2025-03-16T17:15:41.094Z","comments":true,"path":"2025/03/05/vue/router/vue-unplugin-vue-router/","link":"","permalink":"https://ckck803.github.io/2025/03/05/vue/router/vue-unplugin-vue-router/","excerpt":"ì°¸ê³ https://github.com/posva/unplugin-vue-router vue ì—ì„œëŠ” ìƒˆë¡œìš´ í˜ì´ì§€ë¥¼ ìƒì„±í• ë•Œë§ˆë‹¤ vue-router ì— ì§ì ‘ ë“±ë¡í•´ì¤˜ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ìˆ˜ê³ ìŠ¤ëŸ¬ì›€ì„ ì¢€ ëœê³ ì ì°¾ì•„ë³´ë‹ˆ vue ì—ì„œë„ next ë‚˜ nuxt ì²˜ëŸ¼ íŒŒì¼ ê¸°ë°˜ìœ¼ë¡œ ë¼ìš°íŒ…ì„ í•  ìˆ˜ ìˆê²Œ ì§€ì›í•´ì£¼ëŠ” ëª¨ë“ˆì„ ì°¾ê²Œ ëìŠµë‹ˆë‹¤. 1. unplugin-vue-router ëª¨ë“ˆì„ ì„¤ì¹˜npm i -D unplugin-vue-router 2. vite.config.ts ì— ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•´ ì¤ë‹ˆë‹¤.vite.config.tsimport &#123; defineConfig &#125; from &#x27;vite&#x27;import vue from &#x27;@vitejs/plugin-vue&#x27;import VueRouter from &#x27;unplugin-vue-router/vite&#x27;;// https://vitejs.dev/config/export default defineConfig(&#123; plugins: [vue(), VueRouter(&#123;&#125;)],&#125;) 3. tsconfig.json ì„¤ì • ì •ë³´ ì¶”ê°€tsconfig.json&#123; &quot;compilerOptions&quot;: &#123; // ... &quot;moduleResolution&quot;: &quot;Bundler&quot;, // ... &quot;types&quot;: [&quot;unplugin-vue-router/client&quot;], &#125; // ... &quot;include&quot;: [ // ... &quot;./typed-router.d.ts&quot; ],&#125;","text":"ì°¸ê³ https://github.com/posva/unplugin-vue-router vue ì—ì„œëŠ” ìƒˆë¡œìš´ í˜ì´ì§€ë¥¼ ìƒì„±í• ë•Œë§ˆë‹¤ vue-router ì— ì§ì ‘ ë“±ë¡í•´ì¤˜ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ìˆ˜ê³ ìŠ¤ëŸ¬ì›€ì„ ì¢€ ëœê³ ì ì°¾ì•„ë³´ë‹ˆ vue ì—ì„œë„ next ë‚˜ nuxt ì²˜ëŸ¼ íŒŒì¼ ê¸°ë°˜ìœ¼ë¡œ ë¼ìš°íŒ…ì„ í•  ìˆ˜ ìˆê²Œ ì§€ì›í•´ì£¼ëŠ” ëª¨ë“ˆì„ ì°¾ê²Œ ëìŠµë‹ˆë‹¤. 1. unplugin-vue-router ëª¨ë“ˆì„ ì„¤ì¹˜npm i -D unplugin-vue-router 2. vite.config.ts ì— ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•´ ì¤ë‹ˆë‹¤.vite.config.tsimport &#123; defineConfig &#125; from &#x27;vite&#x27;import vue from &#x27;@vitejs/plugin-vue&#x27;import VueRouter from &#x27;unplugin-vue-router/vite&#x27;;// https://vitejs.dev/config/export default defineConfig(&#123; plugins: [vue(), VueRouter(&#123;&#125;)],&#125;) 3. tsconfig.json ì„¤ì • ì •ë³´ ì¶”ê°€tsconfig.json&#123; &quot;compilerOptions&quot;: &#123; // ... &quot;moduleResolution&quot;: &quot;Bundler&quot;, // ... &quot;types&quot;: [&quot;unplugin-vue-router/client&quot;], &#125; // ... &quot;include&quot;: [ // ... &quot;./typed-router.d.ts&quot; ],&#125; 4. routes&#x2F;index.ts íŒŒì¼ ìƒì„±index.tsimport &#123; createWebHistory, createRouter &#125; from &quot;vue-router&quot;;import &#123; routes &#125; from &quot;vue-router/auto-routes&quot;;const router = createRouter(&#123; history: createWebHistory(), routes, strict: true&#125;)export default router; 5. main.ts íŒŒì¼ì— ë¼ìš°íŠ¸ ëª¨ë“ˆ ì¶”ê°€main.tsimport &#123;createApp&#125; from &#x27;vue&#x27; import &#x27;./style.css&#x27; import App from &#x27;./App.vue&#x27; import router from &quot;./router&quot;; createApp(App) .use(router) .mount(&#x27;#app&#x27;) 6. app.vue íŒŒì¼app.vue&lt;script setup lang=&quot;ts&quot;&gt; &lt;/script&gt; &lt;template&gt; &lt;router-view/&gt;&lt;/template&gt; &lt;style scoped&gt; .logo &#123; height: 6em; padding: 1.5em; will-change: filter; transition: filter 300ms; &#125; .logo:hover &#123; filter: drop-shadow(0 0 2em #646cffaa); &#125; .logo.vue:hover &#123; filter: drop-shadow(0 0 2em #42b883aa); &#125; &lt;/style&gt;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue","slug":"Frontend/Vue","permalink":"https://ckck803.github.io/categories/Frontend/Vue/"},{"name":"Tailwind","slug":"Frontend/Vue/Tailwind","permalink":"https://ckck803.github.io/categories/Frontend/Vue/Tailwind/"}],"tags":[]},{"title":"[ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸°","slug":"devops/infra/k8s-infra-opensearch","date":"2025-02-22T06:31:46.000Z","updated":"2025-03-16T16:43:56.968Z","comments":true,"path":"2025/02/22/devops/infra/k8s-infra-opensearch/","link":"","permalink":"https://ckck803.github.io/2025/02/22/devops/infra/k8s-infra-opensearch/","excerpt":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://blog.pages.kr/2844 https://opendistro.github.io/for-elasticsearch-docs/docs/security/access-control/api/#reserved-and-hidden-resources https://forum.opensearch.org/t/default-password-reset/102/10 Admin Password ë³€ê²½ https://github.com/opendistro-for-elasticsearch/opendistro-build/issues/558 https://opendistro.github.io/for-elasticsearch-docs/docs/security/configuration/yaml/#internal_usersyml https://github.com/opensearch-project/helm-charts/issues/161 âœ… OpenSearch ì„¤ì¹˜# Helm Repo ì¶”ê°€helm repo add opensearch https://opensearch-project.github.io/helm-charts/# OpenSearch ì„¤ì¹˜helm upgrade --install opensearch \\ -f ./values-opensearch.yaml opensearch/opensearch \\ -n logging --create-namespace Release &quot;opensearch&quot; has been upgraded. Happy Helming!NAME: opensearchLAST DEPLOYED: Thu Jan 18 15:55:28 2024NAMESPACE: loggingSTATUS: deployedREVISION: 2TEST SUITE: NoneNOTES:Watch all cluster members come up. $ kubectl get pods --namespace=logging -l app.kubernetes.io/component=opensearch-cluster-master -w âœ… OpenSearch Dashboard ì„¤ì¹˜helm upgrade --install opensearch-dashboard \\ -f ./values-opensearch-dashboards.yaml opensearch/opensearch-dashboards \\ -n logging --create-namespace","text":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://blog.pages.kr/2844 https://opendistro.github.io/for-elasticsearch-docs/docs/security/access-control/api/#reserved-and-hidden-resources https://forum.opensearch.org/t/default-password-reset/102/10 Admin Password ë³€ê²½ https://github.com/opendistro-for-elasticsearch/opendistro-build/issues/558 https://opendistro.github.io/for-elasticsearch-docs/docs/security/configuration/yaml/#internal_usersyml https://github.com/opensearch-project/helm-charts/issues/161 âœ… OpenSearch ì„¤ì¹˜# Helm Repo ì¶”ê°€helm repo add opensearch https://opensearch-project.github.io/helm-charts/# OpenSearch ì„¤ì¹˜helm upgrade --install opensearch \\ -f ./values-opensearch.yaml opensearch/opensearch \\ -n logging --create-namespace Release &quot;opensearch&quot; has been upgraded. Happy Helming!NAME: opensearchLAST DEPLOYED: Thu Jan 18 15:55:28 2024NAMESPACE: loggingSTATUS: deployedREVISION: 2TEST SUITE: NoneNOTES:Watch all cluster members come up. $ kubectl get pods --namespace=logging -l app.kubernetes.io/component=opensearch-cluster-master -w âœ… OpenSearch Dashboard ì„¤ì¹˜helm upgrade --install opensearch-dashboard \\ -f ./values-opensearch-dashboards.yaml opensearch/opensearch-dashboards \\ -n logging --create-namespace Release &quot;opensearch&quot; has been upgraded. Happy Helming!NAME: opensearchLAST DEPLOYED: Thu Feb 6 23:13:09 2025NAMESPACE: loggingSTATUS: deployedREVISION: 2TEST SUITE: NoneNOTES:1. Get the application URL by running these commands: export POD_NAME=$(kubectl get pods --namespace logging -l &quot;app.kubernetes.io/name=opensearch-dashboards,app.kubernetes.io/instance=opensearch&quot; -o jsonpath=&quot;&#123;.items[0].metadata.name&#125;&quot;) export CONTAINER_PORT=$(kubectl get pod --namespace logging $POD_NAME -o jsonpath=&quot;&#123;.spec.containers[0].ports[0].containerPort&#125;&quot;) echo &quot;Visit http://127.0.0.1:8080 to use your application&quot; kubectl --namespace logging port-forward $POD_NAME 8080:$CONTAINER_PORT OpenSearch Demo User https://docs.search-guard.com/latest/demo-users-roles Admin ë¹„ë°€ë²ˆí˜¸ ë³€ê²½í•„ìš”í•œ ëª…ë ¹ì–´ ë° íŒŒì¼ ìœ„ì¹˜ /usr/share/elasticsearch/plugins/opendistro_security/tools/hash.sh/usr/share/elasticsearch/plugins/opendistro_security/securityconfig/internal_users.yml/usr/share/elasticsearch/plugins/opendistro_security/tools/securityadmin.sh securityConfig: enabled: true config: securityConfigSecret: &quot;&quot; dataComplete: true data: internal_users.yml: |- _meta: type: &quot;internalusers&quot; config_version: 2 admin: hash: &quot;YWtxanF0azFxMnczZTRyIUA=&quot; reserved: true backend_roles: - &quot;admin&quot; description: &quot;Demo admin user&quot; ë¬¸ì œ - Not yet initialized (you may need to run securityadmin)[2023-12-30T15:22:45,111][ERROR][o.o.s.a.BackendRegistry ] [opensearch-cluster-master-0] Not yet initialized (you may need to run securityadmin)[2023-12-30T15:22:45,115][ERROR][o.o.s.a.BackendRegistry ] [opensearch-cluster-master-0] Not yet initialized (you may need to run securityadmin)[2023-12-30T15:22:45,118][ERROR][o.o.s.a.BackendRegistry ] [opensearch-cluster-master-0] Not yet initialized (you may need to run securityadmin)[2023-12-30T15:22:45,120][ERROR][o.o.s.a.BackendRegistry ] [opensearch-cluster-master-0] Not yet initialized (you may need to run securityadmin)[2023-12-30T15:22:47,614][ERROR][o.o.s.a.BackendRegistry ] [opensearch-cluster-master-0] Not yet initialized (you may need to run securityadmin)[2023-12-30T15:22:47,617][ERROR][o.o.s.a.BackendRegistry ] [opensearch-cluster-master-0] Not yet initialized (you may need to run securityadmin)[2023-12-30T15:22:47,620][ERROR][o.o.s.a.BackendRegistry ] [opensearch-cluster-master-0] Not yet initialized (you may need to run securityadmin)[2023-12-30T15:22:47,623][ERROR][o.o.s.a.BackendRegistry ] [opensearch-cluster-master-0] Not yet initialized (you may need to run securityadmin) kubectl -n logging exec -it opensearch-cluster-master-0 -- /usr/share/opensearch/plugins/opensearch-security/tools/hash.sh pod ë‚´ì—ì„œ /usr/share/opensearch/plugins/opensearch-security/tools/securityadmin.sh \\ -cd /usr/share/opensearch/config/opensearch-security/ \\ -icl \\ -nhnv \\ -cacert /usr/share/opensearch/config/root-ca.pem \\ -cert /usr/share/opensearch/config/kirk.pem \\ -key /usr/share/opensearch/config/kirk-key.pem ì¿ ë²„ë„¤í‹°ìŠ¤ ëª…ë ¹ì–´ë¡œ ì‹¤í–‰ kubectl exec \\ -n logging \\ -it opensearch-cluster-master-0 \\ -- /usr/share/opensearch/plugins/opensearch-security/tools/securityadmin.sh \\ -cd /usr/share/opensearch/config/opensearch-security/ \\ -icl \\ -nhnv \\ -cacert /usr/share/opensearch/config/root-ca.pem \\ -cert /usr/share/opensearch/config/kirk.pem \\ -key /usr/share/opensearch/config/kirk-key.pem securityConfig.internalUsersSecret ì„ ì´ìš©í•œ Admin ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ë¹„ë°€ë²ˆí˜¸ Hash ê°’ ìƒì„± kubectl -n logging exec -it opensearch-cluster-master-0 -- /usr/share/opensearch/plugins/opensearch-security/tools/hash.sh Secret íŒŒì¼ ìƒì„± apiVersion: v1kind: Secretmetadata: name: opensearch-internal-users namespace: loggingtype: OpaquestringData: internal_users.yml: | --- # This is the internal user database # The hash value is a bcrypt hash and can be generated using: # $ plugins/opensearch-security/tools/hash.sh -p &lt;new-password&gt; _meta: type: &quot;internalusers&quot; config_version: 2 # Define your internal users here ## internal users admin: hash: &quot;$2y$12$yGwPWlea1ghTu9NFl00h6.SqRJY1G.MuFyX8PTQnwUnYaGgUsFKBu&quot; reserved: true backend_roles: - &quot;admin&quot; description: &quot;admin user&quot; securityConfig.internalUsersSecret ì— Secret ì´ë¦„ ì„¤ì • securityConfig: enabled: true path: &quot;/usr/share/opensearch/config/opensearch-security&quot; actionGroupsSecret: configSecret: internalUsersSecret: opensearch-internal-users âœ… OpenSearch Dashboards basePath ë° Ingress ì„¤ì •config: opensearch_dashboards.yml: | server: host: &#x27;0.0.0.0&#x27; basePath: &quot;/logging&quot; rewriteBasePath: true opensearch: hosts: [https://localhost:9200] ssl.verificationMode: none username: kibanaserver password: kibanaserver requestHeadersWhitelist: [authorization, securitytenant] opensearch_security.multitenancy: enabled: true opensearch_security.multitenancy.tenants: preferred: [Private, Global] opensearch_security: readonly_mode.roles: [kibana_read_only] cookie.secure: false Ingress ì„¤ì •apiVersion: networking.k8s.io/v1kind: Ingressmetadata: name: logging namespace: logging annotations: kubernetes.io/ingress.class: nginxspec: rules: - http: paths: - path: /logging pathType: Prefix backend: service: name: opensearch-dashboards port: number: 5601 âœ… KeyCloak OpenSearch ì—°ë™ ì°¸ê³  https://velog.io/@ziggy/Keyclock-%EA%B5%AC%EC%B6%95-%EB%B0%8F-Opensearch-%EC%97%B0%EB%8F%99 https://opensearch.org/docs/latest/security/authentication-backends/openid-connect/ https://opensearch.org/docs/latest/security/authentication-backends/openid-connect/#opensearch-security-configuration https://opensearch.org/docs/latest/security/authentication-backends/openid-connect/#opensearch-dashboards-single-sign-on https://forum.opensearch.org/t/opensearch-integration-with-keycloak-using-k8s-opster-operator/15388/5 1. OpenSearch Client ìƒì„± 2. KeyCloak OpenSearch User Client Role ìƒì„± 3. OpenSearch ì—°ë™ ë° ì„¤ì •íŒŒì¼ ìƒì„±3.1 KeyClock Connect URL í™•ì¸ 3.2 OpenSearch Client Credential í™•ì¸ 3.3 config.yml ìƒì„± https://forum.opensearch.org/t/opensearch-saml-ad-working-but-with-no-basic-authorization-header-warning/13883/2 https://forum.opensearch.org/t/openid-401-unauthorized-with-keycloak/10364/2 apiVersion: v1kind: Secretmetadata: name: opensearch-openid-keycloak namespace: loggingtype: OpaquestringData: config.yml: |- _meta: type: &quot;config&quot; config_version: 2 config: dynamic: authz: &#123;&#125; authc: openid_auth_domain: http_enabled: true transport_enabled: true order: 0 http_authenticator: type: openid challenge: false config: subject_key: preferred_username roles_key: roles openid_connect_url: http://auth.crunchychoco.com/realms/ddanzit/.well-known/openid-configuration skip_users: - kibanaserver - admin authentication_backend: type: noop basic_internal_auth_domain: http_enabled: true transport_enabled: true order: 1 http_authenticator: type: basic challenge: false authentication_backend: type: internal config.yml ì„ í†µí•´ ì¸ì¦ ë°©ì‹ê³¼ ìˆœì„œë¥¼ ì„¤ì •í•˜ë©´ dashboard ì—ì„œ ì„¤ì •ëœ ì¸ì¦ ë°©ì‹ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 3.4 Opensearch values.yaml ìˆ˜ì •securityConfig: enabled: true configSecret: opensearch-openid-keycloak 3.5 opensearch_dashboards.yml ìˆ˜ì •server: host: &#x27;0.0.0.0&#x27;opensearch: hosts: [https://opensearch-cluster-master:9200] ssl.verificationMode: none username: kibanaserver password: kibanaserver requestHeadersWhitelist: [authorization, securitytenant]opensearch_security.multitenancy: enabled: trueopensearch_security.multitenancy.tenants: preferred: [Private, Global]opensearch_security: readonly_mode.roles: [kibana_read_only] cookie.secure: falseopensearch_security.auth.type: [&quot;openid&quot;]opensearch_security.openid.connect_url: &quot;http://auth.crunchychoco.com/realms/ddanzit/.well-known/openid-configuration&quot;opensearch_security.openid.client_id: &quot;opensearch&quot;opensearch_security.openid.client_secret: &quot;9EH2nHCcpKk05F8l8TUsqnEslA26h2KU&quot;opensearch_security.openid.base_redirect_url: &quot;http://logging.crunchychoco.com&quot; 3.6 OpenSearch SSO ë° Basic Auth ì‚¬ìš© ì„¤ì •opensearch_security.auth.type: [&quot;basicauth&quot;,&quot;openid&quot;]opensearch_security.auth.multiple_auth_enabled: true 3.7 skeycloak ì¸ì¦ í…ŒìŠ¤íŠ¸export CLIENT_ID=opensearchexport CLIENT_SECRET=&#x27;9EH2nHCcpKk05F8l8TUsqnEslA26h2KU&#x27;export PW=&#x27;1q2w3e4r!@#&#x27;RESULT=$(curl -k --noproxy &#x27;*&#x27; -d &#x27;username=ddanzit&#x27; -d &quot;password=$PW&quot; -d &#x27;grant_type=password&#x27; -d &quot;client_id=$CLIENT_ID&quot; -d &quot;client_secret=$CLIENT_SECRET&quot; -d &#x27;scope=openid&#x27; &#x27;http://auth.crunchychoco.com/realms/ddanzit/protocol/openid-connect/token&#x27;)TOKEN=$(echo $RESULT | sed &#x27;s/.*access_token&quot;:&quot;\\([^&quot;]*\\).*/\\1/&#x27;)curl -H &quot;Authorization: Bearer $TOKEN&quot; http://auth.crunchychoco.com/realms/ddanzit/protocol/openid-connect/userinfo&#123; &quot;sub&quot;: &quot;ce6f75ba-26fb-4cf4-9e7d-06f20d7d749f&quot;, &quot;email_verified&quot;: true, &quot;name&quot;: &quot;ë™ìš° ì–‘&quot;, &quot;preferred_username&quot;: &quot;kwangill&quot;, &quot;given_name&quot;: &quot;ë™ìš°&quot;, &quot;family_name&quot;: &quot;ì–‘&quot;, &quot;email&quot;: &quot;askain@hanmail.net&quot;&#125; 3.8 keycloak Json Web Token(JWT) ë‚´ìš© í™•ì¸&#123; &quot;exp&quot;: 1705381539, &quot;iat&quot;: 1705381239, &quot;jti&quot;: &quot;e6cf69c7-f674-4a10-bfbc-444d3c19ad25&quot;, &quot;iss&quot;: &quot;http://auth.crunchychoco.com/realms/ddanzit&quot;, &quot;aud&quot;: &quot;account&quot;, &quot;sub&quot;: &quot;4eac345b-bfb9-4c4f-aba3-d52af277bbf0&quot;, &quot;typ&quot;: &quot;Bearer&quot;, &quot;azp&quot;: &quot;opensearch&quot;, &quot;session_state&quot;: &quot;c7c47cf3-34bf-40d5-891a-6d5ae52cc855&quot;, &quot;acr&quot;: &quot;1&quot;, &quot;allowed-origins&quot;: [ &quot;&quot; ], &quot;realm_access&quot;: &#123; &quot;roles&quot;: [ &quot;default-roles-ddanzit&quot;, &quot;offline_access&quot;, &quot;admin&quot;, &quot;uma_authorization&quot;, &quot;Admin&quot; ] &#125;, &quot;resource_access&quot;: &#123; &quot;account&quot;: &#123; &quot;roles&quot;: [ &quot;manage-account&quot;, &quot;manage-account-links&quot;, &quot;view-profile&quot; ] &#125; &#125;, &quot;scope&quot;: &quot;openid email profile&quot;, &quot;sid&quot;: &quot;c7c47cf3-34bf-40d5-891a-6d5ae52cc855&quot;, &quot;email_verified&quot;: false, &quot;name&quot;: &quot;ë™ìš° ì–‘&quot;, &quot;preferred_username&quot;: &quot;ddanzit&quot;, &quot;given_name&quot;: &quot;ë™ìš°&quot;, &quot;family_name&quot;: &quot;ì–‘&quot;, &quot;email&quot;: &quot;ckck803@naver.com&quot;&#125; No â€˜Basic Authorizationâ€™ header, send 401 and â€˜WWW-Authenticate Basicâ€™ https://forum.opensearch.org/t/opensearch-dashboards-getting-no-basic-authorization-header-send-401-and-www-authenticate-basic-when-trying-to-login-via-sso/16101/7 https://forum.search-guard.com/t/no-basic-authorization-header-send-401-and-www-authenticate-basic-while-using-openid-and-basic-auth-domain/1930 https://opensearch.org/docs/latest/security/configuration/security-admin/ ìœ„ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´ securityadmin.sh ë¥¼ ì´ìš©í•˜ì—¬ ì„¤ì •íŒŒì¼ì„ ì ìš©í•œë‹¤. kubectl exec \\ -n logging \\ -it opensearch-cluster-master-0 \\ -- /usr/share/opensearch/plugins/opensearch-security/tools/securityadmin.sh \\ -cd /usr/share/opensearch/config/opensearch-security/ \\ -icl \\ -nhnv \\ -cacert /usr/share/opensearch/config/root-ca.pem \\ -cert /usr/share/opensearch/config/kirk.pem \\ -key /usr/share/opensearch/config/kirk-key.pem FATAL Error: Multiple Authentication Mode is disabled. To enable this feature, please set up opensearch_security.auth.multiple_auth_enabled: trueopensearch_security.auth.multiple_auth_enabled: true","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"[ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸°","slug":"devops/infra/k8s-infra-prometheus-grafana","date":"2025-02-22T04:31:46.000Z","updated":"2025-03-16T16:13:17.189Z","comments":true,"path":"2025/02/22/devops/infra/k8s-infra-prometheus-grafana/","link":"","permalink":"https://ckck803.github.io/2025/02/22/devops/infra/k8s-infra-prometheus-grafana/","excerpt":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° âœ… ë©”íŠ¸ë¦­ ìˆ˜ì§‘ì„ ìœ„í•œ Prometheusì„œë¹„ìŠ¤ë¥¼ ì˜¬ë ¸ë‹¤ê³  í•´ì„œ ëì´ ì•„ë‹ˆë‹¤! ì„œë¹„ìŠ¤ë¥¼ ìš´ìš©í•˜ëŠ” ì…ì¥ì—ì„œëŠ” ì‹œìŠ¤í…œì´ ì•ˆì •ì ì¸ì§€ ì§€ì†ì ìœ¼ë¡œ í™•ì¸ì„ í•´ì•¼ í•˜ëŠ”ë°, ìš´ì˜í•˜ëŠ” ì„œë¹„ìŠ¤ì˜ CPU ì‚¬ìš©ë¥ , ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ ê³¼ ê°™ì€ ë©”íŠ¸ë¦­ ì •ë³´ë¥¼ ì§€ì†ì ìœ¼ë¡œ ìˆ˜ì§‘í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•´ì•¼ í•©ë‹ˆë‹¤. ì €ëŠ” ëŒ€ì¤‘ì ìœ¼ë¡œ ë§ì´ ì•Œë ¤ì§„ Prometheus ë¥¼ ì´ìš©í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ìš´ì˜ì¤‘ì¸ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ë©”íŠ¸ë¦­ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ë ¤ê³  í•©ë‹ˆë‹¤. Helm ì„ ì´ìš©í•œ Prometheus ì„¤ì¹˜# helm repo ì¶”ê°€helm repo add prometheus-community https://prometheus-community.github.io/helm-charts# prometheus ì„¤ì¹˜helm upgrade --install -f ./values-prometheus.yaml prometheus prometheus-community/prometheus -n monitoring --create-namespace Release &quot;prometheus&quot; does not exist. Installing it now.NAME: prometheusLAST DEPLOYED: Fri Nov 15 10:11:47 2024NAMESPACE: monitoringSTATUS: deployedREVISION: 1TEST SUITE: NoneNOTES:The Prometheus server can be accessed via port 80 on the following DNS name from within your cluster:prometheus-server.monitoring.svc.cluster.localGet the Prometheus server URL by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace monitoring -l &quot;app.kubernetes.io/name=prometheus,app.kubernetes.io/instance=prometheus&quot; -o jsonpath=&quot;&#123;.items[0].metadata.name&#125;&quot;) kubectl --namespace monitoring port-forward $POD_NAME 9090####################################################################################### WARNING: Persistence is disabled!!! You will lose your data when ########### the Server pod is terminated. ######################################################################################The Prometheus alertmanager can be accessed via port 9093 on the following DNS name from within your cluster:prometheus-alertmanager.monitoring.svc.cluster.localGet the Alertmanager URL by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace monitoring -l &quot;app.kubernetes.io/name=alertmanager,app.kubernetes.io/instance=prometheus&quot; -o jsonpath=&quot;&#123;.items[0].metadata.name&#125;&quot;) kubectl --namespace monitoring port-forward $POD_NAME 9093####################################################################################### WARNING: Persistence is disabled!!! You will lose your data when ########### the AlertManager pod is terminated. ############################################################################################################################################################################# WARNING: Pod Security Policy has been disabled by default since ########### it deprecated after k8s 1.25+. use ########### (index .Values &quot;prometheus-node-exporter&quot; &quot;rbac&quot; ########### . &quot;pspEnabled&quot;) with (index .Values ########### &quot;prometheus-node-exporter&quot; &quot;rbac&quot; &quot;pspAnnotations&quot;) ########### in case you still need it. ######################################################################################The Prometheus PushGateway can be accessed via port 9091 on the following DNS name from within your cluster:prometheus-prometheus-pushgateway.monitoring.svc.cluster.localGet the PushGateway URL by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace monitoring -l &quot;app=prometheus-pushgateway,component=pushgateway&quot; -o jsonpath=&quot;&#123;.items[0].metadata.name&#125;&quot;) kubectl --namespace monitoring port-forward $POD_NAME 9091For more information on running Prometheus, visit:https://prometheus.io/ âœ… ëª¨ë‹ˆí„°ë§ì„ ìœ„í•œ Grafanaë©”íŠ¸ë¦­ ìˆ˜ì§‘ì„ ìœ„í•œ Prometheus ë¥¼ ì„¤ì¹˜ í–ˆëŠ”ë°! ë‹¨ìˆœ ë©”íŠ¸ë¦­ ì •ë³´ë§Œ ìˆìœ¼ë©´ ìš´ì˜í•˜ëŠ” ì…ì¥ì—ì„œ ê°€ì‹œì ìœ¼ë¡œ ì™€ ë‹¿ì§€ ì•ŠìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° âœ… ë©”íŠ¸ë¦­ ìˆ˜ì§‘ì„ ìœ„í•œ Prometheusì„œë¹„ìŠ¤ë¥¼ ì˜¬ë ¸ë‹¤ê³  í•´ì„œ ëì´ ì•„ë‹ˆë‹¤! ì„œë¹„ìŠ¤ë¥¼ ìš´ìš©í•˜ëŠ” ì…ì¥ì—ì„œëŠ” ì‹œìŠ¤í…œì´ ì•ˆì •ì ì¸ì§€ ì§€ì†ì ìœ¼ë¡œ í™•ì¸ì„ í•´ì•¼ í•˜ëŠ”ë°, ìš´ì˜í•˜ëŠ” ì„œë¹„ìŠ¤ì˜ CPU ì‚¬ìš©ë¥ , ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ ê³¼ ê°™ì€ ë©”íŠ¸ë¦­ ì •ë³´ë¥¼ ì§€ì†ì ìœ¼ë¡œ ìˆ˜ì§‘í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•´ì•¼ í•©ë‹ˆë‹¤. ì €ëŠ” ëŒ€ì¤‘ì ìœ¼ë¡œ ë§ì´ ì•Œë ¤ì§„ Prometheus ë¥¼ ì´ìš©í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ìš´ì˜ì¤‘ì¸ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ë©”íŠ¸ë¦­ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ë ¤ê³  í•©ë‹ˆë‹¤. Helm ì„ ì´ìš©í•œ Prometheus ì„¤ì¹˜# helm repo ì¶”ê°€helm repo add prometheus-community https://prometheus-community.github.io/helm-charts# prometheus ì„¤ì¹˜helm upgrade --install -f ./values-prometheus.yaml prometheus prometheus-community/prometheus -n monitoring --create-namespace Release &quot;prometheus&quot; does not exist. Installing it now.NAME: prometheusLAST DEPLOYED: Fri Nov 15 10:11:47 2024NAMESPACE: monitoringSTATUS: deployedREVISION: 1TEST SUITE: NoneNOTES:The Prometheus server can be accessed via port 80 on the following DNS name from within your cluster:prometheus-server.monitoring.svc.cluster.localGet the Prometheus server URL by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace monitoring -l &quot;app.kubernetes.io/name=prometheus,app.kubernetes.io/instance=prometheus&quot; -o jsonpath=&quot;&#123;.items[0].metadata.name&#125;&quot;) kubectl --namespace monitoring port-forward $POD_NAME 9090####################################################################################### WARNING: Persistence is disabled!!! You will lose your data when ########### the Server pod is terminated. ######################################################################################The Prometheus alertmanager can be accessed via port 9093 on the following DNS name from within your cluster:prometheus-alertmanager.monitoring.svc.cluster.localGet the Alertmanager URL by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace monitoring -l &quot;app.kubernetes.io/name=alertmanager,app.kubernetes.io/instance=prometheus&quot; -o jsonpath=&quot;&#123;.items[0].metadata.name&#125;&quot;) kubectl --namespace monitoring port-forward $POD_NAME 9093####################################################################################### WARNING: Persistence is disabled!!! You will lose your data when ########### the AlertManager pod is terminated. ############################################################################################################################################################################# WARNING: Pod Security Policy has been disabled by default since ########### it deprecated after k8s 1.25+. use ########### (index .Values &quot;prometheus-node-exporter&quot; &quot;rbac&quot; ########### . &quot;pspEnabled&quot;) with (index .Values ########### &quot;prometheus-node-exporter&quot; &quot;rbac&quot; &quot;pspAnnotations&quot;) ########### in case you still need it. ######################################################################################The Prometheus PushGateway can be accessed via port 9091 on the following DNS name from within your cluster:prometheus-prometheus-pushgateway.monitoring.svc.cluster.localGet the PushGateway URL by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace monitoring -l &quot;app=prometheus-pushgateway,component=pushgateway&quot; -o jsonpath=&quot;&#123;.items[0].metadata.name&#125;&quot;) kubectl --namespace monitoring port-forward $POD_NAME 9091For more information on running Prometheus, visit:https://prometheus.io/ âœ… ëª¨ë‹ˆí„°ë§ì„ ìœ„í•œ Grafanaë©”íŠ¸ë¦­ ìˆ˜ì§‘ì„ ìœ„í•œ Prometheus ë¥¼ ì„¤ì¹˜ í–ˆëŠ”ë°! ë‹¨ìˆœ ë©”íŠ¸ë¦­ ì •ë³´ë§Œ ìˆìœ¼ë©´ ìš´ì˜í•˜ëŠ” ì…ì¥ì—ì„œ ê°€ì‹œì ìœ¼ë¡œ ì™€ ë‹¿ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë²ˆì—ëŠ” ë©”íŠ¸ë¦­ ì •ë³´ë¥¼ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ëŠ” ëŒ€ì‹œë³´ë“œ íˆ´ì¸ Grafana ë¥¼ ì„¤ì¹˜í•´ ëŒ€ì‹œë³´ë“œë¥¼ êµ¬ì„±í•˜ë ¤ê³  í•©ë‹ˆë‹¤. Helm ì„ ì´ìš©í•œ Grafana ì„¤ì¹˜# repo ì¶”ê°€helm repo add grafana https://grafana.github.io/helm-charts# grafana ì„¤ì¹˜helm upgrade --install -f values-grafana.yaml grafana grafana/grafana -n monitoring --create-namespace Release &quot;grafana&quot; does not exist. Installing it now.NAME: grafanaLAST DEPLOYED: Fri Nov 15 11:22:42 2024NAMESPACE: monitoringSTATUS: deployedREVISION: 1NOTES:1. Get your &#x27;admin&#x27; user password by running: kubectl get secret --namespace monitoring grafana -o jsonpath=&quot;&#123;.data.admin-password&#125;&quot; | base64 --decode ; echo2. The Grafana server can be accessed via port 80 on the following DNS name from within your cluster: grafana.monitoring.svc.cluster.local Get the Grafana URL to visit by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace monitoring -l &quot;app.kubernetes.io/name=grafana,app.kubernetes.io/instance=grafana&quot; -o jsonpath=&quot;&#123;.items[0].metadata.name&#125;&quot;) kubectl --namespace monitoring port-forward $POD_NAME 30003. Login with the password from step 1 and the username: admin####################################################################################### WARNING: Persistence is disabled!!! You will lose your data when ########### the Grafana pod is terminated. ###################################################################################### âœ… Grafana KeyCloak ì—°ë™ ì°¸ê³  https://grafana.com/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/keycloak/ 1. KeyCloak - Grafana Client ìƒì„± 2. KeyCloak - Grafana User Client Role ì¶”ê°€ 3. Grafana values.yaml ìˆ˜ì •server: root_url: http://monitoring.crunchychoco.com/auth.generic_oauth: enabled: true name: ddanzit allow_sign_up: true client_id: grafana client_secret: FYFRju1uhbUnZeQq3BUz1n7G1cK7DSNc scopes: openid email profile offline_access roles email_attribute_path: email login_attribute_path: username name_attribute_path: full_name auth_url: http://auth.crunchychoco.com/realms/ddanzit/protocol/openid-connect/auth token_url: http://auth.crunchychoco.com/realms/ddanzit/protocol/openid-connect/token api_url: http://auth.crunchychoco.com/realms/ddanzit/protocol/openid-connect/userinfo role_attribute_path: contains(roles[*], &#x27;admin&#x27;) &amp;&amp; &#x27;Admin&#x27; || contains(roles[*], &#x27;editor&#x27;) &amp;&amp; &#x27;Editor&#x27; || &#x27;Viewer&#x27;","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"[ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸°","slug":"devops/infra/k8s-infra-nginx-ingress-controller","date":"2025-02-22T03:31:46.000Z","updated":"2025-03-16T16:13:00.729Z","comments":true,"path":"2025/02/22/devops/infra/k8s-infra-nginx-ingress-controller/","link":"","permalink":"https://ckck803.github.io/2025/02/22/devops/infra/k8s-infra-nginx-ingress-controller/","excerpt":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://kubernetes.github.io/ingress-nginx/ https://github.com/nginxinc/kubernetes-ingress https://artifacthub.io/packages/helm/ingress-nginx/ingress-nginx https://www.nginx.com/blog/guide-to-choosing-ingress-controller-part-4-nginx-ingress-controller-options/ https://kubernetes.github.io/ingress-nginx/deploy/#bare-metal-clusters Ingress Controller ì„¤ì¹˜í˜„ì¬ ì„¤ì¹˜ëœ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” Ingress ë¥¼ ìƒì„± í•˜ë”ë¼ë„ ì™¸ë¶€ ìš”ì²­ì„ Ingress ì„¤ì •ì— ë§ê²Œ ì™¸ë¶€ ìš”ì²­ì„ ë‚´ë¶€ ì„œë¹„ìŠ¤ë¡œ ì „ë‹¬í•´ì£¼ëŠ” Controller ê°€ ë”°ë¡œ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ê·œì¹™ì„ ìƒì„±í•˜ë”ë¼ë„ ê·œì¹™ì„ ì½ì–´ì„œ ì ìš©ì‹œì¼œì£¼ëŠ” ëª¨ë“ˆì´ ì—†ëŠ” ìƒíƒœì…ë‹ˆë‹¤. ë³´í†µ, í´ë¼ìš°ìŠ¤ ì„œë¹„ìŠ¤ì—ì„œëŠ” ALB ë‚˜ NLB ì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ Ingress ì •ì±…ì„ ì½ì–´ Load Balancing ê·œì¹™ì„ ì ìš©í•´ì£¼ëŠ”ë°, ê°œì¸ ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì €ëŸ° ì‹œìŠ¤í…œì„ ê¸°ëŒ€í•˜ê¸° í˜ë“¦ìœ¼ë¡œ ì €ëŠ” Nginx ì—ì„œ ì œê³µí•´ì£¼ëŠ” Ingress Controller ë¥¼ ì´ìš©í•˜ë ¤ê³  í•©ë‹ˆë‹¤. Helm ì„¤ì¹˜helm upgrade --install ingress-nginx ingress-nginx \\ --repo https://kubernetes.github.io/ingress-nginx \\ --namespace ingress-nginx --create-namespace","text":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://kubernetes.github.io/ingress-nginx/ https://github.com/nginxinc/kubernetes-ingress https://artifacthub.io/packages/helm/ingress-nginx/ingress-nginx https://www.nginx.com/blog/guide-to-choosing-ingress-controller-part-4-nginx-ingress-controller-options/ https://kubernetes.github.io/ingress-nginx/deploy/#bare-metal-clusters Ingress Controller ì„¤ì¹˜í˜„ì¬ ì„¤ì¹˜ëœ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” Ingress ë¥¼ ìƒì„± í•˜ë”ë¼ë„ ì™¸ë¶€ ìš”ì²­ì„ Ingress ì„¤ì •ì— ë§ê²Œ ì™¸ë¶€ ìš”ì²­ì„ ë‚´ë¶€ ì„œë¹„ìŠ¤ë¡œ ì „ë‹¬í•´ì£¼ëŠ” Controller ê°€ ë”°ë¡œ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ê·œì¹™ì„ ìƒì„±í•˜ë”ë¼ë„ ê·œì¹™ì„ ì½ì–´ì„œ ì ìš©ì‹œì¼œì£¼ëŠ” ëª¨ë“ˆì´ ì—†ëŠ” ìƒíƒœì…ë‹ˆë‹¤. ë³´í†µ, í´ë¼ìš°ìŠ¤ ì„œë¹„ìŠ¤ì—ì„œëŠ” ALB ë‚˜ NLB ì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ Ingress ì •ì±…ì„ ì½ì–´ Load Balancing ê·œì¹™ì„ ì ìš©í•´ì£¼ëŠ”ë°, ê°œì¸ ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì €ëŸ° ì‹œìŠ¤í…œì„ ê¸°ëŒ€í•˜ê¸° í˜ë“¦ìœ¼ë¡œ ì €ëŠ” Nginx ì—ì„œ ì œê³µí•´ì£¼ëŠ” Ingress Controller ë¥¼ ì´ìš©í•˜ë ¤ê³  í•©ë‹ˆë‹¤. Helm ì„¤ì¹˜helm upgrade --install ingress-nginx ingress-nginx \\ --repo https://kubernetes.github.io/ingress-nginx \\ --namespace ingress-nginx --create-namespace BareMetal ì„¤ì¹˜# BareMetal ì„¤ì¹˜wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.0.4/deploy/static/provider/baremetal/deploy.yamlkubectl apply -f deploy.yaml# Cloud ì„¤ì¹˜wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.0/deploy/static/provider/cloud/deploy.yamlkubectl apply -f deploy.yaml namespace/ingress-nginx createdserviceaccount/ingress-nginx createdserviceaccount/ingress-nginx-admission createdrole.rbac.authorization.k8s.io/ingress-nginx createdrole.rbac.authorization.k8s.io/ingress-nginx-admission createdclusterrole.rbac.authorization.k8s.io/ingress-nginx createdclusterrole.rbac.authorization.k8s.io/ingress-nginx-admission createdrolebinding.rbac.authorization.k8s.io/ingress-nginx createdrolebinding.rbac.authorization.k8s.io/ingress-nginx-admission createdclusterrolebinding.rbac.authorization.k8s.io/ingress-nginx createdclusterrolebinding.rbac.authorization.k8s.io/ingress-nginx-admission createdconfigmap/ingress-nginx-controller createdservice/ingress-nginx-controller createdservice/ingress-nginx-controller-admission createddeployment.apps/ingress-nginx-controller createdjob.batch/ingress-nginx-admission-create createdjob.batch/ingress-nginx-admission-patch createdingressclass.networking.k8s.io/nginx createdvalidatingwebhookconfiguration.admissionregistration.k8s.io/ingress-nginx-admission created 1. hostNetwork ì‚¬ìš©í•˜ê¸° https://kubernetes.github.io/ingress-nginx/deploy/baremetal/#via-the-host-network EKS ë‚˜ AKS ì™€ëŠ” ë‹¬ë¦¬ LB(Load Balancer) ê°€ ì—†ëŠ” Bare Metal í™˜ê²½ì—ì„œëŠ” Ingress Controller ë§Œ ì„¤ì¹˜ í–ˆë‹¤ê³  í•´ì„œ ì™¸ë¶€ ìš”ì²­ì´ ì¿ ë²„ë„¤í‹°ìŠ¤ ë‚´ë¡œ ë“¤ì–´ì˜¤ì§€ëŠ” ëª»í•©ë‹ˆë‹¤. ğŸ˜­ NortPort ë¥¼ ì´ìš©í•´ Ingress Controller ì˜ ì„œë¹„ìŠ¤ë¥¼ ì™¸ë¶€ë¡œ ë…¸ì¶œí•˜ëŠ” ë°©ë²•ì´ ìˆì§€ë§Œ, ë‹¨ì¼ Pod ë§Œ ì˜¬ë¦° ìƒíƒœë¼ Pod ì˜ í¬íŠ¸ë¥¼ ì™¸ë¶€ë¡œ ì§ì ‘ ë…¸ì¶œí•˜ëŠ” hostNetwork ë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•©ë‹ˆë‹¤. (hostPort ë„ ì‚¬ìš© ê°€ëŠ¥) hostNetwork ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´, í•´ë‹¹ Podê°€ ë…¸ë“œì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê³µìœ í•˜ê²Œ ë˜ì–´ ì»¨í…Œì´ë„ˆ í¬íŠ¸ê°€ ë…¸ë“œ í¬íŠ¸ì™€ ì§ì ‘ ì—°ê²°ë©ë‹ˆë‹¤. ì¦‰, ì»¨í…Œì´ë„ˆ ë‚´ì˜ 80ë²ˆ í¬íŠ¸ê°€ ìë™ìœ¼ë¡œ ë…¸ë“œì˜ 80ë²ˆ í¬íŠ¸ì™€ ë°”ì¸ë”©ë˜ë¯€ë¡œ ë³„ë„ì˜ í¬íŠ¸ í¬ì›Œë”© ì—†ì´ ì™¸ë¶€ì—ì„œ ë…¸ë“œì˜ 80ë²ˆ(ë° 443ë²ˆ) í¬íŠ¸ë¡œ ì ‘ì†í•  ë•Œ Ingress Controller ê°€ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤. ë§Œì¼ Controller Pod ê°€ ì—¬ëŸ¬ê°œ ìˆì–´ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ë¡œë“œë°¸ëŸ°ì‹±ì„ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ NortPort ë¥¼ ì´ìš©í•´ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•˜ë„ë¡ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤. apiVersion: apps/v1kind: Deploymentmetadata: name: ingress-nginx-controller namespace: ingress-nginxspec: replicas: 1 selector: matchLabels: app.kubernetes.io/name: ingress-nginx template: metadata: labels: app.kubernetes.io/name: ingress-nginx spec: # hostNetwork í™œì„±í™”: Podê°€ ë…¸ë“œ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•¨ ìˆ˜ ìˆìŠµë‹ˆë‹¤. hostNetwork: true containers: - name: controller image: k8s.gcr.io/ingress-nginx/controller:v1.7.1 args: - /nginx-ingress-controller # í•„ìš”ì— ë”°ë¼ ì¶”ê°€ ì¸ì ì„¤ì • ports: - name: http containerPort: 80 # hostNetwork ì‚¬ìš© ì‹œ hostPort ì§€ì •ì€ ì‚¬ì‹¤ìƒ ë¶ˆí•„ìš”í•˜ì§€ë§Œ ëª…ì‹œí•  ìˆ˜ë„ ìˆìŒ hostPort: 80 protocol: TCP - name: https containerPort: 443 hostPort: 443 protocol: TCP HTTPS ì ìš©í•˜ê¸° - NGINX Ingress Controllerì™€ cert-manager ì°¸ê³  https://kubernetes.github.io/ingress-nginx/user-guide/tls/#automated-certificate-management-with-cert-manager https://github.com/cert-manager/cert-manager Ingress Controller ì„¤ì¹˜ë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„°ë‚´ë¶€ì™€ ì™¸ë¶€ì˜ HTTP í†µì‹ ì´ ê°€ëŠ¥í•œ ìƒíƒœë‹ˆ ì—¬ê¸°ì„œ ë³´ì•ˆì´ ì¶”ê°€ëœ HTTPS í†µì‹ ì„ í•˜ê¸° ìœ„í•œ ì„¤ì •ì„ í•˜ë ¤ê³  í•©ë‹ˆë‹¤. HTTPS ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì¸ì¦ì„œë¥¼ ìƒì„±í•˜ê³  GlobalSign ë‚˜ DigiCert ì™€ ê°™ì€ ì‹ ë¢°ì„±ì´ ë†’ê³  ìœ ëª…í•œ ê¸°ê´€ì— ì¸ì¦ì„œë¥¼ ë“±ë¡í•´ì•¼ í•˜ì§€ë§Œ, ê¸°ê´€ì— SSL ì¸ì¦ì„œë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” ê¸ˆì•¡ì´ ê½¤ ë“¤ê¸° ë•Œë¬¸ì— ë¬´ë£Œë¡œ ì¸ì¦ì„œë¥¼ ë“±ë¡ ë° ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì´ ì—†ëŠ”ì§€ ì°¾ì•„ë³´ë‹¤ê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ HTTPS ë¥¼ ì†ì‰½ê²Œ ì ìš©í•´ì£¼ëŠ” cert-manager ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤. cert-manager ì—ì„œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‰½ê²Œ HTTPS ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ Operator ë¥¼ ì œê³µí•©ë‹ˆë‹¤. 1. cert-manager ì„¤ì¹˜kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.15.3/cert-manager.yaml 2. Issuers ì •ì˜# tls-issuer.yaml# kubectl apply -f tls-issuer.yamlapiVersion: cert-manager.io/v1kind: ClusterIssuermetadata: name: letsencrypt-nginxspec: acme: server: https://acme-v02.api.letsencrypt.org/directory email: &lt;ì´ë©”ì¼&gt; privateKeySecretRef: name: letsencrypt-nginx solvers: - http01: ingress: class: nginx 3. ingressì— ë°˜ì˜# ingress.yaml# kubectl apply -f ingress.yamlapiVersion: networking.k8s.io/v1kind: Ingressmetadata: annotations: cert-manager.io/cluster-issuer: letsencrypt-nginx acme.cert-manager.io/http01-edit-in-place: &quot;true&quot; nginx.ingress.kubernetes.io/ssl-redirect: &quot;true&quot; kubernetes.io/tls-acme: &quot;true&quot; name: backend-ingress namespace: defaultspec: ingressClassName: &quot;nginx&quot; tls: - hosts: - &lt;ë„ë©”ì¸&gt; secretName: tls-secret rules: - host: &lt;ë„ë©”ì¸&gt; http: paths: - path: / pathType: Prefix backend: service: name: backend-svc port: number: 80","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"[ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸°","slug":"devops/keycloak/k8s-infra-keyclock","date":"2025-02-21T00:31:46.000Z","updated":"2025-03-16T16:13:10.124Z","comments":true,"path":"2025/02/21/devops/keycloak/k8s-infra-keyclock/","link":"","permalink":"https://ckck803.github.io/2025/02/21/devops/keycloak/k8s-infra-keyclock/","excerpt":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° ğŸ” SSO ë¥¼ ìœ„í•œ Keycloakë³´í†µ DevOps ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê²Œ ë˜ë©´ ê° ì‹œìŠ¤í…œ ë§ˆë‹¤ ì ‘ê·¼ì„ ìœ„í•œ ê³„ì • ê´€ë¦¬ë¥¼ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì¦‰, N ê°œì˜ ê´€ë¦¬ ì‹œìŠ¤í…œì„ ì„¤ì¹˜í•˜ê²Œ ë˜ë©´ N ê°œì˜ ê³„ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ê³„ì •ì´ ë„ˆë¬´ ë§ì•„ì§€ë©´ ì‚¬ìš©í•˜ëŠ” ì…ì¥ì—ì„œë„ ê´€ë¦¬í•˜ëŠ” ì…ì¥ì—ì„œë„ ë„ˆë¬´ ë³µì¡í•´ì ¸ì„œ ë³´í†µ, í•œ ì„œë¹„ìŠ¤ ê°€ì…ì„ í†µí•´ ëª¨ë“  ì‹œìŠ¤í…œì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” SSO ë¥¼ ë§ì´ë“¤ êµ¬ì¶•í•©ë‹ˆë‹¤. ì €ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•˜ëŠ” OpenSource ì¸ KeyCloak ì„ ì´ìš©í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ ìœ„ì— ì˜¬ë¼ê°€ëŠ” ì„œë¹„ìŠ¤ì— ëŒ€í•œ SSO ë¥¼ êµ¬ì¶•í•˜ë ¤ê³  í•©ë‹ˆë‹¤. âœ… Helm ì„ ì´ìš©í•œ KeyCloak ì„¤ì¹˜ ì°¸ê³  https://artifacthub.io/packages/helm/bitnami/keycloak # Helm Repo ì¶”ê°€helm repo add keycloak https://charts.bitnami.com/bitnami# Helm Default Chart ë‚´ë ¤ë°›ê¸°helm show values keycloak/keycloak &gt;&gt; values-keycloak.yaml# Keycloak ì„¤ì¹˜ helm upgrade --install -f ./values-keycloak.yaml keycloak keycloak/keycloak -n auth --create-namespace","text":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° ğŸ” SSO ë¥¼ ìœ„í•œ Keycloakë³´í†µ DevOps ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê²Œ ë˜ë©´ ê° ì‹œìŠ¤í…œ ë§ˆë‹¤ ì ‘ê·¼ì„ ìœ„í•œ ê³„ì • ê´€ë¦¬ë¥¼ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì¦‰, N ê°œì˜ ê´€ë¦¬ ì‹œìŠ¤í…œì„ ì„¤ì¹˜í•˜ê²Œ ë˜ë©´ N ê°œì˜ ê³„ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ê³„ì •ì´ ë„ˆë¬´ ë§ì•„ì§€ë©´ ì‚¬ìš©í•˜ëŠ” ì…ì¥ì—ì„œë„ ê´€ë¦¬í•˜ëŠ” ì…ì¥ì—ì„œë„ ë„ˆë¬´ ë³µì¡í•´ì ¸ì„œ ë³´í†µ, í•œ ì„œë¹„ìŠ¤ ê°€ì…ì„ í†µí•´ ëª¨ë“  ì‹œìŠ¤í…œì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” SSO ë¥¼ ë§ì´ë“¤ êµ¬ì¶•í•©ë‹ˆë‹¤. ì €ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•˜ëŠ” OpenSource ì¸ KeyCloak ì„ ì´ìš©í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ ìœ„ì— ì˜¬ë¼ê°€ëŠ” ì„œë¹„ìŠ¤ì— ëŒ€í•œ SSO ë¥¼ êµ¬ì¶•í•˜ë ¤ê³  í•©ë‹ˆë‹¤. âœ… Helm ì„ ì´ìš©í•œ KeyCloak ì„¤ì¹˜ ì°¸ê³  https://artifacthub.io/packages/helm/bitnami/keycloak # Helm Repo ì¶”ê°€helm repo add keycloak https://charts.bitnami.com/bitnami# Helm Default Chart ë‚´ë ¤ë°›ê¸°helm show values keycloak/keycloak &gt;&gt; values-keycloak.yaml# Keycloak ì„¤ì¹˜ helm upgrade --install -f ./values-keycloak.yaml keycloak keycloak/keycloak -n auth --create-namespace Release &quot;keycloak&quot; does not exist. Installing it now.NAME: keycloakLAST DEPLOYED: Sun Dec 24 10:00:06 2023NAMESPACE: authSTATUS: deployedREVISION: 1TEST SUITE: NoneNOTES:CHART NAME: keycloakCHART VERSION: 17.3.6APP VERSION: 22.0.5** Please be patient while the chart is being deployed **Keycloak can be accessed through the following DNS name from within your cluster: keycloak.auth.svc.cluster.local (port 80)To access Keycloak from outside the cluster execute the following commands:1. Get the Keycloak URL by running these commands: export HTTP_SERVICE_PORT=$(kubectl get --namespace auth -o jsonpath=&quot;&#123;.spec.ports[?(@.name==&#x27;http&#x27;)].port&#125;&quot; services keycloak) kubectl port-forward --namespace auth svc/keycloak $&#123;HTTP_SERVICE_PORT&#125;:$&#123;HTTP_SERVICE_PORT&#125; &amp; echo &quot;http://127.0.0.1:$&#123;HTTP_SERVICE_PORT&#125;/&quot;2. Access Keycloak using the obtained URL. âœ… KeyCloak Ingress ì„¤ì •ingress: enabled: true ingressClassName: &quot;nginx&quot; pathType: ImplementationSpecific apiVersion: &quot;&quot; hostname: auth.crunchychoco.com","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"KeyCloak","slug":"DevOps/KeyCloak","permalink":"https://ckck803.github.io/categories/DevOps/KeyCloak/"}],"tags":[]},{"title":"[ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜","slug":"k8s/local-path-provisioner","date":"2025-02-20T12:31:46.000Z","updated":"2025-03-16T16:11:21.585Z","comments":true,"path":"2025/02/20/k8s/local-path-provisioner/","link":"","permalink":"https://ckck803.github.io/2025/02/20/k8s/local-path-provisioner/","excerpt":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://github.com/rancher/local-path-provisioner ğŸ” ë¡œì»¬ ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ë¡œì»¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë™ì  PV í”„ë¡œë¹„ì €ë‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ì‚¬ìš©ìê°€ ì§ì ‘ PV ë¥¼ ìƒì„±í•œ í›„ PVC ì— ìˆ˜ë™ìœ¼ë¡œ PV ë¥¼ ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤. EKS ì—ì„œëŠ” CSI ë“œë¼ì´ë²„ë¥¼ í†µí•´ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ì œê³µí•˜ëŠ”ë°, ë¡œì»¬ í™˜ê²½ì—ì„œ ë™ì¼í•œ ê¸°ëŠ¥ì„ ì œê³µí•´ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì°¾ë‹¤ê°€ local-path-provisioner ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. 1. local-path-provisioner ì„¤ì¹˜ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ local-path-provisionerë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://github.com/rancher/local-path-provisioner ğŸ” ë¡œì»¬ ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ë¡œì»¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë™ì  PV í”„ë¡œë¹„ì €ë‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ì‚¬ìš©ìê°€ ì§ì ‘ PV ë¥¼ ìƒì„±í•œ í›„ PVC ì— ìˆ˜ë™ìœ¼ë¡œ PV ë¥¼ ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤. EKS ì—ì„œëŠ” CSI ë“œë¼ì´ë²„ë¥¼ í†µí•´ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ì œê³µí•˜ëŠ”ë°, ë¡œì»¬ í™˜ê²½ì—ì„œ ë™ì¼í•œ ê¸°ëŠ¥ì„ ì œê³µí•´ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì°¾ë‹¤ê°€ local-path-provisioner ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. 1. local-path-provisioner ì„¤ì¹˜ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ local-path-provisionerë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. kubectl apply -f https://raw.githubusercontent.com/rancher/local-path-provisioner/master/deploy/local-path-storage.yaml 2. ê¸°ë³¸ StorageClass ì„¤ì •ì„¤ì¹˜ í›„, local-path StorageClassë¥¼ ê¸°ë³¸(default) StorageClassë¡œ ì„¤ì •í•©ë‹ˆë‹¤. ê¸°ë³¸ StorageClassëŠ” PVCì— storageClassNameì„ ì§€ì •í•˜ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. kubectl patch storageclass local-path -p &#x27;&#123;&quot;metadata&quot;: &#123;&quot;annotations&quot;:&#123;&quot;storageclass.kubernetes.io/is-default-class&quot;:&quot;true&quot;&#125;&#125;&#125;&#x27; 3. ì„¤ì¹˜ í™•ì¸ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ StorageClassê°€ ì œëŒ€ë¡œ ìƒì„±ë˜ê³  ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. kubectl get storageclass NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGElocal-path (default) rancher.io/local-path Delete WaitForFirstConsumer false 15d","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"[ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸°","slug":"k8s/kubeadm-install","date":"2025-02-19T21:31:46.000Z","updated":"2025-03-16T17:04:58.449Z","comments":true,"path":"2025/02/20/k8s/kubeadm-install/","link":"","permalink":"https://ckck803.github.io/2025/02/20/k8s/kubeadm-install/","excerpt":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/ https://cocococo.tistory.com/entry/k8s-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%82%AC%EC%9A%A9%EC%9D%84-%EC%9C%84%ED%95%9C-kubeadm-kubelet-%EB%B0%8F-kubectl-%EC%84%A4%EC%B9%98-%EB%B0%A9%EB%B2%95 https://jongsky.tistory.com/112 https://www.youtube.com/watch?v=Wr6nrBRqYYE ğŸ“ íšŒê³ Vitality íŒ€ì— ìˆì„ë•Œ EKS ë¡œ êµ¬ì¶•ëœ ì‹œìŠ¤í…œì„ ìš´ì˜í–ˆì—ˆìŠµë‹ˆë‹¤. ì§€ê¸ˆì€ í•´ë‹¹ íŒ€ì´ í•´ì²´ ë˜ë©´ì„œ ìš´ì˜í•˜ê³  ìˆì§€ëŠ” ì•Šì§€ë§Œ ê·¸ë•Œ ë‚´ë¶€ì ìœ¼ë¡œ ì§„í–‰í–ˆë˜ í”„ë¡œì íŠ¸ë“¤ì˜ ê¸°ì–µì„ ë˜ì‚´ë¦¬ê³ ì í¬ìŠ¤íŠ¸ë¡œ ë‚¨ê¸°ë ¤ê³  í•©ë‹ˆë‹¤. ğŸ¤” ì¿ ë²„ë„¤í‹°ìŠ¤ ìš´ì˜í™˜ê²½ ì„ íƒì§€ì†ì ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì„ ìš´ì˜ë„ í•˜ë©´ì„œ ê³µë¶€ë„ í•˜ê³  ì‹¶ì–´ ì—¬ëŸ¬ê°€ì§€ í™˜ê²½ì„ ê²€í† í•´ë´¤ëŠ”ë°, EKS ëŠ” ì¼ë‹¨ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ìì²´ë§Œìœ¼ë¡œë„ í•œë‹¬ì— 7ë§Œì› ì •ë„ê°€ ë‚˜ì™€ Pass (ë„ˆë¬´ ë¹„ì‹¸ ğŸ˜­), ë¡œì»¬ PC ì— Minikube ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì€ ë…¸íŠ¸ë¶ì„ ë„ˆë¬´ í•«í•˜ê²Œ ë§Œë“œëŠ” ë°©ë²•ì´ë¼ Pass ìš”ì¦˜ ì•Œë¦¬ì—ì„œ ë¯¸ë‹ˆ PC ê°€ ì‹¸ê²Œ í’€ë¦¬ê³  ìˆê³  ì‹œìŠ¤í…œ ì´ˆê¸° êµ¬ì… ë¹„ìš© ë¹¼ë©´ ìš´ìš©í•˜ëŠ”ë°ëŠ” ë§¤ì›” ì „ê¸°ì„¸ë§Œ ë‚´ë©´ ë¼ í¬ê²Œ ë¶€ë‹´ì´ ì•ˆë  ê²ƒ ê°™ì•„ ë¯¸ë‹ˆ PC ë¥¼ ì´ìš©í•œ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - OpenSearch ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Prometheus ì™€ Grafana ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Keycloak ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Ingress Nginx Controller ì„¤ì¹˜í•˜ê¸° [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì¿ ë²„ë„¤í‹°ìŠ¤ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ StorageClass ì„¤ì¹˜ [ì¿ ë²„ë„¤í‹°ìŠ¤ DevOps êµ¬ì¶•] - Local PC ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/ https://cocococo.tistory.com/entry/k8s-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%82%AC%EC%9A%A9%EC%9D%84-%EC%9C%84%ED%95%9C-kubeadm-kubelet-%EB%B0%8F-kubectl-%EC%84%A4%EC%B9%98-%EB%B0%A9%EB%B2%95 https://jongsky.tistory.com/112 https://www.youtube.com/watch?v=Wr6nrBRqYYE ğŸ“ íšŒê³ Vitality íŒ€ì— ìˆì„ë•Œ EKS ë¡œ êµ¬ì¶•ëœ ì‹œìŠ¤í…œì„ ìš´ì˜í–ˆì—ˆìŠµë‹ˆë‹¤. ì§€ê¸ˆì€ í•´ë‹¹ íŒ€ì´ í•´ì²´ ë˜ë©´ì„œ ìš´ì˜í•˜ê³  ìˆì§€ëŠ” ì•Šì§€ë§Œ ê·¸ë•Œ ë‚´ë¶€ì ìœ¼ë¡œ ì§„í–‰í–ˆë˜ í”„ë¡œì íŠ¸ë“¤ì˜ ê¸°ì–µì„ ë˜ì‚´ë¦¬ê³ ì í¬ìŠ¤íŠ¸ë¡œ ë‚¨ê¸°ë ¤ê³  í•©ë‹ˆë‹¤. ğŸ¤” ì¿ ë²„ë„¤í‹°ìŠ¤ ìš´ì˜í™˜ê²½ ì„ íƒì§€ì†ì ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì„ ìš´ì˜ë„ í•˜ë©´ì„œ ê³µë¶€ë„ í•˜ê³  ì‹¶ì–´ ì—¬ëŸ¬ê°€ì§€ í™˜ê²½ì„ ê²€í† í•´ë´¤ëŠ”ë°, EKS ëŠ” ì¼ë‹¨ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ìì²´ë§Œìœ¼ë¡œë„ í•œë‹¬ì— 7ë§Œì› ì •ë„ê°€ ë‚˜ì™€ Pass (ë„ˆë¬´ ë¹„ì‹¸ ğŸ˜­), ë¡œì»¬ PC ì— Minikube ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì€ ë…¸íŠ¸ë¶ì„ ë„ˆë¬´ í•«í•˜ê²Œ ë§Œë“œëŠ” ë°©ë²•ì´ë¼ Pass ìš”ì¦˜ ì•Œë¦¬ì—ì„œ ë¯¸ë‹ˆ PC ê°€ ì‹¸ê²Œ í’€ë¦¬ê³  ìˆê³  ì‹œìŠ¤í…œ ì´ˆê¸° êµ¬ì… ë¹„ìš© ë¹¼ë©´ ìš´ìš©í•˜ëŠ”ë°ëŠ” ë§¤ì›” ì „ê¸°ì„¸ë§Œ ë‚´ë©´ ë¼ í¬ê²Œ ë¶€ë‹´ì´ ì•ˆë  ê²ƒ ê°™ì•„ ë¯¸ë‹ˆ PC ë¥¼ ì´ìš©í•œ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. âœ… 1. ì¿ ë²„í…Œë‹ˆìŠ¤ ì„¤ì¹˜ì „ ì‚¬ì „ ì„¸íŒ…1.1 swap ë¹„í™œì„±í™”ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ê¸° ì „ì— ë¦¬ëˆ…ìŠ¤ ë©”ëª¨ë¦¬ swap ì„ ë¹„í™œì„±í™” í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. sudo swapoff -a# ë¶€íŒ… ì‹œì—ë„ swapì´ í™œì„±í™”ë˜ì§€ ì•Šë„ë¡ /etc/fstab íŒŒì¼ì—ì„œ swap ê´€ë ¨ í•­ëª© ì£¼ì„ ì²˜ë¦¬sudo sed -i &#x27;/swap/d&#x27; /etc/fstab 1.2 iptables ì„¤ì •# ë„¤íŠ¸ì›Œí¬ ëª¨ë“ˆ ë¡œë“œcat &lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.confoverlaybr_netfilterEOFsudo modprobe overlaysudo modprobe br_netfilter # sysctl íŒŒë¼ë¯¸í„° ì„¤ì •cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.confnet.bridge.bridge-nf-call-iptables = 1net.bridge.bridge-nf-call-ip6tables = 1net.ipv4.ip_forward = 1EOFsudo sysctl --system 1.3 Docker ì„¤ì¹˜sudo apt-get updatesudo apt-get install ca-certificates curlsudo install -m 0755 -d /etc/apt/keyrings sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.ascsudo chmod a+r /etc/apt/keyrings/docker.ascecho \\ &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\ $(. /etc/os-release &amp;&amp; echo &quot;$&#123;UBUNTU_CODENAME:-$VERSION_CODENAME&#125;&quot;) stable&quot; | \\ sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin 1.4 containerd ì„¤ì •ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” containerd ë¥¼ ì„¤ì •ì„ ë³€ê²½í•©ë‹ˆë‹¤. sudo mkdir -p /etc/containerd sudo containerd config default | sudo tee /etc/containerd/config.toml # config.toml íŒŒì¼ì—ì„œ SystemdCgroup ê°’ì„ ë³€ê²½í•©ë‹ˆë‹¤.sudo sed -i &#x27;s/SystemdCgroup = false/SystemdCgroup = true/&#x27; /etc/containerd/config.toml sudo systemctl restart containerd âœ… 2. ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜ì— í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜ì— í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ apt ì €ì¥ì†Œì— GPG í‚¤ì™€ Kubernetes ì €ì¥ì†Œë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤. # GPG í‚¤ ë‹¤ìš´ë¡œë“œ ë° ì €ì¥curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.29/deb/Release.key | sudo tee /etc/apt/keyrings/kubernetes-apt-keyring.asc &gt; /dev/null# apt ì €ì¥ì†Œì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì €ì¥ì†Œ ì¶”ê°€echo &quot;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.asc] https://pkgs.k8s.io/core:/stable:/v1.29/deb/ /&quot; | sudo tee /etc/apt/sources.list.d/kubernetes.list &gt; /dev/null# ìœ„ ë‚´ìš©ì´ ë°˜ì˜ë  ìˆ˜ ìˆë„ë¡ apt ì €ì¥ì†Œë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.sudo apt update ì¿ ë²„ë„¤í‹°ìŠ¤ ì €ì¥ì†Œê°€ ì¶”ê°€ ëìœ¼ë©´ apt ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ kubelet, kubeadm, kubectl ì„ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤. # ì„¤ì¹˜ ê°€ëŠ¥í•œ ë²„ì „ í™•ì¸sudo apt-cache madison kubeadm# ë²„ì „ì„ ëª…ì‹œí•´ì„œ ì„¤ì¹˜ê°€ëŠ¥sudo apt-get install -y kubelet=1.27.16-1.1 kubeadm=1.27.16-1.1 kubectl=1.27.16-1.1sudo apt-mark hold kubelet kubeadm kubectl âœ… 3. Kubernetes í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™”kubelet, kubeadm, kubectl ê°€ ì™„ë£Œë˜ë©´ kubeadm init ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œë¥¼ ì´ˆê¸°í™” ì‹œì¼œì¤ë‹ˆë‹¤. kubeadm init ì¶”ê°€ì ì¸ íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•˜ê³  ì‹¶ì„ ê²½ìš° ì¿ ë²„ë„¤í‹°ìŠ¤ ê³µì‹ ë¬¸ì„œ ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. sudo kubeadm init --pod-network-cidr=10.0.0.0/16 --v=5# ì™¸ë¶€ Listening í•  ìˆ˜ ìˆëŠ” IP ê°€ ìˆëŠ” ê²½ìš° sudo kubeadm init --control-plane-endpoint=&lt;ì ‘ì†_IP&gt; --pod-network-cidr=&lt;Pod_ë„¤íŠ¸ì›Œí¬_ë²”ìœ„&gt; Config íŒŒì¼ì„ ì´ìš©í•œ í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™”config íŒŒì¼ì„ ë³„ë„ë¡œ ìƒì„±í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤. apiVersion: kubeadm.k8s.io/v1beta3kind: ClusterConfigurationkubernetesVersion: &quot;v1.29.3&quot; #ì„¤ì¹˜í•  ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „controlPlaneEndpoint: &quot;&lt;ì ‘ì†_IP&gt;:&lt;ì ‘ì†_PORT&gt;&quot; #ì™¸ë¶€ IP ì£¼ì†Œì™€ í¬íŠ¸ ì§€ì •networking: podSubnet: &quot;10.244.0.0/16&quot; #Pod ë„¤íŠ¸ì›Œí¬ ë²”ìœ„ ì„¤ì • sudo kubeadm init --config kubeadm-config.yaml ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì •íŒŒì¼ ìƒì„±mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config âœ… 4. CNI (Container Network Interface) ì„¤ì¹˜í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì˜ Pod ë“¤ì´ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ CNI ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. mkdir cnicd cniwget https://raw.githubusercontent.com/projectcalico/calico/v3.28.1/manifests/tigera-operator.yamlwget https://raw.githubusercontent.com/projectcalico/calico/v3.28.1/manifests/custom-resources.yaml# cidr ëŒ€ì—­ì„ worker node ëŒ€ì—­ìœ¼ë¡œ ë³€ê²½vi custom-resources.yamlkubectl create -f tigera-operator.yamlkubectl create -f custom-resources.yaml ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜ ì ê²€ í™•ì¸dpkg -l | grep kube hi kubeadm 1.29.13-1.1 amd64 Command-line utility for administering a Kubernetes clusterhi kubectl 1.29.13-1.1 amd64 Command-line utility for interacting with a Kubernetes clusterhi kubelet 1.29.13-1.1 amd64 Node agent for Kubernetes clustersii kubernetes-cni 1.3.0-1.1 amd64 Binaries required to provision kubernetes container networking âœ… 5. Control Plain Taint ì‚­ì œì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì´ˆê¸°í™”í•˜ê²Œë˜ë©´ Control Plane ë…¸ë“œì— Pod ì„¤ì¹˜ë¥¼ ëª»í•˜ë„ë¡ (Schedule ì´ ë¶ˆê°€ëŠ¥) Taint ì„¤ì •ì´ ë“¤ì–´ê°€ ìˆìŠµë‹ˆë‹¤. Control Plane ì—ë„ Pod ì„¤ì¹˜ê°€ ê°€ëŠ¥í•˜ê²Œ (Schedule ì´ ê°€ëŠ¥í•˜ê²Œ) í•˜ë ¤ë©´ í•´ë‹¹ ë…¸ë“œì— ê±¸ë ¤ìˆëŠ” Taint ì„¤ì •ì„ í•´ì§€í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. Events: Type Reason Age From Message ---- ------ ---- ---- ------- Warning FailedScheduling 3m default-scheduler 0/1 nodes are available: 1 node(s) had untolerated taint &#123;node-role.kubernetes.io/control-plane: &#125;. preemption: 0/1 nodes are available: 1 Preemption is not helpful for scheduling. kubectl taint nodes --all node-role.kubernetes.io/master-kubectl taint nodes --all node-role.kubernetes.io/control-plane- âš ï¸ í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™”ì‹œ ì˜¤ë¥˜ ë°œìƒsudo kubeadm init --pod-network-cidr=192.168.0.0/16I0202 21:12:59.135308 6955 version.go:256] remote version is much newer: v1.32.1; falling back to: stable-1.29[init] Using Kubernetes version: v1.29.13[preflight] Running pre-flight checks [WARNING Swap]: swap is supported for cgroup v2 only; the NodeSwap feature gate of the kubelet is beta but disabled by defaulterror execution phase preflight: [preflight] Some fatal errors occurred: [ERROR CRI]: container runtime is not running: output: time=&quot;2025-02-02T21:12:59+09:00&quot; level=fatal msg=&quot;validate service connection: validate CRI v1 runtime API for endpoint \\&quot;unix:///var/run/containerd/containerd.sock\\&quot;: rpc error: code = Unimplemented desc = unknown service runtime.v1.RuntimeService&quot;, error: exit status 1 [ERROR FileContent--proc-sys-net-bridge-bridge-nf-call-iptables]: /proc/sys/net/bridge/bridge-nf-call-iptables does not exist[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`To see the stack trace of this error execute with --v=5 or higher [ERROR CRI]: container runtime is not runningì•„ë˜ íŒŒì¼ì—ì„œ SystemdCgroup = false í•´ë‹¹ ë¶€ë¶„ì„ ì£¼ì„ ì²˜ë¦¬ í•©ë‹ˆë‹¤. sudo vi /etc/containerd/config.toml íŒŒì¼ì„ ìˆ˜ì •í•œ í›„ containerd ë¥¼ ì¬ì‹¤í–‰í•´ì¤ë‹ˆë‹¤. systemctl restart containerd [ERROR FileContentâ€“proc-sys-net-bridge-bridge-nf-call-iptables]sudo modprobe br_netfilterecho &quot;br_netfilter&quot; | sudo tee -a /etc/modules-load.d/k8s.conf cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.confnet.bridge.bridge-nf-call-iptables = 1net.bridge.bridge-nf-call-ip6tables = 1EOF sudo sysctl --system mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config âš ï¸ The HTTP call equal to â€˜curl -sSL http://localhost:10248/healthzâ€˜ failed with error: Get â€œhttp://localhost:10248/healthzâ€œ: dial tcp 127.0.0.1:10248: connect: connection refused.container ì˜ cgroups ì— systemd ë¥¼ ì‚¬ìš©í•˜ë„ë¡ Docker ë°ëª¬ì„ êµ¬ì„±í•œë‹¤. sudo mkdir /etc/docker t &lt;&lt;EOF | sudo tee /etc/docker/daemon.json&#123; &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;], &quot;log-driver&quot;: &quot;json-file&quot;, &quot;log-opts&quot;: &#123; &quot;max-size&quot;: &quot;100m&quot; &#125;, &quot;storage-driver&quot;: &quot;overlay2&quot;&#125;EOF Docker Daemon ì„¤ì •ì„ ì ìš©í•˜ê¸° ìœ„í•´ ì„œë¹„ìŠ¤ë¥¼ ì¬ì‹œì‘ í•©ë‹ˆë‹¤. sudo systemctl enable docker sudo systemctl daemon-reload sudo systemctl restart docker âš ï¸ [kubelet-check] It seems like the kubelet isnâ€™t running or healthy.kubelet ìƒíƒœê°€ í˜„ì¬ ì •ìƒì ì´ì§€ ì•Šë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê³  ìˆì–´, ì•„ë˜ ëª…ë ¹ì–´ë“¤ì„ ì´ìš©í•´ kubelet ìƒíƒœë¥¼ í™•ì¸í•´ë´…ë‹ˆë‹¤. ## ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸sudo systemctl status kubelet## ë¡œê·¸ í™•ì¸sudo journalctl -xeu kubelet | tail -n 50 ğŸ” failed to run Kubelet: running with swap on is not supportedë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ í˜„ì¬ ë©”ëª¨ë¦¬ ìŠ¤ì™‘ìœ¼ë¡œ ì¸í•´ kubelet ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. KubernetesëŠ” swap ì„ ì‚¬ìš©í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë°˜ë“œì‹œ ë¹„í™œì„±í™” í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. Feb 02 23:16:56 ddanzit-ubuntu-desktop kubelet[20910]: E0202 23:16:56.465663 20910 run.go:74] &quot;command failed&quot; err=&quot;failed to run Kubelet: running with swap on is not supported, please disable swap! or set --fail-swap-on flag to false. /proc/swaps contained: [Filename\\t\\t\\t\\tType\\t\\tSize\\t\\tUsed\\t\\tPriority /swap.img file\\t\\t8388604\\t\\t0\\t\\t-2]&quot;Feb 02 23:16:56 ddanzit-ubuntu-desktop systemd[1]: kubelet.service: Main process exited, code=exited, status=1/FAILUREâ–‘â–‘ Subject: Unit process exitedâ–‘â–‘ Defined-By: systemdâ–‘â–‘ Support: http://www.ubuntu.com/supportâ–‘â–‘â–‘â–‘ An ExecStart= process belonging to unit kubelet.service has exited.â–‘â–‘â–‘â–‘ The process&#x27; exit code is &#x27;exited&#x27; and its exit status is 1.Feb 02 23:16:56 ddanzit-ubuntu-desktop systemd[1]: kubelet.service: Failed with result &#x27;exit-code&#x27;.â–‘â–‘ Subject: Unit failedâ–‘â–‘ Defined-By: systemdâ–‘â–‘ Support: http://www.ubuntu.com/supportâ–‘â–‘â–‘â–‘ The unit kubelet.service has entered the &#x27;failed&#x27; state with result &#x27;exit-code&#x27;.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"Spring - M1 ë§¥ë¶ì—ì„œ Embeded Redis ì‚¬ìš©í•˜ê¸°","slug":"spring/spring-redis/springboot-redis-m1","date":"2024-11-29T14:47:05.000Z","updated":"2025-01-01T03:24:47.830Z","comments":true,"path":"2024/11/29/spring/spring-redis/springboot-redis-m1/","link":"","permalink":"https://ckck803.github.io/2024/11/29/spring/spring-redis/springboot-redis-m1/","excerpt":"ëª©ì°¨ Spring - M1 ë§¥ë¶ì—ì„œ Embeded Redis ì‚¬ìš©í•˜ê¸° Spring - Embeded Redis ì‚¬ìš©í•˜ê¸° ì°¸ê³  https://github.com/ozimov/embedded-redis https://github.com/redis/redis-hashes M1 Mac ì—ì„œ Embedded Redis ì‚¬ìš©ì‹œ ì—ëŸ¬M1 ë§¥ë¶ì—ì„œ Embedded Redis ë¥¼ ê·¸ëƒ¥ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ redis server ë¥¼ ì‹œì‘í•  ìˆ˜ ì—†ë‹¤ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. Caused by: java.lang.RuntimeException: Can&#x27;t start redis server. Check logs for details. Redis process log: at redis.embedded.AbstractRedisInstance.awaitRedisServerReady(AbstractRedisInstance.java:70) ~[embedded-redis-0.7.3.jar:na] at redis.embedded.AbstractRedisInstance.start(AbstractRedisInstance.java:42) ~[embedded-redis-0.7.3.jar:na] Embedded Redis ë¼ì´ë¸ŒëŸ¬ë¦¬ í™•ì¸Embedded Redis ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•´ì£¼ëŠ” Redis ì•„í‚¤íƒì²˜ ì •ë³´ë“¤ì„ í™•ì¸í•˜ë©´ M1 ë§¥ë¶ì— í•´ë‹¹í•˜ëŠ” aarch64 ìš© Redis ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, M1 ì—ì„œ Embedded Redis ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” M1 ìš© ì•„í‚¤íƒì²˜ì— ë§ê²Œ Redis ë¥¼ ìƒˆë¡­ê²Œ ë¹Œë“œí•´ì„œ Embedded Redis ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë„ìš¸ ìˆ˜ ìˆê²Œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ Spring - M1 ë§¥ë¶ì—ì„œ Embeded Redis ì‚¬ìš©í•˜ê¸° Spring - Embeded Redis ì‚¬ìš©í•˜ê¸° ì°¸ê³  https://github.com/ozimov/embedded-redis https://github.com/redis/redis-hashes M1 Mac ì—ì„œ Embedded Redis ì‚¬ìš©ì‹œ ì—ëŸ¬M1 ë§¥ë¶ì—ì„œ Embedded Redis ë¥¼ ê·¸ëƒ¥ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ redis server ë¥¼ ì‹œì‘í•  ìˆ˜ ì—†ë‹¤ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. Caused by: java.lang.RuntimeException: Can&#x27;t start redis server. Check logs for details. Redis process log: at redis.embedded.AbstractRedisInstance.awaitRedisServerReady(AbstractRedisInstance.java:70) ~[embedded-redis-0.7.3.jar:na] at redis.embedded.AbstractRedisInstance.start(AbstractRedisInstance.java:42) ~[embedded-redis-0.7.3.jar:na] Embedded Redis ë¼ì´ë¸ŒëŸ¬ë¦¬ í™•ì¸Embedded Redis ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•´ì£¼ëŠ” Redis ì•„í‚¤íƒì²˜ ì •ë³´ë“¤ì„ í™•ì¸í•˜ë©´ M1 ë§¥ë¶ì— í•´ë‹¹í•˜ëŠ” aarch64 ìš© Redis ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, M1 ì—ì„œ Embedded Redis ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” M1 ìš© ì•„í‚¤íƒì²˜ì— ë§ê²Œ Redis ë¥¼ ìƒˆë¡­ê²Œ ë¹Œë“œí•´ì„œ Embedded Redis ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë„ìš¸ ìˆ˜ ìˆê²Œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤. // 1) given explicit file (os-independence broken!)RedisServer redisServer = new RedisServer(&quot;/path/to/your/redis&quot;, 6379);// 2) given os-independent matrixRedisExecProvider customProvider = RedisExecProvider.defaultProvider() .override(OS.UNIX, &quot;/path/to/unix/redis&quot;) .override(OS.WINDOWS, Architecture.x86, &quot;/path/to/windows/redis&quot;) .override(OS.Windows, Architecture.x86_64, &quot;/path/to/windows/redis&quot;) .override(OS.MAC_OS_X, Architecture.x86, &quot;/path/to/macosx/redis&quot;) .override(OS.MAC_OS_X, Architecture.x86_64, &quot;/path/to/macosx/redis&quot;) RedisServer redisServer = new RedisServer(customProvider, 6379); M1 ìš© Redis Server ìƒì„±Redis ê³µì‹ ë¬¸ì„œì—ì„œëŠ” Redis ì†ŒìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ìµœì‹  ë²„ì „ì— í•´ë‹¹í•˜ëŠ” Redis ë¥¼ ë‚´ë ¤ë°›ì•„ M1 ë§¥ë¶ì— ë§ê²Œ ì†ŒìŠ¤ë¥¼ ë¹Œë“œí•´ì¤ë‹ˆë‹¤. // Redis ì†ŒìŠ¤ë¥¼ ë‚´ë ¤ë°›ê³  ë¹Œë“œë¥¼ í´ë” ì •ì˜mkdir -p src/main/resources/binary/redis// ë‹¤ìš´ë¡œë“œ í´ë”ë¡œ ì´ë™cd src/main/resources/binary/redis// ì†ŒìŠ¤ ì½”ë“œ ë‹¤ìš´ë¡œë“œwget https://download.redis.io/releases/redis-7.0.15.tar.gz// ì••ì¶• í•´ì œtar xzf redis-7.0.15.tar.gz // redis-7.0.15 ë””ë ‰í† ë¦¬ ì´ë™cd redis-7.0.15// Redis ë¹Œë“œë¥¼ ì§„í–‰make make ëª…ë ¹ì–´ë¥¼ í†µí•´ ë¹Œë“œë¥¼ ì§„í–‰í•˜ë©´ src í´ë”ì— redis-server ê°€ ìƒì„±ë©ë‹ˆë‹¤. ìƒì„±ëœ redis-server ë¥¼ ì‚¬ìš©í•˜ê¸° ì‰½ê²Œ resource/binary/redis í´ë”ë¡œ ì˜®ê²¨ì¤ë‹ˆë‹¤. í˜„ì¬ ìš´ì˜ì²´ì œì™€ ì•„í‚¤í…ì²˜ í™•ì¸M1 Mac ì¼ë•Œë§Œ M1 Mac ì— ë§ê²Œ ë¹Œë“œëœ Redis ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í˜„ì¬ OS ì™€ Arch ì •ë³´ë“¤ì„ jshell ì„ ì´ìš©í•´ í™•ì¸í•©ë‹ˆë‹¤. â¯ jshell| Welcome to JShell -- Version 17.0.9| For an introduction type: /help introjshell&gt; System.getProperty(&quot;os.name&quot;)$1 ==&gt; &quot;Mac OS X&quot;jshell&gt; System.getProperty(&quot;os.arch&quot;)$2 ==&gt; &quot;aarch64&quot; Embeded Redis ì‚¬ìš©í•˜ê¸°ìœ„í•œ ì„¤ì •binary/redis ê²½ë¡œì— M1 ì•„í‚¤í…ì²˜ë¡œ ìƒˆë¡­ê²Œ ë¹Œë“œëœ redis-server ë¥¼ RedisServer ì— ë„˜ê²¨ì£¼ë©´ ì–´í”Œë ˆì¼€ì´ì…˜ì´ ë¬¸ì œ ì—†ì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. EmbeddedRedisConfig.java@Configuration@Profile(&quot;local&quot;)@Slf4jpublic class EmbeddedRedisConfig &#123; private int port = 6379; private RedisServer redisServer; @PostConstruct public void redisServer() throws Exception &#123; log.info(&quot;System OS: &#123;&#125;&quot;, System.getProperty(&quot;os.name&quot;)); log.info(&quot;System Architecture: &#123;&#125;&quot;, System.getProperty(&quot;os.arch&quot;)); if (isMacM1()) &#123; log.info(&quot;Mac OS ARM Architecture&quot;); redisServer = new RedisServer(getRedisFileForArcMac(), port); &#125;else &#123; redisServer = new RedisServer(port); &#125; redisServer.start(); &#125; @PreDestroy public void stopRedis() &#123; if (redisServer != null) &#123; redisServer.stop(); &#125; &#125; private boolean isMacM1() &#123; if (!System.getProperty(&quot;os.name&quot;).equals(&quot;Mac OS X&quot;)) &#123; return false; &#125; return System.getProperty(&quot;os.arch&quot;).equals(&quot;aarch64&quot;); &#125; private File getRedisFileForArcMac() throws Exception &#123; try &#123; return new ClassPathResource(&quot;binary/redis/redis-server&quot;).getFile(); &#125; catch (Exception e) &#123; throw new Exception(e.getMessage()); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Redis","slug":"Spring/Spring-Boot/Redis","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Redis/"}],"tags":[]},{"title":"ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡°","slug":"computer-science/os/thread/thread-memory","date":"2024-03-02T21:16:13.000Z","updated":"2024-11-28T14:00:04.502Z","comments":true,"path":"2024/03/03/computer-science/os/thread/thread-memory/","link":"","permalink":"https://ckck803.github.io/2024/03/03/computer-science/os/thread/thread-memory/","excerpt":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) ì°¸ê³  https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4 ì“°ë ˆë“œ ë©”ëª¨ë¦¬ êµ¬ì¡°í”„ë¡œì„¸ìŠ¤ ì•ˆì—ì„œ ìƒì„±ë˜ëŠ” ì“°ë ˆë“œëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ì˜ì—­ì„ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ë‚´ ë©”ëª¨ë¦¬ ì˜ì—­ ì¤‘ Code, Data, Heap ì˜ì—­ì€ ëª¨ë“  ì“°ë ˆë“œê°€ ê³µìœ í•´ì„œ ì‚¬ìš©í•˜ê³  ê° ì“°ë ˆë“œ ë³„ë¡œ Stack ì˜ì—­ì´ ìƒì„±ë©ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ êµ¬ì¡°","text":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) ì°¸ê³  https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4 ì“°ë ˆë“œ ë©”ëª¨ë¦¬ êµ¬ì¡°í”„ë¡œì„¸ìŠ¤ ì•ˆì—ì„œ ìƒì„±ë˜ëŠ” ì“°ë ˆë“œëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ì˜ì—­ì„ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ë‚´ ë©”ëª¨ë¦¬ ì˜ì—­ ì¤‘ Code, Data, Heap ì˜ì—­ì€ ëª¨ë“  ì“°ë ˆë“œê°€ ê³µìœ í•´ì„œ ì‚¬ìš©í•˜ê³  ê° ì“°ë ˆë“œ ë³„ë¡œ Stack ì˜ì—­ì´ ìƒì„±ë©ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ êµ¬ì¡°","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ìš´ì˜ì²´ì œ","slug":"CS/ìš´ì˜ì²´ì œ","permalink":"https://ckck803.github.io/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/"}],"tags":[]},{"title":"Vue3 - Component ê°„ í†µì‹ ","slug":"vue/vue3/vue3-component-communication","date":"2024-03-02T11:31:46.000Z","updated":"2025-01-01T11:24:05.691Z","comments":true,"path":"2024/03/02/vue/vue3/vue3-component-communication/","link":"","permalink":"https://ckck803.github.io/2024/03/02/vue/vue3/vue3-component-communication/","excerpt":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° Component ê°„ í†µì‹  - Props Props ëŠ” ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í• ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. Vue ì—ì„œëŠ” ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ í†µì‹ í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ Props ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Props ë¥¼ í†µí•´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ë°ì´í„°ë¥¼ ë‚´ë ¤ì¤ë‹ˆë‹¤. í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì „ë‹¬ ë°›ì€ Props ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´v-bind ë¥¼ ì´ìš©í•´ Props ì´ë¦„&#x3D;â€ìƒìœ„ì»´í¬ë„ŒíŠ¸ì˜ ë°ì´í„°ì´ë¦„â€œ í˜•ì‹ìœ¼ë¡œ Props ë¥¼ ë§¤íŒ½í•´ ì¤ë‹ˆë‹¤. &lt;div id=&quot;app&quot;&gt; &lt;app-header v-bind:title=&quot;appTitle&quot;&gt;&lt;/app-header&gt;&lt;/div&gt;&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;&lt;script&gt; Vue.createApp(&#123; data() &#123; return &#123; appTitle: &#x27;í”„ë¡­ìŠ¤ ë„˜ê¸°ê¸°&#x27; &#125; &#125;, components: &#123; // &#x27;ì»´í¬ë„ŒíŠ¸ ì´ë¦„&#x27;: ì»´í¬ë„ŒíŠ¸ ë‚´ìš© &#x27;app-header&#x27;: &#123; template: &#x27;&lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;/h1&gt;&#x27;, props: [&#x27;title&#x27;] &#125; &#125; &#125;).mount(&#x27;#app&#x27;)&lt;/script&gt; Component ê°„ í†µì‹  - Event Event ëŠ” í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ","text":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° Component ê°„ í†µì‹  - Props Props ëŠ” ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í• ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. Vue ì—ì„œëŠ” ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ í†µì‹ í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ Props ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Props ë¥¼ í†µí•´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ë°ì´í„°ë¥¼ ë‚´ë ¤ì¤ë‹ˆë‹¤. í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì „ë‹¬ ë°›ì€ Props ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´v-bind ë¥¼ ì´ìš©í•´ Props ì´ë¦„&#x3D;â€ìƒìœ„ì»´í¬ë„ŒíŠ¸ì˜ ë°ì´í„°ì´ë¦„â€œ í˜•ì‹ìœ¼ë¡œ Props ë¥¼ ë§¤íŒ½í•´ ì¤ë‹ˆë‹¤. &lt;div id=&quot;app&quot;&gt; &lt;app-header v-bind:title=&quot;appTitle&quot;&gt;&lt;/app-header&gt;&lt;/div&gt;&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;&lt;script&gt; Vue.createApp(&#123; data() &#123; return &#123; appTitle: &#x27;í”„ë¡­ìŠ¤ ë„˜ê¸°ê¸°&#x27; &#125; &#125;, components: &#123; // &#x27;ì»´í¬ë„ŒíŠ¸ ì´ë¦„&#x27;: ì»´í¬ë„ŒíŠ¸ ë‚´ìš© &#x27;app-header&#x27;: &#123; template: &#x27;&lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;/h1&gt;&#x27;, props: [&#x27;title&#x27;] &#125; &#125; &#125;).mount(&#x27;#app&#x27;)&lt;/script&gt; Component ê°„ í†µì‹  - Event Event ëŠ” í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œëŠ” Event ë¥¼ ì œê³µí•©ë‹ˆë‹¤. &lt;div id=&quot;app&quot;&gt; &lt;app-content v-on:refresh=&quot;showAlert&quot;&gt;&lt;/app-content&gt;&lt;/div&gt;&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var appContents = &#123; template: ` &lt;p&gt; &lt;button v-on:click=&quot;sendEvent&quot;&gt;ê°±ì‹ &lt;/button&gt; &lt;/p&gt; `, methods: &#123; sendEvent() &#123; this.$emit(&#x27;refresh&#x27;); &#125; &#125; &#125; // Root ì»´í¬ë„ŒíŠ¸ Vue.createApp(&#123; methods: &#123; showAlert() &#123; alert(&#x27;ìƒˆë¡œê³ ì¹¨&#x27;) &#125; &#125;, components: &#123; // &#x27;ì»´í¬ë„ŒíŠ¸ ì´ë¦„&#x27;: ì»´í¬ë„ŒíŠ¸ ë‚´ìš© &#x27;app-content&#x27;: appContents &#125; &#125;).mount(&#x27;#app&#x27;)&lt;/script&gt; ê°™ì€ ë ˆë²¨ì˜ ì»´í¬ë„ŒíŠ¸ê°„ ë°ì´í„° í†µì‹ &lt;div id=&quot;app&quot;&gt; &lt;app-header v-bind:app-title=&quot;message&quot;&gt;&lt;/app-header&gt; &lt;app-content v-on:login=&quot;receive&quot;&gt;&lt;/app-content&gt;&lt;/div&gt;&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var appHeader = &#123; props: [&#x27;appTitle&#x27;], template: `&lt;h1&gt;&#123;&#123;appTitle&#125;&#125;&lt;/h1&gt;`, &#125; var appContents = &#123; template: ` &lt;p&gt; &lt;button v-on:click=&quot;sendEvent&quot;&gt;ë¡œê·¸ì¸&lt;/button&gt; &lt;/p&gt; `, methods: &#123; sendEvent() &#123; this.$emit(&#x27;login&#x27;); &#125; &#125; &#125; // Root ì»´í¬ë„ŒíŠ¸ Vue.createApp(&#123; data() &#123; return &#123; message: &#x27;&#x27; &#125; &#125;, methods: &#123; receive() &#123; console.log(&quot;ë°›ì•˜ë‹¤.&quot;) this.message = &quot;ë¡œê·¸ì¸ ë¨&quot; &#125; &#125;, components: &#123; // &#x27;ì»´í¬ë„ŒíŠ¸ ì´ë¦„&#x27;: ì»´í¬ë„ŒíŠ¸ ë‚´ìš© &#x27;app-header&#x27;: appHeader, &#x27;app-content&#x27;: appContents &#125; &#125;).mount(&#x27;#app&#x27;)&lt;/script&gt;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue3","slug":"Frontend/Vue3","permalink":"https://ckck803.github.io/categories/Frontend/Vue3/"}],"tags":[]},{"title":"Vue3 - Component","slug":"vue/vue3/vue3-component","date":"2024-03-01T11:31:46.000Z","updated":"2024-11-23T16:53:15.445Z","comments":true,"path":"2024/03/01/vue/vue3/vue3-component/","link":"","permalink":"https://ckck803.github.io/2024/03/01/vue/vue3/vue3-component/","excerpt":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° ComponentComponent ë€ í•˜ë‚˜ì˜ í™”ë©´ì„ ì—¬ëŸ¬ê°œì˜ ë¸”ë¡ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ë‹¨ìœ„ì…ë‹ˆë‹¤. Component ë¥¼ í†µí•´ ë¹ ë¥´ê²Œ í™”ë©´ì„ êµ¬ì¡°í™”í•  ìˆ˜ ìˆê³  ì½”ë“œ ì¬ì‚¬ìš©ì„±ì´ ëŠ˜ì–´ë‚©ë‹ˆë‹¤. Vue ì—ì„œëŠ” Component ë¥¼ ì´ìš©í•œ ê°œë°œì„ ì§€ì›í•©ë‹ˆë‹¤. í•œ í˜ì´ì§€ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ìƒì„±components ë‚´ template ì„ ì´ìš©í•˜ë©´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°”ë¡œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ë‚´ìš©ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Vue.createApp(&#123; components: &#123; // &#x27;ì»´í¬ë„ŒíŠ¸ ì´ë¦„&#x27;: ì»´í¬ë„ŒíŠ¸ ë‚´ìš© &#x27;app-header&#x27;: &#123; template: &#x27;&lt;h1&gt;ì»´í¬ë„ŒíŠ¸ ì´ë¦„&lt;/h1&gt;&#x27; &#125; &#125;&#125;).mount(&#x27;#app&#x27;) ì •ì˜ëœ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ ì´ë¦„ì„ í†µí•´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;div id=&quot;app&quot;&gt; &lt;app-header&gt;&lt;/app-header&gt;&lt;/div&gt;","text":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° ComponentComponent ë€ í•˜ë‚˜ì˜ í™”ë©´ì„ ì—¬ëŸ¬ê°œì˜ ë¸”ë¡ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ë‹¨ìœ„ì…ë‹ˆë‹¤. Component ë¥¼ í†µí•´ ë¹ ë¥´ê²Œ í™”ë©´ì„ êµ¬ì¡°í™”í•  ìˆ˜ ìˆê³  ì½”ë“œ ì¬ì‚¬ìš©ì„±ì´ ëŠ˜ì–´ë‚©ë‹ˆë‹¤. Vue ì—ì„œëŠ” Component ë¥¼ ì´ìš©í•œ ê°œë°œì„ ì§€ì›í•©ë‹ˆë‹¤. í•œ í˜ì´ì§€ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ìƒì„±components ë‚´ template ì„ ì´ìš©í•˜ë©´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°”ë¡œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ë‚´ìš©ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Vue.createApp(&#123; components: &#123; // &#x27;ì»´í¬ë„ŒíŠ¸ ì´ë¦„&#x27;: ì»´í¬ë„ŒíŠ¸ ë‚´ìš© &#x27;app-header&#x27;: &#123; template: &#x27;&lt;h1&gt;ì»´í¬ë„ŒíŠ¸ ì´ë¦„&lt;/h1&gt;&#x27; &#125; &#125;&#125;).mount(&#x27;#app&#x27;) ì •ì˜ëœ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ ì´ë¦„ì„ í†µí•´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;div id=&quot;app&quot;&gt; &lt;app-header&gt;&lt;/app-header&gt;&lt;/div&gt; ë³„ë„ì˜ íŒŒì¼ë¡œ Component ìƒì„±vue íŒŒì¼ì„ ì´ìš©í•´ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;template&gt; &lt;h1&gt;&#123;&#123; appTitle &#125;&#125;&lt;/h1&gt; &lt;button @click=&quot;changeTitle&quot;&gt;ë³€ê²½&lt;/button&gt;&lt;/template&gt;&lt;script&gt; export default &#123; props: [&#x27;appTitle&#x27;], methods: &#123; changeTitle() &#123; this.$emit(&#x27;change&#x27;); &#125; &#125; &#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; ìƒìœ„ Component ì—ì„œ í•˜ìœ„ Component ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” import ë¥¼ ì´ìš©í•´ í•˜ìœ„ vue íŒŒì¼ì— ì •ì˜ëœ Component ë¥¼ ê°€ì ¸ì™€ components ì— ë“±ë¡í•´ì•¼í•©ë‹ˆë‹¤. // import ì»´í¬ë„ŒíŠ¸ì´ë¦„ from &#x27;./ì»´í¬ë„ŒíŠ¸ ê²½ë¡œ&#x27;import AppHeader from &quot;./components/AppHeader.vue&quot;;export default &#123; // í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ë“±ë¡ components: &#123; AppHeader, &#125;, data() &#123; return &#123; message: &quot;ì•± í—¤ë” ì»´í¬ë„ŒíŠ¸&quot;, &#125;; &#125;, methods: &#123; changeMessage() &#123; this.message = &quot;ë³€ê²½ë¨&quot;; &#125;, &#125;,&#125;; ìœ„ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë“±ë¡ëœ ì»´í¬ë„ŒíŠ¸ ì´ë¦„ì„ ì´ìš©í•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;template&gt; &lt;AppHeader v-bind:appTitle=&quot;message&quot; v-on:change=&quot;changeMessage&quot;&gt; &lt;/AppHeader&gt;&lt;/template&gt;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue3","slug":"Frontend/Vue3","permalink":"https://ckck803.github.io/categories/Frontend/Vue3/"}],"tags":[]},{"title":"Vue3 - Instance","slug":"vue/vue3/vue3-instance","date":"2024-03-01T03:31:46.000Z","updated":"2024-11-23T16:53:32.428Z","comments":true,"path":"2024/03/01/vue/vue3/vue3-instance/","link":"","permalink":"https://ckck803.github.io/2024/03/01/vue/vue3/vue3-instance/","excerpt":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° Vue 3 Instance ì™€ ì†ì„±Vue.createApp(&#123; template: , data: , methods: , created: , watch: ,&#125;); methods&lt;div id=&quot;app&quot;&gt; &lt;p&gt;&#123;&#123;count&#125;&#125;&lt;/p&gt; &lt;button v-on:click=&quot;addCount&quot;&gt;+&lt;/button&gt;&lt;/div&gt;&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;&lt;script&gt; Vue.createApp(&#123; data() &#123; return &#123; count: 0 &#125; &#125;, methods: &#123; addCount() &#123; this.count++; &#125; &#125; &#125;).mount(&#x27;#app&#x27;)&lt;/script&gt; Vue Directivev-for&lt;div id=&quot;app&quot;&gt; &lt;ul&gt; &lt;li v-for=&quot;item in items&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;&lt;script&gt; Vue.createApp(&#123; data() &#123; return &#123; items: [&#x27;ì‚¼ì„±&#x27;, &#x27;ë„¤ì´ë²„&#x27;, &#x27;ì¸í”„ëŸ°&#x27;] &#125; &#125; &#125;).mount(&#x27;#app&#x27;)&lt;/script&gt;","text":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° Vue 3 Instance ì™€ ì†ì„±Vue.createApp(&#123; template: , data: , methods: , created: , watch: ,&#125;); methods&lt;div id=&quot;app&quot;&gt; &lt;p&gt;&#123;&#123;count&#125;&#125;&lt;/p&gt; &lt;button v-on:click=&quot;addCount&quot;&gt;+&lt;/button&gt;&lt;/div&gt;&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;&lt;script&gt; Vue.createApp(&#123; data() &#123; return &#123; count: 0 &#125; &#125;, methods: &#123; addCount() &#123; this.count++; &#125; &#125; &#125;).mount(&#x27;#app&#x27;)&lt;/script&gt; Vue Directivev-for&lt;div id=&quot;app&quot;&gt; &lt;ul&gt; &lt;li v-for=&quot;item in items&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;&lt;script&gt; Vue.createApp(&#123; data() &#123; return &#123; items: [&#x27;ì‚¼ì„±&#x27;, &#x27;ë„¤ì´ë²„&#x27;, &#x27;ì¸í”„ëŸ°&#x27;] &#125; &#125; &#125;).mount(&#x27;#app&#x27;)&lt;/script&gt;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue3","slug":"Frontend/Vue3","permalink":"https://ckck803.github.io/categories/Frontend/Vue3/"}],"tags":[]},{"title":"Vue3 - Composition API","slug":"vue/vue3/vue3-composition-api","date":"2024-03-01T02:31:46.000Z","updated":"2024-11-23T16:53:28.493Z","comments":true,"path":"2024/03/01/vue/vue3/vue3-composition-api/","link":"","permalink":"https://ckck803.github.io/2024/03/01/vue/vue3/vue3-composition-api/","excerpt":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° Composition API ë¡œ ë¦¬í™í† ë§Composition API ì ìš© ì „export default &#123; methods: &#123; logText() &#123; this.pas &#125; &#125; data() &#123; return &#123; username: &#x27;&#x27;, password: &#x27;&#x27;, &#125; &#125;, methods: &#123; submitForm() &#123; // event.preventDefault(); const data = &#123; username: this.username, password: this.password, &#125; axios.post(&#x27;https://jsonplaceholder.typicode.com/users/&#x27;, data) .then(response =&gt; &#123; console.log(response) &#125;); // console.log(&#x27;ì œì¶œë¨&#x27;) &#125; &#125;&#125; Composition API ì ìš© í›„export default &#123; setup() &#123; // data var username = ref(&#x27;&#x27;); var password = ref(&#x27;&#x27;); // methods var submitForm = () =&gt; &#123; axios.post(&#x27;https://jsonplaceholder.typicode.com/users/&#x27;, &#123; username: username.value, password: password.value &#125;).then(response =&gt; &#123; console.log(response); &#125;) &#125; return &#123; username, password, submitForm &#125; &#125;,&#125;","text":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° Composition API ë¡œ ë¦¬í™í† ë§Composition API ì ìš© ì „export default &#123; methods: &#123; logText() &#123; this.pas &#125; &#125; data() &#123; return &#123; username: &#x27;&#x27;, password: &#x27;&#x27;, &#125; &#125;, methods: &#123; submitForm() &#123; // event.preventDefault(); const data = &#123; username: this.username, password: this.password, &#125; axios.post(&#x27;https://jsonplaceholder.typicode.com/users/&#x27;, data) .then(response =&gt; &#123; console.log(response) &#125;); // console.log(&#x27;ì œì¶œë¨&#x27;) &#125; &#125;&#125; Composition API ì ìš© í›„export default &#123; setup() &#123; // data var username = ref(&#x27;&#x27;); var password = ref(&#x27;&#x27;); // methods var submitForm = () =&gt; &#123; axios.post(&#x27;https://jsonplaceholder.typicode.com/users/&#x27;, &#123; username: username.value, password: password.value &#125;).then(response =&gt; &#123; console.log(response); &#125;) &#125; return &#123; username, password, submitForm &#125; &#125;,&#125;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue3","slug":"Frontend/Vue3","permalink":"https://ckck803.github.io/categories/Frontend/Vue3/"}],"tags":[]},{"title":"[Vue3] - Reactivity (ë°˜ì‘í˜•)","slug":"vue/vue3/vue3-reactivity","date":"2024-03-01T00:31:46.000Z","updated":"2025-03-27T03:58:05.978Z","comments":true,"path":"2024/03/01/vue/vue3/vue3-reactivity/","link":"","permalink":"https://ckck803.github.io/2024/03/01/vue/vue3/vue3-reactivity/","excerpt":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° âœ… Vue3 ì—ì„œì˜ ë°˜ì‘í˜• ì°¸ê³ : https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Proxy Vue3 ì—ì„œëŠ” ë°ì´í„°ì˜ ë³€ê²½ì„ ê°ì§€í•˜ê³  ìë™ìœ¼ë¡œ UI ë¥¼ ì—…ë°ì´íŠ¸ í•´ì£¼ê¸° ìœ„í•´ Javascript ì˜ Proxy ê°œë…ì„ ë„ì… í–ˆìŠµë‹ˆë‹¤. ê°ì²´ìƒì„±ì‹œ Proxy ê°ì²´ë¡œ ë§Œë“¦ìœ¼ë¡œì¨ Vue ì—ì„œëŠ” í•´ë‹¹ ê°ì²´ì˜ ì ‘ê·¼ ë° ë³€ê²½ì„ ê°ì§€í•˜ê³  ë³€ê²½ëœ ë‚´ìš©ì„ UI ì— ë°˜ì˜í•´ì¤„ ìˆ˜ ìˆê²Œ ëìŠµë‹ˆë‹¤. Proxy ê°ì²´ ìƒì„± ì˜ˆì œ&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&lt;!-- &lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt; --&gt;&lt;script&gt; var data = &#123; message: 10 &#125; function render(sth) &#123; var div = document.querySelector(&#x27;#app&#x27;); div.innerHTML = sth; &#125; var app = new Proxy(data, &#123; get() &#123; console.log(&#x27;ê°’ ì ‘ê·¼&#x27;) &#125;, // target: ê°ì²´, property: ê°ì²´ë‚´ ì†ì„±, value: ì „ë‹¬ ë°›ëŠ” ê°’ set(target, prop, value) &#123; console.log(&#x27;ê°’ ê°±ì‹ &#x27;) target[prop] = value render(value) &#125; &#125;)&lt;/script&gt; Proxy ê°ì²´ë¡œ ìƒì„±ëœ app ì˜ ë‚´ìš©ì„ ë³€ê²½í•˜ê²Œ ë˜ë©´ ì½˜ì†”ì—ì„œ â€œê°’ ê°±ì‹ â€ ì´ë¼ëŠ” ë¡œê·¸ê°€ ëœ¨ê²Œ ë©ë‹ˆë‹¤.","text":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° âœ… Vue3 ì—ì„œì˜ ë°˜ì‘í˜• ì°¸ê³ : https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Proxy Vue3 ì—ì„œëŠ” ë°ì´í„°ì˜ ë³€ê²½ì„ ê°ì§€í•˜ê³  ìë™ìœ¼ë¡œ UI ë¥¼ ì—…ë°ì´íŠ¸ í•´ì£¼ê¸° ìœ„í•´ Javascript ì˜ Proxy ê°œë…ì„ ë„ì… í–ˆìŠµë‹ˆë‹¤. ê°ì²´ìƒì„±ì‹œ Proxy ê°ì²´ë¡œ ë§Œë“¦ìœ¼ë¡œì¨ Vue ì—ì„œëŠ” í•´ë‹¹ ê°ì²´ì˜ ì ‘ê·¼ ë° ë³€ê²½ì„ ê°ì§€í•˜ê³  ë³€ê²½ëœ ë‚´ìš©ì„ UI ì— ë°˜ì˜í•´ì¤„ ìˆ˜ ìˆê²Œ ëìŠµë‹ˆë‹¤. Proxy ê°ì²´ ìƒì„± ì˜ˆì œ&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&lt;!-- &lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt; --&gt;&lt;script&gt; var data = &#123; message: 10 &#125; function render(sth) &#123; var div = document.querySelector(&#x27;#app&#x27;); div.innerHTML = sth; &#125; var app = new Proxy(data, &#123; get() &#123; console.log(&#x27;ê°’ ì ‘ê·¼&#x27;) &#125;, // target: ê°ì²´, property: ê°ì²´ë‚´ ì†ì„±, value: ì „ë‹¬ ë°›ëŠ” ê°’ set(target, prop, value) &#123; console.log(&#x27;ê°’ ê°±ì‹ &#x27;) target[prop] = value render(value) &#125; &#125;)&lt;/script&gt; Proxy ê°ì²´ë¡œ ìƒì„±ëœ app ì˜ ë‚´ìš©ì„ ë³€ê²½í•˜ê²Œ ë˜ë©´ ì½˜ì†”ì—ì„œ â€œê°’ ê°±ì‹ â€ ì´ë¼ëŠ” ë¡œê·¸ê°€ ëœ¨ê²Œ ë©ë‹ˆë‹¤. app.message = &#x27;hello vue&#x27;;// ì¶œë ¥&#x27;ê°’ ê°±ì‹ &#x27; âœ… ê°ì²´ë¥¼ ë°˜ì‘í˜•ê°ì²´ë¡œ ìƒì„±í•´ì£¼ëŠ” í•¨ìˆ˜Vue3 ì—ì„œëŠ” ê°ì²´ë¥¼ ë°˜ì‘í˜• ê°ì²´ë¡œ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤. reactiveê°ì²´ë¥¼ ë°˜ì‘í˜• ê°ì²´ë¡œ ë³€í™˜í•´ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. import &#123; reactive &#125; from &#x27;vue&#x27;;const state = reactive(&#123; count: 0 &#125;); refimport &#123; ref &#125; from &#x27;vue&#x27;;const countRef = ref(0);// íƒ€ì… ìŠ¤í¬ë¦½íŠ¸ì¼ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ íƒ€ì… ì„ ì—…ì„ í•©ë‹ˆë‹¤.const countRef = ref&lt;number&gt;(0);console.log(countRef.value); // 0 computedë°˜ì‘í˜• ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°ëœ ê°’ì„ ì •ì˜í•  ìˆ˜ ìˆìœ¼ë©°, ì˜ì¡´ì„±ì´ ë³€ê²½ë  ë•Œ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ê³„ì‚°ë©ë‹ˆë‹¤. import &#123; reactive, computed &#125; from &#x27;vue&#x27;;const state = reactive(&#123; count: 0 &#125;);// count ê°’ì´ ë³€ê²½ë  ë‹¤ì‹œ ê³„ì‚°í•´ doubleCount ê°’ì„ ë³€ê²½í•©ë‹ˆë‹¤.const doubleCount = computed(() =&gt; state.count * 2); watchíŠ¹ì • ë°˜ì‘í˜• ë°ì´í„°ì˜ ë³€í™”ë¥¼ ê°ì‹œí•˜ê³ , ë³€í™”ê°€ ê°ì§€ë  ë•Œë§ˆë‹¤ ì½œë°± í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. import &#123; reactive, watch &#125; from &#x27;vue&#x27;;const state = reactive(&#123; count: 0 &#125;);watch( () =&gt; state.count, (newVal, oldVal) =&gt; &#123; console.log(`state.count changed from $&#123;oldVal&#125; to $&#123;newVal&#125;`); &#125;); âœ… ë°˜ì‘í˜• ê°ì²´ì˜ êµ¬ì¡°ë¶„í•´reactive ê°ì²´ëŠ” Proxyë¥¼ í†µí•´ ë‚´ë¶€ì— ìˆëŠ” getter ì™€ setter ë¥¼ í†µí•´ ë°˜ì‘í˜•ì„ ìœ ì§€í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, êµ¬ì¡° ë¶„í•´ë¥¼ í†µí•´ ê°œë³„ ì†ì„±ì„ ë¶„ë¦¬í•˜ë©´ ì›ë³¸ ê°ì²´ì— ëŒ€í•œ Proxy ì˜ ì—°ê²°ì´ ëŠì–´ì ¸, í•´ë‹¹ ë³€ìˆ˜ëŠ” ë” ì´ìƒ ë°˜ì‘í˜• ì¶”ì ì„ ë°›ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, Proxy ê°ì²´ë¡œ ìƒì„±ëœ ê°ì²´ë‚´ì˜ ë°ì´í„°ë“¤ì€ Proxy ê°ì²´ë¡œ ìƒì„±ëœê²Œ ì•„ë‹Œ ë³„ë„ì˜ ê°ì²´ë¡œ ì„ ì–¸ëœ ìƒíƒœì´ê¸° ë•Œë¬¸ì— ë°˜ì‘í˜•ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. êµ¬ì¡°ë¶„í•´í• ë‹¹ëœ ê°ì²´ëŠ” toRefs í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ë°˜ì‘í˜• ê°ì²´ë¡œ ë§Œë“¤ì–´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. toRefstoRefs í•¨ìˆ˜ëŠ” êµ¬ì¡°ë¶„í•´í• ë‹¹ì‹œ ë‚´ë¶€ ë°ì´í„°ë“¤ì„ ë°˜ì‘í˜•(Proxy) ê°ì²´ë¡œ ë§Œë“¤ì–´ ë°˜í™¥í•©ë‹ˆë‹¤. import &#123; reactive, toRefs &#125; from &#x27;vue&#x27;;const state = reactive(&#123; count: 0, name: &#x27;Vue&#x27; &#125;);const &#123; count, name &#125; = toRefs(state);// ì´ì œ countì™€ nameì€ ê°ê° Ref&lt;number&gt;ì™€ Ref&lt;string&gt; íƒ€ì…ì„ ê°€ì§€ë©°, reactivityê°€ ìœ ì§€ë©ë‹ˆë‹¤.","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue3","slug":"Frontend/Vue3","permalink":"https://ckck803.github.io/categories/Frontend/Vue3/"}],"tags":[]},{"title":"Vue3 - ì‹œì‘í•˜ê¸°","slug":"vue/vue3/vue3-start","date":"2024-02-29T21:31:46.000Z","updated":"2024-11-23T16:53:46.134Z","comments":true,"path":"2024/03/01/vue/vue3/vue3-start/","link":"","permalink":"https://ckck803.github.io/2024/03/01/vue/vue3/vue3-start/","excerpt":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° CDN ìœ¼ë¡œ ì‹œì‘í•˜ê¸°&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;&lt;div id=&quot;app&quot;&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;&lt;script&gt; const &#123; createApp &#125; = Vue createApp(&#123; data() &#123; return &#123; message: &#x27;Hello Vue!&#x27; &#125; &#125; &#125;).mount(&#x27;#app&#x27;)&lt;/script&gt;","text":"ëª©ì°¨ Vue3 - Component ê°„ í†µì‹  Vue3 - Component Vue3 - Composition API Vue3 - Instance [Vue3] - Reactivity (ë°˜ì‘í˜•) Vue3 - ì‹œì‘í•˜ê¸° CDN ìœ¼ë¡œ ì‹œì‘í•˜ê¸°&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;&lt;div id=&quot;app&quot;&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;&lt;script&gt; const &#123; createApp &#125; = Vue createApp(&#123; data() &#123; return &#123; message: &#x27;Hello Vue!&#x27; &#125; &#125; &#125;).mount(&#x27;#app&#x27;)&lt;/script&gt;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue3","slug":"Frontend/Vue3","permalink":"https://ckck803.github.io/categories/Frontend/Vue3/"}],"tags":[]},{"title":"[Vue] - Router","slug":"vue/vue/vue-router","date":"2024-02-28T11:10:40.000Z","updated":"2025-03-17T11:15:28.416Z","comments":true,"path":"2024/02/28/vue/vue/vue-router/","link":"","permalink":"https://ckck803.github.io/2024/02/28/vue/vue/vue-router/","excerpt":"ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜npm install vue-router import &#123;createWebHistory, createRouter&#125; from &quot;vue-router&quot;;const routes = [ &#123; path: &quot;/&quot;, name: &quot;home&quot;, component: () =&gt; import(&#x27;../pages/ChatRoom.vue&#x27;) &#125;]const router = createRouter(&#123; history: createWebHistory(), routes&#125;)export default router; import &#123; createApp &#125; from &#x27;vue&#x27;import &#x27;./style.css&#x27;import App from &#x27;./App.vue&#x27;import router from &quot;./router/router.ts&quot;;createApp(App) .use(router) .mount(&#x27;#app&#x27;) &lt;script setup lang=&quot;ts&quot;&gt;&lt;/script&gt;&lt;template&gt; &lt;router-view&gt;&lt;/router-view&gt;&lt;/template&gt;&lt;style scoped&gt;.logo &#123; height: 6em; padding: 1.5em; will-change: filter; transition: filter 300ms;&#125;.logo:hover &#123; filter: drop-shadow(0 0 2em #646cffaa);&#125;.logo.vue:hover &#123; filter: drop-shadow(0 0 2em #42b883aa);&#125;&lt;/style&gt; ë¼ìš°í„° ì´ë™ router-linkvue í”„ë¡œì íŠ¸ë‚´ì—ì„œ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í• ë•Œ a íƒœê·¸ë¥¼ ì´ìš©í•˜ê²Œ ë˜ë©´ ì „ì²´ í˜ì´ì§€ê°€ ë¦¬ë¡œë”© ë˜ê²Œ ë©ë‹ˆë‹¤. SPA í™˜ê²½ì—ì„œëŠ” ì´ˆê¸° ë¡œë”©ì‹œ Web ê´€ë ¨ ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ ê°€ì ¸ì˜¤ëŠ”ë° ì „ì²´ í˜ì´ì§€ ë¦¬ë¡œë”©ì´ ë°œìƒí•˜ë©´ ë§ì€ ë¹„íš¨ìœ¨ì„ ê°€ì ¸ì˜¤ê²Œ ë©ë‹ˆë‹¤. ë‹¤í–‰íˆ vue-router ê°€ ì ìš©ëœ í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ë¥¸ ê²½ë¡œë¡œ ì´ë™í•˜ê³  ì‹¶ì„ ê²½ìš°ì—ëŠ” a íƒœê·¸ ëŒ€ì‹  router-link ë¥¼ ì‚¬ìš©í•˜ë©´ í™”ë©´ ë¦¬ë¡œë”© ì—†ì´ SPA ë‚´ì—ì„œ í˜ì´ì§€ ì „í™˜ì´ ì´ë¤„ì§€ë¯€ë¡œ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.","text":"ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜npm install vue-router import &#123;createWebHistory, createRouter&#125; from &quot;vue-router&quot;;const routes = [ &#123; path: &quot;/&quot;, name: &quot;home&quot;, component: () =&gt; import(&#x27;../pages/ChatRoom.vue&#x27;) &#125;]const router = createRouter(&#123; history: createWebHistory(), routes&#125;)export default router; import &#123; createApp &#125; from &#x27;vue&#x27;import &#x27;./style.css&#x27;import App from &#x27;./App.vue&#x27;import router from &quot;./router/router.ts&quot;;createApp(App) .use(router) .mount(&#x27;#app&#x27;) &lt;script setup lang=&quot;ts&quot;&gt;&lt;/script&gt;&lt;template&gt; &lt;router-view&gt;&lt;/router-view&gt;&lt;/template&gt;&lt;style scoped&gt;.logo &#123; height: 6em; padding: 1.5em; will-change: filter; transition: filter 300ms;&#125;.logo:hover &#123; filter: drop-shadow(0 0 2em #646cffaa);&#125;.logo.vue:hover &#123; filter: drop-shadow(0 0 2em #42b883aa);&#125;&lt;/style&gt; ë¼ìš°í„° ì´ë™ router-linkvue í”„ë¡œì íŠ¸ë‚´ì—ì„œ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í• ë•Œ a íƒœê·¸ë¥¼ ì´ìš©í•˜ê²Œ ë˜ë©´ ì „ì²´ í˜ì´ì§€ê°€ ë¦¬ë¡œë”© ë˜ê²Œ ë©ë‹ˆë‹¤. SPA í™˜ê²½ì—ì„œëŠ” ì´ˆê¸° ë¡œë”©ì‹œ Web ê´€ë ¨ ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ ê°€ì ¸ì˜¤ëŠ”ë° ì „ì²´ í˜ì´ì§€ ë¦¬ë¡œë”©ì´ ë°œìƒí•˜ë©´ ë§ì€ ë¹„íš¨ìœ¨ì„ ê°€ì ¸ì˜¤ê²Œ ë©ë‹ˆë‹¤. ë‹¤í–‰íˆ vue-router ê°€ ì ìš©ëœ í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ë¥¸ ê²½ë¡œë¡œ ì´ë™í•˜ê³  ì‹¶ì„ ê²½ìš°ì—ëŠ” a íƒœê·¸ ëŒ€ì‹  router-link ë¥¼ ì‚¬ìš©í•˜ë©´ í™”ë©´ ë¦¬ë¡œë”© ì—†ì´ SPA ë‚´ì—ì„œ í˜ì´ì§€ ì „í™˜ì´ ì´ë¤„ì§€ë¯€ë¡œ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue","slug":"Frontend/Vue","permalink":"https://ckck803.github.io/categories/Frontend/Vue/"}],"tags":[]},{"title":"Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì…","slug":"spring/spring-core/spring-componentscan","date":"2024-02-26T15:14:19.000Z","updated":"2024-11-26T03:04:43.176Z","comments":true,"path":"2024/02/27/spring/spring-core/spring-componentscan/","link":"","permalink":"https://ckck803.github.io/2024/02/27/spring/spring-core/spring-componentscan/","excerpt":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì…ìŠ¤í”„ë§ì—ì„œëŠ” ì„¤ì • ì •ë³´ ì—†ì´ë„ ìŠ¤í”„ë§ Bean ì„ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ, ë“±ë¡ëœ Bean ë“¤ì˜ ì˜ì¡´ ê´€ê³„ë„ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” ê¸°ëŠ¥ë„ ì œê³µí•©ë‹ˆë‹¤. ìŠ¤í”„ë§ì€ @ComponentScan ì„ ì´ìš©í•´ ìŠ¤í”„ë§ Bean ì„ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ê³ , @Autowiredì™€ @Inject ë¥¼ ì‚¬ìš©í•´ ì˜ì¡´ ê´€ê³„ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•´ ì¤ë‹ˆë‹¤. 1. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”@ComponentScan ì€ @Component ê°€ ë¶™ì€ ëª¨ë“  í´ë˜ìŠ¤ë“¤ì„ ìŠ¤í”„ë§ Bean ìœ¼ë¡œ ìë™ ë“±ë¡í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ Bean ë“±ë¡ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ í´ë˜ìŠ¤ëª…ê³¼ ë™ì¼í•˜ë©° ë§¨ ì•ê¸€ìë§Œ ì†Œë¬¸ìë¡œ ë“±ë¡ë©ë‹ˆë‹¤. ë§Œì¼, ë³„ë„ì˜ ì´ë¦„ì„ ì§€ì •í•˜ê³  ì‹¶ìœ¼ë©´ @Component(&quot;Bean ì´ë¦„&quot;) ìœ¼ë¡œ ë“±ë¡í•˜ë©´ ë©ë‹ˆë‹¤.","text":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì…ìŠ¤í”„ë§ì—ì„œëŠ” ì„¤ì • ì •ë³´ ì—†ì´ë„ ìŠ¤í”„ë§ Bean ì„ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ, ë“±ë¡ëœ Bean ë“¤ì˜ ì˜ì¡´ ê´€ê³„ë„ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” ê¸°ëŠ¥ë„ ì œê³µí•©ë‹ˆë‹¤. ìŠ¤í”„ë§ì€ @ComponentScan ì„ ì´ìš©í•´ ìŠ¤í”„ë§ Bean ì„ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ê³ , @Autowiredì™€ @Inject ë¥¼ ì‚¬ìš©í•´ ì˜ì¡´ ê´€ê³„ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•´ ì¤ë‹ˆë‹¤. 1. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”@ComponentScan ì€ @Component ê°€ ë¶™ì€ ëª¨ë“  í´ë˜ìŠ¤ë“¤ì„ ìŠ¤í”„ë§ Bean ìœ¼ë¡œ ìë™ ë“±ë¡í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ Bean ë“±ë¡ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ í´ë˜ìŠ¤ëª…ê³¼ ë™ì¼í•˜ë©° ë§¨ ì•ê¸€ìë§Œ ì†Œë¬¸ìë¡œ ë“±ë¡ë©ë‹ˆë‹¤. ë§Œì¼, ë³„ë„ì˜ ì´ë¦„ì„ ì§€ì •í•˜ê³  ì‹¶ìœ¼ë©´ @Component(&quot;Bean ì´ë¦„&quot;) ìœ¼ë¡œ ë“±ë¡í•˜ë©´ ë©ë‹ˆë‹¤. 2. ì˜ì¡´ì„± ì£¼ì…@Autowired ê°€ ë¶™ì€ ê°ì²´ë¥¼ í™•ì¸í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ í•´ë‹¹ ê°ì²´ë¥¼ ì°¾ì•„ ë„£ì–´ì¤ë‹ˆë‹¤. ì´ë•Œ, ì˜ì¡´ì„±ì€ íƒ€ì…ì„ ê¸°ì¤€ìœ¼ë¡œ ë„£ì–´ì¤ë‹ˆë‹¤. ì˜ì¡´ì„± ì£¼ì… ê°ì²´ê°€ Bean ìœ¼ë¡œ ë“±ë¡ë¼ ìˆì§€ ì•Šìœ¼ë©´ NoSuchBeanDefinitionException ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. ë§Œì•½, ì˜ì¡´ì„± ì£¼ì… ê°ì²´ê°€ ì—†ì´ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ê²½ìš° @Autowired(required = false) ë¡œ ì„¤ì •í•˜ë©´ ì—ëŸ¬ê°€ ì—†ì´ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Core","slug":"Spring/Spring-Core","permalink":"https://ckck803.github.io/categories/Spring/Spring-Core/"}],"tags":[]},{"title":"Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹","slug":"spring/spring-core/spring-dependency-injection","date":"2024-02-26T15:14:19.000Z","updated":"2024-11-25T05:53:53.224Z","comments":true,"path":"2024/02/27/spring/spring-core/spring-dependency-injection/","link":"","permalink":"https://ckck803.github.io/2024/02/27/spring/spring-core/spring-dependency-injection/","excerpt":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìŠ¤í”„ë§ ì˜ì¡´ì„± ì£¼ì… (Dependency Injection) ì˜ì¡´ì„± ì£¼ì…ì€ ê°ì²´ê°„ì˜ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë””ìì¸ íŒ¨í„´ í•œ ê°ì²´ê°€ ì§ì ‘ ì˜ì¡´ì„±í•˜ëŠ” ë‹¤ë¥¸ ê°ì²´ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ê´€ë¦¬í•˜ì§€ ì•Šê³ , í”„ë ˆì„ì›Œí¬ì™€ ê°™ì€ ì™¸ë¶€ë¡œë¶€í„° í•„ìš”í•œ ì˜ì¡´ì„±ì„ ì£¼ì…ë°›ëŠ”ë°©ì‹ ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê°ì²´ê°„ ì˜ì¡´ì„±ì„ ìˆ˜ì •í•˜ê¸° ìœ„í•´ ì§ì ‘ ì½”ë“œë¥¼ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ì–´ ê°ì²´ê°„ ê²°í•©ë„ ë¥¼ ë‚®ì¶°ì¤ë‹ˆë‹¤. ìŠ¤í”„ë§ì—ì„œëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê°ì²´ì˜ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ê³  ì£¼ì…í•´ì¤ë‹ˆë‹¤. ì´ë•Œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì˜ì¡´ì„±ì„ ê´€ë¦¬ ë° ì£¼ì…ì„ ìœ„í•´ ê´€ë¦¬í•˜ëŠ” ê°ì²´ë“¤ì„ ìŠ¤í”„ë§ Bean ì´ë¼ ë¶€ë¦…ë‹ˆë‹¤. ìŠ¤í”„ë§ì—ì„œ ì˜ì¡´ì„± ì£¼ì…ì„ ìœ„í•´ì„œëŠ” ìš°ì„ , ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë“¤ì„ ìŠ¤í”„ë§ Bean ìœ¼ë¡œ ë“±ë¡í•´ì•¼ í•©ë‚˜ë‹¤. ì˜ì¡´ì„± ì£¼ì…ì€ ìŠ¤í”„ë§ Bean ìœ¼ë¡œ ë“±ë¡ëœ ê°ì²´ë“¤ì„ ê¸°ì¤€ìœ¼ë¡œ ì£¼ì…ì´ ì´ë¤„ì§‘ë‹ˆë‹¤. ìŠ¤í”„ë§ì—ì„œ ì˜ì¡´ì„± ì£¼ì…ì„ ìœ„í•´ @Autowiredì™€ @Inject ë¥¼ ì‚¬ìš©í•˜ê³  ìƒì„±ì, Setter, í•„ë“œ, ë©”ì†Œë“œ ì— ë¶™ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ ì–´ë…¸í…Œì´ì…˜ì´ ê°ì²´ì˜ ì˜ì¡´ì„±ì„ ì£¼ì…í• ë•ŒëŠ” íƒ€ì…ì„ ê¸°ì¤€ìœ¼ë¡œ ì£¼ì…í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìŠ¤í”„ë§ ì˜ì¡´ì„± ì£¼ì… (Dependency Injection) ì˜ì¡´ì„± ì£¼ì…ì€ ê°ì²´ê°„ì˜ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë””ìì¸ íŒ¨í„´ í•œ ê°ì²´ê°€ ì§ì ‘ ì˜ì¡´ì„±í•˜ëŠ” ë‹¤ë¥¸ ê°ì²´ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ê´€ë¦¬í•˜ì§€ ì•Šê³ , í”„ë ˆì„ì›Œí¬ì™€ ê°™ì€ ì™¸ë¶€ë¡œë¶€í„° í•„ìš”í•œ ì˜ì¡´ì„±ì„ ì£¼ì…ë°›ëŠ”ë°©ì‹ ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê°ì²´ê°„ ì˜ì¡´ì„±ì„ ìˆ˜ì •í•˜ê¸° ìœ„í•´ ì§ì ‘ ì½”ë“œë¥¼ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ì–´ ê°ì²´ê°„ ê²°í•©ë„ ë¥¼ ë‚®ì¶°ì¤ë‹ˆë‹¤. ìŠ¤í”„ë§ì—ì„œëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê°ì²´ì˜ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ê³  ì£¼ì…í•´ì¤ë‹ˆë‹¤. ì´ë•Œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì˜ì¡´ì„±ì„ ê´€ë¦¬ ë° ì£¼ì…ì„ ìœ„í•´ ê´€ë¦¬í•˜ëŠ” ê°ì²´ë“¤ì„ ìŠ¤í”„ë§ Bean ì´ë¼ ë¶€ë¦…ë‹ˆë‹¤. ìŠ¤í”„ë§ì—ì„œ ì˜ì¡´ì„± ì£¼ì…ì„ ìœ„í•´ì„œëŠ” ìš°ì„ , ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë“¤ì„ ìŠ¤í”„ë§ Bean ìœ¼ë¡œ ë“±ë¡í•´ì•¼ í•©ë‚˜ë‹¤. ì˜ì¡´ì„± ì£¼ì…ì€ ìŠ¤í”„ë§ Bean ìœ¼ë¡œ ë“±ë¡ëœ ê°ì²´ë“¤ì„ ê¸°ì¤€ìœ¼ë¡œ ì£¼ì…ì´ ì´ë¤„ì§‘ë‹ˆë‹¤. ìŠ¤í”„ë§ì—ì„œ ì˜ì¡´ì„± ì£¼ì…ì„ ìœ„í•´ @Autowiredì™€ @Inject ë¥¼ ì‚¬ìš©í•˜ê³  ìƒì„±ì, Setter, í•„ë“œ, ë©”ì†Œë“œ ì— ë¶™ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ ì–´ë…¸í…Œì´ì…˜ì´ ê°ì²´ì˜ ì˜ì¡´ì„±ì„ ì£¼ì…í• ë•ŒëŠ” íƒ€ì…ì„ ê¸°ì¤€ìœ¼ë¡œ ì£¼ì…í•©ë‹ˆë‹¤. ì˜ì¡´ì„± ì£¼ì…ë°©ì‹1. ìƒì„±ì ì£¼ì… ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ì€ ìŠ¤í”„ë§ì—ì„œ ê°€ì¥ ê¶Œì¥í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ Bean ì„ ìƒì„±í• ë•Œ ê°ì²´ì˜ ìƒì„±ìë¥¼ ì´ìš©í•´ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ê´€ê³„ ì£¼ì…ì€ ê°ì²´ ìƒì„±ì‹œ ë‹¨ í•œë²ˆë§Œ í˜¸ì¶œë¼ ê°ì²´ê°„ ì˜ì¡´ê´€ê³„ì˜ ë¶ˆë³€ì„±ì´ ë³´ì¥ë©ë‹ˆë‹¤. ì´ˆê¸°í™” ì‹œì ì— ì˜ì¡´ê´€ê³„ê°€ ì„¤ì •ë˜ê³  ë³€ê²½ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— final í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì‹œ ìƒì„±ìê°€ 1ê°œì¸ ê²½ìš° @Autowried ë¥¼ ìƒëµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. @Componentpublic class OrderServiceImpl implements OrderService &#123; private final MemberRepository memberRepository; private final DiscountPolicy discountPolicy; @Autowired // ìƒì„±ìê°€ 1ê°œì¼ ê²½ìš° ìƒëµ ê°€ëŠ¥ public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) &#123; this.memberRepository = memberRepository; this.discountPolicy = discountPolicy; &#125;&#125; 2. Setter ì£¼ì… ì˜ì¡´ê´€ê³„ì˜ ë³€ê²½ì´ ìˆì„ë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ Setter ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ê°ì²´ì˜ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ë³€ê²½ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©í•©ë‹ˆë‹¤. ê°’ì´ ì´ˆê¸°í™” í›„ ì˜ì¡´ê´€ê²Œê°€ ë³€ê²½ë  ìˆ˜ ìˆì–´ final í‚¤ì›Œë“œ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥ í•©ë‹ˆë‹¤ @Componentpublic class OrderServiceImpl implements OrderService &#123; private MemberRepository memberRepository; private DiscountPolicy discountPolicy; @Autowired public void setMemberRepository(MemberRepository memberRepository) &#123; this.memberRepository = memberRepository; &#125; @Autowired public void setDiscountPolicy(DiscountPolicy discountPolicy) &#123; this.discountPolicy = discountPolicy; &#125;&#125; 3. í•„ë“œ ì£¼ì… DI í”„ë ˆì„ì›Œí¬ë¥¼ í†µí•œ ì˜ì¡´ ê´€ê³„ ì£¼ì… í•„ë“œì— ì§ì ‘ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. í•„ë“œ ì£¼ì…ì€ DI í”„ë ˆì„ì›Œí¬ê°€ ì—†ìœ¼ë©´ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë˜í•œ í•„ë“œ ì£¼ì…ë°©ì‹ì€ í…ŒìŠ¤íŠ¸ ì‹œ ì˜ì¡´ê´€ê³„ê°€ ìˆëŠ” ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ì—†ì–´ í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤. @Componentpublic class OrderServiceImpl implements OrderService &#123; @Autowired private MemberRepository memberRepository; @Autowired private DiscountPolicy discountPolicy;&#125; 4. ë©”ì„œë“œ ì£¼ì…ì¼ë°˜ ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ë©”ì†Œë“œì— @Autowired ë¥¼ ë¶™ì—¬ ì˜ì¡´ ê°ì²´ë¥¼ ì£¼ì…í•©ë‹ˆë‹¤. @Componentpublic class OrderServiceImpl implements OrderService &#123; private MemberRepository memberRepository; private DiscountPolicy discountPolicy; @Autowired public void init(MemberRepository memberRepository, DiscountPolicy discountPolicy) &#123; this.memberRepository = memberRepository; this.discountPolicy = discountPolicy; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Core","slug":"Spring/Spring-Core","permalink":"https://ckck803.github.io/categories/Spring/Spring-Core/"}],"tags":[]},{"title":"Vite í™˜ê²½ì—ì„œ tsconfig Path ì‚¬ìš©í•˜ê¸°","slug":"react/vite/tsconfig-vite","date":"2024-02-23T21:31:46.000Z","updated":"2024-11-29T14:34:12.291Z","comments":true,"path":"2024/02/24/react/vite/tsconfig-vite/","link":"","permalink":"https://ckck803.github.io/2024/02/24/react/vite/tsconfig-vite/","excerpt":"ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜npm install vite-tsconfig-paths import react from &quot;@vitejs/plugin-react&quot;;import &#123;defineConfig&#125; from &quot;vite&quot;;import EnvironmentPlugin from &quot;vite-plugin-environment&quot;;import tsconfigPaths from &quot;vite-tsconfig-paths&quot;;// https://vitejs.dev/config/export default defineConfig(&#123; plugins: [ react(), tsconfigPaths(), ], resolve: &#123; alias: &#123;&#125;, &#125;, build : &#123; outDir: &quot;./build&quot;, &#125;, server : &#123; port: Number(process.env.PORT || 3000), &#125;, define : &#123;&#125;,&#125;);","text":"ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜npm install vite-tsconfig-paths import react from &quot;@vitejs/plugin-react&quot;;import &#123;defineConfig&#125; from &quot;vite&quot;;import EnvironmentPlugin from &quot;vite-plugin-environment&quot;;import tsconfigPaths from &quot;vite-tsconfig-paths&quot;;// https://vitejs.dev/config/export default defineConfig(&#123; plugins: [ react(), tsconfigPaths(), ], resolve: &#123; alias: &#123;&#125;, &#125;, build : &#123; outDir: &quot;./build&quot;, &#125;, server : &#123; port: Number(process.env.PORT || 3000), &#125;, define : &#123;&#125;,&#125;);","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vite","slug":"Frontend/Vite","permalink":"https://ckck803.github.io/categories/Frontend/Vite/"}],"tags":[]},{"title":"Vuex - Helper í•¨ìˆ˜","slug":"vue/vuex/vuex-helper","date":"2024-02-16T11:10:40.000Z","updated":"2024-11-23T16:53:58.881Z","comments":true,"path":"2024/02/16/vue/vuex/vuex-helper/","link":"","permalink":"https://ckck803.github.io/2024/02/16/vue/vuex/vuex-helper/","excerpt":"mapStatemapGetters","text":"mapStatemapGetters","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue3","slug":"Frontend/Vue3","permalink":"https://ckck803.github.io/categories/Frontend/Vue3/"}],"tags":[]},{"title":"Vuex ì‹œì‘í•˜ê¸°","slug":"vue/vuex/vuex-start","date":"2024-02-15T11:10:40.000Z","updated":"2024-11-23T16:54:03.998Z","comments":true,"path":"2024/02/15/vue/vuex/vuex-start/","link":"","permalink":"https://ckck803.github.io/2024/02/15/vue/vuex/vuex-start/","excerpt":"ë¼ì´ë¸ŒëŸ¬ë¦¬ ë“±ë¡# Vue 3 npm install vuex --save# Vue 2npm install vuex@3.6.2 --save Store ìƒì„± Vue 2 ì—ì„œ Store ìƒì„± const Store = new Vuex.Store(&#123; state: &#123;&#125;, getters: &#123;&#125;, mutations: &#123;&#125;, actions: &#123;&#125;, modules: &#123;&#125;,&#125;) Vue 3 ì—ì„œ Store ìƒì„± import &#123; createStore &#125; from &quot;vuex&quot;;export default createStore(&#123; state: &#123;&#125;, getters: &#123;&#125;, mutations: &#123;&#125;, actions: &#123;&#125;, modules: &#123;&#125;,&#125;); Store ë“±ë¡ Vue 2 ì—ì„œ Store ë“±ë¡","text":"ë¼ì´ë¸ŒëŸ¬ë¦¬ ë“±ë¡# Vue 3 npm install vuex --save# Vue 2npm install vuex@3.6.2 --save Store ìƒì„± Vue 2 ì—ì„œ Store ìƒì„± const Store = new Vuex.Store(&#123; state: &#123;&#125;, getters: &#123;&#125;, mutations: &#123;&#125;, actions: &#123;&#125;, modules: &#123;&#125;,&#125;) Vue 3 ì—ì„œ Store ìƒì„± import &#123; createStore &#125; from &quot;vuex&quot;;export default createStore(&#123; state: &#123;&#125;, getters: &#123;&#125;, mutations: &#123;&#125;, actions: &#123;&#125;, modules: &#123;&#125;,&#125;); Store ë“±ë¡ Vue 2 ì—ì„œ Store ë“±ë¡ import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;import store from &quot;./store/store&quot;;new Vue(&#123; el: &#x27;#app&#x27;, store, render: h =&gt; h(App)&#125;) Vue 3 ì—ì„œ Store ë“±ë¡ import &#123; createApp &#125; from &quot;vue&quot;;import App from &quot;./App.vue&quot;;import router from &quot;./router&quot;;import store from &quot;./store&quot;;createApp(App).use(store).use(router).mount(&quot;#app&quot;);","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue3","slug":"Frontend/Vue3","permalink":"https://ckck803.github.io/categories/Frontend/Vue3/"}],"tags":[]},{"title":"Vue - ì‹œì‘í•˜ê¸°","slug":"vue/vue/vue-start","date":"2024-01-16T11:10:40.000Z","updated":"2024-11-23T16:52:52.617Z","comments":true,"path":"2024/01/16/vue/vue/vue-start/","link":"","permalink":"https://ckck803.github.io/2024/01/16/vue/vue/vue-start/","excerpt":"ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜npm install vue -g í”„ë¡œì íŠ¸ ìƒì„±vue create &lt;ìƒì„±í•  í”„ë¡œì íŠ¸ ì´ë¦„&gt; Vue CLI v5.0.8? Please pick a preset: (Use arrow keys)â¯ Default ([Vue 3] babel, eslint) Default ([Vue 2] babel, eslint) Manually select features Vue CLI v5.0.8? Please pick a preset: Manually select features? Check the features needed for your project: (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection, and &lt;enter&gt; to proceed) â—‰ Babel â—‰ TypeScript â—¯ Progressive Web App (PWA) Supportâ¯â—‰ Router â—‰ Vuex â—¯ CSS Pre-processors â—‰ Linter / Formatter â—¯ Unit Testing â—¯ E2E Testing Vue CLI v5.0.8? Please pick a preset: Manually select features? Check the features needed for your project: Babel, TS, Router, Vuex, Linter? Choose a version of Vue.js that you want to start the project with 3.x? Use class-style component syntax? No? Use Babel alongside TypeScript (required for modern mode, auto-detected polyfills, transpiling JSX)? Yes? Use history mode for router? (Requires proper server setup for index fallback in production) Yes? Pick a linter / formatter config: Prettier? Pick additional lint features: Lint on save? Where do you prefer placing config for Babel, ESLint, etc.? In dedicated config files? Save this as a preset for future projects? (y/N) n","text":"ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜npm install vue -g í”„ë¡œì íŠ¸ ìƒì„±vue create &lt;ìƒì„±í•  í”„ë¡œì íŠ¸ ì´ë¦„&gt; Vue CLI v5.0.8? Please pick a preset: (Use arrow keys)â¯ Default ([Vue 3] babel, eslint) Default ([Vue 2] babel, eslint) Manually select features Vue CLI v5.0.8? Please pick a preset: Manually select features? Check the features needed for your project: (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection, and &lt;enter&gt; to proceed) â—‰ Babel â—‰ TypeScript â—¯ Progressive Web App (PWA) Supportâ¯â—‰ Router â—‰ Vuex â—¯ CSS Pre-processors â—‰ Linter / Formatter â—¯ Unit Testing â—¯ E2E Testing Vue CLI v5.0.8? Please pick a preset: Manually select features? Check the features needed for your project: Babel, TS, Router, Vuex, Linter? Choose a version of Vue.js that you want to start the project with 3.x? Use class-style component syntax? No? Use Babel alongside TypeScript (required for modern mode, auto-detected polyfills, transpiling JSX)? Yes? Use history mode for router? (Requires proper server setup for index fallback in production) Yes? Pick a linter / formatter config: Prettier? Pick additional lint features: Lint on save? Where do you prefer placing config for Babel, ESLint, etc.? In dedicated config files? Save this as a preset for future projects? (y/N) n","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue","slug":"Frontend/Vue","permalink":"https://ckck803.github.io/categories/Frontend/Vue/"}],"tags":[]},{"title":"Spring Security - SecurityContextRepository","slug":"spring/spring-security/security/SecurityContextRepository","date":"2024-01-16T11:10:40.000Z","updated":"2024-12-21T13:26:29.744Z","comments":true,"path":"2024/01/16/spring/spring-security/security/SecurityContextRepository/","link":"","permalink":"https://ckck803.github.io/2024/01/16/spring/spring-security/security/SecurityContextRepository/","excerpt":"SecurityContextRepository SecurityContextRepository ëŠ” SecurityContext ë¥¼ ì €ì¥í•˜ê³  ê²€ìƒ‰í•˜ê¸° ìœ„í•œ ì €ì¥ì†Œì…ë‹ˆë‹¤. Spring Security ì—ì„œëŠ” ì¸ì¦ í›„ ìƒì„±ëœ SecurityContext ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ SecurityContextRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. SecurityContextRepository.javapublic interface SecurityContextRepository &#123; @Deprecated SecurityContext loadContext(HttpRequestResponseHolder requestResponseHolder); default DeferredSecurityContext loadDeferredContext(HttpServletRequest request) &#123; Supplier&lt;SecurityContext&gt; supplier = () -&gt; loadContext(new HttpRequestResponseHolder(request, null)); return new SupplierDeferredSecurityContext(SingletonSupplier.of(supplier), SecurityContextHolder.getContextHolderStrategy()); &#125; // ë³€ê²½ëœ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì£¼ë¡œ ì‚¬ìš©ìê°€ ì¸ì¦ë˜ë©´ ìƒˆë¡œìš´ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. void saveContext(SecurityContext context, HttpServletRequest request, HttpServletResponse response); // í˜„ì¬ ìš”ì²­ì—ì„œ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. boolean containsContext(HttpServletRequest request);&#125; public interface SecurityContextRepository &#123; @Deprecated SecurityContext loadContext(HttpRequestResponseHolder requestResponseHolder); default DeferredSecurityContext loadDeferredContext(HttpServletRequest request) &#123; Supplier&lt;SecurityContext&gt; supplier = () -&gt; loadContext(new HttpRequestResponseHolder(request, null)); return new SupplierDeferredSecurityContext(SingletonSupplier.of(supplier), SecurityContextHolder.getContextHolderStrategy()); &#125; // ë³€ê²½ëœ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì£¼ë¡œ ì‚¬ìš©ìê°€ ì¸ì¦ë˜ë©´ ìƒˆë¡œìš´ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. void saveContext(SecurityContext context, HttpServletRequest request, HttpServletResponse response); // í˜„ì¬ ìš”ì²­ì—ì„œ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. boolean containsContext(HttpServletRequest request);&#125; Session ì— ì €ì¥ - HttpSessionSecurityContextRepository HttpSessionSecurityContextRepository ëŠ” Session ì— SecurityContext ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. @Overridepublic void saveContext(SecurityContext context, HttpServletRequest request, HttpServletResponse response) &#123; SaveContextOnUpdateOrErrorResponseWrapper responseWrapper = WebUtils.getNativeResponse(response, SaveContextOnUpdateOrErrorResponseWrapper.class); if (responseWrapper == null) &#123; saveContextInHttpSession(context, request); return; &#125; responseWrapper.saveContext(context);&#125;private void saveContextInHttpSession(SecurityContext context, HttpServletRequest request) &#123; if (isTransient(context) || isTransient(context.getAuthentication())) &#123; return; &#125; SecurityContext emptyContext = generateNewContext(); if (emptyContext.equals(context)) &#123; HttpSession session = request.getSession(false); removeContextFromSession(context, session); &#125; else &#123; boolean createSession = this.allowSessionCreation; HttpSession session = request.getSession(createSession); setContextInSession(context, session); &#125;&#125; Request ê°ì²´ì— ì €ì¥ - RequestAttributeSecurityContextRepository","text":"SecurityContextRepository SecurityContextRepository ëŠ” SecurityContext ë¥¼ ì €ì¥í•˜ê³  ê²€ìƒ‰í•˜ê¸° ìœ„í•œ ì €ì¥ì†Œì…ë‹ˆë‹¤. Spring Security ì—ì„œëŠ” ì¸ì¦ í›„ ìƒì„±ëœ SecurityContext ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ SecurityContextRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. SecurityContextRepository.javapublic interface SecurityContextRepository &#123; @Deprecated SecurityContext loadContext(HttpRequestResponseHolder requestResponseHolder); default DeferredSecurityContext loadDeferredContext(HttpServletRequest request) &#123; Supplier&lt;SecurityContext&gt; supplier = () -&gt; loadContext(new HttpRequestResponseHolder(request, null)); return new SupplierDeferredSecurityContext(SingletonSupplier.of(supplier), SecurityContextHolder.getContextHolderStrategy()); &#125; // ë³€ê²½ëœ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì£¼ë¡œ ì‚¬ìš©ìê°€ ì¸ì¦ë˜ë©´ ìƒˆë¡œìš´ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. void saveContext(SecurityContext context, HttpServletRequest request, HttpServletResponse response); // í˜„ì¬ ìš”ì²­ì—ì„œ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. boolean containsContext(HttpServletRequest request);&#125; public interface SecurityContextRepository &#123; @Deprecated SecurityContext loadContext(HttpRequestResponseHolder requestResponseHolder); default DeferredSecurityContext loadDeferredContext(HttpServletRequest request) &#123; Supplier&lt;SecurityContext&gt; supplier = () -&gt; loadContext(new HttpRequestResponseHolder(request, null)); return new SupplierDeferredSecurityContext(SingletonSupplier.of(supplier), SecurityContextHolder.getContextHolderStrategy()); &#125; // ë³€ê²½ëœ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì£¼ë¡œ ì‚¬ìš©ìê°€ ì¸ì¦ë˜ë©´ ìƒˆë¡œìš´ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. void saveContext(SecurityContext context, HttpServletRequest request, HttpServletResponse response); // í˜„ì¬ ìš”ì²­ì—ì„œ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. boolean containsContext(HttpServletRequest request);&#125; Session ì— ì €ì¥ - HttpSessionSecurityContextRepository HttpSessionSecurityContextRepository ëŠ” Session ì— SecurityContext ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. @Overridepublic void saveContext(SecurityContext context, HttpServletRequest request, HttpServletResponse response) &#123; SaveContextOnUpdateOrErrorResponseWrapper responseWrapper = WebUtils.getNativeResponse(response, SaveContextOnUpdateOrErrorResponseWrapper.class); if (responseWrapper == null) &#123; saveContextInHttpSession(context, request); return; &#125; responseWrapper.saveContext(context);&#125;private void saveContextInHttpSession(SecurityContext context, HttpServletRequest request) &#123; if (isTransient(context) || isTransient(context.getAuthentication())) &#123; return; &#125; SecurityContext emptyContext = generateNewContext(); if (emptyContext.equals(context)) &#123; HttpSession session = request.getSession(false); removeContextFromSession(context, session); &#125; else &#123; boolean createSession = this.allowSessionCreation; HttpSession session = request.getSession(createSession); setContextInSession(context, session); &#125;&#125; Request ê°ì²´ì— ì €ì¥ - RequestAttributeSecurityContextRepository RequestAttributeSecurityContextRepository ëŠ” Request ê°ì²´ì— SecurityContext ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤. RequestAttributeSecurityContextRepository ëŠ” ìš”ì²­ ì •ë³´ì— SecurityContext ë¥¼ ì €ì¥í•˜ê¸° ë•Œë¬¸ì— ìš”ì²­ì´ ëë‚˜ê²Œ ë˜ë©´ SecurityContext ì •ë³´ë„ ê°™ì´ ì‚¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤. @Overridepublic void saveContext(SecurityContext context, HttpServletRequest request, HttpServletResponse response) &#123; request.setAttribute(this.requestAttributeName, context);&#125; ì—¬ëŸ¬ê°œì˜ Request ê°ì²´ì— ì €ì¥ - DelegatingSecurityContextRepositoryì—¬ëŸ¬ê°œì˜ SecurityContextRepository ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Spring Security ì—ì„œëŠ” DelegatingSecurityContextRepository ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ì—¬ëŸ¬ê°œì˜ SecurityContextRepository ê°ì²´ë¥¼ ì¸ìë¡œ í•´ DelegatingSecurityContextRepository ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. @Beanpublic SecurityContextRepository securityContextRepository() &#123; return new DelegatingSecurityContextRepository( new RequestAttributeSecurityContextRepository(), new HttpSessionSecurityContextRepository() );&#125; DelegatingSecurityContextRepository ë˜í•œ ê°™ì€ SecurityContextRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ìƒì„±ëœ êµ¬í˜„ì²´ë¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì˜ ì°¨ì´ëŠ” ì—†ìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ë‚´ë¶€ì ìœ¼ë¡œ ì—¬ëŸ¬ê°œì˜ SecurityContextRepository ë¥¼ í•œë²ˆì”© ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ì‹ìœ¼ë¡œ ë¡œì§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. @Overridepublic SecurityContext loadContext(HttpRequestResponseHolder requestResponseHolder) &#123; SecurityContext result = null; for (SecurityContextRepository delegate : this.delegates) &#123; SecurityContext delegateResult = delegate.loadContext(requestResponseHolder); if (result == null || delegate.containsContext(requestResponseHolder.getRequest())) &#123; result = delegateResult; &#125; &#125; return result;&#125;","categories":[],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://ckck803.github.io/tags/Spring-Boot/"},{"name":"Spring Security","slug":"Spring-Security","permalink":"https://ckck803.github.io/tags/Spring-Security/"}]},{"title":"Spring Security - SecurityContextPersistenceFilter ì™€ SecurityContextHolderFilter","slug":"spring/spring-security/security/filter/SecurityContextPersistenceFilter","date":"2024-01-16T11:10:40.000Z","updated":"2024-02-26T16:27:49.415Z","comments":true,"path":"2024/01/16/spring/spring-security/security/filter/SecurityContextPersistenceFilter/","link":"","permalink":"https://ckck803.github.io/2024/01/16/spring/spring-security/security/filter/SecurityContextPersistenceFilter/","excerpt":"SecurityContextPersistenceFilterSecurityContextPersistenceFilter ì—ì„œëŠ” ì¸ì¦ì„ ìœ„í•´ SecurityContextRepository ì— ì €ì¥ëœ SecurityContext ì •ë³´ë¥¼ ê°€ì ¸ì™€ ì¸ì¦ ì²˜ë¦¬ë¥¼ í•˜ê³  SecurityContext ì •ë³´ë¥¼ SecurityContextRepository ì— ì €ì¥í•©ë‹ˆë‹¤. SecurityContextHolderFilterSecurityContextHolderFilter ì—ì„œëŠ” ì¸ì¦ì„ ìœ„í•´ SecurityContextRepository ì— ì €ì¥ëœ SecurityContext ì •ë³´ë¥¼ ê°€ì ¸ì™€ ì¸ì¦ ì²˜ë¦¬ë¥¼ í•˜ì§€ë§Œ SecurityContextPersistenceFilter ì™€ëŠ” ë‹¤ë¥´ê²Œ SecurityContextRepository ì— ì €ì¥í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.","text":"SecurityContextPersistenceFilterSecurityContextPersistenceFilter ì—ì„œëŠ” ì¸ì¦ì„ ìœ„í•´ SecurityContextRepository ì— ì €ì¥ëœ SecurityContext ì •ë³´ë¥¼ ê°€ì ¸ì™€ ì¸ì¦ ì²˜ë¦¬ë¥¼ í•˜ê³  SecurityContext ì •ë³´ë¥¼ SecurityContextRepository ì— ì €ì¥í•©ë‹ˆë‹¤. SecurityContextHolderFilterSecurityContextHolderFilter ì—ì„œëŠ” ì¸ì¦ì„ ìœ„í•´ SecurityContextRepository ì— ì €ì¥ëœ SecurityContext ì •ë³´ë¥¼ ê°€ì ¸ì™€ ì¸ì¦ ì²˜ë¦¬ë¥¼ í•˜ì§€ë§Œ SecurityContextPersistenceFilter ì™€ëŠ” ë‹¤ë¥´ê²Œ SecurityContextRepository ì— ì €ì¥í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Filter","slug":"Spring/Spring-Security/Filter","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Filter/"}],"tags":[]},{"title":"Django - App ìƒì„±í•˜ê¸°","slug":"django/django/create_app","date":"2023-12-09T11:47:30.000Z","updated":"2024-11-28T13:59:29.475Z","comments":true,"path":"2023/12/09/django/django/create_app/","link":"","permalink":"https://ckck803.github.io/2023/12/09/django/django/create_app/","excerpt":"ëª©ì°¨ Django - App ìƒì„±í•˜ê¸° Django - ì¥ê³  ì‹œì‘í•˜ê¸° ì¥ê³  ì•± ë§Œë“¤ê¸°ì¥ê³  App ìƒì„±ì€ manage.py ê°€ ìˆëŠ” í”„ë¡œì íŠ¸ í´ë”ì—ì„œ startapp ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. startapp ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ hello_world ë¼ëŠ” ì´ë¦„ì˜ ì•±ì„ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. python manage.py startapp hello_world view.py ì‘ì„±í•˜ê¸°ì•± í´ë” ë‚´ì— views.py íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í•´ì¤ë‹ˆë‹¤. from django.http import HttpResponsedef hello(request): return HttpResponse(&quot;Hello, world. You&#x27;re at the hello_world index.&quot;)# Create your views here.] url.py ì‘ì„±í•˜ê¸°","text":"ëª©ì°¨ Django - App ìƒì„±í•˜ê¸° Django - ì¥ê³  ì‹œì‘í•˜ê¸° ì¥ê³  ì•± ë§Œë“¤ê¸°ì¥ê³  App ìƒì„±ì€ manage.py ê°€ ìˆëŠ” í”„ë¡œì íŠ¸ í´ë”ì—ì„œ startapp ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. startapp ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ hello_world ë¼ëŠ” ì´ë¦„ì˜ ì•±ì„ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. python manage.py startapp hello_world view.py ì‘ì„±í•˜ê¸°ì•± í´ë” ë‚´ì— views.py íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í•´ì¤ë‹ˆë‹¤. from django.http import HttpResponsedef hello(request): return HttpResponse(&quot;Hello, world. You&#x27;re at the hello_world index.&quot;)# Create your views here.] url.py ì‘ì„±í•˜ê¸°í”„ë¡œì íŠ¸ í´ë”ë‚´ url.py íŒŒì¼ì„ ì—´ì–´ /hello ê²½ë¡œì™€ í•´ë‹¹ ê²½ë¡œë¡œ ë“¤ì–´ì™”ì„ë•Œ ë³´ì—¬ì¤„ view ë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤. from hello_world.views import hellourlpatterns = [ path(&#x27;admin/&#x27;, admin.site.urls), path(&#x27;hello/&#x27;, hello),] ì„œë¹„ìŠ¤ í™•ì¸í•˜ê¸°localhost:8080/hello ë¡œ ì ‘ì†í•˜ë©´ ìœ„ view.py ì—ì„œ ì‘ì„±í•œ ë‚´ìš©ì´ ë³´ì´ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - ì¥ê³  ì‹œì‘í•˜ê¸°","slug":"django/django/start_django","date":"2023-12-09T11:47:30.000Z","updated":"2024-11-28T13:59:29.549Z","comments":true,"path":"2023/12/09/django/django/start_django/","link":"","permalink":"https://ckck803.github.io/2023/12/09/django/django/start_django/","excerpt":"ëª©ì°¨ Django - App ìƒì„±í•˜ê¸° Django - ì¥ê³  ì‹œì‘í•˜ê¸° ì¥ê³  ì„¤ì¹˜í•˜ê¸°pip install django ì¥ê³  í”„ë¡œì íŠ¸ ìƒì„±í•˜ê¸° - django-admindjango ë¥¼ ì„¤ì¹˜í•˜ë©´ django-admin ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì¹˜ëœ django-admin ì— startproject ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ìƒˆë¡­ê²Œ ì¥ê³  í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. django-admin startproject mysite ì¥ê³  ì„œë²„ ì‹¤í–‰í•˜ê¸° - manage.pyìƒˆë¡œìš´ ì¥ê³  í”„ë¡œì íŠ¸ì— ë“¤ì–´ê°€ë©´ manage.py íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤. runserver ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ì¥ê³  ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ Django - App ìƒì„±í•˜ê¸° Django - ì¥ê³  ì‹œì‘í•˜ê¸° ì¥ê³  ì„¤ì¹˜í•˜ê¸°pip install django ì¥ê³  í”„ë¡œì íŠ¸ ìƒì„±í•˜ê¸° - django-admindjango ë¥¼ ì„¤ì¹˜í•˜ë©´ django-admin ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì¹˜ëœ django-admin ì— startproject ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ìƒˆë¡­ê²Œ ì¥ê³  í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. django-admin startproject mysite ì¥ê³  ì„œë²„ ì‹¤í–‰í•˜ê¸° - manage.pyìƒˆë¡œìš´ ì¥ê³  í”„ë¡œì íŠ¸ì— ë“¤ì–´ê°€ë©´ manage.py íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤. runserver ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ì¥ê³  ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. python manage.py runserver","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"React Query - React Devtools ì‚¬ìš©í•˜ê¸°","slug":"react/react-query/react-query-devtools","date":"2023-10-22T11:10:40.000Z","updated":"2024-11-23T16:47:32.419Z","comments":true,"path":"2023/10/22/react/react-query/react-query-devtools/","link":"","permalink":"https://ckck803.github.io/2023/10/22/react/react-query/react-query-devtools/","excerpt":"ëª©ì°¨ React Query - ìºì‹± ë¼ì´í”„ ì‚¬ì´í´ React Query - React Devtools ì‚¬ìš©í•˜ê¸° React Query - ì‹œì‘í•˜ê¸° ì˜ì¡´ì„± ì¶”ê°€$ npm i @tanstack/react-query-devtools# or$ yarn add @tanstack/react-query-devtools ReactQueryDevtoolsimport React from &#x27;react&#x27;import ReactDOM from &#x27;react-dom/client&#x27;import App from &#x27;./App.tsx&#x27;import &#123; ReactQueryDevtools &#125; from &#x27;@tanstack/react-query-devtools&#x27;import &#123;QueryClient, QueryClientProvider &#125; from &#x27;@tanstack/react-query&#x27;const queryClient = new QueryClient()ReactDOM.createRoot(document.getElementById(&#x27;root&#x27;)!).render( &lt;React.StrictMode&gt; &lt;QueryClientProvider client=&#123;queryClient&#125;&gt; &lt;App /&gt; &lt;ReactQueryDevtools initialIsOpen=&#123;false&#125; /&gt; &lt;/QueryClientProvider&gt; &lt;/React.StrictMode&gt;,)","text":"ëª©ì°¨ React Query - ìºì‹± ë¼ì´í”„ ì‚¬ì´í´ React Query - React Devtools ì‚¬ìš©í•˜ê¸° React Query - ì‹œì‘í•˜ê¸° ì˜ì¡´ì„± ì¶”ê°€$ npm i @tanstack/react-query-devtools# or$ yarn add @tanstack/react-query-devtools ReactQueryDevtoolsimport React from &#x27;react&#x27;import ReactDOM from &#x27;react-dom/client&#x27;import App from &#x27;./App.tsx&#x27;import &#123; ReactQueryDevtools &#125; from &#x27;@tanstack/react-query-devtools&#x27;import &#123;QueryClient, QueryClientProvider &#125; from &#x27;@tanstack/react-query&#x27;const queryClient = new QueryClient()ReactDOM.createRoot(document.getElementById(&#x27;root&#x27;)!).render( &lt;React.StrictMode&gt; &lt;QueryClientProvider client=&#123;queryClient&#125;&gt; &lt;App /&gt; &lt;ReactQueryDevtools initialIsOpen=&#123;false&#125; /&gt; &lt;/QueryClientProvider&gt; &lt;/React.StrictMode&gt;,)","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"React Query","slug":"Frontend/React-Query","permalink":"https://ckck803.github.io/categories/Frontend/React-Query/"}],"tags":[]},{"title":"React Query - ìºì‹± ë¼ì´í”„ ì‚¬ì´í´","slug":"react/react-query/react-query-cache-stale","date":"2023-10-22T11:10:40.000Z","updated":"2024-11-23T16:47:28.904Z","comments":true,"path":"2023/10/22/react/react-query/react-query-cache-stale/","link":"","permalink":"https://ckck803.github.io/2023/10/22/react/react-query/react-query-cache-stale/","excerpt":"ëª©ì°¨ React Query - ìºì‹± ë¼ì´í”„ ì‚¬ì´í´ React Query - React Devtools ì‚¬ìš©í•˜ê¸° React Query - ì‹œì‘í•˜ê¸° cache ì™€ stale ì„¤ì •const queryClient = new QueryClient(&#123; defaultOptions: &#123; queries: &#123; staleTime: 1000 * 60, cacheTime: 1000 * 60 * 5, &#125; &#125;,&#125;);const App = (&#123; Component, pageProps &#125;: AppProps) =&gt; &#123; return ( &lt;QueryClientProvider client=&#123;queryClient&#125;&gt; &lt;Component &#123;...pageProps&#125; /&gt; &lt;/QueryClientProvider&gt; );&#125;; cacheReact Query ëŠ” ì„¤ì •í•œ cacheTime ë§Œí¼ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ ë†“ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì´ì•¼ê¸° í•˜ìë©´ React Query ì—ì„œì˜ Cache ëŠ” QueryCache ê°ì²´ì˜ queries ë°°ì—´ê³¼ queriesInMap ê°ì²´ì˜ Query ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. cache ë¼ì´í”„ ì‚¬ì´í´ - fresh ì™€ stalestale ì€ React Query ì—ì„œ cache ì— ì €ì¥ëœ ë°ì´í„° ìƒíƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. cache ì— ì €ì¥ëœ ë°ì´í„°ê°€ staleTime ë§Œí¼ì€ fresh í•œ ìƒíƒœë¡œ ìˆë‹¤ê°€ ê·¸ í›„ì—ëŠ” stale ìƒíƒœë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤. stale ìƒíƒœì˜ ë°ì´í„°ëŠ” cache ì— ì˜¤ë«ë™ì•ˆ ì €ì¥ë¼ ìˆì–´ refetch ê°€ í•„ìš”í•œ ìƒíƒœì„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. React Query ì—ì„œëŠ” stale ìƒíƒœì˜ ë°ì´í„°ê°€ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ refetching ì´ ì¼ì–´ë‚˜ë„ë¡ í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ React Query - ìºì‹± ë¼ì´í”„ ì‚¬ì´í´ React Query - React Devtools ì‚¬ìš©í•˜ê¸° React Query - ì‹œì‘í•˜ê¸° cache ì™€ stale ì„¤ì •const queryClient = new QueryClient(&#123; defaultOptions: &#123; queries: &#123; staleTime: 1000 * 60, cacheTime: 1000 * 60 * 5, &#125; &#125;,&#125;);const App = (&#123; Component, pageProps &#125;: AppProps) =&gt; &#123; return ( &lt;QueryClientProvider client=&#123;queryClient&#125;&gt; &lt;Component &#123;...pageProps&#125; /&gt; &lt;/QueryClientProvider&gt; );&#125;; cacheReact Query ëŠ” ì„¤ì •í•œ cacheTime ë§Œí¼ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ ë†“ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì´ì•¼ê¸° í•˜ìë©´ React Query ì—ì„œì˜ Cache ëŠ” QueryCache ê°ì²´ì˜ queries ë°°ì—´ê³¼ queriesInMap ê°ì²´ì˜ Query ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. cache ë¼ì´í”„ ì‚¬ì´í´ - fresh ì™€ stalestale ì€ React Query ì—ì„œ cache ì— ì €ì¥ëœ ë°ì´í„° ìƒíƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. cache ì— ì €ì¥ëœ ë°ì´í„°ê°€ staleTime ë§Œí¼ì€ fresh í•œ ìƒíƒœë¡œ ìˆë‹¤ê°€ ê·¸ í›„ì—ëŠ” stale ìƒíƒœë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤. stale ìƒíƒœì˜ ë°ì´í„°ëŠ” cache ì— ì˜¤ë«ë™ì•ˆ ì €ì¥ë¼ ìˆì–´ refetch ê°€ í•„ìš”í•œ ìƒíƒœì„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. React Query ì—ì„œëŠ” stale ìƒíƒœì˜ ë°ì´í„°ê°€ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ refetching ì´ ì¼ì–´ë‚˜ë„ë¡ í•©ë‹ˆë‹¤.","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"React Query","slug":"Frontend/React-Query","permalink":"https://ckck803.github.io/categories/Frontend/React-Query/"}],"tags":[]},{"title":"React Query - ì‹œì‘í•˜ê¸°","slug":"react/react-query/react-query-start","date":"2023-10-22T11:10:40.000Z","updated":"2024-11-23T16:47:35.741Z","comments":true,"path":"2023/10/22/react/react-query/react-query-start/","link":"","permalink":"https://ckck803.github.io/2023/10/22/react/react-query/react-query-start/","excerpt":"ëª©ì°¨ React Query - ìºì‹± ë¼ì´í”„ ì‚¬ì´í´ React Query - React Devtools ì‚¬ìš©í•˜ê¸° React Query - ì‹œì‘í•˜ê¸° ì°¸ê³  ê³µì‹ë¬¸ì„œ https://tanstack.com/query/v4/docs/react/quick-start ì˜ì¡´ì„± ì¶”ê°€$ npm i @tanstack/react-query# or$ yarn add @tanstack/react-query Providerimport React from &quot;react&quot;;import ReactDOM from &quot;react-dom/client&quot;;import App from &quot;./App.tsx&quot;;import &#123; QueryClient, QueryClientProvider &#125; from &quot;@tanstack/react-query&quot;;const queryClient = new QueryClient();ReactDOM.createRoot(document.getElementById(&quot;root&quot;)!).render( &lt;React.StrictMode&gt; &lt;QueryClientProvider client=&#123;queryClient&#125;&gt; &lt;App /&gt; &lt;/QueryClientProvider&gt; &lt;/React.StrictMode&gt;); useQuery","text":"ëª©ì°¨ React Query - ìºì‹± ë¼ì´í”„ ì‚¬ì´í´ React Query - React Devtools ì‚¬ìš©í•˜ê¸° React Query - ì‹œì‘í•˜ê¸° ì°¸ê³  ê³µì‹ë¬¸ì„œ https://tanstack.com/query/v4/docs/react/quick-start ì˜ì¡´ì„± ì¶”ê°€$ npm i @tanstack/react-query# or$ yarn add @tanstack/react-query Providerimport React from &quot;react&quot;;import ReactDOM from &quot;react-dom/client&quot;;import App from &quot;./App.tsx&quot;;import &#123; QueryClient, QueryClientProvider &#125; from &quot;@tanstack/react-query&quot;;const queryClient = new QueryClient();ReactDOM.createRoot(document.getElementById(&quot;root&quot;)!).render( &lt;React.StrictMode&gt; &lt;QueryClientProvider client=&#123;queryClient&#125;&gt; &lt;App /&gt; &lt;/QueryClientProvider&gt; &lt;/React.StrictMode&gt;); useQueryimport React from &quot;react&quot;;import axios from &quot;axios&quot;;import &#123; useQuery &#125; from &quot;@tanstack/react-query&quot;;const App = () =&gt; &#123; const &#123; isLoading, error, data &#125; = useQuery(&#123; queryKey: [&quot;repoData&quot;], queryFn: () =&gt; axios .get(&quot;https://api.github.com/repos/TanStack/query&quot;) .then((res) =&gt; res.data), &#125;); if (isLoading) return &quot;Loading...&quot;; if (error) return &quot;An error has occurred: &quot; + error.message; return ( &lt;div&gt; &lt;h1&gt;&#123;data.name&#125;&lt;/h1&gt; &lt;p&gt;&#123;data.description&#125;&lt;/p&gt; &lt;strong&gt;ğŸ‘€ &#123;data.subscribers_count&#125;&lt;/strong&gt;&#123;&quot; &quot;&#125; &lt;strong&gt;âœ¨ &#123;data.stargazers_count&#125;&lt;/strong&gt;&#123;&quot; &quot;&#125; &lt;strong&gt;ğŸ´ &#123;data.forks_count&#125;&lt;/strong&gt; &lt;/div&gt; );&#125;;export default App;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"React Query","slug":"Frontend/React-Query","permalink":"https://ckck803.github.io/categories/Frontend/React-Query/"}],"tags":[]},{"title":"JPA - ë”í‹° ì²´í‚¹ê³¼ ì—…ë°ì´íŠ¸ ê·¸ë¦¬ê³  ë²Œí¬ ì—°ì‚°","slug":"jpa/jpa-update","date":"2023-09-07T19:31:46.000Z","updated":"2024-11-28T13:59:26.262Z","comments":true,"path":"2023/09/08/jpa/jpa-update/","link":"","permalink":"https://ckck803.github.io/2023/09/08/jpa/jpa-update/","excerpt":"JPA ì—ì„œì˜ ì—…ë°ì´íŠ¸ - ë”í‹° ì²´í‚¹ Entity ì— ëŒ€í•œ ë”í‹° ì²´í‚¹ ì„ í†µí•œ ì—…ë°ì´íŠ¸ê°€ ì´ë¤„ì§‘ë‹ˆë‹¤. JPA ì—ì„œëŠ” Entity ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œê°€ ë³„ë„ë¡œ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. JPA ì—ì„œì˜ ì—…ë°ì´íŠ¸ëŠ” ì—”í‹°í‹° ë³€ê²½ ê³¼ ë”í‹° ì²´í‚¹ ì„ í†µí•´ ì—…ë°ì´íŠ¸ê°€ ì´ë¤„ì§‘ë‹ˆë‹¤. JPA ì—ì„œ ì—”í‹°í‹°ë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ” ë³€ê²½í•˜ê³ ì í•˜ëŠ” ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•œ í›„ í•´ë‹¹ ì—”í‹°í‹°ì˜ ê°’ì„ ë³€ê²½í•˜ë©´ íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•  ë•Œ ë³€ê²½ ê°ì§€(Dirty Checking) ê°€ ë™ì‘í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— UPDATE SQL ì´ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ Entity ì— ëŒ€í•œ ë³€ê²½ì„ ë°˜ì˜í•©ë‹ˆë‹¤. @Override@Transactionalpublic ItemDto.Response modifyItemPrice(Long id, ItemDto.Request itemDto) &#123; // 1. ë³€ê²½í•˜ê³ ì í•˜ëŠ” Entity ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. Optional&lt;Item&gt; optionalItem = itemRepository.findById(id); if (optionalItem.isPresent()) &#123; Item item = optionalItem.get(); // 2. Entity ì˜ ê°’ì„ ë³€ê²½í•©ë‹ˆë‹¤. item.updatePrice(itemDto.getPrice()); return ItemDto.Response.toDto(item); &#125; else &#123; throw new RuntimeException(&quot;Item not found&quot;); &#125;&#125; Update ì¿¼ë¦¬ë¬¸ ë°œìƒupdate item set item_type_id=?, modified_date=?, name=?, price=?, version=? where id=? and version=? ë”í‹°ì²´í¬ë¥¼ í†µí•œ ì—…ë°ì´íŠ¸ì˜ í•œê³„ë”í‹° ì²´í‚¹ì„ í†µí•œ ì—…ë°ì´íŠ¸ëŠ” ë³€ê²½ëœ Entity ê°œìˆ˜ë§Œí¼ Update ë¬¸ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë³€ê²½ëœ Entity ê°€ 100ê°œë¼ë©´ 100ë²ˆì˜ Update ë¬¸ì´ ì‹¤í–‰ë˜ëŠ” ë¬¸ì œì ì´ ìˆìŠµë‹ˆë‹¤.","text":"JPA ì—ì„œì˜ ì—…ë°ì´íŠ¸ - ë”í‹° ì²´í‚¹ Entity ì— ëŒ€í•œ ë”í‹° ì²´í‚¹ ì„ í†µí•œ ì—…ë°ì´íŠ¸ê°€ ì´ë¤„ì§‘ë‹ˆë‹¤. JPA ì—ì„œëŠ” Entity ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œê°€ ë³„ë„ë¡œ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. JPA ì—ì„œì˜ ì—…ë°ì´íŠ¸ëŠ” ì—”í‹°í‹° ë³€ê²½ ê³¼ ë”í‹° ì²´í‚¹ ì„ í†µí•´ ì—…ë°ì´íŠ¸ê°€ ì´ë¤„ì§‘ë‹ˆë‹¤. JPA ì—ì„œ ì—”í‹°í‹°ë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ” ë³€ê²½í•˜ê³ ì í•˜ëŠ” ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•œ í›„ í•´ë‹¹ ì—”í‹°í‹°ì˜ ê°’ì„ ë³€ê²½í•˜ë©´ íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•  ë•Œ ë³€ê²½ ê°ì§€(Dirty Checking) ê°€ ë™ì‘í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— UPDATE SQL ì´ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ Entity ì— ëŒ€í•œ ë³€ê²½ì„ ë°˜ì˜í•©ë‹ˆë‹¤. @Override@Transactionalpublic ItemDto.Response modifyItemPrice(Long id, ItemDto.Request itemDto) &#123; // 1. ë³€ê²½í•˜ê³ ì í•˜ëŠ” Entity ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. Optional&lt;Item&gt; optionalItem = itemRepository.findById(id); if (optionalItem.isPresent()) &#123; Item item = optionalItem.get(); // 2. Entity ì˜ ê°’ì„ ë³€ê²½í•©ë‹ˆë‹¤. item.updatePrice(itemDto.getPrice()); return ItemDto.Response.toDto(item); &#125; else &#123; throw new RuntimeException(&quot;Item not found&quot;); &#125;&#125; Update ì¿¼ë¦¬ë¬¸ ë°œìƒupdate item set item_type_id=?, modified_date=?, name=?, price=?, version=? where id=? and version=? ë”í‹°ì²´í¬ë¥¼ í†µí•œ ì—…ë°ì´íŠ¸ì˜ í•œê³„ë”í‹° ì²´í‚¹ì„ í†µí•œ ì—…ë°ì´íŠ¸ëŠ” ë³€ê²½ëœ Entity ê°œìˆ˜ë§Œí¼ Update ë¬¸ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë³€ê²½ëœ Entity ê°€ 100ê°œë¼ë©´ 100ë²ˆì˜ Update ë¬¸ì´ ì‹¤í–‰ë˜ëŠ” ë¬¸ì œì ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ JPA ì—ì„œëŠ” ë²Œí¬ ì—°ì‚°ì„ í†µí•´ í•œë²ˆì— ì—¬ëŸ¬ Entity ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ë²Œí¬ ì—°ì‚°ì„ í†µí•œ ì—…ë°ì´íŠ¸ë²Œí¬ ì—°ì‚°ì„ í†µí•œ ì—…ë°ì´íŠ¸ì˜ í•œê³„ë²Œí¬ ì—°ìƒì˜ ê²½ìš° JPA ë¥¼ í†µí•´ì„œ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ì‹ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— EntityManager ì—ì„œ ìºì‹±í•´ë†“ì€ ë°ì´í„°ì™€ DB ì— ì €ì¥ëœ ë°ì´í„°ì˜ ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"Service Discovery íŒ¨í„´","slug":"computer-science/network/ServiceDiscovery","date":"2023-06-30T14:16:32.000Z","updated":"2024-02-18T16:19:54.518Z","comments":true,"path":"2023/06/30/computer-science/network/ServiceDiscovery/","link":"","permalink":"https://ckck803.github.io/2023/06/30/computer-science/network/ServiceDiscovery/","excerpt":"ì°¸ê³  https://www.nginx.com/blog/service-discovery-in-a-microservices-architecture/ https:&#x2F;&#x2F;velog.io&#x2F;@hoonki&#x2F;ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤-íŒ¨í„´-ì„œë¹„ìŠ¤-ë””ìŠ¤ì»¤ë²„ë¦¬ Service Discovery íŒ¨í„´ì´ ë“±ì¥í•˜ê²Œ ëœ ë°°ê²½ê¸°ì¡´ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ê°œìˆ˜ì™€ IP ê°€ ê³ ì •ì ì´ì˜€ë˜ ì˜¨ í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ê³¼ ë‹¬ë¦¬ MSA í™˜ê²½ì—ì„œëŠ” Application ë“¤ì´ AutoScaling ì„ í•˜ë©´ì„œ ë™ì ìœ¼ë¡œ ì¤„ì—ˆë‹¤ê°€ ëŠ˜ì–´ë‚˜ë©´ì„œ IP ìì²´ë„ ë™ì ìœ¼ë¡œ ë°”ë€Œê²Œ ëìŠµë‹ˆë‹¤. Client ë‚˜ Gateway ì…ì¥ì—ì„œ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ë™ì ìœ¼ë¡œ ëŠ˜ì—ˆëŠ”ì§€ ì¤„ì—ˆëŠ”ì§€ì— ëŒ€í•œ íŒŒì•…ì„ í•˜ê¸°ê°€ ì–´ë ¤ìš´ ë¬¸ì œê°€ ìˆì—ˆê³  ê·¸ì— ë”°ë¥¸ LoadBalancing í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤. Service Discovery íŒ¨í„´ì—ì„œëŠ” Service EndPoint ë¥¼ ì¡°íšŒ ë° ê´€ë¦¬í•˜ê¸° ìœ„í•œ Service Registry ê°€ ìˆìŠµë‹ˆë‹¤. MSA ì˜ ê° ì„œë¹„ìŠ¤ë“¤ì€ Service Registry ì— ìì‹ ì˜ EndPoint ë“¤ì„ ë“±ë¡í•©ë‹ˆë‹¤. Service EndPoint ë¥¼ ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì— ë”°ë¼ ë‘ê°€ì§€ë¡œ ë‚˜ë‰˜ê²Œ ë©ë‹ˆë‹¤. ì²«ë²ˆì§¸ëŠ” Client-Side Discovery ë‘ë²ˆì§¸ëŠ” Server-Side Discovery íŒ¨í„´ì´ ìˆìŠµë‹ˆë‹¤. ì¶œì²˜: https://www.nginx.com/blog/service-discovery-in-a-microservices-architecture/ Client Side DiscoveryMSA ë‚´ í•œ ì„œë¹„ìŠ¤ê°€ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí• ë•Œ Service Registry ë¡œ ë¶€í„° EndPoint ë¥¼ ì¡°íšŒí•œ í›„ í•´ë‹¹ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.","text":"ì°¸ê³  https://www.nginx.com/blog/service-discovery-in-a-microservices-architecture/ https:&#x2F;&#x2F;velog.io&#x2F;@hoonki&#x2F;ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤-íŒ¨í„´-ì„œë¹„ìŠ¤-ë””ìŠ¤ì»¤ë²„ë¦¬ Service Discovery íŒ¨í„´ì´ ë“±ì¥í•˜ê²Œ ëœ ë°°ê²½ê¸°ì¡´ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ê°œìˆ˜ì™€ IP ê°€ ê³ ì •ì ì´ì˜€ë˜ ì˜¨ í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ê³¼ ë‹¬ë¦¬ MSA í™˜ê²½ì—ì„œëŠ” Application ë“¤ì´ AutoScaling ì„ í•˜ë©´ì„œ ë™ì ìœ¼ë¡œ ì¤„ì—ˆë‹¤ê°€ ëŠ˜ì–´ë‚˜ë©´ì„œ IP ìì²´ë„ ë™ì ìœ¼ë¡œ ë°”ë€Œê²Œ ëìŠµë‹ˆë‹¤. Client ë‚˜ Gateway ì…ì¥ì—ì„œ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ë™ì ìœ¼ë¡œ ëŠ˜ì—ˆëŠ”ì§€ ì¤„ì—ˆëŠ”ì§€ì— ëŒ€í•œ íŒŒì•…ì„ í•˜ê¸°ê°€ ì–´ë ¤ìš´ ë¬¸ì œê°€ ìˆì—ˆê³  ê·¸ì— ë”°ë¥¸ LoadBalancing í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤. Service Discovery íŒ¨í„´ì—ì„œëŠ” Service EndPoint ë¥¼ ì¡°íšŒ ë° ê´€ë¦¬í•˜ê¸° ìœ„í•œ Service Registry ê°€ ìˆìŠµë‹ˆë‹¤. MSA ì˜ ê° ì„œë¹„ìŠ¤ë“¤ì€ Service Registry ì— ìì‹ ì˜ EndPoint ë“¤ì„ ë“±ë¡í•©ë‹ˆë‹¤. Service EndPoint ë¥¼ ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì— ë”°ë¼ ë‘ê°€ì§€ë¡œ ë‚˜ë‰˜ê²Œ ë©ë‹ˆë‹¤. ì²«ë²ˆì§¸ëŠ” Client-Side Discovery ë‘ë²ˆì§¸ëŠ” Server-Side Discovery íŒ¨í„´ì´ ìˆìŠµë‹ˆë‹¤. ì¶œì²˜: https://www.nginx.com/blog/service-discovery-in-a-microservices-architecture/ Client Side DiscoveryMSA ë‚´ í•œ ì„œë¹„ìŠ¤ê°€ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí• ë•Œ Service Registry ë¡œ ë¶€í„° EndPoint ë¥¼ ì¡°íšŒí•œ í›„ í•´ë‹¹ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì¶œì²˜: https://www.nginx.com/blog/service-discovery-in-a-microservices-architecture/ Server Side DiscoveryServer Side Discovery íŒ¨í„´ì€ ê¸°ì¡´ Client Side Discovery ì™€ëŠ” ë‹¤ë¥´ê²Œ Service Registry ì•ì— Load Balancer ë¥¼ ë‘ëŠ” í˜•íƒœë¥¼ ë„ê³  ìˆìŠµë‹ˆë‹¤. Server Side Discovery ëŠ” Client Side Discovery ì™€ ë‹¤ë¥´ê²Œ ê° ì„œë¹„ìŠ¤ê°„ì˜ í˜¸ì¶œì‹œì—ëŠ” Load Balancer ë¥¼ í†µí•´ í˜¸ì¶œì„ í•˜ê²Œ ë˜ê³  Load Balancer ê°€ Service Registry ì— ë“±ë¡ëœ EndPoint ë“¤ì„ í™•ì¸í•œ í›„ ë¼ìš°íŒ…í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. Server Side Discovery íŒ¨í„´ì˜ ì¥ì ì€ ê°ê°ì˜ ì„œë¹„ìŠ¤ ë“¤ì—ê²Œ DNS ë¥¼ ë¶€ì—¬í•´ Domain ì´ë¦„ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆê³  Client Side Discovery ì™€ëŠ” ë‹¬ë¦¬ ì„œë¹„ìŠ¤ í˜¸ì¶œì— Load Balancer ë¥¼ ê±°ì³ì•¼ í•˜ëŠ” ë¬¸ì œê°€ ìˆì–´ Network Hop ì´ ëŠ˜ì–´ë‚˜ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” Server Side Discovery ë¥¼ ì œê³µí•©ë‹ˆë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"}],"tags":[]},{"title":"Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸°","slug":"spring/spring-cloud/service-discovery/spring-cloud-eureka-client","date":"2023-06-29T18:31:31.000Z","updated":"2024-02-26T15:34:43.596Z","comments":true,"path":"2023/06/30/spring/spring-cloud/service-discovery/spring-cloud-eureka-client/","link":"","permalink":"https://ckck803.github.io/2023/06/30/spring/spring-cloud/service-discovery/spring-cloud-eureka-client/","excerpt":"ëª©ì°¨ Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) ì°¸ê³  https://cloud.spring.io/spring-cloud-netflix/reference/html/ https://coe.gitbook.io/guide/service-discovery/eureka Service ë“±ë¡í•˜ê¸°implementation &#x27;org.springframework.cloud:spring-cloud-starter-netflix-eureka-client&#x27; @EnableDiscoveryClient@SpringBootApplication@EnableDiscoveryClientpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125;&#125; Eureka ì„œë²„ì— ë“±ë¡ì„ ìœ„í•œ Properties ì„¤ì • ì¶”ê°€eureka.client.register-with-eureka ê°’ì„ true ë¡œ ì¤Œìœ¼ë¡œì¨ Eureka ì„œë²„ì— ë“±ë¡í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) ì°¸ê³  https://cloud.spring.io/spring-cloud-netflix/reference/html/ https://coe.gitbook.io/guide/service-discovery/eureka Service ë“±ë¡í•˜ê¸°implementation &#x27;org.springframework.cloud:spring-cloud-starter-netflix-eureka-client&#x27; @EnableDiscoveryClient@SpringBootApplication@EnableDiscoveryClientpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125;&#125; Eureka ì„œë²„ì— ë“±ë¡ì„ ìœ„í•œ Properties ì„¤ì • ì¶”ê°€eureka.client.register-with-eureka ê°’ì„ true ë¡œ ì¤Œìœ¼ë¡œì¨ Eureka ì„œë²„ì— ë“±ë¡í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤. Service ë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•´ eureka.client.service-url.defaultZone ë¥¼ ì´ìš©í•´ Eureka ì„œë²„ì˜ ì£¼ì†Œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eureka Eureka Server ì— ë“±ë¡ëœ Service í™•ì¸í•˜ê¸°","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Service Discovery","slug":"Spring/Spring-Cloud/Service-Discovery","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Service-Discovery/"}],"tags":[]},{"title":"Spring Cloud - Service Discovery Server (Eureka)","slug":"spring/spring-cloud/service-discovery/spring-cloud-eureka-server","date":"2023-06-29T17:31:31.000Z","updated":"2024-02-26T15:34:54.442Z","comments":true,"path":"2023/06/30/spring/spring-cloud/service-discovery/spring-cloud-eureka-server/","link":"","permalink":"https://ckck803.github.io/2023/06/30/spring/spring-cloud/service-discovery/spring-cloud-eureka-server/","excerpt":"ëª©ì°¨ Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) ì°¸ê³  https://cloud.spring.io/spring-cloud-netflix/reference/html/ https://coe.gitbook.io/guide/service-discovery/eureka ì‚¬ìš©í•˜ëŠ” Spring Cloud ë²„ì „plugins &#123; id &#x27;org.springframework.boot&#x27; version &#x27;2.4.5&#x27; id &#x27;io.spring.dependency-management&#x27; version &#x27;1.0.11.RELEASE&#x27; id &#x27;java&#x27;&#125;group = &#x27;com.example&#x27;version = &#x27;0.0.1-SNAPSHOT&#x27;sourceCompatibility = &#x27;11&#x27;repositories &#123; mavenCentral()&#125;ext &#123; set(&#x27;springCloudVersion&#x27;, &quot;2020.0.2&quot;)&#125;dependencies &#123; testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27;&#125;dependencyManagement &#123; imports &#123; mavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:$&#123;springCloudVersion&#125;&quot; &#125;&#125;test &#123; useJUnitPlatform()&#125; Spring Cloud EurekaMSA (Micro Service Architecture) ì—ì„œëŠ” ê° ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ Service Discovery Server ê°€ í•„ìš”í•©ë‹ˆë‹¤. Spring Cloud ì—ì„œëŠ” Service Discovery ë¥¼ ìœ„í•´ Eureka ë¥¼ ì‚¬ìš©í•œë‹¤. Discovery Server (Eureka)implementation &#x27;org.springframework.cloud:spring-cloud-starter-netflix-eureka-server&#x27;","text":"ëª©ì°¨ Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) ì°¸ê³  https://cloud.spring.io/spring-cloud-netflix/reference/html/ https://coe.gitbook.io/guide/service-discovery/eureka ì‚¬ìš©í•˜ëŠ” Spring Cloud ë²„ì „plugins &#123; id &#x27;org.springframework.boot&#x27; version &#x27;2.4.5&#x27; id &#x27;io.spring.dependency-management&#x27; version &#x27;1.0.11.RELEASE&#x27; id &#x27;java&#x27;&#125;group = &#x27;com.example&#x27;version = &#x27;0.0.1-SNAPSHOT&#x27;sourceCompatibility = &#x27;11&#x27;repositories &#123; mavenCentral()&#125;ext &#123; set(&#x27;springCloudVersion&#x27;, &quot;2020.0.2&quot;)&#125;dependencies &#123; testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27;&#125;dependencyManagement &#123; imports &#123; mavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:$&#123;springCloudVersion&#125;&quot; &#125;&#125;test &#123; useJUnitPlatform()&#125; Spring Cloud EurekaMSA (Micro Service Architecture) ì—ì„œëŠ” ê° ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ Service Discovery Server ê°€ í•„ìš”í•©ë‹ˆë‹¤. Spring Cloud ì—ì„œëŠ” Service Discovery ë¥¼ ìœ„í•´ Eureka ë¥¼ ì‚¬ìš©í•œë‹¤. Discovery Server (Eureka)implementation &#x27;org.springframework.cloud:spring-cloud-starter-netflix-eureka-server&#x27; @EnableEurekaServerDiscovery Server ë¡œ ì‘ë™í•˜ê¸° ìœ„í•´ @EnableEurekaServer ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ì—¬ Eureka Server ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. @SpringBootApplication@EnableEurekaServerpublic class DiscoveryServiceApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DiscoveryServiceApplication.class, args); &#125;&#125; Properties ì„¤ì • ì¶”ê°€ eureka.client.register-with-eureka ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ë³¸ì¸ì„ ë“±ë¡í• ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. eureka.client.fetch-registry ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. spring: application: name: discoveryserviceeureka: client: register-with-eureka: false fetch-registry: false","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Service Discovery","slug":"Spring/Spring-Cloud/Service-Discovery","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Service-Discovery/"}],"tags":[]},{"title":"Spring Batch - ë°°ì¹˜ ì„¤ì • (application.properties)","slug":"spring/spring-batch/spring-batch-batch-properties","date":"2023-06-28T06:25:35.000Z","updated":"2024-02-26T15:30:51.765Z","comments":true,"path":"2023/06/28/spring/spring-batch/spring-batch-batch-properties/","link":"","permalink":"https://ckck803.github.io/2023/06/28/spring/spring-batch/spring-batch-batch-properties/","excerpt":"ë°°ì¹˜ ì¡ì˜ ì‹¤í–‰ ì—¬ë¶€ë¥¼ ì„¤ì •# Spring Boot ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¤ëŠ” Batch Job ì„ ì‹¤í–‰ì‹œí‚¤ë„ë¡ í•œë‹¤.spring.batch.job.enabled: true # default# Spring Boot ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¤ëŠ” Batch Job ì„ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ í•œë‹¤.spring.batch.job.enabled: false ë°°ì¹˜ ì¡ì˜ ì¬ì‹œì‘ ì—¬ë¶€ë¥¼ ì„¤ì •# ê¸°ë³¸ì´ true, ì¬ì‹œì‘ì„ í—ˆìš©í•œë‹¤.spring.batch.job.restartable: true# ì¬ì‹œì‘ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤spring.batch.job.restartable: false ì‹¤í–‰í•  ë°°ì¹˜ ì¡ì˜ ì´ë¦„ì„ ì§€ì •ìŠ¤í”„ë§ ë°°ì¹˜ëŠ” ì‹¤í–‰ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  Job ì„ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. spring.batch.job.names ë¥¼ ì´ìš©í•´ ì§€ì • Job ë§Œ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡œê·¸ë¨ ì‹¤í–‰ì‹œ íŠ¹ì • Job ì„ ì „ë‹¬ë°›ì•„ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ì„ ê²½ìš° spring.batch.job.names: $&#123;job.name:NONE&#125; ë¡œ ì„¤ì •í•˜ë©´ ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ì€ Job ì´ë¦„ì„ ì´ìš©í•´ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì¼ ì „ë‹¬ë°›ì€ ê°’ì´ ì—†ìœ¼ë©´ ì•„ë¬´ Job ë„ ì‹¤í–‰ì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤. :NONE ì€ í”„ë¡œí¼í‹° í‘œí˜„ ì¤‘ í•˜ë‚˜ë¡œ ì „ë‹¬ë°›ì€ ê°’ì´ ì—†ì„ ê²½ìš° NONE ìœ¼ë¡œ ëŒ€ì²´í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. # Hard Coding ë°©ì‹spring.batch.job.names: springJob1# Binding ì„ ì‚¬ìš©í•œ ë°©ì‹spring.batch.job.names: $&#123;job.name:NONE&#125;","text":"ë°°ì¹˜ ì¡ì˜ ì‹¤í–‰ ì—¬ë¶€ë¥¼ ì„¤ì •# Spring Boot ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¤ëŠ” Batch Job ì„ ì‹¤í–‰ì‹œí‚¤ë„ë¡ í•œë‹¤.spring.batch.job.enabled: true # default# Spring Boot ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¤ëŠ” Batch Job ì„ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ í•œë‹¤.spring.batch.job.enabled: false ë°°ì¹˜ ì¡ì˜ ì¬ì‹œì‘ ì—¬ë¶€ë¥¼ ì„¤ì •# ê¸°ë³¸ì´ true, ì¬ì‹œì‘ì„ í—ˆìš©í•œë‹¤.spring.batch.job.restartable: true# ì¬ì‹œì‘ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤spring.batch.job.restartable: false ì‹¤í–‰í•  ë°°ì¹˜ ì¡ì˜ ì´ë¦„ì„ ì§€ì •ìŠ¤í”„ë§ ë°°ì¹˜ëŠ” ì‹¤í–‰ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  Job ì„ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. spring.batch.job.names ë¥¼ ì´ìš©í•´ ì§€ì • Job ë§Œ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡œê·¸ë¨ ì‹¤í–‰ì‹œ íŠ¹ì • Job ì„ ì „ë‹¬ë°›ì•„ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ì„ ê²½ìš° spring.batch.job.names: $&#123;job.name:NONE&#125; ë¡œ ì„¤ì •í•˜ë©´ ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ì€ Job ì´ë¦„ì„ ì´ìš©í•´ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì¼ ì „ë‹¬ë°›ì€ ê°’ì´ ì—†ìœ¼ë©´ ì•„ë¬´ Job ë„ ì‹¤í–‰ì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤. :NONE ì€ í”„ë¡œí¼í‹° í‘œí˜„ ì¤‘ í•˜ë‚˜ë¡œ ì „ë‹¬ë°›ì€ ê°’ì´ ì—†ì„ ê²½ìš° NONE ìœ¼ë¡œ ëŒ€ì²´í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. # Hard Coding ë°©ì‹spring.batch.job.names: springJob1# Binding ì„ ì‚¬ìš©í•œ ë°©ì‹spring.batch.job.names: $&#123;job.name:NONE&#125; ì‹¤í–‰ì‹œí‚¬ Job ì„ ì§€ì •í•˜ëŠ” ë°©ë²• ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œ Program arguments ë¡œ Job ì´ë¦„ ì…ë ¥í•œë‹¤. --job.name=helloJob í•˜ë‚˜ ì´ìƒì˜ Job ì„ ì‹¤í–‰í•  ê²½ìš° ì‰¼í‘œë¡œ êµ¬ë¶„í•´ì„œ ì…ë ¥ í•œë‹¤. --job.name=helloJob,simpleJob ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œì ì— Argument ë¡œ ë„˜ê²¨ì„œ Binding ë˜ë„ë¡ í•œë‹¤. ì¸í…”ë¦¬ì œì´ì—ì„œ Program Argument ë¥¼ ì´ìš©í•œ Job ì‹¤í–‰ ë°°ì¹˜ ë©”íƒ€ ë°ì´í„° ì €ì¥ì„ ìœ„í•œ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±ì—¬ë¶€ë¥¼ ì„¤ì •spring.batch.jdbc.initialize-schema: alwaysspring.batch.jdbc.initialize-schema: embedded # defaultspring.batch.jdbc.initialize-schema: never ë°°ì¹˜ ì¡ì—ì„œ ìƒì„±ë˜ëŠ” ë©”íƒ€ ë°ì´í„° í…Œì´ë¸” Prefix ë¥¼ ì„¤ì •spring.batch.jdbc.table-prefix: DEMO ë°°ì¹˜ ì¡ì—ì„œ í—ˆìš©í•˜ëŠ” ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ ì„¤ì •# ë°°ì¹˜ ì¡ì—ì„œ í—ˆìš©í•˜ëŠ” ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ ì„¤ì •í•œë‹¤. default: 3spring.batch.job.failures-allowed: 3","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - ServiceAccount","slug":"k8s/config/ServiceAccount","date":"2023-06-11T01:31:46.000Z","updated":"2024-02-18T16:19:54.536Z","comments":true,"path":"2023/06/11/k8s/config/ServiceAccount/","link":"","permalink":"https://ckck803.github.io/2023/06/11/k8s/config/ServiceAccount/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Secret ì¿ ë²„ë„¤í‹°ìŠ¤ - ConfigMap ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s ì°¸ê³  https://findstar.pe.kr/2023/04/09/access-k8s-api-from-pod/ https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/ https://kubernetes.io/ko/docs/reference/access-authn-authz/service-accounts-admin/ ServiceAccount ServiceAccount ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ API ì„œë²„ì™€ í†µì‹ í•˜ê³  í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì¸ì¦ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ServiceAccount ëŠ” Pod ê°€ Kubernetes API Server ì— ì¸ì¦ í•˜ê¸° ìœ„í•œ Account ì…ë‹ˆë‹¤. ë•Œë¬¸ì— Pod ë¥¼ ìƒì„±í• ë•Œ ServiceAccount ë¥¼ í• ë‹¹í•´ì•¼ í•˜ë©° ì§€ì •í•˜ì§€ ì•Šì„ ê²½ìš° default ê°€ ìë™ìœ¼ë¡œ í• ë‹¹ë©ë‹ˆë‹¤. Rule ê³¼ RuleBinding ì„ ì´ìš©í•´ ServiceAccount ì— ê¶Œí•œì„ ë¶€ì—¬í•¨ìœ¼ë¡œì¨ Pod ê°€ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ServiceAccount ëŠ” Namespace ë‹¨ìœ„ë¡œ ìƒì„±ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë©° ë‹¤ë¥¸ Namespace ì—ì„œ ì •ì˜ëœ ServiceAccount ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Secret ì¿ ë²„ë„¤í‹°ìŠ¤ - ConfigMap ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s ì°¸ê³  https://findstar.pe.kr/2023/04/09/access-k8s-api-from-pod/ https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/ https://kubernetes.io/ko/docs/reference/access-authn-authz/service-accounts-admin/ ServiceAccount ServiceAccount ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ API ì„œë²„ì™€ í†µì‹ í•˜ê³  í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì¸ì¦ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ServiceAccount ëŠ” Pod ê°€ Kubernetes API Server ì— ì¸ì¦ í•˜ê¸° ìœ„í•œ Account ì…ë‹ˆë‹¤. ë•Œë¬¸ì— Pod ë¥¼ ìƒì„±í• ë•Œ ServiceAccount ë¥¼ í• ë‹¹í•´ì•¼ í•˜ë©° ì§€ì •í•˜ì§€ ì•Šì„ ê²½ìš° default ê°€ ìë™ìœ¼ë¡œ í• ë‹¹ë©ë‹ˆë‹¤. Rule ê³¼ RuleBinding ì„ ì´ìš©í•´ ServiceAccount ì— ê¶Œí•œì„ ë¶€ì—¬í•¨ìœ¼ë¡œì¨ Pod ê°€ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ServiceAccount ëŠ” Namespace ë‹¨ìœ„ë¡œ ìƒì„±ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë©° ë‹¤ë¥¸ Namespace ì—ì„œ ì •ì˜ëœ ServiceAccount ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ServiceAccount ìƒì„±í•˜ê¸°ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë‚´ kind: ServiceAccount ë¥¼ ì‚¬ìš©í•˜ì—¬ ServiceAccountë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. apiVersion: v1kind: ServiceAccountmetadata: annotations: description: ServiceAccount ì— ëŒ€í•œ ì„¤ëª… name: &lt;ServiceAccount ì´ë¦„&gt; namespace: &lt;ServiceAccount ë¥¼ ì‚¬ìš©í•  Namespace&gt; Token ìƒì„±v1.22 ì´ì „ ë²„ì „ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ APIì— ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•œ ì¥ê¸° ìê²© ì¦ëª…ì„ ìë™ìœ¼ë¡œ ìƒì„±í–ˆë‹¤. ì´ ì´ì „ ë©”ì»¤ë‹ˆì¦˜ì€ ì‹¤í–‰ ì¤‘ì¸ íŒŒë“œì— ë§ˆìš´íŠ¸í•  ìˆ˜ ìˆëŠ” í† í° ì‹œí¬ë¦¿ì„ ìƒì„±í•˜ëŠ” ê²ƒì„ ê¸°ë°˜ìœ¼ë¡œ í–ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ v1.27ì„ í¬í•¨í•œ ìµœì‹  ë²„ì „ì—ì„œëŠ”, API ìê²© ì¦ëª…ì´ í† í°ë¦¬í€˜ìŠ¤íŠ¸ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ íšë“ë˜ê³ , ì˜ˆìƒ ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ì—¬ íŒŒë“œì— ë§ˆìš´íŠ¸ëœë‹¤. ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ íšë“í•œ í† í°ì€ ìˆ˜ëª…ì´ ì œí•œë˜ì–´ ìˆìœ¼ë©°, ë§ˆìš´íŠ¸ëœ íŒŒë“œê°€ ì‚­ì œë˜ë©´ ìë™ìœ¼ë¡œ ë¬´íš¨í™”ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë§Œë£Œë˜ì§€ ì•ŠëŠ” í† í°ì´ í•„ìš”í•œ ê²½ìš° ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ í† í° ì‹œí¬ë¦¿ì„ ìˆ˜ë™ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ëŒ€ì‹  TokenRequest ì„œë¸Œë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ APIì— ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•œ í† í°ì„ ì–»ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤. kubectl create token &lt;ServiceAccount Name&gt; Secret ìƒì„±apiVersion: v1kind: Secretmetadata: name: &lt;Secret Name&gt; namespace: mbc-add-dev annotations: kubernetes.io/service-account.name: &lt;ServiceAccount Name&gt;type: kubernetes.io/service-account-token RuleapiVersion: rbac.authorization.k8s.io/v1kind: Rolemetadata: name: kubectl-prometheus-alertmanager-role namespace: mbc-add-devrules:- apiGroups: - apps resourceNames: - prometheus-alertmanager - alertmanager resources: - statefulsets - statefulsets/scale verbs: - get - patch - list - watch - update RoleBindingapiVersion: rbac.authorization.k8s.io/v1kind: RoleBindingmetadata: name: kubectl-prometheus-alertmanager-rolebinding namespace: mbc-add-devroleRef: apiGroup: rbac.authorization.k8s.io kind: Role name: &lt;Role Name&gt;subjects:- kind: ServiceAccount name: &lt;Service Account Name&gt; namespace: mbc-add-dev","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Config","slug":"Kubernetes/Config","permalink":"https://ckck803.github.io/categories/Kubernetes/Config/"}],"tags":[]},{"title":"Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜","slug":"k8s/istio/istio-install","date":"2023-05-25T23:31:46.000Z","updated":"2024-11-29T03:38:48.234Z","comments":true,"path":"2023/05/26/k8s/istio/istio-install/","link":"","permalink":"https://ckck803.github.io/2023/05/26/k8s/istio/istio-install/","excerpt":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - istioctl Istio ë€? ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ istioctl ì„¤ì¹˜Mac ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° HomeBrew ë¥¼ ì´ìš©í•´ istioctl ì„ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. brew install istioctl ë‹¤ë¥¸ OS ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ íŠ¹ì • ë²„ì „ì˜ Istio ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ Istio ë²„ì „ì„ Setting í•œ í›„ í•´ë‹¹ ë²„ì „ì„ ë‚´ë ¤ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. export ISTIO_VERSION=1.14.5curl -L https://istio.io/downloadIstio | ISTIO_VERSION=$ISTIO_VERSION TARGET_ARCH=x86_64 sh -","text":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - istioctl Istio ë€? ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ istioctl ì„¤ì¹˜Mac ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° HomeBrew ë¥¼ ì´ìš©í•´ istioctl ì„ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. brew install istioctl ë‹¤ë¥¸ OS ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ íŠ¹ì • ë²„ì „ì˜ Istio ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ Istio ë²„ì „ì„ Setting í•œ í›„ í•´ë‹¹ ë²„ì „ì„ ë‚´ë ¤ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. export ISTIO_VERSION=1.14.5curl -L https://istio.io/downloadIstio | ISTIO_VERSION=$ISTIO_VERSION TARGET_ARCH=x86_64 sh - Istio Profile ì„¤ì¹˜istioctl install --set profile=demo --set hub=gcr.io/istio-release kubectl apply -f samples/addons ì„¤ì¹˜ëœ Istio Resource Kialiì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ Kiali Service ë¥¼ ClusterIP ì—ì„œ LoadBalancer ë¡œ ë³€ê²½í•©ë‹ˆë‹¤ kubectl patch svc kiali -n istio-system -p &#x27;&#123;&quot;spec&quot;: &#123;&quot;type&quot;: &quot;LoadBalancer&quot;&#125;&#125;&#x27; LoadBalancer ë¡œ ë³€ê²½ ë˜ë©´ì„œ EXTERNAL-IP ê°€ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. EXTERNAL-IP ë¥¼ ì´ìš©í•´ ì ‘ê·¼í•˜ë©´ Kiali Dashboard ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Jaegerì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ Jaeger Service ë¥¼ ClusterIP ì—ì„œ LoadBalancer ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. kubectl patch svc tracing -n istio-system -p &#x27;&#123;&quot;spec&quot;: &#123;&quot;type&quot;: &quot;LoadBalancer&quot;&#125;&#125;&#x27; LoadBalancer ë¡œ ë³€ê²½ ë˜ë©´ì„œ EXTERNAL-IP ê°€ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. EXTERNAL-IP ë¥¼ ì´ìš©í•´ ì ‘ê·¼í•˜ë©´ Jaeger Dashboard ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Sidecar Injection ë°©ë²• Istioctl kube-inject Command ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²• kubectl apply -f &lt;(istioctl kube-inject -f Deployment.yml) Namespace ì— istio-injection ì„ enabled ë¡œ ì„¤ì •í•˜ëŠ” ë°©ë²• kubectl label namespace tutorial istio-injection=enabled Tutorialkubectl create namespace tutorial Deployment ë¥¼ ì„¤ì¹˜ í• ë•Œ istioctl kube-inject ëª…ë ¹ì–´ë¥¼ í†µí•´ Istio Container ê°€ Pod ë‚´ì— ì„¤ì¹˜ë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤. kubectl apply -f &lt;(istioctl kube-inject -f customer/kubernetes/Deployment.yml) -n tutorialkubectl create -f customer/kubernetes/Service.yml -n tutorial Pod ê°€ ìƒì„±ë ë•Œ ë‚´ë¶€ì— Istio Container ê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Istio Gateway ì„¤ì¹˜ ë° Customer ì„œë¹„ìŠ¤ ë¼ìš°íŒ…(VirtualService) ì„¤ì •apiVersion: networking.istio.io/v1alpha3kind: Gatewaymetadata: name: customer-gatewayspec: selector: istio: ingressgateway # use istio default controller servers: - port: number: 80 name: http protocol: HTTP hosts: - &quot;*&quot;---apiVersion: networking.istio.io/v1alpha3kind: VirtualServicemetadata: name: customer-gatewayspec: hosts: - &quot;*&quot; gateways: - customer-gateway http: - match: - uri: prefix: /customer rewrite: uri: / route: - destination: host: customer port: number: 8080 kubectl apply -f customer/kubernetes/Gateway.yml -n tutorial kubectl apply -f &lt;(istioctl kube-inject -f preference/kubernetes/Deployment.yml) -n tutorialkubectl create -f preference/kubernetes/Service.yml -n tutorialkubectl apply -f &lt;(istioctl kube-inject -f recommendation/kubernetes/Deployment.yml) -n tutorialkubectl create -f recommendation/kubernetes/Service.yml -n tutorial Istio - Traffic Routingkubectl apply -f &lt;(istioctl kube-inject -f recommendation/kubernetes/Deployment-v2.yml) -n tutorial kubectl scale --replicas=2 deployment/recommendation-v2 -n tutorialkubectl get po -n tutorial kubectl get VirtualService -n tutorial -o yamlkubectl get DestinationRule -n tutorial -o yaml Istio Timeout &amp; RetryTimeout ì„¤ì •kubectl apply -f - &lt;&lt;EOF apiVersion: networking.istio.io/v1alpha3 kind: VirtualService metadata: name: vs-order-network-rule namespace: tutorial spec: hosts: - order http: - route: - destination: host: order timeout: 3sEOF Siege ìƒì„±kubectl apply -f - &lt;&lt;EOFapiVersion: v1kind: Podmetadata: name: siege namespace: tutorialspec: containers: - name: siege image: apexacme/siege-nginxEOF kubectl exec -it siege -c siege -n tutorial -- /bin/bashsiege -c1 -t2S -v --content-type &quot;application/json&quot; &#x27;http://order:8080/orders POST &#123;&quot;productId&quot;: &quot;1001&quot;, &quot;qty&quot;:5&#125;&#x27; siege -c30 -t20S -v --content-type &quot;application/json&quot; &#x27;http://order:8080/orders POST &#123;&quot;productId&quot;: &quot;1001&quot;, &quot;qty&quot;:5&#125;&#x27; Order ì„œë¹„ìŠ¤ì— â€˜Retryâ€™ Rule ì¶”ê°€kubectl apply -f - &lt;&lt;EOF apiVersion: networking.istio.io/v1alpha3 kind: VirtualService metadata: name: vs-order-network-rule namespace: tutorial spec: hosts: - order http: - route: - destination: host: order timeout: 3s retries: attempts: 3 perTryTimeout: 2s retryOn: 5xx,retriable-4xx,gateway-error,connect-failure,refused-streamEOF apiVersion: networking.k8s.io/v1kind: &quot;Ingress&quot;metadata: name: &quot;shopping-ingress&quot; namespace: &quot;istio-system&quot; annotations: nginx.ingress.kubernetes.io/ssl-redirect: &quot;false&quot; ingressclass.kubernetes.io/is-default-class: &quot;true&quot;spec: ingressClassName: nginx rules: - host: &quot;kiali.service.com&quot; http: paths: - path: / pathType: Prefix backend: service: name: kiali port: number: 20001 - host: &quot;prom.service.com&quot; http: paths: - path: / pathType: Prefix backend: service: name: prometheus port: number: 9090 - host: &quot;gra.service.com&quot; http: paths: - path: / pathType: Prefix backend: service: name: grafana port: number: 3000 - host: &quot;tracing.service.com&quot; http: paths: - path: / pathType: Prefix backend: service: name: tracing port: number: 80 Prometheus&#x2F;Grafanaê¸°ë°˜ K8s í†µí•© ëª¨ë‹ˆí„°ë§kubectl create ns shopkubectl label namespace shop istio-injection=enabledkubectl apply -f https://raw.githubusercontent.com/acmexii/demo/master/edu/order-liveness.yaml -n shopkubectl expose deploy order --port=8080 -n shopkubectl apply -f https://raw.githubusercontent.com/acmexii/demo/master/edu/delivery-rediness-v1.yaml -n shopkubectl expose deploy delivery --port=8080 -n shop# Client Pod deploykubectl apply -f https://raw.githubusercontent.com/acmexii/demo/master/edu/siege-pod.yaml -n shop kubectl patch service/prometheus -n istio-system -p &#x27;&#123;&quot;spec&quot;: &#123;&quot;type&quot;: &quot;LoadBalancer&quot;&#125;&#125;&#x27; kubectl patch service/grafana -n istio-system -p &#x27;&#123;&quot;spec&quot;: &#123;&quot;type&quot;: &quot;LoadBalancer&quot;&#125;&#125;&#x27; Istio ì‚­ì œ ë°©ë²•cd istio-$ISTIO_VERSIONkubectl delete -f samples/addonsistioctl manifest generate --set profile=demo | kubectl delete --ignore-not-found=true -f - kubectl delete namespace istio-system","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Istio","slug":"Kubernetes/Istio","permalink":"https://ckck803.github.io/categories/Kubernetes/Istio/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - CustomResource","slug":"k8s/CustomResource/CustomResource","date":"2023-05-18T01:31:46.000Z","updated":"2024-02-18T16:19:54.535Z","comments":true,"path":"2023/05/18/k8s/CustomResource/CustomResource/","link":"","permalink":"https://ckck803.github.io/2023/05/18/k8s/CustomResource/CustomResource/","excerpt":"ì°¸ê³  https://frozenpond.tistory.com/111 CustomResourceCustom ResourceëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ì˜ ìƒˆë¡œìš´ ì¢…ë¥˜ë¥¼ ì •ì˜í•˜ê³ , ì´ë¥¼ í†µí•´ ì‚¬ìš©ìì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¹í™”ëœ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. Custom Resource ëŠ” í´ëŸ¬ìŠ¤í„° ìƒíƒœì˜ ì¼ë¶€ë¡œì„œ ì¡´ì¬í•˜ë©°, ì¼ë°˜ì ì¸ ë¦¬ì†ŒìŠ¤ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ APIë¥¼ í†µí•´ ì‘ë™í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìëŠ” Custom Resource ë¥¼ ìƒì„±, ì¡°íšŒ, ìˆ˜ì • ë° ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Custom Resource ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë¨¼ì € Custom Resource Definition(CRD) ì„ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤. CRDëŠ” Custom Resource ì˜ ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ëª…í•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ API ê°œì²´ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Custom Resource ì˜ êµ¬ì¡°, í•„ë“œ ë° ê¸°íƒ€ íŠ¹ì„±ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. CRDëŠ” ì¼ì¢…ì˜ í…œí”Œë¦¿ìœ¼ë¡œì„œ, Custom Resource ì˜ ì •ì˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤. CRDë¥¼ ìƒì„±í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ API ì„œë²„ê°€ ìƒˆë¡œìš´ Custom Resource íƒ€ì…ì„ ì´í•´í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. Custom Resource Definition ì„ ì‘ì„±í•œ í›„, ì‚¬ìš©ìëŠ” í•´ë‹¹ ì •ì˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Custom Resource ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Custom Resource ì¸ìŠ¤í„´ìŠ¤ëŠ” ì¼ë°˜ì ìœ¼ë¡œ YAML ë˜ëŠ” JSON í˜•ì‹ìœ¼ë¡œ ì •ì˜ë˜ë©°, í´ëŸ¬ìŠ¤í„°ì— ë°°í¬ë©ë‹ˆë‹¤. ì´í›„ Custom Resource ëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì™€ ìœ ì‚¬í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆìœ¼ë©°, ì‚¬ìš©ìëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ APIë¥¼ ì‚¬ìš©í•˜ì—¬ Custom Resource ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Custom Resource ì™€ Custom Resource Definition ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ í™•ì¥ì„±ê³¼ ìœ ì—°ì„±ì„ ë†’ì—¬ì¤ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ APIë¥¼ í†µí•´ ê³ ìœ í•œ ë¦¬ì†ŒìŠ¤ ìœ í˜•ì„ ì •ì˜í•˜ê³  ì œì–´í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ ìì‹ ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë”ìš± ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ì°¸ê³  https://frozenpond.tistory.com/111 CustomResourceCustom ResourceëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ì˜ ìƒˆë¡œìš´ ì¢…ë¥˜ë¥¼ ì •ì˜í•˜ê³ , ì´ë¥¼ í†µí•´ ì‚¬ìš©ìì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¹í™”ëœ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. Custom Resource ëŠ” í´ëŸ¬ìŠ¤í„° ìƒíƒœì˜ ì¼ë¶€ë¡œì„œ ì¡´ì¬í•˜ë©°, ì¼ë°˜ì ì¸ ë¦¬ì†ŒìŠ¤ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ APIë¥¼ í†µí•´ ì‘ë™í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìëŠ” Custom Resource ë¥¼ ìƒì„±, ì¡°íšŒ, ìˆ˜ì • ë° ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Custom Resource ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë¨¼ì € Custom Resource Definition(CRD) ì„ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤. CRDëŠ” Custom Resource ì˜ ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ëª…í•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ API ê°œì²´ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Custom Resource ì˜ êµ¬ì¡°, í•„ë“œ ë° ê¸°íƒ€ íŠ¹ì„±ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. CRDëŠ” ì¼ì¢…ì˜ í…œí”Œë¦¿ìœ¼ë¡œì„œ, Custom Resource ì˜ ì •ì˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤. CRDë¥¼ ìƒì„±í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ API ì„œë²„ê°€ ìƒˆë¡œìš´ Custom Resource íƒ€ì…ì„ ì´í•´í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. Custom Resource Definition ì„ ì‘ì„±í•œ í›„, ì‚¬ìš©ìëŠ” í•´ë‹¹ ì •ì˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Custom Resource ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Custom Resource ì¸ìŠ¤í„´ìŠ¤ëŠ” ì¼ë°˜ì ìœ¼ë¡œ YAML ë˜ëŠ” JSON í˜•ì‹ìœ¼ë¡œ ì •ì˜ë˜ë©°, í´ëŸ¬ìŠ¤í„°ì— ë°°í¬ë©ë‹ˆë‹¤. ì´í›„ Custom Resource ëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì™€ ìœ ì‚¬í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆìœ¼ë©°, ì‚¬ìš©ìëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ APIë¥¼ ì‚¬ìš©í•˜ì—¬ Custom Resource ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Custom Resource ì™€ Custom Resource Definition ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ í™•ì¥ì„±ê³¼ ìœ ì—°ì„±ì„ ë†’ì—¬ì¤ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ APIë¥¼ í†µí•´ ê³ ìœ í•œ ë¦¬ì†ŒìŠ¤ ìœ í˜•ì„ ì •ì˜í•˜ê³  ì œì–´í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ ìì‹ ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë”ìš± ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. CustomResourceDefinitionapiVersion: apiextensions.k8s.io/v1 ë¥¼ ì´ìš©í•´ CustomResourceDefinition ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤. apiVersion: apiextensions.k8s.io/v1kind: CustomResourceDefinitionmetadata: # name must match the spec fields below, and be in the form: &lt;plural&gt;.&lt;group&gt; name: crontabs.stable.example.comspec: # group name to use for REST API: /apis/&lt;group&gt;/&lt;version&gt; group: stable.example.com # list of versions supported by this CustomResourceDefinition versions: - name: v1 # Each version can be enabled/disabled by Served flag. served: true # One and only one version must be marked as the storage version. storage: true schema: openAPIV3Schema: type: object properties: spec: type: object properties: cronSpec: type: string image: type: string replicas: type: integer # either Namespaced or Cluster scope: Namespaced names: # plural name to be used in the URL: /apis/&lt;group&gt;/&lt;version&gt;/&lt;plural&gt; plural: crontabs # singular name to be used as an alias on the CLI and for display singular: crontab # kind is normally the CamelCased singular type. Your resource manifests use this. kind: CronTab # shortNames allow shorter string to match your resource on the CLI shortNames: - ct Kubernetes Operator","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Custom","slug":"Kubernetes/Custom","permalink":"https://ckck803.github.io/categories/Kubernetes/Custom/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - CA (Cluster Autoscaler)","slug":"k8s/autoscaler/ca","date":"2023-05-18T01:31:46.000Z","updated":"2024-02-18T16:19:54.535Z","comments":true,"path":"2023/05/18/k8s/autoscaler/ca/","link":"","permalink":"https://ckck803.github.io/2023/05/18/k8s/autoscaler/ca/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - HPA (Horizontal Pod Autoscaler) ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s CA","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - HPA (Horizontal Pod Autoscaler) ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s CA","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Autoscaler","slug":"Kubernetes/Autoscaler","permalink":"https://ckck803.github.io/categories/Kubernetes/Autoscaler/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - VPA (Vertical Pod Autoscaler)","slug":"k8s/autoscaler/vpa","date":"2023-05-17T22:31:46.000Z","updated":"2024-02-18T16:19:54.536Z","comments":true,"path":"2023/05/18/k8s/autoscaler/vpa/","link":"","permalink":"https://ckck803.github.io/2023/05/18/k8s/autoscaler/vpa/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - HPA (Horizontal Pod Autoscaler) ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s VPA","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - HPA (Horizontal Pod Autoscaler) ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s VPA","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Autoscaler","slug":"Kubernetes/Autoscaler","permalink":"https://ckck803.github.io/categories/Kubernetes/Autoscaler/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - HPA (Horizontal Pod Autoscaler)","slug":"k8s/autoscaler/hpa","date":"2023-05-17T21:31:46.000Z","updated":"2024-02-18T16:19:54.536Z","comments":true,"path":"2023/05/18/k8s/autoscaler/hpa/","link":"","permalink":"https://ckck803.github.io/2023/05/18/k8s/autoscaler/hpa/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - VPA (Vertical Pod Autoscaler) ì¿ ë²„ë„¤í‹°ìŠ¤ - HPA (Horizontal Pod Autoscaler) HPAHPA (Horizontal Pod Autoscaler)ëŠ” Kubernetes í´ëŸ¬ìŠ¤í„°ì—ì„œ ìë™ìœ¼ë¡œ íŒŒë“œ ìˆ˜ë¥¼ ì¡°ì •í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. HPAëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìˆ˜ìš”ì— ë”°ë¼ íŒŒë“œì˜ ìˆ˜ë¥¼ ìŠ¤ì¼€ì¼ ì—… ë˜ëŠ” ìŠ¤ì¼€ì¼ ë‹¤ìš´í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°€ìš©ì„±ê³¼ ì„±ëŠ¥ì„ ìœ ì§€í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤. HPAëŠ” ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ ê¸°ë°˜ìœ¼ë¡œ íŒŒë“œì˜ ìˆ˜ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì •í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ CPU ì‚¬ìš©ë¥  ë˜ëŠ” ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤. HPAëŠ” ì„¤ì •ëœ ì„ê³„ê°’ê³¼ í˜„ì¬ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ ë¹„êµí•˜ì—¬ íŒŒë“œ ìˆ˜ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤. HPAë¥¼ ì„¤ì •í•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤: HPAë¥¼ ì ìš©í•  ë¦¬ì†ŒìŠ¤ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° Deployment ë˜ëŠ” ReplicaSetê³¼ ê°™ì€ ì»¨íŠ¸ë¡¤ëŸ¬ ë¦¬ì†ŒìŠ¤ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. HPA ì •ì˜ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. HPA ì •ì˜ì—ëŠ” ìŠ¤ì¼€ì¼ë§ ëŒ€ìƒ ë¦¬ì†ŒìŠ¤, ìŠ¤ì¼€ì¼ë§ ì¡°ê±´, ìŠ¤ì¼€ì¼ë§ ì¡°ì •ëŸ‰ ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, CPU ì‚¬ìš©ë¥ ì´ 80%ë¥¼ ì´ˆê³¼í•˜ë©´ íŒŒë“œ ìˆ˜ë¥¼ 2ë°°ë¡œ ìŠ¤ì¼€ì¼ ì—…í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. HPAë¥¼ ì ìš©í•©ë‹ˆë‹¤. HPAë¥¼ ì ìš©í•˜ë©´ KubernetesëŠ” ì§€ì •ëœ ê°„ê²©ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ í™•ì¸í•˜ê³  ìŠ¤ì¼€ì¼ë§ ê²°ì •ì„ ë‚´ë¦½ë‹ˆë‹¤. HPAëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¶€í•˜ê°€ ì¦ê°€í•˜ë©´ íŒŒë“œ ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ëŠ˜ë¦¬ê³ , ë¶€í•˜ê°€ ê°ì†Œí•˜ë©´ íŒŒë“œ ìˆ˜ë¥¼ ì¤„ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°€ìš©ì„±ê³¼ ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - VPA (Vertical Pod Autoscaler) ì¿ ë²„ë„¤í‹°ìŠ¤ - HPA (Horizontal Pod Autoscaler) HPAHPA (Horizontal Pod Autoscaler)ëŠ” Kubernetes í´ëŸ¬ìŠ¤í„°ì—ì„œ ìë™ìœ¼ë¡œ íŒŒë“œ ìˆ˜ë¥¼ ì¡°ì •í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. HPAëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìˆ˜ìš”ì— ë”°ë¼ íŒŒë“œì˜ ìˆ˜ë¥¼ ìŠ¤ì¼€ì¼ ì—… ë˜ëŠ” ìŠ¤ì¼€ì¼ ë‹¤ìš´í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°€ìš©ì„±ê³¼ ì„±ëŠ¥ì„ ìœ ì§€í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤. HPAëŠ” ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ ê¸°ë°˜ìœ¼ë¡œ íŒŒë“œì˜ ìˆ˜ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì •í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ CPU ì‚¬ìš©ë¥  ë˜ëŠ” ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤. HPAëŠ” ì„¤ì •ëœ ì„ê³„ê°’ê³¼ í˜„ì¬ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ ë¹„êµí•˜ì—¬ íŒŒë“œ ìˆ˜ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤. HPAë¥¼ ì„¤ì •í•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤: HPAë¥¼ ì ìš©í•  ë¦¬ì†ŒìŠ¤ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° Deployment ë˜ëŠ” ReplicaSetê³¼ ê°™ì€ ì»¨íŠ¸ë¡¤ëŸ¬ ë¦¬ì†ŒìŠ¤ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. HPA ì •ì˜ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. HPA ì •ì˜ì—ëŠ” ìŠ¤ì¼€ì¼ë§ ëŒ€ìƒ ë¦¬ì†ŒìŠ¤, ìŠ¤ì¼€ì¼ë§ ì¡°ê±´, ìŠ¤ì¼€ì¼ë§ ì¡°ì •ëŸ‰ ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, CPU ì‚¬ìš©ë¥ ì´ 80%ë¥¼ ì´ˆê³¼í•˜ë©´ íŒŒë“œ ìˆ˜ë¥¼ 2ë°°ë¡œ ìŠ¤ì¼€ì¼ ì—…í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. HPAë¥¼ ì ìš©í•©ë‹ˆë‹¤. HPAë¥¼ ì ìš©í•˜ë©´ KubernetesëŠ” ì§€ì •ëœ ê°„ê²©ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ í™•ì¸í•˜ê³  ìŠ¤ì¼€ì¼ë§ ê²°ì •ì„ ë‚´ë¦½ë‹ˆë‹¤. HPAëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¶€í•˜ê°€ ì¦ê°€í•˜ë©´ íŒŒë“œ ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ëŠ˜ë¦¬ê³ , ë¶€í•˜ê°€ ê°ì†Œí•˜ë©´ íŒŒë“œ ìˆ˜ë¥¼ ì¤„ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°€ìš©ì„±ê³¼ ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Autoscaler","slug":"Kubernetes/Autoscaler","permalink":"https://ckck803.github.io/categories/Kubernetes/Autoscaler/"}],"tags":[]},{"title":"MySQL - í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì¡°íšŒ","slug":"mysql/command","date":"2023-05-10T16:16:13.000Z","updated":"2024-11-28T13:59:26.115Z","comments":true,"path":"2023/05/11/mysql/command/","link":"","permalink":"https://ckck803.github.io/2023/05/11/mysql/command/","excerpt":"Comment ì¡°íšŒselect COLUMN_NAME, COLUMN_COMMENT, IS_NULLABLE, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH, COLUMN_TYPE from information_schema.`COLUMNS` where TABLE_NAME = &#x27;í…Œì´ë¸”ëª…&#x27;","text":"Comment ì¡°íšŒselect COLUMN_NAME, COLUMN_COMMENT, IS_NULLABLE, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH, COLUMN_TYPE from information_schema.`COLUMNS` where TABLE_NAME = &#x27;í…Œì´ë¸”ëª…&#x27;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"MySQL","slug":"Develop/MySQL","permalink":"https://ckck803.github.io/categories/Develop/MySQL/"}],"tags":[]},{"title":"Spring Batch - ItemStream","slug":"spring/spring-batch/chunk/spring-batch-ItemStream","date":"2023-05-10T04:25:35.000Z","updated":"2024-02-26T15:28:08.006Z","comments":true,"path":"2023/05/10/spring/spring-batch/chunk/spring-batch-ItemStream/","link":"","permalink":"https://ckck803.github.io/2023/05/10/spring/spring-batch/chunk/spring-batch-ItemStream/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ItemStreamItemStream ì€ ItemReader ì™€ ItemWriter ì²˜ë¦¬ ê³¼ì • ì¤‘ ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ í•´ë‹¹ ìƒíƒœë¥¼ ì°¸ì¡°í•˜ì—¬ ì‹¤íŒ¨í•œ ê³³ì—ì„œ ì¬ì‹œì‘ í•˜ë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ë¥¼ ì—´ê³  ë‹«ì•„ì•¼ í•˜ë©° ì…ì¶œë ¥ ì¥ì¹˜ ì´ˆê¸°í™” ë“±ì˜ ì‘ì—…ì„ í•´ì•¼ í•˜ëŠ” ê²½ìš° ì‚¬ìš©í•©ë‹ˆë‹¤. public interface ItemStream &#123; void open(ExecutionContext executionContext) throws ItemStreamException; void update(ExecutionContext executionContext) throws ItemStreamException; void close() throws ItemStreamException;&#125;","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ItemStreamItemStream ì€ ItemReader ì™€ ItemWriter ì²˜ë¦¬ ê³¼ì • ì¤‘ ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ í•´ë‹¹ ìƒíƒœë¥¼ ì°¸ì¡°í•˜ì—¬ ì‹¤íŒ¨í•œ ê³³ì—ì„œ ì¬ì‹œì‘ í•˜ë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ë¥¼ ì—´ê³  ë‹«ì•„ì•¼ í•˜ë©° ì…ì¶œë ¥ ì¥ì¹˜ ì´ˆê¸°í™” ë“±ì˜ ì‘ì—…ì„ í•´ì•¼ í•˜ëŠ” ê²½ìš° ì‚¬ìš©í•©ë‹ˆë‹¤. public interface ItemStream &#123; void open(ExecutionContext executionContext) throws ItemStreamException; void update(ExecutionContext executionContext) throws ItemStreamException; void close() throws ItemStreamException;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"},{"name":"Chunk","slug":"Spring/Spring-Batch/Step/Chunk","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/Chunk/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Secret","slug":"k8s/config/secret","date":"2023-05-10T01:31:46.000Z","updated":"2024-02-18T16:19:54.537Z","comments":true,"path":"2023/05/10/k8s/config/secret/","link":"","permalink":"https://ckck803.github.io/2023/05/10/k8s/config/secret/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Secret ì¿ ë²„ë„¤í‹°ìŠ¤ - ConfigMap ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s Secret ì¿ ë²„ë„¤í‹°ìŠ¤(Secret)ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë¦¬ì†ŒìŠ¤ Secretì€ ê¸°ë³¸ì ìœ¼ë¡œ ConfigMapê³¼ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ì§€ë§Œ, ì•”í˜¸í™”ëœ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ì—¬ ë” ë†’ì€ ë³´ì•ˆ ìˆ˜ì¤€ì„ ì œê³µí•©ë‹ˆë‹¤. Secretì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸, API í† í°, ë°ì´í„°ë² ì´ìŠ¤ ìê²©ì¦ëª… ë“±ê³¼ ê°™ì€ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë°ì´í„°ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ ë¶„ë¦¬ë˜ì–´, ë³´ì•ˆì„±ì„ ìœ ì§€í•˜ë©´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Secretì€ Base64 ì¸ì½”ë”©ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì¸ì½”ë”©í•˜ê³ , ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ ì €ì¥ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë°ì´í„°ëŠ” ì•ˆì „í•˜ê²Œ ì €ì¥ë˜ë©°, ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ í•„ìš”í•  ë•Œë§Œ ë””ì½”ë”©í•˜ì—¬ ì‚¬ìš©ë©ë‹ˆë‹¤. Secretì€ YAML ë˜ëŠ” JSON í˜•ì‹ìœ¼ë¡œ ì •ì˜ë˜ë©°, ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ìƒì„± ë° ì ìš©ë©ë‹ˆë‹¤. Secretì„ ìƒì„±í•œ í›„ì—ëŠ” í•´ë‹¹ Secretì„ ì‚¬ìš©í•˜ë ¤ëŠ” Podì˜ ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸í•˜ê±°ë‚˜ í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ Secretì—ì„œ ì •ì˜ëœ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Secretì—ì„œ â€œdb_passwordâ€ë¼ëŠ” í‚¤ì— ëŒ€í•œ ê°’ìœ¼ë¡œ â€œmysecretpasswordâ€ë¥¼ ì„¤ì •í•˜ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì´ ê°’ì„ ë””ì½”ë”©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Secretì€ ConfigMapê³¼ ë§ˆì°¬ê°€ì§€ë¡œ í´ëŸ¬ìŠ¤í„°ë‚˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìˆ˜ì¤€ì—ì„œ ë³€ê²½ ë° ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë³€ê²½ëœ ë¹„ë°€ë²ˆí˜¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ì‹œì‘í•˜ì§€ ì•Šê³ ë„ ì¦‰ì‹œ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Secret ì¿ ë²„ë„¤í‹°ìŠ¤ - ConfigMap ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s Secret ì¿ ë²„ë„¤í‹°ìŠ¤(Secret)ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë¦¬ì†ŒìŠ¤ Secretì€ ê¸°ë³¸ì ìœ¼ë¡œ ConfigMapê³¼ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ì§€ë§Œ, ì•”í˜¸í™”ëœ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ì—¬ ë” ë†’ì€ ë³´ì•ˆ ìˆ˜ì¤€ì„ ì œê³µí•©ë‹ˆë‹¤. Secretì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸, API í† í°, ë°ì´í„°ë² ì´ìŠ¤ ìê²©ì¦ëª… ë“±ê³¼ ê°™ì€ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë°ì´í„°ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ ë¶„ë¦¬ë˜ì–´, ë³´ì•ˆì„±ì„ ìœ ì§€í•˜ë©´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Secretì€ Base64 ì¸ì½”ë”©ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì¸ì½”ë”©í•˜ê³ , ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ ì €ì¥ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë°ì´í„°ëŠ” ì•ˆì „í•˜ê²Œ ì €ì¥ë˜ë©°, ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ í•„ìš”í•  ë•Œë§Œ ë””ì½”ë”©í•˜ì—¬ ì‚¬ìš©ë©ë‹ˆë‹¤. Secretì€ YAML ë˜ëŠ” JSON í˜•ì‹ìœ¼ë¡œ ì •ì˜ë˜ë©°, ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ìƒì„± ë° ì ìš©ë©ë‹ˆë‹¤. Secretì„ ìƒì„±í•œ í›„ì—ëŠ” í•´ë‹¹ Secretì„ ì‚¬ìš©í•˜ë ¤ëŠ” Podì˜ ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸í•˜ê±°ë‚˜ í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ Secretì—ì„œ ì •ì˜ëœ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Secretì—ì„œ â€œdb_passwordâ€ë¼ëŠ” í‚¤ì— ëŒ€í•œ ê°’ìœ¼ë¡œ â€œmysecretpasswordâ€ë¥¼ ì„¤ì •í•˜ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì´ ê°’ì„ ë””ì½”ë”©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Secretì€ ConfigMapê³¼ ë§ˆì°¬ê°€ì§€ë¡œ í´ëŸ¬ìŠ¤í„°ë‚˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìˆ˜ì¤€ì—ì„œ ë³€ê²½ ë° ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë³€ê²½ëœ ë¹„ë°€ë²ˆí˜¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ì‹œì‘í•˜ì§€ ì•Šê³ ë„ ì¦‰ì‹œ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. kubectl describe secret/db-user-pass Name: db-user-passNamespace: defaultLabels: &lt;none&gt;Annotations: &lt;none&gt;Type: OpaqueData====password.txt: 7 bytesusername.txt: 5 bytes ubectl get secret/db-user-pass -o yaml apiVersion: v1data: password.txt: cTJ3M2U0cg== username.txt: YWRtaW4=kind: Secretmetadata: creationTimestamp: &quot;2023-06-12T18:05:52Z&quot; name: db-user-pass namespace: default resourceVersion: &quot;54274&quot; uid: 45ac61f5-9c32-4d40-9823-d7c5edaba1edtype: Opaque apiVersion: v1kind: Podmetadata: name: alpine-envspec: containers: - name: alpine image: alpine command: [&quot;sleep&quot;] args: [&quot;100000&quot;] env: - name: DB_USERNAME valueFrom: secretKeyRef: name: db-user-pass key: username.txt - name: DB_PASSWORD valueFrom: secretKeyRef: name: db-user-pass key: password.txt","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Config","slug":"Kubernetes/Config","permalink":"https://ckck803.github.io/categories/Kubernetes/Config/"}],"tags":[]},{"title":"MySQL - ì‚¬ìš©ì ì¶”ê°€","slug":"mysql/user","date":"2023-05-09T16:16:13.000Z","updated":"2024-11-28T13:59:26.043Z","comments":true,"path":"2023/05/10/mysql/user/","link":"","permalink":"https://ckck803.github.io/2023/05/10/mysql/user/","excerpt":"ì‚¬ìš©ì ì¶”ê°€create user &#x27;[userid]&#x27;;-- localhost ì—ì„œë§Œ ì ‘ì†í•  ìˆ˜ ìˆëŠ” ê³„ì • ìƒì„±create user &#x27;[userid]&#x27;@&#x27;localhost&#x27; identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ê³„ì • ìƒì„±create user &#x27;[userid]&#x27;@&#x27;%&#x27; identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;; ê¶Œí•œ ë¶€ì—¬í•˜ê¸°-- select ê¶Œí•œ ë¶€ì—¬grant select privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- update ê¶Œí•œ ë¶€ì—¬grant update privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- insert ê¶Œí•œ ë¶€ì—¬grant insert privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- delete ê¶Œí•œ ë¶€ì—¬grant delete privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- select, update, insert ê¶Œí•œ ë¶€ì—¬grant select, update, insert privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;; íŠ¹ì • ë°ì´í„° ë² ì´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ë¶€ì—¬-- [Database ëª…] ë°ì´í„°ë² ì´ìŠ¤ì— select ê¶Œí•œ ë¶€ì—¬grant select privileges on [Database ëª…].* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;; User ì— ë”°ë¥¸ ë°ì´í„° ë² ì´ìŠ¤ ì ‘ê·¼ ë¶€ì—¬-- localhost User ì—ê²Œ ì „ì²´ ê¶Œí•œ ë¶€ì—¬grant all privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- ì™¸ë¶€ì ‘ê·¼ User ì—ê²Œ ì „ì²´ ê¶Œí•œ ë¶€ì—¬grant all privileges on *.* to &#x27;[userid]&#x27;@&#x27;%&#x27; identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;","text":"ì‚¬ìš©ì ì¶”ê°€create user &#x27;[userid]&#x27;;-- localhost ì—ì„œë§Œ ì ‘ì†í•  ìˆ˜ ìˆëŠ” ê³„ì • ìƒì„±create user &#x27;[userid]&#x27;@&#x27;localhost&#x27; identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ê³„ì • ìƒì„±create user &#x27;[userid]&#x27;@&#x27;%&#x27; identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;; ê¶Œí•œ ë¶€ì—¬í•˜ê¸°-- select ê¶Œí•œ ë¶€ì—¬grant select privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- update ê¶Œí•œ ë¶€ì—¬grant update privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- insert ê¶Œí•œ ë¶€ì—¬grant insert privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- delete ê¶Œí•œ ë¶€ì—¬grant delete privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- select, update, insert ê¶Œí•œ ë¶€ì—¬grant select, update, insert privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;; íŠ¹ì • ë°ì´í„° ë² ì´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ë¶€ì—¬-- [Database ëª…] ë°ì´í„°ë² ì´ìŠ¤ì— select ê¶Œí•œ ë¶€ì—¬grant select privileges on [Database ëª…].* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;; User ì— ë”°ë¥¸ ë°ì´í„° ë² ì´ìŠ¤ ì ‘ê·¼ ë¶€ì—¬-- localhost User ì—ê²Œ ì „ì²´ ê¶Œí•œ ë¶€ì—¬grant all privileges on *.* to &#x27;[userid]&#x27;@localhost identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;-- ì™¸ë¶€ì ‘ê·¼ User ì—ê²Œ ì „ì²´ ê¶Œí•œ ë¶€ì—¬grant all privileges on *.* to &#x27;[userid]&#x27;@&#x27;%&#x27; identified by &#x27;[ë¹„ë°€ë²ˆí˜¸]&#x27;;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"MySQL","slug":"Develop/MySQL","permalink":"https://ckck803.github.io/categories/Develop/MySQL/"}],"tags":[]},{"title":"Spring Batch - ItemWriter","slug":"spring/spring-batch/chunk/spring-batch-ItemWriter","date":"2023-05-09T06:25:35.000Z","updated":"2024-02-26T15:28:11.544Z","comments":true,"path":"2023/05/09/spring/spring-batch/chunk/spring-batch-ItemWriter/","link":"","permalink":"https://ckck803.github.io/2023/05/09/spring/spring-batch/chunk/spring-batch-ItemWriter/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ItemWriterItemWriterëŠ” ìŠ¤í…ì—ì„œ ì²˜ë¦¬í•œ ë°ì´í„°ë¥¼ ì¶œë ¥í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ItemWriterëŠ” ìŠ¤í…ì—ì„œ ì²˜ë¦¬í•œ ëª¨ë“  ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì¶œë ¥í•˜ë©°, ì¶œë ¥ ëŒ€ìƒì€ ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤, íŒŒì¼ ë˜ëŠ” ë©”ì‹œì§• ì‹œìŠ¤í…œê³¼ ê°™ì€ ì™¸ë¶€ ì €ì¥ì†Œì…ë‹ˆë‹¤. ItemWriterëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ INSERT, UPDATE ë˜ëŠ” DELETE ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜, íŒŒì¼ì— ëŒ€í•œ ì¶œë ¥ì„ ìˆ˜í–‰í•˜ê±°ë‚˜, ë©”ì‹œì§• ì‹œìŠ¤í…œì˜ í ë˜ëŠ” ì£¼ì œì— ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Spring BatchëŠ” ë‹¤ì–‘í•œ ìœ í˜•ì˜ ItemWriterë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ItemWriter ìœ í˜•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. JdbcBatchItemWriter: JDBCë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ë°°ì¹˜ INSERT, UPDATE ë˜ëŠ” DELETE ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JpaItemWriter: JPAë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. FlatFileItemWriter: CSV, ê³ ì • ê¸¸ì´ ë˜ëŠ” êµ¬ë¶„ ê¸°í˜¸ë¡œ êµ¬ë¶„ëœ íŒŒì¼ì— ë°ì´í„°ë¥¼ ì”ë‹ˆë‹¤. StaxEventItemWriter: XML í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì”ë‹ˆë‹¤. JmsItemWriter: JMS ëŒ€ê¸°ì—´ì— ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ItemWriterItemWriterëŠ” ìŠ¤í…ì—ì„œ ì²˜ë¦¬í•œ ë°ì´í„°ë¥¼ ì¶œë ¥í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ItemWriterëŠ” ìŠ¤í…ì—ì„œ ì²˜ë¦¬í•œ ëª¨ë“  ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì¶œë ¥í•˜ë©°, ì¶œë ¥ ëŒ€ìƒì€ ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤, íŒŒì¼ ë˜ëŠ” ë©”ì‹œì§• ì‹œìŠ¤í…œê³¼ ê°™ì€ ì™¸ë¶€ ì €ì¥ì†Œì…ë‹ˆë‹¤. ItemWriterëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ INSERT, UPDATE ë˜ëŠ” DELETE ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜, íŒŒì¼ì— ëŒ€í•œ ì¶œë ¥ì„ ìˆ˜í–‰í•˜ê±°ë‚˜, ë©”ì‹œì§• ì‹œìŠ¤í…œì˜ í ë˜ëŠ” ì£¼ì œì— ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Spring BatchëŠ” ë‹¤ì–‘í•œ ìœ í˜•ì˜ ItemWriterë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ItemWriter ìœ í˜•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. JdbcBatchItemWriter: JDBCë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ë°°ì¹˜ INSERT, UPDATE ë˜ëŠ” DELETE ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JpaItemWriter: JPAë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. FlatFileItemWriter: CSV, ê³ ì • ê¸¸ì´ ë˜ëŠ” êµ¬ë¶„ ê¸°í˜¸ë¡œ êµ¬ë¶„ëœ íŒŒì¼ì— ë°ì´í„°ë¥¼ ì”ë‹ˆë‹¤. StaxEventItemWriter: XML í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì”ë‹ˆë‹¤. JmsItemWriter: JMS ëŒ€ê¸°ì—´ì— ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. ItemWriter ì¸í„°í˜ì´ìŠ¤public interface ItemWriter &#123; public void open(Serializable checkpoint) throws Exception; public void close() throws Exception; public void writeItems(List&lt;Object&gt; items) throws Exception; public Serializable checkpointInfo() throws Exception; &#125; ItemWriter êµ¬í˜„ì²´JdbcBatchItemWriterJdbcBatchItemWriterëŠ” Spring Batch í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ItemWriter ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. JDBC ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ItemWriterëŠ” ì—¬ëŸ¬ ê°œì˜ í•­ëª©ì„ ë°›ì•„ì„œ ë°°ì¹˜ ì‘ì—…ìœ¼ë¡œ ì¼ê´„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ê´„ ì²˜ë¦¬ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë¬¶ì—¬ ì²˜ë¦¬ë˜ë¯€ë¡œ ëª¨ë“  í•­ëª©ì´ ì„±ê³µì ìœ¼ë¡œ ì“°ì—¬ì§€ê±°ë‚˜ ëª¨ë“  í•­ëª©ì´ ë¡¤ë°±ë©ë‹ˆë‹¤. JdbcBatchItemWriterëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤. ì“°ê¸° ì „ìš© ì—°ê²°ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. ëª¨ë“  í•­ëª©ì„ ë°°ì¹˜ë¡œ ê·¸ë£¹í™”í•©ë‹ˆë‹¤. ë°°ì¹˜ ë‚´ì˜ ëª¨ë“  í•­ëª©ì„ PreparedStatementSetterë¥¼ ì‚¬ìš©í•˜ì—¬ PreparedStatement ê°ì²´ì— ë§¤í•‘í•©ë‹ˆë‹¤. PreparedStatement ê°ì²´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³  ë°°ì¹˜ ì‘ì—… ë‚´ì˜ ëª¨ë“  í•­ëª©ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê³  ì“°ê¸° ì „ìš© ì—°ê²°ì„ ë°˜í™˜í•©ë‹ˆë‹¤. JdbcBatchItemWriterëŠ” ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ê²½ìš° ìœ ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—… ìˆ˜ë¥¼ ì¤„ì´ê³  ì„±ëŠ¥ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. JpaItemWriterpaItemWriterëŠ” Spring Batch í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ItemWriter ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. JPA(Java Persistence API)ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì“°ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ItemWriterëŠ” ì—¬ëŸ¬ ê°œì˜ í•­ëª©ì„ ë°›ì•„ì„œ ë°°ì¹˜ ì‘ì—…ìœ¼ë¡œ ì¼ê´„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ê´„ ì²˜ë¦¬ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë¬¶ì—¬ ì²˜ë¦¬ë˜ë¯€ë¡œ ëª¨ë“  í•­ëª©ì´ ì„±ê³µì ìœ¼ë¡œ ì“°ì—¬ì§€ê±°ë‚˜ ëª¨ë“  í•­ëª©ì´ ë¡¤ë°±ë©ë‹ˆë‹¤. JpaItemWriterëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤. ì“°ê¸° ì „ìš© EntityManagerë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ëª¨ë“  í•­ëª©ì„ ë°°ì¹˜ë¡œ ê·¸ë£¹í™”í•©ë‹ˆë‹¤. ë°°ì¹˜ ë‚´ì˜ ëª¨ë“  í•­ëª©ì„ EntityManagerë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ì†í™”í•©ë‹ˆë‹¤. EntityManagerì˜ flush() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë³€ê²½ ì‚¬í•­ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì ìš©í•©ë‹ˆë‹¤. ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³  ë°°ì¹˜ ì‘ì—… ë‚´ì˜ ëª¨ë“  í•­ëª©ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê³  ì“°ê¸° ì „ìš© EntityManagerë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. JpaItemWriterëŠ” JPAë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì“°ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê°ì²´ ê·¸ë˜í”„ë¥¼ ì‰½ê²Œ ì €ì¥í•  ìˆ˜ ìˆê³ , ë³µì¡í•œ ì¿¼ë¦¬ ì‘ì„±ì„ í”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ JPAì˜ ì¼ê´€ì„±ê³¼ íŠ¸ëœì­ì…˜ ê´€ë¦¬ ê¸°ëŠ¥ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. FlatFileItemWriterFlatFileItemWriterëŠ” Spring Batch í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ItemWriter ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” CSV, TSV, ê³ ì • ë„ˆë¹„ íŒŒì¼ ë“±ê³¼ ê°™ì€ í‰ë©´ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. FlatFileItemWriterëŠ” ë°ì´í„°ë¥¼ ì¶œë ¥í•  íŒŒì¼ ì´ë¦„ ë° ìœ„ì¹˜, í•„ë“œ êµ¬ë¶„ì, ì¤„ ë°”ê¿ˆ ë¬¸ì ë“± ì¶œë ¥ íŒŒì¼ì˜ í˜•ì‹ì„ ì§€ì •í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ì„¤ì • ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” ë˜í•œ ItemWriter ì¸í„°í˜ì´ìŠ¤ì˜ write() ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì—¬ ItemReaderì—ì„œ ì½ì€ ë°ì´í„°ë¥¼ ì¶œë ¥ íŒŒì¼ì— ì“°ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. FlatFileItemWriterë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. FlatFileItemWriterë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. ì´ êµ¬ì„± ë‹¨ê³„ì—ì„œëŠ” ì¶œë ¥ íŒŒì¼ì˜ ì´ë¦„, ìœ„ì¹˜, í•„ë“œ êµ¬ë¶„ì, ì¤„ ë°”ê¿ˆ ë¬¸ì ë“± ì¶œë ¥ íŒŒì¼ì˜ í˜•ì‹ì„ ì§€ì •í•©ë‹ˆë‹¤. ItemReaderì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì™€ ItemProcessorì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤. FlatFileItemWriter.write() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì²˜ë¦¬ëœ ë°ì´í„°ë¥¼ ì¶œë ¥ íŒŒì¼ì— ì”ë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” ì“°ê¸° ì‘ì—…ì„ ë²„í¼ë§í•˜ê³ , ì¼ì •í•œ í¬ê¸°ê°€ ë  ë•Œë§ˆë‹¤ ì¶œë ¥ íŒŒì¼ì— ì”ë‹ˆë‹¤. ì“°ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ë©´ FlatFileItemWriter.close() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì¶œë ¥ íŒŒì¼ì„ ë‹«ìŠµë‹ˆë‹¤. FlatFileItemWriterëŠ” ëŒ€ìš©ëŸ‰ ë°ì´í„° íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë° ì í•©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ íŒŒì¼ ìƒì„± ë° ì²˜ë¦¬ ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. StaxEventItemWriterStaxEventItemWriterëŠ” Spring Batch í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ItemWriter ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” XML í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¶œë ¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. StaxEventItemWriterëŠ” StAX(Streaming API for XML)ë¥¼ ì‚¬ìš©í•˜ì—¬ XML ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” XML ìŠ¤íŠ¸ë¦¼ì„ ì‘ì„±í•˜ëŠ” ë° í•„ìš”í•œ ì„¤ì •ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì¶œë ¥ íŒŒì¼ ì´ë¦„, ë£¨íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ ì´ë¦„, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë“±ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. StaxEventItemWriterë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. StaxEventItemWriterë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. ì´ êµ¬ì„± ë‹¨ê³„ì—ì„œëŠ” ì¶œë ¥ íŒŒì¼ ì´ë¦„, ë£¨íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ ì´ë¦„, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë“±ì„ ì§€ì •í•©ë‹ˆë‹¤. ItemReaderì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì™€ ItemProcessorì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤. StaxEventItemWriter.write() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì²˜ë¦¬ëœ ë°ì´í„°ë¥¼ XML í˜•ì‹ìœ¼ë¡œ ì¶œë ¥ íŒŒì¼ì— ì”ë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” ì“°ê¸° ì‘ì—…ì„ ë²„í¼ë§í•˜ê³ , ì¼ì •í•œ í¬ê¸°ê°€ ë  ë•Œë§ˆë‹¤ ì¶œë ¥ íŒŒì¼ì— ì”ë‹ˆë‹¤. ì“°ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ë©´ StaxEventItemWriter.close() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì¶œë ¥ íŒŒì¼ì„ ë‹«ìŠµë‹ˆë‹¤. StaxEventItemWriterëŠ” ëŒ€ìš©ëŸ‰ XML íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë° ì í•©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ íŒŒì¼ ìƒì„± ë° ì²˜ë¦¬ ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, StaxEventItemWriterëŠ” ë‹¤ë¥¸ XML ë¼ì´ë¸ŒëŸ¬ë¦¬ë³´ë‹¤ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì ìœ¼ë©°, ëŒ€ê·œëª¨ XML ë¬¸ì„œë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. JmsItemWriterJmsItemWriterëŠ” Spring Batch í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ItemWriter ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” Java Messaging Service(JMS)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JmsItemWriterëŠ” JMS ëª©ì ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” ë° í•„ìš”í•œ ì„¤ì •ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì—°ê²° íŒ©í† ë¦¬, ëª©ì ì§€ ì´ë¦„, ì „ì†¡ ëª¨ë“œ ë“±ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JmsItemWriterë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. JmsItemWriterë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. ì´ êµ¬ì„± ë‹¨ê³„ì—ì„œëŠ” ì—°ê²° íŒ©í† ë¦¬, ëª©ì ì§€ ì´ë¦„, ì „ì†¡ ëª¨ë“œ ë“±ì„ ì§€ì •í•©ë‹ˆë‹¤. ItemReaderì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì™€ ItemProcessorì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤. JmsItemWriter.write() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì²˜ë¦¬ëœ ë°ì´í„°ë¥¼ JMS ë©”ì‹œì§€ë¡œ ë³´ëƒ…ë‹ˆë‹¤. ì“°ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ë©´ JmsItemWriter.close() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ JMS ë¦¬ì†ŒìŠ¤ë¥¼ ë‹«ìŠµë‹ˆë‹¤. JmsItemWriterëŠ” ëŒ€ìš©ëŸ‰ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ì í•©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë©”ì‹œì§€ ì „ì†¡ ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, JmsItemWriterëŠ” JMS ê¸°ë°˜ ì‹œìŠ¤í…œê³¼ ì—°ë™í•˜ì—¬ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"},{"name":"Chunk","slug":"Spring/Spring-Batch/Step/Chunk","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/Chunk/"}],"tags":[]},{"title":"Spring Batch - ItemProcessor","slug":"spring/spring-batch/chunk/spring-batch-ItemProcessor","date":"2023-05-09T05:25:35.000Z","updated":"2024-02-26T15:29:57.670Z","comments":true,"path":"2023/05/09/spring/spring-batch/chunk/spring-batch-ItemProcessor/","link":"","permalink":"https://ckck803.github.io/2023/05/09/spring/spring-batch/chunk/spring-batch-ItemProcessor/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ItemProcessorItemProcessorëŠ” Step ë‚´ì—ì„œ ì‚¬ìš©ë  ë°ì´í„°ë¥¼ ë³€í™˜ ë˜ëŠ” ê°€ê³µí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ItemReaderê°€ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ ItemProcessorê°€ ë°›ì•„ë“¤ì—¬ ì²˜ë¦¬í•˜ê³ , ì²˜ë¦¬í•œ ê²°ê³¼ë¥¼ ItemWriterì— ì „ë‹¬í•©ë‹ˆë‹¤. ItemProcessorëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„° ë³€í™˜, ìœ íš¨ì„± ê²€ì‚¬, í•„í„°ë§ ë˜ëŠ” ë°ì´í„° ê°€ê³µê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ItemProcessorë¥¼ ì‚¬ìš©í•˜ì—¬ ì…ë ¥ ë°ì´í„°ì˜ ê¸¸ì´ë¥¼ ì œí•œí•˜ê±°ë‚˜, ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜, ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê±°ë‚˜, ë°ì´í„°ë¥¼ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ItemProcessorëŠ” ë‹¨ì¼ ì…ë ¥ ê°’ì„ ë°›ì•„ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ë‹¨ìˆœí•œ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì¸ ItemProcessor&lt;T, S&gt;ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ TëŠ” ì…ë ¥ ìœ í˜•ì´ê³ , SëŠ” ì¶œë ¥ ìœ í˜•ì…ë‹ˆë‹¤. ItemProcessorëŠ” ìŠ¤í… ì²˜ë¦¬ ê³¼ì •ì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ë³€í™˜ ë˜ëŠ” ê°€ê³µí•˜ì—¬ ItemWriterê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ë¯€ë¡œ, ëŒ€ìš©ëŸ‰ ë°ì´í„° ì„¸íŠ¸ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë° ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ë˜í•œ, ItemProcessorë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ë° ë°ì´í„° ê°€ê³µ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì—¬ ë°ì´í„° í’ˆì§ˆì„ ìœ ì§€í•˜ê³ , í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ItemProcessor ì¸í„°í˜ì´ìŠ¤","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ItemProcessorItemProcessorëŠ” Step ë‚´ì—ì„œ ì‚¬ìš©ë  ë°ì´í„°ë¥¼ ë³€í™˜ ë˜ëŠ” ê°€ê³µí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ItemReaderê°€ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ ItemProcessorê°€ ë°›ì•„ë“¤ì—¬ ì²˜ë¦¬í•˜ê³ , ì²˜ë¦¬í•œ ê²°ê³¼ë¥¼ ItemWriterì— ì „ë‹¬í•©ë‹ˆë‹¤. ItemProcessorëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„° ë³€í™˜, ìœ íš¨ì„± ê²€ì‚¬, í•„í„°ë§ ë˜ëŠ” ë°ì´í„° ê°€ê³µê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ItemProcessorë¥¼ ì‚¬ìš©í•˜ì—¬ ì…ë ¥ ë°ì´í„°ì˜ ê¸¸ì´ë¥¼ ì œí•œí•˜ê±°ë‚˜, ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜, ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê±°ë‚˜, ë°ì´í„°ë¥¼ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ItemProcessorëŠ” ë‹¨ì¼ ì…ë ¥ ê°’ì„ ë°›ì•„ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ë‹¨ìˆœí•œ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì¸ ItemProcessor&lt;T, S&gt;ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ TëŠ” ì…ë ¥ ìœ í˜•ì´ê³ , SëŠ” ì¶œë ¥ ìœ í˜•ì…ë‹ˆë‹¤. ItemProcessorëŠ” ìŠ¤í… ì²˜ë¦¬ ê³¼ì •ì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ë³€í™˜ ë˜ëŠ” ê°€ê³µí•˜ì—¬ ItemWriterê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ë¯€ë¡œ, ëŒ€ìš©ëŸ‰ ë°ì´í„° ì„¸íŠ¸ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë° ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ë˜í•œ, ItemProcessorë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ë° ë°ì´í„° ê°€ê³µ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì—¬ ë°ì´í„° í’ˆì§ˆì„ ìœ ì§€í•˜ê³ , í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ItemProcessor ì¸í„°í˜ì´ìŠ¤public interface ItemProcessor &#123; public Object processItem(Object item) throws Exception;&#125; ItemProccesor êµ¬í˜„ì²´ ì¢…ë¥˜ClassifierCompoisteItemProcessorClassifierCompositeItemProcessorëŠ” Spring Batchì˜ ItemProcessor ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¡œ, ë‹¤ì¤‘ í”„ë¡œì„¸ì‹± ì „ëµì„ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ëœ ì»´í¬ì§€íŠ¸(Composite) íŒ¨í„´ì˜ êµ¬í˜„ì²´ì…ë‹ˆë‹¤. ClassifierCompositeItemProcessorëŠ” Classifierë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ClassifierëŠ” í•˜ë‚˜ì˜ ì…ë ¥ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ ì¶œë ¥ ê°’ì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ClassifierCompositeItemProcessorëŠ” ì´ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ í•˜ë‚˜ì˜ ì…ë ¥ í•­ëª©ì„ ì—¬ëŸ¬ ê°œì˜ ItemProcessorì— ì „ë‹¬í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. CmopositeItemProcessorCustomItemProcessor","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"},{"name":"Chunk","slug":"Spring/Spring-Batch/Step/Chunk","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/Chunk/"}],"tags":[]},{"title":"Spring Batch - ItemReader","slug":"spring/spring-batch/chunk/spring-batch-ItemReader","date":"2023-05-09T04:25:35.000Z","updated":"2024-02-26T15:28:04.223Z","comments":true,"path":"2023/05/09/spring/spring-batch/chunk/spring-batch-ItemReader/","link":"","permalink":"https://ckck803.github.io/2023/05/09/spring/spring-batch/chunk/spring-batch-ItemReader/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ItemReaderItemReaderëŠ” ìŠ¤í… ë‚´ì—ì„œ ì‚¬ìš©ë  ë°ì´í„°ë¥¼ ì½ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ItemReaderëŠ” ìŠ¤í…ì´ ì‹œì‘ë  ë•Œ í˜¸ì¶œë˜ë©°, ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ Chunk ë‹¨ìœ„ë¡œ ItemProcessorì— ì „ë‹¬í•©ë‹ˆë‹¤. ItemReaderëŠ” ì¼ë°˜ì ìœ¼ë¡œ íŒŒì¼, ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” ë©”ì‹œì§• ì‹œìŠ¤í…œê³¼ ê°™ì€ ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Spring BatchëŠ” ë‹¤ì–‘í•œ ìœ í˜•ì˜ ItemReaderë¥¼ ì§€ì›í•˜ë©°, ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ItemReader ìœ í˜•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. FlatFileItemReader: CSV, ê³ ì • ê¸¸ì´ ë˜ëŠ” êµ¬ë¶„ ê¸°í˜¸ë¡œ êµ¬ë¶„ëœ íŒŒì¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JdbcCursorItemReader: JDBC ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³  ResultSetì—ì„œ ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JpaPagingItemReader: JPAë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê³  ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. StaxEventItemReader: XML ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JmsItemReader: JMS ëŒ€ê¸°ì—´ì—ì„œ ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ë‹¤ìˆ˜ì˜ êµ¬í˜„ì²´ë“¤ì´ ItemReader ì™€ ItemStream ì„ ë™ì‹œì— êµ¬í˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ItemStream ì€ íŒŒì¼ì˜ ìŠ¤íŠ¸ë¦¼ì„ ì—´ê±°ë‚˜ ì¢…ë£Œ, DB ì»¤ë„¥ì…˜ì„ ì—´ê±°ë‚˜ ì¢…ë£Œ, ì¶œë ¥ ì¥ì¹˜ ì´ˆê¸°í™” ë“±ì˜ ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ItemReaderItemReaderëŠ” ìŠ¤í… ë‚´ì—ì„œ ì‚¬ìš©ë  ë°ì´í„°ë¥¼ ì½ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ItemReaderëŠ” ìŠ¤í…ì´ ì‹œì‘ë  ë•Œ í˜¸ì¶œë˜ë©°, ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ Chunk ë‹¨ìœ„ë¡œ ItemProcessorì— ì „ë‹¬í•©ë‹ˆë‹¤. ItemReaderëŠ” ì¼ë°˜ì ìœ¼ë¡œ íŒŒì¼, ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” ë©”ì‹œì§• ì‹œìŠ¤í…œê³¼ ê°™ì€ ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Spring BatchëŠ” ë‹¤ì–‘í•œ ìœ í˜•ì˜ ItemReaderë¥¼ ì§€ì›í•˜ë©°, ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ItemReader ìœ í˜•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. FlatFileItemReader: CSV, ê³ ì • ê¸¸ì´ ë˜ëŠ” êµ¬ë¶„ ê¸°í˜¸ë¡œ êµ¬ë¶„ëœ íŒŒì¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JdbcCursorItemReader: JDBC ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³  ResultSetì—ì„œ ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JpaPagingItemReader: JPAë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê³  ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. StaxEventItemReader: XML ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JmsItemReader: JMS ëŒ€ê¸°ì—´ì—ì„œ ë°ì´í„°ë¥¼ ì½ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ë‹¤ìˆ˜ì˜ êµ¬í˜„ì²´ë“¤ì´ ItemReader ì™€ ItemStream ì„ ë™ì‹œì— êµ¬í˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ItemStream ì€ íŒŒì¼ì˜ ìŠ¤íŠ¸ë¦¼ì„ ì—´ê±°ë‚˜ ì¢…ë£Œ, DB ì»¤ë„¥ì…˜ì„ ì—´ê±°ë‚˜ ì¢…ë£Œ, ì¶œë ¥ ì¥ì¹˜ ì´ˆê¸°í™” ë“±ì˜ ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤. ItemReader ì¸í„°í˜ì´ìŠ¤public interface ItemReader&lt;T&gt; &#123; @Nullable T read() throws Exception, UnexpectedInputException, ParseException, NonTransientResourceException;&#125; ItemReader êµ¬í˜„ì²´FlatFileItemReaderFlatFileItemReaderëŠ” íŒŒì¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì…ë ¥ íŒŒì¼ì€ ë‹¤ì–‘í•œ í˜•ì‹ì˜ í…ìŠ¤íŠ¸ íŒŒì¼ì¼ ìˆ˜ ìˆìœ¼ë©°, ì¼ë°˜ì ìœ¼ë¡œ CSV(Comma-Separated Values) ë˜ëŠ” ê³ ì • ê¸¸ì´ í˜•ì‹ì˜ íŒŒì¼ì„ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. FlatFileItemReaderëŠ” Springì˜ Resource ì¶”ìƒí™”ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ê°€ì ¸ì˜¤ë©°, êµ¬ì„± ê°€ëŠ¥í•œ êµ¬ë¶„ì ë° í—¤ë”&#x2F;í‘¸í„° ì²˜ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ, íŒŒì¼ì˜ ê° ë ˆì½”ë“œë¥¼ Java ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ë¥¼ í†µí•´ ë‹¤ë¥¸ ìŠ¤í”„ë§ ë°°ì¹˜ êµ¬ì„± ìš”ì†Œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ë°ì´í„° ëª¨ë¸ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. FlatFileItemReaderBuilder saveState(boolean saveState) FlatFileItemReaderì˜ ìƒíƒœë¥¼ ì €ì¥í• ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. trueë¡œ ì„¤ì •í•˜ë©´ ìƒíƒœê°€ ì €ì¥ë˜ì–´ ì¬ì‹œì‘ ì‹œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬ë©ë‹ˆë‹¤. name(String name) FlatFileItemReaderì˜ ì´ë¦„ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ì´ë¦„ì€ ìŠ¤í… êµ¬ì„±ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. maxItemCount(int maxItemCount) ìµœëŒ€ ì½ê¸° ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê°’ì„ ì„¤ì •í•˜ë©´ ì§€ì •ëœ ìˆ˜ë§Œí¼ ì•„ì´í…œì„ ì½ì€ í›„ ë¦¬ë”ê°€ ëë‚©ë‹ˆë‹¤. currentItemCount(int currentItemCount) í˜„ì¬ ì½ì€ ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê°’ì„ ì„¤ì •í•˜ë©´ ë¦¬ë”ê°€ ì¬ì‹œì‘ë  ë•Œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬ë©ë‹ˆë‹¤. addComment(String comment) ì£¼ì„(comment)ì„ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ ì£¼ì„ì€ ì½ê¸° í”„ë¡œì„¸ìŠ¤ì˜ ë¡œê¹…ì´ë‚˜ ë””ë²„ê¹…ì— ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. comments(String... comments ë‹¤ì¤‘ ì£¼ì„(comments)ì„ ì¶”ê°€í•©ë‹ˆë‹¤. recordSeparatorPolicy(RecordSeparatorPolicy policy) ë ˆì½”ë“œ êµ¬ë¶„ ì •ì±…(RecordSeparatorPolicy)ì„ ì„¤ì •í•©ë‹ˆë‹¤. ë ˆì½”ë“œ êµ¬ë¶„ ì •ì±…ì€ í–‰ ì‚¬ì´ì˜ êµ¬ë¶„ìë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë ˆì½”ë“œë¥¼ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. bufferedReaderFactory(BufferedReaderFactory factory) BufferedReaderFactoryë¥¼ ì„¤ì •í•˜ì—¬ FlatFileItemReaderì—ì„œ ì‚¬ìš©í•  BufferedReaderë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì‚¬ìš©ì ì§€ì • BufferedReaderë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. resource(Resource resource) ì½ì„ ë¦¬ì†ŒìŠ¤(Resource)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. íŒŒì¼ ì‹œìŠ¤í…œ ê²½ë¡œ, í´ë˜ìŠ¤íŒ¨ìŠ¤ ë¦¬ì†ŒìŠ¤ ë“±ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. strict(boolean strict) ì—„ê²© ëª¨ë“œ(strict mode)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì—„ê²© ëª¨ë“œì—ì„œëŠ” ì…ë ¥ í–‰ì— ì˜ˆìƒë˜ëŠ” í•„ë“œ ìˆ˜ë³´ë‹¤ ì ì€ í•„ë“œê°€ ìˆëŠ” ê²½ìš° ì˜ˆì™¸ê°€ ë°œìƒí•©ë‹ˆë‹¤. encoding(String encoding) ì½ì„ íŒŒì¼ì˜ ì¸ì½”ë”©ì„ ì„¤ì •í•©ë‹ˆë‹¤. linesToSkip(int linesToSkip) ì½ê¸° ì‹œì‘ ì‹œ ê±´ë„ˆë›¸ í–‰ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. íŒŒì¼ì˜ ì²˜ìŒ ëª‡ í–‰ì„ ê±´ë„ˆë›°ê³  ë°ì´í„°ë¥¼ ì½ì„ì§€ ê²°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. skippedLinesCallback(LineCallbackHandler callback) ê±´ë„ˆë›´ í–‰ì— ëŒ€í•œ ì½œë°± ì²˜ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ê±´ë„ˆë›´ í–‰ì˜ ë‚´ìš©ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. lineMapper(LineMapper&lt;T&gt; lineMapper) í–‰ì„ ë„ë©”ì¸ ê°ì²´ë¡œ ë§¤í•‘í•˜ëŠ” LineMapperë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. fieldSetMapper(FieldSetMapper&lt;T&gt; mapper) FieldSetMapperë¥¼ ì„¤ì •í•˜ì—¬ í•„ë“œ ì„¸íŠ¸ë¥¼ ë„ë©”ì¸ ê°ì²´ë¡œ ë§¤í•‘í•©ë‹ˆë‹¤. lineTokenizer(LineTokenizer tokenizer) í–‰ì„ í•„ë“œë¡œ ë¶„ë¦¬í•˜ëŠ” LineTokenizerë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. public DelimitedBuilder&lt;T&gt; delimited() êµ¬ë¶„ì(delimiter) ê¸°ë°˜ì˜ í•„ë“œ êµ¬ì„±ì„ ìœ„í•œ DelimitedBuilderë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. public FixedLengthBuilder&lt;T&gt; fixedLength() ê³ ì • ê¸¸ì´ í•„ë“œ êµ¬ì„±ì„ ìœ„í•œ FixedLengthBuilderë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê³ ì • ê¸¸ì´ í•„ë“œëŠ” íŠ¹ì • ìœ„ì¹˜ì—ì„œ ê³ ì •ëœ ê¸¸ì´ë¡œ ê°’ì„ ì¶”ì¶œí•©ë‹ˆë‹¤. targetType(Class&lt;? extends T&gt; targetType ì½ì€ ë°ì´í„°ë¥¼ ë§¤í•‘í•  ë„ë©”ì¸ ê°ì²´ì˜ íƒ€ì…ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì œë„¤ë¦­ íƒ€ì…ìœ¼ë¡œ ì§€ì •ëœ íƒ€ì…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. prototypeBeanName(String prototypeBeanName) í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ì´ë¦„ì„ ì„¤ì •í•©ë‹ˆë‹¤. í”„ë¡œí† íƒ€ì… ë¹ˆì€ ë§¤ë²ˆ ìƒì„±ë˜ëŠ” ë¹ˆìœ¼ë¡œ, ìƒíƒœë¥¼ ê³µìœ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. beanFactory(BeanFactory beanFactory) BeanFactoryë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. FlatFileItemReaderê°€ ë¹ˆì„ ìƒì„±í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. customEditors(Map&lt;Class&lt;?&gt;, PropertyEditor&gt; customEditors) ì‚¬ìš©ì ì •ì˜ PropertyEditorë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. íŠ¹ì • íƒ€ì…ì˜ í”„ë¡œí¼í‹°ì— ëŒ€í•œ ë³€í™˜ì„ ì‚¬ìš©ìê°€ ì •ì˜í•œ PropertyEditorë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. distanceLimit(int distanceLimit) ê±°ë¦¬ ì œí•œ(distance limit)ì„ ì„¤ì •í•©ë‹ˆë‹¤. ê±°ë¦¬ ì œí•œì€ í•„ë“œ ì¶”ì¶œ ì‹œ ìµœëŒ€ ê¸¸ì´ë¥¼ ì œí•œí•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. beanMapperStrict(boolean beanMapperStrict) BeanMapperì˜ ì—„ê²© ëª¨ë“œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì—„ê²© ëª¨ë“œì—ì„œëŠ” í•„ë“œ ë§¤í•‘ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•©ë‹ˆë‹¤. public FlatFileItemReader&lt;T&gt; build() ì„¤ì •ëœ ê°’ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ FlatFileItemReaderë¥¼ ìƒì„±í•©ë‹ˆë‹¤. private void updateTokenizerValidation(Object tokenizer, int index) í† í°í™”ê¸°(Tokenizer)ì˜ ìœ íš¨ì„±ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ë‚´ë¶€ ë©”ì†Œë“œì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìëŠ” ì´ ë©”ì†Œë“œë¥¼ ì§ì ‘ í˜¸ì¶œí•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. JdbcCursorItemReaderJdbcCursorItemReaderëŠ” Spring Batch í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ItemReaderì˜ êµ¬í˜„ì²´ ì¤‘ í•˜ë‚˜ë¡œ, JDBCë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. JdbcCursorItemReaderëŠ” SQL ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³  ê²°ê³¼ ì§‘í•©ì„ ì»¤ì„œ(cursor)ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ì ¸ì˜µë‹ˆë‹¤. ì´ ì»¤ì„œëŠ” ê²°ê³¼ ì§‘í•©ì„ í•œ ë²ˆì— ì „ì²´ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ì§€ ì•Šê³ , í•„ìš”í•œ ë¶€ë¶„ë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì´ëŠ” ëŒ€ê·œëª¨ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. JdbcCursorItemReaderëŠ” êµ¬ì„± ê°€ëŠ¥í•œ SQL ì¿¼ë¦¬, ë§¤ê°œ ë³€ìˆ˜ ë°”ì¸ë”©, í˜ì´ì§• ë° ì •ë ¬ì„ ì§€ì›í•©ë‹ˆë‹¤. ë˜í•œ, ë°ì´í„°ë² ì´ìŠ¤ì˜ ê° ë ˆì½”ë“œë¥¼ Java ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ë¥¼ í†µí•´ ë‹¤ë¥¸ ìŠ¤í”„ë§ ë°°ì¹˜ êµ¬ì„± ìš”ì†Œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ë°ì´í„° ëª¨ë¸ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. JdbcCursorItemReaderBuilder saveState(boolean saveState) JdbcCursorItemReaderì˜ ìƒíƒœë¥¼ ì €ì¥í• ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. trueë¡œ ì„¤ì •í•˜ë©´ ìƒíƒœê°€ ì €ì¥ë˜ì–´ ì¬ì‹œì‘ ì‹œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬ë©ë‹ˆë‹¤. name(String name) JdbcCursorItemReaderì˜ ì´ë¦„ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ì´ë¦„ì€ ìŠ¤í… êµ¬ì„±ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. maxItemCount(int maxItemCount) ìµœëŒ€ ì½ê¸° ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê°’ì„ ì„¤ì •í•˜ë©´ ì§€ì •ëœ ìˆ˜ë§Œí¼ ì•„ì´í…œì„ ì½ì€ í›„ ë¦¬ë”ê°€ ëë‚©ë‹ˆë‹¤. currentItemCount(int currentItemCount) í˜„ì¬ ì½ì€ ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê°’ì„ ì„¤ì •í•˜ë©´ ë¦¬ë”ê°€ ì¬ì‹œì‘ë  ë•Œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬ë©ë‹ˆë‹¤. dataSource(DataSource dataSource) ì‚¬ìš©í•  ë°ì´í„° ì†ŒìŠ¤(DataSource)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. JDBC ì—°ê²°ì„ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. fetchSize(int fetchSize) í•œ ë²ˆì— ê°€ì ¸ì˜¬ ë ˆì½”ë“œ ìˆ˜(fetch size)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. í° ë°ì´í„°ì…‹ì„ ì²˜ë¦¬í•  ë•Œ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤. maxRows(int maxRows) ìµœëŒ€ ë°˜í™˜ë˜ëŠ” í–‰ ìˆ˜ë¥¼ ì œí•œí•©ë‹ˆë‹¤. queryTimeout(int queryTimeout) ì¿¼ë¦¬ ì‹¤í–‰ ì‹œ íƒ€ì„ì•„ì›ƒ ì‹œê°„ì„ ì„¤ì •í•©ë‹ˆë‹¤. ignoreWarnings(boolean ignoreWarnings) ê²½ê³ (warning)ë¥¼ ë¬´ì‹œí• ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. verifyCursorPosition(boolean verifyCursorPosition) ì»¤ì„œ ìœ„ì¹˜ë¥¼ í™•ì¸í• ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì»¤ì„œ ìœ„ì¹˜ í™•ì¸ì€ ì½ê¸° ì§„í–‰ ì¤‘ ì»¤ì„œê°€ ì •ìƒì ì¸ ìœ„ì¹˜ì— ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ì‘ì—…ì…ë‹ˆë‹¤. driverSupportsAbsolute(boolean driverSupportsAbsolute) ë“œë¼ì´ë²„ê°€ ì ˆëŒ€ ì»¤ì„œ ìœ„ì¹˜ë¥¼ ì§€ì›í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. useSharedExtendedConnection(boolean useSharedExtendedConnection) ê³µìœ  í™•ì¥ ì—°ê²°(shared extended connection)ì„ ì‚¬ìš©í• ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. preparedStatementSetter(PreparedStatementSetter preparedStatementSetter) PreparedStatementSetterë¥¼ ì„¤ì •í•˜ì—¬ SQL ë¬¸ì— ì¸ìˆ˜ë¥¼ ë°”ì¸ë”©í•©ë‹ˆë‹¤. queryArguments(Object... args) SQL ì¿¼ë¦¬ì˜ ì¸ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ê°€ë³€ ì¸ìˆ˜ë¡œ ì „ë‹¬ë˜ë©°, ì¿¼ë¦¬ì— ë§¤í•‘ë˜ëŠ” ìˆœì„œëŒ€ë¡œ ì¸ìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤. queryArguments(Object[] args, int[] types) SQL ì¿¼ë¦¬ì˜ ì¸ìˆ˜ì™€ í•´ë‹¹ ì¸ìˆ˜ì˜ JDBC íƒ€ì…ì„ ì„¤ì •í•©ë‹ˆë‹¤. queryArguments(List&lt;?&gt; args) SQL ì¿¼ë¦¬ì˜ ì¸ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. List í˜•íƒœë¡œ ì¸ìˆ˜ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. sql(String sql) ì‹¤í–‰í•  SQL ë¬¸ì„ ì„¤ì •í•©ë‹ˆë‹¤. rowMapper(RowMapper&lt;T&gt; rowMapper) RowMapperë¥¼ ì„¤ì •í•˜ì—¬ ResultSetì˜ í–‰ì„ ë„ë©”ì¸ ê°ì²´ë¡œ ë§¤í•‘í•©ë‹ˆë‹¤. beanRowMapper(Class&lt;T&gt; mappedClass) BeanRowMapperë¥¼ ì„¤ì •í•˜ì—¬ ResultSetì˜ í–‰ì„ ì§€ì •ëœ ë„ë©”ì¸ ê°ì²´ íƒ€ì…ìœ¼ë¡œ ë§¤í•‘í•©ë‹ˆë‹¤. JpaPagingItemReaderJpaPagingItemReaderëŠ” Spring Batch í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ItemReaderì˜ êµ¬í˜„ì²´ ì¤‘ í•˜ë‚˜ë¡œ, JPA(Java Persistence API)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í˜ì´ì§€ë³„ë¡œ ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. JpaPagingItemReaderëŠ” Spring Data JPAë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë©°, í˜ì´ì§• ë° ì •ë ¬ì„ ì§€ì›í•©ë‹ˆë‹¤. ì´ëŠ” ëŒ€ê·œëª¨ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. JpaPagingItemReaderëŠ” êµ¬ì„± ê°€ëŠ¥í•œ JPA ì¿¼ë¦¬, ë§¤ê°œ ë³€ìˆ˜ ë°”ì¸ë”©, í˜ì´ì§• ë° ì •ë ¬ì„ ì§€ì›í•©ë‹ˆë‹¤. ë˜í•œ, ë°ì´í„°ë² ì´ìŠ¤ì˜ ê° ë ˆì½”ë“œë¥¼ Java ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ë¥¼ í†µí•´ ë‹¤ë¥¸ ìŠ¤í”„ë§ ë°°ì¹˜ êµ¬ì„± ìš”ì†Œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ë°ì´í„° ëª¨ë¸ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. JpaPagingItemReaderBuilder saveState(boolean saveState) JpaPagingItemReaderì˜ ìƒíƒœë¥¼ ì €ì¥í• ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. trueë¡œ ì„¤ì •í•˜ë©´ ìƒíƒœê°€ ì €ì¥ë˜ì–´ ì¬ì‹œì‘ ì‹œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬ë©ë‹ˆë‹¤. name(String name) JpaPagingItemReaderì˜ ì´ë¦„ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ì´ë¦„ì€ ìŠ¤í… êµ¬ì„±ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. maxItemCount(int maxItemCount) ìµœëŒ€ ì½ê¸° ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê°’ì„ ì„¤ì •í•˜ë©´ ì§€ì •ëœ ìˆ˜ë§Œí¼ ì•„ì´í…œì„ ì½ì€ í›„ ë¦¬ë”ê°€ ëë‚©ë‹ˆë‹¤. currentItemCount(int currentItemCount) í˜„ì¬ ì½ì€ ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê°’ì„ ì„¤ì •í•˜ë©´ ë¦¬ë”ê°€ ì¬ì‹œì‘ë  ë•Œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬ë©ë‹ˆë‹¤. pageSize(int pageSize) í•œ í˜ì´ì§€ì—ì„œ ì½ì„ ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. í˜ì´ì§€ë§ˆë‹¤ ì¼ê´„ ì²˜ë¦¬ë  ì•„ì´í…œ ìˆ˜ë¥¼ ì œì–´í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. parameterValues(Map&lt;String, Object&gt; parameterValues) JPA ì¿¼ë¦¬ì˜ ë§¤ê°œë³€ìˆ˜ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤. ë§¤ê°œë³€ìˆ˜ ì´ë¦„ê³¼ ê°’ì„ ë§¤í•‘í•˜ëŠ” ë§µì„ ì „ë‹¬í•©ë‹ˆë‹¤. queryProvider(JpaQueryProvider queryProvider) JpaQueryProviderë¥¼ ì„¤ì •í•˜ì—¬ JPA ì¿¼ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. JpaQueryProviderëŠ” ë°ì´í„°ë² ì´ìŠ¤ì™€ ê´€ë ¨ëœ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. queryString(String queryString) ì§ì ‘ ì¿¼ë¦¬ ë¬¸ìì—´ì„ ì„¤ì •í•©ë‹ˆë‹¤. JPA ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì§€ì •í•˜ê³ ì í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. transacted(boolean transacted) íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. trueë¡œ ì„¤ì •í•˜ë©´ ë¦¬ë”ëŠ” íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. entityManagerFactory(EntityManagerFactory entityManagerFactory) ì‚¬ìš©í•  EntityManagerFactoryë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. JPA ì—°ê²°ì„ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. build() ì„¤ì •ëœ ê°’ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ JpaPagingItemReaderë¥¼ ìƒì„±í•©ë‹ˆë‹¤. StaxEventItemReaderStaxEventItemReaderëŠ” Spring Batch í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ItemReaderì˜ êµ¬í˜„ì²´ ì¤‘ í•˜ë‚˜ë¡œ, XML ë¬¸ì„œì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. StaxEventItemReaderëŠ” XMLì„ íŒŒì‹±í•˜ëŠ” ë°ì— StAX(Streaming API for XML)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëŒ€ìš©ëŸ‰ XML íŒŒì¼ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìœ¼ë©°, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. StaxEventItemReaderëŠ” êµ¬ì„± ê°€ëŠ¥í•œ XML ìŠ¤í‚¤ë§ˆ, íƒœê·¸ ì´ë¦„ ë° XPathë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ë˜í•œ, XMLì˜ ê° ë…¸ë“œë¥¼ Java ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ë¥¼ í†µí•´ ë‹¤ë¥¸ ìŠ¤í”„ë§ ë°°ì¹˜ êµ¬ì„± ìš”ì†Œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ë°ì´í„° ëª¨ë¸ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. StaxEventItemReaderBuilder saveState(boolean saveState) StaxEventItemReaderì˜ ìƒíƒœë¥¼ ì €ì¥í• ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. trueë¡œ ì„¤ì •í•˜ë©´ ìƒíƒœê°€ ì €ì¥ë˜ì–´ ì¬ì‹œì‘ ì‹œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬ë©ë‹ˆë‹¤. name(String name) StaxEventItemReaderì˜ ì´ë¦„ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ì´ë¦„ì€ ìŠ¤í… êµ¬ì„±ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. maxItemCount(int maxItemCount) ìµœëŒ€ ì½ê¸° ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê°’ì„ ì„¤ì •í•˜ë©´ ì§€ì •ëœ ìˆ˜ë§Œí¼ ì•„ì´í…œì„ ì½ì€ í›„ ë¦¬ë”ê°€ ëë‚©ë‹ˆë‹¤. currentItemCount(int currentItemCount) í˜„ì¬ ì½ì€ ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê°’ì„ ì„¤ì •í•˜ë©´ ë¦¬ë”ê°€ ì¬ì‹œì‘ë  ë•Œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬ë©ë‹ˆë‹¤. resource(Resource resource) ì½ì„ XML ë¦¬ì†ŒìŠ¤(Resource)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. unmarshaller(Unmarshaller unmarshaller) Unmarshallerë¥¼ ì„¤ì •í•˜ì—¬ XMLì„ ë„ë©”ì¸ ê°ì²´ë¡œ ì–¸ë§ˆìƒ¬ë§í•©ë‹ˆë‹¤. addFragmentRootElements(String... fragmentRootElements) íŒŒí¸(fragment)ì˜ ë£¨íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì§€ì •ëœ ì—˜ë¦¬ë¨¼íŠ¸ ì´ë¦„ì˜ í•˜ìœ„ ìš”ì†Œë¥¼ ì•„ì´í…œìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. addFragmentRootElements(List&lt;String&gt; fragmentRootElements) íŒŒí¸(fragment)ì˜ ë£¨íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì§€ì •ëœ ì—˜ë¦¬ë¨¼íŠ¸ ì´ë¦„ì˜ í•˜ìœ„ ìš”ì†Œë¥¼ ì•„ì´í…œìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. List í˜•íƒœë¡œ ì—˜ë¦¬ë¨¼íŠ¸ ì´ë¦„ì„ ì „ë‹¬í•©ë‹ˆë‹¤. strict(boolean strict) ì—„ê²© ëª¨ë“œ(strict mode)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì—„ê²© ëª¨ë“œì—ì„œëŠ” XML êµ¬ì¡°ì— ëŒ€í•œ ê²€ì¦ì´ ìˆ˜í–‰ë˜ë©°, ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•©ë‹ˆë‹¤. xmlInputFactory(XMLInputFactory xmlInpzutFactory) ì‚¬ìš©í•  XMLInputFactoryë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. StAX ì´ë²¤íŠ¸ ë¦¬ë”ë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. encoding(String encoding) XML ì¸ì½”ë”©ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì½ì„ XMLì˜ ì¸ì½”ë”©ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. build() ì„¤ì •ëœ ê°’ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ StaxEventItemReaderë¥¼ ìƒì„±í•©ë‹ˆë‹¤. JmsItemReader JmsItemReaderBuilder ì— ì˜í•´ ìƒì„±ë˜ëŠ” ItemReaderì˜ êµ¬í˜„ì²´ ì¤‘ í•˜ë‚˜ JMS(Java Message Service)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì‹œì§€ íì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. JmsItemReaderëŠ” êµ¬ì„± ê°€ëŠ¥í•œ JMS ëª©ì ì§€(destination), ë©”ì‹œì§€ ì„ íƒì(selector), ë©”ì‹œì§€ ìˆ˜ì‹  íƒ€ì„ì•„ì›ƒ(timeout) ë“±ì„ ì§€ì›í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë©”ì‹œì§€ íì—ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì„ íƒì ìœ¼ë¡œ ì½ì–´ì˜¤ê±°ë‚˜, ë©”ì‹œì§€ íì—ì„œ ì¼ì • ì‹œê°„ ì´ë‚´ì— ìˆ˜ì‹ ë˜ì§€ ì•Šì€ ë©”ì‹œì§€ë¥¼ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JmsItemReaderëŠ” ë©”ì‹œì§€ë¥¼ Java ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ë¥¼ í†µí•´ ë‹¤ë¥¸ ìŠ¤í”„ë§ ë°°ì¹˜ êµ¬ì„± ìš”ì†Œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ë°ì´í„° ëª¨ë¸ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. JmsItemReaderBuilder jmsTemplate(JmsOperations jmsTemplate) ì‚¬ìš©í•  JmsOperations (ì¼ë°˜ì ìœ¼ë¡œ JmsTemplate)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. JmsOperationsëŠ” JMS ë©”ì‹œì§€ë¥¼ ì†¡ìˆ˜ì‹ í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. JmsItemReaderëŠ” ì´ JmsOperationsë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ì½ì–´ì˜µë‹ˆë‹¤. itemType(Class&lt;? extends T&gt; itemType) ì½ì–´ì˜¬ JMS ë©”ì‹œì§€ë¥¼ ë§¤í•‘í•  ë„ë©”ì¸ ê°ì²´ì˜ í´ë˜ìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. itemTypeìœ¼ë¡œ ì§€ì •ëœ í´ë˜ìŠ¤ì— ëŒ€í•œ ë§¤í•‘ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤. build() ì„¤ì •ëœ ê°’ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ JmsItemReaderë¥¼ ìƒì„±í•©ë‹ˆë‹¤. JdbcPagingItemReader JdbcPagingItemReaderBuilder ì— ì˜í•´ ìƒì„±ë˜ëŠ” ItemReaderì˜ êµ¬í˜„ì²´ JdbcPagingItemReaderëŠ” JDBCë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§• ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ëŠ” Spring Batchì˜ ë¦¬ë”ì…ë‹ˆë‹¤. ì£¼ë¡œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ í˜ì´ì§• ì²˜ë¦¬í•˜ì—¬ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. JdbcPagingItemReaderëŠ” í˜ì´ì§€ë§ˆë‹¤ ì¼ê´„ ì²˜ë¦¬ë  ì•„ì´í…œ ìˆ˜ë¥¼ ì§€ì •í•˜ì—¬ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° í˜ì´ì§€ì—ì„œëŠ” ì§€ì •ëœ ìˆ˜ì˜ ì•„ì´í…œì„ ë°ì´í„°ë² ì´ìŠ¤ë¡œë¶€í„° ì¡°íšŒí•˜ì—¬ ì²˜ë¦¬í•˜ë©°, í˜ì´ì§€ë§ˆë‹¤ ì»¤ì„œë¥¼ ì´ë™ì‹œí‚¤ë©´ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì˜µë‹ˆë‹¤. JdbcPagingItemReaderëŠ” ë‹¤ìŒê³¼ ê°™ì€ í•µì‹¬ êµ¬ì„± ìš”ì†Œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤: DataSource: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ê°ì²´ë¡œ, JdbcPagingItemReaderê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. PagingQueryProvider: í˜ì´ì§€ë³„ë¡œ ì‹¤í–‰í•  SQL ì¿¼ë¦¬ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ì˜ ìœ í˜•ì— ë”°ë¼ ì ì ˆí•œ QueryProviderë¥¼ ì„ íƒí•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. RowMapper: JdbcPagingItemReaderê°€ ì¡°íšŒí•œ ê° í–‰ì„ ë„ë©”ì¸ ê°ì²´ë¡œ ë§¤í•‘í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. RowMapperëŠ” Springì˜ RowMapper ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ì‘ì„±í•˜ë©°, ë§¤í•‘ ë¡œì§ì„ ì •ì˜í•©ë‹ˆë‹¤. JdbcPagingItemReaderë¥¼ êµ¬ì„±í•  ë•ŒëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¥¼ ë”°ë¦…ë‹ˆë‹¤: DataSource ì„¤ì •: JdbcPagingItemReaderì˜ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. Springì˜ DataSource ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤. PagingQueryProvider ì„¤ì •: ë°ì´í„°ë² ì´ìŠ¤ ìœ í˜•ì— ë”°ë¼ ì ì ˆí•œ PagingQueryProviderë¥¼ ì„ íƒí•˜ê³  ì„¤ì •í•©ë‹ˆë‹¤. ì´ QueryProviderëŠ” í˜ì´ì§€ë³„ë¡œ ì‹¤í–‰ë  SQL ì¿¼ë¦¬ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ëŒ€í‘œì ìœ¼ë¡œ JdbcPagingItemReaderì—ì„œëŠ” SqlPagingQueryProviderFactoryBeanì„ ì‚¬ìš©í•˜ì—¬ QueryProviderë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. RowMapper ì„¤ì •: ì¡°íšŒí•œ ê° í–‰ì„ ë§¤í•‘í•  RowMapperë¥¼ êµ¬í˜„í•˜ê³  ì„¤ì •í•©ë‹ˆë‹¤. ê° í–‰ì„ ë„ë©”ì¸ ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ë§¤í•‘ ë¡œì§ì„ ì •ì˜í•©ë‹ˆë‹¤. ê¸°íƒ€ ì„¤ì •: fetchSize, pageSize, parameterValues ë“± JdbcPagingItemReaderì˜ ë™ì‘ì— ì˜í–¥ì„ ì£¼ëŠ” ì¶”ê°€ ì„¤ì •ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. JdbcPagingItemReader ìƒì„±: ìœ„ì—ì„œ êµ¬ì„±í•œ ê°’ë“¤ì„ ì‚¬ìš©í•˜ì—¬ JdbcPagingItemReader ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. JdbcPagingItemReaderëŠ” Spring Batchì˜ ìŠ¤í… êµ¬ì„±ì—ì„œ ë¦¬ë”ë¡œ ì‚¬ìš©ë˜ë©°, ì²­í¬ ë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ì½ì–´ì˜µë‹ˆë‹¤. ê° ì²­í¬ì—ì„œëŠ” JdbcPagingItemReaderê°€ í˜ì´ì§€ë³„ë¡œ ì§€ì •ëœ ìˆ˜ì˜ ì•„ì´í…œì„ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¡°íšŒí•˜ì—¬ ì²˜ë¦¬í•©ë‹ˆë‹¤. JdbcPagingItemReaderBuilder saveState(boolean saveState) JdbcPagingItemReaderì˜ ìƒíƒœë¥¼ ì €ì¥í• ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. trueë¡œ ì„¤ì •í•˜ë©´ ìƒíƒœê°€ ì €ì¥ë˜ì–´ ì¬ì‹œì‘ ì‹œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬ë©ë‹ˆë‹¤. name(String name) JdbcPagingItemReaderì˜ ì´ë¦„ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ì´ë¦„ì€ ìŠ¤í… êµ¬ì„±ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. maxItemCount(int maxItemCount) ìµœëŒ€ ì½ê¸° ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê°’ì„ ì„¤ì •í•˜ë©´ ì§€ì •ëœ ìˆ˜ë§Œí¼ ì•„ì´í…œì„ ì½ì€ í›„ ë¦¬ë”ê°€ ëë‚©ë‹ˆë‹¤. currentItemCount(int currentItemCount) í˜„ì¬ ì½ì€ ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ê°’ì„ ì„¤ì •í•˜ë©´ ë¦¬ë”ê°€ ì¬ì‹œì‘ë  ë•Œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬ë©ë‹ˆë‹¤. dataSource(DataSource dataSource) ì‚¬ìš©í•  DataSourceë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. JdbcPagingItemReaderëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ìˆ˜í–‰í•  ë•Œ ì´ DataSourceë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. fetchSize(int fetchSize) ë°ì´í„°ë² ì´ìŠ¤ë¡œë¶€í„° í•œ ë²ˆì— ê°€ì ¸ì˜¬ í–‰ì˜ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. rowMapper(RowMapper&lt;T&gt; rowMapper) ê° í–‰ì„ ë„ë©”ì¸ ê°ì²´ë¡œ ë§¤í•‘í•˜ëŠ” RowMapperë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. beanRowMapper(Class&lt;T&gt; mappedClass) ë„ë©”ì¸ ê°ì²´ì˜ í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ BeanPropertyRowMapperë¥¼ ìƒì„±í•˜ì—¬ RowMapperë¡œ ì„¤ì •í•©ë‹ˆë‹¤. parameterValues(Map&lt;String, Object&gt; parameterValues) SQL ì¿¼ë¦¬ì˜ ë§¤ê°œë³€ìˆ˜ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤. ë§¤ê°œë³€ìˆ˜ ì´ë¦„ê³¼ ê°’ì„ ë§¤í•‘í•˜ëŠ” ë§µì„ ì „ë‹¬í•©ë‹ˆë‹¤. pageSize(int pageSize) í•œ í˜ì´ì§€ì—ì„œ ì½ì„ ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. í˜ì´ì§€ë§ˆë‹¤ ì¼ê´„ ì²˜ë¦¬ë  ì•„ì´í…œ ìˆ˜ë¥¼ ì œì–´í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. groupClause(String groupClause) SQL ì¿¼ë¦¬ì˜ GROUP BY ì ˆì„ ì„¤ì •í•©ë‹ˆë‹¤. selectClause(String selectClause) SQL ì¿¼ë¦¬ì˜ SELECT ì ˆì„ ì„¤ì •í•©ë‹ˆë‹¤. fromClause(String fromClause) SQL ì¿¼ë¦¬ì˜ FROM ì ˆì„ ì„¤ì •í•©ë‹ˆë‹¤. whereClause(String whereClause) SQL ì¿¼ë¦¬ì˜ WHERE ì ˆì„ ì„¤ì •í•©ë‹ˆë‹¤. sortKeys(Map&lt;String, Order&gt; sortKeys) SQL ì¿¼ë¦¬ì˜ ì •ë ¬ í‚¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ë§µìœ¼ë¡œ ì •ë ¬ í‚¤ì™€ ì •ë ¬ ë°©ì‹(Order)ì„ ì§€ì •í•©ë‹ˆë‹¤. queryProvider(PagingQueryProvider provider) PagingQueryProviderë¥¼ ì„¤ì •í•˜ì—¬ SQL ì¿¼ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. JdbcPagingItemReaderëŠ” í˜ì´ì§• ì¿¼ë¦¬ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ê¸° ìœ„í•´ ì´ QueryProviderë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. build() ì„¤ì •ëœ ê°’ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ JdbcPagingItemReaderë¥¼ ìƒì„±í•©ë‹ˆë‹¤. private PagingQueryProvider determineQueryProvider(DataSource dataSource) DataSourceë¥¼ ê¸°ë°˜ìœ¼ë¡œ PagingQueryProviderë¥¼ ê²°ì •í•©ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ìœ í˜•ì— ë”°ë¼ ì í•©í•œ QueryProviderë¥¼ ì„ íƒí•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"},{"name":"Chunk","slug":"Spring/Spring-Batch/Step/Chunk","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/Chunk/"}],"tags":[]},{"title":"Spring Batch - ChunkProvider ì™€ ChunkProcessor","slug":"spring/spring-batch/chunk/spring-batch-ChunkProvider_ChunkProcessor","date":"2023-05-09T03:25:35.000Z","updated":"2024-02-26T15:27:55.184Z","comments":true,"path":"2023/05/09/spring/spring-batch/chunk/spring-batch-ChunkProvider_ChunkProcessor/","link":"","permalink":"https://ckck803.github.io/2023/05/09/spring/spring-batch/chunk/spring-batch-ChunkProvider_ChunkProcessor/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ChunkProviderChunkProviderëŠ” ItemReaderì—ì„œ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ Chunk ë‹¨ìœ„ë¡œ ë¶„í• í•˜ì—¬ ItemProcessor ë° ItemWriterì— ì „ë‹¬í•˜ëŠ” ê°ì²´ ChunkProviderëŠ” ìŠ¤í…ì„ ì‹¤í–‰í•  ë•Œ Chunk&lt;I&gt; ê°ì²´ë¥¼ ë§Œë“¤ê³  Chunkì˜ í¬ê¸°ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Chunkì˜ í¬ê¸°ë¥¼ 10ìœ¼ë¡œ ì„¤ì •í•˜ë©´, ItemReaderì—ì„œ 10ê°œì˜ ë°ì´í„°ë¥¼ ì½ì–´ì™€ì„œ ItemProcessor ì™€ ItemWriterì— ì „ë‹¬í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê³¼ì •ì„ Chunk ë‹¨ìœ„ë¡œ ë°˜ë³µí•˜ì—¬ ëª¨ë“  ë°ì´í„°ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ChunkProviderëŠ” ItemReaderì—ì„œ ë°˜í™˜ëœ ëª¨ë“  ë°ì´í„°ë¥¼ ì €ì¥í•˜ì§€ ì•Šê³ , Chunk ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ë§¤ìš° íš¨ìœ¨ì ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ìµœì†Œí™”í•˜ê³ , ì²˜ë¦¬ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Batchì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ SimpleChunkProviderë¥¼ ì œê³µí•©ë‹ˆë‹¤. SimpleChunkProviderëŠ” Chunkì˜ í¬ê¸°ë¥¼ ì§€ì •í•˜ê³ , ItemReaderì—ì„œ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ Chunk ë‹¨ìœ„ë¡œ ë¶„í• í•˜ì—¬ ItemProcessor ë° ItemWriterì— ì „ë‹¬í•©ë‹ˆë‹¤. ë˜í•œ, SimpleChunkProviderëŠ” ì‹¤íŒ¨ ì‹œ ë¡¤ë°±ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ChunkProviderChunkProviderëŠ” ItemReaderì—ì„œ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ Chunk ë‹¨ìœ„ë¡œ ë¶„í• í•˜ì—¬ ItemProcessor ë° ItemWriterì— ì „ë‹¬í•˜ëŠ” ê°ì²´ ChunkProviderëŠ” ìŠ¤í…ì„ ì‹¤í–‰í•  ë•Œ Chunk&lt;I&gt; ê°ì²´ë¥¼ ë§Œë“¤ê³  Chunkì˜ í¬ê¸°ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Chunkì˜ í¬ê¸°ë¥¼ 10ìœ¼ë¡œ ì„¤ì •í•˜ë©´, ItemReaderì—ì„œ 10ê°œì˜ ë°ì´í„°ë¥¼ ì½ì–´ì™€ì„œ ItemProcessor ì™€ ItemWriterì— ì „ë‹¬í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê³¼ì •ì„ Chunk ë‹¨ìœ„ë¡œ ë°˜ë³µí•˜ì—¬ ëª¨ë“  ë°ì´í„°ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ChunkProviderëŠ” ItemReaderì—ì„œ ë°˜í™˜ëœ ëª¨ë“  ë°ì´í„°ë¥¼ ì €ì¥í•˜ì§€ ì•Šê³ , Chunk ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ë§¤ìš° íš¨ìœ¨ì ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ìµœì†Œí™”í•˜ê³ , ì²˜ë¦¬ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Batchì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ SimpleChunkProviderë¥¼ ì œê³µí•©ë‹ˆë‹¤. SimpleChunkProviderëŠ” Chunkì˜ í¬ê¸°ë¥¼ ì§€ì •í•˜ê³ , ItemReaderì—ì„œ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ Chunk ë‹¨ìœ„ë¡œ ë¶„í• í•˜ì—¬ ItemProcessor ë° ItemWriterì— ì „ë‹¬í•©ë‹ˆë‹¤. ë˜í•œ, SimpleChunkProviderëŠ” ì‹¤íŒ¨ ì‹œ ë¡¤ë°±ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ChunkProviderëŠ” Chunk ê¸°ë°˜ ìŠ¤í…ì˜ í•µì‹¬ ì—­í• ì„ ìˆ˜í–‰í•˜ë¯€ë¡œ, ChunkProviderì˜ êµ¬í˜„ ë°©ì‹ì€ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. ìµœì ì˜ ChunkProvider êµ¬í˜„ ë°©ì‹ì„ ì„ íƒí•˜ì—¬ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ChunkProvider ì¸í„°í˜ì´ìŠ¤public interface ChunkProvider&lt;T&gt; &#123; Chunk&lt;T&gt; provide(StepContribution contribution) throws Exception; void postProcess(StepContribution contribution, Chunk&lt;T&gt; chunk);&#125; SimpleChunkProvider@Overridepublic Chunk&lt;I&gt; provide(final StepContribution contribution) throws Exception &#123; // Chunk ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. final Chunk&lt;I&gt; inputs = new Chunk&lt;&gt;(); // Chunk Size ë§Œí¼ repeatOperations ë¥¼ ì´ìš©í•´ read() ë¥¼ í˜¸ì¶œí•œë‹¤. repeatOperations.iterate(new RepeatCallback() &#123; @Override public RepeatStatus doInIteration(final RepeatContext context) throws Exception &#123; I item = null; Timer.Sample sample = Timer.start(Metrics.globalRegistry); String status = BatchMetrics.STATUS_SUCCESS; try &#123; // ItemReader ë¥¼ ì´ìš©í•´ Item ì„ í•˜ë‚˜ì”© ì½ëŠ”ë‹¤. item = read(contribution, inputs); &#125; catch (SkipOverflowException e) &#123; // read() tells us about an excess of skips by throwing an // exception status = BatchMetrics.STATUS_FAILURE; return RepeatStatus.FINISHED; &#125; finally &#123; stopTimer(sample, contribution.getStepExecution(), status); &#125; // ë” ì´ìƒ ì½ì„ Item ì´ ì—†ì„ ê²½ìš° ë°˜ë³µë¬¸ ì¢…ë£Œ ë° ì „ì²´ Chunk í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ if (item == null) &#123; inputs.setEnd(); return RepeatStatus.FINISHED; &#125; // Chunk ì— ItemReader ë¡œë¶€í„° ì½ì€ Item ì„ Chunk Size ë§Œí¼ ì €ì¥í•œë‹¤ inputs.add(item); contribution.incrementReadCount(); return RepeatStatus.CONTINUABLE; &#125; &#125;); return inputs;&#125; ChunkProcessorChunkProcessor ëŠ” Chunk ë‹¨ìœ„ë¡œ ItemProcessor ë¥¼ ì‚¬ìš©í•´ Item ì„ ë³€í˜•, ê°€ê³µ, í•„í„°ë§í•˜ê³  ItemWriter ë¥¼ ì‚¬ìš©í•´ Chunk ë°ì´í„°ë¥¼ ì €ì¥ ë° ì¶œë ¥í•œ í›„ ìŠ¤í…ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Chunk&lt;O&gt; ê°ì²´ë¥¼ ë§Œë“¤ê³  ChunkProvider ë¡œë¶€í„° ì „ë‹¬ ë°›ì€ Chunk&lt;I&gt; ì˜ Item ì„ í•œ ê±´ì”© ì²˜ë¦¬í•œ í›„ì— Chunk&lt;O&gt; ì— ì €ì¥í•©ë‹ˆë‹¤. ChunkProcessor ëŠ” ChunkProvider ì—ì„œ ì „ë‹¬ë°›ì€ Chunk ë¥¼ ì´ìš©í•˜ì—¬ ItemProcessor ì™€ ItemWriter ë¥¼ ì‹¤í–‰í•˜ê³ , ìŠ¤í…ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ChunkProcessor ëŠ” ê° Chunkì—ì„œ ItemProcessor ë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³ , ì²˜ë¦¬ ê²°ê³¼ë¥¼ ItemWriter ë¥¼ í†µí•´ ì¶œë ¥í•©ë‹ˆë‹¤. ì²˜ë¦¬ ê²°ê³¼ëŠ” Chunk ë‹¨ìœ„ë¡œ ëª¨ì•„ì„œ ìŠ¤í…ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ê²°ì •í•©ë‹ˆë‹¤. Spring Batchì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ SimpleChunkProcessor ë¥¼ ì œê³µí•©ë‹ˆë‹¤. SimpleChunkProcessor ëŠ” ChunkProvider ì—ì„œ Chunk ë‹¨ìœ„ë¡œ ì „ë‹¬ë°›ì€ ë°ì´í„°ë¥¼ ItemProcessor ë° ItemWriter ì— ì „ë‹¬í•˜ì—¬ ì²˜ë¦¬í•˜ê³ , ìŠ¤í…ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ë˜í•œ, SimpleChunkProcessor ëŠ” ì‹¤íŒ¨ ì‹œ ë¡¤ë°±ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ItemWriter ì²˜ë¦¬ê°€ ì™„ë£Œë˜ë©´ Chunk íŠ¸ëœì­ì…˜ì´ ì¢…ë£Œë˜ê³  Step ë°˜ë³µë¬¸ì—ì„œ ChunkOrientedTasklet ì´ ìƒˆë¡­ê²Œ ì‹¤í–‰ë©ë‹ˆë‹¤. ItemWriter ëŠ” Chunk ì‚¬ì´ì¦ˆë§Œí¼ ë°ì´í„°ë¥¼ Commit í•˜ê¸° ë•Œë¬¸ì— Chunk ì‚¬ì´ì¦ˆëŠ” ê³§ Commit Interval ì´ ë©ë‹ˆë‹¤. ChunkProcessorëŠ” ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ë¯€ë¡œ, ìµœì ì˜ ChunkProcessor êµ¬í˜„ ë°©ì‹ì„ ì„ íƒí•˜ì—¬ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. public interface ChunkProcessor&lt;I&gt; &#123; void process(StepContribution contribution, Chunk&lt;I&gt; chunk) throws Exception;&#125; SimpleChunkProcessor@Overridepublic final void process(StepContribution contribution, Chunk&lt;I&gt; inputs) throws Exception &#123; // Allow temporary state to be stored in the user data field initializeUserData(inputs); // If there is no input we don&#x27;t have to do anything more if (isComplete(inputs)) &#123; return; &#125; // ItemProcessor ê°ì²´ë¥¼ ì´ìš©í•´ Item ì„ ì²˜ë¦¬í•œ í›„ Chunk&lt;O&gt; ë¡œ ë°˜í™˜í•œë‹¤. Chunk&lt;O&gt; outputs = transform(contribution, inputs); // ItemProcessor ê°ì²´ë¥¼ ì´ìš©í•´ Item ì„ Filtering ëœ Item ë“¤ì„ ì €ì¥í•œë‹¤. contribution.incrementFilterCount(getFilterCount(inputs, outputs)); // ItemWriter ê°ì²´ë¥¼ ì´ìš©í•´ Item ë“¤ì„ ì €ì«ì•„ê±°ë‚˜ ì¶œë ¥í•œë‹¤. write(contribution, inputs, getAdjustedOutputs(inputs, outputs));&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"},{"name":"Chunk","slug":"Spring/Spring-Batch/Step/Chunk","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/Chunk/"}],"tags":[]},{"title":"Spring Batch - ChunkOrientedTasklet","slug":"spring/spring-batch/chunk/spring-batch-ChunkOrientedTasklet","date":"2023-05-09T02:25:35.000Z","updated":"2024-02-26T15:27:51.161Z","comments":true,"path":"2023/05/09/spring/spring-batch/chunk/spring-batch-ChunkOrientedTasklet/","link":"","permalink":"https://ckck803.github.io/2023/05/09/spring/spring-batch/chunk/spring-batch-ChunkOrientedTasklet/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ChunkOrientedTasklet ChunkOrientedTaskletì€ Tasklet ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ì²´ë¡œ Chunk ì§€í–¥ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” ë„ë©”ì¸ ê°ì²´ ChunkOrientedTaskletì€ ì´ execute() ë©”ì„œë“œ ë‚´ì—ì„œ ItemReader, ItemProcessor ë° ItemWriterë¥¼ ì‚¬ìš©í•˜ì—¬ Chunk ì§€í–¥ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. TaskletStep ì— ì˜í•´ ë°˜ë³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©° ChunkOrientedTasklet ì´ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ìƒˆë¡œìš´ Transaction ì´ ìƒì„±ë˜ì–´ ì²˜ë¦¬ê°€ ì´ë¤„ì§‘ë‹ˆë‹¤. ì˜ˆì™¸ê°€ ë°œìƒí•  ê²½ìš° í•´ë‹¹ Chunk ëŠ” Rollback ë˜ë©° ì´ì „ì— Commit í•œ Chunk ëŠ” ì™„ë£Œëœ ìƒíƒœê°€ ìœ ì§€ë©ë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ ItemReader ë¥¼ í•¸ë“¤ë§í•˜ëŠ” ChunkProvider ì™€ ItemProcessor, ItemWriter ë¥¼ í•¸ë“¤ë§í•˜ëŠ” ChunkProcessor íƒ€ì…ì˜ êµ¬í˜„ì²´ë¥¼ ê°–ìŠµë‹ˆë‹¤. ChunkOrientedTasklet íë¦„","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder ChunkOrientedTasklet ChunkOrientedTaskletì€ Tasklet ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ì²´ë¡œ Chunk ì§€í–¥ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” ë„ë©”ì¸ ê°ì²´ ChunkOrientedTaskletì€ ì´ execute() ë©”ì„œë“œ ë‚´ì—ì„œ ItemReader, ItemProcessor ë° ItemWriterë¥¼ ì‚¬ìš©í•˜ì—¬ Chunk ì§€í–¥ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. TaskletStep ì— ì˜í•´ ë°˜ë³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©° ChunkOrientedTasklet ì´ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ìƒˆë¡œìš´ Transaction ì´ ìƒì„±ë˜ì–´ ì²˜ë¦¬ê°€ ì´ë¤„ì§‘ë‹ˆë‹¤. ì˜ˆì™¸ê°€ ë°œìƒí•  ê²½ìš° í•´ë‹¹ Chunk ëŠ” Rollback ë˜ë©° ì´ì „ì— Commit í•œ Chunk ëŠ” ì™„ë£Œëœ ìƒíƒœê°€ ìœ ì§€ë©ë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ ItemReader ë¥¼ í•¸ë“¤ë§í•˜ëŠ” ChunkProvider ì™€ ItemProcessor, ItemWriter ë¥¼ í•¸ë“¤ë§í•˜ëŠ” ChunkProcessor íƒ€ì…ì˜ êµ¬í˜„ì²´ë¥¼ ê°–ìŠµë‹ˆë‹¤. ChunkOrientedTasklet íë¦„TaskletStep ì´ ChunkOrientedTasklet ê°ì²´ì˜ execute ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ChunkProvider ê°ì²´ë¥¼ í˜¸ì¶œí•˜ê²Œ ë©ë‹ˆë‹¤. ChunkProvider ëŠ” ItemReader ê°ì²´ë¥¼ ì´ìš©í•´ Item ë“¤ì„ ì„¤ì •ëœ Chunk ì‚¬ì´ì¦ˆë§Œí¼ ë°˜ë³µí•´ì„œ ì½ì–´ì˜¨ í›„ ChunkOrientedTasklet ê°ì²´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. ChunkOrientedTasklet ê°ì²´ëŠ” ChunkProcessor ê°ì²´ë¥¼ í˜¸ì¶œí•´ ì½ì–´ì˜¨ Item ë“¤ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ChunkProcessor ê°ì²´ëŠ” ItemProcessor ê°ì²´ë¥¼ ì´ìš©í•´ ì „ë‹¬ë°›ì€ Item ê°ì²´ì— ë°ì´í„° ì²˜ë¦¬ë¥¼ ì§„í–‰í•˜ê³  ItemWriter ì— ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. ItemWriter ëŠ” ì „ë‹¬ ë°›ì€ Item ë“¤ì„ ì¶œë ¥í•˜ê±°ë‚˜ ì €ì¥í•œ í›„ ë‹¤ì‹œ ChunkProcessor ê°ì²´ë¥¼ í†µí•´ Item ì„ ì½ì–´ì˜¤ëŠ” ì‘ì—…ì„ í•˜ê²Œ ëœë‹¤. ChunkOrientedTasklet ì€ ì´ëŸ¬í•œ ë°˜ë³µì ì¸ ì‘ì—…ì€ ì½ì„ Item ì´ ì—†ì„ë•Œê¹Œì§€ Chunk ë‹¨ìœ„ë¡œ ë°˜ë³µí•©ë‹ˆë‹¤. ChunkOrientedTasklet ì†ŒìŠ¤ì½”ë“œ... ìƒëµ// chunkProcessor ê°ì²´private final ChunkProcessor&lt;I&gt; chunkProcessor;// chunkProvider ê°ì²´private final ChunkProvider&lt;I&gt; chunkProvider;@Nullable@Overridepublic RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; @SuppressWarnings(&quot;unchecked&quot;) // Chunk ì²˜ë¦¬ ì¤‘ ì˜ˆì™¸ê°€ ë°œìƒí•´ ì¬ ì‹œë„ë¥¼ í•  ê²½ìš° ë‹¤ì‹œ ë°ì´í„°ë¥¼ ì½ì§€ ì•Šê³  ë²„í¼ì— ë‹´ì•„ ë†“ì•˜ë˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. Chunk&lt;I&gt; inputs = (Chunk&lt;I&gt;) chunkContext.getAttribute(INPUTS_KEY); if (inputs == null) &#123; // ChunkProvider ê°ì²´ë¥¼ ì´ìš©í•´ Item ì„ Chunk Size ë§Œí¼ ë°˜ë³µí•´ì„œ ì½ì€ ë‹¤ìŒ Chunk&lt;I&gt; ê°ì²´ì— ì €ì¥í•´ ë°˜í™˜í•©ë‹ˆë‹¤. inputs = chunkProvider.provide(contribution); if (buffering) &#123; chunkContext.setAttribute(INPUTS_KEY, inputs); &#125; &#125; // ChunkProcessor ë¥¼ ì´ìš©í•´ ChunkProvider ë¡œ ë¶€í„° ì½ì€ Chunk&lt;I&gt; ì˜ ì•„ì´í…œ ê°œìˆ˜ë§Œí¼ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê³  ì €ì¥í•©ë‹ˆë‹¤. chunkProcessor.process(contribution, inputs); chunkProvider.postProcess(contribution, inputs); // Allow a message coming back from the processor to say that we // are not done yet if (inputs.isBusy()) &#123; logger.debug(&quot;Inputs still busy&quot;); return RepeatStatus.CONTINUABLE; &#125; // Chunk ë‹¨ìœ„ ì…ì¶œë ¥ì´ ì™„ë£Œë˜ë©´ ë²„í¼ì— ì €ì¥í•œ Chunk ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. chunkContext.removeAttribute(INPUTS_KEY); chunkContext.setComplete(); if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Inputs not busy, ended: &quot; + inputs.isEnd()); &#125; // ì½ì„ Item ì´ ë” ì¡´ì¬í•˜ëŠ”ì§€ ì²´í¬í•©ë‹ˆë‹¤. // ì½ì„ Item ì´ ë” ìˆì„ ê²½ìš° Chunk í”„ë¡œì„¸ìŠ¤ë¥¼ ë°˜ë³µí•˜ê³  // ì½ì„ Item ì´ ì—†ì„ ê²½ìš° RepeatStatus.FINISHED ë¥¼ ë°˜í™˜í•´ Chunk í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤. return RepeatStatus.continueIf(!inputs.isEnd());&#125;... ìƒëµ ChunkOrientedTasklet ì¥ì ChunkOrientedTaskletì€ Chunk ì§€í–¥ ì²˜ë¦¬ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ëª¨ë“  í•­ëª©ì„ ì½ê³  ì²˜ë¦¬í•˜ê³  ë‚˜ì„œì•¼ ë‹¤ìŒ ìŠ¤í…ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ChunkOrientedTaskletì€ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì„¸íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ë©”ëª¨ë¦¬ ë¶€ì¡± ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ChunkOrientedTaskletì€ í•­ëª©ì„ ì¡°ê° ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•˜ë©°, ì²˜ë¦¬í•  ê° ì¡°ê°ì˜ í¬ê¸°ëŠ” ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Batchì—ì„œ ChunkOrientedTaskletì€ ìŠ¤í… ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë©°, ì¼ê´„ ì²˜ë¦¬ ì‘ì—…ì„ ì¡°ê° ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì„¸íŠ¸ë¥¼ ì²˜ë¦¬í•  ë•Œ ë©”ëª¨ë¦¬ ë¶€ì¡± ë¬¸ì œë¥¼ ë°©ì§€í•˜ê³  ì²˜ë¦¬ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"},{"name":"Chunk","slug":"Spring/Spring-Batch/Step/Chunk","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/Chunk/"}],"tags":[]},{"title":"Spring Batch - Chunk ê¸°ë°˜ Step","slug":"spring/spring-batch/chunk/spring-batch-Chunk","date":"2023-05-09T01:25:35.000Z","updated":"2024-02-26T15:27:47.013Z","comments":true,"path":"2023/05/09/spring/spring-batch/chunk/spring-batch-Chunk/","link":"","permalink":"https://ckck803.github.io/2023/05/09/spring/spring-batch/chunk/spring-batch-Chunk/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Chunk Chunk ë€ ì—¬ëŸ¬ê°œì˜ ì•„ì´í…œì„ ë¬¶ì€ í•˜ë‚˜ì˜ ë©ì–´ë¦¬, ë¸”ë¡ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. í•œë²ˆì— í•˜ë‚˜ì”© ì•„ì´í…œ ì…ë ¥ì„ ë°›ì•„ Chunk ë‹¨ìœ„ì˜ ë©ì–´ë¦¬ë¡œ ë§Œë“  í›„ Chunk ë‹¨ìœ„ë¡œ íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì¦‰, Chunk ë‹¨ìœ„ì˜ Commit ê³¼ Rollback ì´ ì´ë£¨ì–´ì§€ê²Œ ë©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ë¥¼ í•œë²ˆì— ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ Chunk ë‹¨ìœ„ë¡œ ìª¼ê°œì–´ì„œ ë” ì´ìƒ ì²˜ë¦¬í•  ë°ì´í„°ê°€ ì—†ì„ ë•Œê¹Œì§€ ë°˜ë³µí•´ì„œ ì…ì¶œë ¥í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ChunkëŠ” ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. Chunk ì§€í–¥ ì²˜ë¦¬ëŠ” ì¼ê´„ ì²˜ë¦¬ ì‘ì—…ì„ ì¡°ê° ë‹¨ìœ„ë¡œ ë¶„í• í•˜ì—¬ ì²˜ë¦¬í•˜ë©°, ê° ì¡°ê°ì€ ìŠ¤í… ë‚´ì—ì„œ ê°œë³„ì ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 1000ê°œì˜ í•­ëª©ì´ìˆëŠ” ë°ì´í„° ì„¸íŠ¸ê°€ ìˆë‹¤ë©´, Chunk ì²˜ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ ë°ì´í„°ë¥¼ 100ê°œì”© 10 ì¡°ê°ìœ¼ë¡œ ë¶„í•  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ChunkëŠ” í° ë°ì´í„° ì„¸íŠ¸ë¥¼ ì²˜ë¦¬ í•  ë•Œ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ë¶€ì¡± ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  ChunkëŠ” ë°ì´í„°ë¥¼ ì‘ì€ ë¬¶ìŒìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•˜ê³  ì¼ë¶€ ë¬¶ìŒì´ ì™„ë£Œë˜ë©´ ë‹¤ìŒ ë¬¶ìŒìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Chunk Chunk ë€ ì—¬ëŸ¬ê°œì˜ ì•„ì´í…œì„ ë¬¶ì€ í•˜ë‚˜ì˜ ë©ì–´ë¦¬, ë¸”ë¡ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. í•œë²ˆì— í•˜ë‚˜ì”© ì•„ì´í…œ ì…ë ¥ì„ ë°›ì•„ Chunk ë‹¨ìœ„ì˜ ë©ì–´ë¦¬ë¡œ ë§Œë“  í›„ Chunk ë‹¨ìœ„ë¡œ íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì¦‰, Chunk ë‹¨ìœ„ì˜ Commit ê³¼ Rollback ì´ ì´ë£¨ì–´ì§€ê²Œ ë©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ë¥¼ í•œë²ˆì— ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ Chunk ë‹¨ìœ„ë¡œ ìª¼ê°œì–´ì„œ ë” ì´ìƒ ì²˜ë¦¬í•  ë°ì´í„°ê°€ ì—†ì„ ë•Œê¹Œì§€ ë°˜ë³µí•´ì„œ ì…ì¶œë ¥í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ChunkëŠ” ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. Chunk ì§€í–¥ ì²˜ë¦¬ëŠ” ì¼ê´„ ì²˜ë¦¬ ì‘ì—…ì„ ì¡°ê° ë‹¨ìœ„ë¡œ ë¶„í• í•˜ì—¬ ì²˜ë¦¬í•˜ë©°, ê° ì¡°ê°ì€ ìŠ¤í… ë‚´ì—ì„œ ê°œë³„ì ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 1000ê°œì˜ í•­ëª©ì´ìˆëŠ” ë°ì´í„° ì„¸íŠ¸ê°€ ìˆë‹¤ë©´, Chunk ì²˜ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ ë°ì´í„°ë¥¼ 100ê°œì”© 10 ì¡°ê°ìœ¼ë¡œ ë¶„í•  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ChunkëŠ” í° ë°ì´í„° ì„¸íŠ¸ë¥¼ ì²˜ë¦¬ í•  ë•Œ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ë¶€ì¡± ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  ChunkëŠ” ë°ì´í„°ë¥¼ ì‘ì€ ë¬¶ìŒìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•˜ê³  ì¼ë¶€ ë¬¶ìŒì´ ì™„ë£Œë˜ë©´ ë‹¤ìŒ ë¬¶ìŒìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. Spring Batchì—ì„œ ChunkëŠ” ItemReader, ItemProcessor ë° ItemWriterë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ItemReaderëŠ” ë°ì´í„°ë¥¼ ì½ê³  ItemProcessorëŠ” ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê³  ItemWriterëŠ” ê²°ê³¼ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. Chunk ì§€í–¥ ì²˜ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ê° ìŠ¤í…ì—ì„œ ì²˜ë¦¬ í•  ë°ì´í„° ë ˆì½”ë“œì˜ ìˆ˜ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì²˜ë¦¬ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Chunk ì…ë ¥ê¸°ì™€ ì¶œë ¥ê¸°ì…ë ¥ê¸°ë¥¼ í†µí•´ Item ì„ í•˜ë‚˜í•˜ë‚˜ì”© ì½ì–´ë“¤ì—¬ Chunk ì— ì €ì¥í•œ í›„ ì²˜ë¦¬ê°€ ì™„ë£Œ ëì„ë•Œ Item ë“¤ì„ í•œë²ˆì— ì¶œë ¥ê¸°ë¡œ ë‚´ë³´ë‚¸ë‹¤. Chunk&lt;I&gt; ì™€ Chunk&lt;O&gt;Chunk&lt;I&gt; ëŠ” ItemReader ë¡œ ì½ì€ í•˜ë‚˜ì˜ ì•„ì´í…œì„ Chunk ì—ì„œ ì •í•œ ê°œìˆ˜ë§Œí¼ ë°˜ë³µí•´ì„œ ì €ì¥í•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤. Chunk&lt;O&gt; ëŠ” ItemReader ë¡œë¶€í„° ì „ë‹¬ë°›ì€ Chunk&lt;I&gt; ë¥¼ ì°¸ì¡°í•´ì„œ ItemProcessor ì—ì„œ ì ì ˆí•˜ê²Œ ê°€ê³µ ë° í••ëŸ¬ë§í•œ í›„ ItemWriter ì— ì „ë‹¬í•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤. Chunk ì•„í‚¤í…ì²˜ItemReader ê°€ Source ë¡œë¶€í„° Item ì„ ì½ì€ í›„ Chunk&lt;I&gt; ì— ì €ì¥í•©ë‹ˆë‹¤. ì„¤ì •ëœ Chunk Size ë§Œí¼ Item ì„ ì½ì—ˆì„ í›„ì—ëŠ” ItemProcessor ì— Chunk&lt;I&gt; ì— ì €ì¥ëœ Item ë“¤ì„ inputs ê°ì²´ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. ItemProcessor ëŠ” Iterator ë¥¼ ì´ìš©í•´ ì „ë‹¬ë°›ì€ inputs ì— ì €ì¥ëœ Item ë“¤ì— ëŒ€í•œ ë°ì´í„° ì²˜ë¦¬ë¥¼ í•œ í›„ Chunk&lt;O&gt; ì— ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. Chunk&lt;O&gt; ì€ ItemWriter ì— ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. ItemWriter ê°ì²´ëŠ” ë°ì´í„°ë¥¼ ì“°ê±°ë‚˜ ì €ì¥í•˜ëŠ” ì—­í• ì„ ì§„í–‰í•©ë‹ˆë‹¤. Chunk ì˜ˆì‹œ ì½”ë“œ@Beanpublic Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .&lt;String, String&gt;chunk(2) // ItemReader .reader(new ListItemReader&lt;&gt;(Arrays.asList(&quot;item1&quot;, &quot;item2&quot;, &quot;item3&quot;,&quot;item4&quot;, &quot;item5&quot;, &quot;item6&quot;))) // ItemProcessor .processor(new ItemProcessor&lt;String, String&gt;() &#123; @Override public String process(String item) throws Exception &#123; Thread.sleep(300); System.out.println(item); return &quot;my_&quot; + item; &#125; &#125;) // ItemWriter .writer(new ItemWriter&lt;String&gt;() &#123; @Override public void write(List&lt;? extends String&gt; items) throws Exception &#123; Thread.sleep(1000); System.out.println(items); &#125; &#125;) .build();&#125; Lambda ë¡œ í‘œí˜„@Beanpublic Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .&lt;String, String&gt;chunk(2) .reader(new ListItemReader&lt;&gt;(Arrays.asList(&quot;item1&quot;, &quot;item2&quot;, &quot;item3&quot;,&quot;item4&quot;, &quot;item5&quot;, &quot;item6&quot;))) .processor((ItemProcessor&lt;String, String&gt;) item -&gt; &#123; Thread.sleep(300); System.out.println(item); return &quot;my_&quot; + item; &#125;) .writer(items -&gt; &#123; Thread.sleep(1000); System.out.println(items); &#125;) .build();&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"},{"name":"Chunk","slug":"Spring/Spring-Batch/Step/Chunk","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/Chunk/"}],"tags":[]},{"title":"Circuit Breaker","slug":"k8s/istio/circuit-breaker","date":"2023-05-08T03:31:46.000Z","updated":"2024-02-18T16:19:54.538Z","comments":true,"path":"2023/05/08/k8s/istio/circuit-breaker/","link":"","permalink":"https://ckck803.github.io/2023/05/08/k8s/istio/circuit-breaker/","excerpt":"Circuit Breakerë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ Circuit Breaker ëŠ” ì¼ì¢…ì˜ ì˜ˆì™¸ ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ, ì„œë¹„ìŠ¤ í˜¸ì¶œì˜ ì‹¤íŒ¨, ì§€ì—° ë“±ì„ ëª¨ë‹ˆí„°ë§í•˜ê³ , ì´ë¥¼ ê°ì§€í•˜ë©´ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ í˜¸ì¶œì„ ì¼ì‹œ ì¤‘ë‹¨ì‹œí‚¤ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œëŠ” ì—¬ëŸ¬ ëŒ€ì˜ ì„œë²„ë¡œ êµ¬ì„±ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, ì„œë¹„ìŠ¤ ê°„ì˜ í˜¸ì¶œì€ ì‹œìŠ¤í…œì˜ ë‹¤ë¥¸ ë¶€ë¶„ê³¼ ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì„œë¹„ìŠ¤ í˜¸ì¶œ ì‹œì— ì‹¤íŒ¨ê°€ ë°œìƒí•˜ë©´ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ì‹œê°„ì´ ê±¸ë¦¬ê³ , ì´ë¥¼ ë¬´í•œì • ëŒ€ê¸°í•˜ê²Œ ëœë‹¤ë©´ ì „ì²´ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì— ì•…ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë•Œ, Circuit BreakerëŠ” ì´ëŸ¬í•œ ì§€ì—°ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ í˜¸ì¶œì„ ì¼ì‹œ ì¤‘ë‹¨ì‹œí‚µë‹ˆë‹¤. ì´í›„, ì¼ì • ì‹œê°„ ë™ì•ˆ í˜¸ì¶œì„ ì°¨ë‹¨í•œ ë’¤, ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë©´ ë‹¤ì‹œ í˜¸ì¶œì„ í—ˆìš©í•©ë‹ˆë‹¤. Circuit Breaker ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ì•ˆì •ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ ë§¤ìš° ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. Circuit Breaker ê°€ ì—†ë‹¤ë©´, ì„œë¹„ìŠ¤ í˜¸ì¶œ ì‹¤íŒ¨ì™€ ì§€ì—°ì— ëŒ€í•œ ì²˜ë¦¬ê°€ ì§€ì—°ë˜ì–´ ì‹œìŠ¤í…œ ì „ì²´ì˜ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. Circuit Breaker ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ê°€ì§€ ë¬¸ì œë¥¼ ë¹ ë¥´ê²Œ ê°ì§€í•˜ê³ , ì‹œìŠ¤í…œ ì „ì²´ì˜ ì•ˆì •ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.","text":"Circuit Breakerë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ Circuit Breaker ëŠ” ì¼ì¢…ì˜ ì˜ˆì™¸ ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ, ì„œë¹„ìŠ¤ í˜¸ì¶œì˜ ì‹¤íŒ¨, ì§€ì—° ë“±ì„ ëª¨ë‹ˆí„°ë§í•˜ê³ , ì´ë¥¼ ê°ì§€í•˜ë©´ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ í˜¸ì¶œì„ ì¼ì‹œ ì¤‘ë‹¨ì‹œí‚¤ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œëŠ” ì—¬ëŸ¬ ëŒ€ì˜ ì„œë²„ë¡œ êµ¬ì„±ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, ì„œë¹„ìŠ¤ ê°„ì˜ í˜¸ì¶œì€ ì‹œìŠ¤í…œì˜ ë‹¤ë¥¸ ë¶€ë¶„ê³¼ ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì„œë¹„ìŠ¤ í˜¸ì¶œ ì‹œì— ì‹¤íŒ¨ê°€ ë°œìƒí•˜ë©´ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ì‹œê°„ì´ ê±¸ë¦¬ê³ , ì´ë¥¼ ë¬´í•œì • ëŒ€ê¸°í•˜ê²Œ ëœë‹¤ë©´ ì „ì²´ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì— ì•…ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë•Œ, Circuit BreakerëŠ” ì´ëŸ¬í•œ ì§€ì—°ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ í˜¸ì¶œì„ ì¼ì‹œ ì¤‘ë‹¨ì‹œí‚µë‹ˆë‹¤. ì´í›„, ì¼ì • ì‹œê°„ ë™ì•ˆ í˜¸ì¶œì„ ì°¨ë‹¨í•œ ë’¤, ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë©´ ë‹¤ì‹œ í˜¸ì¶œì„ í—ˆìš©í•©ë‹ˆë‹¤. Circuit Breaker ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ì•ˆì •ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ ë§¤ìš° ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. Circuit Breaker ê°€ ì—†ë‹¤ë©´, ì„œë¹„ìŠ¤ í˜¸ì¶œ ì‹¤íŒ¨ì™€ ì§€ì—°ì— ëŒ€í•œ ì²˜ë¦¬ê°€ ì§€ì—°ë˜ì–´ ì‹œìŠ¤í…œ ì „ì²´ì˜ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. Circuit Breaker ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ê°€ì§€ ë¬¸ì œë¥¼ ë¹ ë¥´ê²Œ ê°ì§€í•˜ê³ , ì‹œìŠ¤í…œ ì „ì²´ì˜ ì•ˆì •ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Istio","slug":"Kubernetes/Istio","permalink":"https://ckck803.github.io/categories/Kubernetes/Istio/"}],"tags":[]},{"title":"Istio - DestinationRule","slug":"k8s/istio/istio-destinationrule","date":"2023-05-08T03:31:46.000Z","updated":"2024-02-18T16:19:54.538Z","comments":true,"path":"2023/05/08/k8s/istio/istio-destinationrule/","link":"","permalink":"https://ckck803.github.io/2023/05/08/k8s/istio/istio-destinationrule/","excerpt":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜ Istio ë€? ì°¸ê³  https://istio.io/latest/docs/ops/deployment/architecture/ https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/ https://happycloud-lee.tistory.com/104 DestinationRule DestinationRuleì€ ì„œë¹„ìŠ¤ ìš”ì²­ì´ íŠ¹ì • ì„œë¹„ìŠ¤ ë²„ì „ ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¡œ ë¼ìš°íŒ…ë˜ë„ë¡ ì§€ì •í•˜ëŠ” ê·œì¹™ì„ ì •ì˜í•˜ëŠ” ë¦¬ì†ŒìŠ¤ DestinationRuleì€ Istio ì„œë¹„ìŠ¤ ë©”ì‹œì—ì„œ íŠ¸ë˜í”½ì„ ê´€ë¦¬í•˜ëŠ” ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ ë¼ìš°íŒ…í•  ë•Œ ì‚¬ìš©í•  ì„œë¹„ìŠ¤ ë²„ì „, ì¸ìŠ¤í„´ìŠ¤ ë° ì—°ê²° ë°©ì‹ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. DestinationRuleì€ Istioì˜ ë‹¤ë¥¸ ê¸°ëŠ¥ê³¼ í†µí•©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, VirtualServiceì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ê²½ë¡œ ë° íŠ¸ë˜í”½ ìœ í˜•ì— ëŒ€í•œ ê·œì¹™ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ë¡œë“œ ë°¸ëŸ°ì‹± ë° ì„œí‚· ë¸Œë ˆì´ì»¤ì™€ ê°™ì€ ê¸°ëŠ¥ë„ DestinationRuleì„ ì‚¬ìš©í•˜ì—¬ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì´ë¦„: ê·œì¹™ì„ ì ìš©í•  ëŒ€ìƒ ì„œë¹„ìŠ¤ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ë²„ì „: ê·œì¹™ì„ ì ìš©í•  ëŒ€ìƒ ì„œë¹„ìŠ¤ì˜ ë²„ì „ì„ ì§€ì •í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì„œë¸Œì…‹: ëŒ€ìƒ ì„œë¹„ìŠ¤ì˜ ì„œë¸Œì…‹ì„ ì§€ì •í•˜ì—¬ íŠ¸ë˜í”½ì„ íŠ¹ì • ì„œë¸Œì…‹ìœ¼ë¡œ ë¼ìš°íŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—°ê²° í’€: ì„œë¹„ìŠ¤ ìš”ì²­ì— ì‚¬ìš©ë  ì—°ê²° í’€ì„ ì •ì˜í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ìµœëŒ€ ì—°ê²° ìˆ˜ ë° ì—°ê²° ìœ ì§€ ì‹œê°„ ë“±ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¸ë˜í”½ ì •ì±…: ëŒ€ìƒ ì„œë¹„ìŠ¤ì˜ íŠ¸ë˜í”½ì„ ì œì–´í•˜ëŠ” ì •ì±…ì„ ì •ì˜í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—°ê²° ì‹œê°„ ì´ˆê³¼ ë° ì—°ê²° ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²• ë“±ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜ Istio ë€? ì°¸ê³  https://istio.io/latest/docs/ops/deployment/architecture/ https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/ https://happycloud-lee.tistory.com/104 DestinationRule DestinationRuleì€ ì„œë¹„ìŠ¤ ìš”ì²­ì´ íŠ¹ì • ì„œë¹„ìŠ¤ ë²„ì „ ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¡œ ë¼ìš°íŒ…ë˜ë„ë¡ ì§€ì •í•˜ëŠ” ê·œì¹™ì„ ì •ì˜í•˜ëŠ” ë¦¬ì†ŒìŠ¤ DestinationRuleì€ Istio ì„œë¹„ìŠ¤ ë©”ì‹œì—ì„œ íŠ¸ë˜í”½ì„ ê´€ë¦¬í•˜ëŠ” ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ ë¼ìš°íŒ…í•  ë•Œ ì‚¬ìš©í•  ì„œë¹„ìŠ¤ ë²„ì „, ì¸ìŠ¤í„´ìŠ¤ ë° ì—°ê²° ë°©ì‹ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. DestinationRuleì€ Istioì˜ ë‹¤ë¥¸ ê¸°ëŠ¥ê³¼ í†µí•©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, VirtualServiceì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ê²½ë¡œ ë° íŠ¸ë˜í”½ ìœ í˜•ì— ëŒ€í•œ ê·œì¹™ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ë¡œë“œ ë°¸ëŸ°ì‹± ë° ì„œí‚· ë¸Œë ˆì´ì»¤ì™€ ê°™ì€ ê¸°ëŠ¥ë„ DestinationRuleì„ ì‚¬ìš©í•˜ì—¬ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì´ë¦„: ê·œì¹™ì„ ì ìš©í•  ëŒ€ìƒ ì„œë¹„ìŠ¤ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ë²„ì „: ê·œì¹™ì„ ì ìš©í•  ëŒ€ìƒ ì„œë¹„ìŠ¤ì˜ ë²„ì „ì„ ì§€ì •í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì„œë¸Œì…‹: ëŒ€ìƒ ì„œë¹„ìŠ¤ì˜ ì„œë¸Œì…‹ì„ ì§€ì •í•˜ì—¬ íŠ¸ë˜í”½ì„ íŠ¹ì • ì„œë¸Œì…‹ìœ¼ë¡œ ë¼ìš°íŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—°ê²° í’€: ì„œë¹„ìŠ¤ ìš”ì²­ì— ì‚¬ìš©ë  ì—°ê²° í’€ì„ ì •ì˜í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ìµœëŒ€ ì—°ê²° ìˆ˜ ë° ì—°ê²° ìœ ì§€ ì‹œê°„ ë“±ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¸ë˜í”½ ì •ì±…: ëŒ€ìƒ ì„œë¹„ìŠ¤ì˜ íŠ¸ë˜í”½ì„ ì œì–´í•˜ëŠ” ì •ì±…ì„ ì •ì˜í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—°ê²° ì‹œê°„ ì´ˆê³¼ ë° ì—°ê²° ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²• ë“±ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Istio","slug":"Kubernetes/Istio","permalink":"https://ckck803.github.io/categories/Kubernetes/Istio/"}],"tags":[]},{"title":"Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±)","slug":"k8s/istio/istio-locality_load_balacing","date":"2023-05-08T03:31:46.000Z","updated":"2024-02-18T16:19:54.539Z","comments":true,"path":"2023/05/08/k8s/istio/istio-locality_load_balacing/","link":"","permalink":"https://ckck803.github.io/2023/05/08/k8s/istio/istio-locality_load_balacing/","excerpt":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜ Istio ë€? ì°¸ê³  https://istio.io/latest/docs/ops/deployment/architecture/ https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/ https://happycloud-lee.tistory.com/104 http://itnp.kr/post/istio-circuit-break https://istiobyexample.dev/locality-load-balancing/ Istio - Locality Load Balancing Istio ì˜ Locality Load Balance ëŠ” ì„œë¹„ìŠ¤ ìš”ì²­ì„ ì§€ì—­ì ìœ¼ë¡œ ë¶„ì‚°ì‹œí‚¤ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. Locality Load BalanceëŠ” ì„œë¹„ìŠ¤ ìš”ì²­ì´ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ë°œìƒí•  ë•Œ í•´ë‹¹ ìš”ì²­ì´ ê°€ì¥ ê°€ê¹Œìš´ ì§€ì—­ì˜ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— ë°°ì •ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì˜ ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì´ê³ , ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ì„ ì ˆì•½í•˜ë©°, ë„¤íŠ¸ì›Œí¬ ë³‘ëª© í˜„ìƒì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Locality Load BalanceëŠ” Istioì˜ Envoy í”„ë¡ì‹œì—ì„œ êµ¬í˜„ë©ë‹ˆë‹¤. EnvoyëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ëª¨ë“  ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ìœ„ì¹˜ ì •ë³´ë¥¼ ìœ ì§€ ê´€ë¦¬í•˜ë©°, í´ëŸ¬ìŠ¤í„°ì˜ ì§€ë¦¬ì  ë¶„í¬ë¥¼ íŒŒì•…í•˜ì—¬ ìš”ì²­ì„ ì§€ì—­ì ìœ¼ë¡œ ë¶„ì‚°ì‹œí‚µë‹ˆë‹¤. Locality Load BalanceëŠ” ë˜í•œ Istioì˜ íŠ¸ë˜í”½ ê´€ë¦¬ ê¸°ëŠ¥ê³¼ í†µí•©ë©ë‹ˆë‹¤. IstioëŠ” íŠ¸ë˜í”½ ê´€ë¦¬ ê·œì¹™ì„ ì •ì˜í•˜ì—¬ íŠ¹ì • ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ íŠ¹ì • ì§€ì—­ì—ì„œë§Œ ì²˜ë¦¬ë˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ì˜ ê°€ìš©ì„±ì„ ë†’ì´ê³ , ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ê°„ì˜ ë¶€í•˜ë¥¼ ê· í˜•ìˆê²Œ ë¶„ì‚°ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜ Istio ë€? ì°¸ê³  https://istio.io/latest/docs/ops/deployment/architecture/ https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/ https://happycloud-lee.tistory.com/104 http://itnp.kr/post/istio-circuit-break https://istiobyexample.dev/locality-load-balancing/ Istio - Locality Load Balancing Istio ì˜ Locality Load Balance ëŠ” ì„œë¹„ìŠ¤ ìš”ì²­ì„ ì§€ì—­ì ìœ¼ë¡œ ë¶„ì‚°ì‹œí‚¤ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. Locality Load BalanceëŠ” ì„œë¹„ìŠ¤ ìš”ì²­ì´ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ë°œìƒí•  ë•Œ í•´ë‹¹ ìš”ì²­ì´ ê°€ì¥ ê°€ê¹Œìš´ ì§€ì—­ì˜ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— ë°°ì •ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì˜ ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì´ê³ , ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ì„ ì ˆì•½í•˜ë©°, ë„¤íŠ¸ì›Œí¬ ë³‘ëª© í˜„ìƒì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Locality Load BalanceëŠ” Istioì˜ Envoy í”„ë¡ì‹œì—ì„œ êµ¬í˜„ë©ë‹ˆë‹¤. EnvoyëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ëª¨ë“  ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ìœ„ì¹˜ ì •ë³´ë¥¼ ìœ ì§€ ê´€ë¦¬í•˜ë©°, í´ëŸ¬ìŠ¤í„°ì˜ ì§€ë¦¬ì  ë¶„í¬ë¥¼ íŒŒì•…í•˜ì—¬ ìš”ì²­ì„ ì§€ì—­ì ìœ¼ë¡œ ë¶„ì‚°ì‹œí‚µë‹ˆë‹¤. Locality Load BalanceëŠ” ë˜í•œ Istioì˜ íŠ¸ë˜í”½ ê´€ë¦¬ ê¸°ëŠ¥ê³¼ í†µí•©ë©ë‹ˆë‹¤. IstioëŠ” íŠ¸ë˜í”½ ê´€ë¦¬ ê·œì¹™ì„ ì •ì˜í•˜ì—¬ íŠ¹ì • ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ íŠ¹ì • ì§€ì—­ì—ì„œë§Œ ì²˜ë¦¬ë˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ì˜ ê°€ìš©ì„±ì„ ë†’ì´ê³ , ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ê°„ì˜ ë¶€í•˜ë¥¼ ê· í˜•ìˆê²Œ ë¶„ì‚°ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  AZ ë¡œ istiod í™•ì¥apiVersion: apps/v1kind: Deploymentmetadata: name: istiod namespace: istio-systemspec: template: spec: topologySpreadConstraints: - maxSkew: 1 topologyKey: topology.kubernetes.io/zone whenUnsatisfiable: ScheduleAnyway labelSelector: matchLabels: app: istiod trafficPolicy ì„¤ì •Envoy Proxyì—ì„œ Locality Load Balancingì„ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” Istioì˜ ì„œë¹„ìŠ¤ ë©”ì‰¬ êµ¬ì„±ì—ì„œ trafficPolicy ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì´ trafficPolicy ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: my-serviceëŠ” ì‚¬ìš©ìê°€ ì§€ì—­ë³„ë¡œ ë¶„ë¥˜í•˜ë ¤ëŠ” ëŒ€ìƒ ì„œë¹„ìŠ¤ ì´ë¦„ì…ë‹ˆë‹¤. apiVersion: networking.istio.io/v1alpha3kind: DestinationRulemetadata: name: my-servicespec: host: my-service trafficPolicy: loadBalancer: localityLbSetting: enabled: true í•„ìš”í•œ ê²½ìš° Envoy Proxyì—ì„œ ì‚¬ìš©í•  ì§€ì—­ ì •ë³´ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ Istioì—ì„œëŠ” ServiceEntryë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì´ ServiceEntryë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: apiVersion: networking.istio.io/v1alpha3kind: ServiceEntrymetadata: name: us-eastspec: hosts: - us-east.example.com ports: - number: 80 name: http protocol: HTTP location: MESH_INTERNAL resolution: DNS endpoints: - address: 10.1.2.3 Istioë¥¼ ì‚¬ìš©í•˜ì—¬ EKS í´ëŸ¬ìŠ¤í„°ì—ì„œ AZ ê°„ ë°ì´í„° ì „ì†¡ ë¹„ìš© í•´ê²° https://aws.amazon.com/ko/blogs/containers/addressing-latency-and-data-transfer-costs-on-eks-using-istio/ https://istio.io/latest/docs/reference/config/networking/destination-rule/ í† í´ë¡œì§€ ì¸ì‹ ë¼ìš°íŒ…ì´ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›ë˜ë¯€ë¡œ Istioë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì¼í•œ ê°€ìš© ì˜ì—­ ë‚´ì—ì„œ í¬ë“œ ë˜ëŠ” ì„œë¹„ìŠ¤ë¡œ íŠ¸ë˜í”½ì„ ë¼ìš°íŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. cat &lt;&lt;EOF&gt;&gt; destinationrule.yamlapiVersion: networking.istio.io/v1alpha3kind: DestinationRulemetadata: name: zip-lookup-service-local # ì ìš©ì„ ìœ„í•œ namespace namespace: octank-travel-nsspec: host: zip-lookup-service-local trafficPolicy: outlierDetection: consecutiveErrors: 7 interval: 30s baseEjectionTime: 30sEOF skcc-dev-mbc-cms-aurora : 1 ì¸ìŠ¤í„´ìŠ¤ - db.t3.medium(2 vCPUs 4GB, Storageë¶ˆëª…)skcc-uat-vitality-cms-aurora : 2 ì¸ìŠ¤í„´ìŠ¤ - db.t3.medium(2 vCPUs 4GB, Storageë¶ˆëª…)skcc-prd-vitality-cms-aurora : 2 ì¸ìŠ¤í„´ìŠ¤ - db.r5.xlarge(2vCPU, 32GB, Storageë¶ˆëª…) DBì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì•”í˜¸í™”&#x2F;ë³µí˜¸í™” í•˜ê³  ìˆìŠµë‹ˆë‹¤.AES-128 ë¹„íŠ¸ ì¸ì½”ë”©&#x2F;ë””ì½”ë”© ì´ìš©í•˜ëŠ”ê±° ê°™ë„¤ìš”. ë³µí˜¸í™” AES_DECRYPT(unhex(ì•”í˜¸í™”ëœê°’),â€˜ì•”í˜¸í™” í‚¤ê°’â€™)ì•”í˜¸í™” hex(AES_ENCRYPT(ì•”í˜¸í™”í• ê°’,â€˜ì•”í˜¸í™” í‚¤ê°’â€™) CMS DEV&#x2F;UAT RDS: db.t3.medium â€“&gt; 2vCPU, 4GB, Storageë¶ˆëª…, AWS Aurora MySQL(5.7.mysql_aurora.2.07.7)CMS PRD RDS: db.r5.xlarge â€“&gt; 2vCPU, 32GB, Storageë¶ˆëª…, AWS Aurora MySQL(5.7.mysql_aurora.2.07.7)ì•”í˜¸í™”: AES-256","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Istio","slug":"Kubernetes/Istio","permalink":"https://ckck803.github.io/categories/Kubernetes/Istio/"}],"tags":[]},{"title":"Istio - Sidecar Injection","slug":"k8s/istio/istio-injection","date":"2023-05-08T01:31:46.000Z","updated":"2024-11-29T03:45:52.963Z","comments":true,"path":"2023/05/08/k8s/istio/istio-injection/","link":"","permalink":"https://ckck803.github.io/2023/05/08/k8s/istio/istio-injection/","excerpt":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜ Istio ë€? ì°¸ê³  https://istio.io/latest/docs/ops/deployment/architecture/ https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/ https://happycloud-lee.tistory.com/104 Sidecar injectionIstioëŠ” Pod ì•ˆì— Envoy proxy container ë¥¼ Sidecar íŒ¨í„´ìœ¼ë¡œ ìƒì„±í•˜ì—¬ Service Mesh (discovery, connect, monitor) ë¥¼ í•©ë‹ˆë‹¤. Podì•ˆì— Proxy containerë¥¼ ì‚½ì…í•˜ëŠ”ê²ƒì„ Sidecar Injection ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. Istio ì—ì„œ Sidecar Injection ì€ Kubernetes ì˜ MutatingAdmissionWebhook ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë©ë‹ˆë‹¤. ì´ê²ƒì€ Kubernetesì˜ API Serverì— ëŒ€í•œ ìš”ì²­ ì²˜ë¦¬ ì¤‘ì— ì‚¬ìš©ë˜ë©°, ìƒˆë¡œìš´ Podê°€ ìƒì„±ë  ë•Œ Istioê°€ Sidecar Proxy ì»¨í…Œì´ë„ˆë¥¼ ìë™ìœ¼ë¡œ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. Istioê°€ Sidecarë¥¼ ì£¼ì…í•˜ëŠ” ë°©ì‹ì€ í¬ê²Œ ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ëŠ” ìë™ ì£¼ì… ë°©ì‹ìœ¼ë¡œ, ì´ëŠ” ê¸°ì¡´ì˜ Kubernetes ì˜¤ë¸Œì íŠ¸ì— Istioì˜ Sidecar Proxyë¥¼ ìë™ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” Istioì˜ ì„¤ì¹˜ ì‹œ Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. ë‘ ë²ˆì§¸ ë°©ì‹ì€ ìˆ˜ë™ ì£¼ì… ë°©ì‹ìœ¼ë¡œ, ì´ëŠ” ê¸°ì¡´ì˜ Kubernetes ì˜¤ë¸Œì íŠ¸ì— Istioì˜ Sidecar Proxyë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. Sidecar ìë™ ì£¼ì… ë°©ì‹","text":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜ Istio ë€? ì°¸ê³  https://istio.io/latest/docs/ops/deployment/architecture/ https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/ https://happycloud-lee.tistory.com/104 Sidecar injectionIstioëŠ” Pod ì•ˆì— Envoy proxy container ë¥¼ Sidecar íŒ¨í„´ìœ¼ë¡œ ìƒì„±í•˜ì—¬ Service Mesh (discovery, connect, monitor) ë¥¼ í•©ë‹ˆë‹¤. Podì•ˆì— Proxy containerë¥¼ ì‚½ì…í•˜ëŠ”ê²ƒì„ Sidecar Injection ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. Istio ì—ì„œ Sidecar Injection ì€ Kubernetes ì˜ MutatingAdmissionWebhook ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë©ë‹ˆë‹¤. ì´ê²ƒì€ Kubernetesì˜ API Serverì— ëŒ€í•œ ìš”ì²­ ì²˜ë¦¬ ì¤‘ì— ì‚¬ìš©ë˜ë©°, ìƒˆë¡œìš´ Podê°€ ìƒì„±ë  ë•Œ Istioê°€ Sidecar Proxy ì»¨í…Œì´ë„ˆë¥¼ ìë™ìœ¼ë¡œ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. Istioê°€ Sidecarë¥¼ ì£¼ì…í•˜ëŠ” ë°©ì‹ì€ í¬ê²Œ ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ëŠ” ìë™ ì£¼ì… ë°©ì‹ìœ¼ë¡œ, ì´ëŠ” ê¸°ì¡´ì˜ Kubernetes ì˜¤ë¸Œì íŠ¸ì— Istioì˜ Sidecar Proxyë¥¼ ìë™ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” Istioì˜ ì„¤ì¹˜ ì‹œ Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. ë‘ ë²ˆì§¸ ë°©ì‹ì€ ìˆ˜ë™ ì£¼ì… ë°©ì‹ìœ¼ë¡œ, ì´ëŠ” ê¸°ì¡´ì˜ Kubernetes ì˜¤ë¸Œì íŠ¸ì— Istioì˜ Sidecar Proxyë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. Sidecar ìë™ ì£¼ì… ë°©ì‹kubectl label ns &lt;namespace&gt; istio-injection=enabled Envoy í”„ë¡ì‹œ ìƒì„± í™•ì¸ìƒì„±ëœ Pod ë‚´ì—ì„œ istio-proxy Container ê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Containers: istio-proxy: Container ID: containerd://cfcaaef4b26c5dc0083b88e3e4e2464c5b2fb0e2d9d9288a7891d66c577db127 Image: docker.io/istio/proxyv2:1.14.1 Image ID: docker.io/istio/proxyv2@sha256:df69c1a7af7c0113424a48f5075ac6d0894123ec926fdb315e849b4f04e39616 Port: 15090/TCP Host Port: 0/TCP Sidecar ìë™ ì£¼ì… ë°©ì‹ ì œê±°labelì„ ì œê±°í• ë•ŒëŠ” ì•„ë˜ ì˜ˆì œì™€ ê°™ì´ keyë’¤ì— - ë¥¼ ë¶™ì´ë©´ ë©ë‹ˆë‹¤. kubectl label ns &lt;namespace&gt; istio-injection- kubectl get mutatingwebhookconfiguration -o yaml NAME WEBHOOKS AGEistio-sidecar-injector 4 313d","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Istio","slug":"Kubernetes/Istio","permalink":"https://ckck803.github.io/categories/Kubernetes/Istio/"}],"tags":[]},{"title":"Istio - istioctl","slug":"k8s/istio/istio-istioctl","date":"2023-05-07T23:31:46.000Z","updated":"2024-02-18T16:19:54.538Z","comments":true,"path":"2023/05/08/k8s/istio/istio-istioctl/","link":"","permalink":"https://ckck803.github.io/2023/05/08/k8s/istio/istio-istioctl/","excerpt":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - istioctl Istio ë€? ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ Istioctl ì„¤ì¹˜brew install istioctl Istio Profile í™•ì¸istioctl profile list íŠ¹ì • Profile ì„¤ì¹˜","text":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - istioctl Istio ë€? ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ Istioctl ì„¤ì¹˜brew install istioctl Istio Profile í™•ì¸istioctl profile list íŠ¹ì • Profile ì„¤ì¹˜istioctl install --set profile=demo Profile ì œê±°istioctl uninstall --purge Proxy Config í™•ì¸istioctl proxy-status Proxy ìƒíƒœ í™•ì¸istioctl ps cluster ì •ë³´istioctl proxy-config clusters &lt;pod ì´ë¦„&gt; -n &lt;namespace&gt; endpoints ì •ë³´istioctl proxy-config endpoints &lt;pod ì´ë¦„&gt; -n &lt;namespace&gt; istioctl proxy-config endpoints &lt;pod ì´ë¦„&gt; -n &lt;namespace&gt; --cluster &lt;cluster ì •ë³´&gt; -o yaml hostStatuses:... ìƒëµ locality: region: ap-northeast-2 zone: ap-northeast-2a... ìƒëµ locality: region: ap-northeast-2 zone: ap-northeast-2c listener ì •ë³´istioctl proxy-config endpoints activity-5c6cfc9986-t2snx route ì •ë³´istioctl proxy-config route","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Istio","slug":"Kubernetes/Istio","permalink":"https://ckck803.github.io/categories/Kubernetes/Istio/"}],"tags":[]},{"title":"Spring Batch - 24. FlowJob","slug":"spring/spring-batch/flow/spring-batch-24-FlowJob","date":"2023-05-07T23:25:35.000Z","updated":"2024-02-26T15:28:21.913Z","comments":true,"path":"2023/05/08/spring/spring-batch/flow/spring-batch-24-FlowJob/","link":"","permalink":"https://ckck803.github.io/2023/05/08/spring/spring-batch/flow/spring-batch-24-FlowJob/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/step/spring-batch-23-JobStep Post not found: spring/spring-batch/step/spring-batch-22-Tasklet Post not found: spring/spring-batch/step/spring-batch-21-TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing FlowJobFlowJobì€ ì¼ë ¨ì˜ ìŠ¤í…ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ê° ìŠ¤í…ì€ Tasklet ë˜ëŠ” Chunk ì§€í–¥ ìŠ¤í…ìœ¼ë¡œ êµ¬ì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Taskletì€ ì¼ë ¨ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, Chunk ì§€í–¥ ìŠ¤í…ì€ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. FlowJobì€ ê° ìŠ¤í…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ ë‹¤ìŒ ìŠ¤í…ìœ¼ë¡œ ì´ë™í•˜ë„ë¡ ì‘ë™í•©ë‹ˆë‹¤. ê° ìŠ¤í…ì€ ì„±ê³µ, ì‹¤íŒ¨ ë˜ëŠ” ì¢…ë£Œì™€ ê°™ì€ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ FlowJobì€ ë‹¤ìŒ ìŠ¤í…ìœ¼ë¡œ ì´ë™í•˜ê±°ë‚˜ ì‘ì—…ì„ ì¤‘ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. FlowJobì€ ê° ìŠ¤í…ì˜ ê²°ê³¼ì— ë”°ë¼ ë‹¤ë¥¸ ìŠ¤í…ìœ¼ë¡œ ì´ë™í•˜ê±°ë‚˜ ì‘ì—…ì„ ì¤‘ì§€í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Spring Batch ì‚¬ìš©ìëŠ” FlowJobì„ ì‚¬ìš©í•˜ì—¬ ìœ ì—°í•˜ê³  ë³µì¡í•œ Batch ì‘ì—…ì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, FlowJobì€ ë¶„ê¸°ì™€ ì¡°ê±´ ë¶„ê¸°ë¥¼ ì§€ì›í•˜ì—¬ ì‘ì—… íë¦„ì„ ë”ìš± ì„¸ë°€í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¶„ê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ì— ë”°ë¼ ë‹¤ë¥¸ ì‘ì—…ì„ ì‹¤í–‰í•˜ê±°ë‚˜, ì¡°ê±´ ë¶„ê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì…ë ¥ ë°ì´í„°ì˜ íŠ¹ì„±ì— ë”°ë¼ ë‹¤ë¥¸ ì‘ì—…ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/step/spring-batch-23-JobStep Post not found: spring/spring-batch/step/spring-batch-22-Tasklet Post not found: spring/spring-batch/step/spring-batch-21-TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing FlowJobFlowJobì€ ì¼ë ¨ì˜ ìŠ¤í…ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ê° ìŠ¤í…ì€ Tasklet ë˜ëŠ” Chunk ì§€í–¥ ìŠ¤í…ìœ¼ë¡œ êµ¬ì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Taskletì€ ì¼ë ¨ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, Chunk ì§€í–¥ ìŠ¤í…ì€ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. FlowJobì€ ê° ìŠ¤í…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ ë‹¤ìŒ ìŠ¤í…ìœ¼ë¡œ ì´ë™í•˜ë„ë¡ ì‘ë™í•©ë‹ˆë‹¤. ê° ìŠ¤í…ì€ ì„±ê³µ, ì‹¤íŒ¨ ë˜ëŠ” ì¢…ë£Œì™€ ê°™ì€ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ FlowJobì€ ë‹¤ìŒ ìŠ¤í…ìœ¼ë¡œ ì´ë™í•˜ê±°ë‚˜ ì‘ì—…ì„ ì¤‘ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. FlowJobì€ ê° ìŠ¤í…ì˜ ê²°ê³¼ì— ë”°ë¼ ë‹¤ë¥¸ ìŠ¤í…ìœ¼ë¡œ ì´ë™í•˜ê±°ë‚˜ ì‘ì—…ì„ ì¤‘ì§€í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Spring Batch ì‚¬ìš©ìëŠ” FlowJobì„ ì‚¬ìš©í•˜ì—¬ ìœ ì—°í•˜ê³  ë³µì¡í•œ Batch ì‘ì—…ì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, FlowJobì€ ë¶„ê¸°ì™€ ì¡°ê±´ ë¶„ê¸°ë¥¼ ì§€ì›í•˜ì—¬ ì‘ì—… íë¦„ì„ ë”ìš± ì„¸ë°€í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¶„ê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ì— ë”°ë¼ ë‹¤ë¥¸ ì‘ì—…ì„ ì‹¤í–‰í•˜ê±°ë‚˜, ì¡°ê±´ ë¶„ê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì…ë ¥ ë°ì´í„°ì˜ íŠ¹ì„±ì— ë”°ë¼ ë‹¤ë¥¸ ì‘ì—…ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. FlowJobBuilderpublic class FlowJobBuilder extends JobBuilderHelper&lt;FlowJobBuilder&gt; &#123; private Flow flow; public FlowJobBuilder(JobBuilderHelper&lt;?&gt; parent) &#123; super(parent); &#125; public JobFlowBuilder start(Flow flow) &#123; return new JobFlowBuilder(this, flow); &#125; public JobFlowBuilder start(Step step) &#123; return new JobFlowBuilder(this, step); &#125; protected FlowJobBuilder flow(Flow flow) &#123; this.flow = flow; return this; &#125; public Job build() &#123; FlowJob job = new FlowJob(); job.setName(getName()); job.setFlow(flow); super.enhance(job); try &#123; job.afterPropertiesSet(); &#125; catch (Exception e) &#123; throw new StepBuilderException(e); &#125; return job; &#125;&#125; public class JobFlowBuilder extends FlowBuilder&lt;FlowJobBuilder&gt; &#123; private FlowJobBuilder parent; public JobFlowBuilder(FlowJobBuilder parent) &#123; super(parent.getName()); this.parent = parent; &#125; public JobFlowBuilder(FlowJobBuilder parent, Step step) &#123; super(parent.getName()); this.parent = parent; start(step); &#125; public JobFlowBuilder(FlowJobBuilder parent, JobExecutionDecider decider) &#123; super(parent.getName()); this.parent = parent; start(decider); &#125; public JobFlowBuilder(FlowJobBuilder parent, Flow flow) &#123; super(parent.getName()); this.parent = parent; start(flow); &#125; @Override public FlowJobBuilder build() &#123; Flow flow = flow(); if(flow instanceof InitializingBean) &#123; try &#123; ((InitializingBean) flow).afterPropertiesSet(); &#125; catch (Exception e) &#123; throw new FlowBuilderException(e); &#125; &#125; parent.flow(flow); return parent; &#125;&#125; FlowBuilder @Beanpublic Job batchJob() &#123; return jobBuilderFactory.get(&quot;batchJob&quot;) .start(step1()) // step1 ì´ COMPELETED ìƒíƒœì¼ ê²½ìš° step2 ë¥¼ ì‹¤í–‰í•œë‹¤. .on(&quot;COMPLETED&quot;).to(step2()) .from(step1()) // step1 ì´ FAILED ìƒíƒœì¼ ê²½ìš° step2 ë¥¼ ì‹¤í–‰í•œë‹¤. .on(&quot;FAILED&quot;).to(step3()) .end() .build();&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"}],"tags":[]},{"title":"CNCF (Cloud Native Computing Foundation)","slug":"k8s/cncf","date":"2023-05-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.536Z","comments":true,"path":"2023/05/08/k8s/cncf/","link":"","permalink":"https://ckck803.github.io/2023/05/08/k8s/cncf/","excerpt":"ê³µì‹ í™ˆí˜ì´ì§€ https://www.cncf.io/ CNCF ë€CNCF(Cloud Native Computing Foundation)ëŠ” Linux ì¬ë‹¨( Linux Foundation)ì˜ í•˜ìœ„ ì¡°ì§ìœ¼ë¡œ, í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì»´í“¨íŒ…ì„ ì§€ì›í•˜ê³  ë°œì „ì‹œí‚¤ëŠ” ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ì˜ ìƒíƒœê³„ë¥¼ ê´€ë¦¬í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ëŠ” ë¹„ì˜ë¦¬ ë‹¨ì²´ì…ë‹ˆë‹¤. CNCFëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ì˜¤í”ˆì†ŒìŠ¤ ê¸°ìˆ ì˜ ê°œë°œ, ìœ ì§€ë³´ìˆ˜, ë³´ê¸‰ì„ ì´‰ì§„í•˜ê³  ìˆìœ¼ë©°, ì´ë¥¼ ìœ„í•´ Kubernetes, Prometheus, Envoy, CoreDNS, containerd ë“± ë‹¤ì–‘í•œ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ìˆ ë“¤ì€ ëª¨ë‘ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¶•, ë°°í¬, ìš´ì˜ì„ ìœ„í•´ í•„ìš”í•œ ê¸°ë°˜ ê¸°ìˆ ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. CNCFëŠ” ì´ëŸ¬í•œ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ì˜ ê°œë°œ, ìš´ì˜, í™•ì¥ì„ ì§€ì›í•˜ë©°, ì´ë¥¼ í†µí•´ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì»´í“¨íŒ… ìƒíƒœê³„ë¥¼ í™•ì¥í•˜ê³  ë°œì „ì‹œí‚¤ê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ CNCFëŠ” ì´ëŸ¬í•œ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ì ë° ê°œë°œì ì»¤ë®¤ë‹ˆí‹°ë¥¼ ì§€ì›í•˜ê³ , êµìœ¡ ë° ì¸ì¦ ë“± ë‹¤ì–‘í•œ í™œë™ì„ í†µí•´ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ê¸°ìˆ ì˜ í™œìš©ê³¼ ë³´ê¸‰ì„ ì´‰ì§„í•˜ê³  ìˆìŠµë‹ˆë‹¤.","text":"ê³µì‹ í™ˆí˜ì´ì§€ https://www.cncf.io/ CNCF ë€CNCF(Cloud Native Computing Foundation)ëŠ” Linux ì¬ë‹¨( Linux Foundation)ì˜ í•˜ìœ„ ì¡°ì§ìœ¼ë¡œ, í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì»´í“¨íŒ…ì„ ì§€ì›í•˜ê³  ë°œì „ì‹œí‚¤ëŠ” ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ì˜ ìƒíƒœê³„ë¥¼ ê´€ë¦¬í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ëŠ” ë¹„ì˜ë¦¬ ë‹¨ì²´ì…ë‹ˆë‹¤. CNCFëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ì˜¤í”ˆì†ŒìŠ¤ ê¸°ìˆ ì˜ ê°œë°œ, ìœ ì§€ë³´ìˆ˜, ë³´ê¸‰ì„ ì´‰ì§„í•˜ê³  ìˆìœ¼ë©°, ì´ë¥¼ ìœ„í•´ Kubernetes, Prometheus, Envoy, CoreDNS, containerd ë“± ë‹¤ì–‘í•œ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ìˆ ë“¤ì€ ëª¨ë‘ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¶•, ë°°í¬, ìš´ì˜ì„ ìœ„í•´ í•„ìš”í•œ ê¸°ë°˜ ê¸°ìˆ ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. CNCFëŠ” ì´ëŸ¬í•œ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ì˜ ê°œë°œ, ìš´ì˜, í™•ì¥ì„ ì§€ì›í•˜ë©°, ì´ë¥¼ í†µí•´ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì»´í“¨íŒ… ìƒíƒœê³„ë¥¼ í™•ì¥í•˜ê³  ë°œì „ì‹œí‚¤ê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ CNCFëŠ” ì´ëŸ¬í•œ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ì ë° ê°œë°œì ì»¤ë®¤ë‹ˆí‹°ë¥¼ ì§€ì›í•˜ê³ , êµìœ¡ ë° ì¸ì¦ ë“± ë‹¤ì–‘í•œ í™œë™ì„ í†µí•´ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ê¸°ìˆ ì˜ í™œìš©ê³¼ ë³´ê¸‰ì„ ì´‰ì§„í•˜ê³  ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Helm","slug":"Kubernetes/Helm","permalink":"https://ckck803.github.io/categories/Kubernetes/Helm/"}],"tags":[]},{"title":"Helm","slug":"k8s/helm/helm","date":"2023-05-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.537Z","comments":true,"path":"2023/05/08/k8s/helm/helm/","link":"","permalink":"https://ckck803.github.io/2023/05/08/k8s/helm/helm/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ Helm ì´ë€Helmì€ Kubernetes ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ê´€ë¦¬ ë„êµ¬ì…ë‹ˆë‹¤. Helmì€ íŒ¨í‚¤ì§€í™”ëœ Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ ì‰½ê²Œ ë°°í¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” íˆ´ì…ë‹ˆë‹¤. Helmì€ chart ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•˜ì—¬ Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ íŒ¨í‚¤ì§€í™”í•©ë‹ˆë‹¤. ChartëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì„±ê³¼ ë¦´ë¦¬ì¦ˆ ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. Chartë¥¼ ì‚¬ìš©í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ì—…ë°ì´íŠ¸í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ì‰½ê²Œ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Helmì€ ë˜í•œ Helm Repositories ë¼ëŠ” ê²ƒì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” Helm Chartsë¥¼ ì €ì¥í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆëŠ” ì €ì¥ì†Œì…ë‹ˆë‹¤. ê³µê°œ ë˜ëŠ” ë¹„ê³µê°œ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë” ì‰½ê²Œ ë°°í¬í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Helmì€ Kubernetesì˜ ë§ì€ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Helmì€ ë¦´ë¦¬ì¦ˆë¥¼ ë¡¤ë°±í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°, ë¦´ë¦¬ì¦ˆ íˆìŠ¤í† ë¦¬ë¥¼ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ Helmì€ í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ë” ì‰½ê²Œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ Helm ì´ë€Helmì€ Kubernetes ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ê´€ë¦¬ ë„êµ¬ì…ë‹ˆë‹¤. Helmì€ íŒ¨í‚¤ì§€í™”ëœ Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ ì‰½ê²Œ ë°°í¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” íˆ´ì…ë‹ˆë‹¤. Helmì€ chart ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•˜ì—¬ Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ íŒ¨í‚¤ì§€í™”í•©ë‹ˆë‹¤. ChartëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì„±ê³¼ ë¦´ë¦¬ì¦ˆ ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. Chartë¥¼ ì‚¬ìš©í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ì—…ë°ì´íŠ¸í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ì‰½ê²Œ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Helmì€ ë˜í•œ Helm Repositories ë¼ëŠ” ê²ƒì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” Helm Chartsë¥¼ ì €ì¥í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆëŠ” ì €ì¥ì†Œì…ë‹ˆë‹¤. ê³µê°œ ë˜ëŠ” ë¹„ê³µê°œ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë” ì‰½ê²Œ ë°°í¬í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Helmì€ Kubernetesì˜ ë§ì€ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Helmì€ ë¦´ë¦¬ì¦ˆë¥¼ ë¡¤ë°±í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°, ë¦´ë¦¬ì¦ˆ íˆìŠ¤í† ë¦¬ë¥¼ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ Helmì€ í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ë” ì‰½ê²Œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ì•½í•˜ìë©´, Helmì€ Kubernetes ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ìœ ìš©í•œ ë„êµ¬ì…ë‹ˆë‹¤. Helmì„ ì‚¬ìš©í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ë” ì‰½ê²Œ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Helm ì„¤ì¹˜curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3chmod 700 get_helm.sh./get_helm.sh brew ë¥¼ ì´ìš©í•œ ì„¤ì¹˜brew install helm","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Helm","slug":"Kubernetes/Helm","permalink":"https://ckck803.github.io/categories/Kubernetes/Helm/"}],"tags":[]},{"title":"Istio ë€?","slug":"k8s/istio/istio","date":"2023-05-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.539Z","comments":true,"path":"2023/05/08/k8s/istio/istio/","link":"","permalink":"https://ckck803.github.io/2023/05/08/k8s/istio/istio/","excerpt":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜ Istio ë€? ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ https://gruuuuu.github.io/cloud/service-mesh-istio/ Istio ë€? IstioëŠ” ì„œë¹„ìŠ¤ ë§¤ì‰¬ (Service Mesh) ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ ì˜¤í”ˆì†ŒìŠ¤ í”Œë«í¼ ì„œë¹„ìŠ¤ ë§¤ì‰¬ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œ ë§ì€ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ë™ì‘í•˜ëŠ” í™˜ê²½ì—ì„œ, ì„œë¹„ìŠ¤ë“¤ ê°„ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê¸°ìˆ  ì…ë‹ˆë‹¤. IstioëŠ” Kubernetes í™˜ê²½ì—ì„œ ë™ì‘í•˜ë©°, ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹  ë³´ì•ˆ, íŠ¸ë˜í”½ ë¼ìš°íŒ…, ë¶€í•˜ ë¶„ì‚°, ì„œë¹„ìŠ¤ ê°„ì˜ ì¥ì•  ì²˜ë¦¬ ë“±ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ í†µí•´ ì„œë¹„ìŠ¤ ë§¤ì‰¬ë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆê³ , ì„œë¹„ìŠ¤ë“¤ ê°„ì˜ í†µì‹  ê´€ë¦¬ë¥¼ ê°„í¸í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Istio Architecture","text":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜ Istio ë€? ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ https://gruuuuu.github.io/cloud/service-mesh-istio/ Istio ë€? IstioëŠ” ì„œë¹„ìŠ¤ ë§¤ì‰¬ (Service Mesh) ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ ì˜¤í”ˆì†ŒìŠ¤ í”Œë«í¼ ì„œë¹„ìŠ¤ ë§¤ì‰¬ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œ ë§ì€ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ë™ì‘í•˜ëŠ” í™˜ê²½ì—ì„œ, ì„œë¹„ìŠ¤ë“¤ ê°„ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê¸°ìˆ  ì…ë‹ˆë‹¤. IstioëŠ” Kubernetes í™˜ê²½ì—ì„œ ë™ì‘í•˜ë©°, ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹  ë³´ì•ˆ, íŠ¸ë˜í”½ ë¼ìš°íŒ…, ë¶€í•˜ ë¶„ì‚°, ì„œë¹„ìŠ¤ ê°„ì˜ ì¥ì•  ì²˜ë¦¬ ë“±ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ í†µí•´ ì„œë¹„ìŠ¤ ë§¤ì‰¬ë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆê³ , ì„œë¹„ìŠ¤ë“¤ ê°„ì˜ í†µì‹  ê´€ë¦¬ë¥¼ ê°„í¸í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Istio Architecture êµ¬ì„± ìš”ì†Œ ì„¤ëª… Envoy Proxy ê°ê°ì˜ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì— ìœ„ì¹˜í•˜ë©°, ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. Envoy Proxy ëŠ” íŠ¸ë˜í”½ ë¼ìš°íŒ…, ë¶€í•˜ ë¶„ì‚°, ì„œë¹„ìŠ¤ ê°„ì˜ ë³´ì•ˆ, íšŒë³µì„± ë° ê°€ì‹œì„±ì„ ì œê³µí•©ë‹ˆë‹¤. Mixer Envoy Proxy ì—ì„œ ìˆ˜ì§‘ëœ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤. Istio ì •ì±… ì—”ì§„ê³¼ í†µì‹ í•˜ì—¬ ë³´ì•ˆ, ë¡œê¹…, ëª¨ë‹ˆí„°ë§ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. Pilot ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ë©°, Envoy í”„ë¡ì‹œì— ëŒ€í•œ êµ¬ì„± ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Istio Pilotì€ ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹  ê·œì¹™ì„ ì„¤ì •í•˜ê³ , íŠ¸ë˜í”½ ë¼ìš°íŒ… ê·œì¹™ì„ êµ¬ì„±í•©ë‹ˆë‹¤. Citadel ë³´ì•ˆ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. Citadelì€ ì„œë¹„ìŠ¤ ì¸ì¦, ì¸ê°€, ì•”í˜¸í™” ë° ìƒí˜¸ TLS(mTLS) ì—°ê²°ì„ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Galley Istio êµ¬ì„± ê´€ë¦¬ ë° ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤. GalleyëŠ” Istio ë¦¬ì†ŒìŠ¤ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê³ , Istio êµ¬ì„± ë³€ê²½ ì‚¬í•­ì„ ê°ì§€í•˜ì—¬ Istio Pilot ë° Citadelê³¼ ë™ê¸°í™”í•©ë‹ˆë‹¤. Envoy ProxyIstio ì„œë¹„ìŠ¤ ë©”ì‰¬ì˜ Data Plane ì„ êµ¬ì„±í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. EnvoyëŠ” ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ê°„ì˜ í†µì‹ ì„ ì¤‘ê°œí•˜ê³ , íŠ¸ë˜í”½ ë¼ìš°íŒ…, ë¶€í•˜ ë¶„ì‚°, ëª¨ë‹ˆí„°ë§, ë³´ì•ˆ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. EnvoyëŠ” Istioì—ì„œ Sidecar íŒ¨í„´ ì„ ì‚¬ìš©í•´ ê° Kubernetes ì• í”Œë¦¬ì¼€ì´ì…˜ Pod ë‚´ì—ì„œ í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰ë˜ë©° Podì˜ ë‚´ë¶€ íŠ¸ë˜í”½ì„ ì¤‘ì¬í•˜ê³  ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì—, ê° Podì˜ ë‚´ë¶€ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í•¨ê»˜ ì‹¤í–‰ë©ë‹ˆë‹¤. Istio ëŠ” Envoy ë¥¼ ì´ìš©í•´ íŠ¸ë˜í”½ ë™ì‘ì— ëŒ€í•œ ë°ì´í„°ë¥¼ attribute ìœ¼ë¡œ ì¶”ì¶œ í•  ìˆ˜ ìˆê³  Mixer ì—ì„œ ì •ì±…ì„ ê´€ë¦¬í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ(Prometheus, Grafana ë“±) ì— ë³´ë‚´ì ¸ ì „ì²´ meshì˜ ë™ì‘ì— ëŒ€í•œ ì •ë³´ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. Sidecar íŒ¨í„´SidecarëŠ” ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤. ì´ íŒ¨í„´ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í•¨ê»˜ ì‹¤í–‰ë˜ëŠ” ì‘ì€ ë…ë¦½ì ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ í”„ë¡œì„¸ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¼ì´í”„ ì‚¬ì´í´ê³¼ í•¨ê»˜ ì‹¤í–‰ë˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í•¨ê»˜ ë…¸ë“œì— ë°°ì¹˜ë©ë‹ˆë‹¤. SidecarëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ì—¬ëŸ¬ ê°€ì§€ ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ, SidecarëŠ” ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ê´€ë¦¬, ë¡œê¹…, ëª¨ë‹ˆí„°ë§, ë³´ì•ˆ ë“±ì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Sidecar íŒ¨í„´ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ Sidecar ê°„ì˜ í†µì‹ ì„ í†µí•´ ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. Sidecar íŒ¨í„´ì€ ì„œë¹„ìŠ¤ ë§¤ì‰¬ êµ¬ì¶•ì— ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ê° ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ Sidecarë¥¼ ë°°ì¹˜í•˜ì—¬, ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ì¶”ì í•˜ê³  ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´, ì„œë¹„ìŠ¤ ë§¤ì‰¬ëŠ” ë¶€í•˜ ë¶„ì‚°, íŠ¸ë˜í”½ ë¼ìš°íŒ…, ë³´ì•ˆ, ëª¨ë‹ˆí„°ë§ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Istiod - Istio DaemonIstiodëŠ” Istioì˜ Control Plane ì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ì „ ë²„ì „ì—ì„œëŠ” Mixer, Pilot, Citadel ë° Galleyì˜ ë„¤ ê°œì˜ ì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆì—ˆì§€ë§Œ, Istio 1.5 ë²„ì „ ì´í›„ì—ëŠ” ì´ëŸ¬í•œ ê¸°ëŠ¥ë“¤ì„ ë‹¨ì¼ ë°”ì´ë„ˆë¦¬ì¸ Istiodë¡œ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤. IstiodëŠ” ì„œë¹„ìŠ¤ ë§¤ì‰¬ ê´€ë¦¬ë¥¼ ë‹´ë‹¹í•˜ë©°, Istio êµ¬ì„± ì •ë³´ë¥¼ ìœ ì§€ ê´€ë¦¬í•˜ê³  Envoy í”„ë¡ì‹œì— ëŒ€í•œ êµ¬ì„± ì •ë³´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ í†µí•´, IstiodëŠ” ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹  ê·œì¹™ì„ ì„¤ì •í•˜ê³ , íŠ¸ë˜í”½ ë¼ìš°íŒ… ê·œì¹™ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, IstiodëŠ” ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì— ëŒ€í•œ ë³´ì•ˆ ê¸°ëŠ¥ë„ ì œê³µí•©ë‹ˆë‹¤. Citadelê³¼ í†µí•©ë˜ì–´ ì„œë¹„ìŠ¤ ì¸ì¦ ë° ìƒí˜¸ TLS(mTLS) ì—°ê²° ì„¤ì •ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. IstiodëŠ” ë‹¤ì–‘í•œ ë³´ì•ˆ ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°, ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ë³´í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. IstiodëŠ” Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ë™ì‘í•˜ë©°, ë‹¤ë¥¸ Istio ì»´í¬ë„ŒíŠ¸ì™€ í†µì‹ í•˜ì—¬ ì„œë¹„ìŠ¤ ë§¤ì‰¬ì˜ ê´€ë¦¬ ë° ë³´ì•ˆ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. pilot : CRD(CustumResourceDefinition)ì„ SidecarProxyê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ ë³€í™˜ ë° ì „íŒŒ galley : kubernetes yaml íŒŒì¼ì„ istioê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ ë³€í™˜ citadel : ì¸ì¦ ê´€ë¦¬(TLS certification ë“±)","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Istio","slug":"Kubernetes/Istio","permalink":"https://ckck803.github.io/categories/Kubernetes/Istio/"}],"tags":[]},{"title":"Service Mesh","slug":"k8s/istio/service-mesh","date":"2023-05-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.539Z","comments":true,"path":"2023/05/08/k8s/istio/service-mesh/","link":"","permalink":"https://ckck803.github.io/2023/05/08/k8s/istio/service-mesh/","excerpt":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜ Istio ë€? ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ https://gruuuuu.github.io/cloud/service-mesh-istio/ ì„œë¹„ìŠ¤ ë©”ì‰¬ ì„œë¹„ìŠ¤ ë§¤ì‰¬(Service Mesh)ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§í•˜ëŠ” ì•„í‚¤í…ì²˜ íŒ¨í„´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œëŠ” ì—¬ëŸ¬ ê°œì˜ ì‘ì€ ì„œë¹„ìŠ¤ë¡œ ë¶„í• ë˜ì–´ ë™ì‘í•˜ë©°, ê°ê°ì˜ ì„œë¹„ìŠ¤ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì–¸ì–´, í”„ë ˆì„ì›Œí¬, í”Œë«í¼ì—ì„œ ê°œë°œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œëŠ” ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ë§¤ì‰¬ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ì—ì„œ ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ì¶”ìƒí™”í•˜ê³ , ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ë³´ì•ˆí•˜ê³ , ë¶€í•˜ ë¶„ì‚°ì„ ìˆ˜í–‰í•˜ë©°, ì„œë¹„ìŠ¤ ê°„ì˜ ì¥ì•  ì²˜ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ë§¤ì‰¬ëŠ” ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ì¤‘ì•™ ì§‘ì¤‘ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê¸°ì¡´ì˜ ì•„í‚¤í…ì²˜ íŒ¨í„´ê³¼ëŠ” ë‹¬ë¦¬, ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œëŠ” ì„œë¹„ìŠ¤ ë§¤ì‰¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ê°ì˜ ì„œë¹„ìŠ¤ê°€ í†µì‹  ê´€ë¦¬ë¥¼ ë‹´ë‹¹í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´, ê°ê°ì˜ ì„œë¹„ìŠ¤ëŠ” ë…ë¦½ì ìœ¼ë¡œ í™•ì¥í•˜ê³ , ì—…ê·¸ë ˆì´ë“œí•˜ë©°, ìœ ì§€ë³´ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ Istio - Locality Load Balancing (ì§€ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±) Istio - Sidecar Injection Istio - Istio ì„¤ì¹˜ ë° addon ì„¤ì¹˜ Istio ë€? ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ https://gruuuuu.github.io/cloud/service-mesh-istio/ ì„œë¹„ìŠ¤ ë©”ì‰¬ ì„œë¹„ìŠ¤ ë§¤ì‰¬(Service Mesh)ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§í•˜ëŠ” ì•„í‚¤í…ì²˜ íŒ¨í„´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œëŠ” ì—¬ëŸ¬ ê°œì˜ ì‘ì€ ì„œë¹„ìŠ¤ë¡œ ë¶„í• ë˜ì–´ ë™ì‘í•˜ë©°, ê°ê°ì˜ ì„œë¹„ìŠ¤ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì–¸ì–´, í”„ë ˆì„ì›Œí¬, í”Œë«í¼ì—ì„œ ê°œë°œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œëŠ” ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ë§¤ì‰¬ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ì—ì„œ ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ì¶”ìƒí™”í•˜ê³ , ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ë³´ì•ˆí•˜ê³ , ë¶€í•˜ ë¶„ì‚°ì„ ìˆ˜í–‰í•˜ë©°, ì„œë¹„ìŠ¤ ê°„ì˜ ì¥ì•  ì²˜ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ë§¤ì‰¬ëŠ” ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ì¤‘ì•™ ì§‘ì¤‘ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê¸°ì¡´ì˜ ì•„í‚¤í…ì²˜ íŒ¨í„´ê³¼ëŠ” ë‹¬ë¦¬, ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œëŠ” ì„œë¹„ìŠ¤ ë§¤ì‰¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ê°ì˜ ì„œë¹„ìŠ¤ê°€ í†µì‹  ê´€ë¦¬ë¥¼ ë‹´ë‹¹í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´, ê°ê°ì˜ ì„œë¹„ìŠ¤ëŠ” ë…ë¦½ì ìœ¼ë¡œ í™•ì¥í•˜ê³ , ì—…ê·¸ë ˆì´ë“œí•˜ë©°, ìœ ì§€ë³´ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Istio","slug":"Kubernetes/Istio","permalink":"https://ckck803.github.io/categories/Kubernetes/Istio/"}],"tags":[]},{"title":"CoreDNS","slug":"k8s/service/CoreDNS","date":"2023-05-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.542Z","comments":true,"path":"2023/05/08/k8s/service/CoreDNS/","link":"","permalink":"https://ckck803.github.io/2023/05/08/k8s/service/CoreDNS/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s ì°¸ê³  ê³µì‹ ë¬¸ì„œ https://kubernetes.io/docs/concepts/services-networking/service/ CoreDNS CoreDNSëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤(Kubernetes) í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ DNS(Domain Name System) ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ê°€ë²¼ìš´ DNS ì„œë²„ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ íŒŒë“œ, ì„œë¹„ìŠ¤ ë° ê¸°íƒ€ ë¦¬ì†ŒìŠ¤ë¥¼ DNS ì´ë¦„ìœ¼ë¡œ ë§¤í•‘í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì— ì‚¬ìš©ë©ë‹ˆë‹¤. CoreDNSëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ DNS ì¡°íšŒë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë””í´íŠ¸ë¡œ ì„¤ì¹˜ë˜ëŠ” DNS ì„œë²„ì…ë‹ˆë‹¤. ì´ì „ì—ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„  kube-dns ë¼ëŠ” DNS ì„œë²„ê°€ ì‚¬ìš©ë˜ì—ˆì§€ë§Œ, ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ 1.11ë¶€í„°ëŠ” CoreDNSê°€ ë””í´íŠ¸ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. CoreDNS ê¸°ëŠ¥","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s ì°¸ê³  ê³µì‹ ë¬¸ì„œ https://kubernetes.io/docs/concepts/services-networking/service/ CoreDNS CoreDNSëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤(Kubernetes) í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ DNS(Domain Name System) ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ê°€ë²¼ìš´ DNS ì„œë²„ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ íŒŒë“œ, ì„œë¹„ìŠ¤ ë° ê¸°íƒ€ ë¦¬ì†ŒìŠ¤ë¥¼ DNS ì´ë¦„ìœ¼ë¡œ ë§¤í•‘í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì— ì‚¬ìš©ë©ë‹ˆë‹¤. CoreDNSëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ DNS ì¡°íšŒë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë””í´íŠ¸ë¡œ ì„¤ì¹˜ë˜ëŠ” DNS ì„œë²„ì…ë‹ˆë‹¤. ì´ì „ì—ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„  kube-dns ë¼ëŠ” DNS ì„œë²„ê°€ ì‚¬ìš©ë˜ì—ˆì§€ë§Œ, ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ 1.11ë¶€í„°ëŠ” CoreDNSê°€ ë””í´íŠ¸ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. CoreDNS ê¸°ëŠ¥ DNS ì´ë¦„ í•´ì„ CoreDNSëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ íŒŒë“œ, ì„œë¹„ìŠ¤, ì¸ê·¸ë ˆìŠ¤ ë“±ê³¼ ê°™ì€ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ DNS ì´ë¦„ì„ í•´ì„í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ DNSë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Service Discovery CoreDNSëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì„œë¹„ìŠ¤ë¥¼ DNS ì´ë¦„ìœ¼ë¡œ ë§¤í•‘í•˜ì—¬ íŒŒë“œ ê°„ í†µì‹ ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ì˜ DNS ì´ë¦„ì€ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ íŒŒë“œì—ì„œ í•´ë‹¹ ì„œë¹„ìŠ¤ë¡œì˜ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. Custom DNS ì„¤ì • CoreDNSëŠ” ì‚¬ìš©ì ì •ì˜ DNS ì„¤ì •ì„ ì§€ì›í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ìëŠ” CoreDNS ì„¤ì •ì„ ìˆ˜ì •í•˜ì—¬ í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ DNS ì„œë²„ì™€ì˜ í†µí•© ë˜ëŠ” ì¶”ê°€ì ì¸ DNS ë ˆì½”ë“œë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"ì„œë¹„ìŠ¤","slug":"Kubernetes/ì„œë¹„ìŠ¤","permalink":"https://ckck803.github.io/categories/Kubernetes/%EC%84%9C%EB%B9%84%EC%8A%A4/"}],"tags":[]},{"title":"Spring Batch - 23. Job ì„ Step ìœ¼ë¡œ ê°–ëŠ” JobStep","slug":"spring/spring-batch/jobstep/spring-batch-23-JobStep","date":"2023-05-06T23:25:35.000Z","updated":"2024-02-26T15:30:07.940Z","comments":true,"path":"2023/05/07/spring/spring-batch/jobstep/spring-batch-23-JobStep/","link":"","permalink":"https://ckck803.github.io/2023/05/07/spring/spring-batch/jobstep/spring-batch-23-JobStep/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Spring Batch - 23. Job ì„ Step ìœ¼ë¡œ ê°–ëŠ” JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder JobStepJob ì— ì†í•˜ëŠ” Step ì¤‘ì—ì„œ ì™¸ë¶€ì˜ Job ì„ í¬í•¨í•˜ê³  ìˆëŠ” Step ì…ë‹ˆë‹¤. ì™¸ë¶€ì˜ Job ì´ ì‹¤íŒ¨í•˜ê²Œ ë˜ë©´ í•´ë‹¹ Step ì´ ì‹¤íŒ¨í•˜ë¯€ë¡œ ê²°êµ­ í•´ë‹¹ Step ì„ ê°€ì§„ Job ë„ ì‹¤íŒ¨í•˜ê²Œ ë©ë‹ˆë‹¤. ëª¨ë“  ë©”íƒ€ë°ì´í„°ëŠ” ê¸°ë³¸ Job ê³¼ ì™¸ë¶€ Job ë³„ë¡œ ê°ê° ì €ì¥ë©ë‹ˆë‹¤. ì»¤ë‹¤ë€ ì‹œìŠ¤í…œì„ ì‘ì€ ëª¨ë“ˆë¡œ ìª¼ê°œê³  Job ì˜ íë¦„ì„ ê´€ë¦¬í•˜ê³ ì í• ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. @Beanpublic Job parentJob() &#123; return this.jobBuilderFactory.get(&quot;parentJob&quot;) .start(jobStep(null)) .next(step2()) .build();&#125;@Beanpublic Step jobStep(JobLauncher jobLauncher) &#123; return this.stepBuilderFactory.get(&quot;jobStep&quot;) .job(childJob()) .launcher(jobLauncher) .listener(new StepExecutionListener() &#123; @Override public void beforeStep(StepExecution stepExecution) &#123; stepExecution.getExecutionContext().putString(&quot;name&quot;, &quot;user1&quot;); &#125; @Override public ExitStatus afterStep(StepExecution stepExecution) &#123; return null; &#125; &#125;) .parametersExtractor(jobParametersExtractor()) .build();&#125;@Beanpublic Job childJob() &#123; return this.jobBuilderFactory.get(&quot;childJob&quot;) .start(step1()) .build();&#125;@Beanpublic Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123;// throw new RuntimeException(&quot;step1 was failed&quot;); return RepeatStatus.FINISHED; &#125; &#125;) .build();&#125;@Beanpublic Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet((contribution, chunkContext) -&gt; &#123; throw new RuntimeException(&quot;step2 was failed&quot;);// return RepeatStatus.FINISHED; &#125;) .build();&#125;@Bean public DefaultJobParametersExtractor jobParametersExtractor() &#123; // ExecutionContext ì— ì„¤ì •ëœ Key ë¡œ ë˜ìˆëŠ” ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. DefaultJobParametersExtractor extractor = new DefaultJobParametersExtractor(); extractor.setKeys(new String[]&#123;&quot;name&quot;&#125;); return extractor;&#125;","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Spring Batch - 23. Job ì„ Step ìœ¼ë¡œ ê°–ëŠ” JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder JobStepJob ì— ì†í•˜ëŠ” Step ì¤‘ì—ì„œ ì™¸ë¶€ì˜ Job ì„ í¬í•¨í•˜ê³  ìˆëŠ” Step ì…ë‹ˆë‹¤. ì™¸ë¶€ì˜ Job ì´ ì‹¤íŒ¨í•˜ê²Œ ë˜ë©´ í•´ë‹¹ Step ì´ ì‹¤íŒ¨í•˜ë¯€ë¡œ ê²°êµ­ í•´ë‹¹ Step ì„ ê°€ì§„ Job ë„ ì‹¤íŒ¨í•˜ê²Œ ë©ë‹ˆë‹¤. ëª¨ë“  ë©”íƒ€ë°ì´í„°ëŠ” ê¸°ë³¸ Job ê³¼ ì™¸ë¶€ Job ë³„ë¡œ ê°ê° ì €ì¥ë©ë‹ˆë‹¤. ì»¤ë‹¤ë€ ì‹œìŠ¤í…œì„ ì‘ì€ ëª¨ë“ˆë¡œ ìª¼ê°œê³  Job ì˜ íë¦„ì„ ê´€ë¦¬í•˜ê³ ì í• ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. @Beanpublic Job parentJob() &#123; return this.jobBuilderFactory.get(&quot;parentJob&quot;) .start(jobStep(null)) .next(step2()) .build();&#125;@Beanpublic Step jobStep(JobLauncher jobLauncher) &#123; return this.stepBuilderFactory.get(&quot;jobStep&quot;) .job(childJob()) .launcher(jobLauncher) .listener(new StepExecutionListener() &#123; @Override public void beforeStep(StepExecution stepExecution) &#123; stepExecution.getExecutionContext().putString(&quot;name&quot;, &quot;user1&quot;); &#125; @Override public ExitStatus afterStep(StepExecution stepExecution) &#123; return null; &#125; &#125;) .parametersExtractor(jobParametersExtractor()) .build();&#125;@Beanpublic Job childJob() &#123; return this.jobBuilderFactory.get(&quot;childJob&quot;) .start(step1()) .build();&#125;@Beanpublic Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123;// throw new RuntimeException(&quot;step1 was failed&quot;); return RepeatStatus.FINISHED; &#125; &#125;) .build();&#125;@Beanpublic Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet((contribution, chunkContext) -&gt; &#123; throw new RuntimeException(&quot;step2 was failed&quot;);// return RepeatStatus.FINISHED; &#125;) .build();&#125;@Bean public DefaultJobParametersExtractor jobParametersExtractor() &#123; // ExecutionContext ì— ì„¤ì •ëœ Key ë¡œ ë˜ìˆëŠ” ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. DefaultJobParametersExtractor extractor = new DefaultJobParametersExtractor(); extractor.setKeys(new String[]&#123;&quot;name&quot;&#125;); return extractor;&#125; JobParametersExtractorì´ ì¸í„°í˜ì´ìŠ¤ëŠ” Job ì‹¤í–‰ ì‹œ í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ì¶œí•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. JobParametersExtractorëŠ” Job ì‹¤í–‰ì„ ìœ„í•´ í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ì¶œí•˜ëŠ” ë©”ì„œë“œì¸ extract()ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” JobParameters ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©°, Job ì‹¤í–‰ì— í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. Spring Batchì—ì„œëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ì¶œí•˜ëŠ” ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì£¼ìš”í•œ ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì»¤ë§¨ë“œ ë¼ì¸ ë§¤ê°œë³€ìˆ˜(Command-line Parameters): ì‹¤í–‰ ëª…ë ¹ì–´ë‚˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ Jobì„ ì‹¤í–‰í•  ë•Œ, ì»¤ë§¨ë“œ ë¼ì¸ì—ì„œ ì „ë‹¬ë˜ëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, â€œâ€“param1&#x3D;value1 â€“param2&#x3D;value2â€ì™€ ê°™ì´ ì „ë‹¬ë˜ëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ ì½ì–´ì™€ JobParameters ê°ì²´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. í™˜ê²½ ë³€ìˆ˜(Environment Variables): ìš´ì˜ì²´ì œì˜ í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, â€œMY_PARAM&#x3D;valueâ€ì™€ ê°™ì€ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì½ì–´ì™€ JobParameters ê°ì²´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ì†ì„± íŒŒì¼(Properties Files): Spring í™˜ê²½ ì„¤ì • íŒŒì¼ì— ì •ì˜ëœ ì†ì„± ê°’ì„ ì½ì–´ì™€ ë§¤ê°œë³€ìˆ˜ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, â€œmy.param&#x3D;valueâ€ì™€ ê°™ì´ ì •ì˜ëœ ì†ì„± ê°’ì„ ì½ì–´ì™€ JobParameters ê°ì²´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. JobParametersExtractorë¥¼ ì§ì ‘ êµ¬í˜„í•˜ì—¬ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ì¶œí•˜ëŠ” ë¡œì§ì„ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ íŠ¹ì •í•œ ë§¤ê°œë³€ìˆ˜ ì†ŒìŠ¤ë‚˜ ì¶”ì¶œ ë°©ì‹ì— ë”°ë¼ JobParametersë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¶”ì¶œëœ JobParameters ê°ì²´ëŠ” Spring Batchì˜ Job ì‹¤í–‰ ì‹œì ì— ì‚¬ìš©ë˜ë©°, Job ë‚´ì—ì„œ í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ ê°’ì„ ì°¸ì¡°í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Jobì˜ ì‹¤í–‰ì„ ë™ì ìœ¼ë¡œ ì œì–´í•˜ê³ , ë§¤ê°œë³€ìˆ˜ ê°’ì„ ë³€ê²½í•˜ì—¬ ë‹¤ì–‘í•œ ì‹¤í–‰ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. public interface JobParametersExtractor &#123; JobParameters getJobParameters(Job job, StepExecution stepExecution);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - ConfigMap","slug":"k8s/config/configmap","date":"2023-05-06T21:31:46.000Z","updated":"2024-02-18T16:19:54.536Z","comments":true,"path":"2023/05/07/k8s/config/configmap/","link":"","permalink":"https://ckck803.github.io/2023/05/07/k8s/config/configmap/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Secret ì¿ ë²„ë„¤í‹°ìŠ¤ - ConfigMap ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s ConfigMap ì¿ ë²„ë„¤í‹°ìŠ¤(ConfigMap)ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¤ì • ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë¦¬ì†ŒìŠ¤ ì„¤ì • ë°ì´í„°ëŠ” í‚¤-ê°’ ìŒìœ¼ë¡œ êµ¬ì„±ë˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•„ìš”í•œ ì„¤ì • ê°’ì„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ConfigMapì€ í´ëŸ¬ìŠ¤í„° ìˆ˜ì¤€ ë˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìˆ˜ì¤€ì—ì„œ ìƒì„±ë  ìˆ˜ ìˆìœ¼ë©°, í´ëŸ¬ìŠ¤í„° ìˆ˜ì¤€ì˜ ConfigMapì€ ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ConfigMapì€ ì£¼ë¡œ í™˜ê²½ ë³€ìˆ˜, ì„¤ì • íŒŒì¼, ëª…ë ¹í–‰ ì¸ìˆ˜ ë“±ê³¼ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ êµ¬ì„± ë°ì´í„°ëŠ” ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ ë¶„ë¦¬ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì¬ì‚¬ìš©í•˜ê±°ë‚˜ êµ¬ì„±ì„ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ ConfigMapì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ ë°°í¬í•˜ëŠ” ë™ì•ˆ êµ¬ì„±ì„ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. ConfigMapì€ YAML ë˜ëŠ” JSON í˜•ì‹ìœ¼ë¡œ ì •ì˜ë˜ë©°, ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ìƒì„± ë° ì ìš©ë©ë‹ˆë‹¤. ConfigMapì„ ìƒì„±í•œ í›„ì—ëŠ” í•´ë‹¹ ConfigMapì„ ì‚¬ìš©í•˜ë ¤ëŠ” Podì˜ ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸í•˜ê±°ë‚˜ í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ConfigMapì—ì„œ ì •ì˜ëœ ì„¤ì • ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ConfigMapì—ì„œ â€œdb_hostâ€ë¼ëŠ” í‚¤ì— ëŒ€í•œ ê°’ìœ¼ë¡œ â€œdatabase.example.comâ€ì„ ì„¤ì •í•˜ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì´ ê°’ì„ ì½ì–´ì™€ ë°ì´í„°ë² ì´ìŠ¤ í˜¸ìŠ¤íŠ¸ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ConfigMapì€ í´ëŸ¬ìŠ¤í„°ë‚˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìˆ˜ì¤€ì—ì„œ ë³€ê²½ ë° ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë³€ê²½ëœ ì„¤ì • ê°’ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ì‹œì‘í•˜ì§€ ì•Šê³ ë„ ì¦‰ì‹œ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒŒì¼ì„ í†µì§¸ë¡œ ConfigMap ìœ¼ë¡œ ë§Œë“¤ê¸°","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Secret ì¿ ë²„ë„¤í‹°ìŠ¤ - ConfigMap ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s ConfigMap ì¿ ë²„ë„¤í‹°ìŠ¤(ConfigMap)ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¤ì • ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë¦¬ì†ŒìŠ¤ ì„¤ì • ë°ì´í„°ëŠ” í‚¤-ê°’ ìŒìœ¼ë¡œ êµ¬ì„±ë˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•„ìš”í•œ ì„¤ì • ê°’ì„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ConfigMapì€ í´ëŸ¬ìŠ¤í„° ìˆ˜ì¤€ ë˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìˆ˜ì¤€ì—ì„œ ìƒì„±ë  ìˆ˜ ìˆìœ¼ë©°, í´ëŸ¬ìŠ¤í„° ìˆ˜ì¤€ì˜ ConfigMapì€ ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ConfigMapì€ ì£¼ë¡œ í™˜ê²½ ë³€ìˆ˜, ì„¤ì • íŒŒì¼, ëª…ë ¹í–‰ ì¸ìˆ˜ ë“±ê³¼ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ êµ¬ì„± ë°ì´í„°ëŠ” ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ ë¶„ë¦¬ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì¬ì‚¬ìš©í•˜ê±°ë‚˜ êµ¬ì„±ì„ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ ConfigMapì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ ë°°í¬í•˜ëŠ” ë™ì•ˆ êµ¬ì„±ì„ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. ConfigMapì€ YAML ë˜ëŠ” JSON í˜•ì‹ìœ¼ë¡œ ì •ì˜ë˜ë©°, ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ìƒì„± ë° ì ìš©ë©ë‹ˆë‹¤. ConfigMapì„ ìƒì„±í•œ í›„ì—ëŠ” í•´ë‹¹ ConfigMapì„ ì‚¬ìš©í•˜ë ¤ëŠ” Podì˜ ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸í•˜ê±°ë‚˜ í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ConfigMapì—ì„œ ì •ì˜ëœ ì„¤ì • ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ConfigMapì—ì„œ â€œdb_hostâ€ë¼ëŠ” í‚¤ì— ëŒ€í•œ ê°’ìœ¼ë¡œ â€œdatabase.example.comâ€ì„ ì„¤ì •í•˜ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì´ ê°’ì„ ì½ì–´ì™€ ë°ì´í„°ë² ì´ìŠ¤ í˜¸ìŠ¤íŠ¸ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ConfigMapì€ í´ëŸ¬ìŠ¤í„°ë‚˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìˆ˜ì¤€ì—ì„œ ë³€ê²½ ë° ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë³€ê²½ëœ ì„¤ì • ê°’ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ì‹œì‘í•˜ì§€ ì•Šê³ ë„ ì¦‰ì‹œ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒŒì¼ì„ í†µì§¸ë¡œ ConfigMap ìœ¼ë¡œ ë§Œë“¤ê¸°global: scrape_interval: 15sscrape_configs: - job_name: prometheus metrics_path: /prometheus/metrics static_configs: - targets: - localhost:9090 kubectl create cm my-config --from-file=config-file.yaml kubectl get cmNAME DATA AGEmy-config 1 54s kubectl describe cm/my-config Name: my-configNamespace: defaultLabels: &lt;none&gt;Annotations: &lt;none&gt;Data====config-file.yaml:----global: scrape_interval: 15sscrape_configs: - job_name: prometheus metrics_path: /prometheus/metrics static_configs: - targets: - localhost:9090BinaryData====Events: &lt;none&gt; apiVersion: v1kind: Podmetadata: name: alpine-envspec: containers: - name: alpine image: alpine command: [&quot;sleep&quot;] args: [&quot;100000&quot;] env: - name: hello valueFrom: configMapKeyRef: name: my-config key: hello # ì ‘ì† í›„ ì„¤ì • í™•ì¸kubectl exec -it alpine -- ls /etc/configkubectl exec -it alpine -- cat /etc/config/config-file.yml env íŒŒì¼ë¡œ ë§Œë“¤ê¸°hello=worldhaha=hoho kubectl create cm env-config --from-env-file=config-env.yamlconfigmap/env-config created kubectl describe cm/env-config Name: env-configNamespace: defaultLabels: &lt;none&gt;Annotations: &lt;none&gt;Data====haha:----hohohello:----worldBinaryData====Events: &lt;none&gt; YAML íŒŒì¼ë¡œ ë§Œë“¤ê¸°apiVersion: v1kind: ConfigMapmetadata: name: my-configdata: hello: world kuber: netes multiline: |- first second third kubectl apply -f config-map.yaml kubectl exec -it alpine -- cat /etc/config/multiline firstsecondthird","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"Config","slug":"Kubernetes/Config","permalink":"https://ckck803.github.io/categories/Kubernetes/Config/"}],"tags":[]},{"title":"Spring Batch - 22. Tasklet ê¸°ë°˜ Step","slug":"spring/spring-batch/tasklet/spring-batch-22-Tasklet","date":"2023-05-06T11:25:35.000Z","updated":"2024-02-26T15:30:32.093Z","comments":true,"path":"2023/05/06/spring/spring-batch/tasklet/spring-batch-22-Tasklet/","link":"","permalink":"https://ckck803.github.io/2023/05/06/spring/spring-batch/tasklet/spring-batch-22-Tasklet/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Tasklet Tasklet ì€ Step ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì‘ì—…ì˜ ë‹¨ìœ„ ì¤‘ í•˜ë‚˜ Tasklet ì€ Step ë‚´ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì‘ì—…ì˜ ë‹¨ìœ„ ì¤‘ í•˜ë‚˜ë©° ë³´í†µ ë‹¨ì¼ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤. TaskletStep ê°ì²´ì— ì˜í•´ ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ë©° Tasklet ë°˜í™˜ê°’ì— ë”°ë¼ ê³„ì† ìˆ˜í–‰í•˜ê±°ë‚˜ ì¢…ë£Œí•©ë‹ˆë‹¤. RepeatStatus : Taasklet ì˜ ë°˜ë³µì—¬ë¶€ ìƒíƒœ ê°’ RepeatStatus.FINISHED : Tasklet ì¢…ë£Œ, RepeatStatus ë¥¼ null ë¡œ ë°˜í™˜í•˜ë©´ RepeatStatus.FINISHED ë¡œ í•´ì„ëœë‹¤. RepeatStatus.CONTINUABLE : Tasklet ë°˜ë³µ Tasklet ì¸í„°í˜ì´ìŠ¤","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Tasklet Tasklet ì€ Step ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì‘ì—…ì˜ ë‹¨ìœ„ ì¤‘ í•˜ë‚˜ Tasklet ì€ Step ë‚´ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì‘ì—…ì˜ ë‹¨ìœ„ ì¤‘ í•˜ë‚˜ë©° ë³´í†µ ë‹¨ì¼ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤. TaskletStep ê°ì²´ì— ì˜í•´ ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ë©° Tasklet ë°˜í™˜ê°’ì— ë”°ë¼ ê³„ì† ìˆ˜í–‰í•˜ê±°ë‚˜ ì¢…ë£Œí•©ë‹ˆë‹¤. RepeatStatus : Taasklet ì˜ ë°˜ë³µì—¬ë¶€ ìƒíƒœ ê°’ RepeatStatus.FINISHED : Tasklet ì¢…ë£Œ, RepeatStatus ë¥¼ null ë¡œ ë°˜í™˜í•˜ë©´ RepeatStatus.FINISHED ë¡œ í•´ì„ëœë‹¤. RepeatStatus.CONTINUABLE : Tasklet ë°˜ë³µ Tasklet ì¸í„°í˜ì´ìŠ¤public interface Tasklet &#123; @Nullable RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception;&#125; @Componentpublic class CustomTasklet implements Tasklet &#123; @Override public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception &#123; System.out.println(&quot;stepContribution = &quot; + stepContribution + &quot;, chunkContext = &quot; + chunkContext); return RepeatStatus.FINISHED; &#125;&#125; @Beanpublic Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception &#123; System.out.println(&quot;stepContribution = &quot; + stepContribution + &quot;, chunkContext = &quot; + chunkContext); return RepeatStatus.FINISHED; &#125; &#125;) .build();&#125;@Beanpublic Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet(customTasklet) .build();&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"}],"tags":[]},{"title":"Spring Batch - 21. TaskletStep","slug":"spring/spring-batch/tasklet/spring-batch-21-TaskletStep","date":"2023-05-04T11:25:35.000Z","updated":"2024-02-26T15:30:27.634Z","comments":true,"path":"2023/05/04/spring/spring-batch/tasklet/spring-batch-21-TaskletStep/","link":"","permalink":"https://ckck803.github.io/2023/05/04/spring/spring-batch/tasklet/spring-batch-21-TaskletStep/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder TaskletStep TaskletStep ì€ Step êµ¬í˜„ì²´ ì¤‘ í•˜ë‚˜ë¡œ Tasklet ì„ ì‹¤í–‰í•œë‹¤. TaskletStep ì€ Step ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©°, Tasklet ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ Step ì…ë‹ˆë‹¤. Tasklet ì€ Step ì˜ ì‹¤í–‰ ì‹œì ì— í˜¸ì¶œë˜ëŠ” ë‹¨ì¼í•œ ì‹¤í–‰ ë‹¨ìœ„ì…ë‹ˆë‹¤. TaskletStep ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, Tasklet ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ê³ , í•´ë‹¹ í´ë˜ìŠ¤ì—ì„œ ìˆ˜í–‰í•  ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ì´í›„ TaskletStep ì„ ì •ì˜í•  ë•Œ, ì´ Tasklet í´ë˜ìŠ¤ë¥¼ ì°¸ì¡°í•˜ì—¬ Stepì„ êµ¬ì„±í•©ë‹ˆë‹¤. TaskletStep ì„ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ì˜ˆëŠ” íŒŒì¼ì„ ì½ì–´ë“¤ì´ê³ , ì²˜ë¦¬í•œ í›„ ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì¶œë ¥í•˜ëŠ” ì‘ì—…ì…ë‹ˆë‹¤. ì´ ê²½ìš°, Tasklet í´ë˜ìŠ¤ì—ì„œ íŒŒì¼ì„ ì½ì–´ë“¤ì´ê³ , ì²˜ë¦¬í•œ í›„ ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì¶œë ¥í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤. ë˜í•œ, TaskletStep ì€ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë©°, Spring Batchì˜ ë‹¤ë¥¸ Stepê³¼ ì¡°í•©í•˜ì—¬ ë‹¤ì–‘í•œ ì²˜ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. TaskletStep ì•„í‚¤í…ì²˜","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder TaskletStep TaskletStep ì€ Step êµ¬í˜„ì²´ ì¤‘ í•˜ë‚˜ë¡œ Tasklet ì„ ì‹¤í–‰í•œë‹¤. TaskletStep ì€ Step ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©°, Tasklet ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ Step ì…ë‹ˆë‹¤. Tasklet ì€ Step ì˜ ì‹¤í–‰ ì‹œì ì— í˜¸ì¶œë˜ëŠ” ë‹¨ì¼í•œ ì‹¤í–‰ ë‹¨ìœ„ì…ë‹ˆë‹¤. TaskletStep ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, Tasklet ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ê³ , í•´ë‹¹ í´ë˜ìŠ¤ì—ì„œ ìˆ˜í–‰í•  ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ì´í›„ TaskletStep ì„ ì •ì˜í•  ë•Œ, ì´ Tasklet í´ë˜ìŠ¤ë¥¼ ì°¸ì¡°í•˜ì—¬ Stepì„ êµ¬ì„±í•©ë‹ˆë‹¤. TaskletStep ì„ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ì˜ˆëŠ” íŒŒì¼ì„ ì½ì–´ë“¤ì´ê³ , ì²˜ë¦¬í•œ í›„ ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì¶œë ¥í•˜ëŠ” ì‘ì—…ì…ë‹ˆë‹¤. ì´ ê²½ìš°, Tasklet í´ë˜ìŠ¤ì—ì„œ íŒŒì¼ì„ ì½ì–´ë“¤ì´ê³ , ì²˜ë¦¬í•œ í›„ ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì¶œë ¥í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤. ë˜í•œ, TaskletStep ì€ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë©°, Spring Batchì˜ ë‹¤ë¥¸ Stepê³¼ ì¡°í•©í•˜ì—¬ ë‹¤ì–‘í•œ ì²˜ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. TaskletStep ì•„í‚¤í…ì²˜Step ì€ RepeatTemplate ë¥¼ ì‚¬ìš©í•´ì„œ Tasklet êµ¬ë¬¸ì„ íŠ¸ëœì­ì…˜ ê²½ê³„ ë‚´ì—ì„œ ë°˜ë³µí•´ì„œ ì‹¤í–‰í•œë‹¤.Task ê¸°ë°˜ê³¼ Chunk ê¸°ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ Tasklet ì„ ì‹¤í–‰í•œë‹¤. TaskletStep ê³¼ ë©”íƒ€ë°ì´í„°Job ì´ TaskletStep ì„ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ StepExecution ê°ì²´ê°€ ìƒì„±ë©ë‹ˆë‹¤. StepExecution ê°ì²´ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ExecutionContext ë¥¼ ìƒì„±í•´ TaskletStep ì— ì „ë‹¬í•˜ê²Œ ë©ë‹ˆë‹¤. TaskletStep ì´ Step ì„ ì‹¤í–‰í•˜ê¸° ì „ì— StepListener ê°ì²´ë¥¼ í˜¸ì¶œí•´ Step ì‹¤í–‰ì „ì— ì‹¤í–‰í•´ì•¼í•  ë¡œì§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. RepeatTemplate ê°ì²´ê°€ Tasklet ê°ì²´ë“¤ì„ ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤. ê¸°ë³¸ê°’ìœ¼ë¡œ RepeatStatus.CONTINUABLE ìƒíƒœë¡œ ë°˜ë³µí•´ì„œ Tasklet ì„ ìˆ˜í–‰í•˜ê³  Tasklet ì´ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œëœ ê²½ìš°ì—ëŠ” RepeatStatus.FINISHED ìƒíƒœë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. Step ì„ ì‹¤í–‰í›„ì—ëŠ” ë‹¤ì‹œ StepListener ë¥¼ í˜¸ì¶œí•´ Step ì‹¤í–‰í›„ ì‹¤í–‰í•´ì•¼í•  ë¡œì§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Step ì´ ì™„ë£Œí›„ StepExecution ê°ì²´ì— Step ì™„ë£Œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•´ì¤ë‹ˆë‹¤. ExitStatus ì™€ BatchStatus ë‘ ê°€ì§€ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•´ì¤ë‹ˆë‹¤. SimpleStepHandlerSimpleJob ì´ Step ì„ ì‹¤í–‰ì‹œí‚¤ê²Œ ë˜ë©´ SimpleStepHandler ì— ì˜í•´ Step ì´ ì‹¤í–‰ë©ë‹ˆë‹¤. @Overridepublic StepExecution handleStep(Step step, JobExecution execution) throws JobInterruptedException,JobRestartException, StartLimitExceededException &#123; if (execution.isStopping()) &#123; throw new JobInterruptedException(&quot;JobExecution interrupted.&quot;); &#125; JobInstance jobInstance = execution.getJobInstance(); // StepExecution ê°€ì ¸ì˜¨ë‹¤. StepExecution lastStepExecution = jobRepository.getLastStepExecution(jobInstance, step.getName()); if (stepExecutionPartOfExistingJobExecution(execution, lastStepExecution)) &#123; // If the last execution of this step was in the same job, it&#x27;s // probably intentional so we want to run it again... if (logger.isInfoEnabled()) &#123; logger.info(String.format(&quot;Duplicate step [%s] detected in execution of job=[%s]. &quot; + &quot;If either step fails, both will be executed again on restart.&quot;, step.getName(), jobInstance .getJobName())); &#125; lastStepExecution = null; &#125; StepExecution currentStepExecution = lastStepExecution; if (shouldStart(lastStepExecution, execution, step)) &#123; // StepExecution ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. currentStepExecution = execution.createStepExecution(step.getName()); boolean isRestart = (lastStepExecution != null &amp;&amp; !lastStepExecution.getStatus().equals( BatchStatus.COMPLETED)); if (isRestart) &#123; currentStepExecution.setExecutionContext(lastStepExecution.getExecutionContext()); if(lastStepExecution.getExecutionContext().containsKey(&quot;batch.executed&quot;)) &#123; currentStepExecution.getExecutionContext().remove(&quot;batch.executed&quot;); &#125; &#125; else &#123; // í˜„ì¬ StepExecution ê°ì²´ì•ˆì— ExecutionContext ê°ì²´ë¥¼ ìƒì„±í•´ ì €ì¥í•œë‹¤. currentStepExecution.setExecutionContext(new ExecutionContext(executionContext)); &#125; // JobRepository ê°ì²´ë¥¼ í†µí•´ í˜„ì¬ StepExecution ê°ì²´ë¥¼ ì €ì¥í•œë‹¤. jobRepository.add(currentStepExecution); if (logger.isInfoEnabled()) &#123; logger.info(&quot;Executing step: [&quot; + step.getName() + &quot;]&quot;); &#125; try &#123; // Step ì„ ì‹¤í–‰í•œë‹¤. step.execute(currentStepExecution); currentStepExecution.getExecutionContext().put(&quot;batch.executed&quot;, true); &#125; catch (JobInterruptedException e) &#123; // Ensure that the job gets the message that it is stopping // and can pass it on to other steps that are executing // concurrently. execution.setStatus(BatchStatus.STOPPING); throw e; &#125; jobRepository.updateExecutionContext(execution); if (currentStepExecution.getStatus() == BatchStatus.STOPPING || currentStepExecution.getStatus() == BatchStatus.STOPPED) &#123; // Ensure that the job gets the message that it is stopping execution.setStatus(BatchStatus.STOPPING); throw new JobInterruptedException(&quot;Job interrupted by step execution&quot;); &#125; &#125; return currentStepExecution;&#125; Task ê¸°ë°˜ Chunk ê¸°ë°˜ ë¹„êµìŠ¤í”„ë§ ë°°ì¹˜ì—ì„œëŠ” Step ì˜ ì‹¤í–‰ë‹¨ìœ„ëŠ” í¬ê²Œ 2ê°€ì§€ë¡œ ë‚˜ëˆ„ì–´ì§„ë‹¤. í•˜ë‚˜ëŠ” Task ê¸°ë°˜ì´ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” Chunk ê¸°ë°˜ì…ë‹ˆë‹¤. Task ê¸°ë°˜ Step ì€ ë‹¨ì¼ ì‘ì—… ê¸°ë°˜ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì¸ ê²½ìš°ì— ì‚¬ìš©í•©ë‹ˆë‹¤. ì£¼ë¡œ Tasklet êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ë©° ëŒ€ëŸ‰ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ê²½ìš° Chunk ê¸°ë°˜ì— ë¹„í•´ ë” ë³µì¡í•œ êµ¬í˜„ì´ í•„ìš”í•˜ë‹¤. Chunk ê¸°ë°˜ Step ì€ í•˜ë‚˜ì˜ í° ë©ì–´ë¦¬ë¥¼ N ê°œì”© ë‚˜ëˆ ì„œ ì‹¤í–‰í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ ëŒ€ëŸ‰ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ê²½ìš° ë” íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ItemReader, ItemProcessor, ItemWriter ë¥¼ ì‚¬ìš©í•˜ë©° Chunk ê¸°ë°˜ ì „ìš© Tasklet ì¸ ChunkOrientedTasklet êµ¬í˜„ì²´ê°€ ì œê³µëœë‹¤. AbstractTaskletStepBuilderpublic TaskletStep build() &#123; registerStepListenerAsChunkListener(); TaskletStep step = new TaskletStep(getName()); super.enhance(step); step.setChunkListeners(chunkListeners.toArray(new ChunkListener[0])); // Tasklet ì‹¤í–‰ì— í•„ìš”í•œ Transaction ì„¤ì • if (transactionAttribute != null) &#123; step.setTransactionAttribute(transactionAttribute); &#125; // ë°˜ë³µ ì‹¤í–‰ì„ ìœ„í•œ RepeatTemplate ì„¤ì • if (stepOperations == null) &#123; stepOperations = new RepeatTemplate(); if (taskExecutor != null) &#123; TaskExecutorRepeatTemplate repeatTemplate = new TaskExecutorRepeatTemplate(); repeatTemplate.setTaskExecutor(taskExecutor); repeatTemplate.setThrottleLimit(throttleLimit); stepOperations = repeatTemplate; &#125; ((RepeatTemplate) stepOperations).setExceptionHandler(exceptionHandler); &#125; // Step ì— RepeatTemplate ì„¤ì • step.setStepOperations(stepOperations); // Tasklet ì„¤ì • step.setTasklet(createTasklet()); step.setStreams(streams.toArray(new ItemStream[0])); try &#123; step.afterPropertiesSet(); &#125; catch (Exception e) &#123; throw new StepBuilderException(e); &#125; return step;&#125; AbstractStep@Overridepublic final void execute(StepExecution stepExecution) throws JobInterruptedException,UnexpectedJobExecutionException &#123; Assert.notNull(stepExecution, &quot;stepExecution must not be null&quot;); if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Executing: id=&quot; + stepExecution.getId()); &#125; // StepExecution ê´€ë ¨ ì†ì„± ì €ì¥ stepExecution.setStartTime(new Date()); stepExecution.setStatus(BatchStatus.STARTED); Timer.Sample sample = BatchMetrics.createTimerSample(); getJobRepository().update(stepExecution); // Start with a default value that will be trumped by anything ExitStatus exitStatus = ExitStatus.EXECUTING; doExecutionRegistration(stepExecution); try &#123; getCompositeListener().beforeStep(stepExecution); open(stepExecution.getExecutionContext()); try &#123; // Step ì‹¤í–‰ doExecute(stepExecution); &#125; catch (RepeatException e) &#123; throw e.getCause(); &#125; exitStatus = ExitStatus.COMPLETED.and(stepExecution.getExitStatus()); // Check if someone is trying to stop us if (stepExecution.isTerminateOnly()) &#123; throw new JobInterruptedException(&quot;JobExecution interrupted.&quot;); &#125; // Need to upgrade here not set, in case the execution was stopped stepExecution.upgradeStatus(BatchStatus.COMPLETED); if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Step execution success: id=&quot; + stepExecution.getId()); &#125; &#125; catch (Throwable e) &#123; stepExecution.upgradeStatus(determineBatchStatus(e)); exitStatus = exitStatus.and(getDefaultExitStatusForFailure(e)); stepExecution.addFailureException(e); if (stepExecution.getStatus() == BatchStatus.STOPPED) &#123; logger.info(String.format(&quot;Encountered interruption executing step %s in job %s : %s&quot;, name, stepExecution.getJobExecution().getJobInstance().getJobName(), e.getMessage())); if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Full exception&quot;, e); &#125; &#125; else &#123; logger.error(String.format(&quot;Encountered an error executing step %s in job %s&quot;, name, stepExecution.getJobExecution().getJobInstance().getJobName()), e); &#125; &#125; finally &#123; try &#123; // Update the step execution to the latest known value so the // listeners can act on it exitStatus = exitStatus.and(stepExecution.getExitStatus()); stepExecution.setExitStatus(exitStatus); exitStatus = exitStatus.and(getCompositeListener().afterStep(stepExecution)); &#125; catch (Exception e) &#123; logger.error(String.format(&quot;Exception in afterStep callback in step %s in job %s&quot;, name, stepExecution.getJobExecution().getJobInstance().getJobName()), e); &#125; try &#123; getJobRepository().updateExecutionContext(stepExecution); &#125; catch (Exception e) &#123; stepExecution.setStatus(BatchStatus.UNKNOWN); exitStatus = exitStatus.and(ExitStatus.UNKNOWN); stepExecution.addFailureException(e); logger.error(String.format(&quot;Encountered an error saving batch meta data for step %s in job %s. &quot; + &quot;This job is now in an unknown state and should not be restarted.&quot;, name, stepExecution.getJobExecution().getJobInstance().getJobName()), e); &#125; sample.stop(BatchMetrics.createTimer(&quot;step&quot;, &quot;Step duration&quot;, Tag.of(&quot;job.name&quot;, stepExecution.getJobExecution().getJobInstance().getJobName()), Tag.of(&quot;name&quot;, stepExecution.getStepName()), Tag.of(&quot;status&quot;, stepExecution.getExitStatus().getExitCode()) )); stepExecution.setEndTime(new Date()); stepExecution.setExitStatus(exitStatus); Duration stepExecutionDuration = BatchMetrics.calculateDuration(stepExecution.getStartTime(), stepExecution.getEndTime()); if (logger.isInfoEnabled()) &#123; logger.info(&quot;Step: [&quot; + stepExecution.getStepName() + &quot;] executed in &quot; + BatchMetrics.formatDuration(stepExecutionDuration)); &#125; try &#123; getJobRepository().update(stepExecution); &#125; catch (Exception e) &#123; stepExecution.setStatus(BatchStatus.UNKNOWN); stepExecution.setExitStatus(exitStatus.and(ExitStatus.UNKNOWN)); stepExecution.addFailureException(e); logger.error(String.format(&quot;Encountered an error saving batch meta data for step %s in job %s. &quot; + &quot;This job is now in an unknown state and should not be restarted.&quot;, name, stepExecution.getJobExecution().getJobInstance().getJobName()), e); &#125; try &#123; close(stepExecution.getExecutionContext()); &#125; catch (Exception e) &#123; logger.error(String.format(&quot;Exception while closing step execution resources in step %s in job %s&quot;, name, stepExecution.getJobExecution().getJobInstance().getJobName()), e); stepExecution.addFailureException(e); &#125; doExecutionRelease(); if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Step execution complete: &quot; + stepExecution.getSummary()); &#125; &#125;&#125; TaskletStep@Overrideprotected void doExecute(StepExecution stepExecution) throws Exception &#123; stepExecution.getExecutionContext().put(TASKLET_TYPE_KEY, tasklet.getClass().getName()); stepExecution.getExecutionContext().put(STEP_TYPE_KEY, this.getClass().getName()); stream.update(stepExecution.getExecutionContext()); getJobRepository().updateExecutionContext(stepExecution); // Shared semaphore per step execution, so other step executions can run // in parallel without needing the lock final Semaphore semaphore = createSemaphore(); stepOperations.iterate(new StepContextRepeatCallback(stepExecution) &#123; @Override public RepeatStatus doInChunkContext(RepeatContext repeatContext, ChunkContext chunkContext) throws Exception &#123; StepExecution stepExecution = chunkContext.getStepContext().getStepExecution(); // Before starting a new transaction, check for // interruption. interruptionPolicy.checkInterrupted(stepExecution); RepeatStatus result; try &#123; // TransactionTemplate ì•ˆì—ì„œ Transaction ì²˜ë¦¬ result = new TransactionTemplate(transactionManager, transactionAttribute) .execute(new ChunkTransactionCallback(chunkContext, semaphore)); &#125; catch (UncheckedTransactionException e) &#123; // Allow checked exceptions to be thrown inside callback throw (Exception) e.getCause(); &#125; chunkListener.afterChunk(chunkContext); // Check for interruption after transaction as well, so that // the interrupted exception is correctly propagated up to // caller interruptionPolicy.checkInterrupted(stepExecution); return result == null ? RepeatStatus.FINISHED : result; &#125; &#125;);&#125; startLimitStep ë§ˆë‹¤ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©° Step ì˜ ì‹¤í–‰ íšŸìˆ˜ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤. ì„¤ì •ëœ ì‹¤í–‰ íšŸìˆ˜ë¥¼ ì´ˆê³¼í•´ì„œ Step ì´ ì‹¤í–‰ë  ê²½ìš° StartLimitExceededException ì˜ˆì™¸ê°€ ë°œìƒí•©ë‹ˆë‹¤. @Beanpublic Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception &#123; System.out.println(&quot;stepContribution = &quot; + stepContribution + &quot;, chunkContext = &quot; + chunkContext); throw new RuntimeException(&quot;&quot;);// return RepeatStatus.FINISHED; &#125; &#125;) .startLimit(3) .build();&#125; allowStartIfCompleteStep ë„ Job ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì‹¤í–‰ì´ ì„±ê³µí•  ê²½ìš° ì¬ì‹œì‘í•˜ì§€ ì•Šê³  ì‹¤íŒ¨í•  ê²½ìš°ì—ëŠ” ì¬ì‹œì‘í•©ë‹ˆë‹¤. BatchStatus.COMPLETED ìƒíƒœë¥¼ ê°€ì§„ Step ì€ Job ì´ ì¬ì‹œì‘í• ë•Œ ì‹¤í–‰í•˜ì§€ ì•Šê³  ìŠ¤í‚µí•©ë‹ˆë‹¤. ì¬ì‹œì‘ì´ ê°€ëŠ¥í•œ Job ì—ì„œ Step ì˜ ì´ì „ ì„±ê³µ ì—¬ë¶€ì™€ ìƒê´€ ì—†ì´ í•­ìƒ Step ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” allowStartIfComplete ë©”ì†Œë“œë¥¼ í†µí•´ í•´ë‹¹ Step ì´ ì¬ì‹œì‘ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. @Beanpublic Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception &#123; System.out.println(&quot;stepContribution = &quot; + stepContribution + &quot;, chunkContext = &quot; + chunkContext); return RepeatStatus.FINISHED; &#125; &#125;) .allowStartIfComplete(true) .build();&#125; TaskletStep ìƒì†","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"}],"tags":[]},{"title":"Spring Batch - JobListener","slug":"spring/spring-batch/job/spring-batch-JobListener","date":"2023-05-04T06:25:35.000Z","updated":"2024-02-26T15:29:45.567Z","comments":true,"path":"2023/05/04/spring/spring-batch/job/spring-batch-JobListener/","link":"","permalink":"https://ckck803.github.io/2023/05/04/spring/spring-batch/job/spring-batch-JobListener/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobListener JobListenerëŠ” Job ì‹¤í–‰ ì „í›„ì— íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ beforeJob ë©”ì„œë“œëŠ” Job ì‹¤í–‰ ì „ì— í˜¸ì¶œë˜ë©°, JobExecutionContextë¥¼ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œì—ì„œëŠ” Job ì‹¤í–‰ ì „ì— ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ì‘ì—…ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. afterJob ë©”ì„œë“œëŠ” Job ì‹¤í–‰ í›„ì— í˜¸ì¶œë˜ë©°, JobExecutionê³¼ JobExecutionDeciderë¥¼ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œì—ì„œëŠ” Job ì‹¤í–‰ í›„ì— ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ì‘ì—…ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. public interface JobListener &#123; public void beforeJob() throws Exception; public void afterJob() throws Exception;&#125;","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobListener JobListenerëŠ” Job ì‹¤í–‰ ì „í›„ì— íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ beforeJob ë©”ì„œë“œëŠ” Job ì‹¤í–‰ ì „ì— í˜¸ì¶œë˜ë©°, JobExecutionContextë¥¼ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œì—ì„œëŠ” Job ì‹¤í–‰ ì „ì— ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ì‘ì—…ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. afterJob ë©”ì„œë“œëŠ” Job ì‹¤í–‰ í›„ì— í˜¸ì¶œë˜ë©°, JobExecutionê³¼ JobExecutionDeciderë¥¼ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œì—ì„œëŠ” Job ì‹¤í–‰ í›„ì— ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ì‘ì—…ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. public interface JobListener &#123; public void beforeJob() throws Exception; public void afterJob() throws Exception;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Job","slug":"Spring/Spring-Batch/Job","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Job/"}],"tags":[]},{"title":"Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder","slug":"spring/spring-batch/step/spring-batch-20-StepBuilderFactory","date":"2023-05-04T06:25:35.000Z","updated":"2024-02-26T15:30:23.159Z","comments":true,"path":"2023/05/04/spring/spring-batch/step/spring-batch-20-StepBuilderFactory/","link":"","permalink":"https://ckck803.github.io/2023/05/04/spring/spring-batch/step/spring-batch-20-StepBuilderFactory/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder StepBuilderFactory StepBuilder ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤ public class StepBuilderFactory &#123; private JobRepository jobRepository; private PlatformTransactionManager transactionManager; public StepBuilderFactory(JobRepository jobRepository, PlatformTransactionManager transactionManager) &#123; this.jobRepository = jobRepository; this.transactionManager = transactionManager; &#125; public StepBuilder get(String name) &#123; StepBuilder builder = new StepBuilder(name).repository(jobRepository).transactionManager( transactionManager); return builder; &#125;&#125; StepBuilder Step êµ¬ì„±ì„ ì‰½ê²Œ í•˜ê¸° ìœ„í•œ ë¹Œë” í´ë˜ìŠ¤","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - ItemWriter Spring Batch - ItemProcessor Spring Batch - ItemReader Spring Batch - ChunkProvider ì™€ ChunkProcessor Spring Batch - ChunkOrientedTasklet Spring Batch - Chunk ê¸°ë°˜ Step Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder StepBuilderFactory StepBuilder ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤ public class StepBuilderFactory &#123; private JobRepository jobRepository; private PlatformTransactionManager transactionManager; public StepBuilderFactory(JobRepository jobRepository, PlatformTransactionManager transactionManager) &#123; this.jobRepository = jobRepository; this.transactionManager = transactionManager; &#125; public StepBuilder get(String name) &#123; StepBuilder builder = new StepBuilder(name).repository(jobRepository).transactionManager( transactionManager); return builder; &#125;&#125; StepBuilder Step êµ¬ì„±ì„ ì‰½ê²Œ í•˜ê¸° ìœ„í•œ ë¹Œë” í´ë˜ìŠ¤ StepBuilderFactory ê°ì²´ë‚´ get ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ë©´ StepBuilder ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. StepBuilderFactory ê°ì²´ë¥¼ í†µí•´ ìƒì„±ëœ StepBuilder ê°ì²´ëŠ” í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œì— ë”°ë¼ í•˜ìœ„ Builder ê°ì²´ ìƒì„±í•œ í›„ ê° Step ìƒì„±ì„ ìœ„ì„í•œë‹¤ ë©”ì†Œë“œë³„ ìƒì„±ë˜ëŠ” í•˜ìœ„ StepBuilder ê°ì²´ ë©”ì†Œë“œ ë°˜í™˜ ê°ì²´ ì„¤ëª… tasklet TaskletStepBuilder TaskletStep ë¥¼ ìƒì„±í•˜ëŠ” Builder í´ë˜ìŠ¤ chunk SimpleStepBuilder TaskletStep ë¥¼ ìƒì„±í•˜ë©° ë‚´ë¶€ì ìœ¼ë¡œ Chunk ê¸°ë°˜ì˜ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ChunkOrientedTasklet í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. partitioner PartitionStepBuilder PartitionStep ì„ ìƒì„±í•˜ë©° Multi Thread ë°©ì‹ìœ¼ë¡œ Job ì„ ì²˜ë¦¬í•œë‹¤. job JobStepBuilder JobStep ì„ ìƒì„±í•˜ì—¬ Step ì•ˆì—ì„œ Job ì„ ì‹¤í–‰í•œë‹¤. flow FlowStepBuilder FlowStep ì„ ìƒì„±í•˜ì—¬ Flow ì•ˆì—ì„œ Job ì„ ì‹¤í–‰í•œë‹¤. StepBuilder.java public class StepBuilder extends StepBuilderHelper&lt;StepBuilder&gt; &#123; public StepBuilder(String name) &#123; super(name); &#125; // TaskletStepBuilder ê°ì²´ ìƒì„± public TaskletStepBuilder tasklet(Tasklet tasklet) &#123; return new TaskletStepBuilder(this).tasklet(tasklet); &#125; // SimpleStepBuilder ê°ì²´ ìƒì„± public &lt;I, O&gt; SimpleStepBuilder&lt;I, O&gt; chunk(int chunkSize) &#123; return new SimpleStepBuilder&lt;I, O&gt;(this).chunk(chunkSize); &#125; // SimpleStepBuilder ê°ì²´ ìƒì„± public &lt;I, O&gt; SimpleStepBuilder&lt;I, O&gt; chunk(CompletionPolicy completionPolicy) &#123; return new SimpleStepBuilder&lt;I, O&gt;(this).chunk(completionPolicy); &#125; // PartitionStepBuilder ê°ì²´ ìƒì„± public PartitionStepBuilder partitioner(String stepName, Partitioner partitioner) &#123; return new PartitionStepBuilder(this).partitioner(stepName, partitioner); &#125; // PartitionStepBuilder ê°ì²´ ìƒì„± public PartitionStepBuilder partitioner(Step step) &#123; return new PartitionStepBuilder(this).step(step); &#125; // JobStepBuilder ê°ì²´ ìƒì„± public JobStepBuilder job(Job job) &#123; return new JobStepBuilder(this).job(job); &#125; // FlowStepBuilder ê°ì²´ ìƒì„± public FlowStepBuilder flow(Flow flow) &#123; return new FlowStepBuilder(this).flow(flow); &#125;&#125; TaskletStepBuilder@Beanpublic Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet((contribution, chunkContext) -&gt; &#123; System.out.println(&quot;step1 has executed&quot;); return RepeatStatus.FINISHED; &#125;) .build();&#125; SimpleStepBuilder@Beanpublic Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .&lt;String, String&gt;chunk(3) .reader(() -&gt; null) .writer(list -&gt; &#123;&#125;) .build();&#125; PartitionStepBuilder@Beanpublic Step step3() &#123; return stepBuilderFactory.get(&quot;step3&quot;) .partitioner(step1()) .gridSize(2) .build();&#125; JobStepBuilder@Beanpublic Step step4() &#123; return stepBuilderFactory.get(&quot;step4&quot;) .job(job()) .build();&#125; @Beanpublic Job job() &#123; return this.jobBuilderFactory.get(&quot;job&quot;) .start(step1()) .next(step2())// .next(step3()) .build();&#125; FlowStepBuilder@Beanpublic Step step5() &#123; return stepBuilderFactory.get(&quot;step5&quot;) .flow(flow()) .build();&#125; @Beanpublic Flow flow() &#123; FlowBuilder&lt;Flow&gt; flowBuilder = new FlowBuilder&lt;&gt;(&quot;flow&quot;); flowBuilder.start(step2()).end(); return flowBuilder.build();&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"}],"tags":[]},{"title":"Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer","slug":"spring/spring-batch/job/spring-batch-19-JobIncrementer","date":"2023-05-03T06:25:35.000Z","updated":"2024-02-26T15:29:41.485Z","comments":true,"path":"2023/05/03/spring/spring-batch/job/spring-batch-19-JobIncrementer/","link":"","permalink":"https://ckck803.github.io/2023/05/03/spring/spring-batch/job/spring-batch-19-JobIncrementer/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobParameters ì¦ê°€ - JobParametersIncrementer JobParameters ì˜ ë³€ê²½ì—†ì´ Job ì„ ì—¬ëŸ¬ë²ˆ ì¬ì‹œì‘ í•˜ê³  ì‹¶ì€ ê²½ìš° ì„¤ì • JobParameters ì˜ í•„ìš”í•œ ê°’ì„ ì¦ê°€ì‹œì¼œ ë‹¤ìŒì— ì‚¬ìš©ë  JobParameters ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê¸°ì¡´ì˜ JobParameters ì˜ ë³€ê²½ì—†ì´ Job ì„ ì—¬ëŸ¬ë²ˆ ì¬ì‹œì‘ í•˜ê³  ì‹¶ì€ ê²½ìš° ì„¤ì •í•©ë‹ˆë‹¤. RunIdIncrementer êµ¬í˜„ì²´ë¥¼ ì§€ì›í•˜ë©° í•„ìš”ì— ë”°ë¼ JobParametersIncrementer ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobParameters ì¦ê°€ - JobParametersIncrementer JobParameters ì˜ ë³€ê²½ì—†ì´ Job ì„ ì—¬ëŸ¬ë²ˆ ì¬ì‹œì‘ í•˜ê³  ì‹¶ì€ ê²½ìš° ì„¤ì • JobParameters ì˜ í•„ìš”í•œ ê°’ì„ ì¦ê°€ì‹œì¼œ ë‹¤ìŒì— ì‚¬ìš©ë  JobParameters ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê¸°ì¡´ì˜ JobParameters ì˜ ë³€ê²½ì—†ì´ Job ì„ ì—¬ëŸ¬ë²ˆ ì¬ì‹œì‘ í•˜ê³  ì‹¶ì€ ê²½ìš° ì„¤ì •í•©ë‹ˆë‹¤. RunIdIncrementer êµ¬í˜„ì²´ë¥¼ ì§€ì›í•˜ë©° í•„ìš”ì— ë”°ë¼ JobParametersIncrementer ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JobParametersIncrementer ì¸í„°í˜ì´ìŠ¤public interface JobParametersIncrementer &#123; JobParameters getNext(@Nullable JobParameters parameters);&#125; public class CustomJobParametersIncrementer implements JobParametersIncrementer &#123; static final SimpleDateFormat format = new SimpleDateFormat(&quot;yyyyMMdd-hhmmss&quot;); public JobParameters getNext(JobParameters parameters) &#123; String id = format.format(new Date()); return new JobParametersBuilder().addString(&quot;run.id&quot;, id).toJobParameters(); &#125;&#125; RunIdIncrementer - JobParametersIncrementer êµ¬í˜„ì²´public class RunIdIncrementer implements JobParametersIncrementer &#123; private static String RUN_ID_KEY = &quot;run.id&quot;; private String key = RUN_ID_KEY; public void setKey(String key) &#123; this.key = key; &#125; @Override public JobParameters getNext(@Nullable JobParameters parameters) &#123; JobParameters params = (parameters == null) ? new JobParameters() : parameters; JobParameter runIdParameter = params.getParameters().get(this.key); long id = 1; if (runIdParameter != null) &#123; try &#123; id = Long.parseLong(runIdParameter.getValue().toString()) + 1; &#125; catch (NumberFormatException exception) &#123; throw new IllegalArgumentException(&quot;Invalid value for parameter &quot; + this.key, exception); &#125; &#125; return new JobParametersBuilder(params).addLong(this.key, id).toJobParameters(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Job","slug":"Spring/Spring-Batch/Job","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Job/"}],"tags":[]},{"title":"KeyCloak","slug":"devops/keycloak/keycloak","date":"2023-05-02T21:31:46.000Z","updated":"2024-02-18T16:19:54.484Z","comments":true,"path":"2023/05/03/devops/keycloak/keycloak/","link":"","permalink":"https://ckck803.github.io/2023/05/03/devops/keycloak/keycloak/","excerpt":"ê³µì‹ í™ˆí˜ì´ì§€ https://www.keycloak.org/ KeyCloak","text":"ê³µì‹ í™ˆí˜ì´ì§€ https://www.keycloak.org/ KeyCloak","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"KeyCloak","slug":"DevOps/KeyCloak","permalink":"https://ckck803.github.io/categories/DevOps/KeyCloak/"}],"tags":[]},{"title":"Kiali","slug":"devops/kiali/kiali","date":"2023-04-27T21:31:46.000Z","updated":"2024-02-18T16:19:54.484Z","comments":true,"path":"2023/04/28/devops/kiali/kiali/","link":"","permalink":"https://ckck803.github.io/2023/04/28/devops/kiali/kiali/","excerpt":"ê³µì‹ í™ˆí˜ì´ì§€ https://kiali.io/ Kiali","text":"ê³µì‹ í™ˆí˜ì´ì§€ https://kiali.io/ Kiali","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"Kiali","slug":"DevOps/Kiali","permalink":"https://ckck803.github.io/categories/DevOps/Kiali/"}],"tags":[]},{"title":"Jmeter","slug":"devops/jmeter/jmeter","date":"2023-04-27T21:31:46.000Z","updated":"2024-02-18T16:19:54.484Z","comments":true,"path":"2023/04/28/devops/jmeter/jmeter/","link":"","permalink":"https://ckck803.github.io/2023/04/28/devops/jmeter/jmeter/","excerpt":"ê³µì‹ í™ˆí˜ì´ì§€ https://jmeter.apache.org/ Jmeter","text":"ê³µì‹ í™ˆí˜ì´ì§€ https://jmeter.apache.org/ Jmeter","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"Jmeter","slug":"DevOps/Jmeter","permalink":"https://ckck803.github.io/categories/DevOps/Jmeter/"}],"tags":[]},{"title":"OpenSearch","slug":"devops/opensearch/opensearch","date":"2023-04-27T21:31:46.000Z","updated":"2024-02-18T16:19:54.485Z","comments":true,"path":"2023/04/28/devops/opensearch/opensearch/","link":"","permalink":"https://ckck803.github.io/2023/04/28/devops/opensearch/opensearch/","excerpt":"ê³µì‹ í™ˆí˜ì´ì§€ https://opensearch.org/ OpenSearch","text":"ê³µì‹ í™ˆí˜ì´ì§€ https://opensearch.org/ OpenSearch","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"OpenSearch","slug":"DevOps/OpenSearch","permalink":"https://ckck803.github.io/categories/DevOps/OpenSearch/"}],"tags":[]},{"title":"SonarQube","slug":"devops/sonar-qube/sonar-qube","date":"2023-04-27T21:31:46.000Z","updated":"2024-02-18T16:19:54.485Z","comments":true,"path":"2023/04/28/devops/sonar-qube/sonar-qube/","link":"","permalink":"https://ckck803.github.io/2023/04/28/devops/sonar-qube/sonar-qube/","excerpt":"ê³µì‹ í™ˆí˜ì´ì§€ https://www.sonarsource.com/products/sonarqube/ SonarQube SonarQubeëŠ” ì½”ë“œ í’ˆì§ˆ ê´€ë¦¬ ë„êµ¬ë¡œ, ê°œë°œìë“¤ì´ ì‘ì„±í•œ ì†ŒìŠ¤ ì½”ë“œì˜ í’ˆì§ˆì„ ì¸¡ì •í•˜ê³  í–¥ìƒì‹œí‚¤ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. SonarQubeëŠ” ì •ì  ì½”ë“œ ë¶„ì„(Static Code Analysis)ì„ ìˆ˜í–‰í•˜ì—¬ ì½”ë“œ í’ˆì§ˆì„ ì¸¡ì •í•˜ë©°, ë‹¤ì–‘í•œ ì¸¡ë©´ì—ì„œ ì½”ë“œ í’ˆì§ˆì„ ë¶„ì„í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì½”ë“œì˜ ë³µì¡ì„±, ì¤‘ë³µ, ë²„ê·¸ ë° ì·¨ì•½ì , ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ë“±ì„ ì¸¡ì •í•˜ì—¬ ê°œë°œìë“¤ì´ ë” ë‚˜ì€ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤. SonarQubeëŠ” ë‹¤ì–‘í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ë° í”„ë ˆì„ì›Œí¬ë¥¼ ì§€ì›í•˜ë©°, ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œë„ ì¶©ë¶„íˆ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤. ë˜í•œ SonarQubeëŠ” CI&#x2F;CD íŒŒì´í”„ë¼ì¸ì— í†µí•©í•˜ì—¬ ìë™í™”ëœ ì½”ë“œ ê²€ì‚¬ ë° í’ˆì§ˆ í–¥ìƒì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. SonarQubeëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ì„ ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ê°œë°œìë“¤ì€ ë¬´ë£Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ìƒìš© ë²„ì „ì¸ SonarQube Enterpriseë„ ì œê³µë˜ë©°, ê¸°ì—…ì—ì„œëŠ” ì¶”ê°€ì ì¸ ê¸°ëŠ¥ ë° ì§€ì›ì„ ì œê³µë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. SonarQube ì„¤ì¹˜brew install sonarbrew install sonar-scanner","text":"ê³µì‹ í™ˆí˜ì´ì§€ https://www.sonarsource.com/products/sonarqube/ SonarQube SonarQubeëŠ” ì½”ë“œ í’ˆì§ˆ ê´€ë¦¬ ë„êµ¬ë¡œ, ê°œë°œìë“¤ì´ ì‘ì„±í•œ ì†ŒìŠ¤ ì½”ë“œì˜ í’ˆì§ˆì„ ì¸¡ì •í•˜ê³  í–¥ìƒì‹œí‚¤ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. SonarQubeëŠ” ì •ì  ì½”ë“œ ë¶„ì„(Static Code Analysis)ì„ ìˆ˜í–‰í•˜ì—¬ ì½”ë“œ í’ˆì§ˆì„ ì¸¡ì •í•˜ë©°, ë‹¤ì–‘í•œ ì¸¡ë©´ì—ì„œ ì½”ë“œ í’ˆì§ˆì„ ë¶„ì„í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì½”ë“œì˜ ë³µì¡ì„±, ì¤‘ë³µ, ë²„ê·¸ ë° ì·¨ì•½ì , ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ë“±ì„ ì¸¡ì •í•˜ì—¬ ê°œë°œìë“¤ì´ ë” ë‚˜ì€ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤. SonarQubeëŠ” ë‹¤ì–‘í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ë° í”„ë ˆì„ì›Œí¬ë¥¼ ì§€ì›í•˜ë©°, ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œë„ ì¶©ë¶„íˆ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤. ë˜í•œ SonarQubeëŠ” CI&#x2F;CD íŒŒì´í”„ë¼ì¸ì— í†µí•©í•˜ì—¬ ìë™í™”ëœ ì½”ë“œ ê²€ì‚¬ ë° í’ˆì§ˆ í–¥ìƒì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. SonarQubeëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ì„ ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ê°œë°œìë“¤ì€ ë¬´ë£Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ìƒìš© ë²„ì „ì¸ SonarQube Enterpriseë„ ì œê³µë˜ë©°, ê¸°ì—…ì—ì„œëŠ” ì¶”ê°€ì ì¸ ê¸°ëŠ¥ ë° ì§€ì›ì„ ì œê³µë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. SonarQube ì„¤ì¹˜brew install sonarbrew install sonar-scanner export SONAR_HOME=/usr/local/Cellar/sonar-scanner/&#123;version&#125;/libexec export SONAR=$SONAR_HOME/bin export PATH=$SONAR:$PATH","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"SonarQube","slug":"DevOps/SonarQube","permalink":"https://ckck803.github.io/categories/DevOps/SonarQube/"}],"tags":[]},{"title":"ë°ì´í„° ë² ì´ìŠ¤ - Soft Delete & Hard Delete","slug":"database/soft_hard_delete","date":"2023-04-22T16:21:23.000Z","updated":"2024-02-18T16:19:54.523Z","comments":true,"path":"2023/04/23/database/soft_hard_delete/","link":"","permalink":"https://ckck803.github.io/2023/04/23/database/soft_hard_delete/","excerpt":"Hard DeleteHard Delete ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ íŠ¹ì • ë ˆì½”ë“œë¥¼ ì™„ì „íˆ ì‚­ì œí•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ ê²½ìš° í•´ë‹¹ ë ˆì½”ë“œëŠ” ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë˜ì–´ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. Soft DeleteSoft Delete ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ íŠ¹ì • ë ˆì½”ë“œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ì‚­ì œí•˜ì§€ë§Œ, ë¬¼ë¦¬ì ìœ¼ë¡œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰, í•´ë‹¹ ë ˆì½”ë“œë¥¼ ì‚­ì œí–ˆì„ ë•Œ, ì‹¤ì œë¡œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í•´ë‹¹ ë ˆì½”ë“œë¥¼ ì‚­ì œí•˜ì§€ ì•Šê³ , ì‚­ì œë˜ì—ˆë‹¤ëŠ” í‘œì‹œë¥¼ í•˜ì—¬ ì‚­ì œëœ ê²ƒì²˜ëŸ¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë°ì´í„°ë¥¼ ë³µêµ¬í•  ìˆ˜ ìˆìœ¼ë©°, ì‚¬ìš©ìê°€ ì‹¤ìˆ˜ë¡œ ë°ì´í„°ë¥¼ ì‚­ì œí–ˆì„ ë•Œ ë³µêµ¬í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. ì†Œí”„íŠ¸ ì‚­ì œë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì—ëŠ” ë‹¤ì–‘í•œ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ ë ˆì½”ë“œì— ì‚­ì œ í”Œë˜ê·¸ (delete flag)ë¼ëŠ” íŠ¹ë³„í•œ í•„ë“œë¥¼ ì¶”ê°€í•˜ê³ , ì´ í•„ë“œì— ì‚­ì œ ì—¬ë¶€ë¥¼ í‘œì‹œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì‚­ì œëœ ë ˆì½”ë“œë¥¼ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆê³ , ì‚­ì œëœ ë ˆì½”ë“œë¥¼ ë³µêµ¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.","text":"Hard DeleteHard Delete ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ íŠ¹ì • ë ˆì½”ë“œë¥¼ ì™„ì „íˆ ì‚­ì œí•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ ê²½ìš° í•´ë‹¹ ë ˆì½”ë“œëŠ” ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë˜ì–´ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. Soft DeleteSoft Delete ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ íŠ¹ì • ë ˆì½”ë“œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ì‚­ì œí•˜ì§€ë§Œ, ë¬¼ë¦¬ì ìœ¼ë¡œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰, í•´ë‹¹ ë ˆì½”ë“œë¥¼ ì‚­ì œí–ˆì„ ë•Œ, ì‹¤ì œë¡œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í•´ë‹¹ ë ˆì½”ë“œë¥¼ ì‚­ì œí•˜ì§€ ì•Šê³ , ì‚­ì œë˜ì—ˆë‹¤ëŠ” í‘œì‹œë¥¼ í•˜ì—¬ ì‚­ì œëœ ê²ƒì²˜ëŸ¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë°ì´í„°ë¥¼ ë³µêµ¬í•  ìˆ˜ ìˆìœ¼ë©°, ì‚¬ìš©ìê°€ ì‹¤ìˆ˜ë¡œ ë°ì´í„°ë¥¼ ì‚­ì œí–ˆì„ ë•Œ ë³µêµ¬í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. ì†Œí”„íŠ¸ ì‚­ì œë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì—ëŠ” ë‹¤ì–‘í•œ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ ë ˆì½”ë“œì— ì‚­ì œ í”Œë˜ê·¸ (delete flag)ë¼ëŠ” íŠ¹ë³„í•œ í•„ë“œë¥¼ ì¶”ê°€í•˜ê³ , ì´ í•„ë“œì— ì‚­ì œ ì—¬ë¶€ë¥¼ í‘œì‹œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì‚­ì œëœ ë ˆì½”ë“œë¥¼ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆê³ , ì‚­ì œëœ ë ˆì½”ë“œë¥¼ ë³µêµ¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"Scan","slug":"CS/DataBase/Scan","permalink":"https://ckck803.github.io/categories/CS/DataBase/Scan/"}],"tags":[]},{"title":"[Gitea] - Gitea Storage ë¡œ S3 ì‚¬ìš©í•˜ê¸°","slug":"devops/repository/gitea/gitea-03-storage","date":"2023-04-12T21:31:46.000Z","updated":"2025-03-29T04:30:43.562Z","comments":true,"path":"2023/04/13/devops/repository/gitea/gitea-03-storage/","link":"","permalink":"https://ckck803.github.io/2023/04/13/devops/repository/gitea/gitea-03-storage/","excerpt":"ëª©ì°¨ [Gitea] - Gitea Storage ë¡œ S3 ì‚¬ìš©í•˜ê¸° [Gitea] - Gitea ë¥¼ Maven Repository ë¡œ ì‚¬ìš©í•˜ê¸° [Gitea] - Helm ì„ ì´ìš©í•´ Gitea ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://docs.gitea.io/en-us/config-cheat-sheet/#issue-and-pull-request-attachments-attachment Storage ë³€ê²½ ì‘ì—… EBS -&gt; S3gitea: ## @param gitea.config Configuration for the Gitea server,ref: [config-cheat-sheet](https://docs.gitea.io/en-us/config-cheat-sheet/) config: storage: STORAGE_TYPE: minio MINIO_ENDPOINT: s3.ap-northeast-2.amazonaws.com MINIO_ACCESS_KEY_ID: &lt;S3 Access Key&gt; MINIO_SECRET_ACCESS_KEY: &lt;S3 Secret Key&gt; MINIO_BUCKET: &lt;S3 Bucket ì´ë¦„&gt; MINIO_LOCATION: &lt;S3 ìœ„ì¹˜&gt; MINIO_USE_SSL: true MINIO_INSECURE_SKIP_VERIFY: false","text":"ëª©ì°¨ [Gitea] - Gitea Storage ë¡œ S3 ì‚¬ìš©í•˜ê¸° [Gitea] - Gitea ë¥¼ Maven Repository ë¡œ ì‚¬ìš©í•˜ê¸° [Gitea] - Helm ì„ ì´ìš©í•´ Gitea ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://docs.gitea.io/en-us/config-cheat-sheet/#issue-and-pull-request-attachments-attachment Storage ë³€ê²½ ì‘ì—… EBS -&gt; S3gitea: ## @param gitea.config Configuration for the Gitea server,ref: [config-cheat-sheet](https://docs.gitea.io/en-us/config-cheat-sheet/) config: storage: STORAGE_TYPE: minio MINIO_ENDPOINT: s3.ap-northeast-2.amazonaws.com MINIO_ACCESS_KEY_ID: &lt;S3 Access Key&gt; MINIO_SECRET_ACCESS_KEY: &lt;S3 Secret Key&gt; MINIO_BUCKET: &lt;S3 Bucket ì´ë¦„&gt; MINIO_LOCATION: &lt;S3 ìœ„ì¹˜&gt; MINIO_USE_SSL: true MINIO_INSECURE_SKIP_VERIFY: false","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"Repository","slug":"DevOps/Repository","permalink":"https://ckck803.github.io/categories/DevOps/Repository/"},{"name":"Gitea","slug":"DevOps/Repository/Gitea","permalink":"https://ckck803.github.io/categories/DevOps/Repository/Gitea/"}],"tags":[]},{"title":"Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart","slug":"spring/spring-batch/job/spring-batch-18-preventRestart","date":"2023-04-06T06:25:35.000Z","updated":"2024-02-26T15:29:37.866Z","comments":true,"path":"2023/04/06/spring/spring-batch/job/spring-batch-18-preventRestart/","link":"","permalink":"https://ckck803.github.io/2023/04/06/spring/spring-batch/job/spring-batch-18-preventRestart/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing Job ì˜ ì¬ì‹œì‘ ë°©ì§€ - preventRestart Job ì´ ì‹¤íŒ¨í•˜ë”ë¼ë„ ì¬ì‹œì‘í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•œë‹¤. SimpleJob ì—ëŠ” Jobì˜ ì¬ì‹œì‘ì„ ê´€ë¦¬í•˜ëŠ” restartable ì€ ê¸°ë³¸ê°’ì´ True ë¡œ ì„¤ì •ë¼ ìˆì–´ Job ì´ ì‹¤íŒ¨í–ˆì„ì‹œ ì¬ì‹œì‘ í•˜ë„ë¡ í•©ë‹ˆë‹¤. preventRestart ë©”ì†Œë“œëŠ” restartable ë¥¼ False ë¡œ ë³€ê²½í•´ Job ì´ ì‹¤íŒ¨í•˜ë”ë¼ë„ ì¬ì‹œì‘í•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤. preventRestart ë©”ì†Œë“œëŠ” Job ì‹¤í–‰ì— ëŒ€í•œ JobExecution ê°ì²´ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ê¸°ì¡´ ê°ì²´ê°€ ì—†ì„ ê²½ìš° Job ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë§Œì¼ ê¸°ì¡´ JobExecution ê°ì²´ê°€ ìˆì„ ê²½ìš° Job ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê³  JobRestartException ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing Job ì˜ ì¬ì‹œì‘ ë°©ì§€ - preventRestart Job ì´ ì‹¤íŒ¨í•˜ë”ë¼ë„ ì¬ì‹œì‘í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•œë‹¤. SimpleJob ì—ëŠ” Jobì˜ ì¬ì‹œì‘ì„ ê´€ë¦¬í•˜ëŠ” restartable ì€ ê¸°ë³¸ê°’ì´ True ë¡œ ì„¤ì •ë¼ ìˆì–´ Job ì´ ì‹¤íŒ¨í–ˆì„ì‹œ ì¬ì‹œì‘ í•˜ë„ë¡ í•©ë‹ˆë‹¤. preventRestart ë©”ì†Œë“œëŠ” restartable ë¥¼ False ë¡œ ë³€ê²½í•´ Job ì´ ì‹¤íŒ¨í•˜ë”ë¼ë„ ì¬ì‹œì‘í•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤. preventRestart ë©”ì†Œë“œëŠ” Job ì‹¤í–‰ì— ëŒ€í•œ JobExecution ê°ì²´ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ê¸°ì¡´ ê°ì²´ê°€ ì—†ì„ ê²½ìš° Job ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë§Œì¼ ê¸°ì¡´ JobExecution ê°ì²´ê°€ ìˆì„ ê²½ìš° Job ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê³  JobRestartException ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Job","slug":"Spring/Spring-Batch/Job","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Job/"}],"tags":[]},{"title":"Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator","slug":"spring/spring-batch/job/spring-batch-17-JobParametersValidator","date":"2023-04-05T06:25:35.000Z","updated":"2024-02-26T15:29:34.708Z","comments":true,"path":"2023/04/05/spring/spring-batch/job/spring-batch-17-JobParametersValidator/","link":"","permalink":"https://ckck803.github.io/2023/04/05/spring/spring-batch/job/spring-batch-17-JobParametersValidator/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobParameters ê²€ì¦ - JobParametersValidatorJobParametersValidator ë¦ í†µí•œ JobParameters ê²€ì¦ì€ Job ì„ ì‹¤í–‰í•˜ê¸° ì „ì— SimpleJobLauncher ë‚´ë¶€ì—ì„œ í•œë²ˆ Job ì´ ì‹¤í–‰í• ë•Œ SimpleJobL ì—ì„œ í•œë²ˆ ì´ ë‘ë²ˆì˜ Validation ì„ ì§„í–‰í•œë‹¤. public interface JobParametersValidator &#123; void validate(@Nullable JobParameters parameters) throws JobParametersInvalidException;&#125; JobParametersValidator ê¸°ë³¸ êµ¬í˜„ì²´ - DefaultJobParametersValidator requiredKeys JobParameter ì— í•„ìˆ˜ì ìœ¼ë¡œ í¬í•¨ë˜ì–´ì•¼ í•  Key í•„ìˆ˜ Key ê°€ ì—†ì„ ê²½ìš° JobParametersInvalidException ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. optionalKeys JobParameter ì— ì„ íƒì ìœ¼ë¡œ í¬í•¨ë˜ì–´ì•¼ í•  Key public DefaultJobParametersValidator(String[] requiredKeys, String[] optionalKeys) &#123; super(); setRequiredKeys(requiredKeys); setOptionalKeys(optionalKeys);&#125;@Overridepublic void validate(@Nullable JobParameters parameters) throws JobParametersInvalidException &#123; if (parameters == null) &#123; throw new JobParametersInvalidException(&quot;The JobParameters can not be null&quot;); &#125; Set&lt;String&gt; keys = parameters.getParameters().keySet(); // optionalKeys ê°€ ìˆì„ ê²½ìš°ì—ë§Œ ì‹¤í–‰ if (!optionalKeys.isEmpty()) &#123; Collection&lt;String&gt; missingKeys = new HashSet&lt;&gt;(); // JobParameters Key ì— ëŒ€í•œ ê²€ì¦ì„ í•œë‹¤. for (String key : keys) &#123; if (!optionalKeys.contains(key) &amp;&amp; !requiredKeys.contains(key)) &#123; missingKeys.add(key); &#125; &#125; // JobParameters ë¡œ ë„˜ì–´ì˜¨ Key ê°€ requiredKeys ì—ë„ optionalKeys ì—ë„ ì—†ìœ¼ë©´ JobParametersInvalidException ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. if (!missingKeys.isEmpty()) &#123; throw new JobParametersInvalidException( &quot;The JobParameters contains keys that are not explicitly optional or required: &quot; + missingKeys); &#125; &#125; Collection&lt;String&gt; missingKeys = new HashSet&lt;&gt;(); // requiredKeys ê°€ JobParameters Key ì— ëª¨ë‘ í¬í•¨ì´ ëëŠ”ì§€ ê²€ì¦í•œë‹¤. for (String key : requiredKeys) &#123; if (!keys.contains(key)) &#123; missingKeys.add(key); &#125; &#125; if (!missingKeys.isEmpty()) &#123; throw new JobParametersInvalidException(&quot;The JobParameters do not contain required keys: &quot; + missingKeys); &#125;&#125;","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobParameters ê²€ì¦ - JobParametersValidatorJobParametersValidator ë¦ í†µí•œ JobParameters ê²€ì¦ì€ Job ì„ ì‹¤í–‰í•˜ê¸° ì „ì— SimpleJobLauncher ë‚´ë¶€ì—ì„œ í•œë²ˆ Job ì´ ì‹¤í–‰í• ë•Œ SimpleJobL ì—ì„œ í•œë²ˆ ì´ ë‘ë²ˆì˜ Validation ì„ ì§„í–‰í•œë‹¤. public interface JobParametersValidator &#123; void validate(@Nullable JobParameters parameters) throws JobParametersInvalidException;&#125; JobParametersValidator ê¸°ë³¸ êµ¬í˜„ì²´ - DefaultJobParametersValidator requiredKeys JobParameter ì— í•„ìˆ˜ì ìœ¼ë¡œ í¬í•¨ë˜ì–´ì•¼ í•  Key í•„ìˆ˜ Key ê°€ ì—†ì„ ê²½ìš° JobParametersInvalidException ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. optionalKeys JobParameter ì— ì„ íƒì ìœ¼ë¡œ í¬í•¨ë˜ì–´ì•¼ í•  Key public DefaultJobParametersValidator(String[] requiredKeys, String[] optionalKeys) &#123; super(); setRequiredKeys(requiredKeys); setOptionalKeys(optionalKeys);&#125;@Overridepublic void validate(@Nullable JobParameters parameters) throws JobParametersInvalidException &#123; if (parameters == null) &#123; throw new JobParametersInvalidException(&quot;The JobParameters can not be null&quot;); &#125; Set&lt;String&gt; keys = parameters.getParameters().keySet(); // optionalKeys ê°€ ìˆì„ ê²½ìš°ì—ë§Œ ì‹¤í–‰ if (!optionalKeys.isEmpty()) &#123; Collection&lt;String&gt; missingKeys = new HashSet&lt;&gt;(); // JobParameters Key ì— ëŒ€í•œ ê²€ì¦ì„ í•œë‹¤. for (String key : keys) &#123; if (!optionalKeys.contains(key) &amp;&amp; !requiredKeys.contains(key)) &#123; missingKeys.add(key); &#125; &#125; // JobParameters ë¡œ ë„˜ì–´ì˜¨ Key ê°€ requiredKeys ì—ë„ optionalKeys ì—ë„ ì—†ìœ¼ë©´ JobParametersInvalidException ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. if (!missingKeys.isEmpty()) &#123; throw new JobParametersInvalidException( &quot;The JobParameters contains keys that are not explicitly optional or required: &quot; + missingKeys); &#125; &#125; Collection&lt;String&gt; missingKeys = new HashSet&lt;&gt;(); // requiredKeys ê°€ JobParameters Key ì— ëª¨ë‘ í¬í•¨ì´ ëëŠ”ì§€ ê²€ì¦í•œë‹¤. for (String key : requiredKeys) &#123; if (!keys.contains(key)) &#123; missingKeys.add(key); &#125; &#125; if (!missingKeys.isEmpty()) &#123; throw new JobParametersInvalidException(&quot;The JobParameters do not contain required keys: &quot; + missingKeys); &#125;&#125; @Beanpublic Job batchJob() &#123; return this.jobBuilderFactory.get(&quot;batchJob&quot;) .start(step1()) .next(step2()) .next(step3()) .validator(new DefaultJobParametersValidator(new String[]&#123;&quot;name&quot;, &quot;date&quot;&#125;,new String[]&#123;&quot;count&quot;&#125;)) .build();&#125; public class CustomJobParametersValidator implements JobParametersValidator &#123; @Override public void validate(JobParameters jobParameters) throws JobParametersInvalidException &#123; if (jobParameters.getString(&quot;name&quot;) == null) &#123; throw new JobParametersInvalidException(&quot;name parameter is not found.&quot;); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Job","slug":"Spring/Spring-Batch/Job","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Job/"}],"tags":[]},{"title":"Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher","slug":"spring/spring-batch/job/spring-batch-16-SimpleJob","date":"2023-04-04T06:25:35.000Z","updated":"2024-02-26T15:29:30.493Z","comments":true,"path":"2023/04/04/spring/spring-batch/job/spring-batch-16-SimpleJob/","link":"","permalink":"https://ckck803.github.io/2023/04/04/spring/spring-batch/job/spring-batch-16-SimpleJob/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing SimpleJob Step ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” Job ì˜ êµ¬í˜„ì²´ë¡œì„œ SimpleJobBuilder ì— ì˜í•´ ìƒì„±ëœë‹¤. í•˜ë‚˜ ì´ìƒì˜ Step ìœ¼ë¡œ êµ¬ì„±ë˜ë©° ìˆœì°¨ì ìœ¼ë¡œ Step ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. ëª¨ë“  Step ì˜ ì‹¤í–‰ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ë¼ì•¼ Job ì´ ìµœì¢…ì ìœ¼ë¡œ ì„±ê³µ ìƒíƒœê°€ ëœë‹¤. SimpleJob ë©”ì†Œë“œ start ìµœì´ˆë¡œ í•œë²ˆ ì„¤ì • í•œ í›„ SimpleJobBuilder ê°€ ìƒì„±ë˜ê³  ë°˜í™˜ëœë‹¤. next ë‹¤ìŒ ì‹¤í–‰í•  step ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ì—°ê²°í•˜ë„ë¡ ì„¤ì • validator Job ì‹¤í–‰ì— í•„ìš”í•œ Parameter ë¥¼ ê²€ì¦ DefaultJobParametersValidator êµ¬í˜„ì²´ë¥¼ ì§€ì›í•˜ë©° JobParametersValidator ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. preventRestart Job ì˜ ì¬ì‹¤í–‰ì„ ë°©ì§€ í•˜ëŠ” ì„¤ì • incrementer JobParameter ì—ì„œ í•„ìš”í•œ ê°’ì„ ì¦ê°€ ì‹œì¼œ ë‹¤ìŒì— ì‚¬ìš©í•  JobParameter ì˜¤ë¸Œì íŠ¸ë¥¼ ë¦¬í„´ RunIdIncrementer êµ¬í˜„ì²´ë¥¼ ì§€ì›í•˜ë©° JobParametersIncrementer ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing SimpleJob Step ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” Job ì˜ êµ¬í˜„ì²´ë¡œì„œ SimpleJobBuilder ì— ì˜í•´ ìƒì„±ëœë‹¤. í•˜ë‚˜ ì´ìƒì˜ Step ìœ¼ë¡œ êµ¬ì„±ë˜ë©° ìˆœì°¨ì ìœ¼ë¡œ Step ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. ëª¨ë“  Step ì˜ ì‹¤í–‰ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ë¼ì•¼ Job ì´ ìµœì¢…ì ìœ¼ë¡œ ì„±ê³µ ìƒíƒœê°€ ëœë‹¤. SimpleJob ë©”ì†Œë“œ start ìµœì´ˆë¡œ í•œë²ˆ ì„¤ì • í•œ í›„ SimpleJobBuilder ê°€ ìƒì„±ë˜ê³  ë°˜í™˜ëœë‹¤. next ë‹¤ìŒ ì‹¤í–‰í•  step ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ì—°ê²°í•˜ë„ë¡ ì„¤ì • validator Job ì‹¤í–‰ì— í•„ìš”í•œ Parameter ë¥¼ ê²€ì¦ DefaultJobParametersValidator êµ¬í˜„ì²´ë¥¼ ì§€ì›í•˜ë©° JobParametersValidator ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. preventRestart Job ì˜ ì¬ì‹¤í–‰ì„ ë°©ì§€ í•˜ëŠ” ì„¤ì • incrementer JobParameter ì—ì„œ í•„ìš”í•œ ê°’ì„ ì¦ê°€ ì‹œì¼œ ë‹¤ìŒì— ì‚¬ìš©í•  JobParameter ì˜¤ë¸Œì íŠ¸ë¥¼ ë¦¬í„´ RunIdIncrementer êµ¬í˜„ì²´ë¥¼ ì§€ì›í•˜ë©° JobParametersIncrementer ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. public class SimpleJob extends AbstractJob &#123; private List&lt;Step&gt; steps = new ArrayList&lt;&gt;(); public SimpleJob() &#123; this(null); &#125; public SimpleJob(String name) &#123; super(name); &#125; public void setSteps(List&lt;Step&gt; steps) &#123; this.steps.clear(); this.steps.addAll(steps); &#125; @Override public Collection&lt;String&gt; getStepNames() &#123; List&lt;String&gt; names = new ArrayList&lt;&gt;(); for (Step step : steps) &#123; names.add(step.getName()); if(step instanceof StepLocator) &#123; names.addAll(((StepLocator)step).getStepNames()); &#125; &#125; return names; &#125; public void addStep(Step step) &#123; this.steps.add(step); &#125; @Override public Step getStep(String stepName) &#123; for (Step step : this.steps) &#123; if (step.getName().equals(stepName)) &#123; return step; &#125; else if(step instanceof StepLocator) &#123; Step result = ((StepLocator)step).getStep(stepName); if(result != null) &#123; return result; &#125; &#125; &#125; return null; &#125; @Override protected void doExecute(JobExecution execution) throws JobInterruptedException, JobRestartException, StartLimitExceededException &#123; StepExecution stepExecution = null; for (Step step : steps) &#123; stepExecution = handleStep(step, execution); if (stepExecution.getStatus() != BatchStatus.COMPLETED) &#123; // // Terminate the job if a step fails // break; &#125; &#125; if (stepExecution != null) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Upgrading JobExecution status: &quot; + stepExecution); &#125; execution.upgradeStatus(stepExecution.getStatus()); execution.setExitStatus(stepExecution.getExitStatus()); &#125; &#125;&#125; SimpleJobLauncherSimpleJobLauncher ëŠ” JobLauncher ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¡œ SimpleJob ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. public class SimpleJobLauncher implements JobLauncher, InitializingBean &#123; protected static final Log logger = LogFactory.getLog(SimpleJobLauncher.class); private JobRepository jobRepository; private TaskExecutor taskExecutor; @Override public JobExecution run(final Job job, final JobParameters jobParameters) throws JobExecutionAlreadyRunningException, JobRestartException, JobInstanceAlreadyCompleteException, JobParametersInvalidException &#123; Assert.notNull(job, &quot;The Job must not be null.&quot;); Assert.notNull(jobParameters, &quot;The JobParameters must not be null.&quot;); final JobExecution jobExecution; // ë§ˆì§€ë§‰ìœ¼ë¡œ ì‹¤í–‰ëœ JobExecution ê°ì²´ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. JobExecution lastExecution = jobRepository.getLastJobExecution(job.getName(), jobParameters); if (lastExecution != null) &#123; // Job Restart ì„¤ì •ì„ í™•ì¸í•œë‹¤. if (!job.isRestartable()) &#123; throw new JobRestartException(&quot;JobInstance already exists and is not restartable&quot;); &#125; for (StepExecution execution : lastExecution.getStepExecutions()) &#123; BatchStatus status = execution.getStatus(); if (status.isRunning() || status == BatchStatus.STOPPING) &#123; throw new JobExecutionAlreadyRunningException(&quot;A job execution for this job is already running: &quot; + lastExecution); &#125; else if (status == BatchStatus.UNKNOWN) &#123; throw new JobRestartException( &quot;Cannot restart step [&quot; + execution.getStepName() + &quot;] from UNKNOWN status. &quot; + &quot;The last execution ended with a failure that could not be rolled back, &quot; + &quot;so it may be dangerous to proceed. Manual intervention is probably necessary.&quot;); &#125; &#125; &#125; // JobParamter ì— ëŒ€í•œ ê²€ì¦ì„ ì§„í–‰í•œë‹¤. job.getJobParametersValidator().validate(jobParameters); jobExecution = jobRepository.createJobExecution(job.getName(), jobParameters); try &#123; taskExecutor.execute(new Runnable() &#123; @Override public void run() &#123; try &#123; if (logger.isInfoEnabled()) &#123; logger.info(&quot;Job: [&quot; + job + &quot;] launched with the following parameters: [&quot; + jobParameters + &quot;]&quot;); &#125; job.execute(jobExecution); if (logger.isInfoEnabled()) &#123; Duration jobExecutionDuration = BatchMetrics.calculateDuration(jobExecution.getStartTime(), jobExecution.getEndTime()); logger.info(&quot;Job: [&quot; + job + &quot;] completed with the following parameters: [&quot; + jobParameters + &quot;] and the following status: [&quot; + jobExecution.getStatus() + &quot;]&quot; + (jobExecutionDuration == null ? &quot;&quot; : &quot; in &quot; + BatchMetrics.formatDuration(jobExecutionDuration))); &#125; &#125; catch (Throwable t) &#123; if (logger.isInfoEnabled()) &#123; logger.info(&quot;Job: [&quot; + job + &quot;] failed unexpectedly and fatally with the following parameters: [&quot; + jobParameters + &quot;]&quot;, t); &#125; rethrow(t); &#125; &#125; private void rethrow(Throwable t) &#123; if (t instanceof RuntimeException) &#123; throw (RuntimeException) t; &#125; else if (t instanceof Error) &#123; throw (Error) t; &#125; throw new IllegalStateException(t); &#125; &#125;); &#125; catch (TaskRejectedException e) &#123; jobExecution.upgradeStatus(BatchStatus.FAILED); if (jobExecution.getExitStatus().equals(ExitStatus.UNKNOWN)) &#123; jobExecution.setExitStatus(ExitStatus.FAILED.addExitDescription(e)); &#125; jobRepository.update(jobExecution); &#125; return jobExecution; &#125; public void setJobRepository(JobRepository jobRepository) &#123; this.jobRepository = jobRepository; &#125; public void setTaskExecutor(TaskExecutor taskExecutor) &#123; this.taskExecutor = taskExecutor; &#125; @Override public void afterPropertiesSet() throws Exception &#123; Assert.state(jobRepository != null, &quot;A JobRepository has not been set.&quot;); if (taskExecutor == null) &#123; logger.info(&quot;No TaskExecutor has been set, defaulting to synchronous executor.&quot;); taskExecutor = new SyncTaskExecutor(); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Job","slug":"Spring/Spring-Batch/Job","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Job/"}],"tags":[]},{"title":"Maven - Settings.xml","slug":"devops/maven/settings_xml","date":"2023-04-03T21:31:46.000Z","updated":"2024-02-18T16:19:54.484Z","comments":true,"path":"2023/04/04/devops/maven/settings_xml/","link":"","permalink":"https://ckck803.github.io/2023/04/04/devops/maven/settings_xml/","excerpt":"ì°¸ê³  Maven ê³µì‹œ Document https://maven.apache.org/settings.html Settings.xmlSettings.xml ì€ Pom.xml ê³¼ ê°™ì´ Maven ì‹¤í–‰ì— ìˆì–´ í•„ìš”í•œ ìš”ì†Œë“¤ì„ ì •ì˜í•˜ëŠ” íŒŒì¼ì´ë‹¤. ë‹¤ë§Œ Pom.xml ê³¼ ë‹¬ë¦¬ Local Repository ì˜ ìœ„ì¹˜ Remote Repository ì˜ ìœ„ì¹˜ í˜¹ì€ ì¸ì¦ ì •ë³´ì™€ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ê°–ê³  ìˆê¸° ë•Œë¬¸ì— í”„ë¡œì íŠ¸ì˜ ë²ˆë“¤ë¡œì„œ ì œê³µë˜ê±°ë‚˜ ë°°í¬ë˜ì„œëŠ” ì•ˆëœë‹¤. Settings.xml êµ¬ì„± ìš”ì†Œ&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt; &lt;localRepository/&gt; &lt;interactiveMode/&gt; &lt;offline/&gt; &lt;pluginGroups/&gt; &lt;servers/&gt; &lt;mirrors/&gt; &lt;proxies/&gt; &lt;profiles/&gt; &lt;activeProfiles/&gt;&lt;/settings&gt; localRepositoryinteractiveMode","text":"ì°¸ê³  Maven ê³µì‹œ Document https://maven.apache.org/settings.html Settings.xmlSettings.xml ì€ Pom.xml ê³¼ ê°™ì´ Maven ì‹¤í–‰ì— ìˆì–´ í•„ìš”í•œ ìš”ì†Œë“¤ì„ ì •ì˜í•˜ëŠ” íŒŒì¼ì´ë‹¤. ë‹¤ë§Œ Pom.xml ê³¼ ë‹¬ë¦¬ Local Repository ì˜ ìœ„ì¹˜ Remote Repository ì˜ ìœ„ì¹˜ í˜¹ì€ ì¸ì¦ ì •ë³´ì™€ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ê°–ê³  ìˆê¸° ë•Œë¬¸ì— í”„ë¡œì íŠ¸ì˜ ë²ˆë“¤ë¡œì„œ ì œê³µë˜ê±°ë‚˜ ë°°í¬ë˜ì„œëŠ” ì•ˆëœë‹¤. Settings.xml êµ¬ì„± ìš”ì†Œ&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt; &lt;localRepository/&gt; &lt;interactiveMode/&gt; &lt;offline/&gt; &lt;pluginGroups/&gt; &lt;servers/&gt; &lt;mirrors/&gt; &lt;proxies/&gt; &lt;profiles/&gt; &lt;activeProfiles/&gt;&lt;/settings&gt; localRepositoryinteractiveModeofflinepluginGroupsserversmirrorsproxiesprofilesrepositoriespluginRepositoriesactiveProfiles","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"Maven","slug":"DevOps/Maven","permalink":"https://ckck803.github.io/categories/DevOps/Maven/"}],"tags":[]},{"title":"Spring Batch - 15. JobBuilderFactory & JobBuilder","slug":"spring/spring-batch/job/spring-batch-15-JobBuilderFactory","date":"2023-04-02T06:25:35.000Z","updated":"2024-02-26T15:29:26.805Z","comments":true,"path":"2023/04/02/spring/spring-batch/job/spring-batch-15-JobBuilderFactory/","link":"","permalink":"https://ckck803.github.io/2023/04/02/spring/spring-batch/job/spring-batch-15-JobBuilderFactory/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobBuilderFactory JobBuilder ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤ jobBuilderFactory.get(â€œjobNameâ€) â€œjobNameâ€ ì€ ìŠ¤í”„ë§ ë°°ì¹˜ê°€ Job ì„ ì‹¤í–‰ì‹œí‚¬ë•Œ ì°¸ì¡°í•˜ëŠ” Job ì´ë¦„ â€œjobNaemâ€ ì€ DB ì—ë„ ì €ì¥ëœë‹¤. JobBuilderFactory.java public class JobBuilderFactory &#123; private JobRepository jobRepository; public JobBuilderFactory(JobRepository jobRepository) &#123; this.jobRepository = jobRepository; &#125; public JobBuilder get(String name) &#123; // JobBuilder í´ë˜ìŠ¤ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì— JobRepository ê°ì²´ê°€ ì „ë‹¬ëœë‹¤. JobBuilder builder = new JobBuilder(name).repository(jobRepository); return builder; &#125;&#125; JobBuilder","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobBuilderFactory JobBuilder ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤ jobBuilderFactory.get(â€œjobNameâ€) â€œjobNameâ€ ì€ ìŠ¤í”„ë§ ë°°ì¹˜ê°€ Job ì„ ì‹¤í–‰ì‹œí‚¬ë•Œ ì°¸ì¡°í•˜ëŠ” Job ì´ë¦„ â€œjobNaemâ€ ì€ DB ì—ë„ ì €ì¥ëœë‹¤. JobBuilderFactory.java public class JobBuilderFactory &#123; private JobRepository jobRepository; public JobBuilderFactory(JobRepository jobRepository) &#123; this.jobRepository = jobRepository; &#125; public JobBuilder get(String name) &#123; // JobBuilder í´ë˜ìŠ¤ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì— JobRepository ê°ì²´ê°€ ì „ë‹¬ëœë‹¤. JobBuilder builder = new JobBuilder(name).repository(jobRepository); return builder; &#125;&#125; JobBuilder Job ì„ êµ¬ì„±í•˜ëŠ” ì„¤ì • ì¡°ê±´ì— ë”°ë¼ ë‘ê°œì˜ í•˜ìœ„ Builder í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì‹¤ì œ Job ìƒì„±ì„ ìœ„ì„ í•œë‹¤. start() ì— Step ê°ì²´ê°€ ë“¤ì–´ê°€ë©´ SimpleJobBuilder ë¥¼ ë°˜í™˜í•œë‹¤. start() ì— Flow ê°ì²´ê°€ ë“¤ì–´ê°€ë©´ FlowJobBuilder ë¥¼ ë°˜í™˜í•œë‹¤. flow() ì— Step ê°ì²´ê°€ ë“¤ì–´ê°€ë©´ FlowJobBuilder ë¥¼ ë°˜í™˜í•œë‹¤. SimpleJobBuilder SimpleJob ì„ ìƒì„±í•˜ëŠ” Builder í´ë˜ìŠ¤ FlowJobBuilder FlowJob ì„ ìƒì„±í•˜ëŠ” Builder í´ë˜ìŠ¤ JobBuilder.java public class JobBuilder extends JobBuilderHelper&lt;JobBuilder&gt; &#123; public JobBuilder(String name) &#123; super(name); &#125; // Parameter ê°€ Step ê°ì²´ì¼ ê²½ìš° SimpleJobBuilder ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. public SimpleJobBuilder start(Step step) &#123; return new SimpleJobBuilder(this).start(step); &#125; // Parameter ê°€ Flow ê°ì²´ì¼ ê²½ìš° JobFlowBuilder ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. public JobFlowBuilder start(Flow flow) &#123; return new FlowJobBuilder(this).start(flow); &#125; // Parameter ê°€ Step ê°ì²´ì¼ ê²½ìš° JobFlowBuilder ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. public JobFlowBuilder flow(Step step) &#123; return new FlowJobBuilder(this).start(step); &#125;&#125; JobBuilder í´ë˜ìŠ¤ëŠ” JobBuilderHelper í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ê³  ìˆë‹¤. CommonJobProperties ëŠ” Job ìƒì„±ì— ì‚¬ìš©ë˜ëŠ” ê³µí†µ ì†ì„±ì„ ì •ì˜í•˜ëŠ” í´ë˜ìŠ¤ CommonJobProperties ëŠ” JobBuilderFactoryì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤. JobBuilderHelper ëŠ” CommonJobProperties ë¥¼ ì°¸ì¡°í•˜ê³  ìˆë‹¤. JobBuilder í´ë˜ìŠ¤ëŠ” SimpleJobRepository í´ë˜ìŠ¤ë¥¼ ì°¸ì¡°í•˜ê³  ìˆë‹¤. JobRepository ëŠ” Job ì´ ìƒì„±ë˜ëŠ” ì‹œì , JobBuilder ê°€ êµ¬ë™ë˜ëŠ” ì‹œì ë¶€í„° ì „ë‹¬ë¼ ë©”íƒ€ ë°ì´í„°ë“¤ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ì´ˆê¸°í™” ì‘ì—…ì„ í•œë‹¤. JobBuilderHelperpublic abstract class JobBuilderHelper&lt;B extends JobBuilderHelper&lt;B&gt;&gt; &#123; protected final Log logger = LogFactory.getLog(getClass()); private final CommonJobProperties properties; public JobBuilderHelper(String name) &#123; this.properties = new CommonJobProperties(); properties.name = name; &#125; protected JobBuilderHelper(JobBuilderHelper&lt;?&gt; parent) &#123; this.properties = new CommonJobProperties(parent.properties); &#125; public B validator(JobParametersValidator jobParametersValidator) &#123; properties.jobParametersValidator = jobParametersValidator; @SuppressWarnings(&quot;unchecked&quot;) B result = (B) this; return result; &#125; public B incrementer(JobParametersIncrementer jobParametersIncrementer) &#123; properties.jobParametersIncrementer = jobParametersIncrementer; @SuppressWarnings(&quot;unchecked&quot;) B result = (B) this; return result; &#125; public B repository(JobRepository jobRepository) &#123; properties.jobRepository = jobRepository; @SuppressWarnings(&quot;unchecked&quot;) B result = (B) this; return result; &#125; public B listener(Object listener) &#123; Set&lt;Method&gt; jobExecutionListenerMethods = new HashSet&lt;&gt;(); jobExecutionListenerMethods.addAll(ReflectionUtils.findMethod(listener.getClass(), BeforeJob.class)); jobExecutionListenerMethods.addAll(ReflectionUtils.findMethod(listener.getClass(), AfterJob.class)); if(jobExecutionListenerMethods.size() &gt; 0) &#123; JobListenerFactoryBean factory = new JobListenerFactoryBean(); factory.setDelegate(listener); properties.addJobExecutionListener((JobExecutionListener) factory.getObject()); &#125; @SuppressWarnings(&quot;unchecked&quot;) B result = (B) this; return result; &#125; public B listener(JobExecutionListener listener) &#123; properties.addJobExecutionListener(listener); @SuppressWarnings(&quot;unchecked&quot;) B result = (B) this; return result; &#125; public B preventRestart() &#123; properties.restartable = false; @SuppressWarnings(&quot;unchecked&quot;) B result = (B) this; return result; &#125; protected String getName() &#123; return properties.name; &#125; protected JobRepository getJobRepository() &#123; return properties.jobRepository; &#125; protected boolean isRestartable() &#123; return properties.restartable; &#125; protected void enhance(Job target) &#123; if (target instanceof AbstractJob) &#123; AbstractJob job = (AbstractJob) target; job.setJobRepository(properties.getJobRepository()); // JobParametersIncrementer ì„¤ì • JobParametersIncrementer jobParametersIncrementer = properties.getJobParametersIncrementer(); if (jobParametersIncrementer != null) &#123; job.setJobParametersIncrementer(jobParametersIncrementer); &#125; // JobParametersIncrementer ì„¤ì • JobParametersValidator jobParametersValidator = properties.getJobParametersValidator(); if (jobParametersValidator != null) &#123; job.setJobParametersValidator(jobParametersValidator); &#125; Boolean restartable = properties.getRestartable(); if (restartable != null) &#123; job.setRestartable(restartable); &#125; List&lt;JobExecutionListener&gt; listeners = properties.getJobExecutionListeners(); if (!listeners.isEmpty()) &#123; job.setJobExecutionListeners(listeners.toArray(new JobExecutionListener[0])); &#125; &#125; &#125; public static class CommonJobProperties &#123; private Set&lt;JobExecutionListener&gt; jobExecutionListeners = new LinkedHashSet&lt;&gt;(); private boolean restartable = true; private JobRepository jobRepository; private JobParametersIncrementer jobParametersIncrementer; private JobParametersValidator jobParametersValidator; public CommonJobProperties() &#123; &#125; public CommonJobProperties(CommonJobProperties properties) &#123; this.name = properties.name; this.restartable = properties.restartable; this.jobRepository = properties.jobRepository; this.jobExecutionListeners = new LinkedHashSet&lt;&gt;(properties.jobExecutionListeners); this.jobParametersIncrementer = properties.jobParametersIncrementer; this.jobParametersValidator = properties.jobParametersValidator; &#125; public JobParametersIncrementer getJobParametersIncrementer() &#123; return jobParametersIncrementer; &#125; public void setJobParametersIncrementer(JobParametersIncrementer jobParametersIncrementer) &#123; this.jobParametersIncrementer = jobParametersIncrementer; &#125; public JobParametersValidator getJobParametersValidator() &#123; return jobParametersValidator; &#125; public void setJobParametersValidator(JobParametersValidator jobParametersValidator) &#123; this.jobParametersValidator = jobParametersValidator; &#125; public JobRepository getJobRepository() &#123; return jobRepository; &#125; public void setJobRepository(JobRepository jobRepository) &#123; this.jobRepository = jobRepository; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public List&lt;JobExecutionListener&gt; getJobExecutionListeners() &#123; return new ArrayList&lt;&gt;(jobExecutionListeners); &#125; public void addStepExecutionListeners(List&lt;JobExecutionListener&gt; jobExecutionListeners) &#123; this.jobExecutionListeners.addAll(jobExecutionListeners); &#125; public void addJobExecutionListener(JobExecutionListener jobExecutionListener) &#123; this.jobExecutionListeners.add(jobExecutionListener); &#125; public boolean getRestartable() &#123; return restartable; &#125; public void setRestartable(boolean restartable) &#123; this.restartable = restartable; &#125; private String name; &#125;&#125; @Beanpublic Job batchJob1() &#123; return this.jobBuilderFactory.get(&quot;batchJob1&quot;) .incrementer(new RunIdIncrementer()) .start(step1()) .next(step2()) .build();&#125;@Beanpublic Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet((contribution, chunkContext) -&gt; &#123; System.out.println(&quot;&gt;&gt; step1 has executed&quot;); return RepeatStatus.FINISHED; &#125;) .build();&#125;@Beanpublic Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet((contribution, chunkContext) -&gt; &#123; System.out.println(&quot;&gt;&gt; step2 has executed&quot;); return RepeatStatus.FINISHED; &#125;) .build();&#125; @Beanpublic Job batchJob2() &#123; return this.jobBuilderFactory.get(&quot;batchJob1&quot;) .incrementer(new RunIdIncrementer()) .start(flow()) .next(step2()) .end() .build();&#125; @Beanpublic Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet((contribution, chunkContext) -&gt; &#123; System.out.println(&quot;&gt;&gt; step2 has executed&quot;); return RepeatStatus.FINISHED; &#125;) .build();&#125;@Beanpublic Flow flow() &#123; FlowBuilder&lt;Flow&gt; flowBuilder = new FlowBuilder&lt;&gt;(&quot;flow&quot;); flowBuilder.start(step3()) .next(step4()) .end(); return flowBuilder.build();&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Spring Batch - JobRegistry","slug":"spring/spring-batch/job/spring-batch-JobRegistry","date":"2023-04-02T06:25:35.000Z","updated":"2024-02-26T15:29:49.864Z","comments":true,"path":"2023/04/02/spring/spring-batch/job/spring-batch-JobRegistry/","link":"","permalink":"https://ckck803.github.io/2023/04/02/spring/spring-batch/job/spring-batch-JobRegistry/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobRegistry JobRegistry ëŠ” JobLauncherê°€ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” Jobì„ ë“±ë¡í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤, JobRegistryëŠ” ì¼ë°˜ì ìœ¼ë¡œ JobLauncherë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JobRegistryë¥¼ ì‚¬ìš©í•˜ë©´ JobLauncherê°€ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” Jobì„ ë“±ë¡í•˜ê³ , ì‹¤í–‰ ì‹œê°„ì— ë“±ë¡ëœ Jobì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JobRegistryëŠ” ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„ë  ìˆ˜ ìˆìœ¼ë©°, XML íŒŒì¼, ë°ì´í„°ë² ì´ìŠ¤, ìë°” êµ¬ì„± ë“±ì—ì„œ Jobì„ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JobRegistryëŠ” Spring Batchì—ì„œ Jobì„ ì‹¤í–‰í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œëŠ” JobRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì €ì¥í•˜ê³ , JobOperatorë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. JobRegistryëŠ” JobLauncherë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, JobLauncherëŠ” Jobì„ ì‹¤í–‰í•©ë‹ˆë‹¤. JobRegistryëŠ” Spring Batchì—ì„œ Jobì˜ ê´€ë¦¬ ë° ì‹¤í–‰ì„ ê°„í¸í•˜ê²Œ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. JobRegistryë¥¼ ì‚¬ìš©í•˜ë©´ Jobì„ ë“±ë¡í•˜ì—¬ ì—¬ëŸ¬ Jobì„ ì‹¤í–‰í•  ìˆ˜ ìˆê³ , Jobì„ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ Jobì„ ë§Œë“¤ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ë˜í•œ JobRegistryë¥¼ ì‚¬ìš©í•˜ë©´ JobLauncherë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì„ ë‹¨ìˆœí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 24. FlowJob Post not found: spring/spring-batch/tasklet/spring-batch-23-JobStep Spring Batch - 22. Tasklet ê¸°ë°˜ Step Spring Batch - 21. TaskletStep Spring Batch - 20. StepBuilderFactory ì™€ StepBuilder Spring Batch - 19. JobParameters ì¦ê°€ JobParametersIncrementer Spring Batch - 18. Job ì˜ ì¬ì‹œì‘ ë°©ì§€ preventRestart Spring Batch - 17. JobParameters ê²€ì¦ JobParametersValidator Spring Batch - 16. SimpleJob ì™€ SimpleJobLauncher Spring Batch - 15. JobBuilderFactory &amp; JobBuilder Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobRegistry JobRegistry ëŠ” JobLauncherê°€ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” Jobì„ ë“±ë¡í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤, JobRegistryëŠ” ì¼ë°˜ì ìœ¼ë¡œ JobLauncherë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. JobRegistryë¥¼ ì‚¬ìš©í•˜ë©´ JobLauncherê°€ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” Jobì„ ë“±ë¡í•˜ê³ , ì‹¤í–‰ ì‹œê°„ì— ë“±ë¡ëœ Jobì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JobRegistryëŠ” ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„ë  ìˆ˜ ìˆìœ¼ë©°, XML íŒŒì¼, ë°ì´í„°ë² ì´ìŠ¤, ìë°” êµ¬ì„± ë“±ì—ì„œ Jobì„ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JobRegistryëŠ” Spring Batchì—ì„œ Jobì„ ì‹¤í–‰í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œëŠ” JobRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì €ì¥í•˜ê³ , JobOperatorë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. JobRegistryëŠ” JobLauncherë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, JobLauncherëŠ” Jobì„ ì‹¤í–‰í•©ë‹ˆë‹¤. JobRegistryëŠ” Spring Batchì—ì„œ Jobì˜ ê´€ë¦¬ ë° ì‹¤í–‰ì„ ê°„í¸í•˜ê²Œ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. JobRegistryë¥¼ ì‚¬ìš©í•˜ë©´ Jobì„ ë“±ë¡í•˜ì—¬ ì—¬ëŸ¬ Jobì„ ì‹¤í–‰í•  ìˆ˜ ìˆê³ , Jobì„ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ Jobì„ ë§Œë“¤ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ë˜í•œ JobRegistryë¥¼ ì‚¬ìš©í•˜ë©´ JobLauncherë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì„ ë‹¨ìˆœí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties)","slug":"spring/spring-batch/spring-batch-14-batch-initialize","date":"2023-04-01T06:25:35.000Z","updated":"2024-02-26T15:30:48.451Z","comments":true,"path":"2023/04/01/spring/spring-batch/spring-batch-14-batch-initialize/","link":"","permalink":"https://ckck803.github.io/2023/04/01/spring/spring-batch/spring-batch-14-batch-initialize/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing BatchAutoConfiguration BatchAutoConfiguration ì—ì„œëŠ” ApplicationRunner ì˜ ì¼ì¢…ì¸ JobLauncherApplicationRunner ë¥¼ ìƒì„±í•œë‹¤. BatchAutoConfigurationì€ @EnableBatchProcessing ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ í™œì„±í™”ë©ë‹ˆë‹¤. BatchAutoConfiguration.java public class BatchAutoConfiguration &#123; @Bean @ConditionalOnMissingBean @ConditionalOnProperty(prefix = &quot;spring.batch.job&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;, matchIfMissing = true) public JobLauncherApplicationRunner jobLauncherApplicationRunner(JobLauncher jobLauncher, JobExplorer jobExplorer, JobRepository jobRepository, BatchProperties properties) &#123; // JobLauncher ê°ì²´ì™€ JobExplorer ê°ì²´ì™€ JobRepository ê°ì²´ë¥¼ ì´ìš©í•´ JobLauncherApplicationRunner ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. JobLauncherApplicationRunner runner = new JobLauncherApplicationRunner(jobLauncher, jobExplorer, jobRepository); // Application Properties ì— ë“±ë¡ëœ Job ì´ë¦„ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤. String jobNames = properties.getJob().getNames(); if (StringUtils.hasText(jobNames)) &#123; runner.setJobNames(jobNames); &#125; return runner; &#125; ... ì´í•˜ ìƒëµ ...&#125; JobLauncherApplicationRunner","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing BatchAutoConfiguration BatchAutoConfiguration ì—ì„œëŠ” ApplicationRunner ì˜ ì¼ì¢…ì¸ JobLauncherApplicationRunner ë¥¼ ìƒì„±í•œë‹¤. BatchAutoConfigurationì€ @EnableBatchProcessing ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ í™œì„±í™”ë©ë‹ˆë‹¤. BatchAutoConfiguration.java public class BatchAutoConfiguration &#123; @Bean @ConditionalOnMissingBean @ConditionalOnProperty(prefix = &quot;spring.batch.job&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;, matchIfMissing = true) public JobLauncherApplicationRunner jobLauncherApplicationRunner(JobLauncher jobLauncher, JobExplorer jobExplorer, JobRepository jobRepository, BatchProperties properties) &#123; // JobLauncher ê°ì²´ì™€ JobExplorer ê°ì²´ì™€ JobRepository ê°ì²´ë¥¼ ì´ìš©í•´ JobLauncherApplicationRunner ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. JobLauncherApplicationRunner runner = new JobLauncherApplicationRunner(jobLauncher, jobExplorer, jobRepository); // Application Properties ì— ë“±ë¡ëœ Job ì´ë¦„ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤. String jobNames = properties.getJob().getNames(); if (StringUtils.hasText(jobNames)) &#123; runner.setJobNames(jobNames); &#125; return runner; &#125; ... ì´í•˜ ìƒëµ ...&#125; JobLauncherApplicationRunner Spring boot ì—ì„œ ì œê³µí•˜ëŠ” ApplicationRunner ì˜ êµ¬í˜„ì²´ ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬ë™ë˜ìë§ˆì ì‹¤í–‰ë˜ë©° Bean ìœ¼ë¡œ ë“±ë¡ëœ ëª¨ë“  Job ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. JobLauncherApplicationRunner ëŠ” JobLauncher í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ JobRegistry ì— ë“±ë¡ëœ ëª¨ë“  Jobì„ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. ì´ëŸ¬í•œ ì‹¤í–‰ì€ ApplicationContext ê°€ ì™„ì „íˆ ë¡œë“œë˜ê³  ì‹¤í–‰ëœ í›„ì— ì‹œì‘ë©ë‹ˆë‹¤. ì‹¤í–‰ ì‹œì ì—ì„œ ë“±ë¡ëœ ëª¨ë“  Jobì„ ê°€ì ¸ì™€ ì‹¤í–‰í•˜ë¯€ë¡œ Job ì´ë¦„ì´ ê³ ìœ í•´ì•¼ í•©ë‹ˆë‹¤. JobLauncherApplicationRunner ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ @EnableBatchProcessing ì„ ì‚¬ìš©í•˜ì—¬ Spring Batchë¥¼ í™œì„±í™”í•˜ê³ , JobLauncherApplicationRunner ë¥¼ Bean ìœ¼ë¡œ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë  ë•Œ JobLauncherApplicationRunnerê°€ ì‹¤í–‰ë˜ì–´ ë“±ë¡ëœ ëª¨ë“  Jobì„ ìë™ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¤ê²Œ ë©ë‹ˆë‹¤. JobLauncherApplicationRunnerëŠ” Spring Batch Job ì„ ìë™ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ê°„ë‹¨í•œ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ Job ì„ ì‹¤í–‰í•  ë•Œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì§€ì •í•´ì•¼ í•˜ëŠ” ê²½ìš°ë‚˜, ì‹¤í–‰ ì¡°ê±´ì´ë‚˜ Job ì‹¤í–‰ ì „&#x2F;í›„ ì²˜ë¦¬ë¥¼ ì¶”ê°€í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” ë³´ë‹¤ ìœ ì—°í•œ ë°©ë²•ìœ¼ë¡œ JobLauncher ë¥¼ ì§ì ‘ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. JobLauncherApplicationRunner ê°ì²´ëŠ” execute ë¼ëŠ” ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ë‚´ë¶€ì— ê°€ì§€ê³  ìˆëŠ” JobLauncher ê°ì²´ë¥¼ ì´ìš©í•´ Job ì„ ìˆ˜í–‰í•œë‹¤. JobLauncherApplicationRunner.java public class JobLauncherApplicationRunner implements ApplicationRunner, Ordered, ApplicationEventPublisherAware &#123; ... ìƒëµ ... private final JobLauncher jobLauncher; // Spring Boot ê°€ Job ì„ Scan í•œ í›„ì— JobLauncherApplicationRunner ì— ì „ë‹¬í•´ì¤€ë‹¤. // JobLauncherApplicationRunner ëŠ” ì—¬ëŸ¬ê°œì˜ Job ì„ ê°€ì§€ê³  ìˆì„ ìˆ˜ ìˆê²Œ ëœë‹¤. @Autowired(required = false) public void setJobs(Collection&lt;Job&gt; jobs) &#123; this.jobs = jobs; &#125; protected void execute(Job job, JobParameters jobParameters) throws JobExecutionAlreadyRunningException, JobRestartException, JobInstanceAlreadyCompleteException, JobParametersInvalidException, JobParametersNotFoundException &#123; JobParameters parameters = getNextJobParameters(job, jobParameters); // JobLauncher ë¥¼ ì´ìš©í•´ Job ì„ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì„ í•œë‹¤. JobExecution execution = this.jobLauncher.run(job, parameters); if (this.publisher != null) &#123; this.publisher.publishEvent(new JobExecutionEvent(execution)); &#125; &#125; // @Override public void run(ApplicationArguments args) throws Exception &#123; String[] jobArguments = args.getNonOptionArgs().toArray(new String[0]); run(jobArguments); &#125; public void run(String... args) throws JobExecutionException &#123; logger.info(&quot;Running default command line with: &quot; + Arrays.asList(args)); launchJobFromProperties(StringUtils.splitArrayElementsIntoProperties(args, &quot;=&quot;)); &#125; protected void launchJobFromProperties(Properties properties) throws JobExecutionException &#123; // Argument ë“¤ì„ JobParameters ê°ì²´ë¡œ ë³€í™˜í•´ ì €ì¥í•œë‹¤. JobParameters jobParameters = this.converter.getJobParameters(properties); executeLocalJobs(jobParameters); executeRegisteredJobs(jobParameters); &#125; // Batch Properties ë¡œ ë“±ë¡ëœ Job ë“¤ì´ ìˆì„ ê²½ìš° ì‹¤í–‰í•œë‹¤. private void executeLocalJobs(JobParameters jobParameters) throws JobExecutionException &#123; for (Job job : this.jobs) &#123; // spring.batch.job.names ì— ë“±ë¡ëœ Job ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. // íŠ¹ì •í•œ Job ë§Œì„ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ê²½ìš° ì‚¬ìš©í•œë‹¤. if (StringUtils.hasText(this.jobNames)) &#123; String[] jobsToRun = this.jobNames.split(&quot;,&quot;); if (!PatternMatchUtils.simpleMatch(jobsToRun, job.getName())) &#123; logger.debug(LogMessage.format(&quot;Skipped job: %s&quot;, job.getName())); continue; &#125; &#125; // Job ì„ ì‹¤í–‰í•œë‹¤. execute(job, jobParameters); &#125; &#125; // JobRegistry ì— ë“±ë¡ëœ ëª¨ë“  Jobì„ ì‹¤í–‰í•©ë‹ˆë‹¤ private void executeRegisteredJobs(JobParameters jobParameters) throws JobExecutionException &#123; if (this.jobRegistry != null &amp;&amp; StringUtils.hasText(this.jobNames)) &#123; String[] jobsToRun = this.jobNames.split(&quot;,&quot;); for (String jobName : jobsToRun) &#123; try &#123; Job job = this.jobRegistry.getJob(jobName); if (this.jobs.contains(job)) &#123; continue; &#125; execute(job, jobParameters); &#125; catch (NoSuchJobException ex) &#123; logger.debug(LogMessage.format(&quot;No job found in registry for job name: %s&quot;, jobName)); &#125; &#125; &#125; &#125; ... ìƒëµ ...&#125; BatchProperties BatchPropertiesëŠ” Spring Batch ì˜ ì„¤ì •ì„ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ Job ì´ë¦„, ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™” ì„¤ì •, í…Œì´ë¸” Prefix ë“±ì˜ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. application.properties ë˜ëŠ” application.yml íŒŒì¼ì— ì„¤ì •í•œë‹¤. BatchProperties.java // application.properties or application.yml ì—ì„œ spring.batch ê°€ Spring Batch ì˜ Prefix ë‹¤. @ConfigurationProperties(prefix = &quot;spring.batch&quot;)public class BatchProperties &#123; ... ìƒëµ ...&#125; application.propertiesë°°ì¹˜ ì¡ì˜ ì‹¤í–‰ ì—¬ë¶€ë¥¼ ì„¤ì •# Spring Boot ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¤ëŠ” Batch Job ì„ ì‹¤í–‰ì‹œí‚¤ë„ë¡ í•œë‹¤.spring.batch.job.enabled: true # default# Spring Boot ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¤ëŠ” Batch Job ì„ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ í•œë‹¤.spring.batch.job.enabled: false ë°°ì¹˜ ì¡ì˜ ì¬ì‹œì‘ ì—¬ë¶€ë¥¼ ì„¤ì •# ê¸°ë³¸ì´ true, ì¬ì‹œì‘ì„ í—ˆìš©í•œë‹¤.spring.batch.job.restartable: true# ì¬ì‹œì‘ì„ í—ˆìš©gí•˜ì§€ ì•ŠëŠ”ë‹¤spring.batch.job.restartable: false ì‹¤í–‰í•  ë°°ì¹˜ ì¡ì˜ ì´ë¦„ì„ ì§€ì • ì§€ì •í•œ Job ë§Œ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•œë‹¤. spring.batch.job.names: ${job.name.NONE} # Hard Coding ë°©ì‹spring.batch.job.names: springJob1# Binding ì„ ì‚¬ìš©í•œ ë°©ì‹# Default ëŠ” NONE ìœ¼ë¡œ ì•„ë¬´ Job ë„ ì‹¤í–‰ì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤.spring.batch.job.names: $&#123;job.name:NONE&#125; ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œ Program arguments ë¡œ job ì´ë¦„ ì…ë ¥í•œë‹¤. --job.name=helloJob --job.name=helloJob.simpleJob í•˜ë‚˜ ì´ìƒì˜ job ì„ ì‹¤í–‰í•  ê²½ìš° ì‰¼í‘œë¡œ êµ¬ë¶„í•´ì„œ ì…ë ¥ í•œë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œì ì— Argument ë¡œ ë„˜ê²¨ì„œ Binding ë˜ë„ë¡ í•œë‹¤. ë°°ì¹˜ ì¡ì—ì„œ í—ˆìš©í•˜ëŠ” ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ ì„¤ì •# ë°°ì¹˜ ì¡ì—ì„œ í—ˆìš©í•˜ëŠ” ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ ì„¤ì •í•œë‹¤. default: 3spring.batch.job.failures-allowed: 3 ë°°ì¹˜ ì¡ì—ì„œ ìƒì„±ë˜ëŠ” ë©”íƒ€ ë°ì´í„° í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ìƒì„±ì—¬ë¶€ë¥¼ ì„¤ì •spring.batch.jdbc.initialize-schema: alwaysspring.batch.jdbc.initialize-schema: embeddedspring.batch.jdbc.initialize-schema: never ë°°ì¹˜ ì¡ì—ì„œ ìƒì„±ë˜ëŠ” ë©”íƒ€ ë°ì´í„° í…Œì´ë¸” Prefix ë¥¼ ì„¤ì •í•œë‹¤.spring.batch.jdbc.table-prefix: Job ì‹¤í–‰ ì˜µì…˜","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜ - Kubernetes","slug":"devops/cicd/jenkins/helm/helm-jenkins-kubernetes","date":"2023-03-19T21:31:46.000Z","updated":"2025-03-29T04:27:43.394Z","comments":true,"path":"2023/03/20/devops/cicd/jenkins/helm/helm-jenkins-kubernetes/","link":"","permalink":"https://ckck803.github.io/2023/03/20/devops/cicd/jenkins/helm/helm-jenkins-kubernetes/","excerpt":"ëª©ì°¨ [Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸° [Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸° [Jenkins] - Agent ì¶”ê°€í•˜ê¸° [Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸° Jenkins ë€Erorr : You must be logged in to the server (Unauthorized)ì°¸ê³  https://artifacthub.io/packages/helm/jenkinsci/jenkins 1. Repository ì¶”ê°€helm repo add jenkins https://charts.jenkins.io 2. value.yaml ì¤€ë¹„","text":"ëª©ì°¨ [Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸° [Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸° [Jenkins] - Agent ì¶”ê°€í•˜ê¸° [Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸° Jenkins ë€Erorr : You must be logged in to the server (Unauthorized)ì°¸ê³  https://artifacthub.io/packages/helm/jenkinsci/jenkins 1. Repository ì¶”ê°€helm repo add jenkins https://charts.jenkins.io 2. value.yaml ì¤€ë¹„Jenkins ë²„ì „ ë° JDK ë²„ì „ ì„¤ì •controller: # Used for label app.kubernetes.io/component componentName: &quot;jenkins-controller&quot; image: &quot;jenkins/jenkins&quot; # tag: &quot;2.375.3-jdk11&quot; tagLabel: jdk11 imagePullPolicy: &quot;Always&quot; imagePullSecretName: StorageClass ì§€ì •persistence: enabled: true storageClass: jenkins-ebs annotations: &#123;&#125; labels: &#123;&#125; accessMode: &quot;ReadWriteOnce&quot; size: &quot;8Gi&quot; 3. Jenkins ì„¤ì¹˜Jenkins ë¥¼ ì„¤ì¹˜í•˜ê³ ì í•˜ëŠ” Kubernetes ì˜ Namespace ì™€ Version ì„ ì„¤ì •í•œ í›„ ì„¤ì¹˜ë¥¼ ì§„í–‰í•œë‹¤. helm install jenkins jenkins/jenkins --version &lt;version&gt; -n &lt;namespace&gt; Jenkins ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ë©´ admin Passwrod ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë°©ë²•ê³¼ í¬íŠ¸í¬ì›Œë”©ì„ í†µí•´ jenkins ì— ì ‘ì†í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì„¤ëª…ì´ ë‚˜ì˜¨ë‹¤. NAME: jenkinsLAST DEPLOYED: Tue Mar 7 15:11:52 2023NAMESPACE: cicdSTATUS: deployedREVISION: 1NOTES:1. Get your &#x27;admin&#x27; user password by running: kubectl exec --namespace cicd -it svc/jenkins -c jenkins -- /bin/cat /run/secrets/additional/chart-admin-password &amp;&amp; echo1. Get the Jenkins URL to visit by running these commands in the same shell: echo http://127.0.0.1:8080 kubectl --namespace cicd port-forward svc/jenkins 8080:80801. Login with the password from step 1 and the username: admin2. Configure security realm and authorization strategy3. Use Jenkins Configuration as Code by specifying configScripts in your values.yaml file, see documentation: http://127.0.0.1:8080/configuration-as-code and examples: https://github.com/jenkinsci/configuration-as-code-plugin/tree/master/demosFor more information on running Jenkins on Kubernetes, visit:https://cloud.google.com/solutions/jenkins-on-container-engineFor more information about Jenkins Configuration as Code, visit:https://jenkins.io/projects/jcasc/NOTE: Consider using a custom image with pre-installed plugins 4. Jenkins Admin Password í™•ì¸kubectl exec -n cicd -it svc/jenkins -c jenkins -- /bin/cat /run/secrets/additional/chart-admin-password &amp;&amp; echo Jenkinsfile Agent ì¶”ê°€additionalAgents: maven: podName: maven customJenkinsLabels: maven # An example of overriding the jnlp container # sideContainerName: jnlp image: jenkins/jnlp-agent-maven tag: jdk11 node: podName: node customJenkinsLabels: maven # An example of overriding the jnlp container # sideContainerName: jnlp image: jenkins/jnlp-agent-node tag: latest# python:# podName: python# customJenkinsLabels: python# sideContainerName: python# image: python# tag: &quot;3&quot;# command: &quot;/bin/sh -c&quot;# args: &quot;cat&quot;# TTYEnabled: true","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"},{"name":"Jenkins","slug":"DevOps/CICD/Jenkins","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Jenkins/"}],"tags":[]},{"title":"[Gitea] - Gitea ë¥¼ Maven Repository ë¡œ ì‚¬ìš©í•˜ê¸°","slug":"devops/repository/gitea/gitea-02-maven","date":"2023-03-14T21:31:46.000Z","updated":"2025-03-29T04:30:25.763Z","comments":true,"path":"2023/03/15/devops/repository/gitea/gitea-02-maven/","link":"","permalink":"https://ckck803.github.io/2023/03/15/devops/repository/gitea/gitea-02-maven/","excerpt":"ëª©ì°¨ [Gitea] - Gitea Storage ë¡œ S3 ì‚¬ìš©í•˜ê¸° [Gitea] - Gitea ë¥¼ Maven Repository ë¡œ ì‚¬ìš©í•˜ê¸° [Gitea] - Helm ì„ ì´ìš©í•´ Gitea ì„¤ì¹˜í•˜ê¸° Gitea Maven Repository ë¡œ ì‚¬ìš©í•˜ê¸°ì°¸ê³  https://docs.gitea.io/en-us/packages/maven/ ì¼ê´„ë¡œ Dependency ì˜¬ë¦¬ëŠ” ì½”ë“œLibrary ë¥¼ S3 ë¡œ ë³€ê²½í•  ê²½ìš° ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ Upload ì‹œ ëª…í™•í•˜ê²Œ ì¸ì‹ì´ ì•ˆë¼ì„œ Storage íƒ€ì…ì— ë”°ë¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ì #!/bin/bashfiles=&quot;./files.out&quot;giteaurl=&quot;https://gitea.mbcp.co.kr/api/packages/vitality/maven/&quot;token=&quot;d00b1001f5cfaf91c6143730f2fec34d13e16d2a&quot;find . -name &#x27;*.*&#x27; -type f | cut -c 3- | grep &quot;/&quot; &gt;$fileswhile read i; do echo &quot;upload $i to $giteaurl&quot; curl -v -H &quot;Authorization: Bearer $token&quot; --upload-file $i &quot;$giteaurl$i&quot;done &lt;$files settings.xml ì„¤ì •","text":"ëª©ì°¨ [Gitea] - Gitea Storage ë¡œ S3 ì‚¬ìš©í•˜ê¸° [Gitea] - Gitea ë¥¼ Maven Repository ë¡œ ì‚¬ìš©í•˜ê¸° [Gitea] - Helm ì„ ì´ìš©í•´ Gitea ì„¤ì¹˜í•˜ê¸° Gitea Maven Repository ë¡œ ì‚¬ìš©í•˜ê¸°ì°¸ê³  https://docs.gitea.io/en-us/packages/maven/ ì¼ê´„ë¡œ Dependency ì˜¬ë¦¬ëŠ” ì½”ë“œLibrary ë¥¼ S3 ë¡œ ë³€ê²½í•  ê²½ìš° ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ Upload ì‹œ ëª…í™•í•˜ê²Œ ì¸ì‹ì´ ì•ˆë¼ì„œ Storage íƒ€ì…ì— ë”°ë¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ì #!/bin/bashfiles=&quot;./files.out&quot;giteaurl=&quot;https://gitea.mbcp.co.kr/api/packages/vitality/maven/&quot;token=&quot;d00b1001f5cfaf91c6143730f2fec34d13e16d2a&quot;find . -name &#x27;*.*&#x27; -type f | cut -c 3- | grep &quot;/&quot; &gt;$fileswhile read i; do echo &quot;upload $i to $giteaurl&quot; curl -v -H &quot;Authorization: Bearer $token&quot; --upload-file $i &quot;$giteaurl$i&quot;done &lt;$files settings.xml ì„¤ì •Maven Library ì— ëŒ€í•œ ì„¤ì •ê³¼ Plugin ë¥¼ Install í•˜ê¸° ìœ„í•œ ì„¤ì •ì„ ì¶”ê°€í•´ ì£¼ë„ë¡ í•œë‹¤. Plugin Repository ì— ëŒ€í•œ ì„¤ì •ì´ ë¹ ì¡Œì–´ì„œ ì›ì¸ ì°¾ëŠ”ë° ì‹œê°„ì´ ê½¤ ê±¸ë ¸ë‹¤. &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt; &lt;proxies&gt; &lt;/proxies&gt; &lt;servers&gt; &lt;server&gt; &lt;id&gt;gitea&lt;/id&gt; &lt;configuration&gt; &lt;httpHeaders&gt; &lt;property&gt; &lt;name&gt;Authorization&lt;/name&gt; &lt;value&gt;token b58d372b45506739562521ccd12b0d5f3bea0bc4&lt;/value&gt; &lt;/property&gt; &lt;/httpHeaders&gt; &lt;/configuration&gt; &lt;/server&gt; &lt;/servers&gt; &lt;mirrors&gt; &lt;mirror&gt; &lt;id&gt;gitea&lt;/id&gt; &lt;mirrorOf&gt;external:https:*&lt;/mirrorOf&gt; &lt;url&gt;https://gitea.mbcp.co.kr/api/packages/vitality/maven&lt;/url&gt; &lt;/mirror&gt; &lt;/mirrors&gt; &lt;profiles&gt; &lt;profile&gt; &lt;id&gt;gitea&lt;/id&gt; &lt;repositories&gt; &lt;repository&gt; &lt;id&gt;gitea&lt;/id&gt; &lt;url&gt;https://gitea.mbcp.co.kr/api/packages/vitality/maven&lt;/url&gt; &lt;/repository&gt; &lt;/repositories&gt; &lt;pluginRepositories&gt; &lt;pluginRepository&gt; &lt;id&gt;gitea&lt;/id&gt; &lt;url&gt;https://gitea.mbcp.co.kr/api/packages/vitality/maven&lt;/url&gt; &lt;/pluginRepository&gt; &lt;/pluginRepositories&gt; &lt;/profile&gt; &lt;/profiles&gt; &lt;activeProfiles&gt; &lt;activeProfile&gt;gitea&lt;/activeProfile&gt; &lt;/activeProfiles&gt;&lt;/settings&gt;","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"Repository","slug":"DevOps/Repository","permalink":"https://ckck803.github.io/categories/DevOps/Repository/"},{"name":"Gitea","slug":"DevOps/Repository/Gitea","permalink":"https://ckck803.github.io/categories/DevOps/Repository/Gitea/"}],"tags":[]},{"title":"[Gitea] - Helm ì„ ì´ìš©í•´ Gitea ì„¤ì¹˜í•˜ê¸°","slug":"devops/repository/gitea/gitea-01-install","date":"2023-03-12T21:31:46.000Z","updated":"2025-03-29T04:29:30.456Z","comments":true,"path":"2023/03/13/devops/repository/gitea/gitea-01-install/","link":"","permalink":"https://ckck803.github.io/2023/03/13/devops/repository/gitea/gitea-01-install/","excerpt":"ëª©ì°¨ [Gitea] - Gitea Storage ë¡œ S3 ì‚¬ìš©í•˜ê¸° [Gitea] - Gitea ë¥¼ Maven Repository ë¡œ ì‚¬ìš©í•˜ê¸° [Gitea] - Helm ì„ ì´ìš©í•´ Gitea ì„¤ì¹˜í•˜ê¸° Gitea ë€? ì˜¤í”ˆ ì†ŒìŠ¤ ê¸°ë°˜ì˜ ìì²´ í˜¸ìŠ¤íŒ… Git ì„œë¹„ìŠ¤ 1. Helm Repository ì¶”ê°€# Repository ì¶”ê°€helm repo add gitea https://dl.gitea.io/charts/# Repository Updatehelm repo update 2. Gitea value.yaml ìƒì„± ë° ìˆ˜ì • ì°¸ê³  https://docs.gitea.io/en-us/config-cheat-sheet/ gitea ë¥¼ ì•„ë¬´ ì„¤ì • ì—†ì´ ì„¤ì¹˜í•˜ê²Œ ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ROOT_URL ê³¼ ì ‘ê·¼ URL ì´ ë‹¤ë¥´ë‹¤ëŠ” ê²½ê³ ë¥¼ ë³´ì—¬ì¤€ë‹¤.","text":"ëª©ì°¨ [Gitea] - Gitea Storage ë¡œ S3 ì‚¬ìš©í•˜ê¸° [Gitea] - Gitea ë¥¼ Maven Repository ë¡œ ì‚¬ìš©í•˜ê¸° [Gitea] - Helm ì„ ì´ìš©í•´ Gitea ì„¤ì¹˜í•˜ê¸° Gitea ë€? ì˜¤í”ˆ ì†ŒìŠ¤ ê¸°ë°˜ì˜ ìì²´ í˜¸ìŠ¤íŒ… Git ì„œë¹„ìŠ¤ 1. Helm Repository ì¶”ê°€# Repository ì¶”ê°€helm repo add gitea https://dl.gitea.io/charts/# Repository Updatehelm repo update 2. Gitea value.yaml ìƒì„± ë° ìˆ˜ì • ì°¸ê³  https://docs.gitea.io/en-us/config-cheat-sheet/ gitea ë¥¼ ì•„ë¬´ ì„¤ì • ì—†ì´ ì„¤ì¹˜í•˜ê²Œ ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ROOT_URL ê³¼ ì ‘ê·¼ URL ì´ ë‹¤ë¥´ë‹¤ëŠ” ê²½ê³ ë¥¼ ë³´ì—¬ì¤€ë‹¤. value.yaml íŒŒì¼ì„ ìƒì„±í•´ gitea í”„ë¡œê·¸ë¨ ë‚´ app.ini ì„¤ì • íŒŒì¼ì„ ë°˜ì˜í•˜ëŠ” gitea.config ì— ROOT_URL ì •ë³´ë¥¼ ë„£ì–´ì¤€ë‹¤. ROOT_URL ë³€ê²½gitea: config: APP_NAME: &quot;Gitea: Git with a cup of tea&quot; server: PROTOCOL: http ROOT_URL: https://gitea.mbcp.co.kr # SSH_DOMAIN: git.example.com # SSH_LISTEN_PORT: 22 # SSH_PORT: 22 # ENABLE_PPROF: false # RUN_MODE: dev ALLOWED_HOST_LIST ì¶”ê°€ ì°¸ê³  : https://docs.gitea.io/en-us/config-cheat-sheet/#webhook-webhook Jenkins ì— Webhook ì„ ë‚ ë¦¬ê¸° ìœ„í•´ì„œëŠ” webhook.ALLOWED_HOST_LIST ê°€ setting ë¼ ìˆì–´ì•¼ í•œë‹¤. gitea: config: APP_NAME: &quot;Gitea: Git with a cup of tea&quot; server: PROTOCOL: http ROOT_URL: https://gitea.mbcp.co.kr webhook: ALLOWED_HOST_LIST: &quot;*.mbcp.co.kr&quot; 3. Helm ì„ ì´ìš©í•œ Gitea ì„¤ì¹˜# cicd namespace ì— gitea ì„¤ì¹˜helm install -n cicd -f ./values.yaml gitea gitea/gitea --version 7.0.4","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"Repository","slug":"DevOps/Repository","permalink":"https://ckck803.github.io/categories/DevOps/Repository/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - ReadinessProbe & LivenessProbe","slug":"k8s/pod/ReadinessProbe_LivenessProbe","date":"2023-03-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.541Z","comments":true,"path":"2023/03/08/k8s/pod/ReadinessProbe_LivenessProbe/","link":"","permalink":"https://ckck803.github.io/2023/03/08/k8s/pod/ReadinessProbe_LivenessProbe/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s Pod Pod ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê°€ì¥ ì‘ì€ ë°°í¬ ë‹¨ìœ„ ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” Pod ì„ ì´ìš©í•´ Container ë¥¼ ê´€ë¦¬ í•œë‹¤. Pod ëŠ” ë‹¨ì¼ Node ì—ì„œ ì‹¤í–‰ë˜ë©° ê°ê°ì˜ Pod ëŠ” ê³ ìœ í•œ IP ì™€ Host ì´ë¦„ì„ ê°€ì§€ê³  ìˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” Pod ì„ ë°°í¬ í•˜ê³  Pod ì•ˆì— í•œê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆê°€ ì¡´ì¬í•œë‹¤. Pod ë‚´ ContainerëŠ” ëª¨ë‘ ë™ì¼í•œ Host ì—ì„œ ì‹¤í–‰ë˜ë©° Network ì™€ ì €ì¥ì†Œë¥¼ ê³µìœ í•œë‹¤. apiVersion: v1kind: Podmetadata: name: echo labels: app: echospec: containers: - name: app image: ghcr.io/subicura/echo:v1 ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s Pod Pod ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê°€ì¥ ì‘ì€ ë°°í¬ ë‹¨ìœ„ ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” Pod ì„ ì´ìš©í•´ Container ë¥¼ ê´€ë¦¬ í•œë‹¤. Pod ëŠ” ë‹¨ì¼ Node ì—ì„œ ì‹¤í–‰ë˜ë©° ê°ê°ì˜ Pod ëŠ” ê³ ìœ í•œ IP ì™€ Host ì´ë¦„ì„ ê°€ì§€ê³  ìˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” Pod ì„ ë°°í¬ í•˜ê³  Pod ì•ˆì— í•œê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆê°€ ì¡´ì¬í•œë‹¤. Pod ë‚´ ContainerëŠ” ëª¨ë‘ ë™ì¼í•œ Host ì—ì„œ ì‹¤í–‰ë˜ë©° Network ì™€ ì €ì¥ì†Œë¥¼ ê³µìœ í•œë‹¤. apiVersion: v1kind: Podmetadata: name: echo labels: app: echospec: containers: - name: app image: ghcr.io/subicura/echo:v1 ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"ì›Œí¬ë¡œë“œ","slug":"Kubernetes/ì›Œí¬ë¡œë“œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/"}],"tags":[]},{"title":"EKS - Cluster Autoscaler","slug":"aws/eks/eks-autoscaler","date":"2023-03-05T21:31:07.000Z","updated":"2024-02-18T16:19:54.516Z","comments":true,"path":"2023/03/06/aws/eks/eks-autoscaler/","link":"","permalink":"https://ckck803.github.io/2023/03/06/aws/eks/eks-autoscaler/","excerpt":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  https://github.com/kubernetes/autoscaler https://docs.aws.amazon.com/ko_kr/autoscaling/ec2/userguide/what-is-amazon-ec2-auto-scaling.html &#123; &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;autoscaling:DescribeAutoScalingGroups&quot;, &quot;autoscaling:DescribeAutoScalingInstances&quot;, &quot;autoscaling:DescribeLaunchConfigurations&quot;, &quot;autoscaling:DescribeScalingActivities&quot;, &quot;autoscaling:DescribeTags&quot;, &quot;ec2:DescribeInstanceTypes&quot;, &quot;ec2:DescribeLaunchTemplateVersions&quot; ], &quot;Resource&quot;: [&quot;*&quot;] &#125;, &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;autoscaling:SetDesiredCapacity&quot;, &quot;autoscaling:TerminateInstanceInAutoScalingGroup&quot;, &quot;ec2:DescribeImages&quot;, &quot;ec2:GetInstanceTypesFromInstanceRequirements&quot;, &quot;eks:DescribeNodegroup&quot; ], &quot;Resource&quot;: [&quot;*&quot;] &#125; ]&#125; helm repo add autoscaler https://kubernetes.github.io/autoscaler helm show values autoscaler/cluster-autoscaler ì ìš© ëŒ€ìƒ nodeì—ëŠ” ì•„ë˜ì˜ tagê°€ ë‹¬ë ¤ì•¼ í•œë‹¤. k8s.io/cluster-autoscaler/skcc-dev-floot-eks: ownedk8s.io/cluster-autoscaler/enabled: true","text":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  https://github.com/kubernetes/autoscaler https://docs.aws.amazon.com/ko_kr/autoscaling/ec2/userguide/what-is-amazon-ec2-auto-scaling.html &#123; &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;autoscaling:DescribeAutoScalingGroups&quot;, &quot;autoscaling:DescribeAutoScalingInstances&quot;, &quot;autoscaling:DescribeLaunchConfigurations&quot;, &quot;autoscaling:DescribeScalingActivities&quot;, &quot;autoscaling:DescribeTags&quot;, &quot;ec2:DescribeInstanceTypes&quot;, &quot;ec2:DescribeLaunchTemplateVersions&quot; ], &quot;Resource&quot;: [&quot;*&quot;] &#125;, &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;autoscaling:SetDesiredCapacity&quot;, &quot;autoscaling:TerminateInstanceInAutoScalingGroup&quot;, &quot;ec2:DescribeImages&quot;, &quot;ec2:GetInstanceTypesFromInstanceRequirements&quot;, &quot;eks:DescribeNodegroup&quot; ], &quot;Resource&quot;: [&quot;*&quot;] &#125; ]&#125; helm repo add autoscaler https://kubernetes.github.io/autoscaler helm show values autoscaler/cluster-autoscaler ì ìš© ëŒ€ìƒ nodeì—ëŠ” ì•„ë˜ì˜ tagê°€ ë‹¬ë ¤ì•¼ í•œë‹¤. k8s.io/cluster-autoscaler/skcc-dev-floot-eks: ownedk8s.io/cluster-autoscaler/enabled: true","categories":[{"name":"AWS","slug":"AWS","permalink":"https://ckck803.github.io/categories/AWS/"},{"name":"EKS","slug":"AWS/EKS","permalink":"https://ckck803.github.io/categories/AWS/EKS/"}],"tags":[]},{"title":"EKS - EFS CSI Driver ì„¤ì¹˜","slug":"aws/eks/eks-efs","date":"2023-03-04T22:31:07.000Z","updated":"2024-02-18T16:19:54.516Z","comments":true,"path":"2023/03/05/aws/eks/eks-efs/","link":"","permalink":"https://ckck803.github.io/2023/03/05/aws/eks/eks-efs/","excerpt":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  https://aws.amazon.com/ko/blogs/tech/persistent-storage-for-kubernetes/ EFS CSI Driver ì„¤ì¹˜ë¥¼ ìœ„í•œ EKS ë‚´ Service Account ìƒì„±curl -O https://raw.githubusercontent.com/kubernetes-sigs/aws-efs-csi-driver/master/docs/iam-policy-example.json aws iam create-policy \\ --policy-name AmazonEKS_EFS_CSI_Driver_Policy \\ --policy-document file://iam-policy-example.json eksctl create iamserviceaccount \\ --cluster my-cluster \\ --namespace kube-system \\ --name efs-csi-controller-sa \\ --attach-policy-arn arn:aws:iam::&lt;111122223333&gt;:policy/AmazonEKS_EFS_CSI_Driver_Policy \\ --approve \\ --region &lt;region-code&gt; EBS CSI Driver ì„¤ì¹˜","text":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  https://aws.amazon.com/ko/blogs/tech/persistent-storage-for-kubernetes/ EFS CSI Driver ì„¤ì¹˜ë¥¼ ìœ„í•œ EKS ë‚´ Service Account ìƒì„±curl -O https://raw.githubusercontent.com/kubernetes-sigs/aws-efs-csi-driver/master/docs/iam-policy-example.json aws iam create-policy \\ --policy-name AmazonEKS_EFS_CSI_Driver_Policy \\ --policy-document file://iam-policy-example.json eksctl create iamserviceaccount \\ --cluster my-cluster \\ --namespace kube-system \\ --name efs-csi-controller-sa \\ --attach-policy-arn arn:aws:iam::&lt;111122223333&gt;:policy/AmazonEKS_EFS_CSI_Driver_Policy \\ --approve \\ --region &lt;region-code&gt; EBS CSI Driver ì„¤ì¹˜helm repo add aws-efs-csi-driver https://kubernetes-sigs.github.io/aws-efs-csi-driver/ helm repo update helm upgrade -i aws-efs-csi-driver aws-efs-csi-driver/aws-efs-csi-driver \\ --namespace kube-system \\ --set image.repository=602401143452.dkr.ecr.region-code.amazonaws.com/eks/aws-efs-csi-driver \\ --set controller.serviceAccount.create=false \\ --set controller.serviceAccount.name=efs-csi-controller-sa EBS StorageClass ìƒì„±kind: StorageClassapiVersion: storage.k8s.io/v1metadata: name: efs-scprovisioner: efs.csi.aws.comparameters: provisioningMode: efs-ap fileSystemId: &quot;&lt;EFS Filesystem ID&gt;&quot; directoryPerms: &quot;700&quot; gidRangeStart: &quot;1000&quot; # optional gidRangeEnd: &quot;2000&quot; # optional","categories":[{"name":"AWS","slug":"AWS","permalink":"https://ckck803.github.io/categories/AWS/"},{"name":"EKS","slug":"AWS/EKS","permalink":"https://ckck803.github.io/categories/AWS/EKS/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - k9s","slug":"k8s/k9s","date":"2023-03-04T21:31:46.000Z","updated":"2024-02-18T16:19:54.540Z","comments":true,"path":"2023/03/05/k8s/k9s/","link":"","permalink":"https://ckck803.github.io/2023/03/05/k8s/k9s/","excerpt":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress Post not found: k8s/deployment Post not found: k8s/replicaset Post not found: k8s/node Post not found: k8s/pod","text":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress Post not found: k8s/deployment Post not found: k8s/replicaset Post not found: k8s/node Post not found: k8s/pod","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Resource ì œí•œ","slug":"k8s/autoscaler/resource","date":"2023-03-04T21:31:46.000Z","updated":"2024-02-18T16:19:54.536Z","comments":true,"path":"2023/03/05/k8s/autoscaler/resource/","link":"","permalink":"https://ckck803.github.io/2023/03/05/k8s/autoscaler/resource/","excerpt":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress Post not found: k8s/deployment Post not found: k8s/replicaset Post not found: k8s/node Post not found: k8s/pod ResourcePodì˜ specì—ì„œ resources í•„ë“œë¥¼ í†µí•´ ë¦¬ì†ŒìŠ¤ë¥¼ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. resources í•„ë“œëŠ” limits ì™€ requests ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. limitsëŠ” Podê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ë¦¬ì†ŒìŠ¤ ì–‘ì„ ì„¤ì •í•˜ê³ , requestsëŠ” Podê°€ ìµœì†Œí•œìœ¼ë¡œ í•„ìš”ë¡œ í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ì–‘ì„ ì„¤ì •í•©ë‹ˆë‹¤. apiVersion: v1kind: Podmetadata: name: my-podspec: containers: - name: my-container image: nginx resources: limits: cpu: &quot;1&quot; memory: &quot;512Mi&quot; requests: cpu: &quot;500m&quot; memory: &quot;256Mi&quot;","text":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress Post not found: k8s/deployment Post not found: k8s/replicaset Post not found: k8s/node Post not found: k8s/pod ResourcePodì˜ specì—ì„œ resources í•„ë“œë¥¼ í†µí•´ ë¦¬ì†ŒìŠ¤ë¥¼ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. resources í•„ë“œëŠ” limits ì™€ requests ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. limitsëŠ” Podê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ë¦¬ì†ŒìŠ¤ ì–‘ì„ ì„¤ì •í•˜ê³ , requestsëŠ” Podê°€ ìµœì†Œí•œìœ¼ë¡œ í•„ìš”ë¡œ í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ì–‘ì„ ì„¤ì •í•©ë‹ˆë‹¤. apiVersion: v1kind: Podmetadata: name: my-podspec: containers: - name: my-container image: nginx resources: limits: cpu: &quot;1&quot; memory: &quot;512Mi&quot; requests: cpu: &quot;500m&quot; memory: &quot;256Mi&quot;","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"EKS - EBS CSI Driver ì„¤ì¹˜","slug":"aws/eks/eks-ebs","date":"2023-03-04T21:31:07.000Z","updated":"2024-02-18T16:19:54.516Z","comments":true,"path":"2023/03/05/aws/eks/eks-ebs/","link":"","permalink":"https://ckck803.github.io/2023/03/05/aws/eks/eks-ebs/","excerpt":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  https://aws.amazon.com/ko/blogs/tech/persistent-storage-for-kubernetes/ EBS CSI Driver ì„¤ì¹˜ë¥¼ ìœ„í•œ EKS ë‚´ Service Account ìƒì„±eksctl create iamserviceaccount \\ --name ebs-csi-controller-sa \\ --namespace kube-system \\ --cluster &lt;Cluste ì´ë¦„&gt; \\ --attach-policy-arn arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy \\ --approve \\ --role-only \\ --role-name AmazonEKS_EBS_CSI_DriverRole EBS CSI Driver ì„¤ì¹˜aws eks describe-addon-versions --addon-name aws-ebs-csi-driver eksctl create addon \\ --name aws-ebs-csi-driver \\ --cluster &lt;Cluste ì´ë¦„&gt; \\ --service-account-role-arn arn:aws:iam::&lt;AWS ê³„ì • ID&gt;:role/AmazonEKS_EBS_CSI_DriverRole \\ --force","text":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  https://aws.amazon.com/ko/blogs/tech/persistent-storage-for-kubernetes/ EBS CSI Driver ì„¤ì¹˜ë¥¼ ìœ„í•œ EKS ë‚´ Service Account ìƒì„±eksctl create iamserviceaccount \\ --name ebs-csi-controller-sa \\ --namespace kube-system \\ --cluster &lt;Cluste ì´ë¦„&gt; \\ --attach-policy-arn arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy \\ --approve \\ --role-only \\ --role-name AmazonEKS_EBS_CSI_DriverRole EBS CSI Driver ì„¤ì¹˜aws eks describe-addon-versions --addon-name aws-ebs-csi-driver eksctl create addon \\ --name aws-ebs-csi-driver \\ --cluster &lt;Cluste ì´ë¦„&gt; \\ --service-account-role-arn arn:aws:iam::&lt;AWS ê³„ì • ID&gt;:role/AmazonEKS_EBS_CSI_DriverRole \\ --force EBS StorageClass ìƒì„±apiVersion: storage.k8s.io/v1kind: StorageClass metadata: name: jenkins-ebs namespace: cicdvolumeBindingMode: Immediate# volumeBindingMode: WaitForFirstConsumer provisioner: ebs.csi.aws.comparameters: type: gp3 tagSpecification_1: &lt;tag name1&gt;=&lt;value1&gt; tagSpecification_2: &lt;tag name2&gt;=&lt;value2&gt;reclaimPolicy: RetainallowVolumeExpansion: true apiVersion: v1kind: PersistentVolumeClaimmetadata: name: nexus-claim-efs namespace: cicdspec: accessModes: - ReadWriteOnce storageClassName: nexus-ebs resources: requests: storage: 20Gi namespace: cicd kind: StorageClassapiVersion: storage.k8s.io/v1metadata: name: efs-scprovisioner: efs.csi.aws.comparameters: provisioningMode: efs-ap fileSystemId: &quot;&lt;EFS Filesystem ID&gt;&quot; directoryPerms: &quot;700&quot; gidRangeStart: &quot;1000&quot; # optional gidRangeEnd: &quot;2000&quot; # optional","categories":[{"name":"AWS","slug":"AWS","permalink":"https://ckck803.github.io/categories/AWS/"},{"name":"EKS","slug":"AWS/EKS","permalink":"https://ckck803.github.io/categories/AWS/EKS/"}],"tags":[]},{"title":"EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„±","slug":"aws/eks/eks-nlb","date":"2023-03-03T21:31:07.000Z","updated":"2024-02-18T16:19:54.516Z","comments":true,"path":"2023/03/04/aws/eks/eks-nlb/","link":"","permalink":"https://ckck803.github.io/2023/03/04/aws/eks/eks-nlb/","excerpt":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/network-load-balancing.html apiVersion: v1kind: Servicemetadata: name: nlb-sample-service namespace: nlb-sample-app annotations: service.beta.kubernetes.io/aws-load-balancer-type: external service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing service.beta.kubernetes.io/aws-load-balancer-name: skcc-prd-vitality-dx-nlb-ftp service.beta.kubernetes.io/subnets: &lt;Public Subnet1 ID&gt;, &lt;Public Subnet2 ID&gt;spec: ports: - port: 80 targetPort: 80 protocol: TCP type: LoadBalancer selector: app: nginx apiVersion: apps/v1kind: Deploymentmetadata: name: nlb-sample-app namespace: nlb-sample-appspec: replicas: 3 selector: matchLabels: app: nginx template: metadata: labels: app: nginx spec: containers: - name: nginx image: public.ecr.aws/nginx/nginx:1.21 ports: - name: tcp containerPort: 80","text":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/network-load-balancing.html apiVersion: v1kind: Servicemetadata: name: nlb-sample-service namespace: nlb-sample-app annotations: service.beta.kubernetes.io/aws-load-balancer-type: external service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing service.beta.kubernetes.io/aws-load-balancer-name: skcc-prd-vitality-dx-nlb-ftp service.beta.kubernetes.io/subnets: &lt;Public Subnet1 ID&gt;, &lt;Public Subnet2 ID&gt;spec: ports: - port: 80 targetPort: 80 protocol: TCP type: LoadBalancer selector: app: nginx apiVersion: apps/v1kind: Deploymentmetadata: name: nlb-sample-app namespace: nlb-sample-appspec: replicas: 3 selector: matchLabels: app: nginx template: metadata: labels: app: nginx spec: containers: - name: nginx image: public.ecr.aws/nginx/nginx:1.21 ports: - name: tcp containerPort: 80","categories":[{"name":"AWS","slug":"AWS","permalink":"https://ckck803.github.io/categories/AWS/"},{"name":"EKS","slug":"AWS/EKS","permalink":"https://ckck803.github.io/categories/AWS/EKS/"}],"tags":[]},{"title":"EKS - ALB Controller ì„¤ì¹˜","slug":"aws/eks/eks-alb","date":"2023-03-02T21:31:07.000Z","updated":"2024-02-18T16:19:54.516Z","comments":true,"path":"2023/03/03/aws/eks/eks-alb/","link":"","permalink":"https://ckck803.github.io/2023/03/03/aws/eks/eks-alb/","excerpt":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/aws-load-balancer-controller.html IAM policy &amp; role ìƒì„±curl -O https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.4.7/docs/install/iam_policy.json aws iam create-policy \\ --policy-name AWSLoadBalancerControllerIAMPolicy \\ --policy-document file://iam_policy.json ServiceAccount ìƒì„±eksctl create iamserviceaccount \\ --cluster=my-cluster \\ --namespace=kube-system \\ --name=aws-load-balancer-controller \\ # ì›í•˜ëŠ” Service Account ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•´ë„ ëœë‹¤ --role-name AmazonEKSLoadBalancerControllerRole \\ --attach-policy-arn=arn:aws:iam::111122223333:policy/AWSLoadBalancerControllerIAMPolicy \\ --approve","text":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/aws-load-balancer-controller.html IAM policy &amp; role ìƒì„±curl -O https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.4.7/docs/install/iam_policy.json aws iam create-policy \\ --policy-name AWSLoadBalancerControllerIAMPolicy \\ --policy-document file://iam_policy.json ServiceAccount ìƒì„±eksctl create iamserviceaccount \\ --cluster=my-cluster \\ --namespace=kube-system \\ --name=aws-load-balancer-controller \\ # ì›í•˜ëŠ” Service Account ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•´ë„ ëœë‹¤ --role-name AmazonEKSLoadBalancerControllerRole \\ --attach-policy-arn=arn:aws:iam::111122223333:policy/AWSLoadBalancerControllerIAMPolicy \\ --approve Helm ì„ ì´ìš©í•œ ALB Controller ìƒì„±helm repo add eks https://aws.github.io/eks-charts helm repo update helm install aws-load-balancer-controller eks/aws-load-balancer-controller \\ -n kube-system \\ --set clusterName=&lt;EKS Cluster ì´ë¦„&gt; \\ --set serviceAccount.create=false \\ --set serviceAccount.name=&lt;ServiceAccount ì´ë¦„&gt; ê²°ê³¼ NAME: aws-load-balancer-controllerLAST DEPLOYED: Fri Feb 17 09:50:16 2023NAMESPACE: kube-systemSTATUS: deployedREVISION: 1TEST SUITE: NoneNOTES:AWS Load Balancer controller installed! ALB Ingress ìƒì„± ALB Ingress Annotation ì°¸ê³  https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.2/guide/ingress/annotations/ apiVersion: networking.k8s.io/v1beta1kind: Ingressmetadata: name: &lt;Ingress ì´ë¦„&gt; namespace: &lt;Namespace&gt; annotations: kubernetes.io/ingress.class: alb alb.ingress.kubernetes.io/group.name: froot # Ingress Group ì´ë¦„ alb.ingress.kubernetes.io/listen-ports: &#x27;[&#123;&quot;HTTPS&quot;: 443, &quot;HTTP&quot;: 80&#125;]&#x27; # ALB ê°€ ìˆ˜ì‹ í•œ PORT ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. alb.ingress.kubernetes.io/load-balancer-name: &lt;ALB ì´ë¦„&gt; alb.ingress.kubernetes.io/scheme: internal alb.ingress.kubernetes.io/security-groups: &lt;Security Group ì •ë³´&gt; alb.ingress.kubernetes.io/ssl-policy: ELBSecurityPolicy-FS-1-2-Res-2020-10 alb.ingress.kubernetes.io/subnets: &lt;Subnet1 ID&gt;, &lt;Subnet2 ID&gt; alb.ingress.kubernetes.io/success-codes: 403,404,200,302 alb.ingress.kubernetes.io/tags: &lt;tag1=value1&gt;, &lt;tag2=value2&gt; alb.ingress.kubernetes.io/target-type: ipspec: rules: - host: &lt;ë„ë©”ì¸ ì´ë¦„&gt; http: paths: - path: /* backend: service: name: &lt;Service ì´ë¦„&gt; port: number: &lt;Service í¬íŠ¸&gt;","categories":[{"name":"AWS","slug":"AWS","permalink":"https://ckck803.github.io/categories/AWS/"},{"name":"EKS","slug":"AWS/EKS","permalink":"https://ckck803.github.io/categories/AWS/EKS/"}],"tags":[]},{"title":"EKS - Cluster Access ë¬¸ì œ","slug":"aws/eks/cluster-access","date":"2023-03-01T21:31:46.000Z","updated":"2024-02-18T16:19:54.515Z","comments":true,"path":"2023/03/02/aws/eks/cluster-access/","link":"","permalink":"https://ckck803.github.io/2023/03/02/aws/eks/cluster-access/","excerpt":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) Error í˜„ì¬ ì‚¬ìš©ì ë˜ëŠ” ì—­í• ì´ ì´ EKS Cluster ì— ìˆëŠ” Kubenetes ê°ì²´ì— ì—‘ì„¸ìŠ¤ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.EKS Dashboard ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ë¬¸êµ¬ê°€ ëœ¨ë©´ì„œ Kubernetes ê°ì²´ì— ì •ìƒì ìœ¼ë¡œ Access í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ëŠ” ìƒì„±í•œ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ ConfigMapì˜ aws-authì— í˜„ì¬ ì‚¬ìš©ì ë˜ëŠ” ì—­í• ì´ ì—†ì–´ AWS Consoleì—ì„œ í™•ì¸ì´ ì•ˆë˜ëŠ” ê²ƒì´ë‹¤. 1. ARN í™•ì¸ 2. ConfigMap ìˆ˜ì •ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ aws-auth ConfigMap ì— ì ‘ê·¼í•´ mapUsers ë¥¼ ì¶”ê°€ í•´ì£¼ë„ë¡ í•˜ì.","text":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) Error í˜„ì¬ ì‚¬ìš©ì ë˜ëŠ” ì—­í• ì´ ì´ EKS Cluster ì— ìˆëŠ” Kubenetes ê°ì²´ì— ì—‘ì„¸ìŠ¤ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.EKS Dashboard ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ë¬¸êµ¬ê°€ ëœ¨ë©´ì„œ Kubernetes ê°ì²´ì— ì •ìƒì ìœ¼ë¡œ Access í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ëŠ” ìƒì„±í•œ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ ConfigMapì˜ aws-authì— í˜„ì¬ ì‚¬ìš©ì ë˜ëŠ” ì—­í• ì´ ì—†ì–´ AWS Consoleì—ì„œ í™•ì¸ì´ ì•ˆë˜ëŠ” ê²ƒì´ë‹¤. 1. ARN í™•ì¸ 2. ConfigMap ìˆ˜ì •ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ aws-auth ConfigMap ì— ì ‘ê·¼í•´ mapUsers ë¥¼ ì¶”ê°€ í•´ì£¼ë„ë¡ í•˜ì. kubectl edit cm/aws-auth -n kube-system ConfigMap ì— ì•„ë˜ ì •ë³´ë¥¼ ì¶”ê°€userarn : iam ì—ì„œ í™•ì¸ í•  ìˆ˜ ìˆëŠ” ARN ì •ë³´username : ì‚¬ìš©ì ê³„ì • ì´ë¦„groupsì— system:masters ë¥¼ ì¶”ê°€í•´ì•¼ AWSì½˜ì†”ì—ì„œ EKSë¥¼ ì˜¬ë°”ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. mapUsers: | - userarn: &lt;arn ì •ë³´&gt; username: &lt;ê³„ì • ì´ë¦„&gt; groups: - system:masters","categories":[{"name":"AWS","slug":"AWS","permalink":"https://ckck803.github.io/categories/AWS/"},{"name":"EKS","slug":"AWS/EKS","permalink":"https://ckck803.github.io/categories/AWS/EKS/"}],"tags":[]},{"title":"EKS - NodeGroup ìƒì„±","slug":"aws/eks/eks-nodegroup","date":"2023-03-01T21:31:46.000Z","updated":"2024-02-18T16:19:54.517Z","comments":true,"path":"2023/03/02/aws/eks/eks-nodegroup/","link":"","permalink":"https://ckck803.github.io/2023/03/02/aws/eks/eks-nodegroup/","excerpt":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  UserData ìƒì„± https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/launch-templates.html#launch-template-custom-ami https://eksctl.io/usage/managing-nodegroups/ https://kim-dragon.tistory.com/54 1. LauchTemplate ìƒì„±1. UserData ìƒì„±ì„ ìœ„í•œ EKS Cluster ì •ë³´ í™•ì¸aws eks describe-cluster ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ í•„ìš”í•œ EKS í´ëŸ¬ìŠ¤í„°ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤. í´ëŸ¬ìŠ¤í„° Certificate Authority í™•ì¸ aws eks describe-cluster \\ --query &quot;cluster.certificateAuthority.data&quot; \\ --output text \\ --name [í´ëŸ¬ìŠ¤í„° ì´ë¦„] \\ --region [ì§€ì—­] \\ --profile [aws-profile]","text":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  UserData ìƒì„± https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/launch-templates.html#launch-template-custom-ami https://eksctl.io/usage/managing-nodegroups/ https://kim-dragon.tistory.com/54 1. LauchTemplate ìƒì„±1. UserData ìƒì„±ì„ ìœ„í•œ EKS Cluster ì •ë³´ í™•ì¸aws eks describe-cluster ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ í•„ìš”í•œ EKS í´ëŸ¬ìŠ¤í„°ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤. í´ëŸ¬ìŠ¤í„° Certificate Authority í™•ì¸ aws eks describe-cluster \\ --query &quot;cluster.certificateAuthority.data&quot; \\ --output text \\ --name [í´ëŸ¬ìŠ¤í„° ì´ë¦„] \\ --region [ì§€ì—­] \\ --profile [aws-profile] ê²°ê³¼ LS0tLS1CRUd....RS0tLS0tCg== í´ëŸ¬ìŠ¤í„° EndPoint í™•ì¸ aws eks describe-cluster \\ --query &quot;cluster.endpoint&quot; \\ --output text \\ --name my-cluster \\ --region region-code https://3224AD3EC8CEA69EDAE9C57D9792EBB2.yl4.ap-northeast-2.eks.amazonaws.com ì„œë¹„ìŠ¤ IP ì£¼ì†Œ ë²”ìœ„ í™•ì¸ aws eks describe-cluster \\ --query &quot;cluster.kubernetesNetworkConfig.serviceIpv4Cidr&quot; \\ --output text \\ --name my-cluster \\ --region region-code 172.20.0.0/16 2. UserData ìƒì„±MIME-Version: 1.0Content-Type: multipart/mixed; boundary=&quot;==MYBOUNDARY==&quot;--==MYBOUNDARY==Content-Type: text/x-shellscript; charset=&quot;us-ascii&quot;#!/bin/bashset -ex/etc/eks/bootstrap.sh my-cluster \\ --b64-cluster-ca [í´ëŸ¬ìŠ¤í„°ì˜ certificate-authority] \\ --apiserver-endpoint [í´ëŸ¬ìŠ¤í„°ì˜ api-server-endpoint] \\ --dns-cluster-ip [í´ëŸ¬ìŠ¤í„°ì˜ service-cidr] \\ --container-runtime containerd \\ --kubelet-extra-args &#x27;--max-pods=my-[ìµœëŒ€ Pod ê°œìˆ˜]&#x27; \\ --use-max-pods false--==MYBOUNDARY==-- 3. UserData ë¥¼ Base64 ë¡œ ì¸ì½”ë”© Base 64ë¡œ ì¸ì½”ë”© í•´ì£¼ëŠ” ì‚¬ì´íŠ¸ https://www.convertstring.com/ko/EncodeDecode/Base64Encode TUlNRS1WZXJzaW...VJZPT0tLQ== 4. ì™„ì„±ëœ Launch Template ì •ë³´&#123; &quot;BlockDeviceMappings&quot;: [ &#123; &quot;DeviceName&quot;: &quot;/dev/xvda&quot;, &quot;Ebs&quot;: &#123; &quot;Encrypted&quot;: true, &quot;DeleteOnTermination&quot;: true, &quot;SnapshotId&quot;: &quot;snap-0f505c7c316673bd3&quot;, &quot;VolumeSize&quot;: 30, &quot;VolumeType&quot;: &quot;gp3&quot; &#125; &#125; ], &quot;ImageId&quot;: &quot;ami-07d1f1e1f9eaaf855&quot;, // Amazon Machine Image &quot;InstanceType&quot;: &quot;t3.medium&quot;, // Instance Type &quot;KeyName&quot;: &quot;Key-Pair-Name&quot;, // EC2 Key Pair ì´ë¦„ &quot;UserData&quot;: &quot;TUlNRS1WZXJzaW...VJZPT0tLQ==&quot;, // [base64ë¡œ encodingëœ UserData] &quot;SecurityGroupIds&quot;: [&quot;sg-0b59ab7daf120b3aa&quot;]&#125; 5. AWS Cli ë¥¼ ì´ìš©í•´ Launch Template ìƒì„±aws ec2 create-launch-template \\ --launch-template-name skcc-dev-floot-template-eks-cicd \\ --version-description version1 \\ --launch-template-data file:///Users/dongwoo-yang/vitality/devops/devops/eks-cicd/launch-template-data-cicd.json 6. ê²°ê³¼ Launch Template ì´ ì •ìƒì ìœ¼ë¡œ ìƒì„±ëœ ê²½ìš° &#123; &quot;LaunchTemplate&quot;: &#123; &quot;LaunchTemplateId&quot;: &quot;lt-0a34f65e6a5f56f26&quot;, &quot;LaunchTemplateName&quot;: &quot;skcc-dev-floot-template-eks-cicd&quot;, &quot;CreateTime&quot;: &quot;2023-03-05T04:35:54+00:00&quot;, &quot;DefaultVersionNumber&quot;: 1, &quot;LatestVersionNumber&quot;: 1 &#125;&#125; Launch Template ìƒì„±ì‹œ ë¬¸ì œê°€ ìˆëŠ” ê²½ìš° &#123; &quot;LaunchTemplate&quot;: &#123; &quot;LaunchTemplateId&quot;: &quot;lt-0f71298159e2cb0b9&quot;, &quot;LaunchTemplateName&quot;: &quot;skcc-dev-floot-template-eks-cicd&quot;, &quot;CreateTime&quot;: &quot;2023-03-05T04:24:31+00:00&quot;, &quot;DefaultVersionNumber&quot;: 1, &quot;LatestVersionNumber&quot;: 1 &#125;, &quot;Warning&quot;: &#123; &quot;Errors&quot;: [ &#123; &quot;Code&quot;: &quot;InvalidSecurityGroupID.NotFound&quot;, &quot;Message&quot;: &quot;The security group &#x27;sg-044a9f8e5e9ad6aea&#x27; does not exist&quot; &#125; ] &#125;&#125; 7. ì˜ ëª» ë§Œë“¤ì—ˆì„ ê²½ìš° ì‚­ì œaws ec2 delete-launch-template --launch-template-id lt-0f71298159e2cb0b9 ì‚­ì œ ë°˜í™˜ ê°’ &#123; &quot;LaunchTemplate&quot;: &#123; &quot;LaunchTemplateId&quot;: &quot;lt-032f99015c21e4006&quot;, &quot;LaunchTemplateName&quot;: &quot;skcc-dev-floot-template-eks-cicd&quot;, &quot;CreateTime&quot;: &quot;2023-03-05T04:30:59+00:00&quot;, &quot;DefaultVersionNumber&quot;: 1, &quot;LatestVersionNumber&quot;: 1 &#125;&#125; 2. Nodegroup ìƒì„±1. Nodegroup ìƒì„±ì„ ìœ„í•œ Config íŒŒì¼ ì‘ì„±apiVersion: eksctl.io/v1alpha5kind: ClusterConfigmetadata: name: skcc-dev-floot-eks region: ap-northeast-2vpc: id: &quot;vpc-0b743e88067ce8f6f&quot; subnets: private: ap-northeast-2a: id: &quot;subnet-0f80a51bc0046c935&quot; ap-northeast-2c: id: &quot;subnet-0acaea413f9bd4192&quot; securityGroup: &quot;sg-0b59ab7daf120b3aa&quot; # this is the ControlPlaneSecurityGroupmanagedNodeGroups: - name: skcc-dev-floot-nodegroup-cicd launchTemplate: id: lt-0a34f65e6a5f56f26 version: &quot;1&quot; labels: &#123; nodegroup-role: cicd &#125; availabilityZones: [&quot;ap-northeast-2a&quot;, &quot;ap-northeast-2c&quot;] desiredCapacity: 1 # instanceType: t3.medium iam: instanceRoleARN: &lt;Arn ì •ë³´&gt; privateNetworking: true tags: &quot;cz-stage&quot;: &quot;dev&quot; &quot;cz-owner&quot;: &quot;ì–‘ë™ìš°&quot; &quot;cz-appl&quot;: &quot;cicd&quot; &quot;cz-project&quot;: &quot;floot&quot; &quot;cz-org&quot;: &quot;Vitalityì‚¬ì—…íŒ€&quot; 2. Eksctl ë¥¼ ì´ìš©í•œ NodeGroup ìƒì„±eksctl create nodegroup -f ./eks-nodegroup-cicd.yaml Node Group ìƒì„± ë¡œê·¸ 2023-03-05 13:38:34 [â„¹] will use version 1.24 for new nodegroup(s) based on control plane version2023-03-05 13:38:34 [!] no eksctl-managed CloudFormation stacks found for &quot;skcc-dev-floot-eks&quot;, will attempt to create nodegroup(s) on non eksctl-managed cluster2023-03-05 13:38:35 [â„¹] nodegroup &quot;skcc-dev-floot-nodegroup-cicd&quot; will use &quot;&quot; [AmazonLinux2/1.24]2023-03-05 13:38:35 [â„¹] 4 existing nodegroup(s) (skcc-dev-floot-nodegroup-logging,skcc-dev-floot-nodegroup-monitoring,skcc-dev-floot-nodegroup-monitoring2,skcc-uat-floot-nodegroup-monitoring) will be excluded2023-03-05 13:38:35 [â„¹] 1 nodegroup (skcc-dev-floot-nodegroup-cicd) was included (based on the include/exclude rules)2023-03-05 13:38:35 [â„¹] will create a CloudFormation stack for each of 1 managed nodegroups in cluster &quot;skcc-dev-floot-eks&quot;2023-03-05 13:38:35 [â„¹] 1 task: &#123; 1 task: &#123; 1 task: &#123; create managed nodegroup &quot;skcc-dev-floot-nodegroup-cicd&quot; &#125; &#125; &#125;2023-03-05 13:38:35 [â„¹] building managed nodegroup stack &quot;eksctl-skcc-dev-floot-eks-nodegroup-skcc-dev-floot-nodegroup-cicd&quot;2023-03-05 13:38:35 [â„¹] deploying stack &quot;eksctl-skcc-dev-floot-eks-nodegroup-skcc-dev-floot-nodegroup-cicd&quot;2023-03-05 13:38:36 [â„¹] waiting for CloudFormation stack &quot;eksctl-skcc-dev-floot-eks-nodegroup-skcc-dev-floot-nodegroup-cicd&quot;2023-03-05 13:39:06 [â„¹] waiting for CloudFormation stack &quot;eksctl-skcc-dev-floot-eks-nodegroup-skcc-dev-floot-nodegroup-cicd&quot;2023-03-05 13:39:44 [â„¹] waiting for CloudFormation stack &quot;eksctl-skcc-dev-floot-eks-nodegroup-skcc-dev-floot-nodegroup-cicd&quot;2023-03-05 13:41:32 [â„¹] waiting for CloudFormation stack &quot;eksctl-skcc-dev-floot-eks-nodegroup-skcc-dev-floot-nodegroup-cicd&quot;2023-03-05 13:41:32 [â„¹] no tasks2023-03-05 13:41:32 [âœ”] created 0 nodegroup(s) in cluster &quot;skcc-dev-floot-eks&quot;2023-03-05 13:41:32 [â„¹] nodegroup &quot;skcc-dev-floot-nodegroup-cicd&quot; has 1 node(s)2023-03-05 13:41:32 [â„¹] node &quot;ip-10-180-19-19.ap-northeast-2.compute.internal&quot; is ready2023-03-05 13:41:32 [â„¹] waiting for at least 1 node(s) to become ready in &quot;skcc-dev-floot-nodegroup-cicd&quot;2023-03-05 13:41:32 [â„¹] nodegroup &quot;skcc-dev-floot-nodegroup-cicd&quot; has 1 node(s)2023-03-05 13:41:32 [â„¹] node &quot;ip-10-180-19-19.ap-northeast-2.compute.internal&quot; is ready2023-03-05 13:41:32 [âœ”] created 1 managed nodegroup(s) in cluster &quot;skcc-dev-floot-eks&quot;2023-03-05 13:41:33 [â„¹] checking security group configuration for all nodegroups2023-03-05 13:41:33 [â„¹] all nodegroups have up-to-date cloudformation templates 3. í•„ìš”í•œ ê²½ìš° Nodegroup ì‚­ì œeksctl delete nodegroup --cluster=skcc-dev-floot-eks --name=skcc-dev-floot-nodegroup-cicd Node Group ì‚­ì œ ë¡œê·¸ 2023-03-03 23:10:16 [â„¹] 1 nodegroup (skcc-dev-floot-nodegroup-cicd) was included (based on the include/exclude rules)2023-03-03 23:10:16 [â„¹] will drain 1 nodegroup(s) in cluster &quot;skcc-dev-floot-eks&quot;2023-03-03 23:10:16 [â„¹] starting parallel draining, max in-flight of 12023-03-03 23:10:17 [â„¹] cordon node &quot;ip-10-180-18-62.ap-northeast-2.compute.internal&quot;2023-03-03 23:10:17 [âœ”] drained all nodes: [ip-10-180-18-62.ap-northeast-2.compute.internal]2023-03-03 23:10:17 [â„¹] will delete 1 nodegroups from cluster &quot;skcc-dev-floot-eks&quot;2023-03-03 23:10:17 [â„¹] 1 task: &#123; 1 task: &#123; delete nodegroup &quot;skcc-dev-floot-nodegroup-cicd&quot; [async] &#125; &#125;2023-03-03 23:10:17 [â„¹] will delete stack &quot;eksctl-skcc-dev-floot-eks-nodegroup-skcc-dev-floot-nodegroup-cicd&quot;2023-03-03 23:10:17 [â„¹] will delete 0 nodegroups from auth ConfigMap in cluster &quot;skcc-dev-floot-eks&quot;2023-03-03 23:10:17 [âœ”] deleted 1 nodegroup(s) from cluster &quot;skcc-dev-floot-eks&quot; EKS ì—ì„œ ì‚¬ìš©í•˜ëŠ” instance íƒ€ì… í™•ì¸í•˜ê¸°aws eks describe-nodegroup \\--cluster-name &lt;cluster name&gt; \\--nodegroup-name skcc-uat-chat-nodegroup-monitoring \\--query &#x27;nodegroup.launchTemplate.instanceType&#x27;","categories":[{"name":"AWS","slug":"AWS","permalink":"https://ckck803.github.io/categories/AWS/"},{"name":"EKS","slug":"AWS/EKS","permalink":"https://ckck803.github.io/categories/AWS/EKS/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - í† í´ë¡œì§€ ì¸ì§€ íŒíŠ¸ (Topology Aware Hint)","slug":"k8s/topology-aware-hints","date":"2023-02-18T21:31:46.000Z","updated":"2024-02-18T16:19:54.542Z","comments":true,"path":"2023/02/19/k8s/topology-aware-hints/","link":"","permalink":"https://ckck803.github.io/2023/02/19/k8s/topology-aware-hints/","excerpt":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress Post not found: k8s/deployment Post not found: k8s/replicaset Post not found: k8s/node Post not found: k8s/pod ì°¸ê³  https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/kubernetes-versions.html https://kubernetes.io/ko/docs/concepts/services-networking/topology-aware-hints/ https://tetrate.io/blog/minimizing-cross-zone-traffic-charges-with-istio/ í† í´ë¡œì§€ ì¸ì§€ íŒíŠ¸ (Topology Aware Hint)ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ ë©€í‹°-ì¡´(multi-zone) í™˜ê²½ì— ë°°í¬ë˜ëŠ” ì¼ì´ ì ì  ë§ì•„ì§€ê³  ìˆë‹¤. í† í´ë¡œì§€ ì¸ì§€ íŒíŠ¸ ëŠ” íŠ¸ë˜í”½ì´ ë°œìƒí•œ ì¡´ ë‚´ì—ì„œ íŠ¸ë˜í”½ì„ ìœ ì§€í•˜ë„ë¡ ì²˜ë¦¬í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•œë‹¤. ì´ëŸ¬í•œ ê°œë…ì€ ë³´í†µ â€œí† í´ë¡œì§€ ì¸ì§€ ë¼ìš°íŒ…â€ì´ë¼ê³  ë¶€ë¥¸ë‹¤. ì„œë¹„ìŠ¤ì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê³„ì‚°í•  ë•Œ, ì—”ë“œí¬ì¸íŠ¸ìŠ¬ë¼ì´ìŠ¤ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ê° ì—”ë“œí¬ì¸íŠ¸ì˜ í† í´ë¡œì§€(ì§€ì—­(region) ë° ì¡´)ë¥¼ ê³ ë ¤í•˜ì—¬, ì—”ë“œí¬ì¸íŠ¸ê°€ íŠ¹ì • ì¡´ì— í• ë‹¹ë˜ë„ë¡ íŒíŠ¸ í•„ë“œë¥¼ ì±„ìš´ë‹¤. ê·¸ëŸ¬ë©´ kube-proxyì™€ ê°™ì€ í´ëŸ¬ìŠ¤í„° êµ¬ì„± ìš”ì†ŒëŠ” í•´ë‹¹ íŒíŠ¸ë¥¼ ì¸ì‹í•˜ê³ , (í† í´ë¡œì§€ ìƒ ê°€ê¹Œìš´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡) íŠ¸ë˜í”½ ë¼ìš°íŒ… êµ¬ì„±ì— í™œìš©í•œë‹¤. í† í´ë¡œì§€ ì¸ì§€ íŒíŠ¸(Topology Aware Hints) ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•œ ì œì•ˆì„ í¬í•¨ì‹œí‚´ìœ¼ë¡œì¨ í† í´ë¡œì§€ ì¸ì§€ ë¼ìš°íŒ…ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. ì´ëŸ¬í•œ ì ‘ê·¼ì€ ì—”ë“œí¬ì¸íŠ¸ìŠ¬ë¼ì´ìŠ¤(EndpointSlice) ë° ì—”ë“œí¬ì¸íŠ¸(Endpoint) ì˜¤ë¸Œì íŠ¸ì˜ ì†Œë¹„ì(consumer)ê°€ ì´ìš©í•  ìˆ˜ ìˆëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ë©°, ì´ë¥¼ í†µí•´ í•´ë‹¹ ë„¤íŠ¸ì›Œí¬ ì—”ë“œí¬ì¸íŠ¸ë¡œì˜ íŠ¸ë˜í”½ì´ ê·¼ì›ì§€ì— ë” ê°€ê¹ê²Œ ë¼ìš°íŠ¸ë  ìˆ˜ ìˆë‹¤. ë¹„ìš©ì„ ì¤„ì´ê±°ë‚˜ ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ë†’ì´ê¸° ìœ„í•´, ì¸ì ‘ì„±ì„ ê³ ë ¤í•˜ì—¬ íŠ¸ë˜í”½ì„ ë¼ìš°íŠ¸í•  ìˆ˜ ìˆë‹¤.","text":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress Post not found: k8s/deployment Post not found: k8s/replicaset Post not found: k8s/node Post not found: k8s/pod ì°¸ê³  https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/kubernetes-versions.html https://kubernetes.io/ko/docs/concepts/services-networking/topology-aware-hints/ https://tetrate.io/blog/minimizing-cross-zone-traffic-charges-with-istio/ í† í´ë¡œì§€ ì¸ì§€ íŒíŠ¸ (Topology Aware Hint)ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ ë©€í‹°-ì¡´(multi-zone) í™˜ê²½ì— ë°°í¬ë˜ëŠ” ì¼ì´ ì ì  ë§ì•„ì§€ê³  ìˆë‹¤. í† í´ë¡œì§€ ì¸ì§€ íŒíŠ¸ ëŠ” íŠ¸ë˜í”½ì´ ë°œìƒí•œ ì¡´ ë‚´ì—ì„œ íŠ¸ë˜í”½ì„ ìœ ì§€í•˜ë„ë¡ ì²˜ë¦¬í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•œë‹¤. ì´ëŸ¬í•œ ê°œë…ì€ ë³´í†µ â€œí† í´ë¡œì§€ ì¸ì§€ ë¼ìš°íŒ…â€ì´ë¼ê³  ë¶€ë¥¸ë‹¤. ì„œë¹„ìŠ¤ì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê³„ì‚°í•  ë•Œ, ì—”ë“œí¬ì¸íŠ¸ìŠ¬ë¼ì´ìŠ¤ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ê° ì—”ë“œí¬ì¸íŠ¸ì˜ í† í´ë¡œì§€(ì§€ì—­(region) ë° ì¡´)ë¥¼ ê³ ë ¤í•˜ì—¬, ì—”ë“œí¬ì¸íŠ¸ê°€ íŠ¹ì • ì¡´ì— í• ë‹¹ë˜ë„ë¡ íŒíŠ¸ í•„ë“œë¥¼ ì±„ìš´ë‹¤. ê·¸ëŸ¬ë©´ kube-proxyì™€ ê°™ì€ í´ëŸ¬ìŠ¤í„° êµ¬ì„± ìš”ì†ŒëŠ” í•´ë‹¹ íŒíŠ¸ë¥¼ ì¸ì‹í•˜ê³ , (í† í´ë¡œì§€ ìƒ ê°€ê¹Œìš´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡) íŠ¸ë˜í”½ ë¼ìš°íŒ… êµ¬ì„±ì— í™œìš©í•œë‹¤. í† í´ë¡œì§€ ì¸ì§€ íŒíŠ¸(Topology Aware Hints) ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•œ ì œì•ˆì„ í¬í•¨ì‹œí‚´ìœ¼ë¡œì¨ í† í´ë¡œì§€ ì¸ì§€ ë¼ìš°íŒ…ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. ì´ëŸ¬í•œ ì ‘ê·¼ì€ ì—”ë“œí¬ì¸íŠ¸ìŠ¬ë¼ì´ìŠ¤(EndpointSlice) ë° ì—”ë“œí¬ì¸íŠ¸(Endpoint) ì˜¤ë¸Œì íŠ¸ì˜ ì†Œë¹„ì(consumer)ê°€ ì´ìš©í•  ìˆ˜ ìˆëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ë©°, ì´ë¥¼ í†µí•´ í•´ë‹¹ ë„¤íŠ¸ì›Œí¬ ì—”ë“œí¬ì¸íŠ¸ë¡œì˜ íŠ¸ë˜í”½ì´ ê·¼ì›ì§€ì— ë” ê°€ê¹ê²Œ ë¼ìš°íŠ¸ë  ìˆ˜ ìˆë‹¤. ë¹„ìš©ì„ ì¤„ì´ê±°ë‚˜ ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ë†’ì´ê¸° ìœ„í•´, ì¸ì ‘ì„±ì„ ê³ ë ¤í•˜ì—¬ íŠ¸ë˜í”½ì„ ë¼ìš°íŠ¸í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"Helm ì„ ì´ìš©í•´ Nexus ì„¤ì¹˜í•˜ê¸°","slug":"devops/nexus/nexus-helm-01-install","date":"2023-02-18T21:31:46.000Z","updated":"2025-03-29T03:43:12.927Z","comments":true,"path":"2023/02/19/devops/nexus/nexus-helm-01-install/","link":"","permalink":"https://ckck803.github.io/2023/02/19/devops/nexus/nexus-helm-01-install/","excerpt":"ì°¸ê³ 1. Helm Repository ì¶”ê°€helm repo add sonatype https://sonatype.github.io/helm3-charts/ 2. Nexus InstallapiVersion: storage.k8s.io/v1kind: StorageClass metadata: name: &lt;storage class ì´ë¦„&gt; namespace: &lt;namespace ëª…&gt;volumeBindingMode: Immediateprovisioner: ebs.csi.aws.comparameters: type: gp3reclaimPolicy: RetainallowVolumeExpansion: true# reclaimPolicy: Delete values.yamlStorageClass ì •ë³´ ì¶”ê°€ ...persistence: enabled: true accessMode: ReadWriteOnce existingClaim: # annotations: # &quot;helm.sh/resource-policy&quot;: keep storageClass: &quot;nexus-ebs&quot; storageSize: 20Gi # If PersistentDisk already exists you can create a PV for it by including the 2 following keypairs. # pdName: nexus-data-disk # fsType: ext4tolerations: []","text":"ì°¸ê³ 1. Helm Repository ì¶”ê°€helm repo add sonatype https://sonatype.github.io/helm3-charts/ 2. Nexus InstallapiVersion: storage.k8s.io/v1kind: StorageClass metadata: name: &lt;storage class ì´ë¦„&gt; namespace: &lt;namespace ëª…&gt;volumeBindingMode: Immediateprovisioner: ebs.csi.aws.comparameters: type: gp3reclaimPolicy: RetainallowVolumeExpansion: true# reclaimPolicy: Delete values.yamlStorageClass ì •ë³´ ì¶”ê°€ ...persistence: enabled: true accessMode: ReadWriteOnce existingClaim: # annotations: # &quot;helm.sh/resource-policy&quot;: keep storageClass: &quot;nexus-ebs&quot; storageSize: 20Gi # If PersistentDisk already exists you can create a PV for it by including the 2 following keypairs. # pdName: nexus-data-disk # fsType: ext4tolerations: []","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"},{"name":"Repository","slug":"DevOps/CICD/Repository","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Repository/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace","slug":"k8s/namespace/namespace","date":"2023-02-18T21:31:46.000Z","updated":"2024-02-18T16:19:54.540Z","comments":true,"path":"2023/02/19/k8s/namespace/namespace/","link":"","permalink":"https://ckck803.github.io/2023/02/19/k8s/namespace/namespace/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s Namespace ë€? ì¿ ë²ˆë„¤í‹°ìŠ¤ Cluster ë“¤ì„ ë…¼ë¦¬ì ìœ¼ë¡œ ë‚˜ëˆ„ê¸° ìœ„í•œ ìˆ˜ë‹¨. Namespace ë¥¼ ì´ìš©í•˜ë©´ Pod, Service, Volumn ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ë¶„ë¦¬í•˜ê³  ê²©ë¦¬í•  ìˆ˜ ìˆë‹¤. Namespace ìƒì„±kubectl create namespace your-namespace-name apiVersion: v1kind: Namespacemetadata: name: [Namespace ì´ë¦„] kubectl apply -f namespace.yaml","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s Namespace ë€? ì¿ ë²ˆë„¤í‹°ìŠ¤ Cluster ë“¤ì„ ë…¼ë¦¬ì ìœ¼ë¡œ ë‚˜ëˆ„ê¸° ìœ„í•œ ìˆ˜ë‹¨. Namespace ë¥¼ ì´ìš©í•˜ë©´ Pod, Service, Volumn ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ë¶„ë¦¬í•˜ê³  ê²©ë¦¬í•  ìˆ˜ ìˆë‹¤. Namespace ìƒì„±kubectl create namespace your-namespace-name apiVersion: v1kind: Namespacemetadata: name: [Namespace ì´ë¦„] kubectl apply -f namespace.yaml í™œì„±í™” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë³€ê²½kubectl config set-context --current --namespace=&lt;insert-namespace-name-here&gt; Kubectxaliaskubectx &lt;alias&gt;=&lt;cluster ì´ë¦„&gt; Kubens","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"Istio - í† í´ë¡œì§€ ì¸ì§€ íŒíŠ¸","slug":"k8s/istio/istio-topology-aware-hints","date":"2023-02-18T21:31:46.000Z","updated":"2024-02-18T16:19:54.539Z","comments":true,"path":"2023/02/19/k8s/istio/istio-topology-aware-hints/","link":"","permalink":"https://ckck803.github.io/2023/02/19/k8s/istio/istio-topology-aware-hints/","excerpt":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress Post not found: k8s/deployment Post not found: k8s/replicaset Post not found: k8s/node Post not found: k8s/pod ì°¸ê³  https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/kubernetes-versions.html https://kubernetes.io/ko/docs/concepts/services-networking/topology-aware-hints/ https://tetrate.io/blog/minimizing-cross-zone-traffic-charges-with-istio/ ì¿ ë²„ë„¤í‹°ìŠ¤ Node Zone í™•ì¸kubectl get nodes -L topology.kubernetes.io/zone Istio ì— í† í´ë¡œì§€ ì¸ì§€ íŒíŠ¸ ì¶”ê°€apiVersion: v1kind: Servicemetadata: annotations: # topology-aware-hints ì¶”ê°€ service.kubernetes.io/topology-aware-hints: auto name: istiod namespace: istio-system","text":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress Post not found: k8s/deployment Post not found: k8s/replicaset Post not found: k8s/node Post not found: k8s/pod ì°¸ê³  https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/kubernetes-versions.html https://kubernetes.io/ko/docs/concepts/services-networking/topology-aware-hints/ https://tetrate.io/blog/minimizing-cross-zone-traffic-charges-with-istio/ ì¿ ë²„ë„¤í‹°ìŠ¤ Node Zone í™•ì¸kubectl get nodes -L topology.kubernetes.io/zone Istio ì— í† í´ë¡œì§€ ì¸ì§€ íŒíŠ¸ ì¶”ê°€apiVersion: v1kind: Servicemetadata: annotations: # topology-aware-hints ì¶”ê°€ service.kubernetes.io/topology-aware-hints: auto name: istiod namespace: istio-system","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"[ArgoCD] - Helm ì„ ì´ìš©í•´ AgroCD ì„¤ì¹˜í•˜ê¸°","slug":"devops/cicd/argocd/argocd-01-install","date":"2023-02-18T21:31:46.000Z","updated":"2025-03-29T03:37:09.156Z","comments":true,"path":"2023/02/19/devops/cicd/argocd/argocd-01-install/","link":"","permalink":"https://ckck803.github.io/2023/02/19/devops/cicd/argocd/argocd-01-install/","excerpt":"ì°¸ê³  https://argo-cd.readthedocs.io/en/stable/ Argo CLI ì„¤ì¹˜í•˜ê¸°brew install argocd Argo CLI ì ‘ì†argocd login &lt;argo server ê°€ ì„¤ì¹˜ëœ URL&gt; --username &lt;username&gt; --password &lt;password&gt; ë¹„ë°€ë²ˆí˜¸ ë³€ê²½argocd account update-password Kubernetes Cluster ì¶”ê°€","text":"ì°¸ê³  https://argo-cd.readthedocs.io/en/stable/ Argo CLI ì„¤ì¹˜í•˜ê¸°brew install argocd Argo CLI ì ‘ì†argocd login &lt;argo server ê°€ ì„¤ì¹˜ëœ URL&gt; --username &lt;username&gt; --password &lt;password&gt; ë¹„ë°€ë²ˆí˜¸ ë³€ê²½argocd account update-password Kubernetes Cluster ì¶”ê°€ Kubernetes ARN ëª… í™•ì¸ kubectl config get-contexts -o name arn ëª…ì„ ì´ìš©í•œ cluster ì¶”ê°€ argocd cluster add &lt;arn ëª…&gt;","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"}],"tags":[]},{"title":"AgroCD","slug":"devops/cicd/argocd/argocd","date":"2023-02-17T21:31:46.000Z","updated":"2025-03-29T03:37:35.326Z","comments":true,"path":"2023/02/18/devops/cicd/argocd/argocd/","link":"","permalink":"https://ckck803.github.io/2023/02/18/devops/cicd/argocd/argocd/","excerpt":"ê³µì‹ í™ˆí˜ì´ì§€ https://argo-cd.readthedocs.io/en/stable/ ArgoCD ë€?Argo CDëŠ” Kubernetes ë° OpenShiftë¥¼ìœ„í•œ ì„ ë„ì  ì¸ CI &#x2F; CD ë„êµ¬ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. Argo CDëŠ” GitOpsë¥¼ êµ¬í˜„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. GitOpsëŠ” í´ëŸ¬ìŠ¤í„° êµ¬ì„± ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ Gitì˜ Git ì €ì¥ì†Œë¥¼ ë‹¨ì¼ ì†ŒìŠ¤ ì§„ì‹¤ë¡œ ì‚¬ìš©í•˜ëŠ” ì ‘ê·¼ ë°©ì‹ì…ë‹ˆë‹¤. Argo CDëŠ” GitOpsë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ëŸ°íƒ€ì„ í™˜ê²½ì„ ì§€ì†ì ìœ¼ë¡œ ë™ê¸°í™”í•©ë‹ˆë‹¤. Git ì €ì¥ì†Œì˜ ì„¤ì • íŒŒì¼ì€ Kubernetes í´ëŸ¬ìŠ¤í„°ì—ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì œì–´í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Argo CDëŠ” Kubernetes YAML íŒŒì¼ì—ì„œ íŒŒì‹± ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°í¬ ë° ë¡¤ë°±ì„ ì œì–´í•©ë‹ˆë‹¤. Argo CDëŠ” ìƒˆë¡œìš´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ì„ ë°°í¬í•˜ê±°ë‚˜ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šì€ ë²„ì „ì„ ì‚­ì œí•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë˜í•œ ë¯¸ë¦¬ ì •ì˜ëœ íŠ¹ì • í–‰ë™ ë° ì´ë²¤íŠ¸ê°€ ë°œìƒ í•  ë•Œ ìë™ìœ¼ë¡œ ë°°í¬ë¥¼ íŠ¸ë¦¬ê±° í•  ìˆ˜ìˆëŠ” í›…ì„ ì œê³µí•©ë‹ˆë‹¤. Argo CDëŠ” ì‰½ê²Œ ì„¤ì •í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, CLIì™€ UI ëª¨ë‘ë¥¼ í†µí•´ ì‚¬ìš©ì ì¹œí™”ì  ì¸ ë°©ë²•ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°°í¬ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ Argo CDëŠ” Kubernetes ë° OpenShiftì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ë‹¨ìˆœí™”í•˜ê³  ìë™í™”í•˜ëŠ” ê°•ë ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤.","text":"ê³µì‹ í™ˆí˜ì´ì§€ https://argo-cd.readthedocs.io/en/stable/ ArgoCD ë€?Argo CDëŠ” Kubernetes ë° OpenShiftë¥¼ìœ„í•œ ì„ ë„ì  ì¸ CI &#x2F; CD ë„êµ¬ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. Argo CDëŠ” GitOpsë¥¼ êµ¬í˜„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. GitOpsëŠ” í´ëŸ¬ìŠ¤í„° êµ¬ì„± ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ Gitì˜ Git ì €ì¥ì†Œë¥¼ ë‹¨ì¼ ì†ŒìŠ¤ ì§„ì‹¤ë¡œ ì‚¬ìš©í•˜ëŠ” ì ‘ê·¼ ë°©ì‹ì…ë‹ˆë‹¤. Argo CDëŠ” GitOpsë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ëŸ°íƒ€ì„ í™˜ê²½ì„ ì§€ì†ì ìœ¼ë¡œ ë™ê¸°í™”í•©ë‹ˆë‹¤. Git ì €ì¥ì†Œì˜ ì„¤ì • íŒŒì¼ì€ Kubernetes í´ëŸ¬ìŠ¤í„°ì—ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì œì–´í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Argo CDëŠ” Kubernetes YAML íŒŒì¼ì—ì„œ íŒŒì‹± ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°í¬ ë° ë¡¤ë°±ì„ ì œì–´í•©ë‹ˆë‹¤. Argo CDëŠ” ìƒˆë¡œìš´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ì„ ë°°í¬í•˜ê±°ë‚˜ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šì€ ë²„ì „ì„ ì‚­ì œí•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë˜í•œ ë¯¸ë¦¬ ì •ì˜ëœ íŠ¹ì • í–‰ë™ ë° ì´ë²¤íŠ¸ê°€ ë°œìƒ í•  ë•Œ ìë™ìœ¼ë¡œ ë°°í¬ë¥¼ íŠ¸ë¦¬ê±° í•  ìˆ˜ìˆëŠ” í›…ì„ ì œê³µí•©ë‹ˆë‹¤. Argo CDëŠ” ì‰½ê²Œ ì„¤ì •í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, CLIì™€ UI ëª¨ë‘ë¥¼ í†µí•´ ì‚¬ìš©ì ì¹œí™”ì  ì¸ ë°©ë²•ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°°í¬ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ Argo CDëŠ” Kubernetes ë° OpenShiftì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ë‹¨ìˆœí™”í•˜ê³  ìë™í™”í•˜ëŠ” ê°•ë ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤.","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress","slug":"k8s/ingress/ingress","date":"2023-02-11T21:31:46.000Z","updated":"2024-02-18T16:19:54.537Z","comments":true,"path":"2023/02/12/k8s/ingress/ingress/","link":"","permalink":"https://ckck803.github.io/2023/02/12/k8s/ingress/ingress/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s Ingress","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s Ingress","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"[Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸°","slug":"devops/cicd/jenkins/helm/helm-jenkins-04-jenkinsfile","date":"2023-02-11T21:31:46.000Z","updated":"2025-03-29T04:27:30.806Z","comments":true,"path":"2023/02/12/devops/cicd/jenkins/helm/helm-jenkins-04-jenkinsfile/","link":"","permalink":"https://ckck803.github.io/2023/02/12/devops/cicd/jenkins/helm/helm-jenkins-04-jenkinsfile/","excerpt":"ëª©ì°¨ [Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸° [Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸° [Jenkins] - Agent ì¶”ê°€í•˜ê¸° [Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸° Jenkins ë€ì°¸ê³  https://www.jenkins.io/doc/pipeline/steps/docker-workflow/ https://tech.osci.kr/2020/01/21/kubernetes%EC%83%81%EC%9D%98-jenkins-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EC%9E%91%EC%84%B1%EB%B0%A9%EB%B2%95/ https://www.codurance.com/publications/2019/05/30/accessing-and-dumping-jenkins-credentials https://www.jenkins.io/doc/pipeline/steps/credentials-binding/ https://www.jenkins.io/doc/pipeline/steps/pipeline-aws/ https://awstip.com/deploying-a-spring-boot-application-on-aws-eks-using-jenkins-cicd-a-step-by-step-guide-8e684f488ffc Erorr : You must be logged in to the server (Unauthorized) https://aws.amazon.com/ko/premiumsupport/knowledge-center/eks-api-server-unauthorized-error/ Evn Variable https://www.jenkins.io/doc/book/pipeline/jenkinsfile/#using-environment-variables Agent ì¶”ê°€additionalAgents: maven: podName: maven customJenkinsLabels: maven image: jenkins/jnlp-agent-maven tag: jdk11 node: podName: node customJenkinsLabels: maven image: jenkins/jnlp-agent-node tag: latest","text":"ëª©ì°¨ [Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸° [Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸° [Jenkins] - Agent ì¶”ê°€í•˜ê¸° [Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸° Jenkins ë€ì°¸ê³  https://www.jenkins.io/doc/pipeline/steps/docker-workflow/ https://tech.osci.kr/2020/01/21/kubernetes%EC%83%81%EC%9D%98-jenkins-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EC%9E%91%EC%84%B1%EB%B0%A9%EB%B2%95/ https://www.codurance.com/publications/2019/05/30/accessing-and-dumping-jenkins-credentials https://www.jenkins.io/doc/pipeline/steps/credentials-binding/ https://www.jenkins.io/doc/pipeline/steps/pipeline-aws/ https://awstip.com/deploying-a-spring-boot-application-on-aws-eks-using-jenkins-cicd-a-step-by-step-guide-8e684f488ffc Erorr : You must be logged in to the server (Unauthorized) https://aws.amazon.com/ko/premiumsupport/knowledge-center/eks-api-server-unauthorized-error/ Evn Variable https://www.jenkins.io/doc/book/pipeline/jenkinsfile/#using-environment-variables Agent ì¶”ê°€additionalAgents: maven: podName: maven customJenkinsLabels: maven image: jenkins/jnlp-agent-maven tag: jdk11 node: podName: node customJenkinsLabels: maven image: jenkins/jnlp-agent-node tag: latest Erorr : You must be logged in to the server (Unauthorized)","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"},{"name":"Jenkins","slug":"DevOps/CICD/Jenkins","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Jenkins/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Service","slug":"k8s/service/service","date":"2023-02-10T21:31:46.000Z","updated":"2024-02-18T16:19:54.542Z","comments":true,"path":"2023/02/11/k8s/service/service/","link":"","permalink":"https://ckck803.github.io/2023/02/11/k8s/service/service/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s ì°¸ê³  ê³µì‹ ë¬¸ì„œ https://kubernetes.io/docs/concepts/services-networking/service/ Service Service ëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ ì‘ë™í•˜ëŠ” Pod ë“¤ì„ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¡œ ë‹¨ì¼í™” í•´ ë„¤íŠ¸ì›Œí¬ì— ë…¸ì¶œ ì‹œí‚¤ëŠ” Resource Service ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ë‚´ ì—¬ëŸ¬ê°œì˜ Pod ë“¤ì´ ì‘ë™í•˜ì§€ë§Œ, í•˜ë‚˜ì˜ ê·¸ë£¹ìœ¼ë¡œ ë‹¨ì¼í™” í•´ ë„¤íŠ¸ì›Œí¬ë¡œ ë…¸ì¶œí•˜ê¸° ë•Œë¬¸ì— ë§ˆì¹˜ í•˜ë‚˜ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‘ë™í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ì¶”ìƒí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë•ë¶„ì— ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ íŒŒë“œë¥¼ ì§ì ‘ ì§€ì •í•˜ì§€ ì•Šê³  ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ íŒŒë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, Service ëŠ” ë™ì¼í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì—¬ëŸ¬ Pod ì— ëŒ€í•œ ë¡œë“œ ë°¸ëŸ°ì‹± ë„ ì œê³µí•©ë‹ˆë‹¤. ê¸°ì¡´ì— ì„œë¡œ ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ Pod ë“¤ë¼ë¦¬ í†µì‹ í•˜ëŠ” ë°©ì‹ì—ì„œ Service ë¼ëŠ” ë‹¨ìœ„ë¥¼ í†µí•´ í†µì‹ í•˜ëŠ” í˜•íƒœë¡œ ë³€ê²½ì´ ëìŠµë‹ˆë‹¤. ë•ë¶„ì— ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” Pod ì˜ IP ì£¼ì†Œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìœ¼ë©°, ì—¬ëŸ¬ê°œì˜ Pod ë¥¼ ë°”ë¼ë³´ê¸° ë•Œë¬¸ì— Pod ì— ëŒ€í•œ ë¡œë“œë°¸ëŸ°ì„œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ, DNS ë¥¼ ì‚¬ìš©í•´ Service ì´ë¦„ì„ ë“±ë¡í•¨ìœ¼ë¡œì¨ Service ì´ë¦„ìœ¼ë¡œ í†µì‹ í•  ìˆ˜ ìˆê²Œ ì§€ì›í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s ì°¸ê³  ê³µì‹ ë¬¸ì„œ https://kubernetes.io/docs/concepts/services-networking/service/ Service Service ëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ ì‘ë™í•˜ëŠ” Pod ë“¤ì„ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¡œ ë‹¨ì¼í™” í•´ ë„¤íŠ¸ì›Œí¬ì— ë…¸ì¶œ ì‹œí‚¤ëŠ” Resource Service ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ë‚´ ì—¬ëŸ¬ê°œì˜ Pod ë“¤ì´ ì‘ë™í•˜ì§€ë§Œ, í•˜ë‚˜ì˜ ê·¸ë£¹ìœ¼ë¡œ ë‹¨ì¼í™” í•´ ë„¤íŠ¸ì›Œí¬ë¡œ ë…¸ì¶œí•˜ê¸° ë•Œë¬¸ì— ë§ˆì¹˜ í•˜ë‚˜ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‘ë™í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ì¶”ìƒí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë•ë¶„ì— ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ íŒŒë“œë¥¼ ì§ì ‘ ì§€ì •í•˜ì§€ ì•Šê³  ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ íŒŒë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, Service ëŠ” ë™ì¼í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì—¬ëŸ¬ Pod ì— ëŒ€í•œ ë¡œë“œ ë°¸ëŸ°ì‹± ë„ ì œê³µí•©ë‹ˆë‹¤. ê¸°ì¡´ì— ì„œë¡œ ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ Pod ë“¤ë¼ë¦¬ í†µì‹ í•˜ëŠ” ë°©ì‹ì—ì„œ Service ë¼ëŠ” ë‹¨ìœ„ë¥¼ í†µí•´ í†µì‹ í•˜ëŠ” í˜•íƒœë¡œ ë³€ê²½ì´ ëìŠµë‹ˆë‹¤. ë•ë¶„ì— ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” Pod ì˜ IP ì£¼ì†Œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìœ¼ë©°, ì—¬ëŸ¬ê°œì˜ Pod ë¥¼ ë°”ë¼ë³´ê¸° ë•Œë¬¸ì— Pod ì— ëŒ€í•œ ë¡œë“œë°¸ëŸ°ì„œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ, DNS ë¥¼ ì‚¬ìš©í•´ Service ì´ë¦„ì„ ë“±ë¡í•¨ìœ¼ë¡œì¨ Service ì´ë¦„ìœ¼ë¡œ í†µì‹ í•  ìˆ˜ ìˆê²Œ ì§€ì›í•©ë‹ˆë‹¤. apiVersion: apps/v1kind: Deploymentmetadata: name: redisspec: selector: matchLabels: app: counter tier: db template: metadata: labels: app: counter tier: db spec: containers: - name: redis image: redis ports: - containerPort: 6379 protocol: TCP---apiVersion: v1kind: Servicemetadata: name: redisspec: ports: - port: 6379 protocol: TCP selector: app: counter tier: db kubectl apply -f counter-redis-svc.yml Service ìƒì„± íë¦„ API Server ë¥¼ ì´ìš©í•´ Service ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. EndPoint Controller ëŠ” Service ì™€ Pod ë¥¼ ê°ì‹œí•˜ë©´ì„œ ì¡°ê±´ì— ë§ëŠ” Pod ì˜ IP ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤. EndPoint Controller ê°€ ìˆ˜ì§‘í•œ IPë¥¼ ê°€ì§€ê³  EndPoint ìƒì„± Kube-Proxy ëŠ” EndPoint ë³€í™”ë¥¼ ê°ì‹œí•˜ê³  ë…¸ë“œì˜ iptables ì„ ì„¤ì •í•©ë‹ˆë‹¤. CoreDNS ëŠ” Service ë¥¼ ê°ì‹œí•˜ê³  Service ì´ë¦„ê³¼ IP ë¥¼ CoreDNS ì— ì¶”ê°€ Service - ClusterIP ClusterIP ëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë©°, í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ í†µì‹  ì„ ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤. ClusterIP ëŠ” ë³„ë„ì˜ ì„¤ì • ì—†ì´ Service ë¥¼ ìƒì„±í•˜ë©´ ë§Œë“¤ì–´ì§€ëŠ” Serivce ìœ í˜•ì˜ ê¸°ë³¸ê°’ì´ë©° Service ì— í• ë‹¹ë˜ëŠ” IP ì£¼ì†Œ ì…ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œëŠ” ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥ í•˜ë©° í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ í†µì‹ ì„ ìœ„í•´ì„œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ë‹¤ë¥¸ íŒŒë“œë‚˜ ì„œë¹„ìŠ¤ì—ì„œ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ ClusterIP ë¥¼ ì‚¬ìš©í•˜ì—¬ í†µì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEservice/kubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 32sservice/redis ClusterIP 10.109.247.112 &lt;none&gt; 6379/TCP 5s ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Cluster IP ë¡œ ì •ì˜ëœ ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•˜ê³  ì‹¶ì„ ê²½ìš° port-forward ë¥¼ ì´ìš©í•˜ë©´ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. kubectl port-forward svc/redis 6379 Service - NodePortCluterIPëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ì—ì„œ ì ‘ê·¼í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ NodePort ë¥¼ ì œê³µí•˜ëŠ”ë°, í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë…¸ë“œì— ì§€ì •ëœ Port ë¥¼ spec.type: NodePort ì˜µì…˜ì„ í†µí•´ Service ë¥¼ NodePort íƒ€ì…ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. spec.ports.nodePort ì˜µì…˜ì„ í†µí•´ ë…¸ë“œì— ì˜¤í”ˆí•  Port ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. apiVersion: v1kind: Servicemetadata: name: counter-npspec: type: NodePort ports: - port: 3000 protocol: TCP nodePort: 31000 selector: app: counter tier: app NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEcounter-np NodePort 10.109.112.196 &lt;none&gt; 3000:31000/TCP 5skubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 6h9mredis ClusterIP 10.109.247.112 &lt;none&gt; 6379/TCP 6h9m minikube service counter-np Service - LoadBalancerNodePort ì˜ ë‹¨ì ì€ ë…¸ë“œê°€ ì‚¬ë¼ì¡Œì„ ë•Œ ìë™ìœ¼ë¡œ ë‹¤ë¥¸ ë…¸ë“œë¥¼ í†µí•´ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 3ê°œì˜ ë…¸ë“œê°€ ìˆë‹¤ë©´ 3ê°œ ì¤‘ì— ì•„ë¬´ ë…¸ë“œë¡œ ì ‘ê·¼í•´ë„ NodePortë¡œ ì—°ê²°í•  ìˆ˜ ìˆì§€ë§Œ ì–´ë–¤ ë…¸ë“œê°€ ì‚´ì•„ ìˆëŠ”ì§€ëŠ” ì•Œ ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤. apiVersion: v1kind: Servicemetadata: name: counter-lbspec: type: LoadBalancer ports: - port: 30000 targetPort: 3000 protocol: TCP selector: app: counter tier: app NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEcounter-lb LoadBalancer 10.97.105.155 192.168.49.2 30000:30810/TCP 7h51mcounter-np NodePort 10.109.112.196 &lt;none&gt; 3000:31000/TCP 8hkubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 15hredis ClusterIP 10.109.247.112 &lt;none&gt; 6379/TCP 15h Minikubeì— ê°€ìƒ LoadBalancer ë§Œë“¤ê¸° minikube addons enable metallb minikube addons configure metallb -- Enter Load Balancer Start IP: 192.168.49.2-- Enter Load Balancer End IP: 192.168.49.2 â–ª Using image quay.io/metallb/controller:v0.9.6 â–ª Using image quay.io/metallb/speaker:v0.9.6âœ… metallb ì´ ì„±ê³µì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"ì„œë¹„ìŠ¤","slug":"Kubernetes/ì„œë¹„ìŠ¤","permalink":"https://ckck803.github.io/categories/Kubernetes/%EC%84%9C%EB%B9%84%EC%8A%A4/"}],"tags":[]},{"title":"[Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸°","slug":"devops/cicd/jenkins/helm/helm-jenkins-03-gitea","date":"2023-02-10T21:31:46.000Z","updated":"2025-03-29T04:27:26.907Z","comments":true,"path":"2023/02/11/devops/cicd/jenkins/helm/helm-jenkins-03-gitea/","link":"","permalink":"https://ckck803.github.io/2023/02/11/devops/cicd/jenkins/helm/helm-jenkins-03-gitea/","excerpt":"ëª©ì°¨ [Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸° [Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸° [Jenkins] - Agent ì¶”ê°€í•˜ê¸° [Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸° Jenkins ë€Erorr : You must be logged in to the server (Unauthorized)ì°¸ê³  https://code00.tistory.com/123 https://hub.docker.com/r/jenkins/inbound-agent https://github.com/jforge/docker-jenkins-inbound-agent https://www.jenkins.io/doc/pipeline/steps/docker-workflow/ https://tech.osci.kr/2020/01/21/kubernetes%EC%83%81%EC%9D%98-jenkins-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EC%9E%91%EC%84%B1%EB%B0%A9%EB%B2%95/ https://www.codurance.com/publications/2019/05/30/accessing-and-dumping-jenkins-credentials https://www.jenkins.io/doc/pipeline/steps/credentials-binding/ https://www.jenkins.io/doc/pipeline/steps/pipeline-aws/ https://awstip.com/deploying-a-spring-boot-application-on-aws-eks-using-jenkins-cicd-a-step-by-step-guide-8e684f488ffc Erorr : You must be logged in to the server (Unauthorized) https://aws.amazon.com/ko/premiumsupport/knowledge-center/eks-api-server-unauthorized-error/ Timezone ë³€ê²½controller: javaOpts: &quot;-Dorg.apache.commons.jelly.tags.fmt.timeZone=Asia/Seoul&quot;","text":"ëª©ì°¨ [Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸° [Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸° [Jenkins] - Agent ì¶”ê°€í•˜ê¸° [Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸° Jenkins ë€Erorr : You must be logged in to the server (Unauthorized)ì°¸ê³  https://code00.tistory.com/123 https://hub.docker.com/r/jenkins/inbound-agent https://github.com/jforge/docker-jenkins-inbound-agent https://www.jenkins.io/doc/pipeline/steps/docker-workflow/ https://tech.osci.kr/2020/01/21/kubernetes%EC%83%81%EC%9D%98-jenkins-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EC%9E%91%EC%84%B1%EB%B0%A9%EB%B2%95/ https://www.codurance.com/publications/2019/05/30/accessing-and-dumping-jenkins-credentials https://www.jenkins.io/doc/pipeline/steps/credentials-binding/ https://www.jenkins.io/doc/pipeline/steps/pipeline-aws/ https://awstip.com/deploying-a-spring-boot-application-on-aws-eks-using-jenkins-cicd-a-step-by-step-guide-8e684f488ffc Erorr : You must be logged in to the server (Unauthorized) https://aws.amazon.com/ko/premiumsupport/knowledge-center/eks-api-server-unauthorized-error/ Timezone ë³€ê²½controller: javaOpts: &quot;-Dorg.apache.commons.jelly.tags.fmt.timeZone=Asia/Seoul&quot;","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"},{"name":"Jenkins","slug":"DevOps/CICD/Jenkins","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Jenkins/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Deployment","slug":"k8s/pod/deployment","date":"2023-02-10T06:31:46.000Z","updated":"2024-02-18T16:19:54.541Z","comments":true,"path":"2023/02/10/k8s/pod/deployment/","link":"","permalink":"https://ckck803.github.io/2023/02/10/k8s/pod/deployment/","excerpt":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress ì¿ ë²„ë„¤í‹°ìŠ¤ - Deployment Post not found: k8s/pod/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Deployment ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ì—¬ëŸ¬ ë…¸ë“œì— ìë™ìœ¼ë¡œ ë°°í¬ ë° ë¡¤ë°± í•  ìˆ˜ ìˆëŠ” ë¦¬ì†ŒìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ë°°í¬í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í•­í•œë‹¤. Pod ë¥¼ ê°œì²´ë¥¼ ê´€ë¦¬í•œë‹¤. Deployment ë¥¼ ì´ìš©í•´ Pod ë¥¼ ìƒì„±í•˜ê³  í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œì— ë°°í¬í•  ìˆ˜ ìˆë‹¤. Deployment ë¥¼ í†µí•´ Application ì˜ ìƒˆë¡œìš´ ë²„ì „ì„ ë°°í¬í•˜ê±°ë‚˜ ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±í•  ìˆ˜ ìˆë‹¤. Deployment ë¥¼ ìƒì„±í•˜ë©´ Deployment ì— í•´ë‹¹í•˜ëŠ” ReplicaSet ë„ í•¨ê»˜ ìƒì„±ëœë‹¤. Deployment ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœ, ë ˆí”Œë¦¬ì¹´ ìˆ˜, ë¡¤ë§ ì—…ë°ì´íŠ¸, ë¡¤ë°± ë“±ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ê°œì˜ Pod ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ Deploymentì˜ ì£¼ìš” ëª©ì ì…ë‹ˆë‹¤. PodëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ë‹¨ìœ„ì´ë©°, DeploymentëŠ” ì´ëŸ¬í•œ Pod ì¸ìŠ¤í„´ìŠ¤ë“¤ì„ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤. DeploymentëŠ” Podì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  í•„ìš”ì— ë”°ë¼ ìƒˆë¡œìš´ Podë¥¼ ìƒì„±í•˜ê±°ë‚˜ ì¢…ë£Œí•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì›í•˜ëŠ” ìƒíƒœë¡œ ìœ ì§€í•©ë‹ˆë‹¤. DeploymentëŠ” ë¡¤ë§ ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë„ ì œê³µí•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ë²„ì „ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ë©´ DeploymentëŠ” ì ì§„ì ìœ¼ë¡œ Podë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  ì´ì „ ë²„ì „ê³¼ ìƒˆ ë²„ì „ì„ ë™ì‹œì— ì‹¤í–‰í•˜ë©´ì„œ ì„œë¹„ìŠ¤ì˜ ê°€ìš©ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤. ë¡¤ë§ ì—…ë°ì´íŠ¸ ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë¡¤ë°±í•˜ì—¬ ì´ì „ ë²„ì „ìœ¼ë¡œ ë˜ëŒë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. Deployment ë¦¬ì†ŒìŠ¤ëŠ” YAML ë˜ëŠ” JSON í˜•ì‹ìœ¼ë¡œ ì •ì˜ë˜ë©°, ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬ë˜ì–´ ê´€ë¦¬ë©ë‹ˆë‹¤. Deploymentë¥¼ ìƒì„±í•˜ë©´ í•´ë‹¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë ˆí”Œë¦¬ì¹´ì…‹(ReplicaSet)ê³¼ í•¨ê»˜ ìƒì„±ë©ë‹ˆë‹¤. ReplicaSetì€ Pod ì¸ìŠ¤í„´ìŠ¤ì˜ ìˆ˜ë¥¼ ì§€ì •í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•˜ë©°, DeploymentëŠ” ReplicaSetì„ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ ë¡¤ë°±í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress ì¿ ë²„ë„¤í‹°ìŠ¤ - Deployment Post not found: k8s/pod/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Deployment ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ì—¬ëŸ¬ ë…¸ë“œì— ìë™ìœ¼ë¡œ ë°°í¬ ë° ë¡¤ë°± í•  ìˆ˜ ìˆëŠ” ë¦¬ì†ŒìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ë°°í¬í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í•­í•œë‹¤. Pod ë¥¼ ê°œì²´ë¥¼ ê´€ë¦¬í•œë‹¤. Deployment ë¥¼ ì´ìš©í•´ Pod ë¥¼ ìƒì„±í•˜ê³  í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œì— ë°°í¬í•  ìˆ˜ ìˆë‹¤. Deployment ë¥¼ í†µí•´ Application ì˜ ìƒˆë¡œìš´ ë²„ì „ì„ ë°°í¬í•˜ê±°ë‚˜ ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±í•  ìˆ˜ ìˆë‹¤. Deployment ë¥¼ ìƒì„±í•˜ë©´ Deployment ì— í•´ë‹¹í•˜ëŠ” ReplicaSet ë„ í•¨ê»˜ ìƒì„±ëœë‹¤. Deployment ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœ, ë ˆí”Œë¦¬ì¹´ ìˆ˜, ë¡¤ë§ ì—…ë°ì´íŠ¸, ë¡¤ë°± ë“±ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ê°œì˜ Pod ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ Deploymentì˜ ì£¼ìš” ëª©ì ì…ë‹ˆë‹¤. PodëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ë‹¨ìœ„ì´ë©°, DeploymentëŠ” ì´ëŸ¬í•œ Pod ì¸ìŠ¤í„´ìŠ¤ë“¤ì„ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤. DeploymentëŠ” Podì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  í•„ìš”ì— ë”°ë¼ ìƒˆë¡œìš´ Podë¥¼ ìƒì„±í•˜ê±°ë‚˜ ì¢…ë£Œí•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì›í•˜ëŠ” ìƒíƒœë¡œ ìœ ì§€í•©ë‹ˆë‹¤. DeploymentëŠ” ë¡¤ë§ ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë„ ì œê³µí•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ë²„ì „ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ë©´ DeploymentëŠ” ì ì§„ì ìœ¼ë¡œ Podë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  ì´ì „ ë²„ì „ê³¼ ìƒˆ ë²„ì „ì„ ë™ì‹œì— ì‹¤í–‰í•˜ë©´ì„œ ì„œë¹„ìŠ¤ì˜ ê°€ìš©ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤. ë¡¤ë§ ì—…ë°ì´íŠ¸ ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë¡¤ë°±í•˜ì—¬ ì´ì „ ë²„ì „ìœ¼ë¡œ ë˜ëŒë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. Deployment ë¦¬ì†ŒìŠ¤ëŠ” YAML ë˜ëŠ” JSON í˜•ì‹ìœ¼ë¡œ ì •ì˜ë˜ë©°, ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬ë˜ì–´ ê´€ë¦¬ë©ë‹ˆë‹¤. Deploymentë¥¼ ìƒì„±í•˜ë©´ í•´ë‹¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë ˆí”Œë¦¬ì¹´ì…‹(ReplicaSet)ê³¼ í•¨ê»˜ ìƒì„±ë©ë‹ˆë‹¤. ReplicaSetì€ Pod ì¸ìŠ¤í„´ìŠ¤ì˜ ìˆ˜ë¥¼ ì§€ì •í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•˜ë©°, DeploymentëŠ” ReplicaSetì„ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ ë¡¤ë°±í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ DeploymentëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°°í¬ì™€ ê´€ë¦¬ë¥¼ íš¨ìœ¨ì ì´ê³  ì•ˆì •ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ì¤‘ìš”í•œ ë¦¬ì†ŒìŠ¤ì…ë‹ˆë‹¤. Deployment ë§Œë“¤ê¸° kind Deployment apiVersion: apps/v1kind: Deploymentmetadata: name: echo-deployspec: replicas: 4 selector: matchLabels: app: echo tier: app template: metadata: labels: app: echo tier: app spec: containers: - name: echo image: ghcr.io/subicura/echo:v1 Deployment ì ìš©ì´ë¯¸ì§€ë¥¼ ë³€ê²½í•œë‹¤. spec: containers: - name: echo image: ghcr.io/subicura/echo:v2 kubectl apply -f [deployment íŒŒì¼ëª…] Deployment Update Revision - ë¡¤ë°± Revision ë²„ì „ í™•ì¸ kubectl rollout history deployment [Deployment ì´ë¦„] Rollback kubectl rollout undo deployment [Deployment ì´ë¦„] --to-revision=[ë¡¤ë°±í•  Revision ë²„ì „]","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"ì›Œí¬ë¡œë“œ","slug":"Kubernetes/ì›Œí¬ë¡œë“œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - StatefulSet","slug":"k8s/pod/StatefulSet","date":"2023-02-10T02:31:46.000Z","updated":"2024-02-18T16:19:54.541Z","comments":true,"path":"2023/02/10/k8s/pod/StatefulSet/","link":"","permalink":"https://ckck803.github.io/2023/02/10/k8s/pod/StatefulSet/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - HPA (Horizontal Pod Autoscaler) ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s StatefulSetì¿ ë²„ë„¤í‹°ìŠ¤(StatefulSet)ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ìƒíƒœê°€ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì¸ ë°ì´í„°ë² ì´ìŠ¤, ë©”ì‹œì§€ í ë˜ëŠ” íŒŒì¼ ì‹œìŠ¤í…œê³¼ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ìœ ìš©í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì¼ë°˜ì ì¸ ë°°í¬ ìœ í˜•ì¸ DeploymentëŠ” ìƒíƒœë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì í•©í•˜ì§€ë§Œ, StatefulSetì€ ìƒíƒœë¥¼ ìœ ì§€í•´ì•¼í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ê° StatefulSet íŒŸì€ ê³ ìœ í•œ ë„¤íŠ¸ì›Œí¬ ì‹ë³„ìì™€ ì§€ì†ì ì¸ ë°ì´í„° ì €ì¥ì„ ìœ„í•œ ë³„ë„ì˜ ë³¼ë¥¨ì„ ê°–ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê³ ìœ ì„±ì€ íŒŸì´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ìƒì„±, ì—…ë°ì´íŠ¸ ë° ì‚­ì œë  ë•Œ ìœ ì§€ë©ë‹ˆë‹¤. StatefulSetì€ ì¼ë ¨ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì •ì˜í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ê° ì¸ìŠ¤í„´ìŠ¤ëŠ” ìˆœì°¨ì ì¸ ì¸ë±ìŠ¤ë¡œ ì‹ë³„ë˜ë©°, ì •ì˜ëœ ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ì— ë”°ë¼ ìë™ìœ¼ë¡œ ìƒì„± ë° ê´€ë¦¬ë©ë‹ˆë‹¤. ë˜í•œ StatefulSetì€ ì¸ìŠ¤í„´ìŠ¤ ê°„ì— ìˆœì°¨ì ìœ¼ë¡œ ì‹œì‘ë˜ê³  ì¢…ë£Œë˜ëŠ” ìˆœì„œ ë³´ì¦ì„ ì œê³µí•©ë‹ˆë‹¤. StatefulSetì„ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ë©´ ê° ì¸ìŠ¤í„´ìŠ¤ì— ê³ ìœ í•œ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì´ ë¶€ì—¬ë˜ê³ , ì´ë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì„±ì€ ë°ì´í„°ë² ì´ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ë§ˆìŠ¤í„°-ìŠ¬ë ˆì´ë¸Œ ì„¤ì •ê³¼ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¤‘ìš”í•©ë‹ˆë‹¤. StatefulSetì€ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ì•ˆì •ì„±ê³¼ ì‹ ë¢°ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, StatefulSetì€ íŒŸì´ ì‹¤íŒ¨í•œ ê²½ìš° ìë™ìœ¼ë¡œ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹œì‘í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°€ìš©ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤. ë˜í•œ ì—…ê·¸ë ˆì´ë“œ ë° ë¡¤ë°±ê³¼ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ ê´€ë¦¬ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ì•½í•˜ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ StatefulSetì€ ìƒíƒœê°€ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, ê° ì¸ìŠ¤í„´ìŠ¤ì—ëŠ” ê³ ìœ í•œ ì‹ë³„ìì™€ ë³„ë„ì˜ ë³¼ë¥¨ì´ ì œê³µë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìˆœì°¨ì ","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - HPA (Horizontal Pod Autoscaler) ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s StatefulSetì¿ ë²„ë„¤í‹°ìŠ¤(StatefulSet)ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ìƒíƒœê°€ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì¸ ë°ì´í„°ë² ì´ìŠ¤, ë©”ì‹œì§€ í ë˜ëŠ” íŒŒì¼ ì‹œìŠ¤í…œê³¼ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ìœ ìš©í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì¼ë°˜ì ì¸ ë°°í¬ ìœ í˜•ì¸ DeploymentëŠ” ìƒíƒœë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì í•©í•˜ì§€ë§Œ, StatefulSetì€ ìƒíƒœë¥¼ ìœ ì§€í•´ì•¼í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ê° StatefulSet íŒŸì€ ê³ ìœ í•œ ë„¤íŠ¸ì›Œí¬ ì‹ë³„ìì™€ ì§€ì†ì ì¸ ë°ì´í„° ì €ì¥ì„ ìœ„í•œ ë³„ë„ì˜ ë³¼ë¥¨ì„ ê°–ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê³ ìœ ì„±ì€ íŒŸì´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ìƒì„±, ì—…ë°ì´íŠ¸ ë° ì‚­ì œë  ë•Œ ìœ ì§€ë©ë‹ˆë‹¤. StatefulSetì€ ì¼ë ¨ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì •ì˜í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ê° ì¸ìŠ¤í„´ìŠ¤ëŠ” ìˆœì°¨ì ì¸ ì¸ë±ìŠ¤ë¡œ ì‹ë³„ë˜ë©°, ì •ì˜ëœ ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ì— ë”°ë¼ ìë™ìœ¼ë¡œ ìƒì„± ë° ê´€ë¦¬ë©ë‹ˆë‹¤. ë˜í•œ StatefulSetì€ ì¸ìŠ¤í„´ìŠ¤ ê°„ì— ìˆœì°¨ì ìœ¼ë¡œ ì‹œì‘ë˜ê³  ì¢…ë£Œë˜ëŠ” ìˆœì„œ ë³´ì¦ì„ ì œê³µí•©ë‹ˆë‹¤. StatefulSetì„ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ë©´ ê° ì¸ìŠ¤í„´ìŠ¤ì— ê³ ìœ í•œ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì´ ë¶€ì—¬ë˜ê³ , ì´ë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì„±ì€ ë°ì´í„°ë² ì´ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ë§ˆìŠ¤í„°-ìŠ¬ë ˆì´ë¸Œ ì„¤ì •ê³¼ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¤‘ìš”í•©ë‹ˆë‹¤. StatefulSetì€ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ì•ˆì •ì„±ê³¼ ì‹ ë¢°ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, StatefulSetì€ íŒŸì´ ì‹¤íŒ¨í•œ ê²½ìš° ìë™ìœ¼ë¡œ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹œì‘í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°€ìš©ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤. ë˜í•œ ì—…ê·¸ë ˆì´ë“œ ë° ë¡¤ë°±ê³¼ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ ê´€ë¦¬ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ì•½í•˜ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ StatefulSetì€ ìƒíƒœê°€ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, ê° ì¸ìŠ¤í„´ìŠ¤ì—ëŠ” ê³ ìœ í•œ ì‹ë³„ìì™€ ë³„ë„ì˜ ë³¼ë¥¨ì´ ì œê³µë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìˆœì°¨ì  StatefulSet vs deploymentStatefulSetê³¼ DeploymentëŠ” Kubernetesì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë¦¬ì†ŒìŠ¤ ìœ í˜•ì…ë‹ˆë‹¤. ì´ë“¤ ê°„ì—ëŠ” ëª‡ ê°€ì§€ ì¤‘ìš”í•œ ì°¨ì´ì ì´ ìˆìŠµë‹ˆë‹¤: íŒŒë“œ ì‹ë³„ê³¼ ìˆœì„œ: Deployment: DeploymentëŠ” íŒŒë“œë¥¼ ìˆ˜í‰ì ìœ¼ë¡œ í™•ì¥í•˜ê³ , íŒŒë“œì˜ ìˆ˜ëª… ì£¼ê¸°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. íŒŒë“œì—ëŠ” ê³ ìœ í•œ ì‹ë³„ìê°€ ì—†ìœ¼ë©°, ì¼ë°˜ì ìœ¼ë¡œ ë¬´ì‘ìœ„ë¡œ ìƒì„±ë˜ê³  êµì²´ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. StatefulSet: StatefulSetì€ ê³ ìœ í•œ ì‹ë³„ìë¥¼ ê°€ì§„ ìˆœì°¨ì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤í™”ë˜ëŠ” íŒŒë“œë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ê° íŒŒë“œëŠ” ì§€ì†ì ìœ¼ë¡œ ìœ ì§€ë˜ë©°, ì¼ê´€ëœ ì´ë¦„ì„ ê°€ì§€ê³  ìˆì–´ ë„¤íŠ¸ì›Œí¬ ì‹ë³„ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí‚¹ê³¼ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬: Deployment: Deploymentì˜ íŒŒë“œëŠ” ë¬´ì‘ìœ„ë¡œ ìƒì„±ë˜ë©°, ê° íŒŒë“œëŠ” ì„ì˜ì˜ ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œë¥¼ ê°€ì§‘ë‹ˆë‹¤. ì´ëŠ” ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì— ìœ ë¦¬í•©ë‹ˆë‹¤. StatefulSet: StatefulSetì˜ íŒŒë“œëŠ” ê³ ìœ í•œ ìˆœì„œë¥¼ ê°€ì§€ê³  ìƒì„±ë˜ë©°, ê° íŒŒë“œëŠ” ì¼ê´€ëœ ì´ë¦„ê³¼ ë„¤íŠ¸ì›Œí¬ ì‹ë³„ìë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” íŒŒë“œ ê°„ì˜ í†µì‹ , ë°ì´í„°ë² ì´ìŠ¤ ë³µì œ ë“±ê³¼ ê°™ì€ ìƒíƒœ ê´€ë¦¬ì— ìœ ë¦¬í•©ë‹ˆë‹¤. ë³¼ë¥¨ ê´€ë¦¬: Deployment: DeploymentëŠ” íŒŒë“œì˜ ë³¼ë¥¨ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ìœ ìš©í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë³¼ë¥¨ì˜ ìˆ˜ëª… ì£¼ê¸°ëŠ” íŒŒë“œì™€ ì—°ê²°ë˜ì§€ ì•Šìœ¼ë©°, íŒŒë“œ ì¬ìƒì„± ì‹œ ë³¼ë¥¨ì´ ì‚¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. StatefulSet: StatefulSetì€ íŒŒë“œ ê°„ì— ì§€ì†ì ì¸ ë°ì´í„° ê³µìœ ë¥¼ ìœ„í•œ ë³¼ë¥¨ì„ ê´€ë¦¬í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤. ê° íŒŒë“œëŠ” ë³„ë„ì˜ ì§€ì†ì ì¸ ë³¼ë¥¨ì„ ê°€ì§€ë©°, íŒŒë“œ ì¬ìƒì„± ì‹œì—ë„ ë°ì´í„°ëŠ” ë³´ì¡´ë©ë‹ˆë‹¤. ì—…ë°ì´íŠ¸ ì „ëµ: Deployment: DeploymentëŠ” ë¡¤ë§ ì—…ë°ì´íŠ¸ë¥¼ ê¸°ë³¸ ì „ëµìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ë²„ì „ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ì´ì „ ë²„ì „ì˜ íŒŒë“œë¥¼ ì ì§„ì ìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤. StatefulSet: StatefulSetì€ ë³´ë‹¤ ì‹ ì¤‘í•œ ì—…ë°ì´íŠ¸ ì „ëµì´ í•„ìš”í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì í•©í•©ë‹ˆë‹¤. íŒŒë“œë¥¼ ìˆœì„œëŒ€ë¡œ ì—…ë°ì´íŠ¸í•˜ì—¬ ë°ì´í„°ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤. ìš”ì•½í•˜ë©´, DeploymentëŠ” ìƒíƒœë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°°í¬ì— ì í•©í•˜ë©°, StatefulSetì€ ìƒíƒœë¥¼ ê°€ì§€ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜(ì˜ˆ: ë°ì´í„°ë² ì´ìŠ¤)ì˜ ë°°í¬ì— ì í•©í•©ë‹ˆë‹¤. DeploymentëŠ” íŒŒë“œì˜ ìˆ˜í‰ì ì¸ í™•ì¥ì— ì¤‘ì ì„ ë‘ê³  ìˆìœ¼ë©°, StatefulSetì€ íŒŒë“œì˜ ì‹ë³„ê³¼ ìˆœì°¨ì ì¸ ë°°í¬, ë„¤íŠ¸ì›Œí‚¹ ë° ë³¼ë¥¨ ê´€ë¦¬ì— ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤. StatefulSet vs ReplicaSetStatefulSetê³¼ ReplicaSetì€ Kubernetesì—ì„œ ì‚¬ìš©ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ìœ í˜•ì…ë‹ˆë‹¤. ë‘ ê°œì˜ ì°¨ì´ì ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì‹ë³„ ê°€ëŠ¥í•œ ìƒíƒœ ìœ ì§€: ReplicaSetì€ ìƒíƒœë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” íŒŒë“œ ê·¸ë£¹ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. íŒŒë“œëŠ” ë™ì¼í•œ ì‚¬ì–‘ì„ ê°€ì§€ë©°, í´ëŸ¬ìŠ¤í„°ì—ì„œì˜ ì‹¤í–‰ì„ ë³´ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ReplicaSetì€ íŒŒë“œì— ìˆœì„œê°€ ì—†ìœ¼ë©°, íŒŒë“œê°€ ì¬ì‹œì‘ë˜ë©´ ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ì— ë°°ì¹˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.StatefulSetì€ ReplicaSetê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, ê° íŒŒë“œì— ê³ ìœ í•œ ì‹ë³„ìë¥¼ ë¶€ì—¬í•˜ì—¬ ì‹ë³„ ê°€ëŠ¥í•œ ìƒíƒœë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ê° íŒŒë“œëŠ” ì¼ë ¨ ë²ˆí˜¸ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ê³ ìœ í•œ DNS ì´ë¦„ì„ í†µí•´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ StatefulSetì€ íŒŒë“œì˜ ìˆœì„œë¥¼ ë³´ì¡´í•˜ê³ , ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ë©”ì‹œì§€ íì™€ ê°™ì´ ì‹ë³„ ê°€ëŠ¥í•œ ìƒíƒœë¥¼ ìš”êµ¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤.íŒŒë“œì˜ ê´€ë¦¬ ë°©ì‹: ReplicaSetì€ íŒŒë“œì˜ ê°œìˆ˜ë¥¼ ìœ ì§€í•˜ëŠ” ë° ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤. ReplicaSetì€ ì§€ì •ëœ ê°œìˆ˜ì˜ íŒŒë“œë¥¼ ìœ ì§€í•˜ë ¤ê³  ì‹œë„í•˜ë©°, íŒŒë“œê°€ ì‚­ì œë˜ë©´ ìƒˆë¡œìš´ íŒŒë“œë¥¼ ìƒì„±í•˜ì—¬ ëŒ€ì²´í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ íŒŒë“œì˜ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ì‹ë³„ìëŠ” ë³€ê²½ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.StatefulSetì€ ReplicaSetì˜ ê¸°ëŠ¥ì„ í¬í•¨í•˜ë©´ì„œë„ íŒŒë“œì— ê³ ìœ í•œ ì‹ë³„ìë¥¼ ì œê³µí•©ë‹ˆë‹¤. StatefulSetì€ íŒŒë“œë¥¼ ì¼ë ¨ ë²ˆí˜¸ì— ë”°ë¼ ìƒì„±í•˜ê³ , ì‚­ì œë˜ëŠ” ê²½ìš° ìˆœì°¨ì ìœ¼ë¡œ ì¬ìƒì„±í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê´€ë¦¬ ë°©ì‹ì€ íŒŒë“œê°€ ê³ ìœ í•œ ë„¤íŠ¸ì›Œí¬ ì‹ë³„ìì™€ ì˜ì†ì ì¸ ë³¼ë¥¨ì„ ê°€ì§ˆ ìˆ˜ ìˆê²Œ í•´ì£¼ë¯€ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ë¶„ì‚° ì‹œìŠ¤í…œê³¼ ê°™ì€ ìƒíƒœë¥¼ ìœ ì§€í•´ì•¼ í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ë° ì í•©í•©ë‹ˆë‹¤.ìš”ì•½í•˜ìë©´, ReplicaSetì€ íŒŒë“œ ê·¸ë£¹ì˜ í¬ê¸°ë¥¼ ìœ ì§€í•˜ëŠ” ë° ì´ˆì ì„ ë§ì¶”ê³ , ìˆœì„œë‚˜ ìƒíƒœë¥¼ ê³ ë ¤í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. StatefulSetì€ ReplicaSetì˜ ê¸°ëŠ¥ì„ í¬í•¨í•˜ë©°, ê° íŒŒë“œì— ê³ ìœ í•œ ì‹ë³„ìì™€ ìƒíƒœë¥¼ ë¶€ì—¬í•˜ì—¬ ì‹ë³„ ê°€ëŠ¥í•œ ìƒíƒœ ìœ ì§€ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"ì›Œí¬ë¡œë“œ","slug":"Kubernetes/ì›Œí¬ë¡œë“œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - DaemonSet","slug":"k8s/pod/DaemonSet","date":"2023-02-09T22:31:46.000Z","updated":"2024-02-18T16:19:54.541Z","comments":true,"path":"2023/02/10/k8s/pod/DaemonSet/","link":"","permalink":"https://ckck803.github.io/2023/02/10/k8s/pod/DaemonSet/","excerpt":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress ì¿ ë²„ë„¤í‹°ìŠ¤ - Deployment Post not found: k8s/pod/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod DaemonSetì¿ ë²„ë„¤í‹°ìŠ¤( Kubernetes)ì—ì„œ DaemonSetì€ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ëª¨ë“  ë…¸ë“œì— íŠ¹ì • íŒŒë“œ(Pod) ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°°í¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì…ë‹ˆë‹¤. DaemonSetì€ ê° ë…¸ë“œì—ì„œ ë°˜ë“œì‹œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ì´ë‚˜ ë¡œê·¸ ìˆ˜ì§‘ê¸°ì™€ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì´ìƒì ì…ë‹ˆë‹¤. ì¼ë°˜ì ì¸ ReplicaSetì´ë‚˜ Deploymentì™€ëŠ” ë‹¬ë¦¬ DaemonSetì€ ëª¨ë“  ë…¸ë“œì—ì„œ íŒŒë“œë¥¼ ì‹¤í–‰í•˜ë©°, ìƒˆë¡œìš´ ë…¸ë“œê°€ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€ë˜ë©´ ìë™ìœ¼ë¡œ í•´ë‹¹ ë…¸ë“œì— íŒŒë“œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìŠ¤ì¼€ì¤„ë§í•©ë‹ˆë‹¤. ë˜í•œ, ë…¸ë“œê°€ ì œê±°ë˜ë©´ DaemonSetì€ í•´ë‹¹ ë…¸ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ íŒŒë“œë¥¼ ìë™ìœ¼ë¡œ ì¢…ë£Œí•˜ê³  ëŒ€ì²´ ë…¸ë“œì—ì„œ ì‹¤í–‰ë  ìƒˆë¡œìš´ íŒŒë“œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. DaemonSetì€ ì£¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ìš© ì‚¬ë¡€ì— ì í•©í•©ë‹ˆë‹¤: ë¡œê·¸ ìˆ˜ì§‘ê¸°: ëª¨ë“  ë…¸ë“œì—ì„œ ë¡œê·¸ë¥¼ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ DaemonSetì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Fluentd, Filebeat ë“±ì˜ ë¡œê·¸ ìˆ˜ì§‘ê¸°ë¥¼ DaemonSetìœ¼ë¡œ ë°°í¬í•˜ì—¬ ëª¨ë“  ë…¸ë“œì˜ ë¡œê·¸ë¥¼ ì¤‘ì•™ ì§‘ì¤‘í™”ëœ ìœ„ì¹˜ë¡œ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì—ì´ì „íŠ¸: ë„¤íŠ¸ì›Œí¬ ì—ì´ì „íŠ¸ëŠ” ëª¨ë“  ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ì–´ ë„¤íŠ¸ì›Œí¬ ì •ì±…ì„ êµ¬í˜„í•˜ê³  íŠ¸ë˜í”½ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. DaemonSetì„ ì‚¬ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì—ì´ì „íŠ¸ë¥¼ í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë…¸ë“œì— ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë‹ˆí„°ë§ ë° ë©”íŠ¸ë¦­ ìˆ˜ì§‘ê¸°: í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë…¸ë“œì—ì„œ ë©”íŠ¸ë¦­ ë° ëª¨ë‹ˆí„°ë§ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ DaemonSetì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Prometheus, Telegraf ë“±ì˜ ë„êµ¬ë¥¼ DaemonSetìœ¼ë¡œ ë°°í¬í•˜ì—¬ ëª¨ë“  ë…¸ë“œì˜ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ê³  ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. DaemonSetì„ ì‚¬ìš©í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì‘ì—…ì„ ì‰½ê²Œ ë°°í¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress ì¿ ë²„ë„¤í‹°ìŠ¤ - Deployment Post not found: k8s/pod/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod DaemonSetì¿ ë²„ë„¤í‹°ìŠ¤( Kubernetes)ì—ì„œ DaemonSetì€ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ëª¨ë“  ë…¸ë“œì— íŠ¹ì • íŒŒë“œ(Pod) ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°°í¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì…ë‹ˆë‹¤. DaemonSetì€ ê° ë…¸ë“œì—ì„œ ë°˜ë“œì‹œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ì´ë‚˜ ë¡œê·¸ ìˆ˜ì§‘ê¸°ì™€ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì´ìƒì ì…ë‹ˆë‹¤. ì¼ë°˜ì ì¸ ReplicaSetì´ë‚˜ Deploymentì™€ëŠ” ë‹¬ë¦¬ DaemonSetì€ ëª¨ë“  ë…¸ë“œì—ì„œ íŒŒë“œë¥¼ ì‹¤í–‰í•˜ë©°, ìƒˆë¡œìš´ ë…¸ë“œê°€ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€ë˜ë©´ ìë™ìœ¼ë¡œ í•´ë‹¹ ë…¸ë“œì— íŒŒë“œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìŠ¤ì¼€ì¤„ë§í•©ë‹ˆë‹¤. ë˜í•œ, ë…¸ë“œê°€ ì œê±°ë˜ë©´ DaemonSetì€ í•´ë‹¹ ë…¸ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ íŒŒë“œë¥¼ ìë™ìœ¼ë¡œ ì¢…ë£Œí•˜ê³  ëŒ€ì²´ ë…¸ë“œì—ì„œ ì‹¤í–‰ë  ìƒˆë¡œìš´ íŒŒë“œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. DaemonSetì€ ì£¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ìš© ì‚¬ë¡€ì— ì í•©í•©ë‹ˆë‹¤: ë¡œê·¸ ìˆ˜ì§‘ê¸°: ëª¨ë“  ë…¸ë“œì—ì„œ ë¡œê·¸ë¥¼ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ DaemonSetì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Fluentd, Filebeat ë“±ì˜ ë¡œê·¸ ìˆ˜ì§‘ê¸°ë¥¼ DaemonSetìœ¼ë¡œ ë°°í¬í•˜ì—¬ ëª¨ë“  ë…¸ë“œì˜ ë¡œê·¸ë¥¼ ì¤‘ì•™ ì§‘ì¤‘í™”ëœ ìœ„ì¹˜ë¡œ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì—ì´ì „íŠ¸: ë„¤íŠ¸ì›Œí¬ ì—ì´ì „íŠ¸ëŠ” ëª¨ë“  ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ì–´ ë„¤íŠ¸ì›Œí¬ ì •ì±…ì„ êµ¬í˜„í•˜ê³  íŠ¸ë˜í”½ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. DaemonSetì„ ì‚¬ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì—ì´ì „íŠ¸ë¥¼ í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë…¸ë“œì— ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë‹ˆí„°ë§ ë° ë©”íŠ¸ë¦­ ìˆ˜ì§‘ê¸°: í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë…¸ë“œì—ì„œ ë©”íŠ¸ë¦­ ë° ëª¨ë‹ˆí„°ë§ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ DaemonSetì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Prometheus, Telegraf ë“±ì˜ ë„êµ¬ë¥¼ DaemonSetìœ¼ë¡œ ë°°í¬í•˜ì—¬ ëª¨ë“  ë…¸ë“œì˜ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ê³  ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. DaemonSetì„ ì‚¬ìš©í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì‘ì—…ì„ ì‰½ê²Œ ë°°í¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"ì›Œí¬ë¡œë“œ","slug":"Kubernetes/ì›Œí¬ë¡œë“œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - ReplicaSet","slug":"k8s/pod/ReplicaSets","date":"2023-02-09T21:31:46.000Z","updated":"2024-02-18T16:19:54.541Z","comments":true,"path":"2023/02/10/k8s/pod/ReplicaSets/","link":"","permalink":"https://ckck803.github.io/2023/02/10/k8s/pod/ReplicaSets/","excerpt":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress ì¿ ë²„ë„¤í‹°ìŠ¤ - Deployment Post not found: k8s/pod/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì°¸ê³  https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors ReplicaSet ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‹¤í–‰ë˜ëŠ” Pod ì˜ Replica(ë³µì œë³¸) ë¥¼ ìƒì„±í•˜ê³  ì§€ì •ëœ Pod ìˆ˜ë¥¼ ìœ ì§€í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ ReplicaSet ì€ íŒŒë“œì˜ ê°œìˆ˜ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³ , íŒŒë“œì˜ ê°œìˆ˜ê°€ ì§€ì •ëœ ê°œìˆ˜ë³´ë‹¤ ì ìœ¼ë©´ ìƒˆë¡œìš´ íŒŒë“œë¥¼ ìƒì„±í•˜ê³ , íŒŒë“œì˜ ê°œìˆ˜ê°€ ì§€ì •ëœ ê°œìˆ˜ë³´ë‹¤ ë§ìœ¼ë©´ ê¸°ì¡´ì˜ íŒŒë“œë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. ReplicaSetì€ íŠ¹ì • íŒŒë“œì˜ ë³µì œë³¸ ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. íŒŒë“œë¥¼ ì •ì˜í•˜ëŠ” í…œí”Œë¦¿ê³¼ í•¨ê»˜ ReplicaSetì„ ìƒì„±í•˜ë©´ ReplicaSetì€ í•´ë‹¹ í…œí”Œë¦¿ì„ ê¸°ë°˜ìœ¼ë¡œ ë³µì œë³¸ íŒŒë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë§Œì•½ íŒŒë“œì˜ ë³µì œë³¸ ìˆ˜ê°€ ReplicaSetì˜ ëª©í‘œê°’ë³´ë‹¤ ì ë‹¤ë©´, ReplicaSetì€ ì¶”ê°€ íŒŒë“œë¥¼ ìƒì„±í•˜ì—¬ ì›í•˜ëŠ” ë³µì œë³¸ ìˆ˜ë¥¼ ìœ ì§€í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ë°˜ëŒ€ë¡œ, íŒŒë“œì˜ ë³µì œë³¸ ìˆ˜ê°€ ReplicaSetì˜ ëª©í‘œê°’ë³´ë‹¤ ë§ë‹¤ë©´, ReplicaSetì€ íŒŒë“œë¥¼ ì œê±°í•˜ì—¬ ì›í•˜ëŠ” ë³µì œë³¸ ìˆ˜ë¥¼ ì¤„ì´ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ReplicaSetì€ íŒŒë“œì˜ ë³µì œë³¸ ìˆ˜ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ë©°, ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ìë™ìœ¼ë¡œ ì¡°ì¹˜ë¥¼ ì·¨í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ReplicaSetì´ íŒŒë“œì˜ ìˆ˜ë¥¼ ê°ì§€í•˜ê³  ì¦‰ì‹œ ìƒˆë¡œìš´ ë³µì œë³¸ì„ ìƒì„±í•˜ì—¬ ì¥ì• ê°€ ë°œìƒí•œ íŒŒë“œë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ReplicaSetì€ ë¡¤ë§ ì—…ë°ì´íŠ¸(rolling update)ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ ì—…ê·¸ë ˆì´ë“œë„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ˆì „ ë²„ì „ì˜ íŒŒë“œë¥¼ ì ì§„ì ìœ¼ë¡œ ì œê±°í•˜ê³  ìƒˆ ë²„ì „ì˜ íŒŒë“œë¥¼ ìƒì„±í•˜ì—¬ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress ì¿ ë²„ë„¤í‹°ìŠ¤ - Deployment Post not found: k8s/pod/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì°¸ê³  https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors ReplicaSet ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‹¤í–‰ë˜ëŠ” Pod ì˜ Replica(ë³µì œë³¸) ë¥¼ ìƒì„±í•˜ê³  ì§€ì •ëœ Pod ìˆ˜ë¥¼ ìœ ì§€í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ ReplicaSet ì€ íŒŒë“œì˜ ê°œìˆ˜ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³ , íŒŒë“œì˜ ê°œìˆ˜ê°€ ì§€ì •ëœ ê°œìˆ˜ë³´ë‹¤ ì ìœ¼ë©´ ìƒˆë¡œìš´ íŒŒë“œë¥¼ ìƒì„±í•˜ê³ , íŒŒë“œì˜ ê°œìˆ˜ê°€ ì§€ì •ëœ ê°œìˆ˜ë³´ë‹¤ ë§ìœ¼ë©´ ê¸°ì¡´ì˜ íŒŒë“œë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. ReplicaSetì€ íŠ¹ì • íŒŒë“œì˜ ë³µì œë³¸ ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. íŒŒë“œë¥¼ ì •ì˜í•˜ëŠ” í…œí”Œë¦¿ê³¼ í•¨ê»˜ ReplicaSetì„ ìƒì„±í•˜ë©´ ReplicaSetì€ í•´ë‹¹ í…œí”Œë¦¿ì„ ê¸°ë°˜ìœ¼ë¡œ ë³µì œë³¸ íŒŒë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë§Œì•½ íŒŒë“œì˜ ë³µì œë³¸ ìˆ˜ê°€ ReplicaSetì˜ ëª©í‘œê°’ë³´ë‹¤ ì ë‹¤ë©´, ReplicaSetì€ ì¶”ê°€ íŒŒë“œë¥¼ ìƒì„±í•˜ì—¬ ì›í•˜ëŠ” ë³µì œë³¸ ìˆ˜ë¥¼ ìœ ì§€í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ë°˜ëŒ€ë¡œ, íŒŒë“œì˜ ë³µì œë³¸ ìˆ˜ê°€ ReplicaSetì˜ ëª©í‘œê°’ë³´ë‹¤ ë§ë‹¤ë©´, ReplicaSetì€ íŒŒë“œë¥¼ ì œê±°í•˜ì—¬ ì›í•˜ëŠ” ë³µì œë³¸ ìˆ˜ë¥¼ ì¤„ì´ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ReplicaSetì€ íŒŒë“œì˜ ë³µì œë³¸ ìˆ˜ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ë©°, ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ìë™ìœ¼ë¡œ ì¡°ì¹˜ë¥¼ ì·¨í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ReplicaSetì´ íŒŒë“œì˜ ìˆ˜ë¥¼ ê°ì§€í•˜ê³  ì¦‰ì‹œ ìƒˆë¡œìš´ ë³µì œë³¸ì„ ìƒì„±í•˜ì—¬ ì¥ì• ê°€ ë°œìƒí•œ íŒŒë“œë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ReplicaSetì€ ë¡¤ë§ ì—…ë°ì´íŠ¸(rolling update)ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ ì—…ê·¸ë ˆì´ë“œë„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ˆì „ ë²„ì „ì˜ íŒŒë“œë¥¼ ì ì§„ì ìœ¼ë¡œ ì œê±°í•˜ê³  ìƒˆ ë²„ì „ì˜ íŒŒë“œë¥¼ ìƒì„±í•˜ì—¬ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ReplicaSetì€ ë””í”Œë¡œì´ë¨¼íŠ¸(Deployment)ì™€ í•¨ê»˜ ì‚¬ìš©ë©ë‹ˆë‹¤. ë””í”Œë¡œì´ë¨¼íŠ¸ëŠ” ReplicaSetì„ ì‰½ê²Œ ì •ì˜í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë¦¬ì†ŒìŠ¤ì…ë‹ˆë‹¤. ReplicaSetì€ ì£¼ë¡œ íŒŒë“œì˜ ë³µì œë³¸ ìˆ˜ë¥¼ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ì§€ë§Œ, ë””í”Œë¡œì´ë¨¼íŠ¸ëŠ” ì—…ë°ì´íŠ¸ ì „ëµ, ë¡¤ë°±, ë¡¤ë§ ì—…ë°ì´íŠ¸ ë“±ì„ ì§€ì›í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ê´€ë¦¬ë¥¼ ë”ìš± í¸ë¦¬í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ì•½í•˜ìë©´, ReplicaSetì€ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ íŒŒë“œì˜ ë³µì œë³¸ ìˆ˜ë¥¼ ê´€ë¦¬í•˜ê³  ìœ ì§€í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¡œ, íŒŒë“œì˜ ê°€ìš©ì„±ê³¼ í™•ì¥ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤. ReplicaSet ìƒì„±ReplicaSetì€ label ì„ ì²´í¬í•´ì„œ ì›í•˜ëŠ” ìˆ˜ì˜ Pod ì´ ì—†ìœ¼ë©´ ìƒˆë¡œìš´ Pod ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ë¥¼ ì„¤ì •ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì •ì˜ ì„¤ëª… spec.replicas ì›í•˜ëŠ” Podì˜ ê°œìˆ˜ spec.selector label ì²´í¬ ì¡°ê±´ spec.template ìƒì„±í•  Podì˜ ëª…ì„¸ apiVersion: apps/v1kind: ReplicaSetmetadata: name: echo-rsspec: replicas: 1 selector: matchLabels: app: echo tier: app template: metadata: labels: app: echo tier: app spec: containers: - name: echo image: ghcr.io/subicura/echo:v1 ReplicatSet ì ìš© ë° í™•ì¸kubectl apply -f ReplicaSet.yaml ReplicatSet ê²€ìƒ‰# default Namespace ë‚´ì˜ ReplicatSet ê²€ìƒ‰kubectl get replicasets# ëª¨ë“  Namespace ë‚´ì˜ ReplicatSet ê²€ìƒ‰kubectl get replicasets --all-namespaces# ë‹¨ì¶•ì–´ë¥¼ ì‚¬ìš©í•œ ê²€ìƒ‰kubectl get rs# ìƒì„¸í•œ ê²€ìƒ‰kubectl get replicasets -o wide Scale Out","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"ì›Œí¬ë¡œë“œ","slug":"Kubernetes/ì›Œí¬ë¡œë“œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/"}],"tags":[]},{"title":"[Jenkins] - Agent ì¶”ê°€í•˜ê¸°","slug":"devops/cicd/jenkins/helm/helm-jenkins-02-agent","date":"2023-02-08T21:31:46.000Z","updated":"2025-03-29T04:27:21.776Z","comments":true,"path":"2023/02/09/devops/cicd/jenkins/helm/helm-jenkins-02-agent/","link":"","permalink":"https://ckck803.github.io/2023/02/09/devops/cicd/jenkins/helm/helm-jenkins-02-agent/","excerpt":"ëª©ì°¨ [Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸° [Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸° [Jenkins] - Agent ì¶”ê°€í•˜ê¸° [Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://artifacthub.io/packages/helm/jenkinsci/jenkins https://code00.tistory.com/123 https://hub.docker.com/r/jenkins/inbound-agent https://github.com/jforge/docker-jenkins-inbound-agent Agent ì¶”ê°€additionalAgents: maven: podName: maven customJenkinsLabels: maven image: jenkins/jnlp-agent-maven tag: jdk11 node: podName: node customJenkinsLabels: maven image: jenkins/jnlp-agent-node tag: latest","text":"ëª©ì°¨ [Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸° [Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸° [Jenkins] - Agent ì¶”ê°€í•˜ê¸° [Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸° ì°¸ê³  https://artifacthub.io/packages/helm/jenkinsci/jenkins https://code00.tistory.com/123 https://hub.docker.com/r/jenkins/inbound-agent https://github.com/jforge/docker-jenkins-inbound-agent Agent ì¶”ê°€additionalAgents: maven: podName: maven customJenkinsLabels: maven image: jenkins/jnlp-agent-maven tag: jdk11 node: podName: node customJenkinsLabels: maven image: jenkins/jnlp-agent-node tag: latest","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"},{"name":"Jenkins","slug":"DevOps/CICD/Jenkins","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Jenkins/"}],"tags":[]},{"title":"GitOps","slug":"devops/gitops","date":"2023-02-07T21:31:46.000Z","updated":"2025-03-29T04:31:31.584Z","comments":true,"path":"2023/02/08/devops/gitops/","link":"","permalink":"https://ckck803.github.io/2023/02/08/devops/gitops/","excerpt":"GitOps ë€?GitOpsëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ì¸í”„ë¼ ê´€ë¦¬ë¥¼ìœ„í•œ ë°©ë²•ë¡  ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ ë°©ë²•ë¡ ì€ Gitì„ ë‹¨ì¼ ì†ŒìŠ¤ ì§„ì‹¤ë¡œ ì‚¬ìš©í•˜ì—¬ ì¸í”„ë¼ êµ¬ì„± ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ê´€ë¦¬í•˜ëŠ” ì ‘ê·¼ ë°©ì‹ì…ë‹ˆë‹¤. GitOpsì—ì„œëŠ” ëª¨ë“  ì¸í”„ë¼ êµ¬ì„± ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ Git ì €ì¥ì†Œì— ì €ì¥ë©ë‹ˆë‹¤. ì´ ì €ì¥ì†Œì˜ ì½”ë“œëŠ” ì¸í”„ë¼ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ìë™í™”í•˜ëŠ” CI &#x2F; CD íŒŒì´í”„ ë¼ì¸ì— ì˜í•´ ìë™ìœ¼ë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤. GitOpsëŠ” ì¸í”„ë¼ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ì¶”ì í•˜ê³ , ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì‹ ì†í•˜ê²Œ ëŒ€ì‘ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ëª¨ë“  ì¸í”„ë¼ êµ¬ì„± ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ë³€ê²½ ì‚¬í•­ì„ ê¸°ë¡í•˜ëŠ” Git ì €ì¥ì†Œì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. GitOpsì—ì„œëŠ” ì´ ë³€ê²½ ì‚¬í•­ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ íŠ¸ë¦¬ê±°í•˜ë¯€ë¡œ, ê°œë°œìëŠ” í”„ë¡œë•ì…˜ ì¸í”„ë¼ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ í•­ìƒ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ GitOpsëŠ” ì½”ë“œ ë¦¬ë·° ë° ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•´ ë³€ê²½ ì‚¬í•­ì˜ í’ˆì§ˆì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë³€ê²½ ì‚¬í•­ì´ ë°°í¬ë˜ê¸° ì „ì— ì¸í”„ë¼ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ê²€í†  ë° ìŠ¹ì¸ë˜ë¯€ë¡œ ë°°í¬ ì˜¤ë¥˜ ë° ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. GitOpsëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ í™˜ê²½ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì¸í”„ë¼ ë°°í¬ë¥¼ ë‹¨ìˆœí™”í•˜ê³  ìë™í™”í•˜ëŠ” ê°•ë ¥í•œ ë°©ë²•ë¡ ì…ë‹ˆë‹¤.","text":"GitOps ë€?GitOpsëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ì¸í”„ë¼ ê´€ë¦¬ë¥¼ìœ„í•œ ë°©ë²•ë¡  ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ ë°©ë²•ë¡ ì€ Gitì„ ë‹¨ì¼ ì†ŒìŠ¤ ì§„ì‹¤ë¡œ ì‚¬ìš©í•˜ì—¬ ì¸í”„ë¼ êµ¬ì„± ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ê´€ë¦¬í•˜ëŠ” ì ‘ê·¼ ë°©ì‹ì…ë‹ˆë‹¤. GitOpsì—ì„œëŠ” ëª¨ë“  ì¸í”„ë¼ êµ¬ì„± ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ Git ì €ì¥ì†Œì— ì €ì¥ë©ë‹ˆë‹¤. ì´ ì €ì¥ì†Œì˜ ì½”ë“œëŠ” ì¸í”„ë¼ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ìë™í™”í•˜ëŠ” CI &#x2F; CD íŒŒì´í”„ ë¼ì¸ì— ì˜í•´ ìë™ìœ¼ë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤. GitOpsëŠ” ì¸í”„ë¼ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ì¶”ì í•˜ê³ , ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì‹ ì†í•˜ê²Œ ëŒ€ì‘ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ëª¨ë“  ì¸í”„ë¼ êµ¬ì„± ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ë³€ê²½ ì‚¬í•­ì„ ê¸°ë¡í•˜ëŠ” Git ì €ì¥ì†Œì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. GitOpsì—ì„œëŠ” ì´ ë³€ê²½ ì‚¬í•­ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ íŠ¸ë¦¬ê±°í•˜ë¯€ë¡œ, ê°œë°œìëŠ” í”„ë¡œë•ì…˜ ì¸í”„ë¼ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ í•­ìƒ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ GitOpsëŠ” ì½”ë“œ ë¦¬ë·° ë° ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•´ ë³€ê²½ ì‚¬í•­ì˜ í’ˆì§ˆì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë³€ê²½ ì‚¬í•­ì´ ë°°í¬ë˜ê¸° ì „ì— ì¸í”„ë¼ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ê²€í†  ë° ìŠ¹ì¸ë˜ë¯€ë¡œ ë°°í¬ ì˜¤ë¥˜ ë° ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. GitOpsëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ í™˜ê²½ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì¸í”„ë¼ ë°°í¬ë¥¼ ë‹¨ìˆœí™”í•˜ê³  ìë™í™”í•˜ëŠ” ê°•ë ¥í•œ ë°©ë²•ë¡ ì…ë‹ˆë‹¤.","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"}],"tags":[]},{"title":"Docker","slug":"docker/docker","date":"2023-02-07T21:31:46.000Z","updated":"2024-03-03T01:43:01.898Z","comments":true,"path":"2023/02/08/docker/docker/","link":"","permalink":"https://ckck803.github.io/2023/02/08/docker/docker/","excerpt":"Container ë€?ì»¨í…Œì´ë„ˆëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ìš”ì†Œê°€ í¬í•¨ëœ ì†Œí”„íŠ¸ì›¨ì–´ íŒ¨í‚¤ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.Container í™”ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì‹¤í–‰ì‹œ ë³„ ë…ë¦½ëœ(ê²©ë¦¬ëœ) ì‹¤í–‰í™˜ê²½ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. Docker ë€? Docker ëŠ” ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ê°€ìƒí™” í”Œë«í¼ìœ¼ë¡œ, ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ íŒ¨í‚¤ì§•í•˜ê³  ë°°í¬í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ë„ì»¤(Docker)ëŠ” ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ê°€ìƒí™” í”Œë«í¼ìœ¼ë¡œ, ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ íŒ¨í‚¤ì§•í•˜ê³  ë°°í¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ë„ì»¤ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë¬¶ì–´ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, ì´ ì»¨í…Œì´ë„ˆëŠ” í˜¸ìŠ¤íŠ¸ ì‹œìŠ¤í…œê³¼ ê²©ë¦¬ë˜ì–´ ìˆì–´ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ì´ì‹ì„±ê³¼ í™•ì¥ì„±ì„ ë†’ì´ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.","text":"Container ë€?ì»¨í…Œì´ë„ˆëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ìš”ì†Œê°€ í¬í•¨ëœ ì†Œí”„íŠ¸ì›¨ì–´ íŒ¨í‚¤ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.Container í™”ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì‹¤í–‰ì‹œ ë³„ ë…ë¦½ëœ(ê²©ë¦¬ëœ) ì‹¤í–‰í™˜ê²½ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. Docker ë€? Docker ëŠ” ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ê°€ìƒí™” í”Œë«í¼ìœ¼ë¡œ, ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ íŒ¨í‚¤ì§•í•˜ê³  ë°°í¬í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ë„ì»¤(Docker)ëŠ” ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ê°€ìƒí™” í”Œë«í¼ìœ¼ë¡œ, ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ íŒ¨í‚¤ì§•í•˜ê³  ë°°í¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ë„ì»¤ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë¬¶ì–´ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, ì´ ì»¨í…Œì´ë„ˆëŠ” í˜¸ìŠ¤íŠ¸ ì‹œìŠ¤í…œê³¼ ê²©ë¦¬ë˜ì–´ ìˆì–´ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ì´ì‹ì„±ê³¼ í™•ì¥ì„±ì„ ë†’ì´ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.","categories":[{"name":"Docker","slug":"Docker","permalink":"https://ckck803.github.io/categories/Docker/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Code ë¡œ Config ìˆ˜ì •í•˜ê¸°","slug":"k8s/edit-code","date":"2023-02-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.537Z","comments":true,"path":"2023/02/08/k8s/edit-code/","link":"","permalink":"https://ckck803.github.io/2023/02/08/k8s/edit-code/","excerpt":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress Post not found: k8s/deployment Post not found: k8s/replicaset Post not found: k8s/node Post not found: k8s/pod ì°¸ê³  https://gist.github.com/mordr/3c2df494c690672247c720f66f0fb613 í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€export KUBE_EDITOR=&#x27;code --wait&#x27;","text":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress Post not found: k8s/deployment Post not found: k8s/replicaset Post not found: k8s/node Post not found: k8s/pod ì°¸ê³  https://gist.github.com/mordr/3c2df494c690672247c720f66f0fb613 í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€export KUBE_EDITOR=&#x27;code --wait&#x27;","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - kubectl","slug":"k8s/kubectl","date":"2023-02-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.540Z","comments":true,"path":"2023/02/08/k8s/kubectl/","link":"","permalink":"https://ckck803.github.io/2023/02/08/k8s/kubectl/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s ì°¸ê³  https://kubebyexample.com/learning-paths/application-development-kubernetes/lesson-1-running-containerized-applications Kubectl ëª…ë ¹ì–´ì¡°íšŒkubectl get pod kubectl get pod -w kubectl get pod -o wide","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane Post not found: k8s/k8s ì°¸ê³  https://kubebyexample.com/learning-paths/application-development-kubernetes/lesson-1-running-containerized-applications Kubectl ëª…ë ¹ì–´ì¡°íšŒkubectl get pod kubectl get pod -w kubectl get pod -o wide AZ í™•ì¸kubectl get nodes -L topology.kubernetes.io/zone Pod ë‚´ Container ë¡œê·¸ í™•ì¸Config ë³€ê²½kubectl config use-context minikube kubectl config get-contexts ì ìš©ëœ ë¦¬ì†ŒìŠ¤ë¥¼ yaml í˜•ì‹ìœ¼ë¡œ ë³´ê³  ì‹¶ìœ½ ê²½ìš°kubectl get pods [pods name] -o yaml ë¡œê·¸ í™•ì¸ ëª…ë ¹ì–´kubectl logs [Pod ì´ë¦„] -n [Namespace ì´ë¦„] ì¿ ë²„ë„¤í‹°ìŠ¤ Namespace ë‚´ Scaling ì¤‘ë‹¨ for i in $(kubectl get deploy -n &lt;namespace&gt; | grep -v NAME | awk &#x27;&#123;print $1&#125;&#x27;) ; do kubectl scale deploy/$i -n &lt;namespace&gt;$i replicas=0; done ì‹¤í–‰ for i in $(kubectl get deploy -n &lt;namespace&gt; | grep -v NAME | awk &#x27;&#123;print $1&#125;&#x27;) ; do kubectl scale deploy/$i -n &lt;namespace&gt;$i replicas=1; done","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - kube-proxy","slug":"k8s/k8s/kube-proxy","date":"2023-02-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.540Z","comments":true,"path":"2023/02/08/k8s/k8s/kube-proxy/","link":"","permalink":"https://ckck803.github.io/2023/02/08/k8s/k8s/kube-proxy/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane ì¿ ë²„ë„¤í‹°ìŠ¤ kube-proxy","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane ì¿ ë²„ë„¤í‹°ìŠ¤ kube-proxy","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"êµ¬ì„±ìš”ì†Œ","slug":"Kubernetes/êµ¬ì„±ìš”ì†Œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Node","slug":"k8s/node/node","date":"2023-02-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.540Z","comments":true,"path":"2023/02/08/k8s/node/node/","link":"","permalink":"https://ckck803.github.io/2023/02/08/k8s/node/node/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s Master NodeNode ë€ Node ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Worker ë¨¸ì‹  ì„ ë§í•˜ë©° í´ëŸ¬ìŠ¤í„°ì— ë”°ë¼ ê°€ìƒ ë˜ëŠ” ë¬¼ë¦¬ ë¨¸ì‹ ì¼ ìˆ˜ ìˆë‹¤. Container í™” ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì—­í•  Node ëŠ” í˜¸ìŠ¤íŠ¸ ìš´ì˜ì²´ì œì™€ í•¨ê»˜ ì‹¤í–‰ë˜ë©° CPU, Memory, Disk, Network ì™€ ê°™ì€ í•˜ë“œì›¨ì–´ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•œë‹¤. Node í™•ì¸kubectl get nodes Node ë‚´ì˜ Pod í™•ì¸","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod Post not found: k8s/k8s Master NodeNode ë€ Node ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Worker ë¨¸ì‹  ì„ ë§í•˜ë©° í´ëŸ¬ìŠ¤í„°ì— ë”°ë¼ ê°€ìƒ ë˜ëŠ” ë¬¼ë¦¬ ë¨¸ì‹ ì¼ ìˆ˜ ìˆë‹¤. Container í™” ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì—­í•  Node ëŠ” í˜¸ìŠ¤íŠ¸ ìš´ì˜ì²´ì œì™€ í•¨ê»˜ ì‹¤í–‰ë˜ë©° CPU, Memory, Disk, Network ì™€ ê°™ì€ í•˜ë“œì›¨ì–´ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•œë‹¤. Node í™•ì¸kubectl get nodes Node ë‚´ì˜ Pod í™•ì¸ node-name : ìœ„ì—ì„œ í™•ì¸í•œ Node ì´ë¦„ kubectl get pods --field-selector=spec.nodeName=&lt;node-name&gt;","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod","slug":"k8s/pod/pod","date":"2023-02-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.541Z","comments":true,"path":"2023/02/08/k8s/pod/pod/","link":"","permalink":"https://ckck803.github.io/2023/02/08/k8s/pod/pod/","excerpt":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress ì¿ ë²„ë„¤í‹°ìŠ¤ - Deployment Post not found: k8s/pod/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì°¸ê³  https://blog.2dal.com/2018/03/28/kubernetes-01-pod/ https://blog.heptio.com/core-kubernetes-jazz-improv-over-orchestration-a7903ea92ca ì¶œì²˜í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” subicura ê°•ì‚¬ë‹˜ì˜ ì´ˆë³´ë¥¼ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ì•ˆë‚´ì„œ ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. Pod Pod ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê¸°ë³¸ë‹¨ìœ„ ì´ë©° ê°€ì¥ ì‘ì€ ë°°í¬ ë‹¨ìœ„ ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” Pod ì„ ì´ìš©í•´ Container ë¥¼ ê´€ë¦¬ í•˜ë©° Pod ë‚´ì˜ Container ëŠ” ëª¨ë‘ ë™ì¼í•œ Host ì—ì„œ ì‹¤í–‰ë˜ë©° ë„¤íŠ¸ì›Œí¬ì™€ ì €ì¥ì†Œë¥¼ ê³µìœ í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì»¨í…Œì´ë„ˆëŠ” ê°™ì€ Pod ë‚´ì—ì„œ ë‹¤ë¥¸ Container ì™€ íš¨ìœ¨ì ìœ¼ë¡œ í†µì‹ í•˜ê³  ë°ì´í„°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ Post not found: k8s/namespace Post not found: k8s/ingress ì¿ ë²„ë„¤í‹°ìŠ¤ - Deployment Post not found: k8s/pod/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì°¸ê³  https://blog.2dal.com/2018/03/28/kubernetes-01-pod/ https://blog.heptio.com/core-kubernetes-jazz-improv-over-orchestration-a7903ea92ca ì¶œì²˜í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” subicura ê°•ì‚¬ë‹˜ì˜ ì´ˆë³´ë¥¼ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ì•ˆë‚´ì„œ ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. Pod Pod ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê¸°ë³¸ë‹¨ìœ„ ì´ë©° ê°€ì¥ ì‘ì€ ë°°í¬ ë‹¨ìœ„ ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” Pod ì„ ì´ìš©í•´ Container ë¥¼ ê´€ë¦¬ í•˜ë©° Pod ë‚´ì˜ Container ëŠ” ëª¨ë‘ ë™ì¼í•œ Host ì—ì„œ ì‹¤í–‰ë˜ë©° ë„¤íŠ¸ì›Œí¬ì™€ ì €ì¥ì†Œë¥¼ ê³µìœ í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì»¨í…Œì´ë„ˆëŠ” ê°™ì€ Pod ë‚´ì—ì„œ ë‹¤ë¥¸ Container ì™€ íš¨ìœ¨ì ìœ¼ë¡œ í†µì‹ í•˜ê³  ë°ì´í„°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Pod ì˜ íŠ¹ì§• ë‹¨ì¼ ë…¸ë“œì—ì„œ ì‹¤í–‰ PodëŠ” í•˜ë‚˜ì˜ ë…¸ë“œ(í˜¸ìŠ¤íŠ¸) ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. IP ì£¼ì†Œì™€ í˜¸ìŠ¤íŠ¸ ì´ë¦„ ê³µìœ  ê° PodëŠ” ê³ ìœ í•œ IP ì£¼ì†Œë¥¼ ê°€ì§€ë©°, Pod ë‚´ ì»¨í…Œì´ë„ˆë“¤ì€ ê³ ìœ í•œ IP ì£¼ì†Œë¥¼ ê³µìœ í•©ë‹ˆë‹¤. ë˜í•œ Pod ë‚´ì˜ ì»¨í…Œì´ë„ˆëŠ” ë™ì¼í•œ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ì—¬ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Pod ë‚´ ì»¨í…Œì´ë„ˆê°€ ë‘ê°œ ì´ìƒ ìˆì„ ê²½ìš° ë‘ ì»¨í…Œì´ë„ˆëŠ” ê°™ì€ IP ì£¼ì†Œë¥¼ ê°–ëŠ”ë‹¤. í•˜ë‚˜ì˜ Pod ì•ˆì— ìˆëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆë“¤ì€ localhost ë¡œ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆë‹¤. ë³¼ë¥¨ ë§ˆìš´íŠ¸ Pod ëŠ” ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì»¨í…Œì´ë„ˆ ê°„ì— ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë°ì´í„° ì§€ì†ì„±ê³¼ ì»¨í…Œì´ë„ˆ ê°„ì˜ ë°ì´í„° ê³µìœ ê°€ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. Container ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬ Pod ëŠ” ì»¨í…Œì´ë„ˆì˜ ë¼ì´í”„ì‚¬ì´í´ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ê±°ë‚˜ ì¢…ë£Œë  ë•Œ Pod ëŠ” ìë™ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Pod ìƒì„±í•˜ê¸°kubectl run echo --image ghcr.io/subicura/echo:v1 yaml íŒŒì¼ì„ ì´ìš©í•œ Pod ìƒì„±ë³´ë‹¤ ë§ì€ ì •ë³´ë¥¼ ì´ìš©í•´ Pod ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” yaml íŒŒì¼ì„ ì´ìš©í•´ Pod ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•  ë•Œ name ê³¼ label ì„ ì´ìš©í•©ë‹ˆë‹¤. yaml íŒŒì¼ì— ëŒ€í•œ ì •ë³´ë¡œ &#96; apiVersion: v1kind: Podmetadata: name: echo labels: app: echospec: containers: - name: app image: ghcr.io/subicura/echo:v1 kubectl apply ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ pod ë¥¼ ìƒì„±í•´ì£¼ë„ë¡ í•œë‹¤. kubectl apply -f echo-pod.yml ì‹¤í–‰ ê²°ê³¼READY ì—ì„œ 1/1 ì€ í•´ë‹¹ Podì˜ ì¤€ë¹„ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ë©°, ì²« ë²ˆì§¸ ìˆ«ìëŠ” í˜„ì¬ ì¤€ë¹„ëœ ì»¨í…Œì´ë„ˆ ìˆ˜ë¥¼, ë‘ ë²ˆì§¸ ìˆ«ìëŠ” ì´ ì»¨í…Œì´ë„ˆ ìˆ˜ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. Pod ìƒì„±ê³¼ì • API Server ë¥¼ ì´ìš©í•´ Pod ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. API Server ëŠ” ectd ì— ìƒì„±ëœ Pod ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤. Scheduler ëŠ” Node ë¥¼ í• ë‹¹ë°›ì§€ ëª»í•œ Pod ë¥¼ ì²´í¬í•œ í›„ Pod ë¥¼ ì‹¤í–‰í•  Node ë¥¼ í• ë‹¹í•´ì¤ë‹ˆë‹¤. Scheduler ëŠ” Pod ë¥¼ ì‹¤í–‰í•  Node ì •ë³´ë¥¼ API Serverì— ì•Œë ¤ì¤ë‹ˆë‹¤. kubelet ì€ í•´ë‹¹ ë…¸ë“œì— ë°”ì¸ë”©ëœ íŒŒë“œë“¤ì„ watch í•˜ë‹¤ê°€ í• ë‹¹ëœ Pod ë‚´ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. kubelet ì€ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì„ í†µí•´ Pod ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§ í•˜ë‹¤ê°€ ìƒíƒœê°€ ë³€ê²½ë˜ë©´ API Server ì— ë°˜ì˜í•©ë‹ˆë‹¤. API Server ì€ kubelet ì„ í†µí•´ ì „ë‹¬ë°›ì€ Pod ì˜ ìƒíƒœë¥¼ etcd ì— ë°˜ì˜í•©ë‹ˆë‹¤. Pod ì œê±°kubectl delete ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ í•´ë‹¹ Pod ë¥¼ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. kubectl delete pod [ì‚­ì œí•  Pod ì´ë¦„] Probeì»¨í…Œì´ë„ˆì—ì„œ Kubelet ì— ì˜í•´ ì£¼ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” ì§„ë‹¨ livenessProbeì»¨í…Œì´ë„ˆê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ ì²´í¬í•˜ê³  ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹œì‘ í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤. ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë‚´ spec.containers.livenessProbe ë¥¼ ì •ì˜í•¨ìœ¼ë¡œì¨ Container ì˜ livenessProbe ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. apiVersion: v1kind: Podmetadata: name: echo-lp labels: app: echospec: containers: - name: app image: ghcr.io/subicura/echo:v1 livenessProbe: httpGet: path: /not/exist port: 8080 initialDelaySeconds: 5 timeoutSeconds: 2 # Default 1 periodSeconds: 5 # Defaults 10 failureThreshold: 1 # Defaults 3 readinessProbeì»¨í…Œì´ë„ˆê°€ ì¤€ë¹„ë˜ì—ˆëŠ”ì§€ ì²´í¬í•˜ê³  ì •ìƒì ìœ¼ë¡œ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ë‹¤ë©´ Podìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì œì™¸í•©ë‹ˆë‹¤ livenessProbeì™€ ì°¨ì´ì ì€ ë¬¸ì œê°€ ìˆì–´ë„ Podì„ ì¬ì‹œì‘í•˜ì§€ ì•Šê³  ìš”ì²­ë§Œ ì œì™¸í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë‚´ spec.containers.readinessProbe ë¥¼ ì •ì˜í•¨ìœ¼ë¡œì¨ Container ë‚´ readinessProbe ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. apiVersion: v1kind: Podmetadata: name: echo-rp labels: app: echospec: containers: - name: app image: ghcr.io/subicura/echo:v1 readinessProbe: httpGet: path: /not/exist port: 8080 initialDelaySeconds: 5 timeoutSeconds: 2 # Default 1 periodSeconds: 5 # Defaults 10 failureThreshold: 1 # Defaults 3 ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆPod ì—ëŠ” í•œê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. apiVersion: v1kind: Podmetadata: name: counter labels: app: counterspec: containers: - name: app image: ghcr.io/subicura/counter:latest env: - name: REDIS_HOST value: &quot;localhost&quot; - name: db image: redis Pod ë‚´ ì´ ì»¨í…Œì´ë„ˆ ìˆ˜ê°€ 2ë¡œ ëŠ˜ì–´ë‚œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Pod ë‚´ Container ëª©ë¡ì„ í™•ì¸í•´ë³´ë©´ app Conatainer ì™€ db Container ê°€ ì‹¤í–‰ë¼ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. kubectl get pods &lt;pod-name&gt; -o jsonpath=&#x27;&#123;.spec.containers[*].name&#125;&#x27;","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"ì›Œí¬ë¡œë“œ","slug":"Kubernetes/ì›Œí¬ë¡œë“œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/"}],"tags":[]},{"title":"[Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸°","slug":"devops/cicd/jenkins/helm/helm-jenkins-01-install","date":"2023-02-07T21:31:46.000Z","updated":"2025-03-29T04:27:11.300Z","comments":true,"path":"2023/02/08/devops/cicd/jenkins/helm/helm-jenkins-01-install/","link":"","permalink":"https://ckck803.github.io/2023/02/08/devops/cicd/jenkins/helm/helm-jenkins-01-install/","excerpt":"ëª©ì°¨ [Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸° [Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸° [Jenkins] - Agent ì¶”ê°€í•˜ê¸° [Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸° ì°¸ê³  Helm Repository https://artifacthub.io/packages/helm/jenkinsci/jenkins í…Œë§ˆ ë³€ê²½ https://jojoldu.tistory.com/343 âœ… value.yaml ì¤€ë¹„Jenkins ë¥¼ ì„¤ì¹˜í•˜ê¸° ì•ì„œ ì–´ë–¤ JDK ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í• ì§€, Jenkins ì„¤ì •ì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ storage ìœ í˜•ì€ ì–´ë–¤ê±¸ ì‚¬ìš©í• ì§€, Jenkins Pod ê°€ ì–´ë–¤ ë…¸ë“œì— ëœ°ì§€, í˜„ì¬ í•œêµ­ì‹œê°„ì— ë§ê²Œ CICD ê°€ ëŒì•„ê°€ê¸° ìœ„í•œ ì‚¬ì „ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. 1. Jenkins ë²„ì „ ë° JDK ë²„ì „ ì„¤ì •Jenkins Controller ì— ì–´ë–¤ Image ë¥¼ ì‚¬ìš©í• ì§€ì— ëŒ€í•œ ì„¤ì •ì„ í•´ì¤€ë‹¤. values-jenkins.yamlcontroller: componentName: &quot;jenkins-controller&quot; image: &quot;jenkins/jenkins&quot; tag: &quot;jdk11&quot; tagLabel: jdk11 imagePullPolicy: &quot;Always&quot;","text":"ëª©ì°¨ [Jenkins] - Jenkinsfile ì‘ì„±í•˜ê¸° [Jenkins] - Gitea ì™€ ì—°ë™í•˜ê¸° [Jenkins] - Agent ì¶”ê°€í•˜ê¸° [Jenkins] - Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜í•˜ê¸° ì°¸ê³  Helm Repository https://artifacthub.io/packages/helm/jenkinsci/jenkins í…Œë§ˆ ë³€ê²½ https://jojoldu.tistory.com/343 âœ… value.yaml ì¤€ë¹„Jenkins ë¥¼ ì„¤ì¹˜í•˜ê¸° ì•ì„œ ì–´ë–¤ JDK ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í• ì§€, Jenkins ì„¤ì •ì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ storage ìœ í˜•ì€ ì–´ë–¤ê±¸ ì‚¬ìš©í• ì§€, Jenkins Pod ê°€ ì–´ë–¤ ë…¸ë“œì— ëœ°ì§€, í˜„ì¬ í•œêµ­ì‹œê°„ì— ë§ê²Œ CICD ê°€ ëŒì•„ê°€ê¸° ìœ„í•œ ì‚¬ì „ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. 1. Jenkins ë²„ì „ ë° JDK ë²„ì „ ì„¤ì •Jenkins Controller ì— ì–´ë–¤ Image ë¥¼ ì‚¬ìš©í• ì§€ì— ëŒ€í•œ ì„¤ì •ì„ í•´ì¤€ë‹¤. values-jenkins.yamlcontroller: componentName: &quot;jenkins-controller&quot; image: &quot;jenkins/jenkins&quot; tag: &quot;jdk11&quot; tagLabel: jdk11 imagePullPolicy: &quot;Always&quot; 2. StorageClass ìƒì„± ë° ì§€ì •StogeClass ë¡œ AWS ì˜ EBS ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ìš°ì„ ì€ StorageClass ë¥¼ ìƒì„±í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. jenkins-storageclass.yamlapiVersion: storage.k8s.io/v1kind: StorageClass metadata: name: jenkins-ebs namespace: cicdvolumeBindingMode: Immediate# volumeBindingMode: WaitForFirstConsumer provisioner: ebs.csi.aws.comparameters: type: gp3reclaimPolicy: Retain# reclaimPolicy: Delete ìƒì„±ëœ StorageClass ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ value ë¥¼ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤. values-jenkins.yamlpersistence: enabled: true storageClass: jenkins-ebs annotations: &#123;&#125; labels: &#123;&#125; accessMode: &quot;ReadWriteOnce&quot; size: &quot;20Gi&quot; 3. Node Group ì„ íƒvalues-jenkins.yamlcontroller: nodeSelector: nodegroup-role: cicd 4. Timezone ë³€ê²½Jenkins ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë¹Œë“œë¥¼ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ì¤‘ì— í˜„ì¬ ì‹œê°„ê³¼ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ë‹¤ëŠ” ê²ƒì„ ì•Œê²ŒëìŠµë‹ˆë‹¤. í•œêµ­ì‹œê°„ì— ë§ê²Œ timezone ì„ ì„¸íŒ…í•´ì¤ë‹ˆë‹¤. values-jenkins.yamlcontroller: javaOpts: &quot;-Dorg.apache.commons.jelly.tags.fmt.timeZone=Asia/Seoul&quot; âœ… Helm ì„ ì´ìš©í•œ Jenkins ì„¤ì¹˜Jenkins ë¥¼ ì„¤ì¹˜í•˜ê³ ì í•˜ëŠ” Kubernetes ì˜ Namespace ì™€ Version ì„ ì„¤ì •í•œ í›„ ì„¤ì¹˜ë¥¼ ì§„í–‰í•œë‹¤. helm repo add jenkins https://charts.jenkins.iohelm upgrade --install jenkins jenkins/jenkins --version &lt;version&gt; -n &lt;namespace&gt; --create-namespace Jenkins ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ë©´ admin Passwrod ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë°©ë²•ê³¼ í¬íŠ¸í¬ì›Œë”©ì„ í†µí•´ jenkins ì— ì ‘ì†í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì„¤ëª…ì´ ë‚˜ì˜¨ë‹¤. NAME: jenkinsLAST DEPLOYED: Tue Mar 7 15:11:52 2023NAMESPACE: cicdSTATUS: deployedREVISION: 1NOTES:1. Get your &#x27;admin&#x27; user password by running: kubectl exec --namespace cicd -it svc/jenkins -c jenkins -- /bin/cat /run/secrets/additional/chart-admin-password &amp;&amp; echo1. Get the Jenkins URL to visit by running these commands in the same shell: echo http://127.0.0.1:8080 kubectl --namespace cicd port-forward svc/jenkins 8080:80801. Login with the password from step 1 and the username: admin2. Configure security realm and authorization strategy3. Use Jenkins Configuration as Code by specifying configScripts in your values.yaml file, see documentation: http://127.0.0.1:8080/configuration-as-code and examples: https://github.com/jenkinsci/configuration-as-code-plugin/tree/master/demosFor more information on running Jenkins on Kubernetes, visit:https://cloud.google.com/solutions/jenkins-on-container-engineFor more information about Jenkins Configuration as Code, visit:https://jenkins.io/projects/jcasc/NOTE: Consider using a custom image with pre-installed plugins âœ… 4. Jenkins Admin Password í™•ì¸ ë° ì ‘ì†# ì‹¤í–‰kubectl exec -n cicd -it svc/jenkins -c jenkins -- /bin/cat /run/secrets/additional/chart-admin-password &amp;&amp; echo# ê²°ê³¼t2Xx7SyhfFGsCyu4OJ3huw kubectl exec \\ -n cicd \\ -it jenkins-0 \\ -c jenkins \\ -- /bin/cat /var/jenkins_home/casc_configs/jcasc-default-config.yaml &amp;&amp; echo jenkins: authorizationStrategy: loggedInUsersCanDoAnything: allowAnonymousRead: false securityRealm: local: allowsSignup: false enableCaptcha: false users: - id: &quot;$&#123;chart-admin-username&#125;&quot; name: &quot;Jenkins Admin&quot; password: &quot;$&#123;chart-admin-password&#125;&quot; disableRememberMe: false mode: NORMAL numExecutors: 0 labelString: &quot;&quot; projectNamingStrategy: &quot;standard&quot; markupFormatter: plainText clouds: - kubernetes: containerCapStr: &quot;10&quot; defaultsProviderTemplate: &quot;&quot; connectTimeout: &quot;5&quot; readTimeout: &quot;15&quot; jenkinsUrl: &quot;http://jenkins.cicd.svc.cluster.local:8080&quot; jenkinsTunnel: &quot;jenkins-agent.cicd.svc.cluster.local:50000&quot; maxRequestsPerHostStr: &quot;32&quot; name: &quot;kubernetes&quot; namespace: &quot;cicd&quot; serverUrl: &quot;https://kubernetes.default&quot; crumbIssuer: standard: excludeClientIPFromCrumb: truesecurity: apiToken: creationOfLegacyTokenEnabled: false tokenGenerationOnCreationEnabled: false usageStatisticsEnabled: trueunclassified: location: adminAddress: url: https://jenkins.mbcp.co.kr/","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"},{"name":"Jenkins","slug":"DevOps/CICD/Jenkins","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Jenkins/"}],"tags":[]},{"title":"Jenkins - MultiBranch Pipeline","slug":"devops/cicd/jenkins/multibranch/multibranch-pipeline-01","date":"2023-02-07T21:31:46.000Z","updated":"2025-03-29T03:41:24.096Z","comments":true,"path":"2023/02/08/devops/cicd/jenkins/multibranch/multibranch-pipeline-01/","link":"","permalink":"https://ckck803.github.io/2023/02/08/devops/cicd/jenkins/multibranch/multibranch-pipeline-01/","excerpt":"Jenkinsfile MultiBranch Scan Webhook Trigger MultiBranch ì—ì„œ Webhook ì„ ì´ìš©í•œ Build ìœ ë°œì‹œ ì‚¬ìš©í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ ë§í¬ https://plugins.jenkins.io/multibranch-scan-webhook-trigger/","text":"Jenkinsfile MultiBranch Scan Webhook Trigger MultiBranch ì—ì„œ Webhook ì„ ì´ìš©í•œ Build ìœ ë°œì‹œ ì‚¬ìš©í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ ë§í¬ https://plugins.jenkins.io/multibranch-scan-webhook-trigger/","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"},{"name":"Jenkins","slug":"DevOps/CICD/Jenkins","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Jenkins/"}],"tags":[]},{"title":"Jenkins X","slug":"devops/cicd/jenkins/jenkinsx","date":"2023-02-06T21:31:46.000Z","updated":"2025-03-29T03:41:17.020Z","comments":true,"path":"2023/02/07/devops/cicd/jenkins/jenkinsx/","link":"","permalink":"https://ckck803.github.io/2023/02/07/devops/cicd/jenkins/jenkinsx/","excerpt":"ê³µì‹ í™ˆí˜ì´ì§€ https://www.jenkins.io/ Jenkins Xcurl -L https://github.com/jenkins-x/jx/releases/download/v3.10.83/jx-darwin-amd64.tar.gz | tar xzvchmod +x jx sudo mv jx /usr/local/bin minikube delete minikube start --cpus 4 --memory 6048 --disk-size=100g --addons=ingress --kubernetes-version=1.24 for i in $(kubectl get deploy -n msa|grep -v NAME awk (print $1)) ; do kubectl scale deploy&#x2F;st -n msa â€“replicas&#x3D;1g done for i in $(kubectl get pod|grep -v NAME awk (print $1)) ;","text":"ê³µì‹ í™ˆí˜ì´ì§€ https://www.jenkins.io/ Jenkins Xcurl -L https://github.com/jenkins-x/jx/releases/download/v3.10.83/jx-darwin-amd64.tar.gz | tar xzvchmod +x jx sudo mv jx /usr/local/bin minikube delete minikube start --cpus 4 --memory 6048 --disk-size=100g --addons=ingress --kubernetes-version=1.24 for i in $(kubectl get deploy -n msa|grep -v NAME awk (print $1)) ; do kubectl scale deploy&#x2F;st -n msa â€“replicas&#x3D;1g done for i in $(kubectl get pod|grep -v NAME awk (print $1)) ;","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"},{"name":"Jenkins","slug":"DevOps/CICD/Jenkins","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Jenkins/"}],"tags":[]},{"title":"Jenkins","slug":"devops/cicd/jenkins/jenkins","date":"2023-02-06T21:31:46.000Z","updated":"2025-03-29T03:41:12.933Z","comments":true,"path":"2023/02/07/devops/cicd/jenkins/jenkins/","link":"","permalink":"https://ckck803.github.io/2023/02/07/devops/cicd/jenkins/jenkins/","excerpt":"ê³µì‹ í™ˆí˜ì´ì§€ https://www.jenkins.io/ Jenkins ë€ Jenkins ì€ ì§€ì†ì  í†µí•© (Continuous Ingegration) ë° ì§€ì†ì ì¸ ë°°í¬ (Continuous Deployment) ì„ ìœ„í•œ ìë™í™” ë„êµ¬ ë‹¤. ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™” í•˜ì—¬ ì†Œí”„íŠ¸ì›¨ì–´ í’ˆì§ˆê³¼ ìƒì‚°ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤. JenkinsëŠ” ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ì™€ ê°™ì€ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ìƒëª…ì£¼ê¸°ì˜ ë‹¤ì–‘í•œ ë‹¨ê³„ë¥¼ ìë™í™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ê°œë°œìë“¤ì€ Jenkinsë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ë³€ê²½ ì‚¬í•­ì„ ìë™ìœ¼ë¡œ ë¹Œë“œí•˜ê³  í…ŒìŠ¤íŠ¸í•˜ì—¬ ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ì „ì— ë¹ ë¥´ê²Œ ë°œê²¬í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ Jenkinsë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ì½”ë“œë¥¼ ë°°í¬í•˜ê¸° ì „ì— ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ê³ , ì„œë²„ì— ìë™ìœ¼ë¡œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JenkinsëŠ” ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ì¸ì„ ì§€ì›í•˜ì—¬ ë‹¤ì–‘í•œ ì–¸ì–´, í”„ë ˆì„ì›Œí¬, ë„êµ¬ ë“±ì„ ì§€ì›í•˜ë©°, ì‚¬ìš©ìê°€ ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. JenkinsëŠ” ììœ ë¡­ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ, ë§ì€ ê°œë°œìë“¤ì´ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©°, ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œë„ ì¶©ë¶„íˆ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤. ì§€ì†ì  í†µí•© (Continuous Integration) ì´ë€?","text":"ê³µì‹ í™ˆí˜ì´ì§€ https://www.jenkins.io/ Jenkins ë€ Jenkins ì€ ì§€ì†ì  í†µí•© (Continuous Ingegration) ë° ì§€ì†ì ì¸ ë°°í¬ (Continuous Deployment) ì„ ìœ„í•œ ìë™í™” ë„êµ¬ ë‹¤. ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™” í•˜ì—¬ ì†Œí”„íŠ¸ì›¨ì–´ í’ˆì§ˆê³¼ ìƒì‚°ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤. JenkinsëŠ” ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ì™€ ê°™ì€ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ìƒëª…ì£¼ê¸°ì˜ ë‹¤ì–‘í•œ ë‹¨ê³„ë¥¼ ìë™í™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ê°œë°œìë“¤ì€ Jenkinsë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ë³€ê²½ ì‚¬í•­ì„ ìë™ìœ¼ë¡œ ë¹Œë“œí•˜ê³  í…ŒìŠ¤íŠ¸í•˜ì—¬ ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ì „ì— ë¹ ë¥´ê²Œ ë°œê²¬í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ Jenkinsë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ì½”ë“œë¥¼ ë°°í¬í•˜ê¸° ì „ì— ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ê³ , ì„œë²„ì— ìë™ìœ¼ë¡œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JenkinsëŠ” ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ì¸ì„ ì§€ì›í•˜ì—¬ ë‹¤ì–‘í•œ ì–¸ì–´, í”„ë ˆì„ì›Œí¬, ë„êµ¬ ë“±ì„ ì§€ì›í•˜ë©°, ì‚¬ìš©ìê°€ ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. JenkinsëŠ” ììœ ë¡­ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ, ë§ì€ ê°œë°œìë“¤ì´ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©°, ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œë„ ì¶©ë¶„íˆ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤. ì§€ì†ì  í†µí•© (Continuous Integration) ì´ë€? ê°œë°œìê°€ ì£¼ê¸°ì ìœ¼ë¡œ ì½”ë“œì˜ ë³€ê²½ ì‚¬í•­ì„ ì¤‘ì•™ ì €ì¥ì†Œ (Github, GitLab, Bitbucket â€¦) ì— ë³‘í•©í•˜ë„ë¡ í•˜ëŠ” ë°©ë²• ì§€ì†ì  í†µí•©ì€ ì†ŒìŠ¤&#x2F;ë³€ê²½ ê´€ë¦¬ì‹œìŠ¤í…œì— ì •ê¸°ì ìœ¼ë¡œ Commit í•˜ëŠ” ì‘ì—… ë¶€í„° ì‹œì‘í•´ ê°™ì€ ê¸°ë°˜ì—ì„œ Build ë° í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë˜ë„ë¡ í•œë‹¤.Commit í• ë•Œë§ˆë‹¤ ë¹Œë“œì™€ í…ŒìŠ¤íŠ¸ê°€ ìë™ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ë™ì‘ì„ í™•ì¸í•˜ê³  ë³€ê²½ìœ¼ë¡œ ì¸í•´ ë¬¸ì œê°€ ìƒê¸°ëŠ” ë¶€ë¶„ì´ ì—†ë„ë¡ í•œë‹¤. ì§€ì†ì  ì „ë‹¬ (Continuous Delivery) ì´ë€?","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"},{"name":"Jenkins","slug":"DevOps/CICD/Jenkins","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Jenkins/"}],"tags":[]},{"title":"Harbor","slug":"devops/repository/harbor/harbor","date":"2023-02-06T21:31:46.000Z","updated":"2025-03-29T03:39:03.072Z","comments":true,"path":"2023/02/07/devops/repository/harbor/harbor/","link":"","permalink":"https://ckck803.github.io/2023/02/07/devops/repository/harbor/harbor/","excerpt":"ê³µì‹ í™ˆí˜ì´ì§€ https://goharbor.io/ Harbor","text":"ê³µì‹ í™ˆí˜ì´ì§€ https://goharbor.io/ Harbor","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"Repository","slug":"DevOps/Repository","permalink":"https://ckck803.github.io/categories/DevOps/Repository/"}],"tags":[]},{"title":"EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ","slug":"aws/eks/eks-eksctl","date":"2023-01-31T20:31:07.000Z","updated":"2024-02-18T16:19:54.516Z","comments":true,"path":"2023/02/01/aws/eks/eks-eksctl/","link":"","permalink":"https://ckck803.github.io/2023/02/01/aws/eks/eks-eksctl/","excerpt":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  eksctl Documnet https://eksctl.io/ eksctlë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„±í•˜ê¸° https://catalog.us-east-1.prod.workshops.aws/workshops/9c0aa9ab-90a9-44a6-abe1-8dff360ae428/ko-KR/50-eks-cluster/100-launch-cluster Amazon EKSì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë“œ ë°¸ëŸ°ì‹± https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html ë‚˜ë§Œì˜ k8s í´ëŸ¬ìŠ¤í„° êµ¬ì¶•í•˜ê¸° https://coffeewhale.com/kubernetes/cluster/eks/2020/09/03/k8s-eks/ EKSCTL ë¥¼ ì´ìš©í•œ EKS êµ¬ì„± https://kingofbackend.tistory.com/235 eksctl ì„¤ì¹˜ MAC OS # mac osbrew tap weaveworks/tapbrew install weaveworks/tap/eksctl Linux # eksctl ëª…ë ¹ì–´ ì„¤ì¹˜curl --silent --location &quot;https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz&quot; | tar xz -C /tmp# ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ bin íŒŒì¼ë¡œ ì´ë™sudo mv /tmp/eksctl /usr/local/bin","text":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) ì°¸ê³  eksctl Documnet https://eksctl.io/ eksctlë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„±í•˜ê¸° https://catalog.us-east-1.prod.workshops.aws/workshops/9c0aa9ab-90a9-44a6-abe1-8dff360ae428/ko-KR/50-eks-cluster/100-launch-cluster Amazon EKSì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë“œ ë°¸ëŸ°ì‹± https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html ë‚˜ë§Œì˜ k8s í´ëŸ¬ìŠ¤í„° êµ¬ì¶•í•˜ê¸° https://coffeewhale.com/kubernetes/cluster/eks/2020/09/03/k8s-eks/ EKSCTL ë¥¼ ì´ìš©í•œ EKS êµ¬ì„± https://kingofbackend.tistory.com/235 eksctl ì„¤ì¹˜ MAC OS # mac osbrew tap weaveworks/tapbrew install weaveworks/tap/eksctl Linux # eksctl ëª…ë ¹ì–´ ì„¤ì¹˜curl --silent --location &quot;https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz&quot; | tar xz -C /tmp# ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ bin íŒŒì¼ë¡œ ì´ë™sudo mv /tmp/eksctl /usr/local/bin ëª…ë ¹ì–´ë¥¼ í†µí•œ Cluster ì„¤ì¹˜eksctl ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ aws ì— ìƒì„±í•˜ê³ ì í•˜ëŠ” Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. EKS í´ëŸ¬ìŠ¤í„° ìƒì„±ì‹œ NodeGroup ê³¼ Node ë“¤ì´ í•œë²ˆì— ì„¤ì¹˜ëœ ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. cluster-name: ìƒˆë¡œìš´ EKS í´ëŸ¬ìŠ¤í„°ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. aws-region: í´ëŸ¬ìŠ¤í„°ê°€ ìƒì„±ë  AWS ë¦¬ì „ì„ ì§€ì •í•©ë‹ˆë‹¤. ap-northeast-2 (ì„œìš¸) nodegroup-name: ë…¸ë“œ ê·¸ë£¹ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. instance-type: ë…¸ë“œ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ì§€ì •í•©ë‹ˆë‹¤. t3.xlarge, m5.large number-of-nodes: ìƒì„±í•  ë…¸ë“œì˜ ìˆ˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. eksctl create cluster \\ --name &lt;cluster-name&gt; \\ --version &lt;Kubernetes ë²„ì „&gt; --region &lt;aws-region&gt; \\ --nodegroup-name &lt;nodegroup-name&gt; \\ --node-type &lt;instance-type&gt; \\ --nodes &lt;number-of-nodes&gt; Cluster ë§Œ ìš°ì„  ìƒì„±Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ìš°ì„  ìƒì„±í•˜ê³  ì´í›„ì— NodeGroup ì„ ì¶”ê°€í•˜ê³  ì‹¶ì„ ë•Œ create ëª…ë ¹ì–´ ì‹¤í–‰ì‹œ --without-nodegroup ì˜µì…˜ì„ ì£¼ë©´ EKS Cluster ë§Œ ìƒì„±ëœ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤. eksctl create cluster \\ --name &lt;cluster-name&gt; \\ --version &lt;Kubernetes ë²„ì „&gt; --region &lt;aws-region&gt; \\ --without-nodegroup ClusterConfig íŒŒì¼ì„ ì´ìš©í•œ ì„¤ì¹˜ClusterConfig ë¥¼ yaml íŒŒì¼ë¡œ ìƒì„±í•´ì¤ë‹ˆë‹¤. ---apiVersion: eksctl.io/v1alpha5kind: ClusterConfigmetadata: name: eks-demo # ìƒì„±í•  EKS í´ëŸ¬ìŠ¤í„°ëª… region: $&#123;AWS_REGION&#125; # í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ë¦¬ì „ version: &quot;1.23&quot;vpc: cidr: &quot;10.0.0.0/16&quot; # í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©í•  VPCì˜ CIDR nat: gateway: HighlyAvailablemanagedNodeGroups: - name: node-group # í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œ ê·¸ë£¹ëª… instanceType: m5.large # í´ëŸ¬ìŠ¤í„° ì›Œì»¤ ë…¸ë“œì˜ ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… desiredCapacity: 3 # í´ëŸ¬ìŠ¤í„° ì›Œì»¤ ë…¸ë“œì˜ ê°¯ìˆ˜ volumeSize: 20 # í´ëŸ¬ìŠ¤í„° ì›Œì»¤ ë…¸ë“œì˜ EBS ìš©ëŸ‰ (ë‹¨ìœ„: GiB) privateNetworking: true ssh: enableSsm: true iam: withAddonPolicies: imageBuilder: true # Amazon ECRì— ëŒ€í•œ ê¶Œí•œ ì¶”ê°€ albIngress: true # albIngressì— ëŒ€í•œ ê¶Œí•œ ì¶”ê°€ cloudWatch: true # cloudWatchì— ëŒ€í•œ ê¶Œí•œ ì¶”ê°€ autoScaler: true # auto scalingì— ëŒ€í•œ ê¶Œí•œ ì¶”ê°€ ebs: true # EBS CSI Driverì— ëŒ€í•œ ê¶Œí•œ ì¶”ê°€cloudWatch: clusterLogging: enableTypes: [&quot;*&quot;]iam: withOIDC: true ìƒì„±ëœ ClusterConfig íŒŒì¼ì„ eksctl ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ cluster ë¥¼ ìƒì„±í•´ì£¼ë„ë¡ í•œë‹¤. eksctl create cluster -f eks-demo-cluster.yaml 3ê°œì˜ Node ë¥¼ ê°–ê³  ìˆëŠ” í´ëŸ¬ìŠ¤í„° ì•„í‚¤í…ì²˜ Kube Config ì— ìƒˆë¡œìš´ í´ëŸ¬ìŠ¤í„° ì¶”ê°€aws eks update-kubeconfig \\ --region [aws-region]\\ --name [eks í´ëŸ¬ìŠ¤í„° ì´ë¦„] \\ --role-arn [AWS Role] \\ --profile [AWS Profile] Eksctl Cluster ì‚­ì œeksctl ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ ì‚­ì œí•˜ê³  ì‹¶ì€ cluster ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. eksctl delete cluster --name &lt;cluster name&gt; ì‚­ì œ ë¡œê·¸ 3ê°œ ë…¸ë“œë¡œeksctl create cluster \\ --name user10-eks3 --version 1.25 \\ --node-type t3.medium --nodes 3 \\ --nodes-min 1 \\ --node-volume-type gp3 \\ --nodes-max 3 \\ --asg-access \\ --full-ecr-access --spot \\ --with-oidc --managed \\ kubectl get nodesNAME STATUS ROLES AGE VERSIONip-192-168-16-29.ap-northeast-1.compute.internal Ready &lt;none&gt; 79m v1.22.17-eks-0a21954ip-192-168-46-125.ap-northeast-1.compute.internal Ready &lt;none&gt; 79m v1.22.17-eks-0a21954ip-192-168-77-21.ap-northeast-1.compute.internal Ready &lt;none&gt; 79m v1.22.17-eks-0a21954","categories":[{"name":"AWS","slug":"AWS","permalink":"https://ckck803.github.io/categories/AWS/"},{"name":"EKS","slug":"AWS/EKS","permalink":"https://ckck803.github.io/categories/AWS/EKS/"}],"tags":[]},{"title":"React - React Router Dom ì‚¬ìš©í•˜ê¸°","slug":"react/react-router.dom","date":"2023-01-23T21:31:46.000Z","updated":"2024-11-23T16:48:07.878Z","comments":true,"path":"2023/01/24/react/react-router.dom/","link":"","permalink":"https://ckck803.github.io/2023/01/24/react/react-router.dom/","excerpt":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° React Router Dom ì¶”ê°€í•˜ê¸°# npm ì‚¬ìš©npm install react-router-dom# yarn ì‚¬ìš©yarn add react-router-dom","text":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° React Router Dom ì¶”ê°€í•˜ê¸°# npm ì‚¬ìš©npm install react-router-dom# yarn ì‚¬ìš©yarn add react-router-dom","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Redux","slug":"Frontend/Redux","permalink":"https://ckck803.github.io/categories/Frontend/Redux/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - etcd","slug":"k8s/k8s/etcd","date":"2023-01-10T21:31:46.000Z","updated":"2024-02-18T16:19:54.540Z","comments":true,"path":"2023/01/11/k8s/k8s/etcd/","link":"","permalink":"https://ckck803.github.io/2023/01/11/k8s/k8s/etcd/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane ì¿ ë²„ë„¤í‹°ìŠ¤ ì°¸ê³  ê³µì‹ë¬¸ì„œ https://kubernetes.io/ko/docs/concepts/overview/components/ https://malwareanalysis.tistory.com/512 etcdì¿ ë²„ë„¤í‹°ìŠ¤(etcd)ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœì™€ êµ¬ì„± ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë¶„ì‚° í‚¤-ê°’ ì €ì¥ì†Œì…ë‹ˆë‹¤. etcdëŠ” ì‹ ë¢°ì„±ê³¼ ì¼ê´€ì„±ì„ ì œê³µí•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ì•ˆì •ì ì¸ ë™ì‘ì„ ë³´ì¥í•©ë‹ˆë‹¤. etcdëŠ” ë¶„ì‚° í™˜ê²½ì—ì„œ ë™ì‘í•˜ëŠ” ì¼ê´€ì„± ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¡œì„œ, ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” ë‹¤ì–‘í•œ ë¬¸ì œì— ëŒ€ì‘í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ Raftë¼ëŠ” í•©ì˜ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ì¼ê´€ì„± ìˆëŠ” ë³µì œë¥¼ ì œê³µí•©ë‹ˆë‹¤. Raft ì•Œê³ ë¦¬ì¦˜ì€ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë…¸ë“œ ê°„ì— ì¼ê´€ëœ ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  ë¦¬ë” ë…¸ë“œì˜ ì„ íƒê³¼ ë¡œê·¸ ë³µì œë¥¼ í†µí•´ ì•ˆì •ì„±ì„ ë³´ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ëª¨ë“  êµ¬ì„± ìš”ì†ŒëŠ” etcdì— ìƒíƒœ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì´ ì •ë³´ì—ëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œ, íŒŸ, ì„œë¹„ìŠ¤, ë³¼ë¥¨, ì„¤ì • ë“±ì˜ ë°ì´í„°ê°€ í¬í•¨ë©ë‹ˆë‹¤. etcdëŠ” ì´ëŸ¬í•œ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìœ ì§€í•˜ê³  ë³€ê²½ ì‚¬í•­ì„ ê´€ë¦¬í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  êµ¬ì„± ìš”ì†Œê°€ í•­ìƒ ì¼ê´€ëœ ìƒíƒœë¡œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ, etcdëŠ” ë¶„ì‚° í™˜ê²½ì—ì„œ ì•ˆì •ì ì¸ ë°ì´í„° ì €ì¥ì†Œë¡œì„œ ë™ì‘í•˜ë¯€ë¡œ, ì¥ì• ê°€ ë°œìƒí•˜ê±°ë‚˜ ë…¸ë“œê°€ ì¶”ê°€ë˜ê±°ë‚˜ ì œê±°ë  ë•Œì—ë„ í´ëŸ¬ìŠ¤í„°ì˜ ì•ˆì •ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. etcdëŠ” ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ë…¸ë“œì— ë³µì œí•˜ì—¬ ê°€ìš©ì„±ê³¼ ë‚´ê²°í•¨ì„±ì„ ë³´ì¥í•˜ë©°, í•„ìš”ì— ë”°ë¼ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë³µêµ¬í•˜ì—¬ ì‹œìŠ¤í…œì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane ì¿ ë²„ë„¤í‹°ìŠ¤ ì°¸ê³  ê³µì‹ë¬¸ì„œ https://kubernetes.io/ko/docs/concepts/overview/components/ https://malwareanalysis.tistory.com/512 etcdì¿ ë²„ë„¤í‹°ìŠ¤(etcd)ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœì™€ êµ¬ì„± ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë¶„ì‚° í‚¤-ê°’ ì €ì¥ì†Œì…ë‹ˆë‹¤. etcdëŠ” ì‹ ë¢°ì„±ê³¼ ì¼ê´€ì„±ì„ ì œê³µí•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ì•ˆì •ì ì¸ ë™ì‘ì„ ë³´ì¥í•©ë‹ˆë‹¤. etcdëŠ” ë¶„ì‚° í™˜ê²½ì—ì„œ ë™ì‘í•˜ëŠ” ì¼ê´€ì„± ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¡œì„œ, ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” ë‹¤ì–‘í•œ ë¬¸ì œì— ëŒ€ì‘í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ Raftë¼ëŠ” í•©ì˜ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ì¼ê´€ì„± ìˆëŠ” ë³µì œë¥¼ ì œê³µí•©ë‹ˆë‹¤. Raft ì•Œê³ ë¦¬ì¦˜ì€ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë…¸ë“œ ê°„ì— ì¼ê´€ëœ ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  ë¦¬ë” ë…¸ë“œì˜ ì„ íƒê³¼ ë¡œê·¸ ë³µì œë¥¼ í†µí•´ ì•ˆì •ì„±ì„ ë³´ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ëª¨ë“  êµ¬ì„± ìš”ì†ŒëŠ” etcdì— ìƒíƒœ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì´ ì •ë³´ì—ëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œ, íŒŸ, ì„œë¹„ìŠ¤, ë³¼ë¥¨, ì„¤ì • ë“±ì˜ ë°ì´í„°ê°€ í¬í•¨ë©ë‹ˆë‹¤. etcdëŠ” ì´ëŸ¬í•œ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìœ ì§€í•˜ê³  ë³€ê²½ ì‚¬í•­ì„ ê´€ë¦¬í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  êµ¬ì„± ìš”ì†Œê°€ í•­ìƒ ì¼ê´€ëœ ìƒíƒœë¡œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ, etcdëŠ” ë¶„ì‚° í™˜ê²½ì—ì„œ ì•ˆì •ì ì¸ ë°ì´í„° ì €ì¥ì†Œë¡œì„œ ë™ì‘í•˜ë¯€ë¡œ, ì¥ì• ê°€ ë°œìƒí•˜ê±°ë‚˜ ë…¸ë“œê°€ ì¶”ê°€ë˜ê±°ë‚˜ ì œê±°ë  ë•Œì—ë„ í´ëŸ¬ìŠ¤í„°ì˜ ì•ˆì •ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. etcdëŠ” ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ë…¸ë“œì— ë³µì œí•˜ì—¬ ê°€ìš©ì„±ê³¼ ë‚´ê²°í•¨ì„±ì„ ë³´ì¥í•˜ë©°, í•„ìš”ì— ë”°ë¼ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë³µêµ¬í•˜ì—¬ ì‹œìŠ¤í…œì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤. ìš”ì•½í•˜ìë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ etcdëŠ” ë¶„ì‚° í‚¤-ê°’ ì €ì¥ì†Œë¡œì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœì™€ êµ¬ì„± ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ì•ˆì •ì ì¸ ìš´ì˜ê³¼ í™•ì¥ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"êµ¬ì„±ìš”ì†Œ","slug":"Kubernetes/êµ¬ì„±ìš”ì†Œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane","slug":"k8s/k8s/data_plane","date":"2023-01-09T21:31:46.000Z","updated":"2024-02-18T16:19:54.539Z","comments":true,"path":"2023/01/10/k8s/k8s/data_plane/","link":"","permalink":"https://ckck803.github.io/2023/01/10/k8s/k8s/data_plane/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane ì¿ ë²„ë„¤í‹°ìŠ¤ ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ Data Plane ì´ë€ë°ì´í„° í”Œë ˆì¸ì€ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì˜ í†µì‹ ê³¼ ë„¤íŠ¸ì›Œí¬ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. Data Planeì€ Kubernetes Worker Nodeì— ìœ„ì¹˜í•œ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ í™˜ê²½ê³¼ ê´€ë ¨ëœ êµ¬ì„± ìš”ì†Œë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê° Worker Nodeì—ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì—ì„œ ì œì–´ë˜ëŠ” íŒŒë“œ(Pod)ê°€ ë°°ì¹˜ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ íŒŒë“œëŠ” ê°ê° í•˜ë‚˜ ì´ìƒì˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©°, ì´ ì»¨í…Œì´ë„ˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Data Planeì˜ í•µì‹¬ êµ¬ì„± ìš”ì†Œ ì¤‘ í•˜ë‚˜ëŠ” kube-proxyì…ë‹ˆë‹¤. kube-proxyëŠ” ì„œë¹„ìŠ¤(Services)ë¥¼ ì²˜ë¦¬í•˜ë©°, í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì˜ íŒŒë“œì™€ ì„œë¹„ìŠ¤ ê°„ì˜ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ kube-proxyëŠ” íŒŒë“œì™€ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê°€ìƒ IP ì£¼ì†Œë¥¼ í• ë‹¹í•˜ê³ , ì´ë¥¼ í†µí•´ ë¼ìš°íŒ…í•˜ë©°, ë¡œë“œ ë°¸ëŸ°ì‹±ê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë˜ ë‹¤ë¥¸ ì¤‘ìš”í•œ êµ¬ì„± ìš”ì†ŒëŠ” ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤(CNI) í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤. CNI í”ŒëŸ¬ê·¸ì¸ì€ í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œì™€ íŒŒë“œì— í• ë‹¹ëœ IP ì£¼ì†Œë¥¼ ê´€ë¦¬í•˜ê³ , ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆì„ ì œê³µí•˜ë©°, ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ì œì–´í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane ì¿ ë²„ë„¤í‹°ìŠ¤ ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ Data Plane ì´ë€ë°ì´í„° í”Œë ˆì¸ì€ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì˜ í†µì‹ ê³¼ ë„¤íŠ¸ì›Œí¬ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. Data Planeì€ Kubernetes Worker Nodeì— ìœ„ì¹˜í•œ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ í™˜ê²½ê³¼ ê´€ë ¨ëœ êµ¬ì„± ìš”ì†Œë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê° Worker Nodeì—ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì—ì„œ ì œì–´ë˜ëŠ” íŒŒë“œ(Pod)ê°€ ë°°ì¹˜ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ íŒŒë“œëŠ” ê°ê° í•˜ë‚˜ ì´ìƒì˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©°, ì´ ì»¨í…Œì´ë„ˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Data Planeì˜ í•µì‹¬ êµ¬ì„± ìš”ì†Œ ì¤‘ í•˜ë‚˜ëŠ” kube-proxyì…ë‹ˆë‹¤. kube-proxyëŠ” ì„œë¹„ìŠ¤(Services)ë¥¼ ì²˜ë¦¬í•˜ë©°, í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì˜ íŒŒë“œì™€ ì„œë¹„ìŠ¤ ê°„ì˜ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ kube-proxyëŠ” íŒŒë“œì™€ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê°€ìƒ IP ì£¼ì†Œë¥¼ í• ë‹¹í•˜ê³ , ì´ë¥¼ í†µí•´ ë¼ìš°íŒ…í•˜ë©°, ë¡œë“œ ë°¸ëŸ°ì‹±ê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë˜ ë‹¤ë¥¸ ì¤‘ìš”í•œ êµ¬ì„± ìš”ì†ŒëŠ” ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤(CNI) í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤. CNI í”ŒëŸ¬ê·¸ì¸ì€ í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œì™€ íŒŒë“œì— í• ë‹¹ëœ IP ì£¼ì†Œë¥¼ ê´€ë¦¬í•˜ê³ , ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆì„ ì œê³µí•˜ë©°, ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ì œì–´í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ êµ¬ì„± ìš”ì†Œë“¤ì€ Kubernetesì˜ Data Planeì—ì„œ ìƒí˜¸ì‘ìš©í•˜ì—¬, ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤ì˜ ì‹¤í–‰ê³¼ ê´€ë¦¬, íŠ¸ë˜í”½ ë¼ìš°íŒ…, ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ë“± ë‹¤ì–‘í•œ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"êµ¬ì„±ìš”ì†Œ","slug":"Kubernetes/êµ¬ì„±ìš”ì†Œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane","slug":"k8s/k8s/control_plane","date":"2023-01-08T21:31:46.000Z","updated":"2024-02-18T16:19:54.539Z","comments":true,"path":"2023/01/09/k8s/k8s/control_plane/","link":"","permalink":"https://ckck803.github.io/2023/01/09/k8s/k8s/control_plane/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane ì¿ ë²„ë„¤í‹°ìŠ¤ ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ Control Plane ì´ë€Control Planeì€ Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ëª¨ë“  ë§¤ë‹ˆì§€ë¨¼íŠ¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì¤‘ì•™ ì§‘ì¤‘í™”ëœ êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤. ì´ê²ƒì€ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ëª¨ë“  ë…¸ë“œì— ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©°, í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ë‹¤ë¥¸ êµ¬ì„± ìš”ì†Œì™€ ìƒí˜¸ ì‘ìš©í•˜ì—¬ Kubernetes ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬, í™•ì¥, ì—…ë°ì´íŠ¸ ë° ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Control Planeì€ í¬ê²Œ ì„¸ ê°€ì§€ ì£¼ìš” ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. API Server í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•˜ê³  Kubernetes APIë¥¼ ë…¸ì¶œí•˜ëŠ” ì¤‘ì•™ ì§‘ì¤‘í™”ëœ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. API ì„œë²„ëŠ” ì‚¬ìš©ìê°€ Kubernetes í´ëŸ¬ìŠ¤í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ë©°, í´ëŸ¬ìŠ¤í„° ë¦¬ì†ŒìŠ¤ë¥¼ ì¡°ì‘í•˜ëŠ” ëª¨ë“  ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. Controller Manager API ì„œë²„ì—ì„œ ë¦¬ì†ŒìŠ¤ ë³€ê²½ ì‚¬í•­ì„ ê°ì§€í•˜ê³  í•´ë‹¹ ë¦¬ì†ŒìŠ¤ ìƒíƒœë¥¼ ì›í•˜ëŠ” ìƒíƒœë¡œ ìœ ì§€í•˜ê¸° ìœ„í•´ ì‹¤í–‰ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë…¸ë“œê°€ ë‹¤ìš´ë˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ ë§¤ë‹ˆì €ëŠ” í•´ë‹¹ ë…¸ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ íŒŒë“œë¥¼ ë‹¤ë¥¸ ë…¸ë“œë¡œ ì´ë™ì‹œí‚¤ê¸° ìœ„í•´ ë™ì‘í•©ë‹ˆë‹¤. etcd í´ëŸ¬ìŠ¤í„° ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ë¶„ì‚°í˜• Key-Value ì €ì¥ì†Œì…ë‹ˆë‹¤. Kubernetes ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì˜ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” etcdë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœë¥¼ ì½ê³  ì“°ê²Œ ë©ë‹ˆë‹¤. etcd ëŠ” ë¶„ì‚°í˜• ì €ì¥ì†Œì´ê¸° ë•Œë¬¸ì— ë°ì´í„° ì¼ê´€ì„±ê³¼ ê°€ìš©ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì»´í¬ë„ŒíŠ¸ëŠ” ëª¨ë‘ Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ìƒí˜¸ì‘ìš©í•˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬, í™•ì¥, ì—…ë°ì´íŠ¸ ë° ê´€ë¦¬í•˜ê¸° ìœ„í•œ ëª¨ë“  ë§¤ë‹ˆì§€ë¨¼íŠ¸ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Control Planeì€ Kubernetes í´ëŸ¬ìŠ¤í„°ì˜ ì¤‘ì‹¬ì ì¸ ì—­í• ì„ ìˆ˜í–‰í•˜ë©°, í´ëŸ¬ìŠ¤í„°ì˜ ì•ˆì •ì„±ê³¼ ê°€ìš©ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane ì¿ ë²„ë„¤í‹°ìŠ¤ ê³µì‹ í™ˆí˜ì´ì§€ https://istio.io/latest/docs/setup/getting-started/ Control Plane ì´ë€Control Planeì€ Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ëª¨ë“  ë§¤ë‹ˆì§€ë¨¼íŠ¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì¤‘ì•™ ì§‘ì¤‘í™”ëœ êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤. ì´ê²ƒì€ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ëª¨ë“  ë…¸ë“œì— ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©°, í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ë‹¤ë¥¸ êµ¬ì„± ìš”ì†Œì™€ ìƒí˜¸ ì‘ìš©í•˜ì—¬ Kubernetes ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬, í™•ì¥, ì—…ë°ì´íŠ¸ ë° ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Control Planeì€ í¬ê²Œ ì„¸ ê°€ì§€ ì£¼ìš” ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. API Server í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•˜ê³  Kubernetes APIë¥¼ ë…¸ì¶œí•˜ëŠ” ì¤‘ì•™ ì§‘ì¤‘í™”ëœ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. API ì„œë²„ëŠ” ì‚¬ìš©ìê°€ Kubernetes í´ëŸ¬ìŠ¤í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ë©°, í´ëŸ¬ìŠ¤í„° ë¦¬ì†ŒìŠ¤ë¥¼ ì¡°ì‘í•˜ëŠ” ëª¨ë“  ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. Controller Manager API ì„œë²„ì—ì„œ ë¦¬ì†ŒìŠ¤ ë³€ê²½ ì‚¬í•­ì„ ê°ì§€í•˜ê³  í•´ë‹¹ ë¦¬ì†ŒìŠ¤ ìƒíƒœë¥¼ ì›í•˜ëŠ” ìƒíƒœë¡œ ìœ ì§€í•˜ê¸° ìœ„í•´ ì‹¤í–‰ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë…¸ë“œê°€ ë‹¤ìš´ë˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ ë§¤ë‹ˆì €ëŠ” í•´ë‹¹ ë…¸ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ íŒŒë“œë¥¼ ë‹¤ë¥¸ ë…¸ë“œë¡œ ì´ë™ì‹œí‚¤ê¸° ìœ„í•´ ë™ì‘í•©ë‹ˆë‹¤. etcd í´ëŸ¬ìŠ¤í„° ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ë¶„ì‚°í˜• Key-Value ì €ì¥ì†Œì…ë‹ˆë‹¤. Kubernetes ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì˜ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” etcdë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœë¥¼ ì½ê³  ì“°ê²Œ ë©ë‹ˆë‹¤. etcd ëŠ” ë¶„ì‚°í˜• ì €ì¥ì†Œì´ê¸° ë•Œë¬¸ì— ë°ì´í„° ì¼ê´€ì„±ê³¼ ê°€ìš©ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì»´í¬ë„ŒíŠ¸ëŠ” ëª¨ë‘ Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ìƒí˜¸ì‘ìš©í•˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬, í™•ì¥, ì—…ë°ì´íŠ¸ ë° ê´€ë¦¬í•˜ê¸° ìœ„í•œ ëª¨ë“  ë§¤ë‹ˆì§€ë¨¼íŠ¸ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Control Planeì€ Kubernetes í´ëŸ¬ìŠ¤í„°ì˜ ì¤‘ì‹¬ì ì¸ ì—­í• ì„ ìˆ˜í–‰í•˜ë©°, í´ëŸ¬ìŠ¤í„°ì˜ ì•ˆì •ì„±ê³¼ ê°€ìš©ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"êµ¬ì„±ìš”ì†Œ","slug":"Kubernetes/êµ¬ì„±ìš”ì†Œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/"}],"tags":[]},{"title":"ì¿ ë²„ë„¤í‹°ìŠ¤","slug":"k8s/k8s/k8s","date":"2023-01-07T21:31:46.000Z","updated":"2024-02-18T16:19:54.540Z","comments":true,"path":"2023/01/08/k8s/k8s/k8s/","link":"","permalink":"https://ckck803.github.io/2023/01/08/k8s/k8s/k8s/","excerpt":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane ì¿ ë²„ë„¤í‹°ìŠ¤ ì°¸ê³  ê³µì‹ë¬¸ì„œ https://kubernetes.io/ko/docs/concepts/overview/components/ https://malwareanalysis.tistory.com/512 ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ë“±ì¥í•˜ê²Œ ëœ ë°°ê²½MSA (Micro Service Architecture) ì˜ ë“±ì¥ê³¼ Container í™”ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë“±ì¥í•˜ê³  ë§ì•„ì§€ë©´ì„œ ì—¬ëŸ¬ í˜¸ìŠ¤íŠ¸ë¡œ êµ¬ì„±ë˜ê³  ë°°í¬ë˜ëŠ” ì„œë¹„ìŠ¤ë“¤ì„ ì¤‘ì•™ì—ì„œ í†µí•©, ê´€ë¦¬í•´ ì¤„ ìˆ˜ ìˆëŠ” í”Œë«í¼ì´ í•„ìš”í•˜ê²Œ ëë‹¤. ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ê°€ìƒí™” ê¸°ìˆ ì¸ ë„ì»¤ëŠ” ë‹¨ì¼ í˜¸ìŠ¤íŠ¸ì— ì»¨í…Œì´ë„ˆ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ëŠ”ë° ì í•©í•˜ë‚˜ ì—¬ëŸ¬ í˜¸ìŠ¤íŠ¸ë¡œ êµ¬ì„±ëœ ì»¨í…Œì´ë„ˆ ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ”ë°ì— ìˆì–´ì„œëŠ” í•œê³„ê°€ ìˆì—ˆë‹¤. ì—¬ëŸ¬ í˜¸ìŠ¤íŠ¸ë¡œ êµ¬ì„±ëœ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ì¤‘ì•™ì—ì„œ í†µí•© ê´€ë¦¬ í•˜ê¸° ìœ„í•´ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”Œë«í¬ì¸ ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ë“±ì¥í•˜ê²Œ ëë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ë€?","text":"ëª©ì°¨ ì¿ ë²„ë„¤í‹°ìŠ¤ - Namespace ì¿ ë²„ë„¤í‹°ìŠ¤ - Ingress Post not found: k8s/deployment/deployment Post not found: k8s/replicaset/replicaset ì¿ ë²„ë„¤í‹°ìŠ¤ - Node ì¿ ë²„ë„¤í‹°ìŠ¤ - Pod ì¿ ë²„ë„¤í‹°ìŠ¤ - Data Plane ì¿ ë²„ë„¤í‹°ìŠ¤ - Control Plane ì¿ ë²„ë„¤í‹°ìŠ¤ ì°¸ê³  ê³µì‹ë¬¸ì„œ https://kubernetes.io/ko/docs/concepts/overview/components/ https://malwareanalysis.tistory.com/512 ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ë“±ì¥í•˜ê²Œ ëœ ë°°ê²½MSA (Micro Service Architecture) ì˜ ë“±ì¥ê³¼ Container í™”ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë“±ì¥í•˜ê³  ë§ì•„ì§€ë©´ì„œ ì—¬ëŸ¬ í˜¸ìŠ¤íŠ¸ë¡œ êµ¬ì„±ë˜ê³  ë°°í¬ë˜ëŠ” ì„œë¹„ìŠ¤ë“¤ì„ ì¤‘ì•™ì—ì„œ í†µí•©, ê´€ë¦¬í•´ ì¤„ ìˆ˜ ìˆëŠ” í”Œë«í¼ì´ í•„ìš”í•˜ê²Œ ëë‹¤. ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ê°€ìƒí™” ê¸°ìˆ ì¸ ë„ì»¤ëŠ” ë‹¨ì¼ í˜¸ìŠ¤íŠ¸ì— ì»¨í…Œì´ë„ˆ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ëŠ”ë° ì í•©í•˜ë‚˜ ì—¬ëŸ¬ í˜¸ìŠ¤íŠ¸ë¡œ êµ¬ì„±ëœ ì»¨í…Œì´ë„ˆ ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ”ë°ì— ìˆì–´ì„œëŠ” í•œê³„ê°€ ìˆì—ˆë‹¤. ì—¬ëŸ¬ í˜¸ìŠ¤íŠ¸ë¡œ êµ¬ì„±ëœ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ì¤‘ì•™ì—ì„œ í†µí•© ê´€ë¦¬ í•˜ê¸° ìœ„í•´ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”Œë«í¬ì¸ ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ë“±ì¥í•˜ê²Œ ëë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ë€? ì¿ ë²„ë„¤í‹°ìŠ¤ë€ ì»¨í…Œì´ë„ˆí™”ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„ ë°°í¬, í™•ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ìë™í™”í•´ì£¼ëŠ” ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”Œë«í¼ ì´ë‹¤. êµ¬ê¸€ì—ì„œ ì‚¬ìš©í•˜ëŠ” Borg ë¥¼ ê¸°ë°˜ìœ¼ë¡œ 2014ë…„ì— ê³µê°œë˜ê³  2015ë…„ì— ë¦¬ëˆ…ìŠ¤ ì¬ë‹¨ ì‚°í•˜ì˜ CNCF (Cloud Native Computing Foundation) ì— ì½”ë“œë¥¼ ê¸°ë¶€í•¨ìœ¼ë¡œì¨ ì˜¤í”ˆ ì†ŒìŠ¤ í”„ë¡œì íŠ¸ê°€ ëë‹¤. ë‹¨ìˆœí•œ ì»¨í…Œì´ë„ˆ í”Œë«í¼ì´ ì•„ë‹Œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤, í´ë¼ìš°ë“œ í”Œë«í¼ì„ ì§€í–¥í•˜ê³  ì»¨í…Œì´ë„ˆë¡œ ì´ë£¨ì–´ì§„ ê²ƒë“¤ì„ ì†ì‰½ê²Œ ë‹´ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ê·¸ë¦‡ ì—­í• ì„ í•œë‹¤. ì„œë²„ë¦¬ìŠ¤, CI&#x2F;CD, ë¨¸ì‹ ëŸ¬ë‹ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì´ ì¿ ë²„ë„¤í‹°ìŠ¤ í”Œë«í¼ ìœ„ì—ì„œ ë™ì‘í•œë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê¸°ëŠ¥ ìŠ¤ì¼€ì¤„ë§ ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬ í• ë•Œ ì–´ë–¤ ë…¸ë“œì— ë°°í¬í• ì§€ ê²°ì •í•œë‹¤. affinity : Pod ë¥¼ íŠ¹ì • ë…¸ë“œì— ë°°í¬í•˜ë„ë¡ í•˜ëŠ” ì •ì±… Hard affinity : Pod ê°€ ì¡°ê±´ì´ ë”± ë§ëŠ” Node ì—ë§Œ ë°°í¬ë˜ë„ë¡ í•˜ëŠ” ì •ì±… Soft affinity : Pod ê°€ ì¡°ê±´ì— ë˜ë„ë¡ ë§ëŠ” Node ì— ë˜ë„ë¡ì´ë©´ ë°°í¬í•˜ë„ë¡ í•˜ëŠ” ì •ì±… Taint : Pod ê°€ ë°°í¬í•˜ì§€ ëª»í•˜ë„ë¡ í•˜ëŠ” ì •ì±… ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì™€ ë¡œë“œ ë°¸ëŸ°ì‹± ìŠ¤í† ë¦¬ì§€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚¬ìš©í•˜ëŠ” ìŠ¤í† ë¦¬ì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ìë™í™”ëœ ë¡¤ì•„ì›ƒê³¼ ë¡¤ë°± ìë™í™”ëœ ë¹ˆ íŒ¨í‚¹ ì‹œí¬ë¦¿ê³¼ êµ¬ì„± ê´€ë¦¬ ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì„±ì„ ê´€ë¦¬í•˜ê³  ì—…ë°ì´íŠ¸ í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ìê°€ ì¹˜ìœ  ë…¸ë“œë‚˜ ì»¨í…Œì´ë„ˆì˜ ì¥ì• ë¥¼ ê°ì§€í•˜ê³ , ìë™ìœ¼ë¡œ ì¹˜ìœ í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ë°°ì¹˜ ì‹¤í–‰ ì˜¤í†  ìŠ¤ì¼€ì¼ë§ ê°™ì€ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•˜ë©´ì„œ ë¶€í•˜ë¥¼ ë¶„ì‚°í•˜ê³  ë¶€í•˜ì— ë”°ë¼ ì»¨í…Œì´ë„ˆ ë ˆí”Œë¦¬ì¹´ ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ëŠ˜ë¦¬ê±°ë‚˜ ì¤„ì¼ ìˆ˜ ìˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° í´ëŸ¬ìŠ¤í„°(Cluster)ë€, ì—¬ëŸ¬ ëŒ€ì˜ ì»´í“¨í„° ë…¸ë“œ(Node) ë¡œ êµ¬ì„±ëœ ë¶„ì‚° ì‹œìŠ¤í…œì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë…¸ë“œë“¤ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ ë§ˆìŠ¤í„°(Master) ì— ì˜í•´ ì œì–´ë˜ë©°, í´ëŸ¬ìŠ¤í„°ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° êµ¬ì„±ìš”ì†Œ - ë§ˆìŠ¤í„° ë…¸ë“œ(Master Node)ë§ˆìŠ¤í„° ë…¸ë“œëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ì œì–´ í”Œë ˆì¸(Control Plane)ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì œì–´ í”Œë ˆì¸ì€ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœë¥¼ ì¶”ì í•˜ê³  ë…¸ë“œ ê°„ì˜ ì‘ì—…ì„ ì¡°ì •í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë§ˆìŠ¤í„° ë…¸ë“œëŠ” API ì„œë²„, ìŠ¤ì¼€ì¤„ëŸ¬(Scheduler), ì»¨íŠ¸ë¡¤ëŸ¬ ë§¤ë‹ˆì €(Controller Manager) ë“±ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° êµ¬ì„±ìš”ì†Œ - ì›Œì»¤ ë…¸ë“œ(Worker Node)ì›Œì»¤ ë…¸ë“œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì‹¤ì œ ì»´í“¨í„° ë…¸ë“œì…ë‹ˆë‹¤. ì›Œì»¤ ë…¸ë“œëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ê° ì›Œì»¤ ë…¸ë“œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì—ì´ì „íŠ¸(Agent)ì¸ kubeletê³¼ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„(Docker, containerd, ë“±)ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° êµ¬ì„±ìš”ì†Œ - ì €ì¥ì†Œí´ëŸ¬ìŠ¤í„°ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì €ì¥ì†ŒëŠ” í¼ì‹œìŠ¤í„´íŠ¸ ë³¼ë¥¨(Persistent Volume)ì´ë‚˜ ì™¸ë¶€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ë“±ìœ¼ë¡œ êµ¬ì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"êµ¬ì„±ìš”ì†Œ","slug":"Kubernetes/êµ¬ì„±ìš”ì†Œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/"}],"tags":[]},{"title":"EKS (Elastic Kubernetes Service)","slug":"aws/eks/eks","date":"2023-01-04T20:31:07.000Z","updated":"2024-02-18T16:19:54.517Z","comments":true,"path":"2023/01/05/aws/eks/eks/","link":"","permalink":"https://ckck803.github.io/2023/01/05/aws/eks/eks/","excerpt":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) EKS (Elastic Kubernetes Service) ë€? Elastic Kubernetes Service ì˜ ì•½ìë¡œ AWS ì—ì„œ ì œê³µí•˜ëŠ” Kubernetes ê´€ë¦¬ ì„œë¹„ìŠ¤ EKSë¥¼ ì‚¬ìš©í•˜ë©´ Kubernetes ë§ˆìŠ¤í„°ë¥¼ ê´€ë¦¬í•˜ê³  ë³´ì•ˆ, ìŠ¤ì¼€ì¼ë§, ì—…ê·¸ë ˆì´ë“œ ë° ê°€ìš©ì„±ê³¼ ê°™ì€ ê´€ë¦¬ì ì¸ ë¶€ë‹´ì„ ëœ ìˆ˜ ìˆìŠµë‹ˆë‹¤. EKSëŠ” Kubernetes APIë¥¼ ì™„ì „íˆ í˜¸í™˜í•˜ë©°, AWSì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ì™€ í†µí•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì„œë¹„ìŠ¤ëŠ” Amazon Elastic Load Balancer, Amazon Simple Storage Service, Amazon DynamoDB ë“±ì´ ìˆìŠµë‹ˆë‹¤. EKSëŠ” Kubernetes ë§ˆìŠ¤í„°ë¥¼ ê´€ë¦¬í•˜ë¯€ë¡œ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•˜ê¸° ìœ„í•´ ë§ˆìŠ¤í„° ë…¸ë“œë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ê³  êµ¬ì„±í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ëŒ€ì‹ , ë‹¨ì¼ ëª…ë ¹ìœ¼ë¡œ ìƒˆë¡œìš´ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•˜ê³  ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. EKSëŠ” ë˜í•œ í´ëŸ¬ìŠ¤í„° ë³´ì•ˆì„ ì œê³µí•˜ë©°, Kubernetes ë§ˆìŠ¤í„°ì™€ ì‘ì—… ë…¸ë“œê°€ ëª¨ë‘ Amazon VPC(Virtual Private Cloud) ë‚´ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. ë˜í•œ EKSëŠ” Kubernetes ë§ˆìŠ¤í„°ì™€ ì‘ì—… ë…¸ë“œ ê°„ì˜ í†µì‹ ì„ ìœ„í•´ ë„¤íŠ¸ì›Œí¬ ë¼ìš°íŒ… ë° ë³´ì•ˆ êµ¬ì„±ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, EKSëŠ” Amazon EC2ì™€ ê°™ì€ AWS ì„œë¹„ìŠ¤ì™€ì˜ ê¸´ë°€í•œ í†µí•©ì„ ì œê³µí•˜ë©°, í´ëŸ¬ìŠ¤í„° ë…¸ë“œì˜ Amazon Machine Image(AMI)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ìê°€ EKSì™€ ë‹¤ë¥¸ AWS ì„œë¹„ìŠ¤ë¥¼ ì‰½ê²Œ í†µí•©í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì‰½ê²Œ ìƒì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.","text":"ëª©ì°¨ EKS - Cluster Autoscaler EKS - EFS CSI Driver ì„¤ì¹˜ EKS - EBS CSI Driver ì„¤ì¹˜ EKS - ALB Controller ë¥¼ í™œìš©í•œ NLB ìƒì„± EKS - ALB Controller ì„¤ì¹˜ EKS - Cluster Access ë¬¸ì œ EKS - NodeGroup ìƒì„± EKS - eksctl ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± ë° ì‚­ì œ EKS (Elastic Kubernetes Service) EKS (Elastic Kubernetes Service) ë€? Elastic Kubernetes Service ì˜ ì•½ìë¡œ AWS ì—ì„œ ì œê³µí•˜ëŠ” Kubernetes ê´€ë¦¬ ì„œë¹„ìŠ¤ EKSë¥¼ ì‚¬ìš©í•˜ë©´ Kubernetes ë§ˆìŠ¤í„°ë¥¼ ê´€ë¦¬í•˜ê³  ë³´ì•ˆ, ìŠ¤ì¼€ì¼ë§, ì—…ê·¸ë ˆì´ë“œ ë° ê°€ìš©ì„±ê³¼ ê°™ì€ ê´€ë¦¬ì ì¸ ë¶€ë‹´ì„ ëœ ìˆ˜ ìˆìŠµë‹ˆë‹¤. EKSëŠ” Kubernetes APIë¥¼ ì™„ì „íˆ í˜¸í™˜í•˜ë©°, AWSì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ì™€ í†µí•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì„œë¹„ìŠ¤ëŠ” Amazon Elastic Load Balancer, Amazon Simple Storage Service, Amazon DynamoDB ë“±ì´ ìˆìŠµë‹ˆë‹¤. EKSëŠ” Kubernetes ë§ˆìŠ¤í„°ë¥¼ ê´€ë¦¬í•˜ë¯€ë¡œ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•˜ê¸° ìœ„í•´ ë§ˆìŠ¤í„° ë…¸ë“œë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ê³  êµ¬ì„±í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ëŒ€ì‹ , ë‹¨ì¼ ëª…ë ¹ìœ¼ë¡œ ìƒˆë¡œìš´ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•˜ê³  ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. EKSëŠ” ë˜í•œ í´ëŸ¬ìŠ¤í„° ë³´ì•ˆì„ ì œê³µí•˜ë©°, Kubernetes ë§ˆìŠ¤í„°ì™€ ì‘ì—… ë…¸ë“œê°€ ëª¨ë‘ Amazon VPC(Virtual Private Cloud) ë‚´ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. ë˜í•œ EKSëŠ” Kubernetes ë§ˆìŠ¤í„°ì™€ ì‘ì—… ë…¸ë“œ ê°„ì˜ í†µì‹ ì„ ìœ„í•´ ë„¤íŠ¸ì›Œí¬ ë¼ìš°íŒ… ë° ë³´ì•ˆ êµ¬ì„±ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, EKSëŠ” Amazon EC2ì™€ ê°™ì€ AWS ì„œë¹„ìŠ¤ì™€ì˜ ê¸´ë°€í•œ í†µí•©ì„ ì œê³µí•˜ë©°, í´ëŸ¬ìŠ¤í„° ë…¸ë“œì˜ Amazon Machine Image(AMI)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ìê°€ EKSì™€ ë‹¤ë¥¸ AWS ì„œë¹„ìŠ¤ë¥¼ ì‰½ê²Œ í†µí•©í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì‰½ê²Œ ìƒì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.","categories":[{"name":"AWS","slug":"AWS","permalink":"https://ckck803.github.io/categories/AWS/"},{"name":"EKS","slug":"AWS/EKS","permalink":"https://ckck803.github.io/categories/AWS/EKS/"}],"tags":[]},{"title":"Spring Batch","slug":"spring/spring-batch/basic/batch-basic-01","date":"2022-05-13T14:25:35.000Z","updated":"2024-02-26T15:27:43.134Z","comments":true,"path":"2022/05/13/spring/spring-batch/basic/batch-basic-01/","link":"","permalink":"https://ckck803.github.io/2022/05/13/spring/spring-batch/basic/batch-basic-01/","excerpt":"Real Time ì‘ì—… - ì‹¤ì‹œê°„ ì‘ì—…ë°”ë¡œ ì‘ë‹µì„ ë°›ì•„ì„œ ë³´ëŠ” ê²ƒì„ ì‹¤ì‹œê°„ ì‘ì—…ì´ë¼ í•œë‹¤. ë°°ì¹˜ ì‘ì—…ì€ì‘ì—…ë“¤ì„ í•œë²ˆì— ëª¨ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” ì‘ì—… ë°°ì†¡ì´ë‚˜ ì •ì‚°ì€ ëª¨ì•„ì„œ íŠ¹ì • ì£¼ê¸°ë§ˆë‹¤ ì²˜ë¦¬í•˜ëŠ” ì‘ì—…ê³ ê°ëˆˆì—ëŠ” ë³´ì´ì§€ ì•Šì§€ë§Œ ì„œë¹„ìŠ¤ ë’·í€ì—ì„œ ëŒ€ëŸ‰ì˜ ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤.","text":"Real Time ì‘ì—… - ì‹¤ì‹œê°„ ì‘ì—…ë°”ë¡œ ì‘ë‹µì„ ë°›ì•„ì„œ ë³´ëŠ” ê²ƒì„ ì‹¤ì‹œê°„ ì‘ì—…ì´ë¼ í•œë‹¤. ë°°ì¹˜ ì‘ì—…ì€ì‘ì—…ë“¤ì„ í•œë²ˆì— ëª¨ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” ì‘ì—… ë°°ì†¡ì´ë‚˜ ì •ì‚°ì€ ëª¨ì•„ì„œ íŠ¹ì • ì£¼ê¸°ë§ˆë‹¤ ì²˜ë¦¬í•˜ëŠ” ì‘ì—…ê³ ê°ëˆˆì—ëŠ” ë³´ì´ì§€ ì•Šì§€ë§Œ ì„œë¹„ìŠ¤ ë’·í€ì—ì„œ ëŒ€ëŸ‰ì˜ ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Django Rest - ì¥ê³ ë¥¼ ì´ìš©í•œ rest api ë§Œë“¤ê¸°","slug":"django/rest/rest-01","date":"2022-05-11T11:47:30.000Z","updated":"2024-11-28T13:59:29.403Z","comments":true,"path":"2022/05/11/django/rest/rest-01/","link":"","permalink":"https://ckck803.github.io/2022/05/11/django/rest/rest-01/","excerpt":"ì¥ê³ ë¥¼ ì´ìš©í•œ rest api ë§Œë“¤ê¸°settings myapi&#x2F;settings.py STATIC_ROOT = os.path.join(BASE_DIR, &#x27;staticfiles&#x27;) ì •ì  íŒŒì¼ root ì¶”ê°€ INSTALLED_APPS = [ ... &#x27;rest_framework&#x27;,] INSTALLED_APPSì— quizì™€ rest_frameworkë¥¼ ì¶”ê°€í•´ì¤€ë‹¤. ëª¨ë¸ ìƒì„±í•˜ê¸° quiz&#x2F;models.py","text":"ì¥ê³ ë¥¼ ì´ìš©í•œ rest api ë§Œë“¤ê¸°settings myapi&#x2F;settings.py STATIC_ROOT = os.path.join(BASE_DIR, &#x27;staticfiles&#x27;) ì •ì  íŒŒì¼ root ì¶”ê°€ INSTALLED_APPS = [ ... &#x27;rest_framework&#x27;,] INSTALLED_APPSì— quizì™€ rest_frameworkë¥¼ ì¶”ê°€í•´ì¤€ë‹¤. ëª¨ë¸ ìƒì„±í•˜ê¸° quiz&#x2F;models.py from django.db import models# Create your models here.class Quiz(models.Model): title = models.CharField(max_length=200) body = models.TextField() answer = models.IntegerField() ì‹œë¦¬ì–¼ë¼ì´ì € ìƒì„±í•˜ê¸° quiz&#x2F;serializers.py from rest_framework import serializersfrom .models import Quizclass QuizSerializer(serializers.ModelSerializer): class Meta: model = Quiz fields = (&#x27;title&#x27;, &#x27;body&#x27;, &#x27;answer&#x27;) ì‹œë¦¬ì–¼ë¼ì´ì €ëŠ” ì¥ê³ ì˜ modelë°ì´í„°ë¥¼ JSONí˜•íƒœë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì½”ë“œì´ë‹¤. apií†µì‹ ì´ ê°€ëŠ¥í•˜ê²Œ í•´ì¤€ë‹¤. ë°˜í™˜ ê°’ ì„¤ì •í•˜ê¸° quize&#x2F;views.py from rest_framework.response import Responsefrom rest_framework.decorators import api_viewfrom .models import Quizfrom .serializers import QuizSerializer# Create your views here.@api_view([&#x27;GET&#x27;])def HelloAPI(request): return Response(&quot;Hello World!&quot;); url ì„¤ì •í•˜ê¸° quiz&#x2F;urls.py from django.urls import path, includefrom .views import HelloAPIurlpatterns = [ path(&quot;hello/&quot;, HelloAPI),] myapi&#x2F;urls.py from django.contrib import adminfrom django.urls import path, includeurlpatterns = [ path(&#x27;admin/&#x27;, admin.site.urls), path(&#x27;quiz/&#x27;, include(&#x27;quiz.urls&#x27;)),] ìƒˆë¡œìš´ API ì¶”ê°€í•˜ê¸° quiz&#x2F;views.py from rest_framework.response import Responsefrom rest_framework.decorators import api_viewfrom .models import Quizfrom .serializers import QuizSerializerimport random# Create your views here.@api_view([&#x27;GET&#x27;])def HelloAPI(request): return Response(&quot;Hello World!&quot;);@api_view([&#x27;GET&#x27;])def randomQuiz(request, id): totalQuizs = Quiz.objects.all() randomQuizs = random.sample(list(totalQuizs), id) # many=Trueì€ ë‹¤ëŸ‰ì˜ ë°ì´í„°ì— ëŒ€í•´ì„œë„ ì§ë ¬í™”ë¥¼ ì§„í–‰í•œë‹¤. serializer = QuizSerializer(randomQuizs, many=True) return Response(serializer.data) urlì— ì¶”ê°€í•˜ê¸° quiz&#x2F;urls.py from django.urls import path, includefrom .views import HelloAPI, randomQuizurlpatterns = [ path(&quot;hello/&quot;, HelloAPI), path(&quot;&lt;int:id&gt;/&quot;, randomQuiz),] admin í˜ì´ì§€ì— Quizëª¨ë¸ ì¶”ê°€í•˜ê¸° quiz&#x2F;admin.py from django.contrib import adminfrom .models import Quiz# Register your models here.admin.site.register(Quiz)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Comment (ëŒ“ê¸€) view êµ¬í˜„í•˜ê¸°","slug":"django/mysite/django-26","date":"2022-05-10T01:47:30.000Z","updated":"2024-11-28T13:59:29.692Z","comments":true,"path":"2022/05/10/django/mysite/django-26/","link":"","permalink":"https://ckck803.github.io/2022/05/10/django/mysite/django-26/","excerpt":"Comment (ëŒ“ê¸€) view êµ¬í˜„í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± blog&#x2F;tests.py # Commentë¥¼ ìƒì„±í•œë‹¤.comment_000 = create_post(post_000, text=&#x27;a test comment&#x27;, author=self.author_obama) # Comment comments_div = main_div.find(&#x27;div&#x27;, id=&#x27;comment-list&#x27;) self.assertIn(comment_000.author.username, comments_div.text) self.assertIn(comment_000.text, comments_div.text) post_detail ìˆ˜ì •í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;!-- Comment --&gt;&lt;div id=&quot;comment-list&quot;&gt;&#123;% for comment in object.comment_set.all %&#125; &lt;div class=&quot;media mb-4&quot;&gt; &lt;img class=&quot;d-flex mr-3 rounded-circle&quot; src=&quot;http://placehold.it/50x50&quot; alt=&quot;&quot;&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h5 class=&quot;mt-0&quot;&gt;&#123;&#123; comment.author &#125;&#125;&lt;/h5&gt; &#123;&#123; comment.get_markdwon_content | safe &#125;&#125; &lt;/div&gt; &lt;/div&gt;&#123;% endfor %&#125;&lt;/div&gt; admin ì‚¬ì´íŠ¸ì—ì„œ commentí™•ì¸í•  ìˆ˜ ìˆê²Œ ë°˜ì˜í•˜ê¸° blog&#x2F;admin.py","text":"Comment (ëŒ“ê¸€) view êµ¬í˜„í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± blog&#x2F;tests.py # Commentë¥¼ ìƒì„±í•œë‹¤.comment_000 = create_post(post_000, text=&#x27;a test comment&#x27;, author=self.author_obama) # Comment comments_div = main_div.find(&#x27;div&#x27;, id=&#x27;comment-list&#x27;) self.assertIn(comment_000.author.username, comments_div.text) self.assertIn(comment_000.text, comments_div.text) post_detail ìˆ˜ì •í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;!-- Comment --&gt;&lt;div id=&quot;comment-list&quot;&gt;&#123;% for comment in object.comment_set.all %&#125; &lt;div class=&quot;media mb-4&quot;&gt; &lt;img class=&quot;d-flex mr-3 rounded-circle&quot; src=&quot;http://placehold.it/50x50&quot; alt=&quot;&quot;&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h5 class=&quot;mt-0&quot;&gt;&#123;&#123; comment.author &#125;&#125;&lt;/h5&gt; &#123;&#123; comment.get_markdwon_content | safe &#125;&#125; &lt;/div&gt; &lt;/div&gt;&#123;% endfor %&#125;&lt;/div&gt; admin ì‚¬ì´íŠ¸ì—ì„œ commentí™•ì¸í•  ìˆ˜ ìˆê²Œ ë°˜ì˜í•˜ê¸° blog&#x2F;admin.py from django.contrib import adminfrom .models import Post, Category, Comment# Register your models here.class CategoryAdmin(admin.ModelAdmin): # ë¯¸ë¦¬ ë§Œë“¤ì–´ì§€ëŠ” field # slugë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤. prepopulated_fields = &#123;&#x27;slug&#x27;: (&#x27;name&#x27;, )&#125;admin.site.register(Post)admin.site.register(Comment)admin.site.register(Category, CategoryAdmin) markdown ì ìš©í•´ì£¼ê¸° blog&#x2F;models.py class Comment(models.Model): post = models.ForeignKey(Post, on_delete=models.CASCADE) text = MarkdownxField() author = models.ForeignKey(User, on_delete=models.CASCADE) # markdownì„ htmlë¡œ ë°”ê¿”ì¤€ë‹¤. def get_markdwon_content(self): return markdown(self.text)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Comment (ëŒ“ê¸€) ì‘ì„±ì°½ êµ¬í˜„í•˜ê¸°","slug":"django/mysite/django-27","date":"2022-05-10T01:47:30.000Z","updated":"2024-11-28T13:59:30.545Z","comments":true,"path":"2022/05/10/django/mysite/django-27/","link":"","permalink":"https://ckck803.github.io/2022/05/10/django/mysite/django-27/","excerpt":"Comment (ëŒ“ê¸€) ì‘ì„±ì°½ êµ¬í˜„í•˜ê¸°forms.py íŒŒì¼ ìƒì„±í•˜ê¸° blog&#x2F; í•´ë‹¹ ëŒë”ì— forms.py íŒŒì¼ì„ ìƒì„±í•œë‹¤. from .models import Commentfrom django import formsclass CommentForm(forms.ModelForm): class Meta: model = Comment fields = &#123;&#x27;text&#x27;,&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py # ë¡œê·¸ì¸í•˜ê¸°login_success = self.client.login(username=&#x27;smith&#x27;, password=&#x27;nopassword&#x27;)self.assertTrue(login_success)# postë¥¼ ì´ìš©í•˜ì—¬ ì„œë²„ì— ë°ì´í„°ë¥¼ ë³´ë‚¸ë‹¤.response = self.client.post( post_000.get_absolute_url() + &#x27;new_comment/&#x27;, &#123;&#x27;text&#x27;:&#x27;A test comment for the first comment&#x27;&#125;, follow=True # redirectí•˜ëŠ” ê²ƒê¹Œì§€ í™•ì¸ì„ í•´ë´ë¼)self.assertEqual(response.status_code, 200) views.pyì— ë°˜ì˜í•˜ê¸°","text":"Comment (ëŒ“ê¸€) ì‘ì„±ì°½ êµ¬í˜„í•˜ê¸°forms.py íŒŒì¼ ìƒì„±í•˜ê¸° blog&#x2F; í•´ë‹¹ ëŒë”ì— forms.py íŒŒì¼ì„ ìƒì„±í•œë‹¤. from .models import Commentfrom django import formsclass CommentForm(forms.ModelForm): class Meta: model = Comment fields = &#123;&#x27;text&#x27;,&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py # ë¡œê·¸ì¸í•˜ê¸°login_success = self.client.login(username=&#x27;smith&#x27;, password=&#x27;nopassword&#x27;)self.assertTrue(login_success)# postë¥¼ ì´ìš©í•˜ì—¬ ì„œë²„ì— ë°ì´í„°ë¥¼ ë³´ë‚¸ë‹¤.response = self.client.post( post_000.get_absolute_url() + &#x27;new_comment/&#x27;, &#123;&#x27;text&#x27;:&#x27;A test comment for the first comment&#x27;&#125;, follow=True # redirectí•˜ëŠ” ê²ƒê¹Œì§€ í™•ì¸ì„ í•´ë´ë¼)self.assertEqual(response.status_code, 200) views.pyì— ë°˜ì˜í•˜ê¸° blog&#x2F;views.py class PostDetail(DetailView): model = Post def get_context_data(self, *, object_list=None, **kwargs): context = super(PostDetail, self).get_context_data(**kwargs) context[&#x27;category_list&#x27;] = Category.objects.all() # Postë“¤ ì¤‘ì—ì„œ categoryê°€ Noneì¸ ê²ƒì˜ ê°¯ìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. context[&#x27;posts_without_category&#x27;] = Post.objects.filter(category=None).count() context[&#x27;comment_form&#x27;] = CommentForm() return context í…œí”Œë¦¿ì— ë°˜ì˜í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;!-- Comments Form --&gt;&lt;div class=&quot;card my-4&quot;&gt; &lt;h5 class=&quot;card-header&quot;&gt;Leave a Comment:&lt;/h5&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;form&gt; &lt;div class=&quot;form-group&quot;&gt; &#123;&#123; comment_form &#125;&#125; &lt;textarea class=&quot;form-control&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt; crispy-forms ì„¤ì¹˜íˆê°€ pip install django-crispy-forms ì„¤ì •ì— crispy-formsì¶”ê°€í•˜ê¸° mysite&#x2F;settings.py INSTALLED_APPS = [ &#x27;blog&#x27;, &#x27;markdownx&#x27;, &#x27;crispy_forms&#x27;, &#x27;django.contrib.admin&#x27;, &#x27;django.contrib.auth&#x27;, &#x27;django.contrib.contenttypes&#x27;, &#x27;django.contrib.sessions&#x27;, &#x27;django.contrib.messages&#x27;, &#x27;django.contrib.staticfiles&#x27;,]CRISPY_TEMPLATE_PACK = &#x27;bootstrap4&#x27; crispy filterì¶”ê°€í•˜ê¸° blog&#x2F;template&#x2F;post_detail.html &#123;% load crispy_forms_tags %&#125; crispy filterë°˜ì˜í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;!-- Comments Form --&gt;&lt;div class=&quot;card my-4&quot;&gt; &lt;h5 class=&quot;card-header&quot;&gt;Leave a Comment:&lt;/h5&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;form method=&quot;post&quot; action=&quot;&#123;&#123; object.get_absolute_url &#125;&#125;new_comment/&quot;&gt;&#123;% csrf_token %&#125; &lt;div class=&quot;form-group&quot;&gt; &#123;&#123; comment_form | crispy &#125;&#125; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt; ëŒ“ê¸€ë¡œ focus ë§ì¶°ì£¼ê¸° blog&#x2F;models.py class Comment(models.Model): post = models.ForeignKey(Post, on_delete=models.CASCADE) text = MarkdownxField() author = models.ForeignKey(User, on_delete=models.CASCADE) # markdownì„ htmlë¡œ ë°”ê¿”ì¤€ë‹¤. def get_markdwon_content(self): return markdown(self.text) def get_absolute_url(self): return self.post.get_absolute_url() + &#x27;#comment-id-&#123;&#125;&#x27;.format(self.pk) blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;!-- Comment --&gt;&lt;div id=&quot;comment-list&quot;&gt;&#123;% for comment in object.comment_set.all %&#125; &lt;div class=&quot;media mb-4&quot; id=&quot;comment-id-&#123;&#123; comment.pk &#125;&#125;&quot;&gt; &lt;img class=&quot;d-flex mr-3 rounded-circle&quot; src=&quot;http://placehold.it/50x50&quot; alt=&quot;&quot;&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h5 class=&quot;mt-0&quot;&gt;&#123;&#123; comment.author &#125;&#125;&lt;/h5&gt; &#123;&#123; comment.get_markdwon_content | safe &#125;&#125; &lt;/div&gt; &lt;/div&gt;&#123;% endfor %&#125;&lt;/div&gt;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - ë¸”ë¡œê·¸ post listì™€ post detail í˜ì´ì§€ì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸°","slug":"django/mysite/django-28","date":"2022-05-10T01:47:30.000Z","updated":"2024-11-28T13:59:30.153Z","comments":true,"path":"2022/05/10/django/mysite/django-28/","link":"","permalink":"https://ckck803.github.io/2022/05/10/django/mysite/django-28/","excerpt":"ë¸”ë¡œê·¸ post listì™€ post detail í˜ì´ì§€ì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py post_001 = create_post( title=&quot;The second post&quot;, content=&quot;Second Second Second&quot;, author=self.author_000, category=create_category(name=&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27;))# category cardì—ì„œ category_card = body.find(&#x27;div&#x27;, id=&#x27;category-card&#x27;) self.assertIn(&#x27;ë¯¸ë¶„ë¥˜(1)&#x27;, category_card.text) #### ë¯¸ë¶„ë¥˜ (1)ì´ ìˆì–´ì•¼ í•œë‹¤. self.assertIn(&#x27;ì •ì¹˜/ì‚¬íšŒ(1)&#x27;, category_card.text) #### ì •ì¹˜/ì‚¬íšŒ(1)ì´ ìˆì–´ì•¼ í•œë‹¤. main_div = body.find(&#x27;div&#x27;, id=&#x27;main_div&#x27;) self.assertIn(&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27;, main_div.text) ###&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27; ìˆì–´ì•¼ í•¨ self.assertIn((&#x27;ë¯¸ë¶„ë¥˜&#x27;, main_div.text)) ### &#x27;ë¯¸ë¶„ë¥˜&#x27; ìˆì–´ì•¼ í•¨ id ì¶”ê°€í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;base.html &lt;div class=&quot;card my-4&quot; id = &quot;category-card&quot;&gt; ì¹´í…Œê³ ë¦¬ ì¹´ë“œ ìˆ˜ì •í•´ì£¼ê¸° blog&#x2F;views.py","text":"ë¸”ë¡œê·¸ post listì™€ post detail í˜ì´ì§€ì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py post_001 = create_post( title=&quot;The second post&quot;, content=&quot;Second Second Second&quot;, author=self.author_000, category=create_category(name=&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27;))# category cardì—ì„œ category_card = body.find(&#x27;div&#x27;, id=&#x27;category-card&#x27;) self.assertIn(&#x27;ë¯¸ë¶„ë¥˜(1)&#x27;, category_card.text) #### ë¯¸ë¶„ë¥˜ (1)ì´ ìˆì–´ì•¼ í•œë‹¤. self.assertIn(&#x27;ì •ì¹˜/ì‚¬íšŒ(1)&#x27;, category_card.text) #### ì •ì¹˜/ì‚¬íšŒ(1)ì´ ìˆì–´ì•¼ í•œë‹¤. main_div = body.find(&#x27;div&#x27;, id=&#x27;main_div&#x27;) self.assertIn(&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27;, main_div.text) ###&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27; ìˆì–´ì•¼ í•¨ self.assertIn((&#x27;ë¯¸ë¶„ë¥˜&#x27;, main_div.text)) ### &#x27;ë¯¸ë¶„ë¥˜&#x27; ìˆì–´ì•¼ í•¨ id ì¶”ê°€í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;base.html &lt;div class=&quot;card my-4&quot; id = &quot;category-card&quot;&gt; ì¹´í…Œê³ ë¦¬ ì¹´ë“œ ìˆ˜ì •í•´ì£¼ê¸° blog&#x2F;views.py # templatesë¡œ ì¶”ê°€ì ì¸ ì •ë³´ë¥¼ ë„˜ê²¨ì£¼ê³  ì‹¶ì„ ê²½ìš°def get_context_data(self, *, object_list=None, **kwargs): context = super(PostList, self).get_context_data(**kwargs) context[&#x27;categories_list&#x27;] = Category.objects.all() # Postë“¤ ì¤‘ì—ì„œ categoryê°€ Noneì¸ ê²ƒì˜ ê°¯ìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. context[&#x27;posts_without_category&#x27;] = Post.objects.filter(category=None).count() return context base.html ìˆ˜ì •í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;base.html &lt;li&gt; &lt;a href=&quot;#&quot;&gt;ë¯¸ë¶„ë¥˜(&#123;&#123; posts_without_category &#125;&#125;)&lt;/a&gt;&lt;/li&gt;&#123;% for category in category_list %&#125;&lt;li&gt; &lt;a href=&quot;#&quot;&gt;&#123;&#123; category.name &#125;&#125;(&#123;&#123; category.post_set.count &#125;&#125;)&lt;/a&gt;&lt;/li&gt;&#123;% endfor %&#125; Categoryì½”ë“œ ìˆ˜ì •í•˜ê¸° blog&#x2F;models.py # Create your models here.# ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.class Category(models.Model): # Categoryì˜ ì´ë¦„ì´ ìœ ì¼í•  ìˆ˜ ìˆê²Œ uniqueì˜µì…˜ì„ ì¤€ë‹¤. name = models.CharField(max_length=25, unique=True) description = models.TextField(blank=True) # ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì¶œë ¥í•´ì¤€ë‹¤. def __str__(self): return self.name ì¹´í…Œê³ ë¦¬ê°€ ì—†ì„ ê²½ìš° ë¯¸ë¶„ë¥˜ë¡œ ì¶œë ¥ë˜ê²Œ htmlì„ ë³€ê²½í•´ì¤€ë‹¤. blog&#x2F;templates&#x2F;blog&#x2F;post_list.html &lt;!-- badgeë¥¼ ë¶™ì¸ë‹¤. --&gt;&lt;!-- ì¹´í…Œê³ ë¦¬ê°€ ìˆëŠ” ê²½ìš°ì—ëŠ” ì¹´í…Œê³ ë¦¬ë¥¼ ë³´ì—¬ì£¼ê³ , ì—†ëŠ” ê²½ìš°ì—ëŠ” ë¯¸ë¶„ë¥˜ë¥¼ ë³´ì—¬ì¤€ë‹¤. --&gt;&#123;% if p.category %&#125;&lt;!-- badgeê°€ ì˜¤ë¥¸ìª½ì— ë¶™ì„ ìˆ˜ ìˆê²Œ float-rightì˜µì…˜ì„ ì´ìš©í•œë‹¤. --&gt;&lt;span class=&quot;badge badge-primary float-right&quot;&gt;&#123;&#123; p.category &#125;&#125;&lt;/span&gt;&#123;% else %&#125;&lt;span class=&quot;badge badge-primary float-right&quot;&gt;ë¯¸ë¶„ë¥˜&lt;/span&gt;&#123;% endif %&#125; adminì— categoryë¥¼ ë“±ë¡í•˜ê¸°","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Comment (ëŒ“ê¸€) ëª¨ë¸ êµ¬í˜„í•˜ê¸°","slug":"django/mysite/django-25","date":"2022-05-09T14:47:30.000Z","updated":"2024-11-28T13:59:31.693Z","comments":true,"path":"2022/05/09/django/mysite/django-25/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-25/","excerpt":"Comment (ëŒ“ê¸€) ëª¨ë¸ êµ¬í˜„í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py # commnetë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜def create_comment(post, text=&#x27;a comment&#x27;, author=None): if author is None: author, is_created = User.objects.get_or_create( username=&#x27;guset&#x27;, password=&#x27;guestpassword&#x27; ) comment = Comment.objects.create( post = post, text = text, author = author ) return comment # class test_Modelì— ì¶”ê°€ # ëŒ“ê¸€ ê¸°ëŠ¥ì— ê´€í•œ test def test_comment(self): post_000 = create_post( title=&quot;The first post&quot;, content=&quot;Hello World. We are the world.&quot;, author=self.author_000, ) self.assertEqual(Comment.objects.count(), 0) comment_000 = create_comment( post=post_000 ) comment_001 = create_comment( post=post_000, text=&#x27;second comment&#x27; ) self.assertEqual(Comment.objects.count(), 2) self.assertEqual(post_000.comment_set.count(), 2) comment ëª¨ë¸ ì¶”ê°€í•˜ê¸° blog&#x2F;models.py class Comment(models.Model): post = models.ForeignKey(Post, on_delete=models.CASCADE) text = MarkdownxField() author = models.ForeignKey(User, on_delete=models.CASCADE)","text":"Comment (ëŒ“ê¸€) ëª¨ë¸ êµ¬í˜„í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py # commnetë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜def create_comment(post, text=&#x27;a comment&#x27;, author=None): if author is None: author, is_created = User.objects.get_or_create( username=&#x27;guset&#x27;, password=&#x27;guestpassword&#x27; ) comment = Comment.objects.create( post = post, text = text, author = author ) return comment # class test_Modelì— ì¶”ê°€ # ëŒ“ê¸€ ê¸°ëŠ¥ì— ê´€í•œ test def test_comment(self): post_000 = create_post( title=&quot;The first post&quot;, content=&quot;Hello World. We are the world.&quot;, author=self.author_000, ) self.assertEqual(Comment.objects.count(), 0) comment_000 = create_comment( post=post_000 ) comment_001 = create_comment( post=post_000, text=&#x27;second comment&#x27; ) self.assertEqual(Comment.objects.count(), 2) self.assertEqual(post_000.comment_set.count(), 2) comment ëª¨ë¸ ì¶”ê°€í•˜ê¸° blog&#x2F;models.py class Comment(models.Model): post = models.ForeignKey(Post, on_delete=models.CASCADE) text = MarkdownxField() author = models.ForeignKey(User, on_delete=models.CASCADE)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì ‘ì† ê°€ëŠ¥í•˜ê²Œ í•˜ê¸°","slug":"django/mysite/django-24","date":"2022-05-09T13:47:30.000Z","updated":"2024-11-28T13:59:30.981Z","comments":true,"path":"2022/05/09/django/mysite/django-24/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-24/","excerpt":"ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì ‘ì† ê°€ëŠ¥í•˜ê²Œ í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± blog&#x2F;tests.py # post_createë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œdef test_post_create(self): response = self.client.get(&#x27;/blog/create/&#x27;) # ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œëŠ” createë¡œ ì ‘ì†ì‹œì— 200ì´ ëœ¨ë©´ ì•ˆëœë‹¤. self.assertNotEqual(response.status_code, 200) # ë¡œê·¸ì¸ì„ í–ˆì„ ë•Œë§Œ createë¡œ ì ‘ì†ì‹œ 200ì´ ëœ¨ê²Œ í•´ì•¼ í•œë‹¤. self.client.login(username=&#x27;smith&#x27;, password=&#x27;nopassword&#x27;) response = self.client.get(&#x27;/blog/create/&#x27;) self.assertEqual(response.status_code, 200) # ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš° BeautifulSoupì„ ì´ìš©í•´ html.parserë¡œ íŒŒì‹±í•œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;) main_div = soup.find(&#x27;div&#x27;, id=&#x27;main-div&#x27;) # self.assertIn(&#x27;New Post&#x27;, main_div.text) ë·° ìˆ˜ì •í•˜ê¸° blog&#x2F;views.py from django.contrib.auth.mixins import LoginRequiredMixinclass PostCreate(LoginRequiredMixin, CreateView): model = Post fields = [ &#x27;title&#x27;, &#x27;content&#x27;, &#x27;head_image&#x27;, &#x27;category&#x27;, # &#x27;tags&#x27; ] def form_valid(self, form): # ì‘ì„±ìë¥¼ ê°€ì§€ê³  ì˜¨ë‹¤. current_user = self.request.user # ë¡œê·¸ì¸ì„ í•œ ìƒíƒœì¸ì§€ í™•ì¸ì„ í•œë‹¤. if current_user.is_authenticated: # formì˜ authorë¥¼ í˜„ì¬ ì‘ì„±ì¤‘ì¸ ì‚¬ëŒìœ¼ë¡œ ì±„ì›Œ ë„£ì–´ form.instance.author = current_user return super(type(self), self).form_valid(form) else : return redirect(&#x27;/blog/&#x27;) PostCreateì—ì„œ LoginRequiredMixinì„ ì¶”ê°€ì ìœ¼ë¡œ ìƒì†í•œë‹¤.","text":"ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì ‘ì† ê°€ëŠ¥í•˜ê²Œ í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± blog&#x2F;tests.py # post_createë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œdef test_post_create(self): response = self.client.get(&#x27;/blog/create/&#x27;) # ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œëŠ” createë¡œ ì ‘ì†ì‹œì— 200ì´ ëœ¨ë©´ ì•ˆëœë‹¤. self.assertNotEqual(response.status_code, 200) # ë¡œê·¸ì¸ì„ í–ˆì„ ë•Œë§Œ createë¡œ ì ‘ì†ì‹œ 200ì´ ëœ¨ê²Œ í•´ì•¼ í•œë‹¤. self.client.login(username=&#x27;smith&#x27;, password=&#x27;nopassword&#x27;) response = self.client.get(&#x27;/blog/create/&#x27;) self.assertEqual(response.status_code, 200) # ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš° BeautifulSoupì„ ì´ìš©í•´ html.parserë¡œ íŒŒì‹±í•œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;) main_div = soup.find(&#x27;div&#x27;, id=&#x27;main-div&#x27;) # self.assertIn(&#x27;New Post&#x27;, main_div.text) ë·° ìˆ˜ì •í•˜ê¸° blog&#x2F;views.py from django.contrib.auth.mixins import LoginRequiredMixinclass PostCreate(LoginRequiredMixin, CreateView): model = Post fields = [ &#x27;title&#x27;, &#x27;content&#x27;, &#x27;head_image&#x27;, &#x27;category&#x27;, # &#x27;tags&#x27; ] def form_valid(self, form): # ì‘ì„±ìë¥¼ ê°€ì§€ê³  ì˜¨ë‹¤. current_user = self.request.user # ë¡œê·¸ì¸ì„ í•œ ìƒíƒœì¸ì§€ í™•ì¸ì„ í•œë‹¤. if current_user.is_authenticated: # formì˜ authorë¥¼ í˜„ì¬ ì‘ì„±ì¤‘ì¸ ì‚¬ëŒìœ¼ë¡œ ì±„ì›Œ ë„£ì–´ form.instance.author = current_user return super(type(self), self).form_valid(form) else : return redirect(&#x27;/blog/&#x27;) PostCreateì—ì„œ LoginRequiredMixinì„ ì¶”ê°€ì ìœ¼ë¡œ ìƒì†í•œë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Post ì‘ì„± í™”ë©´ / ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°","slug":"django/mysite/django-23","date":"2022-05-09T12:47:30.000Z","updated":"2024-11-28T13:59:30.688Z","comments":true,"path":"2022/05/09/django/mysite/django-23/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-23/","excerpt":"Post ì‘ì„± í™”ë©´ &#x2F; ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°new ë²„íŠ¼ ë§Œë“¤ê¸° blog&#x2F;templates&#x2F;post_list.html &lt;!--ë¡œê·¸ì¸ í•œ ì‚¬ìš©ìì—ê²Œë§Œ ë³´ì´ê²Œ í•˜ê¸°--&gt;&#123;% if user.is_authenticated %&#125; &lt;!-- new post button ë§Œë“¤ê¸° --&gt; &lt;button class=&quot;btn btn-primary btn-sm float-right&quot; onclick=&quot;location.href=&#x27;/blog/create/&#x27;&quot;&gt;new post&lt;/button&gt;&#123;% endif %&#125; post_create ë§Œë“¤ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± blog&#x2F;tests.py # post_createë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œdef test_post_create(self): response = self.client.get(&#x27;/blog/create/&#x27;) self.assertEqual(response.status_code, 200) # ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš° BeautifulSoupì„ ì´ìš©í•´ html.parserë¡œ íŒŒì‹±í•œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;) main_div = soup.find(&#x27;div&#x27;, id=&#x27;main-div&#x27;) # self.assertIn(&#x27;New Post&#x27;, main_div.text) url ì¶”ê°€í•˜ê¸°","text":"Post ì‘ì„± í™”ë©´ &#x2F; ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°new ë²„íŠ¼ ë§Œë“¤ê¸° blog&#x2F;templates&#x2F;post_list.html &lt;!--ë¡œê·¸ì¸ í•œ ì‚¬ìš©ìì—ê²Œë§Œ ë³´ì´ê²Œ í•˜ê¸°--&gt;&#123;% if user.is_authenticated %&#125; &lt;!-- new post button ë§Œë“¤ê¸° --&gt; &lt;button class=&quot;btn btn-primary btn-sm float-right&quot; onclick=&quot;location.href=&#x27;/blog/create/&#x27;&quot;&gt;new post&lt;/button&gt;&#123;% endif %&#125; post_create ë§Œë“¤ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± blog&#x2F;tests.py # post_createë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œdef test_post_create(self): response = self.client.get(&#x27;/blog/create/&#x27;) self.assertEqual(response.status_code, 200) # ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš° BeautifulSoupì„ ì´ìš©í•´ html.parserë¡œ íŒŒì‹±í•œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;) main_div = soup.find(&#x27;div&#x27;, id=&#x27;main-div&#x27;) # self.assertIn(&#x27;New Post&#x27;, main_div.text) url ì¶”ê°€í•˜ê¸° blog&#x2F;urls.py # ìƒˆë¡œìš´ postë¥¼ ìƒì„±í•˜ëŠ” í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ê¸° ìœ„í•œ urlpath(&#x27;create/&#x27;, views.PostCreate.as_view()), viewì— ë°˜ì˜í•˜ê¸° blog&#x2F;views.py from django.views.generic import CreateViewclass PostCreate(CreateView): model = Post fields = [ &#x27;title&#x27;, &#x27;content&#x27;, &#x27;head_image&#x27;, &#x27;category&#x27;, # &#x27;tags&#x27; ] ìë™ìœ¼ë¡œ ì±„ì›Œì£¼ëŠ” ê¸°ëŠ¥ í™œì„±í™” í•˜ê¸° blog&#x2F;models.py # ì‘ì„± ì¼ì created = models.DateTimeField(auto_now_add=True) ì‘ì„±ì¤‘ì¸ userê°€ì ¸ì˜¤ê¸° blog&#x2F;views.py def form_valid(self, form): current_user = self.request.user form.instance.author = current_user return super(type(self), self).form_valid(form) ë¡œê·¸ì¸ í•œ ìƒíƒœì¸ì§€ ì•ˆí•œ ìƒíƒœì¸ì§€ í™•ì¸í•œ í›„ redirectí•˜ê¸° blog&#x2F;views.py class PostCreate(CreateView): model = Post fields = [ &#x27;title&#x27;, &#x27;content&#x27;, &#x27;head_image&#x27;, &#x27;category&#x27;, # &#x27;tags&#x27; ] def form_valid(self, form): # ì‘ì„±ìë¥¼ ê°€ì§€ê³  ì˜¨ë‹¤. current_user = self.request.user # ë¡œê·¸ì¸ì„ í•œ ìƒíƒœì¸ì§€ í™•ì¸ì„ í•œë‹¤. if current_user.is_authenticated: # formì˜ authorë¥¼ í˜„ì¬ ì‘ì„±ì¤‘ì¸ ì‚¬ëŒìœ¼ë¡œ ì±„ì›Œ ë„£ì–´ form.instance.author = current_user return super(type(self), self).form_valid(form) else : return redirect(&#x27;/blog/&#x27;)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Post ìˆ˜ì • í™”ë©´ / ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°","slug":"django/mysite/django-22","date":"2022-05-09T11:47:30.000Z","updated":"2024-11-28T13:59:29.855Z","comments":true,"path":"2022/05/09/django/mysite/django-22/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-22/","excerpt":"Post ìˆ˜ì • í™”ë©´ &#x2F; ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°updateëœ urlì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ë§Œë“¤ì–´ ì£¼ê¸° blog&#x2F;models.py # updateëœ urlì„ ë°˜í™˜í•˜ê¸° ìœ„í•œ í•¨ìˆ˜def get_update_url(self): return self.get_absolute_url() + &#x27;update/&#x27; updateëœ urlë¡œ ì ‘ì†í•˜ê¸° blog&#x2F;views.py from django.views.generic import UpdateViewclass PostUpdate(UpdateView): model = Post # postì˜ ëª¨ë“  fieldë¥¼ ê°€ì ¸ì™€ë¼ field = &#x27;__all__&#x27; blog&#x2F;urls.py from django.urls import path, includefrom .import viewsurlpatterns = [ # path(&#x27;&#x27;, views.index), # path(&#x27;&lt;int:pk&gt;/&#x27;, views.post_detail), path(&#x27;category/&lt;str:slug&gt;/&#x27;, views.PostListByCategory.as_view()), path(&#x27;&lt;int:pk&gt;/update/&#x27;, views.PostUpdate.as_view()), path(&#x27;&lt;int:pk&gt;/&#x27;, views.PostDetail.as_view()), path(&#x27;&#x27;, views.PostList.as_view()),]","text":"Post ìˆ˜ì • í™”ë©´ &#x2F; ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°updateëœ urlì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ë§Œë“¤ì–´ ì£¼ê¸° blog&#x2F;models.py # updateëœ urlì„ ë°˜í™˜í•˜ê¸° ìœ„í•œ í•¨ìˆ˜def get_update_url(self): return self.get_absolute_url() + &#x27;update/&#x27; updateëœ urlë¡œ ì ‘ì†í•˜ê¸° blog&#x2F;views.py from django.views.generic import UpdateViewclass PostUpdate(UpdateView): model = Post # postì˜ ëª¨ë“  fieldë¥¼ ê°€ì ¸ì™€ë¼ field = &#x27;__all__&#x27; blog&#x2F;urls.py from django.urls import path, includefrom .import viewsurlpatterns = [ # path(&#x27;&#x27;, views.index), # path(&#x27;&lt;int:pk&gt;/&#x27;, views.post_detail), path(&#x27;category/&lt;str:slug&gt;/&#x27;, views.PostListByCategory.as_view()), path(&#x27;&lt;int:pk&gt;/update/&#x27;, views.PostUpdate.as_view()), path(&#x27;&lt;int:pk&gt;/&#x27;, views.PostDetail.as_view()), path(&#x27;&#x27;, views.PostList.as_view()),] post_form ì¶”ê°€í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_form.html &#123;% extends &#x27;blog/base.html&#x27; %&#125;&lt;!-- í¬ìŠ¤íŠ¸ì˜ titleì„ ë°˜ì˜í•œë‹¤. --&gt;&#123;% block title %&#125;&#123;&#123; object.title &#125;&#125;&#123;% endblock %&#125;&#123;% block content %&#125; &#123;&#123; form &#125;&#125;&#123;% endblock %&#125; update í˜ì´ì§€ì— ì›í•˜ëŠ” fieldë§Œ ê°€ì ¸ì˜¤ê¸° blog&#x2F;views.py class PostUpdate(UpdateView): model = Post # postì˜ ëª¨ë“  fieldë¥¼ ê°€ì ¸ì™€ë¼ # fields = &#x27;__all__&#x27; fields = [ &#x27;title&#x27;, &#x27;content&#x27;, &#x27;head_image&#x27;, &#x27;category&#x27;, # &#x27;tags&#x27; ] update í˜ì´ì§€ ë‹¤ë“¬ì–´ ì£¼ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_form.html &#123;% extends &#x27;blog/base.html&#x27; %&#125;&lt;!-- í¬ìŠ¤íŠ¸ì˜ titleì„ ë°˜ì˜í•œë‹¤. --&gt;&#123;% block title %&#125;&#123;&#123; object.title &#125;&#125;&#123;% endblock %&#125;&#123;% block content %&#125; &lt;table&gt; &#123;&#123; form.as_table &#125;&#125; &lt;/table&gt;&#123;% endblock %&#125; ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ ë³¼ ìˆ˜ ìˆê²Œí•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_form.html &#123;% extends &#x27;blog/base.html&#x27; %&#125;&lt;!-- í¬ìŠ¤íŠ¸ì˜ titleì„ ë°˜ì˜í•œë‹¤. --&gt;&#123;% block title %&#125;&#123;&#123; object.title &#125;&#125;&#123;% endblock %&#125;&#123;% block content %&#125; &lt;form method=&quot;POST&quot; action=&quot;&quot;&gt;&#123;% csrf_token %&#125; &lt;table&gt; &#123;&#123; form.as_table &#125;&#125; &lt;/table&gt; &lt;!-- submit ë²„íŠ¼--&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary float-right&quot;&gt;submit&lt;/button&gt; &lt;/form&gt; &#123;&#123; form.media &#125;&#125;&#123;% endblock %&#125; Edit ë²„íŠ¼ í™œì„±í™” í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-secondary float-right&quot; onclick=&quot;location.href=&#x27;&#123;&#123; object.get_update_url &#125;&#125;&#x27;&quot;&gt;EDIT&lt;/button&gt;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - ë§ˆí¬ë‹¤ìš´ì ìš©í•˜ê¸°, tag fieldì— ê³µë€ í—ˆìš©í•˜ê¸°","slug":"django/mysite/django-21","date":"2022-05-09T09:47:30.000Z","updated":"2024-11-28T13:59:30.760Z","comments":true,"path":"2022/05/09/django/mysite/django-21/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-21/","excerpt":"ë§ˆí¬ë‹¤ìš´ì ìš©í•˜ê¸°, tag fieldì— ê³µë€ í—ˆìš©í•˜ê¸° postì— ê·¸ë¦¼ì´ ë‚˜íƒ€ë‚˜ê²Œ í•´ì£¼ê¸° ì¤„ë°”ê¿ˆì´ ì ìš©ë  ìˆ˜ ìˆê²Œ ë°”ê¿”ì£¼ê¸° -&gt; ë§ˆí¬ë‹¤ìš´ ì´ìš©í•˜ê¸° postì— ê·¸ë¦¼ì´ ë‚˜íƒ€ë‚˜ê²Œ í•´ì£¼ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;img class=&quot;img-fluid rounded&quot; src=&quot;&#123;&#123;object.head_image.url&#125;&#125;&quot; alt=&quot;&quot;&gt; ì¤„ë°”ê¿ˆì´ ì ìš©ë  ìˆ˜ ìˆê²Œ ë°”ê¿”ì£¼ê¸° -&gt; ë§ˆí¬ë‹¤ìš´ ì´ìš©í•˜ê¸°https://neutronx.github.io/django-markdownx/ pip install django-markdownx ì•± ì¶”ê°€í•˜ê¸°","text":"ë§ˆí¬ë‹¤ìš´ì ìš©í•˜ê¸°, tag fieldì— ê³µë€ í—ˆìš©í•˜ê¸° postì— ê·¸ë¦¼ì´ ë‚˜íƒ€ë‚˜ê²Œ í•´ì£¼ê¸° ì¤„ë°”ê¿ˆì´ ì ìš©ë  ìˆ˜ ìˆê²Œ ë°”ê¿”ì£¼ê¸° -&gt; ë§ˆí¬ë‹¤ìš´ ì´ìš©í•˜ê¸° postì— ê·¸ë¦¼ì´ ë‚˜íƒ€ë‚˜ê²Œ í•´ì£¼ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;img class=&quot;img-fluid rounded&quot; src=&quot;&#123;&#123;object.head_image.url&#125;&#125;&quot; alt=&quot;&quot;&gt; ì¤„ë°”ê¿ˆì´ ì ìš©ë  ìˆ˜ ìˆê²Œ ë°”ê¿”ì£¼ê¸° -&gt; ë§ˆí¬ë‹¤ìš´ ì´ìš©í•˜ê¸°https://neutronx.github.io/django-markdownx/ pip install django-markdownx ì•± ì¶”ê°€í•˜ê¸° mysite&#x2F;settings.py INSTALLED_APPS = [ &#x27;blog&#x27;, &#x27;markdownx&#x27;, &#x27;django.contrib.admin&#x27;, &#x27;django.contrib.auth&#x27;, &#x27;django.contrib.contenttypes&#x27;, &#x27;django.contrib.sessions&#x27;, &#x27;django.contrib.messages&#x27;, &#x27;django.contrib.staticfiles&#x27;,] urlpatternsì— ì¶”ê°€í•˜ê¸° mysite&#x2F;urls.py urlpatterns = [ path(&#x27;admin/&#x27;, admin.site.urls), path(&#x27;blog/&#x27;, include(&#x27;blog.urls&#x27;)), path(&#x27;markdownx/&#x27;, include(&#x27;markdownx.urls&#x27;)),] models.pyì— ì‚¬ìš©í•˜ê¸°from markdownx.models import MarkdownxFieldclass MyModel(models.Model): myfield = MarkdownxField() blog&#x2F;models.py from django.db import modelsfrom django.contrib.auth.models import Userfrom markdownx.models import MarkdownxField# Create your models here.# ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.class Category(models.Model): # Categoryì˜ ì´ë¦„ì´ ìœ ì¼í•  ìˆ˜ ìˆê²Œ uniqueì˜µì…˜ì„ ì¤€ë‹¤. name = models.CharField(max_length=25, unique=True) description = models.TextField(blank=True) # unicodeë¥¼ í—ˆìš©í•œë‹¤. # slugë¥¼ ì´ìš©í•˜ì—¬ urlì— ì¹´í…Œê³ ë¦¬ê°€ ëœ° ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. slug = models.SlugField(unique=True, allow_unicode=True) def get_absolute_url(self): return &#x27;/blog/category/&#123;&#125;/&#x27;.format(self.slug) # ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì¶œë ¥í•´ì¤€ë‹¤. def __str__(self): return self.name class Meta: verbose_name_plural = &#x27;categories&#x27;class Post(models.Model): # ì œëª© title = models.CharField(max_length=30) # ë‚´ìš© # content = models.TextField() # ë§ˆí¬ë‹¤ìš´ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ MarkdownFieldë¡œ ë°”ê¿”ì¤€ë‹¤. content = MarkdownxField() # ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì„ ìœ„í•œ ê°ì²´ # uploadëœ ì´ë¯¸ì§€ íŒŒì¼ì€ blogì— ì €ì¥ì´ ëœë‹¤. blank = TrueëŠ” ê³µë€ì´ì—¬ë„ ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. head_image = models.ImageField(upload_to=&#x27;blog/%Y/%m/%d/&#x27;, blank=True) # ì‘ì„± ì¼ì created = models.DateTimeField() # ì €ì author = models.ForeignKey(User, on_delete=models.CASCADE) # ì¹´í…Œê³ ë¦¬ ê°ì²´ ì¶”ê°€ category = models.ForeignKey(Category, blank=True, null=True, on_delete=models.SET_NULL) # í•´ë‹¹ ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¿§ì„ ë•Œ ì–´ë–¤ ì‹ìœ¼ë¡œ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤. def __str__(self): # ì‘ì„±ëœ í˜ì´ì§€ì˜ ì œëª©ê³¼ ì €ìë¥¼ ë³´ì—¬ì¤€ë‹¤. return &#x27;&#123;&#125; :: &#123;&#125;&#x27;.format(self.title, self.author) # í¬ìŠ¤íŠ¸ì˜ ì ˆëŒ€ ê²½ë¡œë¥¼ ì–»ê¸° ìœ„í•œ í•¨ def get_absolute_url(self): return &#x27;/blog/&#123;&#125;/&#x27;.format(self.pk) ë§ˆí¬ë‹¤ìš´ì•ˆì˜ ì´ë¯¸ì§€ê°€ ì œëŒ€ë¡œ ë‚˜ì˜¬ ìˆ˜ ìˆê²Œ í•˜ê¸° blog&#x2F;models.py from markdownx.utils import markdown# markdownì„ htmlë¡œ ë°”ê¿”ì¤€ë‹¤. def get_markdwon_content(self): return markdown(self.content) blog&#x2F;templates&#x2F;post_detail.html &#123;#&#123;&#123; object.content &#125;&#125;#&#125;&lt;!--safe ì˜µì…˜ì„ ì¤˜ì•¼ ë°”ë€ html ì½”ë“œë¥¼ ë°”ë¡œ ì ìš©í•  ìˆ˜ ìˆë‹¤ --&gt;&#123;&#123; object.get_markdwon_content | safe &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Post Detail ê°œì„ ì‚¬í•­ ë„ì¶œí•˜ê³  Test ì½”ë“œ ë§Œë“¤ê¸°","slug":"django/mysite/django-20","date":"2022-05-09T08:47:30.000Z","updated":"2024-11-28T13:59:31.073Z","comments":true,"path":"2022/05/09/django/mysite/django-20/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-20/","excerpt":"Post Detail ê°œì„ ì‚¬í•­ ë„ì¶œí•˜ê³  Test ì½”ë“œ ë§Œë“¤ê¸° postì— ì¹´í…Œê³ ë¦¬ í‘œì‹œí•˜ê¸° edit ë²„íŠ¼ ë§Œë“¤ê¸° postì— ê·¸ë¦¼ì´ ë‚˜íƒ€ë‚˜ê²Œ í•´ì£¼ê¸° ì¤„ë°”ê¿ˆì´ ì ìš©ë  ìˆ˜ ìˆê²Œ ë°”ê¿”ì£¼ê¸° -&gt; ë§ˆí¬ë‹¤ìš´ ì´ìš©í•˜ê¸° postì— ì¹´í…Œê³ ë¦¬ í‘œì‹œí•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ë§Œë“¤ì–´ì£¼ê¸° blog&#x2F;tests.py self.assertIn(category_politics.name, main_div.text) # categoryê°€ main_divì— ìˆë‹¤.self.assertNotIn(&#x27;EDIT&#x27;, main_div.text) # EDIT ë²„íŠ¼ì´ ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ê²½ìš° ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.login_success = self.client.login(username=&#x27;smith&#x27;, password=&#x27;nopassword&#x27;) # loginì„ í•œ ê²½ìš°ì—ëŠ”self.assertTrue(login_success)response = self.client.get(post_000_url)self.assertEqual(response.status_code, 200)soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;)main_div = soup.find(&#x27;div&#x27;, id=&#x27;main-div&#x27;)self.assertEqual(post_000.author, self.author_000) # post.authorì™€ loginí•œ ì‚¬ëŒì´ ê°™ìœ¼ë©´self.assertIn(&#x27;EDIT&#x27;, main_div.text) # EDIT buttonì´ ìˆë‹¤. blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &#123;% if p.category %&#125;&lt;!-- badgeê°€ ì˜¤ë¥¸ìª½ì— ë¶™ì„ ìˆ˜ ìˆê²Œ float-rightì˜µì…˜ì„ ì´ìš©í•œë‹¤. --&gt;&lt;span class=&quot;badge badge-primary float-right&quot;&gt;&#123;&#123; p.category &#125;&#125;&lt;/span&gt;&#123;% else %&#125;&lt;span class=&quot;badge badge-primary float-right&quot;&gt;ë¯¸ë¶„ë¥˜&lt;/span&gt;&#123;% endif %&#125; post_list.htmlë¡œë¶€í„° categoryë¶€ë¶„ì˜ ë‚´ìš©ì„ post_detail.htmlì— ë¶™ì—¬ì¤€ë‹¤.","text":"Post Detail ê°œì„ ì‚¬í•­ ë„ì¶œí•˜ê³  Test ì½”ë“œ ë§Œë“¤ê¸° postì— ì¹´í…Œê³ ë¦¬ í‘œì‹œí•˜ê¸° edit ë²„íŠ¼ ë§Œë“¤ê¸° postì— ê·¸ë¦¼ì´ ë‚˜íƒ€ë‚˜ê²Œ í•´ì£¼ê¸° ì¤„ë°”ê¿ˆì´ ì ìš©ë  ìˆ˜ ìˆê²Œ ë°”ê¿”ì£¼ê¸° -&gt; ë§ˆí¬ë‹¤ìš´ ì´ìš©í•˜ê¸° postì— ì¹´í…Œê³ ë¦¬ í‘œì‹œí•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ë§Œë“¤ì–´ì£¼ê¸° blog&#x2F;tests.py self.assertIn(category_politics.name, main_div.text) # categoryê°€ main_divì— ìˆë‹¤.self.assertNotIn(&#x27;EDIT&#x27;, main_div.text) # EDIT ë²„íŠ¼ì´ ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ê²½ìš° ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.login_success = self.client.login(username=&#x27;smith&#x27;, password=&#x27;nopassword&#x27;) # loginì„ í•œ ê²½ìš°ì—ëŠ”self.assertTrue(login_success)response = self.client.get(post_000_url)self.assertEqual(response.status_code, 200)soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;)main_div = soup.find(&#x27;div&#x27;, id=&#x27;main-div&#x27;)self.assertEqual(post_000.author, self.author_000) # post.authorì™€ loginí•œ ì‚¬ëŒì´ ê°™ìœ¼ë©´self.assertIn(&#x27;EDIT&#x27;, main_div.text) # EDIT buttonì´ ìˆë‹¤. blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &#123;% if p.category %&#125;&lt;!-- badgeê°€ ì˜¤ë¥¸ìª½ì— ë¶™ì„ ìˆ˜ ìˆê²Œ float-rightì˜µì…˜ì„ ì´ìš©í•œë‹¤. --&gt;&lt;span class=&quot;badge badge-primary float-right&quot;&gt;&#123;&#123; p.category &#125;&#125;&lt;/span&gt;&#123;% else %&#125;&lt;span class=&quot;badge badge-primary float-right&quot;&gt;ë¯¸ë¶„ë¥˜&lt;/span&gt;&#123;% endif %&#125; post_list.htmlë¡œë¶€í„° categoryë¶€ë¶„ì˜ ë‚´ìš©ì„ post_detail.htmlì— ë¶™ì—¬ì¤€ë‹¤. Edit ë²„íŠ¼ ë§Œë“¤ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;!-- ë¡œê·¸ì¸ í•œ ì‚¬ìš©ìê°€ authorì™€ ê°™ìœ¼ë©´ EDIT ë²„íŠ¼ì„ ë³´ì—¬ì¤€ë‹¤.--&gt;&#123;% if request.user == object.author %&#125; &lt;span class=&quot;badge badge-info float-right&quot;&gt;EDIT&lt;/span&gt;&#123;% endif %&#125; ë²„íŠ¼ í˜•ì‹ìœ¼ë¡œ ë§Œë“¤ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;!-- ë¡œê·¸ì¸ í•œ ì‚¬ìš©ìê°€ authorì™€ ê°™ìœ¼ë©´ EDIT ë²„íŠ¼ì„ ë³´ì—¬ì¤€ë‹¤.--&gt;&#123;% if request.user == object.author %&#125; &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-secondary float-right&quot;&gt;EDIT&lt;/button&gt;&#123;% endif %&#125; ë‹¤ë¥¸ ì‚¬ëŒìœ¼ë¡œ ë¡œê·¸ì¸ ë˜ëŠ” ê²½ìš°ì— ëŒ€í•´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± blog&#x2F;tests.py login_success = self.client.login(username=&#x27;obama&#x27;, password=&#x27;nopassword&#x27;) # loginì„ í•œ ê²½ìš°ì—ëŠ”self.assertTrue(login_success)response = self.client.get(post_000_url)self.assertEqual(response.status_code, 200)soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;)main_div = soup.find(&#x27;div&#x27;, id=&#x27;main-div&#x27;)self.assertEqual(post_000.author, self.author_000) # post.authorì™€ loginí•œ ì‚¬ëŒì´ ê°™ìœ¼ë©´self.assertNotIn(&#x27;EDIT&#x27;, main_div.text) # EDIT buttonì´ ìˆë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Category í˜ì´ì§€ ë§Œë“¤ê¸° (slugField)","slug":"django/mysite/django-19","date":"2022-05-09T07:47:30.000Z","updated":"2024-11-28T13:59:31.135Z","comments":true,"path":"2022/05/09/django/mysite/django-19/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-19/","excerpt":"Category í˜ì´ì§€ ë§Œë“¤ê¸° (slugField)Categoryì— get_absolute_urlì¶”ê°€í•˜ê¸° blog&#x2F;models.py # Create your models here.# ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.class Category(models.Model): # Categoryì˜ ì´ë¦„ì´ ìœ ì¼í•  ìˆ˜ ìˆê²Œ uniqueì˜µì…˜ì„ ì¤€ë‹¤. name = models.CharField(max_length=25, unique=True) description = models.TextField(blank=True) # unicodeë¥¼ í—ˆìš©í•œë‹¤. # slugë¥¼ ì´ìš©í•˜ì—¬ urlì— ì¹´í…Œê³ ë¦¬ê°€ ëœ° ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. slug = models.SlugField(unique=True, allow_unicode=True) def get_absoulte_url(self): return &#x27;/blog/category/&#123;&#125;/&#x27;.format(self.slug) # ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì¶œë ¥í•´ì¤€ë‹¤. def __str__(self): return self.name class Meta: verbose_name_plural = &#x27;categories&#x27; adminì— slugê°€ ìë™ìœ¼ë¡œ ìƒì„± ë  ìˆ˜ ìˆê²Œí•˜ê¸° blog&#x2F;admin.py from django.contrib import adminfrom .models import Post, Category# Register your models here.class CategoryAdmin(admin.ModelAdmin): # ë¯¸ë¦¬ ë§Œë“¤ì–´ì§€ëŠ” field # slugë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤. prepopulated_fields = &#123;&#x27;slug&#x27;: (&#x27;name&#x27;, )&#125;admin.site.register(Post)admin.site.register(Category, CategoryAdmin) url ë§Œë“¤ì–´ì£¼ê¸° blog&#x2F;urls.py","text":"Category í˜ì´ì§€ ë§Œë“¤ê¸° (slugField)Categoryì— get_absolute_urlì¶”ê°€í•˜ê¸° blog&#x2F;models.py # Create your models here.# ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.class Category(models.Model): # Categoryì˜ ì´ë¦„ì´ ìœ ì¼í•  ìˆ˜ ìˆê²Œ uniqueì˜µì…˜ì„ ì¤€ë‹¤. name = models.CharField(max_length=25, unique=True) description = models.TextField(blank=True) # unicodeë¥¼ í—ˆìš©í•œë‹¤. # slugë¥¼ ì´ìš©í•˜ì—¬ urlì— ì¹´í…Œê³ ë¦¬ê°€ ëœ° ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. slug = models.SlugField(unique=True, allow_unicode=True) def get_absoulte_url(self): return &#x27;/blog/category/&#123;&#125;/&#x27;.format(self.slug) # ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì¶œë ¥í•´ì¤€ë‹¤. def __str__(self): return self.name class Meta: verbose_name_plural = &#x27;categories&#x27; adminì— slugê°€ ìë™ìœ¼ë¡œ ìƒì„± ë  ìˆ˜ ìˆê²Œí•˜ê¸° blog&#x2F;admin.py from django.contrib import adminfrom .models import Post, Category# Register your models here.class CategoryAdmin(admin.ModelAdmin): # ë¯¸ë¦¬ ë§Œë“¤ì–´ì§€ëŠ” field # slugë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤. prepopulated_fields = &#123;&#x27;slug&#x27;: (&#x27;name&#x27;, )&#125;admin.site.register(Post)admin.site.register(Category, CategoryAdmin) url ë§Œë“¤ì–´ì£¼ê¸° blog&#x2F;urls.py from django.urls import path, includefrom .import viewsurlpatterns = [ # path(&#x27;&#x27;, views.index), # path(&#x27;&lt;int:pk&gt;/&#x27;, views.post_detail), path(&#x27;category/&lt;str:slug&gt;/&#x27;, views.PostListByCategory.as_view()), path(&#x27;&lt;int:pk&gt;/&#x27;, views.PostDetail.as_view()), path(&#x27;&#x27;, views.PostList.as_view()),] blog&#x2F;models.py class PostListByCategory(PostList): def get_queryset(self): slug = self.kwargs[&#x27;slug&#x27;] category = Category.objects.get(slug=slug) return Post.objects.filter(category=category). blog&#x2F;templates&#x2F;blog&#x2F;base.html &lt;!-- titleì´ ìˆëŠ” ê²½ìš°ì— --&gt;&#123;% if title %&#125; &#123;% block title %&#125;&#123;&#123; title &#125;&#125;&#123;% endblock %&#125;&#123;% endif %&#125;&#123;% block content %&#125; ë‚´ìš© ì¶”ê°€í•˜ê¸° view ìˆ˜ì •í•˜ê¸° blog&#x2F;view.py class PostListByCategory(ListView): def get_queryset(self): slug = self.kwargs[&#x27;slug&#x27;] category = Category.objects.get(slug=slug) return Post.objects.filter(category=category).order_by(&#x27;-created&#x27;) def get_context_data(self, *, object_list=None, **kwargs): context = super(type(self), self).get_context_data(**kwargs) context[&#x27;category_list&#x27;] = Category.objects.all() # Postë“¤ ì¤‘ì—ì„œ categoryê°€ Noneì¸ ê²ƒì˜ ê°¯ìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. context[&#x27;posts_without_category&#x27;] = Post.objects.filter(category=None).count() slug = self.kwargs[&#x27;slug&#x27;] category = Category.objects.get(slug=slug) context[&#x27;title&#x27;] = &#x27;Blog - &#123;&#125;&#x27;.format(category.name) return context ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ í™œì„±í™” í•˜ê¸°&lt;a href=&quot;&#123;&#123; category.get_absolute_url &#125;&#125;&quot;&gt;&#123;&#123; category.name &#125;&#125;(&#123;&#123; category.post_set.count &#125;&#125;)&lt;/a&gt; ì œëª©ì— ì¹´í…Œê³ ë¦¬ í‘œí˜„í•´ ì£¼ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_list.html &lt;h1&gt;Blog &#123;% if category %&#125; &lt;small&gt;&#123;&#123; category &#125;&#125;&lt;/small&gt;&#123;% endif %&#125;&lt;/h1&gt; blog&#x2F;views.py slug = self.kwargs[&#x27;slug&#x27;] category = Category.objects.get(slug=slug) context[&#x27;category&#x27;] = category ì œëª© ì¹´í…Œê³ ë¦¬ í•˜ì–—ê²Œ í•˜ê¸°&lt;h1&gt;Blog &#123;% if category %&#125; &lt;small class=&quot;text-muted&quot;&gt;: &#123;&#123; category &#125;&#125;&lt;/small&gt;&#123;% endif %&#125;&lt;/h1&gt; ë¯¸ë¶„ë¥˜ í™œì„±í™” í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;base.html &lt;a href=&quot;/blog/category/_none/&quot;&gt;ë¯¸ë¶„ë¥˜(&#123;&#123; posts_without_category &#125;&#125;)&lt;/a&gt; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py # ë¯¸ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬ì— ê´€í•œ testí•¨ìˆ˜def test_post_list_no_category(self): category_politics = create_category(name=&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27;) post_000 = create_post( title=&quot;The first post&quot;, content=&quot;Hello World. We are the world.&quot;, author=self.author_000, ) post_001 = create_post( title=&quot;The second post&quot;, content=&quot;Second Second Second&quot;, author=self.author_000, category=category_politics, ) # urlì´ /blog/category/_none/ì´ë‹¤. response = self.client.get(&#x27;/blog/category/_none/&#x27;) self.assertEqual(response.status_code, 200) # ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš° BeautifulSoupì„ ì´ìš©í•´ html.parserë¡œ íŒŒì‹±í•œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;) title = soup.title # self.assertEqual(&#x27;Blog - &#123;&#125;&#x27;.format(category_politics.name), soup.title.text) main_div = soup.find(&#x27;div&#x27;, id=&#x27;main-div&#x27;) self.assertIn(&#x27;ë¯¸ë¶„ë¥˜&#x27;, main_div.text) self.assertNotIn(category_politics.name, main_div.text) views.py ìˆ˜ì •í•˜ê¸° blog&#x2F;views.py class PostListByCategory(ListView): def get_queryset(self): slug = self.kwargs[&#x27;slug&#x27;] # slugê°€ noneì¸ê²½ìš° if slug == &#x27;_none&#x27;: category = None else: category = Category.objects.get(slug=slug) return Post.objects.filter(category=category).order_by(&#x27;-created&#x27;) def get_context_data(self, *, object_list=None, **kwargs): context = super(type(self), self).get_context_data(**kwargs) context[&#x27;category_list&#x27;] = Category.objects.all() # Postë“¤ ì¤‘ì—ì„œ categoryê°€ Noneì¸ ê²ƒì˜ ê°¯ìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. context[&#x27;posts_without_category&#x27;] = Post.objects.filter(category=None).count() slug = self.kwargs[&#x27;slug&#x27;] # slugê°€ noneì¸ê²½ìš° if slug == &#x27;_none&#x27;: context[&#x27;category&#x27;] = &#x27;ë¯¸ë¶„&#x27; else: category = Category.objects.get(slug=slug) context[&#x27;category&#x27;] = category # context[&#x27;title&#x27;] = &#x27;Blog - &#123;&#125;&#x27;.format(category.name) return context","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - ì‚¬ì†Œí•œ ë¬¸ì œë“¤ í•´ê²°(ë¶ˆí•„ìš”í•œ ë‚´ìš© ì‚­ì œí•˜ê¸°; category ë³µìˆ˜í˜• ìˆ˜ì •í•˜ê¸° (categorys -> categories))","slug":"django/mysite/django-18","date":"2022-05-09T06:47:30.000Z","updated":"2024-11-28T13:59:30.404Z","comments":true,"path":"2022/05/09/django/mysite/django-18/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-18/","excerpt":"ì‚¬ì†Œí•œ ë¬¸ì œë“¤ í•´ê²°: ë¶ˆí•„ìš”í•œ ë‚´ìš© ì‚­ì œí•˜ê¸°; category ë³µìˆ˜í˜• ìˆ˜ì •í•˜ê¸° (categorys -&gt; categories)post_detailì— ì¹´í…Œê³ ë¦¬ ë°˜ì˜í•˜ê¸° blog&#x2F;models.py def get_context_data(self, *, object_list=None, **kwargs): context = super(PostList, self).get_context_data(**kwargs) context[&#x27;category_list&#x27;] = Category.objects.all() # Postë“¤ ì¤‘ì—ì„œ categoryê°€ Noneì¸ ê²ƒì˜ ê°¯ìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. context[&#x27;posts_without_category&#x27;] = Post.objects.filter(category=None).count() return context blog&#x2F;tests.py def check_right_side(self, soup): category_card = soup.find(&#x27;div&#x27;, id=&#x27;category-card&#x27;) self.assertIn(&#x27;ë¯¸ë¶„ë¥˜(1)&#x27;, category_card.text) #### ë¯¸ë¶„ë¥˜ (1)ì´ ìˆì–´ì•¼ í•œë‹¤. self.assertIn(&#x27;ì •ì¹˜/ì‚¬íšŒ(1)&#x27;, category_card.text) #### ì •ì¹˜/ì‚¬íšŒ(1)ì´ ìˆì–´ì•¼ í•œë‹¤.# categoryê°€ ì˜ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸°self.check_right_side(soup)","text":"ì‚¬ì†Œí•œ ë¬¸ì œë“¤ í•´ê²°: ë¶ˆí•„ìš”í•œ ë‚´ìš© ì‚­ì œí•˜ê¸°; category ë³µìˆ˜í˜• ìˆ˜ì •í•˜ê¸° (categorys -&gt; categories)post_detailì— ì¹´í…Œê³ ë¦¬ ë°˜ì˜í•˜ê¸° blog&#x2F;models.py def get_context_data(self, *, object_list=None, **kwargs): context = super(PostList, self).get_context_data(**kwargs) context[&#x27;category_list&#x27;] = Category.objects.all() # Postë“¤ ì¤‘ì—ì„œ categoryê°€ Noneì¸ ê²ƒì˜ ê°¯ìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. context[&#x27;posts_without_category&#x27;] = Post.objects.filter(category=None).count() return context blog&#x2F;tests.py def check_right_side(self, soup): category_card = soup.find(&#x27;div&#x27;, id=&#x27;category-card&#x27;) self.assertIn(&#x27;ë¯¸ë¶„ë¥˜(1)&#x27;, category_card.text) #### ë¯¸ë¶„ë¥˜ (1)ì´ ìˆì–´ì•¼ í•œë‹¤. self.assertIn(&#x27;ì •ì¹˜/ì‚¬íšŒ(1)&#x27;, category_card.text) #### ì •ì¹˜/ì‚¬íšŒ(1)ì´ ìˆì–´ì•¼ í•œë‹¤.# categoryê°€ ì˜ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸°self.check_right_side(soup)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - ë¸”ë¡œê·¸ postì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸°","slug":"django/mysite/django-17","date":"2022-05-09T05:47:30.000Z","updated":"2024-11-28T13:59:30.292Z","comments":true,"path":"2022/05/09/django/mysite/django-17/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-17/","excerpt":"ë¸”ë¡œê·¸ post listì™€ post detail í˜ì´ì§€ì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py post_001 = create_post( title=&quot;The second post&quot;, content=&quot;Second Second Second&quot;, author=self.author_000, category=create_category(name=&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27;))# category cardì—ì„œ category_card = body.find(&#x27;div&#x27;, id=&#x27;category-card&#x27;) self.assertIn(&#x27;ë¯¸ë¶„ë¥˜(1)&#x27;, category_card.text) #### ë¯¸ë¶„ë¥˜ (1)ì´ ìˆì–´ì•¼ í•œë‹¤. self.assertIn(&#x27;ì •ì¹˜/ì‚¬íšŒ(1)&#x27;, category_card.text) #### ì •ì¹˜/ì‚¬íšŒ(1)ì´ ìˆì–´ì•¼ í•œë‹¤. main_div = body.find(&#x27;div&#x27;, id=&#x27;main_div&#x27;) self.assertIn(&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27;, main_div.text) ###&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27; ìˆì–´ì•¼ í•¨ self.assertIn((&#x27;ë¯¸ë¶„ë¥˜&#x27;, main_div.text)) ### &#x27;ë¯¸ë¶„ë¥˜&#x27; ìˆì–´ì•¼ í•¨ id ì¶”ê°€í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;base.html &lt;div class=&quot;card my-4&quot; id = &quot;category-card&quot;&gt; ì¹´í…Œê³ ë¦¬ ì¹´ë“œ ìˆ˜ì •í•´ì£¼ê¸° blog&#x2F;views.py","text":"ë¸”ë¡œê·¸ post listì™€ post detail í˜ì´ì§€ì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py post_001 = create_post( title=&quot;The second post&quot;, content=&quot;Second Second Second&quot;, author=self.author_000, category=create_category(name=&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27;))# category cardì—ì„œ category_card = body.find(&#x27;div&#x27;, id=&#x27;category-card&#x27;) self.assertIn(&#x27;ë¯¸ë¶„ë¥˜(1)&#x27;, category_card.text) #### ë¯¸ë¶„ë¥˜ (1)ì´ ìˆì–´ì•¼ í•œë‹¤. self.assertIn(&#x27;ì •ì¹˜/ì‚¬íšŒ(1)&#x27;, category_card.text) #### ì •ì¹˜/ì‚¬íšŒ(1)ì´ ìˆì–´ì•¼ í•œë‹¤. main_div = body.find(&#x27;div&#x27;, id=&#x27;main_div&#x27;) self.assertIn(&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27;, main_div.text) ###&#x27;ì •ì¹˜/ì‚¬íšŒ&#x27; ìˆì–´ì•¼ í•¨ self.assertIn((&#x27;ë¯¸ë¶„ë¥˜&#x27;, main_div.text)) ### &#x27;ë¯¸ë¶„ë¥˜&#x27; ìˆì–´ì•¼ í•¨ id ì¶”ê°€í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;base.html &lt;div class=&quot;card my-4&quot; id = &quot;category-card&quot;&gt; ì¹´í…Œê³ ë¦¬ ì¹´ë“œ ìˆ˜ì •í•´ì£¼ê¸° blog&#x2F;views.py # templatesë¡œ ì¶”ê°€ì ì¸ ì •ë³´ë¥¼ ë„˜ê²¨ì£¼ê³  ì‹¶ì„ ê²½ìš°def get_context_data(self, *, object_list=None, **kwargs): context = super(PostList, self).get_context_data(**kwargs) context[&#x27;categories_list&#x27;] = Category.objects.all() # Postë“¤ ì¤‘ì—ì„œ categoryê°€ Noneì¸ ê²ƒì˜ ê°¯ìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. context[&#x27;posts_without_category&#x27;] = Post.objects.filter(category=None).count() return context base.html ìˆ˜ì •í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;base.html &lt;li&gt; &lt;a href=&quot;#&quot;&gt;ë¯¸ë¶„ë¥˜(&#123;&#123; posts_without_category &#125;&#125;)&lt;/a&gt;&lt;/li&gt;&#123;% for category in category_list %&#125;&lt;li&gt; &lt;a href=&quot;#&quot;&gt;&#123;&#123; category.name &#125;&#125;(&#123;&#123; category.post_set.count &#125;&#125;)&lt;/a&gt;&lt;/li&gt;&#123;% endfor %&#125; Categoryì½”ë“œ ìˆ˜ì •í•˜ê¸° blog&#x2F;models.py # Create your models here.# ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.class Category(models.Model): # Categoryì˜ ì´ë¦„ì´ ìœ ì¼í•  ìˆ˜ ìˆê²Œ uniqueì˜µì…˜ì„ ì¤€ë‹¤. name = models.CharField(max_length=25, unique=True) description = models.TextField(blank=True) # ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì¶œë ¥í•´ì¤€ë‹¤. def __str__(self): return self.name ì¹´í…Œê³ ë¦¬ê°€ ì—†ì„ ê²½ìš° ë¯¸ë¶„ë¥˜ë¡œ ì¶œë ¥ë˜ê²Œ htmlì„ ë³€ê²½í•´ì¤€ë‹¤. blog&#x2F;templates&#x2F;blog&#x2F;post_list.html &lt;!-- badgeë¥¼ ë¶™ì¸ë‹¤. --&gt;&lt;!-- ì¹´í…Œê³ ë¦¬ê°€ ìˆëŠ” ê²½ìš°ì—ëŠ” ì¹´í…Œê³ ë¦¬ë¥¼ ë³´ì—¬ì£¼ê³ , ì—†ëŠ” ê²½ìš°ì—ëŠ” ë¯¸ë¶„ë¥˜ë¥¼ ë³´ì—¬ì¤€ë‹¤. --&gt;&#123;% if p.category %&#125;&lt;!-- badgeê°€ ì˜¤ë¥¸ìª½ì— ë¶™ì„ ìˆ˜ ìˆê²Œ float-rightì˜µì…˜ì„ ì´ìš©í•œë‹¤. --&gt;&lt;span class=&quot;badge badge-primary float-right&quot;&gt;&#123;&#123; p.category &#125;&#125;&lt;/span&gt;&#123;% else %&#125;&lt;span class=&quot;badge badge-primary float-right&quot;&gt;ë¯¸ë¶„ë¥˜&lt;/span&gt;&#123;% endif %&#125; adminì— categoryë¥¼ ë“±ë¡í•˜ê¸°","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - ë¸”ë¡œê·¸ postì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸°","slug":"django/mysite/django-16","date":"2022-05-09T04:47:30.000Z","updated":"2024-11-28T13:59:30.076Z","comments":true,"path":"2022/05/09/django/mysite/django-16/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-16/","excerpt":"ë¸”ë¡œê·¸ postì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py # ì¹´í…Œê³ ë¦¬ ìƒì„±ì„ ìœ„í•œ ì½”ë“œdef create_category(name=&#x27;life&#x27;, description=&quot;&quot;): category, is_created = Category.objects.get_or_create( name=name, description=description ) return category# ì¹´í…Œê³ ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸ í•˜ê¸° ìœ„í•œclass TestModel(TestCase): def setUp(self): # ë¸Œë¼ìš°ì € ì—­í• ì„ í•´ì¤€ë‹¤. self.client = Client() self.author_000 = User.objects.create( username=&#x27;smith&#x27;, password=&#x27;nopassword&#x27;) def test_category(self): category = create_category() def test_post(self): category = create_category( ) post_000 = create_post( title=&quot;The first post&quot;, content=&quot;Hello World. We are the world.&quot;, author=self.author_000, category=category ) # ì¹´í…Œê³ ë¦¬ì—ì„œ í¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì½”ë“œ self.assertEqual(category.post_set.count(), 1) ì¹´í…Œê³ ë¦¬ ë§Œë“¤ì–´ ì£¼ê¸° blog&#x2F;models.py # ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.class Category(models.Model): name = models.CharField(max_length=25) description = models.TextField(black=True) ì „ì²´ ì†ŒìŠ¤ ì½”ë“œfrom django.db import modelsfrom django.contrib.auth.models import User# Create your models here.# ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.class Category(models.Model): # Categoryì˜ ì´ë¦„ì´ ìœ ì¼í•  ìˆ˜ ìˆê²Œ uniqueì˜µì…˜ì„ ì¤€ë‹¤. name = models.CharField(max_length=25, unique=True) description = models.TextField(blank=True)class Post(models.Model): # ì œëª© title = models.CharField(max_length=30) # ë‚´ìš© content = models.TextField() # ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì„ ìœ„í•œ ê°ì²´ # uploadëœ ì´ë¯¸ì§€ íŒŒì¼ì€ blogì— ì €ì¥ì´ ëœë‹¤. blank = TrueëŠ” ê³µë€ì´ì—¬ë„ ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. head_image = models.ImageField(upload_to=&#x27;blog/%Y/%m/%d/&#x27;, blank=True) # ì‘ì„± ì¼ì created = models.DateTimeField() # ì €ì author = models.ForeignKey(User, on_delete=models.CASCADE) # ì¹´í…Œê³ ë¦¬ ê°ì²´ ì¶”ê°€ category = models.ForeignKey(Category, blank=True, null=True, on_delete=models.SET_NULL) # í•´ë‹¹ ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¿§ì„ ë•Œ ì–´ë–¤ ì‹ìœ¼ë¡œ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤. def __str__(self): # ì‘ì„±ëœ í˜ì´ì§€ì˜ ì œëª©ê³¼ ì €ìë¥¼ ë³´ì—¬ì¤€ë‹¤. return &#x27;&#123;&#125; :: &#123;&#125;&#x27;.format(self.title, self.author) # í¬ìŠ¤íŠ¸ì˜ ì ˆëŒ€ ê²½ë¡œë¥¼ ì–»ê¸° ìœ„í•œ í•¨ def get_absolute_url(self): return &#x27;/blog/&#123;&#125;/&#x27;.format(self.pk)","text":"ë¸”ë¡œê·¸ postì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸°í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py # ì¹´í…Œê³ ë¦¬ ìƒì„±ì„ ìœ„í•œ ì½”ë“œdef create_category(name=&#x27;life&#x27;, description=&quot;&quot;): category, is_created = Category.objects.get_or_create( name=name, description=description ) return category# ì¹´í…Œê³ ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸ í•˜ê¸° ìœ„í•œclass TestModel(TestCase): def setUp(self): # ë¸Œë¼ìš°ì € ì—­í• ì„ í•´ì¤€ë‹¤. self.client = Client() self.author_000 = User.objects.create( username=&#x27;smith&#x27;, password=&#x27;nopassword&#x27;) def test_category(self): category = create_category() def test_post(self): category = create_category( ) post_000 = create_post( title=&quot;The first post&quot;, content=&quot;Hello World. We are the world.&quot;, author=self.author_000, category=category ) # ì¹´í…Œê³ ë¦¬ì—ì„œ í¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì½”ë“œ self.assertEqual(category.post_set.count(), 1) ì¹´í…Œê³ ë¦¬ ë§Œë“¤ì–´ ì£¼ê¸° blog&#x2F;models.py # ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.class Category(models.Model): name = models.CharField(max_length=25) description = models.TextField(black=True) ì „ì²´ ì†ŒìŠ¤ ì½”ë“œfrom django.db import modelsfrom django.contrib.auth.models import User# Create your models here.# ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.class Category(models.Model): # Categoryì˜ ì´ë¦„ì´ ìœ ì¼í•  ìˆ˜ ìˆê²Œ uniqueì˜µì…˜ì„ ì¤€ë‹¤. name = models.CharField(max_length=25, unique=True) description = models.TextField(blank=True)class Post(models.Model): # ì œëª© title = models.CharField(max_length=30) # ë‚´ìš© content = models.TextField() # ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì„ ìœ„í•œ ê°ì²´ # uploadëœ ì´ë¯¸ì§€ íŒŒì¼ì€ blogì— ì €ì¥ì´ ëœë‹¤. blank = TrueëŠ” ê³µë€ì´ì—¬ë„ ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. head_image = models.ImageField(upload_to=&#x27;blog/%Y/%m/%d/&#x27;, blank=True) # ì‘ì„± ì¼ì created = models.DateTimeField() # ì €ì author = models.ForeignKey(User, on_delete=models.CASCADE) # ì¹´í…Œê³ ë¦¬ ê°ì²´ ì¶”ê°€ category = models.ForeignKey(Category, blank=True, null=True, on_delete=models.SET_NULL) # í•´ë‹¹ ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¿§ì„ ë•Œ ì–´ë–¤ ì‹ìœ¼ë¡œ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤. def __str__(self): # ì‘ì„±ëœ í˜ì´ì§€ì˜ ì œëª©ê³¼ ì €ìë¥¼ ë³´ì—¬ì¤€ë‹¤. return &#x27;&#123;&#125; :: &#123;&#125;&#x27;.format(self.title, self.author) # í¬ìŠ¤íŠ¸ì˜ ì ˆëŒ€ ê²½ë¡œë¥¼ ì–»ê¸° ìœ„í•œ í•¨ def get_absolute_url(self): return &#x27;/blog/&#123;&#125;/&#x27;.format(self.pk)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - read more ë²„íŠ¼ ë™ì‘í•˜ê²Œ í•˜ê¸°, post_detail í˜ì´ì§€ ê°œì„ í•˜ê¸°","slug":"django/mysite/django-15","date":"2022-05-09T03:47:30.000Z","updated":"2024-11-28T13:59:30.834Z","comments":true,"path":"2022/05/09/django/mysite/django-15/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-15/","excerpt":"read more ë²„íŠ¼ ë™ì‘í•˜ê²Œ í•˜ê¸°, post_detail í˜ì´ì§€ ê°œì„ í•˜ê¸°ë²„íŠ¼ í™œì„±í™” í•˜ê¸°id ì¶”ê°€í•´ì£¼ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_list.html &lt;!-- ë²„íŠ¼ì´ ëˆŒë ¸ì„ ë•Œ ì´ë™í•  urlê³¼ buttonì„ ì‰½ê²Œ ì°¾ê¸° ìœ„í•œ idë¥¼ ì¶”ê°€í•œë‹¤. --&gt;&lt;a href=&quot;&#123;&#123; p.get_absolute_url &#125;&#125;&quot; class=&quot;btn btn-primary&quot; id=&quot;read-more-post-&#123;&#123; p.pk &#125;&#125;&quot;&gt;Read More&amp;rarr;&lt;/a&gt; í…ŒìŠ¤íŠ¸ ì½”ë“œë¶€í„° ì‘ì„±í•˜ê¸° blog&#x2F;tests.py # button í™•ì¸ì„ ìœ„í•œ ì½”ë“œpost_000_read_more_button = body.find(&#x27;a&#x27;, id=&quot;read-more-post-&#123;&#125;&quot;.format(post_000.pk))self.assertEqual(post_000_read_more_button[&#x27;href&#x27;], post_000.get_absolute_url()) post_detail ë””ìì¸ ë³€ê²½í•˜ê¸°","text":"read more ë²„íŠ¼ ë™ì‘í•˜ê²Œ í•˜ê¸°, post_detail í˜ì´ì§€ ê°œì„ í•˜ê¸°ë²„íŠ¼ í™œì„±í™” í•˜ê¸°id ì¶”ê°€í•´ì£¼ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_list.html &lt;!-- ë²„íŠ¼ì´ ëˆŒë ¸ì„ ë•Œ ì´ë™í•  urlê³¼ buttonì„ ì‰½ê²Œ ì°¾ê¸° ìœ„í•œ idë¥¼ ì¶”ê°€í•œë‹¤. --&gt;&lt;a href=&quot;&#123;&#123; p.get_absolute_url &#125;&#125;&quot; class=&quot;btn btn-primary&quot; id=&quot;read-more-post-&#123;&#123; p.pk &#125;&#125;&quot;&gt;Read More&amp;rarr;&lt;/a&gt; í…ŒìŠ¤íŠ¸ ì½”ë“œë¶€í„° ì‘ì„±í•˜ê¸° blog&#x2F;tests.py # button í™•ì¸ì„ ìœ„í•œ ì½”ë“œpost_000_read_more_button = body.find(&#x27;a&#x27;, id=&quot;read-more-post-&#123;&#125;&quot;.format(post_000.pk))self.assertEqual(post_000_read_more_button[&#x27;href&#x27;], post_000.get_absolute_url()) post_detail ë””ìì¸ ë³€ê²½í•˜ê¸°https://startbootstrap.com/previews/blog-post/ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° blog&#x2F;tests.py # post datailì˜ ë‚´ìš©ë“¤ì´ ì˜ ë“¤ì–´ê°”ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ ì½”ë“œ body = soup.body main_div = body.find(&#x27;div&#x27;, id=&#x27;main_div&#x27;) self.assertIn(post_000.title, main_div.text) self.assertIn(post_000.author.username, main_div.text) ë¶€íŠ¸ ìŠ¤íŠ¸ë©ìœ¼ë¡œ ë¶€í„° ê°€ì ¸ì˜¤ê¸° blog&#x2F;templates&#x2F;post_detail.html &#123;% extends &#x27;blog/base.html&#x27; %&#125;&lt;!-- í¬ìŠ¤íŠ¸ì˜ titleì„ ë°˜ì˜í•œë‹¤. --&gt;&#123;% block title %&#125;&#123;&#123; object.title &#125;&#125;&#123;% endblock %&#125;&#123;% block content %&#125;&lt;!-- Title --&gt;&lt;h1 class=&quot;mt-4&quot;&gt;Post Title&lt;/h1&gt;&lt;!-- Author --&gt;&lt;p class=&quot;lead&quot;&gt; by &lt;a href=&quot;#&quot;&gt;Start Bootstrap&lt;/a&gt;&lt;/p&gt;&lt;hr&gt;&lt;!-- Date/Time --&gt;&lt;p&gt;Posted on January 1, 2019 at 12:00 PM&lt;/p&gt;&lt;hr&gt;&lt;!-- Preview Image --&gt;&lt;img class=&quot;img-fluid rounded&quot; src=&quot;http://placehold.it/900x300&quot; alt=&quot;&quot;&gt;&lt;hr&gt;&lt;!-- Post Content --&gt;&lt;p class=&quot;lead&quot;&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ducimus, vero, obcaecati, aut, error quam sapiente nemo saepe quibusdam sit excepturi nam quia corporis eligendi eos magni recusandae laborum minus inventore?&lt;/p&gt;&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut, tenetur natus doloremque laborum quos iste ipsum rerum obcaecati impedit odit illo dolorum ab tempora nihil dicta earum fugiat. Temporibus, voluptatibus.&lt;/p&gt;&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eos, doloribus, dolorem iusto blanditiis unde eius illum consequuntur neque dicta incidunt ullam ea hic porro optio ratione repellat perspiciatis. Enim, iure!&lt;/p&gt;&lt;blockquote class=&quot;blockquote&quot;&gt; &lt;p class=&quot;mb-0&quot;&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.&lt;/p&gt; &lt;footer class=&quot;blockquote-footer&quot;&gt;Someone famous in &lt;cite title=&quot;Source Title&quot;&gt;Source Title&lt;/cite&gt; &lt;/footer&gt;&lt;/blockquote&gt;&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Error, nostrum, aliquid, animi, ut quas placeat totam sunt tempora commodi nihil ullam alias modi dicta saepe minima ab quo voluptatem obcaecati?&lt;/p&gt;&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Harum, dolor quis. Sunt, ut, explicabo, aliquam tenetur ratione tempore quidem voluptates cupiditate voluptas illo saepe quaerat numquam recusandae? Qui, necessitatibus, est!&lt;/p&gt;&lt;hr&gt;&lt;!-- Comments Form --&gt;&lt;div class=&quot;card my-4&quot;&gt; &lt;h5 class=&quot;card-header&quot;&gt;Leave a Comment:&lt;/h5&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;form&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;textarea class=&quot;form-control&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt;&lt;!-- Single Comment --&gt;&lt;div class=&quot;media mb-4&quot;&gt; &lt;img class=&quot;d-flex mr-3 rounded-circle&quot; src=&quot;http://placehold.it/50x50&quot; alt=&quot;&quot;&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h5 class=&quot;mt-0&quot;&gt;Commenter Name&lt;/h5&gt; Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus. &lt;/div&gt;&lt;/div&gt;&lt;!-- Comment with nested comments --&gt;&lt;div class=&quot;media mb-4&quot;&gt; &lt;img class=&quot;d-flex mr-3 rounded-circle&quot; src=&quot;http://placehold.it/50x50&quot; alt=&quot;&quot;&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h5 class=&quot;mt-0&quot;&gt;Commenter Name&lt;/h5&gt; Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus. &lt;div class=&quot;media mt-4&quot;&gt; &lt;img class=&quot;d-flex mr-3 rounded-circle&quot; src=&quot;http://placehold.it/50x50&quot; alt=&quot;&quot;&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h5 class=&quot;mt-0&quot;&gt;Commenter Name&lt;/h5&gt; Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus. &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;media mt-4&quot;&gt; &lt;img class=&quot;d-flex mr-3 rounded-circle&quot; src=&quot;http://placehold.it/50x50&quot; alt=&quot;&quot;&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h5 class=&quot;mt-0&quot;&gt;Commenter Name&lt;/h5&gt; Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus. &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&#123;% endblock %&#125; post_detail ìˆ˜ì •í•˜ê¸° blog&#x2F;templates&#x2F;post_detail.html &#123;% extends &#x27;blog/base.html&#x27; %&#125;&lt;!-- í¬ìŠ¤íŠ¸ì˜ titleì„ ë°˜ì˜í•œë‹¤. --&gt;&#123;% block title %&#125;&#123;&#123; object.title &#125;&#125;&#123;% endblock %&#125;&#123;% block content %&#125;&lt;!-- Title --&gt;&lt;h1&gt;&#123;&#123; object.title &#125;&#125;&lt;/h1&gt;&lt;!-- Author --&gt;&lt;p class=&quot;lead&quot;&gt; by &lt;a href=&quot;#&quot;&gt;&#123;&#123; object.author.username &#125;&#125;&lt;/a&gt;&lt;/p&gt; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€ blog&#x2F;tests.py # post datailì˜ ë‚´ìš©ë“¤ì´ ì˜ ë“¤ì–´ê°”ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ ì½”ë“œ body = soup.body main_div = body.find(&#x27;div&#x27;, id=&#x27;main_div&#x27;) self.assertIn(post_000.title, main_div.text) self.assertIn(post_000.author.username, main_div.text) self.assertIn(post_000.content, main_div.text)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - HTML ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ê¸°","slug":"django/mysite/django-14","date":"2022-05-09T02:47:30.000Z","updated":"2024-11-28T13:59:30.616Z","comments":true,"path":"2022/05/09/django/mysite/django-14/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-14/","excerpt":"HTML ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;base.html ì¶”ê°€ &lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;!-- Blog Entries Column --&gt; &lt;div class=&quot;col-md-8&quot;&gt; &#123;% block content %&#125; &#123;% endblock %&#125; &lt;/div&gt; blog&#x2F;templates&#x2F;blog&#x2F;post_list ìˆ˜ì • &#123;% extends &#x27;blog/base.html&#x27; %&#125;&#123;% block content %&#125;&lt;!-- Blog Post --&gt;&#123;%if object_list.exists %&#125;&lt;!-- í¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ê²Œì‹œë¬¼ë“¤ì„ í•˜ë‚˜ì”© ê°€ì ¸ì˜¨ë‹¤. --&gt;&#123;% for p in object_list %&#125;&lt;div class=&quot;card mb-4&quot;&gt; &lt;!-- &lt;img class=&quot;card-img-top&quot; src=&quot;http://placehold.it/750x300&quot; alt=&quot;Card image cap&quot; /&gt; --&gt; &#123;% if p.head_image %&#125; &lt;img class=&quot;card-img-top&quot; src=&quot;&#123;&#123;p.head_image.url&#125;&#125;&quot; alt=&quot;Card image cap&quot; /&gt; &#123;% else %&#125; &lt;img class=&quot;card-img-top&quot; src=&quot;https://picsum.photos/seed/picsum/750/300&quot; alt=&quot;Card image cap&quot; /&gt; &#123;% endif %&#125; &lt;div class=&quot;card-body&quot;&gt; &lt;!-- ì œëª© --&gt; &lt;h2 class=&quot;card-title&quot;&gt;&#123;&#123;p.title&#125;&#125;&lt;/h2&gt; &lt;!-- ë‚´ìš© --&gt; &lt;p class=&quot;card-text&quot;&gt; &#123;&#123;p.content | truncatewords:50&#125;&#125; &lt;/p&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-primary&quot;&gt;Read More &amp;rarr;&lt;/a&gt; &lt;/div&gt; &lt;!-- ì‘ì„±ì¼ê³¼ ì‘ì„±ì --&gt; &lt;div class=&quot;card-footer text-muted&quot;&gt; Posted on &#123;&#123;p.created&#125;&#125; by &lt;a href=&quot;#&quot;&gt;&#123;&#123;p.author&#125;&#125;&lt;/a&gt; &lt;/div&gt;&lt;/div&gt;&#123;%endfor%&#125;&#123;%else%&#125;&lt;h3&gt;ì•„ì§ ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.&lt;/h3&gt;&#123;%endif%&#125;&#123;% endblock %&#125; extendsì™€ blockì„ ì´ìš©í•˜ì—¬ ì¤‘ë³µë˜ëŠ” í…œí”Œë¦¿ì„ ì‚­ì œí•œ í›„ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ ì£¼ì—ˆë‹¤. blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &#123;% extends &#x27;blog/base.html&#x27; %&#125;&#123;% block content %&#125;&lt;h1&gt;&#123;&#123;object.title&#125;&#125;&lt;/h1&gt;&lt;div&gt; &#123;&#123;object.content&#125;&#125;&lt;/div&gt;&#123;% endblock %&#125; ê²°ê³¼","text":"HTML ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;base.html ì¶”ê°€ &lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;!-- Blog Entries Column --&gt; &lt;div class=&quot;col-md-8&quot;&gt; &#123;% block content %&#125; &#123;% endblock %&#125; &lt;/div&gt; blog&#x2F;templates&#x2F;blog&#x2F;post_list ìˆ˜ì • &#123;% extends &#x27;blog/base.html&#x27; %&#125;&#123;% block content %&#125;&lt;!-- Blog Post --&gt;&#123;%if object_list.exists %&#125;&lt;!-- í¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ê²Œì‹œë¬¼ë“¤ì„ í•˜ë‚˜ì”© ê°€ì ¸ì˜¨ë‹¤. --&gt;&#123;% for p in object_list %&#125;&lt;div class=&quot;card mb-4&quot;&gt; &lt;!-- &lt;img class=&quot;card-img-top&quot; src=&quot;http://placehold.it/750x300&quot; alt=&quot;Card image cap&quot; /&gt; --&gt; &#123;% if p.head_image %&#125; &lt;img class=&quot;card-img-top&quot; src=&quot;&#123;&#123;p.head_image.url&#125;&#125;&quot; alt=&quot;Card image cap&quot; /&gt; &#123;% else %&#125; &lt;img class=&quot;card-img-top&quot; src=&quot;https://picsum.photos/seed/picsum/750/300&quot; alt=&quot;Card image cap&quot; /&gt; &#123;% endif %&#125; &lt;div class=&quot;card-body&quot;&gt; &lt;!-- ì œëª© --&gt; &lt;h2 class=&quot;card-title&quot;&gt;&#123;&#123;p.title&#125;&#125;&lt;/h2&gt; &lt;!-- ë‚´ìš© --&gt; &lt;p class=&quot;card-text&quot;&gt; &#123;&#123;p.content | truncatewords:50&#125;&#125; &lt;/p&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-primary&quot;&gt;Read More &amp;rarr;&lt;/a&gt; &lt;/div&gt; &lt;!-- ì‘ì„±ì¼ê³¼ ì‘ì„±ì --&gt; &lt;div class=&quot;card-footer text-muted&quot;&gt; Posted on &#123;&#123;p.created&#125;&#125; by &lt;a href=&quot;#&quot;&gt;&#123;&#123;p.author&#125;&#125;&lt;/a&gt; &lt;/div&gt;&lt;/div&gt;&#123;%endfor%&#125;&#123;%else%&#125;&lt;h3&gt;ì•„ì§ ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.&lt;/h3&gt;&#123;%endif%&#125;&#123;% endblock %&#125; extendsì™€ blockì„ ì´ìš©í•˜ì—¬ ì¤‘ë³µë˜ëŠ” í…œí”Œë¦¿ì„ ì‚­ì œí•œ í›„ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ ì£¼ì—ˆë‹¤. blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &#123;% extends &#x27;blog/base.html&#x27; %&#125;&#123;% block content %&#125;&lt;h1&gt;&#123;&#123;object.title&#125;&#125;&lt;/h1&gt;&lt;div&gt; &#123;&#123;object.content&#125;&#125;&lt;/div&gt;&#123;% endblock %&#125; ê²°ê³¼AssertionError: &#x27; &#x27; != &#x27;Blog&#x27;- + Blog----------------------------------------------------------------------Ran 2 tests in 0.031sFAILED (failures=2)Destroying test database for alias &#x27;default&#x27;... í…ŒìŠ¤íŠ¸ì‹œ ì˜¤ë¥˜ê°€ ëœ¬ë‹¤. íƒ€ì´í‹€ì´ ì œëŒ€ë¡œ ë°˜ì˜ì´ ì•ˆëê¸° ë•Œë¬¸ì´ë‹¤. titleë„ ì œëŒ€ë¡œ ë°˜ì˜ì´ ë  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;base.html &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;!-- titleì´ ì—†ëŠ” ê²½ìš°ëŠ” Blogë¥¼ ë‚´ë³´ë‚´ê³  ìˆëŠ” ê²½ìš°ëŠ” ê·¸ê²ƒìœ¼ë¡œ ëŒ€ì²´í•œë‹¤. --&gt; &lt;title&gt;&#123;% block title %&#125;Blog&#123;% endblock %&#125;&lt;/title&gt; blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &#123;% extends &#x27;blog/base.html&#x27; %&#125;&lt;!-- í¬ìŠ¤íŠ¸ì˜ titleì„ ë°˜ì˜í•œë‹¤. --&gt;&#123;% block title %&#125;&#123;&#123; object.title &#125;&#125;&#123;% endblock %&#125;&#123;% block content %&#125;&lt;h1&gt;&#123;&#123;object.title&#125;&#125;&lt;/h1&gt;&lt;div&gt; &#123;&#123;object.content&#125;&#125;&lt;/div&gt;&#123;% endblock %&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Post Detail í˜ì´ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°","slug":"django/mysite/django-13","date":"2022-05-09T01:47:30.000Z","updated":"2024-11-28T13:59:29.927Z","comments":true,"path":"2022/05/09/django/mysite/django-13/","link":"","permalink":"https://ckck803.github.io/2022/05/09/django/mysite/django-13/","excerpt":"Post Detail í˜ì´ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°ì ˆëŒ€ ê²½ë¡œë¥¼ ì–»ê¸° ìœ„í•¨ í•¨ìˆ˜ ë§Œë“¤ê¸° blog&#x2F;models.py def get_absolute_url(self): return &#x27;/blog/&#123;&#125;/&#x27;.format(self.pk) admin í˜ì´ì§€ë‚´ì˜ postì— view on siteë²„íŠ¼ì´ í™œì„±í™” ëœë‹¤. blog&#x2F;tests.py def create_post(title, content, author): blog_post = Post.objects.create( title=title, content=content, created=timezone.now(), author=author, ) detailì„ í™•ì¸í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë¥¼ ìƒì„± blog&#x2F;tests.py","text":"Post Detail í˜ì´ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°ì ˆëŒ€ ê²½ë¡œë¥¼ ì–»ê¸° ìœ„í•¨ í•¨ìˆ˜ ë§Œë“¤ê¸° blog&#x2F;models.py def get_absolute_url(self): return &#x27;/blog/&#123;&#125;/&#x27;.format(self.pk) admin í˜ì´ì§€ë‚´ì˜ postì— view on siteë²„íŠ¼ì´ í™œì„±í™” ëœë‹¤. blog&#x2F;tests.py def create_post(title, content, author): blog_post = Post.objects.create( title=title, content=content, created=timezone.now(), author=author, ) detailì„ í™•ì¸í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë¥¼ ìƒì„± blog&#x2F;tests.py # post detailì„ í™•ì¸í•˜ê¸° ìœ„í•œ í•¨ìˆ˜def test_post_detail(self): post_000 = create_post( title=&quot;The first post&quot;, content=&quot;Hello World. We are the world.&quot;, author=self.author_000, ) self.assertGreater(Post.objects.count(), 0) post_000_url = post_000.get_absolute_url() self.assertEqual(post_000_url, &#x27;/blog/&#123;&#125;/&#x27;.format(post_000.pk)) response = self.client.get(post_000_url) self.assertEqual(response.status_code, 200) soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;) title = soup.title self.assertEqual(title.text, &#x27;&#123;&#125;&#x27;.format(post_000.title)) self.check_navbar(soup) ì „ì²´ ì†ŒìŠ¤ ì½”ë“œfrom django.test import TestCase, Clientfrom bs4 import BeautifulSoupfrom .models import Postfrom django.utils import timezonefrom django.contrib.auth.models import User# Create your tests here.def create_post(title, content, author): blog_post = Post.objects.create( title=title, content=content, created=timezone.now(), author=author, ) return blog_postclass TestView(TestCase): def setUp(self): # ë¸Œë¼ìš°ì € ì—­í• ì„ í•´ì¤€ë‹¤. self.client = Client() self.author_000 = User.objects.create(username=&#x27;smith&#x27;, password=&#x27;nopassword&#x27;) def check_navbar(self, soup): # Beautifulsoup ê°ì²´ë¡œë¶€í„° div íƒœê·¸ë¥¼ ê°–ê³  idëŠ” navbarë¥¼ ê°€ì§„ ë‚´ìš©ì„ ê°€ì ¸ì˜¨ë‹¤. navbar = soup.find(&#x27;div&#x27;, id=&#x27;navbar&#x27;) # ë‚´ìš©ì¤‘ì—ì„œ Blogê°€ ë“¤ì–´ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. self.assertIn(&#x27;Blog&#x27;, navbar.text) # ë‚´ìš©ì¤€ì—ì„œ About meê°€ ë“¤ì–´ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. self.assertIn(&#x27;About me&#x27;, navbar.text) def test_post_list(self): # blogë¡œ getìš”ì²­ì„ í•œ í›„ response = self.client.get(&#x27;/blog/&#x27;) # ì‘ë‹µ ê°’ì´ 200ì´ë‘ ê°™ì€ì§€ í™•ì¸í•´ë¼ self.assertEqual(response.status_code, 200) # ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš° BeautifulSoupì„ ì´ìš©í•´ html.parserë¡œ íŒŒì‹±í•œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;) title = soup.title self.assertEqual(title.text, &#x27;Blog&#x27;) self.check_navbar(soup) # # Beautifulsoup ê°ì²´ë¡œë¶€í„° div íƒœê·¸ë¥¼ ê°–ê³  idëŠ” navbarë¥¼ ê°€ì§„ ë‚´ìš©ì„ ê°€ì ¸ì˜¨ë‹¤. # navbar = soup.find(&#x27;div&#x27;, id = &#x27;navbar&#x27;) # # ë‚´ìš©ì¤‘ì—ì„œ Blogê°€ ë“¤ì–´ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. # self.assertIn(&#x27;Blog&#x27;, navbar.text) # # ë‚´ìš©ì¤€ì—ì„œ About meê°€ ë“¤ì–´ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. # self.assertIn(&#x27;About me&#x27;, navbar.text) # Blog í¬ìŠ¤íŠ¸ê°€ ì—†ëŠ” ê²½ìš°ì—ëŠ” ì•„ì§ ì—†ìŠµë‹ˆë‹¤ë¥¼ ë„ì–´ì¤€ë‹¤. self.assertEqual(Post.objects.count(), 0) self.assertIn(&#x27;ì•„ì§ ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.&#x27;, soup.body.text) # testì—ëŠ” databaseì— ì‹¤ì¬ ë°ì´í„°ê°€ ë‹´ê²¨ ìˆëŠ”ì§€ëŠ” ê³ ë ¤í•˜ì§€ ì•ŸëŠ”ë‹¤. # ìƒˆë¡œ dbë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆì—ì„œ testë¥¼ ì§„í–‰í•œë‹¤. post_000 = create_post( title=&quot;The first post&quot;, content=&quot;Hello World. We are the world.&quot;, author=self.author_000, ) # Blog í¬ìŠ¤í„°ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° self.assertGreater(Post.objects.count(), 0) response = self.client.get(&#x27;/blog/&#x27;) self.assertEqual(response.status_code, 200) soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;) body = soup.body # post_000ì´ ë“¤ì–´ê°€ ìˆëŠ” ìƒíƒœë¼ ì•„ì§ ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤ê°€ ë‚˜ì˜¤ë©´ ì•ˆëœë‹¤. self.assertNotIn(&#x27;ì•„ì§ ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.&#x27;, body.text) # post_000ì´ ì œëŒ€ë¡œ ë“¤ì–´ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. self.assertIn(post_000.title, body.text) # post detailì„ í™•ì¸í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ def test_post_detail(self): post_000 = create_post( title=&quot;The first post&quot;, content=&quot;Hello World. We are the world.&quot;, author=self.author_000, ) self.assertGreater(Post.objects.count(), 0) post_000_url = post_000.get_absolute_url() self.assertEqual(post_000_url, &#x27;/blog/&#123;&#125;/&#x27;.format(post_000.pk)) response = self.client.get(post_000_url) self.assertEqual(response.status_code, 200) soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;) title = soup.title self.assertEqual(title.text, &#x27;&#123;&#125;&#x27;.format(post_000.title)) self.check_navbar(soup)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Post List í˜ì´ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° part A","slug":"django/mysite/django-12","date":"2022-05-08T09:47:30.000Z","updated":"2024-11-28T13:59:30.015Z","comments":true,"path":"2022/05/08/django/mysite/django-12/","link":"","permalink":"https://ckck803.github.io/2022/05/08/django/mysite/django-12/","excerpt":"Post Detail í˜ì´ì§€ ë§Œë“¤ê¸°ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ urlì„ ì¶”ê°€í•œë‹¤. blog&#x2F;urls.py from django.urls import path, includefrom .import viewsurlpatterns = [ # path(&#x27;&#x27;, views.index), path(&#x27;&lt;int:pk&gt;/&#x27;, views.post_detail()) path(&#x27;&#x27;, views.PostList.as_view()),] ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ viewë¥¼ ìœ„í•œ ì½”ë“œë¥¼ ì‘ì„± blog&#x2F;views.py from django.shortcuts import renderfrom .models import Postfrom django.views.generic import ListView# Create your views here.# Listë¡œ ë³´ì—¬ì¤„ ë•ŒëŠ” django.views.genericì˜# ListViewë¥¼ ìƒì†í•˜ì—¬ ë³´ì—¬ì£¼ë©´ ê°„ë‹¨í•˜ê²Œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.class PostList(ListView): model = Post def get_queryset(self): # ì—­ìˆœìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ -ë¡œ ë¶™ì¸ë‹¤. return Post.objects.order_by(&#x27;-created&#x27;)# ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ í•¨ìˆ˜ë¥¼ ì¶”ê°€í•œë‹¤.def post_detail(request, pk): blog_post = Post.objects.get(pk=pk) return render( request, &#x27;blog/post_detail.html&#x27;, &#123; &#x27;blog_post&#x27;: blog_post, &#125; ) ìƒì„¸ í˜ì´ì§€ë¥¼ ìœ„í•œ html ì½”ë“œ ë§Œë“¤ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html","text":"Post Detail í˜ì´ì§€ ë§Œë“¤ê¸°ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ urlì„ ì¶”ê°€í•œë‹¤. blog&#x2F;urls.py from django.urls import path, includefrom .import viewsurlpatterns = [ # path(&#x27;&#x27;, views.index), path(&#x27;&lt;int:pk&gt;/&#x27;, views.post_detail()) path(&#x27;&#x27;, views.PostList.as_view()),] ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ viewë¥¼ ìœ„í•œ ì½”ë“œë¥¼ ì‘ì„± blog&#x2F;views.py from django.shortcuts import renderfrom .models import Postfrom django.views.generic import ListView# Create your views here.# Listë¡œ ë³´ì—¬ì¤„ ë•ŒëŠ” django.views.genericì˜# ListViewë¥¼ ìƒì†í•˜ì—¬ ë³´ì—¬ì£¼ë©´ ê°„ë‹¨í•˜ê²Œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.class PostList(ListView): model = Post def get_queryset(self): # ì—­ìˆœìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ -ë¡œ ë¶™ì¸ë‹¤. return Post.objects.order_by(&#x27;-created&#x27;)# ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ í•¨ìˆ˜ë¥¼ ì¶”ê°€í•œë‹¤.def post_detail(request, pk): blog_post = Post.objects.get(pk=pk) return render( request, &#x27;blog/post_detail.html&#x27;, &#123; &#x27;blog_post&#x27;: blog_post, &#125; ) ìƒì„¸ í˜ì´ì§€ë¥¼ ìœ„í•œ html ì½”ë“œ ë§Œë“¤ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;&#123;&#123;blog_post.title&#125;&#125;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&#123;&#123;blog_post.title&#125;&#125;&lt;/h1&gt; &lt;div&gt; &#123;&#123;blog_post.content&#125;&#125; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; detail í•¨ìˆ˜ë¥¼ í´ë˜ìŠ¤ë¡œ ë°”ê¿”ì£¼ê¸° blog&#x2F;views.py # def post_detail(request, pk):# blog_post = Post.objects.get(pk=pk)# return render(# request,# &#x27;blog/post_detail.html&#x27;,# &#123;# &#x27;blog_post&#x27;: blog_post,# &#125;# )class PostDetail(DetailView): model = Post í´ë˜ìŠ¤ë¡œ ë³€ê²½ í›„ url ìˆ˜ì •í•˜ê¸° blog&#x2F;urls.py urlpatterns = [ # path(&#x27;&#x27;, views.index), # path(&#x27;&lt;int:pk&gt;/&#x27;, views.post_detail), path(&#x27;&lt;int:pk&gt;/&#x27;, views.PostDetail.as_view()), path(&#x27;&#x27;, views.PostList.as_view()),] í´ë˜ìŠ¤ë¡œ ë³€ê²½ í›„ html ìˆ˜ì •í•˜ê¸°&lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;&#123;&#123;object.title&#125;&#125;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&#123;&#123;object.title&#125;&#125;&lt;/h1&gt; &lt;div&gt; &#123;&#123;object.content&#125;&#125; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Post Detail í˜ì´ì§€ ë§Œë“¤ê¸°","slug":"django/mysite/django-11","date":"2022-05-08T08:47:30.000Z","updated":"2024-11-28T13:59:31.503Z","comments":true,"path":"2022/05/08/django/mysite/django-11/","link":"","permalink":"https://ckck803.github.io/2022/05/08/django/mysite/django-11/","excerpt":"Post Detail í˜ì´ì§€ ë§Œë“¤ê¸°ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ urlì„ ì¶”ê°€í•œë‹¤. blog&#x2F;urls.py from django.urls import path, includefrom .import viewsurlpatterns = [ # path(&#x27;&#x27;, views.index), path(&#x27;&lt;int:pk&gt;/&#x27;, views.post_detail()) path(&#x27;&#x27;, views.PostList.as_view()),] ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ viewë¥¼ ìœ„í•œ ì½”ë“œë¥¼ ì‘ì„± blog&#x2F;views.py from django.shortcuts import renderfrom .models import Postfrom django.views.generic import ListView# Create your views here.# Listë¡œ ë³´ì—¬ì¤„ ë•ŒëŠ” django.views.genericì˜# ListViewë¥¼ ìƒì†í•˜ì—¬ ë³´ì—¬ì£¼ë©´ ê°„ë‹¨í•˜ê²Œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.class PostList(ListView): model = Post def get_queryset(self): # ì—­ìˆœìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ -ë¡œ ë¶™ì¸ë‹¤. return Post.objects.order_by(&#x27;-created&#x27;)# ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ í•¨ìˆ˜ë¥¼ ì¶”ê°€í•œë‹¤.def post_detail(request, pk): blog_post = Post.objects.get(pk=pk) return render( request, &#x27;blog/post_detail.html&#x27;, &#123; &#x27;blog_post&#x27;: blog_post, &#125; ) ìƒì„¸ í˜ì´ì§€ë¥¼ ìœ„í•œ html ì½”ë“œ ë§Œë“¤ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html","text":"Post Detail í˜ì´ì§€ ë§Œë“¤ê¸°ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ urlì„ ì¶”ê°€í•œë‹¤. blog&#x2F;urls.py from django.urls import path, includefrom .import viewsurlpatterns = [ # path(&#x27;&#x27;, views.index), path(&#x27;&lt;int:pk&gt;/&#x27;, views.post_detail()) path(&#x27;&#x27;, views.PostList.as_view()),] ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ viewë¥¼ ìœ„í•œ ì½”ë“œë¥¼ ì‘ì„± blog&#x2F;views.py from django.shortcuts import renderfrom .models import Postfrom django.views.generic import ListView# Create your views here.# Listë¡œ ë³´ì—¬ì¤„ ë•ŒëŠ” django.views.genericì˜# ListViewë¥¼ ìƒì†í•˜ì—¬ ë³´ì—¬ì£¼ë©´ ê°„ë‹¨í•˜ê²Œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.class PostList(ListView): model = Post def get_queryset(self): # ì—­ìˆœìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ -ë¡œ ë¶™ì¸ë‹¤. return Post.objects.order_by(&#x27;-created&#x27;)# ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ í•¨ìˆ˜ë¥¼ ì¶”ê°€í•œë‹¤.def post_detail(request, pk): blog_post = Post.objects.get(pk=pk) return render( request, &#x27;blog/post_detail.html&#x27;, &#123; &#x27;blog_post&#x27;: blog_post, &#125; ) ìƒì„¸ í˜ì´ì§€ë¥¼ ìœ„í•œ html ì½”ë“œ ë§Œë“¤ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_detail.html &lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;&#123;&#123;blog_post.title&#125;&#125;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&#123;&#123;blog_post.title&#125;&#125;&lt;/h1&gt; &lt;div&gt; &#123;&#123;blog_post.content&#125;&#125; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; detail í•¨ìˆ˜ë¥¼ í´ë˜ìŠ¤ë¡œ ë°”ê¿”ì£¼ê¸° blog&#x2F;views.py # def post_detail(request, pk):# blog_post = Post.objects.get(pk=pk)# return render(# request,# &#x27;blog/post_detail.html&#x27;,# &#123;# &#x27;blog_post&#x27;: blog_post,# &#125;# )class PostDetail(DetailView): model = Post í´ë˜ìŠ¤ë¡œ ë³€ê²½ í›„ url ìˆ˜ì •í•˜ê¸° blog&#x2F;urls.py urlpatterns = [ # path(&#x27;&#x27;, views.index), # path(&#x27;&lt;int:pk&gt;/&#x27;, views.post_detail), path(&#x27;&lt;int:pk&gt;/&#x27;, views.PostDetail.as_view()), path(&#x27;&#x27;, views.PostList.as_view()),] í´ë˜ìŠ¤ë¡œ ë³€ê²½ í›„ html ìˆ˜ì •í•˜ê¸°&lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;&#123;&#123;object.title&#125;&#125;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&#123;&#123;object.title&#125;&#125;&lt;/h1&gt; &lt;div&gt; &#123;&#123;object.content&#125;&#125; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - template(html)ì—ì„œ ifë¬¸ ì‚¬ìš©í•˜ê¸°","slug":"django/mysite/django-10","date":"2022-05-08T07:47:30.000Z","updated":"2024-11-28T13:59:31.357Z","comments":true,"path":"2022/05/08/django/mysite/django-10/","link":"","permalink":"https://ckck803.github.io/2022/05/08/django/mysite/django-10/","excerpt":"template(html)ì—ì„œ ifë¬¸ ì‚¬ìš©í•˜ê¸°ì´ë¯¸ì§€ê°€ ìˆì„ ë•Œë§Œ ë‚˜íƒ€ë‚´ê¸°&#123;% if p.head_image %&#125;&lt;img class=&quot;card-img-top&quot; src=&quot;&#123;&#123;p.head_image.url&#125;&#125;&quot; alt=&quot;Card image cap&quot;/&gt;&#123;% endif %&#125; &#123;% if %&#125;ë¬¸ì„ ì´ìš©í•˜ì—¬ ì²˜ë¦¬ë¥¼ í•œë‹¤. Lorem Picsum ì´ìš©í•˜ê¸°&#123;% if p.head_image %&#125;&lt;img class=&quot;card-img-top&quot; src=&quot;&#123;&#123;p.head_image.url&#125;&#125;&quot; alt=&quot;Card image cap&quot;/&gt;&#123;% else %&#125;&lt;img class=&quot;card-img-top&quot; src=&quot;https://picsum.photos/seed/picsum/750/300&quot; alt=&quot;Card image cap&quot;/&gt;&#123;% endif %&#125; ì´ë¯¸ì§€ê°€ ì—†ì„ ê²½ìš° Lorem Picsumìœ¼ë¡œë¶€í„° ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤. í…œí”Œë¦¿ì—ì„œ truncateë¡œ ì• ë‚´ìš©ë§Œ ë³´ì—¬ì£¼ê¸°&#123;&#123;p.content | truncatewords:50&#125;&#125;","text":"template(html)ì—ì„œ ifë¬¸ ì‚¬ìš©í•˜ê¸°ì´ë¯¸ì§€ê°€ ìˆì„ ë•Œë§Œ ë‚˜íƒ€ë‚´ê¸°&#123;% if p.head_image %&#125;&lt;img class=&quot;card-img-top&quot; src=&quot;&#123;&#123;p.head_image.url&#125;&#125;&quot; alt=&quot;Card image cap&quot;/&gt;&#123;% endif %&#125; &#123;% if %&#125;ë¬¸ì„ ì´ìš©í•˜ì—¬ ì²˜ë¦¬ë¥¼ í•œë‹¤. Lorem Picsum ì´ìš©í•˜ê¸°&#123;% if p.head_image %&#125;&lt;img class=&quot;card-img-top&quot; src=&quot;&#123;&#123;p.head_image.url&#125;&#125;&quot; alt=&quot;Card image cap&quot;/&gt;&#123;% else %&#125;&lt;img class=&quot;card-img-top&quot; src=&quot;https://picsum.photos/seed/picsum/750/300&quot; alt=&quot;Card image cap&quot;/&gt;&#123;% endif %&#125; ì´ë¯¸ì§€ê°€ ì—†ì„ ê²½ìš° Lorem Picsumìœ¼ë¡œë¶€í„° ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤. í…œí”Œë¦¿ì—ì„œ truncateë¡œ ì• ë‚´ìš©ë§Œ ë³´ì—¬ì£¼ê¸°&#123;&#123;p.content | truncatewords:50&#125;&#125; truncatewordsë¥¼ ì´ìš©í•´ 50ë‹¨ì–´ë§Œ ì¶œë ¥í•˜ë„ë¡ ì„¤ì •í•œë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - ì‚¬ì§„ ì—…ë¡œë“œë¥¼ ìœ„í•œ ImageFieldì™€ ì—…ë¡œë“œëœ íŒŒì¼ ê´€ë¦¬ ë°©ë²•","slug":"django/mysite/django-09","date":"2022-05-08T06:47:30.000Z","updated":"2024-11-28T13:59:31.212Z","comments":true,"path":"2022/05/08/django/mysite/django-09/","link":"","permalink":"https://ckck803.github.io/2022/05/08/django/mysite/django-09/","excerpt":"blog&#x2F;models.py from django.db import modelsfrom django.contrib.auth.models import User# Create your models here.class Post(models.Model): # ì œëª© title = models.CharField(max_length=30) # ë‚´ìš© content = models.TextField() # ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì„ ìœ„í•œ ê°ì²´ # uploadëœ ì´ë¯¸ì§€ íŒŒì¼ì€ blogì— ì €ì¥ì´ ëœë‹¤. blank = TrueëŠ” ê³µë€ì´ì—¬ë„ ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. head_image = models.ImageField(upload_to=&#x27;blog/&#x27;, blank=True) # ì‘ì„± ì¼ì created = models.DateTimeField() # ì €ì author = models.ForeignKey(User, on_delete=models.CASCADE) # í•´ë‹¹ ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¿§ì„ ë•Œ ì–´ë–¤ ì‹ìœ¼ë¡œ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤. def __str__(self): # ì‘ì„±ëœ í˜ì´ì§€ì˜ ì œëª©ê³¼ ì €ìë¥¼ ë³´ì—¬ì¤€ë‹¤. return &#x27;&#123;&#125; :: &#123;&#125;&#x27;.format(self.title, self.author) head_image = models.ImageField(upload_to=&#39;blog/&#39;, blank=True)ë¥¼ ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ ì´ì œ ì´ë¯¸ì§€ íŒŒì¼ì„ ì˜¬ë¦´ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.ì´ë ‡ê²Œ í•  ê²½ìš° ì¼ë°˜ì ìœ¼ë¡œ blogí´ë”ì— ê³„ì† ì´ë¯¸ì§€ íŒŒì¼ì´ ìƒê¸°ê²Œ ë¨ìœ¼ë¡œ settings.pyì— ê°€ì„œ ì´ë¯¸ì§€ê°€ ì €ì¥ë  ìˆ˜ ìˆëŠ” í´ë”ë¥¼ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤. ë¯¸ë””ì–´ê°€ ì €ì¥ë  ê¸°ë³¸ í´ë” ì„¤ì •í•˜ê¸° mysite&#x2F;settings.py MEDIA_ROOT = os.path.join(BASE_DIR, &#x27;_media&#x27;) ì´ë¯¸ì§€ íŒŒì¼ì´ _mediaí´ë”ì— ì €ì¥ë˜ê²Œ ëœë‹¤. ë‚ ì§œë³„ë¡œ ì‚¬ì§„ íŒŒì¼ ì €ì¥í•˜ê¸° blog&#x2F;models.py","text":"blog&#x2F;models.py from django.db import modelsfrom django.contrib.auth.models import User# Create your models here.class Post(models.Model): # ì œëª© title = models.CharField(max_length=30) # ë‚´ìš© content = models.TextField() # ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì„ ìœ„í•œ ê°ì²´ # uploadëœ ì´ë¯¸ì§€ íŒŒì¼ì€ blogì— ì €ì¥ì´ ëœë‹¤. blank = TrueëŠ” ê³µë€ì´ì—¬ë„ ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. head_image = models.ImageField(upload_to=&#x27;blog/&#x27;, blank=True) # ì‘ì„± ì¼ì created = models.DateTimeField() # ì €ì author = models.ForeignKey(User, on_delete=models.CASCADE) # í•´ë‹¹ ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¿§ì„ ë•Œ ì–´ë–¤ ì‹ìœ¼ë¡œ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤. def __str__(self): # ì‘ì„±ëœ í˜ì´ì§€ì˜ ì œëª©ê³¼ ì €ìë¥¼ ë³´ì—¬ì¤€ë‹¤. return &#x27;&#123;&#125; :: &#123;&#125;&#x27;.format(self.title, self.author) head_image = models.ImageField(upload_to=&#39;blog/&#39;, blank=True)ë¥¼ ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ ì´ì œ ì´ë¯¸ì§€ íŒŒì¼ì„ ì˜¬ë¦´ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.ì´ë ‡ê²Œ í•  ê²½ìš° ì¼ë°˜ì ìœ¼ë¡œ blogí´ë”ì— ê³„ì† ì´ë¯¸ì§€ íŒŒì¼ì´ ìƒê¸°ê²Œ ë¨ìœ¼ë¡œ settings.pyì— ê°€ì„œ ì´ë¯¸ì§€ê°€ ì €ì¥ë  ìˆ˜ ìˆëŠ” í´ë”ë¥¼ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤. ë¯¸ë””ì–´ê°€ ì €ì¥ë  ê¸°ë³¸ í´ë” ì„¤ì •í•˜ê¸° mysite&#x2F;settings.py MEDIA_ROOT = os.path.join(BASE_DIR, &#x27;_media&#x27;) ì´ë¯¸ì§€ íŒŒì¼ì´ _mediaí´ë”ì— ì €ì¥ë˜ê²Œ ëœë‹¤. ë‚ ì§œë³„ë¡œ ì‚¬ì§„ íŒŒì¼ ì €ì¥í•˜ê¸° blog&#x2F;models.py # ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì„ ìœ„í•œ ê°ì²´# uploadëœ ì´ë¯¸ì§€ íŒŒì¼ì€ blogì— ì €ì¥ì´ ëœë‹¤. blank = TrueëŠ” ê³µë€ì´ì—¬ë„ ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.head_image = models.ImageField(upload_to=&#x27;blog/%Y/%m/%d/&#x27;, blank=True) upload_to=&#39;blog/%Y/%m/%d/&#39;ë¡œ ì €ì¥í•˜ê²Œ ë˜ë©´ ë‚ ì§œë³„ë¡œ ì‚¬ì§„ íŒŒì¼ì´ ì €ì¥ë˜ê²Œ ëœë‹¤. ì‚¬ì§„ ë°˜ì˜í•˜ê¸° ë³€ê²½ì „blog&#x2F;templates&#x2F;blog&#x2F;post_list.html &lt;img class=&quot;card-img-top&quot; src=&quot;http://placehold.it/750x300&quot; alt=&quot;Card image cap&quot;/&gt; &lt;img class=&quot;card-img-top&quot; src=&quot;&#123;&#123;p.head_image.url&#125;&#125;&quot; alt=&quot;Card image cap&quot; /&gt; ê²°ê³¼ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì— ì‚¬ì§„ì´ ì—†ëŠ” ê²ƒë“¤ì´ ìˆê¸° ë•Œë¬¸ì— ì´ ì˜¤ë¥˜ê°€ ëœ¨ê²Œ ëœë‹¤. mysite&#x2F;settings.py MEDIA_URL = &#x27;/_media/&#x27; mysite&#x2F;urls.py from django.contrib import adminfrom django.urls import path, include# staticì„ ì¶”ê°€í•œë‹¤.from django.conf.urls.static import static# settingsë¥¼ ì¶”ê°€í•œë‹¤.from django.conf import settingsurlpatterns = [ path(&#x27;admin/&#x27;, admin.site.urls), path(&#x27;blog/&#x27;, include(&#x27;blog.urls&#x27;)),]# static íŒŒì¼ì˜ mediaíŒŒì¼ì„ MEDIA_URLê³¼ ì—°ê²°í•œë‹¤.urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - Bootstrap Grid","slug":"django/mysite/django-08","date":"2022-05-08T05:47:30.000Z","updated":"2024-11-28T13:59:30.920Z","comments":true,"path":"2022/05/08/django/mysite/django-08/","link":"","permalink":"https://ckck803.github.io/2022/05/08/django/mysite/django-08/","excerpt":"Bootstrap Gridcontainer blog&#x2F;templates&#x2F;blog&#x2F;post_list.html &lt;div class=&quot;container&quot;&gt; &lt;h1&gt;Blog&lt;/h1&gt; &lt;!-- í¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ê²Œì‹œë¬¼ë“¤ì„ í•˜ë‚˜ì”© ê°€ì ¸ì˜¨ë‹¤. --&gt; &#123;% for p in object_list %&#125; &lt;!-- ì œëª© --&gt; &lt;h3&gt;&#123;&#123;p.title&#125;&#125;&lt;/h3&gt; &lt;!-- ì‘ì„±ì¼ê³¼ ì‘ì„±ì --&gt; &lt;h4&gt;&#123;&#123;p.created&#125;&#125; by &#123;&#123;p.author&#125;&#125;&lt;/h4&gt; &lt;!-- ë‚´ìš© --&gt; &lt;p&gt;&#123;&#123;p.content&#125;&#125;&lt;/p&gt; &#123;%endfor%&#125;&lt;/div&gt; ë©”ì¸ í˜ì´ì§€ ë””ìì¸ ë³€ê²½í•˜ê¸° https://startbootstrap.com/templates/blog/ &lt;!-- Page Content --&gt;&lt;div class=&quot;container&quot;&gt; ...&lt;/div&gt;&lt;!-- /.row --&gt; bootstrapìœ¼ë¡œë¶€í„° í˜ì´ì§€ container ë³€ê²½ì„ ìœ„í•´ ì½”ë“œë¥¼ ê°€ì ¸ì˜¨ë‹¤. ê°€ì ¸ì˜¨ í˜ì´ì§€ ë””ìì¸ì— ì½˜í…ì¸  ë„£ì–´ì£¼ê¸°","text":"Bootstrap Gridcontainer blog&#x2F;templates&#x2F;blog&#x2F;post_list.html &lt;div class=&quot;container&quot;&gt; &lt;h1&gt;Blog&lt;/h1&gt; &lt;!-- í¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ê²Œì‹œë¬¼ë“¤ì„ í•˜ë‚˜ì”© ê°€ì ¸ì˜¨ë‹¤. --&gt; &#123;% for p in object_list %&#125; &lt;!-- ì œëª© --&gt; &lt;h3&gt;&#123;&#123;p.title&#125;&#125;&lt;/h3&gt; &lt;!-- ì‘ì„±ì¼ê³¼ ì‘ì„±ì --&gt; &lt;h4&gt;&#123;&#123;p.created&#125;&#125; by &#123;&#123;p.author&#125;&#125;&lt;/h4&gt; &lt;!-- ë‚´ìš© --&gt; &lt;p&gt;&#123;&#123;p.content&#125;&#125;&lt;/p&gt; &#123;%endfor%&#125;&lt;/div&gt; ë©”ì¸ í˜ì´ì§€ ë””ìì¸ ë³€ê²½í•˜ê¸° https://startbootstrap.com/templates/blog/ &lt;!-- Page Content --&gt;&lt;div class=&quot;container&quot;&gt; ...&lt;/div&gt;&lt;!-- /.row --&gt; bootstrapìœ¼ë¡œë¶€í„° í˜ì´ì§€ container ë³€ê²½ì„ ìœ„í•´ ì½”ë“œë¥¼ ê°€ì ¸ì˜¨ë‹¤. ê°€ì ¸ì˜¨ í˜ì´ì§€ ë””ìì¸ì— ì½˜í…ì¸  ë„£ì–´ì£¼ê¸°&lt;!-- Blog Entries Column --&gt;&lt;div class=&quot;col-md-8&quot;&gt; &lt;h1 class=&quot;my-4&quot;&gt; Blog &lt;/h1&gt; &lt;!-- Blog Post --&gt; &lt;!-- í¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ê²Œì‹œë¬¼ë“¤ì„ í•˜ë‚˜ì”© ê°€ì ¸ì˜¨ë‹¤. --&gt; &#123;% for p in object_list %&#125; &lt;div class=&quot;card mb-4&quot;&gt; &lt;img class=&quot;card-img-top&quot; src=&quot;http://placehold.it/750x300&quot; alt=&quot;Card image cap&quot; /&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;!-- ì œëª© --&gt; &lt;h2 class=&quot;card-title&quot;&gt;&#123;&#123;p.title&#125;&#125;&lt;/h2&gt; &lt;!-- ë‚´ìš© --&gt; &lt;p class=&quot;card-text&quot;&gt; &#123;&#123;p.content&#125;&#125; &lt;/p&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-primary&quot;&gt;Read More &amp;rarr;&lt;/a&gt; &lt;/div&gt; &lt;!-- ì‘ì„±ì¼ê³¼ ì‘ì„±ì --&gt; &lt;div class=&quot;card-footer text-muted&quot;&gt; Posted on &#123;&#123;p.created&#125;&#125; by &lt;a href=&quot;#&quot;&gt;&#123;&#123;p.author&#125;&#125;&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &#123;%endfor%&#125;&lt;/div&gt; CSS ìˆ˜ì •í•˜ê¸°paddingê°’ì„ ì¡°ì ˆí•˜ê¸° ìˆ˜ì • ì „ body &#123; padding-top: 120px;&#125; ìˆ˜ì • í›„ body &#123; padding-top: 80px;&#125; ë§Œì•½ ìˆ˜ì •ì‚¬í•­ì´ ë°”ë€Œì§€ ì•ŠëŠ” ê²½ìš° ë°©ë¬¸ê¸°ë¡ -&gt; ì¸í„°ë„· ê¸°ë¡ ëª¨ë‘ ì‚­ì œí•˜ë©´ ëœë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - navigation bar ë§Œë“¤ê¸°","slug":"django/mysite/django-07","date":"2022-05-08T04:47:30.000Z","updated":"2024-11-28T13:59:30.476Z","comments":true,"path":"2022/05/08/django/mysite/django-07/","link":"","permalink":"https://ckck803.github.io/2022/05/08/django/mysite/django-07/","excerpt":"navigation bar ë§Œë“¤ê¸°view-source:https://bootswatch.com/simplex/ &lt;body&gt; &lt;!-- navigation bar ì½”ë“œê°€ ì‹œì‘ë˜ëŠ” ë¶€ë¶„ --&gt; &lt;div class=&quot;navbar navbar-expand-lg fixed-top navbar-light bg-light&quot;&gt; .... &lt;/div&gt;&lt;/body&gt; ë‚´ìš©ì˜ ì½”ë“œë¥¼ ê¸ì–´ì„œ blog&#x2F;template&#x2F;blog&#x2F;post_list.htmlì— ë¶™ì—¬ì¤€ë‹¤.","text":"navigation bar ë§Œë“¤ê¸°view-source:https://bootswatch.com/simplex/ &lt;body&gt; &lt;!-- navigation bar ì½”ë“œê°€ ì‹œì‘ë˜ëŠ” ë¶€ë¶„ --&gt; &lt;div class=&quot;navbar navbar-expand-lg fixed-top navbar-light bg-light&quot;&gt; .... &lt;/div&gt;&lt;/body&gt; ë‚´ìš©ì˜ ì½”ë“œë¥¼ ê¸ì–´ì„œ blog&#x2F;template&#x2F;blog&#x2F;post_list.htmlì— ë¶™ì—¬ì¤€ë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - FBV -> MBV ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸","slug":"django/mysite/django-05","date":"2022-05-08T03:47:30.000Z","updated":"2024-11-28T13:59:31.577Z","comments":true,"path":"2022/05/08/django/mysite/django-05/","link":"","permalink":"https://ckck803.github.io/2022/05/08/django/mysite/django-05/","excerpt":"blog&#x2F;view.pyë³€ê²½ì „ from django.shortcuts import renderfrom .models import Postdef index(request): # Postì˜ ë‚´ìš©ë“¤ì„ ì „ë¶€ ë‹¤ ê°€ì ¸ì˜¨ë‹¤. posts = Post.objects.all() return render( request, # í…œë¸”ë¦¿ì´ ë˜ëŠ” html ì½”ë“œë¥¼ ì‘ì„±í•  í•„ìš”ê°€ ìˆë‹¤. &#x27;blog/index.html&#x27;, # index.htmlì—ì„œ ì‚¬ìš©í•˜ë„ë¡ ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ê³  ìˆë‹¤. # templateì— ì „í•´ì£¼ê³  ì‹¶ì€ ê²ƒë“¤ì„ ì ì–´ì£¼ë©´ ëœë‹¤. &#123; &#x27;posts&#x27;: posts, &#125; ) ë³€ê²½í›„ from django.shortcuts import renderfrom .models import Postfrom django.views.generic import ListView# Create your views here.class PostList(ListView): model = Post blog&#x2F;urls.py urlpatterns = [ path(&#x27;&#x27;, views.index),] urlpatterns = [ path(&#x27;&#x27;, views.PostList.as_view()),] blog&#x2F;templates&#x2F;blog&#x2F;post_list.html ìƒì„± &lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;Blog&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Blog&lt;/h1&gt; &lt;!-- í¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ê²Œì‹œë¬¼ë“¤ì„ í•˜ë‚˜ì”© ê°€ì ¸ì˜¨ë‹¤. --&gt; &#123;% for p in object_list %&#125; &lt;!-- ì œëª© --&gt; &lt;h3&gt;&#123;&#123;p.title&#125;&#125;&lt;/h3&gt; &lt;!-- ì‘ì„±ì¼ê³¼ ì‘ì„±ì --&gt; &lt;h4&gt;&#123;&#123;p.created&#125;&#125; by &#123;&#123;p.author&#125;&#125;&lt;/h4&gt; &lt;!-- ë‚´ìš© --&gt; &lt;p&gt;&#123;&#123;p.content&#125;&#125;&lt;/p&gt; &#123;%endfor%&#125; &lt;/body&gt;&lt;/html&gt;","text":"blog&#x2F;view.pyë³€ê²½ì „ from django.shortcuts import renderfrom .models import Postdef index(request): # Postì˜ ë‚´ìš©ë“¤ì„ ì „ë¶€ ë‹¤ ê°€ì ¸ì˜¨ë‹¤. posts = Post.objects.all() return render( request, # í…œë¸”ë¦¿ì´ ë˜ëŠ” html ì½”ë“œë¥¼ ì‘ì„±í•  í•„ìš”ê°€ ìˆë‹¤. &#x27;blog/index.html&#x27;, # index.htmlì—ì„œ ì‚¬ìš©í•˜ë„ë¡ ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ê³  ìˆë‹¤. # templateì— ì „í•´ì£¼ê³  ì‹¶ì€ ê²ƒë“¤ì„ ì ì–´ì£¼ë©´ ëœë‹¤. &#123; &#x27;posts&#x27;: posts, &#125; ) ë³€ê²½í›„ from django.shortcuts import renderfrom .models import Postfrom django.views.generic import ListView# Create your views here.class PostList(ListView): model = Post blog&#x2F;urls.py urlpatterns = [ path(&#x27;&#x27;, views.index),] urlpatterns = [ path(&#x27;&#x27;, views.PostList.as_view()),] blog&#x2F;templates&#x2F;blog&#x2F;post_list.html ìƒì„± &lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;Blog&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Blog&lt;/h1&gt; &lt;!-- í¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ê²Œì‹œë¬¼ë“¤ì„ í•˜ë‚˜ì”© ê°€ì ¸ì˜¨ë‹¤. --&gt; &#123;% for p in object_list %&#125; &lt;!-- ì œëª© --&gt; &lt;h3&gt;&#123;&#123;p.title&#125;&#125;&lt;/h3&gt; &lt;!-- ì‘ì„±ì¼ê³¼ ì‘ì„±ì --&gt; &lt;h4&gt;&#123;&#123;p.created&#125;&#125; by &#123;&#123;p.author&#125;&#125;&lt;/h4&gt; &lt;!-- ë‚´ìš© --&gt; &lt;p&gt;&#123;&#123;p.content&#125;&#125;&lt;/p&gt; &#123;%endfor%&#125; &lt;/body&gt;&lt;/html&gt; ì—­ìˆœìœ¼ë¡œ ë³´ì´ê²Œ í•˜ê¸°from django.shortcuts import renderfrom .models import Postfrom django.views.generic import ListView# Create your views here.# Listë¡œ ë³´ì—¬ì¤„ ë•ŒëŠ” django.views.genericì˜# ListViewë¥¼ ìƒì†í•˜ì—¬ ë³´ì—¬ì£¼ë©´ ê°„ë‹¨í•˜ê²Œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.class PostList(ListView): model = Post def get_queryset(self): # ì—­ìˆœìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ -ë¡œ ë¶™ì¸ë‹¤. return Post.objects.order_by(&#x27;-created&#x27;)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - static File ê´€ë¦¬í•˜ê¸° bootstrap ì ìš©ì„ ìœ„í•´","slug":"django/mysite/django-06","date":"2022-05-08T03:47:30.000Z","updated":"2024-11-28T13:59:29.622Z","comments":true,"path":"2022/05/08/django/mysite/django-06/","link":"","permalink":"https://ckck803.github.io/2022/05/08/django/mysite/django-06/","excerpt":"static File ê´€ë¦¬í•˜ê¸° : bootstrap ì ìš©ì„ ìœ„í•´https://bootswatch.com/simplex/ bootstrapì„ ì ìš©í•´ë³´ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_index.html css íŒŒì¼&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;../4/simplex/bootstrap.css&quot; media=&quot;screen&quot; /&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;../_assets/css/custom.min.css&quot; /&gt; javascript íŒŒì¼ blog&#x2F;templates&#x2F;blog&#x2F;post_index.html &lt;script src=&quot;../_vendor/jquery/dist/jquery.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;../_vendor/popper.js/dist/umd/popper.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;../_vendor/bootstrap/dist/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;../_assets/js/custom.js&quot;&gt;&lt;/script&gt;","text":"static File ê´€ë¦¬í•˜ê¸° : bootstrap ì ìš©ì„ ìœ„í•´https://bootswatch.com/simplex/ bootstrapì„ ì ìš©í•´ë³´ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_index.html css íŒŒì¼&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;../4/simplex/bootstrap.css&quot; media=&quot;screen&quot; /&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;../_assets/css/custom.min.css&quot; /&gt; javascript íŒŒì¼ blog&#x2F;templates&#x2F;blog&#x2F;post_index.html &lt;script src=&quot;../_vendor/jquery/dist/jquery.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;../_vendor/popper.js/dist/umd/popper.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;../_vendor/bootstrap/dist/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;../_assets/js/custom.js&quot;&gt;&lt;/script&gt; bootstrapì˜ javascriptë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ìœ„ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤. bootstrapì˜ styleê³¼ javascriptë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì ìš©ì„ í•´ì¤€ë‹¤.ì €ë ‡ê²Œ í•˜ë©´ cssíŒŒì¼ê³¼ javascriptíŒŒì¼ì´ ê²½ë¡œê°€ ì´ìƒí•˜ì—¬ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìˆ˜ì •í•  í•„ìš”ê°€ ìˆë‹¤. staticì— ì¶”ê°€ëœ cssíŒŒì¼ ì ìš©í•˜ê¸° static&#x2F;blog&#x2F; static í´ë”ë¥¼ ë§Œë“  í›„ blogì˜ ì ìš©í•  ìŠ¤íƒ€ì¼ë“¤ì„ ëª¨ì•„ë‘ê¸° ìœ„í•´ blogí´ë”ë¥¼ í•˜ë‚˜ ë” ë§Œë“¤ì–´ ì¤€ë‹¤. blog&#x2F;static&#x2F;blog&#x2F;bootstrap&#x2F;bootstrap.cssblog&#x2F;static&#x2F;blog&#x2F;bootstrap&#x2F;_assets&#x2F;css&#x2F;custom.min.css ë‘ íŒŒì¼ì„ ìƒì„±í•´ì¤€ë‹¤. static íŒŒì¼ë“¤ ë¶ˆëŸ¬ì˜¤ê¸° blog&#x2F;templates&#x2F;blog&#x2F;post_index.html &lt;!DOCTYPE html&gt; &#123;% load static %&#125; html íŒŒì¼ì´ static íŒŒì¼ë“¤ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ load ëª…ë ¹ì–´ë¥¼ í†µí•´ ê°€ì ¸ì˜¨ë‹¤. bootstrap.css ì ìš©í•˜ê¸° blog&#x2F;templates&#x2F;blog&#x2F;bootstrap&#x2F;post_index.html &lt;!-- &lt;link rel=&quot;stylesheet&quot; href=&quot;../4/simplex/bootstrap.css&quot; media=&quot;screen&quot; /&gt; --&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;&#123;%static &#x27;blog/bootstrap/bootstrap.css&#x27; %&#125;&quot; media=&quot;screen&quot;/&gt; custom.min.css ì ìš©í•˜ê¸°&lt;!-- &lt;link rel=&quot;stylesheet&quot; href=&quot;../_assets/css/custom.min.css&quot; /&gt; --&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;&#123;%static &#x27;blog/_assets/css/custom.min.css&#x27; %&#125;&quot; /&gt; ìë°”ìŠ¤í¬ë¦½íŠ¸ ê²½ë¡œ ìˆ˜ì •í•˜ê¸° blog&#x2F;static&#x2F;blog&#x2F;bootstrap&#x2F;jqeury.min.jsblog&#x2F;static&#x2F;blog&#x2F;bootstrap&#x2F;popper.min.jsblog&#x2F;static&#x2F;blog&#x2F;bootstrap&#x2F;bootstrap.min.jsblog&#x2F;static&#x2F;blog&#x2F;_assets&#x2F;js&#x2F;custom.js4ê°œì˜ íŒŒì¼ &lt;!-- &lt;script src=&quot;../_vendor/jquery/dist/jquery.min.js&quot;&gt;&lt;/script&gt; --&gt;&lt;!-- &lt;script src=&quot;../_vendor/popper.js/dist/umd/popper.min.js&quot;&gt;&lt;/script&gt; --&gt;&lt;!-- &lt;script src=&quot;../_vendor/bootstrap/dist/js/bootstrap.min.js&quot;&gt;&lt;/script&gt; --&gt;&lt;!-- &lt;script src=&quot;../_assets/js/custom.js&quot;&gt;&lt;/script&gt; --&gt;&lt;script src=&quot;&#123;% static &#x27;blog/_assets/js/jquery.min.js&#x27; %&#125;&quot;&gt;&lt;/script&gt;&lt;script src=&quot;&#123;% static &#x27;blog/_assets/js/popper.min.js&#x27; %&#125;&quot;&gt;&lt;/script&gt;&lt;script src=&quot;&#123;% static &#x27;blog/bootstrap/bootstrap.min.js&#x27; %&#125;&quot;&gt;&lt;/script&gt;&lt;script src=&quot;&#123;% static &#x27;blog/_assets/js/custom.js&#x27; %&#125;&quot;&gt;&lt;/script&gt;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - MTV êµ¬ì¡° ë§›ë³´ê¸° model, views, templates ì‚¬ìš©í•˜ê¸°","slug":"django/mysite/django-04","date":"2022-05-08T02:47:30.000Z","updated":"2024-11-28T13:59:31.281Z","comments":true,"path":"2022/05/08/django/mysite/django-04/","link":"","permalink":"https://ckck803.github.io/2022/05/08/django/mysite/django-04/","excerpt":"mysite&#x2F;urls.py from django.contrib import adminfrom django.urls import path, includeurlpatterns = [ path(&#x27;admin/&#x27;, admin.site.urls), path(&#x27;blog/&#x27;, include(&#x27;blog.urls&#x27;)),] blog&#x2F;url.py ì¶”ê°€ from django.urls import path, includefrom .import viewsurlpatterns = [ path(&#x27;&#x27;, views.index),] blog&#x2F;views.py from django.shortcuts import render# Create your views here.def index(request): return render( request, # í…œë¸”ë¦¿ì´ ë˜ëŠ” html ì½”ë“œë¥¼ ì‘ì„±í•  í•„ìš”ê°€ ìˆë‹¤. &#x27;blog/index.html&#x27; ) blog&#x2F;templates&#x2F;blog&#x2F;index.html &lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;Blog&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Blog&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt; blog&#x2F;views.py","text":"mysite&#x2F;urls.py from django.contrib import adminfrom django.urls import path, includeurlpatterns = [ path(&#x27;admin/&#x27;, admin.site.urls), path(&#x27;blog/&#x27;, include(&#x27;blog.urls&#x27;)),] blog&#x2F;url.py ì¶”ê°€ from django.urls import path, includefrom .import viewsurlpatterns = [ path(&#x27;&#x27;, views.index),] blog&#x2F;views.py from django.shortcuts import render# Create your views here.def index(request): return render( request, # í…œë¸”ë¦¿ì´ ë˜ëŠ” html ì½”ë“œë¥¼ ì‘ì„±í•  í•„ìš”ê°€ ìˆë‹¤. &#x27;blog/index.html&#x27; ) blog&#x2F;templates&#x2F;blog&#x2F;index.html &lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;Blog&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Blog&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt; blog&#x2F;views.py from django.shortcuts import renderfrom .models import Post# Create your views here.def index(request): # Postì˜ ë‚´ìš©ë“¤ì„ ì „ë¶€ ë‹¤ ê°€ì ¸ì˜¨ë‹¤. posts = Post.objects.all() return render( request, # í…œë¸”ë¦¿ì´ ë˜ëŠ” html ì½”ë“œë¥¼ ì‘ì„±í•  í•„ìš”ê°€ ìˆë‹¤. &#x27;blog/index.html&#x27;, &#123; &#x27;posts&#x27;: posts, &#125; ) blog&#x2F;templates&#x2F;blog &lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;Blog&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Blog&lt;/h1&gt; &lt;!-- í¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ê²Œì‹œë¬¼ë“¤ì„ í•˜ë‚˜ì”© ê°€ì ¸ì˜¨ë‹¤. --&gt; &#123;% for p in posts %&#125; &lt;!-- ì œëª© --&gt; &lt;h3&gt;&#123;&#123;p.title&#125;&#125;&lt;/h3&gt; &lt;!-- ì‘ì„±ì¼ê³¼ ì‘ì„±ì --&gt; &lt;h4&gt;&#123;&#123;p.created&#125;&#125; by &#123;&#123;p.author&#125;&#125;&lt;/h4&gt; &lt;!-- ë‚´ìš© --&gt; &lt;p&gt;&#123;&#123;p.content&#125;&#125;&lt;/p&gt; &#123;%endfor%&#125; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - ì§€ì—­(ì‹œê°„) ì„¸íŒ… ìˆ˜ì •í•˜ê¸°, Post ê°œì„ í•˜ê¸° str","slug":"django/mysite/django-03","date":"2022-05-08T01:47:30.000Z","updated":"2024-11-28T13:59:30.222Z","comments":true,"path":"2022/05/08/django/mysite/django-03/","link":"","permalink":"https://ckck803.github.io/2022/05/08/django/mysite/django-03/","excerpt":"django ì§€ì—­(ì‹œê°„) ì„¸íŒ… ìˆ˜ì •í•˜ê¸°, Post ê°œì„ í•˜ê¸° strì‹œê°„ ì„¸íŒ… ìˆ˜ì •í•˜ê¸° mysite&#x2F;setting.py TIME_ZONE = &#x27;UTC&#x27; TIME_ZONE = &#x27;Asia/Seoul&#x27; str ì¶”ê°€í•˜ê¸° blog&#x2F;model.py from django.db import modelsfrom django.contrib.auth.models import User# Create your models here.class Post(models.Model): # ì œëª© title = models.CharField(max_length=30) # ë‚´ìš© content = models.TextField() # ì‘ì„± ì¼ì create = models.DateTimeField() # ì €ì author = models.ForeignKey(User, on_delete=models.CASCADE) # í•´ë‹¹ ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¿§ì„ ë•Œ ì–´ë–¤ ì‹ìœ¼ë¡œ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤. def __str__(self): # ì‘ì„±ëœ í˜ì´ì§€ì˜ ì œëª©ê³¼ ì €ìë¥¼ ë³´ì—¬ì¤€ë‹¤. return &#x27;&#123;&#125; :: &#123;&#125;&#x27;.format(self.title, self.author)","text":"django ì§€ì—­(ì‹œê°„) ì„¸íŒ… ìˆ˜ì •í•˜ê¸°, Post ê°œì„ í•˜ê¸° strì‹œê°„ ì„¸íŒ… ìˆ˜ì •í•˜ê¸° mysite&#x2F;setting.py TIME_ZONE = &#x27;UTC&#x27; TIME_ZONE = &#x27;Asia/Seoul&#x27; str ì¶”ê°€í•˜ê¸° blog&#x2F;model.py from django.db import modelsfrom django.contrib.auth.models import User# Create your models here.class Post(models.Model): # ì œëª© title = models.CharField(max_length=30) # ë‚´ìš© content = models.TextField() # ì‘ì„± ì¼ì create = models.DateTimeField() # ì €ì author = models.ForeignKey(User, on_delete=models.CASCADE) # í•´ë‹¹ ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¿§ì„ ë•Œ ì–´ë–¤ ì‹ìœ¼ë¡œ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤. def __str__(self): # ì‘ì„±ëœ í˜ì´ì§€ì˜ ì œëª©ê³¼ ì €ìë¥¼ ë³´ì—¬ì¤€ë‹¤. return &#x27;&#123;&#125; :: &#123;&#125;&#x27;.format(self.title, self.author)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - admin ì¶”ê°€í•˜ê¸°","slug":"django/mysite/django-admin","date":"2022-05-07T12:47:30.000Z","updated":"2024-11-28T13:59:31.430Z","comments":true,"path":"2022/05/07/django/mysite/django-admin/","link":"","permalink":"https://ckck803.github.io/2022/05/07/django/mysite/django-admin/","excerpt":"admin ê³„ì • ë§Œë“¤ê¸°python manage.py createsuperuser admin í˜ì´ì§€ì— blogì˜ Postë¥¼ ë°˜ì˜í•˜ê¸° blog&#x2F;admin.py from django.contrib import adminfrom .models import Post# Register your models here.admin.site.register(Post)","text":"admin ê³„ì • ë§Œë“¤ê¸°python manage.py createsuperuser admin í˜ì´ì§€ì— blogì˜ Postë¥¼ ë°˜ì˜í•˜ê¸° blog&#x2F;admin.py from django.contrib import adminfrom .models import Post# Register your models here.admin.site.register(Post)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - blog ì•± ë§Œë“¤ê¸° & Post ëª¨ë¸ ë§Œë“¤ê¸°","slug":"django/mysite/django-startapp","date":"2022-05-07T12:47:30.000Z","updated":"2024-11-28T13:59:29.764Z","comments":true,"path":"2022/05/07/django/mysite/django-startapp/","link":"","permalink":"https://ckck803.github.io/2022/05/07/django/mysite/django-startapp/","excerpt":"blog ì•± ë§Œë“¤ê¸° &amp; Post ëª¨ë¸ ë§Œë“¤ê¸° &amp; adminì— ì¶”ê°€í•˜ê¸°ë¸”ë¡œê·¸ ì•± ë§Œë“¤ê¸°í”„ë¡œì íŠ¸ ë°‘ì— startapp ëª…ë ¹ì–´ë¥¼ í†µí•´ blog ì•±ì„ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. python manage.py startapp blog Post ëª¨ë¸ ë§Œë“¤ê¸° blog&#x2F;model.py from django.db import modelsfrom django.contrib.auth.models import User# Create your models here.class Post(models.Model): # ì œëª© title = models.CharField(max_length=30) # ë‚´ìš© content = models.TextField() # ì‘ì„± ì¼ì create = models.DateTimeField() # ì €ì author = models.ForeignKey(User) blog ì•± ì¶”ê°€í•˜ê¸° mysite&#x2F;setting.py","text":"blog ì•± ë§Œë“¤ê¸° &amp; Post ëª¨ë¸ ë§Œë“¤ê¸° &amp; adminì— ì¶”ê°€í•˜ê¸°ë¸”ë¡œê·¸ ì•± ë§Œë“¤ê¸°í”„ë¡œì íŠ¸ ë°‘ì— startapp ëª…ë ¹ì–´ë¥¼ í†µí•´ blog ì•±ì„ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. python manage.py startapp blog Post ëª¨ë¸ ë§Œë“¤ê¸° blog&#x2F;model.py from django.db import modelsfrom django.contrib.auth.models import User# Create your models here.class Post(models.Model): # ì œëª© title = models.CharField(max_length=30) # ë‚´ìš© content = models.TextField() # ì‘ì„± ì¼ì create = models.DateTimeField() # ì €ì author = models.ForeignKey(User) blog ì•± ì¶”ê°€í•˜ê¸° mysite&#x2F;setting.py INSTALLED_APPS = [ &#x27;blog&#x27;, &#x27;django.contrib.admin&#x27;, &#x27;django.contrib.auth&#x27;, &#x27;django.contrib.contenttypes&#x27;, &#x27;django.contrib.sessions&#x27;, &#x27;django.contrib.messages&#x27;, &#x27;django.contrib.staticfiles&#x27;,] ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ê¸°python manage.py makemigrations ì˜¤ë¥˜ê°€ ëœ¸â€¦TypeError: __init__() missing 1 required positional argument: &#x27;on_delete&#x27; CASCADE ì˜µì…˜ì„ ì£¼ê¸°from django.db import modelsfrom django.contrib.auth.models import User# Create your models here.class Post(models.Model): # ì œëª© title = models.CharField(max_length=30) # ë‚´ìš© content = models.TextField() # ì‘ì„± ì¼ì create = models.DateTimeField() # ì €ì author = models.ForeignKey(User, on_delete=models.CASCADE) ForeignKeyì— ëŒ€í•œ on_delete ì˜µì…˜ ì˜µì…˜ ì„¤ëª… models.CASCADE ForeignKeyFieldê°€ ë°”ë¼ë³´ëŠ” ê°’ì´ ì‚­ì œë  ë•Œ ê´€ë ¨ëœ ëª¨ë“  rowë¥¼ ì‚­ì œí•œë‹¤. models.PROTECT ForeignKeyFieldê°€ ë°”ë¼ë³´ëŠ” ê°’ì´ ì‚­ì œë  ë•Œ ì‚­ì œê°€ ë˜ì§€ ì•Šë„ë¡ ProtectedErrorë¥¼ ë°œìƒì‹œí‚¨ë‹¤. models.SET_NULL ForeignKeyFieldê°€ ë°”ë¼ë³´ëŠ” ê°’ì´ ì‚­ì œë  ë•Œ ForeignKeyFieldê°’ì„ NULLë¡œ í•œë‹¤. models.SET_DEFAULT ForeignKeyFieldê°€ ë°”ë¼ë³´ëŠ” ê°’ì´ ì‚­ì œë  ë•Œ ForeignKeyFieldë¥¼ defaultë¡œ ë°”ê¾¼ë‹¤. models.set() ForeignKeyFieldê°€ ë°”ë¼ë³´ëŠ” ê°’ì´ ì‚­ì œë  ë•Œ ForeignKeyFieldê°’ì„ SETì— ì˜í•´ ì„¤ì •ëœ ê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤. models.DO_NOTHING ForeignKeyFieldê°€ ë°”ë¼ë³´ëŠ” ê°’ì´ ì‚­ì œë  ë•Œ ì•„ë¬´ëŸ° í–‰ë™ì„ ì·¨í•˜ì§€ ì•ŠëŠ”ë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"Django - ì¥ê³  ì‹œì‘í•˜ê¸°","slug":"django/mysite/django-01","date":"2022-05-07T11:47:30.000Z","updated":"2024-11-28T13:59:31.770Z","comments":true,"path":"2022/05/07/django/mysite/django-01/","link":"","permalink":"https://ckck803.github.io/2022/05/07/django/mysite/django-01/","excerpt":"ëª©ì°¨ Django - ë¸”ë¡œê·¸ post listì™€ post detail í˜ì´ì§€ì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸° Django - Comment (ëŒ“ê¸€) ì‘ì„±ì°½ êµ¬í˜„í•˜ê¸° Django - Comment (ëŒ“ê¸€) view êµ¬í˜„í•˜ê¸° Django - Comment (ëŒ“ê¸€) ëª¨ë¸ êµ¬í˜„í•˜ê¸° Django - ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì ‘ì† ê°€ëŠ¥í•˜ê²Œ í•˜ê¸° Django - Post ì‘ì„± í™”ë©´ &#x2F; ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸° Django - Post ìˆ˜ì • í™”ë©´ &#x2F; ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸° Django - ë§ˆí¬ë‹¤ìš´ì ìš©í•˜ê¸°, tag fieldì— ê³µë€ í—ˆìš©í•˜ê¸° Django - Post Detail ê°œì„ ì‚¬í•­ ë„ì¶œí•˜ê³  Test ì½”ë“œ ë§Œë“¤ê¸° Django - Category í˜ì´ì§€ ë§Œë“¤ê¸° (slugField) Django - ì‚¬ì†Œí•œ ë¬¸ì œë“¤ í•´ê²°(ë¶ˆí•„ìš”í•œ ë‚´ìš© ì‚­ì œí•˜ê¸°; category ë³µìˆ˜í˜• ìˆ˜ì •í•˜ê¸° (categorys -&gt; categories)) Django - ë¸”ë¡œê·¸ postì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸° Django - ë¸”ë¡œê·¸ postì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸° Django - ë¸”ë¡œê·¸ postì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸° Django - read more ë²„íŠ¼ ë™ì‘í•˜ê²Œ í•˜ê¸°, post_detail í˜ì´ì§€ ê°œì„ í•˜ê¸° Django - HTML ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ê¸° Django - Post Detail í˜ì´ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° Django - Post List í˜ì´ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° part A Django - Post Detail í˜ì´ì§€ ë§Œë“¤ê¸° Django - template(html)ì—ì„œ ifë¬¸ ì‚¬ìš©í•˜ê¸° Django - ì‚¬ì§„ ì—…ë¡œë“œë¥¼ ìœ„í•œ ImageFieldì™€ ì—…ë¡œë“œëœ íŒŒì¼ ê´€ë¦¬ ë°©ë²• Django - Bootstrap Grid Django - navigation bar ë§Œë“¤ê¸° Django - static File ê´€ë¦¬í•˜ê¸° bootstrap ì ìš©ì„ ìœ„í•´ Django - FBV -&gt; MBV ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ Django - MTV êµ¬ì¡° ë§›ë³´ê¸° model, views, templates ì‚¬ìš©í•˜ê¸° Django - ì§€ì—­(ì‹œê°„) ì„¸íŒ… ìˆ˜ì •í•˜ê¸°, Post ê°œì„ í•˜ê¸° str Django - blog ì•± ë§Œë“¤ê¸° &amp; Post ëª¨ë¸ ë§Œë“¤ê¸° Django - ì¥ê³  ì‹œì‘í•˜ê¸° ì¥ê³  ì„¤ì¹˜í•˜ê¸°pip install django ì¥ê³  í”„ë¡œì íŠ¸ ì‹œì‘í•˜ê¸°django ë¥¼ ì„¤ì¹˜í•˜ë©´ django-admin ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì¹˜ëœ django-admin ì— startproject ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ìƒˆë¡­ê²Œ ì¥ê³  í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. django-admin startproject mysite ìƒˆë¡œìš´ ì¥ê³  í”„ë¡œì íŠ¸ì— ë“¤ì–´ê°€ë©´ manage.py íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤. runserver ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ì¥ê³  ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. python manage.py runserver","text":"ëª©ì°¨ Django - ë¸”ë¡œê·¸ post listì™€ post detail í˜ì´ì§€ì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸° Django - Comment (ëŒ“ê¸€) ì‘ì„±ì°½ êµ¬í˜„í•˜ê¸° Django - Comment (ëŒ“ê¸€) view êµ¬í˜„í•˜ê¸° Django - Comment (ëŒ“ê¸€) ëª¨ë¸ êµ¬í˜„í•˜ê¸° Django - ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì ‘ì† ê°€ëŠ¥í•˜ê²Œ í•˜ê¸° Django - Post ì‘ì„± í™”ë©´ &#x2F; ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸° Django - Post ìˆ˜ì • í™”ë©´ &#x2F; ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸° Django - ë§ˆí¬ë‹¤ìš´ì ìš©í•˜ê¸°, tag fieldì— ê³µë€ í—ˆìš©í•˜ê¸° Django - Post Detail ê°œì„ ì‚¬í•­ ë„ì¶œí•˜ê³  Test ì½”ë“œ ë§Œë“¤ê¸° Django - Category í˜ì´ì§€ ë§Œë“¤ê¸° (slugField) Django - ì‚¬ì†Œí•œ ë¬¸ì œë“¤ í•´ê²°(ë¶ˆí•„ìš”í•œ ë‚´ìš© ì‚­ì œí•˜ê¸°; category ë³µìˆ˜í˜• ìˆ˜ì •í•˜ê¸° (categorys -&gt; categories)) Django - ë¸”ë¡œê·¸ postì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸° Django - ë¸”ë¡œê·¸ postì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸° Django - ë¸”ë¡œê·¸ postì— ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•˜ê¸° Django - read more ë²„íŠ¼ ë™ì‘í•˜ê²Œ í•˜ê¸°, post_detail í˜ì´ì§€ ê°œì„ í•˜ê¸° Django - HTML ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ê¸° Django - Post Detail í˜ì´ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° Django - Post List í˜ì´ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° part A Django - Post Detail í˜ì´ì§€ ë§Œë“¤ê¸° Django - template(html)ì—ì„œ ifë¬¸ ì‚¬ìš©í•˜ê¸° Django - ì‚¬ì§„ ì—…ë¡œë“œë¥¼ ìœ„í•œ ImageFieldì™€ ì—…ë¡œë“œëœ íŒŒì¼ ê´€ë¦¬ ë°©ë²• Django - Bootstrap Grid Django - navigation bar ë§Œë“¤ê¸° Django - static File ê´€ë¦¬í•˜ê¸° bootstrap ì ìš©ì„ ìœ„í•´ Django - FBV -&gt; MBV ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ Django - MTV êµ¬ì¡° ë§›ë³´ê¸° model, views, templates ì‚¬ìš©í•˜ê¸° Django - ì§€ì—­(ì‹œê°„) ì„¸íŒ… ìˆ˜ì •í•˜ê¸°, Post ê°œì„ í•˜ê¸° str Django - blog ì•± ë§Œë“¤ê¸° &amp; Post ëª¨ë¸ ë§Œë“¤ê¸° Django - ì¥ê³  ì‹œì‘í•˜ê¸° ì¥ê³  ì„¤ì¹˜í•˜ê¸°pip install django ì¥ê³  í”„ë¡œì íŠ¸ ì‹œì‘í•˜ê¸°django ë¥¼ ì„¤ì¹˜í•˜ë©´ django-admin ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì¹˜ëœ django-admin ì— startproject ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ìƒˆë¡­ê²Œ ì¥ê³  í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. django-admin startproject mysite ìƒˆë¡œìš´ ì¥ê³  í”„ë¡œì íŠ¸ì— ë“¤ì–´ê°€ë©´ manage.py íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤. runserver ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ì¥ê³  ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. python manage.py runserver ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±python manage.py makemigrations ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©python manage.py migrate","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"}],"tags":[]},{"title":"React - TypeScript ì‚¬ìš©í•˜ê¸°","slug":"react/react-typescript/react-ts-01","date":"2022-05-05T21:31:46.000Z","updated":"2024-11-23T16:48:33.834Z","comments":true,"path":"2022/05/06/react/react-typescript/react-ts-01/","link":"","permalink":"https://ckck803.github.io/2022/05/06/react/react-typescript/react-ts-01/","excerpt":"ì°¸ê³  https://create-react-app.dev/docs/adding-typescript/ React TypeScript ì‚¬ìš©í•˜ê¸°create react app ëª…ë ¹ì–´ì— --template typescript íŒŒë¼ë¯¸í„°ë§Œ ì¶”ê°€í•´ì£¼ë©´ ì´ˆê¸° êµ¬ì„±ì´ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ ì„¤ì •ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. # npm ì‚¬ìš©npx create-react-app my-app --template typescript# yarn ì‚¬ìš©yarn create react-app my-app --template typescript","text":"ì°¸ê³  https://create-react-app.dev/docs/adding-typescript/ React TypeScript ì‚¬ìš©í•˜ê¸°create react app ëª…ë ¹ì–´ì— --template typescript íŒŒë¼ë¯¸í„°ë§Œ ì¶”ê°€í•´ì£¼ë©´ ì´ˆê¸° êµ¬ì„±ì´ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ ì„¤ì •ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. # npm ì‚¬ìš©npx create-react-app my-app --template typescript# yarn ì‚¬ìš©yarn create react-app my-app --template typescript","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"React","slug":"Frontend/React","permalink":"https://ckck803.github.io/categories/Frontend/React/"},{"name":"TypeScript","slug":"Frontend/React/TypeScript","permalink":"https://ckck803.github.io/categories/Frontend/React/TypeScript/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"Spring Web Socket - STOMP (Simple Text Oriented Message Protocol)","slug":"spring/spring-websocket/stomp","date":"2022-05-05T13:25:35.000Z","updated":"2024-12-22T00:24:15.359Z","comments":true,"path":"2022/05/05/spring/spring-websocket/stomp/","link":"","permalink":"https://ckck803.github.io/2022/05/05/spring/spring-websocket/stomp/","excerpt":"ëª©ì°¨ Spring Web Socket - Chat í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸° 1 Spring Web Socket - STOMP (Simple Text Oriented Message Protocol) ë„¤íŠ¸ì›Œí¬ - Web Socket ì°¸ê³  https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/websocket.html https://www.baeldung.com/websockets-spring STOMP (Simple&#x2F;Stream Text Oriented Message Protocol) WebSocket ê¸°ë°˜ í”„ë¡œí† ì½œì´ë©° Client ì™€ Server ê°€ negotiate í•˜ê¸° ìœ„í•œ sub-protocol ì´ ì •ì˜ ë¼ ìˆë‹¤. STOMP ì€ ë©”ì„¸ì§• ì „ì†¡ì„ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸° ìœ„í•´ íƒ„ìƒí•œ Text ì§€í–¥ í”„ë¡œí† ì½œ ì´ë©° Message Payloadì—ëŠ” Text or Binary ë°ì´í„°ë¥¼ í¬í•¨ í•´ ì „ì†¡í•  ìˆ˜ ìˆë‹¤. ë˜í•œ sub-protocol ì´ ì •ì˜ ë¼ ìˆì–´ Client ì—ì„œ ì„œë²„ë¡œ ì „ì†¡í•  ë©”ì‹œì§€ ìœ í˜•, í˜•ì‹, ë‚´ìš©ë“±ì´ ì •ì˜ ë¼ ìˆë‹¤. pub&#x2F;sub êµ¬ì¡°ë¡œ ë˜ì–´ìˆì–´ ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•˜ê³  ë©”ì„¸ì§€ë¥¼ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ í™•ì‹¤íˆ ì •í•´ì ¸ ìˆê¸° ë•Œë¬¸ì— ê°œë°œì ì…ì¥ì—ì„œ ëª…í™•í•˜ê²Œ ì¸ì§€í•˜ê³  ê°œë°œí•  ìˆ˜ ìˆëŠ” ì´ì ì´ ìˆë‹¤. ë˜í•œ STOMPë¥¼ ì´ìš©í•˜ë©´ ë©”ì„¸ì§€ì˜ í—¤ë”ì— ê°’ì„ ì¤„ ìˆ˜ ìˆì–´ í—¤ë” ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ í†µì‹  ì‹œ ì¸ì¦ ì²˜ë¦¬(ChannelInterceptor) ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë©° STOMP ìŠ¤í™ì— ì •ì˜í•œ ê·œì¹™ë§Œ ì˜ ì§€í‚¤ë©´ ì—¬ëŸ¬ ì–¸ì–´ ë° í”Œë«í¼ ê°„ ë©”ì„¸ì§€ë¥¼ ìƒí˜¸ ìš´ì˜í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ Springì—ì„œ ì§€ì›í•˜ëŠ” STOMPë¥¼ ì‚¬ìš©í•˜ë©´ Spring WebSocket ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ STOMP Brokerë¡œ ë™ì‘í•˜ê²Œ ëœë‹¤. STOMP (Simple Text Oriented Message Protocol) êµ¬ì„± SimpAnnotationMethod Client ë¡œ ë¶€í„° ì „ë‹¬ ë°›ì€ Message ë¥¼ ì²˜ë¦¬í•œë‹¤. clientInboundChannel WebSocket client ë¡œë¶€í„° ì „ë‹¬ ë°›ì€ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•´ì¤€ë‹¤. clientOutboundChannel Server ë©”ì‹œì§€ë¥¼ WebSocket Client ì— ì „ì†¡í•´ì¤€ë‹¤. brokerChannel Server ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” Channel, Message Broker ì— ë©”ì‹œì§€ë¥¼ ì „ì†¡í•´ì¤€ë‹¤.","text":"ëª©ì°¨ Spring Web Socket - Chat í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸° 1 Spring Web Socket - STOMP (Simple Text Oriented Message Protocol) ë„¤íŠ¸ì›Œí¬ - Web Socket ì°¸ê³  https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/websocket.html https://www.baeldung.com/websockets-spring STOMP (Simple&#x2F;Stream Text Oriented Message Protocol) WebSocket ê¸°ë°˜ í”„ë¡œí† ì½œì´ë©° Client ì™€ Server ê°€ negotiate í•˜ê¸° ìœ„í•œ sub-protocol ì´ ì •ì˜ ë¼ ìˆë‹¤. STOMP ì€ ë©”ì„¸ì§• ì „ì†¡ì„ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸° ìœ„í•´ íƒ„ìƒí•œ Text ì§€í–¥ í”„ë¡œí† ì½œ ì´ë©° Message Payloadì—ëŠ” Text or Binary ë°ì´í„°ë¥¼ í¬í•¨ í•´ ì „ì†¡í•  ìˆ˜ ìˆë‹¤. ë˜í•œ sub-protocol ì´ ì •ì˜ ë¼ ìˆì–´ Client ì—ì„œ ì„œë²„ë¡œ ì „ì†¡í•  ë©”ì‹œì§€ ìœ í˜•, í˜•ì‹, ë‚´ìš©ë“±ì´ ì •ì˜ ë¼ ìˆë‹¤. pub&#x2F;sub êµ¬ì¡°ë¡œ ë˜ì–´ìˆì–´ ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•˜ê³  ë©”ì„¸ì§€ë¥¼ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ í™•ì‹¤íˆ ì •í•´ì ¸ ìˆê¸° ë•Œë¬¸ì— ê°œë°œì ì…ì¥ì—ì„œ ëª…í™•í•˜ê²Œ ì¸ì§€í•˜ê³  ê°œë°œí•  ìˆ˜ ìˆëŠ” ì´ì ì´ ìˆë‹¤. ë˜í•œ STOMPë¥¼ ì´ìš©í•˜ë©´ ë©”ì„¸ì§€ì˜ í—¤ë”ì— ê°’ì„ ì¤„ ìˆ˜ ìˆì–´ í—¤ë” ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ í†µì‹  ì‹œ ì¸ì¦ ì²˜ë¦¬(ChannelInterceptor) ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë©° STOMP ìŠ¤í™ì— ì •ì˜í•œ ê·œì¹™ë§Œ ì˜ ì§€í‚¤ë©´ ì—¬ëŸ¬ ì–¸ì–´ ë° í”Œë«í¼ ê°„ ë©”ì„¸ì§€ë¥¼ ìƒí˜¸ ìš´ì˜í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ Springì—ì„œ ì§€ì›í•˜ëŠ” STOMPë¥¼ ì‚¬ìš©í•˜ë©´ Spring WebSocket ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ STOMP Brokerë¡œ ë™ì‘í•˜ê²Œ ëœë‹¤. STOMP (Simple Text Oriented Message Protocol) êµ¬ì„± SimpAnnotationMethod Client ë¡œ ë¶€í„° ì „ë‹¬ ë°›ì€ Message ë¥¼ ì²˜ë¦¬í•œë‹¤. clientInboundChannel WebSocket client ë¡œë¶€í„° ì „ë‹¬ ë°›ì€ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•´ì¤€ë‹¤. clientOutboundChannel Server ë©”ì‹œì§€ë¥¼ WebSocket Client ì— ì „ì†¡í•´ì¤€ë‹¤. brokerChannel Server ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” Channel, Message Broker ì— ë©”ì‹œì§€ë¥¼ ì „ì†¡í•´ì¤€ë‹¤. Simple Broker ë¥¼ ì´ìš©í•œ êµ¬ì„± Simple Broker ëŠ” In Memory í˜•íƒœë¡œ ë©”ì‹œì§€ë¥¼ ì €ì¥í•˜ê³  Client ë¡œ Message ë¥¼ ì „ë‹¬í•˜ëŠ” Message Broker ì™¸ë¶€ Broker ë¥¼ ì´ìš©í•œ êµ¬ì„± ì™¸ë¶€ Message Broker ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° Broker Relay ë¥¼ ì´ìš©í•´ ì™¸ë¶€ Broker ì™€ Client ì— ë©”ì‹œì§€ë¥¼ ì „ë‹¬ í•œë‹¤. ì˜ì¡´ì„± ì„¤ì •í•˜ê¸°implementation &#x27;org.springframework.boot:spring-boot-starter-web&#x27;implementation &#x27;org.springframework.boot:spring-boot-starter-websocket&#x27;implementation &#x27;org.springframework.boot:spring-boot-devtools&#x27; STOMP ì‚¬ìš©ì„ ìœ„í•œ Config STOMP ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ @EnableWebSocketMessageBroker ë¥¼ ì„ ì–¸í•˜ê³  WebSocketMessageBrokerConfigurer ë¥¼ êµ¬í˜„í•œë‹¤. StompEndpointRegistry WebSocket ì—°ê²°ì„ ìœ„í•œ End Point ë¥¼ ì„¤ì •í•œë‹¤. ì„¤ì •ëœ End Point ë¥¼ ì´ìš©í•´ Web Socket í†µì‹ (Connection) ì„ ìœ„í•œ Hand Shaking ì´ ì´ë¤„ì§„ë‹¤. MessageBrokerRegistry setApplicationDestinationPrefixes ë©”ì„œë“œë¥¼ ì´ìš©í•´ ë©”ì‹œì§€ ìš”ì²­ ì— ëŒ€í•œ Prefix ë¥¼ ì„¤ì •í•œë‹¤. /pub Prefix ë¡œ ì‹œì‘í•œ ìš”ì²­ì€ @Controller í´ë˜ìŠ¤ ë‚´ @MessageMapping ë©”ì„œë“œë¡œ ë¼ìš°íŒ… ëœë‹¤. enableSimpleBroker ëŠ” Simple Message Broker ë¥¼ í™œì„±í™” í•˜ê³  ë©”ì‹œì§€ êµ¬ë… ì„ ìœ„í•œ Prefix ë¥¼ ì„¤ì •í•œë‹¤. /sub Prefix ë¡œ ì‹œì‘í•œ ë©”ì‹œì§€ë¥¼ Broker ë¡œ ë¼ìš°íŒ… í•œë‹¤. ì™¸ë¶€ Broker ë¥¼ ì‚¬ìš©í•  ê²½ìš° enableStompBrokerRelay ë©”ì„œë“œë¥¼ ì´ìš©í•´ STOMP broker relay ë¥¼ í™œì„±í™” ì‹œì¼œì¤€ë‹¤. WebSockConfig.java@Configuration@EnableWebSocketMessageBrokerpublic class WebSockConfig implements WebSocketMessageBrokerConfigurer &#123; @Override public void registerStompEndpoints(StompEndpointRegistry registry) &#123; registry.addEndpoint(&quot;/ws-stomp&quot;) .setAllowedOrigins(&quot;*&quot;) .withSockJS(); &#125; @Override public void configureMessageBroker(MessageBrokerRegistry config) &#123; config.enableSimpleBroker(&quot;/sub&quot;); // config.enableStompBrokerRelay(&quot;/sub&quot;); // ì™¸ë¶€ Broker ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° config.setApplicationDestinationPrefixes(&quot;/pub&quot;); &#125;&#125; ë©”ì‹œì§€ ì²˜ë¦¬ë¥¼ ìœ„í•œ Message Handler - MessageMapping @MessageMapping ì„ ì´ìš©í•œ ë©”ì‹œì§€ ì²˜ë¦¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ê²½ë¡œ ê¸°ë°˜ ë©”ì‹œì§€ ë¼ìš°íŒ… ë°©ì‹ì—ì„œ ë©”ì‹œì§€ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì„œìš©í•œë‹¤. @MessageMapping ë¥¼ ì´ìš©í•´ Message ë¥¼ ì²˜ë¦¬ í•œ í›„ ê°’ì„ ë°˜í™˜í•˜ê²Œ ë˜ë©´ MessageConverter ì— ì˜í•´ ì§ë ¬í™” ë˜ê³  brokerChannel ë¡œ ì „ì†¡ ëœ í›„ì— Channel ì„ êµ¬ë…í•˜ëŠ” Client ë“¤ì—ê²Œ ì „ì†¡(Broad Cast) ëœë‹¤. ì´ ë•Œ, Out Bound ëŒ€ìƒì€ In Bound ë¡œ ë“¤ì–´ì˜¨ ë©”ì‹œì§€ ì²˜ìŒ ì ‘ë‘ì‚¬ë§Œ ë°”ë€ê³  ë‚˜ë¨¸ì§€ ê²½ë¡œëŠ” ë™ì¼í•˜ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ Ant ìŠ¤íƒ€ì¼ ì˜ ê²½ë¡œ íŒ¨í„´ì„ ì§€ì›í•œë‹¤. &#x2F;foo&#x2F;{id} ì™€ ê°™ì´ Path Variable ì„ ì‚¬ìš©í•˜ë©´ @DestinationVariable ë¥¼ ì´ìš©í•´ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. /pub/chat/message ê²½ë¡œë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì— ëŒ€í•´ Message ë¥¼ ë°œí–‰í•˜ê³  /sub/chat/message/ ê²½ë¡œë¡œ êµ¬ë…í•˜ê³  ìˆëŠ” subscriber ë“¤ì—ê²Œ ì‘ë‹µê°’ì„ ì „ë‹¬í•œë‹¤. @SendTo, @SendToUser ë¥¼ ì´ìš©í•´ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ê²½ë¡œë¥¼ ì§ì ‘ ì„¤ì •í•  ìˆ˜ ìˆë‹¤ @MessageMapping ë©”ì„œë“œë¥¼ ì´ìš©í•´ ê°’ì„ ë°˜í™˜í•˜ëŠ” ëŒ€ì‹  SimpMessagingTemplate ë¥¼ ì´ìš©í•´ brokerChannel ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. ChatController.java@RequiredArgsConstructor@Controllerpublic class ChatController &#123; private final SimpMessageSendingOperations messagingTemplate; @MessageMapping(&quot;/chat/message&quot;) public void message(ChatMessage message) &#123; if (ChatMessage.MessageType.ENTER.equals(message.getType())) &#123; message.setMessage(message.getSender() + &quot;ë‹˜ì´ ì…ì¥í•˜ì…¨ìŠµë‹ˆë‹¤.&quot;); &#125; messagingTemplate.convertAndSend(&quot;/sub/chat/room/&quot; + message.getRoomId(), message); &#125;&#125; CORS ë¬¸ì œWhen allowCredentials is true, allowedOrigins cannot contain the special value &quot;*&quot; since that cannot be set on the &quot;Access-Control-Allow-Origin&quot; response header. To allow credentials to a set of origins, list them explicitly or consider using &quot;allowedOriginPatterns&quot; instead. í•´ê²° : https://kim6394.tistory.com/273 setAllowedOrigins ë¥¼ setAllowedOriginPatterns ë¡œ ë³€ê²½ WebSocketConfig.java@Configuration@EnableWebSocketMessageBrokerpublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer &#123; @Override public void configureMessageBroker(MessageBrokerRegistry config) &#123; config.enableSimpleBroker(&quot;/sub&quot;); config.setApplicationDestinationPrefixes(&quot;/pub&quot;); &#125; @Override public void registerStompEndpoints(StompEndpointRegistry registry) &#123; registry.addEndpoint(&quot;/ws-stomp&quot;) .setAllowedOriginPatterns(&quot;*&quot;) .withSockJS(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring WebSocket","slug":"Spring/Spring-WebSocket","permalink":"https://ckck803.github.io/categories/Spring/Spring-WebSocket/"}],"tags":[]},{"title":"Spring Boot - StreamingResponseBody","slug":"spring/spring-resource/springboot-StreamingResponseBody","date":"2022-05-04T20:31:46.000Z","updated":"2024-11-27T02:00:27.414Z","comments":true,"path":"2022/05/05/spring/spring-resource/springboot-StreamingResponseBody/","link":"","permalink":"https://ckck803.github.io/2022/05/05/spring/spring-resource/springboot-StreamingResponseBody/","excerpt":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ ì°¸ê³  https://www.baeldung.com/spring-mvc-sse-streams StreamingResponseBody Spring ì—ì„œ ì œê³µí•˜ëŠ” ë¹„ë™ê¸° ìš”ì²­ ì²˜ë¦¬ë¥¼ ìœ„í•œ ê°ì²´, ì‘ë‹µê°’ì„ Byte ë¡œ ë³€í™˜í•´ Streaming í˜•íƒœë¡œ ì¤„ ë•Œ ì‚¬ìš©í•˜ëŠ” ê°ì²´ @GetMapping(&quot;/video3&quot;)public ResponseEntity&lt;StreamingResponseBody&gt; handleRbe() throws FileNotFoundException &#123; File file = new File(&quot;/Users/dongwoo-yang/spring-file/mysong.mp4&quot;); InputStream inputStream = new FileInputStream(file); StreamingResponseBody stream = out -&gt; &#123; byte[] data = new byte[1024]; int length = 0; while((length = inputStream.read(data)) &gt;= 0)&#123; out.write(data, 0, length); &#125; inputStream.close(); out.flush(); &#125;; HttpHeaders headers = new HttpHeaders(); headers.add(&quot;Content-Type&quot;, &quot;video/mp4&quot;); headers.add(&quot;Content-Length&quot;, Long.toString(file.length())); return ResponseEntity.ok().headers(headers).body(stream);&#125;","text":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ ì°¸ê³  https://www.baeldung.com/spring-mvc-sse-streams StreamingResponseBody Spring ì—ì„œ ì œê³µí•˜ëŠ” ë¹„ë™ê¸° ìš”ì²­ ì²˜ë¦¬ë¥¼ ìœ„í•œ ê°ì²´, ì‘ë‹µê°’ì„ Byte ë¡œ ë³€í™˜í•´ Streaming í˜•íƒœë¡œ ì¤„ ë•Œ ì‚¬ìš©í•˜ëŠ” ê°ì²´ @GetMapping(&quot;/video3&quot;)public ResponseEntity&lt;StreamingResponseBody&gt; handleRbe() throws FileNotFoundException &#123; File file = new File(&quot;/Users/dongwoo-yang/spring-file/mysong.mp4&quot;); InputStream inputStream = new FileInputStream(file); StreamingResponseBody stream = out -&gt; &#123; byte[] data = new byte[1024]; int length = 0; while((length = inputStream.read(data)) &gt;= 0)&#123; out.write(data, 0, length); &#125; inputStream.close(); out.flush(); &#125;; HttpHeaders headers = new HttpHeaders(); headers.add(&quot;Content-Type&quot;, &quot;video/mp4&quot;); headers.add(&quot;Content-Length&quot;, Long.toString(file.length())); return ResponseEntity.ok().headers(headers).body(stream);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"}],"tags":[]},{"title":"Spring Boot - Actuator + Prometheus + Grafana","slug":"spring/spring-framework/springboot-actuator","date":"2022-05-04T19:31:46.000Z","updated":"2024-11-27T02:00:28.245Z","comments":true,"path":"2022/05/05/spring/spring-framework/springboot-actuator/","link":"","permalink":"https://ckck803.github.io/2022/05/05/spring/spring-framework/springboot-actuator/","excerpt":"ëª©ì°¨ Spring Boot - Actuator + Prometheus + Grafana Spring Boot - ë©”ì‹œì§€ êµ­ì œí™” MessageSource Spring Boot - WebMvcConfigurer Spring Boot - @SpringBootApplication ì•Œì•„ë³´ê¸° ì°¸ê³  https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator https://www.baeldung.com/spring-boot-actuators https://docs.spring.io/spring-boot/docs/2.1.8.RELEASE/reference/html/production-ready.html https://covenant.tistory.com/244 https://devbksheen.tistory.com/182 Spring Boot - Actuator Actuator ëŠ” ë³„ë„ì˜ êµ¬í˜„ ì—†ì´ Metric ì •ë³´, íŠ¸ë˜í”½ ì •ë³´, ë°ì´í„° ë² ì´ìŠ¤ ë“± ìš´ì˜í™˜ê²½ì—ì„œ Application ìƒíƒœ ì •ë³´ì— ì ‘ê·¼ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ê³ , HTTP ì™€ JMX ë¥¼ ì´ìš©í•´ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator.endpoints ê³µì‹ ë¬¸ì„œì—ì„œ Actuator ê°€ ì§€ì›í•˜ëŠ” End Point ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Actuator ì˜ì¡´ì„± ì¶”ê°€implementation &#x27;org.springframework.boot:spring-boot-starter-actuator&#x27; ì˜ì¡´ì„±ì„ ì¶”ê°€í•œ ë’¤ Spring Application ì„ ì‹¤í–‰ ì‹œí‚¨ í›„ http://localhost:8080/actuator ë¡œ ì ‘ì†í•˜ë©´ í˜„ì¬ Application ì—ì„œ End Point ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","text":"ëª©ì°¨ Spring Boot - Actuator + Prometheus + Grafana Spring Boot - ë©”ì‹œì§€ êµ­ì œí™” MessageSource Spring Boot - WebMvcConfigurer Spring Boot - @SpringBootApplication ì•Œì•„ë³´ê¸° ì°¸ê³  https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator https://www.baeldung.com/spring-boot-actuators https://docs.spring.io/spring-boot/docs/2.1.8.RELEASE/reference/html/production-ready.html https://covenant.tistory.com/244 https://devbksheen.tistory.com/182 Spring Boot - Actuator Actuator ëŠ” ë³„ë„ì˜ êµ¬í˜„ ì—†ì´ Metric ì •ë³´, íŠ¸ë˜í”½ ì •ë³´, ë°ì´í„° ë² ì´ìŠ¤ ë“± ìš´ì˜í™˜ê²½ì—ì„œ Application ìƒíƒœ ì •ë³´ì— ì ‘ê·¼ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ê³ , HTTP ì™€ JMX ë¥¼ ì´ìš©í•´ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator.endpoints ê³µì‹ ë¬¸ì„œì—ì„œ Actuator ê°€ ì§€ì›í•˜ëŠ” End Point ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Actuator ì˜ì¡´ì„± ì¶”ê°€implementation &#x27;org.springframework.boot:spring-boot-starter-actuator&#x27; ì˜ì¡´ì„±ì„ ì¶”ê°€í•œ ë’¤ Spring Application ì„ ì‹¤í–‰ ì‹œí‚¨ í›„ http://localhost:8080/actuator ë¡œ ì ‘ì†í•˜ë©´ í˜„ì¬ Application ì—ì„œ End Point ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Prometheusimplementation &#x27;io.micrometer:micrometer-core&#x27;implementation &#x27;io.micrometer:micrometer-registry-prometheus&#x27; Spring boot ì„¤ì •Prometheus ê°€ Spring Application ì— ì ‘ê·¼í•´ ì •ë³´ë¥¼ ì½ì–´ê°ˆ ìˆ˜ ìˆë„ë¡ ì„¤ì •ì„ ì¶”ê°€í•´ ì¤˜ì•¼ í•œë‹¤. management: endpoint: metrics: enabled: true prometheus: enabled: true endpoints: web: exposure: include: health, info, metrics, prometheus Prometheus ì™€ Metric ì •ë³´ë¥¼ ìœ„í•œ End Point ë“¤ì´ ê°œë°©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Prometheus ì„¤ì •Prometheus ì—ì„œ Spring Applciation ì´ ì œê³µí•˜ëŠ” ì •ë³´ë¥¼ ì½ì–´ê°€ê¸° ìœ„í•´ì„œ prometheus.yml íŒŒì¼ì„ ìƒì„± ë° í•„ìš”í•œ ì •ë³´ë¥¼ ê¸°ì…í•œë‹¤. global.scrape_interval Metric ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ê°„ê²© global.evaluation_interval ê·œì¹™ì„ í‰ê°€í•˜ëŠ” ê°„ê²© scrape_configs.metrics_path Metrc ì •ë³´ë¥¼ ìˆ˜ì§‘í•  Path ì„¤ì • scrape_configs.static_configs.targets Target ì •ë³´ global: scrape_interval: 10s evaluation_interval: 1m external_labels: # ì™¸ë¶€ ì‹œìŠ¤í…œì— í‘œì‹œí•  ì´ ì„œë²„ì˜ ë ˆì´ë¸” monitor: &quot;devbeekei-monitor&quot;rule_files: # ê·œì¹™ì„ ë¡œë”©í•˜ê³  evaluation_interval ì„¤ì •ì— ë”°ë¼ ì •ê¸°ì ìœ¼ë¡œ í‰ê°€í•œë‹¤.# - &quot;first.rules&quot;# - &quot;second.rules&quot;scrape_configs: - job_name: &quot;monitoring-app&quot; metrics_path: &quot;/actuator/prometheus&quot; static_configs: - targets: [&quot;host.docker.internal:8080&quot;] docker ë¥¼ ì´ìš©í•´ Prometheus ì´ë¯¸ì§€ ë¥¼ ë„ì–´ì£¼ë„ë¡ í•œë‹¤. ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰ ì‹œí‚¬ ë•Œ Local ì— ì„¤ì •í•œ prometheus.yml íŒŒì¼ê³¼ ì´ë¯¸ì§€ ë‚´ë¶€ íŒŒì¼ì„ ì—°ê²°í•´ docker ë‚´ë¶€ì—ì„œ ì„¤ì •ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. docker run -d -p 9090:9090 -v &#123;prometheus.yml íŒŒì¼ ê²½ë¡œ&#125;:/etc/prometheus/prometheus.yml --name prometheus prom/prometheus http://localhost:9090/ ì— ì ‘ì† í•˜ë©´ Target ì— Spring Application ì´ ì¡í˜€ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. GrafanaGrafana ë„ docker ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•´ Prometheus ê°€ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ ì‹œê°í™” í•˜ë„ë¡ ì„¤ì •í•œë‹¤. docker run --name grafana -d -p 3000:3000 grafana/grafana http://localhost:3000/ ì— ì ‘ì†í•˜ë©´ í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ Grafana ì— ì ‘ì† í•  ìˆ˜ ìˆë‹¤. ì´ˆê¸° ID&#x2F;PW ëŠ” admin&#x2F;admin ì´ë‹¤. ë°ì´í„° ì†ŒìŠ¤ ì¶”ê°€ë¥¼ ìœ„í•´ Grafana ì‹œì‘ í™”ë©´ì—ì„œ DATA SOURCE ë¥¼ í´ë¦­í•´ Prometheus ë¥¼ ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ë„ë¡ ì„¤ì •í•œë‹¤. URL ì—ëŠ” í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ Prometheus URL ì •ë³´ë¥¼ ê¸°ì…í•´ì¤€ë‹¤. Grafana ì—ì„œëŠ” ì—°ê²°ëœ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ Dash board ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ìœ ëª…í•œ Dash board ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. Import ë¥¼ í´ë™í•´ JVM dashboard ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤.(https://grafana.com/grafana/dashboards/4701) Prometheus ë¡œ ë¶€í„° Metric ì •ë³´ë¥¼ ì½ì–´ì™€ ê·¸ë˜í”„ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Spring Framework","slug":"Spring/Spring-Boot/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Spring-Framework/"}],"tags":[]},{"title":"Spring Boot - ResourceRegion","slug":"spring/spring-resource/springboot-range-request","date":"2022-05-04T19:31:46.000Z","updated":"2024-11-27T02:00:27.338Z","comments":true,"path":"2022/05/05/spring/spring-resource/springboot-range-request/","link":"","permalink":"https://ckck803.github.io/2022/05/05/spring/spring-resource/springboot-range-request/","excerpt":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Http Range Request ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ HTTP ë©”ì‹œì§€ ì¤‘ ì¼ë¶€ë§Œ ì „ì†¡í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ëŠ” ê¸°ìˆ  ëŒ€ìš©ëŸ‰ì˜ ë¯¸ë””ì–´ íŒŒì¼, íŒŒì¼ ì „ì†¡ ì¤‘ ì¼ì‹œ ì •ì§€ ë° ë‹¤ì‹œ ì‹œì‘ì´ ê°€ëŠ¥í•˜ë‹¤ Client ê°€ Range Header ë¥¼ í†µí•´ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì˜ ì¼ë¶€ë¥¼ ìš”ì²­í•˜ë©´ ì„œë²„ê°€ ê·¸ ë¶€ë¶„ë§Œ ì „ì†¡í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤. Server ê°€ Range Request ë¥¼ ì§€ì›í•˜ë©´ Response Http Header ì— Content-Range ê°€ ì¡´ì¬í•œë‹¤. HTTP Range ìš”ì²­ì— ëŒ€í•œ ì •ìƒ ì‘ë‹µ ì½”ë“œë¡œëŠ” PARTIAL_CONTENT(206) ì„ ë°˜í™˜í•œë‹¤. Range ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ê°’ì´ Body ì— ë‹´ê²¨ì ¸ ìˆë‹¤. Spring Boot - ResourceRegion HttpRange ëŠ” Range Header ì •ë³´ë¥¼ ë‹´ë“  ê°ì²´ë‹¤. Request Header ë¡œë¶€í„° ì •ë³´ë¥¼ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤. ResourceRegion ëŠ” ì „ë‹¬ ë°›ì€ Resource ê°ì²´ ë¡œë¶€í„° Range ë²”ìœ„ ë§Œí¼ ë‚˜ëˆ  ê°€ì ¸ì˜¤ëŠ” ê°ì²´ë‹¤. @RestController@Slf4jpublic class VideoController &#123; @GetMapping(value = &quot;/video&quot;) public ResponseEntity&lt;ResourceRegion&gt; streamVideo(@RequestHeader HttpHeaders headers) throws IOException &#123; UrlResource video = new UrlResource(&quot;file:/Users/dongwoo-yang/spring-file/mysong.mp4&quot;); ResourceRegion resourceRegion; final long size = 1000000L; long contentLength = video.contentLength(); Optional&lt;HttpRange&gt; optional = headers.getRange().stream().findFirst(); HttpRange httpRange; if (optional.isPresent()) &#123; httpRange = optional.get(); long start = httpRange.getRangeStart(contentLength); long end = httpRange.getRangeEnd(contentLength); long rangeLength = Long.min(size, end - start + 1); resourceRegion = new ResourceRegion(video, start, rangeLength); &#125; else &#123; long rangeLength = Long.min(size, contentLength); resourceRegion = new ResourceRegion(video, 0, rangeLength); &#125; return ResponseEntity.status(HttpStatus.PARTIAL_CONTENT) .contentType(MediaTypeFactory.getMediaType(video).orElse(MediaType.APPLICATION_OCTET_STREAM)) .body(resourceRegion); &#125;&#125; ì„œë²„ì—ì„œ ì „ì†¡í•´ì£¼ëŠ” Resource Size ê°€ 1 MB(1000000) ë¡œ ì¡í˜€ ìˆì–´ 1 MB ì”© ë¶€ë¶„ì ìœ¼ë¡œ ì‘ë‹µë°›ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","text":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Http Range Request ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ HTTP ë©”ì‹œì§€ ì¤‘ ì¼ë¶€ë§Œ ì „ì†¡í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ëŠ” ê¸°ìˆ  ëŒ€ìš©ëŸ‰ì˜ ë¯¸ë””ì–´ íŒŒì¼, íŒŒì¼ ì „ì†¡ ì¤‘ ì¼ì‹œ ì •ì§€ ë° ë‹¤ì‹œ ì‹œì‘ì´ ê°€ëŠ¥í•˜ë‹¤ Client ê°€ Range Header ë¥¼ í†µí•´ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì˜ ì¼ë¶€ë¥¼ ìš”ì²­í•˜ë©´ ì„œë²„ê°€ ê·¸ ë¶€ë¶„ë§Œ ì „ì†¡í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤. Server ê°€ Range Request ë¥¼ ì§€ì›í•˜ë©´ Response Http Header ì— Content-Range ê°€ ì¡´ì¬í•œë‹¤. HTTP Range ìš”ì²­ì— ëŒ€í•œ ì •ìƒ ì‘ë‹µ ì½”ë“œë¡œëŠ” PARTIAL_CONTENT(206) ì„ ë°˜í™˜í•œë‹¤. Range ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ê°’ì´ Body ì— ë‹´ê²¨ì ¸ ìˆë‹¤. Spring Boot - ResourceRegion HttpRange ëŠ” Range Header ì •ë³´ë¥¼ ë‹´ë“  ê°ì²´ë‹¤. Request Header ë¡œë¶€í„° ì •ë³´ë¥¼ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤. ResourceRegion ëŠ” ì „ë‹¬ ë°›ì€ Resource ê°ì²´ ë¡œë¶€í„° Range ë²”ìœ„ ë§Œí¼ ë‚˜ëˆ  ê°€ì ¸ì˜¤ëŠ” ê°ì²´ë‹¤. @RestController@Slf4jpublic class VideoController &#123; @GetMapping(value = &quot;/video&quot;) public ResponseEntity&lt;ResourceRegion&gt; streamVideo(@RequestHeader HttpHeaders headers) throws IOException &#123; UrlResource video = new UrlResource(&quot;file:/Users/dongwoo-yang/spring-file/mysong.mp4&quot;); ResourceRegion resourceRegion; final long size = 1000000L; long contentLength = video.contentLength(); Optional&lt;HttpRange&gt; optional = headers.getRange().stream().findFirst(); HttpRange httpRange; if (optional.isPresent()) &#123; httpRange = optional.get(); long start = httpRange.getRangeStart(contentLength); long end = httpRange.getRangeEnd(contentLength); long rangeLength = Long.min(size, end - start + 1); resourceRegion = new ResourceRegion(video, start, rangeLength); &#125; else &#123; long rangeLength = Long.min(size, contentLength); resourceRegion = new ResourceRegion(video, 0, rangeLength); &#125; return ResponseEntity.status(HttpStatus.PARTIAL_CONTENT) .contentType(MediaTypeFactory.getMediaType(video).orElse(MediaType.APPLICATION_OCTET_STREAM)) .body(resourceRegion); &#125;&#125; ì„œë²„ì—ì„œ ì „ì†¡í•´ì£¼ëŠ” Resource Size ê°€ 1 MB(1000000) ë¡œ ì¡í˜€ ìˆì–´ 1 MB ì”© ë¶€ë¶„ì ìœ¼ë¡œ ì‘ë‹µë°›ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Range Request Header Request Header ë¥¼ ì‚´í´ë³´ë©´ Range Header ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆê³  Range Header ê°’ì—ëŠ” Range ì˜ ì‹œì‘ ê°’ì„ Server ë¡œ ë³´ë‚¸ë‹¤. Range Response Header Response Header ë¥¼ ì‚´í´ ë³´ë©´ Content-Range Header ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Content-Range Header ì—ëŠ” ì „ì²´ Resource í¬ê¸°ì—ì„œ ì‘ë‹µí•œ Range ì •ë³´ê°€ ë‹´ê²¨ ìˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"}],"tags":[]},{"title":"ë°ì´í„° ë² ì´ìŠ¤ - Index","slug":"database/index","date":"2022-05-04T16:21:23.000Z","updated":"2024-02-18T16:19:54.522Z","comments":true,"path":"2022/05/05/database/index/","link":"","permalink":"https://ckck803.github.io/2022/05/05/database/index/","excerpt":"Index ë€?ì¸ë±ìŠ¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í…Œì´ë¸”ì˜ ê²€ìƒ‰ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•œ ìë£Œ êµ¬ì¡° ì…ë‹ˆë‹¤. ì¸ë±ìŠ¤ëŠ” í…Œì´ë¸”ì˜ ì»¬ëŸ¼ì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ë©°, ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì¸ë±ìŠ¤ëŠ” B-íŠ¸ë¦¬ë‚˜ í•´ì‹œ í…Œì´ë¸”ê³¼ ê°™ì€ ìë£Œ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë©ë‹ˆë‹¤. B-íŠ¸ë¦¬ ì¸ë±ìŠ¤ëŠ” ë§¤ìš° ì¼ë°˜ì ì¸ ì¸ë±ìŠ¤ ìœ í˜•ìœ¼ë¡œ, í…Œì´ë¸”ì˜ í‚¤ ê°’ì´ ì •ë ¬ëœ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥ë©ë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” ê²€ìƒ‰, ì‚½ì… ë° ì‚­ì œ ì‘ì—…ì— ëŒ€í•´ ë§¤ìš° íš¨ìœ¨ì ì…ë‹ˆë‹¤. í•´ì‹œ ì¸ë±ìŠ¤ëŠ” í…Œì´ë¸”ì˜ í‚¤ ê°’ì„ í•´ì‹œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥í•˜ë©°, ë¹ ë¥¸ ê²€ìƒ‰ ì†ë„ë¥¼ ì œê³µí•˜ì§€ë§Œ ë²”ìœ„ ê²€ìƒ‰ì´ë‚˜ ì •ë ¬ ê¸°ëŠ¥ì´ ì—†ìŠµë‹ˆë‹¤. ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • í–‰ì„ ê²€ìƒ‰í•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ì¤„ì–´ë“­ë‹ˆë‹¤. íŠ¹íˆ ëŒ€ëŸ‰ì˜ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš° ê²€ìƒ‰ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¸ë±ìŠ¤ëŠ” í…Œì´ë¸”ì˜ í¬ê¸°ì™€ ê´€ë ¨í•˜ì—¬ ì €ì¥ ê³µê°„ì„ ì°¨ì§€í•˜ë¯€ë¡œ ì¸ë±ìŠ¤ë¥¼ ë„ˆë¬´ ë§ì´ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë¥¼ ì‚½ì…, ìˆ˜ì • ë˜ëŠ” ì‚­ì œí•  ë•Œ ì¶”ê°€ ì‘ì—…ì´ í•„ìš”í•˜ë¯€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì¸ë±ìŠ¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ ê²€ìƒ‰ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ë§¤ìš° ìœ ìš©í•˜ì§€ë§Œ, ì‚¬ìš©ì— ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ì ì ˆí•œ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Index Scan ì¢…ë¥˜ Table Full Scan : í…Œì´ë¸” ì „ì²´ íƒìƒ‰ Index Unique Scan : ì¸ë±ìŠ¤ ìˆ˜ì§ íƒìƒ‰ Index Full Sacn : ì¸ë±ìŠ¤ ì „ì²´ íƒìƒ‰ Index Range Scan : ì¸ë±ìŠ¤ ë²”ìœ„ íƒìƒ‰ Index Skip Scan : ì¸ë±ìŠ¤ ìŠ¤í‚µ íƒìƒ‰ Table Full Scan - í…Œì´ë¸” ì „ì²´ ìŠ¤ìº” ì „ì²´ í…Œì´ë¸”ì˜ ëª¨ë“  ë ˆì½”ë“œë¥¼ ê²€ìƒ‰í•˜ëŠ” ë°©ì‹","text":"Index ë€?ì¸ë±ìŠ¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í…Œì´ë¸”ì˜ ê²€ìƒ‰ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•œ ìë£Œ êµ¬ì¡° ì…ë‹ˆë‹¤. ì¸ë±ìŠ¤ëŠ” í…Œì´ë¸”ì˜ ì»¬ëŸ¼ì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ë©°, ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì¸ë±ìŠ¤ëŠ” B-íŠ¸ë¦¬ë‚˜ í•´ì‹œ í…Œì´ë¸”ê³¼ ê°™ì€ ìë£Œ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë©ë‹ˆë‹¤. B-íŠ¸ë¦¬ ì¸ë±ìŠ¤ëŠ” ë§¤ìš° ì¼ë°˜ì ì¸ ì¸ë±ìŠ¤ ìœ í˜•ìœ¼ë¡œ, í…Œì´ë¸”ì˜ í‚¤ ê°’ì´ ì •ë ¬ëœ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥ë©ë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” ê²€ìƒ‰, ì‚½ì… ë° ì‚­ì œ ì‘ì—…ì— ëŒ€í•´ ë§¤ìš° íš¨ìœ¨ì ì…ë‹ˆë‹¤. í•´ì‹œ ì¸ë±ìŠ¤ëŠ” í…Œì´ë¸”ì˜ í‚¤ ê°’ì„ í•´ì‹œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥í•˜ë©°, ë¹ ë¥¸ ê²€ìƒ‰ ì†ë„ë¥¼ ì œê³µí•˜ì§€ë§Œ ë²”ìœ„ ê²€ìƒ‰ì´ë‚˜ ì •ë ¬ ê¸°ëŠ¥ì´ ì—†ìŠµë‹ˆë‹¤. ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • í–‰ì„ ê²€ìƒ‰í•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ì¤„ì–´ë“­ë‹ˆë‹¤. íŠ¹íˆ ëŒ€ëŸ‰ì˜ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš° ê²€ìƒ‰ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¸ë±ìŠ¤ëŠ” í…Œì´ë¸”ì˜ í¬ê¸°ì™€ ê´€ë ¨í•˜ì—¬ ì €ì¥ ê³µê°„ì„ ì°¨ì§€í•˜ë¯€ë¡œ ì¸ë±ìŠ¤ë¥¼ ë„ˆë¬´ ë§ì´ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë¥¼ ì‚½ì…, ìˆ˜ì • ë˜ëŠ” ì‚­ì œí•  ë•Œ ì¶”ê°€ ì‘ì—…ì´ í•„ìš”í•˜ë¯€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì¸ë±ìŠ¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ ê²€ìƒ‰ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ë§¤ìš° ìœ ìš©í•˜ì§€ë§Œ, ì‚¬ìš©ì— ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ì ì ˆí•œ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Index Scan ì¢…ë¥˜ Table Full Scan : í…Œì´ë¸” ì „ì²´ íƒìƒ‰ Index Unique Scan : ì¸ë±ìŠ¤ ìˆ˜ì§ íƒìƒ‰ Index Full Sacn : ì¸ë±ìŠ¤ ì „ì²´ íƒìƒ‰ Index Range Scan : ì¸ë±ìŠ¤ ë²”ìœ„ íƒìƒ‰ Index Skip Scan : ì¸ë±ìŠ¤ ìŠ¤í‚µ íƒìƒ‰ Table Full Scan - í…Œì´ë¸” ì „ì²´ ìŠ¤ìº” ì „ì²´ í…Œì´ë¸”ì˜ ëª¨ë“  ë ˆì½”ë“œë¥¼ ê²€ìƒ‰í•˜ëŠ” ë°©ì‹ Index Unique Scan ë‹¨ í•œê±´ì˜ ë°ì´í„°ë¥¼ ì°¾ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” Scan ë°©ì‹ ë£¨íŠ¸ ë¸”ë¡ì—ì„œ ì‹œì‘í•´ ë¸Œëœì¹˜ ë¸”ë¡ì„ ê±°ì²˜ ë¦¬í”„ë¸”ë¡ê¹Œì§€ ë‚´ë ¤ê°€ ìµœì¢… ë°ì´í„°ê°€ ì €ì¥ëœ í…Œì´ë¸” ë¸”ë¡ì„ ì½ì–´ ë‹¨ í•œê±´ì„ ì°¾ëŠ”ë‹¤. unique Index ë¥¼ í†µí•´ = ì¡°ê±´ìœ¼ë¡œ íƒìƒ‰í•˜ëŠ” ê²½ìš° Index Range Scan ì¸ë±ìŠ¤ë¥¼ ë£¨íŠ¸ì—ì„œ ìˆ˜ì§ íƒìƒ‰í•˜ë‹¤ê°€ ë¦¬í”„ ë¸”ë¡ì— ë„ë‹¬í•´ ì‹œì‘ì ì„ ì°¾ê³  í•„ìš”í•œ ë²”ìœ„ ë§Œí¼ Scan í•˜ëŠ” ë°©ì‹ Index Full Scan ì¸ë±ìŠ¤ ë£¨íŠ¸ì—ì„œ ì‹œì‘í•´ ìˆ˜í‰ì ìœ¼ë¡œ ë¦¬í”„ ë¸”ëŸ­ê¹Œì§€ ìŠ¤ìº”í•˜ëŠ” ë°©ì‹ Index Skip Scan","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"}],"tags":[]},{"title":"Redis","slug":"database/join","date":"2022-05-04T16:21:23.000Z","updated":"2024-11-28T13:59:38.078Z","comments":true,"path":"2022/05/05/database/join/","link":"","permalink":"https://ckck803.github.io/2022/05/05/database/join/","excerpt":"RedisRedis íŠ¹ì§• Key-Value Store Collection ì§€ì› Pub&#x2F;Sub ì§€ì› ë””ìŠ¤í¬ ì €ì¥ Replication (ë³µì œ) Redis ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œë‹¤.","text":"RedisRedis íŠ¹ì§• Key-Value Store Collection ì§€ì› Pub&#x2F;Sub ì§€ì› ë””ìŠ¤í¬ ì €ì¥ Replication (ë³µì œ) Redis ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Redis","slug":"Develop/Redis","permalink":"https://ckck803.github.io/categories/Develop/Redis/"}],"tags":[]},{"title":"Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬","slug":"spring/spring-data-jpa/12-spring-data-jpa-bulk","date":"2022-04-25T10:39:59.000Z","updated":"2024-02-26T15:37:38.020Z","comments":true,"path":"2022/04/25/spring/spring-data-jpa/12-spring-data-jpa-bulk/","link":"","permalink":"https://ckck803.github.io/2022/04/25/spring/spring-data-jpa/12-spring-data-jpa-bulk/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬public int bulkAgePlus(int age) &#123; int resultCount = em.createQuery(&quot;update Member m set m.age = m.age + 1 where m.age &gt;= :age&quot;) .setParameter(&quot;age&quot;, age) .executeUpdate(); return resultCount;&#125; @Testpublic void bulkUpdate()&#123; memberJpaRepository.save(new Member(&quot;member1&quot;, 10)); memberJpaRepository.save(new Member(&quot;member2&quot;, 19)); memberJpaRepository.save(new Member(&quot;member3&quot;, 20)); memberJpaRepository.save(new Member(&quot;member4&quot;, 21)); memberJpaRepository.save(new Member(&quot;member5&quot;, 40)); int resultCount = memberJpaRepository.bulkAgePlus(20); assertThat(resultCount).isEqualTo(3);&#125; Spring JPA ì‚¬ìš©í•˜ê¸°@Modifying@Query(&quot;update Member m set m.age = :age+1 where m.age &gt;= :age&quot;)int bulkAgePlus(@Param(&quot;age&quot;) int age); ë²Œí¬ì„± ì¿¼ë¦¬ëŠ” ì˜ì†ì„± Contextë¥¼ ë¬´ì‹œí•˜ê³  ë°”ë¡œ DBì— ì—…ë°ì´íŠ¸ë¥¼ ì§„í–‰ ì‹œí‚¤ê¸° ë•Œë¬¸ì— ë²Œí¬ì„± ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•œ í›„ì—ëŠ” ì˜ì†ì„± Contextë¥¼ ì´ˆê¸°í™” í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. ì•ˆê·¸ëŸ¬ë©´ ê¸°ì¡´ì— ë‚¨ì•„ìˆëŠ”ë°ì´í„°ê°€ ê¼¬ì—¬ì„œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. @Testpublic void bulkUpdate()&#123; memberRepository.save(new Member(&quot;member1&quot;, 10)); memberRepository.save(new Member(&quot;member2&quot;, 19)); memberRepository.save(new Member(&quot;member3&quot;, 20)); memberRepository.save(new Member(&quot;member4&quot;, 21)); memberRepository.save(new Member(&quot;member5&quot;, 40)); int resultCount = memberRepository.bulkAgePlus(20); // ë²Œí¬ì„± ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œ í›„ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‚ ë ¤ì¤€ë‹¤. entityManager.flush(); entityManager.clear(); assertThat(resultCount).isEqualTo(3);&#125;","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬public int bulkAgePlus(int age) &#123; int resultCount = em.createQuery(&quot;update Member m set m.age = m.age + 1 where m.age &gt;= :age&quot;) .setParameter(&quot;age&quot;, age) .executeUpdate(); return resultCount;&#125; @Testpublic void bulkUpdate()&#123; memberJpaRepository.save(new Member(&quot;member1&quot;, 10)); memberJpaRepository.save(new Member(&quot;member2&quot;, 19)); memberJpaRepository.save(new Member(&quot;member3&quot;, 20)); memberJpaRepository.save(new Member(&quot;member4&quot;, 21)); memberJpaRepository.save(new Member(&quot;member5&quot;, 40)); int resultCount = memberJpaRepository.bulkAgePlus(20); assertThat(resultCount).isEqualTo(3);&#125; Spring JPA ì‚¬ìš©í•˜ê¸°@Modifying@Query(&quot;update Member m set m.age = :age+1 where m.age &gt;= :age&quot;)int bulkAgePlus(@Param(&quot;age&quot;) int age); ë²Œí¬ì„± ì¿¼ë¦¬ëŠ” ì˜ì†ì„± Contextë¥¼ ë¬´ì‹œí•˜ê³  ë°”ë¡œ DBì— ì—…ë°ì´íŠ¸ë¥¼ ì§„í–‰ ì‹œí‚¤ê¸° ë•Œë¬¸ì— ë²Œí¬ì„± ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•œ í›„ì—ëŠ” ì˜ì†ì„± Contextë¥¼ ì´ˆê¸°í™” í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. ì•ˆê·¸ëŸ¬ë©´ ê¸°ì¡´ì— ë‚¨ì•„ìˆëŠ”ë°ì´í„°ê°€ ê¼¬ì—¬ì„œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. @Testpublic void bulkUpdate()&#123; memberRepository.save(new Member(&quot;member1&quot;, 10)); memberRepository.save(new Member(&quot;member2&quot;, 19)); memberRepository.save(new Member(&quot;member3&quot;, 20)); memberRepository.save(new Member(&quot;member4&quot;, 21)); memberRepository.save(new Member(&quot;member5&quot;, 40)); int resultCount = memberRepository.bulkAgePlus(20); // ë²Œí¬ì„± ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œ í›„ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‚ ë ¤ì¤€ë‹¤. entityManager.flush(); entityManager.clear(); assertThat(resultCount).isEqualTo(3);&#125; @Modifying(clearAutomatically = true)@Query(&quot;update Member m set m.age = :age+1 where m.age &gt;= :age&quot;)int bulkAgePlus(@Param(&quot;age&quot;) int age);","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸°","slug":"jpa/querydsl/querydsl-15-paging","date":"2022-04-25T08:31:46.000Z","updated":"2024-11-28T13:59:28.863Z","comments":true,"path":"2022/04/25/jpa/querydsl/querydsl-15-paging/","link":"","permalink":"https://ckck803.github.io/2022/04/25/jpa/querydsl/querydsl-15-paging/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° Querydsl í˜ì´ì§•public interface MemberRepositoryCustom &#123; List&lt;MemberTeamDto&gt; search(MemberSearchCondition condition); Page&lt;MemberTeamDto&gt; searchPageSimple(MemberSearchCondition condition, Pageable pageable); Page&lt;MemberTeamDto&gt; searchPageComplex(MemberSearchCondition condition, Pageable pageable);&#125; QueryDSL ì—ì„œ ì œê³µí•˜ëŠ” fetchResults ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ ì™€ ê°€ì ¸ì˜¨ ë°ì´í„° ìˆ˜ë¥¼ í™•ì¸í•˜ëŠ” Count ì¿¼ë¦¬ ì´ 2ê°œì˜ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. @Overridepublic Page&lt;MemberTeamDto&gt; searchPageSimple(MemberSearchCondition condition, Pageable pageable) &#123; QueryResults&lt;MemberTeamDto&gt; results = queryFactory .select(new QMemberTeamDto( member.id.as(&quot;memberId&quot;), member.username, member.age, team.id.as(&quot;teamId&quot;), team.name.as(&quot;teamName&quot;) )) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .offset(pageable.getOffset()) .limit(pageable.getPageSize()) .fetchResults(); // fetchResults ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ count ì¿¼ë¦¬ê°€ ê°™ì´ ë‚˜ê°€ê²Œ ëœë‹¤. List&lt;MemberTeamDto&gt; content = results.getResults(); long total = results.getTotal(); return new PageImpl&lt;&gt;(content, pageable, total);&#125; Querydsl í˜ì´ì§• ì¿¼ë¦¬ì™€ Count ì¿¼ë¦¬ ë¶„ë¦¬@Overridepublic Page&lt;MemberTeamDto&gt; searchPageComplex(MemberSearchCondition condition, Pageable pageable) &#123; // ì „ì²´ ë‚´ìš©ì„ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ List&lt;MemberTeamDto&gt; content = queryFactory .select(new QMemberTeamDto( member.id.as(&quot;memberId&quot;), member.username, member.age, team.id.as(&quot;teamId&quot;), team.name.as(&quot;teamName&quot;) )) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .offset(pageable.getOffset()) .limit(pageable.getPageSize()) .fetch(); // ì „ì²´ Count ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ long total = queryFactory .select(ExpressionUtils.count(member)) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .fetchCount(); return new PageImpl&lt;&gt;(content, pageable, total);&#125; ìŠ¤í”„ë§ ë°ì´í„° í˜ì´ì§• í™œìš©2 - CountQuery ìµœì í™”","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° Querydsl í˜ì´ì§•public interface MemberRepositoryCustom &#123; List&lt;MemberTeamDto&gt; search(MemberSearchCondition condition); Page&lt;MemberTeamDto&gt; searchPageSimple(MemberSearchCondition condition, Pageable pageable); Page&lt;MemberTeamDto&gt; searchPageComplex(MemberSearchCondition condition, Pageable pageable);&#125; QueryDSL ì—ì„œ ì œê³µí•˜ëŠ” fetchResults ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ ì™€ ê°€ì ¸ì˜¨ ë°ì´í„° ìˆ˜ë¥¼ í™•ì¸í•˜ëŠ” Count ì¿¼ë¦¬ ì´ 2ê°œì˜ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. @Overridepublic Page&lt;MemberTeamDto&gt; searchPageSimple(MemberSearchCondition condition, Pageable pageable) &#123; QueryResults&lt;MemberTeamDto&gt; results = queryFactory .select(new QMemberTeamDto( member.id.as(&quot;memberId&quot;), member.username, member.age, team.id.as(&quot;teamId&quot;), team.name.as(&quot;teamName&quot;) )) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .offset(pageable.getOffset()) .limit(pageable.getPageSize()) .fetchResults(); // fetchResults ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ count ì¿¼ë¦¬ê°€ ê°™ì´ ë‚˜ê°€ê²Œ ëœë‹¤. List&lt;MemberTeamDto&gt; content = results.getResults(); long total = results.getTotal(); return new PageImpl&lt;&gt;(content, pageable, total);&#125; Querydsl í˜ì´ì§• ì¿¼ë¦¬ì™€ Count ì¿¼ë¦¬ ë¶„ë¦¬@Overridepublic Page&lt;MemberTeamDto&gt; searchPageComplex(MemberSearchCondition condition, Pageable pageable) &#123; // ì „ì²´ ë‚´ìš©ì„ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ List&lt;MemberTeamDto&gt; content = queryFactory .select(new QMemberTeamDto( member.id.as(&quot;memberId&quot;), member.username, member.age, team.id.as(&quot;teamId&quot;), team.name.as(&quot;teamName&quot;) )) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .offset(pageable.getOffset()) .limit(pageable.getPageSize()) .fetch(); // ì „ì²´ Count ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ long total = queryFactory .select(ExpressionUtils.count(member)) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .fetchCount(); return new PageImpl&lt;&gt;(content, pageable, total);&#125; ìŠ¤í”„ë§ ë°ì´í„° í˜ì´ì§• í™œìš©2 - CountQuery ìµœì í™” count ì¿¼ë¦¬ê°€ ìƒëµ ê°€ëŠ¥í•œ ê²½ìš° ìƒëµí•´ì„œ ì²˜ë¦¬ í˜ì´ì§€ ì‹œì‘ì´ë©´ì„œ ì»¨í…ì¸  ì‚¬ì´ì¦ˆê°€ í˜ì´ì§€ ì‚¬ì´ì¦ˆ ë³´ë‹¤ ì‘ì„ë•Œ ë§ˆì§€ë§‰ í˜ì´ì§€ ì¼ë•Œ(offset + ì»¨í…ì¸  ì‚¬ì´ì¦ˆë¥¼ ë”í•´ì„œ ì „ì²´ ì‚¬ì´ì¦ˆë¥¼ êµ¬í•¨) PageableExecutionUtils ì™€ JPAQuery ë¥¼ ì´ìš© @Overridepublic Page&lt;MemberTeamDto&gt; searchPageComplex(MemberSearchCondition condition, Pageable pageable) &#123; List&lt;MemberTeamDto&gt; content = queryFactory .select(new QMemberTeamDto( member.id.as(&quot;memberId&quot;), member.username, member.age, team.id.as(&quot;teamId&quot;), team.name.as(&quot;teamName&quot;) )) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .offset(pageable.getOffset()) .limit(pageable.getPageSize()) .fetch(); JPAQuery&lt;Long&gt; countQuery = queryFactory .select(count(member)) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ); return PageableExecutionUtils.getPage(content, pageable, () -&gt; countQuery.fetchCount());&#125; ìŠ¤í”„ë§ ë°ì´í„° í˜ì´ì§• í™œìš©3 - ì»¨íŠ¸ë¡¤ëŸ¬ ê°œë°œ@RestController@RequiredArgsConstructorpublic class MemberController &#123; private final MemberJpaRepository memberJpaRepository; private final MemberRepository memberRepository; @GetMapping(&quot;/v1/members&quot;) public List&lt;MemberTeamDto&gt; searchMemberV1(MemberSearchCondition condition) &#123; return memberJpaRepository.search(condition); &#125; @GetMapping(&quot;/v2/members&quot;) public Page&lt;MemberTeamDto&gt; searchMemberV2(MemberSearchCondition condition, Pageable pageable) &#123; return memberRepository.searchPageSimple(condition, pageable); &#125; @GetMapping(&quot;/v3/members&quot;) public Page&lt;MemberTeamDto&gt; searchMemberV3(MemberSearchCondition condition, Pageable pageable) &#123; return memberRepository.searchPageComplex(condition, pageable); &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository","slug":"jpa/querydsl/querydsl-14-custom-repository","date":"2022-04-25T07:31:46.000Z","updated":"2024-11-28T13:59:28.433Z","comments":true,"path":"2022/04/25/jpa/querydsl/querydsl-14-custom-repository/","link":"","permalink":"https://ckck803.github.io/2022/04/25/jpa/querydsl/querydsl-14-custom-repository/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ì°¸ê³  https://docs.spring.io/spring-data/jpa/docs/2.1.3.RELEASE/reference/html/#repositories.custom-implementations ì‚¬ìš©ì ì •ì˜ Repository ì‚¬ìš©ë²• ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ì‘ì„± ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ ìŠ¤í”„ë§ ë°ì´í„° Repository ì— ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ìƒì† 1. ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ì‘ì„±public interface MemberRepositoryCustom &#123; List&lt;MemberTeamDto&gt; search(MemberSearchCondition condition);&#125; 2. ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ì°¸ê³  https://docs.spring.io/spring-data/jpa/docs/2.1.3.RELEASE/reference/html/#repositories.custom-implementations ì‚¬ìš©ì ì •ì˜ Repository ì‚¬ìš©ë²• ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ì‘ì„± ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ ìŠ¤í”„ë§ ë°ì´í„° Repository ì— ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ìƒì† 1. ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ì‘ì„±public interface MemberRepositoryCustom &#123; List&lt;MemberTeamDto&gt; search(MemberSearchCondition condition);&#125; 2. ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„public class MemberRepositoryImpl implements MemberRepositoryCustom&#123; private final JPAQueryFactory queryFactory; public MemberRepositoryImpl(EntityManager em)&#123; this.queryFactory = new JPAQueryFactory(em); &#125; public List&lt;MemberTeamDto&gt; search(MemberSearchCondition condition) &#123; return queryFactory .select(new QMemberTeamDto( member.id.as(&quot;memberId&quot;), member.username, member.age, team.id.as(&quot;teamId&quot;), team.name.as(&quot;teamName&quot;) )) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .fetch(); &#125; private BooleanExpression usernameEq(String username)&#123; return StringUtils.hasText(username) ? member.username.eq(username) : null; &#125; private BooleanExpression teamNameEq(String teamName)&#123; return StringUtils.hasText(teamName) ? team.name.eq(teamName) : null; &#125; private BooleanExpression ageGoe(Integer ageGoe)&#123; return ageGoe != null ? member.age.goe(ageGoe) : null; &#125; private BooleanExpression ageLoe(Integer ageLoe)&#123; return ageLoe != null ? member.age.loe(ageLoe) : null; &#125;&#125; 3. ìŠ¤í”„ë§ ë°ì´í„° Repository ì— ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ìƒì†MemberRepository ì¸í„°í˜ì´ìŠ¤ëŠ” JPA ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” JpaRepository ì™€ ì‚¬ìš©ìê°€ ì •ì˜í•œ MemberRepositoryCustom ë‘ê°œì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì† ë°›ëŠ”ë‹¤. @Repositorypublic interface MemberRepository extends JpaRepository&lt;Member, Long&gt;, MemberRepositoryCustom &#123; List&lt;Member&gt; findByUsername(String username);&#125; @Testpublic void searchTest3()&#123; Team teamA = new Team(&quot;teamA&quot;); Team teamB = new Team(&quot;teamB&quot;); em.persist(teamA); em.persist(teamB); Member member1 = new Member(&quot;member1&quot;, 10, teamA); Member member2 = new Member(&quot;member2&quot;, 20, teamA); Member member3 = new Member(&quot;member3&quot;, 30, teamB); Member member4 = new Member(&quot;member4&quot;, 40, teamB); em.persist(member1); em.persist(member2); em.persist(member3); em.persist(member4); MemberSearchCondition condition = new MemberSearchCondition(); condition.setAgeGoe(35); condition.setAgeLoe(40); condition.setTeamName(&quot;teamB&quot;); List&lt;MemberTeamDto&gt; result = memberRepository.search(condition); assertThat(result).extracting(&quot;username&quot;).containsExactly(&quot;member4&quot;);&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl","slug":"jpa/querydsl/querydsl-12","date":"2022-04-25T03:31:46.000Z","updated":"2024-11-28T13:59:28.717Z","comments":true,"path":"2022/04/25/jpa/querydsl/querydsl-12/","link":"","permalink":"https://ckck803.github.io/2022/04/25/jpa/querydsl/querydsl-12/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° Post not found: jpa/querydsl/querydsl-10 QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl@Repositorypublic class MemberJpaRepository &#123; private final EntityManager em; private final JPAQueryFactory queryFactory; public MemberJpaRepository(EntityManager em)&#123; this.em = em; this.queryFactory = new JPAQueryFactory(em); &#125; public void save(Member member)&#123; em.persist(member); &#125; public Optional&lt;Member&gt; findById(Long id)&#123; Member findMember = em.find(Member.class, id); return Optional.ofNullable(findMember); &#125; public List&lt;Member&gt; findAll()&#123; return em.createQuery(&quot;select m from Member m&quot;, Member.class) .getResultList(); &#125; public List&lt;Member&gt; findByUsername(String username)&#123; return em.createQuery(&quot;select m from Member m where m.username = :username&quot;, Member.class) .setParameter(&quot;username&quot;, username) .getResultList(); &#125;&#125; SpringBootTest@Transactionalclass MemberJpaRepositoryTest &#123; @Autowired EntityManager em; @Autowired MemberJpaRepository memberJpaRepository; @Test public void basicTest()&#123; Member member = new Member(&quot;member1&quot;, 10); memberJpaRepository.save(member); Member findMember = memberJpaRepository.findById(member.getId()).get(); assertThat(findMember).isEqualTo(member); List&lt;Member&gt; result = memberJpaRepository.findAll(); assertThat(result).containsExactly(member); List&lt;Member&gt; result2 = memberJpaRepository.findByUsername(&quot;member1&quot;); assertThat(result2).containsExactly(member); &#125;&#125; JPQL QueryDsl ë¡œ ë³€ê²½public List&lt;Member&gt; findAll()&#123; return em.createQuery(&quot;select m from Member m&quot;, Member.class) .getResultList();&#125;public List&lt;Member&gt; findAll_Querydsl()&#123; return queryFactory .selectFrom(member) .fetch();&#125;public List&lt;Member&gt; findByUsername(String username)&#123; return em.createQuery(&quot;select m from Member m where m.username = :username&quot;, Member.class) .setParameter(&quot;username&quot;, username) .getResultList();&#125;public List&lt;Member&gt; findByUsername_Querydsl(String username)&#123; return queryFactory .selectFrom(member) .where(member.username.eq(username)) .fetch();&#125; @Test public void basicQueryDsl()&#123; Member member = new Member(&quot;member1&quot;, 10); memberJpaRepository.save(member); Member findMember = memberJpaRepository.findById(member.getId()).get(); assertThat(findMember).isEqualTo(member); List&lt;Member&gt; result = memberJpaRepository.findAll_Querydsl(); assertThat(result).containsExactly(member); List&lt;Member&gt; result2 = memberJpaRepository.findByUsername_Querydsl(&quot;member1&quot;); assertThat(result2).containsExactly(member); &#125;","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° Post not found: jpa/querydsl/querydsl-10 QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl@Repositorypublic class MemberJpaRepository &#123; private final EntityManager em; private final JPAQueryFactory queryFactory; public MemberJpaRepository(EntityManager em)&#123; this.em = em; this.queryFactory = new JPAQueryFactory(em); &#125; public void save(Member member)&#123; em.persist(member); &#125; public Optional&lt;Member&gt; findById(Long id)&#123; Member findMember = em.find(Member.class, id); return Optional.ofNullable(findMember); &#125; public List&lt;Member&gt; findAll()&#123; return em.createQuery(&quot;select m from Member m&quot;, Member.class) .getResultList(); &#125; public List&lt;Member&gt; findByUsername(String username)&#123; return em.createQuery(&quot;select m from Member m where m.username = :username&quot;, Member.class) .setParameter(&quot;username&quot;, username) .getResultList(); &#125;&#125; SpringBootTest@Transactionalclass MemberJpaRepositoryTest &#123; @Autowired EntityManager em; @Autowired MemberJpaRepository memberJpaRepository; @Test public void basicTest()&#123; Member member = new Member(&quot;member1&quot;, 10); memberJpaRepository.save(member); Member findMember = memberJpaRepository.findById(member.getId()).get(); assertThat(findMember).isEqualTo(member); List&lt;Member&gt; result = memberJpaRepository.findAll(); assertThat(result).containsExactly(member); List&lt;Member&gt; result2 = memberJpaRepository.findByUsername(&quot;member1&quot;); assertThat(result2).containsExactly(member); &#125;&#125; JPQL QueryDsl ë¡œ ë³€ê²½public List&lt;Member&gt; findAll()&#123; return em.createQuery(&quot;select m from Member m&quot;, Member.class) .getResultList();&#125;public List&lt;Member&gt; findAll_Querydsl()&#123; return queryFactory .selectFrom(member) .fetch();&#125;public List&lt;Member&gt; findByUsername(String username)&#123; return em.createQuery(&quot;select m from Member m where m.username = :username&quot;, Member.class) .setParameter(&quot;username&quot;, username) .getResultList();&#125;public List&lt;Member&gt; findByUsername_Querydsl(String username)&#123; return queryFactory .selectFrom(member) .where(member.username.eq(username)) .fetch();&#125; @Test public void basicQueryDsl()&#123; Member member = new Member(&quot;member1&quot;, 10); memberJpaRepository.save(member); Member findMember = memberJpaRepository.findById(member.getId()).get(); assertThat(findMember).isEqualTo(member); List&lt;Member&gt; result = memberJpaRepository.findAll_Querydsl(); assertThat(result).containsExactly(member); List&lt;Member&gt; result2 = memberJpaRepository.findByUsername_Querydsl(&quot;member1&quot;); assertThat(result2).containsExactly(member); &#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ","slug":"jpa/querydsl/querydsl-13","date":"2022-04-25T03:31:46.000Z","updated":"2024-11-28T13:59:28.576Z","comments":true,"path":"2022/04/25/jpa/querydsl/querydsl-13/","link":"","permalink":"https://ckck803.github.io/2022/04/25/jpa/querydsl/querydsl-13/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ - Builder ì‚¬ìš©public List&lt;MemberTeamDto&gt; searchByBuilder(MemberSearchCondition condition)&#123; BooleanBuilder builder = new BooleanBuilder(); if (StringUtils.hasText(condition.getUsername())) &#123; builder.and(member.username.eq(condition.getUsername())); &#125; if(StringUtils.hasText(condition.getTeamName()))&#123; builder.and(team.name.eq(condition.getUsername())); &#125; if(condition.getAgeGoe()!=null)&#123; builder.and(member.age.goe(condition.getAgeGoe())); &#125; if(condition.getAgeLoe()!=null)&#123; builder.and(member.age.loe(condition.getAgeLoe())); &#125; return queryFactory .select(new QMemberTeamDto( member.id.as(&quot;memberId&quot;), member.username, member.age, team.id.as(&quot;teamId&quot;), team.name.as(&quot;teamName&quot;) )) .from(member) .leftJoin(member.team, team) .where(builder) .fetch();&#125; @Testpublic void searchTest()&#123; Team teamA = new Team(&quot;teamA&quot;); Team teamB = new Team(&quot;teamB&quot;); em.persist(teamA); em.persist(teamB); Member member1 = new Member(&quot;member1&quot;, 10, teamA); Member member2 = new Member(&quot;member2&quot;, 20, teamA); Member member3 = new Member(&quot;member3&quot;, 30, teamB); Member member4 = new Member(&quot;member4&quot;, 40, teamB); em.persist(member1); em.persist(member2); em.persist(member3); em.persist(member4); MemberSearchCondition condition = new MemberSearchCondition(); condition.setAgeGoe(35); condition.setAgeLoe(40); condition.setTeamName(&quot;teamB&quot;); List&lt;MemberTeamDto&gt; result = memberJpaRepository.searchByBuilder(condition); assertThat(result).extracting(&quot;username&quot;).containsExactly(&quot;member4&quot;);&#125; /* select member1.id as memberId, member1.username, member1.age, team.id as teamId, team.name as teamName from Member member1 left join member1.team as team where team.name = ?1 and member1.age &gt;= ?2 and member1.age &lt;= ?3 */ select member0_.member_id as col_0_0_, member0_.username as col_1_0_, member0_.age as col_2_0_, team1_.team_id as col_3_0_, team1_.name as col_4_0_ from member member0_ left outer join team team1_ on member0_.team_id=team1_.team_id where team1_.name=? and member0_.age&gt;=? and member0_.age&lt;=? ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ - where ì ˆ íŒŒë¼ë¯¸í„° ì‚¬ìš©public List&lt;MemberTeamDto&gt; searchByBuilder(MemberSearchCondition condition)&#123; BooleanBuilder builder = new BooleanBuilder(); if (StringUtils.hasText(condition.getUsername())) &#123; builder.and(member.username.eq(condition.getUsername())); &#125; if(StringUtils.hasText(condition.getTeamName()))&#123; builder.and(team.name.eq(condition.getUsername())); &#125; if(condition.getAgeGoe()!=null)&#123; builder.and(member.age.goe(condition.getAgeGoe())); &#125; if(condition.getAgeLoe()!=null)&#123; builder.and(member.age.loe(condition.getAgeLoe())); &#125; return queryFactory .select(new QMemberTeamDto( member.id.as(&quot;memberId&quot;), member.username, member.age, team.id.as(&quot;teamId&quot;), team.name.as(&quot;teamName&quot;) )) .from(member) .leftJoin(member.team, team) .where(builder) .fetch();&#125; @Test public void searchTest()&#123; Team teamA = new Team(&quot;teamA&quot;); Team teamB = new Team(&quot;teamB&quot;); em.persist(teamA); em.persist(teamB); Member member1 = new Member(&quot;member1&quot;, 10, teamA); Member member2 = new Member(&quot;member2&quot;, 20, teamA); Member member3 = new Member(&quot;member3&quot;, 30, teamB); Member member4 = new Member(&quot;member4&quot;, 40, teamB); em.persist(member1); em.persist(member2); em.persist(member3); em.persist(member4); MemberSearchCondition condition = new MemberSearchCondition(); condition.setAgeGoe(35); condition.setAgeLoe(40); condition.setTeamName(&quot;teamB&quot;); List&lt;MemberTeamDto&gt; result = memberJpaRepository.searchByBuilder(condition); assertThat(result).extracting(&quot;username&quot;).containsExactly(&quot;member4&quot;); &#125;","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ - Builder ì‚¬ìš©public List&lt;MemberTeamDto&gt; searchByBuilder(MemberSearchCondition condition)&#123; BooleanBuilder builder = new BooleanBuilder(); if (StringUtils.hasText(condition.getUsername())) &#123; builder.and(member.username.eq(condition.getUsername())); &#125; if(StringUtils.hasText(condition.getTeamName()))&#123; builder.and(team.name.eq(condition.getUsername())); &#125; if(condition.getAgeGoe()!=null)&#123; builder.and(member.age.goe(condition.getAgeGoe())); &#125; if(condition.getAgeLoe()!=null)&#123; builder.and(member.age.loe(condition.getAgeLoe())); &#125; return queryFactory .select(new QMemberTeamDto( member.id.as(&quot;memberId&quot;), member.username, member.age, team.id.as(&quot;teamId&quot;), team.name.as(&quot;teamName&quot;) )) .from(member) .leftJoin(member.team, team) .where(builder) .fetch();&#125; @Testpublic void searchTest()&#123; Team teamA = new Team(&quot;teamA&quot;); Team teamB = new Team(&quot;teamB&quot;); em.persist(teamA); em.persist(teamB); Member member1 = new Member(&quot;member1&quot;, 10, teamA); Member member2 = new Member(&quot;member2&quot;, 20, teamA); Member member3 = new Member(&quot;member3&quot;, 30, teamB); Member member4 = new Member(&quot;member4&quot;, 40, teamB); em.persist(member1); em.persist(member2); em.persist(member3); em.persist(member4); MemberSearchCondition condition = new MemberSearchCondition(); condition.setAgeGoe(35); condition.setAgeLoe(40); condition.setTeamName(&quot;teamB&quot;); List&lt;MemberTeamDto&gt; result = memberJpaRepository.searchByBuilder(condition); assertThat(result).extracting(&quot;username&quot;).containsExactly(&quot;member4&quot;);&#125; /* select member1.id as memberId, member1.username, member1.age, team.id as teamId, team.name as teamName from Member member1 left join member1.team as team where team.name = ?1 and member1.age &gt;= ?2 and member1.age &lt;= ?3 */ select member0_.member_id as col_0_0_, member0_.username as col_1_0_, member0_.age as col_2_0_, team1_.team_id as col_3_0_, team1_.name as col_4_0_ from member member0_ left outer join team team1_ on member0_.team_id=team1_.team_id where team1_.name=? and member0_.age&gt;=? and member0_.age&lt;=? ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ - where ì ˆ íŒŒë¼ë¯¸í„° ì‚¬ìš©public List&lt;MemberTeamDto&gt; searchByBuilder(MemberSearchCondition condition)&#123; BooleanBuilder builder = new BooleanBuilder(); if (StringUtils.hasText(condition.getUsername())) &#123; builder.and(member.username.eq(condition.getUsername())); &#125; if(StringUtils.hasText(condition.getTeamName()))&#123; builder.and(team.name.eq(condition.getUsername())); &#125; if(condition.getAgeGoe()!=null)&#123; builder.and(member.age.goe(condition.getAgeGoe())); &#125; if(condition.getAgeLoe()!=null)&#123; builder.and(member.age.loe(condition.getAgeLoe())); &#125; return queryFactory .select(new QMemberTeamDto( member.id.as(&quot;memberId&quot;), member.username, member.age, team.id.as(&quot;teamId&quot;), team.name.as(&quot;teamName&quot;) )) .from(member) .leftJoin(member.team, team) .where(builder) .fetch();&#125; @Test public void searchTest()&#123; Team teamA = new Team(&quot;teamA&quot;); Team teamB = new Team(&quot;teamB&quot;); em.persist(teamA); em.persist(teamB); Member member1 = new Member(&quot;member1&quot;, 10, teamA); Member member2 = new Member(&quot;member2&quot;, 20, teamA); Member member3 = new Member(&quot;member3&quot;, 30, teamB); Member member4 = new Member(&quot;member4&quot;, 40, teamB); em.persist(member1); em.persist(member2); em.persist(member3); em.persist(member4); MemberSearchCondition condition = new MemberSearchCondition(); condition.setAgeGoe(35); condition.setAgeLoe(40); condition.setTeamName(&quot;teamB&quot;); List&lt;MemberTeamDto&gt; result = memberJpaRepository.searchByBuilder(condition); assertThat(result).extracting(&quot;username&quot;).containsExactly(&quot;member4&quot;); &#125; /* select member1.id as memberId, member1.username, member1.age, team.id as teamId, team.name as teamName from Member member1 left join member1.team as team where team.name = ?1 and member1.age &gt;= ?2 and member1.age &lt;= ?3 */ select member0_.member_id as col_0_0_, member0_.username as col_1_0_, member0_.age as col_2_0_, team1_.team_id as col_3_0_, team1_.name as col_4_0_ from member member0_ left outer join team team1_ on member0_.team_id=team1_.team_id where team1_.name=? and member0_.age&gt;=? and member0_.age&lt;=?","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚°","slug":"jpa/querydsl/querydsl-10-bulk","date":"2022-04-24T04:31:46.000Z","updated":"2024-11-28T13:59:29.007Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-10-bulk/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-10-bulk/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° Bulk ì—°ì‚°ì€ ì˜ì†ì„± Context ìƒíƒœë¥¼ ë¬´ì‹œ í•˜ê³  ì¿¼ë¦¬ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì˜ì†ì„± Context ì™€ DB ìƒíƒœê°€ ë‹¤ë¥´ê²Œ ëœë‹¤. UPDATE, DELETE ì™€ ê°™ì€ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ í•œë²ˆì— ì²˜ë¦¬í•˜ëŠ” Bulk ì—°ì‚°ì„ ì§„í–‰í•˜ê²Œ ë˜ë©´ JPA ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ëœ ì—”í‹°í‹°ë¥¼ ìš°íšŒí•˜ê³  ì§ì ‘ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ê¸° ë•Œë¬¸ì—, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ëœ ì—”í‹°í‹° ìƒíƒœì™€ DB ìƒíƒœê°€ ë‹¤ë¥´ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ Bulk ì—°ì‚°ì‹œì—ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ DB ìƒíƒœê°„ì˜ ë°ì´í„° ë™ê¸°í™”ì— ì£¼ì˜ë¥¼ í•´ì•¼ í•©ë‹ˆë‹¤. ìˆ˜ì •@Testpublic void bulkUpdate()&#123; long count = queryFactory .update(member) .set(member.username, &quot;ë¹„íšŒì›&quot;) .where(member.age.lt(28)) .execute();&#125; /* update Member member1 set member1.username = ?1 where member1.age &lt; ?2 */ update member set username=? where age&lt;? @Testpublic void bulkUpdate()&#123; long count = queryFactory .update(member) .set(member.username, &quot;ë¹„íšŒì›&quot;) .where(member.age.lt(28)) .execute(); List&lt;Member&gt; result = queryFactory .selectFrom(member) .fetch(); for (Member member1 : result) &#123; System.out.println(&quot;member1 = &quot; + member1); &#125;&#125;","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° Bulk ì—°ì‚°ì€ ì˜ì†ì„± Context ìƒíƒœë¥¼ ë¬´ì‹œ í•˜ê³  ì¿¼ë¦¬ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì˜ì†ì„± Context ì™€ DB ìƒíƒœê°€ ë‹¤ë¥´ê²Œ ëœë‹¤. UPDATE, DELETE ì™€ ê°™ì€ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ í•œë²ˆì— ì²˜ë¦¬í•˜ëŠ” Bulk ì—°ì‚°ì„ ì§„í–‰í•˜ê²Œ ë˜ë©´ JPA ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ëœ ì—”í‹°í‹°ë¥¼ ìš°íšŒí•˜ê³  ì§ì ‘ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ê¸° ë•Œë¬¸ì—, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ëœ ì—”í‹°í‹° ìƒíƒœì™€ DB ìƒíƒœê°€ ë‹¤ë¥´ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ Bulk ì—°ì‚°ì‹œì—ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ DB ìƒíƒœê°„ì˜ ë°ì´í„° ë™ê¸°í™”ì— ì£¼ì˜ë¥¼ í•´ì•¼ í•©ë‹ˆë‹¤. ìˆ˜ì •@Testpublic void bulkUpdate()&#123; long count = queryFactory .update(member) .set(member.username, &quot;ë¹„íšŒì›&quot;) .where(member.age.lt(28)) .execute();&#125; /* update Member member1 set member1.username = ?1 where member1.age &lt; ?2 */ update member set username=? where age&lt;? @Testpublic void bulkUpdate()&#123; long count = queryFactory .update(member) .set(member.username, &quot;ë¹„íšŒì›&quot;) .where(member.age.lt(28)) .execute(); List&lt;Member&gt; result = queryFactory .selectFrom(member) .fetch(); for (Member member1 : result) &#123; System.out.println(&quot;member1 = &quot; + member1); &#125;&#125; Bulk ì—°ì‚°ì€ ì˜ì†ì„± Context ìƒíƒœë¥¼ ë¬´ì‹œí•˜ê³  ì¿¼ë¦¬ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì˜ì†ì„± Context ì™€ DB ìƒíƒœê°€ ë‹¤ë¥´ê²Œ ëœë‹¤. member1 = Member(id=3, username=member1, age=10)member1 = Member(id=4, username=member2, age=20)member1 = Member(id=5, username=member3, age=30)member1 = Member(id=6, username=member4, age=40) ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ DB ë™ê¸°í™” ì§„í–‰Bulk ì—°ì‚° í›„ì—ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ DB ì— ì €ì¥ëœ ë°ì´í„°ê°„ì˜ ì°¨ì´ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ë°ì´í„° ë¶ˆì¼ì¹˜ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë™ê¸°í™” ì‘ì—… ì´ í•„ìš”í•©ë‹ˆë‹¤. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ DB ì™€ì˜ ë™ê¸°í™”ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ì¼ë‹¨ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ê²½ ì‚¬í•­ì„ Database ì— ë°˜ì˜í•œ í›„ ê¸°ì¡´ì— ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ëœ Entity ì •ë³´ë“¤ì„ ë¹„ìš°ê³  Database ë¡œë¶€í„° ìƒˆë¡­ê²Œ Entity ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒìœ¼ë¡œ ë™ê¸°í™”ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ì„ , ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ê²½ ë‚´ìš©ì„ DBì— ë°˜ì˜í•˜ê¸° ìœ„í•´ EntityManager ì˜ flush ë©”ì†Œë“œë¥¼ í†µí•´ ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì— ì €ì¥ëœ ì¿¼ë¦¬ë¥¼ DB ë¡œ ë³´ë‚´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ê²½ ë‚´ìš©ì„ DBì— ë°˜ì˜í•©ë‹ˆë‹¤. ê·¸ ë‹¤ìŒ, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ DB ë¡œë¶€í„° Entity ì •ë³´ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ clear ë©”ì†Œë“œë¥¼ í†µí•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¹„ì›Œì£¼ë„ë¡ í•œë‹¤. @Testpublic void bulkUpdate()&#123; long count = queryFactory .update(member) .set(member.username, &quot;ë¹„íšŒì›&quot;) .where(member.age.lt(28)) .execute(); // ì“°ê¸° ì§€ì—° ì €ì¥ì†Œì— ì €ì¥ëœ SQL ì„ DB ì— ë°˜ì˜í•œë‹¤. em.flush(); // ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¹„ìš´ë‹¤. em.clear(); List&lt;Member&gt; result = queryFactory .selectFrom(member) .fetch(); for (Member member1 : result) &#123; System.out.println(&quot;member1 = &quot; + member1); &#125;&#125; ì‚­ì œ@Testpublic void bulkDelete()&#123; long count = queryFactory .delete(member) .where(member.age.gt(18)) .execute();&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸°","slug":"jpa/querydsl/querydsl-11","date":"2022-04-24T04:31:46.000Z","updated":"2024-11-28T13:59:29.188Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-11/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-11/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° Post not found: jpa/querydsl/querydsl-10 QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° SQL Function í˜¸ì¶œí•˜ê¸°@Testpublic void sqlFunction()&#123; List&lt;String&gt; result = queryFactory .select( Expressions.stringTemplate(&quot;function(&#x27;replace&#x27;, &#123;0&#125;, &#123;1&#125;, &#123;2&#125;)&quot;, member.username, &quot;member&quot;, &quot;M&quot;) ).from(member) .fetch(); for (String s : result) &#123; System.out.println(&quot;s = &quot; + s); &#125;&#125; @Testpublic void sqlFunction2()&#123; queryFactory .select(member.username) .from(member) .where(member.username.eq(Expressions.stringTemplate(&quot;function(&#x27;lower&#x27;, &#123;0&#125;)&quot;, member.username)));&#125; registerColumnType( Types.BOOLEAN, &quot;boolean&quot; );registerColumnType( Types.BIGINT, &quot;bigint&quot; );registerColumnType( Types.BINARY, &quot;binary&quot; );registerColumnType( Types.BIT, &quot;boolean&quot; );registerColumnType( Types.CHAR, &quot;char($l)&quot; );registerColumnType( Types.DATE, &quot;date&quot; );registerColumnType( Types.DECIMAL, &quot;decimal($p,$s)&quot; );registerColumnType( Types.NUMERIC, buildId &gt;= 201 ? &quot;numeric($p,$s)&quot; : &quot;decimal($p,$s)&quot; );registerColumnType( Types.DOUBLE, &quot;double&quot; );registerColumnType( Types.FLOAT, &quot;float&quot; );registerColumnType( Types.INTEGER, &quot;integer&quot; );registerColumnType( Types.LONGVARBINARY, &quot;longvarbinary&quot; );// H2 does define &quot;longvarchar&quot;, but it is a simple alias to &quot;varchar&quot;registerColumnType( Types.LONGVARCHAR, String.format( &quot;varchar(%d)&quot;, Integer.MAX_VALUE ) );registerColumnType( Types.REAL, &quot;real&quot; );registerColumnType( Types.SMALLINT, &quot;smallint&quot; );registerColumnType( Types.TINYINT, &quot;tinyint&quot; );registerColumnType( Types.TIME, &quot;time&quot; );registerColumnType( Types.TIMESTAMP, &quot;timestamp&quot; );registerColumnType( Types.VARCHAR, &quot;varchar($l)&quot; );registerColumnType( Types.VARBINARY, buildId &gt;= 201 ? &quot;varbinary($l)&quot; : &quot;binary($l)&quot; );registerColumnType( Types.BLOB, &quot;blob&quot; );registerColumnType( Types.CLOB, &quot;clob&quot; );if ( isVersion2 ) &#123; registerColumnType( Types.LONGVARCHAR, &quot;character varying&quot; ); registerColumnType( Types.BINARY, &quot;binary($l)&quot; ); registerFunction( &quot;str&quot;, new SQLFunctionTemplate( StandardBasicTypes.STRING, &quot;cast(?1 as character varying)&quot;) );&#125;// Aggregations ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~registerFunction( &quot;avg&quot;, new AvgWithArgumentCastFunction( &quot;double&quot; ) );// select topic, syntax from information_schema.help// where section like &#x27;Function%&#x27; order by section, topic//// see also -&gt; http://www.h2database.com/html/functions.html// Numeric Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~registerFunction( &quot;acos&quot;, new StandardSQLFunction( &quot;acos&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;asin&quot;, new StandardSQLFunction( &quot;asin&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;atan&quot;, new StandardSQLFunction( &quot;atan&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;atan2&quot;, new StandardSQLFunction( &quot;atan2&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;bitand&quot;, new StandardSQLFunction( &quot;bitand&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;bitor&quot;, new StandardSQLFunction( &quot;bitor&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;bitxor&quot;, new StandardSQLFunction( &quot;bitxor&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;ceiling&quot;, new StandardSQLFunction( &quot;ceiling&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;cos&quot;, new StandardSQLFunction( &quot;cos&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;compress&quot;, new StandardSQLFunction( &quot;compress&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;cot&quot;, new StandardSQLFunction( &quot;cot&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;decrypt&quot;, new StandardSQLFunction( &quot;decrypt&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;degrees&quot;, new StandardSQLFunction( &quot;degrees&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;encrypt&quot;, new StandardSQLFunction( &quot;encrypt&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;exp&quot;, new StandardSQLFunction( &quot;exp&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;expand&quot;, new StandardSQLFunction( &quot;compress&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;floor&quot;, new StandardSQLFunction( &quot;floor&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;hash&quot;, new StandardSQLFunction( &quot;hash&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;log&quot;, new StandardSQLFunction( &quot;log&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;log10&quot;, new StandardSQLFunction( &quot;log10&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;pi&quot;, new NoArgSQLFunction( &quot;pi&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;power&quot;, new StandardSQLFunction( &quot;power&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;radians&quot;, new StandardSQLFunction( &quot;radians&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;rand&quot;, new NoArgSQLFunction( &quot;rand&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;round&quot;, new StandardSQLFunction( &quot;round&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;roundmagic&quot;, new StandardSQLFunction( &quot;roundmagic&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;sign&quot;, new StandardSQLFunction( &quot;sign&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;sin&quot;, new StandardSQLFunction( &quot;sin&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;tan&quot;, new StandardSQLFunction( &quot;tan&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;truncate&quot;, new StandardSQLFunction( &quot;truncate&quot;, StandardBasicTypes.DOUBLE ) );// String Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~registerFunction( &quot;ascii&quot;, new StandardSQLFunction( &quot;ascii&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;char&quot;, new StandardSQLFunction( &quot;char&quot;, StandardBasicTypes.CHARACTER ) );registerFunction( &quot;concat&quot;, new VarArgsSQLFunction( StandardBasicTypes.STRING, &quot;(&quot;, &quot;||&quot;, &quot;)&quot; ) );registerFunction( &quot;difference&quot;, new StandardSQLFunction( &quot;difference&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;hextoraw&quot;, new StandardSQLFunction( &quot;hextoraw&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;insert&quot;, new StandardSQLFunction( &quot;lower&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;left&quot;, new StandardSQLFunction( &quot;left&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;lcase&quot;, new StandardSQLFunction( &quot;lcase&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;ltrim&quot;, new StandardSQLFunction( &quot;ltrim&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;octet_length&quot;, new StandardSQLFunction( &quot;octet_length&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;position&quot;, new StandardSQLFunction( &quot;position&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;rawtohex&quot;, new StandardSQLFunction( &quot;rawtohex&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;repeat&quot;, new StandardSQLFunction( &quot;repeat&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;replace&quot;, new StandardSQLFunction( &quot;replace&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;right&quot;, new StandardSQLFunction( &quot;right&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;rtrim&quot;, new StandardSQLFunction( &quot;rtrim&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;soundex&quot;, new StandardSQLFunction( &quot;soundex&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;space&quot;, new StandardSQLFunction( &quot;space&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;stringencode&quot;, new StandardSQLFunction( &quot;stringencode&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;stringdecode&quot;, new StandardSQLFunction( &quot;stringdecode&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;stringtoutf8&quot;, new StandardSQLFunction( &quot;stringtoutf8&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;ucase&quot;, new StandardSQLFunction( &quot;ucase&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;utf8tostring&quot;, new StandardSQLFunction( &quot;utf8tostring&quot;, StandardBasicTypes.STRING ) );// Time and Date Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~registerFunction( &quot;curdate&quot;, new NoArgSQLFunction( &quot;curdate&quot;, StandardBasicTypes.DATE ) );registerFunction( &quot;curtime&quot;, new NoArgSQLFunction( &quot;curtime&quot;, StandardBasicTypes.TIME ) );registerFunction( &quot;curtimestamp&quot;, new NoArgSQLFunction( &quot;curtimestamp&quot;, StandardBasicTypes.TIME ) );registerFunction( &quot;current_date&quot;, new NoArgSQLFunction( &quot;current_date&quot;, StandardBasicTypes.DATE ) );// H2 made a nasty breaking change that changed the type of// - current_timestamp to timestamp with time zone// - current_time to time with time zone// and also refuses to implicitly convert the typeregisterFunction( &quot;current_time&quot;, new NoArgSQLFunction( buildId &gt;= 200 ? &quot;localtime&quot; : &quot;current_time&quot;, StandardBasicTypes.TIME ) );registerFunction( &quot;current_timestamp&quot;, new NoArgSQLFunction( buildId &gt;= 200 ? &quot;localtimestamp&quot; : &quot;current_timestamp&quot;, StandardBasicTypes.TIMESTAMP ) );registerFunction( &quot;datediff&quot;, new StandardSQLFunction( &quot;datediff&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;dayname&quot;, new StandardSQLFunction( &quot;dayname&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;dayofmonth&quot;, new StandardSQLFunction( &quot;dayofmonth&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;dayofweek&quot;, new StandardSQLFunction( &quot;dayofweek&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;dayofyear&quot;, new StandardSQLFunction( &quot;dayofyear&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;monthname&quot;, new StandardSQLFunction( &quot;monthname&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;now&quot;, new NoArgSQLFunction( &quot;now&quot;, StandardBasicTypes.TIMESTAMP ) );registerFunction( &quot;quarter&quot;, new StandardSQLFunction( &quot;quarter&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;week&quot;, new StandardSQLFunction( &quot;week&quot;, StandardBasicTypes.INTEGER ) );// System Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~registerFunction( &quot;database&quot;, new NoArgSQLFunction( &quot;database&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;user&quot;, new NoArgSQLFunction( &quot;user&quot;, StandardBasicTypes.STRING ) );getDefaultProperties().setProperty( AvailableSettings.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE );// http://code.google.com/p/h2database/issues/detail?id=235getDefaultProperties().setProperty( AvailableSettings.NON_CONTEXTUAL_LOB_CREATION, &quot;true&quot; );","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° Post not found: jpa/querydsl/querydsl-10 QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° SQL Function í˜¸ì¶œí•˜ê¸°@Testpublic void sqlFunction()&#123; List&lt;String&gt; result = queryFactory .select( Expressions.stringTemplate(&quot;function(&#x27;replace&#x27;, &#123;0&#125;, &#123;1&#125;, &#123;2&#125;)&quot;, member.username, &quot;member&quot;, &quot;M&quot;) ).from(member) .fetch(); for (String s : result) &#123; System.out.println(&quot;s = &quot; + s); &#125;&#125; @Testpublic void sqlFunction2()&#123; queryFactory .select(member.username) .from(member) .where(member.username.eq(Expressions.stringTemplate(&quot;function(&#x27;lower&#x27;, &#123;0&#125;)&quot;, member.username)));&#125; registerColumnType( Types.BOOLEAN, &quot;boolean&quot; );registerColumnType( Types.BIGINT, &quot;bigint&quot; );registerColumnType( Types.BINARY, &quot;binary&quot; );registerColumnType( Types.BIT, &quot;boolean&quot; );registerColumnType( Types.CHAR, &quot;char($l)&quot; );registerColumnType( Types.DATE, &quot;date&quot; );registerColumnType( Types.DECIMAL, &quot;decimal($p,$s)&quot; );registerColumnType( Types.NUMERIC, buildId &gt;= 201 ? &quot;numeric($p,$s)&quot; : &quot;decimal($p,$s)&quot; );registerColumnType( Types.DOUBLE, &quot;double&quot; );registerColumnType( Types.FLOAT, &quot;float&quot; );registerColumnType( Types.INTEGER, &quot;integer&quot; );registerColumnType( Types.LONGVARBINARY, &quot;longvarbinary&quot; );// H2 does define &quot;longvarchar&quot;, but it is a simple alias to &quot;varchar&quot;registerColumnType( Types.LONGVARCHAR, String.format( &quot;varchar(%d)&quot;, Integer.MAX_VALUE ) );registerColumnType( Types.REAL, &quot;real&quot; );registerColumnType( Types.SMALLINT, &quot;smallint&quot; );registerColumnType( Types.TINYINT, &quot;tinyint&quot; );registerColumnType( Types.TIME, &quot;time&quot; );registerColumnType( Types.TIMESTAMP, &quot;timestamp&quot; );registerColumnType( Types.VARCHAR, &quot;varchar($l)&quot; );registerColumnType( Types.VARBINARY, buildId &gt;= 201 ? &quot;varbinary($l)&quot; : &quot;binary($l)&quot; );registerColumnType( Types.BLOB, &quot;blob&quot; );registerColumnType( Types.CLOB, &quot;clob&quot; );if ( isVersion2 ) &#123; registerColumnType( Types.LONGVARCHAR, &quot;character varying&quot; ); registerColumnType( Types.BINARY, &quot;binary($l)&quot; ); registerFunction( &quot;str&quot;, new SQLFunctionTemplate( StandardBasicTypes.STRING, &quot;cast(?1 as character varying)&quot;) );&#125;// Aggregations ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~registerFunction( &quot;avg&quot;, new AvgWithArgumentCastFunction( &quot;double&quot; ) );// select topic, syntax from information_schema.help// where section like &#x27;Function%&#x27; order by section, topic//// see also -&gt; http://www.h2database.com/html/functions.html// Numeric Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~registerFunction( &quot;acos&quot;, new StandardSQLFunction( &quot;acos&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;asin&quot;, new StandardSQLFunction( &quot;asin&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;atan&quot;, new StandardSQLFunction( &quot;atan&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;atan2&quot;, new StandardSQLFunction( &quot;atan2&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;bitand&quot;, new StandardSQLFunction( &quot;bitand&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;bitor&quot;, new StandardSQLFunction( &quot;bitor&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;bitxor&quot;, new StandardSQLFunction( &quot;bitxor&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;ceiling&quot;, new StandardSQLFunction( &quot;ceiling&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;cos&quot;, new StandardSQLFunction( &quot;cos&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;compress&quot;, new StandardSQLFunction( &quot;compress&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;cot&quot;, new StandardSQLFunction( &quot;cot&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;decrypt&quot;, new StandardSQLFunction( &quot;decrypt&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;degrees&quot;, new StandardSQLFunction( &quot;degrees&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;encrypt&quot;, new StandardSQLFunction( &quot;encrypt&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;exp&quot;, new StandardSQLFunction( &quot;exp&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;expand&quot;, new StandardSQLFunction( &quot;compress&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;floor&quot;, new StandardSQLFunction( &quot;floor&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;hash&quot;, new StandardSQLFunction( &quot;hash&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;log&quot;, new StandardSQLFunction( &quot;log&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;log10&quot;, new StandardSQLFunction( &quot;log10&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;pi&quot;, new NoArgSQLFunction( &quot;pi&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;power&quot;, new StandardSQLFunction( &quot;power&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;radians&quot;, new StandardSQLFunction( &quot;radians&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;rand&quot;, new NoArgSQLFunction( &quot;rand&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;round&quot;, new StandardSQLFunction( &quot;round&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;roundmagic&quot;, new StandardSQLFunction( &quot;roundmagic&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;sign&quot;, new StandardSQLFunction( &quot;sign&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;sin&quot;, new StandardSQLFunction( &quot;sin&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;tan&quot;, new StandardSQLFunction( &quot;tan&quot;, StandardBasicTypes.DOUBLE ) );registerFunction( &quot;truncate&quot;, new StandardSQLFunction( &quot;truncate&quot;, StandardBasicTypes.DOUBLE ) );// String Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~registerFunction( &quot;ascii&quot;, new StandardSQLFunction( &quot;ascii&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;char&quot;, new StandardSQLFunction( &quot;char&quot;, StandardBasicTypes.CHARACTER ) );registerFunction( &quot;concat&quot;, new VarArgsSQLFunction( StandardBasicTypes.STRING, &quot;(&quot;, &quot;||&quot;, &quot;)&quot; ) );registerFunction( &quot;difference&quot;, new StandardSQLFunction( &quot;difference&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;hextoraw&quot;, new StandardSQLFunction( &quot;hextoraw&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;insert&quot;, new StandardSQLFunction( &quot;lower&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;left&quot;, new StandardSQLFunction( &quot;left&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;lcase&quot;, new StandardSQLFunction( &quot;lcase&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;ltrim&quot;, new StandardSQLFunction( &quot;ltrim&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;octet_length&quot;, new StandardSQLFunction( &quot;octet_length&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;position&quot;, new StandardSQLFunction( &quot;position&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;rawtohex&quot;, new StandardSQLFunction( &quot;rawtohex&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;repeat&quot;, new StandardSQLFunction( &quot;repeat&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;replace&quot;, new StandardSQLFunction( &quot;replace&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;right&quot;, new StandardSQLFunction( &quot;right&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;rtrim&quot;, new StandardSQLFunction( &quot;rtrim&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;soundex&quot;, new StandardSQLFunction( &quot;soundex&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;space&quot;, new StandardSQLFunction( &quot;space&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;stringencode&quot;, new StandardSQLFunction( &quot;stringencode&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;stringdecode&quot;, new StandardSQLFunction( &quot;stringdecode&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;stringtoutf8&quot;, new StandardSQLFunction( &quot;stringtoutf8&quot;, StandardBasicTypes.BINARY ) );registerFunction( &quot;ucase&quot;, new StandardSQLFunction( &quot;ucase&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;utf8tostring&quot;, new StandardSQLFunction( &quot;utf8tostring&quot;, StandardBasicTypes.STRING ) );// Time and Date Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~registerFunction( &quot;curdate&quot;, new NoArgSQLFunction( &quot;curdate&quot;, StandardBasicTypes.DATE ) );registerFunction( &quot;curtime&quot;, new NoArgSQLFunction( &quot;curtime&quot;, StandardBasicTypes.TIME ) );registerFunction( &quot;curtimestamp&quot;, new NoArgSQLFunction( &quot;curtimestamp&quot;, StandardBasicTypes.TIME ) );registerFunction( &quot;current_date&quot;, new NoArgSQLFunction( &quot;current_date&quot;, StandardBasicTypes.DATE ) );// H2 made a nasty breaking change that changed the type of// - current_timestamp to timestamp with time zone// - current_time to time with time zone// and also refuses to implicitly convert the typeregisterFunction( &quot;current_time&quot;, new NoArgSQLFunction( buildId &gt;= 200 ? &quot;localtime&quot; : &quot;current_time&quot;, StandardBasicTypes.TIME ) );registerFunction( &quot;current_timestamp&quot;, new NoArgSQLFunction( buildId &gt;= 200 ? &quot;localtimestamp&quot; : &quot;current_timestamp&quot;, StandardBasicTypes.TIMESTAMP ) );registerFunction( &quot;datediff&quot;, new StandardSQLFunction( &quot;datediff&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;dayname&quot;, new StandardSQLFunction( &quot;dayname&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;dayofmonth&quot;, new StandardSQLFunction( &quot;dayofmonth&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;dayofweek&quot;, new StandardSQLFunction( &quot;dayofweek&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;dayofyear&quot;, new StandardSQLFunction( &quot;dayofyear&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;monthname&quot;, new StandardSQLFunction( &quot;monthname&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;now&quot;, new NoArgSQLFunction( &quot;now&quot;, StandardBasicTypes.TIMESTAMP ) );registerFunction( &quot;quarter&quot;, new StandardSQLFunction( &quot;quarter&quot;, StandardBasicTypes.INTEGER ) );registerFunction( &quot;week&quot;, new StandardSQLFunction( &quot;week&quot;, StandardBasicTypes.INTEGER ) );// System Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~registerFunction( &quot;database&quot;, new NoArgSQLFunction( &quot;database&quot;, StandardBasicTypes.STRING ) );registerFunction( &quot;user&quot;, new NoArgSQLFunction( &quot;user&quot;, StandardBasicTypes.STRING ) );getDefaultProperties().setProperty( AvailableSettings.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE );// http://code.google.com/p/h2database/issues/detail?id=235getDefaultProperties().setProperty( AvailableSettings.NON_CONTEXTUAL_LOB_CREATION, &quot;true&quot; );","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜","slug":"jpa/querydsl/querydsl-08-projection","date":"2022-04-24T03:31:46.000Z","updated":"2024-11-28T13:59:28.349Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-08-projection/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-08-projection/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ í”„ë¡œì ì…˜(Projection) ì€ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ë°˜í™˜í•  í•„ë“œë¥¼ ì§€ì •í•˜ëŠ” ê²ƒ í”„ë¡œì ì…˜ : select ëŒ€ìƒ ì§€ì • í”„ë¡œì ì…˜ ëŒ€ìƒì´ í•˜ë‚˜ë©´ íƒ€ì…ì„ ëª…í™•í•˜ê²Œ ì§€ì •í•  ìˆ˜ ìˆë‹¤. í”„ë¡œì ì…˜ ëŒ€ìƒì´ ë‘˜ ì´ìƒì´ë©´ íŠœí”Œ ì´ë‚˜ DTO ë¡œ ì¡°íšŒí•œë‹¤. List&lt;String&gt; result = queryFactory .select(member.username.concat(&quot;_&quot;).concat(member.age.stringValue())) .from(member) .where(member.username.eq(&quot;member1&quot;)) .fetch(); íŠœí”Œ ì¡°íšŒ@Testpublic void tupleProjection()&#123; List&lt;Tuple&gt; result = queryFactory .select(member.username, member.age) .from(member) .fetch(); for (Tuple tuple : result)&#123; String username = tuple.get(member.username); Integer age = tuple.get(member.age); System.out.println(&quot;username = &quot; + username); System.out.println(&quot;age = &quot; + age); &#125;&#125;","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ í”„ë¡œì ì…˜(Projection) ì€ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ë°˜í™˜í•  í•„ë“œë¥¼ ì§€ì •í•˜ëŠ” ê²ƒ í”„ë¡œì ì…˜ : select ëŒ€ìƒ ì§€ì • í”„ë¡œì ì…˜ ëŒ€ìƒì´ í•˜ë‚˜ë©´ íƒ€ì…ì„ ëª…í™•í•˜ê²Œ ì§€ì •í•  ìˆ˜ ìˆë‹¤. í”„ë¡œì ì…˜ ëŒ€ìƒì´ ë‘˜ ì´ìƒì´ë©´ íŠœí”Œ ì´ë‚˜ DTO ë¡œ ì¡°íšŒí•œë‹¤. List&lt;String&gt; result = queryFactory .select(member.username.concat(&quot;_&quot;).concat(member.age.stringValue())) .from(member) .where(member.username.eq(&quot;member1&quot;)) .fetch(); íŠœí”Œ ì¡°íšŒ@Testpublic void tupleProjection()&#123; List&lt;Tuple&gt; result = queryFactory .select(member.username, member.age) .from(member) .fetch(); for (Tuple tuple : result)&#123; String username = tuple.get(member.username); Integer age = tuple.get(member.age); System.out.println(&quot;username = &quot; + username); System.out.println(&quot;age = &quot; + age); &#125;&#125; /* select member1.username, member1.age from Member member1 */ select member0_.username as col_0_0_, member0_.age as col_1_0_ from member member0_ DTO ë¥¼ ì´ìš©í•œ ê²°ê³¼ ë°˜í™˜ Projections ë¥¼ ì‚¬ìš©í•˜ë©´ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ DTO ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤. Projections ì„ ì´ìš©í•œ DTO ë°˜í™˜ ë°©ì‹ì€ 3ê°€ì§€ ë°©ë²•ì„ ì§€ì›í•œë‹¤. Setter ë¥¼ ì´ìš©í•œ ë°©ì‹ Field ì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ë°©ì‹ ìƒì„±ìë¥¼ ì´ìš©í•œ ë°©ì‹ Setter ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•setter ë¥¼ ì´ìš©í•œ ë°©ì‹ì€ Projections.bean ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. @Testpublic void findDtoBySetter()&#123; List&lt;MemberDto&gt; result = queryFactory .select(Projections.bean(MemberDto.class, member.username, member.age)) .from(member) .fetch(); for (MemberDto memberDto : result) &#123; System.out.println(&quot;memberDto = &quot; + memberDto); &#125;&#125; í•„ë“œ ì§ì ‘ ì ‘ê·¼field ë¥¼ ì´ìš©í•œ ë°©ì‹ì€ Projections.fields ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. @Testpublic void findDtoByField()&#123; List&lt;MemberDto&gt; result = queryFactory .select(Projections.fields(MemberDto.class, member.username, member.age)) .from(member) .fetch(); for (MemberDto memberDto : result) &#123; System.out.println(&quot;memberDto = &quot; + memberDto); &#125;&#125; ìƒì„±ì ì‚¬ìš©ìƒì„±ìë¥¼ ì´ìš©í•œ ë°©ì‹ì€ Projections.constructor ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. @Testpublic void findDtoByConstructor()&#123; List&lt;MemberDto&gt; result = queryFactory .select(Projections.constructor(MemberDto.class, member.username, member.age)) .from(member) .fetch(); for (MemberDto memberDto : result) &#123; System.out.println(&quot;memberDto = &quot; + memberDto); &#125;&#125; DTO ì™€ Entity ì˜ Attribute ì˜ alias ê°€ ì„œë¡œ ë‹¤ë¥¼ ê²½ìš°@Testpublic void findUserDto()&#123; List&lt;UserDto&gt; result = queryFactory .select(Projections.fields(UserDto.class, member.username.as(&quot;name&quot;), member.age)) .from(member) .fetch(); for (UserDto userDto : result) &#123; System.out.println(&quot;userDto = &quot; + userDto); &#125;&#125; ì„œë¸Œ ì¿¼ë¦¬ì— alias ì‚¬ìš©ExpressionUtils.as @Testpublic void findUserDto()&#123; QMember memberSub = new QMember(&quot;memberSub&quot;); List&lt;UserDto&gt; result = queryFactory .select(Projections.fields(UserDto.class , member.username.as(&quot;name&quot;) , ExpressionUtils.as(JPAExpressions .select(memberSub.age.max()) .from(memberSub), &quot;age&quot;))) .from(member) .fetch(); for (UserDto userDto : result) &#123; System.out.println(&quot;userDto = &quot; + userDto); &#125;&#125; @Testpublic void findDtoByConstructor()&#123; List&lt;MemberDto&gt; result = queryFactory .select(Projections.constructor(MemberDto.class, member.username, member.age)) .from(member) .fetch(); for (MemberDto memberDto : result) &#123; System.out.println(&quot;memberDto = &quot; + memberDto); &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - ë™ì  ì¿¼ë¦¬","slug":"jpa/querydsl/querydsl-09-dynamic","date":"2022-04-24T03:31:46.000Z","updated":"2024-11-28T13:59:28.650Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-09-dynamic/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-09-dynamic/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ë™ì  ì¿¼ë¦¬ë¥¼ í•´ê²°í•˜ëŠ” ë‘ê°€ì§€ ë°©ì‹ BooleanBuilder Where ë‹¤ì¤‘ íŒŒë¼ë¯¸í„° ì‚¬ìš© ë™ì  ì¿¼ë¦¬ - BooleanBuilderBooleanBuilder ë¥¼ ì´ìš©í•´ ë™ì  ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. @Testpublic void dynamicQuery_BooleanBuilder()&#123; String usernameParam = &quot;member1&quot;; Integer ageParam = 10; List&lt;Member&gt; result = searchMember1(usernameParam, ageParam); assertThat(result.size()).isEqualTo(1);&#125;private List&lt;Member&gt; searchMember1(String usernameCond, Integer ageCond)&#123; BooleanBuilder builder = new BooleanBuilder(); if(usernameCond != null)&#123; builder.and(member.username.eq(usernameCond)); &#125; if(ageCond != null)&#123; builder.and(member.age.eq(ageCond)); &#125; return queryFactory .selectFrom(member) .where(builder) .fetch();&#125; /* select member1 from Member member1 where member1.username = ?1 and member1.age = ?2 */ select member0_.member_id as member_i1_1_, member0_.age as age2_1_, member0_.team_id as team_id4_1_, member0_.username as username3_1_ from member member0_ where member0_.username=? and member0_.age=? ë™ì  ì¿¼ë¦¬ - Where ë‹¤ì¤‘ íŒŒë¼ë¯¸í„° ì‚¬ìš©","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ë™ì  ì¿¼ë¦¬ë¥¼ í•´ê²°í•˜ëŠ” ë‘ê°€ì§€ ë°©ì‹ BooleanBuilder Where ë‹¤ì¤‘ íŒŒë¼ë¯¸í„° ì‚¬ìš© ë™ì  ì¿¼ë¦¬ - BooleanBuilderBooleanBuilder ë¥¼ ì´ìš©í•´ ë™ì  ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. @Testpublic void dynamicQuery_BooleanBuilder()&#123; String usernameParam = &quot;member1&quot;; Integer ageParam = 10; List&lt;Member&gt; result = searchMember1(usernameParam, ageParam); assertThat(result.size()).isEqualTo(1);&#125;private List&lt;Member&gt; searchMember1(String usernameCond, Integer ageCond)&#123; BooleanBuilder builder = new BooleanBuilder(); if(usernameCond != null)&#123; builder.and(member.username.eq(usernameCond)); &#125; if(ageCond != null)&#123; builder.and(member.age.eq(ageCond)); &#125; return queryFactory .selectFrom(member) .where(builder) .fetch();&#125; /* select member1 from Member member1 where member1.username = ?1 and member1.age = ?2 */ select member0_.member_id as member_i1_1_, member0_.age as age2_1_, member0_.team_id as team_id4_1_, member0_.username as username3_1_ from member member0_ where member0_.username=? and member0_.age=? ë™ì  ì¿¼ë¦¬ - Where ë‹¤ì¤‘ íŒŒë¼ë¯¸í„° ì‚¬ìš© ë©”ì„œë“œë¥¼ ë‹¤ë¥¸ ì¿¼ë¦¬ì—ì„œë„ ì¬ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤. ì¿¼ë¦¬ ìì²´ì˜ ê°€ë…ì„±ì´ ë†’ì•„ì§„ë‹¤. @Testpublic void dynamicQuery_WhereParam() &#123; String usernameParam = &quot;member1&quot;; Integer ageParam = 10; List&lt;Member&gt; result = searchMember2(usernameParam, ageParam); assertThat(result.size()).isEqualTo(1);&#125;private List&lt;Member&gt; searchMember2(String usernameCond, Integer ageCond) &#123; return queryFactory .selectFrom(member) // where ì— null ê°’ì´ ì „ë‹¬ ë˜ë©´ ì¡°ê±´ì„ ë¬´ì‹œí•œë‹¤. .where(usernameEq(usernameCond), ageEq(ageCond)) .fetch();&#125;private Predicate usernameEq(String usernameCond) &#123; // ì „ë‹¬ë°›ì€ usernameCond íŒŒë¼ë¯¸í„°ê°€ ì—†ì„ ê²½ìš° null ì„ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. if (usernameCond == null) &#123; return null; &#125; return member.username.eq(usernameCond);&#125;private Predicate ageEq(Integer ageCond) &#123; if (ageCond == null) &#123; return null; &#125; return member.age.eq(ageCond);&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - ì¡°ì¸","slug":"jpa/querydsl/querydsl-07","date":"2022-04-24T01:31:46.000Z","updated":"2024-11-28T13:59:28.787Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-07/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-07/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ê¸°ë³¸ ì¡°ì¸ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ì¡°ì¸ ëŒ€ìƒì„ ì§€ì •í•˜ê³ , ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë³„ì¹­ìœ¼ë¡œ ì‚¬ìš©í•  Q íƒ€ì…ì„ ì§€ì •í•˜ë©´ ëœë‹¤. @Testpublic void join()&#123; List&lt;Member&gt; result = queryFactory.selectFrom(member) .join(member.team, team) .where(team.name.eq(&quot;teamA&quot;)) .fetch(); assertThat(result) .extracting(&quot;username&quot;) .containsExactly(&quot;member1&quot;, &quot;member2&quot;);&#125; /* select member1 from Member member1 inner join member1.team as team where team.name = ?1 */ select member0_.member_id as member_i1_1_, member0_.age as age2_1_, member0_.team_id as team_id4_1_, member0_.username as username3_1_ from member member0_ inner join team team1_ on member0_.team_id=team1_.team_id where team1_.name=? Seta Join From ì ˆì— ì—¬ëŸ¬ ì—”í‹°í‹°ë¥¼ ì„ íƒí•´ì„œ ì„¸íƒ€ ì¡°ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. ì™¸ë¶€ ì¡°ì¸ ë¶ˆê°€ëŠ¥ ì¡°ì¸ on ì„ ì‚¬ìš©í•˜ë©´ ì™¸ë¶€ ì¡°ì¸ ê°€ëŠ¥ @Testpublic void setaJoin()&#123; em.persist(new Member(&quot;teamA&quot;)); em.persist(new Member(&quot;teamB&quot;)); List&lt;Member&gt; result = queryFactory.select(member) .from(member, team) .where(member.username.eq(team.name)) .fetch(); assertThat(result) .extracting(&quot;username&quot;) .containsExactly(&quot;teamA&quot;, &quot;teamB&quot;);&#125;","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ê¸°ë³¸ ì¡°ì¸ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ì¡°ì¸ ëŒ€ìƒì„ ì§€ì •í•˜ê³ , ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë³„ì¹­ìœ¼ë¡œ ì‚¬ìš©í•  Q íƒ€ì…ì„ ì§€ì •í•˜ë©´ ëœë‹¤. @Testpublic void join()&#123; List&lt;Member&gt; result = queryFactory.selectFrom(member) .join(member.team, team) .where(team.name.eq(&quot;teamA&quot;)) .fetch(); assertThat(result) .extracting(&quot;username&quot;) .containsExactly(&quot;member1&quot;, &quot;member2&quot;);&#125; /* select member1 from Member member1 inner join member1.team as team where team.name = ?1 */ select member0_.member_id as member_i1_1_, member0_.age as age2_1_, member0_.team_id as team_id4_1_, member0_.username as username3_1_ from member member0_ inner join team team1_ on member0_.team_id=team1_.team_id where team1_.name=? Seta Join From ì ˆì— ì—¬ëŸ¬ ì—”í‹°í‹°ë¥¼ ì„ íƒí•´ì„œ ì„¸íƒ€ ì¡°ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. ì™¸ë¶€ ì¡°ì¸ ë¶ˆê°€ëŠ¥ ì¡°ì¸ on ì„ ì‚¬ìš©í•˜ë©´ ì™¸ë¶€ ì¡°ì¸ ê°€ëŠ¥ @Testpublic void setaJoin()&#123; em.persist(new Member(&quot;teamA&quot;)); em.persist(new Member(&quot;teamB&quot;)); List&lt;Member&gt; result = queryFactory.select(member) .from(member, team) .where(member.username.eq(team.name)) .fetch(); assertThat(result) .extracting(&quot;username&quot;) .containsExactly(&quot;teamA&quot;, &quot;teamB&quot;);&#125; /* select member1 from Member member1, Team team where member1.username = team.name */ select member0_.member_id as member_i1_1_, member0_.age as age2_1_, member0_.team_id as team_id4_1_, member0_.username as username3_1_ from member member0_ cross join team team1_ where member0_.username=team1_.name ONì ˆì„ ì´ìš©í•œ JOIN on ì ˆì„ í™œìš©í•œ ì¡°ì¸ ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§ ì—°ê´€ê´€ê³„ ì—†ëŠ” ì—”í‹°í‹° ì™¸ë¶€ ì¡°ì¸ @Testpublic void join_on_filtering() &#123; List&lt;Tuple&gt; result = queryFactory .select(member, team) .from(member) .leftJoin(member.team, team).on(team.name.eq(&quot;teamA&quot;)) .fetch(); for (Tuple tuple : result) &#123; System.out.println(&quot;tuple = &quot; + tuple); &#125;&#125; /* select member1, team from Member member1 left join member1.team as team with team.name = ?1 */ select member0_.member_id as member_i1_1_0_, team1_.team_id as team_id1_2_1_, member0_.age as age2_1_0_, member0_.team_id as team_id4_1_0_, member0_.username as username3_1_0_, team1_.name as name2_2_1_ from member member0_ left outer join team team1_ on member0_.team_id=team1_.team_id and ( team1_.name=? ) ì—°ê´€ê´€ê³„ê°€ ì—†ëŠ” ì—”í‹°í‹° ì™¸ë¶€ ì¡°ì¸@Testpublic void join_on_no_relation()&#123; em.persist(new Member(&quot;teamA&quot;)); em.persist(new Member(&quot;teamB&quot;)); em.persist(new Member(&quot;teamB&quot;)); List&lt;Tuple&gt; fetch = queryFactory .select(member, team) .from(member) .leftJoin(team).on(member.username.eq(team.name)) .fetch(); for (Tuple tuple : fetch) &#123; System.out.println(&quot;tuple = &quot; + tuple); &#125;&#125; /* select member1, team from Member member1 left join Team team with member1.username = team.name */ select member0_.member_id as member_i1_1_0_, team1_.team_id as team_id1_2_1_, member0_.age as age2_1_0_, member0_.team_id as team_id4_1_0_, member0_.username as username3_1_0_, team1_.name as name2_2_1_ from member member0_ left outer join team team1_ on ( member0_.username=team1_.name )","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - ì§‘ê³„","slug":"jpa/querydsl/querydsl-06","date":"2022-04-24T00:31:46.000Z","updated":"2024-11-28T13:59:28.204Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-06/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-06/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ì§‘ê³„ í•¨ìˆ˜@Testpublic void aggregation()&#123; List&lt;Tuple&gt; result = queryFactory.select( member.count(), member.age.sum(), member.age.avg(), member.age.max(), member.age.min() ) .from(member) .fetch(); Tuple tuple = result.get(0); assertThat(tuple.get(member.count())).isEqualTo(4); assertThat(tuple.get(member.age.sum())).isEqualTo(100); assertThat(tuple.get(member.age.avg())).isEqualTo(25); assertThat(tuple.get(member.age.max())).isEqualTo(40); assertThat(tuple.get(member.age.min())).isEqualTo(10);&#125; Group by@Testpublic void group() &#123; List&lt;Tuple&gt; result = queryFactory.select(team.name, member.age.avg()) .from(member) .join(member.team, team) .groupBy(team.name) .fetch(); Tuple teamA = result.get(0); Tuple teamB = result.get(1); assertThat(teamA.get(team.name)).isEqualTo(&quot;teamA&quot;); assertThat(teamA.get(member.age.avg())).isEqualTo(15); assertThat(teamB.get(team.name)).isEqualTo(&quot;teamB&quot;); assertThat(teamB.get(member.age.avg())).isEqualTo(35);&#125;","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° ì§‘ê³„ í•¨ìˆ˜@Testpublic void aggregation()&#123; List&lt;Tuple&gt; result = queryFactory.select( member.count(), member.age.sum(), member.age.avg(), member.age.max(), member.age.min() ) .from(member) .fetch(); Tuple tuple = result.get(0); assertThat(tuple.get(member.count())).isEqualTo(4); assertThat(tuple.get(member.age.sum())).isEqualTo(100); assertThat(tuple.get(member.age.avg())).isEqualTo(25); assertThat(tuple.get(member.age.max())).isEqualTo(40); assertThat(tuple.get(member.age.min())).isEqualTo(10);&#125; Group by@Testpublic void group() &#123; List&lt;Tuple&gt; result = queryFactory.select(team.name, member.age.avg()) .from(member) .join(member.team, team) .groupBy(team.name) .fetch(); Tuple teamA = result.get(0); Tuple teamB = result.get(1); assertThat(teamA.get(team.name)).isEqualTo(&quot;teamA&quot;); assertThat(teamA.get(member.age.avg())).isEqualTo(15); assertThat(teamB.get(team.name)).isEqualTo(&quot;teamB&quot;); assertThat(teamB.get(member.age.avg())).isEqualTo(35);&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - ê²°ê³¼ ì¡°íšŒ","slug":"jpa/querydsl/querydsl-05","date":"2022-04-23T23:31:46.000Z","updated":"2024-11-28T13:59:29.259Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-05/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-05/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° Querydsl ê²°ê³¼ ì¡°íšŒ fetch : ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ, ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜ fetchOne : ë‹¨ê±´ ì¡°íšŒ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ : null ê²°ê³¼ê°€ ë‘˜ ì´ìƒì´ë©´ NonUniqueResultException fetchFirst : limit(1).fetchOne() ì™€ ì˜ë¯¸ê°€ ë™ì¼í•˜ë‹¤. fetchResults : í˜ì´ì§• ì •ë³´ í¬í•¨, total count ì¿¼ë¦¬ ì¶”ê°€ ì‹¤í–‰ fetchCount : count ì¿¼ë¦¬ë¡œ ë³€ê²½í•´ì„œ count ìˆ˜ ì¡°íšŒ @Testpublic void resultFetch()&#123;List&lt;Member&gt; fetch = queryFactory.selectFrom(member) .fetch();Member fetchOne = queryFactory.selectFrom(QMember.member) .fetchOne();Member fetchFirst = queryFactory.selectFrom(QMember.member) .fetchFirst();QueryResults&lt;Member&gt; results = queryFactory.selectFrom(member) .fetchResults();results.getTotal();List&lt;Member&gt; content = results.getResults();// Deprecatedlong total = queryFactory .selectFrom(member) .fetchCount();// Count ì¿¼ë¦¬ ì‘ì„±long totalCount = queryFactory .select(member.count()) .from(member) .fetchOne(); fetchResults : í˜ì´ì§• ì¿¼ë¦¬ê°€ ë³µì¡í•´ì§€ë©´ content ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ì™€ total count ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ê°€ ë‹¤ë¥¼ ë•Œê°€ ìˆì–´ì„œ í•´ë‹¹ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤. ì •ë ¬@Testpublic void sort()&#123; em.persist(new Member(null, 100)); em.persist(new Member(&quot;member5&quot;, 100)); em.persist(new Member(&quot;member6&quot;, 100)); List&lt;Member&gt; result = queryFactory .selectFrom(member) .where(member.age.eq(100)) .orderBy(member.age.desc(), member.username.asc().nullsLast()) .fetch(); Member member5 = result.get(0); Member member6 = result.get(1); Member memberNull = result.get(2); assertThat(member5.getUsername()).isEqualTo(&quot;member5&quot;); assertThat(member6.getUsername()).isEqualTo(&quot;member6&quot;); assertThat(memberNull.getUsername()).isNull();&#125; í˜ì´ì§•","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° Querydsl ê²°ê³¼ ì¡°íšŒ fetch : ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ, ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜ fetchOne : ë‹¨ê±´ ì¡°íšŒ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ : null ê²°ê³¼ê°€ ë‘˜ ì´ìƒì´ë©´ NonUniqueResultException fetchFirst : limit(1).fetchOne() ì™€ ì˜ë¯¸ê°€ ë™ì¼í•˜ë‹¤. fetchResults : í˜ì´ì§• ì •ë³´ í¬í•¨, total count ì¿¼ë¦¬ ì¶”ê°€ ì‹¤í–‰ fetchCount : count ì¿¼ë¦¬ë¡œ ë³€ê²½í•´ì„œ count ìˆ˜ ì¡°íšŒ @Testpublic void resultFetch()&#123;List&lt;Member&gt; fetch = queryFactory.selectFrom(member) .fetch();Member fetchOne = queryFactory.selectFrom(QMember.member) .fetchOne();Member fetchFirst = queryFactory.selectFrom(QMember.member) .fetchFirst();QueryResults&lt;Member&gt; results = queryFactory.selectFrom(member) .fetchResults();results.getTotal();List&lt;Member&gt; content = results.getResults();// Deprecatedlong total = queryFactory .selectFrom(member) .fetchCount();// Count ì¿¼ë¦¬ ì‘ì„±long totalCount = queryFactory .select(member.count()) .from(member) .fetchOne(); fetchResults : í˜ì´ì§• ì¿¼ë¦¬ê°€ ë³µì¡í•´ì§€ë©´ content ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ì™€ total count ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ê°€ ë‹¤ë¥¼ ë•Œê°€ ìˆì–´ì„œ í•´ë‹¹ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤. ì •ë ¬@Testpublic void sort()&#123; em.persist(new Member(null, 100)); em.persist(new Member(&quot;member5&quot;, 100)); em.persist(new Member(&quot;member6&quot;, 100)); List&lt;Member&gt; result = queryFactory .selectFrom(member) .where(member.age.eq(100)) .orderBy(member.age.desc(), member.username.asc().nullsLast()) .fetch(); Member member5 = result.get(0); Member member6 = result.get(1); Member memberNull = result.get(2); assertThat(member5.getUsername()).isEqualTo(&quot;member5&quot;); assertThat(member6.getUsername()).isEqualTo(&quot;member6&quot;); assertThat(memberNull.getUsername()).isNull();&#125; í˜ì´ì§• offset ì€ ì‹œì‘ ìœ„ì¹˜ë¥¼ ê°€ë¥´í‚¨ë‹¤ (0 ë¶€í„° ì‹œì‘í•œë‹¤.) limit ëŠ” ëª‡ê°œë¥¼ ê°€ì ¸ì˜¬ì§€ë¥¼ ì„¤ì •í•œë‹¤. @Testpublic void paging1()&#123; List&lt;Member&gt; result = queryFactory .selectFrom(member) .orderBy(member.username.desc()) .offset(1) .limit(2) .fetch(); assertThat(result.size()).isEqualTo(2);&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬","slug":"jpa/querydsl/querydsl-04","date":"2022-04-23T22:31:46.000Z","updated":"2024-11-28T13:59:28.935Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-04/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-04/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° @Testpublic void startQuerydsl()&#123; QMember qMember = new QMember(&quot;m&quot;); Member findMember = queryFactory .select(qMember) .from(qMember) .where(qMember.username.eq(&quot;member1&quot;)) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; @Testpublic void search()&#123; Member findMember = queryFactory .selectFrom(member) .where(member.username.eq(&quot;member1&quot;).and(member.age.eq(10))) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; and ë¥¼ í’€ì–´ë‚´ëŠ” ë°©ì‹ - and ë©”ì†Œë“œ ì‚¬ìš© @Testpublic void search()&#123; Member findMember = queryFactory .selectFrom(member) .where( member.username.eq(&quot;member1&quot;).and(member.age.eq(10)) ) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; and ë¥¼ í’€ì–´ë‚´ëŠ” ë°©ì‹ - íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸°ëŠ” ë°©ë²• @Testpublic void search()&#123; Member findMember = queryFactory .selectFrom(member) .where( member.username.eq(&quot;member1&quot;), member.age.eq(10) ) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; Querydsl ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²€ìƒ‰ ì¡°ê±´","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° @Testpublic void startQuerydsl()&#123; QMember qMember = new QMember(&quot;m&quot;); Member findMember = queryFactory .select(qMember) .from(qMember) .where(qMember.username.eq(&quot;member1&quot;)) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; @Testpublic void search()&#123; Member findMember = queryFactory .selectFrom(member) .where(member.username.eq(&quot;member1&quot;).and(member.age.eq(10))) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; and ë¥¼ í’€ì–´ë‚´ëŠ” ë°©ì‹ - and ë©”ì†Œë“œ ì‚¬ìš© @Testpublic void search()&#123; Member findMember = queryFactory .selectFrom(member) .where( member.username.eq(&quot;member1&quot;).and(member.age.eq(10)) ) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; and ë¥¼ í’€ì–´ë‚´ëŠ” ë°©ì‹ - íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸°ëŠ” ë°©ë²• @Testpublic void search()&#123; Member findMember = queryFactory .selectFrom(member) .where( member.username.eq(&quot;member1&quot;), member.age.eq(10) ) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; Querydsl ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²€ìƒ‰ ì¡°ê±´JPQL ì´ ì œê³µí•˜ëŠ” ëª¨ë“  ê²€ìƒ‰ ì¡°ê±´ member.username.eq(&quot;member1&quot;) // username = &#x27;member1&#x27;member.username.ne(&quot;member1&quot;) //username != &#x27;member1&#x27;member.username.eq(&quot;member1&quot;).not() // username != &#x27;member1&#x27;member.username.isNotNull() //ì´ë¦„ì´ is not nullmember.age.in(10, 20) // age in (10,20)member.age.notIn(10, 20) // age not in (10, 20)member.age.between(10,30) //between 10, 30member.age.goe(30) // age &gt;= 30member.age.gt(30) // age &gt; 30member.age.loe(30) // age &lt;= 30member.age.lt(30) // age &lt; 30member.username.like(&quot;member%&quot;) //like ê²€ìƒ‰ member.username.contains(&quot;member&quot;) // like â€˜%member%â€™ ê²€ìƒ‰ member.username.startsWith(&quot;member&quot;) //like â€˜member%â€™ ê²€ìƒ‰","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - Q-Type í™œìš©","slug":"jpa/querydsl/querydsl-03-qtype","date":"2022-04-23T21:31:46.000Z","updated":"2024-11-28T13:59:29.116Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-03-qtype/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-03-qtype/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° Q í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” 2ê°€ì§€ ë°©ë²• ìƒì„±ìê¸° parameter ë¥¼ ë„˜ê¸°ê²Œ ë˜ë©´ í•´ë‹¹ ê°’ìœ¼ë¡œ alias ê°€ ê±¸ë¦¬ê²Œ ëœë‹¤. // ë³„ì¹­ ì§ì ‘ ì§€ì • QMember qMember = new QMember(&quot;m&quot;); // ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©QMember qMember = QMember.member; use_sql_comments ì˜µì…˜ì„ true ë¡œ ì„¤ì •í•˜ê²Œ ë˜ë©´ jpql comment ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. Configspring: datasource:# url: jdbc:h2:~/querydsl url: jdbc:h2:tcp://localhost/~/querydsl username: sa password: driver-class-name: org.h2.Driver jpa: hibernate: ddl-auto: create-drop properties: hibernate:# show_sql: true format_sql: true use_sql_comments: truelogging.level: org.hibernate.SQL: debug # org.hibernate.type: trace /* select m from Member m where m.username = :username */ select member0_.member_id as member_i1_1_, member0_.age as age2_1_, member0_.team_id as team_id4_1_, member0_.username as username3_1_ from member member0_ where member0_.username=?","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° Q í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” 2ê°€ì§€ ë°©ë²• ìƒì„±ìê¸° parameter ë¥¼ ë„˜ê¸°ê²Œ ë˜ë©´ í•´ë‹¹ ê°’ìœ¼ë¡œ alias ê°€ ê±¸ë¦¬ê²Œ ëœë‹¤. // ë³„ì¹­ ì§ì ‘ ì§€ì • QMember qMember = new QMember(&quot;m&quot;); // ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©QMember qMember = QMember.member; use_sql_comments ì˜µì…˜ì„ true ë¡œ ì„¤ì •í•˜ê²Œ ë˜ë©´ jpql comment ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. Configspring: datasource:# url: jdbc:h2:~/querydsl url: jdbc:h2:tcp://localhost/~/querydsl username: sa password: driver-class-name: org.h2.Driver jpa: hibernate: ddl-auto: create-drop properties: hibernate:# show_sql: true format_sql: true use_sql_comments: truelogging.level: org.hibernate.SQL: debug # org.hibernate.type: trace /* select m from Member m where m.username = :username */ select member0_.member_id as member_i1_1_, member0_.age as age2_1_, member0_.team_id as team_id4_1_, member0_.username as username3_1_ from member member0_ where member0_.username=?","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL - JPA JPQL vs JPA QueryDSL","slug":"jpa/querydsl/querydsl-02-jpql-querydsl","date":"2022-04-23T20:31:46.000Z","updated":"2024-11-28T13:59:28.505Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-02-jpql-querydsl/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-02-jpql-querydsl/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° JPA JPQL JPQL ì€ EntityManager ê°ì²´ë‚´ creatQuery ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•œ í›„ ì‹¤í–‰í•œë‹¤. @Testpublic void startJPQL()&#123; // member1 ì„ ì°¾ì•„ë¼ Member findByJPQL = em.createQuery(&quot;select m from Member m where m.username = :username&quot;, Member.class) .setParameter(&quot;username&quot;, &quot;member1&quot;) .getSingleResult(); assertThat(findByJPQL.getUsername()).isEqualTo(&quot;member1&quot;);&#125; JPA QueryDSL JPA QueryDSL ì€ JPA Entity ì™€ ê´€ë ¨í•´ ì •ì  íƒ€ì…ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ì‘ì„± í•˜ê²Œ í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ JPA QueryDSL ì—ì„œëŠ” JPAQueryFactory ê°ì²´ë¥¼ ì´ìš©í•´ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. JPAQueryFactory ê°ì²´ë¥¼ í†µí•´ ìƒì„±ëœ ì¿¼ë¦¬ê°€ JPA Entity ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•˜ê³  ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” EntityMagager ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, JPA ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê³  Entity ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ EntityMagager ê°ì²´ë¥¼ JPAQueryFactory ê°ì²´ ìƒì„±ì‹œ ì „ë‹¬í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° JPA JPQL JPQL ì€ EntityManager ê°ì²´ë‚´ creatQuery ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•œ í›„ ì‹¤í–‰í•œë‹¤. @Testpublic void startJPQL()&#123; // member1 ì„ ì°¾ì•„ë¼ Member findByJPQL = em.createQuery(&quot;select m from Member m where m.username = :username&quot;, Member.class) .setParameter(&quot;username&quot;, &quot;member1&quot;) .getSingleResult(); assertThat(findByJPQL.getUsername()).isEqualTo(&quot;member1&quot;);&#125; JPA QueryDSL JPA QueryDSL ì€ JPA Entity ì™€ ê´€ë ¨í•´ ì •ì  íƒ€ì…ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ì‘ì„± í•˜ê²Œ í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ JPA QueryDSL ì—ì„œëŠ” JPAQueryFactory ê°ì²´ë¥¼ ì´ìš©í•´ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. JPAQueryFactory ê°ì²´ë¥¼ í†µí•´ ìƒì„±ëœ ì¿¼ë¦¬ê°€ JPA Entity ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•˜ê³  ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” EntityMagager ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, JPA ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê³  Entity ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ EntityMagager ê°ì²´ë¥¼ JPAQueryFactory ê°ì²´ ìƒì„±ì‹œ ì „ë‹¬í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. @Testpublic void startQuerydsl()&#123; // JPAQueryFactory ê°ì²´ ìƒì„±ì‹œ EntityManager ë¥¼ ì¸ìë¡œ ë„˜ê²¨ì¤˜ Entity ì— ëŒ€í•œ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. JPAQueryFactory queryFactory = new JPAQueryFactory(entityManager); QMember qMember = new QMember(&quot;m&quot;); Member findMember = queryFactory .select(qMember) .from(qMember) .where(qMember.username.eq(&quot;member1&quot;)) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; ê²°ê³¼select member0_.member_id as member_i1_1_, member0_.age as age2_1_, member0_.team_id as team_id4_1_, member0_.username as username3_1_ from member member0_ where member0_.username=? QueryDSL íŠ¹ì§• Querydsl ì€ Parameter binding ì‹œ PreparedStatement ì˜ Parameter binding ì„ ì‚¬ìš©í•´ SQL Injection ê³µê²©ìœ¼ë¡œë¶€í„° ì•ˆì „í•˜ë‹¤. JPQL ì€ ëŸ°íƒ€ì„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë‚˜ QueryDsl ì€ ì»´íŒŒì¼ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"JPA JPQL vs Querydsl","slug":"jpa/querydsl/querydsl-02","date":"2022-04-23T20:31:46.000Z","updated":"2024-11-28T13:59:28.279Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-02/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-02/","excerpt":"ëª©ì°¨ Post not found: jpa/querydsl/querydsl-15 Post not found: jpa/querydsl/querydsl-14 QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° Post not found: jpa/querydsl/querydsl-10 Post not found: jpa/querydsl/querydsl-09 Post not found: jpa/querydsl/querydsl-08 QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ Post not found: jpa/querydsl/querydsl-03 JPA JPQL vs Querydsl QueryDSL ì‹œì‘í•˜ê¸° JPQL@Testpublic void startJPQL()&#123; // member1 ì„ ì°¾ì•„ë¼ Member findByJPQL = em.createQuery(&quot;select m from Member m where m.username = :username&quot;, Member.class) .setParameter(&quot;username&quot;, &quot;member1&quot;) .getSingleResult(); assertThat(findByJPQL.getUsername()).isEqualTo(&quot;member1&quot;);&#125; Querydsl@Testpublic void startQuerydsl()&#123; JPAQueryFactory queryFactory = new JPAQueryFactory(em); QMember qMember = new QMember(&quot;m&quot;); Member findMember = queryFactory .select(qMember) .from(qMember) .where(qMember.username.eq(&quot;member1&quot;)) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; Querydsl ì€ ê¸°ë³¸ì ìœ¼ë¡œ parameter binding ì‹œ preparedStatement ì˜ parameter binding ì„ ì‚¬ìš©í•´ SQL injection ê³µê²©ìœ¼ë¡œë¶€í„° ì•ˆì „í•˜ë‹¤. select member0_.member_id as member_i1_1_, member0_.age as age2_1_, member0_.team_id as team_id4_1_, member0_.username as username3_1_ from member member0_ where member0_.username=? jpql ì€ ëŸ°íƒ€ì„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë‚˜ querydsl ì€ ì»´íŒŒì¼ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.","text":"ëª©ì°¨ Post not found: jpa/querydsl/querydsl-15 Post not found: jpa/querydsl/querydsl-14 QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° Post not found: jpa/querydsl/querydsl-10 Post not found: jpa/querydsl/querydsl-09 Post not found: jpa/querydsl/querydsl-08 QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ Post not found: jpa/querydsl/querydsl-03 JPA JPQL vs Querydsl QueryDSL ì‹œì‘í•˜ê¸° JPQL@Testpublic void startJPQL()&#123; // member1 ì„ ì°¾ì•„ë¼ Member findByJPQL = em.createQuery(&quot;select m from Member m where m.username = :username&quot;, Member.class) .setParameter(&quot;username&quot;, &quot;member1&quot;) .getSingleResult(); assertThat(findByJPQL.getUsername()).isEqualTo(&quot;member1&quot;);&#125; Querydsl@Testpublic void startQuerydsl()&#123; JPAQueryFactory queryFactory = new JPAQueryFactory(em); QMember qMember = new QMember(&quot;m&quot;); Member findMember = queryFactory .select(qMember) .from(qMember) .where(qMember.username.eq(&quot;member1&quot;)) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&quot;member1&quot;);&#125; Querydsl ì€ ê¸°ë³¸ì ìœ¼ë¡œ parameter binding ì‹œ preparedStatement ì˜ parameter binding ì„ ì‚¬ìš©í•´ SQL injection ê³µê²©ìœ¼ë¡œë¶€í„° ì•ˆì „í•˜ë‹¤. select member0_.member_id as member_i1_1_, member0_.age as age2_1_, member0_.team_id as team_id4_1_, member0_.username as username3_1_ from member member0_ where member0_.username=? jpql ì€ ëŸ°íƒ€ì„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë‚˜ querydsl ì€ ì»´íŒŒì¼ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"QueryDSL ì‹œì‘í•˜ê¸°","slug":"jpa/querydsl/querydsl-01","date":"2022-04-23T19:31:46.000Z","updated":"2024-11-28T13:59:29.330Z","comments":true,"path":"2022/04/24/jpa/querydsl/querydsl-01/","link":"","permalink":"https://ckck803.github.io/2022/04/24/jpa/querydsl/querydsl-01/","excerpt":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° QueryDSL ì´ë€? QueryDSL ì€ Query Domain Specific Language ì˜ ì•½ìë¡œ ì¿¼ë¦¬ë¥¼ ì½”ë“œë¡œ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ì¿¼ë¦¬ ë¹Œë” í”„ë ˆì„ì›Œí¬ QueryDSLì€ ìë°”ì½”ë“œë¡œ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìœ¼ë©°, JPA, JDO, Hibernate, MongoDB, SQL, Lucene ë“± ë‹¤ì–‘í•œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. QueryDSLì€ ì½”ë“œ ìë™ ì™„ì„± ê¸°ëŠ¥ì„ ì œê³µí•˜ë¯€ë¡œ ì˜¤íƒ€ë‚˜ ì˜ëª»ëœ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ëŠ” ì¼ì„ ë°©ì§€í•˜ë©°, ëŸ°íƒ€ì„ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Plugin ì¶”ê°€plugins &#123; id &#x27;org.springframework.boot&#x27; version â€˜2.2.2.RELEASE&#x27; id &#x27;io.spring.dependency-management&#x27; version &#x27;1.0.8.RELEASE&#x27; //querydsl ì¶”ê°€ id &quot;com.ewerk.gradle.plugins.querydsl&quot; version &quot;1.0.10&quot; id &#x27;java&#x27;&#125; ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€//querydsl ì¶”ê°€implementation &#x27;com.querydsl:querydsl-jpa&#x27;","text":"ëª©ì°¨ QueryDSL - QueryDsl í˜ì´ì§• ì‚¬ìš©í•˜ê¸° QueryDSL - ì‚¬ìš©ì ì •ì˜ Repository QueryDSL - ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ QueryDSL - ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl QueryDSL - SQL Function í˜¸ì¶œí•˜ê¸° QueryDSL - ìˆ˜ì •, ì‚­ì œ ë²Œí¬ ì—°ì‚° QueryDSL - ë™ì  ì¿¼ë¦¬ QueryDSL - í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ QueryDSL - ì¡°ì¸ QueryDSL - ì§‘ê³„ QueryDSL - ê²°ê³¼ ì¡°íšŒ QueryDSL - ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ QueryDSL - Q-Type í™œìš© QueryDSL - JPA JPQL vs JPA QueryDSL QueryDSL ì‹œì‘í•˜ê¸° QueryDSL ì´ë€? QueryDSL ì€ Query Domain Specific Language ì˜ ì•½ìë¡œ ì¿¼ë¦¬ë¥¼ ì½”ë“œë¡œ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ì¿¼ë¦¬ ë¹Œë” í”„ë ˆì„ì›Œí¬ QueryDSLì€ ìë°”ì½”ë“œë¡œ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìœ¼ë©°, JPA, JDO, Hibernate, MongoDB, SQL, Lucene ë“± ë‹¤ì–‘í•œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. QueryDSLì€ ì½”ë“œ ìë™ ì™„ì„± ê¸°ëŠ¥ì„ ì œê³µí•˜ë¯€ë¡œ ì˜¤íƒ€ë‚˜ ì˜ëª»ëœ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ëŠ” ì¼ì„ ë°©ì§€í•˜ë©°, ëŸ°íƒ€ì„ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Plugin ì¶”ê°€plugins &#123; id &#x27;org.springframework.boot&#x27; version â€˜2.2.2.RELEASE&#x27; id &#x27;io.spring.dependency-management&#x27; version &#x27;1.0.8.RELEASE&#x27; //querydsl ì¶”ê°€ id &quot;com.ewerk.gradle.plugins.querydsl&quot; version &quot;1.0.10&quot; id &#x27;java&#x27;&#125; ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€//querydsl ì¶”ê°€implementation &#x27;com.querydsl:querydsl-jpa&#x27; //querydsl ì¶”ê°€ ì‹œì‘def querydslDir = &quot;$buildDir/generated/querydsl&quot;querydsl &#123; jpa = true querydslSourcesDir = querydslDir&#125;sourceSets &#123; main.java.srcDir querydslDir&#125;configurations &#123; querydsl.extendsFrom compileClasspath&#125;compileQuerydsl &#123; options.annotationProcessorPath = configurations.querydsl&#125;//querydsl ì¶”ê°€ ë Unable to load class â€˜com.mysema.codegen.model.Typeâ€™. ì—ëŸ¬ìœ„ Error ëŠ” Gradle 5.0 ì´ìƒì—ì„œ ë°œìƒí•˜ëŠ” Error ë‹¤. í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì£¼ë©´ ëœë‹¤. buildscript &#123; ext &#123; queryDslVersion = &quot;5.0.0&quot; &#125;&#125;plugins &#123; id &#x27;org.springframework.boot&#x27; version &#x27;2.6.2&#x27; id &#x27;io.spring.dependency-management&#x27; version &#x27;1.0.11.RELEASE&#x27; //querydsl ì¶”ê°€ id &quot;com.ewerk.gradle.plugins.querydsl&quot; version &quot;1.0.10&quot; id &#x27;java&#x27;&#125;group = &#x27;com.example&#x27;version = &#x27;0.0.1-SNAPSHOT&#x27;sourceCompatibility = &#x27;11&#x27;configurations &#123; compileOnly &#123; extendsFrom annotationProcessor &#125;&#125;repositories &#123; mavenCentral()&#125;dependencies &#123; implementation &#x27;org.springframework.boot:spring-boot-starter-data-jpa&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-web&#x27; //querydsl ì¶”ê°€ implementation &quot;com.querydsl:querydsl-jpa:$&#123;queryDslVersion&#125;&quot; implementation &quot;com.querydsl:querydsl-apt:$&#123;queryDslVersion&#125;&quot; compileOnly &#x27;org.projectlombok:lombok&#x27; runtimeOnly &#x27;com.h2database:h2&#x27; annotationProcessor &#x27;org.projectlombok:lombok&#x27; //í…ŒìŠ¤íŠ¸ì—ì„œ lombok ì‚¬ìš© testCompileOnly &#x27;org.projectlombok:lombok&#x27; testAnnotationProcessor &#x27;org.projectlombok:lombok&#x27; testImplementation(&#x27;org.springframework.boot:spring-boot-starter-test&#x27;) &#123; exclude group: &#x27;org.junit.vintage&#x27;, module: &#x27;junit-vintage-engine&#x27; &#125; &#125;test &#123; useJUnitPlatform()&#125;//querydsl ì¶”ê°€ ì‹œì‘def querydslDir = &quot;$buildDir/generated/querydsl&quot;querydsl &#123; jpa = true querydslSourcesDir = querydslDir&#125;sourceSets &#123; main.java.srcDir querydslDir&#125;configurations &#123; querydsl.extendsFrom compileClasspath&#125;compileQuerydsl &#123; options.annotationProcessorPath = configurations.querydsl&#125;//querydsl ì¶”ê°€ ë Q-Type ìƒì„±@Entity@Getter@Setterpublic class Hello &#123; @Id @GeneratedValue private Long id;&#125; Entity ë¥¼ ì‘ì„±í•œ í›„ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì¹˜ë©´ build/generated/querydsl í´ë”ì— QHello íŒŒì¼ì˜ Q-Type ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë˜í•œ, Q-Type ì€ ì»´íŒŒì¼ ì‹œì ì— ìë™ì ìœ¼ë¡œ ìƒì„±ì´ ëœë‹¤. .&#x2F;gradlew clean compileQuerydsl @SpringBootTest@Transactionalclass QuerydslApplicationTests &#123; @Autowired EntityManager em; @Test void contextLoads() &#123; Hello hello = new Hello(); em.persist(hello); JPAQueryFactory query = new JPAQueryFactory(em); QHello qHello = new QHello(&quot;h&quot;); Hello result = query .selectFrom(qHello) .fetchOne(); assertThat(result).isEqualTo(hello); assertThat(result.getId()).isEqualTo(hello.getId()); &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´","slug":"jpa/jpa-programming/mapping/jpa-orphanRemoval","date":"2022-04-21T02:31:46.000Z","updated":"2024-11-28T13:59:27.164Z","comments":true,"path":"2022/04/21/jpa/jpa-programming/mapping/jpa-orphanRemoval/","link":"","permalink":"https://ckck803.github.io/2022/04/21/jpa/jpa-programming/mapping/jpa-orphanRemoval/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ê³ ì•„ ê°ì²´ë€? ë¶€ëª¨ ì—”í‹°í‹°ì™€ ì—°ê´€ê´€ê³„ê°€ ëŠì–´ì§„ ìì‹ ì—”í‹°í‹° ê³ ì•„ ê°ì²´ ì œê±° ë¶€ëª¨ ì—”í‹°í‹°ì™€ ì—°ê´€ê´€ê³„ ê°€ ëŠì–´ì§„ ìì‹ ì—”í‹°í‹°ë¥¼ ìë™ìœ¼ë¡œ ì œê±° @OneToOne, @OneToMany ë§Œ ê°€ëŠ¥í•˜ë‹¤. orphanRemoval &#x3D; true @Entity@Getter@Setterpublic class Parent &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private String name; @OneToMany(mappedBy = &quot;parent&quot;, cascade = CascadeType.ALL, orphanRemoval = true) private List&lt;Child&gt; childList = new ArrayList&lt;&gt;(); public void addChild(Child child)&#123; childList.add(child); child.setParent(this); &#125;&#125; public class JpaMain &#123; public static void main(String[] ars) &#123; EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = entityManagerFactory.createEntityManager(); EntityTransaction transaction = em.getTransaction(); transaction.begin(); try &#123; Child child1 = new Child(); Child child2 = new Child(); Parent parent = new Parent(); parent.addChild(child1); parent.addChild(child2); em.persist(parent); em.flush(); em.clear(); Parent savedParent = em.find(Parent.class, parent.getId()); savedParent.getChildList().remove(0); transaction.commit(); &#125; catch (Exception e) &#123; transaction.rollback(); &#125; finally &#123; em.close(); &#125; entityManagerFactory.close(); &#125;&#125; Parent ì—ì„œ Childë¥¼ ì‚­ì œí•  ë•Œ delete ì¿¼ë¦¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ê³ ì•„ ê°ì²´ë€? ë¶€ëª¨ ì—”í‹°í‹°ì™€ ì—°ê´€ê´€ê³„ê°€ ëŠì–´ì§„ ìì‹ ì—”í‹°í‹° ê³ ì•„ ê°ì²´ ì œê±° ë¶€ëª¨ ì—”í‹°í‹°ì™€ ì—°ê´€ê´€ê³„ ê°€ ëŠì–´ì§„ ìì‹ ì—”í‹°í‹°ë¥¼ ìë™ìœ¼ë¡œ ì œê±° @OneToOne, @OneToMany ë§Œ ê°€ëŠ¥í•˜ë‹¤. orphanRemoval &#x3D; true @Entity@Getter@Setterpublic class Parent &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private String name; @OneToMany(mappedBy = &quot;parent&quot;, cascade = CascadeType.ALL, orphanRemoval = true) private List&lt;Child&gt; childList = new ArrayList&lt;&gt;(); public void addChild(Child child)&#123; childList.add(child); child.setParent(this); &#125;&#125; public class JpaMain &#123; public static void main(String[] ars) &#123; EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = entityManagerFactory.createEntityManager(); EntityTransaction transaction = em.getTransaction(); transaction.begin(); try &#123; Child child1 = new Child(); Child child2 = new Child(); Parent parent = new Parent(); parent.addChild(child1); parent.addChild(child2); em.persist(parent); em.flush(); em.clear(); Parent savedParent = em.find(Parent.class, parent.getId()); savedParent.getChildList().remove(0); transaction.commit(); &#125; catch (Exception e) &#123; transaction.rollback(); &#125; finally &#123; em.close(); &#125; entityManagerFactory.close(); &#125;&#125; Parent ì—ì„œ Childë¥¼ ì‚­ì œí•  ë•Œ delete ì¿¼ë¦¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. Hibernate: /* insert hellojpa.Parent */ insert into Parent (id, name) values (null, ?)Hibernate: /* insert hellojpa.Child */ insert into Child (id, name, parent_id) values (null, ?, ?)Hibernate: /* insert hellojpa.Child */ insert into Child (id, name, parent_id) values (null, ?, ?)Hibernate: select parent0_.id as id1_6_0_, parent0_.name as name2_6_0_ from Parent parent0_ where parent0_.id=?Hibernate: select childlist0_.parent_id as parent_i3_2_0_, childlist0_.id as id1_2_0_, childlist0_.id as id1_2_1_, childlist0_.name as name2_2_1_, childlist0_.parent_id as parent_i3_2_1_ from Child childlist0_ where childlist0_.parent_id=?Hibernate: /* delete hellojpa.Child */ delete from Child where id=? ê³ ì•„ ê°ì²´ - ì£¼ì˜ ì°¸ì¡°í•˜ëŠ” ê³³ì´ í•˜ë‚˜ ì¼ ë•Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤. íŠ¹ì • ì—”í‹°í‹°ê°€ ê°œì¸ ì†Œìœ í•  ë•Œ ì‚¬ìš©í•œë‹¤. ë¶€ëª¨ë¥¼ ì œê±°í•˜ë©´ ìì‹ì€ ê³ ì•„ê°€ ëœë‹¤. ë”°ë¼ì„œ ê³ ì•„ ê°ì²´ ì œê±° ê¸°ëŠ¥ì„ í™œì„±í™” í•˜ë©´, ë¶€ëª¨ë¥¼ ì œê±°í•  ë•Œ ìì‹ë„ í•¨ê»˜ ì œê±°ëœë‹¤.(CascadeType.REMOVE ì²˜ëŸ¼ ë™ì‘) ì˜ì†ì„± ì „ì´ + ê³ ì•„ ê°ì²´, ìƒëª…ì£¼ê¸° ìŠ¤ìŠ¤ë¡œ ìƒëª… ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ëŠ” ì—”í‹°í‹°ëŠ” em.persist() ë¡œ ì˜ì†í™”, em.remove() ë¡œ ì œê±° ë‘ ì˜µì…˜ì„ ëª¨ë‘ í™œì„±í™” í•˜ë©´ ë¶€ëª¨ ì—”í‹°í‹°ë¥¼ í†µí•´ì„œ ìì‹ ì—”í‹°í‹° ìƒëª… ì£¼ê¸°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„(DDD) ì˜ Aggregate Root ê°œë©´ì„ êµ¬í˜„í•  ë•Œ ìœ ìš©í•˜ë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”©","slug":"jpa/jpa-programming/mapping/lazy-eager","date":"2022-04-19T22:31:46.000Z","updated":"2024-11-28T13:59:27.376Z","comments":true,"path":"2022/04/20/jpa/jpa-programming/mapping/lazy-eager/","link":"","permalink":"https://ckck803.github.io/2022/04/20/jpa/jpa-programming/mapping/lazy-eager/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ N + 1 ë¬¸ì œ í•˜ë‚˜ì˜ ì¿¼ë¦¬(1) ë¥¼ ë‚ ë¦° í›„ ì¡°íšŒëœ ê²°ê³¼ ê°’ê³¼ ì—°ê´€ëœ ë°ì´í„° ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ê²°ê³¼ì˜ í–‰ìˆ˜(N) ë§Œí¼ ì¶”ê°€ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ ì¦‰ì‹œë¡œë”© FetchType.EAGER ë¡œ ì„¤ì •í•˜ê²Œ ë˜ë©´ ì¦‰ì‹œ ì¡°íšŒí•˜ê²Œ ëœë‹¤. Join í•´ì„œ í•œë°© ì¿¼ë¦¬ë¡œ ê°€ì ¸ì˜¤ëŠ” ë°©ë²• ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ í›„ í›„ì† ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ëŠ” ê¸°ë²•, í•´ë‹¹ ë°©ë²•ì€ N + 1 ë¬¸ì œë¥¼ ì¼ìœ¼í‚¨ë‹¤. @ManyToOne(fetch = FetchType.EAGER)@JoinColumn(name = &quot;TEAM_ID&quot;)private Team team; í”„ë¡ì‹œì™€ ì¦‰ì‹œë¡œë”© ì£¼ì˜ ì¦‰ì‹œ ë¡œë”©ì„ ì ìš©í•˜ë©´ ì˜ˆìƒí•˜ì§€ ëª»í•œ SQL ì´ ë°œìƒ ì¦‰ì‹œ ë¡œë”©ì€ JPQL ì—ì„œ N + 1 ë¬¸ì œë¥¼ ì¼ìœ¼í‚¨ë‹¤. JPA ê°€ ë§Œë“¤ì–´ì£¼ëŠ” ì¿¼ë¦¬ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ìµœì í™”ê°€ ì´ë¤„ì§„ë‹¤. JPQL ì€ ë‚´ë¶€ì ìœ¼ë¡œ SQL ë¡œ ë²ˆì—­ëœ í›„ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ ë‹¤ìŒì— ì—°ê´€ ë°ì´í„°ì— ëŒ€í•´ í›„ì†ì ìœ¼ë¡œ ì¿¼ë¦¬ê°€ ë°œìƒí•œë‹¤. í•´ê²°ë²• 1 : fetch join í•´ê²°ë²• 2 : @EntityGraph í•´ê²°ë²• 3 : batch size @ManyToOne, @OneToOne ì€ ê¸°ë³¸ì´ ì¦‰ì‹œ ë¡œë”© LAZY ë¡œ ì„¤ì •í•œë‹¤. @OneToMany, @ManyToMany ëŠ” ê¸°ë³¸ì´ ì§€ì—° ë¡œë”© ì§€ì—°ë¡œë”©","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ N + 1 ë¬¸ì œ í•˜ë‚˜ì˜ ì¿¼ë¦¬(1) ë¥¼ ë‚ ë¦° í›„ ì¡°íšŒëœ ê²°ê³¼ ê°’ê³¼ ì—°ê´€ëœ ë°ì´í„° ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ê²°ê³¼ì˜ í–‰ìˆ˜(N) ë§Œí¼ ì¶”ê°€ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ ì¦‰ì‹œë¡œë”© FetchType.EAGER ë¡œ ì„¤ì •í•˜ê²Œ ë˜ë©´ ì¦‰ì‹œ ì¡°íšŒí•˜ê²Œ ëœë‹¤. Join í•´ì„œ í•œë°© ì¿¼ë¦¬ë¡œ ê°€ì ¸ì˜¤ëŠ” ë°©ë²• ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ í›„ í›„ì† ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ëŠ” ê¸°ë²•, í•´ë‹¹ ë°©ë²•ì€ N + 1 ë¬¸ì œë¥¼ ì¼ìœ¼í‚¨ë‹¤. @ManyToOne(fetch = FetchType.EAGER)@JoinColumn(name = &quot;TEAM_ID&quot;)private Team team; í”„ë¡ì‹œì™€ ì¦‰ì‹œë¡œë”© ì£¼ì˜ ì¦‰ì‹œ ë¡œë”©ì„ ì ìš©í•˜ë©´ ì˜ˆìƒí•˜ì§€ ëª»í•œ SQL ì´ ë°œìƒ ì¦‰ì‹œ ë¡œë”©ì€ JPQL ì—ì„œ N + 1 ë¬¸ì œë¥¼ ì¼ìœ¼í‚¨ë‹¤. JPA ê°€ ë§Œë“¤ì–´ì£¼ëŠ” ì¿¼ë¦¬ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ìµœì í™”ê°€ ì´ë¤„ì§„ë‹¤. JPQL ì€ ë‚´ë¶€ì ìœ¼ë¡œ SQL ë¡œ ë²ˆì—­ëœ í›„ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ ë‹¤ìŒì— ì—°ê´€ ë°ì´í„°ì— ëŒ€í•´ í›„ì†ì ìœ¼ë¡œ ì¿¼ë¦¬ê°€ ë°œìƒí•œë‹¤. í•´ê²°ë²• 1 : fetch join í•´ê²°ë²• 2 : @EntityGraph í•´ê²°ë²• 3 : batch size @ManyToOne, @OneToOne ì€ ê¸°ë³¸ì´ ì¦‰ì‹œ ë¡œë”© LAZY ë¡œ ì„¤ì •í•œë‹¤. @OneToMany, @ManyToMany ëŠ” ê¸°ë³¸ì´ ì§€ì—° ë¡œë”© ì§€ì—°ë¡œë”© FetchType.LAZY ë¡œ ì„¤ì •í•˜ê²Œ ë˜ë©´ Proxy ë¡œ ì¡°íšŒí•˜ê²Œ ëœë‹¤. ì‹¤ì œ í•´ë‹¹ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹œì ì— ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•œë‹¤. @ManyToOne(fetch = FetchType.LAZY)@JoinColumn(name = &quot;TEAM_ID&quot;)private Team team;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´","slug":"jpa/jpa-programming/mapping/proxy","date":"2022-04-19T21:31:46.000Z","updated":"2024-11-28T13:59:26.954Z","comments":true,"path":"2022/04/20/jpa/jpa-programming/mapping/proxy/","link":"","permalink":"https://ckck803.github.io/2022/04/20/jpa/jpa-programming/mapping/proxy/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ í”„ë¡ì‹œ ê°ì²´ì˜ íŠ¹ì§• ì‹¤ì œ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì•„ì„œ ë§Œë“¤ì–´ì§„ë‹¤. ì‹¤ì œ í´ë˜ìŠ¤ì™€ ê²‰ ëª¨ì–‘ì´ ê°™ë‹¤. ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” ì§„ì§œ ê°ì²´ì¸ì§€ í”„ë¡ì‹œ ê°ì²´ì¸ì§€ êµ¬ë¶„í•˜ì§€ ì•Šê³  ì‚¬ìš©í•˜ë©´ ëœë‹¤. í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ë³´ê´€í•œë‹¤. í”„ë¡ì‹œ ê°ì²´ë¥¼ í˜¸ì¶œí•˜ë©´ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œë‹¤. í”„ë¡ì‹œ ê°ì²´ëŠ” ì²˜ìŒ ì‚¬ìš©í•  ë•Œ í•œë²ˆë§Œ ì´ˆê¸°í™” í”„ë¡ì‹œ ê°ì²´ë¥¼ ì´ˆê¸°í™” í• ë•Œ, í”„ë¡ì‹œ ê°ì²´ê°€ ì‹¤ì œ ì—”í‹°í‹°ë¡œ ë°”ë€ŒëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ì´ˆê¸°í™” ë˜ë©´ í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ì‹¤ì œ ì—”í‹°í‹°ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ë³¸ ì—”í‹°í‹°ë¥¼ ìƒì†ë°›ìŒ, ë”°ë¼ì„œ íƒ€ì… ì²´í¬ì‹œ ì£¼ì˜í•´ì•¼ í•œë‹¤. (&#x3D;&#x3D; ë¹„êµ ì‹¤íŒ¨, ëŒ€ì‹  instance of ì‚¬ìš©) ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì°¾ëŠ” ì—”í‹°í‹°ê°€ ì´ë¯¸ ìˆìœ¼ë©´ em.getReference() ë¥¼ í˜¸ì¶”ë³ë„ ì‹¤ì œ ì—”í‹°í‹°ë¥¼ ë°˜í™˜í•œë‹¤. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë„ì›€ì„ ë°›ì„ ìˆ˜ ì—†ëŠ” ì¤€ ì˜ì† ìƒíƒœì¼ë•Œ, í”„ë¡ì‹œë¥¼ ì´ˆê¸°í™” í•˜ë©´ ë¬¸ì œ ë°œìƒ org.hibernate.LazyInitializationException ì˜ˆì™¸ë¥¼ í„°íŠ¸ë¦°ë‹¤. em.find() vs em.getReference() em.find() ë°ì´í„° ë² ì´ìŠ¤ë¥¼ í†µí•´ ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ë¥¼ ì¡°íšŒí•œë‹¤. em.getReference() ë°ì´í„° ë² ì´ìŠ¤ ì¡°íšŒë¥¼ ë¯¸ë£¨ëŠ” ê°€ì§œ(í”„ë¡ì‹œ) ì—”í‹°í‹° ê°ì²´ ë¥¼ ì¡°íšŒí•œë‹¤. public class JpaMain &#123; public static void main(String[] ars) &#123; EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = entityManagerFactory.createEntityManager(); EntityTransaction transaction = em.getTransaction(); transaction.begin(); try &#123; Member member = new Member(); member.setUsername(&quot;hello&quot;); em.persist(member); em.flush(); em.clear(); Member savedMember = em.find(Member.class, 1L); printMemberAndTeam(savedMember); transaction.commit(); &#125; catch (Exception e) &#123; transaction.rollback(); &#125; finally &#123; em.close(); &#125; entityManagerFactory.close(); &#125; private static void printMember(Member member)&#123; System.out.println(&quot;member = &quot; + member.getUsername()); &#125; private static void printMemberAndTeam(Member member) &#123; String username = member.getUsername(); System.out.println(&quot;username = &quot; + username); Team team = member.getTeam(); System.out.println(&quot;team = &quot; + team.getName()); &#125;&#125;","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ í”„ë¡ì‹œ ê°ì²´ì˜ íŠ¹ì§• ì‹¤ì œ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì•„ì„œ ë§Œë“¤ì–´ì§„ë‹¤. ì‹¤ì œ í´ë˜ìŠ¤ì™€ ê²‰ ëª¨ì–‘ì´ ê°™ë‹¤. ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” ì§„ì§œ ê°ì²´ì¸ì§€ í”„ë¡ì‹œ ê°ì²´ì¸ì§€ êµ¬ë¶„í•˜ì§€ ì•Šê³  ì‚¬ìš©í•˜ë©´ ëœë‹¤. í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ë³´ê´€í•œë‹¤. í”„ë¡ì‹œ ê°ì²´ë¥¼ í˜¸ì¶œí•˜ë©´ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œë‹¤. í”„ë¡ì‹œ ê°ì²´ëŠ” ì²˜ìŒ ì‚¬ìš©í•  ë•Œ í•œë²ˆë§Œ ì´ˆê¸°í™” í”„ë¡ì‹œ ê°ì²´ë¥¼ ì´ˆê¸°í™” í• ë•Œ, í”„ë¡ì‹œ ê°ì²´ê°€ ì‹¤ì œ ì—”í‹°í‹°ë¡œ ë°”ë€ŒëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ì´ˆê¸°í™” ë˜ë©´ í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ì‹¤ì œ ì—”í‹°í‹°ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ë³¸ ì—”í‹°í‹°ë¥¼ ìƒì†ë°›ìŒ, ë”°ë¼ì„œ íƒ€ì… ì²´í¬ì‹œ ì£¼ì˜í•´ì•¼ í•œë‹¤. (&#x3D;&#x3D; ë¹„êµ ì‹¤íŒ¨, ëŒ€ì‹  instance of ì‚¬ìš©) ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì°¾ëŠ” ì—”í‹°í‹°ê°€ ì´ë¯¸ ìˆìœ¼ë©´ em.getReference() ë¥¼ í˜¸ì¶”ë³ë„ ì‹¤ì œ ì—”í‹°í‹°ë¥¼ ë°˜í™˜í•œë‹¤. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë„ì›€ì„ ë°›ì„ ìˆ˜ ì—†ëŠ” ì¤€ ì˜ì† ìƒíƒœì¼ë•Œ, í”„ë¡ì‹œë¥¼ ì´ˆê¸°í™” í•˜ë©´ ë¬¸ì œ ë°œìƒ org.hibernate.LazyInitializationException ì˜ˆì™¸ë¥¼ í„°íŠ¸ë¦°ë‹¤. em.find() vs em.getReference() em.find() ë°ì´í„° ë² ì´ìŠ¤ë¥¼ í†µí•´ ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ë¥¼ ì¡°íšŒí•œë‹¤. em.getReference() ë°ì´í„° ë² ì´ìŠ¤ ì¡°íšŒë¥¼ ë¯¸ë£¨ëŠ” ê°€ì§œ(í”„ë¡ì‹œ) ì—”í‹°í‹° ê°ì²´ ë¥¼ ì¡°íšŒí•œë‹¤. public class JpaMain &#123; public static void main(String[] ars) &#123; EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = entityManagerFactory.createEntityManager(); EntityTransaction transaction = em.getTransaction(); transaction.begin(); try &#123; Member member = new Member(); member.setUsername(&quot;hello&quot;); em.persist(member); em.flush(); em.clear(); Member savedMember = em.find(Member.class, 1L); printMemberAndTeam(savedMember); transaction.commit(); &#125; catch (Exception e) &#123; transaction.rollback(); &#125; finally &#123; em.close(); &#125; entityManagerFactory.close(); &#125; private static void printMember(Member member)&#123; System.out.println(&quot;member = &quot; + member.getUsername()); &#125; private static void printMemberAndTeam(Member member) &#123; String username = member.getUsername(); System.out.println(&quot;username = &quot; + username); Team team = member.getTeam(); System.out.println(&quot;team = &quot; + team.getName()); &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - ì¼ëŒ€ë‹¤","slug":"jpa/jpa-programming/mapping/one-to-many","date":"2022-04-19T20:31:46.000Z","updated":"2024-11-28T13:59:27.309Z","comments":true,"path":"2022/04/20/jpa/jpa-programming/mapping/one-to-many/","link":"","permalink":"https://ckck803.github.io/2022/04/20/jpa/jpa-programming/mapping/one-to-many/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ê³µí†µ Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ MappedSuperclass Entity ì— ê³µí†µì ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•´ ì½”ë“œê°€ ì¤‘ë³µí•´ì„œ ì‘ì„±í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ìƒì†ê´€ê³„ Mapping ì´ ì•„ë‹ˆë‹¤. ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ëŠ” ìì‹ í´ë˜ìŠ¤ì— Mapping ì •ë³´ë§Œ ì„ ì œê³µí•œë‹¤. ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•  ì¼ì´ ì—†ìœ¼ë¯€ë¡œ ì¶”ìƒí´ë˜ìŠ¤(abstract) ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. MappedSuperclass í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ê¸° ìœ„í•´ì„œëŠ” ê°™ì€ @MappedSuperclass ë¥¼ ì‚¬ìš©í•œ í´ë˜ìŠ¤ë‚˜ @Entity ì„ ì´ìš©í•œ í´ë˜ìŠ¤ë§Œ ìƒì†ì´ ê°€ëŠ¥í•˜ë‹¤. ìš”êµ¬ ì‚¬í•­ ëª¨ë“  Entity ì—ëŠ” ìƒì„±ì, ìƒì„±ì¼, ìˆ˜ì •ì, ìˆ˜ì •ì¼ ì •ë³´ê°€ ë“¤ì–´ê°€ì•¼ í•œë‹¤. ëª¨ë“  Entity ì— ê³µí†µì ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” Mapping ì •ë³´ ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ BaseEntity í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. @MappedSuperclasspublic abstract class BaseEntity &#123; private String createdBy; private LocalDateTime createdDate; private String lastModifiedBy; private LocalDateTime lastModifiedDate;&#125; ê³µí†µ Mapping ì •ë³´ëŠ” ìƒì† ì„ í†µí•´ í˜„ì¬ Entity ì— ì ìš©í•  ìˆ˜ ìˆë‹¤.","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ê³µí†µ Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ MappedSuperclass Entity ì— ê³µí†µì ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•´ ì½”ë“œê°€ ì¤‘ë³µí•´ì„œ ì‘ì„±í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ìƒì†ê´€ê³„ Mapping ì´ ì•„ë‹ˆë‹¤. ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ëŠ” ìì‹ í´ë˜ìŠ¤ì— Mapping ì •ë³´ë§Œ ì„ ì œê³µí•œë‹¤. ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•  ì¼ì´ ì—†ìœ¼ë¯€ë¡œ ì¶”ìƒí´ë˜ìŠ¤(abstract) ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. MappedSuperclass í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ê¸° ìœ„í•´ì„œëŠ” ê°™ì€ @MappedSuperclass ë¥¼ ì‚¬ìš©í•œ í´ë˜ìŠ¤ë‚˜ @Entity ì„ ì´ìš©í•œ í´ë˜ìŠ¤ë§Œ ìƒì†ì´ ê°€ëŠ¥í•˜ë‹¤. ìš”êµ¬ ì‚¬í•­ ëª¨ë“  Entity ì—ëŠ” ìƒì„±ì, ìƒì„±ì¼, ìˆ˜ì •ì, ìˆ˜ì •ì¼ ì •ë³´ê°€ ë“¤ì–´ê°€ì•¼ í•œë‹¤. ëª¨ë“  Entity ì— ê³µí†µì ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” Mapping ì •ë³´ ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ BaseEntity í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. @MappedSuperclasspublic abstract class BaseEntity &#123; private String createdBy; private LocalDateTime createdDate; private String lastModifiedBy; private LocalDateTime lastModifiedDate;&#125; ê³µí†µ Mapping ì •ë³´ëŠ” ìƒì† ì„ í†µí•´ í˜„ì¬ Entity ì— ì ìš©í•  ìˆ˜ ìˆë‹¤. Member í…Œì´ë¸”ì´ ìƒì„±ë  ë•Œ ê³µí†µ Mapping ê°€ ì ìš©ë  ìˆ˜ ìˆë„ë¡ BaseEntity ë¥¼ ìƒì† ë°›ëŠ”ë‹¤. @Entitypublic class Member extends BaseEntity &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;MEMBER_ID&quot;) private long id; @Column(name = &quot;USERNAME&quot;) private String username; @ManyToOne @JoinColumn(name = &quot;TEAM_ID&quot;) private Team team; public void changeTeam(Team team)&#123; this.team = team; team.getMembers().add(this); &#125;&#125; Member í…Œì´ë¸”ì´ ìƒì„±ë  ë•Œ createdBy, createdDate, lastModifiedBy, lastModifiedDate ì»¬ëŸ¼ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Team í…Œì´ë¸”ì´ ìƒì„±ë  ë•Œ ê³µí†µ Mapping ê°€ ì ìš©ë  ìˆ˜ ìˆë„ë¡ BaseEntity ë¥¼ ìƒì† ë°›ëŠ”ë‹¤. @Entitypublic class Team extends BaseEntity &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;TEAM_ID&quot;) private Long id; private String name; @OneToMany(mappedBy = &quot;team&quot;) private List&lt;Member&gt; members = new ArrayList&lt;&gt;(); public void addMember(Member member)&#123; member.setTeam(this); members.add(member); &#125;&#125; Team í…Œì´ë¸”ì´ ìƒì„±ë  ë•Œ createdBy, createdDate, lastModifiedBy, lastModifiedDate ì»¬ëŸ¼ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - ë‹¤ëŒ€ì¼","slug":"jpa/jpa-programming/mapping/many-to-one","date":"2022-04-19T19:31:46.000Z","updated":"2024-11-28T13:59:27.448Z","comments":true,"path":"2022/04/20/jpa/jpa-programming/mapping/many-to-one/","link":"","permalink":"https://ckck803.github.io/2022/04/20/jpa/jpa-programming/mapping/many-to-one/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ë‹¤ ëŒ€ ì¼ì—°ê´€ê´€ê³„ ë§¤í•‘ì‹œ ê³ ë ¤ì‚¬í•­ ë‹¤ì¤‘ì„± ë‹¨ë°©í–¥, ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì£¼ì¸ í…Œì´ë¸” ì™¸ë˜í‚¤ í•˜ë‚˜ë¡œ ì–‘ìª½ ì¡°ì¸ ê°€ëŠ¥ ì‚¬ì‹¤ ë°©í–¥ì´ë¼ëŠ” ê°œë…ì´ ì—†ìŒ ê°ì²´ ì°¸ì¡°ìš© í•„ë“œê°€ ìˆëŠ” ìª½ìœ¼ë¡œë§Œ ì°¸ì¡° ê°€ëŠ¥ í•œìª½ë§Œ ì°¸ì¡°í•˜ë©´ ë‹¨ë°©í–¥ ì–‘ìª½ì´ ì„œë¡œ ì°¸ì¡°í•˜ë©´ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì£¼ì¸","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ë‹¤ ëŒ€ ì¼ì—°ê´€ê´€ê³„ ë§¤í•‘ì‹œ ê³ ë ¤ì‚¬í•­ ë‹¤ì¤‘ì„± ë‹¨ë°©í–¥, ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì£¼ì¸ í…Œì´ë¸” ì™¸ë˜í‚¤ í•˜ë‚˜ë¡œ ì–‘ìª½ ì¡°ì¸ ê°€ëŠ¥ ì‚¬ì‹¤ ë°©í–¥ì´ë¼ëŠ” ê°œë…ì´ ì—†ìŒ ê°ì²´ ì°¸ì¡°ìš© í•„ë“œê°€ ìˆëŠ” ìª½ìœ¼ë¡œë§Œ ì°¸ì¡° ê°€ëŠ¥ í•œìª½ë§Œ ì°¸ì¡°í•˜ë©´ ë‹¨ë°©í–¥ ì–‘ìª½ì´ ì„œë¡œ ì°¸ì¡°í•˜ë©´ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì£¼ì¸ í…Œì´ë¸”ì€ ì™¸ë˜í‚¤ í•˜ë‚˜ë¡œ ë‘ í…Œì´ë¸”ì´ ì—°ê´€ê´€ê³„ë¥¼ ë§ºìŒ ê°ì²´ì˜ ë°©í–¥ì€ A â†’ B, B â†’ A ì²˜ëŸ¼ ì°¸ì¡°ê°€ 2êµ°ë° ê°ì²´ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì°¸ì¡°ê°€ 2êµ°ë° ìˆìŒ, ë‘˜ì¤‘ í…Œì´ë¸”ì˜ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•  ê³³ì„ ì§€ì •í•´ì•¼í•¨ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ : ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ì°¸ì¡° ì£¼ì¸ì˜ ë°˜ëŒ€í¸ : ì™¸ë˜ í‚¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ, ë‹¨ìˆœ ì¡°íšŒë§Œ ê°€ëŠ¥ ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ë°˜ëŒ€ìª½ ì‚¬ì´ë“œë¥¼ í•˜ë‚˜ ë„£ì–´ì£¼ë©´ ëœë‹¤. ë°˜ëŒ€ìª½ ì‚¬ì´ë“œë¥¼ ë„£ëŠ”ë‹¤ê³  í•´ë„ í…Œì´ë¸”ì— ì „í˜€ ì˜í–¥ì´ ì—†ë‹¤. ê°ì²´ì—ì„œë§Œ ê´€ë¦¬ë¥¼ í•œë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"Spring Security -  DelegateFilterProxy","slug":"spring/spring-security/security/filter/DelegateFilterProxy","date":"2022-04-19T13:25:35.000Z","updated":"2024-02-26T16:27:37.391Z","comments":true,"path":"2022/04/19/spring/spring-security/security/filter/DelegateFilterProxy/","link":"","permalink":"https://ckck803.github.io/2022/04/19/spring/spring-security/security/filter/DelegateFilterProxy/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ Filter ë€ ê¸°ë³¸ì ìœ¼ë¡œ Filter ëŠ” Servlet Filter ë¥¼ ì˜ë¯¸í•œë‹¤. Servlet Filter ëŠ” ì„œë¸”ë¦¿ ìŠ¤í™ì— ì •ì˜ëœ ê¸°ìˆ  ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì—ì„œ ìƒì„±ë˜ê³  ì‹¤í–‰ëœë‹¤. Filter ëŠ” Spring ì—ì„œ ìƒì„±í•œ Bean ì„ ì‚¬ìš©í•˜ê±°ë‚˜ Spring ê¸°ìˆ ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. Filter ë¥¼ ì‚¬ìš©í•´ ìì›ì— ëŒ€í•œ ì ‘ê·¼ ì „&#x2F;í›„ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. DelegatingFilterProxy Servlet Container ì™€ Spring Container ì‚¬ì´ì— ë‹¤ë¦¬ ì—­í• ì„ í•´ Spring Bean ìœ¼ë¡œ ë“±ë¡ëœ Filter ë¥¼ ì°¾ì•„ ìš”ì²­ì„ ìœ„ì„í•˜ëŠ” ì—­í• ì„ í•œë‹¤. Servlet Container ìœ„ì— êµ¬í˜„ëœ Filter Servelt Filter ê°€ ìš”ì²­ì„ DelegatingFilterProxy ë¡œ ì „ë‹¬ DelegatingFilterProxy ëŠ” ë“¤ì–´ì˜¨ ìš”ì²­ì„ Spring Container ìœ„ì— ìƒì„±ëœ Filter Bean ì— ìš”ì²­ì„ ìœ„ì„ springSecurityFilterChain ì´ë¦„ìœ¼ë¡œ ìƒì„±ëœ Bean ì„ ì°¾ì•„ ìš”ì²­ì„ ìœ„ì„í•œë‹¤. FilterChainProxy","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ Filter ë€ ê¸°ë³¸ì ìœ¼ë¡œ Filter ëŠ” Servlet Filter ë¥¼ ì˜ë¯¸í•œë‹¤. Servlet Filter ëŠ” ì„œë¸”ë¦¿ ìŠ¤í™ì— ì •ì˜ëœ ê¸°ìˆ  ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì—ì„œ ìƒì„±ë˜ê³  ì‹¤í–‰ëœë‹¤. Filter ëŠ” Spring ì—ì„œ ìƒì„±í•œ Bean ì„ ì‚¬ìš©í•˜ê±°ë‚˜ Spring ê¸°ìˆ ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. Filter ë¥¼ ì‚¬ìš©í•´ ìì›ì— ëŒ€í•œ ì ‘ê·¼ ì „&#x2F;í›„ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. DelegatingFilterProxy Servlet Container ì™€ Spring Container ì‚¬ì´ì— ë‹¤ë¦¬ ì—­í• ì„ í•´ Spring Bean ìœ¼ë¡œ ë“±ë¡ëœ Filter ë¥¼ ì°¾ì•„ ìš”ì²­ì„ ìœ„ì„í•˜ëŠ” ì—­í• ì„ í•œë‹¤. Servlet Container ìœ„ì— êµ¬í˜„ëœ Filter Servelt Filter ê°€ ìš”ì²­ì„ DelegatingFilterProxy ë¡œ ì „ë‹¬ DelegatingFilterProxy ëŠ” ë“¤ì–´ì˜¨ ìš”ì²­ì„ Spring Container ìœ„ì— ìƒì„±ëœ Filter Bean ì— ìš”ì²­ì„ ìœ„ì„ springSecurityFilterChain ì´ë¦„ìœ¼ë¡œ ìƒì„±ëœ Bean ì„ ì°¾ì•„ ìš”ì²­ì„ ìœ„ì„í•œë‹¤. FilterChainProxy springSeuciryFilterChain ì´ë¦„ìœ¼ë¡œ ìƒì„±ë˜ëŠ” Filter Bean DelegatingFilterProxy ë¡œë¶€í„° ìš”ì²­ì„ ìœ„ì„ ë°›ê³  ì‹¤ì œë¡œ ë³´ì•ˆ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. Filter ë¥¼ ê´€ë¦¬í•˜ê³  ì œì–´í•˜ë©° í˜¸ì¶œ ë¼ ì‹¤ì œë¡œ ë³´ì•ˆ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. Spirng Security ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” Filter ì„¤ì • í´ë˜ìŠ¤(Config) í´ë˜ìŠ¤ì—ì„œ ì¶”ê°€ì‹œ ìƒì„±ë˜ëŠ” Filter ì‚¬ìš©ì ìš”ì²­ì„ í•„í„° ìˆœì„œëŒ€ë¡œ í˜¸ì¶œí•˜ì—¬ ê·¸ ë‹¤ìŒ Filter ë¡œ ì „ë‹¬í•œë‹¤. ë§ˆì§€ë§‰ Filter ê¹Œì§€ ì§„í–‰ì´ ë˜ë©´ Servlet ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. DelegatingFilterProxy ì²˜ë¦¬ ê³¼ì • ì‚¬ìš©ìê°€ ìš”ì²­ì„ í•˜ê²Œ ë˜ë©´ Servlet ì— ì¡´ì¬í•˜ëŠ” Filter ê°€ ê°€ì¥ ë¨¼ì € ë°›ê²Œ ëœë‹¤. DelegatingFilterProxy ê°€ ì‚¬ìš©ì ìš”ì²­ì„ ë°›ê²Œ ë˜ë©´ ìš”ì²­ ê°ì²´ë¥¼ FilterChainProxy ì— ìœ„ì„í•œë‹¤. FilterChainProxy ëŠ” ìš”ì²­ì— ëŒ€í•´ Filter ë³„ë¡œ í˜¸ì¶œì„ í•´ ë³´ì•ˆ ì²˜ë¦¬ë¥¼ ì§„í–‰ ì¸ì¦&#x2F;ì¸ê°€ê°€ ì™„ë£Œëœ í›„ ìš”ì²­ì„ DispatcherServlet ì— ë„˜ê¸´ë‹¤. SecurityFilterAutoConfiguration securityFilterChainRegistration ì„ springSecurityFilterChain ì´ë¦„ìœ¼ë¡œ Spring ì— ë“±ë¡í•œë‹¤. DelegatingFilterProxyRegistrationBean ì„ ìƒì„±í•˜ê²Œ ë  ê²½ìš° DelegatingFilterProxy ìƒì„±ìê°€ ì‹¤í–‰ëœë‹¤. DelegatingFilterProxy DelegatingFilterProxy ìƒì„±ìëŠ” ìš”ì²­ì„ ìœ„ì„í•  Bean ì´ë¦„ì„ springSecurityFilterChain ë¥¼ ì„¤ì •í•œë‹¤. WebSecurityConfiguration springSeuciryFilterChain ì´ë¦„ì„ ê°€ì§„ Bean ì„ ìƒì„±í•œë‹¤. webSecurity.build ë©”ì„œë“œë¥¼ ì‹¤í–‰í•  ê²½ìš° WebSecurity ê°ì²´ì˜ performBuild ë©”ì„œë“œê°€ ì‹¤í–‰ëœë‹¤. WebSecurity FilterChainProxy ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. ì‚¬ìš©ì ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•ŒDelegationFilterProxy DelegationFilterProxy ì—ì„œ ìš”ì²­ì„ ë°›ê³  ìš”ì²­ì„ ìœ„ì„í•  Filter (springSecurityFilterChain) ì„ ì°¾ì•„ ìš”ì²­ì„ ìœ„ì„í•œë‹¤. FilterChainProxy getFilters ë©”ì„œë“œë¥¼ í†µí•´ Spring Security ê°€ ì´ˆê¸°í™” ë˜ë©´ì„œ ìƒì„±ë˜ëŠ” Filter ëª©ë¡ë“¤ì„ ê°€ì ¸ì™€ VirtualFilterChain ê°ì²´ë¥¼ ìƒì„±í•´ Filter ë¥¼ ì „ë‹¬í•˜ë©´ ìˆœì„œëŒ€ë¡œ Filter ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Filter","slug":"Spring/Spring-Security/Filter","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Filter/"}],"tags":[]},{"title":"JPA JPQL - Fetch Join","slug":"jpa/jpa-programming/jpql/fetch-join","date":"2022-04-18T19:31:46.000Z","updated":"2024-11-28T13:59:28.130Z","comments":true,"path":"2022/04/19/jpa/jpa-programming/jpql/fetch-join/","link":"","permalink":"https://ckck803.github.io/2022/04/19/jpa/jpa-programming/jpql/fetch-join/","excerpt":"ëª©ì°¨ JPA JPQL - Fetch Join JPA JPQL - Projection (Select) JPA JPQL (Java Persistence Query Language) JPA - ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ N+1 ë¬¸ì œë€ ? ë°ì´í„° ì¡°íšŒë¥¼ ìœ„í•´ í•œë²ˆì˜ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ì§€ë§Œ ì—°ê´€ê´€ê³„ì— ì˜í•´ ì—°ê´€ëœ ê°ì²´ ëª¨ë‘ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ N ë²ˆì˜ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ í•„ìš”í•œ ë°ì´í„° ì¡°íšŒë¥¼ ìœ„í•´ í•œë²ˆì˜ Select ì¿¼ë¦¬ê°€ ë°œìƒí•´ ê°ì²´ë¥¼ ê°€ì ¸ì™”ì§€ë§Œ, ì—°ê´€ê´€ê³„ê°€ ì„¤ì •ëœ ê°ì²´ëŠ” Lazy ì„¤ì • ìœ¼ë¡œ ì¸í•´ ì‹¤ì œ ê°’ì´ ì•„ë‹Œ Proxy ê°ì²´ ë¡œ ëŒ€ì²´í•˜ëŠ”ë° í•´ë‹¹ ê°ì²´ì— ì ‘ê·¼í•  ê²½ìš° ì‹¤ì œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì²˜ìŒì— ì¡°íšŒëœ ë°ì´í„° ë§Œí¼ ì¿¼ë¦¬ê°€ ì¶”ê°€ì ìœ¼ë¡œ ë°œìƒí•˜ëŠ” ë¬¸ì œ Fetch Join Lazy ì„¤ì •ì„ ë¬´ì‹œí•˜ê³  ì—°ê´€ëœ ê°ì²´ë¥¼ í•œë²ˆì— ê°€ì ¸ì˜¨ë‹¤. JPQL ì—ì„œëŠ” N + 1 ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ fetch join ì„ ì œê³µí•œë‹¤. fetch join ì„ ì´ìš©í•´ JPQL ì„ ì‘ì„±í•˜ê²Œ ë˜ë©´ Lazy ì„¤ì •ì„ ë¬´ì‹œí•˜ê³ , Order ì¡°íšŒì‹œ Member ê°ì²´ì™€ Delivery ê°ì²´ë¥¼ ì „ë¶€ ë‹¤ ê°€ì ¸ì˜¨ë‹¤. public List&lt;Order&gt; findAllWithMemberDelivery()&#123; return em.createQuery( &quot;select o from Order o&quot;+ &quot; join fetch o.member m&quot; + &quot; join fetch o.delivery d&quot;, Order.class ).getResultList();&#125;","text":"ëª©ì°¨ JPA JPQL - Fetch Join JPA JPQL - Projection (Select) JPA JPQL (Java Persistence Query Language) JPA - ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ N+1 ë¬¸ì œë€ ? ë°ì´í„° ì¡°íšŒë¥¼ ìœ„í•´ í•œë²ˆì˜ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ì§€ë§Œ ì—°ê´€ê´€ê³„ì— ì˜í•´ ì—°ê´€ëœ ê°ì²´ ëª¨ë‘ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ N ë²ˆì˜ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ í•„ìš”í•œ ë°ì´í„° ì¡°íšŒë¥¼ ìœ„í•´ í•œë²ˆì˜ Select ì¿¼ë¦¬ê°€ ë°œìƒí•´ ê°ì²´ë¥¼ ê°€ì ¸ì™”ì§€ë§Œ, ì—°ê´€ê´€ê³„ê°€ ì„¤ì •ëœ ê°ì²´ëŠ” Lazy ì„¤ì • ìœ¼ë¡œ ì¸í•´ ì‹¤ì œ ê°’ì´ ì•„ë‹Œ Proxy ê°ì²´ ë¡œ ëŒ€ì²´í•˜ëŠ”ë° í•´ë‹¹ ê°ì²´ì— ì ‘ê·¼í•  ê²½ìš° ì‹¤ì œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì²˜ìŒì— ì¡°íšŒëœ ë°ì´í„° ë§Œí¼ ì¿¼ë¦¬ê°€ ì¶”ê°€ì ìœ¼ë¡œ ë°œìƒí•˜ëŠ” ë¬¸ì œ Fetch Join Lazy ì„¤ì •ì„ ë¬´ì‹œí•˜ê³  ì—°ê´€ëœ ê°ì²´ë¥¼ í•œë²ˆì— ê°€ì ¸ì˜¨ë‹¤. JPQL ì—ì„œëŠ” N + 1 ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ fetch join ì„ ì œê³µí•œë‹¤. fetch join ì„ ì´ìš©í•´ JPQL ì„ ì‘ì„±í•˜ê²Œ ë˜ë©´ Lazy ì„¤ì •ì„ ë¬´ì‹œí•˜ê³ , Order ì¡°íšŒì‹œ Member ê°ì²´ì™€ Delivery ê°ì²´ë¥¼ ì „ë¶€ ë‹¤ ê°€ì ¸ì˜¨ë‹¤. public List&lt;Order&gt; findAllWithMemberDelivery()&#123; return em.createQuery( &quot;select o from Order o&quot;+ &quot; join fetch o.member m&quot; + &quot; join fetch o.delivery d&quot;, Order.class ).getResultList();&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"JPA JPQL (Java Persistence Query Language)","slug":"jpa/jpa-programming/jpql/jpql","date":"2022-04-17T19:31:46.000Z","updated":"2024-11-28T13:59:27.987Z","comments":true,"path":"2022/04/18/jpa/jpa-programming/jpql/jpql/","link":"","permalink":"https://ckck803.github.io/2022/04/18/jpa/jpa-programming/jpql/jpql/","excerpt":"ëª©ì°¨ JPA JPQL - Fetch Join JPA JPQL - Projection (Select) JPA JPQL (Java Persistence Query Language) JPA - ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ JPQL JPQL ì€ ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ ë¡œ í…Œì´ë¸” ì„ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì—”í‹°í‹° ê°ì²´ ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬í•œë‹¤.JPQL ì€ SQL ì„ ì¶”ìƒí™” í•´ì„œ íŠ¹ì • ë°ì´í„° ë² ì´ìŠ¤ SQL ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤. JPQL ë¬¸ë²• select m from Memeber as m where m.age &gt; 18 Entity ì™€ ì†ì„± ì€ ëŒ€ì†Œë¬¸ì êµ¬ë¶„ O (Member, age) JPQL í‚¤ì›Œë“œ ëŠ” ëŒ€ì†Œë¬¸ì êµ¬ë¶„ X (select, from, where) ì—”í‹°í‹° ì´ë¦„ ì‚¬ìš©, í…Œì´ë¸” ì´ë¦„ì´ ì•„ë‹˜ ë³„ì¹­(alias) ì€ í•„ìˆ˜ (m) TypeQuery, Query ë°˜í™˜ íƒ€ì… í˜•íƒœì— ë”°ë¼ ì‚¬ìš©í•˜ëŠ” íƒ€ì…ì´ ë‹¤ë¥´ë‹¤.","text":"ëª©ì°¨ JPA JPQL - Fetch Join JPA JPQL - Projection (Select) JPA JPQL (Java Persistence Query Language) JPA - ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ JPQL JPQL ì€ ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ ë¡œ í…Œì´ë¸” ì„ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì—”í‹°í‹° ê°ì²´ ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬í•œë‹¤.JPQL ì€ SQL ì„ ì¶”ìƒí™” í•´ì„œ íŠ¹ì • ë°ì´í„° ë² ì´ìŠ¤ SQL ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤. JPQL ë¬¸ë²• select m from Memeber as m where m.age &gt; 18 Entity ì™€ ì†ì„± ì€ ëŒ€ì†Œë¬¸ì êµ¬ë¶„ O (Member, age) JPQL í‚¤ì›Œë“œ ëŠ” ëŒ€ì†Œë¬¸ì êµ¬ë¶„ X (select, from, where) ì—”í‹°í‹° ì´ë¦„ ì‚¬ìš©, í…Œì´ë¸” ì´ë¦„ì´ ì•„ë‹˜ ë³„ì¹­(alias) ì€ í•„ìˆ˜ (m) TypeQuery, Query ë°˜í™˜ íƒ€ì… í˜•íƒœì— ë”°ë¼ ì‚¬ìš©í•˜ëŠ” íƒ€ì…ì´ ë‹¤ë¥´ë‹¤. TypeQuery ì¿¼ë¦¬ ê²°ê³¼ ë°˜í™˜ íƒ€ì…ì´ ëª…í™•í•  ë•Œ ì‚¬ìš© Query ë°˜í™˜ íƒ€ì…ì´ ëª…í™•í•˜ì§€ ì•Šì„ ë•Œ ì‚¬ìš©í•œë‹¤. // Member íƒ€ì…ì„ ë°˜í™˜TypedQuery&lt;Member&gt; tQuery = em.createQuery(&quot;select m from Member m&quot;, Member.class);// íƒ€ì…ì´ ëª…í™•í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì§€ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.// m.username : string, m.age : intQuery query = em.createQuery(&quot;select m.username, m.age from Member m&quot;); ê²°ê³¼ ì¡°íšŒ API ë°˜í™˜ ê²°ê³¼ì— ë”°ë¼ getSingleResult ì™€ getResultList ë¥¼ ì„ íƒí•´ ì‚¬ìš©í•œë‹¤. getSingleResult ê²°ê³¼ê°€ ì •í™•íˆ í•˜ë‚˜, ë‹¨ì¼ ê°ì²´ ë°˜í™˜ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ NoResultException ë°˜í™˜ ë‘˜ ì´ìƒì¼ ê²½ìš° NonUniqueResultException ì„ ë°˜í™˜í•œë‹¤. getResultList ê²°ê³¼ê°€ í•˜ë‚˜ ì´ìƒì¼ ë•Œ, ë¦¬ìŠ¤íŠ¸ ë°˜í™˜ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜ // ì¿¼ë¦¬ ê²°ê³¼ê°€ í•œê°œì¼ ê²½ìš°TypedQuery&lt;Member&gt; tQuery = em.createQuery(&quot;select m from Member m where m.username = &#x27;member1&#x27;&quot;, Member.class);Member singleResult = tQuery.getSingleResult();// ì¿¼ë¦¬ ê²°ê³¼ê°€ ì—¬ëŸ¬ê°œ ì¼ ê²½ìš°TypedQuery&lt;Member&gt; tQuery = em.createQuery(&quot;select m from Member m&quot;, Member.class);List&lt;Member&gt; memberList = tQuery.getResultList(); íŒŒë¼ë¯¸í„° ë°”ì¸ë”© - ì´ë¦„ ê¸°ì¤€, ìœ„ì¹˜ ê¸°ì¤€ì´ë¦„ ê¸°ì¤€ Parameter Binding ë™ì  Parameter Binding ê³¼ ìœ ì‚¬í•˜ë‹¤. // Parameter BindingTypedQuery&lt;Member&gt; tQuery = em.createQuery(&quot;select m from Member m where m.username = :username&quot;, Member.class);tQuery.setParameter(&quot;username&quot;, &quot;member1&quot;); ìœ„ì¹˜ ê¸°ì¤€ Parameter Binding í—·ê¹”ë¦´ ìœ„í—˜ì´ ìˆì–´ ì´ë¦„ ê¸°ì¤€ Parameter Binding ì— ë¹„í•´ ë¹„ ì„ í˜¸ë˜ëŠ” ë°©ì‹ // Parameter BindingTypedQuery&lt;Member&gt; tQuery = em.createQuery(&quot;select m from Member m where m.username = ?1&quot;, Member.class);tQuery.setParameter(&quot;?1&quot;, &quot;member1&quot;); ë™ì  íŒŒë¼ë¯¸í„° Binding ê²°ê³¼ ì¿¼ë¦¬Hibernate: /* select m from Member m where m.username = :username */ select member0_.id as id1_0_, member0_.age as age2_0_, member0_.TEAM_ID as TEAM_ID4_0_, member0_.username as username3_0_ from Member member0_ where member0_.username=?","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"JPA - ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´","slug":"jpa/jpa-programming/jpql/object-query","date":"2022-04-17T19:31:46.000Z","updated":"2024-11-28T13:59:27.916Z","comments":true,"path":"2022/04/18/jpa/jpa-programming/jpql/object-query/","link":"","permalink":"https://ckck803.github.io/2022/04/18/jpa/jpa-programming/jpql/object-query/","excerpt":"ëª©ì°¨ JPA JPQL - Fetch Join JPA JPQL - Projection (Select) JPA JPQL (Java Persistence Query Language) JPA - ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ ê°ì²´ ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ ì¢…ë¥˜ JPQL JPA Criteria QueryDSL ë„¤ì´í‹°ë¸Œ SQL JDBC API ì§ì ‘ ì‚¬ìš©, MyBatis, SrpignjdbcTemplate í•¨ê»˜ ì‚¬ìš© JPQL JPA ë¥¼ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹° ê°ì²´ ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œ ë¬¸ì œëŠ” ê²€ìƒ‰ ì¿¼ë¦¬ ê²€ìƒ‰ì„ í• ë•Œë„ í…Œì´ë¸”ì´ ë‚˜ë‹Œ ì—”í‹°í‹° ê°ì²´ ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ìƒ‰ ëª¨ë“  DB ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™”í•´ì„œ ê²€ìƒ‰í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•„ìš”í•œ ë°ì´í„°ë§Œ DB ì—ì„œ ë¶ˆëŸ¬ì˜¤ë ¤ë©´ ê²°êµ­ ê²€ìƒ‰ ì¡°ê±´ì¸ í¬í•¨ëœ SQL ì´ í•„ìš” JPA ëŠ” SQL ì„ ì¶”ìƒí™”í•œ JPQL ì´ë¼ëŠ” ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ ì œê³µ SQL ê³¼ ë¬¸ë²• ìœ ì‚¬, SELECT, FROM, WHERE, GROUP BY, HAVING, JOIN ì§€ì› JPQL ì€ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ SQL ì€ ë°ì´í„° ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ public class JpaMain &#123; public static void main(String[] ars) &#123; EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = entityManagerFactory.createEntityManager(); EntityTransaction transaction = em.getTransaction(); transaction.begin(); try &#123; String qlString = &quot;select m from Member m where m.username like &#x27;%kim%&#x27;&quot;; List&lt;Member&gt; result = em.createQuery(qlString, Member.class) .getResultList(); &#125; catch (Exception e) &#123; transaction.rollback(); &#125; finally &#123; em.close(); &#125; entityManagerFactory.close(); &#125;&#125;","text":"ëª©ì°¨ JPA JPQL - Fetch Join JPA JPQL - Projection (Select) JPA JPQL (Java Persistence Query Language) JPA - ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ ê°ì²´ ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ ì¢…ë¥˜ JPQL JPA Criteria QueryDSL ë„¤ì´í‹°ë¸Œ SQL JDBC API ì§ì ‘ ì‚¬ìš©, MyBatis, SrpignjdbcTemplate í•¨ê»˜ ì‚¬ìš© JPQL JPA ë¥¼ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹° ê°ì²´ ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œ ë¬¸ì œëŠ” ê²€ìƒ‰ ì¿¼ë¦¬ ê²€ìƒ‰ì„ í• ë•Œë„ í…Œì´ë¸”ì´ ë‚˜ë‹Œ ì—”í‹°í‹° ê°ì²´ ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ìƒ‰ ëª¨ë“  DB ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™”í•´ì„œ ê²€ìƒ‰í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•„ìš”í•œ ë°ì´í„°ë§Œ DB ì—ì„œ ë¶ˆëŸ¬ì˜¤ë ¤ë©´ ê²°êµ­ ê²€ìƒ‰ ì¡°ê±´ì¸ í¬í•¨ëœ SQL ì´ í•„ìš” JPA ëŠ” SQL ì„ ì¶”ìƒí™”í•œ JPQL ì´ë¼ëŠ” ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ ì œê³µ SQL ê³¼ ë¬¸ë²• ìœ ì‚¬, SELECT, FROM, WHERE, GROUP BY, HAVING, JOIN ì§€ì› JPQL ì€ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ SQL ì€ ë°ì´í„° ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ public class JpaMain &#123; public static void main(String[] ars) &#123; EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = entityManagerFactory.createEntityManager(); EntityTransaction transaction = em.getTransaction(); transaction.begin(); try &#123; String qlString = &quot;select m from Member m where m.username like &#x27;%kim%&#x27;&quot;; List&lt;Member&gt; result = em.createQuery(qlString, Member.class) .getResultList(); &#125; catch (Exception e) &#123; transaction.rollback(); &#125; finally &#123; em.close(); &#125; entityManagerFactory.close(); &#125;&#125; í…Œì´ë¸”ì´ ì•„ë‹Œ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ìƒ‰í•˜ëŠ” ê°ì²´ ì§€í–¥ ì¿¼ë¦¬ SQL ì„ ì¶”ìƒí™” í•´ì„œ íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ SQL ì— ì˜ì¡´ X JPQL ì„ í•œë§ˆë””ë¡œ ì •ì˜í•˜ë©´ ê°ì²´ ì§€í–¥ SQL Hibernate: /* select m from Member m where m.username like &#x27;%kim%&#x27; */ select member0_.MEMBER_ID as MEMBER_I1_4_, member0_.createdBy as createdB2_4_, member0_.createdDate as createdD3_4_, member0_.lastModifiedBy as lastModi4_4_, member0_.lastModifiedDate as lastModi5_4_, member0_.TEAM_ID as TEAM_ID7_4_, member0_.USERNAME as USERNAME6_4_ from Member member0_ where member0_.USERNAME like &#x27;%kim%&#x27; Criteria ë™ì  ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ëŠ”ë° ì‰¬ìš´ ì¥ì ì´ ìˆë‹¤. ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ë‹¨ì ì€ ë„ˆë¬´ ë³µì¡í•˜ë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤. public class JpaMain &#123; public static void main(String[] ars) &#123; EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = entityManagerFactory.createEntityManager(); EntityTransaction transaction = em.getTransaction(); transaction.begin(); try &#123; CriteriaBuilder cb = em.getCriteriaBuilder(); CriteriaQuery&lt;Member&gt; query = cb.createQuery(Member.class); Root&lt;Member&gt; m = query.from(Member.class); CriteriaQuery&lt;Member&gt; cq = query.select(m).where(cb.equal(m.get(&quot;username&quot;), &quot;kim&quot;)); List&lt;Member&gt; resultLit = em.createQuery(cq) .getResultList(); &#125; catch (Exception e) &#123; transaction.rollback(); &#125; finally &#123; em.close(); &#125; entityManagerFactory.close(); &#125;&#125; Hibernate: /* select generatedAlias0 from Member as generatedAlias0 where generatedAlias0.username=:param0 */ select member0_.MEMBER_ID as MEMBER_I1_4_, member0_.createdBy as createdB2_4_, member0_.createdDate as createdD3_4_, member0_.lastModifiedBy as lastModi4_4_, member0_.lastModifiedDate as lastModi5_4_, member0_.TEAM_ID as TEAM_ID7_4_, member0_.USERNAME as USERNAME6_4_ from Member member0_ where member0_.USERNAME=? Query DSL ì†Œê°œë„¤ì´í‹°ë¸Œ SQL ì†Œê°œ JPA ê°€ ì œê³µí•˜ëŠ” SQL ì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ JPQL ë¡œ í•´ê²°í•  ìˆ˜ ì—†ëŠ” íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ì— ì˜ì¡´ì ì¸ ê¸°ëŠ¥ ì˜¤ë¼í´ CONNECT BY íŠ¹ì • DB ë§Œ ì‚¬ìš©í•˜ëŠ” SQL íŒíŠ¸ public class JpaMain &#123; public static void main(String[] ars) &#123; EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = entityManagerFactory.createEntityManager(); EntityTransaction transaction = em.getTransaction(); transaction.begin(); try &#123; em.createNativeQuery(&quot;select MEMBER_ID, city, street, zipcode, USERNAME from MEMBER&quot;) .getResultList(); &#125; catch (Exception e) &#123; transaction.rollback(); &#125; finally &#123; em.close(); &#125; entityManagerFactory.close(); &#125;&#125; /* dynamic native SQL query */ select MEMBER_ID, city, street, zipcode, USERNAME from MEMBER JDBC ì§ì ‘ ì‚¬ìš©, SpringJdbcTemplate ë“± JPA ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ JDBC ì»¤ë„¥ì…˜ì„ ì§ì ‘ ì‚¬ìš©í•˜ê±°ë‚˜, ìŠ¤í”„ë§ JdbcTemplate, ë§ˆì´ë°”í‹°ìŠ¤ ë“±ì„ í•¨ê»˜ ì‚¬ìš© ê°€ëŠ¥ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì ì ˆí•œ ì‹œì ì— ê°•ì œë¡œ í”ŒëŸ¬ì‹œ í•„ìš” flush ê°€ ë˜ëŠ” ì‹œì  commit ì„ ì‹¤í–‰í–ˆì„ ê²½ìš° JPA ê°€ Query ë¥¼ ë‚ ë¦¬ê¸° ì „ ì‹œì ì— ë°œìƒí•œë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"JPA JPQL - Projection (Select)","slug":"jpa/jpa-programming/jpql/projection-select","date":"2022-04-17T19:31:46.000Z","updated":"2024-11-28T13:59:28.058Z","comments":true,"path":"2022/04/18/jpa/jpa-programming/jpql/projection-select/","link":"","permalink":"https://ckck803.github.io/2022/04/18/jpa/jpa-programming/jpql/projection-select/","excerpt":"ëª©ì°¨ JPA JPQL - Fetch Join JPA JPQL - Projection (Select) JPA JPQL (Java Persistence Query Language) JPA - ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ Projection ëŒ€ìƒ Entity, ì„ë² ë””ë“œ íƒ€ì…, ìŠ¤ì¹¼ë¼ íƒ€ì…(ìˆ«ì, ë¬¸ìë“± ê¸°ë³¸ íƒ€ì…) // Entity select m from Member m// Entity select m.team from Member m// ì„ë² ë””ë“œ íƒ€ì…select m.address from Member m// ìŠ¤ì¹¼ë¼ íƒ€ì…select m.username, m.age from Member m","text":"ëª©ì°¨ JPA JPQL - Fetch Join JPA JPQL - Projection (Select) JPA JPQL (Java Persistence Query Language) JPA - ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ Projection ëŒ€ìƒ Entity, ì„ë² ë””ë“œ íƒ€ì…, ìŠ¤ì¹¼ë¼ íƒ€ì…(ìˆ«ì, ë¬¸ìë“± ê¸°ë³¸ íƒ€ì…) // Entity select m from Member m// Entity select m.team from Member m// ì„ë² ë””ë“œ íƒ€ì…select m.address from Member m// ìŠ¤ì¹¼ë¼ íƒ€ì…select m.username, m.age from Member m","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"Spring Batch - ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì •","slug":"spring/spring-batch/job/spring-batch-12-JobLauncherApplicationRunner copy","date":"2022-04-12T06:25:35.000Z","updated":"2024-02-26T15:29:13.257Z","comments":true,"path":"2022/04/12/spring/spring-batch/job/spring-batch-12-JobLauncherApplicationRunner copy/","link":"","permalink":"https://ckck803.github.io/2022/04/12/spring/spring-batch/job/spring-batch-12-JobLauncherApplicationRunner%20copy/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobLauncherApplicationRunner Spring Batch ì‘ì—…ì„ ì‹œì‘í•˜ëŠ” ApplicationRunner ë¡œì„œ BatchAutoConfiguration ì—ì„œ ìƒì„±ëœë‹¤. Spring boot ì—ì„œ ì œê³µí•˜ëŠ” ApplicationRunner ì˜ êµ¬í˜„ì²´ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒì ìœ¼ë¡œ êµ¬ë™ë˜ì ë§ˆì ì‹¤í–‰ëœë‹¤. Bean ìœ¼ë¡œ ë“±ë¡ëœ ëª¨ë“  Job ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. BatchProperties Spring Batch ì˜ í™˜ê²½ ì„¤ì • í´ë˜ìŠ¤ Job ì´ë¦„, ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™” ì„¤ì •, í…Œì´ë¸” Prefix ë“±ì˜ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. application.properties or application.yml íŒŒì¼ì— ì„¤ì •í•œë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobLauncherApplicationRunner Spring Batch ì‘ì—…ì„ ì‹œì‘í•˜ëŠ” ApplicationRunner ë¡œì„œ BatchAutoConfiguration ì—ì„œ ìƒì„±ëœë‹¤. Spring boot ì—ì„œ ì œê³µí•˜ëŠ” ApplicationRunner ì˜ êµ¬í˜„ì²´ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒì ìœ¼ë¡œ êµ¬ë™ë˜ì ë§ˆì ì‹¤í–‰ëœë‹¤. Bean ìœ¼ë¡œ ë“±ë¡ëœ ëª¨ë“  Job ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. BatchProperties Spring Batch ì˜ í™˜ê²½ ì„¤ì • í´ë˜ìŠ¤ Job ì´ë¦„, ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™” ì„¤ì •, í…Œì´ë¸” Prefix ë“±ì˜ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. application.properties or application.yml íŒŒì¼ì— ì„¤ì •í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Job","slug":"Spring/Spring-Batch/Job","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Job/"}],"tags":[]},{"title":"Spring Batch - 13. JobLauncher","slug":"spring/spring-batch/job/spring-batch-13-JobLauncher","date":"2022-04-12T06:25:35.000Z","updated":"2024-02-26T15:29:22.812Z","comments":true,"path":"2022/04/12/spring/spring-batch/job/spring-batch-13-JobLauncher/","link":"","permalink":"https://ckck803.github.io/2022/04/12/spring/spring-batch/job/spring-batch-13-JobLauncher/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobLauncher Batch Job ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ì—­í•  Job ê³¼ JobParameters ë¥¼ ì¸ìë¡œ ë°›ìœ¼ë©° ìš”ì²­ëœ Batch ì‘ì—…ì„ ìˆ˜í–‰í•œ í›„ ìµœì¢… Client ì—ê²Œ JobExecution ì„ ë°˜í™˜í•œë‹¤. Spring Batch ê°€ êµ¬ë™ ë˜ë©´ JobLauncher Bean ì´ ìë™ ìƒì„±ëœë‹¤. JobLauncher ë¥¼ ì´ìš©í•œ Job ì‹¤í–‰ Spring boot Batch ì—ì„œëŠ” JobLauncherApplicationRunner ê°€ ìë™ì ìœ¼ë¡œ JobLauncher ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. ë™ê¸°ì  ì‹¤í–‰ taskExecutor ë¥¼ SyncTaskExecutor ë¡œ ì„¤ì •í•  ê²½ìš° JobExecution ì„ íšë“í•˜ê³  ë°°ì¹˜ ì²˜ë¦¬ë¥¼ ìµœì¢… ì™„ë£Œí•œ í›„ Client ì—ê²Œ JobExecution ì„ ë°˜í™˜í•œë‹¤. ìŠ¤ì¼€ì¤„ëŸ¬ ì— ì˜í•œ ë°°ì¹˜ì²˜ë¦¬ì— ì í•©í•˜ë‹¤. ë¹„ ë™ê¸°ì  ì‹¤í–‰ taksExecutor ê°€ SimpleAsyncTaskExecutor ë¡œ ì„¤ì •í•  ê²½ìš° JobExecution ì„ íšë“í•œ í›„ Client ì—ê²Œ ë°”ë¡œ JobExecution ì„ ë°˜í™˜í•˜ê³  ë°°ì¹˜ì²˜ë¦¬ë¥¼ ì™„ë£Œí•œë‹¤. HTTP ìš”ì²­ ì— ì˜í•œ ë°°ì¹˜ì²˜ë¦¬ì— ì í•©í•˜ë‹¤. ë°°ì¹˜ ì²˜ë¦¬ ì‹œê°„ì´ ê¸¸ì–´ì§ˆ ê²½ìš° ì‘ë‹µì´ ëŠ¦ì–´ì§€ì§€ ì•Šë„ë¡ í•œë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobLauncher Batch Job ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ì—­í•  Job ê³¼ JobParameters ë¥¼ ì¸ìë¡œ ë°›ìœ¼ë©° ìš”ì²­ëœ Batch ì‘ì—…ì„ ìˆ˜í–‰í•œ í›„ ìµœì¢… Client ì—ê²Œ JobExecution ì„ ë°˜í™˜í•œë‹¤. Spring Batch ê°€ êµ¬ë™ ë˜ë©´ JobLauncher Bean ì´ ìë™ ìƒì„±ëœë‹¤. JobLauncher ë¥¼ ì´ìš©í•œ Job ì‹¤í–‰ Spring boot Batch ì—ì„œëŠ” JobLauncherApplicationRunner ê°€ ìë™ì ìœ¼ë¡œ JobLauncher ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. ë™ê¸°ì  ì‹¤í–‰ taskExecutor ë¥¼ SyncTaskExecutor ë¡œ ì„¤ì •í•  ê²½ìš° JobExecution ì„ íšë“í•˜ê³  ë°°ì¹˜ ì²˜ë¦¬ë¥¼ ìµœì¢… ì™„ë£Œí•œ í›„ Client ì—ê²Œ JobExecution ì„ ë°˜í™˜í•œë‹¤. ìŠ¤ì¼€ì¤„ëŸ¬ ì— ì˜í•œ ë°°ì¹˜ì²˜ë¦¬ì— ì í•©í•˜ë‹¤. ë¹„ ë™ê¸°ì  ì‹¤í–‰ taksExecutor ê°€ SimpleAsyncTaskExecutor ë¡œ ì„¤ì •í•  ê²½ìš° JobExecution ì„ íšë“í•œ í›„ Client ì—ê²Œ ë°”ë¡œ JobExecution ì„ ë°˜í™˜í•˜ê³  ë°°ì¹˜ì²˜ë¦¬ë¥¼ ì™„ë£Œí•œë‹¤. HTTP ìš”ì²­ ì— ì˜í•œ ë°°ì¹˜ì²˜ë¦¬ì— ì í•©í•˜ë‹¤. ë°°ì¹˜ ì²˜ë¦¬ ì‹œê°„ì´ ê¸¸ì–´ì§ˆ ê²½ìš° ì‘ë‹µì´ ëŠ¦ì–´ì§€ì§€ ì•Šë„ë¡ í•œë‹¤. public interface JobLauncher &#123; public JobExecution run(Job job, JobParameters jobParameters) throws JobExecutionAlreadyRunningException, JobRestartException, JobInstanceAlreadyCompleteException, JobParametersInvalidException;&#125; ë™ê¸°ì  ë°©ì‹JobLauncher @RestControllerpublic class JobLaunchingController &#123; @Autowired private Job job; @Autowired private JobLauncher jobLauncher; @PostMapping(value = &quot;/batch&quot;) public String launch(@RequestBody Member member) throws Exception &#123; JobParameters jobParameters = new JobParametersBuilder() .addString(&quot;id&quot;, member.getId()) .addDate(&quot;date&quot;, new Date()) .toJobParameters(); jobLauncher.run(job, jobParameters); System.out.println(&quot;Job is completed&quot;); return &quot;batch completed&quot;; &#125;&#125; ì‹¤í–‰ ê²°ê³¼ ë¹„ ë™ê¸°ì  ë°©ì‹ SimpleJobLauncher ëŠ” Bean ìœ¼ë¡œ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤. ë•Œë¬¸ì— BasicBatchConfigurer Bean ì„ ì´ìš©í•´ SimpleJobLauncher ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤. @RestControllerpublic class JobLaunchingController &#123; @Autowired private Job job; @Autowired private JobLauncher simpleLauncher; // ë¹„ ë™ê¸°ì  ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” BasicBatchConfigurer ê°ì²´ê°€ í•„ìš” @Autowired private BasicBatchConfigurer basicBatchConfigurer; @PostMapping(value = &quot;/batch&quot;) public String launch(@RequestBody Member member) throws Exception &#123; JobParameters jobParameters = new JobParametersBuilder() .addString(&quot;id&quot;, member.getId()) .addDate(&quot;date&quot;, new Date()) .toJobParameters(); // ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•  ê²½ìš° ClassCastingException ì˜¤ë¥˜ë¥¼ ë°œìƒí•œë‹¤. SimpleJobLauncher jobLauncher = (SimpleJobLauncher)simpleLauncher; // BasicBatchConfigurer ë¡œë¶€í„° SimpleJobLauncher ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. SimpleJobLauncher jobLauncher = (SimpleJobLauncher) basicBatchConfigurer.getJobLauncher(); jobLauncher.setTaskExecutor(new SimpleAsyncTaskExecutor()); jobLauncher.run(job, jobParameters); System.out.println(&quot;Job is completed&quot;); return &quot;batch completed&quot;; &#125;&#125; ì‹¤í–‰ ê²°ê³¼","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Spring Batch - 12. JobRepository","slug":"spring/spring-batch/job/spring-batch-12-JobRepository","date":"2022-04-12T05:25:35.000Z","updated":"2024-02-26T15:29:18.511Z","comments":true,"path":"2022/04/12/spring/spring-batch/job/spring-batch-12-JobRepository/","link":"","permalink":"https://ckck803.github.io/2022/04/12/spring/spring-batch/job/spring-batch-12-JobRepository/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobRepository Batch ì‘ì—… ì¤‘ì— ìƒì„±ë˜ê±°ë‚˜ ë³€ê²½ë˜ëŠ” ë©”íƒ€ë°ì´í„°ë“¤ì„ ì €ì¥í•˜ëŠ” ì €ì¥ì†Œ ì—­í•  JobRepositoryëŠ” ìŠ¤í”„ë§ ë°°ì¹˜ì˜ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì¤‘ í•˜ë‚˜ë¡œ, Jobì„ ì‹¤í–‰í•˜ê±°ë‚˜ ì¬ì‹œì‘í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ ë©”íƒ€ë°ì´í„°ì—ëŠ” Jobì˜ ì‹¤í–‰ ìƒíƒœ, Jobì˜ ì‹¤í–‰ì— í•„ìš”í•œ íŒŒë¼ë¯¸í„°, ì‹¤í–‰ ì‹œê°„ ë“±ì˜ ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤. JobRepositoryëŠ” Jobì˜ ì‹¤í–‰ ìƒíƒœë¥¼ ì¶”ì í•˜ê³ , Jobì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê³ , ì¬ì‹œì‘ì„ ìœ„í•´ ì´ì „ ì‹¤í–‰ ì •ë³´ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤. Job ì´ ì–¸ì œ ìˆ˜í–‰ëê³ , ì–¸ì œ ëë‚¬ìœ¼ë©°, ëª‡ ë²ˆ ì‹¤í–‰ëê³  ì‹¤í–‰ì— ëŒ€í•œ ê²°ê³¼ ë“±ì˜ ë°°ì¹˜ ì‘ì—… ì‹¤í–‰ê³¼ ê´€ë ¨ëœ ëª¨ë“  Meta Data ë¥¼ ì €ì¥í•œë‹¤. JobLauncher, Job, Step êµ¬í˜„ì²´ ë‚´ë¶€ì—ì„œ CRUD ê¸°ëŠ¥ì„ ì²˜ë¦¬í•œë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobRepository Batch ì‘ì—… ì¤‘ì— ìƒì„±ë˜ê±°ë‚˜ ë³€ê²½ë˜ëŠ” ë©”íƒ€ë°ì´í„°ë“¤ì„ ì €ì¥í•˜ëŠ” ì €ì¥ì†Œ ì—­í•  JobRepositoryëŠ” ìŠ¤í”„ë§ ë°°ì¹˜ì˜ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì¤‘ í•˜ë‚˜ë¡œ, Jobì„ ì‹¤í–‰í•˜ê±°ë‚˜ ì¬ì‹œì‘í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ ë©”íƒ€ë°ì´í„°ì—ëŠ” Jobì˜ ì‹¤í–‰ ìƒíƒœ, Jobì˜ ì‹¤í–‰ì— í•„ìš”í•œ íŒŒë¼ë¯¸í„°, ì‹¤í–‰ ì‹œê°„ ë“±ì˜ ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤. JobRepositoryëŠ” Jobì˜ ì‹¤í–‰ ìƒíƒœë¥¼ ì¶”ì í•˜ê³ , Jobì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê³ , ì¬ì‹œì‘ì„ ìœ„í•´ ì´ì „ ì‹¤í–‰ ì •ë³´ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤. Job ì´ ì–¸ì œ ìˆ˜í–‰ëê³ , ì–¸ì œ ëë‚¬ìœ¼ë©°, ëª‡ ë²ˆ ì‹¤í–‰ëê³  ì‹¤í–‰ì— ëŒ€í•œ ê²°ê³¼ ë“±ì˜ ë°°ì¹˜ ì‘ì—… ì‹¤í–‰ê³¼ ê´€ë ¨ëœ ëª¨ë“  Meta Data ë¥¼ ì €ì¥í•œë‹¤. JobLauncher, Job, Step êµ¬í˜„ì²´ ë‚´ë¶€ì—ì„œ CRUD ê¸°ëŠ¥ì„ ì²˜ë¦¬í•œë‹¤. JobRepository ì¸í„°í˜ì´ìŠ¤JobRepository ì¸í„°í˜ì´ìŠ¤ëŠ” JobInstance ì™€ JobExecution ì„ ìƒì„±í•˜ê±°ë‚˜ ê¸°ì¡´ì— ìƒì„±ëœ ê°ì²´ê°€ ì„ ê²½ìš° ê°€ì ¸ì™€ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì§€ì›í•œë‹¤. public interface JobRepository &#123; boolean isJobInstanceExists(String jobName, JobParameters jobParameters); JobInstance createJobInstance(String jobName, JobParameters jobParameters); JobExecution createJobExecution(JobInstance jobInstance, JobParameters jobParameters, String jobConfigurationLocation); JobExecution createJobExecution(String jobName, JobParameters jobParameters) throws JobExecutionAlreadyRunningException, JobRestartException, JobInstanceAlreadyCompleteException; void update(JobExecution jobExecution); void add(StepExecution stepExecution); void addAll(Collection&lt;StepExecution&gt; stepExecutions); void update(StepExecution stepExecution); void updateExecutionContext(StepExecution stepExecution); void updateExecutionContext(JobExecution jobExecution); @Nullable StepExecution getLastStepExecution(JobInstance jobInstance, String stepName); int getStepExecutionCount(JobInstance jobInstance, String stepName); @Nullable JobExecution getLastJobExecution(String jobName, JobParameters jobParameters);&#125; JobRepository ì„¤ì •@EnableBatchProcessing ë¥¼ ì„ ì–¸í•˜ë©´ JobRepository ê°€ ìë™ìœ¼ë¡œ Bean ìœ¼ë¡œ ë“±ë¡ë©ë‹ˆë‹¤. BatcConfigurer ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê±°ë‚˜ BasicBatchConfigurer ë¥¼ ìƒì†í•´ì„œ JobRepository ì„¤ì •ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JDBC ë°©ì‹ìœ¼ë¡œ ì„¤ì • - JobRepositoryFactoryBean ë‚´ë¶€ì ìœ¼ë¡œ AOP ê¸°ìˆ ì„ í†µí•´ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ í•´ì£¼ê³  ìˆë‹¤. íŠ¸ëœì­ì…˜ isolation ì˜ ê¸°ë³¸ê°’ì€ SERIALIZEBLE ë¡œ ìµœê³  ìˆ˜ì¤€, ë‹¤ë¥¸ ë ˆë²¨ (READ_COMMITED, REPEATABLE_READ) ë¡œ ì§€ì •ì´ ê°€ëŠ¥í•˜ë‹¤. ë©”íƒ€í…Œì´ë¸”ì˜ Table Prefix ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. In Memory ë°©ì‹ìœ¼ë¡œ ì„¤ì • - MapJobRepositoryFactoryBean ì„±ëŠ¥ ë“±ì˜ ì´ìœ ë¡œ ë„ë©”ì¸ ì˜¤ë¸Œì íŠ¸ë¥¼ êµ³ì´ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³  ì‹¶ì§€ ì•Šì€ ê²½ìš° ë³´í†µ Test ë‚˜ í”„ë¡œí† íƒ€ì…ì˜ ë¹ ë¥¸ ê°œë°œì´ í•„ìš”í•  ë•Œ ì‚¬ìš©í•œë‹¤. @Componentpublic class JobRepositoryListener implements JobExecutionListener &#123; @Autowired private JobRepository jobRepository; @Override public void beforeJob(JobExecution jobExecution) &#123; &#125; @Override public void afterJob(JobExecution jobExecution) &#123; String jobName = jobExecution.getJobInstance().getJobName(); JobParameters jobParameters = new JobParametersBuilder() .addString(&quot;requestDate&quot;, &quot;20210102&quot;) .toJobParameters(); JobExecution lastExecution = jobRepository.getLastJobExecution(jobName, jobParameters); if(lastExecution != null) &#123; for (StepExecution execution : lastExecution.getStepExecutions()) &#123; BatchStatus status = execution.getStatus(); System.out.println(&quot;BatchStatus = &quot; + status.isRunning()); System.out.println(&quot;BatchStatus = &quot; + status.name()); &#125; &#125; &#125;&#125; JobRepository ì„¤ì • ë³€ê²½ BatcConfigurer ë¥¼ êµ¬í˜„í•˜ê±°ë‚˜ BasicBatchConfigurer ë¥¼ ìƒì†ì„ í†µí•´ JobRepository ì„¤ì •ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. JobRepositoryFactoryBean ì„ í†µí•´ DataSource , Transaction , Isolation Level ë“±ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. @Configurationpublic class CustomBatchConfigurer extends BasicBatchConfigurer &#123; private final DataSource dataSource; protected CustomBatchConfigurer(BatchProperties properties, DataSource dataSource, TransactionManagerCustomizers transactionManagerCustomizers) &#123; super(properties, dataSource, transactionManagerCustomizers); this.dataSource = dataSource; &#125; @Override protected JobRepository createJobRepository() throws Exception &#123; JobRepositoryFactoryBean factory = new JobRepositoryFactoryBean(); factory.setDataSource(dataSource); factory.setTransactionManager(getTransactionManager()); factory.setIsolationLevelForCreate(&quot;ISOLATION_READ_COMMITED&quot;); // isolation ìˆ˜ì¤€ì„ ë³€ê²½í•œë‹¤. factory.setTablePrefix(&quot;SYSTEM_&quot;); // Spring Batch ê°€ ì‚¬ìš©í•˜ëŠ” í…Œì´ë¸” Prefix ë¥¼ ì„¤ì •í•œë‹¤. ê¸°ë³¸ê°’ì€ â€œBATCH_â€, factory.setMaxVarCharLength(1000); // varchar ìµœëŒ€ ê¸¸ì´(ê¸°ë³¸ê°’ 2500) return factory.getObject(); // Proxy ê°ì²´ê°€ ìƒì„±ë¨ (íŠ¸ëœì­ì…˜ Advice ì ìš© ë“±ì„ ìœ„í•´ AOP ê¸°ìˆ  ì ìš©) &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Spring Batch - 11. ExecutionContext","slug":"spring/spring-batch/spring-batch-11-ExecutionContext","date":"2022-04-12T03:25:35.000Z","updated":"2024-02-26T15:30:43.292Z","comments":true,"path":"2022/04/12/spring/spring-batch/spring-batch-11-ExecutionContext/","link":"","permalink":"https://ckck803.github.io/2022/04/12/spring/spring-batch/spring-batch-11-ExecutionContext/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing ExecutionContext í”„ë ˆìŒì›Œí¬ì—ì„œ ìœ ì§€ ë° ê´€ë¦¬í•˜ëŠ” Key&#x2F;Value ì»¬ë ‰ì…˜ìœ¼ë¡œ JobExecution, StepExecution ê°ì²´ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ê³µìœ  ê°ì²´ DB ì— ì§ë ¬í™” í•œ ê°’ìœ¼ë¡œ ì €ì¥ëœë‹¤. Job ì¬ ì‹œì‘ì‹œ ì´ë¯¸ ì²˜ë¦¬í•œ Row ë°ì´í„°ëŠ” ê±´ë„ˆë›°ê³  ì´í›„ë¡œ ìˆ˜í–‰í•˜ë„ë¡ í•  ë•Œ ìƒíƒœ ì •ë³´ë¥¼ í™œìš©í•œë‹¤. ExecutionContext ëŠ” Job ë˜ëŠ” Step ì˜ ì‹¤í–‰ ì¤‘ì— ë°ì´í„°ë¥¼ ê³µìœ í•˜ê±°ë‚˜ ì €ì¥í•˜ê¸° ìœ„í•œ ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ JobExecution, StepExecution ë° JobParameter ì™€ í•¨ê»˜ ì‚¬ìš©ë©ë‹ˆë‹¤. ExecutionContext ëŠ” JobExecutionContext ì™€ StepExecutionContext ë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤. JobExecutionContext ëŠ” Job ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‚˜íƒ€ë‚´ë©°, StepExecutionContext ëŠ” Step ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. JobExecutionContext ëŠ” ëª¨ë“  Stepì—ì„œ ê³µìœ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ StepExecutionContext ëŠ” Step ê°„ì— ê³µìœ ë˜ì§€ ì•Šìœ¼ë©°, ê° Step ì—ì„œ ê³ ìœ í•œ ExecutionContext ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ExecutionContext ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Map&lt;String, Object&gt; íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì§ì ‘ ë°ì´í„°ë¥¼ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Job ë˜ëŠ” Step ì‹¤í–‰ ì¤‘ì— ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì‹¶ì€ ê²½ìš°, ExecutionContext ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing ExecutionContext í”„ë ˆìŒì›Œí¬ì—ì„œ ìœ ì§€ ë° ê´€ë¦¬í•˜ëŠ” Key&#x2F;Value ì»¬ë ‰ì…˜ìœ¼ë¡œ JobExecution, StepExecution ê°ì²´ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ê³µìœ  ê°ì²´ DB ì— ì§ë ¬í™” í•œ ê°’ìœ¼ë¡œ ì €ì¥ëœë‹¤. Job ì¬ ì‹œì‘ì‹œ ì´ë¯¸ ì²˜ë¦¬í•œ Row ë°ì´í„°ëŠ” ê±´ë„ˆë›°ê³  ì´í›„ë¡œ ìˆ˜í–‰í•˜ë„ë¡ í•  ë•Œ ìƒíƒœ ì •ë³´ë¥¼ í™œìš©í•œë‹¤. ExecutionContext ëŠ” Job ë˜ëŠ” Step ì˜ ì‹¤í–‰ ì¤‘ì— ë°ì´í„°ë¥¼ ê³µìœ í•˜ê±°ë‚˜ ì €ì¥í•˜ê¸° ìœ„í•œ ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ JobExecution, StepExecution ë° JobParameter ì™€ í•¨ê»˜ ì‚¬ìš©ë©ë‹ˆë‹¤. ExecutionContext ëŠ” JobExecutionContext ì™€ StepExecutionContext ë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤. JobExecutionContext ëŠ” Job ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‚˜íƒ€ë‚´ë©°, StepExecutionContext ëŠ” Step ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. JobExecutionContext ëŠ” ëª¨ë“  Stepì—ì„œ ê³µìœ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ StepExecutionContext ëŠ” Step ê°„ì— ê³µìœ ë˜ì§€ ì•Šìœ¼ë©°, ê° Step ì—ì„œ ê³ ìœ í•œ ExecutionContext ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ExecutionContext ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Map&lt;String, Object&gt; íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì§ì ‘ ë°ì´í„°ë¥¼ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Job ë˜ëŠ” Step ì‹¤í–‰ ì¤‘ì— ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì‹¶ì€ ê²½ìš°, ExecutionContext ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Batchì—ì„œ ExecutionContext ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒ Step ì—ì„œ ì´ì „ Step ì—ì„œ ì²˜ë¦¬ëœ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê±°ë‚˜ Job ì—ì„œ ì—¬ëŸ¬ Step ì—ì„œ ê³µìœ í•˜ëŠ” ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ExecutionContext ë¥¼ ì‚¬ìš©í•˜ì—¬ Job ë˜ëŠ” Step ê°„ ë°ì´í„° ê³µìœ ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ExecutionContext ê³µìœ  ë²”ìœ„ JobExecutionContext ë²”ìœ„ ê° Job ì˜ JobExecution ì— ì €ì¥ë˜ë©° Job ê°„ ì„œë¡œ ê³µìœ ê°€ ì•ˆë˜ë©° í•´ë‹¹ Job ì˜ Step ê°„ ì„œë¡œ ê³µìœ ê°€ ê°€ëŠ¥í•˜ë‹¤. StepExecutionContext ë²”ìœ„ ê° Step ì˜ StepExecution ì— ì €ì¥ë˜ë©° Step ê°„ ì„œë¡œ ê³µìœ ê°€ ì•ˆëœë‹¤. @RequiredArgsConstructor@Configurationpublic class ExecutionContextConfiguration &#123; private final JobBuilderFactory jobBuilderFactory; private final StepBuilderFactory stepBuilderFactory; private final ExecutionContextTasklet1 executionContextTasklet1; private final ExecutionContextTasklet2 executionContextTasklet2; private final ExecutionContextTasklet3 executionContextTasklet3; private final ExecutionContextTasklet4 executionContextTasklet4; @Bean public Job BatchJob() &#123; return this.jobBuilderFactory.get(&quot;Job&quot;) .start(step1()) .next(step2()) .next(step3()) .next(step4()) .build(); &#125; @Bean public Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(executionContextTasklet1) .build(); &#125; @Bean public Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet(executionContextTasklet2) .build(); &#125; @Bean public Step step3() &#123; return stepBuilderFactory.get(&quot;step3&quot;) .tasklet(executionContextTasklet3) .build(); &#125; @Bean public Step step4() &#123; return stepBuilderFactory.get(&quot;step4&quot;) .tasklet(executionContextTasklet4) .build(); &#125;&#125; @Componentpublic class ExecutionContextTasklet1 implements Tasklet &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; ExecutionContext jobExecutionContext = contribution.getStepExecution().getJobExecution().getExecutionContext(); ExecutionContext stepExecutionContext = contribution.getStepExecution().getExecutionContext(); String jobName = chunkContext.getStepContext().getStepExecution().getJobExecution().getJobInstance().getJobName(); String stepName = chunkContext.getStepContext().getStepExecution().getStepName(); if(jobExecutionContext.get(&quot;jobName&quot;) == null)&#123; jobExecutionContext.put(&quot;jobName&quot;, jobName); &#125; if(stepExecutionContext.get(&quot;stepName&quot;) == null) &#123; stepExecutionContext.put(&quot;stepName&quot;, stepName); &#125; System.out.println(&quot;jobName: &quot; + jobExecutionContext.get(&quot;jobName&quot;)); System.out.println(&quot;stepName: &quot; + stepExecutionContext.get(&quot;stepName&quot;)); return RepeatStatus.FINISHED; &#125;&#125; @Componentpublic class ExecutionContextTasklet2 implements Tasklet &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; ExecutionContext jobExecutionContext = chunkContext.getStepContext().getStepExecution().getJobExecution().getExecutionContext(); ExecutionContext stepExecutionContext = chunkContext.getStepContext().getStepExecution().getExecutionContext(); System.out.println(&quot;jobName: &quot; + jobExecutionContext.get(&quot;jobName&quot;)); System.out.println(&quot;stepName: &quot; + stepExecutionContext.get(&quot;stepName&quot;)); String stepName = chunkContext.getStepContext().getStepExecution().getStepName(); if(stepExecutionContext.get(&quot;stepName&quot;) == null) &#123; stepExecutionContext.put(&quot;stepName&quot;, stepName); &#125; return RepeatStatus.FINISHED; &#125;&#125; @Componentpublic class ExecutionContextTasklet3 implements Tasklet &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; Object name = chunkContext.getStepContext().getStepExecution().getJobExecution().getExecutionContext().get(&quot;name&quot;); if(name == null)&#123; chunkContext.getStepContext().getStepExecution().getJobExecution().getExecutionContext().put(&quot;name&quot;, &quot;user1&quot;); throw new RuntimeException(&quot;step has failed&quot;); &#125; return RepeatStatus.FINISHED; &#125;&#125; @Componentpublic class ExecutionContextTasklet4 implements Tasklet &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; System.out.println(&quot;name: &quot; + chunkContext.getStepContext().getStepExecution().getJobExecution().getExecutionContext().get(&quot;name&quot;)); return RepeatStatus.FINISHED; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Spring Batch - 10. StepContribution","slug":"spring/spring-batch/step/spring-batch-10-StepContribution","date":"2022-04-12T02:25:35.000Z","updated":"2024-02-26T15:30:19.407Z","comments":true,"path":"2022/04/12/spring/spring-batch/step/spring-batch-10-StepContribution/","link":"","permalink":"https://ckck803.github.io/2022/04/12/spring/spring-batch/step/spring-batch-10-StepContribution/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing StepContribution Chunk í”„ë¡œì„¸ìŠ¤ì˜ ë³€ê²½ ì‚¬í•­ì„ ë²„í¼ë§ í•œ í›„ StepExecution ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê°ì²´ Chunk Commit ì§ì „ì— StepExecution ì˜ apply ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ìƒíƒœë¥´ë¥´ ì—…ë°ì´íŠ¸ í•œë‹¤. ExitStatus ì˜ ê¸°ë³¸ ì¢…ë£Œ ì½”ë“œ ì™¸ ì‚¬ìš©ì ì •ì˜ ì¢…ë£Œ ì½”ë“œë¥¼ ìƒì„±í•´ì„œ ì ìš©í•  ìˆ˜ ìˆë‹¤. TaskletStep í´ë˜ìŠ¤ë‚´ doInTransaction ë©”ì„œë“œì—ì„œ StepExecution ê°ì²´ë¥¼ ì´ìš©í•´ StepContribution ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. Tasklet ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. TaskletStep.java","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing StepContribution Chunk í”„ë¡œì„¸ìŠ¤ì˜ ë³€ê²½ ì‚¬í•­ì„ ë²„í¼ë§ í•œ í›„ StepExecution ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê°ì²´ Chunk Commit ì§ì „ì— StepExecution ì˜ apply ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ìƒíƒœë¥´ë¥´ ì—…ë°ì´íŠ¸ í•œë‹¤. ExitStatus ì˜ ê¸°ë³¸ ì¢…ë£Œ ì½”ë“œ ì™¸ ì‚¬ìš©ì ì •ì˜ ì¢…ë£Œ ì½”ë“œë¥¼ ìƒì„±í•´ì„œ ì ìš©í•  ìˆ˜ ìˆë‹¤. TaskletStep í´ë˜ìŠ¤ë‚´ doInTransaction ë©”ì„œë“œì—ì„œ StepExecution ê°ì²´ë¥¼ ì´ìš©í•´ StepContribution ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. Tasklet ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. TaskletStep.java @Overridepublic RepeatStatus doInTransaction(TransactionStatus status) &#123; TransactionSynchronizationManager.registerSynchronization(this); RepeatStatus result = RepeatStatus.CONTINUABLE; // StepContribution ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. StepContribution contribution = stepExecution.createStepContribution(); chunkListener.beforeChunk(chunkContext); oldVersion = new StepExecution(stepExecution.getStepName(), stepExecution.getJobExecution()); copy(stepExecution, oldVersion); try &#123; try &#123; try &#123; // Tasklet ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. result = tasklet.execute(contribution, chunkContext); if (result == null) &#123; result = RepeatStatus.FINISHED; &#125; &#125; catch (Exception e) &#123; if (transactionAttribute.rollbackOn(e)) &#123; chunkContext.setAttribute(ChunkListener.ROLLBACK_EXCEPTION_KEY, e); throw e; &#125; &#125; &#125; finally &#123; try &#123; semaphore.acquire(); locked = true; &#125; catch (InterruptedException e) &#123; logger.error(&quot;Thread interrupted while locking for repository update&quot;); stepExecution.setStatus(BatchStatus.STOPPED); stepExecution.setTerminateOnly(); Thread.currentThread().interrupt(); &#125; if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Applying contribution: &quot; + contribution); &#125; // StepContribution ê²°ê³¼ë¥¼ StepExecution ê°ì²´ë‚´ì— ì €ì¥í•œë‹¤. stepExecution.apply(contribution); &#125; stepExecutionUpdated = true; stream.update(stepExecution.getExecutionContext()); try &#123; // Going to attempt a commit. If it fails this flag will // stay false and we can use that later. getJobRepository().updateExecutionContext(stepExecution); stepExecution.incrementCommitCount(); if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Saving step execution before commit: &quot; + stepExecution); &#125; getJobRepository().update(stepExecution); &#125; catch (Exception e) &#123; // If we get to here there was a problem saving the step // execution and we have to fail. String msg = &quot;JobRepository failure forcing rollback&quot;; logger.error(msg, e); throw new FatalStepExecutionException(msg, e); &#125; &#125; catch (Error e) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Rollback for Error: &quot; + e.getClass().getName() + &quot;: &quot; + e.getMessage()); &#125; rollback(stepExecution); throw e; &#125; catch (RuntimeException e) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Rollback for RuntimeException: &quot; + e.getClass().getName() + &quot;: &quot; + e.getMessage()); &#125; rollback(stepExecution); throw e; &#125; catch (Exception e) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Rollback for Exception: &quot; + e.getClass().getName() + &quot;: &quot; + e.getMessage()); &#125; rollback(stepExecution); // Allow checked exceptions throw new UncheckedTransactionException(e); &#125; return result;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"}],"tags":[]},{"title":"Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸”","slug":"spring/spring-batch/step/spring-batch-09-StepExecution","date":"2022-04-12T01:25:35.000Z","updated":"2024-02-26T15:30:15.064Z","comments":true,"path":"2022/04/12/spring/spring-batch/step/spring-batch-09-StepExecution/","link":"","permalink":"https://ckck803.github.io/2022/04/12/spring/spring-batch/step/spring-batch-09-StepExecution/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing StepExecution Step ì— ëŒ€í•œ í•œë²ˆì˜ ì‹œë„ë¥¼ ì˜ë¯¸í•˜ëŠ” ê°ì²´ë¡œì„œ Step ì‹¤í–‰ ì¤‘ì— ë°œìƒí•œ ì •ë³´ë“¤ì„ ì €ì¥í•˜ê³  ìˆëŠ” ê°ì²´BATCH_STEP_EXECUTION í…Œì´ë¸”ê³¼ ë§¤í•‘ëœë‹¤. StepExecution ê°ì²´ëŠ” Step ì´ ë§¤ë²ˆ ì‹œë„ë  ë•Œë§ˆë‹¤ ê° Step ë³„ë¡œ ìƒì„±ë˜ë©° JobRepository ë¥¼ í†µí•´ ì €ì¥ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹¤í–‰ ì¤‘ì¸ Stepì˜ ì •ë³´ë¥¼ ì¶”ì í•˜ê³ , í•„ìš”í•œ ê²½ìš° ì‹¤í–‰ì„ ì¬ê°œí•˜ê±°ë‚˜ ë¡¤ë°±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Job ì´ ì¬ì‹œì‘ í•˜ë”ë¼ë„ ì´ë¯¸ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœ Step ì€ ì¬ ì‹¤í–‰ë˜ì§€ ì•Šê³  ì‹¤íŒ¨í•œ Step ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ì „ ë‹¨ê³„ Step ì´ ì‹¤íŒ¨í•´ì„œ í˜„ì¬ Step ì„ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ StepExecetoin ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤. StepExecution ì¸í„°í˜ì´ìŠ¤public interface StepExecution &#123; public long getStepExecutionId(); public String getStepName(); public BatchStatus getBatchStatus(); public Date getStartTime(); public Date getEndTime(); public String getExitStatus(); public Serializable getPersistentUserData(); public Metric[] getMetrics();&#125;","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing StepExecution Step ì— ëŒ€í•œ í•œë²ˆì˜ ì‹œë„ë¥¼ ì˜ë¯¸í•˜ëŠ” ê°ì²´ë¡œì„œ Step ì‹¤í–‰ ì¤‘ì— ë°œìƒí•œ ì •ë³´ë“¤ì„ ì €ì¥í•˜ê³  ìˆëŠ” ê°ì²´BATCH_STEP_EXECUTION í…Œì´ë¸”ê³¼ ë§¤í•‘ëœë‹¤. StepExecution ê°ì²´ëŠ” Step ì´ ë§¤ë²ˆ ì‹œë„ë  ë•Œë§ˆë‹¤ ê° Step ë³„ë¡œ ìƒì„±ë˜ë©° JobRepository ë¥¼ í†µí•´ ì €ì¥ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹¤í–‰ ì¤‘ì¸ Stepì˜ ì •ë³´ë¥¼ ì¶”ì í•˜ê³ , í•„ìš”í•œ ê²½ìš° ì‹¤í–‰ì„ ì¬ê°œí•˜ê±°ë‚˜ ë¡¤ë°±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Job ì´ ì¬ì‹œì‘ í•˜ë”ë¼ë„ ì´ë¯¸ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœ Step ì€ ì¬ ì‹¤í–‰ë˜ì§€ ì•Šê³  ì‹¤íŒ¨í•œ Step ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ì „ ë‹¨ê³„ Step ì´ ì‹¤íŒ¨í•´ì„œ í˜„ì¬ Step ì„ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ StepExecetoin ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤. StepExecution ì¸í„°í˜ì´ìŠ¤public interface StepExecution &#123; public long getStepExecutionId(); public String getStepName(); public BatchStatus getBatchStatus(); public Date getStartTime(); public Date getEndTime(); public String getExitStatus(); public Serializable getPersistentUserData(); public Metric[] getMetrics();&#125; JobExecution ê³¼ì˜ ê´€ê³„ Step ì˜ StepExecution ì´ ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œ ë˜ì–´ì•¼ JobExecution ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œëœë‹¤. Step ì˜ StepExecution ì¤‘ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ JobExecution ì€ ì‹¤íŒ¨í•œë‹¤. Job &amp; Step ì´í•´í•˜ê¸° Job ê³¼ JobParamter ë¥¼ ì´ìš©í•´ JobInstance ë¥¼ ìƒì„± í›„ ì‹¤í–‰ì‹œ JobExecution ì„ ìƒì„±í•œë‹¤. JobExecution ì´ ì‹¤í–‰ë˜ë©´ ê° Step ë³„ë¡œ StepExecution ì´ ìƒì„±ëœë‹¤. ê°™ì€ Job ë‚´ StepExecution ì˜ Job ì •ë³´ëŠ” ë™ì¼í•˜ë‹¤. ê° Step ë³„ë¡œ ê´€ë¦¬ë˜ëŠ” ê°’ì€ ì„œë¡œ ìƒì´í•˜ë‹¤. StepExecution ì´ ëª¨ë‘ COMPLETED ë¡œ ì™„ë£Œëœ ê²°ìš° JobExecution ìƒíƒœë„ COMPLETED ë¡œ ì™„ë£Œëœë‹¤. StepExecution ì´ í•˜ë‚˜ë¼ë„ FAILED ë¡œ ëë‚  ê²½ìš° JobExecution ìƒíƒœëŠ” FAILED ìƒíƒœê°€ ëœë‹¤. @RequiredArgsConstructor@Configurationpublic class StepExecutionConfiguration &#123; private final JobBuilderFactory jobBuilderFactory; private final StepBuilderFactory stepBuilderFactory; @Bean public Job BatchJob() &#123; return this.jobBuilderFactory.get(&quot;Job&quot;) .start(step1()) .next(step2()) .build(); &#125; @Bean public Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; System.out.println(&quot;step1 has executed&quot;); return RepeatStatus.FINISHED; &#125; &#125;) .build(); &#125; @Bean public Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet((contribution, chunkContext) -&gt; &#123; System.out.println(&quot;step2 has executed&quot;); return RepeatStatus.FINISHED; &#125;) .build(); &#125; /* @Bean public Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(executionContextTasklet1) .build(); &#125; @Bean public Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet(executionContextTasklet2) .build(); &#125; @Bean public Step step3() &#123; return stepBuilderFactory.get(&quot;step3&quot;) .tasklet(executionContextTasklet3) .build(); &#125;*/&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"}],"tags":[]},{"title":"Spring Batch - 08. Step","slug":"spring/spring-batch/step/spring-batch-08-Step","date":"2022-04-12T00:25:35.000Z","updated":"2024-02-26T15:30:11.748Z","comments":true,"path":"2022/04/12/spring/spring-batch/step/spring-batch-08-Step/","link":"","permalink":"https://ckck803.github.io/2022/04/12/spring/spring-batch/step/spring-batch-08-Step/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing Step Batch Job ì„ êµ¬ì„±í•˜ëŠ” ë…ë¦½ì ì¸ í•˜ë‚˜ì˜ ë‹¨ê³„ë¡œì„œ ì‹¤ì œ ë°°ì¹˜ ì²˜ë¦¬ë¥¼ ì •ì˜í•˜ê³  ì»¨íŠ¸ë¡¤í•˜ëŠ” ë° í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ë„ë©”ì¸ ê°ì²´ ë‹¨ìˆœí•œ ë‹¨ì¼ í…ŒìŠ¤í¬ ë¿ ì•„ë¦¬ë‚˜ ì…ë ¥, ì²˜ë¦¬ ê·¸ë¦¬ê³  ì¶œë ¥ê³¼ ê´€ë ¨ëœ ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•˜ëŠ” ëª¨ë“  ì„¤ì •ë“¤ì„ ë‹´ê³  ìˆë‹¤. ë°°ì¹˜ ì‘ì—…ì„ ì–´ë–»ê²Œ êµ¬ì„±í•˜ê³  ì‹¤í–‰í•  ê²ƒì¸ì§€ Job ì˜ ì„¸ë¶€ ì‘ì—…ì„ Task ê¸°ë°˜ìœ¼ë¡œ ì„¤ì •í•˜ê³  ëª…ì„¸í•´ ë†“ì€ ê°ì²´ ëª¨ë“  Job ì€ í•˜ë‚˜ ì´ìƒì˜ step ìœ¼ë¡œ êµ¬ì„±ëœë‹¤. Stepì€ í•˜ë‚˜ ì´ìƒì˜ Batch ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë…¼ë¦¬ì ì¸ ë‹¨ìœ„ì…ë‹ˆë‹¤. ê° Stepì€ í•˜ë‚˜ì˜ Tasklet ë˜ëŠ” í•˜ë‚˜ ì´ìƒì˜ Reader, Processor ë° Writer êµ¬ì„± ìš”ì†Œë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ReaderëŠ” ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì½ê³  ProcessorëŠ” ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê³  WriterëŠ” ê°€ê³µëœ ë°ì´í„°ë¥¼ ê²°ê³¼ ì €ì¥ì†Œì— ì”ë‹ˆë‹¤. ì´ëŸ¬í•œ êµ¬ì„± ìš”ì†ŒëŠ” ì¼ë ¨ì˜ ìŠ¤í…ìœ¼ë¡œ ì—°ê²°ë˜ì–´ Batch ì‘ì—…ì˜ íë¦„ì„ ì œì–´í•©ë‹ˆë‹¤. Stepì€ ê° ìŠ¤í…ì˜ ì‹¤í–‰ ì „&#x2F;í›„ì— ìˆ˜í–‰í•´ì•¼ í•  ì‘ì—…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Taskletë„ ì§€ì›í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤í…ì´ ì‹¤í–‰ë˜ê¸° ì „ì— ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ë¹„ì›Œì•¼ í•˜ëŠ” ê²½ìš°, ì´ëŸ¬í•œ ì‘ì—…ì„ Taskletì— í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring BatchëŠ” ìŠ¤í… ê°„ì— ë°ì´í„°ë¥¼ ê³µìœ í•˜ëŠ” ë°©ë²•ë„ ì œê³µí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í•˜ë‚˜ì˜ ìŠ¤í…ì´ ì²˜ë¦¬í•œ ê²°ê³¼ë¥¼ ë‹¤ìŒ ìŠ¤í…ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing Step Batch Job ì„ êµ¬ì„±í•˜ëŠ” ë…ë¦½ì ì¸ í•˜ë‚˜ì˜ ë‹¨ê³„ë¡œì„œ ì‹¤ì œ ë°°ì¹˜ ì²˜ë¦¬ë¥¼ ì •ì˜í•˜ê³  ì»¨íŠ¸ë¡¤í•˜ëŠ” ë° í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ë„ë©”ì¸ ê°ì²´ ë‹¨ìˆœí•œ ë‹¨ì¼ í…ŒìŠ¤í¬ ë¿ ì•„ë¦¬ë‚˜ ì…ë ¥, ì²˜ë¦¬ ê·¸ë¦¬ê³  ì¶œë ¥ê³¼ ê´€ë ¨ëœ ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•˜ëŠ” ëª¨ë“  ì„¤ì •ë“¤ì„ ë‹´ê³  ìˆë‹¤. ë°°ì¹˜ ì‘ì—…ì„ ì–´ë–»ê²Œ êµ¬ì„±í•˜ê³  ì‹¤í–‰í•  ê²ƒì¸ì§€ Job ì˜ ì„¸ë¶€ ì‘ì—…ì„ Task ê¸°ë°˜ìœ¼ë¡œ ì„¤ì •í•˜ê³  ëª…ì„¸í•´ ë†“ì€ ê°ì²´ ëª¨ë“  Job ì€ í•˜ë‚˜ ì´ìƒì˜ step ìœ¼ë¡œ êµ¬ì„±ëœë‹¤. Stepì€ í•˜ë‚˜ ì´ìƒì˜ Batch ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë…¼ë¦¬ì ì¸ ë‹¨ìœ„ì…ë‹ˆë‹¤. ê° Stepì€ í•˜ë‚˜ì˜ Tasklet ë˜ëŠ” í•˜ë‚˜ ì´ìƒì˜ Reader, Processor ë° Writer êµ¬ì„± ìš”ì†Œë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ReaderëŠ” ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì½ê³  ProcessorëŠ” ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê³  WriterëŠ” ê°€ê³µëœ ë°ì´í„°ë¥¼ ê²°ê³¼ ì €ì¥ì†Œì— ì”ë‹ˆë‹¤. ì´ëŸ¬í•œ êµ¬ì„± ìš”ì†ŒëŠ” ì¼ë ¨ì˜ ìŠ¤í…ìœ¼ë¡œ ì—°ê²°ë˜ì–´ Batch ì‘ì—…ì˜ íë¦„ì„ ì œì–´í•©ë‹ˆë‹¤. Stepì€ ê° ìŠ¤í…ì˜ ì‹¤í–‰ ì „&#x2F;í›„ì— ìˆ˜í–‰í•´ì•¼ í•  ì‘ì—…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Taskletë„ ì§€ì›í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤í…ì´ ì‹¤í–‰ë˜ê¸° ì „ì— ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ë¹„ì›Œì•¼ í•˜ëŠ” ê²½ìš°, ì´ëŸ¬í•œ ì‘ì—…ì„ Taskletì— í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring BatchëŠ” ìŠ¤í… ê°„ì— ë°ì´í„°ë¥¼ ê³µìœ í•˜ëŠ” ë°©ë²•ë„ ì œê³µí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í•˜ë‚˜ì˜ ìŠ¤í…ì´ ì²˜ë¦¬í•œ ê²°ê³¼ë¥¼ ë‹¤ìŒ ìŠ¤í…ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Batchì—ì„œëŠ” JobLauncherë¥¼ ì‚¬ìš©í•˜ì—¬ Batch ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. JobLauncherëŠ” Jobì„ ì‹¤í–‰í•˜ê³  Jobì€ í•˜ë‚˜ ì´ìƒì˜ Stepì„ í¬í•¨í•©ë‹ˆë‹¤. Stepì€ ê°ê°ì˜ Batch ì‘ì—…ì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë”°ë¼ì„œ Spring Batchì—ì„œ Stepì€ Batch ì‘ì—…ì˜ í•µì‹¬ì ì¸ êµ¬ì„± ìš”ì†Œ ì¤‘ í•˜ë‚˜ì´ë©°, ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  íë¦„ì„ ì œì–´í•˜ëŠ” ë° ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. Step ì¸í„°í˜ì´ìŠ¤public interface Step &#123; static final String STEP_TYPE_KEY = &quot;batch.stepType&quot;; String getName(); boolean isAllowStartIfComplete(); int getStartLimit(); void execute(StepExecution stepExecution) throws JobInterruptedException;&#125; Step ê¸°ë³¸ êµ¬í˜„ì²´ TaskletStep ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” í´ë˜ìŠ¤ë¡œ Tasklet íƒ€ì…ì˜ êµ¬í˜„ì²´ë“¤ì„ ì œì–´í•œë‹¤. PartitionStep ë©€í‹° ìŠ¤ë ˆë“œ ë°©ì‹ìœ¼ë¡œ Step ì„ ì—¬ëŸ¬ê°œë¡œ ë¶„ë¦¬í•´ ì‹¤í–‰í•œë‹¤. JobStep Step ë‚´ì—ì„œ Job ì„ ì‹¤í–‰í•˜ë„ë¡ í•œë‹¤. FlowStep Step ë‚´ì—ì„œ Flow ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•œë‹¤. Step ìƒì„± @RequiredArgsConstructor@Configurationpublic class StepConfiguration &#123; private final JobBuilderFactory jobBuilderFactory; private final StepBuilderFactory stepBuilderFactory; @Bean public Job BatchJob() &#123; return this.jobBuilderFactory.get(&quot;Job&quot;) .start(step1()) .next(step2()) .build(); &#125; @Bean public Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; System.out.println(&quot;step1 has executed&quot;); return RepeatStatus.FINISHED; &#125; &#125;) .build(); &#125; @Bean public Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet((contribution, chunkContext) -&gt; &#123; System.out.println(&quot;step2 has executed&quot;); return RepeatStatus.FINISHED; &#125;) .build(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"}],"tags":[]},{"title":"Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸”","slug":"spring/spring-batch/job/spring-batch-07-JobExecution","date":"2022-04-11T23:25:35.000Z","updated":"2024-02-26T15:29:09.290Z","comments":true,"path":"2022/04/12/spring/spring-batch/job/spring-batch-07-JobExecution/","link":"","permalink":"https://ckck803.github.io/2022/04/12/spring/spring-batch/job/spring-batch-07-JobExecution/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobExecution Job ì‹¤í–‰ ì¤‘ì— ë°œìƒí•œ ì •ë³´ë“¤ì„ ì €ì¥í•˜ê³  ìˆëŠ” ê°ì²´, JobInstance ì— ëŒ€í•œ ì‹œë„ë¥¼ ì˜ë¯¸í•˜ëŠ” ê°ì²´ë¡œì„œ 1:N ì˜ ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤.BATCH_JOB_EXECUTION í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ê³  ë¡œì„œ JobInstance ì— ëŒ€í•œ ì„±ê³µ &#x2F; ì‹¤íŒ¨ ë‚´ì—­ì„ ê´€ë¦¬í•œë‹¤. JobExecution ê°ì²´ëŠ” JobInstance ê°€ ì‹¤í–‰ë  ë•Œ ë§ˆë‹¤ ìƒì„±ë©ë‹ˆë‹¤. JobExecution ê°ì²´ëŠ” Job ì˜ ì‹¤í–‰ ê²°ê³¼ FAILED ë˜ëŠ” COMPLETED ë“±ì˜ ê°’ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. JobExecution ì˜ ì‹¤í–‰ ê²°ê³¼ê°€ COMPLETED ë©´ JobInstance ì‹¤í–‰ì´ ì™„ë£Œëœ ê²ƒìœ¼ë¡œ ê°„ì£¼í•´ ë™ì¼í•œ JobParameter ë¥¼ ì´ìš©í•œ ì¬ì‹¤í–‰ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. JobExecution ì˜ ì‹¤í–‰ ê²°ê³¼ê°€ FAILED ë©´ JobInstance ì‹¤í–‰ì´ ì™„ë£Œë˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ê°„ì£¼í•´ ë™ì¼í•œ JobParameter ë¥¼ ì´ìš©í•œ ì¬ì‹¤í–‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë˜í•œ, JobExecution ì˜ ì‹¤í–‰ ê²°ê³¼ê°€ COMPLETED ë  ë•Œê¹Œì§€ í•˜ë‚˜ì˜ JobInstance ë‚´ì—ì„œ ì—¬ëŸ¬ ë²ˆì˜ ì‹œë„ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobExecution Job ì‹¤í–‰ ì¤‘ì— ë°œìƒí•œ ì •ë³´ë“¤ì„ ì €ì¥í•˜ê³  ìˆëŠ” ê°ì²´, JobInstance ì— ëŒ€í•œ ì‹œë„ë¥¼ ì˜ë¯¸í•˜ëŠ” ê°ì²´ë¡œì„œ 1:N ì˜ ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤.BATCH_JOB_EXECUTION í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ê³  ë¡œì„œ JobInstance ì— ëŒ€í•œ ì„±ê³µ &#x2F; ì‹¤íŒ¨ ë‚´ì—­ì„ ê´€ë¦¬í•œë‹¤. JobExecution ê°ì²´ëŠ” JobInstance ê°€ ì‹¤í–‰ë  ë•Œ ë§ˆë‹¤ ìƒì„±ë©ë‹ˆë‹¤. JobExecution ê°ì²´ëŠ” Job ì˜ ì‹¤í–‰ ê²°ê³¼ FAILED ë˜ëŠ” COMPLETED ë“±ì˜ ê°’ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. JobExecution ì˜ ì‹¤í–‰ ê²°ê³¼ê°€ COMPLETED ë©´ JobInstance ì‹¤í–‰ì´ ì™„ë£Œëœ ê²ƒìœ¼ë¡œ ê°„ì£¼í•´ ë™ì¼í•œ JobParameter ë¥¼ ì´ìš©í•œ ì¬ì‹¤í–‰ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. JobExecution ì˜ ì‹¤í–‰ ê²°ê³¼ê°€ FAILED ë©´ JobInstance ì‹¤í–‰ì´ ì™„ë£Œë˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ê°„ì£¼í•´ ë™ì¼í•œ JobParameter ë¥¼ ì´ìš©í•œ ì¬ì‹¤í–‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë˜í•œ, JobExecution ì˜ ì‹¤í–‰ ê²°ê³¼ê°€ COMPLETED ë  ë•Œê¹Œì§€ í•˜ë‚˜ì˜ JobInstance ë‚´ì—ì„œ ì—¬ëŸ¬ ë²ˆì˜ ì‹œë„ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. @RequiredArgsConstructor@Configurationpublic class JobExecutionConfiguration &#123; private final JobBuilderFactory jobBuilderFactory; private final StepBuilderFactory stepBuilderFactory; @Bean public Job BatchJob() &#123; return this.jobBuilderFactory.get(&quot;Job&quot;) .start(step1()) .next(step2()) .build(); &#125; @Bean public Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; JobExecution jobExecution = contribution.getStepExecution().getJobExecution(); System.out.println(&quot;jobExecution = &quot; + jobExecution); System.out.println(&quot;step1 has executed&quot;); return RepeatStatus.FINISHED; &#125; &#125;) .build(); &#125; @Bean public Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet((contribution, chunkContext) -&gt; &#123;// throw new RuntimeException(&quot;JobExecution has failed&quot;); System.out.println(&quot;step2 has executed&quot;); return RepeatStatus.FINISHED; &#125;) .build(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸”","slug":"spring/spring-batch/job/spring-batch-06-JobParameter","date":"2022-04-11T22:25:35.000Z","updated":"2024-02-26T15:29:05.980Z","comments":true,"path":"2022/04/12/spring/spring-batch/job/spring-batch-06-JobParameter/","link":"","permalink":"https://ckck803.github.io/2022/04/12/spring/spring-batch/job/spring-batch-06-JobParameter/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobParameter Job ì„ ì‹¤í–‰í•  ë•Œ í•¨ê»˜ í¬í•¨ë¼ ì‚¬ìš©ë˜ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì§„ ë„ë©”ì¸ ê°ì²´ í•˜ë‚˜ì˜ Job ì— ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ê°œì˜ JobInstancee ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ìš©ë„ JobParameter ì™€ JobInstance ëŠ” 1:1 ê´€ê³„ë‹¤. JobParameter ìƒì„± ë°©ë²• BATCH_JOB_EXECUTION_PARAM í…Œì´ë¸”ê³¼ ë§¤í•‘ëœë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œ ì£¼ì… Java -jar LogBatch.jar requestDate&#x3D;20220101 ì½”ë“œë¡œ ì‹¤í–‰ JobParameterBuilder, DefaultJobParametersConverter SpEL ì´ìš© @Value(â€œ#{jobParameter[requestDate]}â€), @JobScopre, @StepScope ì„ ì–¸ í•„ìˆ˜ ì™¸ë¶€ì—ì„œ ì „ë‹¬í•˜ëŠ” ê°’ì´ í‘œí˜„ì‹ì— ì „ë‹¬ë¼ ì €ì¥ëœë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobParameter Job ì„ ì‹¤í–‰í•  ë•Œ í•¨ê»˜ í¬í•¨ë¼ ì‚¬ìš©ë˜ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì§„ ë„ë©”ì¸ ê°ì²´ í•˜ë‚˜ì˜ Job ì— ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ê°œì˜ JobInstancee ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ìš©ë„ JobParameter ì™€ JobInstance ëŠ” 1:1 ê´€ê³„ë‹¤. JobParameter ìƒì„± ë°©ë²• BATCH_JOB_EXECUTION_PARAM í…Œì´ë¸”ê³¼ ë§¤í•‘ëœë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œ ì£¼ì… Java -jar LogBatch.jar requestDate&#x3D;20220101 ì½”ë“œë¡œ ì‹¤í–‰ JobParameterBuilder, DefaultJobParametersConverter SpEL ì´ìš© @Value(â€œ#{jobParameter[requestDate]}â€), @JobScopre, @StepScope ì„ ì–¸ í•„ìˆ˜ ì™¸ë¶€ì—ì„œ ì „ë‹¬í•˜ëŠ” ê°’ì´ í‘œí˜„ì‹ì— ì „ë‹¬ë¼ ì €ì¥ëœë‹¤. @Componentpublic class JobParameterTest implements ApplicationRunner &#123; @Autowired JobLauncher jobLauncher; @Autowired Job job; @Override public void run(ApplicationArguments args) throws Exception &#123; JobParameters jobParameters = new JobParametersBuilder().addString(&quot;name&quot;, &quot;user1&quot;) .addString(&quot;name&quot;, &quot;user1&quot;) .addLong(&quot;seq&quot;, 1L) .addDate(&quot;date&quot;, new Date()) .addDouble(&quot;age&quot;, 16.5) .toJobParameters(); jobLauncher.run(job, jobParameters); &#125;&#125; StepContribution í´ë˜ìŠ¤ë‚´ StepExecution í´ë˜ìŠ¤ë‚´ JobExecution í´ë˜ìŠ¤ì—ì„œ JobParameters ê°ì²´ë¥¼ ê´€ë¦¬í•œë‹¤. ChunkContext í´ë˜ìŠ¤ë¥¼ í†µí•´ì„œëŠ” Map ê°ì²´ ë¡œ JobParameters ë¥¼ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤. JobParameters ê°ì²´ì—ì„œ Type ë³„ë¡œ Key ê°’ì„ ì£¼ë©´ Value ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤. @RequiredArgsConstructor@Configurationpublic class JobParameterConfiguration &#123; private final JobBuilderFactory jobBuilderFactory; private final StepBuilderFactory stepBuilderFactory; @Bean public Job BatchJob() &#123; return this.jobBuilderFactory.get(&quot;Job&quot;) .start(step1()) .next(step2()) .build(); &#125; @Bean public Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; JobParameters jobParameters = contribution.getStepExecution().getJobParameters(); String name = jobParameters.getString(&quot;name&quot;); long seq = jobParameters.getLong(&quot;seq&quot;); Date date = jobParameters.getDate(&quot;date&quot;); System.out.println(&quot;===========================&quot;); System.out.println(&quot;name:&quot; + name); System.out.println(&quot;seq: &quot; + seq); System.out.println(&quot;date: &quot; + date); System.out.println(&quot;===========================&quot;); Map&lt;String, Object&gt; jobParameters2 = chunkContext.getStepContext().getJobParameters(); String name2 = (String)jobParameters2.get(&quot;name&quot;); long seq2 = (long)jobParameters2.get(&quot;seq&quot;); System.out.println(&quot;step1 has executed&quot;); return RepeatStatus.FINISHED; &#125; &#125;) .build(); &#125; @Bean public Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; System.out.println(&quot;step1 has executed&quot;); return RepeatStatus.FINISHED; &#125; &#125;) .build(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Spring Batch - 04. JobLauncher","slug":"spring/spring-batch/job/spring-batch-04-JobLauncher","date":"2022-04-11T14:25:35.000Z","updated":"2024-02-26T15:28:57.286Z","comments":true,"path":"2022/04/11/spring/spring-batch/job/spring-batch-04-JobLauncher/","link":"","permalink":"https://ckck803.github.io/2022/04/11/spring/spring-batch/job/spring-batch-04-JobLauncher/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobLauncher JobLauncher ì¸í„°í˜ì´ìŠ¤ëŠ” Job ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ì—­í• ì„ í•œë‹¤ JobLauncher ëŠ” Job ê³¼ JobParameter ê°ì²´ë¥¼ ì´ìš©í•´ Job ì„ ì‹¤í–‰í•œ í›„ JobExecution ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. JobLauncherë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì‹¤í–‰í•˜ë©´ Spring Batchê°€ Jobì˜ ëª¨ë“  ë‹¨ê³„ë¥¼ ì²˜ë¦¬í•˜ê³ , ê° ë‹¨ê³„ì—ì„œ ë°œìƒí•œ ëª¨ë“  ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë˜í•œ Jobì˜ ì‹¤í–‰ ìƒíƒœë¥¼ ì¶”ì í•˜ê³  Jobì˜ ì§„í–‰ ìƒí™© ë° ê²°ê³¼ë¥¼ ë³´ê³ í•©ë‹ˆë‹¤. Spring BatchëŠ” ë‹¤ì–‘í•œ ìœ í˜•ì˜ JobLauncherë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê° JobLauncherëŠ” ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ Jobì„ ì‹¤í–‰í•˜ê³  ë°˜í™˜í•˜ëŠ” JobExecution ê°ì²´ì˜ ì†ì„±ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ Spring Batchì—ì„œëŠ” SimpleJobLauncherë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì‹¤í–‰í•©ë‹ˆë‹¤. SimpleJobLauncherëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ì‹ìœ¼ë¡œ Jobì„ ì‹¤í–‰í•˜ê³  JobExecution ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobLauncher JobLauncher ì¸í„°í˜ì´ìŠ¤ëŠ” Job ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ì—­í• ì„ í•œë‹¤ JobLauncher ëŠ” Job ê³¼ JobParameter ê°ì²´ë¥¼ ì´ìš©í•´ Job ì„ ì‹¤í–‰í•œ í›„ JobExecution ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. JobLauncherë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì‹¤í–‰í•˜ë©´ Spring Batchê°€ Jobì˜ ëª¨ë“  ë‹¨ê³„ë¥¼ ì²˜ë¦¬í•˜ê³ , ê° ë‹¨ê³„ì—ì„œ ë°œìƒí•œ ëª¨ë“  ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë˜í•œ Jobì˜ ì‹¤í–‰ ìƒíƒœë¥¼ ì¶”ì í•˜ê³  Jobì˜ ì§„í–‰ ìƒí™© ë° ê²°ê³¼ë¥¼ ë³´ê³ í•©ë‹ˆë‹¤. Spring BatchëŠ” ë‹¤ì–‘í•œ ìœ í˜•ì˜ JobLauncherë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê° JobLauncherëŠ” ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ Jobì„ ì‹¤í–‰í•˜ê³  ë°˜í™˜í•˜ëŠ” JobExecution ê°ì²´ì˜ ì†ì„±ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ Spring Batchì—ì„œëŠ” SimpleJobLauncherë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì‹¤í–‰í•©ë‹ˆë‹¤. SimpleJobLauncherëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ì‹ìœ¼ë¡œ Jobì„ ì‹¤í–‰í•˜ê³  JobExecution ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. Spring BatchëŠ” JobLauncherë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  ì‹¤íŒ¨í•œ ì‘ì—…ì„ ìë™ìœ¼ë¡œ ì¬ì‹œì‘í•˜ê³  ì‘ì—…ì˜ ìƒíƒœë¥¼ ì¶”ì í•˜ê³  ê° ì‘ì—…ì˜ ê²°ê³¼ë¥¼ ë³´ê³ í•˜ëŠ” ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. JobLauncher.java public interface JobLauncher &#123; public JobExecution run(Job job, JobParameters jobParameters) throws JobExecutionAlreadyRunningException, JobRestartException, JobInstanceAlreadyCompleteException, JobParametersInvalidException;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Job","slug":"Spring/Spring-Batch/Job","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Job/"}],"tags":[]},{"title":"Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸”","slug":"spring/spring-batch/job/spring-batch-05-JobInstance","date":"2022-04-11T14:25:35.000Z","updated":"2024-02-26T15:29:01.770Z","comments":true,"path":"2022/04/11/spring/spring-batch/job/spring-batch-05-JobInstance/","link":"","permalink":"https://ckck803.github.io/2022/04/11/spring/spring-batch/job/spring-batch-05-JobInstance/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobInstance ìƒì„± ë° ì‹¤í–‰ JobInstanceë€ Jobì— JobParametersê°€ ì „ë‹¬ë˜ì–´ ë§Œë“¤ì–´ì§€ëŠ” ì‹¤í–‰ê°€ëŠ¥í•œ ë…¼ë¦¬ì  ì‘ì—… ë‹¨ìœ„ ê°ì²´ì´ë‹¤. JobInstance ëŠ” JobLauncher ê°€ ìƒí–‰ë  ë•Œ ìƒì„±ëœë‹¤. JobLauncher ê°€ ì‹¤í–‰ë  ë•ŒëŠ” ìƒˆë¡œìš´ JobInstance ìƒì„± í•˜ê±°ë‚˜ ê¸°ì¡´ì— ìƒì„±ëœ JobInstance ë¥¼ ë°˜í™˜í•œë‹¤. ì²˜ìŒ ì‹œì‘í•˜ëŠ” Job, JobParameter ì¼ ê²½ìš° ìƒˆë¡œìš´ JobInstance ê°€ ìƒì„±ëœë‹¤. ì´ì „ê³¼ ë™ì¼í•œ Job, JobParameter ë¡œ ì‹¤í–‰ í•  ê²½ìš° ì´ë¯¸ ì¡´ì¬í•˜ëŠ” JobInstance ë¥¼ ë°˜í™˜í•œë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ JobName ê³¼ JobKey ë¥¼ ê°–ê³  JobInstance ê°ì²´ë¥¼ ì–»ëŠ”ë‹¤. Job ê³¼ JobInstance ì™€ì˜ ê´€ê³„ëŠ” 1:N ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤. BATCH_JOB_INSTANCE í…Œì´ë¸”ê³¼ ë§¤í•‘ JOB_NAME(Job) ê³¼ JOB_KEY(JobParamter í•´ì‹œê°’) ì´ ë™ì¼í•œ ë°ì´í„°ëŠ” ì¤‘ë³µí•´ì„œ ì €ì¥í•  ìˆ˜ ì—†ë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing JobInstance ìƒì„± ë° ì‹¤í–‰ JobInstanceë€ Jobì— JobParametersê°€ ì „ë‹¬ë˜ì–´ ë§Œë“¤ì–´ì§€ëŠ” ì‹¤í–‰ê°€ëŠ¥í•œ ë…¼ë¦¬ì  ì‘ì—… ë‹¨ìœ„ ê°ì²´ì´ë‹¤. JobInstance ëŠ” JobLauncher ê°€ ìƒí–‰ë  ë•Œ ìƒì„±ëœë‹¤. JobLauncher ê°€ ì‹¤í–‰ë  ë•ŒëŠ” ìƒˆë¡œìš´ JobInstance ìƒì„± í•˜ê±°ë‚˜ ê¸°ì¡´ì— ìƒì„±ëœ JobInstance ë¥¼ ë°˜í™˜í•œë‹¤. ì²˜ìŒ ì‹œì‘í•˜ëŠ” Job, JobParameter ì¼ ê²½ìš° ìƒˆë¡œìš´ JobInstance ê°€ ìƒì„±ëœë‹¤. ì´ì „ê³¼ ë™ì¼í•œ Job, JobParameter ë¡œ ì‹¤í–‰ í•  ê²½ìš° ì´ë¯¸ ì¡´ì¬í•˜ëŠ” JobInstance ë¥¼ ë°˜í™˜í•œë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ JobName ê³¼ JobKey ë¥¼ ê°–ê³  JobInstance ê°ì²´ë¥¼ ì–»ëŠ”ë‹¤. Job ê³¼ JobInstance ì™€ì˜ ê´€ê³„ëŠ” 1:N ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤. BATCH_JOB_INSTANCE í…Œì´ë¸”ê³¼ ë§¤í•‘ JOB_NAME(Job) ê³¼ JOB_KEY(JobParamter í•´ì‹œê°’) ì´ ë™ì¼í•œ ë°ì´í„°ëŠ” ì¤‘ë³µí•´ì„œ ì €ì¥í•  ìˆ˜ ì—†ë‹¤. JobRepository ëŠ” Job ì‹¤í–‰ì¤‘ì— ë°œìƒí•˜ëŠ” ë©”íƒ€ ë°ì´í„°ë¥¼ DB ì— ì €ì¥í•˜ëŠ” ì—­í• ì„ ê±°ì¹œë‹¤. Job ì„ ì‹¤í–‰í•  ë•Œ ë„˜ê²¨ì§„ Job ê³¼ JobParameter ê°’ì„ ê°–ê³  DB ì— í™•ì¸í•˜ëŠ” ì—­í• ì„ í•œë‹¤. Job ì´ ì²˜ìŒ ì‹¤í–‰í•˜ëŠ” Job ì¸ì§€ í™•ì¸í•œë‹¤. ì²˜ìŒ ì‹¤í–‰í•˜ëŠ” Job ì´ë©´ ìƒˆë¡œìš´ JobInstance ë¥¼ ë°˜í™˜í•œë‹¤. ì¡´ì¬í•˜ëŠ” ê°’ì´ë©´ ê¸°ì¡´ JobInstance ë¥¼ ë°˜í™˜í•œë‹¤. ë” ì´ìƒ Job ì´ ì‹¤í–‰ë˜ì§€ ì•Šê³  JobInstanceAlreadyCompleteException ì˜ˆì™¸ë¥¼ ë°˜í™˜í•œë‹¤. @RequiredArgsConstructor@Configurationpublic class JobInstanceConfiguration &#123; private final JobBuilderFactory jobBuilderFactory; private final StepBuilderFactory stepBuilderFactory; @Bean public Job BatchJob() &#123; return this.jobBuilderFactory.get(&quot;Job&quot;) .start(step1()) .next(step2()) .build(); &#125; @Bean public Step step1() &#123; return stepBuilderFactory.get(&quot;step1&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; JobInstance jobInstance = contribution.getStepExecution().getJobExecution().getJobInstance(); System.out.println(&quot;jobInstance.getId() : &quot; + jobInstance.getId()); System.out.println(&quot;jobInstance.getInstanceId() : &quot; + jobInstance.getInstanceId()); System.out.println(&quot;jobInstance.getJobName() : &quot; + jobInstance.getJobName()); System.out.println(&quot;jobInstance.getJobVersion : &quot; + jobInstance.getVersion()); return RepeatStatus.FINISHED; &#125; &#125;) .build(); &#125; @Bean public Step step2() &#123; return stepBuilderFactory.get(&quot;step2&quot;) .tasklet((contribution, chunkContext) -&gt; &#123; System.out.println(&quot;step2 has executed&quot;); return RepeatStatus.FINISHED; &#125;) .build(); &#125;&#125; ApplicationRunner ë¥¼ êµ¬í˜„í•œ JobRunner ë¥¼ ì´ìš©í•´ Job ì„ ì‹¤í–‰ì‹œí‚¤ë„ë¡ í•œë‹¤. Job ê³¼ JobParameter ê°ì²´ë¥¼ ìƒì„±í•´ JobLauncher ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•œë‹¤. @Componentpublic class JobRunner implements ApplicationRunner &#123; @Autowired private JobLauncher jobLauncher; @Autowired private Job job; @Override public void run(ApplicationArguments args) throws Exception &#123; JobParameters jobParameters = new JobParametersBuilder() .addString(&quot;name&quot;, &quot;user1&quot;)// .addDate(&quot;reqDate&quot;, new Date()) .toJobParameters(); jobLauncher.run(job,jobParameters); &#125;&#125; spring.batch.job.enabled ë¥¼ false ë¡œ ì„¤ì •í•¨ìœ¼ë¡œì¨ Spring boot ì—ì„œ ìë™ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¤ì§€ ì•Šë„ë¡ í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Job","slug":"Spring/Spring-Batch/Job","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Job/"}],"tags":[]},{"title":"Thread Safe","slug":"computer-science/os/thread/thread-safe","date":"2022-04-10T18:16:13.000Z","updated":"2024-03-03T05:21:48.825Z","comments":true,"path":"2022/04/11/computer-science/os/thread/thread-safe/","link":"","permalink":"https://ckck803.github.io/2022/04/11/computer-science/os/thread/thread-safe/","excerpt":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) Thread Safe ë€?Thread ëŠ” í”„ë¡œì„¸ìŠ¤ì™€ ë‹¤ë¥´ê²Œ í”„ë¡œì„¸ìŠ¤ ë‚´ë¶€ì—ì„œ í• ë‹¹ ë°›ì€ ìì›ì„ ê³µìœ  í•œë‹¤. ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì—ì„œ í•œë²ˆì— ê³µìœ  ìì›ì— ì ‘ê·¼í•˜ëŠ” Race Condition ì´ ë°œìƒí•´ë„ ì˜¬ë°”ë¥¸ ì‹¤í–‰ ê²°ê³¼ê°€ ë‚˜ì˜¤ê²Œ ë³´ì¥í•¨ì„ ì˜ë¯¸í•œë‹¤. Thread Safe ë¥¼ ì§€í‚¤ëŠ” ë°©ë²• Re-entrancy ì–´ë–¤ í•¨ìˆ˜ê°€ í•œ ìŠ¤ë ˆë“œì— ì˜í•´ í˜¸ì¶œë˜ì–´ ì‹¤í–‰ ì¤‘ì¼ ë•Œ, ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ê·¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë”ë¼ë„ ê·¸ ê²°ê³¼ê°€ ê°ê°ì—ê²Œ ì˜¬ë°”ë¡œ ì£¼ì–´ì ¸ì•¼ í•œë‹¤. Thread Local Storage ê³µìœ  ìì›ì˜ ì‚¬ìš©ì„ ìµœëŒ€í•œ ì¤„ì—¬ ê°ê°ì˜ ìŠ¤ë ˆë“œì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì €ì¥ì†Œë“¤ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë™ì‹œ ì ‘ê·¼ì„ ë§‰ëŠ”ë‹¤. ì´ ë°©ì‹ì€ ë™ê¸°í™” ë°©ë²•ê³¼ ê´€ë ¨ë˜ì–´ ìˆê³ , ë˜í•œ ê³µìœ ìƒíƒœë¥¼ í”¼í•  ìˆ˜ ì—†ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. Mutual Exclusion Threadì— Lock, Semaphore, Mutex ë¥¼ ê±¸ì–´ì„œ ê³µìœ ìì›ì—ëŠ” í•˜ë‚˜ì˜ threadë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. Atomic operations ë°ì´í„° ë³€ê²½ì‹œ atomicí•˜ê²Œ ë°ì´í„°ì— ì ‘ê·¼í•˜ë„ë¡ ë§Œë“­ë‹ˆë‹¤. Immutable Object ìë°”ì˜ Final ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•œ í›„ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥ í•˜ê²Œ í•œë‹¤. Thread ë™ê¸°í™” ì‹¤í–‰ ìˆœì„œ ì— ë”°ë¥¸ ë™ê¸°í™” ë©”ëª¨ë¦¬ ì ‘ê·¼ ì— ëŒ€í•œ ë™ê¸°í™” ì‹¤í–‰ ìˆœì„œì— ë”°ë¥¸ ë™ê¸°í™” ì“°ë ˆë“œì˜ ì‹¤í–‰ ìˆœì„œë¥¼ ì •í•˜ê³  ì •í•´ì§„ ìˆœì„œì— ë”°ë¼ ì‘ì—…ì„ ì²˜ë¦¬í•˜ë„ë¡ í•œë‹¤.","text":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) Thread Safe ë€?Thread ëŠ” í”„ë¡œì„¸ìŠ¤ì™€ ë‹¤ë¥´ê²Œ í”„ë¡œì„¸ìŠ¤ ë‚´ë¶€ì—ì„œ í• ë‹¹ ë°›ì€ ìì›ì„ ê³µìœ  í•œë‹¤. ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì—ì„œ í•œë²ˆì— ê³µìœ  ìì›ì— ì ‘ê·¼í•˜ëŠ” Race Condition ì´ ë°œìƒí•´ë„ ì˜¬ë°”ë¥¸ ì‹¤í–‰ ê²°ê³¼ê°€ ë‚˜ì˜¤ê²Œ ë³´ì¥í•¨ì„ ì˜ë¯¸í•œë‹¤. Thread Safe ë¥¼ ì§€í‚¤ëŠ” ë°©ë²• Re-entrancy ì–´ë–¤ í•¨ìˆ˜ê°€ í•œ ìŠ¤ë ˆë“œì— ì˜í•´ í˜¸ì¶œë˜ì–´ ì‹¤í–‰ ì¤‘ì¼ ë•Œ, ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ê·¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë”ë¼ë„ ê·¸ ê²°ê³¼ê°€ ê°ê°ì—ê²Œ ì˜¬ë°”ë¡œ ì£¼ì–´ì ¸ì•¼ í•œë‹¤. Thread Local Storage ê³µìœ  ìì›ì˜ ì‚¬ìš©ì„ ìµœëŒ€í•œ ì¤„ì—¬ ê°ê°ì˜ ìŠ¤ë ˆë“œì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì €ì¥ì†Œë“¤ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë™ì‹œ ì ‘ê·¼ì„ ë§‰ëŠ”ë‹¤. ì´ ë°©ì‹ì€ ë™ê¸°í™” ë°©ë²•ê³¼ ê´€ë ¨ë˜ì–´ ìˆê³ , ë˜í•œ ê³µìœ ìƒíƒœë¥¼ í”¼í•  ìˆ˜ ì—†ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. Mutual Exclusion Threadì— Lock, Semaphore, Mutex ë¥¼ ê±¸ì–´ì„œ ê³µìœ ìì›ì—ëŠ” í•˜ë‚˜ì˜ threadë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. Atomic operations ë°ì´í„° ë³€ê²½ì‹œ atomicí•˜ê²Œ ë°ì´í„°ì— ì ‘ê·¼í•˜ë„ë¡ ë§Œë“­ë‹ˆë‹¤. Immutable Object ìë°”ì˜ Final ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•œ í›„ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥ í•˜ê²Œ í•œë‹¤. Thread ë™ê¸°í™” ì‹¤í–‰ ìˆœì„œ ì— ë”°ë¥¸ ë™ê¸°í™” ë©”ëª¨ë¦¬ ì ‘ê·¼ ì— ëŒ€í•œ ë™ê¸°í™” ì‹¤í–‰ ìˆœì„œì— ë”°ë¥¸ ë™ê¸°í™” ì“°ë ˆë“œì˜ ì‹¤í–‰ ìˆœì„œë¥¼ ì •í•˜ê³  ì •í•´ì§„ ìˆœì„œì— ë”°ë¼ ì‘ì—…ì„ ì²˜ë¦¬í•˜ë„ë¡ í•œë‹¤. ë©”ëª¨ë¦¬ ì ‘ê·¼ì— ëŒ€í•œ ë™ê¸°í™” ê³µìš© ë©”ëª¨ë¦¬ì— í•˜ë‚˜ì˜ Thread ë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ í•´ Thread safe ë¥¼ ì‹¤í˜„í•œë‹¤. ë™ê¸°í™” ê¸°ë²•ìœ ì € ëª¨ë“œ ë™ê¸°í™” (User Mode Synchronize) ë™ê¸°í™”ê°€ ì§„í–‰ë˜ëŠ” ê³¼ì •ì—ì„œ ì»¤ë„ ì˜ í˜ì„ ë¹Œë¦¬ì§€ ì•ŠëŠ” ë™ê¸°í™” ê¸°ë²•ì´ë‹¤. ë”°ë¼ì„œ ë™ê¸°í™”ë¥¼ ìœ„í•´ì„œ ì»¤ë„ ëª¨ë“œ ë¡œì˜ ì „í™˜ì´ ë¶ˆí•„ìš”í•´ ì„±ëŠ¥ìƒì˜ ì´ì ì´ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ê·¸ë§Œí¼ ê¸°ëŠ¥ìƒì˜ ì œí•œë„ ìˆë‹¤. í¬ë¦¬í‹°ì»¬ ì„¹ì…˜ ê¸°ë°˜ì˜ ë™ê¸°í™”, ì¸í„°ë½ í•¨ìˆ˜ ê¸°ë°˜ì˜ ë™ê¸°í™” ì»¤ë„ ëª¨ë“œ ë™ê¸°í™” (Kernel Mode Synchronize) ì»¤ë„ì—ì„œ ì œê³µí•˜ëŠ” ë™ê¸°í™” ê¸°ëŠ¥ì„ í™œìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤. ë”°ë¼ì„œ ë™ê¸°í™”ì— ê´€ë ¨ëœ í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ì»¤ë„ ëª¨ë“œë¡œì˜ ë³€ê²½ì´ í•„ìš”í•˜ê³ , ì„±ëŠ¥ ì €í•˜ë¡œ ì´ì–´ì§€ê²Œ ëœë‹¤. í•˜ì§€ë§Œ ê·¸ë§Œí¼ ìœ ì € ëª¨ë“œ ë™ê¸°í™”ì—ì„œ ì œê³µí•˜ì§€ ëª»í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µë°›ì„ ìˆ˜ ìˆë‹¤. ë®¤í…ìŠ¤ ê¸°ë°˜ì˜ ë™ê¸°í™”, ì„¸ë§ˆí¬ì–´ ê¸°ë°˜ì˜ ë™ê¸°í™”, ì´ë¦„ìˆëŠ” ë®¤í…ìŠ¤ ê¸°ë°˜ì˜ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™”, ì´ë²¤íŠ¸ ê¸°ë°˜ì˜ ë™ê¸°í™”","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ìš´ì˜ì²´ì œ","slug":"CS/ìš´ì˜ì²´ì œ","permalink":"https://ckck803.github.io/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/"}],"tags":[]},{"title":"Spring Batch - 03. Job","slug":"spring/spring-batch/job/spring-batch-03-Job","date":"2022-04-10T14:25:35.000Z","updated":"2024-02-26T15:28:53.334Z","comments":true,"path":"2022/04/10/spring/spring-batch/job/spring-batch-03-Job/","link":"","permalink":"https://ckck803.github.io/2022/04/10/spring/spring-batch/job/spring-batch-03-Job/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing Job ì´ë€ Batch ê³„ì¸µ êµ¬ì¡°ì—ì„œ ê°€ì¥ ìƒìœ„ì— ìˆëŠ” ê°œë…ìœ¼ë¡œ í•˜ë‚˜ì˜ Batch ì‘ì—… ìì²´ë¥¼ ì˜ë¯¸í•œë‹¤. Job Configuration ì„ í†µí•´ ìƒì„±ë˜ëŠ” ê°ì²´ ë‹¨ìœ„ë¡œì„œ Batch ì‘ì—…ì„ ì–´ë–»ê²Œ êµ¬ì„±í•˜ê³  ì‹¤í–‰í• ì§€ë¥¼ ëª…ì„¸í•´ ë†“ì€ ê°ì²´ Batch Job ì„ êµ¬ì„±í•˜ê¸° ìœ„í•œ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤ë©° Spring Batch ê°€ ê¸°ë³¸ êµ¬í˜„ì²´ë¥¼ ì œê³µí•œë‹¤. ì—¬ëŸ¬ Step ì„ í¬í•¨í•˜ëŠ” ì»¨í…Œì´ë„ˆë¡œì„œ ë°˜ë“œì‹œ í•œê°œ ì´ìƒì˜ Step ìœ¼ë¡œ êµ¬ì„±ë¼ì•¼ í•œë‹¤. Spring Batchì—ì„œ Jobì€ í•˜ë‚˜ ì´ìƒì˜ Stepìœ¼ë¡œ êµ¬ì„±ëœ ì¼ë ¨ì˜ ì‘ì—… íë¦„ì„ ì •ì˜í•˜ëŠ” ê°œë…ì…ë‹ˆë‹¤. Jobì€ ì¼ê´„ ì²˜ë¦¬ ì‘ì—…ì˜ ë…¼ë¦¬ì ì¸ ë‹¨ìœ„ì´ë©°, ë°°ì¹˜ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. Jobì€ ì¼ê´„ ì²˜ë¦¬ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ë‹¤ì–‘í•œ ì„¤ì •ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Jobì€ ì–´ë–¤ Stepì´ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ”ì§€, ì–´ë–¤ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€, ì–´ë–¤ ì˜ˆì™¸ ìƒí™©ì— ëŒ€ì²˜í•´ì•¼ í•˜ëŠ”ì§€ ë“±ì˜ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ë˜í•œ Jobì€ ì‹¤í–‰ ìˆœì„œ, ì¢…ë£Œ ì¡°ê±´, ì¤‘ì§€&#x2F;ì¬ì‹œì‘ ê°€ëŠ¥ ì—¬ë¶€ ë“±ì˜ ì‘ì—… íë¦„ì„ ì œì–´í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Spring Batchì—ì„œ Jobì€ JobBuilderFactoryë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±ë©ë‹ˆë‹¤. JobBuilderFactoryëŠ” JobBuilder ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ êµ¬ì„±í•©ë‹ˆë‹¤. JobBuilder ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì˜ ì´ë¦„, ì‘ì—… ìˆ˜í–‰ì— í•„ìš”í•œ Step, íŒŒë¼ë¯¸í„° ë“±ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing Job ì´ë€ Batch ê³„ì¸µ êµ¬ì¡°ì—ì„œ ê°€ì¥ ìƒìœ„ì— ìˆëŠ” ê°œë…ìœ¼ë¡œ í•˜ë‚˜ì˜ Batch ì‘ì—… ìì²´ë¥¼ ì˜ë¯¸í•œë‹¤. Job Configuration ì„ í†µí•´ ìƒì„±ë˜ëŠ” ê°ì²´ ë‹¨ìœ„ë¡œì„œ Batch ì‘ì—…ì„ ì–´ë–»ê²Œ êµ¬ì„±í•˜ê³  ì‹¤í–‰í• ì§€ë¥¼ ëª…ì„¸í•´ ë†“ì€ ê°ì²´ Batch Job ì„ êµ¬ì„±í•˜ê¸° ìœ„í•œ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤ë©° Spring Batch ê°€ ê¸°ë³¸ êµ¬í˜„ì²´ë¥¼ ì œê³µí•œë‹¤. ì—¬ëŸ¬ Step ì„ í¬í•¨í•˜ëŠ” ì»¨í…Œì´ë„ˆë¡œì„œ ë°˜ë“œì‹œ í•œê°œ ì´ìƒì˜ Step ìœ¼ë¡œ êµ¬ì„±ë¼ì•¼ í•œë‹¤. Spring Batchì—ì„œ Jobì€ í•˜ë‚˜ ì´ìƒì˜ Stepìœ¼ë¡œ êµ¬ì„±ëœ ì¼ë ¨ì˜ ì‘ì—… íë¦„ì„ ì •ì˜í•˜ëŠ” ê°œë…ì…ë‹ˆë‹¤. Jobì€ ì¼ê´„ ì²˜ë¦¬ ì‘ì—…ì˜ ë…¼ë¦¬ì ì¸ ë‹¨ìœ„ì´ë©°, ë°°ì¹˜ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. Jobì€ ì¼ê´„ ì²˜ë¦¬ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ë‹¤ì–‘í•œ ì„¤ì •ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Jobì€ ì–´ë–¤ Stepì´ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ”ì§€, ì–´ë–¤ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€, ì–´ë–¤ ì˜ˆì™¸ ìƒí™©ì— ëŒ€ì²˜í•´ì•¼ í•˜ëŠ”ì§€ ë“±ì˜ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ë˜í•œ Jobì€ ì‹¤í–‰ ìˆœì„œ, ì¢…ë£Œ ì¡°ê±´, ì¤‘ì§€&#x2F;ì¬ì‹œì‘ ê°€ëŠ¥ ì—¬ë¶€ ë“±ì˜ ì‘ì—… íë¦„ì„ ì œì–´í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Spring Batchì—ì„œ Jobì€ JobBuilderFactoryë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±ë©ë‹ˆë‹¤. JobBuilderFactoryëŠ” JobBuilder ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ êµ¬ì„±í•©ë‹ˆë‹¤. JobBuilder ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì˜ ì´ë¦„, ì‘ì—… ìˆ˜í–‰ì— í•„ìš”í•œ Step, íŒŒë¼ë¯¸í„° ë“±ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Batchì—ì„œ Jobì€ JobRepositoryì— ì €ì¥ë©ë‹ˆë‹¤. JobRepositoryëŠ” Jobì˜ ì‹¤í–‰ ìƒíƒœ, ì‹¤í–‰ ì‹œê°„ ë“±ì˜ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê³ , ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆëŠ”ì§€, ì‹¤íŒ¨í–ˆëŠ”ì§€ ë“±ì˜ ìƒíƒœë¥¼ ì¶”ì í•©ë‹ˆë‹¤. Spring Batchì—ì„œ Jobì€ JobLauncherë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰ë©ë‹ˆë‹¤. JobLauncherëŠ” JobRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì‹¤í–‰í•˜ê³ , ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. Jobì„ ì‹¤í–‰í•  ë•ŒëŠ” JobParametersë¥¼ ì „ë‹¬í•˜ì—¬ Jobì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Batchì—ì„œ Jobì€ ëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬ ì‘ì—…ì„ ì¼ê´„ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ”ë° ì‚¬ìš©ë˜ë©°, ì‘ì—…ì˜ ì‹¤í–‰, ëª¨ë‹ˆí„°ë§, ì‹¤íŒ¨í•œ ì‘ì—… ì²˜ë¦¬, ì‘ì—… ì¬ì‹œì‘ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. Job ì˜ êµ¬ì„± í•˜ë‚˜ì˜ Jobì€ ì—¬ëŸ¬ê°œì˜ Step ìœ¼ë¡œ êµ¬ì„±ë¼ ìˆê³ , í•˜ë‚˜ì˜ Step ë‚´ì—ì„œëŠ” ì—¬ëŸ¬ê°œì˜ tasklet ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. Jobì€ ë‹¨ì¼ ì‘ì—… ë˜ëŠ” ì—¬ëŸ¬ ë‹¨ê³„ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìœ¼ë©°, ê° ë‹¨ê³„ëŠ” í•˜ë‚˜ ì´ìƒì˜ ìŠ¤í…ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ê³  ê°€ê³µí•œ í›„ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ë°ì´í„°ë² ì´ìŠ¤ì— ë¡œë“œí•˜ëŠ” ì‘ì—…ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì‘ì—…ì€ ì—¬ëŸ¬ ìŠ¤í…ìœ¼ë¡œ êµ¬ì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ìŠ¤í…ì€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ëŠ” ê²ƒì´ë©°, ë‘ ë²ˆì§¸ ìŠ¤í…ì€ ì¶”ì¶œëœ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ë©°, ë§ˆì§€ë§‰ ìŠ¤í…ì€ ì²˜ë¦¬ëœ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ë¡œë“œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. Job ì¸í„°í˜ì´ìŠ¤public interface Job &#123; String getName(); boolean isRestartable(); void execute(JobExecution execution); @Nullable JobParametersIncrementer getJobParametersIncrementer(); JobParametersValidator getJobParametersValidator();&#125; Spring Batch Job ê¸°ë³¸ êµ¬í˜„ì²´Spring Batch ëŠ” ëŒ€í‘œì ì¸ Job ì˜ êµ¬í˜„ì²´ë¡œ SimpleJob ê³¼ FlowJob ì„ ì œê³µí•©ë‹ˆë‹¤. SimpleJob ìˆœì°¨ì  ìœ¼ë¡œ Step ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” Job ëª¨ë“  Job ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í‘œì¤€ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆë‹¤. FlowJob íŠ¹ì •í•œ ì¡°ê±´ ê³¼ íë¦„ ì— ë”°ë¼ Step ì„ êµ¬ì„±í•´ ì‹¤í–‰ì‹œí‚¤ëŠ” Job Flow ê°ì²´ë¥¼ ì‹¤í–‰ì‹œì¼œì„œ ì‘ì—…ì„ ì§„í–‰í•œë‹¤. ì½”ë“œ ì˜ˆì‹œ@Configuration@RequiredArgsConstructor@Slf4jpublic class HelloJobConfiguration &#123; private final JobBuilderFactory jobBuilderFactory; private final StepBuilderFactory stepBuilderFactory; @Bean public Job helloJob() &#123; return jobBuilderFactory.get(&quot;Hello Job&quot;) .start(helloStep1()) .next(helloStep2()) .build(); &#125; public Step helloStep1() &#123; return stepBuilderFactory.get(&quot;Hello Step1&quot;) .tasklet(new Tasklet() &#123; @Override public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception &#123; log.info(&quot; ========================&quot;); log.info(&quot; &gt;&gt; Hello Spring Batch!!&quot;); log.info(&quot; ========================&quot;); return RepeatStatus.FINISHED; &#125; &#125; ).build(); &#125; public Step helloStep2() &#123; return stepBuilderFactory.get(&quot;Hello Step2&quot;) .tasklet((contribution, chunkContext) -&gt; &#123; log.info(&quot; ========================&quot;); log.info(&quot; &gt;&gt; Hello Spring Batch2!!&quot;); log.info(&quot; ========================&quot;); return RepeatStatus.FINISHED; &#125;).build(); &#125;&#125; BatchAutoConfigurationBatchAutoConfiguration ì—ì„œëŠ” JobLauncherApplicationRunner ë¥¼ ì´ìš©í•´ Job ì„ ì‹¤í–‰ ì‹œí‚¨ë‹¤. BatchAutoConfiguration.java public JobLauncherApplicationRunner jobLauncherApplicationRunner(JobLauncher jobLauncher, JobExplorer jobExplorer, JobRepository jobRepository, BatchProperties properties) &#123; JobLauncherApplicationRunner runner = new JobLauncherApplicationRunner(jobLauncher, jobExplorer, jobRepository); String jobNames = properties.getJob().getNames(); if (StringUtils.hasText(jobNames)) &#123; runner.setJobNames(jobNames); &#125; return runner;&#125; JobLauncherApplicationRunnerJobLauncherApplicationRunner ëŠ” JobLauncher ê°ì²´ë¥¼ ì´ìš©í•´ Job ê³¼ Parameter ë¥¼ ë°›ì•„ Job ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. JobLauncherApplicationRunner protected void execute(Job job, JobParameters jobParameters) throws JobExecutionAlreadyRunningException, JobRestartException, JobInstanceAlreadyCompleteException, JobParametersInvalidException, JobParametersNotFoundException &#123; JobParameters parameters = this.getNextJobParameters(job, jobParameters); JobExecution execution = this.jobLauncher.run(job, parameters); if (this.publisher != null) &#123; this.publisher.publishEvent(new JobExecutionEvent(execution)); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Job","slug":"Spring/Spring-Batch/Job","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Job/"}],"tags":[]},{"title":"Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table","slug":"spring/spring-batch/spring-batch-02-batch-table","date":"2022-04-10T13:25:35.000Z","updated":"2024-02-26T15:30:39.599Z","comments":true,"path":"2022/04/10/spring/spring-batch/spring-batch-02-batch-table/","link":"","permalink":"https://ckck803.github.io/2022/04/10/spring/spring-batch/spring-batch-02-batch-table/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing Spring Batch ë©”íƒ€ ë°ì´í„° ìŠ¤í”„ë§ ë°°ì¹˜ì˜ ì‹¤í–‰ ë° ê´€ë¦¬ë¥¼ ìœ„í•œ ëª©ì ìœ¼ë¡œ ì—¬ëŸ¬ ë„ë©”ì¸ë“¤(Job, Step, JobParameters ë“±) ì˜ ì •ë³´ë“¤ì„ ì €ì¥, ì—…ë°ì´íŠ¸, ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ìŠ¤í‚¤ë§ˆ ë¥¼ ì œê³µí•œë‹¤. ê³¼ê±°, í˜„ì¬ì˜ ì‹¤í–‰ì— ëŒ€í•œ ì„¸ì„¸í•œ ì •ë³´, ì‹¤í–‰ì— ëŒ€í•œ ì„±ê³µê³¼ ì‹¤íŒ¨ ì—¬ë¶€ë“±ì„ ì¼ëª©ìš”ì—°í•˜ê²Œ ê´€ë¦¬í•¨ìœ¼ë¡œì„œ ë°°ì¹˜ìš´ìš©ì— ìˆì–´ ë¦¬ìŠ¤í¬ ë°œìƒì‹œ ë¹ ë¥¸ ëŒ€ì²˜ ê°€ëŠ¥ DB ì™€ ì—°ë™í•  ê²½ìš° í•„ìˆ˜ì ìœ¼ë¡œ ë©”íƒ€ í…Œì´ë¸”ì´ ìƒì„± ë¼ì•¼ í•¨ ìŠ¤í‚¤ë§ˆ ìƒì„± ì„¤ì • ìˆ˜ë™ ìƒì„± : ì¿¼ë¦¬ ë³µì‚¬ í›„ ì§ì ‘ ì‹¤í–‰ ìë™ ìƒì„± - spring.batch.jdbc.initialize-schema ì„¤ì • ALWAYS ìŠ¤í¬ë¦½íŠ¸ í•­ìƒ ì‹¤í–‰ RDBMS ì„¤ì •ì´ ë¼ ìˆì„ ê²½ìš° ë‚´ì¥ DB ë³´ë‹¤ ìš°ì„ ì ìœ¼ë¡œ ì‹¤í–‰ EMBEDDED (ê¸°ë³¸ ê°’) ë‚´ì¥ DB ì¼ ë•Œë§Œ ì‹¤í–‰ë˜ë©° ìŠ¤í‚¤ë§ˆê°€ ìë™ ìƒì„±ë¨ NEBER ìŠ¤í¬ë¦½íŠ¸ê°€ í•­ìƒ ì‹¤í–‰ ì•ˆëœë‹¤. ë‚´ì¥ DB ì¼ ê²½ìš° ìŠ¤í¬ë¦½íŠ¸ê°€ ìƒì„±ì´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë°œìƒ ìš´ì˜ì—ì„œëŠ” ìˆ˜ë™ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ ìƒì„± í›„ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥ # ALWAYS ë¡œ ì„¤ì •spring.batch.jdbc.initialize-schema: always# EMBEDED ë¡œ ì„¤ì •spring.batch.jdbc.initialize-schema: embedded# NEVER ë¡œ ì„¤ì •spring.batch.jdbc.initialize-schema: never","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing Spring Batch ë©”íƒ€ ë°ì´í„° ìŠ¤í”„ë§ ë°°ì¹˜ì˜ ì‹¤í–‰ ë° ê´€ë¦¬ë¥¼ ìœ„í•œ ëª©ì ìœ¼ë¡œ ì—¬ëŸ¬ ë„ë©”ì¸ë“¤(Job, Step, JobParameters ë“±) ì˜ ì •ë³´ë“¤ì„ ì €ì¥, ì—…ë°ì´íŠ¸, ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ìŠ¤í‚¤ë§ˆ ë¥¼ ì œê³µí•œë‹¤. ê³¼ê±°, í˜„ì¬ì˜ ì‹¤í–‰ì— ëŒ€í•œ ì„¸ì„¸í•œ ì •ë³´, ì‹¤í–‰ì— ëŒ€í•œ ì„±ê³µê³¼ ì‹¤íŒ¨ ì—¬ë¶€ë“±ì„ ì¼ëª©ìš”ì—°í•˜ê²Œ ê´€ë¦¬í•¨ìœ¼ë¡œì„œ ë°°ì¹˜ìš´ìš©ì— ìˆì–´ ë¦¬ìŠ¤í¬ ë°œìƒì‹œ ë¹ ë¥¸ ëŒ€ì²˜ ê°€ëŠ¥ DB ì™€ ì—°ë™í•  ê²½ìš° í•„ìˆ˜ì ìœ¼ë¡œ ë©”íƒ€ í…Œì´ë¸”ì´ ìƒì„± ë¼ì•¼ í•¨ ìŠ¤í‚¤ë§ˆ ìƒì„± ì„¤ì • ìˆ˜ë™ ìƒì„± : ì¿¼ë¦¬ ë³µì‚¬ í›„ ì§ì ‘ ì‹¤í–‰ ìë™ ìƒì„± - spring.batch.jdbc.initialize-schema ì„¤ì • ALWAYS ìŠ¤í¬ë¦½íŠ¸ í•­ìƒ ì‹¤í–‰ RDBMS ì„¤ì •ì´ ë¼ ìˆì„ ê²½ìš° ë‚´ì¥ DB ë³´ë‹¤ ìš°ì„ ì ìœ¼ë¡œ ì‹¤í–‰ EMBEDDED (ê¸°ë³¸ ê°’) ë‚´ì¥ DB ì¼ ë•Œë§Œ ì‹¤í–‰ë˜ë©° ìŠ¤í‚¤ë§ˆê°€ ìë™ ìƒì„±ë¨ NEBER ìŠ¤í¬ë¦½íŠ¸ê°€ í•­ìƒ ì‹¤í–‰ ì•ˆëœë‹¤. ë‚´ì¥ DB ì¼ ê²½ìš° ìŠ¤í¬ë¦½íŠ¸ê°€ ìƒì„±ì´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë°œìƒ ìš´ì˜ì—ì„œëŠ” ìˆ˜ë™ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ ìƒì„± í›„ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥ # ALWAYS ë¡œ ì„¤ì •spring.batch.jdbc.initialize-schema: always# EMBEDED ë¡œ ì„¤ì •spring.batch.jdbc.initialize-schema: embedded# NEVER ë¡œ ì„¤ì •spring.batch.jdbc.initialize-schema: never JOB ê´€ë ¨ í…Œì´ë¸”Spring Batch ì—ì„œ Job ê´€ë ¨ ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ BATCH_JOB_INSTANCE, BATCH_JOB_EXECUTION, BATCH_JOB_EXECUTION_PARAMS, BATCH_JOB_EXECUTION_CONTEXT 4ê°œì˜ í…Œì´ë¸”ì´ ìƒì„±ë©ë‹ˆë‹¤. BATCH_JOB_INSTANCE Job ì´ ì‹¤í–‰ë  ë•Œ ìƒì„±ë˜ëŠ” JobInstance ê´€ë ¨ ì •ë³´ ì €ì¥í•˜ëŠ” í…Œì´ë¸” job_name ê³¼ job_key ë¥¼ í‚¤ë¡œ í•˜ì—¬ í•˜ë‚˜ì˜ ë°ì´í„°ê°€ ì €ì¥ëœë‹¤. ë™ì¼í•œ job_name ê³¼ job_key ë¡œ ì¤‘ë³µ ì €ì¥ë  ìˆ˜ ì—†ë‹¤. BATCH_JOB_EXECUTION Job ì˜ ì‹¤í–‰ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” JobExecution ì •ë³´ë¥¼ ì €ì¥í•œë‹¤. job ì˜ ì‹¤í–‰ì •ë³´ê°€ ì €ì¥ë˜ë©° Job ì˜ ìƒì„±, ì‹œì‘ì‹œê°„, ì¢…ë£Œì‹œê°„, ì‹¤í–‰ ìƒíƒœ, ë©”ì‹œì§€ë“±ì„ ì €ì¥í•˜ëŠ” í…Œì´ë¸” BATCH_JOB_INSTANCE í…Œì´ë¸”ê³¼ BATCH_JOB_EXECUTION í…Œì´ë¸”ì€ 1:N ê´€ê³„ë¥¼ ê°€ì§€ê³  ìˆë‹¤. BATCH_JOB_EXECUTION í…Œì´ë¸” ì»¬ëŸ¼ Column ì„¤ëª… íŠ¹ì§• JOB_EXECUTION_ID BATCH_JOB_EXECUTION ì˜ ê¸°ë³¸ í‚¤ VERSION ì—…ë°ì´íŠ¸ ë ë•Œë§ˆë‹¤ 1ì”© ì¦ê°€ JOB_INSTANCE_ID JOB_INSTANCE ì˜ í‚¤ ê°’ì„ ì €ì¥í•œë‹¤. CREATE_TIME JOB_EXECUTION ì´ ìƒì„±ëœ ì‹œê°„ì„ ì €ì¥í•œë‹¤. START_TIME JOB_EXECUTION ì´ ì‹œì‘ëœ ì‹œê°„ì„ ì €ì¥í•œë‹¤. END_TIME JOB_EXECUTION ì˜ ì¢…ë£Œ ì‹œê°„ì„ ì €ì¥ Job ì‹¤í–‰ ë„ì¤‘ ì¤‘ë‹¨ ë˜ë©´ ê°’ì´ ì €ì¥ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ (null) STATUS JOB_EXECUTION ì˜ ì‹¤í–‰ ìƒíƒœë¥¼ ì €ì¥í•œë‹¤. COMPLETED, FAILED, STOPPED ë“± EXIT_CODE JOB_EXECUTION ì˜ ì‹¤í–‰ ì¢…ë£Œ ì½”ë“œë¥¼ ì €ì¥í•œë‹¤ COMPLETED, FAILED ë“± EXIT_MESSAGE STATUS ê°€ FAIL ì¼ ê²½ìš° ì‹¤íŒ¨ ì›ì¸ ë‚´ìš©ì„ ì €ì¥í•œë‹¤. LAST_UPDATED ë§ˆì§€ë§‰ ì‹¤í–‰ ì‹œì ì„ TIMESTAMP ë¡œ ì €ì¥í•œë‹¤. BATCH_JOB_EXECUTION_PARAMS Job ê³¼ í•¨ê»˜ ì‹¤í–‰ë˜ëŠ” JobParameter ì •ë³´ë¥¼ ì €ì¥í•œë‹¤. BATCH_JOB_EXECUTION ì™€ BATCH_JOB_EXECUTION_PARAMS ê´€ê³„ëŠ” 1:N ì˜ ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤. BATCH_JOB_EXECUTION_PARAMS í…Œì´ë¸” ì»¬ëŸ¼ Column ì„¤ëª… íŠ¹ì§• JOB_EXECUTION_ID BATCH_JOB_EXECUTION í…Œì´ë¸” KEY ê°’ì„ ì €ì¥ 1:N ê´€ê³„ TYPE_CD String, Long, Double ë“±ì˜ íƒ€ì… ì •ë³´ë¥¼ ì €ì¥ KEY_NAME Parameter Key ê°’ STRING_VAL Parameter ë¬¸ì ê°’ DATE_VAL Parameter ë‚ ì§œ ê°’ LONG_VAL Parameter LONG ê°’ DOUBLE_VAL Parameter DOUBLE ê°’ IDENTIFYING ì‹ë³„ì—¬ë¶€ (TRUE, FALSE) BATCH_JOB_EXECUTION_CONTEXT Job ì˜ ì‹¤í–‰ë™ì•ˆ ì—¬ëŸ¬ê°€ì§€ ìƒíƒœì •ë³´, ê³µìœ  ë°ì´í„°ë¥¼ ì§ë ¬í™” í•´ì„œ ì €ì¥ Step ê°„ ì„œë¡œ ê³µìœ ê°€ ê°€ëŠ¥í•˜ë‹¤. BATCH_JOB_EXECUTION ì™€ BATCH_JOB_EXECUTION_CONTEXT ê´€ê³„ëŠ” 1:N ì˜ ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤. BATCH_JOB_EXECUTION_CONTEXT í…Œì´ë¸” ì»¬ëŸ¼ Column ì„¤ëª… íŠ¹ì§• JOB_EXECUTION_ID BATCH_JOB_EXECUTION í…Œì´ë¸” KEY ê°’ì„ ì €ì¥ JOB_EXECUTION ë§ˆë‹¤ ìƒì„±ëœë‹¤. SHORT_CONTEXT JOB ì˜ ì‹¤í–‰ ìƒíƒœ ì •ë³´, ê³µìœ  ë°ì´í„°ë“±ì˜ ì •ë³´ë¥¼ ë¬¸ìì—´ë¡œ ì €ì¥ SERIALIZED_CONTEXT ì§ë ¬í™”(SERIALIZED) ëœ ì „ì²´ Context STEP ê´€ë ¨ í…Œì´ë¸”Spring Batch ì—ì„œ Step ê´€ë ¨ ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ BATCH_STEP_EXECUTION, BATCH_STEP_EXECUTION_CONTEXT 2ê°œì˜ í…Œì´ë¸”ì´ ìƒì„±ë©ë‹ˆë‹¤. BATCH_STEP_EXECUTION Step ì˜ ì‹¤í–‰ì •ë³´ê°€ ì €ì¥ë˜ë©° ìƒì„±, ì‹œì‘ì‹œê°„, ì¢…ë£Œì‹œê°„, ì‹¤í–‰ìƒíƒœ, ë©”ì‹œì§€ ë“±ì„ ì €ì¥í•˜ëŠ” í…Œì´ë¸” BATCH_JOB_EXECUTION í…Œì´ë¸”ê³¼ BATCH_STEP_EXECUTION í…Œì´ë¸”ì€ 1:N ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤. BATCH_STEP_EXECUTION í…Œì´ë¸” ì»¬ëŸ¼ Column ì„¤ëª… íŠ¹ì§• STEP_EXECUTION_ID Step ì˜ ì‹¤í–‰ ì •ë³´ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆëŠ” Key VERSION Update ë ë•Œë§ˆë‹¤ 1ì”© ì¦ê°€ STEP_NAME Step ì„ êµ¬ì„±í•  ë•Œ ë¶€ì—¬í•˜ëŠ” Step ì´ë¦„ JOB_EXECUTION_ID JobExecution ê¸°ë³¸ í‚¤ JobExecution ê³¼ëŠ” 1:N ê´€ê³„ START_TIME BATCH_JOB_EXECUTION ì˜ ì‹œì‘ ì‹œê°„ END_TIME BATCH_JOB_EXECUTION ì˜ ì¢…ë£Œ ì‹œê°„ STATUS BATCH_JOB_EXECUTION ì˜ ìƒíƒœ ì •ë³´ COMMIT_COUNT íŠ¸ëœì­ì…˜ ë‹¹ Commit ë˜ëŠ” Count READ_COUNT ì‹¤í–‰ ì‹œì ì— READ í•œ ITEM ìˆ˜ë¥¼ Count FILTER_COUNT ì‹¤í–‰ ì‹œì ì— FILTER ëœ ITEM ìˆ˜ë¥¼ Count WRITE_COUNT ì‹¤í–‰ ì‹œì ì— ì €ì¥í•˜ê³  ìˆ˜ì •ëœ ITEM ìˆ˜ë¥¼ Count READ_SKIP_COUNT ì‹¤í–‰ ë„ì¤‘ READ ê°€ SKIP ëœ ITEM ìˆ˜ë¥¼ Count WRITE_SKIP_COUNT ì‹¤í–‰ ë„ì¤‘ WRITE ê°€ SKIP ëœ ITEM ìˆ˜ë¥¼ Count PROCESS_SKIP_COUNT ì‹¤í–‰ ë„ì¤‘ PROCESS ê°€ SKIP ëœ ITEM ìˆ˜ë¥¼ Count ROLLBACK_COUNT ì‹¤í–‰ ë„ì¤‘ ROLLBACK ëœ ITEM ìˆ˜ë¥¼ Count EXIT_CODE ì‹¤í–‰ ì¢…ë£Œ ì½”ë“œë¥¼ ì €ì¥í•œë‹¤. EXIT_MESSAGE STATUS ê°€ ì‹¤íŒ¨ì¼ ê²½ìš° ì‹¤íŒ¨ ì›ì¸ì„ ì €ì¥í•œë‹¤. LAST_UPDATED ë§ˆì§€ë§‰ ì‹¤í–‰ ì‹œì ì„ TIMESTAMP ë¡œ ì €ì¥í•œë‹¤. BATCH_STEP_EXECUTION_CONTEXT Stepì˜ ì‹¤í–‰ë™ì•ˆ ì—¬ëŸ¬ê°€ì§€ ìƒíƒœ ì •ë³´, ê³µìœ  ë°ì´í„°ë¥¼ ì§ë ¬í™” í•´ì„œ ì €ì¥ BATCH_JOB_EXECUTION_CONTEXT ì™€ëŠ” ë‹¤ë¥´ê²Œ Step ë³„ë¡œ ì €ì¥ë˜ë©° Step ê°„ ì„œë¡œ ê³µìœ  í•  ìˆ˜ ì—†ìŒ BATCH_STEP_EXECUTION_CONTEXT í…Œì´ë¸” ì»¬ëŸ¼ Column ì„¤ëª… íŠ¹ì§• STEP_EXECUTION_ID StepExecution ì‹ë³„ í‚¤ STEP_EXECUTION ë§ˆë‹¤ ìƒì„± SHORT_CONTEXT Step ì˜ ì‹¤í–‰ ìƒíƒœ ë° ì •ë³´ë“¤ì„ ë¬¸ìì—´ë¡œ ì €ì¥í•œë‹¤. SERIALIZED_CONTEXT ì§ë ¬í™”(SERIALIZED) ëœ ì „ì²´ Context","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Spring Batch - 01. @EnableBatchProcessing","slug":"spring/spring-batch/spring-batch-01-EnableBatchProcessing","date":"2022-04-09T14:25:35.000Z","updated":"2024-02-26T15:30:35.933Z","comments":true,"path":"2022/04/09/spring/spring-batch/spring-batch-01-EnableBatchProcessing/","link":"","permalink":"https://ckck803.github.io/2022/04/09/spring/spring-batch/spring-batch-01-EnableBatchProcessing/","excerpt":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing @EnableBatchProcessing @EnableBatchProcessing ì„ ì´ìš©í•´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ Spring Batch ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ ìë™ìœ¼ë¡œ ì„¤ì •í•´ì¤€ë‹¤. @SpringBootApplication@EnableBatchProcessing // Spring Batch í™œì„±í™”public class SpringBatchApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBatchApplication.class, args); &#125;&#125; Spring Batch ì´ˆê¸°í™” ê³¼ì •@EnableBatchProcessing ì„ ëª…ì‹œí•´ì£¼ë©´ Batch ê´€ë ¨ ì„¤ì • í´ë˜ìŠ¤ SimpleBatchConfiguration, BatchConfigurerConfiguration, BatchAutoConfiguration ë¥¼ ì‹¤í–‰ì‹œì¼œ Spring Batch ì´ˆê¸°í™” ë° ì‹¤í–‰ êµ¬ì„±ì´ ì´ë¤„ì§„ë‹¤.","text":"ì¶œì²˜ í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” ì •ìˆ˜ì› ê°•ì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ë°°ì¹˜ - Spring Boot ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí•˜ëŠ” Spring Batch ê°•ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì„± ëìŠµë‹ˆë‹¤. ëª©ì°¨ Spring Batch - 14. ë°°ì¹˜ ì´ˆê¸°í™” ì„¤ì • (application.properties) Spring Batch - 13. JobLauncher Spring Batch - 12. JobRepository Spring Batch - 11. ExecutionContext Spring Batch - 10. StepContribution Spring Batch - 09. StepExecution ì™€ STEP_EXECUTION í…Œì´ë¸” Spring Batch - 08. Step Spring Batch - 07. JobExecution ì™€ JOB_EXECUTION í…Œì´ë¸” Spring Batch - 06. JobParameter ì™€ JOB_EXECUTION_PARAM í…Œì´ë¸” Spring Batch - 05. JobInstance ì™€ JOB_INSTANCE í…Œì´ë¸” Spring Batch - 04. JobLauncher Spring Batch - 03. Job Spring Batch - 02. Batch ì—ì„œ ì‚¬ìš©í•˜ëŠ” Table Spring Batch - 01. @EnableBatchProcessing @EnableBatchProcessing @EnableBatchProcessing ì„ ì´ìš©í•´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ Spring Batch ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ ìë™ìœ¼ë¡œ ì„¤ì •í•´ì¤€ë‹¤. @SpringBootApplication@EnableBatchProcessing // Spring Batch í™œì„±í™”public class SpringBatchApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBatchApplication.class, args); &#125;&#125; Spring Batch ì´ˆê¸°í™” ê³¼ì •@EnableBatchProcessing ì„ ëª…ì‹œí•´ì£¼ë©´ Batch ê´€ë ¨ ì„¤ì • í´ë˜ìŠ¤ SimpleBatchConfiguration, BatchConfigurerConfiguration, BatchAutoConfiguration ë¥¼ ì‹¤í–‰ì‹œì¼œ Spring Batch ì´ˆê¸°í™” ë° ì‹¤í–‰ êµ¬ì„±ì´ ì´ë¤„ì§„ë‹¤. SimpleBatchConfiguration SimpleBatchConfigurationì€ Spring Batchì—ì„œ ë°°ì¹˜ ì²˜ë¦¬ë¥¼ ìœ„í•œ ê¸°ë³¸ ì„¤ì • ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ SimpleBatchConfiguration í´ë˜ìŠ¤ëŠ” SimpleBatchConfigurer í´ë˜ìŠ¤ì—ì„œ ì„¤ì •í•œ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ë°°ì¹˜ ì²˜ë¦¬ë¥¼ ìœ„í•œ JobRepository, JobLauncher, JobExplorer ë“±ì„ ì„¤ì •í•©ë‹ˆë‹¤. JobBuilderFactory ì™€ StepBuilderFactory ë¥¼ ìƒì„±í•œë‹¤. SimpleBatchConfiguration.java @Configuration(proxyBeanMethods = false)public class SimpleBatchConfiguration extends AbstractBatchConfiguration &#123; @Autowired private ApplicationContext context; private boolean initialized = false; private AtomicReference&lt;JobRepository&gt; jobRepository = new AtomicReference&lt;&gt;(); private AtomicReference&lt;JobLauncher&gt; jobLauncher = new AtomicReference&lt;&gt;(); private AtomicReference&lt;JobRegistry&gt; jobRegistry = new AtomicReference&lt;&gt;(); private AtomicReference&lt;PlatformTransactionManager&gt; transactionManager = new AtomicReference&lt;&gt;(); private AtomicReference&lt;JobExplorer&gt; jobExplorer = new AtomicReference&lt;&gt;(); @Override @Bean public JobRepository jobRepository() throws Exception &#123; return createLazyProxy(jobRepository, JobRepository.class); &#125; @Override @Bean public JobLauncher jobLauncher() throws Exception &#123; return createLazyProxy(jobLauncher, JobLauncher.class); &#125; @Override @Bean public JobRegistry jobRegistry() throws Exception &#123; return createLazyProxy(jobRegistry, JobRegistry.class); &#125; @Override @Bean public JobExplorer jobExplorer() &#123; return createLazyProxy(jobExplorer, JobExplorer.class); &#125; @Override @Bean public PlatformTransactionManager transactionManager() throws Exception &#123; return createLazyProxy(transactionManager, PlatformTransactionManager.class); &#125; private &lt;T&gt; T createLazyProxy(AtomicReference&lt;T&gt; reference, Class&lt;T&gt; type) &#123; ProxyFactory factory = new ProxyFactory(); factory.setTargetSource(new ReferenceTargetSource&lt;&gt;(reference)); factory.addAdvice(new PassthruAdvice()); factory.setInterfaces(new Class&lt;?&gt;[] &#123; type &#125;); @SuppressWarnings(&quot;unchecked&quot;) T proxy = (T) factory.getProxy(); return proxy; &#125; protected void initialize() throws Exception &#123; if (initialized) &#123; return; &#125; BatchConfigurer configurer = getConfigurer(context.getBeansOfType(BatchConfigurer.class).values()); jobRepository.set(configurer.getJobRepository()); jobLauncher.set(configurer.getJobLauncher()); transactionManager.set(configurer.getTransactionManager()); jobRegistry.set(new MapJobRegistry()); jobExplorer.set(configurer.getJobExplorer()); initialized = true; &#125; private class PassthruAdvice implements MethodInterceptor &#123; @Override public Object invoke(MethodInvocation invocation) throws Throwable &#123; return invocation.proceed(); &#125; &#125; private class ReferenceTargetSource&lt;T&gt; extends AbstractLazyCreationTargetSource &#123; private AtomicReference&lt;T&gt; reference; public ReferenceTargetSource(AtomicReference&lt;T&gt; reference) &#123; this.reference = reference; &#125; @Override protected Object createObject() throws Exception &#123; initialize(); return reference.get(); &#125; &#125;&#125; BatchConfigurerConfiguration BatchConfigurerConfiguration ì€ Spring Batch ì—ì„œ ë°°ì¹˜ ì²˜ë¦¬ë¥¼ ìœ„í•œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°, íŠ¸ëœì­ì…˜ ê´€ë¦¬ ë“±ì„ ìˆ˜í–‰í•˜ëŠ” BatchConfigurer ë¥¼ ì„¤ì •í•˜ëŠ” ìë™ êµ¬ì„± í´ë˜ìŠ¤ BatchConfigurerConfiguration í´ë˜ìŠ¤ëŠ” JdbcBatchConfiguration ì™€ JpaBatchConfiguration ë‘ê°œì˜ ì •ì  í´ë˜ìŠ¤ë¥¼ ì œê³µí•œë‹¤. JdbcBatchConfiguration JdbcBatchConfigurationì€ JDBC ê¸°ë°˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ì„ ì²˜ë¦¬ JdbcBatchConfiguration ì€ Spring Batchì—ì„œ JDBC ê¸°ë°˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” JobRepository, TransactionManager, DataSource, JobLauncher ë“±ì„ ì„¤ì •í•©ë‹ˆë‹¤. JdbcBatchConfiguration ì€ H2 ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ JobRepositoryë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ê°œë°œìê°€ H2 ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´, JdbcBatchConfiguration í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ìƒˆë¡œìš´ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. JdbcBatchConfiguration ëŠ” BasicBatchConfigurer ê°ì²´ë¥¼ ìƒì„±í•˜ê³  Bean ìœ¼ë¡œ ë“±ë¡í•˜ê¸° ë•Œë¬¸ì— í•„ìš”í• ë•Œ ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•´ BasicBatchConfigurer ê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. BasicBatchConfigurerBasicBatchConfigurer ê°ì²´ëŠ” SimpleBatchConfiguration ì—ì„œ ìƒì„±í•œ í”„ë¡ì‹œ ê°ì²´ì˜ ì‹¤ì œ ëŒ€ìƒ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. BasicBatchConfigurerëŠ” Batchì˜ ë‹¤ì–‘í•œ êµ¬ì„± ìš”ì†Œë¥¼ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, JobRepository, JobLauncher, TaskExecutor ë“±ì˜ êµ¬ì„± ìš”ì†Œë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. ë˜í•œ, BasicBatchConfigurerëŠ” í•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ë¥¼ ì„¤ì •í•˜ê³ , íŠ¸ëœì­ì…˜ ê´€ë¦¬ë¥¼ ìœ„í•œ íŠ¸ëœì­ì…˜ ë§¤ë‹ˆì €ë¥¼ êµ¬ì„±í•˜ëŠ” ë“±ì˜ ì¼ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. Spring Batchì—ì„œëŠ” ê°œë°œìê°€ ì§ì ‘ BasicBatchConfigurerë¥¼ ìƒì†í•˜ì—¬ í•„ìš”í•œ Batch í™˜ê²½ì„ êµ¬ì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´, ê°œë°œìëŠ” Batch Jobì˜ ì‹¤í–‰ ì‹œë‚˜ë¦¬ì˜¤ì— ë§ê²Œ Batch í™˜ê²½ì„ ìœ ì—°í•˜ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. BasicBatchConfigurerëŠ” ì¼ë°˜ì ìœ¼ë¡œ SimpleBatchConfigurationì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ë©ë‹ˆë‹¤. SimpleBatchConfigurationì€ ê°€ì¥ ê¸°ë³¸ì ì¸ Batch í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” í´ë˜ìŠ¤ì´ë©°, ëª¨ë“  Batch êµ¬ì„± ìš”ì†Œë¥¼ ë©”ëª¨ë¦¬ ë‚´ ë°ì´í„° ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë©”ëª¨ë¦¬ ë‚´ ë°ì´í„° ì €ì¥ì†ŒëŠ” ë‹¨ìˆœí•œ Batch ì‘ì—…ì„ í…ŒìŠ¤íŠ¸í•˜ê±°ë‚˜, ê°œë°œ ë‹¨ê³„ì—ì„œ ì‚¬ìš©í•˜ê¸° ì í•©í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ Batch ì‘ì—…ì„ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. JpaBatchConfiguration JpaBatchConfigurationì€ JPA ê¸°ë°˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ì„ ì²˜ë¦¬ JpaBatchConfiguration ì€ Spring Batchì—ì„œ JPA ê¸°ë°˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” JobRepository, TransactionManager, EntityManagerFactory, JobLauncher ë“±ì„ ì„¤ì •í•©ë‹ˆë‹¤. JpaBatchConfiguration ì€ Hibernate JPA êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ EntityManagerFactory ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ê°œë°œìê°€ ë‹¤ë¥¸ JPA êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´, JpaBatchConfiguration í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ìƒˆë¡œìš´ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. JpaBatchConfiguration ëŠ” JpaBatchConfigurer ê°ì²´ë¥¼ ìƒì„±í•˜ê³  Bean ìœ¼ë¡œ ë“±ë¡í•œë‹¤. JpaBatchConfigurerJpaBatchConfigurer ëŠ” BasicBatchConfigurer ë¥¼ ìƒì†ë°›ì•„ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¡œ JPA ê´€ë ¨ ê°ì²´ë¥¼ ì„¤ì •í•˜ëŠ” ì„¤ì • í´ë˜ìŠ¤ë‹¤. JpaBatchConfigurerëŠ” Batch í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´, JpaBatchConfigurerëŠ” EntityManagerFactory, JpaTransactionManager, JpaJobRepository ë“±ì˜ êµ¬ì„± ìš”ì†Œë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. ë˜í•œ, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ì™€ JPA ì„¤ì •ì„ êµ¬ì„±í•˜ê³ , í•„ìš”í•œ ë¹ˆì„ ë“±ë¡í•©ë‹ˆë‹¤. JpaBatchConfigurerëŠ” ì¼ë°˜ì ìœ¼ë¡œ DefaultBatchConfigurerë¥¼ ìƒì†í•˜ì—¬ êµ¬í˜„ë©ë‹ˆë‹¤. DefaultBatchConfigurerëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ Batch í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” í´ë˜ìŠ¤ì´ë©°, ëª¨ë“  Batch êµ¬ì„± ìš”ì†Œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ êµ¬ì„±í•©ë‹ˆë‹¤. JpaBatchConfigurerëŠ” ì´ëŸ¬í•œ DefaultBatchConfigurerë¥¼ ìƒì†í•˜ì—¬, JPAë¥¼ ì‚¬ìš©í•˜ì—¬ Batch ì‘ì—…ì„ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ í™•ì¥í•œ ê²ƒì…ë‹ˆë‹¤. JpaBatchConfigurerë¥¼ ì‚¬ìš©í•˜ë©´, ê°œë°œìëŠ” JPAë¥¼ ì‚¬ìš©í•˜ì—¬ Batch ì‘ì—…ì„ ì‰½ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, JPAë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œì„œ ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ë§¤í•‘ ì‘ì—…ì´ ê°„ë‹¨í•´ì§€ë©°, ìœ ì§€ë³´ìˆ˜ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤. BatchConfigurerConfiguration.java @ConditionalOnClass(PlatformTransactionManager.class)@ConditionalOnBean(DataSource.class)@ConditionalOnMissingBean(BatchConfigurer.class)@Configuration(proxyBeanMethods = false)class BatchConfigurerConfiguration &#123; @Configuration(proxyBeanMethods = false) @ConditionalOnMissingBean(name = &quot;entityManagerFactory&quot;) static class JdbcBatchConfiguration &#123; @Bean BasicBatchConfigurer batchConfigurer(BatchProperties properties, DataSource dataSource, @BatchDataSource ObjectProvider&lt;DataSource&gt; batchDataSource, ObjectProvider&lt;TransactionManagerCustomizers&gt; transactionManagerCustomizers) &#123; return new BasicBatchConfigurer(properties, batchDataSource.getIfAvailable(() -&gt; dataSource), transactionManagerCustomizers.getIfAvailable()); &#125; &#125; @Configuration(proxyBeanMethods = false) @ConditionalOnClass(EntityManagerFactory.class) @ConditionalOnBean(name = &quot;entityManagerFactory&quot;) static class JpaBatchConfiguration &#123; @Bean JpaBatchConfigurer batchConfigurer(BatchProperties properties, DataSource dataSource, @BatchDataSource ObjectProvider&lt;DataSource&gt; batchDataSource, ObjectProvider&lt;TransactionManagerCustomizers&gt; transactionManagerCustomizers, EntityManagerFactory entityManagerFactory) &#123; return new JpaBatchConfigurer(properties, batchDataSource.getIfAvailable(() -&gt; dataSource), transactionManagerCustomizers.getIfAvailable(), entityManagerFactory); &#125; &#125;&#125; BatchAutoConfiguration ìŠ¤í”„ë§ ë°°ì¹˜ê°€ ì´ˆê¸°í™” ë ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì„¤ì • í´ë˜ìŠ¤ Job ì„ ì‹¤í–‰í•˜ëŠ” JobLauncherApplicationRunner Bean ì„ ìƒì„±í•œë‹¤. BatchConfigurationSelector BatchConfigurationSelector í´ë˜ìŠ¤ë¥¼ @EnableBatchProcessing ì— ì˜í•´ Bean ìœ¼ë¡œ ë“±ë¡ì„ í•œë‹¤. BatchConfigurationSelector í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œëŠ” modular Key ì—¬ë¶€ì— ë”°ë¼ ModularBatchConfiguration í˜¹ì€ SimpleBatchConfiguration ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤. BatchConfigurationSelector.java public class BatchConfigurationSelector implements ImportSelector &#123; public BatchConfigurationSelector() &#123; &#125; public String[] selectImports(AnnotationMetadata importingClassMetadata) &#123; Class&lt;?&gt; annotationType = EnableBatchProcessing.class; AnnotationAttributes attributes = AnnotationAttributes.fromMap(importingClassMetadata.getAnnotationAttributes(annotationType.getName(), false)); Assert.notNull(attributes, String.format(&quot;@%s is not present on importing class &#x27;%s&#x27; as expected&quot;, annotationType.getSimpleName(), importingClassMetadata.getClassName())); String[] imports; // modular Key ì—¬ë¶€ì— ë”°ë¼ ModularBatchConfiguration í˜¹ì€ SimpleBatchConfiguration ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ if (attributes.containsKey(&quot;modular&quot;) &amp;&amp; attributes.getBoolean(&quot;modular&quot;)) &#123; imports = new String[]&#123;ModularBatchConfiguration.class.getName()&#125;; &#125; else &#123; imports = new String[]&#123;SimpleBatchConfiguration.class.getName()&#125;; &#125; return imports; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"}],"tags":[]},{"title":"Spring Data JPA - Convertor","slug":"spring/spring-data-jpa/11-spring-data-jpa-convertor","date":"2022-04-05T10:39:59.000Z","updated":"2024-02-26T15:37:34.221Z","comments":true,"path":"2022/04/05/spring/spring-data-jpa/11-spring-data-jpa-convertor/","link":"","permalink":"https://ckck803.github.io/2022/04/05/spring/spring-data-jpa/11-spring-data-jpa-convertor/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° BooleanToYNConverterBoolean ìœ¼ë¡œ ì €ì¥ ë˜ëŠ” ê°’ì„ True, false ë¡œ ë³€ê²½í•´ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ Convertor @Converterpublic class BooleanToYNConverter implements AttributeConverter&lt;Boolean, String&gt; &#123; @Override public String convertToDatabaseColumn(Boolean attribute)&#123; return (attribute != null &amp;&amp; attribute) ? &quot;Y&quot; : &quot;N&quot;; &#125; @Override public Boolean convertToEntityAttribute(String dbData)&#123; return &quot;Y&quot;.equals(dbData); &#125;&#125; @Entity@Getter@Builder@NoArgsConstructor@AllArgsConstructor@EntityListeners(AuditingEntityListener.class)public class Post extends BaseEntity&#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column private Long id; @Column(name = &quot;POST_TITLE&quot;, length = 100, nullable = false) private String title; @Column(name = &quot;POST_SUBTITLE&quot;) private String subTitle; @Lob private String content; @ManyToOne(fetch = FetchType.LAZY) @JoinColumn(name = &quot;username&quot;, nullable = false, referencedColumnName = &quot;username&quot;) @CreatedBy private UserInfo author; @ManyToOne(fetch = FetchType.LAZY) @JoinColumn(name = &quot;CATEGORY&quot;, nullable = true, referencedColumnName = &quot;CATEGORY_NAME&quot;) private Category category; @Column(name = &quot;isDeleted&quot;) @ColumnDefault(&quot;false&quot;) @Convert(converter = BooleanToYNConverter.class) private boolean isDeleted; // ==== ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ ==== // public void changeCategory(Category category)&#123; this.category = category; // ìƒˆë¡œìš´ ì¹´í…Œê³ ë¦¬ì— í•´ë‹¹ í¬ìŠ¤íŠ¸ ì¶”ê°€ category.getPosts().add(this); &#125; public void setAuthor(UserInfo author)&#123; this.author = author; author.getPosts().add(this); &#125; public Post updatePost(Post post) &#123; this.title = post.title; this.subTitle = post.subTitle; this.content = post.content; changeCategory(post.getCategory()); return this; &#125;&#125;","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° BooleanToYNConverterBoolean ìœ¼ë¡œ ì €ì¥ ë˜ëŠ” ê°’ì„ True, false ë¡œ ë³€ê²½í•´ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ Convertor @Converterpublic class BooleanToYNConverter implements AttributeConverter&lt;Boolean, String&gt; &#123; @Override public String convertToDatabaseColumn(Boolean attribute)&#123; return (attribute != null &amp;&amp; attribute) ? &quot;Y&quot; : &quot;N&quot;; &#125; @Override public Boolean convertToEntityAttribute(String dbData)&#123; return &quot;Y&quot;.equals(dbData); &#125;&#125; @Entity@Getter@Builder@NoArgsConstructor@AllArgsConstructor@EntityListeners(AuditingEntityListener.class)public class Post extends BaseEntity&#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column private Long id; @Column(name = &quot;POST_TITLE&quot;, length = 100, nullable = false) private String title; @Column(name = &quot;POST_SUBTITLE&quot;) private String subTitle; @Lob private String content; @ManyToOne(fetch = FetchType.LAZY) @JoinColumn(name = &quot;username&quot;, nullable = false, referencedColumnName = &quot;username&quot;) @CreatedBy private UserInfo author; @ManyToOne(fetch = FetchType.LAZY) @JoinColumn(name = &quot;CATEGORY&quot;, nullable = true, referencedColumnName = &quot;CATEGORY_NAME&quot;) private Category category; @Column(name = &quot;isDeleted&quot;) @ColumnDefault(&quot;false&quot;) @Convert(converter = BooleanToYNConverter.class) private boolean isDeleted; // ==== ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ ==== // public void changeCategory(Category category)&#123; this.category = category; // ìƒˆë¡œìš´ ì¹´í…Œê³ ë¦¬ì— í•´ë‹¹ í¬ìŠ¤íŠ¸ ì¶”ê°€ category.getPosts().add(this); &#125; public void setAuthor(UserInfo author)&#123; this.author = author; author.getPosts().add(this); &#125; public Post updatePost(Post post) &#123; this.title = post.title; this.subTitle = post.subTitle; this.content = post.content; changeCategory(post.getCategory()); return this; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"Spring Boot - ë©”ì‹œì§€ êµ­ì œí™” MessageSource","slug":"spring/spring-framework/springboot-messageresource","date":"2022-03-30T19:31:46.000Z","updated":"2025-01-01T11:19:23.606Z","comments":true,"path":"2022/03/31/spring/spring-framework/springboot-messageresource/","link":"","permalink":"https://ckck803.github.io/2022/03/31/spring/spring-framework/springboot-messageresource/","excerpt":"ëª©ì°¨ Post not found: spring-boot/spring-framework/springboot-actuator Post not found: spring-boot/spring-framework/springboot-messageresource Post not found: spring-boot/spring-framework/configuration/springboot-WebMvcConfigurer Post not found: spring-boot/spring-framework/configuration/springboot-autoconfiguration ì°¸ê³  https://gist.github.com/dlxotn216/cb9fe1e40c7961da9d7147d9ebc876d6 ë©”ì‹œì§€ ê´€ë¦¬ë¥¼ ìœ„í•œ MessageSourceì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì„ ì§„í–‰í•˜ë‹¤ê°€ ë³´ë©´ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ë•Œ í•˜ë“œ ì½”ë”©ìœ¼ë¡œ ë„£ë‹¤ ë³´ë©´ ê°™ì€ ë§¥ëµìœ¼ë¡œ ì“°ì¸ ë©”ì‹œì§€ë“¤ì´ ì„œë¡œ ìƒì´í•˜ê²Œ ê´€ë¦¬ë˜ëŠ” ê²ƒì„ ëŠë‚„ ìˆ˜ ìˆì—ˆê³  ë¬´ì—‡ë³´ë‹¤ ê°€ì¥ í° ë¬¸ì œëŠ” ë©”ì‹œì§€ë¥¼ ë³€ê²½í•˜ê²Œ ë  ê²½ìš° í•´ë‹¹ ë©”ì‹œì§€ê°€ ì‚¬ìš©ëœ ì†ŒìŠ¤ë¥¼ ì „ë¶€ ì°¾ì•„ ë³€ê²½í•´ ì¤˜ì•¼ í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. ì´ëŸ° ë©”ì‹œì§€ íŒŒí¸í™”ë¥¼ ë§‰ê³  í•œ ê³³ì—ì„œ ëª¨ë“  ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ Spring ì—ì„œëŠ” MessageSource ë¥¼ ì œê³µí•œë‹¤. MessageSource ë©”ì‹œì§€ë¥¼ í•œ íŒŒì¼ message.properties ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. ê²½ë¡œ : main&#x2F;resource&#x2F;message.properties ë©”ì‹œì§€ì— ëŒ€í•œ ë‹¤êµ­ì–´ ì²˜ë¦¬ ë¥¼ ì§€ì›í•œë‹¤. ì‚¬ìš©ë²• : message_[ì–¸ì–´ì½”ë“œ].properties ì˜ì–´ : message_en.properties í•œêµ­ì–´ : message_ko.properties ë©”ì‹œì§€ ë“±ë¡ ê²½ë¡œ : main&#x2F;resource&#x2F;message.properties","text":"ëª©ì°¨ Post not found: spring-boot/spring-framework/springboot-actuator Post not found: spring-boot/spring-framework/springboot-messageresource Post not found: spring-boot/spring-framework/configuration/springboot-WebMvcConfigurer Post not found: spring-boot/spring-framework/configuration/springboot-autoconfiguration ì°¸ê³  https://gist.github.com/dlxotn216/cb9fe1e40c7961da9d7147d9ebc876d6 ë©”ì‹œì§€ ê´€ë¦¬ë¥¼ ìœ„í•œ MessageSourceì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì„ ì§„í–‰í•˜ë‹¤ê°€ ë³´ë©´ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ë•Œ í•˜ë“œ ì½”ë”©ìœ¼ë¡œ ë„£ë‹¤ ë³´ë©´ ê°™ì€ ë§¥ëµìœ¼ë¡œ ì“°ì¸ ë©”ì‹œì§€ë“¤ì´ ì„œë¡œ ìƒì´í•˜ê²Œ ê´€ë¦¬ë˜ëŠ” ê²ƒì„ ëŠë‚„ ìˆ˜ ìˆì—ˆê³  ë¬´ì—‡ë³´ë‹¤ ê°€ì¥ í° ë¬¸ì œëŠ” ë©”ì‹œì§€ë¥¼ ë³€ê²½í•˜ê²Œ ë  ê²½ìš° í•´ë‹¹ ë©”ì‹œì§€ê°€ ì‚¬ìš©ëœ ì†ŒìŠ¤ë¥¼ ì „ë¶€ ì°¾ì•„ ë³€ê²½í•´ ì¤˜ì•¼ í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. ì´ëŸ° ë©”ì‹œì§€ íŒŒí¸í™”ë¥¼ ë§‰ê³  í•œ ê³³ì—ì„œ ëª¨ë“  ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ Spring ì—ì„œëŠ” MessageSource ë¥¼ ì œê³µí•œë‹¤. MessageSource ë©”ì‹œì§€ë¥¼ í•œ íŒŒì¼ message.properties ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. ê²½ë¡œ : main&#x2F;resource&#x2F;message.properties ë©”ì‹œì§€ì— ëŒ€í•œ ë‹¤êµ­ì–´ ì²˜ë¦¬ ë¥¼ ì§€ì›í•œë‹¤. ì‚¬ìš©ë²• : message_[ì–¸ì–´ì½”ë“œ].properties ì˜ì–´ : message_en.properties í•œêµ­ì–´ : message_ko.properties ë©”ì‹œì§€ ë“±ë¡ ê²½ë¡œ : main&#x2F;resource&#x2F;message.properties Key, Value í˜•ì‹ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ë“±ë¡í•´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê°’ì„ ë™ì ìœ¼ë¡œ ë°›ì•„ Message ë¥¼ ë„ìš°ê³  ì‹¶ì„ ê²½ìš° {0}, {1} í˜•ì‹ìœ¼ë¡œ argument ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. created.message=Successfully &#123;0&#125; is created MessageSource ì¸í„°í˜ì´ìŠ¤MessageSource ê°ì²´ë¥¼ ì‚¬ìš©í•´ message.properties ì— ì €ì¥ëœ Message ë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆë‹¤. MessageSource.javapublic interface MessageSource &#123; @Nullable String getMessage(String code, @Nullable Object[] args, @Nullable String defaultMessage, Locale locale); String getMessage(String code, @Nullable Object[] args, Locale locale) throws NoSuchMessageException; String getMessage(MessageSourceResolvable resolvable, Locale locale) throws NoSuchMessageException;&#125; MessageSource Bean ìƒì„±ResourceBundleMessageSource ë¥¼ ì´ìš©í•´ Resource ì— ì €ì¥ëœ message.properties íŒŒì¼ì„ ì½ì–´ì˜¨ í›„ MessageSource Bean ì„ ë§Œë“¤ì–´ì¤€ë‹¤. @Beanpublic MessageSource messageSource()&#123; ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource(); messageSource.setBasename(&quot;messages&quot;); // ë©”ì‹œì§€ ë¦¬ì†ŒìŠ¤ ë²ˆë“¤ ì§€ì • messageSource.setDefaultEncoding(&quot;UTF-8&quot;); // ë¬¸ì Encoding ì„¤ì • return messageSource;&#125; application.properties ë¥¼ ì´ìš©í•œ ë“±ë¡Java Code ë¥¼ ì´ìš©í•´ MessageSource Bean ì„ ë“±ë¡í•  ìˆ˜ ìˆì§€ë§Œ Spring Boot ì˜ ê²½ìš° MessageSource ë¹ˆì„ ìë™ìœ¼ë¡œ ë“±ë¡í•´ì¤€ë‹¤.(default name &#x3D; messages) ë˜í•œ, Application.properties ë¥¼ ì´ìš©í•´ ì¶”ê°€ì ì¸ ì„¤ì •ì„ í•´ì¤„ ìˆ˜ ìˆë‹¤. spring.messages.basename=messages,config.i18n.messages MessageSource ë¥¼ ì´ìš©í•´ ë©”ì‹œì§€ ì‚¬ìš©í•˜ê¸° MessageSource ê°ì²´ë‚´ getMessage ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ë“±ë¡ëœ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. getMessage ì²«ë²ˆì§¸ ê°’ì€ ë“±ë¡ëœ key ê°’, ë‘ë²ˆì§¸ ê°’ì€ ì „ë‹¬í•˜ê³ ì í•˜ëŠ” argument ê°’, ì„¸ë²ˆì§¸ ê°’ì€ ë‹¤êµ­ì–´ ì²˜ë¦¬ë¥¼ ìœ„í•œ Locale ì •ë³´ë‹¤. AuthController.java@RequestMapping(&quot;/api/auth&quot;)@RestController@RequiredArgsConstructorpublic class AuthController &#123; private final UserInfoService userInfoService; private final MessageSource messageSource; @PostMapping(&quot;/signup&quot;) public ResponseEntity registerUser(@RequestBody RequestRegisterUser registerUser) &#123; registerUser.setPassword(registerUser.getPassword()); UserInfo userinfo = userInfoService.saveUser(registerUser); return new ResponseEntity(messageSource.getMessage(&quot;created.message&quot;, new String[]&#123;&quot;User Account&quot;&#125;, null), HttpStatus.OK); &#125; @GetMapping(&quot;/logout&quot;) public void logout() &#123; &#125;&#125; MessageSource ErrorMessageSource ì— ë“±ë¡ë˜ì§€ ì•Šì€ ë©”ì‹œì§€ë¥¼ ì¡°íšŒí•˜ê²Œ ë  ê²½ìš° NoSuchMessageException ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤. @Testpublic void MessageFailTest()&#123; assertThatThrownBy(() -&gt; &#123; messageSource.getMessage(&quot;code&quot;, null, null); &#125;).isInstanceOf(NoSuchMessageException.class);&#125; LocaleResolver ì¸í„°í˜ì´ìŠ¤ Spring ì€ Locale ì •ë³´ë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆê²Œ LocalResolver ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤. LocalResolver ê°ì²´ë¥¼ ì´ìš©í•´ Locale ê°ì²´ê°€ ë§Œë“¤ì–´ ì§€ë©´ í•´ë‹¹ ê°ì²´ë¥¼ ì´ìš©í•´ LocaleContext ê°ì²´ê°€ ë§Œë“¤ì–´ì§€ê³  LocaleContextHolder ë¼ëŠ” ì €ì¥ì†Œì— ì €ì¥ëœë‹¤. LocaleContextHolder ì€ LocaleContext ë¥¼ ThreadLocal ì„ ì´ìš©í•´ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— Thread Safe í•˜ê²Œ Locale ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤. LocaleResolver.javapublic interface LocaleResolver &#123; Locale resolveLocale(HttpServletRequest request); void setLocale(HttpServletRequest request, @Nullable HttpServletResponse response, @Nullable Locale locale);&#125; AcceptHeaderLocaleResolver Accept Header ê¸°ë°˜ìœ¼ë¡œ Locale ì •ë³´ë¥¼ ì½ì–´ì˜¤ëŠ” Resolver LocaleResolver ì˜ ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ëŠ” Request Header ë¡œë¶€í„° Locale ì •ë³´ë¥¼ ì½ì–´ì˜¤ëŠ” AcceptHeaderLocaleResolver ê°€ ìˆë‹¤. AcceptHeaderLocaleResolver ê°ì²´ëŠ” LocaleContextHolder ì— Locale ì •ë³´ë¥¼ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤. AcceptHeaderLocaleResolver.java@Overridepublic Locale resolveLocale(HttpServletRequest request) &#123; Locale defaultLocale = getDefaultLocale(); if (defaultLocale != null &amp;&amp; request.getHeader(&quot;Accept-Language&quot;) == null) &#123; return defaultLocale; &#125; Locale requestLocale = request.getLocale(); List&lt;Locale&gt; supportedLocales = getSupportedLocales(); if (supportedLocales.isEmpty() || supportedLocales.contains(requestLocale)) &#123; return requestLocale; &#125; Locale supportedLocale = findSupportedLocale(request, supportedLocales); if (supportedLocale != null) &#123; return supportedLocale; &#125; return (defaultLocale != null ? defaultLocale : requestLocale);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Spring Framework","slug":"Spring/Spring-Boot/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Spring-Framework/"}],"tags":[]},{"title":"Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸°","slug":"spring/spring-security/oauth2/oauth2-04-authenticate","date":"2022-03-20T04:26:33.000Z","updated":"2024-02-26T16:23:52.095Z","comments":true,"path":"2022/03/20/spring/spring-security/oauth2/oauth2-04-authenticate/","link":"","permalink":"https://ckck803.github.io/2022/03/20/spring/spring-security/oauth2/oauth2-04-authenticate/","excerpt":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° ì°¸ê³  https://www.baeldung.com/spring-security-5-oauth2-login https://www.docs4dev.com/docs/en/spring-security/5.1.2.RELEASE/reference/jc.html#oauth2client OAuth2LoginAuthenticationFilter OAuth2 ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•œ Filter OAuth2 ì¸ì¦ ë°©ì‹ë„ UsernamePassword ì¸ì¦ê³¼ ê°™ì´ ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•œ Filter ê°€ ì¡´ì¬í•œë‹¤. OAuth2LoginAuthenticationFilter ì—ì„œëŠ” Authentication Server ë¡œë¶€í„° Authorization Code ë¥¼ ë°›ì€ í›„ Acess Token ê³¼ Reflesh Token ì„ ë°›ê¸° ìœ„í•œ ê³¼ì •ì„ ì§„í–‰í•œë‹¤. ClientRegistrationRepository ClientRegistration ì •ë³´ë¥¼ ì €ì¥ ë° ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Class OAuth2AuthorizedClient ì¸ì¦ëœ Client ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ Class Access Token, Reflesh Token, ClientRegistration ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” Class OAuth2AuthorizedClientRepository OAuth2AuthorizedClient ì •ë³´ë¥¼ ì €ì¥ ë° ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Class ì¸ì¦ì´ ì§„í–‰ì¤‘ì¸ Client ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” HttpSessionOAuth2AuthorizedClientRepository OAuth2AuthorizedClientService Application Level ì—ì„œ OAuth2AuthorizedClient ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Class ì¸ì¦ì´ ì™„ë£Œëœ Client ì •ë³´ë¥¼ ì €ì¥ì†Œ ì—ì„œ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©í•œë‹¤. ë©”ëª¨ë¦¬ì— OAuth2AuthorizedClient ê°ì²´ë¥¼ ì €ì¥í•˜ëŠ” InMemoryOAuth2AuthorizedClientService ë°ì´í„° ë² ì´ìŠ¤ì— OAuth2AuthorizedClient ê°ì²´ë¥¼ ì €ì¥í•˜ëŠ” JdbcOAuth2AuthorizedClientService AuthorizationRequestRepository ì¸ì¦ ìš”ì²­ì—ì„œ ì¸ì¦ ì‘ë‹µì„ ë°›ì„ë•Œ ê¹Œì§€ OAuth2AuthorizationRequest ì˜ ì§€ì†ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ Class ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” Session ì— ì €ì¥í•˜ëŠ” HttpSessionOAuth2AuthorizationRequestRepository OAuth2AuthorizationRequestResolver registrationId ì™€ HttpServletRequest ë¥¼ OAuth2AuthorizationRequest ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ Class ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” DefaultOAuth2AuthorizationRequestResolver OAuth2AccessTokenResponseClient Authorization Code ë¥¼ Access Token ìœ¼ë¡œ êµí™˜í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” Class ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” DefaultAuthorizationCodeTokenResponseClient ì¸ì¦ ê³¼ì •","text":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° ì°¸ê³  https://www.baeldung.com/spring-security-5-oauth2-login https://www.docs4dev.com/docs/en/spring-security/5.1.2.RELEASE/reference/jc.html#oauth2client OAuth2LoginAuthenticationFilter OAuth2 ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•œ Filter OAuth2 ì¸ì¦ ë°©ì‹ë„ UsernamePassword ì¸ì¦ê³¼ ê°™ì´ ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•œ Filter ê°€ ì¡´ì¬í•œë‹¤. OAuth2LoginAuthenticationFilter ì—ì„œëŠ” Authentication Server ë¡œë¶€í„° Authorization Code ë¥¼ ë°›ì€ í›„ Acess Token ê³¼ Reflesh Token ì„ ë°›ê¸° ìœ„í•œ ê³¼ì •ì„ ì§„í–‰í•œë‹¤. ClientRegistrationRepository ClientRegistration ì •ë³´ë¥¼ ì €ì¥ ë° ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Class OAuth2AuthorizedClient ì¸ì¦ëœ Client ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ Class Access Token, Reflesh Token, ClientRegistration ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” Class OAuth2AuthorizedClientRepository OAuth2AuthorizedClient ì •ë³´ë¥¼ ì €ì¥ ë° ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Class ì¸ì¦ì´ ì§„í–‰ì¤‘ì¸ Client ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” HttpSessionOAuth2AuthorizedClientRepository OAuth2AuthorizedClientService Application Level ì—ì„œ OAuth2AuthorizedClient ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Class ì¸ì¦ì´ ì™„ë£Œëœ Client ì •ë³´ë¥¼ ì €ì¥ì†Œ ì—ì„œ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©í•œë‹¤. ë©”ëª¨ë¦¬ì— OAuth2AuthorizedClient ê°ì²´ë¥¼ ì €ì¥í•˜ëŠ” InMemoryOAuth2AuthorizedClientService ë°ì´í„° ë² ì´ìŠ¤ì— OAuth2AuthorizedClient ê°ì²´ë¥¼ ì €ì¥í•˜ëŠ” JdbcOAuth2AuthorizedClientService AuthorizationRequestRepository ì¸ì¦ ìš”ì²­ì—ì„œ ì¸ì¦ ì‘ë‹µì„ ë°›ì„ë•Œ ê¹Œì§€ OAuth2AuthorizationRequest ì˜ ì§€ì†ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ Class ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” Session ì— ì €ì¥í•˜ëŠ” HttpSessionOAuth2AuthorizationRequestRepository OAuth2AuthorizationRequestResolver registrationId ì™€ HttpServletRequest ë¥¼ OAuth2AuthorizationRequest ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ Class ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” DefaultOAuth2AuthorizationRequestResolver OAuth2AccessTokenResponseClient Authorization Code ë¥¼ Access Token ìœ¼ë¡œ êµí™˜í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” Class ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” DefaultAuthorizationCodeTokenResponseClient ì¸ì¦ ê³¼ì • AuthorizationRequestRepository ê°ì²´ì—ì„œ OAuth2AuthorizationRequest ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ í›„ í•´ë‹¹ ê°ì²´ë¥¼ ì§€ìš´ë‹¤. ClientRegistration, OAuth2AuthorizationRequest, OAuth2AuthorizationResponse ê°ì²´ë¥¼ ì´ìš©í•´ OAuth2LoginAuthenticationToken ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. AuthenticationProvider ê°ì²´ë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•œ í›„ ìƒˆë¡œìš´ OAuth2LoginAuthenticationToken ê°ì²´ë¥¼ ë°˜í™˜ ë°›ëŠ”ë‹¤. Access Token ì •ë³´ì™€ Reflesh Token ì •ë³´ ClientRegistration ì •ë³´ë¥¼ ë‹´ëŠ” OAuth2AuthorizedClient ê°ì²´ë¥¼ ìƒì„± OAuth2AuthorizedClientRepository ì— ì„±ì„±ëœ OAuth2AuthorizedClient ê°ì²´ë¥¼ ì €ì¥í•œë‹¤. @Overridepublic Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException &#123; // Request ê°ì²´ë¡œë¶€í„° Parameter ë¥¼ ê°€ì ¸ì˜¨ë‹¤. MultiValueMap&lt;String, String&gt; params = OAuth2AuthorizationResponseUtils .toMultiMap(request.getParameterMap()); // Request Parameter ì— code, state ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. if (!OAuth2AuthorizationResponseUtils.isAuthorizationResponse(params)) &#123; OAuth2Error oauth2Error = new OAuth2Error(OAuth2ErrorCodes.INVALID_REQUEST); throw new OAuth2AuthenticationException(oauth2Error, oauth2Error.toString()); &#125; // AuthorizationRequestRepository ê°ì²´ì—ì„œ state ì •ë³´ì— í•´ë‹¹í•˜ëŠ” OAuth2AuthorizationRequest ê°ì²´ë¥¼ ê°€ì ¸ì˜¨í›„ í•´ë‹¹ ê°’ì„ AuthorizationRequestRepository ì—ì„œ ì§€ìš´ë‹¤. // AuthorizationRequestRepository ê°ì²´ ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” HttpSessionOAuth2AuthorizationRequestRepository OAuth2AuthorizationRequest authorizationRequest = this.authorizationRequestRepository .removeAuthorizationRequest(request, response); if (authorizationRequest == null) &#123; OAuth2Error oauth2Error = new OAuth2Error(AUTHORIZATION_REQUEST_NOT_FOUND_ERROR_CODE); throw new OAuth2AuthenticationException(oauth2Error, oauth2Error.toString()); &#125; // Registration ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ex) google, github, facebook, ... String registrationId = authorizationRequest.getAttribute(OAuth2ParameterNames.REGISTRATION_ID); // Registration ì— ë§ëŠ” client_id ì™€ client_secret ì •ë³´ë¥¼ ê°€ì ¸ì™€ ClientRegistration ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. ClientRegistration clientRegistration = this.clientRegistrationRepository.findByRegistrationId(registrationId); if (clientRegistration == null) &#123; OAuth2Error oauth2Error = new OAuth2Error(CLIENT_REGISTRATION_NOT_FOUND_ERROR_CODE, &quot;Client Registration not found with Id: &quot; + registrationId, null); throw new OAuth2AuthenticationException(oauth2Error, oauth2Error.toString()); &#125; // @formatter:off String redirectUri = UriComponentsBuilder.fromHttpUrl(UrlUtils.buildFullRequestUrl(request)) .replaceQuery(null) .build() .toUriString(); // @formatter:on // Request Parameter ë¡œë¶€í„° code, state, redirectUri ì„ ê°€ì ¸ì™€ OAuth2AuthorizationResponse ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. OAuth2AuthorizationResponse authorizationResponse = OAuth2AuthorizationResponseUtils.convert(params, redirectUri); Object authenticationDetails = this.authenticationDetailsSource.buildDetails(request); // ClientRegistration ê°ì²´ì™€ OAuth2AuthorizationRequest ê°ì²´ì™€ OAuth2AuthorizationResponse ê°ì²´ë¥¼ ì´ìš©í•´ OAuth2LoginAuthenticationToken ê°ì²´ë¥¼ ë§Œë“ ë‹¤. OAuth2LoginAuthenticationToken authenticationRequest = new OAuth2LoginAuthenticationToken(clientRegistration, new OAuth2AuthorizationExchange(authorizationRequest, authorizationResponse)); authenticationRequest.setDetails(authenticationDetails); // AuthenticationProvider ê°ì²´ë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•œë‹¤. ì¸ì¦ì‹œ ClientRegistration ì •ë³´ì™€ Authorization_code ì •ë³´ë¥¼ ì‚¬ìš©í•œë‹¤. // ì¸ì¦ì„ ì§„í–‰í•œ í›„ Acess Token, Refresh Token ì •ë³´ê°€ ë‹´ê¸´ Authentication(Token) ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. OAuth2LoginAuthenticationToken authenticationResult = (OAuth2LoginAuthenticationToken) this .getAuthenticationManager() .authenticate(authenticationRequest); // OAuth2LoginAuthenticationToken ê°ì²´ë¥¼ OAuth2AuthenticationToken ê°ì²´ë¡œ ë³€ê²½í•œë‹¤. OAuth2AuthenticationToken oauth2Authentication = this.authenticationResultConverter .convert(authenticationResult); Assert.notNull(oauth2Authentication, &quot;authentication result cannot be null&quot;); oauth2Authentication.setDetails(authenticationDetails); // Access Token ì •ë³´ì™€ Reflesh Token ì •ë³´ ClientRegistration ì •ë³´ë¥¼ ë‹´ëŠ” OAuth2AuthorizedClient ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. OAuth2AuthorizedClient authorizedClient = new OAuth2AuthorizedClient( authenticationResult.getClientRegistration(), oauth2Authentication.getName(), authenticationResult.getAccessToken(), authenticationResult.getRefreshToken()); // OAuth2AuthorizedClientRepository ì— ì„±ì„±ëœ OAuth2AuthorizedClient ê°ì²´ë¥¼ ì €ì¥í•œë‹¤. this.authorizedClientRepository.saveAuthorizedClient(authorizedClient, oauth2Authentication, request, response); return oauth2Authentication;&#125; OAuth2LoginAuthenticationProvider OAuth ë°©ì‹ì„ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•˜ê³  Authentication(ì¸ì¦) ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” Provider OAuth2AuthorizationExchange OAuth2AuthorizationRequest ê°ì²´ì™€ OAuth2AuthorizationResponse ê°ì²´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´ ClientRegistration client_id, client_secret, scope ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´ OAuth2LoginAuthenticationToken OAuth2 ì¸ì¦ì‹œ ì‚¬ìš©í•˜ëŠ” Authentication ê°ì²´ OAuth2AuthorizationCodeAuthenticationProvider Authorization Code ë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” Provider Authorization Code ë¥¼ ì´ìš©í•´ Access Token ì„ ê°€ì ¸ì˜¤ëŠ” OAuth2AccessTokenResponseClient ê°ì²´ë¥¼ ê°–ê³  ìˆë‹¤. ì¸ì¦ì— ì„±ê³µí•˜ë©´ Access Token ê³¼ Refresh Token ì„ Resource Server ë¡œë¶€í„° ë°›ê²Œ ëœë‹¤. OAuth2AuthorizationCodeAuthenticationToken Authorization Code ë¥¼ ì´ìš©í•œ ì¸ì¦ í›„ ìƒì„±ë˜ëŠ” Authentication ê°ì²´ OAuth2AccessToken(accessToken) ê³¼ OAuth2RefreshToken(refreshToken) ì„ ê´€ë¦¬í•œë‹¤. OAuth2AccessToken OAuth2 ì—ì„œ ì‚¬ìš©í•˜ëŠ” Access Token ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ OAuth2RefreshToken OAuth2 ì—ì„œ ì‚¬ìš©í•˜ëŠ” Reflesh Token ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ OAuth2User ì‚¬ìš©ì Principal ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´ OAuth2User ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ ì¸ìŠ¤í„´ìŠ¤ëŠ” OAuth2AuthenticatedPrincipal ì¸í„°í˜ì´ìŠ¤ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤. Authentication.getPrincipal() ë¥¼ ì´ìš©í•´ ê°’ì„ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤. ì¸ì¦ ì ˆì°¨ Authorization Code ë¥¼ ì´ìš©í•´ Resource Server ë¡œë¶€í„° Access Token ê³¼ Refresh Token ì„ ë°œê¸‰ ë°›ëŠ”ë‹¤. Access Token ì„ ì´ìš©í•´ Resource Server ë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¨í›„ OAuth2User ê°ì²´ë¥¼ ë°˜í™˜ ë°›ëŠ”ë‹¤. ë°˜í™˜ ë°›ì€ OAuth2User ê°ì²´ì™€ Access Token ê³¼ Refresh Token, Client Registration ì •ë³´ë¥¼ ì´ìš©í•´ ìƒˆë¡œìš´ AuthenticationToken(OAuth2LoginAuthenticationToken) ê°ì²´ë¥¼ ìƒì„± í›„ ë°˜í™˜í•œë‹¤. @Overridepublic Authentication authenticate(Authentication authentication) throws AuthenticationException &#123; // Oauth2 ì¸ì¦ì„ í†µí•´ ìƒì„±ë˜ëŠ” Authentication ê°ì²´ OAuth2LoginAuthenticationToken loginAuthenticationToken = (OAuth2LoginAuthenticationToken) authentication; if (loginAuthenticationToken.getAuthorizationExchange().getAuthorizationRequest().getScopes().contains(&quot;openid&quot;)) &#123; return null; &#125; OAuth2AuthorizationCodeAuthenticationToken authorizationCodeAuthenticationToken; try &#123; // Authorization Code ë¥¼ ì´ìš©í•´ ì¸ì¦ ì§„í–‰ í›„ Acces Token ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. authorizationCodeAuthenticationToken = (OAuth2AuthorizationCodeAuthenticationToken) this.authorizationCodeAuthenticationProvider .authenticate(new OAuth2AuthorizationCodeAuthenticationToken( loginAuthenticationToken.getClientRegistration(), loginAuthenticationToken.getAuthorizationExchange())); &#125; catch (OAuth2AuthorizationException ex) &#123; OAuth2Error oauth2Error = ex.getError(); throw new OAuth2AuthenticationException(oauth2Error, oauth2Error.toString(), ex); &#125; OAuth2AccessToken accessToken = authorizationCodeAuthenticationToken.getAccessToken(); Map&lt;String, Object&gt; additionalParameters = authorizationCodeAuthenticationToken.getAdditionalParameters(); // Resource Server ë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•œ í›„ OAuth2User ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. OAuth2User oauth2User = this.userService .loadUser(new OAuth2UserRequest(loginAuthenticationToken.getClientRegistration(), accessToken, additionalParameters)); Collection&lt;? extends GrantedAuthority&gt; mappedAuthorities = this.authoritiesMapper.mapAuthorities(oauth2User.getAuthorities()); OAuth2LoginAuthenticationToken authenticationResult = new OAuth2LoginAuthenticationToken( loginAuthenticationToken.getClientRegistration(), loginAuthenticationToken.getAuthorizationExchange(), oauth2User, mappedAuthorities, accessToken, authorizationCodeAuthenticationToken.getRefreshToken()); authenticationResult.setDetails(loginAuthenticationToken.getDetails()); return authenticationResult;&#125; DefaultOAuth2UserService DefaultOAuth2UserService ì£¼ ì—­í• ì€ Access Token ì„ ì´ìš©í•´ Resource Server ë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì™€ OAuth2User ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ì´ë‹¤. userNameAttributeName ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸ Resource Server ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•œ Id ì—­í• ì„ í•˜ëŠ” ì •ë³´ Resource Server ë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ê°€ì ¸ì˜¨ ì‚¬ìš©ì ì •ë³´ë¥¼ ì´ìš©í•´ OAuth2User ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. í˜„ì¬ ì½”ë“œëŠ” ì˜ˆì™¸ ì½”ë“œë¥¼ ì œì™¸í•œ ë¡œì§ë§Œ ìˆë‹¤. @Overridepublic OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException &#123; // userNameAttributeName ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸ String userNameAttributeName = userRequest.getClientRegistration() .getProviderDetails() .getUserInfoEndpoint() .getUserNameAttributeName(); // Resource Server ë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. RequestEntity&lt;?&gt; request = this.requestEntityConverter.convert(userRequest); ResponseEntity&lt;Map&lt;String, Object&gt;&gt; response = getResponse(userRequest, request); Map&lt;String, Object&gt; userAttributes = response.getBody(); Set&lt;GrantedAuthority&gt; authorities = new LinkedHashSet&lt;&gt;(); authorities.add(new OAuth2UserAuthority(userAttributes)); OAuth2AccessToken token = userRequest.getAccessToken(); for (String authority : token.getScopes()) &#123; authorities.add(new SimpleGrantedAuthority(&quot;SCOPE_&quot; + authority)); &#125; // Resource Server ë¡œë¶€í„° ê°€ì ¸ì˜¨ ì‚¬ìš©ì ì •ë³´ë¥¼ ì´ìš©í•´ OAuth2User ê°ì²´ë¥¼ ë§Œë“ ë‹¤. return new DefaultOAuth2User(authorities, userAttributes, userNameAttributeName);&#125;// RestOperations ì„ ì´ìš©í•´ Resource Server ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.private ResponseEntity&lt;Map&lt;String, Object&gt;&gt; getResponse(OAuth2UserRequest userRequest, RequestEntity&lt;?&gt; request) &#123; try &#123; return this.restOperations.exchange(request, PARAMETERIZED_RESPONSE_TYPE); &#125; ....&#125; OAuth2LoginAuthenticationToken OAuth ì¸ì¦ì‹œ ì‚¬ìš©í•˜ëŠ” Authentication ê°ì²´ Principal, Client Registration, Access Token, Refresh Token ë“±ì˜ ì •ë³´ë¥¼ ê´€ë¦¬í•œë‹¤. public class OAuth2LoginAuthenticationToken extends AbstractAuthenticationToken &#123; private static final long serialVersionUID = SpringSecurityCoreVersion.SERIAL_VERSION_UID; private OAuth2User principal; private ClientRegistration clientRegistration; private OAuth2AuthorizationExchange authorizationExchange; private OAuth2AccessToken accessToken; private OAuth2RefreshToken refreshToken; public OAuth2LoginAuthenticationToken( ClientRegistration clientRegistration, OAuth2AuthorizationExchange authorizationExchange) &#123; super(Collections.emptyList()); this.clientRegistration = clientRegistration; this.authorizationExchange = authorizationExchange; this.setAuthenticated(false); &#125; public OAuth2LoginAuthenticationToken( ClientRegistration clientRegistration, OAuth2AuthorizationExchange authorizationExchange, OAuth2User principal, Collection&lt;? extends GrantedAuthority&gt; authorities, OAuth2AccessToken accessToken) &#123; this(clientRegistration, authorizationExchange, principal, authorities, accessToken, null); &#125; public OAuth2LoginAuthenticationToken( ClientRegistration clientRegistration, OAuth2AuthorizationExchange authorizationExchange, OAuth2User principal, Collection&lt;? extends GrantedAuthority&gt; authorities, OAuth2AccessToken accessToken, @Nullable OAuth2RefreshToken refreshToken) &#123; super(authorities); this.clientRegistration = clientRegistration; this.authorizationExchange = authorizationExchange; this.principal = principal; this.accessToken = accessToken; this.refreshToken = refreshToken; this.setAuthenticated(true); &#125; ...&#125; DefaultOAuth2User OAuth ì¸ì¦ í›„ ì „ë‹¬ ë°›ì€ ì‚¬ìš©ì ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” Principal ê°ì²´ public class DefaultOAuth2User implements OAuth2User, Serializable &#123; private static final long serialVersionUID = 560L; private final Set&lt;GrantedAuthority&gt; authorities; private final Map&lt;String, Object&gt; attributes; private final String nameAttributeKey; public DefaultOAuth2User( Collection&lt;? extends GrantedAuthority&gt; authorities, Map&lt;String, Object&gt; attributes, String nameAttributeKey ) &#123; if (!attributes.containsKey(nameAttributeKey)) &#123; throw new IllegalArgumentException(&quot;Missing attribute &#x27;&quot; + nameAttributeKey + &quot;&#x27; in attributes&quot;); &#125; else &#123; this.authorities = authorities != null ? Collections.unmodifiableSet(new LinkedHashSet(this.sortAuthorities(authorities))) : Collections.unmodifiableSet(new LinkedHashSet(AuthorityUtils.NO_AUTHORITIES)); this.attributes = Collections.unmodifiableMap(new LinkedHashMap(attributes)); this.nameAttributeKey = nameAttributeKey; &#125; &#125; ....&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Oauth2","slug":"Spring/Spring-Security/Oauth2","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Oauth2/"}],"tags":[]},{"title":"ì»´í“¨í„° êµ¬ì¡° - ë©”ëª¨ë¦¬ ê´€ë¦¬ Paging ê¸°ë²•","slug":"computer-science/computer-structure/paging","date":"2022-03-19T20:31:07.000Z","updated":"2024-02-18T16:19:54.517Z","comments":true,"path":"2022/03/20/computer-science/computer-structure/paging/","link":"","permalink":"https://ckck803.github.io/2022/03/20/computer-science/computer-structure/paging/","excerpt":"Paging ê¸°ë²• í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ì¼ì •í•œ í¬ê¸°ë¡œ ì˜ë¼ ë©”ëª¨ë¦¬ì— í• ë‹¹ í•˜ëŠ” ë°©ì‹, ê¸°ì¡´ ë…¼ë¦¬ ì£¼ì†Œ ê³µê°„ì´ í•˜ë‚˜ì˜ ì—°ì†ëœ ë¬¼ë¦¬ ì£¼ì†Œ ê³µê°„ì— ë“¤ì–´ê°€ì•¼ í•˜ëŠ” ì œì•½ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ ìƒê¸´ ë°©ì‹ í”„ë¡œì„¸ìŠ¤ì˜ ì£¼ì†Œ ê³µê°„ì„ ë‚˜ëˆ„ëŠ” ë‹¨ìœ„ëŠ” page, ë©”ëª¨ë¦¬ë¥¼ ë‚˜ëˆ„ëŠ” ë‹¨ìœ„ëŠ” frame ì´ë¼ í•œë‹¤. page ì™€ frame ì˜ í¬ê¸°ëŠ” í•­ìƒ ê°™ë‹¤. ë©”ëª¨ë¦¬ì— í”„ë¡œì„¸ìŠ¤ ì£¼ì†Œ ê³µê°„ ì „ì²´ë¥¼ ì˜¬ë¦´ í•„ìš”ê°€ ì‚¬ë¼ì¡Œë‹¤. ì—°ì†ëœ ë©”ëª¨ë¦¬ë¡œ ê´€ë¦¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— Page Table ì„ ì´ìš©í•´ ì—¬ëŸ¬ê°œë¡œ ë‚˜ë‰œ Page ì •ë³´ë¥¼ ê´€ë¦¬í•œë‹¤. ì™¸ë¶€ ë‹¨í¸í™” ê°€ ë°œìƒí•˜ì§€ ì•Šì§€ë§Œ ë‚´ë¶€ ë‹¨í¸í™” ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. Page Table Virtual Page Number ë¥¼ Physical Frame Number ë¡œ ë³€í™˜ ì‹œì¼œì£¼ëŠ” Mapping ì •ë³´ì™€ í˜„ì¬ Memory ì ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” Table MMU(Memory Management Unit) ëŠ” Page Table ì •ë³´ë¥¼ ì´ìš©í•´ ë…¼ë¦¬ ì£¼ì†Œë¥¼ ë¬¼ë¦¬ ì£¼ì†Œë¡œ ë³€í™˜ì‹œí‚¨ë‹¤. Page Table ì„ í”„ë¡œì„¸ìŠ¤ ë§ˆë‹¤ í•˜ë‚˜ì”© ì¡´ì¬í•˜ê³  ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ ìˆë‹¤. ì‹¤í–‰ëœê³  ìˆëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ë§ì„ ìˆ˜ë¡ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ ìˆëŠ” Page Table ì •ë³´ë„ ë§ê²Œ ëœë‹¤. Page Fault Page Fault ë€ í”„ë¡œì„¸ìŠ¤ê°€ ìš”ì²­í•˜ëŠ” Page ì •ë³´ê°€ í˜„ì¬ Memory ì— ì—†ëŠ” ê²½ìš°ë¥¼ ëœ»í•œë‹¤.","text":"Paging ê¸°ë²• í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ì¼ì •í•œ í¬ê¸°ë¡œ ì˜ë¼ ë©”ëª¨ë¦¬ì— í• ë‹¹ í•˜ëŠ” ë°©ì‹, ê¸°ì¡´ ë…¼ë¦¬ ì£¼ì†Œ ê³µê°„ì´ í•˜ë‚˜ì˜ ì—°ì†ëœ ë¬¼ë¦¬ ì£¼ì†Œ ê³µê°„ì— ë“¤ì–´ê°€ì•¼ í•˜ëŠ” ì œì•½ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ ìƒê¸´ ë°©ì‹ í”„ë¡œì„¸ìŠ¤ì˜ ì£¼ì†Œ ê³µê°„ì„ ë‚˜ëˆ„ëŠ” ë‹¨ìœ„ëŠ” page, ë©”ëª¨ë¦¬ë¥¼ ë‚˜ëˆ„ëŠ” ë‹¨ìœ„ëŠ” frame ì´ë¼ í•œë‹¤. page ì™€ frame ì˜ í¬ê¸°ëŠ” í•­ìƒ ê°™ë‹¤. ë©”ëª¨ë¦¬ì— í”„ë¡œì„¸ìŠ¤ ì£¼ì†Œ ê³µê°„ ì „ì²´ë¥¼ ì˜¬ë¦´ í•„ìš”ê°€ ì‚¬ë¼ì¡Œë‹¤. ì—°ì†ëœ ë©”ëª¨ë¦¬ë¡œ ê´€ë¦¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— Page Table ì„ ì´ìš©í•´ ì—¬ëŸ¬ê°œë¡œ ë‚˜ë‰œ Page ì •ë³´ë¥¼ ê´€ë¦¬í•œë‹¤. ì™¸ë¶€ ë‹¨í¸í™” ê°€ ë°œìƒí•˜ì§€ ì•Šì§€ë§Œ ë‚´ë¶€ ë‹¨í¸í™” ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. Page Table Virtual Page Number ë¥¼ Physical Frame Number ë¡œ ë³€í™˜ ì‹œì¼œì£¼ëŠ” Mapping ì •ë³´ì™€ í˜„ì¬ Memory ì ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” Table MMU(Memory Management Unit) ëŠ” Page Table ì •ë³´ë¥¼ ì´ìš©í•´ ë…¼ë¦¬ ì£¼ì†Œë¥¼ ë¬¼ë¦¬ ì£¼ì†Œë¡œ ë³€í™˜ì‹œí‚¨ë‹¤. Page Table ì„ í”„ë¡œì„¸ìŠ¤ ë§ˆë‹¤ í•˜ë‚˜ì”© ì¡´ì¬í•˜ê³  ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ ìˆë‹¤. ì‹¤í–‰ëœê³  ìˆëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ë§ì„ ìˆ˜ë¡ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ ìˆëŠ” Page Table ì •ë³´ë„ ë§ê²Œ ëœë‹¤. Page Fault Page Fault ë€ í”„ë¡œì„¸ìŠ¤ê°€ ìš”ì²­í•˜ëŠ” Page ì •ë³´ê°€ í˜„ì¬ Memory ì— ì—†ëŠ” ê²½ìš°ë¥¼ ëœ»í•œë‹¤. Virtual Memory ê°€ Mapping ë¼ ìˆì§€ ì•Šì„ ìƒíƒœì¼ ë•Œ CPU ì—ê²Œ Trap ì„ ë°œìƒì‹œì¼œ OSê°€ ì¸ì§€í•˜ê²Œ í•œë‹¤. Page ê°€ Mapping ë¼ ìˆì§€ ì•Šì€ Page Replacement Algorithm (í˜ì´ì§€ êµì²´ ì•Œê³ ë¦¬ì¦˜) Memory ì— ìƒˆë¡œìš´ Page ì˜¬ë¦´ ê³µê°„ì´ ì—†ì„ ê²½ìš° ê¸°ì¡´ Memory ì—ì„œ ì ìœ í•˜ëŠ” Page ë¥¼ ë‚´ë¦¬ê¸° ìœ„í•œ ì•Œê³ ë¦¬ì¦˜ FIFO(First In First Out) ê°€ì¥ ë¨¼ì € ì˜¬ë¼ê°„ Page ë¥¼ ê°€ì¥ ë¨¼ì € ë‚´ë¦¬ëŠ” ì•Œê³ ë¦¬ì¦˜ LRU (Least Recently Used) ê°€ì¥ ì˜¤ë«ë™ì•ˆ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” Page ë¥¼ ë‚´ë¦¬ëŠ” ì•Œê³ ë¦¬ì¦˜ ë§ì€ ìš´ì˜ì²´ì œì—ì„œ ì‚¬ìš©í•˜ëŠ” Page êµì²´ ì•Œê³ ë¦¬ì¦˜ì´ë‹¤. ê³„ìˆ˜-ê¸°ë°˜(Counting-Based) í˜ì´ì§€ êµì²´ NFU (Not Frequently Used) ì°¸ì¡° íšŸìˆ˜ê°€ ê°€ì¥ ì ì€ Page ë¥¼ êµì²´í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ ë§Œì•½ Page êµì²´ ëŒ€ìƒì´ ì—¬ëŸ¬ê°œì¼ ê²½ìš° LRU ì•Œê³ ë¦¬ì¦˜ì„ ì´ìš©í•´ ê°€ì¥ ì˜¤ë«ë™ì•ˆ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” Page ë¥¼ ë‚´ë¦°ë‹¤. MFU (Most Frequently Used) ì°¸ì¡° íšŸìˆ˜ê°€ ê°€ì¥ ë§ì€ Page ë¥¼ êµì²´í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ ì°¸ì¡° íšŸìˆ˜ê°€ ì ì€ Page ëŠ” ê°€ì¥ ìµœê·¼ì— ì°¸ì¡°ëœ ê²ƒìœ¼ë¡œ ë³´ê³  ì•ìœ¼ë¡œ ì‚¬ìš©í•  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤ê³  íŒë‹¨í•œë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ì»´í“¨í„° êµ¬ì¡°","slug":"CS/ì»´í“¨í„°-êµ¬ì¡°","permalink":"https://ckck803.github.io/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/"},{"name":"ë©”ëª¨ë¦¬ ê´€ë¦¬","slug":"CS/ì»´í“¨í„°-êµ¬ì¡°/ë©”ëª¨ë¦¬-ê´€ë¦¬","permalink":"https://ckck803.github.io/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B4%80%EB%A6%AC/"}],"tags":[]},{"title":"ì»´í“¨í„° êµ¬ì¡° - ë©”ëª¨ë¦¬ ê´€ë¦¬ Segmentation ê¸°ë²•","slug":"computer-science/computer-structure/segmentation","date":"2022-03-19T20:31:07.000Z","updated":"2024-02-18T16:19:54.517Z","comments":true,"path":"2022/03/20/computer-science/computer-structure/segmentation/","link":"","permalink":"https://ckck803.github.io/2022/03/20/computer-science/computer-structure/segmentation/","excerpt":"Segmentation ê¸°ë²• Paging ê¸°ë²•ê³¼ ë‹¬ë¦¬ í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ì„œë¡œ í¬ê¸°ê°€ ë‹¤ë¥¸ ë…¼ë¦¬ì  ë‹¨ìœ„ì¸ ì„¸ê·¸ë¨¼íŠ¸ë¡œ ë¶„í•  í•˜ê³  ë©”ëª¨ë¦¬ì— í• ë‹¹í•˜ëŠ” ê¸°ë²• Segmentation ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„¸ê·¸ë¨¼íŠ¸(code, data, stack)ì˜ ì§‘í•©ìœ¼ë¡œ ë³´ê³  ì˜ë¯¸ê°€ ê°™ì€ ë…¼ë¦¬ì  ë‚´ìš© ë‹¨ìœ„ë¡œ ìë¥¸ë‹¤. ìë¥´ëŠ” ë°©ì‹ì—ì„œì˜ ì°¨ì´ê°€ ìˆê³ , ë©”ëª¨ë¦¬ì— í• ë‹¹í•˜ëŠ” ë°©ì‹ì€ Paging ê³¼ ê°™ë‹¤. Segmentation ì€ Segmentation Table ì„ ì´ìš©í•´ ì—¬ëŸ¬ê°œë¡œ ë‚˜ë‰œ Segment ë“¤ì„ ê´€ë¦¬ í•œë‹¤. Paging Table ê³¼ì˜ ì°¨ì´ëŠ” Segmentation Table ì€ ì„œë¡œ ë‹¤ë¥¸ í¬ê¸°ë¡œ ë‚˜ë‰˜ì—ˆê¸° ë•Œë¬¸ì— Limit ì •ë³´ë„ ê°™ì´ ê´€ë¦¬ëœë‹¤.","text":"Segmentation ê¸°ë²• Paging ê¸°ë²•ê³¼ ë‹¬ë¦¬ í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ì„œë¡œ í¬ê¸°ê°€ ë‹¤ë¥¸ ë…¼ë¦¬ì  ë‹¨ìœ„ì¸ ì„¸ê·¸ë¨¼íŠ¸ë¡œ ë¶„í•  í•˜ê³  ë©”ëª¨ë¦¬ì— í• ë‹¹í•˜ëŠ” ê¸°ë²• Segmentation ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„¸ê·¸ë¨¼íŠ¸(code, data, stack)ì˜ ì§‘í•©ìœ¼ë¡œ ë³´ê³  ì˜ë¯¸ê°€ ê°™ì€ ë…¼ë¦¬ì  ë‚´ìš© ë‹¨ìœ„ë¡œ ìë¥¸ë‹¤. ìë¥´ëŠ” ë°©ì‹ì—ì„œì˜ ì°¨ì´ê°€ ìˆê³ , ë©”ëª¨ë¦¬ì— í• ë‹¹í•˜ëŠ” ë°©ì‹ì€ Paging ê³¼ ê°™ë‹¤. Segmentation ì€ Segmentation Table ì„ ì´ìš©í•´ ì—¬ëŸ¬ê°œë¡œ ë‚˜ë‰œ Segment ë“¤ì„ ê´€ë¦¬ í•œë‹¤. Paging Table ê³¼ì˜ ì°¨ì´ëŠ” Segmentation Table ì€ ì„œë¡œ ë‹¤ë¥¸ í¬ê¸°ë¡œ ë‚˜ë‰˜ì—ˆê¸° ë•Œë¬¸ì— Limit ì •ë³´ë„ ê°™ì´ ê´€ë¦¬ëœë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ì»´í“¨í„° êµ¬ì¡°","slug":"CS/ì»´í“¨í„°-êµ¬ì¡°","permalink":"https://ckck803.github.io/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/"},{"name":"ë©”ëª¨ë¦¬ ê´€ë¦¬","slug":"CS/ì»´í“¨í„°-êµ¬ì¡°/ë©”ëª¨ë¦¬-ê´€ë¦¬","permalink":"https://ckck803.github.io/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B4%80%EB%A6%AC/"}],"tags":[]},{"title":"Spring Security OAuth2 - Handler","slug":"spring/spring-security/oauth2/oauth2-07-handler","date":"2022-03-18T06:56:10.000Z","updated":"2024-02-26T16:24:05.719Z","comments":true,"path":"2022/03/18/spring/spring-security/oauth2/oauth2-07-handler/","link":"","permalink":"https://ckck803.github.io/2022/03/18/spring/spring-security/oauth2/oauth2-07-handler/","excerpt":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° ì°¸ê³ Success Handler ë§Œë“¤ê¸°Oauth2 ì¸ì¦ í›„ íŠ¹ì • ì‘ì—…ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” SuccessHandler ê°€ í•„ìš”í•˜ë‹¤. AuthenticationSuccessHandler ë¥¼ êµ¬í˜„í•´ ì¸ì¦ í›„ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¡œê·¸ë¡œ ì¶œë ¥í•˜ëŠ” Handler ë¥¼ ë§Œë“¤ì–´ ë³´ë ¤ê³  í•œë‹¤. ì¸ì¦ í›„ Authentication ê°ì²´ ë‚´ Principal ì—ëŠ” OAuth2User ê°ì²´ ì •ë³´ê°€ ë“¤ì–´ê°€ê²Œ ëœë‹¤. (OAuth2LoginAuthenticationProvider ì—ì„œ í™•ì¸) @Slf4jpublic class Oauth2AuthenticationSuccessHandler implements AuthenticationSuccessHandler &#123; @Override public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException &#123; OAuth2User oAuth2User = (OAuth2User) authentication.getPrincipal(); log.info(&quot;oAuth2User name = &#123;&#125;&quot;, (String) oAuth2User.getAttribute(&quot;email&quot;)); log.info(&quot;oAuth2User name = &#123;&#125;&quot;, (String) oAuth2User.getAttribute(&quot;name&quot;)); &#125;&#125; Security Config ì¶”ê°€oauth2AuthenticationSuccessHandler Bean ì„ ìƒì„± í›„ successHandler ì— ì¶”ê°€í•œë‹¤.","text":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° ì°¸ê³ Success Handler ë§Œë“¤ê¸°Oauth2 ì¸ì¦ í›„ íŠ¹ì • ì‘ì—…ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” SuccessHandler ê°€ í•„ìš”í•˜ë‹¤. AuthenticationSuccessHandler ë¥¼ êµ¬í˜„í•´ ì¸ì¦ í›„ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¡œê·¸ë¡œ ì¶œë ¥í•˜ëŠ” Handler ë¥¼ ë§Œë“¤ì–´ ë³´ë ¤ê³  í•œë‹¤. ì¸ì¦ í›„ Authentication ê°ì²´ ë‚´ Principal ì—ëŠ” OAuth2User ê°ì²´ ì •ë³´ê°€ ë“¤ì–´ê°€ê²Œ ëœë‹¤. (OAuth2LoginAuthenticationProvider ì—ì„œ í™•ì¸) @Slf4jpublic class Oauth2AuthenticationSuccessHandler implements AuthenticationSuccessHandler &#123; @Override public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException &#123; OAuth2User oAuth2User = (OAuth2User) authentication.getPrincipal(); log.info(&quot;oAuth2User name = &#123;&#125;&quot;, (String) oAuth2User.getAttribute(&quot;email&quot;)); log.info(&quot;oAuth2User name = &#123;&#125;&quot;, (String) oAuth2User.getAttribute(&quot;name&quot;)); &#125;&#125; Security Config ì¶”ê°€oauth2AuthenticationSuccessHandler Bean ì„ ìƒì„± í›„ successHandler ì— ì¶”ê°€í•œë‹¤. @Overrideprotected void configure(HttpSecurity http) throws Exception &#123; http.authorizeRequests() .antMatchers(&quot;/oauth_login&quot;) .permitAll() .anyRequest() .authenticated() .and() .oauth2Login() .loginPage(&quot;/oauth_login&quot;) .successHandler(oauth2AuthenticationSuccessHandler());&#125;@Beanpublic AuthenticationSuccessHandler oauth2AuthenticationSuccessHandler() &#123; return new Oauth2AuthenticationSuccessHandler();&#125; Failure Handler ë§Œë“¤ê¸°Success Handler ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì¸ì¦ ì‹¤íŒ¨ì‹œ íŠ¹ì • ì‘ì—…ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ Failure Handler ê°€ í•„ìš”í•˜ë‹¤. AuthenticationFailureHandler ë¥¼ êµ¬í˜„í•´ ì‹¤íŒ¨ í›„ ì‹¤íŒ¨ Log ì™€ response ê°ì²´ì— ì¸ì¦ ì‹¤íŒ¨ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë„ë¡ í•œë‹¤. @Slf4j@RequiredArgsConstructorpublic class Oauth2AuthenticationFailureHandler implements AuthenticationFailureHandler &#123; private final ObjectMapper objectMapper; @Override public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException &#123; response.setStatus(HttpStatus.UNAUTHORIZED.value()); response.setContentType(MediaType.APPLICATION_JSON_VALUE); log.info(&quot;Authentication failed&quot;); objectMapper.writeValue(response.getWriter(), &quot;Authentication failed&quot;); &#125;&#125; Security Config ì¶”ê°€oauth2AuthenticationFailureHandler Bean ì„ ìƒì„± í›„ failureHandler ì— ë„£ì–´ì¤€ë‹¤. @EnableWebSecurity@Slf4j@RequiredArgsConstructorpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; private final OAuth2AuthorizedClientService oAuth2AuthorizedClientService; private final ObjectMapper objectMapper; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.authorizeRequests() .antMatchers(&quot;/oauth_login&quot;) .permitAll() .anyRequest() .authenticated() .and() .oauth2Login() .loginPage(&quot;/oauth_login&quot;) .successHandler(oauth2AuthenticationSuccessHandler()) .failureHandler(oauth2AuthenticationFailureHandler()); &#125; @Bean public AuthenticationSuccessHandler oauth2AuthenticationSuccessHandler() &#123; return new Oauth2AuthenticationSuccessHandler(); &#125; @Bean public AuthenticationFailureHandler oauth2AuthenticationFailureHandler()&#123; return new Oauth2AuthenticationFailureHandler(objectMapper); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Oauth2","slug":"Spring/Spring-Security/Oauth2","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Oauth2/"}],"tags":[]},{"title":"Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸°","slug":"spring/spring-security/oauth2/oauth2-06","date":"2022-03-18T04:56:10.000Z","updated":"2024-02-26T16:24:00.450Z","comments":true,"path":"2022/03/18/spring/spring-security/oauth2/oauth2-06/","link":"","permalink":"https://ckck803.github.io/2022/03/18/spring/spring-security/oauth2/oauth2-06/","excerpt":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° ì°¸ê³  https://www.baeldung.com/spring-security-5-oauth2-login Security Config@EnableWebSecurity@Slf4jpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.authorizeRequests() .antMatchers(&quot;/oauth_login&quot;) .permitAll() .anyRequest() .authenticated() .and() .oauth2Login() .loginPage(&quot;/oauth_login&quot;); &#125;&#125; Controller@Controllerpublic class LoginController &#123; private static String authorizationRequestBaseUri = &quot;oauth2/authorization&quot;; Map&lt;String, String&gt; oauth2AuthenticationUrls = new HashMap&lt;&gt;(); @Autowired private ClientRegistrationRepository clientRegistrationRepository; @GetMapping(&quot;/oauth_login&quot;) public String getLoginPage(Model model) &#123; Iterable&lt;ClientRegistration&gt; clientRegistrations = null; ResolvableType type = ResolvableType.forInstance(clientRegistrationRepository) .as(Iterable.class); if (type != ResolvableType.NONE &amp;&amp; ClientRegistration.class.isAssignableFrom(type.resolveGenerics()[0])) &#123; clientRegistrations = (Iterable&lt;ClientRegistration&gt;) clientRegistrationRepository; &#125; clientRegistrations .forEach(registration -&gt; oauth2AuthenticationUrls .put(registration.getClientName(), authorizationRequestBaseUri + &quot;/&quot; + registration.getRegistrationId()) ); model.addAttribute(&quot;urls&quot;, oauth2AuthenticationUrls); return &quot;oauth_login&quot;; &#125;&#125; ë¡œê·¸ì¸ í˜ì´ì§€","text":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° ì°¸ê³  https://www.baeldung.com/spring-security-5-oauth2-login Security Config@EnableWebSecurity@Slf4jpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.authorizeRequests() .antMatchers(&quot;/oauth_login&quot;) .permitAll() .anyRequest() .authenticated() .and() .oauth2Login() .loginPage(&quot;/oauth_login&quot;); &#125;&#125; Controller@Controllerpublic class LoginController &#123; private static String authorizationRequestBaseUri = &quot;oauth2/authorization&quot;; Map&lt;String, String&gt; oauth2AuthenticationUrls = new HashMap&lt;&gt;(); @Autowired private ClientRegistrationRepository clientRegistrationRepository; @GetMapping(&quot;/oauth_login&quot;) public String getLoginPage(Model model) &#123; Iterable&lt;ClientRegistration&gt; clientRegistrations = null; ResolvableType type = ResolvableType.forInstance(clientRegistrationRepository) .as(Iterable.class); if (type != ResolvableType.NONE &amp;&amp; ClientRegistration.class.isAssignableFrom(type.resolveGenerics()[0])) &#123; clientRegistrations = (Iterable&lt;ClientRegistration&gt;) clientRegistrationRepository; &#125; clientRegistrations .forEach(registration -&gt; oauth2AuthenticationUrls .put(registration.getClientName(), authorizationRequestBaseUri + &quot;/&quot; + registration.getRegistrationId()) ); model.addAttribute(&quot;urls&quot;, oauth2AuthenticationUrls); return &quot;oauth_login&quot;; &#125;&#125; ë¡œê·¸ì¸ í˜ì´ì§€&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;title&gt;Oauth2 Login&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css&quot; /&gt;&lt;/head&gt;&lt;body&gt;&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;col-sm-3 well&quot;&gt; &lt;h3&gt;Login with:&lt;/h3&gt; &lt;div class=&quot;list-group&quot;&gt; &lt;p th:each=&quot;url : $&#123;urls&#125;&quot;&gt; &lt;a th:text=&quot;$&#123;url.key&#125;&quot; th:href=&quot;$&#123;url.value&#125;&quot; class=&quot;list-group-item active&quot;&gt;Client&lt;/a&gt; &lt;/p&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Oauth2","slug":"Spring/Spring-Security/Oauth2","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Oauth2/"}],"tags":[]},{"title":"Spring Test - @WithMockUser, @WithAnonymousUser","slug":"spring/spring-test/with-mock-user","date":"2022-03-15T14:25:35.000Z","updated":"2024-02-26T16:20:04.905Z","comments":true,"path":"2022/03/15/spring/spring-test/with-mock-user/","link":"","permalink":"https://ckck803.github.io/2022/03/15/spring/spring-test/with-mock-user/","excerpt":"ëª©ì°¨ Spring Test - @WebMvcTest Spring Test - @DataJpaTest Spring Test - @WithMockUser, @WithAnonymousUser Controller@RestControllerpublic class HelloController &#123; @GetMapping(&quot;/hello&quot;) public String hello()&#123; return new String(&quot;hello&quot;); &#125;&#125; @WithMockUser@WithMockUser ëŠ” Security Test ë¥¼ ì§„í–‰í•  ë•Œ ì¸ì¦ëœ Authentication ê°ì²´ë¥¼ ë§Œë“¤ì–´ ì¸ì¦ëœ ìƒíƒœë¡œ Test ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤. ì†ì„± username : Authentication ê°ì²´ì—ì„œ ì‚¬ìš©í•  username ì„ ì„¤ì • password : Authentication ê°ì²´ì—ì„œ ì‚¬ìš©í•  password ì„ ì„¤ì • roles : Authentication ê°ì²´ì—ì„œ ì‚¬ìš©í•  role ì„ ì„¤ì • authorities : Authentication ê°ì²´ì—ì„œ ì‚¬ìš©í•  authorities ì„ ì„¤ì • @WebMvcTest@AutoConfigureMockMvcclass HelloControllerTest &#123; @Autowired MockMvc mockMvc; @Test @WithMockUser(username = &quot;user&quot;, password = &quot;1234&quot;) void mockUserTest() throws Exception &#123; mockMvc.perform(get(&quot;/hello&quot;)) .andDo(print()) .andExpect(status().isOk()); &#125;&#125; @WithMockUser ê¶Œí•œ ì‚¬ìš© í•˜ê¸°","text":"ëª©ì°¨ Spring Test - @WebMvcTest Spring Test - @DataJpaTest Spring Test - @WithMockUser, @WithAnonymousUser Controller@RestControllerpublic class HelloController &#123; @GetMapping(&quot;/hello&quot;) public String hello()&#123; return new String(&quot;hello&quot;); &#125;&#125; @WithMockUser@WithMockUser ëŠ” Security Test ë¥¼ ì§„í–‰í•  ë•Œ ì¸ì¦ëœ Authentication ê°ì²´ë¥¼ ë§Œë“¤ì–´ ì¸ì¦ëœ ìƒíƒœë¡œ Test ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤. ì†ì„± username : Authentication ê°ì²´ì—ì„œ ì‚¬ìš©í•  username ì„ ì„¤ì • password : Authentication ê°ì²´ì—ì„œ ì‚¬ìš©í•  password ì„ ì„¤ì • roles : Authentication ê°ì²´ì—ì„œ ì‚¬ìš©í•  role ì„ ì„¤ì • authorities : Authentication ê°ì²´ì—ì„œ ì‚¬ìš©í•  authorities ì„ ì„¤ì • @WebMvcTest@AutoConfigureMockMvcclass HelloControllerTest &#123; @Autowired MockMvc mockMvc; @Test @WithMockUser(username = &quot;user&quot;, password = &quot;1234&quot;) void mockUserTest() throws Exception &#123; mockMvc.perform(get(&quot;/hello&quot;)) .andDo(print()) .andExpect(status().isOk()); &#125;&#125; @WithMockUser ê¶Œí•œ ì‚¬ìš© í•˜ê¸°Security Config ì¶”ê°€í•˜ê¸°Resource ì— ê°ê° ë‹¤ë¥¸ ê¶Œí•œ ë³„ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•œë‹¤. @Overrideprotected void configure(HttpSecurity http) throws Exception &#123; http.authorizeRequests() .antMatchers(&quot;/hello&quot;).hasRole(&quot;USER&quot;) .antMatchers(&quot;/manager&quot;).hasRole(&quot;MANAGER&quot;) .anyRequest() .authenticated();&#125; Controller ì¶”ê°€@GetMapping(&quot;/manager&quot;)public String manager()&#123; return &quot;Hello Manager&quot;;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@WithMockUser ë¥¼ í†µí•´ ìƒì„±ëœ Authentication ê°ì²´ëŠ” role ì´ USER ê¸° ë•Œë¬¸ì— MANAGER ê¶Œí•œì´ í•„ìš”í•œ resource ì—ëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤. @Test@WithMockUser(username = &quot;user&quot;, password = &quot;1234&quot;, roles = &quot;USER&quot;)void mockManagerTest() throws Exception &#123; mockMvc.perform(get(&quot;/manager&quot;)) .andDo(print()) .andExpect(status().isForbidden());&#125; @WithAnonymousUser@WithAnonymousUser ëŠ” anonymous ì‚¬ìš©ìë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•œë‹¤. @Test@WithAnonymousUservoid mockAnonymousUserTest() throws Exception &#123; mockMvc.perform(get(&quot;/hello&quot;)) .andDo(print()) .andExpect(status().isForbidden());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Test","slug":"Spring/Spring-Test","permalink":"https://ckck803.github.io/categories/Spring/Spring-Test/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì–‘ê³¼ ëŠ‘ëŒ€ Cpp","slug":"algorithm/programmers/ê·¸ë˜í”„íƒìƒ‰/92343-ì–‘ê³¼ëŠ‘ëŒ€-cpp","date":"2022-03-15T11:10:40.000Z","updated":"2024-11-28T13:59:32.394Z","comments":true,"path":"2022/03/15/algorithm/programmers/ê·¸ë˜í”„íƒìƒ‰/92343-ì–‘ê³¼ëŠ‘ëŒ€-cpp/","link":"","permalink":"https://ckck803.github.io/2022/03/15/algorithm/programmers/%EA%B7%B8%EB%9E%98%ED%94%84%ED%83%90%EC%83%89/92343-%EC%96%91%EA%B3%BC%EB%8A%91%EB%8C%80-cpp/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/92343 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì–‘ê³¼ ëŠ‘ëŒ€ Cpp ë¬¸ì œ í’€ì´ì´ ë¬¸ì œì˜ ê°€ì¥ ì–´ë ¤ìš´ ì ì€ í•œë²ˆ ë°©ë¬¸í•œ ë…¸ë“œë¥¼ ì—¬ëŸ¬ë²ˆ ë°©ë¬¸í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì¤‘ë³µì„ í—ˆìš©í•œ íƒìƒ‰ì„ ì§„í–‰í•˜ë©´ íƒìƒ‰ì´ ëë‚˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ìµœëŒ€í•œ ì¤‘ë³µ ë°©ë¬¸ì„ ì œê±°í•˜ê¸° ìœ„í•´ ë¹„íŠ¸ë§ˆìŠ¤í¬ ë¥¼ ì´ìš©í•´ ë°©ë¬¸í•œ ë…¸ë“œë“¤ì„ ê´€ë¦¬í•˜ë©´ì„œ ê°™ì€ ìƒíƒœì—ì„œ ê°™ì€ ë…¸ë“œ ë°©ë¬¸ì„ ëª»í•˜ê²Œ í•˜ëŠ”ê²Œ ì´ ë¬¸ì œì˜ í•µì‹¬ì´ë‹¤.ê·¸ ë‹¤ìŒìœ¼ë¡œ ì–´ë ¤ì› ë˜ ë¶€ë¶„ì€ ì´ íƒìƒ‰ì˜ ëì€ í•­ìƒ ë£¨íŠ¸ ë…¸ë“œì—ì„œ ëë‚˜ì•¼ í•œë‹¤ëŠ” ì ì´ê³ , ë°˜ëŒ€ë¡œ ìƒê°í•˜ë©´ ë£¨íŠ¸ ë…¸ë“œì—ì„œ íƒìƒ‰ ê°€ëŠ¥í•œ ë²”ìœ„ë§Œ ì •ë‹µì´ ë  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ì²˜ìŒì— ì´ ë¶€ë¶„ì„ ì—¼ë‘í•˜ì§€ ì•Šì•„ì„œ ê³„ì† í‹€ë ¸ë‹¤. ì´ ë‘ ë¶€ë¶„ë§Œ ì˜ ì—¼ë‘ í•˜ë©´ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ”ë° í° ì–´ë ¤ì›€ì€ ì—†ë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;vector&gt;using namespace std;int maxValue = 0;void dfs(int sheep, int woof, int start, int state, vector&lt;int&gt; info, vector&lt;vector&lt;int&gt;&gt;&amp; grape, vector&lt;vector&lt;bool&gt;&gt;&amp; check) &#123; if (woof &gt;= sheep) &#123; return; &#125; maxValue = max(maxValue, sheep); for (int i = 0; i &lt; info.size(); i++) &#123; int node = 1 &lt;&lt; i; int isVisited = state &amp; node; int nextState = state | node; if (grape[start][i] == 0) &#123; continue; &#125; if (check[nextState][i] == true) &#123; continue; &#125; check[nextState][i] = true; if (isVisited) &#123; dfs(sheep, woof, i, nextState, info, grape, check); &#125; else &#123; if (info[i] == 0) &#123; dfs(sheep + 1, woof, i, nextState, info, grape, check); &#125; else &#123; dfs(sheep, woof + 1, i, nextState, info, grape, check); &#125; &#125; check[nextState][i] = false; &#125;&#125;int solution(vector&lt;int&gt; info, vector&lt;vector&lt;int&gt;&gt; edges) &#123; int answer = 0; vector&lt;vector&lt;int&gt;&gt; grape = vector&lt;vector&lt;int&gt;&gt;(info.size() + 1, vector&lt;int&gt;(info.size() + 1, 0)); vector&lt;vector&lt;bool&gt;&gt; check = vector&lt;vector&lt;bool&gt;&gt;((1 &lt;&lt; 18) - 1, vector&lt;bool&gt;(17 + 1, false)); for (vector&lt;int&gt; edge : edges) &#123; int from, to; from = edge[0]; to = edge[1]; grape[from][to] = 1; grape[to][from] = 1; &#125; maxValue = 0; int state = 1 &lt;&lt; 0; check[state][0] = true; dfs(1, 0, 0, state, info, grape, check); answer = max(maxValue, answer); return answer;&#125;","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/92343 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì–‘ê³¼ ëŠ‘ëŒ€ Cpp ë¬¸ì œ í’€ì´ì´ ë¬¸ì œì˜ ê°€ì¥ ì–´ë ¤ìš´ ì ì€ í•œë²ˆ ë°©ë¬¸í•œ ë…¸ë“œë¥¼ ì—¬ëŸ¬ë²ˆ ë°©ë¬¸í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì¤‘ë³µì„ í—ˆìš©í•œ íƒìƒ‰ì„ ì§„í–‰í•˜ë©´ íƒìƒ‰ì´ ëë‚˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ìµœëŒ€í•œ ì¤‘ë³µ ë°©ë¬¸ì„ ì œê±°í•˜ê¸° ìœ„í•´ ë¹„íŠ¸ë§ˆìŠ¤í¬ ë¥¼ ì´ìš©í•´ ë°©ë¬¸í•œ ë…¸ë“œë“¤ì„ ê´€ë¦¬í•˜ë©´ì„œ ê°™ì€ ìƒíƒœì—ì„œ ê°™ì€ ë…¸ë“œ ë°©ë¬¸ì„ ëª»í•˜ê²Œ í•˜ëŠ”ê²Œ ì´ ë¬¸ì œì˜ í•µì‹¬ì´ë‹¤.ê·¸ ë‹¤ìŒìœ¼ë¡œ ì–´ë ¤ì› ë˜ ë¶€ë¶„ì€ ì´ íƒìƒ‰ì˜ ëì€ í•­ìƒ ë£¨íŠ¸ ë…¸ë“œì—ì„œ ëë‚˜ì•¼ í•œë‹¤ëŠ” ì ì´ê³ , ë°˜ëŒ€ë¡œ ìƒê°í•˜ë©´ ë£¨íŠ¸ ë…¸ë“œì—ì„œ íƒìƒ‰ ê°€ëŠ¥í•œ ë²”ìœ„ë§Œ ì •ë‹µì´ ë  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ì²˜ìŒì— ì´ ë¶€ë¶„ì„ ì—¼ë‘í•˜ì§€ ì•Šì•„ì„œ ê³„ì† í‹€ë ¸ë‹¤. ì´ ë‘ ë¶€ë¶„ë§Œ ì˜ ì—¼ë‘ í•˜ë©´ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ”ë° í° ì–´ë ¤ì›€ì€ ì—†ë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;vector&gt;using namespace std;int maxValue = 0;void dfs(int sheep, int woof, int start, int state, vector&lt;int&gt; info, vector&lt;vector&lt;int&gt;&gt;&amp; grape, vector&lt;vector&lt;bool&gt;&gt;&amp; check) &#123; if (woof &gt;= sheep) &#123; return; &#125; maxValue = max(maxValue, sheep); for (int i = 0; i &lt; info.size(); i++) &#123; int node = 1 &lt;&lt; i; int isVisited = state &amp; node; int nextState = state | node; if (grape[start][i] == 0) &#123; continue; &#125; if (check[nextState][i] == true) &#123; continue; &#125; check[nextState][i] = true; if (isVisited) &#123; dfs(sheep, woof, i, nextState, info, grape, check); &#125; else &#123; if (info[i] == 0) &#123; dfs(sheep + 1, woof, i, nextState, info, grape, check); &#125; else &#123; dfs(sheep, woof + 1, i, nextState, info, grape, check); &#125; &#125; check[nextState][i] = false; &#125;&#125;int solution(vector&lt;int&gt; info, vector&lt;vector&lt;int&gt;&gt; edges) &#123; int answer = 0; vector&lt;vector&lt;int&gt;&gt; grape = vector&lt;vector&lt;int&gt;&gt;(info.size() + 1, vector&lt;int&gt;(info.size() + 1, 0)); vector&lt;vector&lt;bool&gt;&gt; check = vector&lt;vector&lt;bool&gt;&gt;((1 &lt;&lt; 18) - 1, vector&lt;bool&gt;(17 + 1, false)); for (vector&lt;int&gt; edge : edges) &#123; int from, to; from = edge[0]; to = edge[1]; grape[from][to] = 1; grape[to][from] = 1; &#125; maxValue = 0; int state = 1 &lt;&lt; 0; check[state][0] = true; dfs(1, 0, 0, state, info, grape, check); answer = max(maxValue, answer); return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ë¬¸ìì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/"},{"name":"ì •ê·œ í‘œí˜„ì‹","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´/ì •ê·œ-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/%EC%A0%95%EA%B7%9C-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"Spring Test - @DataJpaTest","slug":"spring/spring-test/DataJpaTest","date":"2022-03-15T05:25:35.000Z","updated":"2024-02-26T16:20:04.904Z","comments":true,"path":"2022/03/15/spring/spring-test/DataJpaTest/","link":"","permalink":"https://ckck803.github.io/2022/03/15/spring/spring-test/DataJpaTest/","excerpt":"ëª©ì°¨ Spring Test - @WebMvcTest Spring Test - @DataJpaTest Spring Test - @WithMockUser, @WithAnonymousUser @DataJpaTest JPA í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜, JPA component ë“¤ë§Œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— JPA test ì‹œ ê´€ë ¨ëœ Configuration ë“¤ë§Œì´ ì ìš©ëœë‹¤. ê° Test ë¥¼ ì§„í–‰í• ë•Œë§ˆë‹¤ í•˜ë‚˜ì˜ Transaction ì—ì„œ ìˆ˜í–‰ë˜ê³  Test ê°€ ëë‚˜ë©´ Roll-back ì„ ì§„í–‰í•œë‹¤. @Transactional ê¸°ëŠ¥ì´ í•„ìš”í•˜ì§€ ì•Šìœ¼ë©´ @Transactional(propagation &#x3D; Propagation.NOT_SUPPORTED) ì„¤ì • Test ì§„í–‰ì‹œ Embedded In Memory Database ë¡œ ì§„í–‰í•œë‹¤. @AutoConfigureTestDatabase ì„ ì´ìš©í•˜ë©´ Test ì‹œ íŠ¹ì • Database ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. @DataJpaTest ë¥¼ ì´ìš©í•œ Test ì½”ë“œ ì‘ì„±@DataJpaTestclass PostTest &#123; @Autowired private PostRepository postRepository; @Test void createPostTest()&#123; String title = &quot;title&quot;; String subTitle = &quot;subTitle&quot;; String categoryName = &quot;test&quot;; String content = &quot;content&quot;; Category category = Category.builder() .name(categoryName) .build(); Post post = Post.builder() .title(title) .subTitle(subTitle) .category(category) .content(content) .build(); Post savedPost = postRepository.save(post); assertThat(savedPost.getTitle()).isEqualTo(title); assertThat(savedPost.getSubTitle()).isEqualTo(subTitle); assertThat(savedPost.getContent()).isEqualTo(content); &#125;&#125;","text":"ëª©ì°¨ Spring Test - @WebMvcTest Spring Test - @DataJpaTest Spring Test - @WithMockUser, @WithAnonymousUser @DataJpaTest JPA í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜, JPA component ë“¤ë§Œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— JPA test ì‹œ ê´€ë ¨ëœ Configuration ë“¤ë§Œì´ ì ìš©ëœë‹¤. ê° Test ë¥¼ ì§„í–‰í• ë•Œë§ˆë‹¤ í•˜ë‚˜ì˜ Transaction ì—ì„œ ìˆ˜í–‰ë˜ê³  Test ê°€ ëë‚˜ë©´ Roll-back ì„ ì§„í–‰í•œë‹¤. @Transactional ê¸°ëŠ¥ì´ í•„ìš”í•˜ì§€ ì•Šìœ¼ë©´ @Transactional(propagation &#x3D; Propagation.NOT_SUPPORTED) ì„¤ì • Test ì§„í–‰ì‹œ Embedded In Memory Database ë¡œ ì§„í–‰í•œë‹¤. @AutoConfigureTestDatabase ì„ ì´ìš©í•˜ë©´ Test ì‹œ íŠ¹ì • Database ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. @DataJpaTest ë¥¼ ì´ìš©í•œ Test ì½”ë“œ ì‘ì„±@DataJpaTestclass PostTest &#123; @Autowired private PostRepository postRepository; @Test void createPostTest()&#123; String title = &quot;title&quot;; String subTitle = &quot;subTitle&quot;; String categoryName = &quot;test&quot;; String content = &quot;content&quot;; Category category = Category.builder() .name(categoryName) .build(); Post post = Post.builder() .title(title) .subTitle(subTitle) .category(category) .content(content) .build(); Post savedPost = postRepository.save(post); assertThat(savedPost.getTitle()).isEqualTo(title); assertThat(savedPost.getSubTitle()).isEqualTo(subTitle); assertThat(savedPost.getContent()).isEqualTo(content); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Test","slug":"Spring/Spring-Test","permalink":"https://ckck803.github.io/categories/Spring/Spring-Test/"}],"tags":[]},{"title":"Spring Test - @WebMvcTest","slug":"spring/spring-test/WebMvcTest","date":"2022-03-14T14:25:35.000Z","updated":"2024-02-26T16:20:04.904Z","comments":true,"path":"2022/03/14/spring/spring-test/WebMvcTest/","link":"","permalink":"https://ckck803.github.io/2022/03/14/spring/spring-test/WebMvcTest/","excerpt":"ëª©ì°¨ Spring Test - @WebMvcTest Spring Test - @DataJpaTest Spring Test - @WithMockUser, @WithAnonymousUser @WebMvcTest Spring MVC ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì–´ë…¸í…Œì´ì…˜, MVC í…ŒìŠ¤íŠ¸ì™€ ê´€ë ¨ëœ Configuration ì´ ì ìš©ëœë‹¤. @Controller, @ControllerAdvice, @JsonComponent, Converter&#x2F;GenericConverter, Filter, HandlerMethodArgumentResolver, WebMvcConfigurer ë¥¼ Scan í•œë‹¤. @Component, @Service, @Repository Beanì€ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. MVC í…ŒìŠ¤íŠ¸ì‹œ Spring Security ì„¤ì •ë„ ìë™ì ìœ¼ë¡œ ì¶”ê°€í•´ì¤€ë‹¤. controllers ì†ì„±ì„ ì´ìš©í•´ íŠ¹ì • Controller ë¥¼ ì§€ì •í•¨ìœ¼ë¡œì¨ í•´ë‹¹ Controller ë§Œ í…ŒìŠ¤íŠ¸ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. includeFilters ì†ì„±ê³¼ excludeFilters ì†ì„±ì„ ì´ìš©í•´ íŠ¹ì • Filter ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œì™¸í•  ìˆ˜ ìˆë‹¤. ì¥ì  @SpringBootTest ì— ë¹„í•´ MVC ì— í•„ìš”í•œ êµ¬ì„±ë§Œ ë¶ˆëŸ¬ì˜´ìœ¼ë¡œ í›¨ì”¬ ê°€ë³ê³  ë¹ ë¥´ë‹¤. ë‹¨ì  Mock ê¸°ë°˜ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— ìš´ì˜ì—ì„œëŠ” ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.","text":"ëª©ì°¨ Spring Test - @WebMvcTest Spring Test - @DataJpaTest Spring Test - @WithMockUser, @WithAnonymousUser @WebMvcTest Spring MVC ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì–´ë…¸í…Œì´ì…˜, MVC í…ŒìŠ¤íŠ¸ì™€ ê´€ë ¨ëœ Configuration ì´ ì ìš©ëœë‹¤. @Controller, @ControllerAdvice, @JsonComponent, Converter&#x2F;GenericConverter, Filter, HandlerMethodArgumentResolver, WebMvcConfigurer ë¥¼ Scan í•œë‹¤. @Component, @Service, @Repository Beanì€ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. MVC í…ŒìŠ¤íŠ¸ì‹œ Spring Security ì„¤ì •ë„ ìë™ì ìœ¼ë¡œ ì¶”ê°€í•´ì¤€ë‹¤. controllers ì†ì„±ì„ ì´ìš©í•´ íŠ¹ì • Controller ë¥¼ ì§€ì •í•¨ìœ¼ë¡œì¨ í•´ë‹¹ Controller ë§Œ í…ŒìŠ¤íŠ¸ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. includeFilters ì†ì„±ê³¼ excludeFilters ì†ì„±ì„ ì´ìš©í•´ íŠ¹ì • Filter ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œì™¸í•  ìˆ˜ ìˆë‹¤. ì¥ì  @SpringBootTest ì— ë¹„í•´ MVC ì— í•„ìš”í•œ êµ¬ì„±ë§Œ ë¶ˆëŸ¬ì˜´ìœ¼ë¡œ í›¨ì”¬ ê°€ë³ê³  ë¹ ë¥´ë‹¤. ë‹¨ì  Mock ê¸°ë°˜ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— ìš´ì˜ì—ì„œëŠ” ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. @WebMvcTest ë¥¼ ì´ìš©í•œ Test ì½”ë“œ@WebMvcTest( value = PostController.class , excludeFilters = &#123; @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, classes = JsonSecurityConfig.class), @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, classes = JwtSecurityConfig.class)&#125;)@ActiveProfiles(&quot;local&quot;)class PostControllerTest &#123; @MockBean private JwtUtils jwtUtils; @Autowired private MockMvc mockMvc; @MockBean private PostService postService; @MockBean private CategoryService categoryService; @Autowired private ObjectMapper objectMapper; @MockBean(name = &quot;userDetailsService&quot;) private UserInfoUserDetailsService userInfoUserDetailsService; @PostConstruct public void setup() &#123; given(userInfoUserDetailsService.loadUserByUsername(anyString())) .willReturn(new User(&quot;test&quot;, &quot;password&quot;, AuthorityUtils.createAuthorityList(&quot;ROLE_WRITE&quot;))); &#125; @Test @WithMockUser void getAllTest() throws Exception &#123; List&lt;Page&gt; posts = new ArrayList&lt;&gt;(); given(postService.getAllPosts(PageRequest.of(0, 3))).willReturn(new PageImpl(posts)); ResultActions resultActions = mockMvc.perform(get(&quot;/api/post&quot;)); resultActions .andExpect(status().isOk()); &#125; @Test @WithUserDetails void saveTest() throws Exception &#123; String title = new String(&quot;Title&quot;); String subTitle = new String(&quot;subTitle&quot;); String content = new String(&quot;content&quot;); String beforeCategoryName = new String(&quot;beforeCategory&quot;); String afterCategoryName = new String(&quot;afterCategory&quot;); RequestPostDto requestPostDto = new RequestPostDto(); requestPostDto.setTitle(title); requestPostDto.setSubTitle(subTitle); requestPostDto.setContent(content); requestPostDto.setCategory(afterCategoryName); Category beforeCategory = Category.builder() .name(beforeCategoryName) .posts(new ArrayList&lt;&gt;()) .build(); Category afterCategory = Category.builder() .name(afterCategoryName) .posts(new ArrayList&lt;&gt;()) .build(); Post post = Post.builder() .id(1L) .title(title) .subTitle(subTitle) .content(content) .category(beforeCategory) .build(); given(categoryService.saveOrFindCategory(afterCategoryName)).willReturn(afterCategory); given(postService.savePost(any(Post.class))).willReturn(post); String requestBody = objectMapper.writeValueAsString(requestPostDto); ResultActions resultActions = mockMvc.perform(post(&quot;/api/post/new&quot;) .with(csrf()) .content(requestBody) .contentType(MediaType.APPLICATION_JSON) ); resultActions .andExpect(status().isCreated()) .andDo(print()); verify(postService).savePost(any(Post.class)); &#125; @Test @WithUserDetails void saveFailTest() throws Exception &#123; String title = new String(&quot;Title&quot;); String subTitle = new String(&quot;subTitle&quot;); String content = new String(&quot;content&quot;); String afterCategoryName = new String(&quot;afterCategory&quot;); RequestPostDto requestPostDto = new RequestPostDto(); requestPostDto.setTitle(title); requestPostDto.setSubTitle(subTitle); requestPostDto.setContent(content); requestPostDto.setCategory(afterCategoryName); Category afterCategory = Category.builder() .name(afterCategoryName) .posts(new ArrayList&lt;&gt;()) .build(); given(categoryService.saveOrFindCategory(afterCategoryName)).willReturn(afterCategory); given(postService.savePost(any(Post.class))).willThrow(PostSaveFailException.class); String requestBody = objectMapper.writeValueAsString(requestPostDto); ResultActions resultActions = mockMvc.perform(post(&quot;/api/post/new&quot;) .content(requestBody) .with(csrf()) .contentType(MediaType.APPLICATION_JSON) ); resultActions .andExpect(status().isBadRequest()) .andDo(print()); verify(postService).savePost(any(Post.class)); &#125; @Test @WithUserDetails void deletePostTest() throws Exception &#123; Long id = 1L; ResultActions resultActions = mockMvc.perform(delete(&quot;/api/post/delete/&quot; + id) .with(csrf())); resultActions .andExpect(status().isOk()) .andDo(print()); verify(postService).deletePost(1L); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Test","slug":"Spring/Spring-Test","permalink":"https://ckck803.github.io/categories/Spring/Spring-Test/"}],"tags":[]},{"title":"Oracle 12c - Docker ë¡œ ì‹œì‘í•˜ê¸°","slug":"oracle/oracle-02-12c","date":"2022-03-13T02:10:40.000Z","updated":"2024-11-28T13:59:25.972Z","comments":true,"path":"2022/03/13/oracle/oracle-02-12c/","link":"","permalink":"https://ckck803.github.io/2022/03/13/oracle/oracle-02-12c/","excerpt":"ëª©ì°¨ Oracle - Docker ë¡œ ì‹œì‘í•˜ê¸° Oracle 12c - Docker ë¡œ ì‹œì‘í•˜ê¸° 11g ì œí•œì‚¬í•­Oracle 11g ì˜ ê²½ìš° 11G ì œí•œì´ ê±¸ë ¤ ìˆì–´ì„œ ë¶€ë“ì´ í•˜ê²Œ 12c ë¡œ ë³€ê²½ í–ˆë‹¤. 11g ê°€ 11G ê¹Œì§€ë¼ì„œ 11g ì¸ê±´ê°€â€¦.. SQL Error [12953] [72000]: ORA-12953: The request exceeds the maximum allowed database size of 11 GB ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ Image : absolutapps&#x2F;oracle-12c-ee docker pull absolutapps/oracle-12c-ee ì´ë¯¸ì§€ ì‹¤í–‰í•˜ê¸°","text":"ëª©ì°¨ Oracle - Docker ë¡œ ì‹œì‘í•˜ê¸° Oracle 12c - Docker ë¡œ ì‹œì‘í•˜ê¸° 11g ì œí•œì‚¬í•­Oracle 11g ì˜ ê²½ìš° 11G ì œí•œì´ ê±¸ë ¤ ìˆì–´ì„œ ë¶€ë“ì´ í•˜ê²Œ 12c ë¡œ ë³€ê²½ í–ˆë‹¤. 11g ê°€ 11G ê¹Œì§€ë¼ì„œ 11g ì¸ê±´ê°€â€¦.. SQL Error [12953] [72000]: ORA-12953: The request exceeds the maximum allowed database size of 11 GB ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ Image : absolutapps&#x2F;oracle-12c-ee docker pull absolutapps/oracle-12c-ee ì´ë¯¸ì§€ ì‹¤í–‰í•˜ê¸°docker run --name oracle12c -d -p 1521:1521 -v ~/docker/oracle-12c:/u01/app/oracle absolutapps/oracle-12c-ee ë¡œê·¸ í™•ì¸í•˜ê¸°docker logs -f oracle12c ls: cannot access /u01/app/oracle/oradata/orcl: No such file or directoryNo databases found in /u01/app/oracle/oradata/orcl. About to create a new database instanceStarting database listenerLSNRCTL for Linux: Version 12.1.0.2.0 - Production on 13-MAR-2022 05:03:22Copyright (c) 1991, 2014, Oracle. All rights reserved.Starting /u01/app/oracle/product/12.1.0.2/dbhome_1/bin/tnslsnr: please wait...TNSLSNR for Linux: Version 12.1.0.2.0 - ProductionSystem parameter file is /u01/app/oracle/product/12.1.0.2/dbhome_1/network/admin/listener.oraLog messages written to /u01/app/oracle/diag/tnslsnr/96af22c647e9/listener/alert/log.xmlListening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=96af22c647e9)(PORT=1521)))Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=96af22c647e9)(PORT=1521)))STATUS of the LISTENER------------------------Alias LISTENERVersion TNSLSNR for Linux: Version 12.1.0.2.0 - ProductionStart Date 13-MAR-2022 05:03:23Uptime 0 days 0 hr. 0 min. 0 secTrace Level offSecurity ON: Local OS AuthenticationSNMP OFFListener Parameter File /u01/app/oracle/product/12.1.0.2/dbhome_1/network/admin/listener.oraListener Log File /u01/app/oracle/diag/tnslsnr/96af22c647e9/listener/alert/log.xmlListening Endpoints Summary... (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=96af22c647e9)(PORT=1521)))The listener supports no servicesThe command completed successfullyCopying database files1% complete3% complete11% complete18% complete26% complete37% completeCreating and starting Oracle instance40% complete45% complete50% complete55% complete56% complete60% complete62% completeCompleting Database Creation66% complete70% complete73% complete85% complete96% complete100% completeLook at the log file &quot;/u01/app/oracle/cfgtoollogs/dbca/orcl/orcl.log&quot; for further details.LSNRCTL for Linux: Version 12.1.0.2.0 - Production on 13-MAR-2022 05:11:44Copyright (c) 1991, 2014, Oracle. All rights reserved.Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=96af22c647e9)(PORT=1521)))The command completed successfullyDatabase has been created in /u01/app/oracle/oradata/orclSYS and SYSTEM passwords are set to [oracle]Setting HTTP port to 8080PL/SQL procedure successfully completed.Please login to http://&lt;ip_address&gt;:8080/em to use enterprise managerUser: sys; Password oracle; Sysdba: trueFixing permissions...Running init scripts...Init scripts in /oracle.init.d/: Ignoring /oracle.init.d/*Done with scripts we are ready to go","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Oracle","slug":"Develop/Oracle","permalink":"https://ckck803.github.io/categories/Develop/Oracle/"}],"tags":[]},{"title":"Oracle - Docker ë¡œ ì‹œì‘í•˜ê¸°","slug":"oracle/oracle-01","date":"2022-03-13T01:10:40.000Z","updated":"2024-11-28T13:59:25.900Z","comments":true,"path":"2022/03/13/oracle/oracle-01/","link":"","permalink":"https://ckck803.github.io/2022/03/13/oracle/oracle-01/","excerpt":"ëª©ì°¨ Oracle - Docker ë¡œ ì‹œì‘í•˜ê¸° Oracle 12c - Docker ë¡œ ì‹œì‘í•˜ê¸° ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œOracle ì˜ ê²½ìš° Mac ë²„ì „ ë°ì´í„° ë² ì´ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— Docker ë¥¼ ì´ìš©í•´ Oracle ë¥¼ ì´ìš©í•´ë³´ë ¤ê³  í•œë‹¤. Image : jaspeen&#x2F;oracle-xe-11g docker pull jaspeen/oracle-xe-11g ì´ë¯¸ì§€ ì‹¤í–‰í•˜ê¸°docker run --name oracle11g -d -p 1521:1521 jaspeen/oracle-xe-11g# Docker Volumn ê³¼ ì™¸ë¶€ Volumn ì—°ê²°docker run --name oracle11g -d -p 1521:1521 -v ~/docker/oracle:/u01/app/oracle jaspeen/oracle-xe-11g Sqlplus ì‹¤í–‰","text":"ëª©ì°¨ Oracle - Docker ë¡œ ì‹œì‘í•˜ê¸° Oracle 12c - Docker ë¡œ ì‹œì‘í•˜ê¸° ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œOracle ì˜ ê²½ìš° Mac ë²„ì „ ë°ì´í„° ë² ì´ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— Docker ë¥¼ ì´ìš©í•´ Oracle ë¥¼ ì´ìš©í•´ë³´ë ¤ê³  í•œë‹¤. Image : jaspeen&#x2F;oracle-xe-11g docker pull jaspeen/oracle-xe-11g ì´ë¯¸ì§€ ì‹¤í–‰í•˜ê¸°docker run --name oracle11g -d -p 1521:1521 jaspeen/oracle-xe-11g# Docker Volumn ê³¼ ì™¸ë¶€ Volumn ì—°ê²°docker run --name oracle11g -d -p 1521:1521 -v ~/docker/oracle:/u01/app/oracle jaspeen/oracle-xe-11g Sqlplus ì‹¤í–‰docker exec -it oracle11g sqlplusSQL*Plus: Release 11.2.0.2.0 Production on Sun Mar 13 03:33:24 2022Copyright (c) 1982, 2011, Oracle. All rights reserved.Enter user-name: systemEnter password: oracle Service í™•ì¸SQL&gt; show parameter service_names;NAME TYPE VALUE------------------------------------ ----------- ------------------------------service_names string XE DBeaver ì—°ê²°í•˜ê¸° Host : Oracle ì´ ì„¤ì¹˜ ë¼ ìˆëŠ” ì„œë²„ IP ì£¼ì†Œ Port : Oracle ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•œ Port Number Database : Service Name ì„ ëª…ì‹œ Username : Oracle ì ‘ì†ì„ ìœ„í•œ username Passowrd : Oracle ì ‘ì†ì„ ìœ„í•œ Password","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Oracle","slug":"Develop/Oracle","permalink":"https://ckck803.github.io/categories/Develop/Oracle/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì–‘ê¶ ëŒ€íšŒ (Python)","slug":"algorithm/programmers/ê²½ìš°ì˜ìˆ˜/92342-ì–‘ê¶ëŒ€íšŒ-python","date":"2022-03-12T11:10:40.000Z","updated":"2024-11-28T13:59:32.615Z","comments":true,"path":"2022/03/12/algorithm/programmers/ê²½ìš°ì˜ìˆ˜/92342-ì–‘ê¶ëŒ€íšŒ-python/","link":"","permalink":"https://ckck803.github.io/2022/03/12/algorithm/programmers/%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98/92342-%EC%96%91%EA%B6%81%EB%8C%80%ED%9A%8C-python/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/92342 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Python ìœ ì˜ ì‚¬í•­ í™”ì‚´ì„ ë§ì¶˜ ê°œìˆ˜ë¥¼ ì €ì¥í•˜ê³  ì •ë ¬í•˜ëŠ”ë° ìˆì–´ì„œ ì£¼ì˜í•´ì•¼ í•œë‹¤. ì •ë ¬ì— ëŒ€í•œ ê°€ì¤‘ì¹˜ê°€ ì•ìë¦¬ê°€ ì•„ë‹Œ ë’·ìë¦¬ ì— ìˆìœ¼ë¯€ë¡œ ê°’ì„ ì €ì¥í•  ë•Œ ë’¤ì§‘ì–´ì„œ ì €ì¥í•œ í›„ ë‚´ë¦¼ ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•´ ê°€ì¥ í° ê°’ì„ ê°€ì ¸ì™€ í•´ë‹¹ ê°’ì„ ë’¤ì§‘ìœ¼ë©´ ê°€ì¥ ë‚®ì€ ì ìˆ˜ë¥¼ ë§ì´ ë§ì¶˜ ìˆœì„œëŒ€ë¡œ ì •ë ¬ëœ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. cases = []maxDiff: int = 0results = []def getScore(index: int): return 10 - indexdef calScores(ryan: list, apeech: list) -&gt; None: diff: int = 0 apeech_score: int = 0 ryan_score: int = 0 global maxDiff for i in range(11): if apeech[i] == 0 and ryan[i] == 0: continue if ryan[i] &gt; apeech[i]: ryan_score += getScore(i) else: apeech_score += getScore(i) diff = ryan_score - apeech_score if diff &lt;= 0: return if diff &gt;= maxDiff: oneCase: str = &#x27;&#x27;.join(list(map(str, ryan[::-1]))) if(diff &gt; maxDiff): results.clear() maxDiff = diff results.append(oneCase)def makeAllCase(start: int, choice: int, n: int, ryan: list) -&gt; None: if(choice &gt;= n): cases.append(ryan.copy()) return for i in range(start, 11): ryan[i] += 1 makeAllCase(i, choice+1, n, ryan) ryan[i] -= 1def solution(n, info): answer = [] ryan = [0] * 11 makeAllCase(0, 0, n, ryan) for case in cases: calScores(case, info) if len(results) &gt; 0: results.sort(reverse=True) answer = list(map(int, results[0][::-1])) # print(answer) else: answer.append(-1) return answer","text":"https://programmers.co.kr/learn/courses/30/lessons/92342 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Python ìœ ì˜ ì‚¬í•­ í™”ì‚´ì„ ë§ì¶˜ ê°œìˆ˜ë¥¼ ì €ì¥í•˜ê³  ì •ë ¬í•˜ëŠ”ë° ìˆì–´ì„œ ì£¼ì˜í•´ì•¼ í•œë‹¤. ì •ë ¬ì— ëŒ€í•œ ê°€ì¤‘ì¹˜ê°€ ì•ìë¦¬ê°€ ì•„ë‹Œ ë’·ìë¦¬ ì— ìˆìœ¼ë¯€ë¡œ ê°’ì„ ì €ì¥í•  ë•Œ ë’¤ì§‘ì–´ì„œ ì €ì¥í•œ í›„ ë‚´ë¦¼ ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•´ ê°€ì¥ í° ê°’ì„ ê°€ì ¸ì™€ í•´ë‹¹ ê°’ì„ ë’¤ì§‘ìœ¼ë©´ ê°€ì¥ ë‚®ì€ ì ìˆ˜ë¥¼ ë§ì´ ë§ì¶˜ ìˆœì„œëŒ€ë¡œ ì •ë ¬ëœ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. cases = []maxDiff: int = 0results = []def getScore(index: int): return 10 - indexdef calScores(ryan: list, apeech: list) -&gt; None: diff: int = 0 apeech_score: int = 0 ryan_score: int = 0 global maxDiff for i in range(11): if apeech[i] == 0 and ryan[i] == 0: continue if ryan[i] &gt; apeech[i]: ryan_score += getScore(i) else: apeech_score += getScore(i) diff = ryan_score - apeech_score if diff &lt;= 0: return if diff &gt;= maxDiff: oneCase: str = &#x27;&#x27;.join(list(map(str, ryan[::-1]))) if(diff &gt; maxDiff): results.clear() maxDiff = diff results.append(oneCase)def makeAllCase(start: int, choice: int, n: int, ryan: list) -&gt; None: if(choice &gt;= n): cases.append(ryan.copy()) return for i in range(start, 11): ryan[i] += 1 makeAllCase(i, choice+1, n, ryan) ryan[i] -= 1def solution(n, info): answer = [] ryan = [0] * 11 makeAllCase(0, 0, n, ryan) for case in cases: calScores(case, info) if len(results) &gt; 0: results.sort(reverse=True) answer = list(map(int, results[0][::-1])) # print(answer) else: answer.append(-1) return answer","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"},{"name":"ì¤‘ë³µ ìˆœì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜/ì¤‘ë³µ-ìˆœì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/%EC%A4%91%EB%B3%B5-%EC%88%9C%EC%97%B4/"}],"tags":[]},{"title":"ë°±ì¤€ 1197 - ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬ (Cpp)","slug":"algorithm/baekjoon/ìµœì†ŒìŠ¤íŒ¨ë‹íŠ¸ë¦¬/1197-ìµœì†ŒìŠ¤íŒ¨ë‹íŠ¸ë¦¬-cpp","date":"2022-03-09T01:47:05.000Z","updated":"2024-11-28T13:59:35.525Z","comments":true,"path":"2022/03/09/algorithm/baekjoon/ìµœì†ŒìŠ¤íŒ¨ë‹íŠ¸ë¦¬/1197-ìµœì†ŒìŠ¤íŒ¨ë‹íŠ¸ë¦¬-cpp/","link":"","permalink":"https://ckck803.github.io/2022/03/09/algorithm/baekjoon/%EC%B5%9C%EC%86%8C%EC%8A%A4%ED%8C%A8%EB%8B%9D%ED%8A%B8%EB%A6%AC/1197-%EC%B5%9C%EC%86%8C%EC%8A%A4%ED%8C%A8%EB%8B%9D%ED%8A%B8%EB%A6%AC-cpp/","excerpt":"ë§í¬ https://www.acmicpc.net/problem/1197 ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;algorithm&gt;#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;vector&gt;#define endl &#x27;\\n&#x27;;using namespace std;int find(int node, vector&lt;int&gt;&amp; v) &#123; if (node == v[node]) &#123; return node; &#125; return v[node] = find(v[node], v);&#125;void merge(int a, int b, vector&lt;int&gt;&amp; v) &#123; if (a != b) &#123; v[a] = b; &#125;&#125;int main(void) &#123; int vertex, edge; int totalWeight = 0; cin &gt;&gt; vertex &gt;&gt; edge; vector&lt;pair&lt;int, pair&lt;int, int&gt;&gt;&gt; edges = vector&lt;pair&lt;int, pair&lt;int, int&gt;&gt;&gt;(vertex + 1); vector&lt;int&gt; v = vector&lt;int&gt;(vertex + 1); for (int i = 0; i &lt; v.size(); i++) &#123; v[i] = i; &#125; for (int i = 0; i &lt; edge; i++) &#123; int from, to, weight; cin &gt;&gt; from &gt;&gt; to &gt;&gt; weight; edges.push_back(&#123;weight, &#123;from, to&#125;&#125;); &#125; sort(edges.begin(), edges.end()); for (auto we : edges) &#123; int weight = we.first; pair&lt;int, int&gt; e = we.second; int from = e.first; int to = e.second; int setA = find(from, v); int setB = find(to, v); if (setA != setB) &#123; totalWeight += weight; merge(setA, setB, v); &#125; &#125; cout &lt;&lt; totalWeight &lt;&lt; endl; return 0;&#125;","text":"ë§í¬ https://www.acmicpc.net/problem/1197 ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;algorithm&gt;#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;vector&gt;#define endl &#x27;\\n&#x27;;using namespace std;int find(int node, vector&lt;int&gt;&amp; v) &#123; if (node == v[node]) &#123; return node; &#125; return v[node] = find(v[node], v);&#125;void merge(int a, int b, vector&lt;int&gt;&amp; v) &#123; if (a != b) &#123; v[a] = b; &#125;&#125;int main(void) &#123; int vertex, edge; int totalWeight = 0; cin &gt;&gt; vertex &gt;&gt; edge; vector&lt;pair&lt;int, pair&lt;int, int&gt;&gt;&gt; edges = vector&lt;pair&lt;int, pair&lt;int, int&gt;&gt;&gt;(vertex + 1); vector&lt;int&gt; v = vector&lt;int&gt;(vertex + 1); for (int i = 0; i &lt; v.size(); i++) &#123; v[i] = i; &#125; for (int i = 0; i &lt; edge; i++) &#123; int from, to, weight; cin &gt;&gt; from &gt;&gt; to &gt;&gt; weight; edges.push_back(&#123;weight, &#123;from, to&#125;&#125;); &#125; sort(edges.begin(), edges.end()); for (auto we : edges) &#123; int weight = we.first; pair&lt;int, int&gt; e = we.second; int from = e.first; int to = e.second; int setA = find(from, v); int setB = find(to, v); if (setA != setB) &#123; totalWeight += weight; merge(setA, setB, v); &#125; &#125; cout &lt;&lt; totalWeight &lt;&lt; endl; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ê·¸ë˜í”„","slug":"Develop/Beakjoon/ê·¸ë˜í”„","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EA%B7%B8%EB%9E%98%ED%94%84/"}],"tags":[]},{"title":"Spring - Embedded Kafka ì‚¬ìš©í•˜ê¸°","slug":"spring/spring-kafka/spring-kafka-embedded","date":"2022-03-08T14:47:05.000Z","updated":"2024-11-29T06:21:01.701Z","comments":true,"path":"2022/03/08/spring/spring-kafka/spring-kafka-embedded/","link":"","permalink":"https://ckck803.github.io/2022/03/08/spring/spring-kafka/spring-kafka-embedded/","excerpt":"ëª©ì Spring - Kafka Spring - Kafka Java Config ì‚¬ìš©í•˜ê¸° Spring - Embedded Kafka ì‚¬ìš©í•˜ê¸° ìŠ¤í”„ë§ ë¶€íŠ¸ ì¹´í”„ì¹´ ì‚¬ìš©í•˜ê¸°ì°¸ê³ https://www.baeldung.com/spring-boot-kafka-testing ì˜ì¡´ì„±testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27;testImplementation &#x27;org.springframework.kafka:spring-kafka-test&#x27;// https://mvnrepository.com/artifact/org.testcontainers/kafkatestImplementation group: &#x27;org.testcontainers&#x27;, name: &#x27;kafka&#x27;, version: &#x27;1.16.3&#x27; Spring Propertiesspring: kafka: consumer: auto-offset-reset: earliest group-id: baeldungtest: topic: embedded-test-topic","text":"ëª©ì Spring - Kafka Spring - Kafka Java Config ì‚¬ìš©í•˜ê¸° Spring - Embedded Kafka ì‚¬ìš©í•˜ê¸° ìŠ¤í”„ë§ ë¶€íŠ¸ ì¹´í”„ì¹´ ì‚¬ìš©í•˜ê¸°ì°¸ê³ https://www.baeldung.com/spring-boot-kafka-testing ì˜ì¡´ì„±testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27;testImplementation &#x27;org.springframework.kafka:spring-kafka-test&#x27;// https://mvnrepository.com/artifact/org.testcontainers/kafkatestImplementation group: &#x27;org.testcontainers&#x27;, name: &#x27;kafka&#x27;, version: &#x27;1.16.3&#x27; Spring Propertiesspring: kafka: consumer: auto-offset-reset: earliest group-id: baeldungtest: topic: embedded-test-topic Producer@Componentpublic class KafkaProducer &#123; private static final Logger LOGGER = LoggerFactory.getLogger(KafkaProducer.class); @Autowired private KafkaTemplate&lt;String, String&gt; kafkaTemplate; public void send(String topic, String payload) &#123; LOGGER.info(&quot;sending payload=&#x27;&#123;&#125;&#x27; to topic=&#x27;&#123;&#125;&#x27;&quot;, payload, topic); kafkaTemplate.send(topic, payload); &#125;&#125; Consumer@Componentpublic class KafkaConsumer &#123; private static final Logger LOGGER = LoggerFactory.getLogger(KafkaConsumer.class); private CountDownLatch latch = new CountDownLatch(1); private String payload = null; @KafkaListener(topics = &quot;$&#123;test.topic&#125;&quot;) public void receive(ConsumerRecord&lt;?, ?&gt; consumerRecord) &#123; LOGGER.info(&quot;received payload=&#x27;&#123;&#125;&#x27;&quot;, consumerRecord.toString()); setPayload(consumerRecord.toString()); latch.countDown(); &#125; public CountDownLatch getLatch() &#123; return latch; &#125; public String getPayload() &#123; return payload; &#125; private void setPayload(String payload) &#123; this.payload = payload; &#125;&#125; EmbeddedKafka ë¥¼ ì´ìš©í•œ Test ì½”ë“œ ì‘ì„± @EmbeddedKafka ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ì‹œ í•„ìš”í•œ EmbeddedKafkaBroker ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. partitions : EmbeddedKafka ë‚´ Partition ê°œìˆ˜ë¥¼ ì„¤ì •í•œë‹¤. brokerProperties : EmbeddedKafka Broker ì„¤ì •ì„ í•œë‹¤. @SpringBootTest@DirtiesContext@EmbeddedKafka(partitions = 1, brokerProperties = &#123; &quot;listeners=PLAINTEXT://localhost:9092&quot;, &quot;port=9092&quot; &#125;)class EmbeddedKafkaApplicationTests &#123; @Autowired public KafkaTemplate&lt;String, String&gt; template; @Autowired private KafkaConsumer consumer; @Autowired private KafkaProducer producer; @Value(&quot;$&#123;test.topic&#125;&quot;) private String topic; @Test public void givenEmbeddedKafkaBroker_whenSendingtoDefaultTemplate_thenMessageReceived() throws Exception &#123; template.send(topic, &quot;Sending with default template&quot;); consumer.getLatch().await(10000, TimeUnit.MILLISECONDS); assertThat(consumer.getLatch().getCount(), equalTo(0L)); assertThat(consumer.getPayload(), containsString(&quot;embedded-test-topic&quot;)); &#125; @Test public void givenEmbeddedKafkaBroker_whenSendingtoSimpleProducer_thenMessageReceived() throws Exception &#123; producer.send(topic, &quot;Sending with our own simple KafkaProducer&quot;); consumer.getLatch().await(10000, TimeUnit.MILLISECONDS); assertThat(consumer.getLatch().getCount(), equalTo(0L)); assertThat(consumer.getPayload(), containsString(&quot;embedded-test-topic&quot;)); &#125;&#125; Test Container ë¥¼ ì´ìš©í•œ Kafka Test ì½”ë“œ ì‘ì„± KafkaContainer ê°ì²´ë¥¼ ì´ìš©í•´ Test ì‹œ ì‚¬ìš©í•  Kafka Container ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. @RunWith(SpringRunner.class)@Import(KafkaTestContainersLiveTest.KafkaTestContainersConfiguration.class)@SpringBootTest(classes = EmbeddedKafkaApplication.class)@DirtiesContextpublic class KafkaTestContainersLiveTest &#123; @ClassRule public static KafkaContainer kafka = new KafkaContainer(DockerImageName.parse(&quot;confluentinc/cp-kafka:5.4.3&quot;)); @Autowired public KafkaTemplate&lt;String, String&gt; template; @Autowired private KafkaConsumer consumer; @Autowired private KafkaProducer producer; @Value(&quot;$&#123;test.topic&#125;&quot;) private String topic; @Test public void givenKafkaDockerContainer_whenSendingtoDefaultTemplate_thenMessageReceived() throws Exception &#123; template.send(topic, &quot;Sending with default template&quot;); consumer.getLatch().await(10000, TimeUnit.MILLISECONDS); assertThat(consumer.getLatch().getCount(), CoreMatchers.equalTo(0L)); assertThat(consumer.getPayload(), CoreMatchers.containsString(&quot;embedded-test-topic&quot;)); &#125; @Test public void givenKafkaDockerContainer_whenSendingtoSimpleProducer_thenMessageReceived() throws Exception &#123; producer.send(topic, &quot;Sending with own controller&quot;); consumer.getLatch().await(10000, TimeUnit.MILLISECONDS); assertThat(consumer.getLatch().getCount(), CoreMatchers.equalTo(0L)); assertThat(consumer.getPayload(), CoreMatchers.containsString(&quot;embedded-test-topic&quot;)); &#125; @TestConfiguration static class KafkaTestContainersConfiguration &#123; @Bean ConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt; kafkaListenerContainerFactory() &#123; ConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); return factory; &#125; @Bean public ConsumerFactory&lt;Integer, String&gt; consumerFactory() &#123; return new DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs()); &#125; @Bean public Map&lt;String, Object&gt; consumerConfigs() &#123; Map&lt;String, Object&gt; props = new HashMap&lt;&gt;(); props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafka.getBootstrapServers()); props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;); props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;baeldung&quot;); props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); return props; &#125; @Bean public ProducerFactory&lt;String, String&gt; producerFactory() &#123; Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;(); configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafka.getBootstrapServers()); configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class); configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class); return new DefaultKafkaProducerFactory&lt;&gt;(configProps); &#125; @Bean public KafkaTemplate&lt;String, String&gt; kafkaTemplate() &#123; return new KafkaTemplate&lt;&gt;(producerFactory()); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Kafka","slug":"Spring/Spring-Boot/Kafka","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Kafka/"}],"tags":[]},{"title":"Spring - Kafka Java Config ì‚¬ìš©í•˜ê¸°","slug":"spring/spring-kafka/springboot-kafka-javaconfig","date":"2022-03-07T14:47:05.000Z","updated":"2024-11-29T06:21:11.528Z","comments":true,"path":"2022/03/07/spring/spring-kafka/springboot-kafka-javaconfig/","link":"","permalink":"https://ckck803.github.io/2022/03/07/spring/spring-kafka/springboot-kafka-javaconfig/","excerpt":"ëª©ì Spring - Kafka Spring - Kafka Java Config ì‚¬ìš©í•˜ê¸° Spring - Embedded Kafka ì‚¬ìš©í•˜ê¸° ìŠ¤í”„ë§ ë¶€íŠ¸ ì¹´í”„ì¹´ ì‚¬ìš©í•˜ê¸°ì°¸ê³ https://www.baeldung.com/spring-kafka ëª©ì Post not found: spring-boot/spring-kafka/springboot-kafka Post not found: spring-boot/spring-kafka/springboot-kafka-javaconfig ì˜ì¡´ì„± ì¶”ê°€implementation &#x27;org.springframework.kafka:spring-kafka&#x27;testImplementation &#x27;org.springframework.kafka:spring-kafka-test&#x27;","text":"ëª©ì Spring - Kafka Spring - Kafka Java Config ì‚¬ìš©í•˜ê¸° Spring - Embedded Kafka ì‚¬ìš©í•˜ê¸° ìŠ¤í”„ë§ ë¶€íŠ¸ ì¹´í”„ì¹´ ì‚¬ìš©í•˜ê¸°ì°¸ê³ https://www.baeldung.com/spring-kafka ëª©ì Post not found: spring-boot/spring-kafka/springboot-kafka Post not found: spring-boot/spring-kafka/springboot-kafka-javaconfig ì˜ì¡´ì„± ì¶”ê°€implementation &#x27;org.springframework.kafka:spring-kafka&#x27;testImplementation &#x27;org.springframework.kafka:spring-kafka-test&#x27; ì¹´í”„ì¹´ì— ì ‘ì†í•˜ê¸° ìœ„í•œ ì„¤ì •kafka: bootstrapAddress: localhost:9092 message: topic: test consumer: group-id: foo Topic ì„¤ì •KafkaAdmin ëŠ” Kafka ì— í•´ë‹¹ Topic ì´ ì—†ì„ ê²½ìš° ìë™ìœ¼ë¡œ Topic ì„ ìƒì„±í•´ì¤€ë‹¤. @Configurationpublic class KafkaTopicConfig &#123; @Value(&quot;$&#123;kafka.bootstrapAddress&#125;&quot;) private String bootstrapAddress; @Bean public KafkaAdmin kafkaAdmin()&#123; Map&lt;String, Object&gt; configs = new HashMap&lt;&gt;(); configs.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress); return new KafkaAdmin(configs); &#125; @Bean public NewTopic topic()&#123; // 1. Topic ëª…, 2. Partition ê°œìˆ˜, 3. Replication ìˆ˜ return new NewTopic(&quot;test&quot;, 1, (short) 1); &#125;&#125; Producer ì„¤ì •ProducerConfig ë¥¼ ì´ìš©í•´ Producer ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê°’ë“¤ì„ ì„¤ì •í•´ì¤€ë‹¤. BOOTSTRAP_SERVERS_CONFIG ì—°ê²°í•˜ê¸° ìœ„í•œ Kafka Server ì£¼ì†Œ ì •ë³´ë¥¼ ì„¤ì • KEY_SERIALIZER_CLASS_CONFIG ì¹´í”„ì¹´ë¡œ Key ê°’ì„ ë³´ë‚´ê¸° ìœ„í•´ ì§ë ¬í™” í•˜ê¸° ìœ„í•œ ì •ë³´ë¥¼ ì„¤ì • VALUE_SERIALIZER_CLASS_CONFIG ì¹´í”„ì¹´ë¡œ Value ê°’ì„ ë³´ë‚´ê¸° ìœ„í•´ ì§ë ¬í™” í•˜ê¸° ìœ„í•œ ì •ë³´ë¥¼ ì„¤ì • MAX_REQUEST_SIZE_CONFIG Producer ê°€ ì¹´í”„ì¹´ë¡œ ë³´ë‚¼ ìˆ˜ ìˆëŠ” Message ìµœëŒ€ í¬ê¸°ë¥¼ ì„¤ì • @Configurationpublic class KafkaProducerConfig &#123; @Value(value = &quot;$&#123;kafka.bootstrapAddress&#125;&quot;) private String bootstrapAddress; @Bean public ProducerFactory&lt;String, String&gt; producerFactory()&#123; Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;(); configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress); configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class); configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class); configProps.put(ProducerConfig.MAX_REQUEST_SIZE_CONFIG, &quot;20971520&quot;); return new DefaultKafkaProducerFactory&lt;&gt;(configProps); &#125; @Bean public KafkaTemplate&lt;String, String&gt; kafkaTemplate()&#123; return new KafkaTemplate&lt;&gt;(producerFactory()); &#125;&#125; Consummer ì„¤ì •ConsumerConfig ë¥¼ ì´ìš©í•´ Consumer ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê°’ë“¤ì„ ì„¤ì •í•´ì¤€ë‹¤. BOOTSTRAP_SERVERS_CONFIG ì—°ê²°í•˜ê¸° ìœ„í•œ Kafka Server ì£¼ì†Œë¥¼ ì„¤ì • KEY_DESERIALIZER_CLASS_CONFIG ì¹´í”„ì¹´ì—ì„œ ì „ë‹¬ ë°›ì€ Key ê°’ì„ ì—­ì§ˆë ¬í™” í•˜ê¸° ìœ„í•œ ì •ë³´ë¥¼ ì„¤ì • VALUE_DESERIALIZER_CLASS_CONFIG ì¹´í”„ì¹´ì—ì„œ ì „ë‹¬ ë°›ì€ Value ê°’ì„ ì—­ì§ˆë ¬í™” í•˜ê¸° ìœ„í•œ ì •ë³´ë¥¼ ì„¤ì • GROUP_ID_CONFIG ì¹´í”„ì¹´ Consumer Group ì •ë³´ë¥¼ ì„¤ì • @Configuration@EnableKafkapublic class KafkaConsumerConfig &#123; @Value(value = &quot;$&#123;kafka.bootstrapAddress&#125;&quot;) private String bootstrapAddress; @Value(value = &quot;$&#123;kafka.consumer.group-id&#125;&quot;) private String consumerGroupId; @Bean public ConsumerFactory&lt;String, String&gt; consumerFactory()&#123; Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;(); configProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress); configProps.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); configProps.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); configProps.put(ConsumerConfig.GROUP_ID_CONFIG, consumerGroupId); return new DefaultKafkaConsumerFactory&lt;&gt;(configProps); &#125; @Bean public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory()&#123; ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); return factory; &#125;&#125; Producer@Service@RequiredArgsConstructor@Slf4jpublic class KafkaProducer &#123; private final KafkaTemplate&lt;String, String&gt; kafkaTemplate; @Value(value = &quot;$&#123;kafka.message.topic&#125;&quot;) private String topicName; public void sendMessage(String message) &#123; ListenableFuture&lt;SendResult&lt;String, String&gt;&gt; future = kafkaTemplate.send(topicName, message); future.addCallback(new ListenableFutureCallback&lt;&gt;() &#123; @Override public void onSuccess(SendResult&lt;String, String&gt; result) &#123; log.info(&quot;Sent message=[&quot; + message + &quot;] with offset=[&quot; + result.getRecordMetadata() .offset() + &quot;]&quot;); &#125; @Override public void onFailure(Throwable ex) &#123; log.info(&quot;Unable to send message=[&quot; + message + &quot;] due to : &quot; + ex.getMessage()); &#125; &#125;); &#125;&#125; Consumer@Servicepublic class KafkaConsumer &#123; private CountDownLatch latch = new CountDownLatch(3); @KafkaListener(topics = &quot;$&#123;kafka.message.topic&#125;&quot;, groupId = &quot;foo&quot;) public void listenGroupFoo(String message) &#123; System.out.println(&quot;Received Message in group &#x27;foo&#x27;: &quot; + message); latch.countDown(); &#125;&#125; Controller@RestController@RequestMapping(&quot;/kafka&quot;)@RequiredArgsConstructor@Slf4jpublic class KafkaController &#123; private final KafkaProducer kafkaProducer; @PostMapping public String sendMessage(@RequestParam(&quot;message&quot;) String message) &#123; this.kafkaProducer.sendMessage(message); log.info(&quot;Request Success = &#123;&#125;&quot;, message); return &quot;success&quot;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Kafka","slug":"Spring/Spring-Boot/Kafka","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Kafka/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - STOMP","slug":"computer-science/network/http/stomp","date":"2022-03-07T05:16:32.000Z","updated":"2024-02-18T16:19:54.519Z","comments":true,"path":"2022/03/07/computer-science/network/http/stomp/","link":"","permalink":"https://ckck803.github.io/2022/03/07/computer-science/network/http/stomp/","excerpt":"STOMP (Simple Text Oriented Messaging Protocol)WebSocket í”„ë¡œí† ì½œì€ ë‘ ê°€ì§€ ìœ í˜•ì˜ ë©”ì„¸ì§€ë¥¼ ì •ì˜í•˜ê³  ìˆì§€ë§Œ ê·¸ ë©”ì„¸ì§€ì˜ ë‚´ìš©ê¹Œì§€ëŠ” ì •ì˜í•˜ê³  ìˆì§€ ì•ŠëŠ”ë‹¤. STOMP (Simple Text Oriented Messaging Protocol) ì€ ë©”ì„¸ì§• ì „ì†¡ì„ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸° ìœ„í•´ íƒ„ìƒí•œ í”„ë¡œí† ì½œ ê¸°ë³¸ì ìœ¼ë¡œ pub/sub êµ¬ì¡°ë¡œ ë˜ì–´ìˆì–´ ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•˜ê³  ë©”ì„¸ì§€ë¥¼ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ í™•ì‹¤íˆ ì •í•´ì ¸ ìˆê¸° ë•Œë¬¸ì— ê°œë°œì ì…ì¥ì—ì„œ ëª…í™•í•˜ê²Œ ì¸ì§€í•˜ê³  ê°œë°œí•  ìˆ˜ ìˆëŠ” ì´ì ì´ ìˆë‹¤. í•œ ì¤„ë¡œ ì •ì˜í•˜ìë©´, STOMP í”„ë¡œí† ì½œì€ WebSocket ìœ„ì—ì„œ ë™ì‘í•˜ëŠ” í”„ë¡œí† ì½œë¡œì¨ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ì „ì†¡í•  ë©”ì„¸ì§€ì˜ ìœ í˜•, í˜•ì‹, ë‚´ìš©ë“¤ì„ ì •ì˜í•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜ ì´ë‹¤. ë˜í•œ STOMPë¥¼ ì´ìš©í•˜ë©´ ë©”ì„¸ì§€ì˜ í—¤ë”ì— ê°’ì„ ì¤„ ìˆ˜ ìˆì–´ í—¤ë” ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ í†µì‹  ì‹œ ì¸ì¦ ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë©° STOMP ìŠ¤í™ì— ì •ì˜í•œ ê·œì¹™ë§Œ ì˜ ì§€í‚¤ë©´ ì—¬ëŸ¬ ì–¸ì–´ ë° í”Œë«í¼ ê°„ ë©”ì„¸ì§€ë¥¼ ìƒí˜¸ ìš´ì˜í•  ìˆ˜ ìˆë‹¤.","text":"STOMP (Simple Text Oriented Messaging Protocol)WebSocket í”„ë¡œí† ì½œì€ ë‘ ê°€ì§€ ìœ í˜•ì˜ ë©”ì„¸ì§€ë¥¼ ì •ì˜í•˜ê³  ìˆì§€ë§Œ ê·¸ ë©”ì„¸ì§€ì˜ ë‚´ìš©ê¹Œì§€ëŠ” ì •ì˜í•˜ê³  ìˆì§€ ì•ŠëŠ”ë‹¤. STOMP (Simple Text Oriented Messaging Protocol) ì€ ë©”ì„¸ì§• ì „ì†¡ì„ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸° ìœ„í•´ íƒ„ìƒí•œ í”„ë¡œí† ì½œ ê¸°ë³¸ì ìœ¼ë¡œ pub/sub êµ¬ì¡°ë¡œ ë˜ì–´ìˆì–´ ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•˜ê³  ë©”ì„¸ì§€ë¥¼ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ í™•ì‹¤íˆ ì •í•´ì ¸ ìˆê¸° ë•Œë¬¸ì— ê°œë°œì ì…ì¥ì—ì„œ ëª…í™•í•˜ê²Œ ì¸ì§€í•˜ê³  ê°œë°œí•  ìˆ˜ ìˆëŠ” ì´ì ì´ ìˆë‹¤. í•œ ì¤„ë¡œ ì •ì˜í•˜ìë©´, STOMP í”„ë¡œí† ì½œì€ WebSocket ìœ„ì—ì„œ ë™ì‘í•˜ëŠ” í”„ë¡œí† ì½œë¡œì¨ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ì „ì†¡í•  ë©”ì„¸ì§€ì˜ ìœ í˜•, í˜•ì‹, ë‚´ìš©ë“¤ì„ ì •ì˜í•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜ ì´ë‹¤. ë˜í•œ STOMPë¥¼ ì´ìš©í•˜ë©´ ë©”ì„¸ì§€ì˜ í—¤ë”ì— ê°’ì„ ì¤„ ìˆ˜ ìˆì–´ í—¤ë” ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ í†µì‹  ì‹œ ì¸ì¦ ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë©° STOMP ìŠ¤í™ì— ì •ì˜í•œ ê·œì¹™ë§Œ ì˜ ì§€í‚¤ë©´ ì—¬ëŸ¬ ì–¸ì–´ ë° í”Œë«í¼ ê°„ ë©”ì„¸ì§€ë¥¼ ìƒí˜¸ ìš´ì˜í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - Web Socket","slug":"computer-science/network/http/websocket","date":"2022-03-06T14:16:32.000Z","updated":"2024-02-18T16:19:54.519Z","comments":true,"path":"2022/03/06/computer-science/network/http/websocket/","link":"","permalink":"https://ckck803.github.io/2022/03/06/computer-science/network/http/websocket/","excerpt":"ì›¹ ì†Œì¼“ Web Socket ì›¹ ì†Œì¼“ì´ë€ ë‘ í”„ë¡œê·¸ë¨ ê°„ì˜ ë©”ì‹œì§€ë¥¼ êµí™˜í•˜ê¸° ìœ„í•œ í†µì‹  ë°©ë²• ì¤‘ í•˜ë‚˜, í˜„ì¬ HTML5 ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. WebSocket í”„ë¡œí† ì½œì€ Text, Binary ë‘ ê°€ì§€ ìœ í˜•ì˜ ë©”ì„¸ì§€ë¥¼ ì •ì˜í•˜ê³  ìˆì§€ë§Œ ê·¸ ë©”ì„¸ì§€ì˜ ë‚´ìš©ê¹Œì§€ëŠ” ì •ì˜í•˜ê³  ìˆì§€ ì•ŠëŠ”ë‹¤. íŠ¹ì§• ì–‘ë°©í–¥ í†µì‹  (Full-Duplex) ë°ì´í„° ì†¡ìˆ˜ì‹ ì„ ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í†µì‹  ë°©ë²• í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ì„œë¡œì—ê²Œ ì›í•  ë•Œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆë‹¤. Http í†µì‹ ì€ Client ê°€ ìš”ì²­ì„ ë³´ë‚´ê³  Server ê°€ ìš”ì²­ì— ëŒ€í•´ ì‘ë‹µì„ ë³´ë‚´ì£¼ëŠ” ë‹¨ë°©í–¥ í†µì‹  ì‹¤ì‹œê°„ ë„¤íŠ¸ì›Œí‚¹ ì›¹ í™˜ê²½ì—ì„œ ì—°ì†ëœ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ë…¸ì¶œí•  ìˆ˜ ìˆë‹¤. Web Socket ì´ì „ ê¸°ìˆ  ìœ„ ê¸°ìˆ ë“¤ì€ HTTP ìœ„ì—ì„œ ë™ì‘í•˜ë¯€ë¡œ Request, Response ë‘˜ë‹¤ Header ê°€ ë¶ˆí•„ìš”í•˜ê²Œ í¬ë‹¤. Polling ì„œë²„ë¡œ ì¼ì • ì£¼ê¸°ë¡œ ìš”ì²­ì„ ì†¡ì‹ í•˜ëŠ” ë°©ì‹ì´ë‹¤. Real-time í†µì‹ ì—ì„œëŠ” ì–¸ì œ í†µì‹ ì´ ë°œìƒí• ì§€ ì˜ˆì¸¡ì´ ë¶ˆê°€ëŠ¥ í•˜ë¯€ë¡œ ì£¼ê¸°ì ìœ¼ë¡œ Request ì™€ Connectionì„ ìƒì„±í•œë‹¤. ë¶ˆí•„ìš”í•œ Request ì™€ Connection ì„ ìœ„í•œ ìì› Loss ê°€ ë°œìƒ Long Polling ì„œë²„ì—ì„œ ìš”ì²­ì„ ë³´ë‚´ê³  ì´ë²¤íŠ¸ê°€ ìƒê²¨ ì‘ë‹µ ë°›ì„ ë•Œ ê¹Œì§€ ì—°ê²°ì„ ì¢…ë£Œí•˜ì§€ ì•ŠëŠ”ë‹¤. ì‘ë‹µì„ ë°›ìœ¼ë©´ ê·¾ê³  ë‹¤ì‹œ ì¬ìš”ì²­ì„ í•œë‹¤. ë§ì€ ì–‘ì˜ ë©”ì‹œì§€ê°€ ìŸì•„ì§ˆ ê²½ìš° Polling ê³¼ ê°™ë‹¤. Streaming ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³  ëŠê¸°ì§€ ì•ŠëŠ” ì—°ê²° ìƒíƒœì—ì„œ ëŠì„ ì—†ì´ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œì˜ ë°ì´í„° ì†¡ì‹ ì´ ì–´ë µë‹¤.","text":"ì›¹ ì†Œì¼“ Web Socket ì›¹ ì†Œì¼“ì´ë€ ë‘ í”„ë¡œê·¸ë¨ ê°„ì˜ ë©”ì‹œì§€ë¥¼ êµí™˜í•˜ê¸° ìœ„í•œ í†µì‹  ë°©ë²• ì¤‘ í•˜ë‚˜, í˜„ì¬ HTML5 ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. WebSocket í”„ë¡œí† ì½œì€ Text, Binary ë‘ ê°€ì§€ ìœ í˜•ì˜ ë©”ì„¸ì§€ë¥¼ ì •ì˜í•˜ê³  ìˆì§€ë§Œ ê·¸ ë©”ì„¸ì§€ì˜ ë‚´ìš©ê¹Œì§€ëŠ” ì •ì˜í•˜ê³  ìˆì§€ ì•ŠëŠ”ë‹¤. íŠ¹ì§• ì–‘ë°©í–¥ í†µì‹  (Full-Duplex) ë°ì´í„° ì†¡ìˆ˜ì‹ ì„ ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í†µì‹  ë°©ë²• í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ì„œë¡œì—ê²Œ ì›í•  ë•Œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆë‹¤. Http í†µì‹ ì€ Client ê°€ ìš”ì²­ì„ ë³´ë‚´ê³  Server ê°€ ìš”ì²­ì— ëŒ€í•´ ì‘ë‹µì„ ë³´ë‚´ì£¼ëŠ” ë‹¨ë°©í–¥ í†µì‹  ì‹¤ì‹œê°„ ë„¤íŠ¸ì›Œí‚¹ ì›¹ í™˜ê²½ì—ì„œ ì—°ì†ëœ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ë…¸ì¶œí•  ìˆ˜ ìˆë‹¤. Web Socket ì´ì „ ê¸°ìˆ  ìœ„ ê¸°ìˆ ë“¤ì€ HTTP ìœ„ì—ì„œ ë™ì‘í•˜ë¯€ë¡œ Request, Response ë‘˜ë‹¤ Header ê°€ ë¶ˆí•„ìš”í•˜ê²Œ í¬ë‹¤. Polling ì„œë²„ë¡œ ì¼ì • ì£¼ê¸°ë¡œ ìš”ì²­ì„ ì†¡ì‹ í•˜ëŠ” ë°©ì‹ì´ë‹¤. Real-time í†µì‹ ì—ì„œëŠ” ì–¸ì œ í†µì‹ ì´ ë°œìƒí• ì§€ ì˜ˆì¸¡ì´ ë¶ˆê°€ëŠ¥ í•˜ë¯€ë¡œ ì£¼ê¸°ì ìœ¼ë¡œ Request ì™€ Connectionì„ ìƒì„±í•œë‹¤. ë¶ˆí•„ìš”í•œ Request ì™€ Connection ì„ ìœ„í•œ ìì› Loss ê°€ ë°œìƒ Long Polling ì„œë²„ì—ì„œ ìš”ì²­ì„ ë³´ë‚´ê³  ì´ë²¤íŠ¸ê°€ ìƒê²¨ ì‘ë‹µ ë°›ì„ ë•Œ ê¹Œì§€ ì—°ê²°ì„ ì¢…ë£Œí•˜ì§€ ì•ŠëŠ”ë‹¤. ì‘ë‹µì„ ë°›ìœ¼ë©´ ê·¾ê³  ë‹¤ì‹œ ì¬ìš”ì²­ì„ í•œë‹¤. ë§ì€ ì–‘ì˜ ë©”ì‹œì§€ê°€ ìŸì•„ì§ˆ ê²½ìš° Polling ê³¼ ê°™ë‹¤. Streaming ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³  ëŠê¸°ì§€ ì•ŠëŠ” ì—°ê²° ìƒíƒœì—ì„œ ëŠì„ ì—†ì´ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œì˜ ë°ì´í„° ì†¡ì‹ ì´ ì–´ë µë‹¤. Web Socket í•¸ë“œ ì‰ì´í‚¹ HTTP, HTTPS ë¥¼ ì´ìš©í•´ HandShaking ì´ ì¼ì–´ë‚œë‹¤. í•¸ë“œ ì‰ì´í‚¹ì´ ì™„ë£Œ ë˜ë©´ HTTP, HTTPS ì—ì„œ ws, wss ë¡œ í”„ë¡œí† ì½œì´ ë³€ê²½ëœë‹¤. Close Frame ì„ ë°›ê²Œ ë˜ë©´ Connection ì´ ì¢…ë£Œëœë‹¤. í•œê³„ HTML5 ì´ì „ì— êµ¬í˜„ëœ ì„œë¹„ìŠ¤ì—ì„œëŠ” Web Socket ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. Socket.io, SockJS ì™€ ê°™ì€ ê¸°ìˆ ì„ í†µí•´ ì›¹ ì†Œì¼“ ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë¬¸ìì—´ë“¤ì„ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆê²Œë§Œ í•˜ëŠ” ì—­í•  ë¬¸ìì—´ì˜ í•´ë…ì€ ì˜¨ì „íˆ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì²˜ë¦¬í•´ì•¼ í•œë‹¤. HTTP ëŠ” í˜•ì‹ì„ ì •í•´ ë’€ê¸° ë•Œë¬¸ì— í˜•ì‹ì— ë§ì¶° í•´ì„í•  ìˆ˜ ìˆë‹¤. Web Socketì€ í˜•ì‹ì´ ì •í•´ì ¸ ìˆì§€ ì•Šì•„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‰½ê²Œ í•´ì„í•˜ê¸° í˜ë“¤ë‹¤. sub-protocols ì„ ì´ìš©í•´ ì£¼ê³  ë°›ëŠ” ë©”ì‹œì§€ í˜•íƒœë¥¼ ì•½ì†í•œë‹¤.(ex. STOMP) ì±„íŒ… í†µì‹ ì„ ìœ„í•œ í˜•ì‹ì„ ì •ì˜ HTTP ì™€ ìœ ì‚¬í•˜ê²Œ ê°„ë‹¨íˆ ì •ì˜ ë¼ í•´ì„í•˜ê¸° í¸í•œ í”„ë¡œí† ì½œ Web Socket ìœ„ì—ì„œ ì‚¬ìš©ëœë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"}],"tags":[]},{"title":"Database - ì„œë¸Œ ì¿¼ë¦¬","slug":"database/subquery","date":"2022-03-05T16:15:42.000Z","updated":"2024-02-18T16:19:54.525Z","comments":true,"path":"2022/03/06/database/subquery/","link":"","permalink":"https://ckck803.github.io/2022/03/06/database/subquery/","excerpt":"ì„œë¸Œ ì¿¼ë¦¬ ì„œë¸Œì¿¼ë¦¬ë€ ì¿¼ë¦¬ì•ˆì˜ ë³´ì¡° ì¿¼ë¦¬ë¥¼ ê°€ë¥´í‚¤ëŠ” ìš©ì–´ë‹¤. ì„œë¸Œ ì¿¼ë¦¬ê°€ ì–´ëŠ ìœ„ì¹˜ì— ìˆëŠ”ì§€ì— ë”°ë¼ì„œ ë¶ˆë¦¬ëŠ” ìš©ì–´ê°€ ì‚´ì§ì”© ë‹¤ë¥´ë‹¤. ìŠ¤ì¹¼ë¼ ì„œë¸Œ ì¿¼ë¦¬ ì¸ë¼ì¸ ë·° ì¤‘ì²© ì„œë¸Œ ì¿¼ë¦¬ ìŠ¤ì¹¼ë¼ ì„œë¸Œ ì¿¼ë¦¬SELECT ì ˆì— ì„œë¸Œì¿¼ë¦¬ê°€ ìˆì„ ê²½ìš° ìŠ¤ì¹¼ë¼ ì„œë¸Œì¿¼ë¦¬ ë¼ê³  ë¶ˆë¦°ë‹¤. ìŠ¤ì¹¼ë¼ ì„œë¸Œ ì¿¼ë¦¬ëŠ” ë°˜í™˜ë˜ëŠ” ë°ì´í„° ê°’ì´ 1í–‰ 1ì—´ì˜ êµ¬ì¡°ë¡œ ì¶œë ¥ ë¼ì•¼ í•œë‹¤. ì¸ë¼ì¸ ë·°FROM ì ˆì— ì„œë¸Œì¿¼ë¦¬ê°€ ìˆëŠ” ê²½ìš° ì¸ë¼ì¸ ë·° ë¼ê³  ë¶ˆë¦°ë‹¤. FROM ì ˆ ëƒ…ì— ì¼ì‹œì ìœ¼ë¡œ ë·°ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ì´ë¼ ì¸ë¼ì¸ ë·°ë¼ê³  ë¶ˆë¦°ë‹¤. ì¸ë¼ì¸ ë·°ì˜ ê²°ê³¼ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ ë˜ëŠ” ë””ìŠ¤í¬ì— ì„ì‹œ í…Œì´ë¸”ì„ ìƒì„±í•´ í™œìš©í•œë‹¤. ì¤‘ì²© ì„œë¸Œì¿¼ë¦¬WHERE ì ˆì— ì„œë¸Œì¿¼ë¦¬ê°€ ìˆëŠ” ê²½ìš° ì¤‘ì²© ì„œë¸Œì¿¼ë¦¬ ë¼ê³  ë¶ˆë¦°ë‹¤.","text":"ì„œë¸Œ ì¿¼ë¦¬ ì„œë¸Œì¿¼ë¦¬ë€ ì¿¼ë¦¬ì•ˆì˜ ë³´ì¡° ì¿¼ë¦¬ë¥¼ ê°€ë¥´í‚¤ëŠ” ìš©ì–´ë‹¤. ì„œë¸Œ ì¿¼ë¦¬ê°€ ì–´ëŠ ìœ„ì¹˜ì— ìˆëŠ”ì§€ì— ë”°ë¼ì„œ ë¶ˆë¦¬ëŠ” ìš©ì–´ê°€ ì‚´ì§ì”© ë‹¤ë¥´ë‹¤. ìŠ¤ì¹¼ë¼ ì„œë¸Œ ì¿¼ë¦¬ ì¸ë¼ì¸ ë·° ì¤‘ì²© ì„œë¸Œ ì¿¼ë¦¬ ìŠ¤ì¹¼ë¼ ì„œë¸Œ ì¿¼ë¦¬SELECT ì ˆì— ì„œë¸Œì¿¼ë¦¬ê°€ ìˆì„ ê²½ìš° ìŠ¤ì¹¼ë¼ ì„œë¸Œì¿¼ë¦¬ ë¼ê³  ë¶ˆë¦°ë‹¤. ìŠ¤ì¹¼ë¼ ì„œë¸Œ ì¿¼ë¦¬ëŠ” ë°˜í™˜ë˜ëŠ” ë°ì´í„° ê°’ì´ 1í–‰ 1ì—´ì˜ êµ¬ì¡°ë¡œ ì¶œë ¥ ë¼ì•¼ í•œë‹¤. ì¸ë¼ì¸ ë·°FROM ì ˆì— ì„œë¸Œì¿¼ë¦¬ê°€ ìˆëŠ” ê²½ìš° ì¸ë¼ì¸ ë·° ë¼ê³  ë¶ˆë¦°ë‹¤. FROM ì ˆ ëƒ…ì— ì¼ì‹œì ìœ¼ë¡œ ë·°ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ì´ë¼ ì¸ë¼ì¸ ë·°ë¼ê³  ë¶ˆë¦°ë‹¤. ì¸ë¼ì¸ ë·°ì˜ ê²°ê³¼ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ ë˜ëŠ” ë””ìŠ¤í¬ì— ì„ì‹œ í…Œì´ë¸”ì„ ìƒì„±í•´ í™œìš©í•œë‹¤. ì¤‘ì²© ì„œë¸Œì¿¼ë¦¬WHERE ì ˆì— ì„œë¸Œì¿¼ë¦¬ê°€ ìˆëŠ” ê²½ìš° ì¤‘ì²© ì„œë¸Œì¿¼ë¦¬ ë¼ê³  ë¶ˆë¦°ë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"}],"tags":[]},{"title":"Oracle - Clustering Factor","slug":"database/oracle/clustering-factor","date":"2022-03-05T16:15:42.000Z","updated":"2024-11-28T13:59:38.218Z","comments":true,"path":"2022/03/06/database/oracle/clustering-factor/","link":"","permalink":"https://ckck803.github.io/2022/03/06/database/oracle/clustering-factor/","excerpt":"Oracle - Clustering Factor ë°ì´í„°ë² ì´ìŠ¤ì—ì„œëŠ” íŠ¹ì • ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ê°™ì€ ê°’ì„ ê°–ëŠ” ë°ì´í„°ê°€ ì„œë¡œ ëª¨ì—¬ìˆëŠ” ì •ë„ë¥¼ ì˜ë¯¸í•œë‹¤. ì¸ë±ìŠ¤ í´ëŸ¬ìŠ¤í„°ë§ íŒ©í„°ê°€ ì¢‹ë‹¤. ê³  í•˜ë©´ ì¸ë±ìŠ¤ ì •ë ¬ ìˆœì„œ ì™€ í…Œì´ë¸” ì •ë ¬ ìˆœì„œ ê°€ ì„œë¡œ ë¹„ìŠ·í•˜ë‹¤ëŠ” ê²ƒì„ ë§í•œë‹¤. Index Scanì˜ Costì— í° ì˜í–¥ì„ ì¤€ë‹¤. Index Lookupì„ í†µí•´ Dataë¥¼ ì½ëŠ” ì¼ëŸ‰ì„ ê²°ì •í•œë‹¤.","text":"Oracle - Clustering Factor ë°ì´í„°ë² ì´ìŠ¤ì—ì„œëŠ” íŠ¹ì • ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ê°™ì€ ê°’ì„ ê°–ëŠ” ë°ì´í„°ê°€ ì„œë¡œ ëª¨ì—¬ìˆëŠ” ì •ë„ë¥¼ ì˜ë¯¸í•œë‹¤. ì¸ë±ìŠ¤ í´ëŸ¬ìŠ¤í„°ë§ íŒ©í„°ê°€ ì¢‹ë‹¤. ê³  í•˜ë©´ ì¸ë±ìŠ¤ ì •ë ¬ ìˆœì„œ ì™€ í…Œì´ë¸” ì •ë ¬ ìˆœì„œ ê°€ ì„œë¡œ ë¹„ìŠ·í•˜ë‹¤ëŠ” ê²ƒì„ ë§í•œë‹¤. Index Scanì˜ Costì— í° ì˜í–¥ì„ ì¤€ë‹¤. Index Lookupì„ í†µí•´ Dataë¥¼ ì½ëŠ” ì¼ëŸ‰ì„ ê²°ì •í•œë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Oracle","slug":"Develop/Oracle","permalink":"https://ckck803.github.io/categories/Develop/Oracle/"}],"tags":[]},{"title":"Kafka Consumer","slug":"kafka/kafka-consumer","date":"2022-03-02T13:25:35.000Z","updated":"2024-11-28T13:59:25.124Z","comments":true,"path":"2022/03/02/kafka/kafka-consumer/","link":"","permalink":"https://ckck803.github.io/2022/03/02/kafka/kafka-consumer/","excerpt":"Kafka Consumerì¹´í”„ì¹´ì—ì„œëŠ” Consumer ê°€ ë°ì´í„°ë¥¼ ê°€ì ¸ê°€ë„ ë°ì´í„°ê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤. Kafka Consumer ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Topic ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ Polling ì´ë¼ê³  í•œë‹¤. Partition Offset ìœ„ì¹˜ ê¸°ë¡(Commit) Consumer Group ì„ í†µí•´ ë³‘ë ¬ ì²˜ë¦¬ offset ë©”ì‹œì§€ê°€ íŒŒí‹°ì…˜ ë‚´ì—ì„œ ê°€ì§€ëŠ” ê³ ìœ ì˜ ë²ˆí˜¸ offset ì€ í† í”½ ë³„ë¡œ íŒŒí‹°ì…˜ ë³„ë¡œ ë³„ê°œë¡œ ì§€ì •ëœë‹¤. Consumer ê°€ ë°ì´í„°ë¥¼ ì–´ëŠì§€ì ê¹Œì§€ ì½ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤. Consumer ê°€ ë°ì´í„°ë¥¼ ì½ì–´ê°€ë©´ offset ì„ Commit í•œë‹¤. Consumer ê°€ Partition ì˜ ì½ì€ ìœ„ì¹˜(offset) ì€ Kafka ì˜ __Consumer_offset í† í”½ì— ì €ì¥ëœë‹¤. Consumer ê°€ ì¤‘ì§€ê°€ ë˜ë”ë¼ë„ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì•Œê³  ìˆìœ¼ë¯€ë¡œ ë‹¤ì‹œ ë³µêµ¬í•˜ì—¬ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. Multiple Consumer Consumer ê°œìˆ˜ëŠ” Partition ê°œìˆ˜ë³´ë‹¤ ì ê±°ë‚˜ ê°™ì•„ì•¼ í•œë‹¤. ì—¬ëŸ¬ Partition ì„ ê°€ì§„ Topic ì— ëŒ€í•´ Consumer ê°€ ë³‘ë ¬ ì²˜ë¦¬í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ” Consumer ê°€ Partitionì˜ ê°œìˆ˜ë³´ë‹¤ ì‘ì•„ì•¼ í•œë‹¤. ë‹¤ë¥¸ Consumer Group","text":"Kafka Consumerì¹´í”„ì¹´ì—ì„œëŠ” Consumer ê°€ ë°ì´í„°ë¥¼ ê°€ì ¸ê°€ë„ ë°ì´í„°ê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤. Kafka Consumer ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Topic ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ Polling ì´ë¼ê³  í•œë‹¤. Partition Offset ìœ„ì¹˜ ê¸°ë¡(Commit) Consumer Group ì„ í†µí•´ ë³‘ë ¬ ì²˜ë¦¬ offset ë©”ì‹œì§€ê°€ íŒŒí‹°ì…˜ ë‚´ì—ì„œ ê°€ì§€ëŠ” ê³ ìœ ì˜ ë²ˆí˜¸ offset ì€ í† í”½ ë³„ë¡œ íŒŒí‹°ì…˜ ë³„ë¡œ ë³„ê°œë¡œ ì§€ì •ëœë‹¤. Consumer ê°€ ë°ì´í„°ë¥¼ ì–´ëŠì§€ì ê¹Œì§€ ì½ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤. Consumer ê°€ ë°ì´í„°ë¥¼ ì½ì–´ê°€ë©´ offset ì„ Commit í•œë‹¤. Consumer ê°€ Partition ì˜ ì½ì€ ìœ„ì¹˜(offset) ì€ Kafka ì˜ __Consumer_offset í† í”½ì— ì €ì¥ëœë‹¤. Consumer ê°€ ì¤‘ì§€ê°€ ë˜ë”ë¼ë„ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì•Œê³  ìˆìœ¼ë¯€ë¡œ ë‹¤ì‹œ ë³µêµ¬í•˜ì—¬ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. Multiple Consumer Consumer ê°œìˆ˜ëŠ” Partition ê°œìˆ˜ë³´ë‹¤ ì ê±°ë‚˜ ê°™ì•„ì•¼ í•œë‹¤. ì—¬ëŸ¬ Partition ì„ ê°€ì§„ Topic ì— ëŒ€í•´ Consumer ê°€ ë³‘ë ¬ ì²˜ë¦¬í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ” Consumer ê°€ Partitionì˜ ê°œìˆ˜ë³´ë‹¤ ì‘ì•„ì•¼ í•œë‹¤. ë‹¤ë¥¸ Consumer Group ê°ê¸° ë‹¤ë¥¸ Consumber Group ì€ ë‹¤ë¥¸ Consumer Group ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤. Consumer Group ë³„ë¡œ Topic ë³„ë¡œ offset ì„ ë‚˜ëˆ„ì–´ ì €ì¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Kafka","slug":"Develop/Kafka","permalink":"https://ckck803.github.io/categories/Develop/Kafka/"}],"tags":[]},{"title":"Kafka Producer","slug":"kafka/kafka-producer","date":"2022-03-02T13:25:35.000Z","updated":"2024-11-28T13:59:25.604Z","comments":true,"path":"2022/03/02/kafka/kafka-producer/","link":"","permalink":"https://ckck803.github.io/2022/03/02/kafka/kafka-producer/","excerpt":"ì¹´í”„ì¹´ í”„ë¡œë“€ì„œì¹´í”„ì¹´ í”„ë¡œë“€ì„œëŠ” ë¸Œë¡œì»¤ì— ì¡´ì¬í•˜ëŠ” í† í”½ì— ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. Topic ì— í•´ë‹¹í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ìƒì„± í›„ í•´ë‹¹ Topicìœ¼ë¡œ ë°ì´í„°ë¥¼ publish í•œë‹¤. ë˜í•œ, ë©”ì‹œì§€ ì „ì†¡ì´ ì‹¤íŒ¨í•  ê²½ìš°, ì¬ì „ì†¡ì„ í•œë‹¤. ì¹´í”„ì¹´ í”„ë¡œë“€ì„œëŠ” ë¸Œë¡œì»¤ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ë•Œ íŒŒí‹°ì…˜ Key ë„ í•¨ê»˜ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¸Œë¡œì»¤ëŠ” íŒŒí‹°ì…˜ Key ì˜ ìœ ë¬´ì— ë”°ë¼ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤. íŒŒí‹°ì…˜ Key ê°€ null ì¸ ë°ì´í„° ì „ì†¡Topic ì— Partition ì´ í•œê°œì¸ ê²½ìš°ëŠ” ë°ì´í„°ë“¤ì´ ìˆœì°¨ì ìœ¼ë¡œ ìŒ“ì´ê²Œ ëœë‹¤. Topic ì— Partition ì´ ì—¬ëŸ¬ê°œì¸ ê²½ìš° Round Robin í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ê°€ ìŒ“ì´ê²Œ ëœë‹¤. íŒŒí‹°ì…˜ Key ë¥¼ ì „ì†¡í•  ê²½ìš°Kafka ëŠ” Key ë¥¼ íŠ¹ì •í•œ Hash ê°’ìœ¼ë¡œ ë³€í˜• ì‹œì¼œ Partition ê³¼ 1:1 ë§¤ì¹­ì„ ì‹œí‚µë‹ˆë‹¤. ê° íŒŒí‹°ì…˜ì— ë™ì¼ Key ì˜ Value ë§Œ ìŒ“ì´ê²Œ ëœë‹¤. Partition ì˜ ê°œìˆ˜ì™€ Key ì˜ ê°œìˆ˜ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° Key ì™€ Partition ì˜ ë§¤ì¹­ì´ ê¹¨ì§€ê²Œ ë¼ Key ì™€ Partition ì—°ê²°ì€ ë³´ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.","text":"ì¹´í”„ì¹´ í”„ë¡œë“€ì„œì¹´í”„ì¹´ í”„ë¡œë“€ì„œëŠ” ë¸Œë¡œì»¤ì— ì¡´ì¬í•˜ëŠ” í† í”½ì— ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. Topic ì— í•´ë‹¹í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ìƒì„± í›„ í•´ë‹¹ Topicìœ¼ë¡œ ë°ì´í„°ë¥¼ publish í•œë‹¤. ë˜í•œ, ë©”ì‹œì§€ ì „ì†¡ì´ ì‹¤íŒ¨í•  ê²½ìš°, ì¬ì „ì†¡ì„ í•œë‹¤. ì¹´í”„ì¹´ í”„ë¡œë“€ì„œëŠ” ë¸Œë¡œì»¤ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ë•Œ íŒŒí‹°ì…˜ Key ë„ í•¨ê»˜ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¸Œë¡œì»¤ëŠ” íŒŒí‹°ì…˜ Key ì˜ ìœ ë¬´ì— ë”°ë¼ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤. íŒŒí‹°ì…˜ Key ê°€ null ì¸ ë°ì´í„° ì „ì†¡Topic ì— Partition ì´ í•œê°œì¸ ê²½ìš°ëŠ” ë°ì´í„°ë“¤ì´ ìˆœì°¨ì ìœ¼ë¡œ ìŒ“ì´ê²Œ ëœë‹¤. Topic ì— Partition ì´ ì—¬ëŸ¬ê°œì¸ ê²½ìš° Round Robin í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ê°€ ìŒ“ì´ê²Œ ëœë‹¤. íŒŒí‹°ì…˜ Key ë¥¼ ì „ì†¡í•  ê²½ìš°Kafka ëŠ” Key ë¥¼ íŠ¹ì •í•œ Hash ê°’ìœ¼ë¡œ ë³€í˜• ì‹œì¼œ Partition ê³¼ 1:1 ë§¤ì¹­ì„ ì‹œí‚µë‹ˆë‹¤. ê° íŒŒí‹°ì…˜ì— ë™ì¼ Key ì˜ Value ë§Œ ìŒ“ì´ê²Œ ëœë‹¤. Partition ì˜ ê°œìˆ˜ì™€ Key ì˜ ê°œìˆ˜ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° Key ì™€ Partition ì˜ ë§¤ì¹­ì´ ê¹¨ì§€ê²Œ ë¼ Key ì™€ Partition ì—°ê²°ì€ ë³´ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Ack ì˜µì…˜ì¹´í”„ì¹´ Producer ì—ëŠ” Ack ë¼ëŠ” ìƒì„¸ ì˜µì…˜ì´ ìˆê³  Partition ì˜ Replication ê³¼ ê´€ë ¨ì´ ìˆë‹¤. Ack ëŠ” 0, 1, All ì˜µì…˜ 3ê°œì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Ack ê°€ 0ì¼ ê²½ìš° Producer ëŠ” Leader Partition ì— ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³  ì‘ë‹µê°’ì€ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤. Leader Partition ì— ë°ì´í„°ê°€ ì •ìƒì ìœ¼ë¡œ ì „ì†¡ ëëŠ”ì§€, ë‚˜ë¨¸ì§€ Partition ì— ì •ìƒì ìœ¼ë¡œ ë³µì œ ëëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê³  ë³´ì¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì†ë„ëŠ” ë¹ ë¥´ì§€ë§Œ ë°ì´í„°ê°€ ìœ ì‹¤ ë  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. Ack ê°€ 1ì¼ ê²½ìš° Leader Partition ì— ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³  ì‘ë‹µê°’ì„ ë°›ëŠ”ë‹¤. ë‚˜ë¨¸ì§€ Partition ì— ë°ì´í„°ê°€ ë³µì œ ëëŠ”ì§€ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤. Leader Partition ì´ ë°ì´í„°ë¥¼ ë°›ì€ ì¦‰ì‹œ Broker ê°€ ì¥ì• ê°€ ë‚œë‹¤ë©´ ë‚˜ë¨¸ì§€ Partition ì— ë°ì´í„° Ack ê°€ All ì¼ ê²½ìš° Follow Partition ì— ë³µì œê°€ ì˜ ì¼ì–´ë‚¬ëŠ”ì§€ ì‘ë‹µ ê°’ì„ ë°›ëŠ”ë‹¤. í™•ì¸í•˜ëŠ” ë¶€ë¶„ì´ ë§ì•„ ì†ë„ê°€ í˜„ì €íˆ ëŠë¦¬ë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Kafka","slug":"Develop/Kafka","permalink":"https://ckck803.github.io/categories/Develop/Kafka/"}],"tags":[]},{"title":"Kafka Partitioner","slug":"kafka/kafka-partitioner","date":"2022-03-02T13:25:35.000Z","updated":"2024-11-28T13:59:25.279Z","comments":true,"path":"2022/03/02/kafka/kafka-partitioner/","link":"","permalink":"https://ckck803.github.io/2022/03/02/kafka/kafka-partitioner/","excerpt":"Kafka Partitioner Producer ê°€ ë°ì´í„°ë¥¼ ë³´ë‚´ë©´ ë¬´ì¡°ê±´ Partitioner ë¥¼ í†µí•´ Broker ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¸ë‹¤. Recode ì— í¬í•¨ëœ Message Key í˜¹ì€ Message ê°’ì— ë”°ë¼ì„œ Partition ì˜ ìœ„ì¹˜ê°€ ê²°ì •ëœë‹¤. Producer ë¥¼ ì‚¬ìš©í• ë•Œ Partitiooner ë¥¼ ì„¤ì •í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ UniformStickyPartitioner ë¡œ ì„¤ì •ëœë‹¤. Key ê°€ ìˆëŠ” Message Message Key ë¥¼ ê°€ì§„ ë ˆì½”ë“œëŠ” Partitioner ì— ì˜í•´ì„œ íŠ¹ì •í•œ Hash ê°’ì´ ìƒì„±ëœë‹¤. í•´ë‹¹ Hash ê°’ì„ ì´ìš©í•´ ì–´ëŠ Partition ì— ì €ì¥ë ì§€ ê²°ì •ëœë‹¤. ë™ì¼í•œ Message Key ë¥¼ ê°€ì§„ Record ëŠ” ë™ì¼í•œ Hash ê°’ì„ ë§Œë“¤ê¸° ë•Œë¬¸ì— í•­ìƒ ë™ì¼í•œ Partition ì— ë“¤ì–´ê°€ëŠ” ê²ƒì„ ë³´ì¥í•œë‹¤. ìˆœì„œë¥¼ ì§€ì¼œì„œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤. Partition ë‚´ë¶€ì—ì„œëŠ” Queue ì²˜ëŸ¼ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ìˆœì„œë¥¼ ì§€í‚¬ ìˆ˜ ìˆë‹¤. Key ê°€ ì—†ëŠ” MessageRound Robin í˜•íƒœë¡œ ë°ì´í„°ê°€ ë“¤ì–´ê°€ê²Œ ëœë‹¤. UniformStickyPartitioner ëŠ” í”„ë¡œë“€ì„œì—ì„œ ë°°ì¹˜ë¡œ ëª¨ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€í•œì˜ Record ë¥¼ ëª¨ì•„ì„œ Partition ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ê²Œ ëœë‹¤. Message Key ê°€ ì—†ëŠ” Record ë“¤ì€ Partition ì— ì ì ˆíˆ ë¶„ë°°ëœë‹¤.","text":"Kafka Partitioner Producer ê°€ ë°ì´í„°ë¥¼ ë³´ë‚´ë©´ ë¬´ì¡°ê±´ Partitioner ë¥¼ í†µí•´ Broker ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¸ë‹¤. Recode ì— í¬í•¨ëœ Message Key í˜¹ì€ Message ê°’ì— ë”°ë¼ì„œ Partition ì˜ ìœ„ì¹˜ê°€ ê²°ì •ëœë‹¤. Producer ë¥¼ ì‚¬ìš©í• ë•Œ Partitiooner ë¥¼ ì„¤ì •í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ UniformStickyPartitioner ë¡œ ì„¤ì •ëœë‹¤. Key ê°€ ìˆëŠ” Message Message Key ë¥¼ ê°€ì§„ ë ˆì½”ë“œëŠ” Partitioner ì— ì˜í•´ì„œ íŠ¹ì •í•œ Hash ê°’ì´ ìƒì„±ëœë‹¤. í•´ë‹¹ Hash ê°’ì„ ì´ìš©í•´ ì–´ëŠ Partition ì— ì €ì¥ë ì§€ ê²°ì •ëœë‹¤. ë™ì¼í•œ Message Key ë¥¼ ê°€ì§„ Record ëŠ” ë™ì¼í•œ Hash ê°’ì„ ë§Œë“¤ê¸° ë•Œë¬¸ì— í•­ìƒ ë™ì¼í•œ Partition ì— ë“¤ì–´ê°€ëŠ” ê²ƒì„ ë³´ì¥í•œë‹¤. ìˆœì„œë¥¼ ì§€ì¼œì„œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤. Partition ë‚´ë¶€ì—ì„œëŠ” Queue ì²˜ëŸ¼ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ìˆœì„œë¥¼ ì§€í‚¬ ìˆ˜ ìˆë‹¤. Key ê°€ ì—†ëŠ” MessageRound Robin í˜•íƒœë¡œ ë°ì´í„°ê°€ ë“¤ì–´ê°€ê²Œ ëœë‹¤. UniformStickyPartitioner ëŠ” í”„ë¡œë“€ì„œì—ì„œ ë°°ì¹˜ë¡œ ëª¨ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€í•œì˜ Record ë¥¼ ëª¨ì•„ì„œ Partition ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ê²Œ ëœë‹¤. Message Key ê°€ ì—†ëŠ” Record ë“¤ì€ Partition ì— ì ì ˆíˆ ë¶„ë°°ëœë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Kafka","slug":"Develop/Kafka","permalink":"https://ckck803.github.io/categories/Develop/Kafka/"}],"tags":[]},{"title":"Kafka Replication","slug":"kafka/kafka-replication","date":"2022-03-02T13:25:35.000Z","updated":"2024-11-28T13:59:25.360Z","comments":true,"path":"2022/03/02/kafka/kafka-replication/","link":"","permalink":"https://ckck803.github.io/2022/03/02/kafka/kafka-replication/","excerpt":"Kafka Brokerì¹´í”„ì¹´ê°€ ì„¤ì¹˜ ë¼ ìˆëŠ” ì„œë²„ ë‹¨ìœ„ë¥¼ ë§í•œë‹¤. ë³´í†µ 3ê°œ ì´ìƒì˜ Broker ë¡œ êµ¬ì„±í•´ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥ Replication ë°ì´í„°ì˜ ë³µì œë¥¼ ì˜ë¯¸í•œë‹¤ Replication ì€ Partition ì˜ ê³ ê°€ìš©ì„± ì„ ìœ„í•´ ì‚¬ìš©ëœë‹¤. 3ê°œ ì´ìƒì˜ Broker ë¥¼ ì‚¬ìš©í•  ë•Œ Replication ì€ 3ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ Replication ì´ 1ì¸ ê²½ìš° Partition ì´ ì›ë³¸ 1ê°œë§Œ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì´ë‹¤. Replication ì´ 2ì¸ ê²½ìš° Partition ì´ ì›ë³¸ 1ê°œì™€ ë³µì¬ë³¸ 1ê°œ ì´ 2ê°œê°€ ì¡´ì¬í•¨ì„ ì˜ë¯¸í•œë‹¤. Replication ì´ 3ì¸ ê²½ìš° Partition ì´ ì›ë³¸ 1ê°œì™€ ë³µì¬ë³¸ 2ê°œ ì´ 3ê°œê°€ ì¡´ì¬í•¨ì„ ì˜ë¯¸í•œë‹¤. Broker ê°œìˆ˜ì— ë”°ë¼ì„œ Replication ê°œìˆ˜ê°€ ì œí•œëœë‹¤. Replication ì˜ ê°œìˆ˜ëŠ” Brokerì˜ ê°œìˆ˜ë¥¼ ë„˜ì–´ì„¤ ìˆ˜ ì—†ë‹¤. ì›ë³¸ Partition ì€ Leader Partition ì´ë¼ ë¶€ë¥´ê³ , ë³µì¬ë³¸ Partition ì€ Follower Partition ì´ë¼ ë¶€ë¥¸ë‹¤. Leader Partition ê³¼ Follower Partition ì„ í•©ì³ì„œ ISR (In Sync Replica) ë¼ê³  ë¶€ë¥¸ë‹¤. Producer ê°€ Topic ì˜ Partition ì— ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•Œ ì „ë‹¬ë°›ëŠ” ì£¼ì²´ê°€ Leader Partition ì´ëœë‹¤. Replication ì´ 1ì¸ ê²½ìš° Partition ì´ í•œê°œê³  Replication ì´ 1ì¸ Topic ì´ ì¡´ì¬í•˜ê³  Broker ê°€ 3ëŒ€ë¼ë©´ Broker 3ëŒ€ ì¤‘ 1ëŒ€ì— í•´ë‹¹ Topic ì •ë³´ê°€ ì €ì¥ëœë‹¤.","text":"Kafka Brokerì¹´í”„ì¹´ê°€ ì„¤ì¹˜ ë¼ ìˆëŠ” ì„œë²„ ë‹¨ìœ„ë¥¼ ë§í•œë‹¤. ë³´í†µ 3ê°œ ì´ìƒì˜ Broker ë¡œ êµ¬ì„±í•´ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥ Replication ë°ì´í„°ì˜ ë³µì œë¥¼ ì˜ë¯¸í•œë‹¤ Replication ì€ Partition ì˜ ê³ ê°€ìš©ì„± ì„ ìœ„í•´ ì‚¬ìš©ëœë‹¤. 3ê°œ ì´ìƒì˜ Broker ë¥¼ ì‚¬ìš©í•  ë•Œ Replication ì€ 3ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ Replication ì´ 1ì¸ ê²½ìš° Partition ì´ ì›ë³¸ 1ê°œë§Œ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì´ë‹¤. Replication ì´ 2ì¸ ê²½ìš° Partition ì´ ì›ë³¸ 1ê°œì™€ ë³µì¬ë³¸ 1ê°œ ì´ 2ê°œê°€ ì¡´ì¬í•¨ì„ ì˜ë¯¸í•œë‹¤. Replication ì´ 3ì¸ ê²½ìš° Partition ì´ ì›ë³¸ 1ê°œì™€ ë³µì¬ë³¸ 2ê°œ ì´ 3ê°œê°€ ì¡´ì¬í•¨ì„ ì˜ë¯¸í•œë‹¤. Broker ê°œìˆ˜ì— ë”°ë¼ì„œ Replication ê°œìˆ˜ê°€ ì œí•œëœë‹¤. Replication ì˜ ê°œìˆ˜ëŠ” Brokerì˜ ê°œìˆ˜ë¥¼ ë„˜ì–´ì„¤ ìˆ˜ ì—†ë‹¤. ì›ë³¸ Partition ì€ Leader Partition ì´ë¼ ë¶€ë¥´ê³ , ë³µì¬ë³¸ Partition ì€ Follower Partition ì´ë¼ ë¶€ë¥¸ë‹¤. Leader Partition ê³¼ Follower Partition ì„ í•©ì³ì„œ ISR (In Sync Replica) ë¼ê³  ë¶€ë¥¸ë‹¤. Producer ê°€ Topic ì˜ Partition ì— ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•Œ ì „ë‹¬ë°›ëŠ” ì£¼ì²´ê°€ Leader Partition ì´ëœë‹¤. Replication ì´ 1ì¸ ê²½ìš° Partition ì´ í•œê°œê³  Replication ì´ 1ì¸ Topic ì´ ì¡´ì¬í•˜ê³  Broker ê°€ 3ëŒ€ë¼ë©´ Broker 3ëŒ€ ì¤‘ 1ëŒ€ì— í•´ë‹¹ Topic ì •ë³´ê°€ ì €ì¥ëœë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Kafka","slug":"Develop/Kafka","permalink":"https://ckck803.github.io/categories/Develop/Kafka/"}],"tags":[]},{"title":"Kafka ì„¤ì¹˜","slug":"kafka/kafka-install","date":"2022-03-01T13:25:35.000Z","updated":"2024-11-28T13:59:25.197Z","comments":true,"path":"2022/03/01/kafka/kafka-install/","link":"","permalink":"https://ckck803.github.io/2022/03/01/kafka/kafka-install/","excerpt":"ì¹´í”„ì¹´ ì„¤ì¹˜http://kafka.apache.org/ ì£¼í‚¤í¼ ì‹¤í–‰bin/zookeeper-server-start.sh config/zookeeper.properties Properties ë³€ê²½server.propertiesì—ì„œ Listner ì„¤ì •ì„ ì¶”ê°€í•´ ì¤˜ì•¼ í•œë‹¤. listeners=PLAINTEXT://127.0.0.1:9092 kafka ì‹¤í–‰bin/kafka-server-start.sh config/server.properties","text":"ì¹´í”„ì¹´ ì„¤ì¹˜http://kafka.apache.org/ ì£¼í‚¤í¼ ì‹¤í–‰bin/zookeeper-server-start.sh config/zookeeper.properties Properties ë³€ê²½server.propertiesì—ì„œ Listner ì„¤ì •ì„ ì¶”ê°€í•´ ì¤˜ì•¼ í•œë‹¤. listeners=PLAINTEXT://127.0.0.1:9092 kafka ì‹¤í–‰bin/kafka-server-start.sh config/server.properties Topic ìƒì„±bin/kafka-topics.sh --create --topic quickstart-events --bootstrap-server localhost:9092 Producerbin/kafka-console-producer.sh --topic quickstart-events --bootstrap-server localhost:9092 Consumerbin/kafka-console-consumer.sh --topic quickstart-events --from-beginning --bootstrap-server localhost:9092 Kafka Producer Kafka Producer ëŠ” ë°ì´í„°ë¥¼ Kafka ë¡œ ë³´ë‚´ëŠ” ì—­í• ì„ í•œë‹¤. Topic ì— í•´ë‹¹í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ìƒì„± í›„ í•´ë‹¹ Topic ìœ¼ë¡œ ë°ì´í„°ë¥¼ publish í•œë‹¤ ì²˜ë¦¬ ì‹¤íŒ¨ì‹œ ì¬ì‹œë„í•œë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Kafka","slug":"Develop/Kafka","permalink":"https://ckck803.github.io/categories/Develop/Kafka/"}],"tags":[]},{"title":"Kafka êµ¬ì¡°","slug":"kafka/kafka","date":"2022-03-01T13:25:35.000Z","updated":"2024-11-28T13:59:25.523Z","comments":true,"path":"2022/03/01/kafka/kafka/","link":"","permalink":"https://ckck803.github.io/2022/03/01/kafka/kafka/","excerpt":"Kafka êµ¬ì¡° Topic ë°ì´í„°ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë…¼ë¦¬ì ì¸ ë‹¨ìœ„ (ë°ì´í„° ë² ì´ìŠ¤ì˜ í…Œì´ë¸” ëª…ê³¼ ìœ ì‚¬í•˜ë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.) Topicì€ í•œê°œ ì´ìƒì˜ partitionìœ¼ë¡œ êµ¬ì„±ëœë‹¤. ì¹´í”„ì¹´ì—ì„œëŠ” ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ Topic ì„ ì´ìš©í•´ pub&#x2F;sub í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤. Partition í† í”½ì— ì†í•œ Record ë¥¼ ì‹¤ì œ ì €ì¥ì†Œì— ì €ì¥í•˜ëŠ” ê°€ì¥ ì‘ì€ ë¬¼ë¦¬ì ì¸ ë‹¨ìœ„ Consumer ê°€ Record ë¥¼ ê°€ì ¸ê°€ë”ë¼ë„ Record ëŠ” ì‚­ì œë˜ì§€ ì•ŠëŠ”ë‹¤. íŒŒí‹°ì…˜ì€ ëŠ˜ë¦¬ëŠ” ê²ƒì€ ê°€ëŠ¥í•˜ì§€ë§Œ ì¤„ì´ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ íŒŒí‹°ì…˜ì„ ëŠ˜ë¦´ë•ŒëŠ” ì£¼ì˜ í•´ì•¼ í•œë‹¤. Record íŒŒí‹°ì…˜ì— ì €ì¥ë˜ëŠ” ë°ì´í„° Kafka Pub&#x2F;Sub ëª¨ë¸ Kafka ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Message ë¥¼ ë°œí–‰í•˜ëŠ” Producer ì™€ Message ë¥¼ êµ¬ë…í•˜ëŠ” Consumer ë¡œ êµ¬ì„±í•œë‹¤. Kafka ì—ì„œëŠ” ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ëŠ” Publisher ë¥¼ Producer ë¡œ ë©”ì‹œì§€ë¥¼ êµ¬ë…í•˜ëŠ” Subscriber ë¥¼ Consumer ë¼ê³  ë¶€ë¥¸ë‹¤. Kafka ì—ì„œëŠ” Consumer ê°€ ë°ì´í„°ë¥¼ ê°€ì ¸ê°€ë„ ë°ì´í„°ê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤. Kafka Producer Kafka Producer ëŠ” ë°ì´í„°ë¥¼ Kafka ë¡œ ë³´ë‚´ëŠ” ì—­í• ì„ í•œë‹¤.","text":"Kafka êµ¬ì¡° Topic ë°ì´í„°ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë…¼ë¦¬ì ì¸ ë‹¨ìœ„ (ë°ì´í„° ë² ì´ìŠ¤ì˜ í…Œì´ë¸” ëª…ê³¼ ìœ ì‚¬í•˜ë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.) Topicì€ í•œê°œ ì´ìƒì˜ partitionìœ¼ë¡œ êµ¬ì„±ëœë‹¤. ì¹´í”„ì¹´ì—ì„œëŠ” ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ Topic ì„ ì´ìš©í•´ pub&#x2F;sub í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤. Partition í† í”½ì— ì†í•œ Record ë¥¼ ì‹¤ì œ ì €ì¥ì†Œì— ì €ì¥í•˜ëŠ” ê°€ì¥ ì‘ì€ ë¬¼ë¦¬ì ì¸ ë‹¨ìœ„ Consumer ê°€ Record ë¥¼ ê°€ì ¸ê°€ë”ë¼ë„ Record ëŠ” ì‚­ì œë˜ì§€ ì•ŠëŠ”ë‹¤. íŒŒí‹°ì…˜ì€ ëŠ˜ë¦¬ëŠ” ê²ƒì€ ê°€ëŠ¥í•˜ì§€ë§Œ ì¤„ì´ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ íŒŒí‹°ì…˜ì„ ëŠ˜ë¦´ë•ŒëŠ” ì£¼ì˜ í•´ì•¼ í•œë‹¤. Record íŒŒí‹°ì…˜ì— ì €ì¥ë˜ëŠ” ë°ì´í„° Kafka Pub&#x2F;Sub ëª¨ë¸ Kafka ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Message ë¥¼ ë°œí–‰í•˜ëŠ” Producer ì™€ Message ë¥¼ êµ¬ë…í•˜ëŠ” Consumer ë¡œ êµ¬ì„±í•œë‹¤. Kafka ì—ì„œëŠ” ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ëŠ” Publisher ë¥¼ Producer ë¡œ ë©”ì‹œì§€ë¥¼ êµ¬ë…í•˜ëŠ” Subscriber ë¥¼ Consumer ë¼ê³  ë¶€ë¥¸ë‹¤. Kafka ì—ì„œëŠ” Consumer ê°€ ë°ì´í„°ë¥¼ ê°€ì ¸ê°€ë„ ë°ì´í„°ê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤. Kafka Producer Kafka Producer ëŠ” ë°ì´í„°ë¥¼ Kafka ë¡œ ë³´ë‚´ëŠ” ì—­í• ì„ í•œë‹¤. Topic ì— í•´ë‹¹í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ìƒì„± í›„ í•´ë‹¹ Topic ìœ¼ë¡œ ë°ì´í„°ë¥¼ publish í•œë‹¤ Kafka Consumer Kafka Consumer ëŠ” Topic ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì„ í•œë‹¤. ì¹´í”„ì¹´ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ Polling ì´ë¼ê³  í•œë‹¤. Consumer ê°€ ì½ì€ ìœ„ì¹˜ëŠ” offset ì„ ì´ìš©í•´ ê¸°ë¡í•œë‹¤. Kafka Consumer Group Kafka Consumer ëŠ” Consumer Group ì— ì†í•œë‹¤. Consumer Group ì€ ê°™ì€ Topic ì„ êµ¬ë…í•˜ê³  ê³µí†µëœ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” Consumer ë“¤ì˜ ëª¨ìŒì´ë‹¤. Kafka ë¡œê·¸ë¥¼ ì²˜ë¦¬í•˜ê³  ì‚¬ìš©ìì—ê²Œ ì „íŒŒí•˜ëŠ” Consumer Group Kafka ë¡œê·¸ë¥¼ Elastic Search ì— ì €ì¥í•˜ëŠ” Consumer Group Consumer Group ì— ì—¬ëŸ¬ê°œì˜ Consumer ë¥¼ ìƒì„±í•´ íŠ¹ì • Topic ë‚´ Message ë³‘ë ¬ ì²˜ë¦¬ ê°€ ê°€ëŠ¥í•˜ë‹¤. ì—¬ëŸ¬ Partition ì„ ê°€ì§„ Topic ì— ëŒ€í•´ Consumer ê°€ ë³‘ë ¬ ì²˜ë¦¬í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ” Consumer ê°€ Partitionì˜ ê°œìˆ˜ë³´ë‹¤ ì‘ì•„ì•¼ í•œë‹¤. ì„œë¡œ ë‹¤ë¥¸ Consumber Group ì€ ë‹¤ë¥¸ Consumer Group ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤. Consumer Group ë³„ë¡œ Topic ë³„ë¡œ offset ì„ ë‚˜ëˆ„ì–´ ì €ì¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤. offset ë©”ì‹œì§€ê°€ íŒŒí‹°ì…˜ ë‚´ì—ì„œ ê°€ì§€ëŠ” ê³ ìœ ì˜ ë²ˆí˜¸, Consumer ê°€ Partition ë‚´ Message ë¥¼ ì½ì€ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì¤€ë‹¤. offset ì€ Topic ë³„ë¡œ Partition ë³„ë¡œ ë³„ê°œë¡œ ì§€ì •ëœë‹¤. Consumer ê°€ ë°ì´í„°ë¥¼ ì–´ëŠì§€ì ê¹Œì§€ ì½ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤. Consumer ê°€ ë°ì´í„°ë¥¼ ì½ì–´ê°€ë©´ offset ì„ Commit í•œë‹¤. Consumer ê°€ Partition ì˜ ì½ì€ ìœ„ì¹˜ (offset) ì€ Kafka ì˜ __Consumer_offset í† í”½ì— ì €ì¥ëœë‹¤. Consumer ê°€ ì¤‘ì§€ê°€ ë˜ë”ë¼ë„ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì•Œê³  ìˆìœ¼ë¯€ë¡œ ë‹¤ì‹œ ë³µêµ¬í•˜ì—¬ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Kafka","slug":"Develop/Kafka","permalink":"https://ckck803.github.io/categories/Develop/Kafka/"}],"tags":[]},{"title":"Spring Web Socket - Chat í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸° 1","slug":"spring/spring-websocket/chatting/chatting-01","date":"2022-03-01T13:25:35.000Z","updated":"2025-01-01T11:16:55.223Z","comments":true,"path":"2022/03/01/spring/spring-websocket/chatting/chatting-01/","link":"","permalink":"https://ckck803.github.io/2022/03/01/spring/spring-websocket/chatting/chatting-01/","excerpt":"Spring boot Web Socket - Chat í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸° 1ì°¸ê³  https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/websocket.html https://daddyprogrammer.org/post/4731/spring-websocket-chatting-server-redis-pub-sub/ Message BrokerMessage Broker ëŠ” Publisher ë¡œë¶€í„° ì „ë‹¬ ë°›ì€ Message ë¥¼ Subscriber ë¡œ ì „ë‹¬í•˜ëŠ” ì¤‘ê°„ ì—­í• ì„ í•˜ë©° ì‘ìš© ì†Œí”„íŠ¸ì›¨ì–´ ê°„ì— ë©”ì‹œì§€ë¥¼ êµí™˜í•  ìˆ˜ ìˆê²Œ í•œë‹¤. ì´ë•Œ, ë©”ì‹œì§€ê°€ ì ì¬ë˜ëŠ” ê³µê°„ì€ Message Queue ë¼ê³  í•˜ë©° ë©”ì‹œì§€ ê·¸ë£¹ì„ Topic ì´ë¼ê³  í•œë‹¤. Message Broker ëŠ” ë°ì´í„°ë¥¼ ë³´ë‚´ê³  ì²˜ë¦¬í•˜ê³  ì‚­ì œí•œë‹¤. Message Interceptor ì •ì˜í•˜ê¸° ChannelInterceptor ëŠ” Message ë¥¼ MessageChannel ë¡œ ë³´ë‚´ê¸° ì „ê³¼ Message ê°€ MessageChannel ë¡œ ë³´ë‚¸ í›„ ì¶”ê°€ì ì¼ ë¡œì§ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” Interface ë‹¤. ChannelInterceptor ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ Socket í†µì‹  ìƒíƒœë¥¼ ë¡œê·¸ë¡œ ì°ì–´ í™•ì¸í•œë‹¤.","text":"Spring boot Web Socket - Chat í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸° 1ì°¸ê³  https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/websocket.html https://daddyprogrammer.org/post/4731/spring-websocket-chatting-server-redis-pub-sub/ Message BrokerMessage Broker ëŠ” Publisher ë¡œë¶€í„° ì „ë‹¬ ë°›ì€ Message ë¥¼ Subscriber ë¡œ ì „ë‹¬í•˜ëŠ” ì¤‘ê°„ ì—­í• ì„ í•˜ë©° ì‘ìš© ì†Œí”„íŠ¸ì›¨ì–´ ê°„ì— ë©”ì‹œì§€ë¥¼ êµí™˜í•  ìˆ˜ ìˆê²Œ í•œë‹¤. ì´ë•Œ, ë©”ì‹œì§€ê°€ ì ì¬ë˜ëŠ” ê³µê°„ì€ Message Queue ë¼ê³  í•˜ë©° ë©”ì‹œì§€ ê·¸ë£¹ì„ Topic ì´ë¼ê³  í•œë‹¤. Message Broker ëŠ” ë°ì´í„°ë¥¼ ë³´ë‚´ê³  ì²˜ë¦¬í•˜ê³  ì‚­ì œí•œë‹¤. Message Interceptor ì •ì˜í•˜ê¸° ChannelInterceptor ëŠ” Message ë¥¼ MessageChannel ë¡œ ë³´ë‚´ê¸° ì „ê³¼ Message ê°€ MessageChannel ë¡œ ë³´ë‚¸ í›„ ì¶”ê°€ì ì¼ ë¡œì§ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” Interface ë‹¤. ChannelInterceptor ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ Socket í†µì‹  ìƒíƒœë¥¼ ë¡œê·¸ë¡œ ì°ì–´ í™•ì¸í•œë‹¤. StompHandler.java@Slf4j@Component@RequiredArgsConstructorpublic class StompHandler implements ChannelInterceptor &#123; @Override public Message&lt;?&gt; preSend(Message&lt;?&gt; message, MessageChannel channel) &#123; StompHeaderAccessor accessor = StompHeaderAccessor.wrap(message); if(StompCommand.CONNECT.equals(accessor.getCommand()))&#123; log.info(&quot;CONNECT&quot;); &#125;else if(StompCommand.SUBSCRIBE.equals(accessor.getCommand()))&#123; log.info(&quot;SUBSCRIBE&quot;); &#125;else if(StompCommand.DISCONNECT.equals(accessor.getCommand()))&#123; log.info(&quot;DISCONNECT&quot;); &#125; return message; &#125;&#125; WebSocket ì„¤ì • STOMP ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì •ì€ WebSocketMessageBrokerConfigurer ì™€ @EnableWebSocketMessageBroker ë¥¼ ì´ìš©í•´ ì§„í–‰í•œë‹¤. MessageBrokerRegistry ê°ì²´ë¥¼ ì´ìš©í•´ Message Broker ì„¤ì • setApplicationDestinationPrefixes ë©”ì†Œë“œë¥¼ ì´ìš©í•´ Client ê°€ ë³´ë‚´ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Prefix ë¥¼ ì„¤ì •í•œë‹¤. enableSimpleBroker ë©”ì†Œë“œë¥¼ ì´ìš©í•´ SimpleBroker ì„¤ì •ì„ í•œë‹¤. SimpleBroker ëŠ” ì„¤ì •ëœ Prefix ë¥¼ subscribe í•˜ëŠ” Client ì—ê²Œ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤. StompEndpointRegistry ê°ì²´ë¥¼ ì´ìš©í•´ End Point ì„¤ì • addEndpoint ë©”ì†Œë“œë¥¼ ì´ìš©í•´ STOMP ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ End Point ë¥¼ ì„¤ì •í•œë‹¤. ChannelRegistration ê°ì²´ë¥¼ ì´ìš©í•´ Message Channel ì— Interceptor ë¥¼ ì¶”ê°€í•œë‹¤. WebsocketConfig.java@Configuration@EnableWebSocketMessageBroker@RequiredArgsConstructorpublic class WebsocketConfig implements WebSocketMessageBrokerConfigurer &#123; private final StompHandler stompHandler; @Override public void configureMessageBroker(MessageBrokerRegistry brokerRegistry) &#123; brokerRegistry.setApplicationDestinationPrefixes(&quot;/pub&quot;); brokerRegistry.enableSimpleBroker(&quot;/sub&quot;); &#125; @Override public void registerStompEndpoints(StompEndpointRegistry registry) &#123; registry.addEndpoint(&quot;/ws-stomp&quot;) .setAllowedOriginPatterns(&quot;*&quot;) .withSockJS(); &#125; @Override public void configureClientInboundChannel(ChannelRegistration registration) &#123; registration.interceptors(stompHandler); &#125;&#125; Chat Room ê´€ë ¨ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ControllerChatRoomController.java@RequiredArgsConstructor@RestController@RequestMapping(&quot;/api/chat&quot;)public class ChatRoomController &#123; private final ChatRoomRepository chatRoomRepository; @GetMapping(&quot;/room&quot;) public String rooms() &#123; return &quot;/chat/room&quot;; &#125; @GetMapping(&quot;/rooms&quot;) @ResponseBody public List&lt;ChatRoom&gt; room() &#123; List&lt;ChatRoom&gt; chatRooms = chatRoomRepository.findAllRoom(); chatRooms.stream() .forEach(room -&gt; room.setUserCount(chatRoomRepository.getUserCount(room.getRoomId()))); return chatRooms; &#125; @PostMapping(&quot;/room&quot;) @ResponseBody public ChatRoom createRoom(@RequestParam String name) &#123; return chatRoomRepository.createChatRoom(name); &#125; @GetMapping(&quot;/room/enter/&#123;roomId&#125;&quot;) public String roomDetail(Model model, @PathVariable String roomId) &#123; model.addAttribute(&quot;roomId&quot;, roomId); return &quot;/chat/roomdetail&quot;; &#125; @GetMapping(&quot;/room/&#123;roomId&#125;&quot;) @ResponseBody public ChatRoom roomInfo(@PathVariable String roomId) &#123; return chatRoomRepository.findRoomById(roomId); &#125;&#125; ChatMessage.java@Data@NoArgsConstructor@AllArgsConstructor@Builderpublic class ChatMessage &#123; private Message Type; private String roomId; private String sender; private String message; private Long userCount; public enum Message&#123; ENTER, QUIT, TALK; &#125;&#125; ChatRoom.java@Data@NoArgsConstructorpublic class ChatRoom implements Serializable &#123; private static final long serialVersionUID = 6494678977089006639L; private String roomId; private String name; private long userCount; public static ChatRoom create(String name) &#123; ChatRoom chatRoom = new ChatRoom(); chatRoom.roomId = UUID.randomUUID().toString(); chatRoom.name = name; return chatRoom; &#125;&#125; Redis Pub&#x2F;Sub ëª¨ë¸ ì‚¬ìš©í•˜ê¸°Message ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ListenrListner ì—ì„œëŠ” ì „ë‹¬ ë°›ì€ Message ë¥¼ SimpMessageSendingOperations ë¥¼ ì´ìš©í•´ í˜„ì¬ ì†Œì¼“ì— ì—°ê²°ë¼ ìˆëŠ” ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ë¥¼ ì „íŒŒí•œë‹¤. RedisSubscriber.java@Service@Slf4j@RequiredArgsConstructorpublic class RedisSubscriber &#123; private final ObjectMapper objectMapper; private final SimpMessageSendingOperations messagingTemplate; public void sendMessage(String publishMessage) &#123; try &#123; ChatMessage chatMessage = objectMapper.readValue(publishMessage, ChatMessage.class); messagingTemplate.convertAndSend(&quot;/sub/api/chat/room/&quot; + chatMessage.getRoomId(), chatMessage); &#125; catch (Exception e) &#123; log.error(&quot;Exception &#123;&#125;&quot;, e); &#125; &#125;&#125; MessageListenerAdapter ê°ì²´ë¥¼ ì´ìš©í•´ Message ë¥¼ ì²˜ë¦¬í•  Listner ë¥¼ ì„¤ì •í•´ì¤€ë‹¤. RedisMessageListenerContainer ê°ì²´ë¥¼ ì´ìš©í•´ Topic ê³¼ Listner ë¥¼ ì—°ê²°í•´ì¤€ë‹¤. Topic ì— Message ê°€ ìƒì„±ë˜ë©´ MessageListner ê°€ í•´ë‹¹ Message ë¥¼ ì²˜ë¦¬í•œë‹¤. Redis ì„¤ì • í•˜ê¸°RedisConfig.java@Configuration@EnableRedisRepositoriespublic class RedisConfig &#123; @Bean public ChannelTopic channelTopic()&#123; return new ChannelTopic(&quot;chatroom&quot;); &#125; @Bean public MessageListenerAdapter messageListenerAdapter(RedisSubscriber redisSubscriber)&#123; return new MessageListenerAdapter(redisSubscriber, &quot;sendMessage&quot;); &#125; @Bean public RedisMessageListenerContainer redisMessageListener(RedisConnectionFactory redisConnectionFactory, MessageListenerAdapter messageListenerAdapter, ChannelTopic channelTopic)&#123; RedisMessageListenerContainer container = new RedisMessageListenerContainer(); container.setConnectionFactory(redisConnectionFactory); container.addMessageListener(messageListenerAdapter, channelTopic); return container; &#125; @Bean public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory)&#123; RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;(); redisTemplate.setConnectionFactory(redisConnectionFactory); redisTemplate.setKeySerializer(new StringRedisSerializer()); redisTemplate.setValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(String.class)); return redisTemplate; &#125;&#125; Redis ì— ì €ì¥ ë° ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•œ Repository ì •ì˜ HashOperations Redis ì— Map í˜•íƒœ (Key, Value) ë¡œ ë°ì´í„°ì— ì ‘ê·¼ ë° ì €ì¥ì„ í•˜ê¸° ìœ„í•œ ê°ì²´ ValueOperations Redis ì— String ë°ì´í„°ë¥¼ ì ‘ê·¼ ë° ì €ì¥ì„ ìœ„í•œ ê°ì²´ ChatRoomRepository.java@Repository@RequiredArgsConstructorpublic class ChatRoomRepository &#123; private static final String CHAT_ROOM = &quot;CHAT_ROOM&quot;; private static final String USER_COUNT = &quot;USER_COUNT&quot;; private static final String ENTER_INFO = &quot;ENTER_INFO&quot;; @Resource(name = &quot;redisTemplate&quot;) private HashOperations&lt;String, String, ChatRoom&gt; hashOpsChatRoom; @Resource(name = &quot;redisTemplate&quot;) private HashOperations&lt;String, String, String&gt; hashOpsEnterInfo; @Resource(name = &quot;redisTemplate&quot;) private ValueOperations&lt;String, String&gt; valueOps; public List&lt;ChatRoom&gt; findAllRoom() &#123; return hashOpsChatRoom.values(CHAT_ROOM); &#125; public ChatRoom findRoomById(String id) &#123; return hashOpsChatRoom.get(CHAT_ROOM, id); &#125; public ChatRoom createChatRoom(String name) &#123; ChatRoom chatRoom = ChatRoom.create(name); hashOpsChatRoom.put(CHAT_ROOM, chatRoom.getRoomId(), chatRoom); return chatRoom; &#125; public void setUserEnterInfo(String userSessionId, String roomId)&#123; hashOpsEnterInfo.put(ENTER_INFO, userSessionId, roomId); &#125; public String getUserEnterRoomId(String userSessionId)&#123; return hashOpsEnterInfo.get(ENTER_INFO, userSessionId); &#125; public void removeUserEnterRoomId(String userSessionId)&#123; hashOpsEnterInfo.delete(ENTER_INFO, userSessionId); &#125; public Long getUserCount(String roomId)&#123; return Long.valueOf(Optional.ofNullable(valueOps.get(USER_COUNT+ &quot;_&quot; + roomId)).orElse(&quot;0&quot;)); &#125; public Long plusUserCount(String roomId)&#123; return Optional.ofNullable(valueOps.increment(USER_COUNT+&quot;_&quot;+roomId)).orElse(0L); &#125; public Long minusUserCount(String roomId)&#123; return Optional.ofNullable(valueOps.decrement(USER_COUNT+&quot;_&quot;+roomId)).filter(count -&gt; count &gt; 0).orElse(0L); &#125;&#125; ì „ë‹¬ ë°›ì€ Message ë¥¼ Redis ë¡œ ë³´ë‚´ê¸°ChatService.java@RequiredArgsConstructor@Servicepublic class ChatService &#123; private final ChannelTopic channelTopic; private final RedisTemplate redisTemplate; private final ChatRoomRepository chatRoomRepository; public String getRoomId(String destination) &#123; int lastIndex = destination.lastIndexOf(&quot;/&quot;); if (lastIndex != -1) &#123; return destination.substring(lastIndex + 1); &#125; else &#123; return &quot;&quot;; &#125; &#125; public void sendChatMessage(ChatMessage message)&#123; String roomId = getRoomId(message.getMessage()); Long userCount = chatRoomRepository.getUserCount(roomId); message.setUserCount(userCount); redisTemplate.convertAndSend(channelTopic.getTopic(), message); &#125;&#125; Message ìš”ì²­ ì²˜ë¦¬í•˜ê¸° @MessageMapping ë¥¼ ì´ìš©í•´ ë©”ì‹œì§€ ìš”ì²­ì„ ë°›ê¸° ìœ„í•œ ê²½ë¡œë¥¼ ì„¤ì •í•œë‹¤. /api/chat/message ê²½ë¡œë¡œ ë“¤ì–´ì˜¨ Message ë¥¼ ì²˜ë¦¬í•œë‹¤. ChatController.java@RestController@RequiredArgsConstructor@Slf4jpublic class ChatController &#123; private final ChatService chatService; @MessageMapping(&quot;/api/chat/message&quot;) public void message(ChatMessage message) &#123; chatService.sendChatMessage(message); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring WebSocket","slug":"Spring/Spring-WebSocket","permalink":"https://ckck803.github.io/categories/Spring/Spring-WebSocket/"}],"tags":[]},{"title":"Spring - Kafka","slug":"spring/spring-kafka/springboot-kafka","date":"2022-02-23T14:47:05.000Z","updated":"2024-11-29T06:21:20.010Z","comments":true,"path":"2022/02/23/spring/spring-kafka/springboot-kafka/","link":"","permalink":"https://ckck803.github.io/2022/02/23/spring/spring-kafka/springboot-kafka/","excerpt":"ìŠ¤í”„ë§ ë¶€íŠ¸ ì¹´í”„ì¹´ ì‚¬ìš©í•˜ê¸°ëª©ì Spring - Kafka Spring - Kafka Java Config ì‚¬ìš©í•˜ê¸° Spring - Embedded Kafka ì‚¬ìš©í•˜ê¸° ì˜ì¡´ì„± ì¶”ê°€implementation &#x27;org.springframework.kafka:spring-kafka&#x27;testImplementation &#x27;org.springframework.kafka:spring-kafka-test&#x27; ì¹´í”„ì¹´ì— ì ‘ì†í•˜ê¸° ìœ„í•œ ì„¤ì •Consumer ì„¤ì • spring.kafka.consumer.bootstrap-servers ì¹´í”„ì¹´ì— ì—°ê²°ì„ í•˜ê¸° ìœ„í•œ ì ‘ì† ì£¼ì†Œ spring.kafka.consumer.group-id kafka Consumer ê·¸ë£¹ì— ëŒ€í•œ ì •ë³´ spring.kafka.consumer.auto-offset-reset topicì— ë¶™ì€ consumerì˜ offset ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí•´ offsetì„ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš° ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì˜µì…˜ latest : ê°€ì¥ ë§ˆì§€ë§‰ offsetë¶€í„° earliest : ê°€ì¥ ì²˜ìŒ offsetë¶€í„° none : offset ì •ë³´ê°€ ì—†ìœ¼ë©´ Exception ë°œìƒ spring.kafka.consumer.key-deserializer ì¹´í”„ì¹´ì—ì„œ ì „ë‹¬ë°›ì€ key ë¥¼ ì—­ì§ˆë ¬í™” í• ë•Œ ì‚¬ìš©í•˜ëŠ” ì—­ì§ˆë ¬í™” í´ë˜ìŠ¤ StringDeserializer ëŠ” ë¬¸ìì—´ ë°ì´í„°ë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ì—­ì§ë ¬í™” ë„êµ¬ spring.kafka.consumer.value-deserializer ì¹´í”„ì¹´ì—ì„œ ì „ë‹¬ë°›ì€ value ë¥¼ ì—­ì§ˆë ¬í™” í• ë•Œ ì‚¬ìš©í•˜ëŠ” ì—­ì§ˆë ¬í™” í´ë˜ìŠ¤ StringDeserializer ëŠ” ë¬¸ìì—´ ë°ì´í„°ë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ì—­ì§ë ¬í™” ë„êµ¬ Producer ì„¤ì •","text":"ìŠ¤í”„ë§ ë¶€íŠ¸ ì¹´í”„ì¹´ ì‚¬ìš©í•˜ê¸°ëª©ì Spring - Kafka Spring - Kafka Java Config ì‚¬ìš©í•˜ê¸° Spring - Embedded Kafka ì‚¬ìš©í•˜ê¸° ì˜ì¡´ì„± ì¶”ê°€implementation &#x27;org.springframework.kafka:spring-kafka&#x27;testImplementation &#x27;org.springframework.kafka:spring-kafka-test&#x27; ì¹´í”„ì¹´ì— ì ‘ì†í•˜ê¸° ìœ„í•œ ì„¤ì •Consumer ì„¤ì • spring.kafka.consumer.bootstrap-servers ì¹´í”„ì¹´ì— ì—°ê²°ì„ í•˜ê¸° ìœ„í•œ ì ‘ì† ì£¼ì†Œ spring.kafka.consumer.group-id kafka Consumer ê·¸ë£¹ì— ëŒ€í•œ ì •ë³´ spring.kafka.consumer.auto-offset-reset topicì— ë¶™ì€ consumerì˜ offset ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí•´ offsetì„ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš° ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì˜µì…˜ latest : ê°€ì¥ ë§ˆì§€ë§‰ offsetë¶€í„° earliest : ê°€ì¥ ì²˜ìŒ offsetë¶€í„° none : offset ì •ë³´ê°€ ì—†ìœ¼ë©´ Exception ë°œìƒ spring.kafka.consumer.key-deserializer ì¹´í”„ì¹´ì—ì„œ ì „ë‹¬ë°›ì€ key ë¥¼ ì—­ì§ˆë ¬í™” í• ë•Œ ì‚¬ìš©í•˜ëŠ” ì—­ì§ˆë ¬í™” í´ë˜ìŠ¤ StringDeserializer ëŠ” ë¬¸ìì—´ ë°ì´í„°ë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ì—­ì§ë ¬í™” ë„êµ¬ spring.kafka.consumer.value-deserializer ì¹´í”„ì¹´ì—ì„œ ì „ë‹¬ë°›ì€ value ë¥¼ ì—­ì§ˆë ¬í™” í• ë•Œ ì‚¬ìš©í•˜ëŠ” ì—­ì§ˆë ¬í™” í´ë˜ìŠ¤ StringDeserializer ëŠ” ë¬¸ìì—´ ë°ì´í„°ë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ì—­ì§ë ¬í™” ë„êµ¬ Producer ì„¤ì • spring.kafka.producer.bootstrap-servers ì¹´í”„ì¹´ì— ì—°ê²°ì„ í•˜ê¸° ìœ„í•œ ì ‘ì† ì£¼ì†Œ spring.kafka.producer.key-serializer Message ë¥¼ ì¹´í”„ì¹´ ë¸Œë¡œì»¤ì— ì „ì†¡í•  ë•Œ ì‚¬ìš©í•˜ëŠ” Serializer ì–´ë–¤ ì§ë ¬í™” í´ë˜ìŠ¤ê°€ key ê°’ì„ ë°”ì´íŠ¸ ë°°ì—´ë¡œ ë³€í™˜í–ˆì„ ë•Œ ì‚¬ìš©ëëŠ”ì§€ ì•Œë ¤ì¤€ë‹¤. StringSerializer ëŠ” ë¬¸ìì—´ ë°ì´í„°ë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ì§ë ¬í™” ë„êµ¬ spring.kafka.producer.value-serializer Message ë¥¼ ì¹´í”„ì¹´ ë¸Œë¡œì»¤ì— ì „ì†¡í•  ë•Œ ì‚¬ìš©í•˜ëŠ” Serializer ì–´ë–¤ ì§ë ¬í™” í´ë˜ìŠ¤ê°€ value ê°’ì„ ë°”ì´íŠ¸ ë°°ì—´ë¡œ ë³€í™˜í–ˆì„ ë•Œ ì‚¬ìš©ëëŠ”ì§€ ì•Œë ¤ì¤€ë‹¤. StringSerializer ëŠ” ë¬¸ìì—´ ë°ì´í„°ë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ì§ë ¬í™” ë„êµ¬ application.yml spring: kafka: consumer: bootstrap-servers: localhost:9092 group-id: foo auto-offset-reset: earliest key-deserializer: org.apache.kafka.common.serialization.StringDeserializer value-deserializer: org.apache.kafka.common.serialization.StringDeserializer producer: bootstrap-servers: localhost:9092 key-serializer: org.apache.kafka.common.serialization.StringSerializer value-serializer: org.apache.kafka.common.serialization.StringSerializer Kafka Producer Producer ì—ì„œëŠ” KafkaTemplate ì„ ì´ìš©í•´ Kafka ë‚´ íŠ¹ì • Topic ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•œë‹¤. KafkaProducer.java @Service@RequiredArgsConstructorpublic class KafkaProducer &#123; private static final String TOPIC = &quot;exam&quot;; private final KafkaTemplate&lt;String, String&gt; kafkaTemplate; public void sendMessage(String message)&#123; System.out.println(String.format(&quot;Produce message : %s&quot;, message)); this.kafkaTemplate.send(TOPIC, message); &#125;&#125; KafkaController.java @RestController@RequestMapping(&quot;/kafka&quot;)public class KafkaController &#123; private final KafkaProducer producer; @Autowired KafkaController(KafkaProducer producer) &#123; this.producer = producer; &#125; @PostMapping public String sendMessage(@RequestParam(&quot;message&quot;) String message) &#123; this.producer.sendMessage(message); return &quot;success&quot;; &#125;&#125; Kafka Consumer @KafkaListener ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ Consumer ì„¤ì •ì„ í•´ì¤€ë‹¤. groupId : í•´ë‹¹ Consumer ê°€ ì†í•œ Consumer Group topics : í•´ë‹¹ Consumer ê°€ êµ¬ë…í•˜ëŠ” Topic KafkaConsumer.java @Servicepublic class KafkaConsumer &#123; @KafkaListener(topics = &quot;exam&quot;, groupId = &quot;foo&quot;) public void consume(String message) throws IOException&#123; System.out.println(String.format(&quot;Consumed message : %s&quot;, message)); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Kafka","slug":"Spring/Spring-Boot/Kafka","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Kafka/"}],"tags":[]},{"title":"ë°±ì¤€ 15650 - N ê³¼ M (2) - ìˆœì—´","slug":"algorithm/baekjoon/á„€á…§á†¼á„‹á…®á„‹á…´á„‰á…®/15650-Nê³¼M-cpp","date":"2022-02-13T12:10:40.000Z","updated":"2024-11-28T13:59:35.329Z","comments":true,"path":"2022/02/13/algorithm/baekjoon/á„€á…§á†¼á„‹á…®á„‹á…´á„‰á…®/15650-Nê³¼M-cpp/","link":"","permalink":"https://ckck803.github.io/2022/02/13/algorithm/baekjoon/%E1%84%80%E1%85%A7%E1%86%BC%E1%84%8B%E1%85%AE%E1%84%8B%E1%85%B4%E1%84%89%E1%85%AE/15650-N%EA%B3%BCM-cpp/","excerpt":"ë°±ì¤€ 15650 - N ê³¼ M (2) - ìˆœì—´ Post not found: algorithm/baekjoon/ê²½ìš°ì˜ìˆ˜/15649-Nê³¼M-cpp Post not found: algorithm/baekjoon/ê²½ìš°ì˜ìˆ˜/15650-Nê³¼M-cpp ë§í¬https://www.acmicpc.net/problem/2606 ë¬¸ì œ í’€ì´ ì£¼ì–´ì§„ N ê°œì—ì„œ M ê°œë¥¼ ë½‘ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ë‹¤ë£¨ëŠ” ì¡°í•© ë¬¸ì œ ë°±íŠ¸ë ˆí‚¹ ì„ ì´ìš©í•´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì¤¬ë‹¤. ë‹¤ë§Œ, ì¡°í•©ì€ ìˆœì„œì™€ ìƒê´€ ì—†ì´ ë½‘ì€ ìƒíƒœê°€ ê°™ìœ¼ë©´ ê°™ì€ Case ë¡œ ë¶„ë¥˜ê°€ ëœë‹¤. ë•Œë¬¸ì— í˜„ì¬ ë½‘ì€ ìœ„ì¹˜(idx) ì—ì„œ ì•ì— ìˆëŠ” ê²ƒë“¤ë§Œ ë½‘ê²Œ í•˜ë©´ ê°™ì€ ê²½ìš°ì˜ ìˆ˜ê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;iostream&gt;#include &lt;vector&gt;#define endl &#x27;\\n&#x27;using namespace std;vector&lt;int&gt; v;vector&lt;bool&gt; check;// idx : ìˆ˜ì—´ íƒìƒ‰ í˜„ì¬ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ê¸° ìœ„í•œ ë³€ìˆ˜// depth : ì¬ê·€ ë¬¸ì´ ëª‡ë²ˆ í˜¸ì¶œ ëëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ ë³€ìˆ˜// n : ìˆ˜ì—´ íƒìƒ‰ì˜ ë§ˆì§€ë§‰ ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ê°’// m : ì¬ê·€ ë¬¸ì„ ìµœëŒ€ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” íšŸìˆ˜void nCr(int idx, int depth, int n, int m) &#123; if (depth == m) &#123; for (int value : v) &#123; cout &lt;&lt; value &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return; &#125; for (int i = idx; i &lt; n; i++) &#123; if (check[i] == true) &#123; continue; &#125; check[i] = true; v[depth] = i + 1; nCr(i + 1, depth + 1, n, m); check[i] = false; &#125;&#125;int main(void) &#123; cin.tie(0); cout.tie(0); ios_base::sync_with_stdio(false); int n, m; cin &gt;&gt; n &gt;&gt; m; v = vector&lt;int&gt;(m); check = vector&lt;bool&gt;(n); nCr(0, 0, n, m); return 0;&#125;","text":"ë°±ì¤€ 15650 - N ê³¼ M (2) - ìˆœì—´ Post not found: algorithm/baekjoon/ê²½ìš°ì˜ìˆ˜/15649-Nê³¼M-cpp Post not found: algorithm/baekjoon/ê²½ìš°ì˜ìˆ˜/15650-Nê³¼M-cpp ë§í¬https://www.acmicpc.net/problem/2606 ë¬¸ì œ í’€ì´ ì£¼ì–´ì§„ N ê°œì—ì„œ M ê°œë¥¼ ë½‘ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ë‹¤ë£¨ëŠ” ì¡°í•© ë¬¸ì œ ë°±íŠ¸ë ˆí‚¹ ì„ ì´ìš©í•´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì¤¬ë‹¤. ë‹¤ë§Œ, ì¡°í•©ì€ ìˆœì„œì™€ ìƒê´€ ì—†ì´ ë½‘ì€ ìƒíƒœê°€ ê°™ìœ¼ë©´ ê°™ì€ Case ë¡œ ë¶„ë¥˜ê°€ ëœë‹¤. ë•Œë¬¸ì— í˜„ì¬ ë½‘ì€ ìœ„ì¹˜(idx) ì—ì„œ ì•ì— ìˆëŠ” ê²ƒë“¤ë§Œ ë½‘ê²Œ í•˜ë©´ ê°™ì€ ê²½ìš°ì˜ ìˆ˜ê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;iostream&gt;#include &lt;vector&gt;#define endl &#x27;\\n&#x27;using namespace std;vector&lt;int&gt; v;vector&lt;bool&gt; check;// idx : ìˆ˜ì—´ íƒìƒ‰ í˜„ì¬ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ê¸° ìœ„í•œ ë³€ìˆ˜// depth : ì¬ê·€ ë¬¸ì´ ëª‡ë²ˆ í˜¸ì¶œ ëëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ ë³€ìˆ˜// n : ìˆ˜ì—´ íƒìƒ‰ì˜ ë§ˆì§€ë§‰ ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ê°’// m : ì¬ê·€ ë¬¸ì„ ìµœëŒ€ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” íšŸìˆ˜void nCr(int idx, int depth, int n, int m) &#123; if (depth == m) &#123; for (int value : v) &#123; cout &lt;&lt; value &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return; &#125; for (int i = idx; i &lt; n; i++) &#123; if (check[i] == true) &#123; continue; &#125; check[i] = true; v[depth] = i + 1; nCr(i + 1, depth + 1, n, m); check[i] = false; &#125;&#125;int main(void) &#123; cin.tie(0); cout.tie(0); ios_base::sync_with_stdio(false); int n, m; cin &gt;&gt; n &gt;&gt; m; v = vector&lt;int&gt;(m); check = vector&lt;bool&gt;(n); nCr(0, 0, n, m); return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/Beakjoon/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"}],"tags":[]},{"title":"ë°±ì¤€ 15649 - N ê³¼ M (1) - ìˆœì—´","slug":"algorithm/baekjoon/á„€á…§á†¼á„‹á…®á„‹á…´á„‰á…®/15649-Nê³¼M-cpp","date":"2022-02-13T11:10:40.000Z","updated":"2024-11-28T13:59:35.255Z","comments":true,"path":"2022/02/13/algorithm/baekjoon/á„€á…§á†¼á„‹á…®á„‹á…´á„‰á…®/15649-Nê³¼M-cpp/","link":"","permalink":"https://ckck803.github.io/2022/02/13/algorithm/baekjoon/%E1%84%80%E1%85%A7%E1%86%BC%E1%84%8B%E1%85%AE%E1%84%8B%E1%85%B4%E1%84%89%E1%85%AE/15649-N%EA%B3%BCM-cpp/","excerpt":"ë°±ì¤€ 15649 - N ê³¼ M (1) Post not found: algorithm/baekjoon/ê²½ìš°ì˜ìˆ˜/15649-Nê³¼M-cpp Post not found: algorithm/baekjoon/ê²½ìš°ì˜ìˆ˜/15650-Nê³¼M-cpp ë§í¬https://www.acmicpc.net/problem/2606 ë¬¸ì œ í’€ì´ ì£¼ì–´ì§„ N ê°œì—ì„œ M ê°œë¥¼ ë½‘ì•„ ë‚˜ì—´í•˜ëŠ” ìˆœì—´ ë¬¸ì œ. ë°±íŠ¸ë˜í‚¹ ì„ ì´ìš©í•´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ìˆ˜ì—´ì˜ ê²½ìš°ì˜ ìˆ˜ ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤. check ë¥¼ ì´ìš©í•´ ë˜‘ê°™ì€ ìˆ«ìë¥¼ ì—¬ëŸ¬ ë²ˆ ë½‘ëŠ” ì¤‘ë³µ í–‰ìœ„ë¥¼ íŒë‹¨í•˜ê³  v ë°°ì—´ì„ í†µí•´ í•œ ìˆ˜ì—´ì´ ë§Œë“¤ì–´ì§€ë©´ ì¶œë ¥í•˜ë„ë¡ í•œë‹¤. v : ë½‘ì€ ìˆ«ìë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ë°°ì—´ check : í•´ë‹¹ ìˆ«ìê°€ ë½‘í˜”ëŠ”ì§€ íŒë‹¨í•˜ê¸° ìœ„í•œ ë°°ì—´ ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ","text":"ë°±ì¤€ 15649 - N ê³¼ M (1) Post not found: algorithm/baekjoon/ê²½ìš°ì˜ìˆ˜/15649-Nê³¼M-cpp Post not found: algorithm/baekjoon/ê²½ìš°ì˜ìˆ˜/15650-Nê³¼M-cpp ë§í¬https://www.acmicpc.net/problem/2606 ë¬¸ì œ í’€ì´ ì£¼ì–´ì§„ N ê°œì—ì„œ M ê°œë¥¼ ë½‘ì•„ ë‚˜ì—´í•˜ëŠ” ìˆœì—´ ë¬¸ì œ. ë°±íŠ¸ë˜í‚¹ ì„ ì´ìš©í•´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ìˆ˜ì—´ì˜ ê²½ìš°ì˜ ìˆ˜ ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤. check ë¥¼ ì´ìš©í•´ ë˜‘ê°™ì€ ìˆ«ìë¥¼ ì—¬ëŸ¬ ë²ˆ ë½‘ëŠ” ì¤‘ë³µ í–‰ìœ„ë¥¼ íŒë‹¨í•˜ê³  v ë°°ì—´ì„ í†µí•´ í•œ ìˆ˜ì—´ì´ ë§Œë“¤ì–´ì§€ë©´ ì¶œë ¥í•˜ë„ë¡ í•œë‹¤. v : ë½‘ì€ ìˆ«ìë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ë°°ì—´ check : í•´ë‹¹ ìˆ«ìê°€ ë½‘í˜”ëŠ”ì§€ íŒë‹¨í•˜ê¸° ìœ„í•œ ë°°ì—´ ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;iostream&gt;#include &lt;vector&gt;#define endl &#x27;\\n&#x27;using namespace std;vector&lt;int&gt; v;vector&lt;bool&gt; check;void dfs(int n, int m, int depth) &#123; if (m == depth) &#123; for (int value : v) &#123; cout &lt;&lt; value &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return; &#125; for (int i = 0; i &lt; n; i++) &#123; if (check[i] == true) &#123; continue; &#125; check[i] = true; v[depth] = i + 1; dfs(n, m, depth + 1); check[i] = false; &#125;&#125;int main(void) &#123; cin.tie(0); cout.tie(0); ios_base::sync_with_stdio(false); int N, M; cin &gt;&gt; N &gt;&gt; M; v = vector&lt;int&gt;(M); check = vector&lt;bool&gt;(N); dfs(N, M, 0);&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/Beakjoon/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"}],"tags":[]},{"title":"SQL injection","slug":"computer-science/network/security/sql-injection","date":"2022-02-12T16:16:32.000Z","updated":"2024-02-18T16:19:54.519Z","comments":true,"path":"2022/02/13/computer-science/network/security/sql-injection/","link":"","permalink":"https://ckck803.github.io/2022/02/13/computer-science/network/security/sql-injection/","excerpt":"SQL injection ì´ë€ ë³´ì•ˆìƒì˜ í—ˆì ì„ ì´ìš©í•´ ì‚¬ìš©ìê°€ ì •ì˜í•œ SQL ë¬¸ì™¸ ì¡°ì‘ëœ SQL ì„ ì£¼ì…í•˜ê³  ì‹¤í–‰ì‹œì¼œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê³µê²© ê¸°ë²•ì„ ì˜ë¯¸í•œë‹¤. Error Based SQL injection ë…¼ë¦¬ì  ì—ëŸ¬ë¥¼ ì´ìš©í•œ SQL injection ì˜ëª»ëœ SQL ì„ ì´ìš©í•´ ê³ ì˜ë¡œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œëŠ” ê³µê²© ê¸°ë²•ì´ë‹¤. ì˜ˆì™¸ë¡œ ë˜ì €ì§„ Message ë¥¼ í†µí•´ í…Œì´ë¸” ëª…ê³¼ ì»¬ëŸ¼ê³¼ ê°™ì€ í…Œì´ë¸” ì •ë³´ ë¥¼ ì–»ì–´ë‚¼ ìˆ˜ ìˆë‹¤. SQL êµ¬ë¬¸ ì •ë³´ë¥¼ ë³€ê²½í•´ ì‚¬ìš©ì ì¸ì¦ì„ ìš°íšŒí•´ ì ‘ì†í•  ìˆ˜ ìˆë‹¤. Union Based SQL injection Union ëª…ë ¹ì„ ì´ìš©í•œ SQL injection ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ì¿¼ë¦¬ì™€ ì •ë³´ë¥¼ íƒˆì·¨í•˜ê¸° ìœ„í•œ ì¿¼ë¦¬ë¬¸ì„ Union ì—°ì‚°ìë¥¼ í†µí•´ ì‹¤í–‰ì‹œí‚¨ë‹¤. ë°ì´í„° í˜•ì‹ê³¼ ì»¬ëŸ¼ ìˆ˜ê°€ ì¼ì¹˜í•˜ë©´ Union ì—°ì‚°ìë¥¼ ì´ìš©í•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. SELECT uid FROM user_table WHERE uid=&#x27;&#x27; UNION SELECT upw FROM user_table WHERE uid=&#x27;admin&#x27; -- and...","text":"SQL injection ì´ë€ ë³´ì•ˆìƒì˜ í—ˆì ì„ ì´ìš©í•´ ì‚¬ìš©ìê°€ ì •ì˜í•œ SQL ë¬¸ì™¸ ì¡°ì‘ëœ SQL ì„ ì£¼ì…í•˜ê³  ì‹¤í–‰ì‹œì¼œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê³µê²© ê¸°ë²•ì„ ì˜ë¯¸í•œë‹¤. Error Based SQL injection ë…¼ë¦¬ì  ì—ëŸ¬ë¥¼ ì´ìš©í•œ SQL injection ì˜ëª»ëœ SQL ì„ ì´ìš©í•´ ê³ ì˜ë¡œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œëŠ” ê³µê²© ê¸°ë²•ì´ë‹¤. ì˜ˆì™¸ë¡œ ë˜ì €ì§„ Message ë¥¼ í†µí•´ í…Œì´ë¸” ëª…ê³¼ ì»¬ëŸ¼ê³¼ ê°™ì€ í…Œì´ë¸” ì •ë³´ ë¥¼ ì–»ì–´ë‚¼ ìˆ˜ ìˆë‹¤. SQL êµ¬ë¬¸ ì •ë³´ë¥¼ ë³€ê²½í•´ ì‚¬ìš©ì ì¸ì¦ì„ ìš°íšŒí•´ ì ‘ì†í•  ìˆ˜ ìˆë‹¤. Union Based SQL injection Union ëª…ë ¹ì„ ì´ìš©í•œ SQL injection ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ì¿¼ë¦¬ì™€ ì •ë³´ë¥¼ íƒˆì·¨í•˜ê¸° ìœ„í•œ ì¿¼ë¦¬ë¬¸ì„ Union ì—°ì‚°ìë¥¼ í†µí•´ ì‹¤í–‰ì‹œí‚¨ë‹¤. ë°ì´í„° í˜•ì‹ê³¼ ì»¬ëŸ¼ ìˆ˜ê°€ ì¼ì¹˜í•˜ë©´ Union ì—°ì‚°ìë¥¼ ì´ìš©í•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. SELECT uid FROM user_table WHERE uid=&#x27;&#x27; UNION SELECT upw FROM user_table WHERE uid=&#x27;admin&#x27; -- and... ì°¸ê³ https://www.baeldung.com/sql-injection ë°©ì–´í•˜ëŠ” ë°©ë²• Parameter Binding (preparestatement ì‚¬ìš©) ìˆœìˆ˜í•œ Query String ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Parameter Bindling ì„ ì‚¬ìš©í•˜ë©´ í”¼í•  ìˆ˜ ìˆë‹¤. mybatisì—ì„œ $ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  #ì„ ì‚¬ìš© SQL ê´€ë ¨ ì—ëŸ¬ê°€ ë°œìƒí–ˆìœ¼ë¥´ ë•Œ í•´ë‹¹ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ì§€ ì•Šë„ë¡ í•œë‹¤. Spring JPA ì—ì„œì˜ SQL injection ê³µê²©Request Parameter ì— &#39; or 1&#39;=&#39;1 ì„ ë§ ë¶™ì—¬ ë³´ë‚´ê²Œ ë˜ë©´ ì„œë²„ì— ì €ì¥ëœ ëª¨ë“  íšŒì› ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. http://localhost:8080/accounts?customerId=abc%27%20or%20%271%27=%271 ì €ì¥ëœ íšŒì› ì •ë³´@PostConstructpublic void init()&#123; Account account1 = Account.builder() .customerId(&quot;account1&quot;) .accNumber(&quot;010-1111-1111&quot;) .build(); Account account2 = Account.builder() .customerId(&quot;account2&quot;) .accNumber(&quot;010-2222-2222&quot;) .build(); Account account3 = Account.builder() .customerId(&quot;account3&quot;) .accNumber(&quot;010-3333-3333&quot;) .build(); accountRepository.saveAccount(account1); accountRepository.saveAccount(account2); accountRepository.saveAccount(account3);&#125; ControllercustomerId íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ ë°ì´í„°ë¥¼ ì´ìš©í•´ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ëœ íšŒì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ ì˜¤ë„ë¡ í•œë‹¤. @GetMapping(&quot;/accounts&quot;)public List&lt;AccountDTO&gt; retrieveAccount(@RequestParam(&quot;customerId&quot;) String param)&#123; log.info(&quot;Param = &#123;&#125;&quot;, param); List&lt;AccountDTO&gt; accountDTOS = accountRepository.unsafeJpaFindAccountsByCustomerId(param); return accountDTOS;&#125; Repository Controller ì—ì„œ ë„˜ê²¨ì¤€ customerId ë¥¼ ì´ìš©í•´ SQL ì„ ì‘ì„±í•˜ê³  ì‘ì„±ëœ SQL ì„ ì´ìš©í•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ íšŒì› ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. Parameter ë¥¼ ë°”ë¡œ ë°›ì•„ SQL ì„ ìƒì„±í•˜ëŠ” ì´ ë¶€ë¶„ì—ì„œ SQL Injection ë¬¸ì œê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. public List&lt;AccountDTO&gt; unsafeJpaFindAccountsByCustomerId(String customerId) &#123; // ì§ì ‘ ì „ë‹¬ëœ Parameter ë¥¼ ì´ìš©í•´ ìƒì„±í•˜ëŠ” ë¡œì§ì´ SQL Injection ì˜ ì›ì¸ì´ëœë‹¤. String jql = &quot;select a from Account a where a.customerId = &#x27;&quot; + customerId + &quot;&#x27;&quot;; log.info(&quot;Query = &#123;&#125;&quot;, jql); TypedQuery&lt;Account&gt; q = em.createQuery(jql, Account.class); return q.getResultList() .stream() .map(a -&gt; AccountDTO.builder() .accNumber(a.getAccNumber()) .customerId(a.getCustomerId()) .build()) .collect(Collectors.toList());&#125; ë¡œê·¸ë¡œê·¸ë¥¼ í™•ì¸í•´ ë³´ë©´ Parameter ë¡œ ê°™ì´ ë„˜ì–´ì˜¨ &#39; or 1&#39;=&#39;1 ì´ ë¶™ì–´ì„œ ì¿¼ë¦¬ë¬¸ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.ìƒì„±ëœ ì¿¼ë¦¬ê°€ ìˆ˜í–‰ë  ê²½ìš° ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ëœ ëª¨ë“  íšŒì› ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê²Œ ëœë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ëª¨ë“  íšŒì› ì •ë³´ê°€ ë°˜í™˜ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"Security","slug":"CS/Network/Security","permalink":"https://ckck803.github.io/categories/CS/Network/Security/"}],"tags":[]},{"title":"ë°±ì¤€ 1012 - ìœ ê¸°ë† ë°°ì¶” (Python)","slug":"algorithm/baekjoon/BFS/1012-ìœ ê¸°ë†ë°°ì¶”-python","date":"2022-02-12T11:10:40.000Z","updated":"2024-11-28T13:59:35.603Z","comments":true,"path":"2022/02/12/algorithm/baekjoon/BFS/1012-ìœ ê¸°ë†ë°°ì¶”-python/","link":"","permalink":"https://ckck803.github.io/2022/02/12/algorithm/baekjoon/BFS/1012-%EC%9C%A0%EA%B8%B0%EB%86%8D%EB%B0%B0%EC%B6%94-python/","excerpt":"ë°±ì¤€ 1012 - ìœ ê¸°ë† ë°°ì¶” (Python)ë§í¬https://www.acmicpc.net/problem/2606 ì „ì²´ ì†ŒìŠ¤ ì½”ë“œdef bfs(y, x): q = [] q.append([y, x]) check[y][x] = True while q: cntY, cntX = q.pop() for i in range(4): ny = cntY + dy[i] nx = cntX + dx[i] if 0 &gt; ny or ny &gt;= col or 0 &gt; nx or nx &gt;= row: continue if check[ny][nx] == False and field[ny][nx] == 1: q.append([ny, nx]) check[ny][nx] = Truetest_case = int(input())row = 0col = 0k = 0field = []check = []dy = [1, -1, 0, 0]dx = [0, 0, 1, -1]for t in range(test_case): row, col, k = map(int, input().split()) field = [[0] * row for _ in range(col)] check = [[False] * row for _ in range(col)] count = 0 for i in range(k): x, y = map(int, input().split()) field[y][x] = 1 for i in range(col): for j in range(row): if check[i][j] == False and field[i][j] == 1: count += 1 bfs(i, j) print(count)","text":"ë°±ì¤€ 1012 - ìœ ê¸°ë† ë°°ì¶” (Python)ë§í¬https://www.acmicpc.net/problem/2606 ì „ì²´ ì†ŒìŠ¤ ì½”ë“œdef bfs(y, x): q = [] q.append([y, x]) check[y][x] = True while q: cntY, cntX = q.pop() for i in range(4): ny = cntY + dy[i] nx = cntX + dx[i] if 0 &gt; ny or ny &gt;= col or 0 &gt; nx or nx &gt;= row: continue if check[ny][nx] == False and field[ny][nx] == 1: q.append([ny, nx]) check[ny][nx] = Truetest_case = int(input())row = 0col = 0k = 0field = []check = []dy = [1, -1, 0, 0]dx = [0, 0, 1, -1]for t in range(test_case): row, col, k = map(int, input().split()) field = [[0] * row for _ in range(col)] check = [[False] * row for _ in range(col)] count = 0 for i in range(k): x, y = map(int, input().split()) field[y][x] = 1 for i in range(col): for j in range(row): if check[i][j] == False and field[i][j] == 1: count += 1 bfs(i, j) print(count)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"BFS","slug":"Develop/Beakjoon/BFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/BFS/"}],"tags":[]},{"title":"ë°±ì¤€ 2606 - ë°”ì´ëŸ¬ìŠ¤ (Python)","slug":"algorithm/baekjoon/BFS/2606-ë°”ì´ëŸ¬ìŠ¤-python","date":"2022-02-12T11:10:40.000Z","updated":"2024-11-28T13:59:36.229Z","comments":true,"path":"2022/02/12/algorithm/baekjoon/BFS/2606-ë°”ì´ëŸ¬ìŠ¤-python/","link":"","permalink":"https://ckck803.github.io/2022/02/12/algorithm/baekjoon/BFS/2606-%EB%B0%94%EC%9D%B4%EB%9F%AC%EC%8A%A4-python/","excerpt":"ë°±ì¤€ 2606 - ë°”ì´ëŸ¬ìŠ¤ (Python)ë§í¬https://www.acmicpc.net/problem/2606 ì „ì²´ ì†ŒìŠ¤ ì½”ë“œdef bfs(start_node): q = [] q.append(start_node) check[start_node] = True count = 0 while q: node = q.pop(0) for i in range(1, node_num+1): if check[i] == False and field[node][i] == 1: q.append(i) count += 1 check[i] = True return countnode_num = int(input())line_num = int(input())field = [[0]*(node_num+1)for i in range(node_num+1)]check = [False]*(node_num+1)for i in range(line_num): a, b = map(int, input().split()) field[a][b] = 1 field[b][a] = 1print(bfs(1))","text":"ë°±ì¤€ 2606 - ë°”ì´ëŸ¬ìŠ¤ (Python)ë§í¬https://www.acmicpc.net/problem/2606 ì „ì²´ ì†ŒìŠ¤ ì½”ë“œdef bfs(start_node): q = [] q.append(start_node) check[start_node] = True count = 0 while q: node = q.pop(0) for i in range(1, node_num+1): if check[i] == False and field[node][i] == 1: q.append(i) count += 1 check[i] = True return countnode_num = int(input())line_num = int(input())field = [[0]*(node_num+1)for i in range(node_num+1)]check = [False]*(node_num+1)for i in range(line_num): a, b = map(int, input().split()) field[a][b] = 1 field[b][a] = 1print(bfs(1))","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"BFS","slug":"Develop/Beakjoon/BFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/BFS/"}],"tags":[]},{"title":"ë°±ì¤€ 2606 - ë‹¨ì§€ë²ˆí˜¸ ë¶™ì´ê¸° (Python)","slug":"algorithm/baekjoon/BFS/2667-ë‹¨ì§€ë²ˆí˜¸ë¶™ì´ê¸°-python","date":"2022-02-12T11:10:40.000Z","updated":"2024-11-28T13:59:35.827Z","comments":true,"path":"2022/02/12/algorithm/baekjoon/BFS/2667-ë‹¨ì§€ë²ˆí˜¸ë¶™ì´ê¸°-python/","link":"","permalink":"https://ckck803.github.io/2022/02/12/algorithm/baekjoon/BFS/2667-%EB%8B%A8%EC%A7%80%EB%B2%88%ED%98%B8%EB%B6%99%EC%9D%B4%EA%B8%B0-python/","excerpt":"ë°±ì¤€ 2667 - ë‹¨ì§€ë²ˆí˜¸ ë¶™ì´ê¸° (Python)ë§í¬https://www.acmicpc.net/problem/2667 ì „ì²´ ì†ŒìŠ¤ ì½”ë“œdef bfs(y, x): q = [] q.append([y, x]) check[y][x] = True count = 0 while len(q) &gt; 0: count += 1 cntY = q[0][0] cntX = q[0][1] q.pop(0) for i in range(4): ny = cntY + dy[i] nx = cntX + dx[i] if 0 &gt; ny or ny &gt;= n or 0 &gt; nx or nx &gt;= n: continue if check[ny][nx] == False and field[ny][nx] != 0: check[ny][nx] = True q.append([ny, nx]) values.append(count)dy = [1, -1, 0, 0]dx = [0, 0, 1, -1]n = int(input())color = 0values = []check = [[False] * n for i in range(n)]field = [[0] * n for i in range(n)]for i in range(n): line = input() for j in range(len(line)): field[i][j] = int(line[j])for i in range(n): for j in range(n): if check[i][j] == False and field[i][j] != 0: color += 1 bfs(i, j)values.sort()print(color)for i in values: print(i)","text":"ë°±ì¤€ 2667 - ë‹¨ì§€ë²ˆí˜¸ ë¶™ì´ê¸° (Python)ë§í¬https://www.acmicpc.net/problem/2667 ì „ì²´ ì†ŒìŠ¤ ì½”ë“œdef bfs(y, x): q = [] q.append([y, x]) check[y][x] = True count = 0 while len(q) &gt; 0: count += 1 cntY = q[0][0] cntX = q[0][1] q.pop(0) for i in range(4): ny = cntY + dy[i] nx = cntX + dx[i] if 0 &gt; ny or ny &gt;= n or 0 &gt; nx or nx &gt;= n: continue if check[ny][nx] == False and field[ny][nx] != 0: check[ny][nx] = True q.append([ny, nx]) values.append(count)dy = [1, -1, 0, 0]dx = [0, 0, 1, -1]n = int(input())color = 0values = []check = [[False] * n for i in range(n)]field = [[0] * n for i in range(n)]for i in range(n): line = input() for j in range(len(line)): field[i][j] = int(line[j])for i in range(n): for j in range(n): if check[i][j] == False and field[i][j] != 0: color += 1 bfs(i, j)values.sort()print(color)for i in values: print(i)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"BFS","slug":"Develop/Beakjoon/BFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/BFS/"}],"tags":[]},{"title":"MySQL - ì‚¬ìš©ì ìƒì„±","slug":"database/mysql/create-user","date":"2022-01-26T11:10:40.000Z","updated":"2024-11-28T13:59:38.149Z","comments":true,"path":"2022/01/26/database/mysql/create-user/","link":"","permalink":"https://ckck803.github.io/2022/01/26/database/mysql/create-user/","excerpt":"MySQL - ì‚¬ìš©ì ìƒì„±show databases; use mysql; ê³„ì • ìƒì„± ì¿¼ë¦¬-- ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•  ê³„ì • ìƒì„±CREATE USER &#x27;ê³„ì • ì•„ì´ë””&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;ë¹„ë°€ë²ˆí˜¸&#x27;;-- ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•  ê³„ì • ìƒì„±CREATE USER &#x27;ê³„ì • ì•„ì´ë””&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;ë¹„ë°€ë²ˆí˜¸&#x27;; ê¶Œí•œ ë¶€ì—¬-- GRANT ALL PRIVILEGES ON *.* TO &#x27;ê³„ì • ì•„ì´ë””&#x27;@&#x27;%&#x27;;flush privileges;quit$$ CREATE DATABASE study_db default CHARACTER SET UTF8;","text":"MySQL - ì‚¬ìš©ì ìƒì„±show databases; use mysql; ê³„ì • ìƒì„± ì¿¼ë¦¬-- ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•  ê³„ì • ìƒì„±CREATE USER &#x27;ê³„ì • ì•„ì´ë””&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;ë¹„ë°€ë²ˆí˜¸&#x27;;-- ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•  ê³„ì • ìƒì„±CREATE USER &#x27;ê³„ì • ì•„ì´ë””&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;ë¹„ë°€ë²ˆí˜¸&#x27;; ê¶Œí•œ ë¶€ì—¬-- GRANT ALL PRIVILEGES ON *.* TO &#x27;ê³„ì • ì•„ì´ë””&#x27;@&#x27;%&#x27;;flush privileges;quit$$ CREATE DATABASE study_db default CHARACTER SET UTF8;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"MySQL","slug":"Develop/MySQL","permalink":"https://ckck803.github.io/categories/Develop/MySQL/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì–‘ê¶ ëŒ€íšŒ (Cpp)","slug":"algorithm/programmers/ê²½ìš°ì˜ìˆ˜/92342-ì–‘ê¶ëŒ€íšŒ-cpp","date":"2022-01-21T11:10:40.000Z","updated":"2024-11-28T13:59:32.856Z","comments":true,"path":"2022/01/21/algorithm/programmers/ê²½ìš°ì˜ìˆ˜/92342-ì–‘ê¶ëŒ€íšŒ-cpp/","link":"","permalink":"https://ckck803.github.io/2022/01/21/algorithm/programmers/%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98/92342-%EC%96%91%EA%B6%81%EB%8C%80%ED%9A%8C-cpp/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/92342 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Python ìœ ì˜ ì‚¬í•­ í™”ì‚´ì„ ë§ì¶˜ ê°œìˆ˜ë¥¼ ì €ì¥í•˜ê³  ì •ë ¬í•˜ëŠ”ë° ìˆì–´ì„œ ì£¼ì˜í•´ì•¼ í•œë‹¤. ì •ë ¬ì— ëŒ€í•œ ê°€ì¤‘ì¹˜ê°€ ì•ìë¦¬ê°€ ì•„ë‹Œ ë’·ìë¦¬ ì— ìˆìœ¼ë¯€ë¡œ ê°’ì„ ì €ì¥í•  ë•Œ ë’¤ì§‘ì–´ì„œ ì €ì¥í•œ í›„ ë‚´ë¦¼ ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•´ ê°€ì¥ í° ê°’ì„ ê°€ì ¸ì™€ í•´ë‹¹ ê°’ì„ ë’¤ì§‘ìœ¼ë©´ ê°€ì¥ ë‚®ì€ ì ìˆ˜ë¥¼ ë§ì´ ë§ì¶˜ ìˆœì„œëŒ€ë¡œ ì •ë ¬ëœ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. #include &lt;bits/stdc++.h&gt;using namespace std;int max_diff = -1;vector&lt;string&gt; scores;int getValue(int idx) &#123; return 10 - idx;&#125;void calScore(vector&lt;int&gt; apeach, vector&lt;int&gt; ryan) &#123; int diff = 0; int total_apeach = 0; int total_ryan = 0; for (int i = 0; i &lt; 11; i++) &#123; if (apeach[i] == 0 &amp;&amp; ryan[i] == 0) &#123; continue; &#125; if (apeach[i] &gt;= ryan[i]) &#123; total_apeach += getValue(i); &#125; else &#123; total_ryan += getValue(i); &#125; &#125; if (total_ryan &gt; total_apeach) &#123; diff = total_ryan - total_apeach; &#125; else &#123; return; &#125; string str; for (int i : ryan) &#123; str += i + &#x27;0&#x27;; &#125; reverse(str.begin(), str.end()); if (diff &gt; max_diff) &#123; max_diff = diff; scores.clear(); scores.push_back(str); &#125; else if (diff == max_diff) &#123; scores.push_back(str); &#125;&#125;void back_tracking(int depth, int idx, int n, vector&lt;int&gt;&amp; apeach, vector&lt;int&gt;&amp; ryan) &#123; if (idx &gt; 10) &#123; return; &#125; if (depth == n) &#123; calScore(apeach, ryan); return; &#125; ryan[idx] += 1; back_tracking(depth + 1, idx, n, apeach, ryan); ryan[idx] -= 1; back_tracking(depth, idx + 1, n, apeach, ryan);&#125;vector&lt;int&gt; solution(int n, vector&lt;int&gt; info) &#123; vector&lt;int&gt; answer; vector&lt;int&gt; ryan = vector&lt;int&gt;(11, 0); back_tracking(0, 0, n, info, ryan); if (max_diff == -1) &#123; answer.push_back(-1); &#125; else &#123; sort(scores.begin(), scores.end(), greater&lt;string&gt;()); string str = scores[0]; reverse(str.begin(), str.end()); for (int i = 0; i &lt; str.size(); i++) &#123; answer.push_back(str[i] - &#x27;0&#x27;); &#125; &#125; return answer;&#125;","text":"https://programmers.co.kr/learn/courses/30/lessons/92342 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Python ìœ ì˜ ì‚¬í•­ í™”ì‚´ì„ ë§ì¶˜ ê°œìˆ˜ë¥¼ ì €ì¥í•˜ê³  ì •ë ¬í•˜ëŠ”ë° ìˆì–´ì„œ ì£¼ì˜í•´ì•¼ í•œë‹¤. ì •ë ¬ì— ëŒ€í•œ ê°€ì¤‘ì¹˜ê°€ ì•ìë¦¬ê°€ ì•„ë‹Œ ë’·ìë¦¬ ì— ìˆìœ¼ë¯€ë¡œ ê°’ì„ ì €ì¥í•  ë•Œ ë’¤ì§‘ì–´ì„œ ì €ì¥í•œ í›„ ë‚´ë¦¼ ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•´ ê°€ì¥ í° ê°’ì„ ê°€ì ¸ì™€ í•´ë‹¹ ê°’ì„ ë’¤ì§‘ìœ¼ë©´ ê°€ì¥ ë‚®ì€ ì ìˆ˜ë¥¼ ë§ì´ ë§ì¶˜ ìˆœì„œëŒ€ë¡œ ì •ë ¬ëœ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. #include &lt;bits/stdc++.h&gt;using namespace std;int max_diff = -1;vector&lt;string&gt; scores;int getValue(int idx) &#123; return 10 - idx;&#125;void calScore(vector&lt;int&gt; apeach, vector&lt;int&gt; ryan) &#123; int diff = 0; int total_apeach = 0; int total_ryan = 0; for (int i = 0; i &lt; 11; i++) &#123; if (apeach[i] == 0 &amp;&amp; ryan[i] == 0) &#123; continue; &#125; if (apeach[i] &gt;= ryan[i]) &#123; total_apeach += getValue(i); &#125; else &#123; total_ryan += getValue(i); &#125; &#125; if (total_ryan &gt; total_apeach) &#123; diff = total_ryan - total_apeach; &#125; else &#123; return; &#125; string str; for (int i : ryan) &#123; str += i + &#x27;0&#x27;; &#125; reverse(str.begin(), str.end()); if (diff &gt; max_diff) &#123; max_diff = diff; scores.clear(); scores.push_back(str); &#125; else if (diff == max_diff) &#123; scores.push_back(str); &#125;&#125;void back_tracking(int depth, int idx, int n, vector&lt;int&gt;&amp; apeach, vector&lt;int&gt;&amp; ryan) &#123; if (idx &gt; 10) &#123; return; &#125; if (depth == n) &#123; calScore(apeach, ryan); return; &#125; ryan[idx] += 1; back_tracking(depth + 1, idx, n, apeach, ryan); ryan[idx] -= 1; back_tracking(depth, idx + 1, n, apeach, ryan);&#125;vector&lt;int&gt; solution(int n, vector&lt;int&gt; info) &#123; vector&lt;int&gt; answer; vector&lt;int&gt; ryan = vector&lt;int&gt;(11, 0); back_tracking(0, 0, n, info, ryan); if (max_diff == -1) &#123; answer.push_back(-1); &#125; else &#123; sort(scores.begin(), scores.end(), greater&lt;string&gt;()); string str = scores[0]; reverse(str.begin(), str.end()); for (int i = 0; i &lt; str.size(); i++) &#123; answer.push_back(str[i] - &#x27;0&#x27;); &#125; &#125; return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"},{"name":"ì¤‘ë³µ ìˆœì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜/ì¤‘ë³µ-ìˆœì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/%EC%A4%91%EB%B3%B5-%EC%88%9C%EC%97%B4/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - Kì§„ìˆ˜ì—ì„œ ì†Œìˆ˜ êµ¬í•˜ê¸° Python","slug":"algorithm/programmers/string/92335-kì§„ìˆ˜ì—ì„œì†Œìˆ˜êµ¬í•˜ê¸°-python","date":"2022-01-19T11:10:40.000Z","updated":"2024-11-28T13:59:33.536Z","comments":true,"path":"2022/01/19/algorithm/programmers/string/92335-kì§„ìˆ˜ì—ì„œì†Œìˆ˜êµ¬í•˜ê¸°-python/","link":"","permalink":"https://ckck803.github.io/2022/01/19/algorithm/programmers/string/92335-k%EC%A7%84%EC%88%98%EC%97%90%EC%84%9C%EC%86%8C%EC%88%98%EA%B5%AC%ED%95%98%EA%B8%B0-python/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/92335 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - Kì§„ìˆ˜ì—ì„œ ì†Œìˆ˜ êµ¬í•˜ê¸° Python def is_prime(value): if value &lt;= 1: return False for i in range(2, int(value**0.5)+1): if value % i == 0: return False return Truedef solution(n, k): answer = 0 str_value = &#x27;&#x27; stack = [] while n &gt; 0: stack.append(n % k) n = n//k while len(stack) &gt; 0: str_value += str(stack.pop()) sub_strs = str_value.split(&#x27;0&#x27;) for i in sub_strs: if i == &#x27;&#x27;: continue if is_prime(int(i)): answer += 1 return answer","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/92335 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - Kì§„ìˆ˜ì—ì„œ ì†Œìˆ˜ êµ¬í•˜ê¸° Python def is_prime(value): if value &lt;= 1: return False for i in range(2, int(value**0.5)+1): if value % i == 0: return False return Truedef solution(n, k): answer = 0 str_value = &#x27;&#x27; stack = [] while n &gt; 0: stack.append(n % k) n = n//k while len(stack) &gt; 0: str_value += str(stack.pop()) sub_strs = str_value.split(&#x27;0&#x27;) for i in sub_strs: if i == &#x27;&#x27;: continue if is_prime(int(i)): answer += 1 return answer","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ë¬¸ìì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì£¼ì°¨ ìš”ê¸ˆ ê³„ì‚°","slug":"algorithm/programmers/string/92341-ì£¼ì°¨ìš”ê¸ˆê³„ì‚°-python","date":"2022-01-19T11:10:40.000Z","updated":"2024-11-28T13:59:33.757Z","comments":true,"path":"2022/01/19/algorithm/programmers/string/92341-ì£¼ì°¨ìš”ê¸ˆê³„ì‚°-python/","link":"","permalink":"https://ckck803.github.io/2022/01/19/algorithm/programmers/string/92341-%EC%A3%BC%EC%B0%A8%EC%9A%94%EA%B8%88%EA%B3%84%EC%82%B0-python/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/92341 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì£¼ì°¨ ìš”ê¸ˆ ê³„ì‚° import mathlimit = 23*60 + 59def time_to_minute(time): times = list(map(int, time.split(&#x27;:&#x27;))) return times[0] * 60 + times[1]def calCost(base_time, base_fee, per_time, per_fee, interval): if base_time &gt; interval: return base_fee return base_fee + math.ceil((interval-base_time)/per_time)*per_feedef solution(fees, records): answer = [] fees = list(map(int, fees)) base_time = fees[0] base_fee = fees[1] per_time = fees[2] per_fee = fees[3] dict = &#123;&#125; time_dict = &#123;&#125; fee_dict = &#123;&#125; for line in records: words = line.split(&#x27; &#x27;) time = time_to_minute(words[0]) car_number = words[1] in_out = words[2] if in_out == &#x27;IN&#x27;: dict[car_number] = [time] else: dict[car_number].append(time) in_out_times = dict[car_number] if car_number in time_dict: time_dict[car_number] += (in_out_times[1] - in_out_times[0]) else: time_dict[car_number] = (in_out_times[1] - in_out_times[0]) for key, value in dict.items(): if len(value) == 1: if key in time_dict: time_dict[key] += (limit - value[0]) else: time_dict[key] = (limit - value[0]) for key, value in time_dict.items(): fee = calCost(base_time, base_fee, per_time, per_fee, value) if key in fee_dict: fee_dict[key] += fee else: fee_dict[key] = fee soredDict = sorted(fee_dict.items()) for value in soredDict: answer.append(value[1]) return answer","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/92341 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì£¼ì°¨ ìš”ê¸ˆ ê³„ì‚° import mathlimit = 23*60 + 59def time_to_minute(time): times = list(map(int, time.split(&#x27;:&#x27;))) return times[0] * 60 + times[1]def calCost(base_time, base_fee, per_time, per_fee, interval): if base_time &gt; interval: return base_fee return base_fee + math.ceil((interval-base_time)/per_time)*per_feedef solution(fees, records): answer = [] fees = list(map(int, fees)) base_time = fees[0] base_fee = fees[1] per_time = fees[2] per_fee = fees[3] dict = &#123;&#125; time_dict = &#123;&#125; fee_dict = &#123;&#125; for line in records: words = line.split(&#x27; &#x27;) time = time_to_minute(words[0]) car_number = words[1] in_out = words[2] if in_out == &#x27;IN&#x27;: dict[car_number] = [time] else: dict[car_number].append(time) in_out_times = dict[car_number] if car_number in time_dict: time_dict[car_number] += (in_out_times[1] - in_out_times[0]) else: time_dict[car_number] = (in_out_times[1] - in_out_times[0]) for key, value in dict.items(): if len(value) == 1: if key in time_dict: time_dict[key] += (limit - value[0]) else: time_dict[key] = (limit - value[0]) for key, value in time_dict.items(): fee = calCost(base_time, base_fee, per_time, per_fee, value) if key in fee_dict: fee_dict[key] += fee else: fee_dict[key] = fee soredDict = sorted(fee_dict.items()) for value in soredDict: answer.append(value[1]) return answer","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê³  ê²°ê³¼ ë°›ê¸° Cpp","slug":"algorithm/programmers/string/92334-ì‹ ê³ ê²°ê³¼ë°›ê¸°-cpp","date":"2022-01-17T11:10:40.000Z","updated":"2024-11-28T13:59:33.021Z","comments":true,"path":"2022/01/17/algorithm/programmers/string/92334-ì‹ ê³ ê²°ê³¼ë°›ê¸°-cpp/","link":"","permalink":"https://ckck803.github.io/2022/01/17/algorithm/programmers/string/92334-%EC%8B%A0%EA%B3%A0%EA%B2%B0%EA%B3%BC%EB%B0%9B%EA%B8%B0-cpp/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/92334 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê³  ê²°ê³¼ ë°›ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê³  ê²°ê³¼ ë°›ê¸° Python #include &lt;bits/stdc++.h&gt;using namespace std;vector&lt;string&gt; split(string line) &#123; vector&lt;string&gt; v; int point = 0; for (int i = 0; i &lt; line.size(); i++) &#123; if (line[i] == &#x27; &#x27;) &#123; point = i; break; &#125; &#125; v.push_back(line.substr(0, point)); v.push_back(line.substr(point + 1)); return v;&#125;vector&lt;int&gt; solution(vector&lt;string&gt; id_list, vector&lt;string&gt; report, int k) &#123; vector&lt;int&gt; answer = vector&lt;int&gt;(id_list.size(), 0); map&lt;string, set&lt;string&gt;&gt; m; for (string line : report) &#123; vector&lt;string&gt; v = split(line); string id = v[0]; string report_id = v[1]; m[v[1]].insert(v[0]); &#125; for (auto iter = m.begin(); iter != m.end(); iter++) &#123; if (iter-&gt;second.size() &gt;= k) &#123; set&lt;string&gt;&amp; s = iter-&gt;second; for (auto s_iter = s.begin(); s_iter != s.end(); s_iter++) &#123; int index = find(id_list.begin(), id_list.end(), *s_iter) - id_list.begin(); answer[index]++; &#125; &#125; &#125; return answer;&#125;","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/92334 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê³  ê²°ê³¼ ë°›ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê³  ê²°ê³¼ ë°›ê¸° Python #include &lt;bits/stdc++.h&gt;using namespace std;vector&lt;string&gt; split(string line) &#123; vector&lt;string&gt; v; int point = 0; for (int i = 0; i &lt; line.size(); i++) &#123; if (line[i] == &#x27; &#x27;) &#123; point = i; break; &#125; &#125; v.push_back(line.substr(0, point)); v.push_back(line.substr(point + 1)); return v;&#125;vector&lt;int&gt; solution(vector&lt;string&gt; id_list, vector&lt;string&gt; report, int k) &#123; vector&lt;int&gt; answer = vector&lt;int&gt;(id_list.size(), 0); map&lt;string, set&lt;string&gt;&gt; m; for (string line : report) &#123; vector&lt;string&gt; v = split(line); string id = v[0]; string report_id = v[1]; m[v[1]].insert(v[0]); &#125; for (auto iter = m.begin(); iter != m.end(); iter++) &#123; if (iter-&gt;second.size() &gt;= k) &#123; set&lt;string&gt;&amp; s = iter-&gt;second; for (auto s_iter = s.begin(); s_iter != s.end(); s_iter++) &#123; int index = find(id_list.begin(), id_list.end(), *s_iter) - id_list.begin(); answer[index]++; &#125; &#125; &#125; return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ë¬¸ìì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê³  ê²°ê³¼ ë°›ê¸° Python","slug":"algorithm/programmers/string/92334-ì‹ ê³ ê²°ê³¼ë°›ê¸°-python","date":"2022-01-17T11:10:40.000Z","updated":"2024-11-28T13:59:33.461Z","comments":true,"path":"2022/01/17/algorithm/programmers/string/92334-ì‹ ê³ ê²°ê³¼ë°›ê¸°-python/","link":"","permalink":"https://ckck803.github.io/2022/01/17/algorithm/programmers/string/92334-%EC%8B%A0%EA%B3%A0%EA%B2%B0%EA%B3%BC%EB%B0%9B%EA%B8%B0-python/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/92334 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê³  ê²°ê³¼ ë°›ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê³  ê²°ê³¼ ë°›ê¸° Python def solution(id_list, report, k): answer = [0] * len(id_list) dict = &#123;id: set() for id in id_list&#125; for line in set(report): args = line.split(&#x27; &#x27;) dict[args[1]].add(args[0]) print(dict) for key, value in dict.items(): if len(value) &gt;= k: for i in value: answer[id_list.index(i)] += 1 return answer","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/92334 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê³  ê²°ê³¼ ë°›ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê³  ê²°ê³¼ ë°›ê¸° Python def solution(id_list, report, k): answer = [0] * len(id_list) dict = &#123;id: set() for id in id_list&#125; for line in set(report): args = line.split(&#x27; &#x27;) dict[args[1]].add(args[0]) print(dict) for key, value in dict.items(): if len(value) &gt;= k: for i in value: answer[id_list.index(i)] += 1 return answer","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ë¬¸ìì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - CORS (Corss Site Resource Sharing)","slug":"computer-science/network/security/cors","date":"2022-01-16T16:16:32.000Z","updated":"2024-02-18T16:19:54.519Z","comments":true,"path":"2022/01/17/computer-science/network/security/cors/","link":"","permalink":"https://ckck803.github.io/2022/01/17/computer-science/network/security/cors/","excerpt":"SOP (Same Origin Policy)ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš© ëª»í•˜ë„ë¡ ì œí•œí•˜ëŠ” ë³´ì•ˆ ë°©ì‹ CORS (Cross Origin Resource Sharing) í•˜ë‚˜ì˜ Origin ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë‹¤ë¥¸ Origin ë‚´ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì¶”ê°€ HTTP í—¤ë”ë¥¼ ì´ìš©í•´ í•œ ì¶œì²˜ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë‹¤ë¥¸ ì¶œì²˜ì˜ ì„ íƒëœ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•˜ë„ë¡ ë¸Œë¼ìš°ì €ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì²´ì œ Request ë‚´ Origin í—¤ë”ì™€ Response ë‚´ Access-Control-Allow-Origin í—¤ë”ê°€ ê°™ìœ¼ë©´ ë¸Œë¼ìš°ì €ëŠ” ê°™ì€ ì¶œì²˜ë¡œ ì¸ì‹í•œë‹¤. í•´ê²° ë°©ë²•ì„œë²„ì—ì„œ Access-Control-Allow-Origin í—¤ë”ë¥¼ í¬í•¨í•œ ì‘ë‹µì„ ë¸Œë¼ìš°ì €ì— ë³´ë‚´ëŠ” ë°©ì‹ìœ¼ë¡œ CORS ì—ëŸ¬ë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìê°€ CORS ì—ëŸ¬ë¥¼ í™•ì¸í–ˆë‹¤ë©´, ì„œë²„ì— Access-Control-Allow-Origin ë“± CORSë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ëª‡ ê°€ì§€ ì‘ë‹µ í—¤ë”ë¥¼ í¬í•¨í•´ ë‹¬ë¼ê³  ìš”ì²­í•´ì•¼ í•©ë‹ˆë‹¤. ì¶œì²˜ URLì˜ Protocol, Host, Port ë¥¼ í•©ì¹œ ê²ƒì„ ì˜ë¯¸í•œë‹¤.","text":"SOP (Same Origin Policy)ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš© ëª»í•˜ë„ë¡ ì œí•œí•˜ëŠ” ë³´ì•ˆ ë°©ì‹ CORS (Cross Origin Resource Sharing) í•˜ë‚˜ì˜ Origin ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë‹¤ë¥¸ Origin ë‚´ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì¶”ê°€ HTTP í—¤ë”ë¥¼ ì´ìš©í•´ í•œ ì¶œì²˜ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë‹¤ë¥¸ ì¶œì²˜ì˜ ì„ íƒëœ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•˜ë„ë¡ ë¸Œë¼ìš°ì €ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì²´ì œ Request ë‚´ Origin í—¤ë”ì™€ Response ë‚´ Access-Control-Allow-Origin í—¤ë”ê°€ ê°™ìœ¼ë©´ ë¸Œë¼ìš°ì €ëŠ” ê°™ì€ ì¶œì²˜ë¡œ ì¸ì‹í•œë‹¤. í•´ê²° ë°©ë²•ì„œë²„ì—ì„œ Access-Control-Allow-Origin í—¤ë”ë¥¼ í¬í•¨í•œ ì‘ë‹µì„ ë¸Œë¼ìš°ì €ì— ë³´ë‚´ëŠ” ë°©ì‹ìœ¼ë¡œ CORS ì—ëŸ¬ë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìê°€ CORS ì—ëŸ¬ë¥¼ í™•ì¸í–ˆë‹¤ë©´, ì„œë²„ì— Access-Control-Allow-Origin ë“± CORSë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ëª‡ ê°€ì§€ ì‘ë‹µ í—¤ë”ë¥¼ í¬í•¨í•´ ë‹¬ë¼ê³  ìš”ì²­í•´ì•¼ í•©ë‹ˆë‹¤. ì¶œì²˜ URLì˜ Protocol, Host, Port ë¥¼ í•©ì¹œ ê²ƒì„ ì˜ë¯¸í•œë‹¤. CORS ì ‘ê·¼ ì œì–´ ì‹œë‚˜ë¦¬ì˜¤ Simple Request Preflight Requst Credential Request Simple Request Preflight ìš”ì²­ ì—†ì´ ë°”ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œëŠ” GET, POST, HEAD ë©”ì„œë“œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Content-Type application&#x2F;x-www-form-urlencoded multipart&#x2F;form-data text&#x2F;plain ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í—¤ë” Accept Accept-Language Content-Language Content-type ë§Œ í—ˆìš© ê°€ëŠ¥ Preflight Requst Option ë©”ì„œë“œë¥¼ ì´ìš©í•´ ë‹¤ë¥¸ ë„ë©”ì¸ì˜ ë¦¬ì†ŒìŠ¤ì— ìš”ì²­ì´ ê°€ëŠ¥í•œì§€ í™•ì¸ Request ë‚´ Origin ê³¼ ì‘ë‹µì˜ Access-Control-Allow-Origin ì„ ë¸Œë¼ìš°ì €ê°€ ë¹„êµí•´ íŒë‹¨í•œë‹¤. ìš”ì²­ì´ ê°€ëŠ¥í•˜ë©´ ì‹¤ì œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. Request Header Origin : ìš”ì²­ ì¶œì²˜ Access-Control-Request-Method : ì‹¤ì œ ìš”ì²­ì˜ ë©”ì„œë“œ Access-Control-Request-Headers : ì‹¤ì œ ìš”ì²­ì˜ ì¶”ê°€ í—¤ë” Response Header Access-Control-Allow-Origin : ì„œë²„ì¸¡ í—ˆê°€ ì¶œì²˜ Access-Control-Allow-Methods : ì„œë²„ ì¸¡ í—ˆê°€ ë©”ì„œë“œ Access-Control-Allow-Headers : ì„œë²„ ì¸¡ í—ˆê°€ í—¤ë” Access-Control-Max-Age : Preflight ì‘ë‹µ ìºì‹œ ì‹œê°„","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"Security","slug":"CS/Network/Security","permalink":"https://ckck803.github.io/categories/CS/Network/Security/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - CSRF (Corss Site Request For Forgery)","slug":"computer-science/network/security/csrf","date":"2022-01-16T16:16:32.000Z","updated":"2024-02-18T16:19:54.519Z","comments":true,"path":"2022/01/17/computer-science/network/security/csrf/","link":"","permalink":"https://ckck803.github.io/2022/01/17/computer-science/network/security/csrf/","excerpt":"CSRF (Corss Site Request Forgery) CSRF ë€ ì‚¬ì´íŠ¸ ê°„ ìš”ì²­ ìœ„ì¡°ì˜ ì˜ë¯¸ë¡œ, ì‚¬ìš©ìê°€ ìì‹ ì˜ ì˜ì§€ì™€ ë¬´ê´€í•˜ê²Œ ê³µê²©ìê°€ ì˜ë„í•œ í–‰ë™ì„ í•´ íŠ¹ì • ì›¹í˜ì´ì§€ë¥¼ ë³´ì•ˆì— ì·¨ì•½í•˜ê²Œ í•˜ê±°ë‚˜ ìˆ˜ì •, ì‚­ì œ ë“¤ì˜ ì‘ì—…ì„ í•˜ê²Œ ë§Œë“œëŠ” ê³µê²© ë°©ë²•ê³µê²©ìê°€ íŠ¹ì • ì‚¬ìš©ìì˜ ê¶Œí•œì„ íƒˆì·¨í•´ íŠ¹ì • í–‰ìœ„ (ìˆ˜ì •, ì‚­ì œ, ë“±ë¡ ë“±) ë¥¼ ì‚¬ì´íŠ¸ì— ìš”ì²­í•˜ê²Œ ë§Œë“œëŠ” ê³µê²© CSRF ë¥¼ ìœ„í•œ ì¡°ê±´ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìê°€ ì‚¬ì´íŠ¸(ì„œë¹„ìŠ¤) ì— ì ‘ì†í•´ì•¼ í•œë‹¤. ì‚¬ìš©ìê°€ ê³µê²©ìê°€ ë§Œë“  í”¼ì‹± ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ê²Œ ë˜ë©´ CSRF ê³µê²©ì´ ì„±ë¦½ëœë‹¤. 2008ë…„ì— ë°œìƒí–ˆë˜ ì˜¥ì…˜ì˜ ê°œì¸ì •ë³´ ìœ ì¶œ ì‚¬ê±´ì—ì„œë„ ê´€ë¦¬ì ê³„ì •ì„ íƒˆì·¨í•˜ëŠ”ë° ì´ CSRF ë°©ë²•ì„ ì´ìš© ì˜¥ì…˜ ê´€ë¦¬ìê°€ ë©”ì¼ì„ ì¡°íšŒí•˜ë©´ì„œ CSRF ê³µê²©í•  ìˆ˜ ìˆëŠ” í…Œê·¸ê°€ ë“¤ì–´ê°„ ì´ë©”ì¼ì„ ì—´ì–´ í•´ì»¤ê°€ ê´€ë¦¬ì ê¶Œí•œì„ ì·¨ë“í•˜ê²Œ ë¨ &lt;img src=&quot;http://auction.com/changeUserAcoount?id=admin&amp;password=admin&quot; width=&quot;0&quot; height=&quot;0&quot;&gt; ë°©ì–´ ë°©ë²•1. Referrer ê²€ì¦","text":"CSRF (Corss Site Request Forgery) CSRF ë€ ì‚¬ì´íŠ¸ ê°„ ìš”ì²­ ìœ„ì¡°ì˜ ì˜ë¯¸ë¡œ, ì‚¬ìš©ìê°€ ìì‹ ì˜ ì˜ì§€ì™€ ë¬´ê´€í•˜ê²Œ ê³µê²©ìê°€ ì˜ë„í•œ í–‰ë™ì„ í•´ íŠ¹ì • ì›¹í˜ì´ì§€ë¥¼ ë³´ì•ˆì— ì·¨ì•½í•˜ê²Œ í•˜ê±°ë‚˜ ìˆ˜ì •, ì‚­ì œ ë“¤ì˜ ì‘ì—…ì„ í•˜ê²Œ ë§Œë“œëŠ” ê³µê²© ë°©ë²•ê³µê²©ìê°€ íŠ¹ì • ì‚¬ìš©ìì˜ ê¶Œí•œì„ íƒˆì·¨í•´ íŠ¹ì • í–‰ìœ„ (ìˆ˜ì •, ì‚­ì œ, ë“±ë¡ ë“±) ë¥¼ ì‚¬ì´íŠ¸ì— ìš”ì²­í•˜ê²Œ ë§Œë“œëŠ” ê³µê²© CSRF ë¥¼ ìœ„í•œ ì¡°ê±´ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìê°€ ì‚¬ì´íŠ¸(ì„œë¹„ìŠ¤) ì— ì ‘ì†í•´ì•¼ í•œë‹¤. ì‚¬ìš©ìê°€ ê³µê²©ìê°€ ë§Œë“  í”¼ì‹± ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ê²Œ ë˜ë©´ CSRF ê³µê²©ì´ ì„±ë¦½ëœë‹¤. 2008ë…„ì— ë°œìƒí–ˆë˜ ì˜¥ì…˜ì˜ ê°œì¸ì •ë³´ ìœ ì¶œ ì‚¬ê±´ì—ì„œë„ ê´€ë¦¬ì ê³„ì •ì„ íƒˆì·¨í•˜ëŠ”ë° ì´ CSRF ë°©ë²•ì„ ì´ìš© ì˜¥ì…˜ ê´€ë¦¬ìê°€ ë©”ì¼ì„ ì¡°íšŒí•˜ë©´ì„œ CSRF ê³µê²©í•  ìˆ˜ ìˆëŠ” í…Œê·¸ê°€ ë“¤ì–´ê°„ ì´ë©”ì¼ì„ ì—´ì–´ í•´ì»¤ê°€ ê´€ë¦¬ì ê¶Œí•œì„ ì·¨ë“í•˜ê²Œ ë¨ &lt;img src=&quot;http://auction.com/changeUserAcoount?id=admin&amp;password=admin&quot; width=&quot;0&quot; height=&quot;0&quot;&gt; ë°©ì–´ ë°©ë²•1. Referrer ê²€ì¦ Reqeust Header ì— ìˆëŠ” Referrer ì†ì„±ì„ ê²€ì¦í•´ ì°¨ë‹¨í•˜ëŠ” ë°©ì‹, ì´ ë°©ë²•ë§Œìœ¼ë¡œë„ ëŒ€ë¶€ë¶„ ë°©ì–´ê°€ ê°€ëŠ¥í•˜ë‹¤. ê°™ì€ ë„ë©”ì¸ ë‚´ í˜ì´ì§€ì— XSS ì·¨ì•½ì ì´ ìˆë‹¤ë©´ CSRF ê³µê²©ì— ì·¨ì•½í•´ ì§ˆ ìˆ˜ ìˆë‹¤. Referer ë€ í˜„ì¬ ìš”ì²­ì„ ë³´ë‚¸ í˜ì´ì§€ì˜ ì ˆëŒ€ í˜¹ì€ ë¶€ë¶„ ì£¼ì†Œ ì •ë³´ë¥¼ ê°–ê³  ìˆëŠ” í—¤ë” íŠ¹ì • ë§í¬ë¥¼ í†µí•´ ì‚¬ì´íŠ¸ë¥¼ ë°©ë¬¸í•˜ê²Œ ë˜ë©´ í•´ë‹¹ ì‚¬ì´íŠ¸ ì£¼ì†Œë¥¼ ê°–ê³  ìˆë‹¤. ë‹¤ë¥¸ ë„ë©”ì¸ì— ë¦¬ì†ŒìŠ¤ ìš”ì²­ì„ í•˜ëŠ” ê²½ìš°ë¼ë©´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” í˜ì´ì§€ ì£¼ì†Œë¥¼ ê°–ê³  ìˆë‹¤. 2. CSRF Token ì‚¬ìš© ë‚œìˆ˜ë¥¼ ì‚¬ìš©ì ì„¸ì…˜ì— ì €ì¥í•´ ì‚¬ìš©ìì˜ ëª¨ë“  ìš”ì²­ì— ê°’ì„ í¬í•¨í•´ ì „ì†¡í•œë‹¤. ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œ ë§ˆë‹¤ ì„¸ì…˜ì— ì €ì¥ëœ ê°’ê³¼ ì „ì†¡ëœ ê°’ì´ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦ XSS ë¥¼ í†µí•œ CSRF ê³µê²©ì— ì·¨ì•½í•˜ë‹¤. 3. CAPCHA ì‚¬ìš© ì´ë¯¸ì§€ëŠ” ë§¤ë²ˆ ë°”ë€Œì–´ ì¸ì¦ ê°’ì„ ë¯¸ë¦¬ íšë“ í•  ìˆ˜ ì—†ê²Œ êµ¬ì„±ë¼ ìˆìŒ ì¸ì¦ ê°’ì„ ë¯¸ë¦¬ íšë“ í•  ìˆ˜ ì—†ì–´ì„œ ê°€ì¥ ì•ˆì „í•œ ë°©ë²•","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"Security","slug":"CS/Network/Security","permalink":"https://ckck803.github.io/categories/CS/Network/Security/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - XSS (Cross-Site Scripting)","slug":"computer-science/network/security/xss","date":"2022-01-16T16:16:32.000Z","updated":"2024-02-18T16:19:54.520Z","comments":true,"path":"2022/01/17/computer-science/network/security/xss/","link":"","permalink":"https://ckck803.github.io/2022/01/17/computer-science/network/security/xss/","excerpt":"![]&#x2F;images&#x2F;computer-science&#x2F;network&#x2F;http&#x2F;xss.png) XSS (Cross-Site Scripting) ê³µê²©ìê°€ ë³´ì•ˆì´ ì·¨ì•½í•œ ì›¹ ì‚¬ì´íŠ¸ì— ì•…ì„± ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚½ì…í•˜ëŠ” ê³µê²© ê¸°ë²• XSS ë¥¼ í†µí•´ C&amp;C (ì¢€ë¹„ PCì— ëª…ë ¹ì„ ë‚´ë¦¬ê±°ë‚˜ ì•…ì„± ì½”ë“œë¥¼ ì œì–´í•˜ëŠ” ì„œë²„) ë¡œ ë¦¬ë‹¤ì´ë ‰í•˜ê±°ë‚˜ ì‚¬ìš©ìì˜ ì¿ í‚¤ë¥¼ íƒˆì·¨í•´ Session í•˜ì´ì¬í‚¹ ê³µê²©ì„ í•  ìˆ˜ ìˆë‹¤. Persistent XSS ê³µê²©ìê°€ ì‹¬ì–´ë†“ì€ íŠ¹ì • ìŠ¤í¬ë¦½íŠ¸ê°€ ì„œë²„ì— ì €ì¥ë¼ ì§€ì†ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì •ìƒ í˜ì´ì§€ì—ì„œ ê³µê²©ìì—ê²Œ ìŠ¤í¬ë¦½íŠ¸ê°€ ë…¸ì¶œë˜ëŠ” ê¸°ë²• Relected XSS ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•  ë•Œ ë°œìƒí•˜ëŠ” ì·¨ì•½ì ì„ ì´ìš©í•œ ê³µê²© ê¸°ë²• ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ íŠ¹ì • ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³´ëƒˆì„ ë•Œ ì„œë²„ê°€ í•„í„°ë§ì„ ê±°ì¹˜ì§€ ì•Šê³  íŒŒë¼ë¯¸í„°ë¡œ í¬í•¨ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ë‹µ í˜ì´ì§€ì— ë‹´ì•„ ì „ì†¡í•  ë•Œ ë¬¸ì œê°€ ë°œìƒ","text":"![]&#x2F;images&#x2F;computer-science&#x2F;network&#x2F;http&#x2F;xss.png) XSS (Cross-Site Scripting) ê³µê²©ìê°€ ë³´ì•ˆì´ ì·¨ì•½í•œ ì›¹ ì‚¬ì´íŠ¸ì— ì•…ì„± ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚½ì…í•˜ëŠ” ê³µê²© ê¸°ë²• XSS ë¥¼ í†µí•´ C&amp;C (ì¢€ë¹„ PCì— ëª…ë ¹ì„ ë‚´ë¦¬ê±°ë‚˜ ì•…ì„± ì½”ë“œë¥¼ ì œì–´í•˜ëŠ” ì„œë²„) ë¡œ ë¦¬ë‹¤ì´ë ‰í•˜ê±°ë‚˜ ì‚¬ìš©ìì˜ ì¿ í‚¤ë¥¼ íƒˆì·¨í•´ Session í•˜ì´ì¬í‚¹ ê³µê²©ì„ í•  ìˆ˜ ìˆë‹¤. Persistent XSS ê³µê²©ìê°€ ì‹¬ì–´ë†“ì€ íŠ¹ì • ìŠ¤í¬ë¦½íŠ¸ê°€ ì„œë²„ì— ì €ì¥ë¼ ì§€ì†ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì •ìƒ í˜ì´ì§€ì—ì„œ ê³µê²©ìì—ê²Œ ìŠ¤í¬ë¦½íŠ¸ê°€ ë…¸ì¶œë˜ëŠ” ê¸°ë²• Relected XSS ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•  ë•Œ ë°œìƒí•˜ëŠ” ì·¨ì•½ì ì„ ì´ìš©í•œ ê³µê²© ê¸°ë²• ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ íŠ¹ì • ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³´ëƒˆì„ ë•Œ ì„œë²„ê°€ í•„í„°ë§ì„ ê±°ì¹˜ì§€ ì•Šê³  íŒŒë¼ë¯¸í„°ë¡œ í¬í•¨ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ë‹µ í˜ì´ì§€ì— ë‹´ì•„ ì „ì†¡í•  ë•Œ ë¬¸ì œê°€ ë°œìƒ XSS ì˜ ìœ„í—˜ì„± ì¿ í‚¤ ì •ë³´ ë° Session ID íšë“ ì‹œìŠ¤í…œ ê´€ë¦¬ì ê¶Œí•œ íšë“ ì•…ì„±ì½”ë“œ ë‹¤ìš´ë¡œë“œ ê±°ì§“ í˜ì´ì§€ ë…¸ì¶œ XSS ë°©ì§€ë²• HTML 5 ì—ì„œëŠ” innerHTML ì„ í†µí•´ ì£¼ì…í•œ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. Cookie ì— HttpOnly ì˜µì…˜ì„ í™œì„±í™” í•œë‹¤. document.cookie ë¥¼ ì´ìš©í•´ Cookie ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ ì°¨ë‹¨í•œë‹¤. ë‹¨ localStorage ì— ì €ì¥ëœ ì •ë³´ì— ëŒ€í•œ ì ‘ê·¼ì€ ë§‰ì„ ìˆ˜ ì—†ë‹¤. Script ë¬¸ì í•„í„°ë§ htmlentity ì‚¬ìš© íŠ¹ìˆ˜ë¬¸ìë¥¼ HTML Entity ë¡œ ë³€í™˜í•œë‹¤. &lt; : &lt; ë¡œ ë³€í™˜ &gt; : &gt; ë¡œ ë³€í™˜","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"Security","slug":"CS/Network/Security","permalink":"https://ckck803.github.io/categories/CS/Network/Security/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¬¸ìì—´ ì••ì¶• Cpp","slug":"algorithm/programmers/string/60057-ë¬¸ìì—´ì••ì¶•-cpp","date":"2022-01-09T11:10:40.000Z","updated":"2024-11-28T13:59:33.611Z","comments":true,"path":"2022/01/09/algorithm/programmers/string/60057-ë¬¸ìì—´ì••ì¶•-cpp/","link":"","permalink":"https://ckck803.github.io/2022/01/09/algorithm/programmers/string/60057-%EB%AC%B8%EC%9E%90%EC%97%B4%EC%95%95%EC%B6%95-cpp/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/60057 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¬¸ìì—´ ì••ì¶• Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¬¸ìì—´ ì••ì¶• Python ë¬¸ì œ í’€ì´ê°„ë‹¨í•œ êµ¬í˜„ ë¬¸ì œë‹¤. ì£¼ì–´ì§„ ë¬¸ìì—´ì„ substr í•´ì„œ ë¬¸ìì—´ ë¹„êµë¥¼ í†µí•´ ê°™ì€ ë¬¸ìì—´ì˜ ê°œìˆ˜ë¥¼ ì°¾ì•„ë‚´ ì••ì¶•ëœ ë¬¸ìì—´ í˜•íƒœë¡œ ë§Œë“¤ì–´ì¤€ ë‹¤ìŒ ì••ì¶•ëœ ë¬¸ìì—´ì˜ ê¸¸ì´ë¥¼ ë°˜í™˜í•´ì£¼ë©´ ë˜ëŠ” ë¬¸ì œë‹¤. ë¬¸ìì—´ ì••ì¶•í•˜ê¸°ì£¼ì–´ì§„ ë¬¸ìì—´ì„ ìŠ¤ìº”í•˜ë©´ì„œ ê³ ë ¤í•´ì•¼ í•˜ëŠ” ì¡°ê±´ì´ ì²«ë²ˆì§¸ëŠ” substr í•˜ë ¤ëŠ” ë²”ìœ„ê°€ ì£¼ì–´ì§„ ë¬¸ìì—´ì˜ ë²”ìœ„ë¥¼ ë„˜ì–´ì„œë©´ ì•ˆëœë‹¤ëŠ” ê²ƒì´ë‹¤. ë‘ë²ˆì§¸ëŠ” substr ë²”ìœ„ê°€ ì£¼ì–´ì§„ ë¬¸ìì—´ì˜ ë²”ìœ„ë¥¼ ë„˜ì–´ì„  ê²½ìš° ì••ì¶•ëœ ë¬¸ìì—´ì— ê·¸ëŒ€ë¡œ ì¶”ê°€í•´ì¤˜ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. int divideString(int length, string s) &#123; string zipString = &quot;&quot;; int i = 0; // ë¬¸ìì—´ì„ ìŠ¤ìº”í•˜ë©´ì„œ substr ë²”ìœ„ê°€ ì£¼ì–´ì§„ ë¬¸ìì—´ì„ ë„˜ëŠ”ì§€ í™•ì¸í•œë‹¤. for (i = 0; i &lt; s.length() &amp;&amp; i + length &lt; s.length(); i = i + length) &#123; int count = 0; bool isErase = false; string substr = s.substr(i, length); string cmpstr = s.substr(i, length); while (substr == cmpstr &amp;&amp; s.length() &gt; i) &#123; count++; i += length; isErase = true; substr = s.substr(i, length); &#125; if (isErase == true) &#123; i -= length; &#125; if (count == 1) &#123; zipString += cmpstr; &#125; else &#123; zipString += to_string(count); zipString += cmpstr; &#125; &#125; // ë‚¨ê²¨ì§„ ë¬¸ìì—´ì„ ì••ì¶•ëœ ë¬¸ìì—´ì— ê·¸ëŒ€ë¡œ ì¶”ê°€í•œë‹¤. for (int idx = i; idx &lt; s.length(); idx++) &#123; zipString += s[i]; &#125; return zipString.length();&#125; ë¬¸ì œ ì „ì²´ ì†ŒìŠ¤#include &lt;bits/stdc++.h&gt;using namespace std;int divideString(int length, string s) &#123; string zipString = &quot;&quot;; int count = 0; int i = 0; for (i = 0; i &lt; s.length() &amp;&amp; i + length &lt; s.length(); i = i + length) &#123; bool isErase = false; string substr = s.substr(i, length); string cmpstr = s.substr(i, length); while (substr == cmpstr &amp;&amp; s.length() &gt; i) &#123; count++; i += length; isErase = true; substr = s.substr(i, length); &#125; if (isErase == true) &#123; i -= length; &#125; if (count == 1) &#123; zipString += cmpstr; &#125; else &#123; zipString += to_string(count); zipString += cmpstr; &#125; count = 0; cmpstr = &quot;&quot;; &#125; for (int idx = i; idx &lt; s.length(); idx++) &#123; zipString += s[i]; &#125; return zipString.length();&#125;int solution(string s) &#123; int answer = 0; int minValue = s.length(); for (int i = 1; i &lt;= s.length() / 2; i++) &#123; int zipLength = divideString(i, s); minValue = min(zipLength, minValue); &#125; answer = minValue; return answer;&#125;","text":"https://programmers.co.kr/learn/courses/30/lessons/60057 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¬¸ìì—´ ì••ì¶• Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¬¸ìì—´ ì••ì¶• Python ë¬¸ì œ í’€ì´ê°„ë‹¨í•œ êµ¬í˜„ ë¬¸ì œë‹¤. ì£¼ì–´ì§„ ë¬¸ìì—´ì„ substr í•´ì„œ ë¬¸ìì—´ ë¹„êµë¥¼ í†µí•´ ê°™ì€ ë¬¸ìì—´ì˜ ê°œìˆ˜ë¥¼ ì°¾ì•„ë‚´ ì••ì¶•ëœ ë¬¸ìì—´ í˜•íƒœë¡œ ë§Œë“¤ì–´ì¤€ ë‹¤ìŒ ì••ì¶•ëœ ë¬¸ìì—´ì˜ ê¸¸ì´ë¥¼ ë°˜í™˜í•´ì£¼ë©´ ë˜ëŠ” ë¬¸ì œë‹¤. ë¬¸ìì—´ ì••ì¶•í•˜ê¸°ì£¼ì–´ì§„ ë¬¸ìì—´ì„ ìŠ¤ìº”í•˜ë©´ì„œ ê³ ë ¤í•´ì•¼ í•˜ëŠ” ì¡°ê±´ì´ ì²«ë²ˆì§¸ëŠ” substr í•˜ë ¤ëŠ” ë²”ìœ„ê°€ ì£¼ì–´ì§„ ë¬¸ìì—´ì˜ ë²”ìœ„ë¥¼ ë„˜ì–´ì„œë©´ ì•ˆëœë‹¤ëŠ” ê²ƒì´ë‹¤. ë‘ë²ˆì§¸ëŠ” substr ë²”ìœ„ê°€ ì£¼ì–´ì§„ ë¬¸ìì—´ì˜ ë²”ìœ„ë¥¼ ë„˜ì–´ì„  ê²½ìš° ì••ì¶•ëœ ë¬¸ìì—´ì— ê·¸ëŒ€ë¡œ ì¶”ê°€í•´ì¤˜ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. int divideString(int length, string s) &#123; string zipString = &quot;&quot;; int i = 0; // ë¬¸ìì—´ì„ ìŠ¤ìº”í•˜ë©´ì„œ substr ë²”ìœ„ê°€ ì£¼ì–´ì§„ ë¬¸ìì—´ì„ ë„˜ëŠ”ì§€ í™•ì¸í•œë‹¤. for (i = 0; i &lt; s.length() &amp;&amp; i + length &lt; s.length(); i = i + length) &#123; int count = 0; bool isErase = false; string substr = s.substr(i, length); string cmpstr = s.substr(i, length); while (substr == cmpstr &amp;&amp; s.length() &gt; i) &#123; count++; i += length; isErase = true; substr = s.substr(i, length); &#125; if (isErase == true) &#123; i -= length; &#125; if (count == 1) &#123; zipString += cmpstr; &#125; else &#123; zipString += to_string(count); zipString += cmpstr; &#125; &#125; // ë‚¨ê²¨ì§„ ë¬¸ìì—´ì„ ì••ì¶•ëœ ë¬¸ìì—´ì— ê·¸ëŒ€ë¡œ ì¶”ê°€í•œë‹¤. for (int idx = i; idx &lt; s.length(); idx++) &#123; zipString += s[i]; &#125; return zipString.length();&#125; ë¬¸ì œ ì „ì²´ ì†ŒìŠ¤#include &lt;bits/stdc++.h&gt;using namespace std;int divideString(int length, string s) &#123; string zipString = &quot;&quot;; int count = 0; int i = 0; for (i = 0; i &lt; s.length() &amp;&amp; i + length &lt; s.length(); i = i + length) &#123; bool isErase = false; string substr = s.substr(i, length); string cmpstr = s.substr(i, length); while (substr == cmpstr &amp;&amp; s.length() &gt; i) &#123; count++; i += length; isErase = true; substr = s.substr(i, length); &#125; if (isErase == true) &#123; i -= length; &#125; if (count == 1) &#123; zipString += cmpstr; &#125; else &#123; zipString += to_string(count); zipString += cmpstr; &#125; count = 0; cmpstr = &quot;&quot;; &#125; for (int idx = i; idx &lt; s.length(); idx++) &#123; zipString += s[i]; &#125; return zipString.length();&#125;int solution(string s) &#123; int answer = 0; int minValue = s.length(); for (int i = 1; i &lt;= s.length() / 2; i++) &#123; int zipLength = divideString(i, s); minValue = min(zipLength, minValue); &#125; answer = minValue; return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¬¸ìì—´ ì••ì¶• Python","slug":"algorithm/programmers/string/60057-ë¬¸ìì—´ì••ì¶•-python","date":"2022-01-09T11:10:40.000Z","updated":"2024-11-28T13:59:33.685Z","comments":true,"path":"2022/01/09/algorithm/programmers/string/60057-ë¬¸ìì—´ì••ì¶•-python/","link":"","permalink":"https://ckck803.github.io/2022/01/09/algorithm/programmers/string/60057-%EB%AC%B8%EC%9E%90%EC%97%B4%EC%95%95%EC%B6%95-python/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/60057 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¬¸ìì—´ ì••ì¶• Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¬¸ìì—´ ì••ì¶• Python ë¬¸ì œ í’€ì´ê°„ë‹¨í•œ êµ¬í˜„ ë¬¸ì œë‹¤. ì£¼ì–´ì§„ ë¬¸ìì—´ì„ substr í•´ì„œ ë¬¸ìì—´ ë¹„êµë¥¼ í†µí•´ ê°™ì€ ë¬¸ìì—´ì˜ ê°œìˆ˜ë¥¼ ì°¾ì•„ë‚´ ì••ì¶•ëœ ë¬¸ìì—´ í˜•íƒœë¡œ ë§Œë“¤ì–´ì¤€ ë‹¤ìŒ ì••ì¶•ëœ ë¬¸ìì—´ì˜ ê¸¸ì´ë¥¼ ë°˜í™˜í•´ì£¼ë©´ ë˜ëŠ” ë¬¸ì œë‹¤. ë¬¸ì œ ì „ì²´ ì†ŒìŠ¤def solution(s): answer = &#x27;&#x27; if len(s) == 1: return len(s) for i in range(1, len(s)//2 + 1): sentence = &#x27;&#x27; count = 0 word = s[:i] for j in range(0, len(s), i): if s[j:j+i] == word: count += 1 else: if count &gt; 1: sentence += (str(count) + word) else: sentence += (word) word = s[j:j+i] count = 1 if count &gt; 1: sentence += (str(count) + word) else: sentence += (word) if len(answer) == 0: answer = sentence elif len(answer) &gt; len(sentence): answer = sentence print(answer) return len(answer)","text":"https://programmers.co.kr/learn/courses/30/lessons/60057 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¬¸ìì—´ ì••ì¶• Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¬¸ìì—´ ì••ì¶• Python ë¬¸ì œ í’€ì´ê°„ë‹¨í•œ êµ¬í˜„ ë¬¸ì œë‹¤. ì£¼ì–´ì§„ ë¬¸ìì—´ì„ substr í•´ì„œ ë¬¸ìì—´ ë¹„êµë¥¼ í†µí•´ ê°™ì€ ë¬¸ìì—´ì˜ ê°œìˆ˜ë¥¼ ì°¾ì•„ë‚´ ì••ì¶•ëœ ë¬¸ìì—´ í˜•íƒœë¡œ ë§Œë“¤ì–´ì¤€ ë‹¤ìŒ ì••ì¶•ëœ ë¬¸ìì—´ì˜ ê¸¸ì´ë¥¼ ë°˜í™˜í•´ì£¼ë©´ ë˜ëŠ” ë¬¸ì œë‹¤. ë¬¸ì œ ì „ì²´ ì†ŒìŠ¤def solution(s): answer = &#x27;&#x27; if len(s) == 1: return len(s) for i in range(1, len(s)//2 + 1): sentence = &#x27;&#x27; count = 0 word = s[:i] for j in range(0, len(s), i): if s[j:j+i] == word: count += 1 else: if count &gt; 1: sentence += (str(count) + word) else: sentence += (word) word = s[j:j+i] count = 1 if count &gt; 1: sentence += (str(count) + word) else: sentence += (word) if len(answer) == 0: answer = sentence elif len(answer) &gt; len(sentence): answer = sentence print(answer) return len(answer)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"}],"tags":[{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"Cpp","slug":"Cpp","permalink":"https://ckck803.github.io/tags/Cpp/"}]},{"title":"ë°±ì¤€ 13460 - êµ¬ìŠ¬ íƒˆì¶œ 2","slug":"algorithm/baekjoon/samsung/13460-êµ¬ìŠ¬íƒˆì¶œ2","date":"2022-01-09T06:16:03.000Z","updated":"2024-11-28T13:59:35.183Z","comments":true,"path":"2022/01/09/algorithm/baekjoon/samsung/13460-êµ¬ìŠ¬íƒˆì¶œ2/","link":"","permalink":"https://ckck803.github.io/2022/01/09/algorithm/baekjoon/samsung/13460-%EA%B5%AC%EC%8A%AC%ED%83%88%EC%B6%9C2/","excerpt":"https://www.acmicpc.net/problem/13460 ë°±ì¤€ 13460 - êµ¬ìŠ¬ íƒˆì¶œ 2 ë°±ì¤€ 13460 - êµ¬ìŠ¬ íƒˆì¶œ 2ë¬¸ì œìŠ¤íƒ€íŠ¸ë§í¬ì—ì„œ íŒë§¤í•˜ëŠ” ì–´ë¦°ì´ìš© ì¥ë‚œê° ì¤‘ì—ì„œ ê°€ì¥ ì¸ê¸°ê°€ ë§ì€ ì œí’ˆì€ êµ¬ìŠ¬ íƒˆì¶œì´ë‹¤. êµ¬ìŠ¬ íƒˆì¶œì€ ì§ì‚¬ê°í˜• ë³´ë“œì— ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì„ í•˜ë‚˜ì”© ë„£ì€ ë‹¤ìŒ, ë¹¨ê°„ êµ¬ìŠ¬ì„ êµ¬ë©ì„ í†µí•´ ë¹¼ë‚´ëŠ” ê²Œì„ì´ë‹¤. ë³´ë“œì˜ ì„¸ë¡œ í¬ê¸°ëŠ” N, ê°€ë¡œ í¬ê¸°ëŠ” Mì´ê³ , í¸ì˜ìƒ 1Ã—1í¬ê¸°ì˜ ì¹¸ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆë‹¤. ê°€ì¥ ë°”ê¹¥ í–‰ê³¼ ì—´ì€ ëª¨ë‘ ë§‰í˜€ì ¸ ìˆê³ , ë³´ë“œì—ëŠ” êµ¬ë©ì´ í•˜ë‚˜ ìˆë‹¤. ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì˜ í¬ê¸°ëŠ” ë³´ë“œì—ì„œ 1Ã—1í¬ê¸°ì˜ ì¹¸ì„ ê°€ë“ ì±„ìš°ëŠ” ì‚¬ì´ì¦ˆì´ê³ , ê°ê° í•˜ë‚˜ì”© ë“¤ì–´ê°€ ìˆë‹¤. ê²Œì„ì˜ ëª©í‘œëŠ” ë¹¨ê°„ êµ¬ìŠ¬ì„ êµ¬ë©ì„ í†µí•´ì„œ ë¹¼ë‚´ëŠ” ê²ƒì´ë‹¤. ì´ë•Œ, íŒŒë€ êµ¬ìŠ¬ì´ êµ¬ë©ì— ë“¤ì–´ê°€ë©´ ì•ˆ ëœë‹¤. ì´ë•Œ, êµ¬ìŠ¬ì„ ì†ìœ¼ë¡œ ê±´ë“œë¦´ ìˆ˜ëŠ” ì—†ê³ , ì¤‘ë ¥ì„ ì´ìš©í•´ì„œ ì´ë¦¬ ì €ë¦¬ êµ´ë ¤ì•¼ í•œë‹¤. ì™¼ìª½ìœ¼ë¡œ ê¸°ìš¸ì´ê¸°, ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê¸°ìš¸ì´ê¸°, ìœ„ìª½ìœ¼ë¡œ ê¸°ìš¸ì´ê¸°, ì•„ë˜ìª½ìœ¼ë¡œ ê¸°ìš¸ì´ê¸°ì™€ ê°™ì€ ë„¤ ê°€ì§€ ë™ì‘ì´ ê°€ëŠ¥í•˜ë‹¤. ê°ê°ì˜ ë™ì‘ì—ì„œ ê³µì€ ë™ì‹œì— ì›€ì§ì¸ë‹¤. ë¹¨ê°„ êµ¬ìŠ¬ì´ êµ¬ë©ì— ë¹ ì§€ë©´ ì„±ê³µì´ì§€ë§Œ, íŒŒë€ êµ¬ìŠ¬ì´ êµ¬ë©ì— ë¹ ì§€ë©´ ì‹¤íŒ¨ì´ë‹¤. ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì´ ë™ì‹œì— êµ¬ë©ì— ë¹ ì ¸ë„ ì‹¤íŒ¨ì´ë‹¤. ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì€ ë™ì‹œì— ê°™ì€ ì¹¸ì— ìˆì„ ìˆ˜ ì—†ë‹¤. ë˜, ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì˜ í¬ê¸°ëŠ” í•œ ì¹¸ì„ ëª¨ë‘ ì°¨ì§€í•œë‹¤. ê¸°ìš¸ì´ëŠ” ë™ì‘ì„ ê·¸ë§Œí•˜ëŠ” ê²ƒì€ ë” ì´ìƒ êµ¬ìŠ¬ì´ ì›€ì§ì´ì§€ ì•Šì„ ë•Œ ê¹Œì§€ì´ë‹¤. ë³´ë“œì˜ ìƒíƒœê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ìµœì†Œ ëª‡ ë²ˆ ë§Œì— ë¹¨ê°„ êµ¬ìŠ¬ì„ êµ¬ë©ì„ í†µí•´ ë¹¼ë‚¼ ìˆ˜ ìˆëŠ”ì§€ êµ¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì‹œì˜¤.","text":"https://www.acmicpc.net/problem/13460 ë°±ì¤€ 13460 - êµ¬ìŠ¬ íƒˆì¶œ 2 ë°±ì¤€ 13460 - êµ¬ìŠ¬ íƒˆì¶œ 2ë¬¸ì œìŠ¤íƒ€íŠ¸ë§í¬ì—ì„œ íŒë§¤í•˜ëŠ” ì–´ë¦°ì´ìš© ì¥ë‚œê° ì¤‘ì—ì„œ ê°€ì¥ ì¸ê¸°ê°€ ë§ì€ ì œí’ˆì€ êµ¬ìŠ¬ íƒˆì¶œì´ë‹¤. êµ¬ìŠ¬ íƒˆì¶œì€ ì§ì‚¬ê°í˜• ë³´ë“œì— ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì„ í•˜ë‚˜ì”© ë„£ì€ ë‹¤ìŒ, ë¹¨ê°„ êµ¬ìŠ¬ì„ êµ¬ë©ì„ í†µí•´ ë¹¼ë‚´ëŠ” ê²Œì„ì´ë‹¤. ë³´ë“œì˜ ì„¸ë¡œ í¬ê¸°ëŠ” N, ê°€ë¡œ í¬ê¸°ëŠ” Mì´ê³ , í¸ì˜ìƒ 1Ã—1í¬ê¸°ì˜ ì¹¸ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆë‹¤. ê°€ì¥ ë°”ê¹¥ í–‰ê³¼ ì—´ì€ ëª¨ë‘ ë§‰í˜€ì ¸ ìˆê³ , ë³´ë“œì—ëŠ” êµ¬ë©ì´ í•˜ë‚˜ ìˆë‹¤. ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì˜ í¬ê¸°ëŠ” ë³´ë“œì—ì„œ 1Ã—1í¬ê¸°ì˜ ì¹¸ì„ ê°€ë“ ì±„ìš°ëŠ” ì‚¬ì´ì¦ˆì´ê³ , ê°ê° í•˜ë‚˜ì”© ë“¤ì–´ê°€ ìˆë‹¤. ê²Œì„ì˜ ëª©í‘œëŠ” ë¹¨ê°„ êµ¬ìŠ¬ì„ êµ¬ë©ì„ í†µí•´ì„œ ë¹¼ë‚´ëŠ” ê²ƒì´ë‹¤. ì´ë•Œ, íŒŒë€ êµ¬ìŠ¬ì´ êµ¬ë©ì— ë“¤ì–´ê°€ë©´ ì•ˆ ëœë‹¤. ì´ë•Œ, êµ¬ìŠ¬ì„ ì†ìœ¼ë¡œ ê±´ë“œë¦´ ìˆ˜ëŠ” ì—†ê³ , ì¤‘ë ¥ì„ ì´ìš©í•´ì„œ ì´ë¦¬ ì €ë¦¬ êµ´ë ¤ì•¼ í•œë‹¤. ì™¼ìª½ìœ¼ë¡œ ê¸°ìš¸ì´ê¸°, ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê¸°ìš¸ì´ê¸°, ìœ„ìª½ìœ¼ë¡œ ê¸°ìš¸ì´ê¸°, ì•„ë˜ìª½ìœ¼ë¡œ ê¸°ìš¸ì´ê¸°ì™€ ê°™ì€ ë„¤ ê°€ì§€ ë™ì‘ì´ ê°€ëŠ¥í•˜ë‹¤. ê°ê°ì˜ ë™ì‘ì—ì„œ ê³µì€ ë™ì‹œì— ì›€ì§ì¸ë‹¤. ë¹¨ê°„ êµ¬ìŠ¬ì´ êµ¬ë©ì— ë¹ ì§€ë©´ ì„±ê³µì´ì§€ë§Œ, íŒŒë€ êµ¬ìŠ¬ì´ êµ¬ë©ì— ë¹ ì§€ë©´ ì‹¤íŒ¨ì´ë‹¤. ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì´ ë™ì‹œì— êµ¬ë©ì— ë¹ ì ¸ë„ ì‹¤íŒ¨ì´ë‹¤. ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì€ ë™ì‹œì— ê°™ì€ ì¹¸ì— ìˆì„ ìˆ˜ ì—†ë‹¤. ë˜, ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì˜ í¬ê¸°ëŠ” í•œ ì¹¸ì„ ëª¨ë‘ ì°¨ì§€í•œë‹¤. ê¸°ìš¸ì´ëŠ” ë™ì‘ì„ ê·¸ë§Œí•˜ëŠ” ê²ƒì€ ë” ì´ìƒ êµ¬ìŠ¬ì´ ì›€ì§ì´ì§€ ì•Šì„ ë•Œ ê¹Œì§€ì´ë‹¤. ë³´ë“œì˜ ìƒíƒœê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ìµœì†Œ ëª‡ ë²ˆ ë§Œì— ë¹¨ê°„ êµ¬ìŠ¬ì„ êµ¬ë©ì„ í†µí•´ ë¹¼ë‚¼ ìˆ˜ ìˆëŠ”ì§€ êµ¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì‹œì˜¤. ì…ë ¥ì²« ë²ˆì§¸ ì¤„ì—ëŠ” ë³´ë“œì˜ ì„¸ë¡œ, ê°€ë¡œ í¬ê¸°ë¥¼ ì˜ë¯¸í•˜ëŠ” ë‘ ì •ìˆ˜ N, M (3 â‰¤ N, M â‰¤ 10)ì´ ì£¼ì–´ì§„ë‹¤. ë‹¤ìŒ Nê°œì˜ ì¤„ì— ë³´ë“œì˜ ëª¨ì–‘ì„ ë‚˜íƒ€ë‚´ëŠ” ê¸¸ì´ Mì˜ ë¬¸ìì—´ì´ ì£¼ì–´ì§„ë‹¤. ì´ ë¬¸ìì—´ì€ â€˜.â€™, â€˜#â€™, â€˜Oâ€™, â€˜Râ€™, â€˜Bâ€™ ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤. â€˜.â€™ì€ ë¹ˆ ì¹¸ì„ ì˜ë¯¸í•˜ê³ , â€˜#â€™ì€ ê³µì´ ì´ë™í•  ìˆ˜ ì—†ëŠ” ì¥ì• ë¬¼ ë˜ëŠ” ë²½ì„ ì˜ë¯¸í•˜ë©°, â€˜Oâ€™ëŠ” êµ¬ë©ì˜ ìœ„ì¹˜ë¥¼ ì˜ë¯¸í•œë‹¤. â€˜Râ€™ì€ ë¹¨ê°„ êµ¬ìŠ¬ì˜ ìœ„ì¹˜, â€˜Bâ€™ëŠ” íŒŒë€ êµ¬ìŠ¬ì˜ ìœ„ì¹˜ì´ë‹¤. ì…ë ¥ë˜ëŠ” ëª¨ë“  ë³´ë“œì˜ ê°€ì¥ìë¦¬ì—ëŠ” ëª¨ë‘ â€˜#â€™ì´ ìˆë‹¤. êµ¬ë©ì˜ ê°œìˆ˜ëŠ” í•œ ê°œ ì´ë©°, ë¹¨ê°„ êµ¬ìŠ¬ê³¼ íŒŒë€ êµ¬ìŠ¬ì€ í•­ìƒ 1ê°œê°€ ì£¼ì–´ì§„ë‹¤. ì¶œë ¥ìµœì†Œ ëª‡ ë²ˆ ë§Œì— ë¹¨ê°„ êµ¬ìŠ¬ì„ êµ¬ë©ì„ í†µí•´ ë¹¼ë‚¼ ìˆ˜ ìˆëŠ”ì§€ ì¶œë ¥í•œë‹¤. ë§Œì•½, 10ë²ˆ ì´í•˜ë¡œ ì›€ì§ì—¬ì„œ ë¹¨ê°„ êµ¬ìŠ¬ì„ êµ¬ë©ì„ í†µí•´ ë¹¼ë‚¼ ìˆ˜ ì—†ìœ¼ë©´ -1ì„ ì¶œë ¥í•œë‹¤. ì „ì²´ ì†ŒìŠ¤#include &lt;bits/stdc++.h&gt;using namespace std;#define endl &#x27;\\n&#x27;char board[11][11];bool check[11][11][11][11];// ì™¼ìª½, ì˜¤ë¥¸ìª½, ìœ„ìª½, ì•„ë«ìª½int dy[4] = &#123;0, 0, -1, 1&#125;;int dx[4] = &#123;-1, 1, 0, 0&#125;;pair&lt;int, int&gt; moveBall(pair&lt;int, int&gt; ball, int dir) &#123; while (board[ball.first + dy[dir]][ball.second + dx[dir]] != &#x27;#&#x27;) &#123; if (board[ball.first][ball.second] == &#x27;O&#x27;) &#123; break; &#125; ball.first += dy[dir]; ball.second += dx[dir]; &#125; return ball;&#125;bool isBlueExit(pair&lt;int, int&gt; next_blue) &#123; if (board[next_blue.first][next_blue.second] == &#x27;O&#x27;) &#123; return true; &#125; return false;&#125;bool isRedExit(pair&lt;int, int&gt; next_red) &#123; if (board[next_red.first][next_red.second] == &#x27;O&#x27;) &#123; return true; &#125; return false;&#125;bool isSame(pair&lt;int, int&gt; next_red, pair&lt;int, int&gt; next_blue) &#123; if (next_red.first == next_blue.first &amp;&amp; next_red.second == next_blue.second) &#123; return true; &#125; return false;&#125;void moveBack(pair&lt;int, int&gt; cnt_red, pair&lt;int, int&gt; cnt_blue, pair&lt;int, int&gt;&amp; next_red, pair&lt;int, int&gt;&amp; next_blue, int dir) &#123; // move left if (dir == 0) &#123; if (cnt_red.second &lt; cnt_blue.second) &#123; next_blue.second++; &#125; else &#123; next_red.second++; &#125; &#125; // move right if (dir == 1) &#123; if (cnt_red.second &gt; cnt_blue.second) &#123; next_blue.second--; &#125; else &#123; next_red.second--; &#125; &#125; // move up if (dir == 2) &#123; if (cnt_red.first &lt; cnt_blue.first) &#123; next_blue.first++; &#125; else &#123; next_red.first++; &#125; &#125; // move down if (dir == 3) &#123; if (cnt_red.first &gt; cnt_blue.first) &#123; next_blue.first--; &#125; else &#123; next_red.first--; &#125; &#125;&#125;int bfs(pair&lt;int, int&gt; redBall, pair&lt;int, int&gt; blueBall, pair&lt;int, int&gt; exit) &#123; queue&lt;pair&lt;pair&lt;int, int&gt;, pair&lt;int, int&gt;&gt;&gt; q; q.push(&#123;redBall, blueBall&#125;); check[redBall.first][redBall.second][blueBall.first][blueBall.second] = true; int count = 0; while (!q.empty()) &#123; count++; int q_size = q.size(); if (count &gt; 10) &#123; break; &#125; while (q_size--) &#123; pair&lt;int, int&gt; cnt_red = q.front().first; pair&lt;int, int&gt; cnt_blue = q.front().second; q.pop(); for (int i = 0; i &lt; 4; i++) &#123; pair&lt;int, int&gt; next_red = moveBall(cnt_red, i); pair&lt;int, int&gt; next_blue = moveBall(cnt_blue, i); if (isBlueExit(next_blue)) &#123; continue; &#125; if (isRedExit(next_red)) &#123; return count; &#125; if (isSame(next_red, next_blue)) &#123; moveBack(cnt_red, cnt_blue, next_red, next_blue, i); &#125; if (check[next_red.first][next_red.second][next_blue.first][next_blue.second] == false) &#123; q.push(&#123;next_red, next_blue&#125;); check[next_red.first][next_red.second][next_blue.first][next_blue.second] = true; &#125; &#125; &#125; &#125; return -1;&#125;int main(void) &#123; int row, col; cin &gt;&gt; row &gt;&gt; col; pair&lt;int, int&gt; redBall; pair&lt;int, int&gt; blueBall; pair&lt;int, int&gt; exit; for (int i = 0; i &lt; row; i++) &#123; for (int j = 0; j &lt; col; j++) &#123; cin &gt;&gt; board[i][j]; if (board[i][j] == &#x27;R&#x27;) &#123; redBall = &#123;i, j&#125;; board[i][j] = &#x27;.&#x27;; &#125; if (board[i][j] == &#x27;B&#x27;) &#123; blueBall = &#123;i, j&#125;; board[i][j] = &#x27;.&#x27;; &#125; if (board[i][j] == &#x27;O&#x27;) &#123; exit = &#123;i, j&#125;; &#125; &#125; &#125; cout &lt;&lt; bfs(redBall, blueBall, exit) &lt;&lt; endl; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"SAMSUNG","slug":"Develop/Beakjoon/SAMSUNG","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/SAMSUNG/"},{"name":"ì‹œë®¬ë ˆì´ì…˜","slug":"Develop/Beakjoon/SAMSUNG/ì‹œë®¬ë ˆì´ì…˜","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/SAMSUNG/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Python","slug":"algorithm/programmers/string/67256-í‚¤íŒ¨ë“œëˆ„ë¥´ê¸°-python","date":"2022-01-05T11:10:40.000Z","updated":"2024-11-28T13:59:33.172Z","comments":true,"path":"2022/01/05/algorithm/programmers/string/67256-í‚¤íŒ¨ë“œëˆ„ë¥´ê¸°-python/","link":"","permalink":"https://ckck803.github.io/2022/01/05/algorithm/programmers/string/67256-%ED%82%A4%ED%8C%A8%EB%93%9C%EB%88%84%EB%A5%B4%EA%B8%B0-python/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/77484 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Python def solution(numbers, hand): answer = &#x27;&#x27; left_hands = [1, 4, 7] right_hands = [3, 6, 9] middle = [2, 5, 8, 0] key_pad = &#123; 1: [0, 0], 2: [0, 1], 3: [0, 2], 4: [1, 0], 5: [1, 1], 6: [1, 2], 7: [2, 0], 8: [2, 1], 9: [2, 2], 0: [3, 1], &#125; left_position = [3, 0] right_position = [3, 2] for key in numbers: if key in left_hands: left_position = key_pad[key] answer += &#x27;L&#x27; elif key in right_hands: right_position = key_pad[key] answer += &#x27;R&#x27; else: # print(key_pad[key][0]) left_dist = abs( left_position[0] - key_pad[key][0]) + abs(left_position[1] - key_pad[key][1]) right_dist = abs( right_position[0] - key_pad[key][0]) + abs(right_position[1] - key_pad[key][1]) if left_dist == right_dist: if hand == &#x27;right&#x27;: right_position = key_pad[key] answer += &quot;R&quot; else: left_position = key_pad[key] answer += &quot;L&quot; elif left_dist &lt; right_dist: left_position = key_pad[key] answer += &#x27;L&#x27; else: right_position = key_pad[key] answer += &#x27;R&#x27; return answer","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/77484 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Python def solution(numbers, hand): answer = &#x27;&#x27; left_hands = [1, 4, 7] right_hands = [3, 6, 9] middle = [2, 5, 8, 0] key_pad = &#123; 1: [0, 0], 2: [0, 1], 3: [0, 2], 4: [1, 0], 5: [1, 1], 6: [1, 2], 7: [2, 0], 8: [2, 1], 9: [2, 2], 0: [3, 1], &#125; left_position = [3, 0] right_position = [3, 2] for key in numbers: if key in left_hands: left_position = key_pad[key] answer += &#x27;L&#x27; elif key in right_hands: right_position = key_pad[key] answer += &#x27;R&#x27; else: # print(key_pad[key][0]) left_dist = abs( left_position[0] - key_pad[key][0]) + abs(left_position[1] - key_pad[key][1]) right_dist = abs( right_position[0] - key_pad[key][0]) + abs(right_position[1] - key_pad[key][1]) if left_dist == right_dist: if hand == &#x27;right&#x27;: right_position = key_pad[key] answer += &quot;R&quot; else: left_position = key_pad[key] answer += &quot;L&quot; elif left_dist &lt; right_dist: left_position = key_pad[key] answer += &#x27;L&#x27; else: right_position = key_pad[key] answer += &#x27;R&#x27; return answer","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ (Java)","slug":"algorithm/programmers/string/72410-ì‹ ê·œì•„ì´ë””ì¶”ì²œ-java","date":"2022-01-05T11:10:40.000Z","updated":"2024-11-28T13:59:33.390Z","comments":true,"path":"2022/01/05/algorithm/programmers/string/72410-ì‹ ê·œì•„ì´ë””ì¶”ì²œ-java/","link":"","permalink":"https://ckck803.github.io/2022/01/05/algorithm/programmers/string/72410-%EC%8B%A0%EA%B7%9C%EC%95%84%EC%9D%B4%EB%94%94%EC%B6%94%EC%B2%9C-java/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/72410 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ (Java) í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ (Python) ë¬¸ì œ í’€ì´ì£¼ì–´ì§„ ì¡°ê±´ì— ë§ì¶° í•˜ë‚˜í•˜ë‚˜ì”© êµ¬í˜„í•˜ë©´ ë˜ëŠ” ë¬¸ì œë‹¤. ë¬¸ìì—´ ê´€ë ¨ ì •ê·œ í‘œí˜„ì‹ì„ ì´ìš©í•˜ë©´ ë”ìš± ê¹”ë”í•˜ê²Œ ë¬¸ì œë¥¼ í•´ê²° í•  ìˆ˜ ìˆë‹¤. ì „ì²´ ì†ŒìŠ¤class Solution &#123; public String solution(String new_id) &#123; String id = new_id.toLowerCase(); id = id.replaceAll(&quot;[^-_.a-z0-9]&quot;, &quot;&quot;); id = id.replaceAll(&quot;[.]&#123;2,&#125;&quot;, &quot;.&quot;); id = id.replaceAll(&quot;^[.]|[.]$&quot;, &quot;&quot;); if (id.equals(&quot;&quot;)) &#123; id += &quot;a&quot;; &#125; if (id.length() &gt;= 16) &#123; id = id.substring(0, 15); id = id.replaceAll(&quot;[.]$&quot;, &quot;&quot;); &#125; while (id.length() &lt;= 2) &#123; id += id.charAt(id.length() - 1); &#125; return id; &#125;&#125;","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/72410 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ (Java) í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ (Python) ë¬¸ì œ í’€ì´ì£¼ì–´ì§„ ì¡°ê±´ì— ë§ì¶° í•˜ë‚˜í•˜ë‚˜ì”© êµ¬í˜„í•˜ë©´ ë˜ëŠ” ë¬¸ì œë‹¤. ë¬¸ìì—´ ê´€ë ¨ ì •ê·œ í‘œí˜„ì‹ì„ ì´ìš©í•˜ë©´ ë”ìš± ê¹”ë”í•˜ê²Œ ë¬¸ì œë¥¼ í•´ê²° í•  ìˆ˜ ìˆë‹¤. ì „ì²´ ì†ŒìŠ¤class Solution &#123; public String solution(String new_id) &#123; String id = new_id.toLowerCase(); id = id.replaceAll(&quot;[^-_.a-z0-9]&quot;, &quot;&quot;); id = id.replaceAll(&quot;[.]&#123;2,&#125;&quot;, &quot;.&quot;); id = id.replaceAll(&quot;^[.]|[.]$&quot;, &quot;&quot;); if (id.equals(&quot;&quot;)) &#123; id += &quot;a&quot;; &#125; if (id.length() &gt;= 16) &#123; id = id.substring(0, 15); id = id.replaceAll(&quot;[.]$&quot;, &quot;&quot;); &#125; while (id.length() &lt;= 2) &#123; id += id.charAt(id.length() - 1); &#125; return id; &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ë¬¸ìì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/"},{"name":"ì •ê·œ í‘œí˜„ì‹","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´/ì •ê·œ-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/%EC%A0%95%EA%B7%9C-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Python","slug":"algorithm/programmers/string/77484-ë¡œë˜ì˜ìµœê³ ìˆœìœ„ì™€ìµœì €ìˆœìœ„-python","date":"2022-01-04T11:10:40.000Z","updated":"2024-11-28T13:59:33.096Z","comments":true,"path":"2022/01/04/algorithm/programmers/string/77484-ë¡œë˜ì˜ìµœê³ ìˆœìœ„ì™€ìµœì €ìˆœìœ„-python/","link":"","permalink":"https://ckck803.github.io/2022/01/04/algorithm/programmers/string/77484-%EB%A1%9C%EB%98%90%EC%9D%98%EC%B5%9C%EA%B3%A0%EC%88%9C%EC%9C%84%EC%99%80%EC%B5%9C%EC%A0%80%EC%88%9C%EC%9C%84-python/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/77484 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Java í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Python def ranking(cnt): if cnt == 6: return 1 elif cnt == 5: return 2 elif cnt == 4: return 3 elif cnt == 3: return 4 elif cnt == 2: return 5 else: return 6def cmp(lottos, win_nums): answer = [] cnt = 0 zeros = 0 for i in lottos: if i == 0: zeros += 1 elif i in win_nums: cnt += 1 answer.append(ranking(cnt+zeros)) answer.append(ranking(cnt)) return answerdef solution(lottos, win_nums): answer = cmp(lottos, win_nums) return answer","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/77484 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Java í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Python def ranking(cnt): if cnt == 6: return 1 elif cnt == 5: return 2 elif cnt == 4: return 3 elif cnt == 3: return 4 elif cnt == 2: return 5 else: return 6def cmp(lottos, win_nums): answer = [] cnt = 0 zeros = 0 for i in lottos: if i == 0: zeros += 1 elif i in win_nums: cnt += 1 answer.append(ranking(cnt+zeros)) answer.append(ranking(cnt)) return answerdef solution(lottos, win_nums): answer = cmp(lottos, win_nums) return answer","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ë¬¸ìì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/"},{"name":"ì •ê·œ í‘œí˜„ì‹","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´/ì •ê·œ-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/%EC%A0%95%EA%B7%9C-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Java","slug":"algorithm/programmers/string/77484-ë¡œë˜ì˜ìµœê³ ìˆœìœ„ì™€ìµœì €ìˆœìœ„-java","date":"2022-01-04T10:10:40.000Z","updated":"2024-11-28T13:59:33.831Z","comments":true,"path":"2022/01/04/algorithm/programmers/string/77484-ë¡œë˜ì˜ìµœê³ ìˆœìœ„ì™€ìµœì €ìˆœìœ„-java/","link":"","permalink":"https://ckck803.github.io/2022/01/04/algorithm/programmers/string/77484-%EB%A1%9C%EB%98%90%EC%9D%98%EC%B5%9C%EA%B3%A0%EC%88%9C%EC%9C%84%EC%99%80%EC%B5%9C%EC%A0%80%EC%88%9C%EC%9C%84-java/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/77484 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Java í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Python class Solution &#123; private int findScore(int value) &#123; if (value == 6) &#123; return 1; &#125; else if (value == 5) &#123; return 2; &#125; else if (value == 4) &#123; return 3; &#125; else if (value == 3) &#123; return 4; &#125; else if (value == 2) &#123; return 5; &#125; else &#123; return 6; &#125; &#125; private int[] cmpStrings(int[] lottos, int[] win_nums) &#123; int[] result = new int[2]; int length = lottos.length; int zeroCnt = 0; int sameCnt = 0; for (int i = 0; i &lt; length; i++) &#123; if (lottos[i] == 0) &#123; zeroCnt++; continue; &#125; for (int j = 0; j &lt; length; j++) &#123; if (lottos[i] == win_nums[j]) &#123; sameCnt++; &#125; &#125; &#125; result[0] = findScore(sameCnt + zeroCnt); result[1] = findScore(sameCnt); return result; &#125; public int[] solution(int[] lottos, int[] win_nums) &#123; int[] answer = new int[2]; answer = cmpStrings(lottos, win_nums); return answer; &#125;&#125;","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/77484 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Java í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Python class Solution &#123; private int findScore(int value) &#123; if (value == 6) &#123; return 1; &#125; else if (value == 5) &#123; return 2; &#125; else if (value == 4) &#123; return 3; &#125; else if (value == 3) &#123; return 4; &#125; else if (value == 2) &#123; return 5; &#125; else &#123; return 6; &#125; &#125; private int[] cmpStrings(int[] lottos, int[] win_nums) &#123; int[] result = new int[2]; int length = lottos.length; int zeroCnt = 0; int sameCnt = 0; for (int i = 0; i &lt; length; i++) &#123; if (lottos[i] == 0) &#123; zeroCnt++; continue; &#125; for (int j = 0; j &lt; length; j++) &#123; if (lottos[i] == win_nums[j]) &#123; sameCnt++; &#125; &#125; &#125; result[0] = findScore(sameCnt + zeroCnt); result[1] = findScore(sameCnt); return result; &#125; public int[] solution(int[] lottos, int[] win_nums) &#123; int[] answer = new int[2]; answer = cmpStrings(lottos, win_nums); return answer; &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ë¬¸ìì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/"},{"name":"ì •ê·œ í‘œí˜„ì‹","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´/ì •ê·œ-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/%EC%A0%95%EA%B7%9C-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Cpp","slug":"algorithm/programmers/string/77484-ë¡œë˜ì˜ìµœê³ ìˆœìœ„ì™€ìµœì €ìˆœìœ„-cpp","date":"2022-01-04T09:10:40.000Z","updated":"2024-11-28T13:59:33.242Z","comments":true,"path":"2022/01/04/algorithm/programmers/string/77484-ë¡œë˜ì˜ìµœê³ ìˆœìœ„ì™€ìµœì €ìˆœìœ„-cpp/","link":"","permalink":"https://ckck803.github.io/2022/01/04/algorithm/programmers/string/77484-%EB%A1%9C%EB%98%90%EC%9D%98%EC%B5%9C%EA%B3%A0%EC%88%9C%EC%9C%84%EC%99%80%EC%B5%9C%EC%A0%80%EC%88%9C%EC%9C%84-cpp/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/77484 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Java í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Python #include &lt;bits/stdc++.h&gt;using namespace std;int findScore(int value) &#123; if (value == 6) &#123; return 1; &#125; else if (value == 5) &#123; return 2; &#125; else if (value == 4) &#123; return 3; &#125; else if (value == 3) &#123; return 4; &#125; else if (value == 2) &#123; return 5; &#125; else &#123; return 6; &#125;&#125;vector&lt;int&gt; cmpString(vector&lt;int&gt;&amp; lottos, vector&lt;int&gt;&amp; win_nums) &#123; vector&lt;int&gt; result; int zeroCnt = 0; int sameCnt = 0; for (int i = 0; i &lt; 6; i++) &#123; if (lottos[i] == 0) &#123; zeroCnt++; continue; &#125; for (int j = 0; j &lt; 6; j++) &#123; if (lottos[i] == win_nums[j]) &#123; sameCnt++; &#125; &#125; &#125; result.push_back(findScore(sameCnt + zeroCnt)); result.push_back(findScore(sameCnt)); return result;&#125;vector&lt;int&gt; solution(vector&lt;int&gt; lottos, vector&lt;int&gt; win_nums) &#123; vector&lt;int&gt; answer; answer = cmpString(lottos, win_nums); return answer;&#125;","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/77484 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Java í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë¡œë˜ì˜ ìµœê³  ìˆœìœ„ì™€ ìµœì € ìˆœìœ„ Python #include &lt;bits/stdc++.h&gt;using namespace std;int findScore(int value) &#123; if (value == 6) &#123; return 1; &#125; else if (value == 5) &#123; return 2; &#125; else if (value == 4) &#123; return 3; &#125; else if (value == 3) &#123; return 4; &#125; else if (value == 2) &#123; return 5; &#125; else &#123; return 6; &#125;&#125;vector&lt;int&gt; cmpString(vector&lt;int&gt;&amp; lottos, vector&lt;int&gt;&amp; win_nums) &#123; vector&lt;int&gt; result; int zeroCnt = 0; int sameCnt = 0; for (int i = 0; i &lt; 6; i++) &#123; if (lottos[i] == 0) &#123; zeroCnt++; continue; &#125; for (int j = 0; j &lt; 6; j++) &#123; if (lottos[i] == win_nums[j]) &#123; sameCnt++; &#125; &#125; &#125; result.push_back(findScore(sameCnt + zeroCnt)); result.push_back(findScore(sameCnt)); return result;&#125;vector&lt;int&gt; solution(vector&lt;int&gt; lottos, vector&lt;int&gt; win_nums) &#123; vector&lt;int&gt; answer; answer = cmpString(lottos, win_nums); return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ë¬¸ìì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/"},{"name":"ì •ê·œ í‘œí˜„ì‹","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´/ì •ê·œ-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/%EC%A0%95%EA%B7%9C-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Cpp","slug":"algorithm/programmers/string/67256-í‚¤íŒ¨ë“œëˆ„ë¥´ê¸°-cpp","date":"2022-01-03T11:10:40.000Z","updated":"2024-11-28T13:59:33.902Z","comments":true,"path":"2022/01/03/algorithm/programmers/string/67256-í‚¤íŒ¨ë“œëˆ„ë¥´ê¸°-cpp/","link":"","permalink":"https://ckck803.github.io/2022/01/03/algorithm/programmers/string/67256-%ED%82%A4%ED%8C%A8%EB%93%9C%EB%88%84%EB%A5%B4%EA%B8%B0-cpp/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/77484 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Python #include &lt;iostream&gt;#include &lt;map&gt;#include &lt;queue&gt;#include &lt;string&gt;#include &lt;vector&gt;using namespace std;bool isLeft(int number) &#123; if (number == 1 || number == 4 || number == 7) &#123; return true; &#125; return false;&#125;bool isRight(int number) &#123; if (number == 3 || number == 6 || number == 9) &#123; return true; &#125; return false;&#125;bool isMiddle(int number) &#123; if (number == 2 || number == 5 || number == 8 || number == 0) &#123; return true; &#125; return false;&#125;string solution(vector&lt;int&gt; numbers, string hand) &#123; string answer = &quot;&quot;; map&lt;int, pair&lt;int, int&gt;&gt; keypad; keypad[1] = &#123;0, 0&#125;, keypad[2] = &#123;0, 1&#125;, keypad[3] = &#123;0, 2&#125;; keypad[4] = &#123;1, 0&#125;, keypad[5] = &#123;1, 1&#125;, keypad[6] = &#123;1, 2&#125;; keypad[7] = &#123;2, 0&#125;, keypad[8] = &#123;2, 1&#125;, keypad[9] = &#123;2, 2&#125;; keypad[0] = &#123;3, 1&#125;; pair&lt;int, int&gt; left_point = &#123;3, 0&#125;; pair&lt;int, int&gt; right_point = &#123;3, 2&#125;; cout &lt;&lt; keypad[2].first &lt;&lt; &quot; &quot; &lt;&lt; keypad[2].second &lt;&lt; endl; for (int number : numbers) &#123; if (isLeft(number)) &#123; left_point = keypad[number]; answer.append(&quot;L&quot;); &#125; if (isRight(number)) &#123; right_point = keypad[number]; answer.append(&quot;R&quot;); &#125; if (isMiddle(number)) &#123; pair&lt;int, int&gt; key_point = keypad[number]; int left_dist = abs(key_point.first - left_point.first) + abs(key_point.second - left_point.second); int right_dist = abs(key_point.first - right_point.first) + abs(key_point.second - right_point.second); if (left_dist == right_dist) &#123; if (hand == &quot;right&quot;) &#123; right_point = keypad[number]; answer.append(&quot;R&quot;); &#125; else &#123; left_point = keypad[number]; answer.append(&quot;L&quot;); &#125; &#125; else if (left_dist &lt; right_dist) &#123; left_point = keypad[number]; answer.append(&quot;L&quot;); &#125; else &#123; right_point = keypad[number]; answer.append(&quot;R&quot;); &#125; &#125; &#125; return answer;&#125;","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/77484 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Cpp í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‚¤íŒ¨ë“œëˆ„ë¥´ê¸° Python #include &lt;iostream&gt;#include &lt;map&gt;#include &lt;queue&gt;#include &lt;string&gt;#include &lt;vector&gt;using namespace std;bool isLeft(int number) &#123; if (number == 1 || number == 4 || number == 7) &#123; return true; &#125; return false;&#125;bool isRight(int number) &#123; if (number == 3 || number == 6 || number == 9) &#123; return true; &#125; return false;&#125;bool isMiddle(int number) &#123; if (number == 2 || number == 5 || number == 8 || number == 0) &#123; return true; &#125; return false;&#125;string solution(vector&lt;int&gt; numbers, string hand) &#123; string answer = &quot;&quot;; map&lt;int, pair&lt;int, int&gt;&gt; keypad; keypad[1] = &#123;0, 0&#125;, keypad[2] = &#123;0, 1&#125;, keypad[3] = &#123;0, 2&#125;; keypad[4] = &#123;1, 0&#125;, keypad[5] = &#123;1, 1&#125;, keypad[6] = &#123;1, 2&#125;; keypad[7] = &#123;2, 0&#125;, keypad[8] = &#123;2, 1&#125;, keypad[9] = &#123;2, 2&#125;; keypad[0] = &#123;3, 1&#125;; pair&lt;int, int&gt; left_point = &#123;3, 0&#125;; pair&lt;int, int&gt; right_point = &#123;3, 2&#125;; cout &lt;&lt; keypad[2].first &lt;&lt; &quot; &quot; &lt;&lt; keypad[2].second &lt;&lt; endl; for (int number : numbers) &#123; if (isLeft(number)) &#123; left_point = keypad[number]; answer.append(&quot;L&quot;); &#125; if (isRight(number)) &#123; right_point = keypad[number]; answer.append(&quot;R&quot;); &#125; if (isMiddle(number)) &#123; pair&lt;int, int&gt; key_point = keypad[number]; int left_dist = abs(key_point.first - left_point.first) + abs(key_point.second - left_point.second); int right_dist = abs(key_point.first - right_point.first) + abs(key_point.second - right_point.second); if (left_dist == right_dist) &#123; if (hand == &quot;right&quot;) &#123; right_point = keypad[number]; answer.append(&quot;R&quot;); &#125; else &#123; left_point = keypad[number]; answer.append(&quot;L&quot;); &#125; &#125; else if (left_dist &lt; right_dist) &#123; left_point = keypad[number]; answer.append(&quot;L&quot;); &#125; else &#123; right_point = keypad[number]; answer.append(&quot;R&quot;); &#125; &#125; &#125; return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"}],"tags":[]},{"title":"Redux Saga","slug":"react/redux/redux-04-saga","date":"2022-01-01T05:31:46.000Z","updated":"2024-11-23T16:46:05.284Z","comments":true,"path":"2022/01/01/react/redux/redux-04-saga/","link":"","permalink":"https://ckck803.github.io/2022/01/01/react/redux/redux-04-saga/","excerpt":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° Redux Saga ì•¡ì…˜ì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ìˆë‹¤ê°€ íŠ¹ì • Action ì´ ë°œìƒí•˜ë©´ íŠ¹ì • ì‘ì—…ì„ ì§„í–‰í•œë‹¤. ë¹„ë™ê¸° ì‘ì—…ì„ ì§„í–‰í•  ë•Œ ê¸°ì¡´ ìš”ì²­ì„ ì·¨ì†Œ í•  ìˆ˜ ìˆë‹¤. íŠ¹ì • Action ì´ ë°œìƒí–ˆì„ ë•Œ ë‹¤ë¥¸ ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜ í•˜ê±°ë‚˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. Generator ì— ê¸°ë°˜í•œ ë¯¸ë“¤ì›¨ì–´ Generator í•¨ìˆ˜ì˜ íë¦„ì„ íŠ¹ì • êµ¬ê°„ì— ë©ˆì¶° ë†¨ë‹¤ê°€ ë‹¤ì‹œ ì‹¤í–‰ í•  ìˆ˜ ìˆë‹¤.return ê°’ì„ ì—¬ëŸ¬ë²ˆ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. import &#123; delay, put, takeEvery, takeLatest &#125; from &quot;redux-saga/effects&quot;;const SET_DIFF = &quot;counter/SET_DIFF&quot;;const INCREASE = &quot;counter/INCREASE&quot;;const DECREASE = &quot;counter/DECREASE&quot;;const INCREASE_ASYNC = &quot;NCREASE_ASYNC&quot;;const DECREASE_ASYNC = &quot;DECREASE_ASYNC&quot;;export const setDiff = (diff) =&gt; (&#123; type: SET_DIFF, diff &#125;);export const increase = () =&gt; (&#123; type: INCREASE &#125;);export const decrease = () =&gt; (&#123; type: DECREASE &#125;);export const increaseAsync = () =&gt; (&#123; type: INCREASE_ASYNC &#125;);export const decreaseAsync = () =&gt; (&#123; type: DECREASE_ASYNC &#125;);function* increaseSaga() &#123; yield delay(1000); yield put(increase()); // put ì€ dispatch ì™€ ë¹„ìŠ·í•œ ê°œë…&#125;function* decreaseSaga() &#123; yield delay(1000); yield put(decrease());&#125;export function* counterSaga() &#123; yield takeEvery(INCREASE_ASYNC, increaseSaga); yield takeLatest(DECREASE_ASYNC, decreaseSaga);&#125;const initialState = &#123; number: 0, diff: 1,&#125;;export default function counter(state = initialState, action) &#123; switch (action.type) &#123; case SET_DIFF: return &#123; ...state, diff: action.diff, &#125;; case INCREASE: return &#123; ...state, number: state.number + state.diff, &#125;; case DECREASE: return &#123; ...state, number: state.number - state.diff, &#125;; default: return state; &#125;&#125; import React from &quot;react&quot;;import &#123; useSelector, useDispatch &#125; from &quot;react-redux&quot;;import Counter from &quot;./Counter&quot;;import &#123; increase, decrease, setDiff, increaseAsync, decreaseAsync,&#125; from &quot;../modules/counter&quot;;const CounterContainer = () =&gt; &#123; const &#123; number, diff &#125; = useSelector((state) =&gt; (&#123; number: state.counter.number, &#125;)); const dispatch = useDispatch(); // const onIncrease = () =&gt; dispatch(increase()); // const onDecrease = () =&gt; dispatch(decrease()); const onIncrease = () =&gt; dispatch(increaseAsync()); const onDecrease = () =&gt; dispatch(decreaseAsync()); const onSetDiff = (diff) =&gt; dispatch(setDiff(diff)); return ( &lt;Counter number=&#123;number&#125; diff=&#123;diff&#125; onIncrease=&#123;onIncrease&#125; onDecrease=&#123;onDecrease&#125; onSetDiff=&#123;onSetDiff&#125; /&gt; );&#125;;export default CounterContainer;","text":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° Redux Saga ì•¡ì…˜ì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ìˆë‹¤ê°€ íŠ¹ì • Action ì´ ë°œìƒí•˜ë©´ íŠ¹ì • ì‘ì—…ì„ ì§„í–‰í•œë‹¤. ë¹„ë™ê¸° ì‘ì—…ì„ ì§„í–‰í•  ë•Œ ê¸°ì¡´ ìš”ì²­ì„ ì·¨ì†Œ í•  ìˆ˜ ìˆë‹¤. íŠ¹ì • Action ì´ ë°œìƒí–ˆì„ ë•Œ ë‹¤ë¥¸ ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜ í•˜ê±°ë‚˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. Generator ì— ê¸°ë°˜í•œ ë¯¸ë“¤ì›¨ì–´ Generator í•¨ìˆ˜ì˜ íë¦„ì„ íŠ¹ì • êµ¬ê°„ì— ë©ˆì¶° ë†¨ë‹¤ê°€ ë‹¤ì‹œ ì‹¤í–‰ í•  ìˆ˜ ìˆë‹¤.return ê°’ì„ ì—¬ëŸ¬ë²ˆ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. import &#123; delay, put, takeEvery, takeLatest &#125; from &quot;redux-saga/effects&quot;;const SET_DIFF = &quot;counter/SET_DIFF&quot;;const INCREASE = &quot;counter/INCREASE&quot;;const DECREASE = &quot;counter/DECREASE&quot;;const INCREASE_ASYNC = &quot;NCREASE_ASYNC&quot;;const DECREASE_ASYNC = &quot;DECREASE_ASYNC&quot;;export const setDiff = (diff) =&gt; (&#123; type: SET_DIFF, diff &#125;);export const increase = () =&gt; (&#123; type: INCREASE &#125;);export const decrease = () =&gt; (&#123; type: DECREASE &#125;);export const increaseAsync = () =&gt; (&#123; type: INCREASE_ASYNC &#125;);export const decreaseAsync = () =&gt; (&#123; type: DECREASE_ASYNC &#125;);function* increaseSaga() &#123; yield delay(1000); yield put(increase()); // put ì€ dispatch ì™€ ë¹„ìŠ·í•œ ê°œë…&#125;function* decreaseSaga() &#123; yield delay(1000); yield put(decrease());&#125;export function* counterSaga() &#123; yield takeEvery(INCREASE_ASYNC, increaseSaga); yield takeLatest(DECREASE_ASYNC, decreaseSaga);&#125;const initialState = &#123; number: 0, diff: 1,&#125;;export default function counter(state = initialState, action) &#123; switch (action.type) &#123; case SET_DIFF: return &#123; ...state, diff: action.diff, &#125;; case INCREASE: return &#123; ...state, number: state.number + state.diff, &#125;; case DECREASE: return &#123; ...state, number: state.number - state.diff, &#125;; default: return state; &#125;&#125; import React from &quot;react&quot;;import &#123; useSelector, useDispatch &#125; from &quot;react-redux&quot;;import Counter from &quot;./Counter&quot;;import &#123; increase, decrease, setDiff, increaseAsync, decreaseAsync,&#125; from &quot;../modules/counter&quot;;const CounterContainer = () =&gt; &#123; const &#123; number, diff &#125; = useSelector((state) =&gt; (&#123; number: state.counter.number, &#125;)); const dispatch = useDispatch(); // const onIncrease = () =&gt; dispatch(increase()); // const onDecrease = () =&gt; dispatch(decrease()); const onIncrease = () =&gt; dispatch(increaseAsync()); const onDecrease = () =&gt; dispatch(decreaseAsync()); const onSetDiff = (diff) =&gt; dispatch(setDiff(diff)); return ( &lt;Counter number=&#123;number&#125; diff=&#123;diff&#125; onIncrease=&#123;onIncrease&#125; onDecrease=&#123;onDecrease&#125; onSetDiff=&#123;onSetDiff&#125; /&gt; );&#125;;export default CounterContainer; import &#123; combineReducers &#125; from &quot;redux&quot;;import counter, &#123; counterSaga &#125; from &quot;./counter&quot;;import todos from &quot;./todos&quot;;import &#123; all &#125; from &quot;redux-saga/effects&quot;;const rootReducer = combineReducers(&#123; counter, todos,&#125;);export function* rootSaga() &#123; yield all([counterSaga()]); // all ì€ ë°°ì—´ ì•ˆì˜ ì—¬ëŸ¬ ì‚¬ê°€ë¥¼ ë™ì‹œì— ì‹¤í–‰ì‹œì¼œì¤ë‹ˆë‹¤.&#125;export default rootReducer; import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import &#x27;./index.css&#x27;;import App from &#x27;./App&#x27;;import reportWebVitals from &#x27;./reportWebVitals&#x27;;import &#123; createStore, applyMiddleware &#125; from &#x27;redux&#x27;;import rootReducer, &#123; rootSaga &#125; from &#x27;./modules&#x27;;import &#123; Provider &#125; from &#x27;react-redux&#x27;;import myLogger from &#x27;./middlewares/myLogger&#x27;;import createSagaMiddleware from &#x27;redux-saga&#x27;;const sagaMiddleware = createSagaMiddleware();const store = createStore(rootReducer, applyMiddleware(sagaMiddleware, myLogger));sagaMiddleware.run(rootSaga);ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById(&#x27;root&#x27;));reportWebVitals();","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Redux","slug":"Frontend/Redux","permalink":"https://ckck803.github.io/categories/Frontend/Redux/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"Redux Middleware ë§Œë“¤ê¸°","slug":"react/redux/redux-03-middleware","date":"2021-12-31T21:31:46.000Z","updated":"2024-11-23T16:46:05.211Z","comments":true,"path":"2022/01/01/react/redux/redux-03-middleware/","link":"","permalink":"https://ckck803.github.io/2022/01/01/react/redux/redux-03-middleware/","excerpt":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° Redux Middleware ë§Œë“¤ê¸°Middleware ìƒì„±Dispatch ë˜ëŠ” ì´ë ¥ì„ ì½˜ì†”ë¡œ ì°ëŠ” ë¡œê±°ë¥¼ ë§Œë“ ë‹¤. const myLogger = store =&gt; next =&gt; action =&gt; &#123; console.log(action); const result = next(action); // ë°˜í™˜í•˜ëŠ” result ëŠ” Container ì—ì„œ Disaptch ëì„ ë•Œ ê²°ê³¼ ë¬¼ì´ result return result;&#125;export default myLogger; Middleware ì ìš©applyMiddleware í•¨ìˆ˜ë¥¼ ì´ìš©í•´ Redux ì— ë¯¸ë“¤ì›¨ì–´ë¥¼ ì ìš©í•œë‹¤. import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import &#x27;./index.css&#x27;;import App from &#x27;./App&#x27;;import reportWebVitals from &#x27;./reportWebVitals&#x27;;import &#123; createStore, applyMiddleware &#125; from &#x27;redux&#x27;;import rootReducer from &#x27;./modules&#x27;;import &#123; Provider &#125; from &#x27;react-redux&#x27;;import myLogger from &#x27;./middlewares/myLogger&#x27;;const store = createStore(rootReducer, applyMiddleware(myLogger));ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById(&#x27;root&#x27;));reportWebVitals();","text":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° Redux Middleware ë§Œë“¤ê¸°Middleware ìƒì„±Dispatch ë˜ëŠ” ì´ë ¥ì„ ì½˜ì†”ë¡œ ì°ëŠ” ë¡œê±°ë¥¼ ë§Œë“ ë‹¤. const myLogger = store =&gt; next =&gt; action =&gt; &#123; console.log(action); const result = next(action); // ë°˜í™˜í•˜ëŠ” result ëŠ” Container ì—ì„œ Disaptch ëì„ ë•Œ ê²°ê³¼ ë¬¼ì´ result return result;&#125;export default myLogger; Middleware ì ìš©applyMiddleware í•¨ìˆ˜ë¥¼ ì´ìš©í•´ Redux ì— ë¯¸ë“¤ì›¨ì–´ë¥¼ ì ìš©í•œë‹¤. import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import &#x27;./index.css&#x27;;import App from &#x27;./App&#x27;;import reportWebVitals from &#x27;./reportWebVitals&#x27;;import &#123; createStore, applyMiddleware &#125; from &#x27;redux&#x27;;import rootReducer from &#x27;./modules&#x27;;import &#123; Provider &#125; from &#x27;react-redux&#x27;;import myLogger from &#x27;./middlewares/myLogger&#x27;;const store = createStore(rootReducer, applyMiddleware(myLogger));ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById(&#x27;root&#x27;));reportWebVitals();","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Redux","slug":"Frontend/Redux","permalink":"https://ckck803.github.io/categories/Frontend/Redux/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡°","slug":"computer-science/network/http/http-message","date":"2021-12-27T14:16:32.000Z","updated":"2024-02-18T16:19:54.518Z","comments":true,"path":"2021/12/27/computer-science/network/http/http-message/","link":"","permalink":"https://ckck803.github.io/2021/12/27/computer-science/network/http/http-message/","excerpt":"ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ - HTTP ë„¤íŠ¸ì›Œí¬ - HTTP Version ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡° ë„¤íŠ¸ì›Œí¬ - HTTPS Post not found: computer-science/network/tcp HTTP ë©”ì‹œì§€ êµ¬ì¡° HyperText Transfer Protocol ì˜ ì•½ìë¡œ HTML ë¬¸ì„œë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ê·œì•½ì¡°ê±´ì´ë‹¤.HTTPëŠ” TCP&#x2F;IP ê¸°ë°˜ìœ¼ë¡œ ë˜ì–´ìˆë‹¤. HTTP í†µì‹  ë°©ì‹HTTPëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìš”ì²­&#x2F;ì‘ë‹µ êµ¬ì¡° Client ìš”ì²­ MessageJson ë°ì´í„° curl â€“http1.1 http://localhost:8888/greeting -v -H â€œContent-Type: application&#x2F;jsonâ€ -d â€˜{â€œhelloâ€:â€jsonâ€}â€™ POST /greeting HTTP/1.1Host: localhost:8888Accept: */*Content-Length: 16Content-Type: application/jsonUser-Agent: curl/7.71.1&#123;&quot;hello&quot;:&quot;json&quot;&#125;","text":"ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ - HTTP ë„¤íŠ¸ì›Œí¬ - HTTP Version ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡° ë„¤íŠ¸ì›Œí¬ - HTTPS Post not found: computer-science/network/tcp HTTP ë©”ì‹œì§€ êµ¬ì¡° HyperText Transfer Protocol ì˜ ì•½ìë¡œ HTML ë¬¸ì„œë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ê·œì•½ì¡°ê±´ì´ë‹¤.HTTPëŠ” TCP&#x2F;IP ê¸°ë°˜ìœ¼ë¡œ ë˜ì–´ìˆë‹¤. HTTP í†µì‹  ë°©ì‹HTTPëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìš”ì²­&#x2F;ì‘ë‹µ êµ¬ì¡° Client ìš”ì²­ MessageJson ë°ì´í„° curl â€“http1.1 http://localhost:8888/greeting -v -H â€œContent-Type: application&#x2F;jsonâ€ -d â€˜{â€œhelloâ€:â€jsonâ€}â€™ POST /greeting HTTP/1.1Host: localhost:8888Accept: */*Content-Length: 16Content-Type: application/jsonUser-Agent: curl/7.71.1&#123;&quot;hello&quot;:&quot;json&quot;&#125; Multipart Form ë°ì´í„° curl â€“http1.1 http://localhost:8888/greeting -v -F â€˜file&#x3D;&#x2F;Users&#x2F;dongwoo-yang&#x2F;Desktop&#x2F;alliance-point.pngâ€™ POST /greeting HTTP/1.1Host: localhost:8888Accept: */*Content-Length: 185Content-Type: multipart/form-data; boundary=------------------------d3aa01d8dc675444User-Agent: curl/7.71.1--------------------------d3aa01d8dc675444Content-Disposition: form-data; name=&quot;file&quot;/Users/dongwoo-yang/Desktop/alliance-point.png--------------------------d3aa01d8dc675444-- Server ì‘ë‹µ messageHTTP/1.1 200 OKDate: Wed, 05 Jan 2022 03:04:44 GMTContent-Length: 32Content-Type: text/html; charset=utf-8&lt;html&gt;&lt;body&gt;Hello&lt;/body&gt;&lt;/html&gt; HTTP Request êµ¬ì¡° Start Line Header Body Start LinePOST /greeting HTTP/1.1 Http Method requestê°€ ì˜ë„í•œ actionì„ ì •ì˜í•˜ëŠ” ë¶€ë¶„ Http Method ì¢…ë¥˜ëŠ” GET , POST , PUT , DELETE , PATCH , OPTIONS ë“±ë“±ì´ ìˆë‹¤. Request Target Http ìš”ì²­ì´ ì „ì†¡ë˜ëŠ” ì£¼ì†Œ(URI) Controller (Handler) ì£¼ì†Œë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. HTTP Version HTTP Versionì„ ëª…ì‹œí•œë‹¤. 1.1ì„ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ê³  1.0 , 1.1 , 2.0 , 3.0 ì´ ìˆë‹¤. Header Key:Value í˜•íƒœë¡œ êµ¬ì„±ë¼ ìˆë‹¤. Host: localhost:8888Accept: */*Content-Length: 16Content-Type: application/jsonUser-Agent: curl/7.71.1 Content-Type íŒŒì¼ì˜ ì¢…ë¥˜ë¥¼ ì§€ì • ë³´í†µì€ MIME íƒ€ì…(ì „ì ë©”ì¼ì„ ìœ„í•´ ë§Œë“¤ì–´ì§„ ì‹ë³„ì)ì´ë¼ëŠ” ì‹ë³„ìë¥¼ ê¸°ìˆ  Content-Length ë°”ë””ì˜ í¬ê¸° ì••ì¶•ì´ ì´ë£¨ì–´ì§€ëŠ” ê²½ìš°ëŠ” ì••ì¶• í›„ì˜ í¬ê¸° Content-Encoding ì••ì¶•ì´ ì´ë£¨ì–´ì§„ ê²½ìš° ì••ì¶• í˜•ì‹ì„ ì„¤ëª…í•œë‹¤. User-Agent í´ë¼ì´ì–¸íŠ¸ê°€ ìì‹ ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„ì„ ë„£ëŠ” ê³³ ë¸Œë¼ìš°ì €ì˜ ì¢…ë¥˜ë‚˜ ë²„ì „ì„ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤. Body í—¤ë” ëì— ë¹ˆ ì¤„ ì„ ë„£ìœ¼ë©´ ê·¸ ì´í›„ëŠ” ëª¨ë‘ ë°”ë””ê°€ ëœë‹¤. Host: localhost:8888Accept: */*Content-Length: 185Content-Type: multipart/form-data; boundary=------------------------d3aa01d8dc675444User-Agent: curl/7.71.1 --------------------------d3aa01d8dc675444Content-Disposition: form-data; name=&quot;file&quot;/Users/dongwoo-yang/Desktop/alliance-point.png--------------------------d3aa01d8dc675444--","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"HTTP","slug":"CS/Network/HTTP","permalink":"https://ckck803.github.io/categories/CS/Network/HTTP/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - HTTP Version","slug":"computer-science/network/http/http-version","date":"2021-12-27T14:16:32.000Z","updated":"2024-02-18T16:19:54.518Z","comments":true,"path":"2021/12/27/computer-science/network/http/http-version/","link":"","permalink":"https://ckck803.github.io/2021/12/27/computer-science/network/http/http-version/","excerpt":"HTTP Version ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ - HTTP ë„¤íŠ¸ì›Œí¬ - HTTP Version ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡° ë„¤íŠ¸ì›Œí¬ - HTTPS Post not found: computer-science/network/tcp HTTP&#x2F;0.9 ê°„ë‹¨í•˜ê²Œ HTML ê°ì²´ ë¥¼ ë°›ì•„ì˜¤ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ í”„ë¡œí† ì½œì´ë‹¤. ë•Œë¬¸ì— GETë©”ì„œë“œ ë§Œì„ ì§€ì›í•œë‹¤. ë©€í‹°ë¯¸ë””ì–´ ì½˜í…ì¸ ì— ëŒ€í•œ MIME íƒ€ì…ì´ë‚˜, HTTP í•´ë”, ë²„ì „ ë²ˆí˜¸ëŠ” ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. HTTP&#x2F;1.0 ë²„ì „ ë²ˆí˜¸, HTTP í—¤ë”, ì¶”ê°€ ë©”ì„œë“œ, ë©€í‹°ë¯¸ë””ì–´ ê°ì²´ ì²˜ë¦¬ë¥¼ ì¶”ê°€í–ˆë‹¤. ì›¹í˜ì´ì§€ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” í¼ì„ ì‹¤í˜„ í•˜ë‚˜ì˜ ì»¤ë„¥ì…˜ì— í•˜ë‚˜ì˜ ìš”ì²­ê³¼ í•˜ë‚˜ì˜ ì‘ë‹µë§Œ ê°€ëŠ¥ ìš”ì²­GET /greeting HTTP/1.0Host: localhost:18888Connection: closeAccept: */*User-Agent: curl/7.71.1 ì‘ë‹µ","text":"HTTP Version ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ - HTTP ë„¤íŠ¸ì›Œí¬ - HTTP Version ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡° ë„¤íŠ¸ì›Œí¬ - HTTPS Post not found: computer-science/network/tcp HTTP&#x2F;0.9 ê°„ë‹¨í•˜ê²Œ HTML ê°ì²´ ë¥¼ ë°›ì•„ì˜¤ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ í”„ë¡œí† ì½œì´ë‹¤. ë•Œë¬¸ì— GETë©”ì„œë“œ ë§Œì„ ì§€ì›í•œë‹¤. ë©€í‹°ë¯¸ë””ì–´ ì½˜í…ì¸ ì— ëŒ€í•œ MIME íƒ€ì…ì´ë‚˜, HTTP í•´ë”, ë²„ì „ ë²ˆí˜¸ëŠ” ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. HTTP&#x2F;1.0 ë²„ì „ ë²ˆí˜¸, HTTP í—¤ë”, ì¶”ê°€ ë©”ì„œë“œ, ë©€í‹°ë¯¸ë””ì–´ ê°ì²´ ì²˜ë¦¬ë¥¼ ì¶”ê°€í–ˆë‹¤. ì›¹í˜ì´ì§€ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” í¼ì„ ì‹¤í˜„ í•˜ë‚˜ì˜ ì»¤ë„¥ì…˜ì— í•˜ë‚˜ì˜ ìš”ì²­ê³¼ í•˜ë‚˜ì˜ ì‘ë‹µë§Œ ê°€ëŠ¥ ìš”ì²­GET /greeting HTTP/1.0Host: localhost:18888Connection: closeAccept: */*User-Agent: curl/7.71.1 ì‘ë‹µHTTP/1.0 200 OKDate: Tue, 04 Jan 2022 16:48:00 GMTContent-Length: 32Content-Type: text/html; charset=utf-8 HTTP&#x2F;1.0+ keep-alive ì»¤ë„¥ì…˜ ê°€ìƒ í˜¸ìŠ¤íŒ… ì§€ì› í”„ë¡ì‹œ ì—°ê²° ìš”ì²­ë§ˆë‹¤ connectionì„ í•´ì¤˜ì•¼ í•œë‹¤. HTTP&#x2F;1.1 HTTP ì˜ ì²«ë²ˆì§¸ í‘œì¤€ ë²„ì „ HTTP&#x2F;1.1ì€ HTTP ì„¤ê³„ì˜ êµ¬ì¡°ì  ê²°í•¨ êµì •, ë‘ë“œëŸ¬ì§„ ì„±ëŠ¥ ìµœì í™” ì˜ëª»ëœ ê¸°ëŠ¥ì œê±°ì— ì§‘ì¤‘ Persistent Connection ë„ì… íŒŒì´í”„ ë¼ì´ë‹ ê¸°ë²• ë„ì… Head Of Line Blocking ë¬¸ì œê°€ ìˆìŒ domain sharing ë°©ì‹ PipeLining ê¸°ë²• í•˜ë‚˜ì˜ ì»¤ë„¥ì…˜ì— ë‹¤ìˆ˜ì˜ Request ì™€ Response ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ë²• Head Of Line Blocking ì•ì„  ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ê°€ ëŠ¦ì–´ì§€ë©´ ë‹¤ìŒ ìš”ì²­ë“¤ì— ëŒ€í•œ ì²˜ë¦¬ë“¤ë„ ë‹¤ ëŠ¦ì–´ì§„ë‹¤. HTTP&#x2F;2.0 ê¸°ì¡´ HTTP ë¥¼ ê°œì„  ë° ì„±ëŠ¥ í–¥ìƒì— ì´ˆì ì„ ë§ì¶˜ í”„ë¡œí† ì½œ HTTP&#x2F;1.1 ì„±ëŠ¥ ë¬¸ì œë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ êµ¬ê¸€ì˜ SPDY í”„ë¡œí† ì½œì„ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ê°€ ì§„í–‰ì¤‘ì¸ í”„ë¡œí† ì½œ ë©€í‹°í”Œë ‰ì‹± ì„ í†µí•´ latencyë¥¼ ì¤„ì´ê³  í•´ë” ì••ì¶•ì„ í†µí•´ ì¤‘ë³µëœ í•´ë” ê°’ì„ ì—†ì•  Overheadë¥¼ ìµœì†Œí™” (í—ˆí”„ë§Œ ì¸ì½”ë”© ì‚¬ìš©) ì„œë²„ í‘¸ì‹œ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤. Client ê°€ ìš”ì²­í•˜ì§€ ì•Šì€ ìì›ì„ ì„œë²„ì—ì„œ ë³´ë‚´ì¤€ë‹¤. HTTP&#x2F;2.0 í”„ë¡œí† ì½œê³¼ HTTP&#x2F;1.1ì˜ ì°¨ì´ì  HTTP&#x2F;1.1ì€ ê¸°ë³¸ì ìœ¼ë¡œ Connectionë‹¹ í•˜ë‚˜ì˜ ìš”ì²­ì„ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ê³„ ë™ì‹œ ì „ì†¡ì´ ë¶ˆê°€ëŠ¥í•˜ê³  ìš”ì²­ê³¼ ì‘ë‹µì´ ìˆœì°¨ì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤. HTTP ë¬¸ì„œ ì•ˆì— í¬í•¨ëœ ë‹¤ìˆ˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì²˜ë¦¬í•˜ë ¤ë©´ ìš”ì²­í•  ë¦¬ì†ŒìŠ¤ ê°œìˆ˜ì— ë¹„ë˜í•´ ë ˆì´í„´ì‹œê°€ ê¸¸ì–´ì§„ë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"HTTP","slug":"CS/Network/HTTP","permalink":"https://ckck803.github.io/categories/CS/Network/HTTP/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - HTTPS","slug":"computer-science/network/http/https","date":"2021-12-27T14:16:32.000Z","updated":"2024-02-18T16:19:54.518Z","comments":true,"path":"2021/12/27/computer-science/network/http/https/","link":"","permalink":"https://ckck803.github.io/2021/12/27/computer-science/network/http/https/","excerpt":"ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ - HTTP ë„¤íŠ¸ì›Œí¬ - HTTP Version ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡° ë„¤íŠ¸ì›Œí¬ - HTTPS Post not found: computer-science/network/tcp ë„¤íŠ¸ì›Œí¬ - HTTPSHTTPSì˜ ë§ˆì§€ë§‰ SëŠ” Over Secure Socket Layerì˜ ì•½ìë¡œ ë³´ì•ˆì´ ê°•í™”ëœ HTTPë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. SSL&#x2F;TLS ì—ì„œ HTTP ê°€ ì‘ë™í•  ê²½ìš° HTTPS ë¼ê³  ë¶€ë¥¸ë‹¤. HTTPS ì™€ SSL ì´ ê°™ì€ ê²ƒì´ ì•„ë‹Œ SSL ìœ„ì— ì˜¬ë¼ê°€ëŠ” í”„ë¡œí† ì½œ ì¤‘ í•˜ë‚˜ê°€ ë°”ë¡œ HTTPS ë‹¤. ì•”í˜¸í™” ì´ì  ê¸°ë°€ì„±ì˜ ì›ì¹™ ì—ì„œ ë³´ë©´ í†µì‹  ë‚´ìš©ì´ ê³µê²©ìì—ê²Œ ë…¸ì¶œ(snipping) ë˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤. ë¬´ê²°ì„±ì˜ ì›ì¹™ ì—ì„œ ë³´ë©´ í†µì‹  ë‚´ìš©ì„ íƒ€ì¸ì´ í•¨ë¶€ë¡œ ë³€ê²½ í•˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤. ê¸°ë°€ì„±ì˜ ì›ì¹™ê³¼ ë¬´ê²°ì„±ì˜ ì›ì¹™ì„ í†µí•´ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë¡œ ì‹ ë¢°ë¥¼ í•  ìˆ˜ ìˆë‹¤. SSL (Secure Socket Layer)-","text":"ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ - HTTP ë„¤íŠ¸ì›Œí¬ - HTTP Version ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡° ë„¤íŠ¸ì›Œí¬ - HTTPS Post not found: computer-science/network/tcp ë„¤íŠ¸ì›Œí¬ - HTTPSHTTPSì˜ ë§ˆì§€ë§‰ SëŠ” Over Secure Socket Layerì˜ ì•½ìë¡œ ë³´ì•ˆì´ ê°•í™”ëœ HTTPë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. SSL&#x2F;TLS ì—ì„œ HTTP ê°€ ì‘ë™í•  ê²½ìš° HTTPS ë¼ê³  ë¶€ë¥¸ë‹¤. HTTPS ì™€ SSL ì´ ê°™ì€ ê²ƒì´ ì•„ë‹Œ SSL ìœ„ì— ì˜¬ë¼ê°€ëŠ” í”„ë¡œí† ì½œ ì¤‘ í•˜ë‚˜ê°€ ë°”ë¡œ HTTPS ë‹¤. ì•”í˜¸í™” ì´ì  ê¸°ë°€ì„±ì˜ ì›ì¹™ ì—ì„œ ë³´ë©´ í†µì‹  ë‚´ìš©ì´ ê³µê²©ìì—ê²Œ ë…¸ì¶œ(snipping) ë˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤. ë¬´ê²°ì„±ì˜ ì›ì¹™ ì—ì„œ ë³´ë©´ í†µì‹  ë‚´ìš©ì„ íƒ€ì¸ì´ í•¨ë¶€ë¡œ ë³€ê²½ í•˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤. ê¸°ë°€ì„±ì˜ ì›ì¹™ê³¼ ë¬´ê²°ì„±ì˜ ì›ì¹™ì„ í†µí•´ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë¡œ ì‹ ë¢°ë¥¼ í•  ìˆ˜ ìˆë‹¤. SSL (Secure Socket Layer)- SSLì€ ì›ë˜ Netscapeì—ì„œ ì›¹ ì„œë²„ì™€ ë¸Œë¼ìš°ì € ì‚¬ì´ì˜ ë³´ì•ˆì„ ìœ„í•´ ë§Œë“¤ì–´ì§„ í”„ë¡œí† ì½œì´ë‹¤. ì¸ì¦ì„œë¥¼ ì´ìš©í•´ ì‚¬ìš©ìì™€ ì„œë²„ë¥¼ ì¸ì¦í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤. TLS (Transport Layer Secure)ë„¤ìŠ¤ì¼€ì´í”„ì‚¬ì—ì„œ ë°œëª…ëœ SSLì´ êµ­ì œ ì¸í„°ë„· í‘œì¤€í™” ê¸°êµ¬ì¸ IETFì˜ ê´€ë¦¬ë¡œ ë³€ê²½ë˜ë©´ì„œ TLS(Transport Layer Secure)ë¡œ ì´ë¦„ì´ ë°”ë€Œì—ˆë‹¤. ë•Œë¬¸ì— SSL 3.0ì€ TLS 1.0ì„ ê³„ìŠ¹í•œë‹¤. SSLì˜ ì•”í˜¸í™” ë°©ì‹ ëŒ€ì¹­í‚¤ ê³µê°œí‚¤ ëŒ€ì¹­í‚¤ ë¬¸ì„œë¥¼ ì•”í˜¸í™” ë³µí˜¸í™” í•  ë•Œ ê°™ì€ í‚¤ë¥¼ ì‚¬ìš©í•œë‹¤. ê³µê°œí‚¤ ë¬¸ì„œë¥¼ ì•”í˜¸í™” ë³µí˜¸í™” í•˜ëŠ”ë° ë‹¤ë¥¸í‚¤ë¥¼ ì‚¬ìš©í•œë‹¤. Private Key ë¡œ ì•”í˜¸í™”ëœ ë¬¸ì„œëŠ” Public Key ë¡œë§Œ ë³µí˜¸í™”í•  ìˆ˜ ìˆë‹¤. ë°˜ëŒ€ë¡œ Public Key ë¡œ ì•”í˜¸í™”ëœ ë¬¸ì„œëŠ” Private Key ë¡œë§Œ ë³µí˜¸í™”í•  ìˆ˜ ìˆë‹¤. ì¸ì¦ì„œì˜ ì—­í•  í´ë¼ì´ì–¸íŠ¸ê°€ ì ‘ì†í•œ ì„œë²„ê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì„œë²„ì„ì„ ë³´ì¥í•œë‹¤. SSL í†µì‹ ì— ì‚¬ìš©í•  ê³µê°œí‚¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì œê³µí•œë‹¤. CA(ì¸ì¦ì„œ)CAì•ˆì—ëŠ” ì„œë¹„ìŠ¤ì˜ ì •ë³´ì™€ ì„œë²„ ì¸¡ ê³µê°œí‚¤ê°€ ë“¤ì–´ê°€ ìˆë‹¤.ì„œë¹„ìŠ¤ ì •ë³´ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ê°€ ì ‘ì†í•œ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ê°€ ì˜ë„í•œ ì„œë²„ê°€ ë§ëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹´ê³  ìˆê³ , ì„œë²„ ì¸¡ ê³µê°œí‚¤ë¥¼ í†µí•´ ì„œë²„ì™€ í†µì‹ ì„ í•  ë•Œ ì‚¬ìš©í•  ê³µê°œí‚¤ì™€ ê·¸ ê³µê°œí‚¤ì˜ ì•”í˜¸í™” ë°©ë²•ë“¤ì˜ ì •ë³´ë¥¼ ë‹´ê³  ìˆë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"HTTP","slug":"CS/Network/HTTP","permalink":"https://ckck803.github.io/categories/CS/Network/HTTP/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - HTTP","slug":"computer-science/network/http/http","date":"2021-12-27T03:16:32.000Z","updated":"2024-02-18T16:19:54.518Z","comments":true,"path":"2021/12/27/computer-science/network/http/http/","link":"","permalink":"https://ckck803.github.io/2021/12/27/computer-science/network/http/http/","excerpt":"ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ - HTTP ë„¤íŠ¸ì›Œí¬ - HTTP Version ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡° ë„¤íŠ¸ì›Œí¬ - HTTPS Post not found: computer-science/network/tcp HTTPë€ HyperText Transfer Protocol ì˜ ì•½ìë¡œ HTML ë¬¸ì„œë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ê·œì•½ì¡°ê±´ì´ë‹¤.HTTPëŠ” TCP&#x2F;IP ê¸°ë°˜ìœ¼ë¡œ ë˜ì–´ìˆë‹¤. Client - Server êµ¬ì¡° Stateless (ë¬´ìƒíƒœ) í”„ë¡œí† ì½œ ë¹„ ì—°ê²°ì„± Client - Server êµ¬ì¡° í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³  ì„œë²„ë¡œë¶€í„° ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ë‹¨ë°©í–¥ í†µì‹  êµ¬ì¡° Request Response êµ¬ì¡° Stateless (ë¬´ìƒíƒœ) í”„ë¡œí† ì½œ","text":"ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ - HTTP ë„¤íŠ¸ì›Œí¬ - HTTP Version ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡° ë„¤íŠ¸ì›Œí¬ - HTTPS Post not found: computer-science/network/tcp HTTPë€ HyperText Transfer Protocol ì˜ ì•½ìë¡œ HTML ë¬¸ì„œë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ê·œì•½ì¡°ê±´ì´ë‹¤.HTTPëŠ” TCP&#x2F;IP ê¸°ë°˜ìœ¼ë¡œ ë˜ì–´ìˆë‹¤. Client - Server êµ¬ì¡° Stateless (ë¬´ìƒíƒœ) í”„ë¡œí† ì½œ ë¹„ ì—°ê²°ì„± Client - Server êµ¬ì¡° í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³  ì„œë²„ë¡œë¶€í„° ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ë‹¨ë°©í–¥ í†µì‹  êµ¬ì¡° Request Response êµ¬ì¡° Stateless (ë¬´ìƒíƒœ) í”„ë¡œí† ì½œ Server ì—ì„œ Client ì˜ ìƒíƒœ ë¥¼ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ì¿ í‚¤ , ì„¸ì…˜ , í† í° ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë“¤ì´ ìˆë‹¤. ì¿ í‚¤ : Client Side ì— ìƒíƒœë¥¼ ì €ì¥ ì„¸ì…˜ : Server Side ì— ìƒíƒœë¥¼ ì €ì¥ Token : Client Side ì— ìƒíƒœë¥¼ ì €ì¥, ì €ì¥í•˜ëŠ” ë°ì´í„°ëŠ” ì•”í˜¸í™” ë¥¼ í†µí•´ ì•ˆì „í•˜ê²Œ ì €ì¥ë˜ê³  ì„œëª… ì„ ì´ìš©í•´ ìœ íš¨ì„±ì„ ì…ì¦í•œë‹¤. ë¹„ ì—°ê²°ì„± í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ì—°ê²°ì„ ë§ºì€ í›„, ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ì™„ë£Œí•˜ë©´ ì—°ê²°ì„ ëŠëŠ” ì„±ì§ˆ ì—°ê²°&#x2F;í•´ì œí•˜ëŠ” ì˜¤ë²„í•´ë“œ ê°€ ë°œìƒí•œë‹¤. HTTP Keep-Alive ì†ì„±ì„ ì´ìš©í•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤. Keep Alive Connection: Keep-AliveKeep-Alive: max&#x3D;5, timeout&#x3D;120 HTTP&#x2F;1.1 ë¶€í„° ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ ìš”ì²­ì— Connection: Keep-Alive í—¤ë”ë¥¼ í¬í•¨ì‹œí‚¨ë‹¤. ì§€ì •ëœ ì‹œê°„ ë™ì•ˆ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°„ì˜ Connection ì„ ìœ ì§€í•œë‹¤. timeout : Connection ì„ ìœ ì§€í•  ì‹œê°„ì„ ëª…ì‹œ max : Connection ì„ ìœ ì§€í•  HTTP ìš”ì²­ì„ ê°œìˆ˜ë¥¼ ëª…ì‹œ","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"HTTP","slug":"CS/Network/HTTP","permalink":"https://ckck803.github.io/categories/CS/Network/HTTP/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP/IP 5ê³„ì¸µ","slug":"computer-science/network/http/oci7-tcpip5","date":"2021-12-27T03:16:32.000Z","updated":"2024-02-18T16:19:54.519Z","comments":true,"path":"2021/12/27/computer-science/network/http/oci7-tcpip5/","link":"","permalink":"https://ckck803.github.io/2021/12/27/computer-science/network/http/oci7-tcpip5/","excerpt":"ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ - HTTP ë„¤íŠ¸ì›Œí¬ - HTTP Version ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡° ë„¤íŠ¸ì›Œí¬ - HTTPS Post not found: computer-science/network/tcp ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ OCI 7 ê³„ì¸µ ë‹¤ì–‘í•œ ì»´í“¨í„° ì‹œìŠ¤í…œì´ í‘œì¤€ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ êµ­ì œ í‘œì¤€í™” ê¸°êµ¬(ISO) ì—ì„œ ë§Œë“  ê°œë… ëª¨ë¸ì´ë‹¤. OSI í‘œì¤€ ëª¨í˜•ì€ 7ê³„ì¸µìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤. ê³„ì¸µë³„ë¡œ ì—­í• ì„ ë¶„ë¦¬í•´ì„œ ê° ê³„ì¸µì´ ë…ë¦½ì ìœ¼ë¡œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê³ , ê³„ì¸µ ê°„ í†µì‹ ì„ í†µí•´ ì „ì²´ í†µì‹  í”„ë¡œì„¸ìŠ¤ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. TCP&#x2F;IP 5 ê³„ì¸µ í”„ë¡œí† ì½œ í”„ë¡œí† ì½œ : sourceì™€ targetê°„ì˜ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì£¼ê³  ë°›ì„ ì§€ì— ëŒ€í•œ ê·œì•½(ë°©ë²•)ì´ë‹¤. í¬ê²ŒëŠ” ë™ê¸°ì‹ ê³¼ ë¹„ë™ê¸°ì‹ ìœ¼ë¡œ ë‚˜ë‰˜ê²Œ ëœë‹¤.","text":"ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ - HTTP ë„¤íŠ¸ì›Œí¬ - HTTP Version ë„¤íŠ¸ì›Œí¬ - HTTP ë©”ì‹œì§€ êµ¬ì¡° ë„¤íŠ¸ì›Œí¬ - HTTPS Post not found: computer-science/network/tcp ë„¤íŠ¸ì›Œí¬ - OSI 7 ê³„ì¸µê³¼ TCP&#x2F;IP 5ê³„ì¸µ OCI 7 ê³„ì¸µ ë‹¤ì–‘í•œ ì»´í“¨í„° ì‹œìŠ¤í…œì´ í‘œì¤€ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ êµ­ì œ í‘œì¤€í™” ê¸°êµ¬(ISO) ì—ì„œ ë§Œë“  ê°œë… ëª¨ë¸ì´ë‹¤. OSI í‘œì¤€ ëª¨í˜•ì€ 7ê³„ì¸µìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤. ê³„ì¸µë³„ë¡œ ì—­í• ì„ ë¶„ë¦¬í•´ì„œ ê° ê³„ì¸µì´ ë…ë¦½ì ìœ¼ë¡œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê³ , ê³„ì¸µ ê°„ í†µì‹ ì„ í†µí•´ ì „ì²´ í†µì‹  í”„ë¡œì„¸ìŠ¤ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. TCP&#x2F;IP 5 ê³„ì¸µ í”„ë¡œí† ì½œ í”„ë¡œí† ì½œ : sourceì™€ targetê°„ì˜ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì£¼ê³  ë°›ì„ ì§€ì— ëŒ€í•œ ê·œì•½(ë°©ë²•)ì´ë‹¤. í¬ê²ŒëŠ” ë™ê¸°ì‹ ê³¼ ë¹„ë™ê¸°ì‹ ìœ¼ë¡œ ë‚˜ë‰˜ê²Œ ëœë‹¤. L1 - Physical Layer (ë¬¼ë¦¬ ê³„ì¸µ) ë°ì´í„° ë‹¨ìœ„ : Bit ë¬¼ë¦¬ì ì¸ í†µì‹ ì±„ë„ ì„ í†µí•´ bit ì‹ í˜¸ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤. ëŒ€í‘œì ì¸ ì¥ë¹„ : ë¦¬í”¼í„° L2 - Data Link Layer (ë°ì´í„° ë§í¬ ê³„ì¸µ) MAC (Media Access Control) ì£¼ì†Œ ì‚¬ìš© LAN (Local Area Network) í†µì‹ ì— ì‚¬ìš©ë˜ëŠ” ì£¼ì†Œ ìŠ¤ìœ„ì¹˜ê°„ í†µì‹ ì„ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì£¼ì†Œ ë°ì´í„° ë‹¨ìœ„ : Frame (í”„ë ˆì„) ëŒ€í‘œ ì¥ë¹„ : Switch (ìŠ¤ìœ„ì¹˜) ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ëœ ì»´í“¨í„°ë“¤ ê°„ ì¶©ëŒì—†ì´ í†µì‹ í•˜ê¸° ìœ„í•œ ë°©ë²• ì„ ì •ì˜í•œë‹¤. Forwarding&#x2F;Filtering ë°©ì‹ìœ¼ë¡œ í†µì‹ í•´ ëª©ì ì§€ë¡œë§Œ ë°ì´í„°ë¥¼ ë³´ë‚¸ë‹¤. Forwarding : MAC í…Œì´ë¸”ì— ì¼ì¹˜í•˜ëŠ” ì£¼ì†Œë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¸ë‹¤. Filtering : ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ì£¼ì†Œë¡œëŠ” ë°ì´í„°ë¥¼ ë³´ë‚´ì§€ ì•ŠëŠ”ë‹¤. L3 - Network Layer (ë„¤íŠ¸ì›Œí¬ ê³„ì¸µ) Routing í…Œì´ë¸”ì„ ì´ìš©í•´ Packet ì„ ì¶œë°œì§€ì—ì„œ ëª©ì ì§€ë¡œì˜ ê²½ë¡œë¥¼ ì„¤ì •í•œë‹¤. IP (Internet Protocol) ë¥¼ ì´ìš©í•´ í†µì‹ í•œë‹¤. WAN (Wide Area Network) í†µì‹ ì— ì‚¬ìš©ë˜ëŠ” ì£¼ì†Œ ì„œë¡œ ë‹¤ë¥¸ LAN ì— ì†í•œ ì¥ë¹„ë“¤ë¼ë¦¬ í†µì‹ í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. í˜„ì¬ëŠ” IPv4, IPv6 ì˜ ë‘ê°€ì§€ ì£¼ì†Œ ì²´ê³„ë¥¼ ê°€ì§€ê³  ìˆë‹¤. ë°ì´í„° ë‹¨ìœ„ : Packet (íŒ¨í‚·) ëŒ€í‘œ ì¥ë¹„ : Router Routing ê³¼ Forwarding ì„ ì´ìš©í•´ Packet ì„ ëª©ì ì§€ IP ê¹Œì§€ ì „ì†¡í•œë‹¤. Routing : ì¶œë°œì§€ì—ì„œ ëª©ì ì§€ê¹Œì§€ ê²½ë¡œë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒ Forwarding : Router ì˜ ì…ë ¥í¬íŠ¸ì—ì„œ ì¶œë ¥í¬íŠ¸ë¡œ Packet ì„ ì´ë™ì‹œí‚¤ëŠ” ê²ƒ L4 - Transport Layer (ì „ì†¡ ê³„ì¸µ) Port Number ë¥¼ ì´ìš©í•´ í†µì‹ í•œë‹¤ (1 ~ 65535) ë²”ìœ„ì˜ ê°’ì„ ê°–ëŠ”ë‹¤. í•´ë‹¹ Port ë²ˆí˜¸ë¥¼ ì´ìš©í•´ ëª©ì ì§€ í”„ë¡œì„¸ìŠ¤ ê¹Œì§€ ë°ì´í„°ë¥¼ ì „ë‹¬í•œë‹¤. ì¢…ë‹¨ê°„ ì „ì†¡ (End To End) ì„ ë³´ì¥í•œë‹¤. TCP&#x2F;UDP í†µì‹ ì´ ìˆë‹¤. ëŒ€í‘œ ì¥ë¹„ : Firewall, Load Balancer TCP UDP ë°ì´í„° ë‹¨ìœ„ Segment Datagram ì—°ê²° ë°©ì‹ ì—°ê²° ì§€í–¥ ì„œë¹„ìŠ¤ ë¹„ì—°ê²° íë¦„ ì œì–´ &amp; í˜¼ì¡ ì œì–´ ì§€ì› ë¯¸ì§€ì› ì†ë„ ëŠë¦¬ë‹¤ ë¹ ë¥´ë‹¤ í†µì‹  ë°©ì‹ 1:1 í†µì‹  1:1, 1:N, N:M í†µì‹  ì§€ì› L5 - Application Layer (ì‘ìš© ê³„ì¸µ) ë°ì´í„° ë‹¨ìœ„ : Message í”„ë¡œí† ì½œ : HTTP, FTP, SMTP, SSH","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"HTTP","slug":"CS/Network/HTTP","permalink":"https://ckck803.github.io/categories/CS/Network/HTTP/"}],"tags":[]},{"title":"Spring - Embeded Redis ì‚¬ìš©í•˜ê¸°","slug":"spring/spring-redis/springboot-redis","date":"2021-12-23T14:47:05.000Z","updated":"2024-11-29T08:52:54.883Z","comments":true,"path":"2021/12/23/spring/spring-redis/springboot-redis/","link":"","permalink":"https://ckck803.github.io/2021/12/23/spring/spring-redis/springboot-redis/","excerpt":"ëª©ì°¨ Spring - M1 ë§¥ë¶ì—ì„œ Embeded Redis ì‚¬ìš©í•˜ê¸° Spring - Embeded Redis ì‚¬ìš©í•˜ê¸° ì°¸ê³ https://www.baeldung.com/spring-embedded-redis Embeded Redis ì‚¬ìš©í•˜ê¸° ë³´í†µ Local ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë§ì´ ì‚¬ìš©í•˜ë©°, ë³„ë„ì˜ Redis ë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šê³  ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ë³´í†µ Redisë¥¼ ì‚¬ìš©í•˜ëŠ” ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ Localì—ì„œ í”„ë¡œì íŠ¸ ì‹¤í–‰ì‹œ Redisë¥¼ ì„ í–‰ì ìœ¼ë¡œ ì„¤ì¹˜í•´ì¤˜ì•¼ í•œë‹¤. ì´ ë¬¸ì œë¥¼ Embedded Redisë¥¼ ì‚¬ìš©í•´ í”„ë¡œì íŠ¸ê°€ Local í™˜ê²½ì— ì˜ì¡´ì ì´ì§€ ì•Šê³  í”„ë¡œì íŠ¸ ë§Œìœ¼ë¡œ êµ¬ë™í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. 1. Embedded Redis ì‚¬ìš©ì„ ìœ„í•œ ì˜ì¡´ì„± ì¶”ê°€build.gradle ì— ë‹¤ìŒ Embedded Redis ì‚¬ìš©ì„ ìœ„í•œ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.","text":"ëª©ì°¨ Spring - M1 ë§¥ë¶ì—ì„œ Embeded Redis ì‚¬ìš©í•˜ê¸° Spring - Embeded Redis ì‚¬ìš©í•˜ê¸° ì°¸ê³ https://www.baeldung.com/spring-embedded-redis Embeded Redis ì‚¬ìš©í•˜ê¸° ë³´í†µ Local ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë§ì´ ì‚¬ìš©í•˜ë©°, ë³„ë„ì˜ Redis ë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šê³  ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ë³´í†µ Redisë¥¼ ì‚¬ìš©í•˜ëŠ” ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ Localì—ì„œ í”„ë¡œì íŠ¸ ì‹¤í–‰ì‹œ Redisë¥¼ ì„ í–‰ì ìœ¼ë¡œ ì„¤ì¹˜í•´ì¤˜ì•¼ í•œë‹¤. ì´ ë¬¸ì œë¥¼ Embedded Redisë¥¼ ì‚¬ìš©í•´ í”„ë¡œì íŠ¸ê°€ Local í™˜ê²½ì— ì˜ì¡´ì ì´ì§€ ì•Šê³  í”„ë¡œì íŠ¸ ë§Œìœ¼ë¡œ êµ¬ë™í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. 1. Embedded Redis ì‚¬ìš©ì„ ìœ„í•œ ì˜ì¡´ì„± ì¶”ê°€build.gradle ì— ë‹¤ìŒ Embedded Redis ì‚¬ìš©ì„ ìœ„í•œ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤. implementation &#x27;org.springframework.boot:spring-boot-starter-data-redis&#x27;//embedded-rediscompile group: &#x27;it.ozimov&#x27;, name: &#x27;embedded-redis&#x27;, version: &#x27;0.7.2&#x27; 2. Local Redis ì ‘ì†ì„ ìœ„í•œ Profile ì¶”ê°€application.yml ì— local í™˜ê²½ì—ì„œ Redis ì ‘ì†ì„ ìœ„í•œ ì„¤ì •ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤. spring: profiles: active: local redis: host: localhost port: 6379 3. Embedded Redis ì— ëŒ€í•œ ì„¤ì •Embedded Redis ë¥¼ ë„ìš°ê¸° ìœ„í•œ ì„¤ì •ì„ í•´ì¤ë‹ˆë‹¤. ë³´í†µ Embedded Redis ëŠ” í…ŒìŠ¤íŠ¸ ìš©ë„ë¡œ ë„ìš°ê¸° ë•Œë¬¸ì— Port ì„¤ì •ì„ ì´ë¯¸ ì„¤ì •ëœ Redis ì ‘ì† í¬íŠ¸ë¡œ ì‹¤í–‰ì‹œì¼œì¤ë‹ˆë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œì‹œ Embedded Redis ë¥¼ ì¢…ë£Œ ì‹œì¼œì£¼ê¸° ìœ„í•œ ì„¤ì •ì„ ì¡ì•„ì¤ë‹ˆë‹¤. @PreDestroy ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì „ì— Embedded Redis ê°€ ì¢…ë£Œë  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. Profile ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ -Dspring.profiles.active&#x3D;local ì˜µì…˜ì´ ì£¼ì–´ì¡Œì„ ë•Œ í•´ë‹¹ ì„¤ì •ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ @Slf4j@Profile(&quot;local&quot;)@Configurationpublic class EmbeddedRedisConfig &#123; @Value(&quot;$&#123;spring.redis.port&#125;&quot;) private int redisPort; private RedisServer redisServer; @PostConstruct public void redisServer() throws IOException &#123; redisServer = new RedisServer(redisPort); redisServer.start(); &#125; @PreDestroy public void stopRedis()&#123; if(redisServer != null)&#123; redisServer.stop(); &#125; &#125;&#125; Redis ì ‘ì† ì„¤ì •í•˜ê¸°Spring Boot ê°€ Embedded Redis ì— ì ‘ì†í•˜ê¸° ìœ„í•œ ì„¤ì •ì´ë‚˜ ì´ë¯¸ êµ¬ì¶•ëœ Redis ì— ëŒ€í•œ ì ‘ì† ì„¤ì •ì€ ë˜‘ê°™ìŠµë‹ˆë‹¤. @Configuration@EnableRedisRepositoriespublic class RedisRepositoryConfig &#123; @Value(&quot;$&#123;spring.redis.host&#125;&quot;) private String redisHost; @Value(&quot;$&#123;spring.redis.port&#125;&quot;) private int redisPort; @Bean public RedisConnectionFactory redisConnectionFactory()&#123; return new LettuceConnectionFactory(redisHost, redisPort); &#125; @Bean public RedisTemplate&lt;?, ?&gt; redisTemplate()&#123; RedisTemplate&lt;byte[], byte[]&gt; redisTemplate = new RedisTemplate&lt;&gt;(); redisTemplate.setConnectionFactory(redisConnectionFactory()); return redisTemplate; &#125;&#125; @SpringBootTestpublic class RedisTest &#123; @Autowired private PointRedisRepository pointRedisRepository; @AfterEach public void tearDown() throws Exception &#123; pointRedisRepository.deleteAll(); &#125; @Test @DisplayName(&quot;ê¸°ë³¸ ë“±ë¡ ì¡°íšŒ ê¸°ëŠ¥&quot;) public void retrieve()&#123; String id = &quot;dongwoo&quot;; LocalDateTime refreshTime = LocalDateTime.of(2021,3,16,0,0); Point point = Point.builder() .id(id) .amount(1000L) .refreshTime(refreshTime) .build(); pointRedisRepository.save(point); Point savedPoint = pointRedisRepository.findById(id).get(); assertThat(savedPoint.getAmount()).isEqualTo(1000L); assertThat(savedPoint.getRefreshTime()).isEqualTo(refreshTime); &#125; @Test @DisplayName(&quot;ìˆ˜ì • ê¸°ëŠ¥&quot;) public void revise()&#123; String id = &quot;dongwoo&quot;; LocalDateTime refreshTime = LocalDateTime.of(2021,3,16,0,0); pointRedisRepository.save(Point.builder() .id(id) .amount(1000L) .refreshTime(refreshTime) .build()); Point savedPoint = pointRedisRepository.findById(id).get(); savedPoint.refresh(2000L, LocalDateTime.of(2021,3,17,0,0)); pointRedisRepository.save(savedPoint); Point refreshPoint = pointRedisRepository.findById(id).get(); assertThat(refreshPoint.getAmount()).isEqualTo(2000L); &#125;&#125; @Slf4j@Profile(&quot;local&quot;)@Configurationpublic class EmbeddedRedisConfig &#123; @Value(&quot;$&#123;spring.redis.port&#125;&quot;) private int redisPort; private RedisServer redisServer; @PostConstruct public void redisServer() throws IOException &#123; int port = isRedisRunning() ? findAvailablePort() : redisPort; redisServer = new RedisServer(port); redisServer.start(); &#125; @PreDestroy public void stopRedis() &#123; if (redisServer != null) &#123; redisServer.stop(); &#125; &#125; private boolean isRedisRunning() throws IOException&#123; return isRedisRunning(); &#125; public int findAvailablePort() throws IOException&#123; for(int port = 10000; port &lt;= 65535; port++ )&#123; Process process = executeGrepProcessCommand(port); if(!isRunning(process))&#123; return port; &#125; &#125; throw new IllegalArgumentException(&quot;Not Found Available port: 10000 ~ 65535&quot;); &#125; private Process executeGrepProcessCommand(int port) throws IOException&#123; String command = String.format(&quot;netstat -nat | grep LISTEN|grep %d&quot;, port); String[] shell = &#123;&quot;/bin/sh&quot;, &quot;-c&quot;, command&#125;; return Runtime.getRuntime().exec(shell); &#125; private boolean isRunning(Process process)&#123; String line; StringBuilder pidInfo = new StringBuilder(); try(BufferedReader input = new BufferedReader(new InputStreamReader(process.getInputStream())))&#123; while((line = input.readLine()) != null) &#123; pidInfo.append(line); &#125; &#125;catch (Exception e) &#123; &#125; return !StringUtils.isEmpty(pidInfo.toString()); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Redis","slug":"Spring/Spring-Boot/Redis","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Redis/"}],"tags":[]},{"title":"Spring AOP Pointcut í‘œí˜„ì‹ - this, target","slug":"spring/spring-aop/pointcut/pointcut-this-target","date":"2021-12-20T06:31:07.000Z","updated":"2024-11-28T04:49:14.601Z","comments":true,"path":"2021/12/20/spring/spring-aop/pointcut/pointcut-this-target/","link":"","permalink":"https://ckck803.github.io/2021/12/20/spring/spring-aop/pointcut/pointcut-this-target/","excerpt":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut í¬ì¸íŠ¸ì»· í‘œí˜„ì‹ - this, targetthis ì™€ target ì€ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ AOP ë¥¼ ì ìš©í•  ë•Œ ì‚¬ìš©í•˜ëŠ” í¬ì¸íŠ¸ì»· í‘œí˜„ì‹ì…ë‹ˆë‹¤. ë‘ í‘œí˜„ì‹ ëª¨ë‘ ìƒìœ„ íƒ€ì…ì´ë‚˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ AOP ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. this ëŠ” ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë¼ ìˆëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. ë•Œë¬¸ì— ìŠ¤í”„ë§ì—ì„œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì „ëµì— ë”°ë¼ AOP ê°€ ë‹¤ë¥´ê²Œ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. target ì€ ì‹¤ì œ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. this ì™€ target ì‘ë™ë°©ì‹ í™•ì¸ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ@AutowiredMemberService memberService;@Testvoid success() &#123; log.info(&quot;memberService Proxy=&#123;&#125;&quot;, memberService.getClass()); memberService.hello(&quot;helloA&quot;);&#125;@Aspectstatic class ThisTargetAspect &#123; //ë¶€ëª¨ íƒ€ì… í—ˆìš© @Around(&quot;this(hello.aop.member.MemberService)&quot;) public Object doThisInterface(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[this-interface] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125; //ë¶€ëª¨ íƒ€ì… í—ˆìš© @Around(&quot;target(hello.aop.member.MemberService)&quot;) public Object doTargetInterface(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[target-interface] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125; @Around(&quot;this(hello.aop.member.MemberServiceImpl)&quot;) public Object doThis(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[this-impl] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125; @Around(&quot;target(hello.aop.member.MemberServiceImpl)&quot;) public Object doTarget(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[target-impl] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125;&#125; JDK ë™ì  í”„ë¡ì‹œë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±","text":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut í¬ì¸íŠ¸ì»· í‘œí˜„ì‹ - this, targetthis ì™€ target ì€ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ AOP ë¥¼ ì ìš©í•  ë•Œ ì‚¬ìš©í•˜ëŠ” í¬ì¸íŠ¸ì»· í‘œí˜„ì‹ì…ë‹ˆë‹¤. ë‘ í‘œí˜„ì‹ ëª¨ë‘ ìƒìœ„ íƒ€ì…ì´ë‚˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ AOP ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. this ëŠ” ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë¼ ìˆëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. ë•Œë¬¸ì— ìŠ¤í”„ë§ì—ì„œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì „ëµì— ë”°ë¼ AOP ê°€ ë‹¤ë¥´ê²Œ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. target ì€ ì‹¤ì œ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. this ì™€ target ì‘ë™ë°©ì‹ í™•ì¸ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ@AutowiredMemberService memberService;@Testvoid success() &#123; log.info(&quot;memberService Proxy=&#123;&#125;&quot;, memberService.getClass()); memberService.hello(&quot;helloA&quot;);&#125;@Aspectstatic class ThisTargetAspect &#123; //ë¶€ëª¨ íƒ€ì… í—ˆìš© @Around(&quot;this(hello.aop.member.MemberService)&quot;) public Object doThisInterface(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[this-interface] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125; //ë¶€ëª¨ íƒ€ì… í—ˆìš© @Around(&quot;target(hello.aop.member.MemberService)&quot;) public Object doTargetInterface(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[target-interface] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125; @Around(&quot;this(hello.aop.member.MemberServiceImpl)&quot;) public Object doThis(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[this-impl] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125; @Around(&quot;target(hello.aop.member.MemberServiceImpl)&quot;) public Object doTarget(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[target-impl] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125;&#125; JDK ë™ì  í”„ë¡ì‹œë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±í”„ë¡ì‹œ ê°ì²´ì™€ êµ¬í˜„ê°ì²´ì¸ MemberServiceImpl ëª¨ë‘ MemberService ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ ìƒì„±ëìŠµë‹ˆë‹¤. this ì™€ target ëª¨ë‘ MemberService ë¥¼ ì§€ì •í•˜ë©´ AOP ê°€ ì ìš©ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, MemberServiceImpl ì„ ì§€ì •í•  ê²½ìš° í”„ë¡ì‹œ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” this ëŠ” AOP ê°€ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. JDK ë™ì  í”„ë¡ì‹œ ê°ì²´ì— ëŒ€í•œ AOP ì ìš© ê²°ê³¼JDK ë™ì  í”„ë¡ì‹œë¡œ ìƒì„±ëœ ê°ì²´ì˜ ê²½ìš° this ì— êµ¬í˜„ ê°ì²´ë¥¼ ì§€ì •í–ˆì„ ë•Œ AOP ê°€ ì ìš©ë˜ì§€ ì•Šì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 2024-11-28 13:43:19.569 INFO 27320 --- [ Test worker] h.a.p.ThisTargetTest$ThisTargetAspect : [target-impl] String hello.aop.member.MemberService.hello(String)2024-11-28 13:43:19.569 INFO 27320 --- [ Test worker] h.a.p.ThisTargetTest$ThisTargetAspect : [target-interface] String hello.aop.member.MemberService.hello(String)2024-11-28 13:43:19.569 INFO 27320 --- [ Test worker] h.a.p.ThisTargetTest$ThisTargetAspect : [this-interface] String hello.aop.member.MemberService.hello(String) CGLIB ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±CGLIB ë¥¼ ì‚¬ìš©í•˜ê²Œ ë  ê²½ìš° í”„ë¡ì‹œ ê°ì²´ëŠ” êµ¬í˜„ê°ì²´ MemberServiceImpl ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤. ë•Œë¬¸ì— this ì™€ target ëª¨ë‘ MemberService ì™€ êµ¬í˜„ì²´ì¸ MemberServiceImpl ë¥¼ ì§€ì •í•˜ë”ë¼ë„ AOP ê°€ ì ìš©ë©ë‹ˆë‹¤. CGLIB í”„ë¡ì‹œ ê°ì²´ì— ëŒ€í•œ AOP ì ìš© ê²°ê³¼CGLIB ë¡œ ìƒì„±ëœ ê°ì²´ì˜ ê²½ìš° this ì— êµ¬í˜„ ê°ì²´ë¥¼ ì§€ì •í–ˆì„ ë•Œ AOP ê°€ ì ìš©ë˜ì§€ ì•Šì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 2024-11-28 13:43:42.768 INFO 28167 --- [ Test worker] h.a.p.ThisTargetTest$ThisTargetAspect : [target-impl] String hello.aop.member.MemberServiceImpl.hello(String)2024-11-28 13:43:42.768 INFO 28167 --- [ Test worker] h.a.p.ThisTargetTest$ThisTargetAspect : [target-interface] String hello.aop.member.MemberServiceImpl.hello(String)2024-11-28 13:43:42.768 INFO 28167 --- [ Test worker] h.a.p.ThisTargetTest$ThisTargetAspect : [this-impl] String hello.aop.member.MemberServiceImpl.hello(String)2024-11-28 13:43:42.768 INFO 28167 --- [ Test worker] h.a.p.ThisTargetTest$ThisTargetAspect : [this-interface] String hello.aop.member.MemberServiceImpl.hello(String)","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut í‘œí˜„ì‹","slug":"Spring/Spring-AOP/Pointcut-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬","slug":"spring/spring-aop/pointcut/pointcut-parameter","date":"2021-12-20T05:31:07.000Z","updated":"2024-11-28T04:06:24.036Z","comments":true,"path":"2021/12/20/spring/spring-aop/pointcut/pointcut-parameter/","link":"","permalink":"https://ckck803.github.io/2021/12/20/spring/spring-aop/pointcut/pointcut-parameter/","excerpt":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬í¬ì¸íŠ¸ ì»· í¬í˜„ì‹ì„ ì‚¬ìš©í•´ì„œ AOP ê°€ ì ìš©ë˜ëŠ” ê°ì²´ë‚˜ ë©”ì†Œë“¤ì˜ ì •ë³´ë¥¼ Advice ë‚´ ë§¤ê°œë³€ìˆ˜ë¡œ ì •ë³´ë“¤ì„ ì „ë‹¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Advice ë¡œ ë§¤ê°œë³€ìˆ˜ë¡œ ì •ë³´ë“¤ì„ ë„˜ê¸°ê¸° ìœ„í•´ì„œëŠ” í¬ì¸íŠ¸ì»·ì˜ ì´ë¦„ê³¼ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ì´ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ, ê°’ì´ ë“¤ì–´ì˜¬ë•Œ íƒ€ì…ì´ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì •ì˜í•œ íƒ€ì…ìœ¼ë¡œ ì œí•œì´ ë©ë‹ˆë‹¤. AOP ì ìš© í™•ì¸ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ@AutowiredMemberService memberService;@Testvoid success() &#123; log.info(&quot;memberService Proxy=&#123;&#125;&quot;, memberService.getClass()); memberService.hello(&quot;helloA&quot;);&#125; ë©”ì†Œë“œ ë§¤ê°œë³€ìˆ˜ê°’ ì •ë³´ë¥¼ Advice ì— ì „ë‹¬args ë¥¼ ì´ìš©í•˜ë©´ ë©”ì†Œë“œì— ì „ë‹¬ëœ ë§¤ê°œë³€ìˆ˜ì˜ ê°’ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬í¬ì¸íŠ¸ ì»· í¬í˜„ì‹ì„ ì‚¬ìš©í•´ì„œ AOP ê°€ ì ìš©ë˜ëŠ” ê°ì²´ë‚˜ ë©”ì†Œë“¤ì˜ ì •ë³´ë¥¼ Advice ë‚´ ë§¤ê°œë³€ìˆ˜ë¡œ ì •ë³´ë“¤ì„ ì „ë‹¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Advice ë¡œ ë§¤ê°œë³€ìˆ˜ë¡œ ì •ë³´ë“¤ì„ ë„˜ê¸°ê¸° ìœ„í•´ì„œëŠ” í¬ì¸íŠ¸ì»·ì˜ ì´ë¦„ê³¼ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ì´ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ, ê°’ì´ ë“¤ì–´ì˜¬ë•Œ íƒ€ì…ì´ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì •ì˜í•œ íƒ€ì…ìœ¼ë¡œ ì œí•œì´ ë©ë‹ˆë‹¤. AOP ì ìš© í™•ì¸ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ@AutowiredMemberService memberService;@Testvoid success() &#123; log.info(&quot;memberService Proxy=&#123;&#125;&quot;, memberService.getClass()); memberService.hello(&quot;helloA&quot;);&#125; ë©”ì†Œë“œ ë§¤ê°œë³€ìˆ˜ê°’ ì •ë³´ë¥¼ Advice ì— ì „ë‹¬args ë¥¼ ì´ìš©í•˜ë©´ ë©”ì†Œë“œì— ì „ë‹¬ëœ ë§¤ê°œë³€ìˆ˜ì˜ ê°’ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. @Pointcut(&quot;execution(* hello.aop.member..*.*(..))&quot;)private void allMember() &#123;&#125;@Around(&quot;allMember()&quot;)public Object logArgs1(ProceedingJoinPoint joinPoint) throws Throwable &#123; Object arg1 = joinPoint.getArgs()[0]; log.info(&quot;[logArgs1]&#123;&#125;, arg=&#123;&#125;&quot;, joinPoint.getSignature(), arg1); return joinPoint.proceed();&#125;// ë§¤ê²Œë³€ìˆ˜ ê°’ì„ ì „ë‹¬ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.@Around(&quot;allMember() &amp;&amp; args(arg,..)&quot;)public Object logArgs2(ProceedingJoinPoint joinPoint, Object arg) throws Throwable &#123; log.info(&quot;[logArgs2]&#123;&#125;, arg=&#123;&#125;&quot;, joinPoint.getSignature(), arg); return joinPoint.proceed();&#125;@Before(&quot;allMember() &amp;&amp; args(arg,..)&quot;)public void logArgs3(String arg) &#123; log.info(&quot;[logArgs3] arg=&#123;&#125;&quot;, arg);&#125; 2024-11-28 12:28:56.888 INFO 85888 --- [ Test worker] h.a.p.ParameterTest$ParameterAspect : [logArgs1]String hello.aop.member.MemberServiceImpl.hello(String), arg=helloA2024-11-28 12:28:56.889 INFO 85888 --- [ Test worker] h.a.p.ParameterTest$ParameterAspect : [logArgs2]String hello.aop.member.MemberServiceImpl.hello(String), arg=helloA2024-11-28 12:28:56.889 INFO 85888 --- [ Test worker] h.a.p.ParameterTest$ParameterAspect : [logArgs3] arg=helloA ê°ì²´ ì •ë³´ë¥¼ Advice ì— ì „ë‹¬this ëŠ” ëŸ°íƒ€ì„ í™˜ê²½ì˜ í”„ë¡ì‹œ ê°ì²´ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³ , target ì€ ì‹¤ì œ ëŒ€ìƒ êµ¬í˜„ì²´ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. @Pointcut(&quot;execution(* hello.aop.member..*.*(..))&quot;)private void allMember() &#123;&#125;// this ëŠ” ëŸ°íƒ€ì„ í™˜ê²½ì˜ í”„ë¡ì‹œ ê°ì²´ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤ @Before(&quot;allMember() &amp;&amp; this(obj)&quot;)public void thisArgs(JoinPoint joinPoint, MemberService obj) &#123; log.info(&quot;[this]&#123;&#125;, obj=&#123;&#125;&quot;, joinPoint.getSignature(), obj.getClass());&#125;// target ì€ ì‹¤ì œ ëŒ€ìƒ êµ¬í˜„ì²´ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. @Before(&quot;allMember() &amp;&amp; target(obj)&quot;)public void targetArgs(JoinPoint joinPoint, MemberService obj) &#123; log.info(&quot;[target]&#123;&#125;, obj=&#123;&#125;&quot;, joinPoint.getSignature(), obj.getClass());&#125; 2024-11-28 12:28:56.889 INFO 85888 --- [ Test worker] h.a.p.ParameterTest$ParameterAspect : [this]String hello.aop.member.MemberServiceImpl.hello(String), obj=class hello.aop.member.MemberServiceImpl$$EnhancerBySpringCGLIB$$bc2c3fa82024-11-28 12:28:56.889 INFO 85888 --- [ Test worker] h.a.p.ParameterTest$ParameterAspect : [target]String hello.aop.member.MemberServiceImpl.hello(String), obj=class hello.aop.member.MemberServiceImpl ì–´ë…¸í…Œì´ì…˜ ì •ë³´ë¥¼ Advice ì— ì „ë‹¬@target, @within, @annotation ì€ í´ë˜ìŠ¤ë‚˜ ë©”ì†Œë“œì— ì ìš©ëœ ì–´ë…¸í…Œì´ì…˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. @Pointcut(&quot;execution(* hello.aop.member..*.*(..))&quot;)private void allMember() &#123;&#125;@Before(&quot;allMember() &amp;&amp; @target(annotation)&quot;)public void atTarget(JoinPoint joinPoint, ClassAop annotation) &#123; log.info(&quot;[@target]&#123;&#125;, obj=&#123;&#125;&quot;, joinPoint.getSignature(), annotation);&#125;@Before(&quot;allMember() &amp;&amp; @within(annotation)&quot;)public void atWithin(JoinPoint joinPoint, ClassAop annotation) &#123; log.info(&quot;[@within]&#123;&#125;, obj=&#123;&#125;&quot;, joinPoint.getSignature(), annotation);&#125;@Before(&quot;allMember() &amp;&amp; @annotation(annotation)&quot;)public void atAnnotation(JoinPoint joinPoint, MethodAop annotation) &#123; // @ MethodAop ë‚´ì˜ value ê°’ì„ êº¼ë‚´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. log.info(&quot;[@annotation]&#123;&#125;, annotationValue=&#123;&#125;&quot;, joinPoint.getSignature(), annotation.value());&#125; 2024-11-28 12:28:56.889 INFO 85888 --- [ Test worker] h.a.p.ParameterTest$ParameterAspect : [@target]String hello.aop.member.MemberServiceImpl.hello(String), obj=@hello.aop.member.annotation.ClassAop()2024-11-28 12:28:56.889 INFO 85888 --- [ Test worker] h.a.p.ParameterTest$ParameterAspect : [@within]String hello.aop.member.MemberServiceImpl.hello(String), obj=@hello.aop.member.annotation.ClassAop()2024-11-28 12:28:56.889 INFO 85888 --- [ Test worker] h.a.p.ParameterTest$ParameterAspect : [@annotation]String hello.aop.member.MemberServiceImpl.hello(String), annotationValue=test value","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut í‘œí˜„ì‹","slug":"Spring/Spring-AOP/Pointcut-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"Spring AOP Pointcut í‘œí˜„ì‹ - bean","slug":"spring/spring-aop/pointcut/pointcut-bean","date":"2021-12-20T04:31:07.000Z","updated":"2024-11-28T04:06:24.031Z","comments":true,"path":"2021/12/20/spring/spring-aop/pointcut/pointcut-bean/","link":"","permalink":"https://ckck803.github.io/2021/12/20/spring/spring-aop/pointcut/pointcut-bean/","excerpt":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut beanbean í‘œí˜„ì‹ì€ ìŠ¤í”„ë§ì—ì„œë§Œ ì‚¬ìš©í•œ í¬ì¸íŠ¸ì»· ì§€ì‹œìë¡œ Bean ì´ë¦„ìœ¼ë¡œ Advice ì ìš© ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤. @Slf4j@Import(BeanTest.BeanAspect.class)@SpringBootTestpublic class BeanTest &#123; @Autowired OrderService orderService; @Test void success()&#123; orderService.orderItem(&quot;itemA&quot;); &#125; @Aspect static class BeanAspect&#123; // orderService ë¹ˆê³¼ Repository ë¡œ ëë‚˜ëŠ” ë¹ˆë“¤ì— Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. @Around(&quot;bean(orderService) || bean(*Repository)&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[bean] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125; &#125;&#125; 2021-12-21 00:13:43.463 INFO 35836 --- [ Test worker] com.example.aop.pointcut.BeanTest : [bean] void com.example.aop.order.OrderService.orderItem(String)2021-12-21 00:13:43.474 INFO 35836 --- [ Test worker] com.example.aop.order.OrderService : [orderService] ì‹¤í–‰2021-12-21 00:13:43.475 INFO 35836 --- [ Test worker] com.example.aop.pointcut.BeanTest : [bean] String com.example.aop.order.OrderRepository.save(String)2021-12-21 00:13:43.480 INFO 35836 --- [ Test worker] com.example.aop.order.OrderRepository : [orderRepository] ì‹¤í–‰","text":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut beanbean í‘œí˜„ì‹ì€ ìŠ¤í”„ë§ì—ì„œë§Œ ì‚¬ìš©í•œ í¬ì¸íŠ¸ì»· ì§€ì‹œìë¡œ Bean ì´ë¦„ìœ¼ë¡œ Advice ì ìš© ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤. @Slf4j@Import(BeanTest.BeanAspect.class)@SpringBootTestpublic class BeanTest &#123; @Autowired OrderService orderService; @Test void success()&#123; orderService.orderItem(&quot;itemA&quot;); &#125; @Aspect static class BeanAspect&#123; // orderService ë¹ˆê³¼ Repository ë¡œ ëë‚˜ëŠ” ë¹ˆë“¤ì— Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. @Around(&quot;bean(orderService) || bean(*Repository)&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[bean] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125; &#125;&#125; 2021-12-21 00:13:43.463 INFO 35836 --- [ Test worker] com.example.aop.pointcut.BeanTest : [bean] void com.example.aop.order.OrderService.orderItem(String)2021-12-21 00:13:43.474 INFO 35836 --- [ Test worker] com.example.aop.order.OrderService : [orderService] ì‹¤í–‰2021-12-21 00:13:43.475 INFO 35836 --- [ Test worker] com.example.aop.pointcut.BeanTest : [bean] String com.example.aop.order.OrderRepository.save(String)2021-12-21 00:13:43.480 INFO 35836 --- [ Test worker] com.example.aop.order.OrderRepository : [orderRepository] ì‹¤í–‰","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut í‘œí˜„ì‹","slug":"Spring/Spring-AOP/Pointcut-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"Spring AOP Pointcut í‘œí˜„ì‹ - @annotation","slug":"spring/spring-aop/pointcut/annotation/pointcut-annotation","date":"2021-12-20T03:31:07.000Z","updated":"2024-11-28T04:06:24.036Z","comments":true,"path":"2021/12/20/spring/spring-aop/pointcut/annotation/pointcut-annotation/","link":"","permalink":"https://ckck803.github.io/2021/12/20/spring/spring-aop/pointcut/annotation/pointcut-annotation/","excerpt":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut @annotation ë©”ì„œë“œê°€ ì£¼ì–´ì§„ ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì§€ê³  ìˆëŠ” ì¡°ì¸ í¬ì¸íŠ¸ë¥¼ ë§¤ì¹­ @annotation ì€ íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ ë©”ì†Œë“œ ë¥¼ ê¸°ì¤€ìœ¼ë¡œ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. Custom Annotation ìƒì„±@Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)public @interface MethodAop &#123; String value();&#125; Advisor ìƒì„±ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ Advice ì ìš©í•˜ê¸° ìœ„í•´ @annotation ì— ì–´ë…¸í…Œì´ì…˜ íŒ¨í‚¤ì§€ ê²½ë¡œë¥¼ ì§€ì •í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut @annotation ë©”ì„œë“œê°€ ì£¼ì–´ì§„ ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì§€ê³  ìˆëŠ” ì¡°ì¸ í¬ì¸íŠ¸ë¥¼ ë§¤ì¹­ @annotation ì€ íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ ë©”ì†Œë“œ ë¥¼ ê¸°ì¤€ìœ¼ë¡œ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. Custom Annotation ìƒì„±@Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)public @interface MethodAop &#123; String value();&#125; Advisor ìƒì„±ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ Advice ì ìš©í•˜ê¸° ìœ„í•´ @annotation ì— ì–´ë…¸í…Œì´ì…˜ íŒ¨í‚¤ì§€ ê²½ë¡œë¥¼ ì§€ì •í•©ë‹ˆë‹¤. @Slf4j@Aspectstatic class AtAnnotationAspect&#123; @Around(&quot;@annotation(com.example.aop.member.annotation.MethodAop)&quot;) public Object doAtAnnotation(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[@annotation] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125;&#125; Custom Annotation ì ìš©@MethodAop ë¥¼ ë©”ì†Œë“œì— ì ìš©í•©ë‹ˆë‹¤. í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ ë©”ì†Œë“œì— Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. @ClassAop@Componentpublic class MemberServiceImpl implements MemberService &#123; @Override @MethodAop(&quot;test&quot;) public String hello(String param) &#123; return null; &#125; public String internal(String param)&#123; return &quot;ok&quot;; &#125;&#125; MemberService ê°ì²´ê°€ í”„ë¡ì‹œ ê°ì²´ë¡œ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, @MethodAop ê°€ ì ìš©ëœ hello ë©”ì†Œë“œì— Advice ë¡œì§ì´ ìˆ˜í–‰ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. @Testvoid success()&#123; log.info(&quot;memberService Proxy = &#123;&#125;&quot;, memberService.getClass()); memberService.hello(&quot;helloA&quot;);&#125; 2021-12-21 00:06:40.720 INFO 35688 --- [ Test worker] c.example.aop.pointcut.AtAnnotationTest : memberService Proxy = class com.example.aop.member.MemberServiceImpl$$EnhancerBySpringCGLIB$$a8e518182021-12-21 00:06:40.727 INFO 35688 --- [ Test worker] .a.p.AtAnnotationTest$AtAnnotationAspect : [@annotation] String com.example.aop.member.MemberServiceImpl.hello(String)","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut í‘œí˜„ì‹","slug":"Spring/Spring-AOP/Pointcut-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"Spring AOP Pointcut í‘œí˜„ì‹ - @args","slug":"spring/spring-aop/pointcut/annotation/pointcut-args","date":"2021-12-20T03:31:07.000Z","updated":"2024-11-28T04:06:24.036Z","comments":true,"path":"2021/12/20/spring/spring-aop/pointcut/annotation/pointcut-args/","link":"","permalink":"https://ckck803.github.io/2021/12/20/spring/spring-aop/pointcut/annotation/pointcut-args/","excerpt":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut @args ë©”ì„œë“œë‚´ ë§¤ê°œë³€ìˆ˜ì— íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì§€ê³  ìˆëŠ” ê²½ìš° ì¡°ì¸ í¬ì¸íŠ¸ë¥¼ ë§¤ì¹­ @args ëŠ” ë©”ì„œë“œë‚´ ë§¤ê°œë³€ìˆ˜ê°€ íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì§€ê³  ìˆëŠ” ê²½ìš° Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. ëŸ°íƒ€ì„ ì‹œì ì—ì„œ í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜@Target(ElementType.PARAMETER)@Retention(RetentionPolicy.RUNTIME)public @interface MyAnnotation &#123;&#125; Advisor ìƒì„±ë§¤ê°œë³€ìˆ˜ê°€ @MyAnnotation ë¥¼ ê°€ì§ˆ ê²½ìš° advice ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ Adivsor ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut @args ë©”ì„œë“œë‚´ ë§¤ê°œë³€ìˆ˜ì— íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì§€ê³  ìˆëŠ” ê²½ìš° ì¡°ì¸ í¬ì¸íŠ¸ë¥¼ ë§¤ì¹­ @args ëŠ” ë©”ì„œë“œë‚´ ë§¤ê°œë³€ìˆ˜ê°€ íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì§€ê³  ìˆëŠ” ê²½ìš° Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. ëŸ°íƒ€ì„ ì‹œì ì—ì„œ í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜@Target(ElementType.PARAMETER)@Retention(RetentionPolicy.RUNTIME)public @interface MyAnnotation &#123;&#125; Advisor ìƒì„±ë§¤ê°œë³€ìˆ˜ê°€ @MyAnnotation ë¥¼ ê°€ì§ˆ ê²½ìš° advice ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ Adivsor ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. @Aspect@Componentpublic class MyAspect &#123; @Before(&quot;@args(com.example.MyAnnotation)&quot;) public void beforeAdvice() &#123; System.out.println(&quot;Before method with @MyAnnotation argument&quot;); &#125;&#125; Custom Annotation ì ìš©doSomething ë©”ì†Œë“œëŠ” @MyAnnotation ê°€ ë¶™ì€ ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë¯€ë¡œ Advice ê°€ ì ìš©ë©ë‹ˆë‹¤. public class MyService &#123; public void doSomething(@MyAnnotation String param1, String param2) &#123; System.out.println(&quot;Executing doSomething&quot;); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut í‘œí˜„ì‹","slug":"Spring/Spring-AOP/Pointcut-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within","slug":"spring/spring-aop/pointcut/annotation/pointcut-target-within","date":"2021-12-20T02:31:07.000Z","updated":"2024-11-28T04:06:24.036Z","comments":true,"path":"2021/12/20/spring/spring-aop/pointcut/annotation/pointcut-target-within/","link":"","permalink":"https://ckck803.github.io/2021/12/20/spring/spring-aop/pointcut/annotation/pointcut-target-within/","excerpt":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut @target ê³¼ @within í´ë˜ìŠ¤ì— íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ ê²½ìš° ì¡°ì¸ í¬ì¸íŠ¸ë¥¼ ë§¤ì¹­ @target ê³¼ @within ì€ ì–´ë…¸í…Œì´ì…˜ì„ ê¸°ì¤€ìœ¼ë¡œ AOPë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” Pointcut í‘œí˜„ì‹ì…ë‹ˆë‹¤. íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ í´ë˜ìŠ¤ë‚´ ëª¨ë“  ë©”ì„œë“œì— AOP ë¥¼ ì ìš©í•©ë‹ˆë‹¤. @target ì€ ëŸ°íƒ€ì„ ê°ì²´ì˜ ì‹¤ì œ íƒ€ì… ì„ ê¸°ì¤€ìœ¼ë¡œ ë§¤ì¹­í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ í•´ë‹¹ ê°ì²´ì˜ ë¶€ëª¨ í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ì— ì„ ì–¸ëœ ì–´ë…¸í…Œì´ì…˜ë„ í¬í•¨í•˜ì—¬ ê²€ì‚¬í•˜ê¸° ë•Œë¬¸ì— ë¶€ëª¨ íƒ€ì…ì˜ ë©”ì„œë“œê¹Œì§€ Advice ë¥¼ ë‹¤ ì ìš©í•©ë‹ˆë‹¤. @within ê²½ìš° ì»´íŒŒì¼ ì‹œì  ì— íŠ¹ì • í´ë˜ìŠ¤ ì— ì–´ë…¸í…Œì´ì…˜ì´ ì„ ì–¸ë˜ì—ˆëŠ”ì§€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— ì •ì˜ëœ í´ë˜ìŠ¤ë‚´ ë©”ì„œë“œì—ë§Œ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. Custon Annotation ìƒì„±","text":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut @target ê³¼ @within í´ë˜ìŠ¤ì— íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ ê²½ìš° ì¡°ì¸ í¬ì¸íŠ¸ë¥¼ ë§¤ì¹­ @target ê³¼ @within ì€ ì–´ë…¸í…Œì´ì…˜ì„ ê¸°ì¤€ìœ¼ë¡œ AOPë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” Pointcut í‘œí˜„ì‹ì…ë‹ˆë‹¤. íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ í´ë˜ìŠ¤ë‚´ ëª¨ë“  ë©”ì„œë“œì— AOP ë¥¼ ì ìš©í•©ë‹ˆë‹¤. @target ì€ ëŸ°íƒ€ì„ ê°ì²´ì˜ ì‹¤ì œ íƒ€ì… ì„ ê¸°ì¤€ìœ¼ë¡œ ë§¤ì¹­í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ í•´ë‹¹ ê°ì²´ì˜ ë¶€ëª¨ í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ì— ì„ ì–¸ëœ ì–´ë…¸í…Œì´ì…˜ë„ í¬í•¨í•˜ì—¬ ê²€ì‚¬í•˜ê¸° ë•Œë¬¸ì— ë¶€ëª¨ íƒ€ì…ì˜ ë©”ì„œë“œê¹Œì§€ Advice ë¥¼ ë‹¤ ì ìš©í•©ë‹ˆë‹¤. @within ê²½ìš° ì»´íŒŒì¼ ì‹œì  ì— íŠ¹ì • í´ë˜ìŠ¤ ì— ì–´ë…¸í…Œì´ì…˜ì´ ì„ ì–¸ë˜ì—ˆëŠ”ì§€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— ì •ì˜ëœ í´ë˜ìŠ¤ë‚´ ë©”ì„œë“œì—ë§Œ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. Custon Annotation ìƒì„±@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)public @interface ClassAop &#123;&#125; Advisor ìƒì„±@Slf4j@Aspectstatic class AtTargetAtWithinAspect &#123; //@target: ì¸ìŠ¤í„´ìŠ¤ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  ë©”ì„œë“œì˜ ì¡°ì¸ í¬ì¸íŠ¸ë¥¼ ì„ ì •, ë¶€ëª¨ íƒ€ì…ì˜ ë©”ì„œë“œë„ ì ìš© @Around(&quot;execution(* com.example.aop..*(..)) &amp;&amp; @target(com.example.aop.member.annotation.ClassAop)&quot;) public Object atTarget(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[@target] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125; //@within: ì„ íƒëœ í´ë˜ìŠ¤ ë‚´ë¶€ì— ìˆëŠ” ë©”ì„œë“œë§Œ ì¡°ì¸ í¬ì¸íŠ¸ë¡œ ì„ ì •, ë¶€ëª¨ íƒ€ì…ì˜ ë©”ì„œë“œëŠ” ì ìš©ë˜ì§€ ì•ŠìŒ @Around(&quot;execution(* com.example.aop..*(..)) &amp;&amp; @within(com.example.aop.member.annotation.ClassAop)&quot;) public Object atWithin(ProceedingJoinPoint joinPoint) throws Throwable &#123; log.info(&quot;[@within] &#123;&#125;&quot;, joinPoint.getSignature()); return joinPoint.proceed(); &#125;&#125; AOP ì ìš© í™•ì¸@Testvoid success() &#123; log.info(&quot;child Proxy=&#123;&#125;&quot;, child.getClass()); child.childMethod(); //ë¶€ëª¨, ìì‹ ëª¨ë‘ ìˆëŠ” ë©”ì„œë“œ child.parentMethod(); //ë¶€ëª¨ í´ë˜ìŠ¤ë§Œ ìˆëŠ” ë©”ì„œë“œ&#125;static class Config &#123; @Bean public Parent parent() &#123; return new Parent(); &#125; @Bean public Child child() &#123; return new Child(); &#125; @Bean public AtTargetAtWithinAspect atTargetAtWithinAspect() &#123; return new AtTargetAtWithinAspect(); &#125;&#125;static class Parent &#123; public void parentMethod()&#123;&#125; //ë¶€ëª¨ì—ë§Œ ìˆëŠ” ë©”ì„œë“œ&#125;@ClassAopstatic class Child extends Parent &#123; public void childMethod()&#123;&#125;&#125; 2021-12-20 20:45:37.947 INFO 34481 --- [ Test worker] c.e.aop.pointcut.AtTargetAtWithinTest : child Proxy=class com.example.aop.pointcut.AtTargetAtWithinTest$Child$$EnhancerBySpringCGLIB$$6f94df272021-12-20 20:45:37.951 INFO 34481 --- [ Test worker] argetAtWithinTest$AtTargetAtWithinAspect : [@target] void com.example.aop.pointcut.AtTargetAtWithinTest$Child.childMethod()2021-12-20 20:45:37.951 INFO 34481 --- [ Test worker] argetAtWithinTest$AtTargetAtWithinAspect : [@within] void com.example.aop.pointcut.AtTargetAtWithinTest$Child.childMethod()2021-12-20 20:45:37.955 INFO 34481 --- [ Test worker] argetAtWithinTest$AtTargetAtWithinAspect : [@target] void com.example.aop.pointcut.AtTargetAtWithinTest$Parent.parentMethod()","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut í‘œí˜„ì‹","slug":"Spring/Spring-AOP/Pointcut-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"Spring AOP Pointcut í‘œí˜„ì‹ - args","slug":"spring/spring-aop/pointcut/pointcut-args","date":"2021-12-20T01:31:07.000Z","updated":"2024-11-28T04:06:24.026Z","comments":true,"path":"2021/12/20/spring/spring-aop/pointcut/pointcut-args/","link":"","permalink":"https://ckck803.github.io/2021/12/20/spring/spring-aop/pointcut/pointcut-args/","excerpt":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut Pointcut í‘œí˜„ì‹ - args args ëŠ” ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ AOP ë¥¼ ì ìš© argsëŠ” ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë§¤ì¹­í•˜ê¸° ìœ„í•œ í‘œí˜„ì‹ì…ë‹ˆë‹¤. ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì´ë‚˜ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ íŠ¹ì • ë©”ì„œë“œì—ë§Œ AOPë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê°ì²´@ClassAop@Componentpublic class MemberServiceImpl implements MemberService &#123; @Override @MethodAop(&quot;test value&quot;) public String hello(String param) &#123; return &quot;ok&quot;; &#125; private String internal(String param) &#123; return &quot;ok&quot;; &#125;&#125; args ë¥¼ ì´ìš©í•´ ì ìš© ì—¬ë¶€ íŒë‹¨@BeforeEachpublic void init() throws NoSuchMethodException &#123; helloMethod = MemberServiceImpl.class.getMethod(&quot;hello&quot;, String.class);&#125;private AspectJExpressionPointcut pointcut(String expression) &#123; AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut(); pointcut.setExpression(expression); return pointcut;&#125;@Testvoid args() &#123; // hello(String)ê³¼ ë§¤ì¹­ assertThat(pointcut(&quot;args(String)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); // Object ëŠ” String ì˜ ìƒìœ„ íƒ€ì… assertThat(pointcut(&quot;args(Object)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); assertThat(pointcut(&quot;args()&quot;) .matches(helloMethod, MemberServiceImpl.class)).isFalse(); assertThat(pointcut(&quot;args(..)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); assertThat(pointcut(&quot;args(*)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); assertThat(pointcut(&quot;args(String,..)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue();&#125;","text":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut Pointcut í‘œí˜„ì‹ - args args ëŠ” ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ AOP ë¥¼ ì ìš© argsëŠ” ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë§¤ì¹­í•˜ê¸° ìœ„í•œ í‘œí˜„ì‹ì…ë‹ˆë‹¤. ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì´ë‚˜ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ íŠ¹ì • ë©”ì„œë“œì—ë§Œ AOPë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê°ì²´@ClassAop@Componentpublic class MemberServiceImpl implements MemberService &#123; @Override @MethodAop(&quot;test value&quot;) public String hello(String param) &#123; return &quot;ok&quot;; &#125; private String internal(String param) &#123; return &quot;ok&quot;; &#125;&#125; args ë¥¼ ì´ìš©í•´ ì ìš© ì—¬ë¶€ íŒë‹¨@BeforeEachpublic void init() throws NoSuchMethodException &#123; helloMethod = MemberServiceImpl.class.getMethod(&quot;hello&quot;, String.class);&#125;private AspectJExpressionPointcut pointcut(String expression) &#123; AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut(); pointcut.setExpression(expression); return pointcut;&#125;@Testvoid args() &#123; // hello(String)ê³¼ ë§¤ì¹­ assertThat(pointcut(&quot;args(String)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); // Object ëŠ” String ì˜ ìƒìœ„ íƒ€ì… assertThat(pointcut(&quot;args(Object)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); assertThat(pointcut(&quot;args()&quot;) .matches(helloMethod, MemberServiceImpl.class)).isFalse(); assertThat(pointcut(&quot;args(..)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); assertThat(pointcut(&quot;args(*)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); assertThat(pointcut(&quot;args(String,..)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue();&#125; execution ê³¼ args ì˜ ì°¨ì´ì execution ì€ ì»´íŒŒì¼ ì‹œì ì— ì ìš© ëŒ€ìƒì„ íŒë‹¨í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, íŒŒë¼ë¯¸í„° íƒ€ì…ì´ ì •í™•í•˜ê²Œ ì¼ì¹˜ë¼ì•¼ í•˜ë©° í´ë˜ìŠ¤ì— ì„ ì–¸ëœ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ AOP ë¥¼ ì ìš©í•©ë‹ˆë‹¤. args ëŠ” ëŸ°íƒ€ì„ ì‹œì ì— ì „ë‹¬ë°›ì€ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì ìš©ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì „ë‹¬ ë°›ì€ ê°ì²´ê°€ ìºìŠ¤íŒ…ì´ ë  ê²½ìš° ë‹¤ì‹œ ë§í•´, í¬ì¸íŠ¸ ì»· í‘œí˜„ì‹ì´ ê°ì²´ì˜ ìƒìœ„ íƒ€ì…ì¸ ê²½ìš° AOP ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. /** * execution(* *(java.io.Serializable)): ë©”ì„œë“œì˜ ì‹œê·¸ë‹ˆì²˜ë¡œ íŒë‹¨ (ì •ì ) * args(java.io.Serializable): ëŸ°íƒ€ì„ì— ì „ë‹¬ëœ ì¸ìˆ˜ë¡œ íŒë‹¨ (ë™ì ) */@Testvoid argsVsExecution() &#123; assertThat(pointcut(&quot;args(String)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); // args ëŠ” ìƒìœ„ íƒ€ì…ë„ í—ˆìš©í•©ë‹ˆë‹¤. // Serializable ëŠ” String ì˜ ìƒìœ„ íƒ€ì… assertThat(pointcut(&quot;args(java.io.Serializable)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); // Object ëŠ” String ì˜ ìƒìœ„ íƒ€ì… assertThat(pointcut(&quot;args(Object)&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); // execution ì€ ì •í™•í•˜ê²Œ ë§¤ì¹­ë¼ì•¼ í•œë‹¤. assertThat(pointcut(&quot;execution(* *(String))&quot;) .matches(helloMethod, MemberServiceImpl.class)).isTrue(); assertThat(pointcut(&quot;execution(* *(java.io.Serializable))&quot;) //ë§¤ì¹­ ì‹¤íŒ¨ .matches(helloMethod, MemberServiceImpl.class)).isFalse(); assertThat(pointcut(&quot;execution(* *(Object))&quot;) //ë§¤ì¹­ ì‹¤íŒ¨ .matches(helloMethod, MemberServiceImpl.class)).isFalse();&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut í‘œí˜„ì‹","slug":"Spring/Spring-AOP/Pointcut-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"Spring AOP Pointcut í‘œí˜„ì‹ - within","slug":"spring/spring-aop/pointcut/pointcut-within","date":"2021-12-20T00:31:07.000Z","updated":"2024-11-28T04:06:24.026Z","comments":true,"path":"2021/12/20/spring/spring-aop/pointcut/pointcut-within/","link":"","permalink":"https://ckck803.github.io/2021/12/20/spring/spring-aop/pointcut/pointcut-within/","excerpt":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut within within ì€ íŠ¹ì • íƒ€ì… ì— ëŒ€í•´ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. íŠ¹ì • íƒ€ì…ì´ within ì„ ë§Œì¡± í•˜ë©´ í•´ë‹¹ íƒ€ì…ë‚´ ëª¨ë“  ë©”ì†Œë“œëŠ” Advice ê°€ ì ìš©ë©ë‹ˆë‹¤. // com.example.aop.member.MemberServiceImpl íƒ€ì…ì„ ëŒ€ìƒìœ¼ë¡œ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤.within(com.example.aop.member.MemberServiceImpl)// com.example.aop.member íŒ¨í‚¤ì§€ë‚´ íƒ€ì… ì´ë¦„ì— Service ê°€ ë“¤ì–´ê°€ë©´ Advice ë¥¼ ì ìš¯í•©ë‹ˆë‹¤.within(com.example.aop.member.*Service*)// com.example.aop íŒ¨í‚¤ì§€ì™€ í•˜ìœ„ íŒ¨í‚¤ì§€ë‚´ ëª¨ë“  íƒ€ì…ì— Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤.within(com.example.aop..*) execution ê³¼ within ì˜ ì°¨ì´within ì€ í‘œí˜„ì‹ì€ execution ê³¼ ë‹¤ë¥´ê²Œ ë¶€ëª¨ íƒ€ì…ì„ ì§€ì •í–ˆì„ ê²½ìš° ìì‹ íƒ€ì…ì—ëŠ” Advice ê°€ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¦‰, ìƒì†ì´ë‚˜ êµ¬í˜„ì„ í†µí•´ ìƒì„±ëœ ê°ì²´ì—ëŠ” Advice ê°€ ì ìš©ë˜ì§€ ì•Šê³  ì •í™•í•˜ê²Œ ì§€ì •ëœ íƒ€ì…ì—ë§Œ ì ìš©ë˜ëŠ” ì ì—ì„œ execution ê³¼ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤. @Test@DisplayName(&quot;íƒ€ê²Ÿì˜ íƒ€ì…ì—ë§Œ ì§ì ‘ ì ìš©, ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„ ì •í•˜ë©´ ì•ˆëœë‹¤.&quot;)void withinSuperTypeFalse() &#123; pointcut.setExpression(&quot;within(com.example.aop.member.MemberService)&quot;); assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isFalse();&#125;@Test@DisplayName(&quot;executionì€ íƒ€ì… ê¸°ë°˜, ì¸í„°í˜ì´ìŠ¤ ì„ ì • ê°€ëŠ¥&quot;)void executionSuperTypeTrue() &#123; pointcut.setExpression(&quot;execution(* com.example.aop.member.MemberService.*(..))&quot;); assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();&#125;","text":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut within within ì€ íŠ¹ì • íƒ€ì… ì— ëŒ€í•´ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. íŠ¹ì • íƒ€ì…ì´ within ì„ ë§Œì¡± í•˜ë©´ í•´ë‹¹ íƒ€ì…ë‚´ ëª¨ë“  ë©”ì†Œë“œëŠ” Advice ê°€ ì ìš©ë©ë‹ˆë‹¤. // com.example.aop.member.MemberServiceImpl íƒ€ì…ì„ ëŒ€ìƒìœ¼ë¡œ Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤.within(com.example.aop.member.MemberServiceImpl)// com.example.aop.member íŒ¨í‚¤ì§€ë‚´ íƒ€ì… ì´ë¦„ì— Service ê°€ ë“¤ì–´ê°€ë©´ Advice ë¥¼ ì ìš¯í•©ë‹ˆë‹¤.within(com.example.aop.member.*Service*)// com.example.aop íŒ¨í‚¤ì§€ì™€ í•˜ìœ„ íŒ¨í‚¤ì§€ë‚´ ëª¨ë“  íƒ€ì…ì— Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤.within(com.example.aop..*) execution ê³¼ within ì˜ ì°¨ì´within ì€ í‘œí˜„ì‹ì€ execution ê³¼ ë‹¤ë¥´ê²Œ ë¶€ëª¨ íƒ€ì…ì„ ì§€ì •í–ˆì„ ê²½ìš° ìì‹ íƒ€ì…ì—ëŠ” Advice ê°€ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¦‰, ìƒì†ì´ë‚˜ êµ¬í˜„ì„ í†µí•´ ìƒì„±ëœ ê°ì²´ì—ëŠ” Advice ê°€ ì ìš©ë˜ì§€ ì•Šê³  ì •í™•í•˜ê²Œ ì§€ì •ëœ íƒ€ì…ì—ë§Œ ì ìš©ë˜ëŠ” ì ì—ì„œ execution ê³¼ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤. @Test@DisplayName(&quot;íƒ€ê²Ÿì˜ íƒ€ì…ì—ë§Œ ì§ì ‘ ì ìš©, ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„ ì •í•˜ë©´ ì•ˆëœë‹¤.&quot;)void withinSuperTypeFalse() &#123; pointcut.setExpression(&quot;within(com.example.aop.member.MemberService)&quot;); assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isFalse();&#125;@Test@DisplayName(&quot;executionì€ íƒ€ì… ê¸°ë°˜, ì¸í„°í˜ì´ìŠ¤ ì„ ì • ê°€ëŠ¥&quot;)void executionSuperTypeTrue() &#123; pointcut.setExpression(&quot;execution(* com.example.aop.member.MemberService.*(..))&quot;); assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut í‘œí˜„ì‹","slug":"Spring/Spring-AOP/Pointcut-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"Spring AOP Pointcut í‘œí˜„ì‹ - execution","slug":"spring/spring-aop/pointcut/pointcut-execution","date":"2021-12-19T23:31:07.000Z","updated":"2024-11-29T03:50:04.973Z","comments":true,"path":"2021/12/20/spring/spring-aop/pointcut/pointcut-execution/","link":"","permalink":"https://ckck803.github.io/2021/12/20/spring/spring-aop/pointcut/pointcut-execution/","excerpt":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut Pointcut í‘œí˜„ì‹ - execution execution( [ì ‘ê·¼ì œì–´ì] ë¦¬í„´íƒ€ì… [ì„ ì–¸íƒ€ì…] ë©”ì†Œë“œì´ë¦„(íŒŒë¼ë¯¸í„°) [ì˜ˆì™¸] ) execution ëŠ” Pointcut í‘œí˜„ì‹ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ëª…ì‹œì ì…ë‹ˆë‹¤. execution ëŠ” ë©”ì†Œë“œì˜ ì ‘ê·¼ ì œì–´ì, ë¦¬í„´ íƒ€ì…, ë©”ì†Œë“œê°€ ì„ ì–¸ëœ íŒ¨í‚¤ì§€, í´ë˜ìŠ¤ ì •ë³´, ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°, ì˜ˆì™¸ì²˜ë¦¬ ì •ë³´ë¥¼ ì´ìš©í•´ ë‹¤ì–‘í•œ ì¡°ê±´ìœ¼ë¡œ Pointcut ì„ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•©ë‹ˆë‹¤. ì ‘ê·¼ì œì–´ì, ì„ ì–¸íƒ€ì…, ì˜ˆì™¸ì˜ ê²½ìš°ëŠ” ìƒê°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. execution ì‚¬ìš© ì˜ˆì‹œexecution(public String com.example.aop.member.MemberServiceImpl.hello(String))","text":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut Pointcut í‘œí˜„ì‹ - execution execution( [ì ‘ê·¼ì œì–´ì] ë¦¬í„´íƒ€ì… [ì„ ì–¸íƒ€ì…] ë©”ì†Œë“œì´ë¦„(íŒŒë¼ë¯¸í„°) [ì˜ˆì™¸] ) execution ëŠ” Pointcut í‘œí˜„ì‹ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ëª…ì‹œì ì…ë‹ˆë‹¤. execution ëŠ” ë©”ì†Œë“œì˜ ì ‘ê·¼ ì œì–´ì, ë¦¬í„´ íƒ€ì…, ë©”ì†Œë“œê°€ ì„ ì–¸ëœ íŒ¨í‚¤ì§€, í´ë˜ìŠ¤ ì •ë³´, ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°, ì˜ˆì™¸ì²˜ë¦¬ ì •ë³´ë¥¼ ì´ìš©í•´ ë‹¤ì–‘í•œ ì¡°ê±´ìœ¼ë¡œ Pointcut ì„ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•©ë‹ˆë‹¤. ì ‘ê·¼ì œì–´ì, ì„ ì–¸íƒ€ì…, ì˜ˆì™¸ì˜ ê²½ìš°ëŠ” ìƒê°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. execution ì‚¬ìš© ì˜ˆì‹œexecution(public String com.example.aop.member.MemberServiceImpl.hello(String)) ì ‘ê·¼ ì œì–´ì : public ì¸ ë©”ì†Œë“œ ë¦¬í„´ íƒ€ì… : String ì„ ì–¸ íƒ€ì… : com.example.aop.member.MemberServiceImpl ë©”ì†Œë“œ ì´ë¦„ : hello íŒŒë¼ë¯¸í„° : String ì˜ˆì™¸ : ìƒëµ execution ì‚¬ìš© ì˜ˆì‹œ - ëª¨ë“  ë©”ì†Œë“œë¥¼ ëŒ€ìƒìœ¼ë¡œ í•œ í¬ì¸íŠ¸ ì»·ëª¨ë“  ë¦¬í„´íƒ€ì…ì´ë‚˜ ëª¨ë“  ë©”ì†Œë“œì´ë¦„ì„ ëŒ€ìƒìœ¼ë¡œ Advice ë¥¼ ì ìš©í•˜ê¸° ìœ„í•œ ì™€ì¼ë“œ ì¹´ë“œë¡œ * ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , 0ê°œ ì´ìƒì˜ íŒŒë¼ë¯¸í„° ì •ë³´ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ .. ë¥¼ ì œê³µí•©ë‹ˆë‹¤ ëª¨ë“  ë©”ì†Œë“œ Advice ë¥¼ ì ìš©í•˜ê¸° ìœ„í•œ í‘œí˜„ì‹ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. execution(* *(..)) ì ‘ê·¼ ì œì–´ì : ìƒëµ ë¦¬í„´ íƒ€ì… : ëª¨ë“  ë¦¬í„´ íƒ€ì… ì„ ì–¸ íƒ€ì… : ìƒëµ ë©”ì†Œë“œ ì´ë¦„ : ëª¨ë“  ë©”ì†Œë“œ íŒŒë¼ë¯¸í„° : 0ê°œ ì´ìƒì˜ íŒŒë¼ë¯¸í„° ì˜ˆì™¸ : ì—†ìŒ execution - ë©”ì†Œë“œ ì§€ì • execution( [ì ‘ê·¼ì œì–´ì] ë¦¬í„´íƒ€ì… [ì„ ì–¸íƒ€ì…] ë©”ì†Œë“œì´ë¦„(íŒŒë¼ë¯¸í„°) [ì˜ˆì™¸] ) execution ì— íŠ¹ì • ë©”ì†Œë“œ ì •ë³´ë¥¼ ê¸°ì…í•  ê²½ìš° í•´ë‹¹ë˜ëŠ” ë©”ì†Œë“œì— Advice ê°€ ì ìš©ë©ë‹ˆë‹¤. ë©”ì†Œë“œ ì´ë¦„ì— * ë¥¼ ë„£ì€ ê²½ìš° ëª¨ë“  ëŒ€ìƒìœ¼ë¡œ Advice ê°€ ì ìš©ë˜ê³  íŠ¹ì •ì´ë¦„ìœ¼ë¡œ ì‹œì‘í•˜ê±°ë‚˜ í¬í•¨í•˜ê±°ë‚˜ ëë‚˜ëŠ” ê²½ìš°ì—ëŠ” ì´ë¦„ ì •ë³´ì™€ * ë¥¼ ì¡°í•©í•˜ë©´ ì¡°ê±´ì— ë§ëŠ” ë©”ì†Œë“œë§Œ Advice ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. // hello ì¸ ë©”ì†Œë“œì— Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤.execution(* hello(..))// hel ë¡œ ì‹œì‘í•˜ëŠ” ë©”ì†Œë“œì— Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤.execution(* hel*(..))// ë©”ì†Œë“œ ì´ë¦„ì— el ì´ ë“¤ì–´ê°€ëŠ” ë©”ì†Œë“œì— Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤.execution(* *el*(..)) execution - ì„ ì–¸ íƒ€ì… ì§€ì • execution( [ì ‘ê·¼ì œì–´ì] ë¦¬í„´íƒ€ì… [ì„ ì–¸íƒ€ì…] ë©”ì†Œë“œì´ë¦„ (íŒŒë¼ë¯¸í„°) [ì˜ˆì™¸] ) ì„ ì–¸ íƒ€ì„ì˜ ê²½ìš° íŒ¨í‚¤ì§€ì™€ í´ë˜ìŠ¤ ì •ë³´ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. íŒ¨í‚¤ì§€ì™€ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•œ ì§€ì •, íŠ¹ì • íŒ¨í‚¤ì§€ë§Œ ì§€ì •, í•˜ìœ„ íŒ¨í‚¤ì§€ê¹Œì§€ ì§€ì •, êµ¬í˜„ í´ë˜ìŠ¤ ì§€ì •, ì¸í„°í˜ì´ìŠ¤ í˜¹ì€ ìƒìœ„ í´ë˜ìŠ¤ ì§€ì •, íŠ¹ì • íŒ¨í‚¤ì§€ ì •ë³´ì™€ í´ë˜ìŠ¤ë¥¼ ì§€ì •í•˜ëŠ” ë°©ë²•ë“±ì„ í†µí•´ Advice ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 1. ì„ ì–¸ íƒ€ì… ì§€ì • - íŠ¹ì • Package ë‚´ Class ë¥¼ ì§€ì •íŒ¨í‚¤ì§€ì™€ í´ë˜ìŠ¤ë¥¼ ëª…ì‹œí•˜ë©´ í•´ë‹¹ íŒ¨í‚¤ì§€ë‚´ í´ë˜ìŠ¤ ë©”ì†Œë“œë¥¼ ëŒ€ìƒìœ¼ë¡œ Advice ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. execution(* com.example.aop.member.MemberServiceImpl.hello(..)) 2. ì„ ì–¸ íƒ€ì… ì§€ì • - Package ë‚´ ëª¨ë“  í´ë˜ìŠ¤ì— ì ìš©íŒ¨í‚¤ì§€ì— ì†í•œ ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ëŒ€ìƒìœ¼ë¡œ Advice ë¥¼ ì ìš©í•˜ê³  ì‹¶ë‹¤ë©´ íŒ¨ì§€í‚¤ ì •ë³´ ë§Œ ëª…ì‹œí•˜ê³  í´ë˜ìŠ¤ ì •ë³´ ì— * ë¥¼ ë„£ìœ¼ë©´ í•´ë‹¹ íŒ¨í‚¤ì§€ ë‚´ ëª¨ë“  í´ë˜ìŠ¤ ë©”ì†Œë“œì— AOP ë¥¼ ì ìš©í•©ë‹ˆë‹¤. íŒ¨í‚¤ì§€ë¥¼ ëª…ì‹œí•  ê²½ìš° í•´ë‹¹ íŒ¨í‚¤ì§€ë‚´ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œë§Œ Advice ê°€ ì ìš©ë©ë‹ˆë‹¤. ë‹¤ì‹œë§í•´, í•˜ìœ„ íŒ¨í‚¤ì§€ í´ë˜ìŠ¤ì—ëŠ” Advice ê°€ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. // com.example.aop.member íŒ¨í‚¤ì§€ ë‚´ í´ë˜ìŠ¤ì— Advice ê°€ ì ìš©execution(* com.example.aop.member.*.*(..)) // com.example.aop.member íŒ¨í‚¤ì§€ ë‚´ í´ë˜ìŠ¤ì—ëŠ” Advice ê°€ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.execution(* com.example.aop.*.*(..)) 3. ì„ ì–¸ íƒ€ì… ì§€ì • - í•˜ìœ„ Package ë‚´ í´ë˜ìŠ¤ê¹Œì§€ AOP ì ìš©ì„ ì–¸íƒ€ì… íŒ¨í‚¤ì§€ ê²½ë¡œì— .. ë¥¼ ë„£ì–´ì£¼ë©´ í•˜ìœ„ íŒ¨í‚¤ì§€ë‚´ ê°ì²´ë“¤ê¹Œì§€ Advice ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. // com.example.aop.member í•˜ìœ„ íŒ¨í‚¤ì§€ í´ë˜ìŠ¤ê¹Œì§€ AOP ë¥¼ ì ìš©í•©ë‹ˆë‹¤.execution(* com.example.aop.member..*.*(..))// com.example.aop í•˜ìœ„ íŒ¨í‚¤ì§€ í´ë˜ìŠ¤ê¹Œì§€ AOP ë¥¼ ì ìš©í•©ë‹ˆë‹¤.execution(* com.example.aop..*.*(..)) 4. ì„ ì–¸ íƒ€ì… ì§€ì • - ë¶€ëª¨ íƒ€ì… ì§€ì • ë° ìì‹ íƒ€ì…ì— ì ìš©ë¶€ëª¨ íƒ€ì…ì„ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” Pointcut ì€ ìì‹ íƒ€ì…ì„ ëŒ€ìƒìœ¼ë¡œë„ ë™ì¼í•˜ê²Œ ì ìš©ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, êµ¬í˜„ í˜¹ì€ ìƒì†ì„ í†µí•´ ìì‹ íƒ€ì…ì—ë„ Advice ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶€ëª¨ íƒ€ì…ì„ ì§€ì •í•˜ë©´ Pointcut ì˜ ëŒ€ìƒì€ ë¶€ëª¨ íƒ€ì…ì— ì •ì˜ëœ ë©”ì†Œë“œì—ë§Œ ì ìš©ë©ë‹ˆë‹¤. ì¦‰, ìì‹ íƒ€ì…ì—ì„œ ì„ ì–¸í•œ ë©”ì†Œë“œëŠ” Pointcut ëŒ€ìƒì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. // ë¶€ëª¨ íƒ€ì…ì„ ì§€ì •í•˜ë©´ ìì‹ íƒ€ì…ì—ë„ ì ìš©ë©ë‹ˆë‹¤.execution(* com.example.aop.member.MemberService.*.*(..))// ìì‹ íƒ€ì…ì—ì„œ ì„ ì–¸í•œ ë©”ì†Œë“œëŠ” AOP ê°€ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.// internal ë©”ì†Œë“œëŠ” MemberServiceImpl í´ë˜ìŠ¤ì—ì„œ ì„ ì–¸í•œ ë©”ì†Œë“œë¼ AOP ì ìš©ëŒ€ìƒì´ ì•„ë‹™ë‹ˆë‹¤.pointcut.setExpression(&quot;execution(* com.example.aop.member.MemberService.*.*(..))&quot;);Method internalMethod = MemberServiceImpl.class.getMethod(&quot;internal&quot;, String.class);assertThat(pointcut.matches(internalMethod, MemberServiceImpl.class)).isFalse(); execution - Parameter ì§€ì • execution( [ì ‘ê·¼ì œì–´ì] ë¦¬í„´íƒ€ì… [ì„ ì–¸íƒ€ì…] ë©”ì†Œë“œì´ë¦„ (íŒŒë¼ë¯¸í„°) [ì˜ˆì™¸] ) ë©”ì†Œë“œì—ì„œ ì‚¬ìš©í•˜ëŠ” Paramater ë¥¼ ëŒ€ìƒìœ¼ë¡œ Advice ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í‘œí˜„ì‹ì„ ì´ìš©í•´ ë‹¨ì¼, í•œê°œ ì´ìƒ, ëª¨ë“  íŒŒë¼ë¯¸í„°ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. // String íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œì— Advice ì ìš©execution(* *(String))// íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” ë©”ì†Œë“œë§Œ Advice ì ìš©execution(* *())// í•˜ë‚˜ì˜ íŒŒë¼ë¯¸í„°ë§Œ ê°€ì§„ ë©”ì†Œë“œì— Advice ì ìš©execution(* *(*))// ëª¨ë“  íŒŒë¼ë¯¸í„°í˜•ì‹ì˜ ëª¨ë“  ë©”ì†Œë“œì— Advice ì ìš©execution(* *(..))// íŠ¹ì • íŒŒë¼ë¯¸í„°ë¡œ ì‹œì‘í•˜ê³  ëª¨ë“  íŒŒë¼ë¯¸í„°í˜•ì‹ì˜ ë©”ì†Œë“œì— í—ˆìš©execution(* *(String, ..))","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut í‘œí˜„ì‹","slug":"Spring/Spring-AOP/Pointcut-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut","slug":"spring/spring-aop/pointcut/pointcut","date":"2021-12-19T22:31:07.000Z","updated":"2024-11-28T04:06:24.035Z","comments":true,"path":"2021/12/20/spring/spring-aop/pointcut/pointcut/","link":"","permalink":"https://ckck803.github.io/2021/12/20/spring/spring-aop/pointcut/pointcut/","excerpt":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut @Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)public @interface ClassAop &#123;&#125; @Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)public @interface MethodAop &#123; String value();&#125; public interface MemberService &#123; String hello(String param);&#125; @ClassAop@Componentpublic class MemberServiceImpl implements MemberService &#123; @Override @MethodAop(&quot;test&quot;) public String hello(String param) &#123; return null; &#125; public String internal(String param)&#123; return &quot;ok&quot;; &#125;&#125; AspectJExpressionPointcut ì´ í¬ì¸íŠ¸ ì»· í‘œí˜„ì‹ì„ ì²˜ë¦¬í•´ì£¼ëŠ” í´ë˜ìŠ¤ @Slf4jpublic class ExecutionTest &#123; AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut(); Method helloMethod; @BeforeEach public void init() throws NoSuchMethodException &#123; helloMethod = MemberServiceImpl.class.getMethod(&quot;hello&quot;, String.class); &#125; @Test void printMethod()&#123; log.info(&quot;helloMethod = &#123;&#125;&quot;, helloMethod); &#125;&#125;","text":"ëª©ì°¨ Spring AOP Pointcut í‘œí˜„ì‹ - this, target Spring AOP Pointcut í‘œí˜„ì‹ - Advice ì— ë§¤ê²Œë³€ìˆ˜ ì „ë‹¬ Spring AOP Pointcut í‘œí˜„ì‹ - bean Spring AOP Pointcut í‘œí˜„ì‹ - @args Spring AOP Pointcut í‘œí˜„ì‹ - @annotation Spring AOP Pointcut í‘œí˜„ì‹ - @target, @within Spring AOP Pointcut í‘œí˜„ì‹ - args Spring AOP Pointcut í‘œí˜„ì‹ - within Spring AOP Pointcut í‘œí˜„ì‹ - execution Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut @Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)public @interface ClassAop &#123;&#125; @Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)public @interface MethodAop &#123; String value();&#125; public interface MemberService &#123; String hello(String param);&#125; @ClassAop@Componentpublic class MemberServiceImpl implements MemberService &#123; @Override @MethodAop(&quot;test&quot;) public String hello(String param) &#123; return null; &#125; public String internal(String param)&#123; return &quot;ok&quot;; &#125;&#125; AspectJExpressionPointcut ì´ í¬ì¸íŠ¸ ì»· í‘œí˜„ì‹ì„ ì²˜ë¦¬í•´ì£¼ëŠ” í´ë˜ìŠ¤ @Slf4jpublic class ExecutionTest &#123; AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut(); Method helloMethod; @BeforeEach public void init() throws NoSuchMethodException &#123; helloMethod = MemberServiceImpl.class.getMethod(&quot;hello&quot;, String.class); &#125; @Test void printMethod()&#123; log.info(&quot;helloMethod = &#123;&#125;&quot;, helloMethod); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut","slug":"Spring/Spring-AOP/Pointcut","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut/"}],"tags":[]},{"title":"Java - Collection Framework","slug":"java/collection-framework/collection-framework-01","date":"2021-12-14T19:31:46.000Z","updated":"2024-11-28T13:59:31.930Z","comments":true,"path":"2021/12/15/java/collection-framework/collection-framework-01/","link":"","permalink":"https://ckck803.github.io/2021/12/15/java/collection-framework/collection-framework-01/","excerpt":"Java - Collection FrameworkList ì»¬ë™ì…˜ List ì»¬ë™ì…˜ì€ ê°ì²´ë¥¼ ì¼ë ¬ë¡œ ëŠ˜ì—¬ ë†“ì€ êµ¬ì¡° ë¥¼ ê°€ì§€ê³  ìˆë‹¤. ê°ì²´ë¥¼ ì¸ë±ìŠ¤ë¡œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ë¥¼ ì €ì¥í•˜ë©´ ì¸ë±ìŠ¤ê°€ ë¶€ì—¬ë˜ê³  í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼ ì´ìš©í•´ ê²€ìƒ‰, ì‚­ì œë¥¼ í•  ìˆ˜ ìˆë‹¤. List ì»¬ë™ì…˜ì—ì„œëŠ” ê°ì²´ ìì²´ë¥¼ ì €ì¥í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ê°ì²´ì˜ ë²ˆì§€ë¥¼ ì°¸ì¡°í•œë‹¤. ë™ì¼í•œ ê°ì²´ë¥¼ ì¤‘ë³µ ì €ì¥í•  ìˆ˜ ìˆë‹¤. ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ë¡œëŠ” ArrayList, Vector, LinkedList ë“±ì´ ìˆë‹¤. ë©”ì„œë“œ ì„¤ëª… boolean add(E e) List ë§¨ ëì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œ í›„ ì •ìƒì ìœ¼ë¡œ ì €ì¥ë˜ë©´ true ì‹¤íŒ¨í•˜ë©´ false ë¥¼ ë°˜í™˜í•œë‹¤. void add(int index, E element) ì£¼ì–´ì§„ ì¸ë±ìŠ¤ ìœ„ì¹˜ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œë‹¤. set(int index, E element) ì£¼ì–´ì§„ ì¸ë±ìŠ¤ ìœ„ì¹˜ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ë³€ê²½í•œë‹¤. boolean contains(Object o) ì£¼ì–´ì§„ ë°ì´í„°ê°€ Listì— ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. E get(int index) ì£¼ì–´ì§„ ì¸ë±ìŠ¤ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ë°˜í™˜í•œë‹¤. isEmpty() List ì— ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. int size() List ì—ì €ì¥ ë¼ ìˆëŠ” ë°ì´í„°ì˜ ì „ì²´ í¬ê¸°ë¥¼ ë°˜í™˜í•œë‹¤. E remove(int index) ì£¼ì–´ì§„ ì¸ë±ìŠ¤ì— ìœ„ì¹˜í•œ ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤. void clear() List ì— ì €ì¥ë¼ ìˆëŠ” ëª¨ë“  ì›ì†Œë“¤ì„ ì‚­ì œí•œë‹¤. boolean remove(Object o) List ì—ì„œ ì „ë‹¬ë°›ì€ ë°ì´í„°ì— í•´ë‹¹ í•˜ëŠ” ëª¨ë“  ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤. Set ì»¬ë™ì…˜ ì €ì¥ ìˆœì„œê°€ ìœ ì§€ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— Index ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹ , Iterator ë¥¼ ì´ìš©í•´ Set ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ê°ì²´ë¥¼ ì¤‘ë³µí•´ì„œ ì €ì¥í•  ìˆ˜ ì—†ê³ , í•˜ë‚˜ì˜ null ë§Œ ì €ì¥í•  ìˆ˜ ìˆë‹¤. ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ë¡œëŠ” HashSet, TreeSet ì´ ìˆë‹¤. ë©”ì„œë“œ ì„¤ëª… boolean add(E e) ë°ì´í„°ë¥¼ Set ì— ì €ì¥í•œ í›„ ì •ìƒì ìœ¼ë¡œ ì €ì¥ë˜ë©´ trueë¥¼ ì¤‘ë³µ ê°ì²´ë©´ false ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. boolean contains(Object o) ê°ì²´ê°€ ì €ì¥ë¼ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. Iterator iterator() ì €ì¥ëœ ê°ì²´ë¥¼ í•œë²ˆì”© ê°€ì ¸ì˜¤ëŠ” ë°˜ë³µìë¥¼ ë°˜í™˜í•œë‹¤. isEmpty() Set ì´ ë¹„ì–´ìˆëŠ”ì§€ ì¡°ì‚¬í•©ë‹ˆë‹¤. int Size() Set ì— ì €ì¥ë¼ ìˆëŠ” ì „ì²´ ê°ì²´ìˆ˜ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. void clear() Set ì— ì €ì¥ëœ ëª¨ë“  ê°ì²´ë¥¼ ì‚­ì œ boolean remove(Object o) Set ì— ì €ì¥ëœ ì£¼ì–´ì§„ ê°ì²´ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. Map ì»¬ë™ì…˜ Key, Value í˜•ì‹ ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” ìë£Œêµ¬ì¡° í‚¤ëŠ” ì¤‘ë³µ ì €ì¥ë  ìˆ˜ ì—†ì§€ë§Œ ê°’ì€ ì¤‘ë³µ ì €ì¥ë  ìˆ˜ ìˆë‹¤. ê¸°ì¡´ì— ì €ì¥ëœ í‚¤ì™€ ë™ì¼í•œ í‚¤ë¡œ ê°’ì„ ì €ì¥í•˜ë©´ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ëŒ€ì²´ëœë‹¤. ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ë¡œëŠ” HashMap, HashTable, LinkedHashMap, TreeMap ë“±ì´ ìˆë‹¤. ë©”ì„œë“œ ì„¤ëª… V put(K Key, V value) Map ì— ì£¼ì–´ì§„ í‚¤ì™€ ê°’ì„ ì¶”ê°€í•´ ì €ì¥ë˜ë©´ í•´ë‹¹ ê°’ì„ ë¦¬í„´í•©ë‹ˆë‹¤. boolean containsKey(Object Key) Map ì— ì£¼ì–´ì§„ í‚¤ ê°€ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. boolean containsValue(Object value) Map ì— ì£¼ì–´ì§„ ê°’ ì´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() ëª¨ë“  Map.Entry ê°ì²´ë¥¼ Setì— ë‹´ì•„ ë¦¬í„´í•©ë‹ˆë‹¤. Set keySet() ëª¨ë“  í‚¤ë¥¼ Set ê°ì²´ì— ë‹´ì•„ì„œ ë¦¬í„´í•©ë‹ˆë‹¤. V get(Object key) ì£¼ì–´ì§„ í‚¤ì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ë¦¬í„´í•©ë‹ˆë‹¤. boolean isEmpty() Map ì´ ë¹„ì–´ìˆëŠ”ì§€ ì¡°ì‚¬í•©ë‹ˆë‹¤. int Size() Map ì— ì €ì¥ë¼ ìˆëŠ” ì „ì²´ ê°ì²´ì˜ ìˆ˜ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. Collection values() Map ì— ì €ì¥ëœ ëª¨ë“  ê°’ì„ Collection ê°ì²´ì— ë‹´ì•„ì„œ ë¦¬í„´í•©ë‹ˆë‹¤. void clear() ì €ì¥ëœ ëª¨ë“  Map.Entryë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. V remove(Object Key) ì£¼ì–´ì§„ í‚¤ì™€ ì¼ì¹˜í•˜ëŠ” Map.Entryë¥¼ ì‚­ì œí•˜ê³  ê°’ì„ ë¦¬í„´í•©ë‹ˆë‹¤.","text":"Java - Collection FrameworkList ì»¬ë™ì…˜ List ì»¬ë™ì…˜ì€ ê°ì²´ë¥¼ ì¼ë ¬ë¡œ ëŠ˜ì—¬ ë†“ì€ êµ¬ì¡° ë¥¼ ê°€ì§€ê³  ìˆë‹¤. ê°ì²´ë¥¼ ì¸ë±ìŠ¤ë¡œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ë¥¼ ì €ì¥í•˜ë©´ ì¸ë±ìŠ¤ê°€ ë¶€ì—¬ë˜ê³  í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼ ì´ìš©í•´ ê²€ìƒ‰, ì‚­ì œë¥¼ í•  ìˆ˜ ìˆë‹¤. List ì»¬ë™ì…˜ì—ì„œëŠ” ê°ì²´ ìì²´ë¥¼ ì €ì¥í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ê°ì²´ì˜ ë²ˆì§€ë¥¼ ì°¸ì¡°í•œë‹¤. ë™ì¼í•œ ê°ì²´ë¥¼ ì¤‘ë³µ ì €ì¥í•  ìˆ˜ ìˆë‹¤. ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ë¡œëŠ” ArrayList, Vector, LinkedList ë“±ì´ ìˆë‹¤. ë©”ì„œë“œ ì„¤ëª… boolean add(E e) List ë§¨ ëì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œ í›„ ì •ìƒì ìœ¼ë¡œ ì €ì¥ë˜ë©´ true ì‹¤íŒ¨í•˜ë©´ false ë¥¼ ë°˜í™˜í•œë‹¤. void add(int index, E element) ì£¼ì–´ì§„ ì¸ë±ìŠ¤ ìœ„ì¹˜ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œë‹¤. set(int index, E element) ì£¼ì–´ì§„ ì¸ë±ìŠ¤ ìœ„ì¹˜ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ë³€ê²½í•œë‹¤. boolean contains(Object o) ì£¼ì–´ì§„ ë°ì´í„°ê°€ Listì— ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. E get(int index) ì£¼ì–´ì§„ ì¸ë±ìŠ¤ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ë°˜í™˜í•œë‹¤. isEmpty() List ì— ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. int size() List ì—ì €ì¥ ë¼ ìˆëŠ” ë°ì´í„°ì˜ ì „ì²´ í¬ê¸°ë¥¼ ë°˜í™˜í•œë‹¤. E remove(int index) ì£¼ì–´ì§„ ì¸ë±ìŠ¤ì— ìœ„ì¹˜í•œ ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤. void clear() List ì— ì €ì¥ë¼ ìˆëŠ” ëª¨ë“  ì›ì†Œë“¤ì„ ì‚­ì œí•œë‹¤. boolean remove(Object o) List ì—ì„œ ì „ë‹¬ë°›ì€ ë°ì´í„°ì— í•´ë‹¹ í•˜ëŠ” ëª¨ë“  ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤. Set ì»¬ë™ì…˜ ì €ì¥ ìˆœì„œê°€ ìœ ì§€ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— Index ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹ , Iterator ë¥¼ ì´ìš©í•´ Set ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ê°ì²´ë¥¼ ì¤‘ë³µí•´ì„œ ì €ì¥í•  ìˆ˜ ì—†ê³ , í•˜ë‚˜ì˜ null ë§Œ ì €ì¥í•  ìˆ˜ ìˆë‹¤. ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ë¡œëŠ” HashSet, TreeSet ì´ ìˆë‹¤. ë©”ì„œë“œ ì„¤ëª… boolean add(E e) ë°ì´í„°ë¥¼ Set ì— ì €ì¥í•œ í›„ ì •ìƒì ìœ¼ë¡œ ì €ì¥ë˜ë©´ trueë¥¼ ì¤‘ë³µ ê°ì²´ë©´ false ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. boolean contains(Object o) ê°ì²´ê°€ ì €ì¥ë¼ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. Iterator iterator() ì €ì¥ëœ ê°ì²´ë¥¼ í•œë²ˆì”© ê°€ì ¸ì˜¤ëŠ” ë°˜ë³µìë¥¼ ë°˜í™˜í•œë‹¤. isEmpty() Set ì´ ë¹„ì–´ìˆëŠ”ì§€ ì¡°ì‚¬í•©ë‹ˆë‹¤. int Size() Set ì— ì €ì¥ë¼ ìˆëŠ” ì „ì²´ ê°ì²´ìˆ˜ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. void clear() Set ì— ì €ì¥ëœ ëª¨ë“  ê°ì²´ë¥¼ ì‚­ì œ boolean remove(Object o) Set ì— ì €ì¥ëœ ì£¼ì–´ì§„ ê°ì²´ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. Map ì»¬ë™ì…˜ Key, Value í˜•ì‹ ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” ìë£Œêµ¬ì¡° í‚¤ëŠ” ì¤‘ë³µ ì €ì¥ë  ìˆ˜ ì—†ì§€ë§Œ ê°’ì€ ì¤‘ë³µ ì €ì¥ë  ìˆ˜ ìˆë‹¤. ê¸°ì¡´ì— ì €ì¥ëœ í‚¤ì™€ ë™ì¼í•œ í‚¤ë¡œ ê°’ì„ ì €ì¥í•˜ë©´ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ëŒ€ì²´ëœë‹¤. ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ë¡œëŠ” HashMap, HashTable, LinkedHashMap, TreeMap ë“±ì´ ìˆë‹¤. ë©”ì„œë“œ ì„¤ëª… V put(K Key, V value) Map ì— ì£¼ì–´ì§„ í‚¤ì™€ ê°’ì„ ì¶”ê°€í•´ ì €ì¥ë˜ë©´ í•´ë‹¹ ê°’ì„ ë¦¬í„´í•©ë‹ˆë‹¤. boolean containsKey(Object Key) Map ì— ì£¼ì–´ì§„ í‚¤ ê°€ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. boolean containsValue(Object value) Map ì— ì£¼ì–´ì§„ ê°’ ì´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() ëª¨ë“  Map.Entry ê°ì²´ë¥¼ Setì— ë‹´ì•„ ë¦¬í„´í•©ë‹ˆë‹¤. Set keySet() ëª¨ë“  í‚¤ë¥¼ Set ê°ì²´ì— ë‹´ì•„ì„œ ë¦¬í„´í•©ë‹ˆë‹¤. V get(Object key) ì£¼ì–´ì§„ í‚¤ì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ë¦¬í„´í•©ë‹ˆë‹¤. boolean isEmpty() Map ì´ ë¹„ì–´ìˆëŠ”ì§€ ì¡°ì‚¬í•©ë‹ˆë‹¤. int Size() Map ì— ì €ì¥ë¼ ìˆëŠ” ì „ì²´ ê°ì²´ì˜ ìˆ˜ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. Collection values() Map ì— ì €ì¥ëœ ëª¨ë“  ê°’ì„ Collection ê°ì²´ì— ë‹´ì•„ì„œ ë¦¬í„´í•©ë‹ˆë‹¤. void clear() ì €ì¥ëœ ëª¨ë“  Map.Entryë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. V remove(Object Key) ì£¼ì–´ì§„ í‚¤ì™€ ì¼ì¹˜í•˜ëŠ” Map.Entryë¥¼ ì‚­ì œí•˜ê³  ê°’ì„ ë¦¬í„´í•©ë‹ˆë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JAVA","slug":"Develop/JAVA","permalink":"https://ckck803.github.io/categories/Develop/JAVA/"},{"name":"Collection","slug":"Develop/JAVA/Collection","permalink":"https://ckck803.github.io/categories/Develop/JAVA/Collection/"}],"tags":[]},{"title":"Java - Collection Framework","slug":"java/collection-framework/collection-framework-02","date":"2021-12-14T19:31:46.000Z","updated":"2024-11-28T13:59:31.990Z","comments":true,"path":"2021/12/15/java/collection-framework/collection-framework-02/","link":"","permalink":"https://ckck803.github.io/2021/12/15/java/collection-framework/collection-framework-02/","excerpt":"Java - Collection FrameworkStack ë¨¼ì € ë“¤ì–´ê°„ ë°ì´í„°ê°€ ê°€ì¥ ë§ˆì§€ë§‰ì— ë‚˜ì˜¤ëŠ” êµ¬ì¡° (First In First Out) ë©”ì„œë“œ ì„¤ëª… void push(E e) stack ìµœìƒë‹¨ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œë‹¤. Element pop() stack ìµœìƒë‹¨ ë°ì´í„°ë¥¼ ë°˜í™˜í•œ í›„ ìŠ¤íƒ ìµœìƒë‹¨ ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤. Element peek() stack ìµœìƒë‹¨ ë°ì´í„°ë¥¼ ë°˜í™˜í•œë‹¤. boolean isEmpty() stack ì´ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. int size() stack ì˜ í¬ê¸°ë¥¼ ë°˜í™˜í•œë‹¤. Queue ë©”ì„œë“œ ì„¤ëª… boolean add(E e) Queue ë§¨ ë’¤ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œ í›„ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰í–ˆìœ¼ë©´ True, ë°ì´í„° ì‚½ì…ì— ì‹¤íŒ¨í•˜ë©´ False ë¥¼ ë°˜í™˜í•œë‹¤. Queue ì— ì—¬ìœ  ê³µê°„ì´ ì—†ì–´ ì‹¤íŒ¨í•œ ê²½ìš° IllegalStateException ì˜ˆì™¸ë¥¼ ë°œìƒ ì‹œí‚¨ë‹¤. boolean offer(E e) Queue ë§¨ ë’¤ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œ í›„ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰í–ˆìœ¼ë©´ True, ë°ì´í„° ì‚½ì…ì— ì‹¤íŒ¨í•˜ë©´ False ë¥¼ ë°˜í™˜í•œë‹¤. E element() Queue ë§¨ ì•ì˜ ì›ì†Œë¥¼ ë°˜í™˜í•œë‹¤. E peek( ) Queue ë§¨ ì•ì˜ ì›ì†Œë¥¼ ë°˜í™˜í•œë‹¤. Queue ê°€ ë¹„ì–´ìˆì„ ê²½ìš° null ì„ ë°˜í™˜í•œë‹¤. E poll( ) Queue ë§¨ ì•ì˜ ì›ì†Œë¥¼ ë°˜í™˜í•œ í›„ ì‚­ì œí•œë‹¤. Queue ê°€ ë¹„ì–´ìˆì„ ê²½ìš° null ì„ ë°˜í™˜í•œë‹¤. E remove() Queue ë§¨ ì•ì˜ ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤.","text":"Java - Collection FrameworkStack ë¨¼ì € ë“¤ì–´ê°„ ë°ì´í„°ê°€ ê°€ì¥ ë§ˆì§€ë§‰ì— ë‚˜ì˜¤ëŠ” êµ¬ì¡° (First In First Out) ë©”ì„œë“œ ì„¤ëª… void push(E e) stack ìµœìƒë‹¨ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œë‹¤. Element pop() stack ìµœìƒë‹¨ ë°ì´í„°ë¥¼ ë°˜í™˜í•œ í›„ ìŠ¤íƒ ìµœìƒë‹¨ ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤. Element peek() stack ìµœìƒë‹¨ ë°ì´í„°ë¥¼ ë°˜í™˜í•œë‹¤. boolean isEmpty() stack ì´ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. int size() stack ì˜ í¬ê¸°ë¥¼ ë°˜í™˜í•œë‹¤. Queue ë©”ì„œë“œ ì„¤ëª… boolean add(E e) Queue ë§¨ ë’¤ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œ í›„ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰í–ˆìœ¼ë©´ True, ë°ì´í„° ì‚½ì…ì— ì‹¤íŒ¨í•˜ë©´ False ë¥¼ ë°˜í™˜í•œë‹¤. Queue ì— ì—¬ìœ  ê³µê°„ì´ ì—†ì–´ ì‹¤íŒ¨í•œ ê²½ìš° IllegalStateException ì˜ˆì™¸ë¥¼ ë°œìƒ ì‹œí‚¨ë‹¤. boolean offer(E e) Queue ë§¨ ë’¤ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œ í›„ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰í–ˆìœ¼ë©´ True, ë°ì´í„° ì‚½ì…ì— ì‹¤íŒ¨í•˜ë©´ False ë¥¼ ë°˜í™˜í•œë‹¤. E element() Queue ë§¨ ì•ì˜ ì›ì†Œë¥¼ ë°˜í™˜í•œë‹¤. E peek( ) Queue ë§¨ ì•ì˜ ì›ì†Œë¥¼ ë°˜í™˜í•œë‹¤. Queue ê°€ ë¹„ì–´ìˆì„ ê²½ìš° null ì„ ë°˜í™˜í•œë‹¤. E poll( ) Queue ë§¨ ì•ì˜ ì›ì†Œë¥¼ ë°˜í™˜í•œ í›„ ì‚­ì œí•œë‹¤. Queue ê°€ ë¹„ì–´ìˆì„ ê²½ìš° null ì„ ë°˜í™˜í•œë‹¤. E remove() Queue ë§¨ ì•ì˜ ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JAVA","slug":"Develop/JAVA","permalink":"https://ckck803.github.io/categories/Develop/JAVA/"},{"name":"Collection","slug":"Develop/JAVA/Collection","permalink":"https://ckck803.github.io/categories/Develop/JAVA/Collection/"}],"tags":[]},{"title":"Spring AOP - Advice ì¢…ë¥˜","slug":"spring/spring-aop/spring-aop/spring-aop-07","date":"2021-12-12T21:31:07.000Z","updated":"2024-02-26T15:25:53.074Z","comments":true,"path":"2021/12/13/spring/spring-aop/spring-aop/spring-aop-07/","link":"","permalink":"https://ckck803.github.io/2021/12/13/spring/spring-aop/spring-aop/spring-aop-07/","excerpt":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì–´ë“œë°”ì´ìŠ¤ ì¢…ë¥˜ ì¢…ë¥˜ ì„¤ëª… @Around ë©”ì„œë“œ í˜¸ì¶œ ì „ í›„ì— ì‹¤í–‰, ê°€ì¥ ê°•ë ¥í•œ ì–´ë“œë°”ì´ìŠ¤, ì¡°ì¸ í¬ì¸íŠ¸ ì‹¤í–‰ ì—¬ë¶€ ì„ íƒ, ë°˜í™˜ ê°’ ë³€í™˜, ì˜ˆì™¸ ë³€í™˜ ë“±ì´ ê°€ëŠ¥ @Before ì¡°ì¸ í¬ì¸íŠ¸ ì‹¤í–‰ ì´ì „ì— ì‹¤í–‰ @AfterReturning ì¡°ì¸ í¬ì¸íŠ¸ê°€ ì •ìƒ ì™„ë£Œ í›„ ì‹¤í–‰ @AftThrowing ë©”ì„œë“œê°€ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ê²½ìš° ì‹¤í–‰ @After ì¡°ì¸ í¬ì¸íŠ¸ê°€ ì •ìƒ ë˜ëŠ” ì˜ˆì™¸ì— ê´€ê³„ ì—†ì´ ì‹¤í–‰ @Slf4j@Aspectpublic class AspectV6Advice &#123; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; // @Before log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); // @AfterReturning log.info(&quot;[íŠ¸ëœì­ì…˜ ì»¤ë°‹] &#123;&#125;&quot;, joinPoint.getSignature()); return result; &#125;catch (Exception ex)&#123; // @AfterThrowing log.info(&quot;[íŠ¸ëœì­ì…˜ ë¡¤ë°±] &#123;&#125;&quot;, joinPoint.getSignature()); throw ex; &#125;finally &#123; // @After log.info(&quot;[ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; &#125;&#125; @Slf4j@Aspectpublic class AspectV6Advice &#123; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; // @Before log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); // @AfterReturning log.info(&quot;[íŠ¸ëœì­ì…˜ ì»¤ë°‹] &#123;&#125;&quot;, joinPoint.getSignature()); return result; &#125;catch (Exception ex)&#123; // @AfterThrowing log.info(&quot;[íŠ¸ëœì­ì…˜ ë¡¤ë°±] &#123;&#125;&quot;, joinPoint.getSignature()); throw ex; &#125;finally &#123; // @After log.info(&quot;[ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; &#125; // @Before ì€ ê·¸ëƒ¥ ì‹¤í–‰í•´ì¤€ë‹¤. @Before(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public void doBefore(JoinPoint joinPoint)&#123; log.info(&quot;[before] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; // return ê°’ì„ ì¡°ì‘ì„ í•  ìˆ˜ëŠ” ìˆì§€ë§Œ ë°”ê¿€ ìˆ˜ ëŠ” ì—†ë‹¤. @AfterReturning(value = &quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;, returning = &quot;result&quot;) public void doReturn(JoinPoint joinPoint, Object result)&#123; log.info(&quot;[return] &#123;&#125; return = &#123;&#125;&quot;, joinPoint.getSignature(), result); &#125; // ìë™ìœ¼ë¡œ throw ex ë¥¼ í•´ì¤€ë‹¤. @AfterThrowing(value = &quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;, throwing = &quot;ex&quot;) public void doThrowing(JoinPoint joinPoint, Exception ex)&#123; log.info(&quot;[ex] &#123;&#125; message = &#123;&#125;&quot;, ex); &#125; @After(value = &quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public void doAfter(JoinPoint joinPoint)&#123; log.info(&quot;[after] &#123;&#125;&quot;, joinPoint.getSignature()); &#125;&#125; ëª¨ë“  ì–´ë“œë°”ì´ìŠ¤ëŠ” JoinPoint ë¥¼ ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë‹¨ @Around ëŠ” ProceedingJoinPoint ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.ProceedingJoinPointëŠ” JoinPoint ì˜ í•˜ìœ„ íƒ€ì…ë‹ˆë‹¤. JoinPoint ì¸í„°í˜ì´ìŠ¤ì˜ ì£¼ìš” ê¸°ëŠ¥ Method ì„¤ëª… getArgs ë©”ì„œë“œ ì¸ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. getThis í”„ë¡ì‹œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. getTarget ëŒ€ìƒ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. getSignature ì¡°ì–¸ë˜ëŠ” ë©”ì„œë“œì— ëŒ€í•œ ì„¤ëª…ì„ ë°˜í™˜í•œë‹¤. toString ì¡°ì–¸ë˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìœ ìš©í•œ ì„¤ëª…ì„ ì¸ì‡„í•œë‹¤.","text":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì–´ë“œë°”ì´ìŠ¤ ì¢…ë¥˜ ì¢…ë¥˜ ì„¤ëª… @Around ë©”ì„œë“œ í˜¸ì¶œ ì „ í›„ì— ì‹¤í–‰, ê°€ì¥ ê°•ë ¥í•œ ì–´ë“œë°”ì´ìŠ¤, ì¡°ì¸ í¬ì¸íŠ¸ ì‹¤í–‰ ì—¬ë¶€ ì„ íƒ, ë°˜í™˜ ê°’ ë³€í™˜, ì˜ˆì™¸ ë³€í™˜ ë“±ì´ ê°€ëŠ¥ @Before ì¡°ì¸ í¬ì¸íŠ¸ ì‹¤í–‰ ì´ì „ì— ì‹¤í–‰ @AfterReturning ì¡°ì¸ í¬ì¸íŠ¸ê°€ ì •ìƒ ì™„ë£Œ í›„ ì‹¤í–‰ @AftThrowing ë©”ì„œë“œê°€ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ê²½ìš° ì‹¤í–‰ @After ì¡°ì¸ í¬ì¸íŠ¸ê°€ ì •ìƒ ë˜ëŠ” ì˜ˆì™¸ì— ê´€ê³„ ì—†ì´ ì‹¤í–‰ @Slf4j@Aspectpublic class AspectV6Advice &#123; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; // @Before log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); // @AfterReturning log.info(&quot;[íŠ¸ëœì­ì…˜ ì»¤ë°‹] &#123;&#125;&quot;, joinPoint.getSignature()); return result; &#125;catch (Exception ex)&#123; // @AfterThrowing log.info(&quot;[íŠ¸ëœì­ì…˜ ë¡¤ë°±] &#123;&#125;&quot;, joinPoint.getSignature()); throw ex; &#125;finally &#123; // @After log.info(&quot;[ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; &#125;&#125; @Slf4j@Aspectpublic class AspectV6Advice &#123; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; // @Before log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); // @AfterReturning log.info(&quot;[íŠ¸ëœì­ì…˜ ì»¤ë°‹] &#123;&#125;&quot;, joinPoint.getSignature()); return result; &#125;catch (Exception ex)&#123; // @AfterThrowing log.info(&quot;[íŠ¸ëœì­ì…˜ ë¡¤ë°±] &#123;&#125;&quot;, joinPoint.getSignature()); throw ex; &#125;finally &#123; // @After log.info(&quot;[ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; &#125; // @Before ì€ ê·¸ëƒ¥ ì‹¤í–‰í•´ì¤€ë‹¤. @Before(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public void doBefore(JoinPoint joinPoint)&#123; log.info(&quot;[before] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; // return ê°’ì„ ì¡°ì‘ì„ í•  ìˆ˜ëŠ” ìˆì§€ë§Œ ë°”ê¿€ ìˆ˜ ëŠ” ì—†ë‹¤. @AfterReturning(value = &quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;, returning = &quot;result&quot;) public void doReturn(JoinPoint joinPoint, Object result)&#123; log.info(&quot;[return] &#123;&#125; return = &#123;&#125;&quot;, joinPoint.getSignature(), result); &#125; // ìë™ìœ¼ë¡œ throw ex ë¥¼ í•´ì¤€ë‹¤. @AfterThrowing(value = &quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;, throwing = &quot;ex&quot;) public void doThrowing(JoinPoint joinPoint, Exception ex)&#123; log.info(&quot;[ex] &#123;&#125; message = &#123;&#125;&quot;, ex); &#125; @After(value = &quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public void doAfter(JoinPoint joinPoint)&#123; log.info(&quot;[after] &#123;&#125;&quot;, joinPoint.getSignature()); &#125;&#125; ëª¨ë“  ì–´ë“œë°”ì´ìŠ¤ëŠ” JoinPoint ë¥¼ ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë‹¨ @Around ëŠ” ProceedingJoinPoint ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.ProceedingJoinPointëŠ” JoinPoint ì˜ í•˜ìœ„ íƒ€ì…ë‹ˆë‹¤. JoinPoint ì¸í„°í˜ì´ìŠ¤ì˜ ì£¼ìš” ê¸°ëŠ¥ Method ì„¤ëª… getArgs ë©”ì„œë“œ ì¸ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. getThis í”„ë¡ì‹œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. getTarget ëŒ€ìƒ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. getSignature ì¡°ì–¸ë˜ëŠ” ë©”ì„œë“œì— ëŒ€í•œ ì„¤ëª…ì„ ë°˜í™˜í•œë‹¤. toString ì¡°ì–¸ë˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìœ ìš©í•œ ì„¤ëª…ì„ ì¸ì‡„í•œë‹¤. ProceedingJoinPoint ì¸í„°í˜ì´ìŠ¤ì˜ ì£¼ìš” ê¸°ëŠ¥ proceed ë‹¤ìŒ ì–´ë“œë°”ì´ìŠ¤ë‚˜ íƒ€ê²Ÿì„ í˜¸ì¶œí•œë‹¤. ì–´ë“œë°”ì´ìŠ¤ ì¢…ë¥˜@Before ì¡°ì¸í¬ì¸íŠ¸ ì‹¤í–‰ ì „ì— ì‘ë™í•œë‹¤. @Around ì™€ëŠ” ë‹¤ë¥´ê²Œ ì‘ì—… íë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤. @Around ëŠ” ProceedingJoinPoint.proceed ë¥¼ í˜¸ì¶œí•´ì•¼ ë‹¤ìŒ ëŒ€ìƒì´ í˜¸ì¶œëœë‹¤. ë§Œì•½ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë‹¤ìŒ ëŒ€ìƒì´ í˜¸ì¶œ ë˜ì§€ ì•ŠëŠ”ë‹¤. @Before ëŠ” ProceedingJoinPoint.proceed ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ë©”ì„œë“œ ì¢…ë£Œì‹œ ìë™ìœ¼ë¡œ ë‹¤ìŒ íƒ€ì¼“ì´ í˜¸ì¶œëœë‹¤. @AfterReturning ë©”ì„œë“œ ì‹¤í–‰ì´ ì •ìƒì ìœ¼ë¡œ ë°˜í™”ë  ë•Œ ì‹¤í–‰í•œë‹¤. returning ì†ì„±ì— ì‚¬ìš©ëœ ì´ë¦„ì€ ì–´ë“œë°”ì´ìŠ¤ ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ê³¼ ì¼ì¹˜í•´ì•¼ í•œë‹¤. returnning ì ˆì— ì§€ì •ëœ íƒ€ì…ì˜ ê°’ì„ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œë§Œ ëŒ€ìƒìœ¼ë¡œ ì‹¤í–‰í•œë‹¤. @Around ì™€ ë‹¤ë¥´ê²Œ ë°˜í™˜ë˜ëŠ” ê°ì²´ë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤. ë°˜í™˜ ê°ì²´ë¥¼ ì¡°ì‘í•  ìˆ˜ëŠ” ìˆë‹¤. @AfterThrowing ë©”ì„œë“œ ì‹¤í–‰ì´ ì˜ˆì™¸ë¥¼ ë˜ì ¸ì„œ ì¢…ë£Œë  ë•Œ ì‹¤í–‰í•œë‹¤. throwing ì†ì„±ì— ì‚¬ìš©ëœ ì´ë¦„ì€ ì–´ë“œë°”ì´ìŠ¤ ë©”ì„œë“œì˜ ë§¤ê²Œë³€ìˆ˜ ì´ë¦„ê³¼ ì¼ì¹˜í•´ì•¼ í•œë‹¤. throwing ì ˆì— ì§€ì •ëœ íƒ€ì…ê³¼ ë§ì€ ì˜ˆì™¸ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì‹¤í–‰í•œë‹¤. ë¶€ëª¨ íƒ€ì…ì„ ì§€ì •í•˜ë©´ ëª¨ë“  ìì‹ íƒ€ì…ì€ ì¸ì •ëœë‹¤. @After ë©”ì„œë“œ ì‹¤í–‰ì´ ì¢…ë£Œë˜ë©´ ì‹¤í–‰ëœë‹¤. ì •ìƒ ë° ì˜ˆì™¸ ë°˜í™˜ ì¡°ê±´ì„ ëª¨ë‘ ì²˜ë¦¬í•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ë° ìœ ì‚¬í•œ ëª©ì ì„ í•´ì œí•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤. @Around ë©”ì„œë“œì˜ ì‹¤í–‰ì˜ ì£¼ë³€ì—ì„œ ì‹¤í–‰ëœë‹¤. ë©”ì„œë“œ ì‹¤í–‰ ì „í›„ì— ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. ê°€ì¥ ê°•ë ¥í•œ ì–´ë“œë°”ì´ìŠ¤ ì¡°ì¸ í¬ì¸íŠ¸ ì‹¤í–‰ ì—¬ë¶€ ì„ íƒ ì „ë‹¬ ê°’ ë³€í™˜ ë°˜í™˜ ê°’ ë³€í™˜ ì˜ˆì™¸ ë³€í™˜ íŠ¸ëœì­ì…˜ ì²˜ëŸ¼ try ~ catch ~ finally ëª¨ë‘ ë“¤ì–´ê°€ëŠ” êµ¬ë¬¸ ì²˜ë¦¬ ê°€ëŠ¥ ì–´ë“œë°”ì´ìŠ¤ì˜ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” ProceedingJoinPoint ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. proceed ë©”ì„œë“œë¥¼ í†µí•´ ëŒ€ìƒì„ ì‹¤í–‰í•œë‹¤. proceed ë©”ì„œë“œë¥¼ ì—¬ëŸ¬ë²ˆ ì‹¤í–‰í•  ìˆ˜ë„ ìˆë‹¤. @Around ì™¸ ë‹¤ë¥¸ ì–´ë“œë°”ì´ìŠ¤ê°€ ì¡´ì¬í•˜ëŠ” ì´ìœ  @Around ëŠ” í•­ìƒ joinPoint.proceed ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤. ë§Œì•½, ì‹¤ìˆ˜ë¡œ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ íƒ€ê²Ÿì´ í˜¸ì¶œë˜ì§€ ì•ŠëŠ” ì¹˜ëª…ì ì¸ ë²„ê·¸ê°€ ë°œìƒí•œë‹¤. @Slf4j@Aspectpublic class AspectV6Advice &#123; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; // @Before log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); @Before ëŠ” joinPoint.proceed ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê³ ë¯¼ì„ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. // @Before ì€ ê·¸ëƒ¥ ì‹¤í–‰í•´ì¤€ë‹¤.@Before(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;)public void doBefore(JoinPoint joinPoint)&#123; log.info(&quot;[before] &#123;&#125;&quot;, joinPoint.getSignature());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"}],"tags":[]},{"title":"Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ","slug":"spring/spring-aop/spring-aop/spring-aop-06","date":"2021-12-11T21:31:07.000Z","updated":"2024-02-26T15:25:48.825Z","comments":true,"path":"2021/12/12/spring/spring-aop/spring-aop/spring-aop-06/","link":"","permalink":"https://ckck803.github.io/2021/12/12/spring/spring-aop/spring-aop/spring-aop-06/","excerpt":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - íŠ¸ëœì­ì…˜ ìˆœì„œ@Slf4jpublic class AspectV5Order &#123; @Aspect @Order(2) public static class LogAspect&#123; @Around(&quot;com.example.aop.order.aop.Pointcuts.allOrder()&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable&#123; log.info(&quot;[log] &#123;&#125;&quot;, joinPoint.getSignature()); // join point ì‹œê·¸ë‹ˆì²˜ return joinPoint.proceed(); &#125; &#125; @Aspect @Order(1) public static class TxAspect&#123; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); log.info(&quot;[íŠ¸ëœì­ì…˜ ì»¤ë°‹] &#123;&#125;&quot;, joinPoint.getSignature()); return result; &#125;catch (Exception ex)&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ë¡¤ë°±] &#123;&#125;&quot;, joinPoint.getSignature()); throw ex; &#125;finally &#123; log.info(&quot;[ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; &#125; &#125;&#125;","text":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - íŠ¸ëœì­ì…˜ ìˆœì„œ@Slf4jpublic class AspectV5Order &#123; @Aspect @Order(2) public static class LogAspect&#123; @Around(&quot;com.example.aop.order.aop.Pointcuts.allOrder()&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable&#123; log.info(&quot;[log] &#123;&#125;&quot;, joinPoint.getSignature()); // join point ì‹œê·¸ë‹ˆì²˜ return joinPoint.proceed(); &#125; &#125; @Aspect @Order(1) public static class TxAspect&#123; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); log.info(&quot;[íŠ¸ëœì­ì…˜ ì»¤ë°‹] &#123;&#125;&quot;, joinPoint.getSignature()); return result; &#125;catch (Exception ex)&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ë¡¤ë°±] &#123;&#125;&quot;, joinPoint.getSignature()); throw ex; &#125;finally &#123; log.info(&quot;[ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"}],"tags":[]},{"title":"Spring AOP - Pointcut ì°¸ì¡°","slug":"spring/spring-aop/spring-aop/spring-aop-05","date":"2021-12-11T20:31:07.000Z","updated":"2024-02-26T15:25:45.167Z","comments":true,"path":"2021/12/12/spring/spring-aop/spring-aop/spring-aop-05/","link":"","permalink":"https://ckck803.github.io/2021/12/12/spring/spring-aop/spring-aop/spring-aop-05/","excerpt":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Pointcutpublic class Pointcuts &#123; @Pointcut(&quot;execution(* com.example.aop.order..*(..))&quot;) public void allOrder()&#123;&#125; // í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service @Pointcut(&quot;execution(* *..*Service.*(..))&quot;) public void allService()&#123;&#125; // allOrder &amp;&amp; allService @Pointcut(&quot;allOrder() &amp;&amp; allService()&quot;) public void orderAndService()&#123;&#125;&#125; ì™¸ë¶€ Pointcut ì°¸ì¡°@Slf4j@Aspectpublic class AspectV4PointCut &#123; @Around(&quot;com.example.aop.order.aop.Pointcuts.allOrder()&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable&#123; log.info(&quot;[log] &#123;&#125;&quot;, joinPoint.getSignature()); // join point ì‹œê·¸ë‹ˆì²˜ return joinPoint.proceed(); &#125; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); log.info(&quot;[íŠ¸ëœì­ì…˜ ì»¤ë°‹] &#123;&#125;&quot;, joinPoint.getSignature()); return result; &#125;catch (Exception ex)&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ë¡¤ë°±] &#123;&#125;&quot;, joinPoint.getSignature()); throw ex; &#125;finally &#123; log.info(&quot;[ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; &#125;&#125; @Slf4j@SpringBootTest@Import(AspectV4PointCut.class)public class AopTest &#123; @Autowired OrderService orderService; @Autowired OrderRepository orderRepository; @Test public void aopTest()&#123; log.info(&quot;isAopProxy, orderService = &#123;&#125;&quot;, AopUtils.isAopProxy(orderService)); log.info(&quot;isAopProxy, orderRepository = &#123;&#125;&quot;, AopUtils.isAopProxy(orderRepository)); &#125; @Test public void success()&#123; orderService.orderItem(&quot;itemA&quot;); &#125; @Test public void exception()&#123; assertThatThrownBy(() -&gt; orderService.orderItem(&quot;ex&quot;)) .isInstanceOf(IllegalStateException.class); &#125;&#125;","text":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Pointcutpublic class Pointcuts &#123; @Pointcut(&quot;execution(* com.example.aop.order..*(..))&quot;) public void allOrder()&#123;&#125; // í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service @Pointcut(&quot;execution(* *..*Service.*(..))&quot;) public void allService()&#123;&#125; // allOrder &amp;&amp; allService @Pointcut(&quot;allOrder() &amp;&amp; allService()&quot;) public void orderAndService()&#123;&#125;&#125; ì™¸ë¶€ Pointcut ì°¸ì¡°@Slf4j@Aspectpublic class AspectV4PointCut &#123; @Around(&quot;com.example.aop.order.aop.Pointcuts.allOrder()&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable&#123; log.info(&quot;[log] &#123;&#125;&quot;, joinPoint.getSignature()); // join point ì‹œê·¸ë‹ˆì²˜ return joinPoint.proceed(); &#125; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;com.example.aop.order.aop.Pointcuts.orderAndService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); log.info(&quot;[íŠ¸ëœì­ì…˜ ì»¤ë°‹] &#123;&#125;&quot;, joinPoint.getSignature()); return result; &#125;catch (Exception ex)&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ë¡¤ë°±] &#123;&#125;&quot;, joinPoint.getSignature()); throw ex; &#125;finally &#123; log.info(&quot;[ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; &#125;&#125; @Slf4j@SpringBootTest@Import(AspectV4PointCut.class)public class AopTest &#123; @Autowired OrderService orderService; @Autowired OrderRepository orderRepository; @Test public void aopTest()&#123; log.info(&quot;isAopProxy, orderService = &#123;&#125;&quot;, AopUtils.isAopProxy(orderService)); log.info(&quot;isAopProxy, orderRepository = &#123;&#125;&quot;, AopUtils.isAopProxy(orderRepository)); &#125; @Test public void success()&#123; orderService.orderItem(&quot;itemA&quot;); &#125; @Test public void exception()&#123; assertThatThrownBy(() -&gt; orderService.orderItem(&quot;ex&quot;)) .isInstanceOf(IllegalStateException.class); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"}],"tags":[]},{"title":"Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€","slug":"spring/spring-aop/spring-aop/spring-aop-04","date":"2021-12-11T19:31:07.000Z","updated":"2024-02-26T15:25:41.215Z","comments":true,"path":"2021/12/12/spring/spring-aop/spring-aop/spring-aop-04/","link":"","permalink":"https://ckck803.github.io/2021/12/12/spring/spring-aop/spring-aop/spring-aop-04/","excerpt":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Advice ì¶”ê°€ ê¸°ì¡´ì— ë¡œê·¸ë¥¼ ì°ì€ ê¸°ëŠ¥ì—ì„œ íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ ì¶”ê°€ allOrder com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë¥¼ ëŒ€ìƒìœ¼ë¡œ í¬ì¸íŠ¸ ì»· ì ìš© allService íƒ€ì… ì´ë¦„ íŒ¨í„´ì´ *Service ë¥¼ ëŒ€ìƒìœ¼ë¡œ í¬ì¸íŠ¸ ì»· ì ìš© íƒ€ì… ì´ë¦„ íŒ¨í„´ : í´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤ ëª¨ë‘ ì ìš© @Around(â€œallOrder() &amp;&amp; allService()â€) í¬ì¸íŠ¸ ì»·ì€ ì¡°í•©ì´ ê°€ëŠ¥í•˜ë‹¤ &amp;&amp; : AND || : OR ! : NOT @Slf4j@Aspectpublic class AspectV3 &#123; @Pointcut(&quot;execution(* com.example.aop.order..*(..))&quot;) private void allOrder()&#123;&#125; // í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service @Pointcut(&quot;execution(* *..*Service.*(..))&quot;) private void allService()&#123;&#125; @Around(&quot;allOrder()&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable&#123; log.info(&quot;[log] &#123;&#125;&quot;, joinPoint.getSignature()); // join point ì‹œê·¸ë‹ˆì²˜ return joinPoint.proceed(); &#125; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;allOrder() &amp;&amp; allService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); log.info(&quot;[íŠ¸ëœì­ì…˜ ì»¤ë°‹] &#123;&#125;&quot;, joinPoint.getSignature()); return result; &#125;catch (Exception ex)&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ë¡¤ë°±] &#123;&#125;&quot;, joinPoint.getSignature()); throw ex; &#125;finally &#123; log.info(&quot;[ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; &#125;&#125;","text":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Advice ì¶”ê°€ ê¸°ì¡´ì— ë¡œê·¸ë¥¼ ì°ì€ ê¸°ëŠ¥ì—ì„œ íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ ì¶”ê°€ allOrder com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë¥¼ ëŒ€ìƒìœ¼ë¡œ í¬ì¸íŠ¸ ì»· ì ìš© allService íƒ€ì… ì´ë¦„ íŒ¨í„´ì´ *Service ë¥¼ ëŒ€ìƒìœ¼ë¡œ í¬ì¸íŠ¸ ì»· ì ìš© íƒ€ì… ì´ë¦„ íŒ¨í„´ : í´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤ ëª¨ë‘ ì ìš© @Around(â€œallOrder() &amp;&amp; allService()â€) í¬ì¸íŠ¸ ì»·ì€ ì¡°í•©ì´ ê°€ëŠ¥í•˜ë‹¤ &amp;&amp; : AND || : OR ! : NOT @Slf4j@Aspectpublic class AspectV3 &#123; @Pointcut(&quot;execution(* com.example.aop.order..*(..))&quot;) private void allOrder()&#123;&#125; // í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service @Pointcut(&quot;execution(* *..*Service.*(..))&quot;) private void allService()&#123;&#125; @Around(&quot;allOrder()&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable&#123; log.info(&quot;[log] &#123;&#125;&quot;, joinPoint.getSignature()); // join point ì‹œê·¸ë‹ˆì²˜ return joinPoint.proceed(); &#125; // com.example.aop.order í•˜ìœ„ íŒ¨í‚¤ì§€ë©´ì„œ í´ë˜ìŠ¤ ì´ë¦„ íŒ¨í„´ì´ *Service ì¸ ê²ƒ @Around(&quot;allOrder() &amp;&amp; allService()&quot;) public Object doTransaction(ProceedingJoinPoint joinPoint) throws Throwable&#123; try&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ì‹œì‘] &#123;&#125;&quot;, joinPoint.getSignature()); Object result = joinPoint.proceed(); log.info(&quot;[íŠ¸ëœì­ì…˜ ì»¤ë°‹] &#123;&#125;&quot;, joinPoint.getSignature()); return result; &#125;catch (Exception ex)&#123; log.info(&quot;[íŠ¸ëœì­ì…˜ ë¡¤ë°±] &#123;&#125;&quot;, joinPoint.getSignature()); throw ex; &#125;finally &#123; log.info(&quot;[ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] &#123;&#125;&quot;, joinPoint.getSignature()); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"}],"tags":[]},{"title":"Spring AOP - Pointcut ë¶„ë¦¬","slug":"spring/spring-aop/spring-aop/spring-aop-03","date":"2021-12-11T18:31:07.000Z","updated":"2024-02-26T15:25:35.702Z","comments":true,"path":"2021/12/12/spring/spring-aop/spring-aop/spring-aop-03/","link":"","permalink":"https://ckck803.github.io/2021/12/12/spring/spring-aop/spring-aop/spring-aop-03/","excerpt":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë¶„ë¦¬ í•˜ë‚˜ì˜ Pointcut í‘œí˜„ì‹ì„ ì—¬ëŸ¬ ì–´ë“œë°”ì´ìŠ¤ì—ì„œ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. @Pointcut ì— í¬ì¸íŠ¸ ì»· í‘œí˜„ì‹ì„ ì‚¬ìš©í•œë‹¤. ë©”ì„œë“œ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„°ë¥¼ í•©ì²˜ì„œ Signature(ì‹œê·¸ë‹ˆì²˜) ë¼ê³  í•œë‹¤. ë©”ì„œë“œì˜ ë°˜í™˜ íƒ€ì…ì€ void ì—¬ì•¼ í•œë‹¤. ì½”ë“œ ë‚´ìš©ì€ ë¹„ì›Œë‘”ë‹¤. @Slf4j@Aspectpublic class AspectV2 &#123; @Pointcut(&quot;execution(* com.example.aop.order..*(..))&quot;) private void allOrder()&#123; &#125; @Around(&quot;allOrder()&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable&#123; log.info(&quot;[log] &#123;&#125;&quot;, joinPoint.getSignature()); // join point ì‹œê·¸ë‹ˆì²˜ return joinPoint.proceed(); &#125;&#125; @Slf4j@SpringBootTest//@Import(AspectV1.class) // Bean ë“±ë¡@Import(AspectV2.class)public class AopTest &#123; @Autowired OrderService orderService; @Autowired OrderRepository orderRepository; @Test public void aopTest()&#123; log.info(&quot;isAopProxy, orderService = &#123;&#125;&quot;, AopUtils.isAopProxy(orderService)); log.info(&quot;isAopProxy, orderRepository = &#123;&#125;&quot;, AopUtils.isAopProxy(orderRepository)); &#125; @Test public void success()&#123; orderService.orderItem(&quot;itemA&quot;); &#125; @Test public void exception()&#123; assertThatThrownBy(() -&gt; orderService.orderItem(&quot;ex&quot;)) .isInstanceOf(IllegalStateException.class); &#125;&#125;","text":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë¶„ë¦¬ í•˜ë‚˜ì˜ Pointcut í‘œí˜„ì‹ì„ ì—¬ëŸ¬ ì–´ë“œë°”ì´ìŠ¤ì—ì„œ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. @Pointcut ì— í¬ì¸íŠ¸ ì»· í‘œí˜„ì‹ì„ ì‚¬ìš©í•œë‹¤. ë©”ì„œë“œ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„°ë¥¼ í•©ì²˜ì„œ Signature(ì‹œê·¸ë‹ˆì²˜) ë¼ê³  í•œë‹¤. ë©”ì„œë“œì˜ ë°˜í™˜ íƒ€ì…ì€ void ì—¬ì•¼ í•œë‹¤. ì½”ë“œ ë‚´ìš©ì€ ë¹„ì›Œë‘”ë‹¤. @Slf4j@Aspectpublic class AspectV2 &#123; @Pointcut(&quot;execution(* com.example.aop.order..*(..))&quot;) private void allOrder()&#123; &#125; @Around(&quot;allOrder()&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable&#123; log.info(&quot;[log] &#123;&#125;&quot;, joinPoint.getSignature()); // join point ì‹œê·¸ë‹ˆì²˜ return joinPoint.proceed(); &#125;&#125; @Slf4j@SpringBootTest//@Import(AspectV1.class) // Bean ë“±ë¡@Import(AspectV2.class)public class AopTest &#123; @Autowired OrderService orderService; @Autowired OrderRepository orderRepository; @Test public void aopTest()&#123; log.info(&quot;isAopProxy, orderService = &#123;&#125;&quot;, AopUtils.isAopProxy(orderService)); log.info(&quot;isAopProxy, orderRepository = &#123;&#125;&quot;, AopUtils.isAopProxy(orderRepository)); &#125; @Test public void success()&#123; orderService.orderItem(&quot;itemA&quot;); &#125; @Test public void exception()&#123; assertThatThrownBy(() -&gt; orderService.orderItem(&quot;ex&quot;)) .isInstanceOf(IllegalStateException.class); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"}],"tags":[]},{"title":"Spring AOP - @Aspect","slug":"spring/spring-aop/spring-aop/spring-aop-aspect","date":"2021-12-11T17:31:07.000Z","updated":"2024-02-26T15:25:57.334Z","comments":true,"path":"2021/12/12/spring/spring-aop/spring-aop/spring-aop-aspect/","link":"","permalink":"https://ckck803.github.io/2021/12/12/spring/spring-aop/spring-aop/spring-aop-aspect/","excerpt":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ @Aspect ì‘ë™ë°©ì‹ ì‹¤í–‰ ìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì‹œì ì— ìë™ í”„ë¡ì‹œ ìƒì„±ê¸° ë¥¼ í˜¸ì¶œí•œë‹¤. ëª¨ë“  @Aspect Bean ì¡°íšŒ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ @Aspect Advisor ìƒì„± @Aspect ì–´ë“œë°”ì´ì € ë¹Œë” ë¥¼ í†µí•´ ì–´ë“œë°”ì´ì €ë¥¼ ìƒì„±í•œë‹¤. Aspect ê¸°ë°˜ ì–´ë“œë°”ì´ì € ì €ì¥ ìƒì„±í•œ ì–´ë“œë°”ì´ì €ë¥¼ @Aspect ì–´ë“œë°”ì´ì € ë¹Œë” ë‚´ë¶€ì— ì €ì¥í•œë‹¤. ìë™ í”„ë¡ì‹œ ìƒì„±ê¸° ì—­í• @Aspect ê°€ ì ìš©ëœ Bean ë“¤ì„ ì¡°íšŒí•©ë‹ˆë‹¤. í•´ë‹¹ Bean ë‚´ ì •ì˜ëœ Advice ì™€ Pointcut í‘œí˜„ì‹ì„ ì´ìš©í•´ Advisor ë¥¼ ìƒì„± í›„ ì €ì¥í•©ë‹ˆë‹¤. Bean ê°ì²´ ìƒì„±ì‹œ Bean í›„ì²˜ë¦¬ê¸°ì—ì„œ Advisor ê°ì²´ë¥¼ ì¡°íšŒí•´ Pointcut í‘œí˜„ì‹ì— í•´ë‹¹ë˜ëŠ” Bean ì´ ìˆì„ ê²½ìš° ìë™ í”„ë¡ì‹œ ìƒì„±ê¸°ì—ì„œ Advice(ë¶€ê°€ê¸°ëŠ¥) ê°€ ì ìš©ëœ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. @Aspect ì‚¬ìš©í•˜ê¸°","text":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ @Aspect ì‘ë™ë°©ì‹ ì‹¤í–‰ ìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì‹œì ì— ìë™ í”„ë¡ì‹œ ìƒì„±ê¸° ë¥¼ í˜¸ì¶œí•œë‹¤. ëª¨ë“  @Aspect Bean ì¡°íšŒ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ @Aspect Advisor ìƒì„± @Aspect ì–´ë“œë°”ì´ì € ë¹Œë” ë¥¼ í†µí•´ ì–´ë“œë°”ì´ì €ë¥¼ ìƒì„±í•œë‹¤. Aspect ê¸°ë°˜ ì–´ë“œë°”ì´ì € ì €ì¥ ìƒì„±í•œ ì–´ë“œë°”ì´ì €ë¥¼ @Aspect ì–´ë“œë°”ì´ì € ë¹Œë” ë‚´ë¶€ì— ì €ì¥í•œë‹¤. ìë™ í”„ë¡ì‹œ ìƒì„±ê¸° ì—­í• @Aspect ê°€ ì ìš©ëœ Bean ë“¤ì„ ì¡°íšŒí•©ë‹ˆë‹¤. í•´ë‹¹ Bean ë‚´ ì •ì˜ëœ Advice ì™€ Pointcut í‘œí˜„ì‹ì„ ì´ìš©í•´ Advisor ë¥¼ ìƒì„± í›„ ì €ì¥í•©ë‹ˆë‹¤. Bean ê°ì²´ ìƒì„±ì‹œ Bean í›„ì²˜ë¦¬ê¸°ì—ì„œ Advisor ê°ì²´ë¥¼ ì¡°íšŒí•´ Pointcut í‘œí˜„ì‹ì— í•´ë‹¹ë˜ëŠ” Bean ì´ ìˆì„ ê²½ìš° ìë™ í”„ë¡ì‹œ ìƒì„±ê¸°ì—ì„œ Advice(ë¶€ê°€ê¸°ëŠ¥) ê°€ ì ìš©ëœ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. @Aspect ì‚¬ìš©í•˜ê¸° ìŠ¤í”„ë§ì—ì„œ AOP ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ @Aspect ë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìŠ¤í”„ë§ì€ í”„ë¡ì‹œ ë°©ì‹ì˜ AOP ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ í”„ë¡ì‹œë¥¼ í†µí•˜ëŠ” ë©”ì„œë“œ ë§Œ ì ìš© ëŒ€ìƒì´ ëœë‹¤. @Around ëŠ” Pointcut ìœ¼ë¡œ ì–´ë””ì— AOP ë¡œì§ì„ ë„£ì„ì§€ ê²°ì •í•˜ê³  @Around ì˜ ë©”ì„œë“œì¸ doLog ëŠ” Advice ë¡œ ë¶€ê°€ê¸°ëŠ¥ ë¡œì§ì„ ì •ì˜í•©ë‹ˆë‹¤. @Slf4j@Aspectpublic class AspectV1 &#123; @Around(&quot;execution(* com.example.aop.order..*(..))&quot;) public Object doLog(ProceedingJoinPoint joinPoint) throws Throwable&#123; log.info(&quot;[log] &#123;&#125;&quot;, joinPoint.getSignature()); // join point ì‹œê·¸ë‹ˆì²˜ return joinPoint.proceed(); &#125;&#125; @Slf4j@SpringBootTest@Import(AspectV1.class) // Bean ë“±ë¡public class AopTest &#123; @Autowired OrderService orderService; @Autowired OrderRepository orderRepository; @Test public void aopTest()&#123; log.info(&quot;isAopProxy, orderService = &#123;&#125;&quot;, AopUtils.isAopProxy(orderService)); log.info(&quot;isAopProxy, orderRepository = &#123;&#125;&quot;, AopUtils.isAopProxy(orderRepository)); &#125; @Test public void success()&#123; orderService.orderItem(&quot;itemA&quot;); &#125; @Test public void exception()&#123; assertThatThrownBy(() -&gt; orderService.orderItem(&quot;ex&quot;)) .isInstanceOf(IllegalStateException.class); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"}],"tags":[]},{"title":"Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸°","slug":"react/redux/redux-02","date":"2021-12-06T22:31:46.000Z","updated":"2024-11-23T16:46:05.023Z","comments":true,"path":"2021/12/07/react/redux/redux-02/","link":"","permalink":"https://ckck803.github.io/2021/12/07/react/redux/redux-02/","excerpt":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜Action ì •ì˜í•˜ê¸°export const INCREASE = &quot;counter/INCREASE&quot; as const;export const DECREASE = &quot;counter/DECREASE&quot; as const;interface increaseAction &#123; type: typeof INCREASE;&#125;interface decreaseAction &#123; type: typeof DECREASE;&#125;export type CounterType = increaseAction | decreaseAction; Action ìƒì„± í•¨ìˆ˜export const increase = (): increaseAction =&gt; (&#123; type: INCREASE,&#125;);export const decrease = (): decreaseAction =&gt; (&#123; type: DECREASE,&#125;); Stateinterface CounterState &#123; value: number;&#125;const initialState: CounterState = &#123; value: 0,&#125;;","text":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜Action ì •ì˜í•˜ê¸°export const INCREASE = &quot;counter/INCREASE&quot; as const;export const DECREASE = &quot;counter/DECREASE&quot; as const;interface increaseAction &#123; type: typeof INCREASE;&#125;interface decreaseAction &#123; type: typeof DECREASE;&#125;export type CounterType = increaseAction | decreaseAction; Action ìƒì„± í•¨ìˆ˜export const increase = (): increaseAction =&gt; (&#123; type: INCREASE,&#125;);export const decrease = (): decreaseAction =&gt; (&#123; type: DECREASE,&#125;); Stateinterface CounterState &#123; value: number;&#125;const initialState: CounterState = &#123; value: 0,&#125;; Reducerconst CounterReducer = ( state = initialState, action: CounterType): CounterState =&gt; &#123; switch (action.type) &#123; case INCREASE: return &#123; ...state, value: state.value + 1, &#125;; case DECREASE: return &#123; ...state, value: state.value - 1, &#125;; default: return state; &#125;&#125;;export default CounterReducer;export type CounterReturnType = ReturnType&lt;typeof CounterReducer&gt;; Storeimport React from &quot;react&quot;;import ReactDOM from &quot;react-dom/client&quot;;import &quot;./index.css&quot;;import App from &quot;./App&quot;;import reportWebVitals from &quot;./reportWebVitals&quot;;import &#123; applyMiddleware, createStore &#125; from &quot;redux&quot;;import CounterReducer from &quot;./redux/CounterReducer&quot;;import &#123; Provider &#125; from &quot;react-redux&quot;;import &#123; logger &#125; from &quot;redux-logger&quot;;const store = createStore(CounterReducer, applyMiddleware(logger));const root = ReactDOM.createRoot( document.getElementById(&quot;root&quot;) as HTMLElement);root.render( &lt;React.StrictMode&gt; &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt; &lt;/React.StrictMode&gt;);reportWebVitals(); Appimport React, &#123; useCallback, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; CounterReturnType, decrease, increase &#125; from &quot;./redux/CounterReducer&quot;;function App() &#123; const &#123; value &#125; = useSelector((state: CounterReturnType) =&gt; (&#123; value: state.value, &#125;)); const dispatch = useDispatch(); const onClickIncrease = useCallback(() =&gt; &#123; dispatch(increase()); &#125;, []); const onClickDecrease = useCallback(() =&gt; &#123; dispatch(decrease()); &#125;, []); return ( &lt;div className=&quot;App&quot;&gt; &lt;div&gt;&#123;value&#125;&lt;/div&gt; &lt;button onClick=&#123;onClickIncrease&#125;&gt;+1&lt;/button&gt; &lt;button onClick=&#123;onClickDecrease&#125;&gt;-1&lt;/button&gt; &lt;/div&gt; );&#125;export default App;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Redux","slug":"Frontend/Redux","permalink":"https://ckck803.github.io/categories/Frontend/Redux/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸°","slug":"react/redux/redux-02-typescript","date":"2021-12-06T22:31:46.000Z","updated":"2024-11-23T16:46:05.355Z","comments":true,"path":"2021/12/07/react/redux/redux-02-typescript/","link":"","permalink":"https://ckck803.github.io/2021/12/07/react/redux/redux-02-typescript/","excerpt":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ yarn add react-redux Action Type ì •ì˜/* ì•¡ì…˜ íƒ€ì… ë§Œë“¤ê¸° */// Ducks íŒ¨í„´ì„ ë”°ë¥¼ë• ì•¡ì…˜ì˜ ì´ë¦„ì— ì ‘ë‘ì‚¬ë¥¼ ë„£ì–´ì£¼ì„¸ìš”.// ì´ë ‡ê²Œ í•˜ë©´ ë‹¤ë¥¸ ëª¨ë“ˆê³¼ ì•¡ì…˜ ì´ë¦„ì´ ì¤‘ë³µë˜ëŠ” ê²ƒì„ ë°©ì§€ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.const SET_DIFF = &quot;counter/SET_DIFF&quot;;const INCREASE = &quot;counter/INCREASE&quot;;const DECREASE = &quot;counter/DECREASE&quot;; Action ìƒì„± í•¨ìˆ˜/* ì•¡ì…˜ ìƒì„±í•¨ìˆ˜ ë§Œë“¤ê¸° */// ì•¡ì…˜ ìƒì„±í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³  export í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì„œ ë‚´ë³´ë‚´ì£¼ì„¸ìš”.export const setDiff = (diff) =&gt; (&#123; type: SET_DIFF, diff &#125;);export const increase = () =&gt; (&#123; type: INCREASE &#125;);export const decrease = () =&gt; (&#123; type: DECREASE &#125;); Reducer","text":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ yarn add react-redux Action Type ì •ì˜/* ì•¡ì…˜ íƒ€ì… ë§Œë“¤ê¸° */// Ducks íŒ¨í„´ì„ ë”°ë¥¼ë• ì•¡ì…˜ì˜ ì´ë¦„ì— ì ‘ë‘ì‚¬ë¥¼ ë„£ì–´ì£¼ì„¸ìš”.// ì´ë ‡ê²Œ í•˜ë©´ ë‹¤ë¥¸ ëª¨ë“ˆê³¼ ì•¡ì…˜ ì´ë¦„ì´ ì¤‘ë³µë˜ëŠ” ê²ƒì„ ë°©ì§€ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.const SET_DIFF = &quot;counter/SET_DIFF&quot;;const INCREASE = &quot;counter/INCREASE&quot;;const DECREASE = &quot;counter/DECREASE&quot;; Action ìƒì„± í•¨ìˆ˜/* ì•¡ì…˜ ìƒì„±í•¨ìˆ˜ ë§Œë“¤ê¸° */// ì•¡ì…˜ ìƒì„±í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³  export í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì„œ ë‚´ë³´ë‚´ì£¼ì„¸ìš”.export const setDiff = (diff) =&gt; (&#123; type: SET_DIFF, diff &#125;);export const increase = () =&gt; (&#123; type: INCREASE &#125;);export const decrease = () =&gt; (&#123; type: DECREASE &#125;); Reducer/* ì´ˆê¸° ìƒíƒœ ì„ ì–¸ */const initialState = &#123; number: 0, diff: 1,&#125;;/* ë¦¬ë“€ì„œ ì„ ì–¸ */// ë¦¬ë“€ì„œëŠ” export default ë¡œ ë‚´ë³´ë‚´ì£¼ì„¸ìš”.export default function counter(state = initialState, action) &#123;$$ switch (action.type) &#123; case SET_DIFF: return &#123; ...state, diff: action.diff, &#125;; case INCREASE: return &#123; ...state, number: state.number + state.diff, &#125;; case DECREASE: return &#123; ...state, number: state.number - state.diff, &#125;; default: return state; &#125;&#125; import &#123; combineReducers &#125; from &quot;redux&quot;;import counter from &quot;./counter&quot;;import todos from &quot;./todos&quot;;const rootReducer = combineReducers(&#123; todos,&#125;);export default rootReducer; Store ìƒì„±import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import &#x27;./index.css&#x27;;import App from &#x27;./App&#x27;;import reportWebVitals from &#x27;./reportWebVitals&#x27;;import rootReducer from &#x27;./modules&#x27;;import &#123; Provider &#125; from &#x27;react-redux&#x27;;import &#123; createStore &#125; from &#x27;redux&#x27;;const store = createStore(rootReducer); // ìŠ¤í† ì–´ë¥¼ ë§Œë“­ë‹ˆë‹¤.console.log(store.getState()); // ìŠ¤í† ì–´ì˜ ìƒíƒœë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById(&#x27;root&#x27;));// If you want to start measuring performance in your app, pass a function// to log results (for example: reportWebVitals(console.log))// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitalsreportWebVitals(); import React from &quot;react&quot;;function Counter(&#123; number, diff, onIncrease, onDecrease, onSetDiff &#125;) &#123; const onChange = (e) =&gt; &#123; // e.target.value ì˜ íƒ€ì…ì€ ë¬¸ìì—´ì´ê¸° ë•Œë¬¸ì— ìˆ«ìë¡œ ë³€í™˜í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. onSetDiff(parseInt(e.target.value, 10)); &#125;; return ( &lt;div&gt; &lt;h1&gt;&#123;number&#125;&lt;/h1&gt; &lt;div&gt; &lt;input type=&quot;number&quot; value=&#123;diff&#125; min=&quot;1&quot; onChange=&#123;onChange&#125; /&gt; &lt;button onClick=&#123;onIncrease&#125;&gt;+&lt;/button&gt; &lt;button onClick=&#123;onDecrease&#125;&gt;-&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; );&#125;export default Counter; useDispatch ë¥¼ ì´ìš©í•´ dispatch ë¥¼ ë§Œë“¤ import React from &quot;react&quot;;import &#123; useSelector, useDispatch &#125; from &quot;react-redux&quot;;import Counter from &quot;./Counter&quot;;import &#123; increase, decrease, setDiff &#125; from &quot;../modules/counter&quot;;function CounterContainer() &#123; // useSelectorëŠ” ë¦¬ë•ìŠ¤ ìŠ¤í† ì–´ì˜ ìƒíƒœë¥¼ ì¡°íšŒí•˜ëŠ” Hookì…ë‹ˆë‹¤. // stateì˜ ê°’ì€ store.getState() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ê²°ê³¼ë¬¼ê³¼ ë™ì¼í•©ë‹ˆë‹¤. const &#123; number, diff &#125; = useSelector((state) =&gt; (&#123; number: state.counter.number, diff: state.counter.diff, &#125;)); // useDispatch ëŠ” ë¦¬ë•ìŠ¤ ìŠ¤í† ì–´ì˜ dispatch ë¥¼ í•¨ìˆ˜ì—ì„œ ì‚¬ìš© í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” Hook ì…ë‹ˆë‹¤. const dispatch = useDispatch(); // ê° ì•¡ì…˜ë“¤ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ëŠ” í•¨ìˆ˜ë“¤ì„ ë§Œë“œì„¸ìš” const onIncrease = () =&gt; dispatch(increase()); const onDecrease = () =&gt; dispatch(decrease()); const onSetDiff = (diff) =&gt; dispatch(setDiff(diff)); return ( &lt;Counter // ìƒíƒœì™€ number=&#123;number&#125; diff=&#123;diff&#125; // ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜ í•˜ëŠ” í•¨ìˆ˜ë“¤ì„ propsë¡œ ë„£ì–´ì¤ë‹ˆë‹¤. onIncrease=&#123;onIncrease&#125; onDecrease=&#123;onDecrease&#125; onSetDiff=&#123;onSetDiff&#125; /&gt; );&#125;export default CounterContainer; import React from &quot;react&quot;;import CounterContainer from &quot;./components/CounterContainer&quot;;function App() &#123; return ( &lt;div&gt; &lt;CounterContainer /&gt; &lt;/div&gt; );&#125;export default App;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Redux","slug":"Frontend/Redux","permalink":"https://ckck803.github.io/categories/Frontend/Redux/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"Redux ì‚¬ìš©í•˜ê¸°","slug":"react/redux/redux-01-redux","date":"2021-12-06T21:31:46.000Z","updated":"2024-11-23T16:46:05.139Z","comments":true,"path":"2021/12/07/react/redux/redux-01-redux/","link":"","permalink":"https://ckck803.github.io/2021/12/07/react/redux/redux-01-redux/","excerpt":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° Redux ì‚¬ìš©í•˜ê¸° í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•ˆì—ëŠ” í•˜ë‚˜ì˜ Store ê°€ ì¡´ì¬ State ëŠ” ì½ê¸° ì „ìš© ë¶ˆë³€ì„± ì„ ì§€ì¼œì¤˜ì•¼ í•œë‹¤. ê°ì²´ì˜ ê²½ìš° Spread ì—°ì‚°ì ë¥¼ ì‚¬ìš©í•´ ê¸°ì¡´ ê°ì²´ë¥¼ ë®ì–´ì¨ì¤€ë‹¤. ë°°ì—´ì˜ ë¶ˆë³€ì„±ì„ ì§€ì¼œì£¼ëŠ” ë‚´ì¥í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë¶ˆë³€ì„±ì„ ì§€ì¼œì•¼ë§Œ Component ë“¤ì´ ì œëŒ€ë¡œ Rerendering ëœë‹¤. ë³€í™”ë¥¼ ì¼ìœ¼í‚¤ëŠ” í•¨ìˆ˜, Reducer ëŠ” ìˆœìˆ˜í•œ í•¨ìˆ˜ ì—¬ì•¼ í•œë‹¤. Reducer ëŠ” ì´ì „ ìƒíƒœ ì™€ Action ê°ì²´ ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ë‹¤. ì´ì „ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•œë‹¤.(ë¶ˆë³€ì„± ìœ ì§€) ë˜‘ê°™ì€ íŒŒë¼ë¯¸í„°ë¡œ í˜¸ì¶œëœ ë¦¬ë“€ì„œëŠ” ì–¸ì œë‚˜ ë˜‘ê°™ì€ ê²°ê³¼ê°’ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤. Redux ëª¨ë“ˆ ì„¤ì¹˜yarn add react-redux Action ìƒíƒœì˜ ë³€í™”ê°€ í•„ìš”í•  ê²½ìš° Action ì„ ì¼ìœ¼í‚¨ë‹¤.","text":"ëª©ì°¨ Redux Saga Redux Middleware ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° - ê³„ì‚°ê¸° ë§Œë“¤ê¸° Redux ì‚¬ìš©í•˜ê¸° Redux ì‚¬ìš©í•˜ê¸° í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•ˆì—ëŠ” í•˜ë‚˜ì˜ Store ê°€ ì¡´ì¬ State ëŠ” ì½ê¸° ì „ìš© ë¶ˆë³€ì„± ì„ ì§€ì¼œì¤˜ì•¼ í•œë‹¤. ê°ì²´ì˜ ê²½ìš° Spread ì—°ì‚°ì ë¥¼ ì‚¬ìš©í•´ ê¸°ì¡´ ê°ì²´ë¥¼ ë®ì–´ì¨ì¤€ë‹¤. ë°°ì—´ì˜ ë¶ˆë³€ì„±ì„ ì§€ì¼œì£¼ëŠ” ë‚´ì¥í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë¶ˆë³€ì„±ì„ ì§€ì¼œì•¼ë§Œ Component ë“¤ì´ ì œëŒ€ë¡œ Rerendering ëœë‹¤. ë³€í™”ë¥¼ ì¼ìœ¼í‚¤ëŠ” í•¨ìˆ˜, Reducer ëŠ” ìˆœìˆ˜í•œ í•¨ìˆ˜ ì—¬ì•¼ í•œë‹¤. Reducer ëŠ” ì´ì „ ìƒíƒœ ì™€ Action ê°ì²´ ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ë‹¤. ì´ì „ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•œë‹¤.(ë¶ˆë³€ì„± ìœ ì§€) ë˜‘ê°™ì€ íŒŒë¼ë¯¸í„°ë¡œ í˜¸ì¶œëœ ë¦¬ë“€ì„œëŠ” ì–¸ì œë‚˜ ë˜‘ê°™ì€ ê²°ê³¼ê°’ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤. Redux ëª¨ë“ˆ ì„¤ì¹˜yarn add react-redux Action ìƒíƒœì˜ ë³€í™”ê°€ í•„ìš”í•  ê²½ìš° Action ì„ ì¼ìœ¼í‚¨ë‹¤. type ì´ë¼ëŠ” ê°’ì´ í•„ìˆ˜ì  ìˆì–´ì•¼ í•œë‹¤. type ì™¸ì—ë„ ë‹¤ë¥¸ ê°’ì„ ë„£ì–´ì¤„ ìˆ˜ ìˆë‹¤. &#123; type: &quot;INCREASE&quot;, data: &#123; id: 0, text: &quot;ê°’ ì¦ê°€&quot; &#125;&#125; Action ìƒì„± í•¨ìˆ˜ Action ì„ ë§Œë“¤ì–´ ë°˜í™˜ í•˜ëŠ” í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ì™€ Action ì„ ìƒì„±í•´ì£¼ëŠ” í•¨ìˆ˜ Action ìƒì„±í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ”ê²Œ í•„ìˆ˜ì ì´ì§€ëŠ” ì•Šë‹¤. const increase = () =&gt; (&#123; type: INCREASE&#125;)// test ì¸ìˆ˜ë¥¼ ë°›ì•„ì™€ CHANGE_TEXT ë¼ëŠ” Action ì„ ìƒì„±í•´ì¤€ë‹¤.const changeText = text =&gt; (&#123; type: CHANGE_TEXT, text&#125;); Reducer Action type ì„ ì´ìš©í•´ ë³€í™”ë¥¼ ì¼ìœ¼í‚¤ëŠ” í•¨ìˆ˜ state ì™€ action 2ê°€ì§€ íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤. action type ì„ ì´ìš©í•´ ë°ì´í„° ì—…ë°ì´íŠ¸ë¥¼ ì§„í–‰í•œ í›„ ìƒˆë¡œìš´ state ë¥¼ ë°˜í™˜í•œë‹¤. reducer ì—ì„œëŠ” ë¶ˆë³€ì„±ì„ ìœ ì§€í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— state ê°€ ê°ì²´ ìƒíƒœë¡œ ë„˜ì–´ì˜¤ë©´ spread ì—°ì‚°ìë¥¼ í™œìš©í•œë‹¤. defaultì—ì„œëŠ” ê¸°ì¡´ì˜ stateë¥¼ ë°˜í™˜í•˜ëŠ” í˜•íƒœë¡œ ì‘ì„±í•œë‹¤.(ì—¬ëŸ¬ê°œì˜ ë¦¬ë•ìŠ¤ë¥¼ í•©ì²˜ Root Reducerë¥¼ ë§Œë“¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—) function reducer(state = initialState, action) &#123; switch (action.type) &#123; case INCREASE: return &#123; ...state, counter: state.counter + 1 &#125; case DECREASE: return &#123; ...state, counter: state.counter - 1 &#125; case CHANGE_TEXT: return &#123; ...state, text: action.text &#125; case ADD_TO_LIST: return &#123; ...state, list: state.list.concat(action.item) &#125; default: return state; &#125;&#125; Store State ë¥¼ ê´€ë¦¬í•˜ëŠ” ì €ì¥ì†Œë¡œ ë³´í†µì€ í•˜ë‚˜ì˜ Application ë‹¹ í•˜ë‚˜ì˜ Store ë¥¼ ë§Œë“ ë‹¤.í˜„ì¬ ì•±ì˜ ìƒíƒœ , Reducer , ë‚´ì¥ í•¨ìˆ˜ ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤. dispatch (ë‚´ì¥ í•¨ìˆ˜) dispatch ëŠ” action ì„ ë°œìƒì‹œí‚¨ë‹¤. ë°œìƒ ì‹œí‚¨ action ì€ Reducer ë¡œ ì „ë‹¬ë¼ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•œë‹¤. subscribe (ë‚´ì¥ í•¨ìˆ˜) íŒŒë¼ë¯¸í„°ë¡œ í•¨ìˆ˜ë¥¼ ë„£ì–´ì£¼ë©´ action ì´ dispatch ë  ë•Œë§ˆë‹¤ í•¨ìˆ˜ê°€ í˜¸ì¶œ ëœë‹¤. import &#123; createStore &#125; from &#x27;redux&#x27;;// createStore ë¥¼ ì´ìš©í•´ store ë¥¼ ìƒì„±í•œë‹¤.// reducer ë¥¼ ì¸ìë¡œ ë°›ì•„ ìƒì„±í•œë‹¤.const store = createStore(reducer); store.dispatch(increase());store.dispatch(decrease());store.dispatch(changeText(&#x27;ì•ˆë…•í•˜ì„¸ìš”&#x27;));store.dispatch(addToList(&#123; id: 1, text: &#x27;ì™€ìš°&#x27; &#125;)); React Redux ì ìš©react-redux íŒ¨í‚¤ì§€ì˜ Provider ë¥¼ ì´ìš©í•´ store ë¥¼ ë“±ë¡í•œ í›„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import &#x27;./index.css&#x27;;import App from &#x27;./App&#x27;;import reportWebVitals from &#x27;./reportWebVitals&#x27;;import &#123; createStore &#125; from &#x27;redux&#x27;;import rootReducer from &#x27;./modules&#x27;;import &#123; Provider &#125; from &#x27;react-redux&#x27;;const store = createStore(rootReducer);ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById(&#x27;root&#x27;));reportWebVitals();","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Redux","slug":"Frontend/Redux","permalink":"https://ckck803.github.io/categories/Frontend/Redux/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"JPA Entity - ê¸°ë³¸í‚¤ ë§¤í•‘","slug":"jpa/jpa-programming/entity/entity-primary-key","date":"2021-12-04T22:31:46.000Z","updated":"2024-11-28T13:59:26.870Z","comments":true,"path":"2021/12/05/jpa/jpa-programming/entity/entity-primary-key/","link":"","permalink":"https://ckck803.github.io/2021/12/05/jpa/jpa-programming/entity/entity-primary-key/","excerpt":"ëª©ì°¨ JPA Entity - í…Œì´ë¸” ë§¤í•‘ JPA Entity - Column ë§¤í•‘ JPA Entity - ê¸°ë³¸í‚¤ ë§¤í•‘ ê¸°ë³¸í‚¤ ë§¤í•‘ ë°©ë²• ì§ì ‘ ë§¤í•‘ : @Id ìë™ ìƒì„± : @GeneratedValue strategy (ì „ëµ) IDENTITY : ë°ì´í„° ë² ì´ìŠ¤ì— ìœ„ì„ SEQUENCE : ë°ì´í„° ë² ì´ìŠ¤ ìŠ¤í€€ìŠ¤ ì˜¤ë¸Œì íŠ¸ ì‚¬ìš© TABLE : í‚¤ ìƒì„±ìš© í…Œì´ë¸” ì‚¬ìš©, ëª¨ë“  DB ì—ì„œ ì‚¬ìš© AUTO : ë°©ì–¸ì— ë”°ë¼ ìë™ ì§€ì • IDENTITY ì „ëµ ê¸°ë³¸í‚¤ ìƒì„±ì„ ë°ì´í„° ë² ì´ìŠ¤ì— ìœ„ì„í•˜ëŠ” ì „ëµ MySQL, PostgreSQL, SQL Server, DB2 ì—ì„œ ì‚¬ìš©í•œë‹¤. IDENTITY ì „ëµ - ë¬¸ì œì  DataBase ì— ê°’ì´ ë“¤ì–´ê°€ì•¼ Id ê°’ì„ ì•Œ ìˆ˜ ìˆë‹¤. ì˜ì†ì„± Context ì—ì„œ Entity ê°€ ê´€ë¦¬ ë˜ê¸° ìœ„í•´ì„œëŠ” PK ê°’ì´ ë°˜ë“œì‹œ ìˆì–´ì•¼ í•œë‹¤. JPA ëŠ” íŠ¸ëœì­ì…˜ COMMIT ì‹œì ì— INSERT SQL ì‹¤í–‰í•˜ì§€ë§Œ IDENTITY ì „ëµì€ persist ì‹œì ì— ì‹¤í–‰ í›„ DB ì—ì„œ Id ì¡°íšŒ","text":"ëª©ì°¨ JPA Entity - í…Œì´ë¸” ë§¤í•‘ JPA Entity - Column ë§¤í•‘ JPA Entity - ê¸°ë³¸í‚¤ ë§¤í•‘ ê¸°ë³¸í‚¤ ë§¤í•‘ ë°©ë²• ì§ì ‘ ë§¤í•‘ : @Id ìë™ ìƒì„± : @GeneratedValue strategy (ì „ëµ) IDENTITY : ë°ì´í„° ë² ì´ìŠ¤ì— ìœ„ì„ SEQUENCE : ë°ì´í„° ë² ì´ìŠ¤ ìŠ¤í€€ìŠ¤ ì˜¤ë¸Œì íŠ¸ ì‚¬ìš© TABLE : í‚¤ ìƒì„±ìš© í…Œì´ë¸” ì‚¬ìš©, ëª¨ë“  DB ì—ì„œ ì‚¬ìš© AUTO : ë°©ì–¸ì— ë”°ë¼ ìë™ ì§€ì • IDENTITY ì „ëµ ê¸°ë³¸í‚¤ ìƒì„±ì„ ë°ì´í„° ë² ì´ìŠ¤ì— ìœ„ì„í•˜ëŠ” ì „ëµ MySQL, PostgreSQL, SQL Server, DB2 ì—ì„œ ì‚¬ìš©í•œë‹¤. IDENTITY ì „ëµ - ë¬¸ì œì  DataBase ì— ê°’ì´ ë“¤ì–´ê°€ì•¼ Id ê°’ì„ ì•Œ ìˆ˜ ìˆë‹¤. ì˜ì†ì„± Context ì—ì„œ Entity ê°€ ê´€ë¦¬ ë˜ê¸° ìœ„í•´ì„œëŠ” PK ê°’ì´ ë°˜ë“œì‹œ ìˆì–´ì•¼ í•œë‹¤. JPA ëŠ” íŠ¸ëœì­ì…˜ COMMIT ì‹œì ì— INSERT SQL ì‹¤í–‰í•˜ì§€ë§Œ IDENTITY ì „ëµì€ persist ì‹œì ì— ì‹¤í–‰ í›„ DB ì—ì„œ Id ì¡°íšŒ SEQUENCE ì „ëµ ìœ ì¼í•œ ê°’ì„ ìˆœì„œëŒ€ë¡œ ìƒì„±í•˜ëŠ” íŠ¹ë³„í•œ DB ì˜¤ë¸Œì íŠ¸ ORACLE, PostgreSQL, H2 ë°ì´í„° ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš© @SequenceGenerator ë¥¼ ì´ìš©í•´ Sequence ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. ì†ì„± ì„¤ëª… ê¸°ë³¸ ê°’ name ì‹ë³„ì ìƒì„±ê¸° ì´ë¦„ sequenceName DataBase ì— ë“±ë¡ëœ ì‹œí€€ìŠ¤ ì´ë¦„ initialValue DDL ìƒì„±ì‹œì—ë§Œ ì‚¬ìš©ë¨, Seqence DDL ì„ ìƒì„±í•  ë•Œ ì²˜ìŒ 1 ì‹œì‘í•˜ëŠ” ìˆ˜ë¥¼ ì§€ì •í•œë‹¤. 1 allocationSize ì‹œí€€ìŠ¤ í•œë²ˆ í˜¸ì¶œì— ì¦ê°€í•˜ëŠ” ìˆ˜ ê¸°ë³¸ ê°’ 50 category, scheme ë°ì´í„° ë² ì´ìŠ¤ category, scheme ì´ë¦„ TABLE ì „ëµ í‚¤ ìƒì„± ì „ìš© í…Œì´ë¸” ì„ ë§Œë“¤ì–´ ë°ì´í„° ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ë¥¼ í‰ë‚´ë‚´ëŠ” ì „ëµ ì¥ì  : ëª¨ë“  ë°ì´í„° ë² ì´ìŠ¤ì— ì ìš© ê°€ëŠ¥ ë‹¨ì  : ì„±ëŠ¥ @TableGenerator ë¥¼ ì´ìš©í•´ Sequence ë¥¼ ê´€ë¦¬í•œë‹¤. ì†ì„± ì„¤ëª… ê¸°ë³¸ ê°’ name ì‹ë³„ì ìƒì„±ê¸° ì´ë¦„ í•„ìˆ˜! table í‚¤ ìƒì„± í…Œì´ë¸” ì´ë¦„ pkColumnName ì‹œí€€ìŠ¤ ì»¬ëŸ¼ëª… valueColumnNa ì‹œí€€ìŠ¤ ê°’ ì»¬ëŸ¼ëª… pkColumnValue í‚¤ë¡œ ì‚¬ìš©í•  ê°’ ì´ë¦„ initailValue ì´ˆê¸° ê°’, ë§ˆì§€ë§‰ìœ¼ë¡œ ìƒì„±ëœ ê°’ì´ ê¸°ì¤€ allocationSize ì‹œí€€ìŠ¤ í•œë²ˆì— ì¦ê°€í•˜ëŠ” ìˆ˜ ê¸°ë³¸ ê°’ 50 category, scheme ë°ì´í„° ë² ì´ìŠ¤ category, scheme ì´ë¦„ uniqueConstraints ìœ ë‹ˆí¬ ì œì•½ ì¡°ê±´ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. ê¶Œì¥í•˜ëŠ” ì‹ë³„ì ì „ëµ ê¸°ë³¸í‚¤ ì œì•½ ì¡°ê±´ NULL ì´ ì•„ë‹ˆë‹¤. ê°’ì´ Unique í•˜ë‹¤ ë³€í•´ì„œëŠ” ì•ˆëœë‹¤. ë¯¸ë˜ê¹Œì§€ ì´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìì—°í‚¤ëŠ” ì°¾ê¸° ì–´ë µë‹¤. ëŒ€ì²´í‚¤ë¥¼ ì‚¬ìš©í•˜ì (ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ê´€ë ¨ì´ ì—†ëŠ” ê°’) ê¶Œì¥í•˜ëŠ” ëŒ€ì²´í‚¤ : Long í˜• + ëŒ€ì²´í‚¤ + í‚¤ ìƒì„± ì „ëµ ì‚¬ìš©","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"JPA Entity - Column ë§¤í•‘","slug":"jpa/jpa-programming/entity/entity-column","date":"2021-12-04T20:31:46.000Z","updated":"2024-11-28T13:59:26.717Z","comments":true,"path":"2021/12/05/jpa/jpa-programming/entity/entity-column/","link":"","permalink":"https://ckck803.github.io/2021/12/05/jpa/jpa-programming/entity/entity-column/","excerpt":"ëª©ì°¨ JPA Entity - í…Œì´ë¸” ë§¤í•‘ JPA Entity - Column ë§¤í•‘ JPA Entity - ê¸°ë³¸í‚¤ ë§¤í•‘ @Column| ì´ë¦„ | ê¸°ëŠ¥ | ê¸°ë³¸ ê°’ ||: â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” |: â€”â€”- || name | í•„ë“œì™€ ë§¤í•‘í•  í…Œì´ë¸” ì»¬ëŸ¼ ì´ë¦„ | ê°ì²´ì˜ í•„ë“œ ì´ë¦„| insertable | ë“±ë¡ ê°€ëŠ¥ ì—¬ë¶€ (true : ë“±ë¡ ê°€ëŠ¥, false : ë“±ë¡ ë¶ˆê°€) | True|updatable | ë³€ê²½ ê°€ëŠ¥ ì—¬ë¶€ (true : ë³€ê²½ ê°€ëŠ¥, false : ë³€ê²½ ë¶ˆê°€)| nullable (DDL) | null ê°’ í—ˆìš© ì—¬ë¶€ë¥¼ ì„¤ì •í•œë‹¤. false ì¼ ê²½ìš° not null ì œì•½ ì¡°ê±´ ì´ ìƒì„±ëœë‹¤. || unique (DDL) | í•œ ì»¬ëŸ¼ì— ëŒ€í•œ Unique ì œì•½ ì¡°ê±´ ì„ ì„¤ì •í•œë‹¤. || columnDefinition (DDL) | ë°ì´í„° ë² ì´ìŠ¤ ì»¬ëŸ¼ ì •ë³´ë¥¼ ì§ì ‘ ì¤„ ìˆ˜ ìˆë‹¤. | í•„ë“œì˜ ìë°” íƒ€ì…| length (DDL) | ë¬¸ìì—´ ê¸¸ì´ ì œì•½ ì¡°ê±´ì„ ìƒì„±í•œë‹¤. (String ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥) | 255| precision (DDL) scale (DDL) | BigDecimal íƒ€ì…ì—ì„œ ì‚¬ìš©í•œë‹¤. precision ì€ ì†Œìˆ˜ì ì„ í¬í•¨í•œ ìë¦¿ìˆ˜ë¥¼ scale ì€ ì†Œìˆ˜ì˜ ìë¦¿ìˆ˜ë‹¤. double ê³¼ float íƒ€ì…ì—ëŠ” ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. | @Enumerated ìë°” Enum Type ì„ ë§¤í•‘í•  ë•Œ ì‚¬ìš© value EnumType.ORIGINAL : enum ìˆœì„œë¥¼ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ (Integer) EnumType.STRING : enum ì´ë¦„ì„ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ (String) @Temporal value TemporalType.DATE : ë‚ ì§œ ì •ë³´, ë°ì´í„° ë² ì´ìŠ¤ date íƒ€ì…ê³¼ Mapping TemporalType.TIME : ì‹œê°„ ì •ë³´, ë°ì´í„° ë² ì´ìŠ¤ time íƒ€ì…ê³¼ Mapping TemporalType.TIMESTAMP : ë‚ ì§œì™€ ì‹œê°„, ë°ì´í„° ë² ì´ìŠ¤ timestamp ì™€ Mapping","text":"ëª©ì°¨ JPA Entity - í…Œì´ë¸” ë§¤í•‘ JPA Entity - Column ë§¤í•‘ JPA Entity - ê¸°ë³¸í‚¤ ë§¤í•‘ @Column| ì´ë¦„ | ê¸°ëŠ¥ | ê¸°ë³¸ ê°’ ||: â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” |: â€”â€”- || name | í•„ë“œì™€ ë§¤í•‘í•  í…Œì´ë¸” ì»¬ëŸ¼ ì´ë¦„ | ê°ì²´ì˜ í•„ë“œ ì´ë¦„| insertable | ë“±ë¡ ê°€ëŠ¥ ì—¬ë¶€ (true : ë“±ë¡ ê°€ëŠ¥, false : ë“±ë¡ ë¶ˆê°€) | True|updatable | ë³€ê²½ ê°€ëŠ¥ ì—¬ë¶€ (true : ë³€ê²½ ê°€ëŠ¥, false : ë³€ê²½ ë¶ˆê°€)| nullable (DDL) | null ê°’ í—ˆìš© ì—¬ë¶€ë¥¼ ì„¤ì •í•œë‹¤. false ì¼ ê²½ìš° not null ì œì•½ ì¡°ê±´ ì´ ìƒì„±ëœë‹¤. || unique (DDL) | í•œ ì»¬ëŸ¼ì— ëŒ€í•œ Unique ì œì•½ ì¡°ê±´ ì„ ì„¤ì •í•œë‹¤. || columnDefinition (DDL) | ë°ì´í„° ë² ì´ìŠ¤ ì»¬ëŸ¼ ì •ë³´ë¥¼ ì§ì ‘ ì¤„ ìˆ˜ ìˆë‹¤. | í•„ë“œì˜ ìë°” íƒ€ì…| length (DDL) | ë¬¸ìì—´ ê¸¸ì´ ì œì•½ ì¡°ê±´ì„ ìƒì„±í•œë‹¤. (String ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥) | 255| precision (DDL) scale (DDL) | BigDecimal íƒ€ì…ì—ì„œ ì‚¬ìš©í•œë‹¤. precision ì€ ì†Œìˆ˜ì ì„ í¬í•¨í•œ ìë¦¿ìˆ˜ë¥¼ scale ì€ ì†Œìˆ˜ì˜ ìë¦¿ìˆ˜ë‹¤. double ê³¼ float íƒ€ì…ì—ëŠ” ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. | @Enumerated ìë°” Enum Type ì„ ë§¤í•‘í•  ë•Œ ì‚¬ìš© value EnumType.ORIGINAL : enum ìˆœì„œë¥¼ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ (Integer) EnumType.STRING : enum ì´ë¦„ì„ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ (String) @Temporal value TemporalType.DATE : ë‚ ì§œ ì •ë³´, ë°ì´í„° ë² ì´ìŠ¤ date íƒ€ì…ê³¼ Mapping TemporalType.TIME : ì‹œê°„ ì •ë³´, ë°ì´í„° ë² ì´ìŠ¤ time íƒ€ì…ê³¼ Mapping TemporalType.TIMESTAMP : ë‚ ì§œì™€ ì‹œê°„, ë°ì´í„° ë² ì´ìŠ¤ timestamp ì™€ Mapping @Lob ë°ì´í„° ë² ì´ìŠ¤ì˜ BLOB, CLOB íƒ€ì…ê³¼ ë§¤í•‘í•  ë•Œ ì‚¬ìš©ëœë‹¤. ë³„ë„ë¡œ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ì†ì„±ì´ ì—†ë‹¤. ë§¤í•‘í•  ìˆ˜ ìˆëŠ” íƒ€ì…ì— ë”°ë¼ ë§¤í•‘ íƒ€ì…ì´ ë‹¤ë¥´ë‹¤. ë§¤í•‘í•˜ëŠ” ì»¬ëŸ¼ íƒ€ì…ì´ ë¬¸ìì—´ : CLOB ë‚˜ë¨¸ì§€ : BLOB @Transient DB Table Column ê³¼ ê°ì²´ Field ì •ë³´ë¥¼ ë§¤í•‘ì„ í•˜ê³  ì‹¶ì§€ ì•Šì„ ê²½ìš° ì‚¬ìš© DB ì—ì„œ ì €ì¥ ë° ì¡°íšŒê°€ ì•ˆëœë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"JPA Entity - í…Œì´ë¸” ë§¤í•‘","slug":"jpa/jpa-programming/entity/entity-table","date":"2021-12-04T19:31:46.000Z","updated":"2024-11-28T13:59:26.788Z","comments":true,"path":"2021/12/05/jpa/jpa-programming/entity/entity-table/","link":"","permalink":"https://ckck803.github.io/2021/12/05/jpa/jpa-programming/entity/entity-table/","excerpt":"ëª©ì°¨ JPA Entity - í…Œì´ë¸” ë§¤í•‘ JPA Entity - Column ë§¤í•‘ JPA Entity - ê¸°ë³¸í‚¤ ë§¤í•‘ Entity ë§¤í•‘ì— ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ê°ì²´ì™€ í…Œì´ë¸” ë§¤í•‘ : @Entity , @Table í•„ë“œì™€ ì»¬ëŸ¼ ë§¤í•‘ : @Column ê¸°ë³¸ í‚¤ ë§¤í•‘ : @Id ì—°ê´€ ê´€ê³„ ë§¤í•‘ : @ManyToOne, @JoinColumn @Entity JPA ê°€ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤JPA ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ Entity ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤. íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” ê¸°ë³¸ ìƒì„±ìë¥¼ ë°˜ë“œì‹œ ìƒì„±í•´ì¤˜ì•¼ í•œë‹¤. final í´ë˜ìŠ¤, enum, interface, inner í´ë˜ìŠ¤ ì—ëŠ” ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥ í•˜ë‹¤. ì €ì¥í•  field ì— final í‚¤ì›Œë“œëŠ” ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. @Table Table ì–´ë…¸í…Œì´ì…˜ì€ Entity ì™€ ë§¤í•‘í•  Database Table ì„ ì§€ì •í•œë‹¤.","text":"ëª©ì°¨ JPA Entity - í…Œì´ë¸” ë§¤í•‘ JPA Entity - Column ë§¤í•‘ JPA Entity - ê¸°ë³¸í‚¤ ë§¤í•‘ Entity ë§¤í•‘ì— ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ê°ì²´ì™€ í…Œì´ë¸” ë§¤í•‘ : @Entity , @Table í•„ë“œì™€ ì»¬ëŸ¼ ë§¤í•‘ : @Column ê¸°ë³¸ í‚¤ ë§¤í•‘ : @Id ì—°ê´€ ê´€ê³„ ë§¤í•‘ : @ManyToOne, @JoinColumn @Entity JPA ê°€ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤JPA ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ Entity ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤. íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” ê¸°ë³¸ ìƒì„±ìë¥¼ ë°˜ë“œì‹œ ìƒì„±í•´ì¤˜ì•¼ í•œë‹¤. final í´ë˜ìŠ¤, enum, interface, inner í´ë˜ìŠ¤ ì—ëŠ” ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥ í•˜ë‹¤. ì €ì¥í•  field ì— final í‚¤ì›Œë“œëŠ” ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. @Table Table ì–´ë…¸í…Œì´ì…˜ì€ Entity ì™€ ë§¤í•‘í•  Database Table ì„ ì§€ì •í•œë‹¤. ì´ë¦„ ê¸°ëŠ¥ ê¸°ë³¸ ê°’ name ë§¤í•‘í•  í…Œì´ë¸” ì´ë¦„ Entity ì´ë¦„ì„ ì‚¬ìš© catalog DataBase ì— catalog ë§¤í•‘ schema DataBase ì— schema ë§¤í•‘ uniqueConstraints DDL ìƒì„±ì‹œì— ìœ ë‹ˆí¬ ì œì•½ ì¡°ê±´ ìƒì„± DataBase ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„± DDL ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ìë™ ìƒì„± ìš´ì˜ ì„œë²„ì—ì„œëŠ” create, create-drop, update ì†ì„±ì„ ì‚¬ìš©í•´ì„œëŠ” ì•ˆëœë‹¤. í…Œì´ë¸” ì¤‘ì‹¬ â€“&gt; ê°ì²´ ì¤‘ì‹¬ ë°ì´í„° ë² ì´ìŠ¤ ë°©ì–¸ì„ í™œìš©í•´ì„œ ë°ì´í„° ë² ì´ìŠ¤ì— ì ì ˆí•œ DDL ì„ ìƒì„±í•œë‹¤. ì˜µì…˜ ì„¤ëª… create ê¸°ì¡´ í…Œì´ë¸”ì„ DROP í•œ í›„ CREATE í•œë‹¤. (ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œí•œ í›„ì—ë„ í…Œì´ë¸” ìœ ì§€) create-drop ê¸°ì¡´ í…Œì´ë¸”ì„ DROP í•œ í›„ CREATE í•œë‹¤. (ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œì‹œì ì— í…Œì´ë¸” DROP) update ê¸°ì¡´ í…Œì´ë¸”ì„ DROP í•˜ì§€ ì•Šê³  ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë°˜ì˜ (ALTER) validate Entity ì™€ Table ì´ ì •ìƒì ìœ¼ë¡œ ë§¤í•‘ ëëŠ”ì§€ í™•ì¸í•œë‹¤. none ì•„ë¬´ ì‘ì—…ë„ ì§„í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. create ê¸°ì¡´ í…Œì´ë¸”ì„ DROP í•œ í›„ CREATE í•œë‹¤. Hibernate: drop table Member if existsHibernate: create table Member ( id bigint not null, name varchar(255), primary key (id) ) create-drop ê¸°ì¡´ í…Œì´ë¸”ì„ DROP í•œ í›„ CREATE í•œë‹¤. (ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œì‹œì ì— í…Œì´ë¸” DROP) Hibernate: drop table Member if existsHibernate: create table Member ( id bigint not null, name varchar(255), primary key (id) )Hibernate: /* select m from Member as m */ select member0_.id as id1_0_, member0_.name as name2_0_ from Member member0_ limit ? offset ?Hibernate: drop table Member if exists update ê¸°ì¡´ í…Œì´ë¸”ì„ DROP í•˜ì§€ ì•Šê³  ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë°˜ì˜ (ALTER) Hibernate: alter table Member add column age integer not null validate Entity ì™€ Table ì´ ì •ìƒì ìœ¼ë¡œ ë§¤í•‘ ëëŠ”ì§€ í™•ì¸í•œë‹¤. SchemaManagementException Exception in thread &quot;main&quot; javax.persistence.PersistenceException: [PersistenceUnit: hello] Unable to build Hibernate SessionFactory at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:1016) at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:942) at org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56) at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79) at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54) at hellojpa.JpaMain.main(JpaMain.java:13)Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [location] in table [Member] at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:136) at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:42) at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:89) at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:68) at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:191) at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72) at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:310) at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:467) at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:939) ... 4 more","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"Spring AOP - ìš©ì–´ ì •ë¦¬","slug":"spring/spring-aop/aspect/aop-aspect-02","date":"2021-12-03T22:31:07.000Z","updated":"2024-02-26T15:22:00.039Z","comments":true,"path":"2021/12/04/spring/spring-aop/aspect/aop-aspect-02/","link":"","permalink":"https://ckck803.github.io/2021/12/04/spring/spring-aop/aspect/aop-aspect-02/","excerpt":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring AOP - Aspect ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¡°ì¸ í¬ì¸íŠ¸ (JoinPoint) ì–´ë“œë°”ì´ìŠ¤ê°€ ì ìš©ë  ìˆ˜ ìˆëŠ” ìœ„ì¹˜ ë©”ì†Œë“œ ì‹¤í–‰, ìƒì„±ì í˜¸ì¶œ, í•„ë“œ ê°’ ì ‘ê·¼, static ë©”ì„œë“œ ì ‘ê·¼ ê°™ì€ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘ ì§€ì  AOP ë¥¼ ì ìš©í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì§€ì (ì¶”ìƒì ì¸ ê°œë…) Spring AOP ëŠ” í”„ë¡ì‹œ ë°©ì‹ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì¡°ì¸ í¬ì¸íŠ¸ëŠ” í•­ìƒ ë©”ì†Œë“œ ì‹¤í–‰ ì‹œì ìœ¼ë¡œ ì œí•œëœë‹¤. í¬ì¸íŠ¸ ì»· (Pointcut) ì–´ë“œë°”ì´ìŠ¤ê°€ ì ìš©ë  ìœ„ì¹˜ë¥¼ ì„ ë³„í•˜ëŠ” ê¸°ëŠ¥","text":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring AOP - Aspect ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¡°ì¸ í¬ì¸íŠ¸ (JoinPoint) ì–´ë“œë°”ì´ìŠ¤ê°€ ì ìš©ë  ìˆ˜ ìˆëŠ” ìœ„ì¹˜ ë©”ì†Œë“œ ì‹¤í–‰, ìƒì„±ì í˜¸ì¶œ, í•„ë“œ ê°’ ì ‘ê·¼, static ë©”ì„œë“œ ì ‘ê·¼ ê°™ì€ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘ ì§€ì  AOP ë¥¼ ì ìš©í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì§€ì (ì¶”ìƒì ì¸ ê°œë…) Spring AOP ëŠ” í”„ë¡ì‹œ ë°©ì‹ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì¡°ì¸ í¬ì¸íŠ¸ëŠ” í•­ìƒ ë©”ì†Œë“œ ì‹¤í–‰ ì‹œì ìœ¼ë¡œ ì œí•œëœë‹¤. í¬ì¸íŠ¸ ì»· (Pointcut) ì–´ë“œë°”ì´ìŠ¤ê°€ ì ìš©ë  ìœ„ì¹˜ë¥¼ ì„ ë³„í•˜ëŠ” ê¸°ëŠ¥ AspectJ í‘œí˜„ì‹ì„ ì‚¬ìš©í•´ì„œ ì§€ì • í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ëŠ” Spring AOP ëŠ” ë©”ì„œë“œ ì‹¤í–‰ ì‹œì ë§Œ í¬ì¸íŠ¸ ì»·ìœ¼ë¡œ ì„ ë³„ ê°€ëŠ¥ íƒ€ê²Ÿ (Target) ë¶€ê°€ê¸°ëŠ¥(ì–´ë“œë°”ì´ìŠ¤)ì´ ì ìš©ë˜ëŠ” ê°ì²´ Pointcut ìœ¼ë¡œ íŠ¹ì • ê°ì²´ì— Advice ë¥¼ ì ìš©í•©ë‹ˆë‹¤. Advice ë¶€ê°€ê¸°ëŠ¥ ì¡°ì¸ í¬ì¸íŠ¸ì—ì„œ Aspect ì— ì˜í•´ ì·¨í•´ì§€ëŠ” ì¡°ì¹˜ Around, Before, After ì™€ ê°™ì€ ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ì–´ë“œë°”ì´ìŠ¤ê°€ ìˆë‹¤. Aspect ì–´ë“œë°”ì´ìŠ¤ì™€ í¬ì¸íŠ¸ ì»·ì„ ëª¨ë“ˆí™” í•œ ê²ƒ Advisor í•˜ë‚˜ì˜ ì–´ë“œë°”ì´ìŠ¤ì™€ í•˜ë‚˜ì˜ í¬ì¸íŠ¸ ì»·ìœ¼ë¡œ êµ¬ì„± Spring AOP ì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” ìš©ì–´","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"AOP Aspect","slug":"Spring/Spring-AOP/AOP-Aspect","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/AOP-Aspect/"}],"tags":[]},{"title":"Spring AOP - ì ìš© ë°©ì‹","slug":"spring/spring-aop/aspect/aop-aspect-01","date":"2021-12-02T22:31:07.000Z","updated":"2024-02-26T15:21:55.501Z","comments":true,"path":"2021/12/03/spring/spring-aop/aspect/aop-aspect-01/","link":"","permalink":"https://ckck803.github.io/2021/12/03/spring/spring-aop/aspect/aop-aspect-01/","excerpt":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring AOP - Aspect ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­(Cross-cutting Concern)ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì¦‰, ì—¬ëŸ¬ ëª¨ë“ˆì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œì„œ, ì—¬ëŸ¬ ì½”ë“œì— ê±¸ì³ ë¶„ì‚°ë˜ì–´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­ì€ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë¶„ë¦¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ ì§€ ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì— ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­ì˜ ì˜ˆë¡œëŠ” ë¡œê¹…, ë³´ì•ˆ, íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë“±ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ ëª¨ë“ˆì—ì„œ ê³µí†µì ìœ¼ë¡œ ë¡œê·¸ë¥¼ ì¶œë ¥í•´ì•¼ í•œë‹¤ë©´, ëª¨ë“  ì½”ë“œì— ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ¬í•œ ë°©ì‹ì€ ìœ ì§€ ë³´ìˆ˜ì„±ì´ ë–¨ì–´ì§€ê³  ì½”ë“œ ì¤‘ë³µì´ ë°œìƒí•©ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë¡œê·¸ ì¶œë ¥ê³¼ ê°™ì€ ê³µí†µ ê¸°ëŠ¥ì„ ëª¨ë“ˆí™”í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ê²ƒì´ ë°”ë¡œ AOPì˜ ì—­í• ì…ë‹ˆë‹¤. AOPë¥¼ ì‚¬ìš©í•˜ë©´ í•µì‹¬ ë¡œì§ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, ê³µí†µ ê¸°ëŠ¥ì„ ëª¨ë“ˆí™”í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ ì§€ ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì´ í–¥ìƒë˜ë©°, ì½”ë“œì˜ ê°€ë…ì„±ë„ ë†’ì•„ì§€ëŠ” ë“±ì˜ ì¥ì ì„ ê°€ì§‘ë‹ˆë‹¤. Spring AOP AOP ë¥¼ ì‚¬ìš©í•˜ë©´ í•µì‹¬ê¸°ëŠ¥ ê³¼ ë¶€ê°€ê¸°ëŠ¥ ì´ ì½”ë“œìƒ ì™„ì „íˆ ë¶„ë¦¬ ëœë‹¤.","text":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring AOP - Aspect ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­(Cross-cutting Concern)ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì¦‰, ì—¬ëŸ¬ ëª¨ë“ˆì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œì„œ, ì—¬ëŸ¬ ì½”ë“œì— ê±¸ì³ ë¶„ì‚°ë˜ì–´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­ì€ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë¶„ë¦¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ ì§€ ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì— ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­ì˜ ì˜ˆë¡œëŠ” ë¡œê¹…, ë³´ì•ˆ, íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë“±ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ ëª¨ë“ˆì—ì„œ ê³µí†µì ìœ¼ë¡œ ë¡œê·¸ë¥¼ ì¶œë ¥í•´ì•¼ í•œë‹¤ë©´, ëª¨ë“  ì½”ë“œì— ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ¬í•œ ë°©ì‹ì€ ìœ ì§€ ë³´ìˆ˜ì„±ì´ ë–¨ì–´ì§€ê³  ì½”ë“œ ì¤‘ë³µì´ ë°œìƒí•©ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë¡œê·¸ ì¶œë ¥ê³¼ ê°™ì€ ê³µí†µ ê¸°ëŠ¥ì„ ëª¨ë“ˆí™”í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ê²ƒì´ ë°”ë¡œ AOPì˜ ì—­í• ì…ë‹ˆë‹¤. AOPë¥¼ ì‚¬ìš©í•˜ë©´ í•µì‹¬ ë¡œì§ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, ê³µí†µ ê¸°ëŠ¥ì„ ëª¨ë“ˆí™”í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ ì§€ ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì´ í–¥ìƒë˜ë©°, ì½”ë“œì˜ ê°€ë…ì„±ë„ ë†’ì•„ì§€ëŠ” ë“±ì˜ ì¥ì ì„ ê°€ì§‘ë‹ˆë‹¤. Spring AOP AOP ë¥¼ ì‚¬ìš©í•˜ë©´ í•µì‹¬ê¸°ëŠ¥ ê³¼ ë¶€ê°€ê¸°ëŠ¥ ì´ ì½”ë“œìƒ ì™„ì „íˆ ë¶„ë¦¬ ëœë‹¤. ìŠ¤í”„ë§ AOP(Aspect-Oriented Programming)ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ëª¨ë“ˆí™”í•˜ê³ , ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ëª¨ë“ˆí™” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê°ê°ì˜ ê°ì²´ì—ì„œ ë°˜ë³µë˜ëŠ” ì½”ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆìœ¼ë©°, ê°ì²´ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ AOPëŠ” í”„ë¡ì‹œ ê¸°ë°˜ì˜ AOP ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ì—ì„œëŠ” AOP êµ¬í˜„ì„ ìœ„í•´ XML ê¸°ë°˜ AOP ì™€ Annotation ê¸°ë°˜ AOP ë‘ ê°€ì§€ ë°©ì‹ì„ ì œê³µí•©ë‹ˆë‹¤. Spring AOP êµ¬ì„± ìš”ì†Œ Aspect, Advice, JoinPoint, Pointcut ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. Aspect ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ì„ ëª¨ë“ˆí™”í•œ ê²ƒì…ë‹ˆë‹¤. Advice Aspectì—ì„œ êµ¬í˜„í•œ ê¸°ëŠ¥ì„ ë§í•˜ë©°, íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­ì„ êµ¬í˜„í•œ êµ¬ì²´ì ì¸ ë©”ì†Œë“œì…ë‹ˆë‹¤. Before, After, Around ë“±ì˜ Advice ìœ í˜•ì´ ìˆìŠµë‹ˆë‹¤. JoinPoint Adviceê°€ ì ìš©ë  ìœ„ì¹˜ì…ë‹ˆë‹¤. ë©”ì†Œë“œ í˜¸ì¶œ, í•„ë“œ ì ‘ê·¼ ë“±ì´ JoinPointê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Pointcut Join pointì˜ ì§‘í•©ìœ¼ë¡œ, Adviceê°€ ì ìš©ë  Join pointë¥¼ ì„ íƒí•©ë‹ˆë‹¤. AOP ì ìš© ì‹œì AOP ëŠ” ì ìš© ë˜ëŠ” ì‹œì ë”°ë¼ ì»´íŒŒì¼ ì‹œì , í´ë˜ìŠ¤ ë¡œë”© ì‹œì , ëŸ°íƒ€ì„ ì‹œì  ì„¸ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 1. ì»´íŒŒì¼ ì‹œì ì— AOP ì ìš© - ë°”ì´íŠ¸ ì½”ë“œ ì¡°ì‘ ìë°” ì†ŒìŠ¤ë¥¼ ìë°” ë°”ì´íŠ¸ ì½”ë“œë¡œ ì»´íŒŒì¼ í•˜ëŠ” ì‹œì ì— ë¶€ê°€ ê¸°ëŠ¥ ë¡œì§ì„ ì¶”ê°€ ì²«ë²ˆì§¸ëŠ” ì»´íŒŒì¼ ì‹œ AOP ê°€ ì ìš©ë˜ëŠ” ì‹œì ì…ë‹ˆë‹¤. ì»´íŒŒì¼ëŸ¬ê°€ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë°”ì´íŠ¸ ì½”ë“œ ë¡œ ë³€í™˜í•  ë•Œ, AOP ì½”ë“œë¥¼ í•¨ê»˜ ì¡°í•©í•©ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ì½”ë“œê°€ ì»´íŒŒì¼ ë˜ëŠ” ì‹œì ì— AOPê°€ ì ìš©ë˜ê¸° ë•Œë¬¸ì—, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤í–‰ ì‹œê°„ì— ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•  í™•ë¥ ì´ ë‚®ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ AOPë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì½”ë“œì˜ ì¬ì»´íŒŒì¼ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì—, ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ ë¡œë”©ë˜ëŠ” í´ë˜ìŠ¤ì— ëŒ€í•´ì„œëŠ” ì ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì»´íŒŒì¼ ì‹œì ì— AOP ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” AspectJì—ì„œ ì œê³µí•˜ëŠ” íŠ¹ë³„í•œ ì»´íŒŒì¼ëŸ¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ì›ë³¸ ë¡œì§ì— ë¶€ê°€ê¸°ëŠ¥ ë¡œì§ì´ ì¶”ê°€ë˜ëŠ” ê²ƒì„ Weaving ì´ë¼ê³  í•œë‹¤. 2. í´ë˜ìŠ¤ ë¡œë”© ì‹œì ì— AOP ì ìš© - class íŒŒì¼ ì¡°ì‘ ìë°” ë°”ì´íŠ¸ ì½”ë“œë¥¼ JVM ë‚´ ë©”ëª¨ë¦¬ ì˜ì—­ì— ì˜¬ë¦¬ê¸° ì „ì— ë¶€ê°€ê¸°ëŠ¥ ë¡œì§ì„ ì¶”ê°€í•œë‹¤. ë‘ë²ˆì§¸ëŠ” í´ë˜ìŠ¤ë¥¼ ë¡œë”© ì‹œ AOP ì½”ë“œë¥¼ ì ìš©í•˜ì—¬ class íŒŒì¼ ìƒì„±ì‹œ ì¡°ì‘ ë°©ì‹ ì…ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ ë¡œë”©ë˜ëŠ” í´ë˜ìŠ¤ì— ëŒ€í•´ì„œë„ AOPë¥¼ ì ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤í–‰ ì‹œê°„ì— ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•  í™•ë¥ ì´ ë‚®ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•˜ëŠ” ì‹œì ì—ì„œ AOP ì½”ë“œê°€ ì ìš©ë˜ê¸° ë•Œë¬¸ì—, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹œì‘ ì‹œê°„ì´ ëŠë ¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë˜ìŠ¤ ë¡œë”©ì‹œì ì— AOP ë¥¼ ì ìš©í•˜ëŠ” ê²ƒì„ ë¡œë“œ íƒ€ì„ ìœ„ë¹™ ì´ë¼ê³  í•œë‹¤. ìë°”ë¥¼ ì‹¤í–‰í•  ë•Œ íŠ¹ë³„í•œ ì˜µì…˜ì„ í†µí•´ í´ë˜ìŠ¤ ë¡œë” ì¡°ì‘ê¸°ë¥¼ ì§€ì •í•´ì•¼ í•œë‹¤. 3. ëŸ°íƒ€ì„ ì‹œì ì— AOP ì ìš© ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ì¤‘ì¼ ë•Œ ë¶€ê°€ê¸°ëŠ¥ ë¡œì§ì„ ì¶”ê°€í•œë‹¤. Spring AOPì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëŸ°íƒ€ì„ ì‹œì ì— AOPê°€ ì ìš©ë©ë‹ˆë‹¤. ì„¸ë²ˆì§¸ ë°©ì‹ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ëŠ” ì‹œì ì— AOP ì½”ë“œë¥¼ ì ìš©í•˜ëŠ” ëŸ°íƒ€ì„ ì‹œ ì ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤í–‰ ì¤‘ì—ë„ AOPë¥¼ ì ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ì»´íŒŒì¼ ì‹œì ì´ë‚˜ ë¡œë“œ ì‹œì ì— ë¹„í•´ ììœ ë„ê°€ ë†’ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ AOP ì½”ë“œë¥¼ ì ìš©í•˜ëŠ” ê³¼ì •ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring AOPì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëŸ°íƒ€ì„ ì‹œ AOP ê°€ ì ìš©ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ í•„ìš”ì— ë”°ë¼ ì»´íŒŒì¼ ì‹œì ì´ë‚˜ ë¡œë“œ ì‹œì ì—ì„œ AOPë¥¼ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤. í”„ë¡ì‹œ ë°©ì‹ì˜ AOP ëŠ” í”„ë¡ì‹œë¥¼ í†µí•´ì•¼ ë¶€ê°€ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ final, ìƒì„±ì ì™€ ê°™ì€ ê²ƒì—ì„œëŠ” AOP ê¸°ëŠ¥ì„ ì ìš©í•˜ê¸° ì–´ë ¤ìš´ ì œí•œì´ ìˆìŠµë‹ˆë‹¤. AOP ì ìš© ìœ„ì¹˜ AOP ì ìš© ê°€ëŠ¥ ìœ„ì¹˜ (JoinPoint) ìƒì„±ì, í•„ë“œ ê°’ ì ‘ê·¼, static ë©”ì„œë“œ ì ‘ê·¼, ë©”ì„œë“œ ì‹¤í–‰ AOP ë¥¼ ì ìš©í•  ìˆ˜ ìˆëŠ” ìœ„ì¹˜ë¥¼ JoinPoint ë¼ê³  í•œë‹¤. AspectJ ë¥¼ ì‚¬ìš©í•˜ë©´ ì»´íŒŒì¼ ì‹œì  ê³¼ í´ë˜ìŠ¤ ë¡œë”© ì‹œì  ì—ì„œ AOP ë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤. Spring AOP ëŠ” í”„ë¡ì‹œ ë°©ì‹ì„ ì‚¬ìš©í•´ AOP ë¥¼ ì ìš©í•˜ê¸° ë•Œë¬¸ì— ë©”ì„œë“œ ì‹¤í–‰ ì‹œì  ì—ë§Œ AOP ë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤. í”„ë¡ì‹œëŠ” ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”© ê°œëª…ìœ¼ë¡œ ì‘ë™í•œë‹¤. í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ëŠ” Spring AOP ì˜ JoinPoint ëŠ” ë©”ì„œë“œ ì‹¤í–‰ìœ¼ë¡œ ì œí•œëœë‹¤. ìŠ¤í”„ë§ ì»¨ì—í‹°ë„ˆì—ì„œ ê´€ë¦¬í•˜ëŠ” Bean ì—ë§Œ Spring AOP ë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"}],"tags":[]},{"title":"Git - Git ì´ˆê¸°í™”(Init)","slug":"git/git","date":"2021-12-02T14:16:32.000Z","updated":"2024-12-21T13:26:11.776Z","comments":true,"path":"2021/12/02/git/git/","link":"","permalink":"https://ckck803.github.io/2021/12/02/git/git/","excerpt":"hint: Using &#x27;master&#x27; as the name for the initial branch. This default branch namehint: is subject to change. To configure the initial branch name to use in allhint: of your new repositories, which will suppress this warning, call:hint:hint: git config --global init.defaultBranch &lt;name&gt;hint:hint: Names commonly chosen instead of &#x27;master&#x27; are &#x27;main&#x27;, &#x27;trunk&#x27; andhint: &#x27;development&#x27;. The just-created branch can be renamed via this command:hint:hint: git branch -m &lt;name&gt; hint: You have divergent branches and need to specify how to reconcile them.hint: You can do so by running one of the following commands sometime beforehint: your next pull:hint:hint: git config pull.rebase false # mergehint: git config pull.rebase true # rebasehint: git config pull.ff only # fast-forward onlyhint:hint: You can replace &quot;git config&quot; with &quot;git config --global&quot; to set a defaulthint: preference for all repositories. You can also pass --rebase, --no-rebase,hint: or --ff-only on the command line to override the configured default perhint: invocation.fatal: Need to specify how to reconcile divergent branches.","text":"hint: Using &#x27;master&#x27; as the name for the initial branch. This default branch namehint: is subject to change. To configure the initial branch name to use in allhint: of your new repositories, which will suppress this warning, call:hint:hint: git config --global init.defaultBranch &lt;name&gt;hint:hint: Names commonly chosen instead of &#x27;master&#x27; are &#x27;main&#x27;, &#x27;trunk&#x27; andhint: &#x27;development&#x27;. The just-created branch can be renamed via this command:hint:hint: git branch -m &lt;name&gt; hint: You have divergent branches and need to specify how to reconcile them.hint: You can do so by running one of the following commands sometime beforehint: your next pull:hint:hint: git config pull.rebase false # mergehint: git config pull.rebase true # rebasehint: git config pull.ff only # fast-forward onlyhint:hint: You can replace &quot;git config&quot; with &quot;git config --global&quot; to set a defaulthint: preference for all repositories. You can also pass --rebase, --no-rebase,hint: or --ff-only on the command line to override the configured default perhint: invocation.fatal: Need to specify how to reconcile divergent branches.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Git","slug":"Develop/Git","permalink":"https://ckck803.github.io/categories/Develop/Git/"}],"tags":[]},{"title":"JAVA - String","slug":"java/string","date":"2021-12-02T14:16:32.000Z","updated":"2024-11-28T13:59:31.842Z","comments":true,"path":"2021/12/02/java/string/","link":"","permalink":"https://ckck803.github.io/2021/12/02/java/string/","excerpt":"StringStringBuilderStringBuffer","text":"StringStringBuilderStringBuffer","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JAVA","slug":"Develop/JAVA","permalink":"https://ckck803.github.io/categories/Develop/JAVA/"}],"tags":[]},{"title":"JAVA - Garbage Collection(ê°€ë¹„ì§€ ì»¬ë ‰ì…˜)","slug":"computer-science/java/garbage-collection","date":"2021-12-02T14:16:32.000Z","updated":"2024-11-28T13:59:37.936Z","comments":true,"path":"2021/12/02/computer-science/java/garbage-collection/","link":"","permalink":"https://ckck803.github.io/2021/12/02/computer-science/java/garbage-collection/","excerpt":"ëª©ì°¨ Post not found: computer-science/java/gc-tunning JAVA - Garbage Collection(ê°€ë¹„ì§€ ì»¬ë ‰ì…˜) JAVA - JVM (ìë°” ê°€ìƒ ë¨¸ì‹ ) JAVA - Garbage Collection(ê°€ë¹„ì§€ ì»¬ë ‰ì…˜) ë™ì  í• ë‹¹ ë°›ì€ ë©”ëª¨ë¦¬ ì¤‘ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë§‰ëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ë²• memory leak ì„ ì—†ì•¨ ìˆ˜ ìˆë‹¤. GC Rootê°€ ë  ìˆ˜ ìˆëŠ” ëŒ€ìƒë“¤ Stack ì˜ì—­ì˜ ë°ì´í„° Static ë°ì´í„° JNIì— ì˜í•´ ìƒì„±ëœ ê°ì²´ë“¤ Mark And Sweep ì•Œê³ ë¦¬ì¦˜ ì°¸ì¡°ê°€ ìœ íš¨í•œ Objectë¥¼ Reachable ì°¸ì¡°ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ Objectë¥¼ Unreachable ì´ë¼ê³  ë¶€ë¥¸ë‹¤. Mark GC Rootë¡œë¶€í„° ëª¨ë“  ë³€ìˆ˜ë¥¼ ìŠ¤ìº”í•˜ë©´ì„œ ê°ê° ì–´ë–¤ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ”ì§€ ì°¾ì•„ì„œ ë§ˆí‚¹í•˜ëŠ” ê³¼ì • Mark ê³¼ì •ì—ì„œ Reachable í•œ ê°ì²´ì™€ Unreachable í•œ ê°ì²´ë¥¼ ìŠ¤ìº”í•œë‹¤ Sweep Unreachableí•œ ê°ì²´ë¥¼ Heap ì—ì„œ ì œê±°í•˜ëŠ” ê³¼ì • Compact Sweep í›„ ë¶„ì‚°ëœ ê°ì²´ë“¤ì„ ëª¨ì•„ ë©”ëª¨ë¦¬ ë‹¨í¸í™” ê°€ ì´ë¤„ì§€ëŠ” ê²ƒì„ ë§‰ì•„ì¤€ë‹¤.","text":"ëª©ì°¨ Post not found: computer-science/java/gc-tunning JAVA - Garbage Collection(ê°€ë¹„ì§€ ì»¬ë ‰ì…˜) JAVA - JVM (ìë°” ê°€ìƒ ë¨¸ì‹ ) JAVA - Garbage Collection(ê°€ë¹„ì§€ ì»¬ë ‰ì…˜) ë™ì  í• ë‹¹ ë°›ì€ ë©”ëª¨ë¦¬ ì¤‘ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë§‰ëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ë²• memory leak ì„ ì—†ì•¨ ìˆ˜ ìˆë‹¤. GC Rootê°€ ë  ìˆ˜ ìˆëŠ” ëŒ€ìƒë“¤ Stack ì˜ì—­ì˜ ë°ì´í„° Static ë°ì´í„° JNIì— ì˜í•´ ìƒì„±ëœ ê°ì²´ë“¤ Mark And Sweep ì•Œê³ ë¦¬ì¦˜ ì°¸ì¡°ê°€ ìœ íš¨í•œ Objectë¥¼ Reachable ì°¸ì¡°ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ Objectë¥¼ Unreachable ì´ë¼ê³  ë¶€ë¥¸ë‹¤. Mark GC Rootë¡œë¶€í„° ëª¨ë“  ë³€ìˆ˜ë¥¼ ìŠ¤ìº”í•˜ë©´ì„œ ê°ê° ì–´ë–¤ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ”ì§€ ì°¾ì•„ì„œ ë§ˆí‚¹í•˜ëŠ” ê³¼ì • Mark ê³¼ì •ì—ì„œ Reachable í•œ ê°ì²´ì™€ Unreachable í•œ ê°ì²´ë¥¼ ìŠ¤ìº”í•œë‹¤ Sweep Unreachableí•œ ê°ì²´ë¥¼ Heap ì—ì„œ ì œê±°í•˜ëŠ” ê³¼ì • Compact Sweep í›„ ë¶„ì‚°ëœ ê°ì²´ë“¤ì„ ëª¨ì•„ ë©”ëª¨ë¦¬ ë‹¨í¸í™” ê°€ ì´ë¤„ì§€ëŠ” ê²ƒì„ ë§‰ì•„ì¤€ë‹¤. Garbage Collection ì‘ë™ ë°©ì‹ Grabage Collection ì€ í¬ê²Œ New Generation ì—ì„œ ì¼ì–´ë‚˜ëŠ” Minor GC ì™€ Old Generation ì—ì„œ ì¼ì–´ë‚˜ëŠ” Major GC ê°€ ìˆë‹¤. Eden ì˜ì—­ì— ìƒˆë¡œìš´ ê°ì²´ ê°€ í• ë‹¹ëœë‹¤. Eden ì˜ì—­ì´ ê°€ë“ ì°¨ê²Œ ë˜ë©´ Gabage Collection ì´ ë°œìƒí•œë‹¤. (Minor GC) ì‚´ì•„ ìˆëŠ” ê°ì²´ëŠ” Survivor 0 ì˜ì—­ìœ¼ë¡œ ì´ë™í•œë‹¤. (Age ê°’ì´ ì¦ê°€í•œë‹¤.) Unreachable í•œ ê°ì²´ëŠ” ì‚¬ë¼ì§„ë‹¤. ë˜ ë‹¤ì‹œ Eden ì˜ì—­ì´ ê°€ë“ì°¨ê²Œë˜ë©´ Eden ì˜ì—­ê³¼ Survivor 0 ì˜ì—­ì„ ëŒ€ìƒìœ¼ë¡œ Gabage Collection ì´ ë°œìƒí•œë‹¤. ì‚´ì•„ ìˆëŠ” ê°ì²´ëŠ” Survivor 1 ì˜ì—­ìœ¼ë¡œ ì´ë™í•˜ê²Œ ëœë‹¤. ë‘ Survivor ê³µê°„ ì¤‘ í•˜ë‚˜ëŠ” í•­ìƒ ë¹„ì–´ ìˆì–´ì•¼ í•œë‹¤. í•œ ê°ì²´ê°€ ì–‘ìª½ Survivor ì˜ì—­ì— ì¡´ì¬í•´ì„œëŠ” ì•ˆëœë‹¤. íŠ¹ì • Age ê°’ì„ ë„˜ì–´ê°€ê²Œ ë˜ë©´ Old Generation ìœ¼ë¡œ ë„˜ì–´ê°€ê²Œ ëœë‹¤ (Promoted) Old Generation ì˜ì—­ì´ ê°€ë“ì°¨ê²Œ ë˜ë©´ Gabage Collection ì´ ë°œìƒí•œë‹¤ (Major GC) Gabage Collection ì¢…ë¥˜GC ëŠ” í¬ê²Œ Young Generation ì—ì„œ ë°œìƒí•˜ëŠ” Minor GC ì™€ Old Generation ì—ì„œ ë°œìƒí•˜ëŠ” Major GC ë‘ê°€ì§€ íƒ€ì…ìœ¼ë¡œ ë‚˜ë‰œë‹¤. Stop the world Gabage Collectionì´ ì¼ì–´ë‚˜ëŠ” ë™ì•ˆ JVM ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì´ ë©ˆì¶”ëŠ” ê²ƒ , GCë¥¼ ì‹¤í–‰í•˜ëŠ” Thread ì™¸ ëª¨ë“  ThreadëŠ” ì‘ì—…ì„ ì •ì§€í•œë‹¤. Serial GC CPU ì½”ì–´ê°€ í•˜ë‚˜ì¼ ê²½ìš° ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë°©ì‹ìœ¼ë¡œ GCë¥¼ ì‹¤í–‰í•˜ëŠ” Thread ê°€ í•˜ë‚˜ë‹¤. ìš´ì˜ì—ì„œ ì ˆëŒ€ ì‚¬ìš©í•˜ë©´ ì•ˆë˜ëŠ” GC Stop the world ì‹œê°„ì´ ë‹¤ë¥¸ GCì— ë¹„í•´ ê¸¸ë‹¤. Mark &amp; Sweep &amp; Compact ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš© Paralle GC ì—¬ëŸ¬ê°œì˜ Threadë¥¼ ì´ìš©í•´ GCë¥¼ ì²˜ë¦¬í•œë‹¤. Young ì˜ì—­ì˜ GCëŠ” ë©€í‹° ìŠ¤ë ˆë“œ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— Serial GC ì— ë¹„í•´ Stop The World ê°€ ì§§ë‹¤. Java 8ì˜ Default GC Concurrent Mark And Sweep(CMS) GC Stop the Wolrd ë¡œ Applicationì´ ë©ˆì¶”ëŠ” í˜„ìƒì„ ì¤„ì´ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ GCInitial Mark , Concurrent Mark , Remark , Concurrent Sweep ì˜ 4ê°€ì§€ ê³¼ì •ì´ ìˆë‹¤. Initial Mark GC Rootê°€ ì°¸ì¡°í•˜ëŠ” ê°ì²´ë§Œì„ ë§ˆí‚¹í•œë‹¤. Stop the World ê°€ ë°œìƒí•œë‹¤. Concurrent Mark GC ëŒ€ìƒì˜ ê°ì²´ê°€ ì°¸ì¡°í•˜ëŠ” ë‹¤ë¥¸ ê°ì²´ë“¤ì„ ì°¾ì•„ ë‹¤ë‹ˆë©´ì„œ ì¶”ê°€ì ì¸ GC ëŒ€ìƒì„ ë§ˆí‚¹í•œë‹¤. Remark Concurrent Mark ë‹¨ê³„ë¥¼ ê²€ì¦Œí•˜ëŠ” ê³¼ì • GC ëŒ€ìƒì´ ì¶”ê°€ì ìœ¼ë¡œ í™•ì¸ ëê±°ë‚˜ ì°¸ì¡°ê°€ ì œê±° ëëŠ”ì§€ ë“± í™•ì¸í•œë‹¤. Stop The World ê°€ ë°œìƒí•œë‹¤. Concurrent Sweep GC ëŒ€ìƒì„ ì‚­ì œí•˜ëŠ” ê³¼ì • G1 GC Heap ì˜ì—­ì„ ì—¬ëŸ¬ê°œì˜ Regionìœ¼ë¡œ ë‚˜ëˆ„ê³  ê° Region ì—ì„œ Young Gen ê³¼ Old Gen ì„ ìœ ë™ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” GC ì „ì²´ Heap ì„ íƒìƒ‰í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ Region ë‹¨ìœ„ë¡œ íƒìƒ‰í•´ Region ë‹¨ìœ„ë¡œ GCê°€ ë°œìƒí•œë‹¤. í˜„ì¬ GC ì¤‘ì—ì„œ Stop The World ê°€ ê°€ì¥ ì§§ë‹¤. JDK 11 ì—ì„œ G1 GC ë¥¼ defaultë¡œ ì±„íƒí–ˆë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Develop Lanuage","slug":"CS/Develop-Lanuage","permalink":"https://ckck803.github.io/categories/CS/Develop-Lanuage/"},{"name":"JAVA","slug":"CS/Develop-Lanuage/JAVA","permalink":"https://ckck803.github.io/categories/CS/Develop-Lanuage/JAVA/"}],"tags":[]},{"title":"JAVA - JWT","slug":"java/jwt/jwt-01","date":"2021-12-02T14:16:32.000Z","updated":"2024-11-28T13:59:32.097Z","comments":true,"path":"2021/12/02/java/jwt/jwt-01/","link":"","permalink":"https://ckck803.github.io/2021/12/02/java/jwt/jwt-01/","excerpt":"JAVA - JWT Jwts.builder(JwtBuilder) ë¥¼ ì´ìš©í•´ Token ì„ ìƒì„±í•˜ê³  Jwts.parserBuilder(JwtParserBuilder) ë¥¼ ì´ìš©í•´ ì „ë‹¬ ë°›ì€ Token ì„ Parsing í•œë‹¤. public class JwtMain &#123; public static void main(String args[]) &#123; String jwt = Jwts.builder() .setSubject(&quot;test&quot;) .compact(); Jwt&lt;Header, Claims&gt; headerClaimsJwt = Jwts.parserBuilder() .build() .parseClaimsJwt(jwt); // Token ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. System.out.println(&quot;token : &quot; + jwt); // JWT Header ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. System.out.println(&quot;JWT Header : &quot; + headerClaimsJwt.getHeader()); // JWT Body(Claims) ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. System.out.println(&quot;JWT Claims : &quot; + headerClaimsJwt.getBody()); &#125;&#125; Token ì— ì„œëª…ì„ ì§„í–‰í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— Signature ë¶€ë¶„ì´ ë¹ ì ¸ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. token : eyJhbGciOiJub25lIn0.eyJzdWIiOiJ0ZXN0In0.JWT Header : &#123;alg=none&#125;JWT Claims : &#123;sub=test&#125; JWT ì•”í˜¸í™” (JWS) JwtBuilder ê°ì²´ëŠ” signWith ë©”ì†Œë“œë¥¼ ì´ìš©í•´ Key ê°’ê³¼ ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ ì„ ì¸ìê°’ìœ¼ë¡œ ë„˜ê²¨ì¤˜ ì„œëª…í•œë‹¤. ì„œëª…ì˜ ìœ íš¨ì„±ì€ JwtParserBuilder ê°ì²´ê°€ setSigningKey ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì „ë‹¬ë°›ì€ Token ì´ ìœ íš¨í•œì§€ í™•ì¸í•œë‹¤. public class JwsMain &#123; public static String key = &quot;amF2YS1hcHBsaWNhdGlvbi1zZWN1cmUtc3R1ZHktand0LXNlY3JldGtleS1pcy1zaG91bGQtYmUtYmlnZ2VyLXRoYW4tNTEyYml0cw==&quot;; public static Long tokenValidityInMilliseconds = 100000L; public static void main(String args[]) &#123; Key secretKey = Keys.hmacShaKeyFor(key.getBytes()); String jwt = Jwts.builder() .setSubject(&quot;test&quot;) .signWith(secretKey, SignatureAlgorithm.HS512) // JWT ë¥¼ ì•”í˜¸í™” í•˜ê¸° ìœ„í•œ secret ê³¼ ì•Œê³ ë¦¬ì¦˜ì„ ë„£ì–´ì¤€ë‹¤. .compact(); Jws&lt;Claims&gt; claimsJws = Jwts.parserBuilder() .setSigningKey(secretKey) .build() .parseClaimsJws(jwt); Header header = claimsJws.getHeader(); Claims body = claimsJws.getBody(); System.out.println(&quot;token : &quot; + jwt); System.out.println(&quot;JWT Header : &quot; + header); System.out.println(&quot;JWT Claims : &quot; + body); &#125;&#125;","text":"JAVA - JWT Jwts.builder(JwtBuilder) ë¥¼ ì´ìš©í•´ Token ì„ ìƒì„±í•˜ê³  Jwts.parserBuilder(JwtParserBuilder) ë¥¼ ì´ìš©í•´ ì „ë‹¬ ë°›ì€ Token ì„ Parsing í•œë‹¤. public class JwtMain &#123; public static void main(String args[]) &#123; String jwt = Jwts.builder() .setSubject(&quot;test&quot;) .compact(); Jwt&lt;Header, Claims&gt; headerClaimsJwt = Jwts.parserBuilder() .build() .parseClaimsJwt(jwt); // Token ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. System.out.println(&quot;token : &quot; + jwt); // JWT Header ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. System.out.println(&quot;JWT Header : &quot; + headerClaimsJwt.getHeader()); // JWT Body(Claims) ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. System.out.println(&quot;JWT Claims : &quot; + headerClaimsJwt.getBody()); &#125;&#125; Token ì— ì„œëª…ì„ ì§„í–‰í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— Signature ë¶€ë¶„ì´ ë¹ ì ¸ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. token : eyJhbGciOiJub25lIn0.eyJzdWIiOiJ0ZXN0In0.JWT Header : &#123;alg=none&#125;JWT Claims : &#123;sub=test&#125; JWT ì•”í˜¸í™” (JWS) JwtBuilder ê°ì²´ëŠ” signWith ë©”ì†Œë“œë¥¼ ì´ìš©í•´ Key ê°’ê³¼ ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ ì„ ì¸ìê°’ìœ¼ë¡œ ë„˜ê²¨ì¤˜ ì„œëª…í•œë‹¤. ì„œëª…ì˜ ìœ íš¨ì„±ì€ JwtParserBuilder ê°ì²´ê°€ setSigningKey ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì „ë‹¬ë°›ì€ Token ì´ ìœ íš¨í•œì§€ í™•ì¸í•œë‹¤. public class JwsMain &#123; public static String key = &quot;amF2YS1hcHBsaWNhdGlvbi1zZWN1cmUtc3R1ZHktand0LXNlY3JldGtleS1pcy1zaG91bGQtYmUtYmlnZ2VyLXRoYW4tNTEyYml0cw==&quot;; public static Long tokenValidityInMilliseconds = 100000L; public static void main(String args[]) &#123; Key secretKey = Keys.hmacShaKeyFor(key.getBytes()); String jwt = Jwts.builder() .setSubject(&quot;test&quot;) .signWith(secretKey, SignatureAlgorithm.HS512) // JWT ë¥¼ ì•”í˜¸í™” í•˜ê¸° ìœ„í•œ secret ê³¼ ì•Œê³ ë¦¬ì¦˜ì„ ë„£ì–´ì¤€ë‹¤. .compact(); Jws&lt;Claims&gt; claimsJws = Jwts.parserBuilder() .setSigningKey(secretKey) .build() .parseClaimsJws(jwt); Header header = claimsJws.getHeader(); Claims body = claimsJws.getBody(); System.out.println(&quot;token : &quot; + jwt); System.out.println(&quot;JWT Header : &quot; + header); System.out.println(&quot;JWT Claims : &quot; + body); &#125;&#125; Token ì— ì„œëª…ì„ í–ˆê¸° ë•Œë¬¸ì— Signature ë¶€ë¶„ì´ ì¶”ê°€ ë¼ ìˆë‹¤. Json Web token = eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJEb25nd29vIiwiQXV0aCI6IllhbmciLCJleHAiOjE2Mzg1MjU5NTV9.2EQQCgVcXMIjfHMjl14HpCg9pT6_r5nM7KKOsmSXr7I6IS3I20XpDSXvuVGMU4FQrsXsszYmj8vWAly3ovSb2gJSON : &#123;sub=Dongwoo, Auth=Yang&#125; ì„œëª… í‚¤(Secret) ì™€ ê´€ë ¨ëœ ì˜ˆì™¸ ì„œëª…ì— ë“¤ì–´ê°€ëŠ” secret ê°’ì„ ì§§ê²Œ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤. Exception in thread &quot;main&quot; io.jsonwebtoken.security.WeakKeyException: The specified key byte array is 152 bits which is not secure enough for any JWT HMAC-SHA algorithm. The JWT JWA Specification (RFC 7518, Section 3.2) states that keys used with HMAC-SHA algorithms MUST have a size &gt;= 256 bits (the key size must be greater than or equal to the hash output size). JWT ìœ íš¨ ì‹œê°„ ì„¤ì • JwtBuilder ê°ì²´ê°€ setExpiration ë©”ì†Œë“œë¥¼ ì´ìš©í•´ Token ìœ íš¨ì‹œê°„ì„ ì„¤ì •í•œë‹¤. public class JwsTimeMain &#123; public static String key = &quot;amF2YS1hcHBsaWNhdGlvbi1zZWN1cmUtc3R1ZHktand0LXNlY3JldGtleS1pcy1zaG91bGQtYmUtYmlnZ2VyLXRoYW4tNTEyYml0cw==&quot;; public static String AUTHENTICATION = &quot;Auth&quot;; public static Long tokenValidityInMilliseconds = 100000L; public static void main(String args[]) throws ParseException &#123; Key secretKey = Keys.hmacShaKeyFor(key.getBytes()); Date date = new Date(System.currentTimeMillis()+ tokenValidityInMilliseconds); String jwt = Jwts.builder() .setSubject(&quot;test&quot;) .claim(AUTHENTICATION, &quot;jwt&quot;) .signWith(secretKey, SignatureAlgorithm.HS512) .setExpiration(date) .compact(); Jws&lt;Claims&gt; claimsJws = Jwts.parserBuilder() .setSigningKey(secretKey) .build() .parseClaimsJws(jwt); Header header = claimsJws.getHeader(); Claims body = claimsJws.getBody(); System.out.println(&quot;token : &quot; + jwt); System.out.println(&quot;JWT Header : &quot; + header); System.out.println(&quot;JWT Claims : &quot; + body); System.out.println(&quot;expiration time : &quot; + body.get(&quot;exp&quot;, Date.class)); System.out.println(&quot;expiration time : &quot; + body.getExpiration()); System.out.println(&quot;sub : &quot; + body.get(&quot;sub&quot;)); System.out.println(&quot;Auth : &quot; + body.get(&quot;Auth&quot;)); &#125;&#125; ì „ë‹¬ ë°›ì€ í† í°ì€ JwtParser ê°ì²´ë¥¼ ì´ìš©í•´ Parsing í•˜ê²Œ ë  ë•Œ ìœ íš¨ì‹œê°„ì„ ë„˜ê¸°ë©´ ExpiredJwtException ì˜ˆì™¸ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. Exception in thread &quot;main&quot; io.jsonwebtoken.ExpiredJwtException: JWT expired at 2021-12-04T04:41:07Z. Current time: 2021-12-04T04:41:07Z, a difference of 500 milliseconds. Allowed clock skew: 0 milliseconds. JWT ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ ì˜ˆì™¸ ì„¤ëª… SignatureException JWT ë¥¼ ì¸ì¦í•˜ê¸° ìœ„í•œ ê²€ì¦ secret ì´ ì˜ ëª» ëì„ ê²½ìš° ë°œìƒ ExpiredJwtException í† í°ì˜ ìœ íš¨ì‹œê°„ì´ ë§Œë£Œí–ˆì„ ë•Œ ë°œìƒ UnsupportedJwtException ìˆ˜ì‹ í•œ JWT ê°€ Applicationì—ì„œ ì›í•˜ëŠ” í˜•ì‹ê³¼ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë°œìƒ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì´ìš©í•´ í™•ì¸í•˜ê¸°ì„œëª… ì•” ë³µí˜¸í™” í‚¤ê°€ ì„œë¡œ ë‹¤ë¥¸ ê²½ìš° - SignatureException@Testpublic void create_token_jws_SignatureException() throws InterruptedException &#123; Key key = Keys.hmacShaKeyFor(secrete.getBytes(StandardCharsets.UTF_8)); Key key2 = Keys.hmacShaKeyFor((secrete+&quot;abcd&quot;).getBytes(StandardCharsets.UTF_8)); String token = Jwts.builder() .setSubject(&quot;test&quot;) .signWith(key, SignatureAlgorithm.HS512) .compact(); assertThrows(SignatureException.class, () -&gt; &#123; Jwts.parserBuilder() .setSigningKey(key2) .build() .parseClaimsJws(token); &#125;);&#125; í† í° ì‹œê°„ì´ ë§Œë£Œëœ ê²½ìš° - ExpiredJwtExceptionsetExpiration ë©”ì†Œë“œë¥¼ ì´ìš©í•œ Tokne ìœ íš¨ì‹œê°„ì´ ì§€ë‚˜ê²Œ ë˜ë©´ ExpiredJwtException ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤. Exception in thread &quot;main&quot; io.jsonwebtoken.ExpiredJwtException: JWT expired at 2021-12-03T04:49:50Z. Current time: 2021-12-03T04:49:51Z, a difference of 1163 milliseconds. Allowed clock skew: 0 milliseconds. at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:448) at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:550) at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:610) at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173) at JwtMain.main(JwtMain.java:31) @Testpublic void create_token_jws_ExpiredJwtException() throws InterruptedException &#123; Key key = Keys.hmacShaKeyFor(secrete.getBytes(StandardCharsets.UTF_8)); Long tokenValidityInMilliseconds = 100L; Date date = new Date(System.currentTimeMillis() + tokenValidityInMilliseconds); String token = Jwts.builder() .setSubject(&quot;test&quot;) .setExpiration(date) .signWith(key, SignatureAlgorithm.HS512) .compact(); // token Time Outì„ ì¼ìœ¼í‚¤ê¸° ìœ„í•œ Sleep Thread.sleep(1000L); assertThrows(ExpiredJwtException.class, () -&gt; &#123; Jwts.parserBuilder() .setSigningKey(key) .build() .parseClaimsJws(token); &#125;);&#125; ë‹¤ë¥¸ ìœ í˜•ì˜ Tokenì„ ì „ë‹¬ ë°›ì€ ê²½ìš° UnsupportedJwtException ì „ë‹¬ ë°›ì€ Token ê³¼ Parsing ë°©ë²•ì´ ì¼ì¹˜í•˜ì§€ ì•Šì„ ê²½ìš° UnsupportedJwtException ì˜ˆì™¸ê°€ ë°œìƒ í•œë‹¤. ì„œëª…ëœ JWT(JWS) ë¥¼ parseClaimsJwt ë©”ì†Œë“œë¥¼ ì´ìš©í•´ Parsing í•  ê²½ìš° ë°œìƒí•œë‹¤. @Testpublic void create_token_jws_UnsupportedJwtException()&#123; Key key = Keys.hmacShaKeyFor(secrete.getBytes(StandardCharsets.UTF_8)); String token = Jwts.builder() .setSubject(&quot;test&quot;) .signWith(key, SignatureAlgorithm.HS512) .compact(); // JWS ë¥¼ parseClaimsJwt ë©”ì†Œë“œë¥¼ ì´ìš©í•´ Parsing í•  ê²½ìš° UnsupportedJwtException ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤. assertThrows(UnsupportedJwtException.class, () -&gt; &#123; Jwts.parserBuilder() .setSigningKey(key) .build() .parseClaimsJwt(token); &#125;);&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JAVA","slug":"Develop/JAVA","permalink":"https://ckck803.github.io/categories/Develop/JAVA/"}],"tags":[]},{"title":"JAVA - JVM (ìë°” ê°€ìƒ ë¨¸ì‹ )","slug":"computer-science/java/jvm","date":"2021-12-02T12:16:32.000Z","updated":"2024-11-28T13:59:38.007Z","comments":true,"path":"2021/12/02/computer-science/java/jvm/","link":"","permalink":"https://ckck803.github.io/2021/12/02/computer-science/java/jvm/","excerpt":"ëª©ì°¨ Post not found: computer-science/java/gc-tunning JAVA - Garbage Collection(ê°€ë¹„ì§€ ì»¬ë ‰ì…˜) JAVA - JVM (ìë°” ê°€ìƒ ë¨¸ì‹ ) JVM (ìë°” ê°€ìƒ ë¨¸ì‹ ) ìë°” ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ìƒì„±ëœ ìë°” ë°”ì´íŠ¸ ì½”ë“œ(.class) ë¥¼ OSì— ë§ëŠ” ê¸°ê³„ì–´ë¡œ ë³€í™˜í•´ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.í´ë˜ìŠ¤ íŒŒì¼ë¡œ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë©´ ì–´ë–¤ ì–¸ì–´ë¼ë„ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤. (ex. kotlin) ìë°” ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ìƒì„±ëœ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” í‘œì¤€ì´ì êµ¬í˜„ì²´ë‹¤. JVMì€ ê° OS(ìš´ì˜ì²´ì œ) ì— ë§ê²Œ ì„¤ê³„ê°€ ë¼ ìˆë‹¤. ìë°” ë°”ì´íŠ¸ ì½”ë“œë§Œ ìˆìœ¼ë©´ JVMì„ ì´ìš©í•´ ì–´ëŠ ìš´ì˜ì²´ì œì—ì„œë‚˜ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤. Stack ê¸°ë°˜ ê°€ìƒ ë¨¸ì‹  JVM êµ¬ì¡° Class Loader, Memory, ì‹¤í–‰ ì—”ì§„(Execution Engine) ì´ ì„¸ê°€ì§€ë¡œ êµ¬ì„± ë¼ ìˆë‹¤.","text":"ëª©ì°¨ Post not found: computer-science/java/gc-tunning JAVA - Garbage Collection(ê°€ë¹„ì§€ ì»¬ë ‰ì…˜) JAVA - JVM (ìë°” ê°€ìƒ ë¨¸ì‹ ) JVM (ìë°” ê°€ìƒ ë¨¸ì‹ ) ìë°” ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ìƒì„±ëœ ìë°” ë°”ì´íŠ¸ ì½”ë“œ(.class) ë¥¼ OSì— ë§ëŠ” ê¸°ê³„ì–´ë¡œ ë³€í™˜í•´ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.í´ë˜ìŠ¤ íŒŒì¼ë¡œ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë©´ ì–´ë–¤ ì–¸ì–´ë¼ë„ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤. (ex. kotlin) ìë°” ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ìƒì„±ëœ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” í‘œì¤€ì´ì êµ¬í˜„ì²´ë‹¤. JVMì€ ê° OS(ìš´ì˜ì²´ì œ) ì— ë§ê²Œ ì„¤ê³„ê°€ ë¼ ìˆë‹¤. ìë°” ë°”ì´íŠ¸ ì½”ë“œë§Œ ìˆìœ¼ë©´ JVMì„ ì´ìš©í•´ ì–´ëŠ ìš´ì˜ì²´ì œì—ì„œë‚˜ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤. Stack ê¸°ë°˜ ê°€ìƒ ë¨¸ì‹  JVM êµ¬ì¡° Class Loader, Memory, ì‹¤í–‰ ì—”ì§„(Execution Engine) ì´ ì„¸ê°€ì§€ë¡œ êµ¬ì„± ë¼ ìˆë‹¤. Class Loader í´ë˜ìŠ¤ íŒŒì¼ì—ì„œ ë°”ì´íŠ¸ ì½”ë“œ ë¥¼ ì½ê³  ë©”ëª¨ë¦¬ ì— ì €ì¥í•œë‹¤.ë¡œë”©, ë§í¬, ì´ˆê¸°í™” ì„¸ê°€ì§€ ê³¼ì •ì„ ê±°ì¹œë‹¤. ë¡œë”© í´ë˜ìŠ¤ë¡œë”ê°€ í´ë˜ìŠ¤ íŒŒì¼ì„ ì½ê³  Binary ë°ì´í„° ë¥¼ ìƒì„±í•œ ë’¤ Method ì˜ì—­ ì— ì €ì¥í•œë‹¤. ë¡œë”©ì´ ëë‚˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ íƒ€ì…ì˜ ê°ì²´ ë¥¼ ìƒì„±í•œ í›„ Heap ì˜ì—­ì— ì €ì¥í•œë‹¤. ë§í¬ verify : í´ë˜ìŠ¤ íŒŒì¼ ì´ ìœ íš¨í•œì§€ í™•ì¸í•œë‹¤. ë°”ì´íŠ¸ ì½”ë“œê°€ ì¡°ì‘ëì„ ê²½ìš° ì—ëŸ¬ë¥¼ ë°œìƒ Prepare : ë©”ëª¨ë¦¬ ì¤€ë¹„ê³¼ì • Resolve : ê°ì²´ë“¤ì„ ì‹¤ì œ ë ˆí¼ëŸ°ìŠ¤ì— ì—°ê²°í•œë‹¤. ì´ˆê¸°í™” static ê°’ì„ ì´ˆê¸°í™” í•˜ê³  ë³€ìˆ˜ë¥¼ í• ë‹¹í•˜ëŠ” ê³¼ì • í´ë˜ìŠ¤ ë¡œë” ì¢…ë¥˜ ë¶€íŠ¸ ìŠ¤íŠ¸ë© í´ë˜ìŠ¤ ë¡œë” JAVA_HOME&#x2F;jre&#x2F;lib ë””ë ‰í„°ë¦¬ì— ìœ„ì¹˜í•œ í•µì‹¬ ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ë¶ˆëŸ¬ë“¤ì¸ë‹¤ í™•ì¥ í´ë˜ìŠ¤ ë¡œë” JAVA_HOME&#x2F;jre&#x2F;lib&#x2F;ext ë˜ëŠ” java.ext.dirs ì‹œìŠ¤í…œ ë³€ìˆ˜ì— ìœ„ì¹˜í•´ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì½ì–´ë“¤ì¸ë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ í´ë˜ìŠ¤ ë¡œë” ì• í”Œë¦¬ì¼€ì´ì…˜ í´ë˜ìŠ¤íŒ¨ìŠ¤(ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰í•  ë•Œ ì£¼ëŠ” -classpath ì˜µì…˜ ë˜ëŠ” java.class.path í™˜ê²½ ë³€ìˆ˜ì˜ ê°’ì— í•´ë‹¹í•˜ëŠ” ìœ„ì¹˜)ì—ì„œ í´ë˜ìŠ¤ë¥¼ ì½ëŠ”ë‹¤. ë©”ëª¨ë¦¬ ìŠ¤íƒ ì˜ì—­ ê° Threadë§ˆë‹¤ ìŠ¤íƒ ì˜ì—­ì´ ì¡´ì¬í•œë‹¤. í”„ë¡œê·¸ë¨ ì‹¤í–‰ê³¼ì •ì—ì„œ ì¼ì‹œì ìœ¼ë¡œ í• ë‹¹ë°›ê³  ì†Œë©¸í•˜ëŠ” ì˜ì—­ ë©”ì„œë“œ í˜¸ì¶œì‹œ Stack Frameì´ ìƒì„±ë˜ë©° ë©”ì„œë“œ ì •ë³´, ì§€ì—­ë³€ìˆ˜ë“¤ì„ ì €ì¥í•œë‹¤. ë©”ì„œë“œê°€ ì¢…ë£Œë˜ë©´ ì‚­ì œëœë‹¤. PC(Program Counter) ì“°ë ˆë“œ ë§ˆë‹¤ ë‹¤ìŒ ì‹¤í–‰í•´ì•¼ í•  ëª…ë ¹ì–´ ì •ë³´ê°€ ì €ì¥ ëœë‹¤. Native method stack ë°”ì´íŠ¸ ì½”ë“œê°€ ì•„ë‹Œ ê¸°ê³„ì–´ë¡œ ì‘ì„±ëœ í”„ë¡œê·¸ë¨ì´ ì €ì¥ë˜ëŠ” ì˜ì—­ í™ ì˜ì—­ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ ê°ì²´(Object)ê°€ ì €ì¥ë˜ëŠ” ì˜ì—­ JVMì— í•˜ë‚˜ ë°–ì— ì—†ëŠ” ê³µìœ  ìì› ì´ë‹¤. ë©”ì†Œë“œ ì˜ì—­ í´ë˜ìŠ¤ ìˆ˜ì¤€ì˜ ì •ë³´ (í´ë˜ìŠ¤ ì´ë¦„, ë¶€ëª¨ í´ë˜ìŠ¤ ì´ë¦„, ë©”ì†Œë“œ, ë³€ìˆ˜ë“±)ê°€ ì €ì¥ ë˜ê³ , ê³µìœ ë˜ëŠ” ì˜ì—­ì´ë‹¤. ëª¨ë“  JVM ìŠ¤ë ˆë“œì—ì„œ ê³µìœ í•˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ ì‹¤í–‰ì—”ì§„ ì¸í„°í”„ë¦¬í„° ë°”ì´íŠ¸ ì½”ë“œë¥¼ í•œì¤„ í•œì¤„ ì‹¤í–‰í•œë‹¤. JIT(Just In Time) ì»´íŒŒì¼ëŸ¬ ì¸í„°í”„ë¦¬í„° ë°©ì‹ì˜ ë‹¨ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ë„ì…ëœ ì»´íŒŒì¼ëŸ¬ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ë„¤ì´í‹°ë¸Œ ì½”ë“œë¡œ ì»´íŒŒì¼ í•´ì¤€ë‹¤. ì¼ì • ìˆ˜ì¤€ ì´ìƒìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œê°€ ì¡´ì¬í•  ë•Œ í•´ë‹¹ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì»´íŒŒì¼ í•œë‹¤.(Caching) ì»´íŒŒì¼ í•œ ê²°ê³¼ë¬¼ì€ JVM ë‚´ CodeCache ì— ì €ì¥ ëœë‹¤. GC(Gabage Collection) ì°¸ì¡°ë˜ì§€ ì•ŠëŠ” ê°ì²´ë¥¼ ì •ë¦¬í•œë‹¤. JVM Default Heap Size í™•ì¸java -XX:+PrintFlagsFinal -version 2&gt;&amp;1 | grep -i -E &#x27;heapsize|MetaspaceSize|version&#x27;","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Develop Lanuage","slug":"CS/Develop-Lanuage","permalink":"https://ckck803.github.io/categories/CS/Develop-Lanuage/"},{"name":"JAVA","slug":"CS/Develop-Lanuage/JAVA","permalink":"https://ckck803.github.io/categories/CS/Develop-Lanuage/JAVA/"}],"tags":[]},{"title":"Spring AOP - Aspect","slug":"spring/spring-aop/aspect/aspect-01","date":"2021-12-02T09:31:07.000Z","updated":"2024-02-26T15:22:05.760Z","comments":true,"path":"2021/12/02/spring/spring-aop/aspect/aspect-01/","link":"","permalink":"https://ckck803.github.io/2021/12/02/spring/spring-aop/aspect/aspect-01/","excerpt":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring AOP - Aspect ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. Aspect ë¶€ê°€ ê¸°ëŠ¥ ê³¼ ë¶€ê°€ ê¸°ëŠ¥ ì„ ì–´ë””ì— ì ìš©í• ì§€ ì ìš©í• ì§€ë¥¼ ì •ì˜ Aspect ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ëª¨ë“ˆí™”í•˜ê³ , ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ëª¨ë“ˆí™” ê¸°ëŠ¥ì…ë‹ˆë‹¤. Aspect ë¥¼ ì‚¬ìš©í•œ í”„ë¡œê·¸ë˜ë°ì„ ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë° AOP (Aspect-Oriented Programming) ì´ë¼ í•©ë‹ˆë‹¤. AOP ë¥¼ ì ìš©í•¨ìœ¼ë¡œì¨ í•µì‹¬ ë¡œì§ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­(cross-cutting concern) ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Springì—ì„œëŠ” Aspectë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ @Aspect ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©°, Aspectë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ @Before, @After, @Around ë“±ì˜ Advice ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ Adviceë¥¼ êµ¬í˜„í•˜ê³ , @Pointcut ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ Pointcutì„ ì •ì˜í•©ë‹ˆë‹¤. Aspectë¥¼ êµ¬í˜„í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì— ê±¸ì³ ê³µí†µ ê¸°ëŠ¥ì„ ëª¨ë“ˆí™”í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¡œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ ì§€ ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ Spring AOP - Advice ì¢…ë¥˜ Spring AOP - íŠ¸ëœì­ì…˜ ìˆœì„œ Spring AOP - Pointcut ì°¸ì¡° Spring AOP - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ Spring AOP - Pointcut ë¶„ë¦¬ Spring AOP - @Aspect Spring AOP - ìš©ì–´ ì •ë¦¬ Spring AOP - ì ìš© ë°©ì‹ Spring AOP - Aspect ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. Aspect ë¶€ê°€ ê¸°ëŠ¥ ê³¼ ë¶€ê°€ ê¸°ëŠ¥ ì„ ì–´ë””ì— ì ìš©í• ì§€ ì ìš©í• ì§€ë¥¼ ì •ì˜ Aspect ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ëª¨ë“ˆí™”í•˜ê³ , ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ëª¨ë“ˆí™” ê¸°ëŠ¥ì…ë‹ˆë‹¤. Aspect ë¥¼ ì‚¬ìš©í•œ í”„ë¡œê·¸ë˜ë°ì„ ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë° AOP (Aspect-Oriented Programming) ì´ë¼ í•©ë‹ˆë‹¤. AOP ë¥¼ ì ìš©í•¨ìœ¼ë¡œì¨ í•µì‹¬ ë¡œì§ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ íš¡ë‹¨ ê´€ì‹¬ ì‚¬í•­(cross-cutting concern) ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Springì—ì„œëŠ” Aspectë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ @Aspect ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©°, Aspectë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ @Before, @After, @Around ë“±ì˜ Advice ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ Adviceë¥¼ êµ¬í˜„í•˜ê³ , @Pointcut ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ Pointcutì„ ì •ì˜í•©ë‹ˆë‹¤. Aspectë¥¼ êµ¬í˜„í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì— ê±¸ì³ ê³µí†µ ê¸°ëŠ¥ì„ ëª¨ë“ˆí™”í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¡œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ ì§€ ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"AspectJ","slug":"Spring/Spring-AOP/AspectJ","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/AspectJ/"}],"tags":[]},{"title":"BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš©","slug":"spring/spring-aop/bean-post-processor/bean-post-processor-04","date":"2021-11-29T13:31:07.000Z","updated":"2024-02-26T15:22:35.755Z","comments":true,"path":"2021/11/29/spring/spring-aop/bean-post-processor/bean-post-processor-04/","link":"","permalink":"https://ckck803.github.io/2021/11/29/spring/spring-aop/bean-post-processor/bean-post-processor-04/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor - AutoProxyCreator BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ê°œì˜ Advisor ì ìš©ë¹ˆ í›„ì²˜ë¦¬ê¸°ì—ì„œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±ì‹œ ì—¬ëŸ¬ê°œì˜ í¬ì¸íŠ¸ì»·ì— í•´ë‹¹ë˜ëŠ” ê°ì²´ê°€ ìˆìŠµë‹ˆë‹¤. ê°ì²´ê°€ ì—¬ëŸ¬ê°œì˜ í¬ì¸íŠ¸ ì»·ì— í•´ë‹¹ë˜ë”ë¼ë„ í”„ë¡ì‹œ ê°ì²´ëŠ” í•œê°œë§Œ ìƒì„±ë©ë‹ˆë‹¤. Advisor1 ì˜ í¬ì¸íŠ¸ ì»·ë§Œ ë§Œì¡± í”„ë¡ì‹œ ê°ì²´ 1ê°œ ìƒì„±, advisor1 ë§Œ í¬í•¨ Advisor1, Advisor2 ì˜ í¬ì¸íŠ¸ ì»· ëª¨ë‘ ë§Œì¡± í”„ë¡ì‹œ ê°ì²´ 1ê°œ ìƒì„±, advisor1, advisor2 ëª¨ë‘ í¬í•¨ Advisor1, Advisor2 ì˜ í¬ì¸íŠ¸ ì»· ëª¨ë‘ ë§Œì¡±í•˜ì§€ ì•ŠìŒ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•ŠìŒ í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisorí•˜ë‚˜ì˜ í”„ë¡ì‹œ ê°ì²´ì— ì—¬ëŸ¬ê°œì˜ Advisor ë¥¼ í¬í•¨í•˜ëŠ” í˜•íƒœë¡œ í”„ë¡ì‹œ ê°ì²´ê°€ ìƒì„±ë©ë‹ˆë‹¤.","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor - AutoProxyCreator BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ê°œì˜ Advisor ì ìš©ë¹ˆ í›„ì²˜ë¦¬ê¸°ì—ì„œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±ì‹œ ì—¬ëŸ¬ê°œì˜ í¬ì¸íŠ¸ì»·ì— í•´ë‹¹ë˜ëŠ” ê°ì²´ê°€ ìˆìŠµë‹ˆë‹¤. ê°ì²´ê°€ ì—¬ëŸ¬ê°œì˜ í¬ì¸íŠ¸ ì»·ì— í•´ë‹¹ë˜ë”ë¼ë„ í”„ë¡ì‹œ ê°ì²´ëŠ” í•œê°œë§Œ ìƒì„±ë©ë‹ˆë‹¤. Advisor1 ì˜ í¬ì¸íŠ¸ ì»·ë§Œ ë§Œì¡± í”„ë¡ì‹œ ê°ì²´ 1ê°œ ìƒì„±, advisor1 ë§Œ í¬í•¨ Advisor1, Advisor2 ì˜ í¬ì¸íŠ¸ ì»· ëª¨ë‘ ë§Œì¡± í”„ë¡ì‹œ ê°ì²´ 1ê°œ ìƒì„±, advisor1, advisor2 ëª¨ë‘ í¬í•¨ Advisor1, Advisor2 ì˜ í¬ì¸íŠ¸ ì»· ëª¨ë‘ ë§Œì¡±í•˜ì§€ ì•ŠìŒ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•ŠìŒ í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisorí•˜ë‚˜ì˜ í”„ë¡ì‹œ ê°ì²´ì— ì—¬ëŸ¬ê°œì˜ Advisor ë¥¼ í¬í•¨í•˜ëŠ” í˜•íƒœë¡œ í”„ë¡ì‹œ ê°ì²´ê°€ ìƒì„±ë©ë‹ˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Bean Post Processor","slug":"Spring/Spring-AOP/Bean-Post-Processor","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Bean-Post-Processor/"}],"tags":[]},{"title":"BeanPostProcessor - AutoProxyCreator","slug":"spring/spring-aop/bean-post-processor/bean-post-processor-03","date":"2021-11-29T12:31:07.000Z","updated":"2024-02-26T15:22:30.858Z","comments":true,"path":"2021/11/29/spring/spring-aop/bean-post-processor/bean-post-processor-03/","link":"","permalink":"https://ckck803.github.io/2021/11/29/spring/spring-aop/bean-post-processor/bean-post-processor-03/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor - AutoProxyCreator BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€implementation &#x27;org.springframework.boot:spring-boot-starter-aop&#x27; //ì¶”ê°€ ìë™ í”„ë¡ì‹œ ìƒì„±ê¸° - AutoProxyCreator ìŠ¤í”„ë§ì—ì„œ AnnotationAwareAspectJAutoProxyCreator ë¼ëŠ” ë¹ˆ í›„ì²˜ë¦¬ê¸°ê°€ ë“±ë¡ë©ë‹ˆë‹¤. AnnotationAwareAspectJAutoProxyCreator ëŠ” ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ Advisor ë¥¼ ìë™ìœ¼ë¡œ ì°¾ì•„ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤. ë˜í•œ, @AspectJ ì™€ ê´€ë ¨ëœ AOP ê¸°ëŠ¥ë„ ìë™ìœ¼ë¡œ ì°¾ì•„ì„œ ì²˜ë¦¬í•´ì¤ë‹ˆë‹¤. Bean ìœ¼ë¡œ ë“±ë¡í•˜ê¸° ìœ„í•œ ê°ì²´ë¥¼ ìƒì„± í›„ ë¹ˆ í›„ì²˜ë¦¬ê¸°ì— ì „ë‹¬í•©ë‹ˆë‹¤. ë¹ˆ í›„ì²˜ë¦¬ê¸° ì¤‘ ìë™ í”„ë¡ì‹œ ìƒì„± ë¹ˆ í›„ì²˜ë¦¬ê¸°ì—ì„œ ëª¨ë“  Advisor ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. Advisor ì— í¬í•¨ëœ Pointcut ì„ ì‚¬ìš©í•´ í”„ë¡ì‹œë¥¼ ì ìš©í•  ëŒ€ìƒì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì´ë•Œ ê°ì²´ì˜ íŒ¨í‚¤ì§€ì •ë³´, í´ë˜ìŠ¤ ì •ë³´ ì™€ í•´ë‹¹ ê°ì²´ë‚´ ëª¨ë“  ë©”ì†Œë“œë¥¼ í•˜ë‚˜í•˜ë‚˜ì”© ë§¤ì¹­í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor - AutoProxyCreator BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€implementation &#x27;org.springframework.boot:spring-boot-starter-aop&#x27; //ì¶”ê°€ ìë™ í”„ë¡ì‹œ ìƒì„±ê¸° - AutoProxyCreator ìŠ¤í”„ë§ì—ì„œ AnnotationAwareAspectJAutoProxyCreator ë¼ëŠ” ë¹ˆ í›„ì²˜ë¦¬ê¸°ê°€ ë“±ë¡ë©ë‹ˆë‹¤. AnnotationAwareAspectJAutoProxyCreator ëŠ” ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ Advisor ë¥¼ ìë™ìœ¼ë¡œ ì°¾ì•„ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤. ë˜í•œ, @AspectJ ì™€ ê´€ë ¨ëœ AOP ê¸°ëŠ¥ë„ ìë™ìœ¼ë¡œ ì°¾ì•„ì„œ ì²˜ë¦¬í•´ì¤ë‹ˆë‹¤. Bean ìœ¼ë¡œ ë“±ë¡í•˜ê¸° ìœ„í•œ ê°ì²´ë¥¼ ìƒì„± í›„ ë¹ˆ í›„ì²˜ë¦¬ê¸°ì— ì „ë‹¬í•©ë‹ˆë‹¤. ë¹ˆ í›„ì²˜ë¦¬ê¸° ì¤‘ ìë™ í”„ë¡ì‹œ ìƒì„± ë¹ˆ í›„ì²˜ë¦¬ê¸°ì—ì„œ ëª¨ë“  Advisor ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. Advisor ì— í¬í•¨ëœ Pointcut ì„ ì‚¬ìš©í•´ í”„ë¡ì‹œë¥¼ ì ìš©í•  ëŒ€ìƒì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì´ë•Œ ê°ì²´ì˜ íŒ¨í‚¤ì§€ì •ë³´, í´ë˜ìŠ¤ ì •ë³´ ì™€ í•´ë‹¹ ê°ì²´ë‚´ ëª¨ë“  ë©”ì†Œë“œë¥¼ í•˜ë‚˜í•˜ë‚˜ì”© ë§¤ì¹­í•©ë‹ˆë‹¤. Pointcut ì¡°ê±´ì´ í•˜ë‚˜ë¼ë„ ë§Œì¡±í•˜ë©´ í•´ë‹¹ ê°ì²´ëŠ” í”„ë¡ì‹œ ê°ì²´ê°€ ë©ë‹ˆë‹¤. AutoProxyCreator ì—ì„œ ë°˜í™˜ëœ í”„ë¡ì‹œ ê°ì²´ëŠ” ìŠ¤í”„ë§ Bean ì €ì¥ì†Œì— Bean ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤. @Configuration@Import(&#123;AppV1Config.class, AppV2Config.class&#125;)public class AutoProxyConfig &#123; @Bean public Advisor advisor1(LogTrace logTrace) &#123; // ì´ë¦„ ê¸°ë°˜ìœ¼ë¡œ í•œ NameMatchMethodPointcut NameMatchMethodPointcut pointcut = new NameMatchMethodPointcut(); pointcut.setMappedNames(&quot;request*&quot;, &quot;order*&quot;, &quot;save*&quot;); // advice LogTraceAdvice advice = new LogTraceAdvice(logTrace); return new DefaultPointcutAdvisor(pointcut, advice); &#125;&#125; í¬ì¸íŠ¸ ì»·ì˜ ì‚¬ìš© í”„ë¡ì‹œ ê°ì²´ ìƒì„± ì—¬ë¶€ íŒë‹¨ - ìƒì„± ë‹¨ê³„ í”„ë¡ì‹œ ìƒì„±ë‹¨ê³„ì—ì„œ í•´ë‹¹ ë¹ˆì´ í”„ë¡ì‹œë¥¼ ìƒì„±í•  í•„ìš”ê°€ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ ì—¬ë¶€ íŒë‹¨í•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤. í´ë˜ìŠ¤, ë©”ì†Œë“œ ì¡°ê±´ ëª¨ë‘ ë¹„êµ, ì´ë•Œ ëª¨ë“  ë©”ì†Œë“œë¥¼ í™•ì¸í•©ë‹ˆë‹¤. ì¡°ê±´ì— ë§ëŠ” ë©”ì„œë“œê°€ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ í”„ë¡ì‹œ ê°ì²´ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ì–´ë“œë°”ì´ìŠ¤ ì ìš© ì—¬ë¶€ íŒë‹¨ - ì‚¬ìš© ë‹¨ê³„ í”„ë¡ì‹œê°€ í˜¸ì¶œ ëì„ ë•Œ ì–´ë“œë°”ì´ìŠ¤ë¥¼ ì ìš©í• ì§€ ì—¬ë¶€ë¥¼ í¬ì¸íŠ¸ ì»·ì„ ì´ìš©í•´ í™•ì¸í•œë‹¤. orderControllerV1 ì˜ request ë©”ì„œë“œëŠ” í¬ì¸íŠ¸ ì»· ì¡°ê±´ì— ë§Œì¡±í•˜ë¯€ë¡œ Advice ë¥¼ ë¨¼ì € í˜¸ì¶œí•œë‹¤. orderControllerV1 ì˜ nolog ë©”ì„œë“œëŠ” í¬ì¸íŠ¸ ì»· ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ Advice ë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤. AspectJExpressionPointcut AspectJ í‘œí˜„ì‹ì„ ì‚¬ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. AspectJExpressionPointcut ëŠ” AsepctJ í‘œí˜„ì‹ì„ ì‚¬ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. AspectJExpressionPointcut: AspectJ í‘œí˜„ì‹ì„ ì‚¬ìš©í•œ Advisor ìƒì„± execution(* hello.proxy.app..*(..)): AspectJ ì—ì„œ ì œê³µí•˜ëŠ” í¬ì¸íŠ¸ì»· í‘œí˜„ì‹ *: ëª¨ë“  ë°˜í™˜ íƒ€ì… hello.proxy.app.. í•´ë‹¹ íŒ¨í‚¤ì§€ì™€ ê·¸ í•˜ìœ„ íŒ¨í‚¤ì§€ *(..) * : ëª¨ë“  ë©”ì„œë“œ ì´ë¦„ (..) : íŒŒë¼ë¯¸í„°ëŠ” ìƒê´€ ì—†ìŒ @Beanpublic Advisor advisor2(LogTrace logTrace) &#123; // AspectJ ë¬¸ë²•ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ AspectJExpressionPointcut AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut(); pointcut.setExpression(&quot;execution(* hello.proxy.app..*(..))&quot;); // advice LogTraceAdvice advice = new LogTraceAdvice(logTrace); return new DefaultPointcutAdvisor(pointcut, advice);&#125; í•´ë‹¹ í‘œí˜„ì‹ìœ¼ë¡œ ì ìš©í•˜ë©´ no-log ì—ì„œë„ ë¡œê·¸ê°€ ì°íˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 2021-12-05 21:47:28.731 INFO 70615 --- [nio-8080-exec-6] h.p.trace.logtrace.ThreadLocalLogTrace : [afe68ae8] OrderControllerV1Impl.noLog()2021-12-05 21:47:28.732 INFO 70615 --- [nio-8080-exec-6] h.p.trace.logtrace.ThreadLocalLogTrace : [afe68ae8] OrderControllerV1Impl.noLog() time=1ms &amp;&amp; ì™€ || ë“±ì„ ì´ìš©í•´ í¬ì¸íŠ¸ì»· í‘œí˜„ì‹ì„ ë‹¤ì–‘í•˜ê²Œ ì¡°í•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. @Beanpublic Advisor advisor3(LogTrace logTrace) &#123; // Point Cut AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut(); pointcut.setExpression(&quot;execution(* hello.proxy.app..*(..)) &amp;&amp; !execution(*hello.proxy.app..noLog(..))&quot;); // advice LogTraceAdvice advice = new LogTraceAdvice(logTrace); return new DefaultPointcutAdvisor(pointcut, advice);&#125; Spring Bean í›„ì²˜ë¦¬ê¸° í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš©í”„ë¡ì‹œ ìë™ ìƒì„±ê¸° Advisor1 ì˜ í¬ì¸íŠ¸ ì»·ë§Œ ë§Œì¡± í”„ë¡ì‹œ 1ê°œ ìƒì„±, advisor1 ë§Œ í¬í•¨ Advisor1, Advisor2 ì˜ í¬ì¸íŠ¸ ì»· ëª¨ë‘ ë§Œì¡± í”„ë¡ì‹œ 1ê°œ ìƒì„±, advisor1, advisor2 ëª¨ë‘ í¬í•¨ Advisor1, Advisor2 ì˜ í¬ì¸íŠ¸ ì»· ëª¨ë‘ ë§Œì¡±í•˜ì§€ ì•ŠìŒ í”„ë¡ì‹œë¥¼ ìƒì„±í•˜ì§€ ì•ŠìŒ","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Bean Post Processor","slug":"Spring/Spring-AOP/Bean-Post-Processor","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Bean-Post-Processor/"}],"tags":[]},{"title":"BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±","slug":"spring/spring-aop/bean-post-processor/bean-post-processor-02","date":"2021-11-29T11:31:07.000Z","updated":"2024-02-26T15:22:27.318Z","comments":true,"path":"2021/11/29/spring/spring-aop/bean-post-processor/bean-post-processor-02/","link":"","permalink":"https://ckck803.github.io/2021/11/29/spring/spring-aop/bean-post-processor/bean-post-processor-02/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor - AutoProxyCreator BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory &#x2F; ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. https://www.baeldung.com/spring-beanpostprocessor BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±ë¹ˆ í›„ì²˜ë¦¬ê¸°ë¥¼ ì´ìš©í•´ Bean ìƒì„±ì‹œì ì— í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ìŠ¤í”„ë§ì— ë“±ë¡ë˜ëŠ” ëª¨ë“  ë¹ˆë“¤ì€ ë¹ˆ í›„ì²˜ë¦¬ê¸°ë¡œ ë„˜ì–´ì˜µë‹ˆë‹¤. ê·¸ë˜ì„œ ëª¨ë“  Bean ì— ëŒ€í•´ BeanPostProcessor ë¡œì§ì´ ìˆ˜í–‰ë˜ë¯€ë¡œ ì–´ë–¤ Bean ì„ Proxy Bean ìœ¼ë¡œ ìƒì„±í• ì§€ì— ëŒ€í•œ ê¸°ì¤€ì´ í•„ìš”í•˜ë‹¤. BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± ê³¼ì •ë¹ˆ í›„ì²˜ë¦¬ê¸°ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì€ 4ê°€ì§€ ë‹¨ê³„ê°€ ìˆìŠµë‹ˆë‹¤. ì²«ë²ˆì§¸ëŠ” Bean ëŒ€ìƒì´ ë˜ëŠ” ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‘ë²ˆì§¸ëŠ” ìƒì„±ëœ ê°ì²´ë¥¼ ë¹ˆ í›„ì²˜ë¦¬ê¸°ì— ì „ë‹¬í•©ë‹ˆë‹¤. ì…‹ë²ˆì§¸ëŠ” ë¹ˆ í›„ì²˜ë¦¬ê¸°ì—ì„œ ì „ë‹¬ ë°›ì€ ê°ì²´ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„± í›„ ë°˜í™˜í•©ë‹ˆë‹¤. ë„¤ë²ˆì§¸ ë¹ˆ í›„ì²˜ë¦¬ê¸°ì—ì„œ ë°˜í™˜ëœ í”„ë¡ì‹œ ê°ì²´ë¥¼ Bean ì €ì¥ì†Œì— ë“±ë¡í•©ë‹ˆë‹¤.","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor - AutoProxyCreator BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory &#x2F; ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. https://www.baeldung.com/spring-beanpostprocessor BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±ë¹ˆ í›„ì²˜ë¦¬ê¸°ë¥¼ ì´ìš©í•´ Bean ìƒì„±ì‹œì ì— í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ìŠ¤í”„ë§ì— ë“±ë¡ë˜ëŠ” ëª¨ë“  ë¹ˆë“¤ì€ ë¹ˆ í›„ì²˜ë¦¬ê¸°ë¡œ ë„˜ì–´ì˜µë‹ˆë‹¤. ê·¸ë˜ì„œ ëª¨ë“  Bean ì— ëŒ€í•´ BeanPostProcessor ë¡œì§ì´ ìˆ˜í–‰ë˜ë¯€ë¡œ ì–´ë–¤ Bean ì„ Proxy Bean ìœ¼ë¡œ ìƒì„±í• ì§€ì— ëŒ€í•œ ê¸°ì¤€ì´ í•„ìš”í•˜ë‹¤. BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± ê³¼ì •ë¹ˆ í›„ì²˜ë¦¬ê¸°ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì€ 4ê°€ì§€ ë‹¨ê³„ê°€ ìˆìŠµë‹ˆë‹¤. ì²«ë²ˆì§¸ëŠ” Bean ëŒ€ìƒì´ ë˜ëŠ” ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‘ë²ˆì§¸ëŠ” ìƒì„±ëœ ê°ì²´ë¥¼ ë¹ˆ í›„ì²˜ë¦¬ê¸°ì— ì „ë‹¬í•©ë‹ˆë‹¤. ì…‹ë²ˆì§¸ëŠ” ë¹ˆ í›„ì²˜ë¦¬ê¸°ì—ì„œ ì „ë‹¬ ë°›ì€ ê°ì²´ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„± í›„ ë°˜í™˜í•©ë‹ˆë‹¤. ë„¤ë²ˆì§¸ ë¹ˆ í›„ì²˜ë¦¬ê¸°ì—ì„œ ë°˜í™˜ëœ í”„ë¡ì‹œ ê°ì²´ë¥¼ Bean ì €ì¥ì†Œì— ë“±ë¡í•©ë‹ˆë‹¤. í”„ë¡ì‹œ ê°ì²´ ìƒì„± ì˜ˆ - PackageLogTracePostProcessor ìƒì„±PackageLogTracePostProcessor ëŠ” ë„˜ì–´ì˜¨ Bean ì˜ Package ë¥¼ í™•ì¸ í›„ Proxy ê°ì²´ ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Package ì´ë¦„ì´ ì„¤ì •ëœ basePackage ë¡œ ì‹œì‘í•˜ë©´ Proxy ê°ì²´ë¥¼ ë°˜í™˜í•˜ê³  ì•„ë‹ ê²½ìš°ì—ëŠ” ê·¸ëŒ€ë¡œë¥¼ ë‹¤ì‹œ ë°˜í™˜í•œë‹¤. @Slf4jpublic class PackageLogTracePostProcessor implements BeanPostProcessor &#123; private final String basePackage; private final Advisor advisor; public PackageLogTracePostProcessor(String basePackage, Advisor advisor) &#123; this.basePackage = basePackage; this.advisor = advisor; &#125; @Override public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123; log.info(&quot;param beanName = &#123;&#125; bean = &#123;&#125;&quot;, beanName, bean.getClass()); // í”„ë¡ì‹œ ì ìš© ëŒ€ìƒ ì—¬ë¶€ ì²´í¬ // í”„ë¡ì‹œ ì ìš© ëŒ€ìƒì´ ì•„ë‹ˆë©´ ì›ë³¸ì„ ê·¸ëŒ€ë¡œ ì§„í–‰ String packageName = bean.getClass().getPackageName(); if (!packageName.startsWith(basePackage)) &#123; return bean; &#125; // í”„ë¡ì‹œ ëŒ€ìƒì´ë©´ í”„ë¡ì‹œë¥¼ ë§Œë“¤ì–´ì„œ ë°˜í™˜ ProxyFactory proxyFactory = new ProxyFactory(bean); proxyFactory.addAdvisor(advisor); Object proxy = proxyFactory.getProxy(); log.info(&quot;create Proxy : target = &#123;&#125; proxy = &#123;&#125;&quot;, bean.getClass(), proxy.getClass()); // í”„ë¡ì‹œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. return proxy; &#125;&#125; BeanPostProcessor ë“±ë¡ logTracePostProcessor íŠ¹ì • íŒ¨í‚¤ì§€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ Proxy ë¥¼ ìƒì„±í•˜ëŠ” BeanProcessor ë¥¼ Spring Bean ìœ¼ë¡œ ë“±ë¡ í•œë‹¤. BeanProcessor ë¥¼ Bean ìœ¼ë¡œ ë“±ë¡í•˜ë©´ ìë™ìœ¼ë¡œ ë™ì‘í•œë‹¤. @Slf4j@Configuration@Import(&#123;AppV1Config.class, AppV2Config.class&#125;)public class BeanPostProcessorConfig &#123; @Bean public PackageLogTracePostProcessor logTracePostProcessor(LogTrace logTrace)&#123; // hello.proxy.app íŒ¨í‚¤ì§€ì— ì†í•œ í´ë˜ìŠ¤ë§Œ ì ìš©ëœë‹¤. return new PackageLogTracePostProcessor(&quot;hello.proxy.app&quot;, getAdvisor(logTrace)); &#125; private Advisor getAdvisor(LogTrace logTrace) &#123; // Point Cut NameMatchMethodPointcut pointcut = new NameMatchMethodPointcut(); pointcut.setMappedNames(&quot;request*&quot;, &quot;order*&quot;, &quot;save*&quot;); // advice LogTraceAdvice advice = new LogTraceAdvice(logTrace); // Pointcut ê³¼ Advice ë¥¼ ì´ìš©í•´ Advisor ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. return new DefaultPointcutAdvisor(pointcut, advice); &#125;&#125; @Import(BeanPostProcessorConfig.class)@SpringBootApplication(scanBasePackages = &quot;hello.proxy.app&quot;) //ì£¼ì˜public class ProxyApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProxyApplication.class, args); &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Bean Post Processor","slug":"Spring/Spring-AOP/Bean-Post-Processor","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Bean-Post-Processor/"}],"tags":[]},{"title":"BeanPostProcessor","slug":"spring/spring-aop/bean-post-processor/bean-post-processor-01","date":"2021-11-29T09:31:07.000Z","updated":"2024-02-26T15:22:12.280Z","comments":true,"path":"2021/11/29/spring/spring-aop/bean-post-processor/bean-post-processor-01/","link":"","permalink":"https://ckck803.github.io/2021/11/29/spring/spring-aop/bean-post-processor/bean-post-processor-01/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor - AutoProxyCreator BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. https://www.baeldung.com/spring-beanpostprocessor BeanPostProcessor Spring Bean ì„ ë“±ë¡í•˜ëŠ” ì‹œì ì— íŠ¹ì • ë¡œì§ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” hook (LifeCycle ì— ê°„ì„­í•  ìˆ˜ ìˆë‹¤.)Spring Bean ì „ì²´ì— ê³µí†µ ë¡œì§ì„ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©í•˜ë©´ ìœ ìš©í•˜ë‹¤ BeanPostProcessor ëŠ” Bean ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ì œì–´í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ë¹ˆì´ ìƒì„±ë˜ê³  ì´ˆê¸°í™”ë˜ëŠ” ê³¼ì •ì—ì„œ ì¶”ê°€ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤í”„ë§ ë¹ˆì˜ í•„ë“œë¥¼ ì´ˆê¸°í™”í•˜ê±°ë‚˜, ë¹ˆ ê°ì²´ì˜ í”„ë¡ì‹œë¥¼ ìƒì„±í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. BeanPostProcessor ì¸í„°í˜ì´ìŠ¤","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor - AutoProxyCreator BeanPostProcessor ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. https://www.baeldung.com/spring-beanpostprocessor BeanPostProcessor Spring Bean ì„ ë“±ë¡í•˜ëŠ” ì‹œì ì— íŠ¹ì • ë¡œì§ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” hook (LifeCycle ì— ê°„ì„­í•  ìˆ˜ ìˆë‹¤.)Spring Bean ì „ì²´ì— ê³µí†µ ë¡œì§ì„ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©í•˜ë©´ ìœ ìš©í•˜ë‹¤ BeanPostProcessor ëŠ” Bean ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ì œì–´í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ë¹ˆì´ ìƒì„±ë˜ê³  ì´ˆê¸°í™”ë˜ëŠ” ê³¼ì •ì—ì„œ ì¶”ê°€ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤í”„ë§ ë¹ˆì˜ í•„ë“œë¥¼ ì´ˆê¸°í™”í•˜ê±°ë‚˜, ë¹ˆ ê°ì²´ì˜ í”„ë¡ì‹œë¥¼ ìƒì„±í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. BeanPostProcessor ì¸í„°í˜ì´ìŠ¤public interface BeanPostProcessor &#123; @Nullable default Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123; return bean; &#125; @Nullable default Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123; return bean; &#125;&#125; postProcessBeforeInitialization Bean ì´ ì´ˆê¸°í™”ë˜ê¸° ì „ì— í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œ postProcessAfterInitialization Bean ì´ ì´ˆê¸°í™”ëœ í›„ì— í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œ BeanPostProcessor ìƒì„±BeanPostProcessor ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ AToBPostProcessor ì—ì„œëŠ” Bean ì´ ì´ˆê¸°í™” ëœí›„ ë„˜ì–´ì˜¨ ê°ì²´ê°€ A ì¼ ê²½ìš° B ê°ì²´ë¡œ ìƒˆë¡œ ìƒì„±í•´ ë°˜í™˜í•œë‹¤. @Slf4jstatic class AToBPostProcessor implements BeanPostProcessor&#123; @Override public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123; log.info(&quot;beanName = &#123;&#125; bean = &#123;&#125;&quot;, beanName, bean); // ë„˜ì–´ì˜¨ Bean ì´ A ê°ì²´ì¼ ê²½ìš° B ë¥¼ ë°˜í™˜í•œë‹¤. if(bean instanceof A)&#123; return new B(); &#125; return bean; &#125;&#125; @Testvoid BasicConfig()&#123; ApplicationContext applicationContext = new AnnotationConfigApplicationContext(BeanPostProcessorConfig.class); // beanA ì´ë¦„ìœ¼ë¡œ B ê°ì²´ê°€ Beanìœ¼ë¡œ ë“±ë¡ëœë‹¤. B b = applicationContext.getBean(&quot;beanA&quot;, B.class); b.helloA(); // A ëŠ” ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì§€ ì•ŠëŠ”ë‹¤. assertThrows(NoSuchBeanDefinitionException.class, () -&gt; &#123; applicationContext.getBean(A.class); &#125;);&#125;@Slf4j@Configurationstatic class BeanPostProcessorConfig&#123; @Bean(name = &quot;beanA&quot;) public A a()&#123; return new A(); &#125; // Bean í›„ì²˜ë¦¬ê¸° AToBPostProcessor ë¥¼ Bean ìœ¼ë¡œ ë“±ë¡í•œë‹¤. @Bean public AToBPostProcessor helloPostProcessor () &#123; return new AToBPostProcessor(); &#125;&#125;@Slf4jstatic class A&#123; public void helloA()&#123; log.info(&quot;hello A&quot;); &#125;&#125;@Slf4jstatic class B&#123; public void helloA()&#123; log.info(&quot;hello B&quot;); &#125;&#125; 09:39:32.378 [Test worker] INFO hello.proxy.postprocessor.BasicTest$AToBPostProcessor - beanName = beanA bean = hello.proxy.postprocessor.BasicTest$A@4b4dd21609:39:32.398 [Test worker] INFO hello.proxy.postprocessor.BasicTest$B - hello B","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Bean Post Processor","slug":"Spring/Spring-AOP/Bean-Post-Processor","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Bean-Post-Processor/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš©","slug":"spring/spring-aop/spring-proxy/spring-proxy-07","date":"2021-11-27T21:31:07.000Z","updated":"2024-02-26T15:26:43.192Z","comments":true,"path":"2021/11/28/spring/spring-aop/spring-proxy/spring-proxy-07/","link":"","permalink":"https://ckck803.github.io/2021/11/28/spring/spring-aop/spring-proxy/spring-proxy-07/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¸í„°í˜ì´ìŠ¤ ê°ì²´ì— í”„ë¡ì‹œ íŒ©í† ë¦¬ ì ìš©ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” MethodInterceptor ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ import org.aopalliance.intercept.MethodInterceptor;public class LogTraceAdvice implements MethodInterceptor &#123; private final LogTrace logTrace; public LogTraceAdvice(LogTrace logTrace) &#123; this.logTrace = logTrace; &#125; @Override public Object invoke(MethodInvocation invocation) throws Throwable &#123; TraceStatus status = null; try &#123; Method method = invocation.getMethod(); String message = method.getDeclaringClass().getSimpleName() + &quot;.&quot; + method.getName() + &quot;()&quot;; status = logTrace.begin(message); // ë¡œì§ í˜¸ì¶œ Object result = invocation.proceed(); logTrace.end(status); return result; &#125; catch (Exception ex) &#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; @Slf4j@Configurationpublic class ProxyFactoryConfigV1 &#123; @Bean public OrderControllerV1 orderControllerV1(LogTrace logTrace)&#123; OrderControllerV1 orderController = new OrderControllerV1Impl(orderServiceV1(logTrace)); // OrderControllerV1 ê°ì²´ë¥¼ Proxy ê°ì²´ë¡œ ìƒì„±í•œë‹¤. ProxyFactory factory = new ProxyFactory(orderController); factory.addAdvisor(getAdvisor(logTrace)); // Advisor ë¥¼ ì ìš©í•œë‹¤. OrderControllerV1 proxy = (OrderControllerV1) factory.getProxy(); log.info(&quot;ProxyFactory proxy = &#123;&#125;, target = &#123;&#125;&quot;, proxy.getClass(), orderController); return proxy; &#125; @Bean public OrderServiceV1 orderServiceV1(LogTrace logTrace)&#123; OrderServiceV1Impl orderService = new OrderServiceV1Impl(orderRepositoryV1(logTrace)); // OrderServiceV1Impl ê°ì²´ë¥¼ Proxy ê°ì²´ë¡œ ìƒì„±í•œë‹¤. ProxyFactory factory = new ProxyFactory(orderService); factory.addAdvisor(getAdvisor(logTrace)); // Advisor ë¥¼ ì ìš©í•œë‹¤. OrderServiceV1 proxy = (OrderServiceV1) factory.getProxy(); log.info(&quot;ProxyFactory proxy = &#123;&#125;, target = &#123;&#125;&quot;, proxy.getClass(), orderService); return proxy; &#125; @Bean public OrderRepositoryV1 orderRepositoryV1(LogTrace logTrace)&#123; OrderRepositoryV1Impl orderRepository = new OrderRepositoryV1Impl(); // OrderRepositoryV1Impl ê°ì²´ë¥¼ Proxy ê°ì²´ë¡œ ìƒì„±í•œë‹¤. ProxyFactory factory = new ProxyFactory(orderRepository); factory.addAdvisor(getAdvisor(logTrace)); // Advisor ë¥¼ ì ìš©í•œë‹¤. OrderRepositoryV1 proxy = (OrderRepositoryV1) factory.getProxy(); log.info(&quot;ProxyFactory proxy = &#123;&#125;, target = &#123;&#125;&quot;, proxy.getClass(), orderRepository); return proxy; &#125; private Advisor getAdvisor(LogTrace logTrace) &#123; // Point Cut NameMatchMethodPointcut pointcut = new NameMatchMethodPointcut(); pointcut.setMappedNames(&quot;request*&quot;, &quot;order*&quot;, &quot;save*&quot;); // advice LogTraceAdvice advice = new LogTraceAdvice(logTrace); // Pointcutê³¼ Advice ë¥¼ ì´ìš©í•´ Advisor ê°ì²´ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. return new DefaultPointcutAdvisor(pointcut, advice); &#125;&#125; ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì‹œì ì—ì„œ í•´ë‹¹ Bean ì´ Loading ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 2021-12-05 01:09:21.671 INFO 64531 --- [ main] h.p.c.v.ProxyFactoryConfigV1 : ProxyFactory proxy = class com.sun.proxy.$Proxy50, target = hello.proxy.app.v1.OrderRepositoryV1Impl@5555ffcf2021-12-05 01:09:21.673 INFO 64531 --- [ main] h.p.c.v.ProxyFactoryConfigV1 : ProxyFactory proxy = class com.sun.proxy.$Proxy52, target = hello.proxy.app.v1.OrderServiceV1Impl@5a2fa51f2021-12-05 01:09:21.674 INFO 64531 --- [ main] h.p.c.v.ProxyFactoryConfigV1 : ProxyFactory proxy = class com.sun.proxy.$Proxy53, target = hello.proxy.app.v1.OrderControllerV1Impl@6ecdbab8","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¸í„°í˜ì´ìŠ¤ ê°ì²´ì— í”„ë¡ì‹œ íŒ©í† ë¦¬ ì ìš©ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” MethodInterceptor ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ import org.aopalliance.intercept.MethodInterceptor;public class LogTraceAdvice implements MethodInterceptor &#123; private final LogTrace logTrace; public LogTraceAdvice(LogTrace logTrace) &#123; this.logTrace = logTrace; &#125; @Override public Object invoke(MethodInvocation invocation) throws Throwable &#123; TraceStatus status = null; try &#123; Method method = invocation.getMethod(); String message = method.getDeclaringClass().getSimpleName() + &quot;.&quot; + method.getName() + &quot;()&quot;; status = logTrace.begin(message); // ë¡œì§ í˜¸ì¶œ Object result = invocation.proceed(); logTrace.end(status); return result; &#125; catch (Exception ex) &#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; @Slf4j@Configurationpublic class ProxyFactoryConfigV1 &#123; @Bean public OrderControllerV1 orderControllerV1(LogTrace logTrace)&#123; OrderControllerV1 orderController = new OrderControllerV1Impl(orderServiceV1(logTrace)); // OrderControllerV1 ê°ì²´ë¥¼ Proxy ê°ì²´ë¡œ ìƒì„±í•œë‹¤. ProxyFactory factory = new ProxyFactory(orderController); factory.addAdvisor(getAdvisor(logTrace)); // Advisor ë¥¼ ì ìš©í•œë‹¤. OrderControllerV1 proxy = (OrderControllerV1) factory.getProxy(); log.info(&quot;ProxyFactory proxy = &#123;&#125;, target = &#123;&#125;&quot;, proxy.getClass(), orderController); return proxy; &#125; @Bean public OrderServiceV1 orderServiceV1(LogTrace logTrace)&#123; OrderServiceV1Impl orderService = new OrderServiceV1Impl(orderRepositoryV1(logTrace)); // OrderServiceV1Impl ê°ì²´ë¥¼ Proxy ê°ì²´ë¡œ ìƒì„±í•œë‹¤. ProxyFactory factory = new ProxyFactory(orderService); factory.addAdvisor(getAdvisor(logTrace)); // Advisor ë¥¼ ì ìš©í•œë‹¤. OrderServiceV1 proxy = (OrderServiceV1) factory.getProxy(); log.info(&quot;ProxyFactory proxy = &#123;&#125;, target = &#123;&#125;&quot;, proxy.getClass(), orderService); return proxy; &#125; @Bean public OrderRepositoryV1 orderRepositoryV1(LogTrace logTrace)&#123; OrderRepositoryV1Impl orderRepository = new OrderRepositoryV1Impl(); // OrderRepositoryV1Impl ê°ì²´ë¥¼ Proxy ê°ì²´ë¡œ ìƒì„±í•œë‹¤. ProxyFactory factory = new ProxyFactory(orderRepository); factory.addAdvisor(getAdvisor(logTrace)); // Advisor ë¥¼ ì ìš©í•œë‹¤. OrderRepositoryV1 proxy = (OrderRepositoryV1) factory.getProxy(); log.info(&quot;ProxyFactory proxy = &#123;&#125;, target = &#123;&#125;&quot;, proxy.getClass(), orderRepository); return proxy; &#125; private Advisor getAdvisor(LogTrace logTrace) &#123; // Point Cut NameMatchMethodPointcut pointcut = new NameMatchMethodPointcut(); pointcut.setMappedNames(&quot;request*&quot;, &quot;order*&quot;, &quot;save*&quot;); // advice LogTraceAdvice advice = new LogTraceAdvice(logTrace); // Pointcutê³¼ Advice ë¥¼ ì´ìš©í•´ Advisor ê°ì²´ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. return new DefaultPointcutAdvisor(pointcut, advice); &#125;&#125; ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì‹œì ì—ì„œ í•´ë‹¹ Bean ì´ Loading ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 2021-12-05 01:09:21.671 INFO 64531 --- [ main] h.p.c.v.ProxyFactoryConfigV1 : ProxyFactory proxy = class com.sun.proxy.$Proxy50, target = hello.proxy.app.v1.OrderRepositoryV1Impl@5555ffcf2021-12-05 01:09:21.673 INFO 64531 --- [ main] h.p.c.v.ProxyFactoryConfigV1 : ProxyFactory proxy = class com.sun.proxy.$Proxy52, target = hello.proxy.app.v1.OrderServiceV1Impl@5a2fa51f2021-12-05 01:09:21.674 INFO 64531 --- [ main] h.p.c.v.ProxyFactoryConfigV1 : ProxyFactory proxy = class com.sun.proxy.$Proxy53, target = hello.proxy.app.v1.OrderControllerV1Impl@6ecdbab8 êµ¬ì²´í´ë˜ìŠ¤ì— í”„ë¡ì‹œ íŒ©í† ë¦¬ ì ìš© êµ¬ì²´ í´ë˜ìŠ¤ì— ì ìš© @Slf4j@Configurationpublic class ProxyFactoryConfigV2 &#123; @Bean public OrderControllerV2 orderControllerV2(LogTrace logTrace)&#123; OrderControllerV2 orderController = new OrderControllerV2(orderServiceV2(logTrace)); // OrderControllerV2 ê°ì²´ë¥¼ Proxy ê°ì²´ë¡œ ìƒì„± ProxyFactory factory = new ProxyFactory(orderController); factory.addAdvisor(getAdvisor(logTrace)); OrderControllerV2 proxy = (OrderControllerV2) factory.getProxy(); log.info(&quot;ProxyFactory proxy = &#123;&#125;, target = &#123;&#125;&quot;, proxy.getClass(), orderController); return proxy; &#125; @Bean public OrderServiceV2 orderServiceV2(LogTrace logTrace)&#123; OrderServiceV2 orderService = new OrderServiceV2(orderRepositoryV2(logTrace)); // OrderServiceV2 ê°ì²´ë¥¼ Proxy ê°ì²´ë¡œ ìƒì„± ProxyFactory factory = new ProxyFactory(orderService); factory.addAdvisor(getAdvisor(logTrace)); OrderServiceV2 proxy = (OrderServiceV2) factory.getProxy(); log.info(&quot;ProxyFactory proxy = &#123;&#125;, target = &#123;&#125;&quot;, proxy.getClass(), orderService); return proxy; &#125; @Bean public OrderRepositoryV2 orderRepositoryV2(LogTrace logTrace)&#123; OrderRepositoryV2 orderRepository = new OrderRepositoryV2(); // OrderRepositoryV2 ê°ì²´ë¥¼ Proxy ê°ì²´ë¡œ ìƒì„± ProxyFactory factory = new ProxyFactory(orderRepository); factory.addAdvisor(getAdvisor(logTrace)); OrderRepositoryV2 proxy = (OrderRepositoryV2) factory.getProxy(); log.info(&quot;ProxyFactory proxy = &#123;&#125;, target = &#123;&#125;&quot;, proxy.getClass(), orderRepository); return proxy; &#125; private Advisor getAdvisor(LogTrace logTrace) &#123; // Point Cut NameMatchMethodPointcut pointcut = new NameMatchMethodPointcut(); pointcut.setMappedNames(&quot;request*&quot;, &quot;order*&quot;, &quot;save*&quot;); // advice LogTraceAdvice advice = new LogTraceAdvice(logTrace); // Pointcut ê³¼ Advice ë¥¼ ì´ìš©í•´ Advisor ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. return new DefaultPointcutAdvisor(pointcut, advice); &#125;&#125; CGLIB ë¡œ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 2021-12-05 01:18:11.287 INFO 64747 --- [ main] h.p.c.v.ProxyFactoryConfigV2 : ProxyFactory proxy = class hello.proxy.app.v2.OrderRepositoryV2$$EnhancerBySpringCGLIB$$47389dce, target = hello.proxy.app.v2.OrderRepositoryV2@75961f162021-12-05 01:18:11.292 INFO 64747 --- [ main] h.p.c.v.ProxyFactoryConfigV2 : ProxyFactory proxy = class hello.proxy.app.v2.OrderServiceV2$$EnhancerBySpringCGLIB$$9b88cbf1, target = hello.proxy.app.v2.OrderServiceV2@2dd2e2702021-12-05 01:18:11.295 INFO 64747 --- [ main] h.p.c.v.ProxyFactoryConfigV2 : ProxyFactory proxy = class hello.proxy.app.v2.OrderControllerV2$$EnhancerBySpringCGLIB$$493fc484, target = hello.proxy.app.v2.OrderControllerV2@7d04529c","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Spring Proxy","slug":"Spring/Spring-AOP/Spring-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Spring-Proxy/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš©","slug":"spring/spring-aop/spring-proxy/spring-proxy-06-multi-advisor","date":"2021-11-27T20:31:07.000Z","updated":"2024-02-26T15:26:38.365Z","comments":true,"path":"2021/11/28/spring/spring-aop/spring-proxy/spring-proxy-06-multi-advisor/","link":"","permalink":"https://ckck803.github.io/2021/11/28/spring/spring-aop/spring-proxy/spring-proxy-06-multi-advisor/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© í•˜ë‚˜ì˜ Target ì— ì—¬ëŸ¬ Advisor ë¥¼ ì ìš©í•œë‹¤. // ì—¬ëŸ¬ê°œì˜ í”„ë¡ì‹œ ê°ì²´// client -&gt; proxy2(advisor2) -&gt; proxy1(advisor1) -&gt; target// Proxy 1 ìƒì„±ServiceInterface target = new ServiceImpl();ProxyFactory proxyFactory = new ProxyFactory(target);// Advisor ì¸í„°í˜ì´ìŠ¤ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ êµ¬í˜„ì²´DefaultPointcutAdvisor advisor1 = new DefaultPointcutAdvisor(Pointcut.TRUE, new Advice1());// ProxyFactory ì— ì ìš©í•  Advisor ë¥¼ ì§€ì •í•œë‹¤.proxyFactory.addAdvisor(advisor1);ServiceInterface proxy = (ServiceInterface) proxyFactory.getProxy();/////////////////////////////////////////////////////////////////////////////////////////////// Proxy 2 ìƒì„± (taget -&gt; proxy 1 ì…ë ¥)ProxyFactory proxyFactory2 = new ProxyFactory(proxy);// Advisor ì¸í„°í˜ì´ìŠ¤ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ êµ¬í˜„ì²´DefaultPointcutAdvisor advisor2 = new DefaultPointcutAdvisor(Pointcut.TRUE, new Advice2());// ProxyFactory ì— ì ìš©í•  Advisor ë¥¼ ì§€ì •í•œë‹¤.proxyFactory2.addAdvisor(advisor2);ServiceInterface proxy2 = (ServiceInterface) proxyFactory2.getProxy();proxy2.save(); 00:36:05.734 [Test worker] INFO hello.proxy.advisor.MultiAdvisorTest$Advice2 - advice2 í˜¸ì¶œ00:36:05.737 [Test worker] INFO hello.proxy.advisor.MultiAdvisorTest$Advice1 - advice1 í˜¸ì¶œ00:36:05.737 [Test worker] INFO hello.proxy.common.service.ServiceImpl - save í˜¸ì¶œ í•˜ë‚˜ì˜ í”„ë¡ì‹œë¡œ ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© ìœ„ì—ì„œëŠ” ì—¬ëŸ¬ Advisor ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ê°œì˜ í”„ë¡ì‹œë¥¼ ìƒì„± í•´ì•¼ í•œë‹¤ëŠ” ë¬¸ì œì ì´ ìˆë‹¤.ìŠ¤í”„ë§ AOP ì—ì„œëŠ” í•˜ë‚˜ì˜ í”„ë¡ì‹œë§Œ ìƒì„± í•˜ê³  ì—¬ëŸ¬ê°œì˜ Advisor ë¥¼ ì ìš© í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© í•˜ë‚˜ì˜ Target ì— ì—¬ëŸ¬ Advisor ë¥¼ ì ìš©í•œë‹¤. // ì—¬ëŸ¬ê°œì˜ í”„ë¡ì‹œ ê°ì²´// client -&gt; proxy2(advisor2) -&gt; proxy1(advisor1) -&gt; target// Proxy 1 ìƒì„±ServiceInterface target = new ServiceImpl();ProxyFactory proxyFactory = new ProxyFactory(target);// Advisor ì¸í„°í˜ì´ìŠ¤ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ êµ¬í˜„ì²´DefaultPointcutAdvisor advisor1 = new DefaultPointcutAdvisor(Pointcut.TRUE, new Advice1());// ProxyFactory ì— ì ìš©í•  Advisor ë¥¼ ì§€ì •í•œë‹¤.proxyFactory.addAdvisor(advisor1);ServiceInterface proxy = (ServiceInterface) proxyFactory.getProxy();/////////////////////////////////////////////////////////////////////////////////////////////// Proxy 2 ìƒì„± (taget -&gt; proxy 1 ì…ë ¥)ProxyFactory proxyFactory2 = new ProxyFactory(proxy);// Advisor ì¸í„°í˜ì´ìŠ¤ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ êµ¬í˜„ì²´DefaultPointcutAdvisor advisor2 = new DefaultPointcutAdvisor(Pointcut.TRUE, new Advice2());// ProxyFactory ì— ì ìš©í•  Advisor ë¥¼ ì§€ì •í•œë‹¤.proxyFactory2.addAdvisor(advisor2);ServiceInterface proxy2 = (ServiceInterface) proxyFactory2.getProxy();proxy2.save(); 00:36:05.734 [Test worker] INFO hello.proxy.advisor.MultiAdvisorTest$Advice2 - advice2 í˜¸ì¶œ00:36:05.737 [Test worker] INFO hello.proxy.advisor.MultiAdvisorTest$Advice1 - advice1 í˜¸ì¶œ00:36:05.737 [Test worker] INFO hello.proxy.common.service.ServiceImpl - save í˜¸ì¶œ í•˜ë‚˜ì˜ í”„ë¡ì‹œë¡œ ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© ìœ„ì—ì„œëŠ” ì—¬ëŸ¬ Advisor ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ê°œì˜ í”„ë¡ì‹œë¥¼ ìƒì„± í•´ì•¼ í•œë‹¤ëŠ” ë¬¸ì œì ì´ ìˆë‹¤.ìŠ¤í”„ë§ AOP ì—ì„œëŠ” í•˜ë‚˜ì˜ í”„ë¡ì‹œë§Œ ìƒì„± í•˜ê³  ì—¬ëŸ¬ê°œì˜ Advisor ë¥¼ ì ìš© í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤. ì—¬ëŸ¬ê°œì˜ Advisor ë¥¼ ë“±ë¡ í›„ í˜¸ì¶¯ë ë•Œ ìˆœì„œëŠ” ë“±ë¡í•œ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œë©ë‹ˆë‹¤. // í•˜ë‚˜ì˜ í”„ë¡ì‹œ ì—¬ëŸ¬ê°œì˜ Advisor// client -&gt; proxy -&gt; advisor2 -&gt; advisor1 -&gt; target// Advisor ê°ì²´ ìƒì„±DefaultPointcutAdvisor advisor1 = new DefaultPointcutAdvisor(Pointcut.TRUE, new Advice1());DefaultPointcutAdvisor advisor2 = new DefaultPointcutAdvisor(Pointcut.TRUE, new Advice2());// Proxy ê°ì²´ ìƒì„±ServiceInterface target = new ServiceImpl();ProxyFactory proxyFactory = new ProxyFactory(target);// ë“±ë¡í•˜ëŠ” ìˆœì„œëŒ€ë¡œ Advisor ê°€ í˜¸ì¶œëœë‹¤.proxyFactory.addAdvisor(advisor2);proxyFactory.addAdvisor(advisor1);ServiceInterface proxy = (ServiceInterface) proxyFactory.getProxy();proxy.save(); 23:30:55.675 [Test worker] INFO hello.proxy.advisor.MultiAdvisorTest$Advice2 - advice2 í˜¸ì¶œ23:30:55.676 [Test worker] INFO hello.proxy.advisor.MultiAdvisorTest$Advice1 - advice1 í˜¸ì¶œ23:30:55.677 [Test worker] INFO hello.proxy.common.service.ServiceImpl - save í˜¸ì¶œ","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Spring Proxy","slug":"Spring/Spring-AOP/Spring-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Spring-Proxy/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut","slug":"spring/spring-aop/spring-proxy/spring-proxy-05-spring-pointcut","date":"2021-11-27T19:31:07.000Z","updated":"2024-02-26T15:26:34.017Z","comments":true,"path":"2021/11/28/spring/spring-aop/spring-proxy/spring-proxy-05-spring-pointcut/","link":"","permalink":"https://ckck803.github.io/2021/11/28/spring/spring-aop/spring-proxy/spring-proxy-05-spring-pointcut/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. save ë©”ì„œë“œëŠ” ì–´ë“œë°”ì´ìŠ¤ ë¡œì§ì„ ì ìš©í•˜ì§€ë§Œ, find ë©”ì„œë“œì—ì„œëŠ” ì–´ë“œë°”ì´ìŠ¤ ë¡œì§ì„ ì ìš©í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•˜ê¸° Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” Pointcut êµ¬í˜„ì²´ëŠ” AspectJExpressionPointcut ë‹¤. í´ë˜ìŠ¤ ì„¤ëª… NameMatchMethodPointcut ë©”ì„œë“œ ì´ë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ ë§¤ì¹­í•œë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ PatternMatchUtils ì„ ì‚¬ìš©í•œë‹¤. JdkRegexpMethodPointcut JDK ì •ê·œ í‘œí˜„ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ í¬ì¸íŠ¸ ì»·ì„ í•œë‹¤. AnnotationMatchingPointcut ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë§¤ì¹­í•œë‹¤. AspectJExpressionPointcut aspectJ í‘œí˜„ì‹ìœ¼ë¡œ ë§¤ì¹­í•œë‹¤. ServiceInterface target = new ServiceImpl();ProxyFactory proxyFactory = new ProxyFactory(target);// Spring ì—ì„œ ì œê³µí•˜ëŠ” PointcutNameMatchMethodPointcut pointcut = new NameMatchMethodPointcut();pointcut.setMappedNames(&quot;save&quot;);// Advisor ì¸í„°í˜ì´ìŠ¤ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ êµ¬í˜„ì²´DefaultPointcutAdvisor advisor = new DefaultPointcutAdvisor(pointcut, new TimeAdvice());// ProxyFactory ì— ì ìš©í•  Advisor ë¥¼ ì§€ì •í•œë‹¤.proxyFactory.addAdvisor(advisor);ServiceInterface proxy = (ServiceInterface) proxyFactory.getProxy();proxy.save();proxy.find(); 00:14:12.347 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì‹¤í–‰00:14:12.349 [Test worker] INFO hello.proxy.common.service.ServiceImpl - save í˜¸ì¶œ00:14:12.349 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì¢…ë£Œ resultTime = 000:14:12.351 [Test worker] INFO hello.proxy.common.service.ServiceImpl - find í˜¸ì¶œ","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. save ë©”ì„œë“œëŠ” ì–´ë“œë°”ì´ìŠ¤ ë¡œì§ì„ ì ìš©í•˜ì§€ë§Œ, find ë©”ì„œë“œì—ì„œëŠ” ì–´ë“œë°”ì´ìŠ¤ ë¡œì§ì„ ì ìš©í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•˜ê¸° Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” Pointcut êµ¬í˜„ì²´ëŠ” AspectJExpressionPointcut ë‹¤. í´ë˜ìŠ¤ ì„¤ëª… NameMatchMethodPointcut ë©”ì„œë“œ ì´ë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ ë§¤ì¹­í•œë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ PatternMatchUtils ì„ ì‚¬ìš©í•œë‹¤. JdkRegexpMethodPointcut JDK ì •ê·œ í‘œí˜„ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ í¬ì¸íŠ¸ ì»·ì„ í•œë‹¤. AnnotationMatchingPointcut ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë§¤ì¹­í•œë‹¤. AspectJExpressionPointcut aspectJ í‘œí˜„ì‹ìœ¼ë¡œ ë§¤ì¹­í•œë‹¤. ServiceInterface target = new ServiceImpl();ProxyFactory proxyFactory = new ProxyFactory(target);// Spring ì—ì„œ ì œê³µí•˜ëŠ” PointcutNameMatchMethodPointcut pointcut = new NameMatchMethodPointcut();pointcut.setMappedNames(&quot;save&quot;);// Advisor ì¸í„°í˜ì´ìŠ¤ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ êµ¬í˜„ì²´DefaultPointcutAdvisor advisor = new DefaultPointcutAdvisor(pointcut, new TimeAdvice());// ProxyFactory ì— ì ìš©í•  Advisor ë¥¼ ì§€ì •í•œë‹¤.proxyFactory.addAdvisor(advisor);ServiceInterface proxy = (ServiceInterface) proxyFactory.getProxy();proxy.save();proxy.find(); 00:14:12.347 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì‹¤í–‰00:14:12.349 [Test worker] INFO hello.proxy.common.service.ServiceImpl - save í˜¸ì¶œ00:14:12.349 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì¢…ë£Œ resultTime = 000:14:12.351 [Test worker] INFO hello.proxy.common.service.ServiceImpl - find í˜¸ì¶œ","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Spring Proxy","slug":"Spring/Spring-AOP/Spring-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Spring-Proxy/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸°","slug":"spring/spring-aop/spring-proxy/spring-proxy-04-pointcut","date":"2021-11-27T18:31:07.000Z","updated":"2024-02-26T15:26:29.298Z","comments":true,"path":"2021/11/28/spring/spring-aop/spring-proxy/spring-proxy-04-pointcut/","link":"","permalink":"https://ckck803.github.io/2021/11/28/spring/spring-aop/spring-proxy/spring-proxy-04-pointcut/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. Pointcut ì¸í„°í˜ì´ìŠ¤ Pointcut ì€ getClassFilter ë©”ì„œë“œì™€ getMethodMatcher ë©”ì„œë“œë¥¼ ì´ìš©í•´ í•„í„°ë§ ì„ ì§„í–‰í•œë‹¤.ë‘˜ë‹¤ TRUE ë¥¼ ë°˜í™˜í•´ì•¼ Advice ë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤ getClassFilter : Class ì¡°ê±´ìœ¼ë¡œ Filter í•˜ëŠ” ë©”ì„œë“œ .getMethodMatcher : Method ì¡°ê±´ìœ¼ë¡œ Filter í•˜ëŠ” ë©”ì„œë“œ public interface Pointcut &#123; // í´ë˜ìŠ¤ ì¡°ê±´ìœ¼ë¡œ í•„í„°ë§ ClassFilter getClassFilter(); // ë©”ì„œë“œ ì¡°ê±´ìœ¼ë¡œ í•„í„°ë§ MethodMatcher getMethodMatcher(); Pointcut TRUE = TruePointcut.INSTANCE;&#125; Pointcut ì ìš©í•˜ê¸° save ë©”ì„œë“œëŠ” Advice ë¡œì§ì„ ì ìš©í•˜ì§€ë§Œ, find ë©”ì„œë“œì—ì„œëŠ” Advice ë¡œì§ì„ ì ìš©í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•˜ê¸°","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. Pointcut ì¸í„°í˜ì´ìŠ¤ Pointcut ì€ getClassFilter ë©”ì„œë“œì™€ getMethodMatcher ë©”ì„œë“œë¥¼ ì´ìš©í•´ í•„í„°ë§ ì„ ì§„í–‰í•œë‹¤.ë‘˜ë‹¤ TRUE ë¥¼ ë°˜í™˜í•´ì•¼ Advice ë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤ getClassFilter : Class ì¡°ê±´ìœ¼ë¡œ Filter í•˜ëŠ” ë©”ì„œë“œ .getMethodMatcher : Method ì¡°ê±´ìœ¼ë¡œ Filter í•˜ëŠ” ë©”ì„œë“œ public interface Pointcut &#123; // í´ë˜ìŠ¤ ì¡°ê±´ìœ¼ë¡œ í•„í„°ë§ ClassFilter getClassFilter(); // ë©”ì„œë“œ ì¡°ê±´ìœ¼ë¡œ í•„í„°ë§ MethodMatcher getMethodMatcher(); Pointcut TRUE = TruePointcut.INSTANCE;&#125; Pointcut ì ìš©í•˜ê¸° save ë©”ì„œë“œëŠ” Advice ë¡œì§ì„ ì ìš©í•˜ì§€ë§Œ, find ë©”ì„œë“œì—ì„œëŠ” Advice ë¡œì§ì„ ì ìš©í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•˜ê¸° Pointcut ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ì„ í†µí•´ Class ë¥¼ ì´ìš©í•œ ClassFilter ì™€ Method ë¥¼ ì´ìš©í•œ MethodMatcher ë¥¼ Overriding í•œë‹¤. ë‘ ë©”ì†Œë“œê°€ true ë¥¼ ë°˜í™˜í•´ì•¼ PointCut ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤. // Pointcut ìƒì„±static class MyPointCut implements Pointcut&#123; @Override public ClassFilter getClassFilter() &#123; return ClassFilter.TRUE; &#125; @Override public MethodMatcher getMethodMatcher() &#123; return new MyMethodMatcher(); &#125;&#125; MethodMatcher ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ Method ì´ë¦„ì´ save ì¼ ê²½ìš° true ë¥¼ ë°˜í™˜í•´ ë¶€ê°€ ê¸°ëŠ¥ì´ ìˆ˜í–‰ ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤. static class MyMethodMatcher implements MethodMatcher&#123; private String matchName = &quot;save&quot;; @Override public boolean matches(Method method, Class&lt;?&gt; targetClass) &#123; boolean result = method.getName().equals(matchName); log.info(&quot;í¬ì¸íŠ¸ ì»· í˜¸ì¶œ method = &#123;&#125; targetClass = &#123;&#125;&quot;, method.getName(), targetClass); log.info(&quot;í¬ì¸íŠ¸ ì»· ê²°ê³¼ result = &#123;&#125;&quot;, result); return result; &#125; @Override public boolean isRuntime() &#123; return false; &#125; @Override public boolean matches(Method method, Class&lt;?&gt; targetClass, Object... args) &#123; return false; &#125;&#125; PointCut ì„ Advisor ì— ì ìš©í•œë‹¤. ServiceInterface target = new ServiceImpl();ProxyFactory proxyFactory = new ProxyFactory(target);// Advisor ì¸í„°í˜ì´ìŠ¤ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ êµ¬í˜„ì²´DefaultPointcutAdvisor advisor = new DefaultPointcutAdvisor(new MyPointCut(), new TimeAdvice());// Proxy Factory ì— ì ìš©í•  Advisor ë¥¼ ì§€ì •í•œë‹¤.proxyFactory.addAdvisor(advisor);ServiceInterface proxy = (ServiceInterface) proxyFactory.getProxy();proxy.save();proxy.find(); 00:05:44.717 [Test worker] INFO hello.proxy.advisor.AdvisorTest - í¬ì¸íŠ¸ ì»· í˜¸ì¶œ method = save targetClass = class hello.proxy.common.service.ServiceImpl00:05:44.720 [Test worker] INFO hello.proxy.advisor.AdvisorTest - í¬ì¸íŠ¸ ì»· ê²°ê³¼ result = true00:05:44.723 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì‹¤í–‰00:05:44.723 [Test worker] INFO hello.proxy.common.service.ServiceImpl - save í˜¸ì¶œ00:05:44.723 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì¢…ë£Œ resultTime = 000:05:44.723 [Test worker] INFO hello.proxy.advisor.AdvisorTest - í¬ì¸íŠ¸ ì»· í˜¸ì¶œ method = find targetClass = class hello.proxy.common.service.ServiceImpl00:05:44.724 [Test worker] INFO hello.proxy.advisor.AdvisorTest - í¬ì¸íŠ¸ ì»· ê²°ê³¼ result = false00:05:44.724 [Test worker] INFO hello.proxy.common.service.ServiceImpl - find í˜¸ì¶œ","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Spring Proxy","slug":"Spring/Spring-AOP/Spring-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Spring-Proxy/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor","slug":"spring/spring-aop/spring-proxy/spring-proxy-03-advisor","date":"2021-11-27T17:31:07.000Z","updated":"2024-02-26T15:26:25.017Z","comments":true,"path":"2021/11/28/spring/spring-aop/spring-proxy/spring-proxy-03-advisor/","link":"","permalink":"https://ckck803.github.io/2021/11/28/spring/spring-aop/spring-proxy/spring-proxy-03-advisor/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. Advisor AdvisorëŠ” Spring AOPì—ì„œ Advice, Pointcut, Advisorì˜ ê°œë…ì„ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•©ë‹ˆë‹¤. Advice ëŠ” ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê¸° ì „, í›„, í˜¹ì€ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ì„ ë§í•˜ë©°, Pointcut ì€ Adviceê°€ ì ìš©ë  ë©”ì†Œë“œë¥¼ ì„ íƒí•˜ëŠ” ê¸°ì¤€ì…ë‹ˆë‹¤. Advisor ëŠ” Advice ì™€ Pointcut ì„ ê²°í•©í•œ ê²ƒìœ¼ë¡œ, ì–´ë–¤ ë©”ì†Œë“œì— ì–´ë–¤ Advice ë¥¼ ì ìš©í• ì§€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤. PointCut (í¬ì¸íŠ¸ ì»·) ì–´ë””ì— ë¶€ê°€ ê¸°ëŠ¥ì„ ì ìš©í• ì§€ ì ìš©í•˜ì§€ ì•Šì„ì§€ íŒë‹¨í•˜ëŠ” í•„í„°ë§ ë¡œì§ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ë©”ì„œë“œ ì´ë¦„ì„ ì´ìš©í•´ í•„í„°ë§ í•œë‹¤. Advice (ì–´ë“œë°”ì´ìŠ¤) í”„ë¡ì‹œê°€ í˜¸ì¶œí•˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ Advisor (ì–´ë“œë°”ì´ì €) ë‹¨ìˆœí•˜ê²Œ í•˜ë‚˜ì˜ í¬ì¸íŠ¸ ì»· ê³¼ í•˜ë‚˜ì˜ ì–´ë“œë°”ì´ìŠ¤ ë¥¼ ê°–ê³  ìˆëŠ” ê²ƒ DefaultPointcutAdvisor","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. Advisor AdvisorëŠ” Spring AOPì—ì„œ Advice, Pointcut, Advisorì˜ ê°œë…ì„ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•©ë‹ˆë‹¤. Advice ëŠ” ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê¸° ì „, í›„, í˜¹ì€ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ì„ ë§í•˜ë©°, Pointcut ì€ Adviceê°€ ì ìš©ë  ë©”ì†Œë“œë¥¼ ì„ íƒí•˜ëŠ” ê¸°ì¤€ì…ë‹ˆë‹¤. Advisor ëŠ” Advice ì™€ Pointcut ì„ ê²°í•©í•œ ê²ƒìœ¼ë¡œ, ì–´ë–¤ ë©”ì†Œë“œì— ì–´ë–¤ Advice ë¥¼ ì ìš©í• ì§€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤. PointCut (í¬ì¸íŠ¸ ì»·) ì–´ë””ì— ë¶€ê°€ ê¸°ëŠ¥ì„ ì ìš©í• ì§€ ì ìš©í•˜ì§€ ì•Šì„ì§€ íŒë‹¨í•˜ëŠ” í•„í„°ë§ ë¡œì§ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ë©”ì„œë“œ ì´ë¦„ì„ ì´ìš©í•´ í•„í„°ë§ í•œë‹¤. Advice (ì–´ë“œë°”ì´ìŠ¤) í”„ë¡ì‹œê°€ í˜¸ì¶œí•˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ Advisor (ì–´ë“œë°”ì´ì €) ë‹¨ìˆœí•˜ê²Œ í•˜ë‚˜ì˜ í¬ì¸íŠ¸ ì»· ê³¼ í•˜ë‚˜ì˜ ì–´ë“œë°”ì´ìŠ¤ ë¥¼ ê°–ê³  ìˆëŠ” ê²ƒ DefaultPointcutAdvisorDefaultPointcutAdvisor ì€ Advisor ì˜ ê¸°ë³¸ êµ¬í˜„ì²´ì…ë‹ˆë‹¤. ë¶€ê°€ ê¸°ëŠ¥ì„ ì–´ë””ì— ì ìš©í• ì§€ Pointcut ê³¼ ë¶€ê°€ ê¸°ëŠ¥ Advice ë¥¼ ì¸ìë¡œ Advisor ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ProxyFactory ê°ì²´ addAdvisor ë©”ì†Œë“œë“¤ ì´ìš©í•´ Advisor ë¥¼ ì ìš©í•œë‹¤. public class DefaultPointcutAdvisor extends AbstractGenericPointcutAdvisor implements Serializable &#123; private Pointcut pointcut = Pointcut.TRUE; public DefaultPointcutAdvisor() &#123; &#125; public DefaultPointcutAdvisor(Advice advice) &#123; this(Pointcut.TRUE, advice); &#125; public DefaultPointcutAdvisor(Pointcut pointcut, Advice advice) &#123; this.pointcut = pointcut; setAdvice(advice); &#125; public void setPointcut(@Nullable Pointcut pointcut) &#123; this.pointcut = (pointcut != null ? pointcut : Pointcut.TRUE); &#125; @Override public Pointcut getPointcut() &#123; return this.pointcut; &#125; @Override public String toString() &#123; return getClass().getName() + &quot;: pointcut [&quot; + getPointcut() + &quot;]; advice [&quot; + getAdvice() + &quot;]&quot;; &#125;&#125; Advisor ìƒì„± ë° ì ìš©ServiceInterface target = new ServiceImpl();ProxyFactory proxyFactory = new ProxyFactory(target);// Advisor ì¸í„°í˜ì´ìŠ¤ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ êµ¬í˜„ì²´DefaultPointcutAdvisor advisor = new DefaultPointcutAdvisor(Pointcut.TRUE, new TimeAdvice());// Proxy Factory ì— ì ìš©í•  Advisor ë¥¼ ì§€ì •í•œë‹¤.proxyFactory.addAdvisor(advisor);ServiceInterface proxy = (ServiceInterface) proxyFactory.getProxy();proxy.save();proxy.find(); 22:40:35.135 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì‹¤í–‰22:40:35.138 [Test worker] INFO hello.proxy.common.service.ServiceImpl - save í˜¸ì¶œ22:40:35.138 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì¢…ë£Œ resultTime = 022:40:35.139 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì‹¤í–‰22:40:35.140 [Test worker] INFO hello.proxy.common.service.ServiceImpl - find í˜¸ì¶œ22:40:35.140 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì¢…ë£Œ resultTime = 0","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Spring Proxy","slug":"Spring/Spring-AOP/Spring-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Spring-Proxy/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB","slug":"spring/spring-aop/design-pattern/cglib/cglib-01","date":"2021-11-26T17:31:07.000Z","updated":"2024-11-29T06:49:08.510Z","comments":true,"path":"2021/11/27/spring/spring-aop/design-pattern/cglib/cglib-01/","link":"","permalink":"https://ckck803.github.io/2021/11/27/spring/spring-aop/design-pattern/cglib/cglib-01/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ ì°¸ê³  https://www.baeldung.com/cglib Dynamic Proxy ì˜ í•œê³„ì™€ CGLIBDynamic Proxy ì˜ ê²½ìš° ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì— ëŒ€í•´ì„œë§Œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ëŠ” í´ë˜ìŠ¤ì˜ ê²½ìš° í”„ë¡ì‹œ ìƒì„±ì„ ëª»í•˜ëƒ? ì•„ë‹™ë‹ˆë‹¤. ìë°”ì—ì„œëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì€ í´ë˜ìŠ¤ì— ëŒ€í•´ì„œë„ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ CGLIB ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì°¨ì´ì ì€ Dynamic Proxy ëŠ” ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì„ í†µí•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ë§Œ CGLIB ëŠ” ìƒì† ì„ í†µí•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. CGLIB ë€? CGLIB ëŠ” Code Generation Libraryì˜ ì•½ìë¡œ ëŸ°íƒ€ì„ ì‹œ Java ë°”ì´íŠ¸ ì½”ë“œ ë¥¼ ì¡°ì‘í•´ ë™ì ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ JDK Dynamic í”„ë¡ì‹œì™€ëŠ” ë‹¤ë¥´ê²Œ êµ¬ì²´ í´ë˜ìŠ¤ ë§Œ ê°–ê³ ë„ ë™ì ìœ¼ë¡œ Proxy ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. CGLIBì€ ìë°”ì˜ ë¦¬í”Œë ‰ì…˜(Reflection) API ì™€ ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘(Bytecode Manipulation) ê¸°ìˆ ì„ ì´ìš©í•˜ì—¬ í´ë˜ìŠ¤ì˜ ìƒì† êµ¬ì¡°ë¥¼ ì´ìš©í•´ì„œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì¡°ì‘í•˜ë¯€ë¡œ, JVMì˜ í´ë˜ìŠ¤ ë¡œë”© ê³¼ì •ì—ì„œ ì›ë³¸ í´ë˜ìŠ¤ì˜ ë°”ì´íŠ¸ì½”ë“œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ ì°¸ê³  https://www.baeldung.com/cglib Dynamic Proxy ì˜ í•œê³„ì™€ CGLIBDynamic Proxy ì˜ ê²½ìš° ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì— ëŒ€í•´ì„œë§Œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ëŠ” í´ë˜ìŠ¤ì˜ ê²½ìš° í”„ë¡ì‹œ ìƒì„±ì„ ëª»í•˜ëƒ? ì•„ë‹™ë‹ˆë‹¤. ìë°”ì—ì„œëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì€ í´ë˜ìŠ¤ì— ëŒ€í•´ì„œë„ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ CGLIB ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì°¨ì´ì ì€ Dynamic Proxy ëŠ” ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì„ í†µí•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ë§Œ CGLIB ëŠ” ìƒì† ì„ í†µí•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. CGLIB ë€? CGLIB ëŠ” Code Generation Libraryì˜ ì•½ìë¡œ ëŸ°íƒ€ì„ ì‹œ Java ë°”ì´íŠ¸ ì½”ë“œ ë¥¼ ì¡°ì‘í•´ ë™ì ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ JDK Dynamic í”„ë¡ì‹œì™€ëŠ” ë‹¤ë¥´ê²Œ êµ¬ì²´ í´ë˜ìŠ¤ ë§Œ ê°–ê³ ë„ ë™ì ìœ¼ë¡œ Proxy ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. CGLIBì€ ìë°”ì˜ ë¦¬í”Œë ‰ì…˜(Reflection) API ì™€ ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘(Bytecode Manipulation) ê¸°ìˆ ì„ ì´ìš©í•˜ì—¬ í´ë˜ìŠ¤ì˜ ìƒì† êµ¬ì¡°ë¥¼ ì´ìš©í•´ì„œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì¡°ì‘í•˜ë¯€ë¡œ, JVMì˜ í´ë˜ìŠ¤ ë¡œë”© ê³¼ì •ì—ì„œ ì›ë³¸ í´ë˜ìŠ¤ì˜ ë°”ì´íŠ¸ì½”ë“œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. CGLIBì„ ì´ìš©í•˜ì—¬ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ë•ŒëŠ” Enhancer í´ë˜ìŠ¤ë¥¼ ì´ìš©í•©ë‹ˆë‹¤. Enhancer í´ë˜ìŠ¤ëŠ” ë™ì ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ í•„ìš”í•œ ì •ë³´ë¥¼ ë°›ì•„ì„œ CGLIBì´ ì œê³µí•˜ëŠ” Callback ì¸í„°í˜ì´ìŠ¤ ë¥¼ ì´ìš©í•´ì„œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. MethodInterceptor ì¸í„°í˜ì´ìŠ¤ - ë¶€ê°€ê¸°ëŠ¥ ë¡œì§ ì‘ì„± CGLIB ëŠ” MethodInterceptor ë¥¼ ì´ìš©í•´ JDK Dynamic Proxy ì˜ InvocationHandler ì²˜ëŸ¼ ê³µí†µ ë¡œì§ ì„ ì‘ì„±í•œë‹¤. MethodInterceptor ì¸í„°í˜ì´ìŠ¤ì˜ intercept ë©”ì†Œë“œëŠ” í”„ë¡ì‹œ ê°ì²´ê°€ í˜¸ì¶œë  ë•Œ, ìš”ì²­ì„ ê°€ë¡œì±„ í˜¸ì¶œëœ ë©”ì†Œë“œ ëŒ€ì‹  ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ë¥¼ ì´ìš©í•˜ì—¬, ë©”ì†Œë“œ í˜¸ì¶œ ì „í›„ì— ë¡œê·¸ë¥¼ ë‚¨ê¸°ê±°ë‚˜, ë©”ì†Œë“œ í˜¸ì¶œ ì‹œê°„ì„ ì¸¡ì •í•˜ê±°ë‚˜, íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. MethodInterceptor ì¸í„°í˜ì´ìŠ¤ëŠ” ìë°”ì˜ ë‹¤ì´ë‚˜ë¯¹ í”„ë¡ì‹œì—ì„œ ì œê³µí•˜ëŠ” InvocationHandlerì™€ ìœ ì‚¬í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ CGLIBì€ ìƒì† ê¸°ë°˜ì˜ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ë¯€ë¡œ, MethodInterceptorë¥¼ ì´ìš©í•˜ì—¬ ì›ë³¸ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ë•Œ, super í‚¤ì›Œë“œë¥¼ ì´ìš©í•˜ì—¬ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. public interface MethodInterceptor extends Callback &#123; Object intercept(Object object, Method method, Object[] args, MethodProxy proxy) throws Throwable;&#125; Object object : CGLIB ê°€ ì ìš©ëœ ê°ì²´ Method method : í˜¸ì¶œëœ ë©”ì†Œë“œ Object[] args : ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì „ë‹¬ëœ ì¸ìˆ˜ MethodProxy proxy : ë©”ì„œë“œ í˜¸ì¶œì— ì‚¬ìš©í•˜ëŠ” ê°ì²´ ë¶€ê°€ê¸°ëŠ¥ ë¡œì§ ì‘ì„±CGLIB ì€ methodProxy.invokeSuper(target, args) ë¥¼ ì´ìš©í•´ ì›ë³¸ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. method.invoke(target, args) ë¡œ ì‹¤ì œ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ë„ ë¡œì§ì€ ì‘ë™í•˜ì§€ë§Œ methodProxy.invokeSuper(target, args) ë°©ì‹ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ”ê²Œ ì„±ëŠ¥ìƒì˜ ì´ì ‘ì´ ìˆë‹¤ê³  í•˜ë‹ˆ ì°¸ê³ í•˜ë„ë¡ í•˜ì! @Slf4jpublic class TimeMethodInterceptor implements MethodInterceptor &#123; private final Object target; public TimeMethodInterceptor(Object target) &#123; this.target = target; &#125; // ì´ ë©”ì†Œë“œëŠ” ì„¸ ê°œì˜ ì¸ìë¥¼ ë°›ìŠµë‹ˆë‹¤. // ì²« ë²ˆì§¸ ì¸ìëŠ” í”„ë¡ì‹œ ê°ì²´ ìì‹ ì…ë‹ˆë‹¤. // ë‘ ë²ˆì§¸ ì¸ìëŠ” ì›ë³¸ ê°ì²´ì˜ ë©”ì†Œë“œì…ë‹ˆë‹¤. // ì„¸ ë²ˆì§¸ ì¸ìëŠ” ì›ë³¸ ê°ì²´ì˜ ë©”ì†Œë“œ í˜¸ì¶œ ì‹œ ì „ë‹¬ëœ ì¸ì ë°°ì—´ì…ë‹ˆë‹¤. @Override public Object intercept(Object object, Method method, Object[] args, MethodProxy methodProxy) throws Throwable &#123; log.info(&quot;TimeProxy ì‹¤í–‰&quot;); long startTime = System.currentTimeMillis(); // method.invoke ì€ ì›ë³¸ í´ë˜ìŠ¤ì˜ ì‹¤ì œ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. // Object result = methodProxy.invoke(target, args); Object result = methodProxy.invokeSuper(target, args); long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;TimeProxy ì¢…ë£Œ resultTime = &#123;&#125;&quot;, resultTime); return result; &#125;&#125; Enhancer ë¥¼ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± CGLIB ì—ì„œëŠ” Enhancer ë¥¼ ì´ìš©í•´ Proxy ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. 1. ì›ë³¸ í´ë˜ìŠ¤@Slf4jpublic class ConcreteService &#123; public void call() &#123; log.info(&quot;ConcreteService í˜¸ì¶œ&quot;); &#125;&#125; 2. CGLIB í”„ë¡ì‹œ ê°ì²´ ìƒì„± í…ŒìŠ¤íŠ¸ ì½”ë“œCGLIB ì—ì„œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ ì í•  ë•Œ, Enhancer ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Enhancer ê°ì²´ setSuperclass ë©”ì†Œë“œë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ì›ë³¸ í´ë˜ìŠ¤ë¥¼ ì§€ì •í•˜ê³  setCallback ë©”ì†Œë“œë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ì— ë¶€ê°€ê¸°ëŠ¥ë¡œì§ì´ êµ¬í˜„ëœ MethodInterceptor ê°ì²´ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. Enhancer ê°ì²´ì— ì›ë³¸ í´ë˜ìŠ¤ì™€ ë¶€ê°€ê¸°ëŠ¥ì´ ì •ì˜ë˜ë©´ create ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ConcreteService target = new ConcreteService();// Enhancer ë¥¼ ì‚¬ìš©í•´ Proxy ë¥¼ ìƒì„±í•œë‹¤.Enhancer enhancer = new Enhancer();// CGLIB ëŠ” ìƒì†ì„ í†µí•´ êµ¬ì²´ í´ë˜ìŠ¤ í”„ë¡ì‹œë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.enhancer.setSuperclass(ConcreteService.class);// ë¶€ê°€ê¸°ëŠ¥ì„ ì •ì˜í•œ MethodInterceptor êµ¬í˜„ì²´ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.enhancer.setCallback(new TimeMethodInterceptor(target));// setSuperclass ì—ì„œ ì§€ì •í•œ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ Proxy ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.ConcreteService proxy = (ConcreteService) enhancer.create();log.info(&quot;targetClass = &#123;&#125;&quot;, target.getClass());log.info(&quot;proxyClass = &#123;&#125;&quot;, proxy.getClass());// Proxy ê°ì²´ë¥¼ í†µí•´ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´, ë¶€ê°€ê¸°ëŠ¥ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.proxy.call(); 3. í…ŒìŠ¤íŠ¸ ê²°ê³¼Enhancer í´ë˜ìŠ¤ë¥¼ í†µí•´ CGLIB í”„ë¡ì‹œ ê°ì²´ê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡ì‹œ ê°ì²´ì˜ ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ë©´, ë¶€ê°€ê¸°ëŠ¥ì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 23:52:18.794 [Test worker] INFO hello.proxy.cglib.CglibTest - targetClass = class hello.proxy.common.service.ConcreteService23:52:18.798 [Test worker] INFO hello.proxy.cglib.CglibTest - proxyClass = class hello.proxy.common.service.ConcreteService$$EnhancerByCGLIB$$25d6b0e323:52:18.798 [Test worker] INFO hello.proxy.cglib.code.TimeMethodInterceptor - TimeProxy ì‹¤í–‰23:52:18.807 [Test worker] INFO hello.proxy.common.service.ConcreteService - ConcreteService í˜¸ì¶œ23:52:18.807 [Test worker] INFO hello.proxy.cglib.code.TimeMethodInterceptor - TimeProxy ì¢…ë£Œ resultTime = 9 CGLIB ì¥ë‹¨ì CGLIB ì„ ì´ìš©í•œ í”„ë¡ì‹œ ê°ì²´ ìƒì„± ë°©ì‹ì€ ë‹¤ì´ë‚˜ë¯¹ í”„ë¡ì‹œë³´ë‹¤ ë” ë¹ ë¥¸ ì†ë„ë¥¼ ë³´ì´ë©°, ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì€ í´ë˜ìŠ¤ì— ëŒ€í•´ì„œë„ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ë°”ì´íŠ¸ì½”ë“œë¥¼ ì¡°ì‘í•˜ê¸° ë•Œë¬¸ì— ë³´ì•ˆ ê²€ì‚¬ ë“±ì—ì„œ ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì›ë³¸ í´ë˜ìŠ¤ì˜ ìƒì„±ìë‚˜ private ë©”ì„œë“œ ë“±ì€ í”„ë¡ì‹œ ê°ì²´ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"CGLIB","slug":"Spring/Spring-ê³ ê¸‰í¸/CGLIB","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/CGLIB/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor","slug":"spring/spring-aop/spring-proxy/spring-proxy-02-MethodInterceptor","date":"2021-11-26T16:41:07.000Z","updated":"2024-02-26T15:26:17.765Z","comments":true,"path":"2021/11/27/spring/spring-aop/spring-proxy/spring-proxy-02-MethodInterceptor/","link":"","permalink":"https://ckck803.github.io/2021/11/27/spring/spring-aop/spring-proxy/spring-proxy-02-MethodInterceptor/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. MethodInterceptor - ë¶€ê°€ê¸°ëŠ¥ êµ¬í˜„Spring ì—ì„œëŠ” í”„ë¡ì‹œ ê°ì²´ì— ë¶€ê°€ê¸°ëŠ¥ì„ ì ìš©í•˜ê¸° ìœ„í•´ MethodInterceptor ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. MethodInterceptor ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì„ í†µí•´ í”„ë¡ì‹œ ê°ì²´ì— ì ìš©ë  ë¶€ê°€ê¸°ëŠ¥ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. MethodInterceptor ì¸í„°í˜ì´ìŠ¤ ë‚´ invoke ë©”ì†Œë“œ ì¸ì MethodInvocation ê°ì²´ì—ëŠ” ë‹¤ìŒ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²•, í˜„ì¬ í”„ë¡ì‹œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤, args, ë©”ì„œë“œ ì •ë³´ë“±ì´ í‘œí•¨ë¼ ìˆë‹¤. CGLIB ì—ì„œ ì œê³µí•˜ëŠ” MethodInterceptor ì™€ ì´ë¦„ì´ ë¹„ìŠ·í•˜ë¯€ë¡œ êµ¬í˜„ì‹œ ì£¼ì˜í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. package org.aopalliance.intercept;public interface MethodInterceptor extends Interceptor &#123; Object invoke(MethodInvocation invocation) throws Throwable; &#125;","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. MethodInterceptor - ë¶€ê°€ê¸°ëŠ¥ êµ¬í˜„Spring ì—ì„œëŠ” í”„ë¡ì‹œ ê°ì²´ì— ë¶€ê°€ê¸°ëŠ¥ì„ ì ìš©í•˜ê¸° ìœ„í•´ MethodInterceptor ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. MethodInterceptor ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì„ í†µí•´ í”„ë¡ì‹œ ê°ì²´ì— ì ìš©ë  ë¶€ê°€ê¸°ëŠ¥ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. MethodInterceptor ì¸í„°í˜ì´ìŠ¤ ë‚´ invoke ë©”ì†Œë“œ ì¸ì MethodInvocation ê°ì²´ì—ëŠ” ë‹¤ìŒ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²•, í˜„ì¬ í”„ë¡ì‹œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤, args, ë©”ì„œë“œ ì •ë³´ë“±ì´ í‘œí•¨ë¼ ìˆë‹¤. CGLIB ì—ì„œ ì œê³µí•˜ëŠ” MethodInterceptor ì™€ ì´ë¦„ì´ ë¹„ìŠ·í•˜ë¯€ë¡œ êµ¬í˜„ì‹œ ì£¼ì˜í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. package org.aopalliance.intercept;public interface MethodInterceptor extends Interceptor &#123; Object invoke(MethodInvocation invocation) throws Throwable; &#125; MethodInterceptor êµ¬í˜„MethodInterceptor ë¥¼ ì´ìš©í•´ ìˆ˜í–‰ ì‹œê°„ ë¡œê·¸ë¥¼ ì°ì–´ì£¼ëŠ” ë¶€ê°€ê¸°ëŠ¥ ë¡œì§ ì„ ìˆ˜í–‰í•˜ëŠ” Advice ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. @Slf4jpublic class TimeAdvice implements MethodInterceptor &#123; @Override public Object invoke(MethodInvocation invocation) throws Throwable &#123; log.info(&quot;TimeProxy ì‹¤í–‰&quot;); long startTime = System.currentTimeMillis(); // Object result = method.invoke(target, args); // Spring ì—ì„œ ì œê³µí•˜ëŠ” í”„ë¡ì‹œ íŒ©í† ë¦¬ ê¸°ëŠ¥ ì ìš© start Object result = invocation.proceed(); // Spring ì—ì„œ ì œê³µí•˜ëŠ” í”„ë¡ì‹œ íŒ©í† ë¦¬ ê¸°ëŠ¥ ì ìš© end long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;TimeProxy ì¢…ë£Œ resultTime = &#123;&#125;&quot;, resultTime); return result; &#125;&#125; í”„ë¡ì‹œ ê°ì²´ì— Advice(ë¶€ê°€ ê¸°ëŠ¥) ì ìš©ProxyFactory ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ProxyFactory ëŠ” ì „ë‹¬ë°›ì€ ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì¸í„°í˜ì´ìŠ¤ê°€ ìˆëŠ” ê°ì²´ì¸ ê²½ìš° JDK ë™ì  í”„ë¡ì‹œ ë¥¼ ì‚¬ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ì„ ê²½ìš°ì—ëŠ” CGLIB ë¥¼ ì‚¬ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ìƒì„±ëœ í”„ë¡ì‹œ ê°ì²´ì— addAdvice ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ë¶€ê°€ ê¸°ëŠ¥ì„ ìœ„í•œ Advice ë¥¼ ì¶”ê°€í•œë‹¤. // ì¸í„°í˜ì´ìŠ¤ê°€ ìˆìœ¼ë©´ ë™ì  í”„ë¡ì‹œ ì‚¬ìš©ServiceInterface target = new ServiceImpl();// ProxyFactory ë¥¼ ìƒì„±í•  ë•Œ í”„ë¡ì‹œ í˜¸ì¶œ ëŒ€ìƒì„ ì¸ìë¡œ ë„˜ê²¨ì¤€ë‹¤.ProxyFactory proxyFactory = new ProxyFactory(target);// ProxyFactory ê°ì²´ì— ë¶€ê°€ ê¸°ëŠ¥ì„ ìœ„í•œ Advice ì •ë³´ë¥¼ ì¶”ê°€í•œë‹¤.proxyFactory.addAdvice(new TimeAdvice());ServiceInterface proxy = (ServiceInterface) proxyFactory.getProxy();log.info(&quot;targetClass = &#123;&#125;&quot;, target.getClass());log.info(&quot;proxyClass = &#123;&#125;&quot;, proxy.getClass());proxy.save(); ProxyFactory ê°ì²´ëŠ” JDK Dynamic Proxy ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 21:33:13.233 [Test worker] INFO hello.proxy.proxyfactory.ProxyFactoryTest - targetClass = class hello.proxy.common.service.ServiceImpl21:33:13.237 [Test worker] INFO hello.proxy.proxyfactory.ProxyFactoryTest - proxyClass = class com.sun.proxy.$Proxy1321:33:13.242 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì‹¤í–‰21:33:13.243 [Test worker] INFO hello.proxy.common.service.ServiceImpl - save í˜¸ì¶œ21:33:13.243 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì¢…ë£Œ resultTime = 1 í”„ë¡ì‹œ ì ìš© í™•ì¸í…ŒìŠ¤íŠ¸ì—ì„œ ProxyFactory ë¥¼ í†µí•´ Proxy ê°ì²´ê°€ ìƒì„±ëëŠ”ì§€ í™•ì¸í•˜ê³  Advice (ë¶€ê°€ê¸°ëŠ¥) ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. í”„ë¡ì‹œ ê°ì²´ ìƒì„±ì‹œ ì¸í„°í˜ì´ìŠ¤ê°€ ìˆëŠ” ê°ì²´ì¼ ê²½ìš° JDK Dynamic Proxy ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±ëëŠ”ì§€ í™•ì¸í•˜ê³ , ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ëŠ” ê°ì²´ì¼ ê²½ìš° CGLIB ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í–ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. Jdk Dynamic Proxy ë¥¼ ì´ìš©í•œ Proxy ìƒì„± í™•ì¸ProxyFactory ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œë¥¼ ìƒì„±í•  ë•Œ ì¸í„°í˜ì´ìŠ¤ê°€ ìˆìœ¼ë©´ JDK Dynamic Proxy ë¥¼ ì´ìš©í•´ ë™ì  í”„ë¡ì‹œë¥¼ ìƒì„±í•œë‹¤. // ì¸í„°í˜ì´ìŠ¤ê°€ ìˆìœ¼ë©´ ë™ì  í”„ë¡ì‹œ ì‚¬ìš©ServiceInterface target = new ServiceImpl();ProxyFactory proxyFactory = new ProxyFactory(target);proxyFactory.addAdvice(new TimeAdvice());ServiceInterface proxy = (ServiceInterface) proxyFactory.getProxy();log.info(&quot;targetClass = &#123;&#125;&quot;, target.getClass());log.info(&quot;proxyClass = &#123;&#125;&quot;, proxy.getClass());proxy.save();// Proxy Factory ë¥¼ ì´ìš©í•´ ë§Œë“¤ì—ˆì„ ë•Œ ì‚¬ìš©ê°€ëŠ¥assertThat(AopUtils.isAopProxy(proxy)).isTrue(); // AopProxy ë¥¼ ì´ìš©í•´ ë™ì  í”„ë¡ì‹œë¥¼ ìƒì„±í–ˆëŠ”ì§€ í™•ì¸assertThat(AopUtils.isJdkDynamicProxy(proxy)).isTrue(); // JdkDynamicProxy ë¥¼ ì´ìš©í•´ ë™ì  í”„ë¡ì‹œë¥¼ ìƒì„±í–ˆëŠ”ì§€ í™•ì¸assertThat(AopUtils.isCglibProxy(proxy)).isFalse(); // CglibProxy ë¥¼ ì´ìš©í•´ ë™ì  í”„ë¡ì‹œë¥¼ ìƒì„±í–ˆëŠ”ì§€ í™•ì¸ com.sun.proxy.Proxy13 ë¥¼ í†µí•´ JdkDynamicProxy ë¥¼ ì´ìš©í•´ ë™ì  í”„ë¡ì‹œê°€ ìƒì„± ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 23:00:05.128 [Test worker] INFO hello.proxy.proxyfactory.ProxyFactoryTest - targetClass = class hello.proxy.common.service.ServiceImpl23:00:05.132 [Test worker] INFO hello.proxy.proxyfactory.ProxyFactoryTest - proxyClass = class com.sun.proxy.$Proxy1323:00:05.136 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì‹¤í–‰23:00:05.136 [Test worker] INFO hello.proxy.common.service.ServiceImpl - save í˜¸ì¶œ23:00:05.136 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì¢…ë£Œ resultTime = 0 CGLIB ë¥¼ ì´ìš©í•œ Proxy ìƒì„± í™•ì¸// êµ¬ì²´ í´ë˜ìŠ¤ë§Œ ìˆìœ¼ë©´ CGLIB ì ìš©ConcreteService target = new ConcreteService();ProxyFactory proxyFactory = new ProxyFactory(target);proxyFactory.addAdvice(new TimeAdvice());ConcreteService proxy = (ConcreteService) proxyFactory.getProxy();log.info(&quot;targetClass = &#123;&#125;&quot;, target.getClass());log.info(&quot;proxyClass = &#123;&#125;&quot;, proxy.getClass());proxy.call();// Proxy Factory ë¥¼ ì´ìš©í•´ ë§Œë“¤ì—ˆì„ ë•Œ ì‚¬ìš©ê°€ëŠ¥assertThat(AopUtils.isAopProxy(proxy)).isTrue();assertThat(AopUtils.isJdkDynamicProxy(proxy)).isFalse();assertThat(AopUtils.isCglibProxy(proxy)).isTrue(); EnhancerBySpringCGLIB ë¥¼ í†µí•´ CGLIB ë¥¼ ì´ìš©í•´ ë™ì  í”„ë¡ì‹œê°€ ìƒì„±ëëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 21:50:00.561 [Test worker] INFO hello.proxy.proxyfactory.ProxyFactoryTest - targetClass = class hello.proxy.common.service.ConcreteService21:50:00.563 [Test worker] INFO hello.proxy.proxyfactory.ProxyFactoryTest - proxyClass = class hello.proxy.common.service.ConcreteService$$EnhancerBySpringCGLIB$$8328efc521:50:00.565 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì‹¤í–‰21:50:00.576 [Test worker] INFO hello.proxy.common.service.ConcreteService - ConcreteService í˜¸ì¶œ21:50:00.576 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì¢…ë£Œ resultTime = 10 CGLIB ë¥¼ ì´ìš©í•œ ê°•ì œ Proxy ìƒì„± í™•ì¸ProxyFactory ê°€ í”„ë¡ì‹œ ê°ì²´ ìƒì„±ì‹œ ì¸í„°í˜ì´ìŠ¤ê°€ ìˆëŠ” ê°ì²´ë”ë¼ë„ CGLIB ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ProxyFactory í´ë˜ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” setProxyTargetClass ë©”ì†Œë“œì— true ê°’ì„ ë„£ìœ¼ë©´ í”„ë¡ì‹œ ê°ì²´ ìƒì„±ì‹œ CGLIB ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. // ProxyTargetClass ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ì¸í„°í˜ì´ìŠ¤ê°€ ìˆì–´ë„ CGLIBë¥¼ ì‚¬ìš©í•˜ê³ , í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì‚¬ìš©ConcreteService target = new ConcreteService();ProxyFactory proxyFactory = new ProxyFactory(target);proxyFactory.setProxyTargetClass(true); // ì´ ì˜µì…˜ì´ ìˆìœ¼ë©´ í•­ìƒ CGLIB ë¥¼ ì‚¬ìš©í•´ í”„ë¡ì‹œë¥¼ ìƒì„±í•œë‹¤.proxyFactory.addAdvice(new TimeAdvice());ConcreteService proxy = (ConcreteService) proxyFactory.getProxy();log.info(&quot;targetClass = &#123;&#125;&quot;, target.getClass());log.info(&quot;proxyClass = &#123;&#125;&quot;, proxy.getClass());proxy.call();// Proxy Factory ë¥¼ ì´ìš©í•´ ë§Œë“¤ì—ˆì„ ë•Œ ì‚¬ìš©ê°€ëŠ¥assertThat(AopUtils.isAopProxy(proxy)).isTrue();assertThat(AopUtils.isJdkDynamicProxy(proxy)).isFalse();assertThat(AopUtils.isCglibProxy(proxy)).isTrue(); EnhancerBySpringCGLIB ë¥¼ í†µí•´ setProxyTargetClass ë©”ì†Œë“œë¥¼ ì´ìš©í•´ CGLIB ë¥¼ ì‚¬ìš©í•œ í”„ë¡ì‹œ ìƒì„±ì„ ê°•ì œí•  ìˆ˜ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 22:14:06.412 [Test worker] INFO hello.proxy.proxyfactory.ProxyFactoryTest - targetClass = class hello.proxy.common.service.ConcreteService22:14:06.414 [Test worker] INFO hello.proxy.proxyfactory.ProxyFactoryTest - proxyClass = class hello.proxy.common.service.ConcreteService$$EnhancerBySpringCGLIB$$116d915622:14:06.416 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì‹¤í–‰22:14:06.427 [Test worker] INFO hello.proxy.common.service.ConcreteService - ConcreteService í˜¸ì¶œ22:14:06.427 [Test worker] INFO hello.proxy.common.advice.TimeAdvice - TimeProxy ì¢…ë£Œ resultTime = 10","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Spring Proxy","slug":"Spring/Spring-AOP/Spring-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Spring-Proxy/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory","slug":"spring/spring-aop/spring-proxy/spring-proxy-01-proxyfactory","date":"2021-11-26T16:31:07.000Z","updated":"2024-02-26T15:26:10.561Z","comments":true,"path":"2021/11/27/spring/spring-aop/spring-proxy/spring-proxy-01-proxyfactory/","link":"","permalink":"https://ckck803.github.io/2021/11/27/spring/spring-aop/spring-proxy/spring-proxy-01-proxyfactory/","excerpt":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. Spring ì—ì„œì˜ ProxyFactory Spring ì—ì„œëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ProxyFactory ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Springì—ì„œ ProxyFactory ëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ì…ë‹ˆë‹¤. ProxyFactory ëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ìˆì„ ë•ŒëŠ” JDK ë™ì  í”„ë¡ì‹œ ë¥¼ ì‚¬ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ì„ ê²½ìš°ì—ëŠ” CGLIB ë¥¼ ì‚¬ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Advice Advice ëŠ” í”„ë¡ì‹œì— ì ìš©í•˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ ë¡œì§ ì´ë‹¤.JDK ë™ì  í”„ë¡ì‹œ ê°€ ì œê³µí•˜ëŠ” InvocationHandler ì™€ CGLIB ê°€ ì œê³µí•˜ëŠ” MethodInterceptor ì˜ ê°œë…ê³¼ ìœ ì‚¬í•˜ë‹¤.","text":"ëª©ì°¨ BeanPostProcessor - í•˜ë‚˜ì˜ í”„ë¡ì‹œì— ì—¬ëŸ¬ê°œì˜ Advisor ì ìš© BeanPostProcessor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì—¬ëŸ¬ Advisor ì™€ í•¨ê»˜ ì ìš© Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Spring ì—ì„œ ì œê³µí•˜ëŠ” Pointcut Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Pointcut ë§Œë“¤ê¸° Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Advisor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - MethodInterceptor Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ProxyFactory ì°¸ê³ ë³¸ í¬ìŠ¤íŠ¸ëŠ” ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê³ ê¸‰í¸ ë‚´ìš©ì„ ì°¸ê³ í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. Spring ì—ì„œì˜ ProxyFactory Spring ì—ì„œëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ProxyFactory ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Springì—ì„œ ProxyFactory ëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ì…ë‹ˆë‹¤. ProxyFactory ëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ìˆì„ ë•ŒëŠ” JDK ë™ì  í”„ë¡ì‹œ ë¥¼ ì‚¬ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ì„ ê²½ìš°ì—ëŠ” CGLIB ë¥¼ ì‚¬ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Advice Advice ëŠ” í”„ë¡ì‹œì— ì ìš©í•˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ ë¡œì§ ì´ë‹¤.JDK ë™ì  í”„ë¡ì‹œ ê°€ ì œê³µí•˜ëŠ” InvocationHandler ì™€ CGLIB ê°€ ì œê³µí•˜ëŠ” MethodInterceptor ì˜ ê°œë…ê³¼ ìœ ì‚¬í•˜ë‹¤. Spring ì€ ë¶€ê°€ê¸°ëŠ¥ ì ìš©ì„ ìœ„í•´ JDK ë™ì  í”„ë¡ì‹œ ì˜ InvocationHandler ë‚˜ CGLIB ì˜ MethodInterceptor ë¥¼ ê°ê° ì¤‘ë³µìœ¼ë¡œ ë”°ë¡œ ë§Œë“œëŠ” ë°©ì‹ì´ ì•„ë‹Œ Advice ë¼ëŠ” ê°œë…ì„ ë„ì…í–ˆë‹¤. InvocationHandler ë‚˜ MethodInterceptor ê°€ Advice ë¥¼ í˜¸ì¶œí•˜ëŠ” í˜•ì‹ìœ¼ë¡œ ë¶€ê°€ ê¸°ëŠ¥ì´ ì ìš©ëœë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Spring Proxy","slug":"Spring/Spring-AOP/Spring-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Spring-Proxy/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping","slug":"jpa/jpa-programming/mapping/inheritance-mapping","date":"2021-11-25T19:31:46.000Z","updated":"2024-11-28T13:59:27.094Z","comments":true,"path":"2021/11/26/jpa/jpa-programming/mapping/inheritance-mapping/","link":"","permalink":"https://ckck803.github.io/2021/11/26/jpa/jpa-programming/mapping/inheritance-mapping/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ JPA ìƒì† ê´€ê³„ Mapping ê´€ê³„í˜• ë°ì´í„° ë² ì´ìŠ¤ëŠ” ìƒì† ê´€ê³„ê°€ ì—†ë‹¤. ìŠˆí´íƒ€ì… ì„œë¸Œíƒ€ì… ê´€ê³„ë¼ëŠ” ëª¨ë¸ë§ ê¸°ë²•ì´ ê°ì²´ì˜ ìƒì†ê³¼ ìœ ì‚¬í•˜ë‹¤. ìƒì†ê´€ê³„ Mapping : ê°ì²´ì˜ ìƒì† ê´€ê³„ì™€ DB ì˜ ìŠˆí¼íƒ€ì… ì„œë¸Œíƒ€ì… ê´€ê³„ë¥¼ Mapping ìŠˆí¼íƒ€ì… ì„œë¸Œíƒ€ì… ë…¼ë¦¬ ëª¨ë¸ì„ ê°ì²´ì˜ ìƒì†ê´€ê³„ë¥¼ ë¬¼ë¦¬ ëª¨ë¸ë¡œ êµ¬í˜„í•˜ëŠ” ë°©ë²• ê°ì²´ì˜ ìƒì†ê´€ê³„ë¥¼ ìŠˆí¼íƒ€ì… ì„œë¸Œíƒ€ì… ëª¨ë¸ë¡œ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ 3ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤. ì „ëµ ì„¤ëª… ì¡°ì¸ ì „ëµ ê°ê° í…Œì´ë¸”ë¡œ ë³€í™˜ (ì—°ê´€ ê´€ê³„ë¡œ ê´€ë¦¬) ë‹¨ì¼ í…Œì´ë¸” ì „ëµ í†µí•© í…Œì´ë¸”ë¡œ ë³€í™˜ (í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ ê´€ë¦¬) êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ ì„œë¸Œíƒ€ì… í…Œì´ë¸”ë¡œ ë³€í™˜ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ @Inheritance @DiscriminatorColumn(name&#x3D;â€DTYPEâ€) @DiscriminotorValue @Inheritance ì „ëµ","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ JPA ìƒì† ê´€ê³„ Mapping ê´€ê³„í˜• ë°ì´í„° ë² ì´ìŠ¤ëŠ” ìƒì† ê´€ê³„ê°€ ì—†ë‹¤. ìŠˆí´íƒ€ì… ì„œë¸Œíƒ€ì… ê´€ê³„ë¼ëŠ” ëª¨ë¸ë§ ê¸°ë²•ì´ ê°ì²´ì˜ ìƒì†ê³¼ ìœ ì‚¬í•˜ë‹¤. ìƒì†ê´€ê³„ Mapping : ê°ì²´ì˜ ìƒì† ê´€ê³„ì™€ DB ì˜ ìŠˆí¼íƒ€ì… ì„œë¸Œíƒ€ì… ê´€ê³„ë¥¼ Mapping ìŠˆí¼íƒ€ì… ì„œë¸Œíƒ€ì… ë…¼ë¦¬ ëª¨ë¸ì„ ê°ì²´ì˜ ìƒì†ê´€ê³„ë¥¼ ë¬¼ë¦¬ ëª¨ë¸ë¡œ êµ¬í˜„í•˜ëŠ” ë°©ë²• ê°ì²´ì˜ ìƒì†ê´€ê³„ë¥¼ ìŠˆí¼íƒ€ì… ì„œë¸Œíƒ€ì… ëª¨ë¸ë¡œ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ 3ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤. ì „ëµ ì„¤ëª… ì¡°ì¸ ì „ëµ ê°ê° í…Œì´ë¸”ë¡œ ë³€í™˜ (ì—°ê´€ ê´€ê³„ë¡œ ê´€ë¦¬) ë‹¨ì¼ í…Œì´ë¸” ì „ëµ í†µí•© í…Œì´ë¸”ë¡œ ë³€í™˜ (í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ ê´€ë¦¬) êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ ì„œë¸Œíƒ€ì… í…Œì´ë¸”ë¡œ ë³€í™˜ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ @Inheritance @DiscriminatorColumn(name&#x3D;â€DTYPEâ€) @DiscriminotorValue @Inheritance ì „ëµ strategy ì„¤ëª… InheritanceType.JOINED ì¡°ì¸ ì „ëµ InheritanceType.SINGLE_TABLE ë‹¨ì¼ í…Œì´ë¸” ì „ëµ InheritanceType.TABLE_PER_CLASS êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ @Entitypublic class Item &#123; @Id @GeneratedValue private Long id; private String name; private int price;&#125; @Entitypublic class Album extends Item &#123; private String artist;&#125; @Entitypublic class Book extends Item&#123; private String author; private String isbn;&#125; @Entitypublic class Movie extends Item&#123; private String director; private String actor;&#125; 1. ì¡°ì¸ ì „ëµ @Inheritance(strategy &#x3D; InheritanceType.JOINED) Hibernate: create table Album (artist varchar(255), id bigint not null, primary key (id))Hibernate: create table Book (author varchar(255), isbn varchar(255), id bigint not null, primary key (id))Hibernate: create table Item (id bigint not null, name varchar(255), price integer not null, primary key (id))Hibernate: create table Movie (actor varchar(255), director varchar(255), id bigint not null, primary key (id))Hibernate: alter table Album add constraint FKcve1ph6vw9ihye8rbk26h5jm9 foreign key (id) references ItemHibernate: alter table Book add constraint FKbwwc3a7ch631uyv1b5o9tvysi foreign key (id) references ItemHibernate: alter table Movie add constraint FK5sq6d5agrc34ithpdfs0umo9g foreign key (id) references Item Movie movie = new Movie();movie.setDirector(&quot;aaaa&quot;);movie.setActor(&quot;bbbb&quot;);movie.setName(&quot;ë°”ëŒê³¼ í•¨ê»˜ ì‚¬ë¼ì§€ë‹¤.&quot;);movie.setPrice(10000);em.persist(movie);em.flush();em.clear();em.find(Movie.class, movie.getId()); ë°ì´í„° ì‚½ì…ë°ì´í„° ì‚½ì…ì‹œ ìŠˆí¼íƒ€ì…ê³¼ ì„œë¸Œíƒ€ì… ê°ê°ì— ì¿¼ë¦¬ë¬¸ì— ë³´ë‚´ì§€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Hibernate: /* insert hellojpa.Movie */ insert into Item (name, price, id) values (?, ?, ?)Hibernate: /* insert hellojpa.Movie */ insert into Movie (actor, director, id) values (?, ?, ?) ë°ì´í„° ì¡°íšŒë°ì´í„° ì¡°íšŒì‹œ ìŠˆí¼íƒ€ì…ê³¼ ì„œë¸Œíƒ€ì…ì„ ì¡°ì¸í•´ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Hibernate: select movie0_.id as id1_2_0_, movie0_1_.name as name2_2_0_, movie0_1_.price as price3_2_0_, movie0_.actor as actor1_4_0_, movie0_.director as director2_4_0_ from Movie movie0_ inner join Item movie0_1_ on movie0_.id=movie0_1_.id where movie0_.id=? DTYPE ì´ ìˆì„ ê²½ìš° DTYPE ì´ ì—†ì„ ê²½ìš° @DiscriminatorColumn ë¥¼ ì´ìš©í•´ DTYPE ì„ ëª…ì‹œí•´ ì¤„ ìˆ˜ ìˆë‹¤. DTYPE ê°’ì€ @DiscriminotorValue ë¥¼ ì´ìš©í•´ ëª…ì‹œí•´ ì¤„ ìˆ˜ ìˆë‹¤. ê¸°ë³¸ê°’ì€ Entity Class ëª…ì´ë‹¤. ì–´ë–¤ ê°ì²´ì— ë§ì¶°ì„œ ìŠˆí¼íƒ€ì… ë°ì´í„° ê°€ ë“¤ì–´ì™”ëŠ”ì§€ ëª…í™•í•˜ê²Œ ì•Œ ìˆ˜ ìˆë‹¤. 2. ë‹¨ì¼ í…Œì´ë¸” ì „ëµ - JPA ê¸°ë³¸ ì „ëµ @Inheritance(strategy &#x3D; InheritanceType.SINGLE_TABLE) í•œ í…Œì´ë¸”ì— ëª¨ë“  ë°ì´í„°ê°€ ë“¤ì–´ê°€ ê´€ë¦¬ë˜ëŠ” ë°©ì‹ í•œ í…Œì´ë¸”ì— ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— DTYPE ì´ ìë™ì ìœ¼ë¡œ ìƒì„±ëœë‹¤. Hibernate: create table Item ( DTYPE varchar(31) not null, id bigint generated by default as identity, name varchar(255), price integer not null, artist varchar(255), author varchar(255), isbn varchar(255), actor varchar(255), director varchar(255), primary key (id)) Hibernate: /* insert hellojpa.Movie */ insert into Item (id, name, price, actor, director, DTYPE) values (null, ?, ?, ?, ?, &#x27;Movie&#x27;)Hibernate: select movie0_.id as id2_0_0_, movie0_.name as name3_0_0_, movie0_.price as price4_0_0_, movie0_.actor as actor8_0_0_, movie0_.director as director9_0_0_ from Item movie0_ where movie0_.id=? and movie0_.DTYPE=&#x27;Movie&#x27; 3. êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ Item Table ìƒì„± ì¿¼ë¦¬ê°€ ë³„ë„ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Hibernate: create table Album (id bigint not null, name varchar(255), price integer not null, artist varchar(255), primary key (id))Hibernate: create table Book (id bigint not null, name varchar(255), price integer not null, author varchar(255), isbn varchar(255), primary key (id))Hibernate: create table Movie (id bigint not null, name varchar(255), price integer not null, actor varchar(255), director varchar(255), primary key (id)) êµ¬í˜„ í…Œì´ë¸” ë§ˆë‹¤ í…Œì´ë¸” ì „ëµì€ ìƒìœ„ íƒ€ì…ìœ¼ë¡œ ë°ì´í„° ì¡°íšŒì‹œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ì„œë¸Œ íƒ€ì… í…Œì´ë¸”ì„ ì „ë¶€ UNION í•´ì„œ ì¡°íšŒ ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸í•œ í›„ ê°€ì ¸ì˜¨ë‹¤. Hibernate: select item0_.id as id1_2_0_, item0_.name as name2_2_0_, item0_.price as price3_2_0_, item0_.artist as artist1_0_0_, item0_.author as author1_1_0_, item0_.isbn as isbn2_1_0_, item0_.actor as actor1_4_0_, item0_.director as director2_4_0_, item0_.clazz_ as clazz_0_ from ( select id, name, price, artist, null as author, null as isbn, null as actor, null as director, 1 as clazz_ from Album union all select id, name, price, null as artist, author, isbn, null as actor, null as director, 2 as clazz_ from Book union all select id, name, price, null as artist, null as author, null as isbn, actor, director, 3 as clazz_ from Movie ) item0_ where item0_.id=?","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2","slug":"spring/spring-aop/design-pattern/dynamic-proxy/dynamic-proxy-02","date":"2021-11-25T18:31:07.000Z","updated":"2024-02-26T15:23:36.207Z","comments":true,"path":"2021/11/26/spring/spring-aop/design-pattern/dynamic-proxy/dynamic-proxy-02/","link":"","permalink":"https://ckck803.github.io/2021/11/26/spring/spring-aop/design-pattern/dynamic-proxy/dynamic-proxy-02/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ public class LogTraceBasicHandler implements InvocationHandler &#123; private final Object target; private final LogTrace logTrace; public LogTraceBasicHandler(Object target, LogTrace logTrace) &#123; this.target = target; this.logTrace = logTrace; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; TraceStatus status = null; try &#123; String message = method.getDeclaringClass().getSimpleName() + &quot;.&quot; + method.getName() + &quot;()&quot;; status = logTrace.begin(message); // ë¡œì§ í˜¸ì¶œ method.invoke(target, args); logTrace.end(status); return result; &#125; catch (Exception ex) &#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; @Configurationpublic class DynamicBasicProxyConfig &#123; @Bean public OrderControllerV1 orderControllerV1(LogTrace logTrace)&#123; OrderControllerV1 orderControllerV1 = new OrderControllerV1Impl(orderServiceV1(logTrace)); // Proxy ê°ì²´ ìƒì„± OrderControllerV1 proxy = (OrderControllerV1) Proxy .newProxyInstance( OrderControllerV1.class.getClassLoader(), new Class[]&#123;OrderControllerV1.class&#125;, new LogTraceBasicHandler(orderControllerV1, logTrace)); return proxy; &#125; @Bean public OrderServiceV1 orderServiceV1(LogTrace logTrace)&#123; OrderServiceV1 orderServiceV1 = new OrderServiceV1Impl(orderRepositoryV1(logTrace)); // Proxy ê°ì²´ ìƒì„± OrderServiceV1 proxy = (OrderServiceV1) Proxy .newProxyInstance( OrderServiceV1.class.getClassLoader(), new Class[]&#123;OrderServiceV1.class&#125;, new LogTraceBasicHandler(orderServiceV1, logTrace)); return proxy; &#125; @Bean public OrderRepositoryV1 orderRepositoryV1(LogTrace logTrace)&#123; OrderRepositoryV1 orderRepository = new OrderRepositoryV1Impl(); // Proxy ê°ì²´ ìƒì„± OrderRepositoryV1 proxy = (OrderRepositoryV1) Proxy .newProxyInstance( OrderRepositoryV1.class.getClassLoader(), new Class[]&#123;OrderRepositoryV1.class&#125;, new LogTraceBasicHandler(orderRepository, logTrace)); return proxy; &#125;&#125; @Import(DynamicBasicProxyConfig.class)@SpringBootApplication(scanBasePackages = &quot;hello.proxy.app&quot;) //ì£¼ì˜public class ProxyApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProxyApplication.class, args); &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125; 2021-11-28 22:18:58.331 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] OrderControllerV1.request()2021-11-28 22:18:58.333 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] |--&gt;OrderServiceV1.orderItem()2021-11-28 22:18:58.333 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] | |--&gt;OrderRepositoryV1.save()2021-11-28 22:18:59.338 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] | |&lt;--OrderRepositoryV1.save() time=1005ms2021-11-28 22:18:59.338 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] |&lt;--OrderServiceV1.orderItem() time=1006ms2021-11-28 22:18:59.339 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] OrderControllerV1.request() time=1007ms íŠ¹ì • ë©”ì†Œë“œì—ë§Œ ë¶€ê°€ê¸°ëŠ¥ ë¡œì§ ì ìš©PatternMatchUtils.simpleMatch ë¥¼ ì‚¬ìš©í•´ ë©”ì†Œë“œ ì´ë¦„ì´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ Pattern Matching í•œë‹¤.","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ public class LogTraceBasicHandler implements InvocationHandler &#123; private final Object target; private final LogTrace logTrace; public LogTraceBasicHandler(Object target, LogTrace logTrace) &#123; this.target = target; this.logTrace = logTrace; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; TraceStatus status = null; try &#123; String message = method.getDeclaringClass().getSimpleName() + &quot;.&quot; + method.getName() + &quot;()&quot;; status = logTrace.begin(message); // ë¡œì§ í˜¸ì¶œ method.invoke(target, args); logTrace.end(status); return result; &#125; catch (Exception ex) &#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; @Configurationpublic class DynamicBasicProxyConfig &#123; @Bean public OrderControllerV1 orderControllerV1(LogTrace logTrace)&#123; OrderControllerV1 orderControllerV1 = new OrderControllerV1Impl(orderServiceV1(logTrace)); // Proxy ê°ì²´ ìƒì„± OrderControllerV1 proxy = (OrderControllerV1) Proxy .newProxyInstance( OrderControllerV1.class.getClassLoader(), new Class[]&#123;OrderControllerV1.class&#125;, new LogTraceBasicHandler(orderControllerV1, logTrace)); return proxy; &#125; @Bean public OrderServiceV1 orderServiceV1(LogTrace logTrace)&#123; OrderServiceV1 orderServiceV1 = new OrderServiceV1Impl(orderRepositoryV1(logTrace)); // Proxy ê°ì²´ ìƒì„± OrderServiceV1 proxy = (OrderServiceV1) Proxy .newProxyInstance( OrderServiceV1.class.getClassLoader(), new Class[]&#123;OrderServiceV1.class&#125;, new LogTraceBasicHandler(orderServiceV1, logTrace)); return proxy; &#125; @Bean public OrderRepositoryV1 orderRepositoryV1(LogTrace logTrace)&#123; OrderRepositoryV1 orderRepository = new OrderRepositoryV1Impl(); // Proxy ê°ì²´ ìƒì„± OrderRepositoryV1 proxy = (OrderRepositoryV1) Proxy .newProxyInstance( OrderRepositoryV1.class.getClassLoader(), new Class[]&#123;OrderRepositoryV1.class&#125;, new LogTraceBasicHandler(orderRepository, logTrace)); return proxy; &#125;&#125; @Import(DynamicBasicProxyConfig.class)@SpringBootApplication(scanBasePackages = &quot;hello.proxy.app&quot;) //ì£¼ì˜public class ProxyApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProxyApplication.class, args); &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125; 2021-11-28 22:18:58.331 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] OrderControllerV1.request()2021-11-28 22:18:58.333 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] |--&gt;OrderServiceV1.orderItem()2021-11-28 22:18:58.333 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] | |--&gt;OrderRepositoryV1.save()2021-11-28 22:18:59.338 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] | |&lt;--OrderRepositoryV1.save() time=1005ms2021-11-28 22:18:59.338 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] |&lt;--OrderServiceV1.orderItem() time=1006ms2021-11-28 22:18:59.339 INFO 3357 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [4e72efcd] OrderControllerV1.request() time=1007ms íŠ¹ì • ë©”ì†Œë“œì—ë§Œ ë¶€ê°€ê¸°ëŠ¥ ë¡œì§ ì ìš©PatternMatchUtils.simpleMatch ë¥¼ ì‚¬ìš©í•´ ë©”ì†Œë“œ ì´ë¦„ì´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ Pattern Matching í•œë‹¤. pattern : pattern ê³¼ ì •í™•íˆ ë§¤ì¹­ë˜ë©´ ì°¸ pattern* : pattern ìœ¼ë¡œ ì‹œì‘í•˜ë©´ ì°¸ *pattern : pattern ìœ¼ë¡œ ëë‚˜ë©´ ì°¸ *pattern* : pattern ì´ ìˆìœ¼ë©´ ì°¸ public class LogTraceFilterHandler implements InvocationHandler &#123; private final Object target; private final LogTrace logTrace; private final String[] patterns; public LogTraceFilterHandler(Object target, LogTrace logTrace, String[] patterns) &#123; this.target = target; this.logTrace = logTrace; this.patterns = patterns; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; // ë©”ì„œë“œ ì´ë¦„ í•„í„° String methodName = method.getName(); // save, request, reque*, *est // íŠ¹ì • ì¡°ê±´ì´ ë§ëŠ” ê°ì²´ì— ê³µí†µ ê¸°ëŠ¥ì„ ì ìš©í•œë‹¤. if(!PatternMatchUtils.simpleMatch(patterns, methodName))&#123; return method.invoke(target, args); &#125; TraceStatus status = null; try &#123; String message = method.getDeclaringClass().getSimpleName() + &quot;.&quot; + method.getName() + &quot;()&quot;; status = logTrace.begin(message); // ë¡œì§ í˜¸ì¶œ Object result = method.invoke(target, args); logTrace.end(status); return result; &#125; catch (Exception ex) &#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; public class DynamicProxyFilterConfig &#123; private static final String[] PATTERNS = &#123;&quot;request*&quot;, &quot;order*&quot;, &quot;save*&quot;&#125;; @Bean public OrderControllerV1 orderControllerV1(LogTrace logTrace)&#123; OrderControllerV1 orderControllerV1 = new OrderControllerV1Impl(orderServiceV1(logTrace)); OrderControllerV1 proxy = (OrderControllerV1) Proxy.newProxyInstance(OrderControllerV1.class.getClassLoader(), new Class[]&#123;OrderControllerV1.class&#125;, new LogTraceFilterHandler(orderControllerV1, logTrace, PATTERNS)); return proxy; &#125; @Bean public OrderServiceV1 orderServiceV1(LogTrace logTrace)&#123; OrderServiceV1 orderServiceV1 = new OrderServiceV1Impl(orderRepositoryV1(logTrace)); OrderServiceV1 proxy = (OrderServiceV1) Proxy.newProxyInstance(OrderServiceV1.class.getClassLoader(), new Class[]&#123;OrderServiceV1.class&#125;, new LogTraceFilterHandler(orderServiceV1, logTrace, PATTERNS)); return proxy; &#125; @Bean public OrderRepositoryV1 orderRepositoryV1(LogTrace logTrace)&#123; OrderRepositoryV1 orderRepository = new OrderRepositoryV1Impl(); OrderRepositoryV1 proxy = (OrderRepositoryV1) Proxy.newProxyInstance(OrderRepositoryV1.class.getClassLoader(), new Class[]&#123;OrderRepositoryV1.class&#125;, new LogTraceFilterHandler(orderRepository, logTrace, PATTERNS)); return proxy; &#125;&#125; @Import(DynamicProxyFilterConfig.class)@SpringBootApplication(scanBasePackages = &quot;hello.proxy.app&quot;) //ì£¼ì˜public class ProxyApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProxyApplication.class, args); &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Dynamic Proxy","slug":"Spring/Spring-ê³ ê¸‰í¸/Dynamic-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Dynamic-Proxy/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1","slug":"spring/spring-aop/design-pattern/dynamic-proxy/dynamic-proxy-01","date":"2021-11-25T17:31:07.000Z","updated":"2024-02-26T15:23:31.785Z","comments":true,"path":"2021/11/26/spring/spring-aop/design-pattern/dynamic-proxy/dynamic-proxy-01/","link":"","permalink":"https://ckck803.github.io/2021/11/26/spring/spring-aop/design-pattern/dynamic-proxy/dynamic-proxy-01/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ JDK ë™ì  í”„ë¡ì‹œ JDK ë™ì  í”„ë¡ì‹œëŠ” ì¸í„°í˜ì´ìŠ¤ ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡ì‹œ ë¥¼ ë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.JDK ë™ì  í”„ë¡ì‹œëŠ” ìë°” ë¦¬í”Œë ‰ì…˜(Reflection) ì„ ì´ìš©í•˜ì—¬ ëŸ°íƒ€ì„ ì‹œì— ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” í”„ë¡ì‹œ ê°ì²´ ë¥¼ ìƒì„±í•˜ëŠ” ê¸°ìˆ  ë™ì  í”„ë¡ì‹œ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ë©´ ê°œë°œìê°€ ì§ì ‘ Proxy í´ë˜ìŠ¤ë¥¼ ìƒì„±í•  í•„ìš”ê°€ ì—†ì´ ëŸ°íƒ€ì„ì‹œ ë¦¬í”Œë™ì…˜ì˜ Proxy í´ë˜ìŠ¤ê°€ ë™ì ìœ¼ë¡œ ìƒì„±í•´ì¤€ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. í•˜ì§€ë§Œ, ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ëŸ°íƒ€ì„ ì—ëŸ¬ ê°€ ë°œìƒí•˜ë¯€ë¡œ ì»´íŒŒì¼ ì‹œ ì˜¤ë¥˜ë¥¼ ì°¾ê¸°ê°€ ì–´ë ¤ìš´ ë¬¸ì œì  ë˜í•œ ì¡´ì¬í•œë‹¤. ë™ì  í”„ë¡ì‹œ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ë©´ ëŸ°íƒ€ì„ì‹œ í”„ë¡ì‹œ ê°ì²´ ë¥¼ ìƒì„±í•´ì¤€ë‹¤. ë¦¬í”Œë ‰ì…˜ ì„ ì´ìš©í•´ í”„ë¡ì‹œë¥¼ ìƒì„±í•œë‹¤. íƒ€ê²Ÿ ì¸í„°í˜ì´ìŠ¤ì™€ ë™ì¼í•œ í˜•íƒœë¡œ ìƒì„± FactoryBean ì„ í†µí•´ì„œ ìƒì„± í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ë³¸ ê°ì²´ì˜ ëŒ€ë¦¬ì ì—­í• ì„ í•˜ë©°, í´ë¼ì´ì–¸íŠ¸ê°€ í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ì›ë³¸ ê°ì²´ì— ì ‘ê·¼í•˜ë©´, í”„ë¡ì‹œ ê°ì²´ê°€ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ í•„ìš”í•œ ì „ì²˜ë¦¬ë‚˜ í›„ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•œ í›„, ìµœì¢… ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ë™ì  í”„ë¡ì‹œëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì„œë“œ í˜¸ì¶œì„ ê°€ë¡œì±„ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ì„œ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, AOP(Aspect Oriented Programming)ì—ì„œëŠ” ë™ì  í”„ë¡ì‹œë¥¼ ì´ìš©í•´ì„œ ë©”ì„œë“œ í˜¸ì¶œ ì „í›„ì— ë¡œê·¸ë¥¼ ë‚¨ê¸°ê±°ë‚˜, ë³´ì•ˆ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•˜ê±°ë‚˜, íŠ¸ëœì­ì…˜ ê´€ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JDKì—ì„œëŠ” java.lang.reflect íŒ¨í‚¤ì§€ì—ì„œ Proxy í´ë˜ìŠ¤ ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ì˜ ì •ì  ë©”ì„œë“œì¸ newProxyInstance() ë©”ì„œë“œë¥¼ ì´ìš©í•˜ë©´, ì¸í„°í˜ì´ìŠ¤ì™€ InvocationHandler ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ì „ë‹¬í•˜ì—¬ ë™ì  í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ, InvocationHandler ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì—ì„œëŠ” invoke() ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì—¬ ì›ë³¸ ê°ì²´ì˜ ë©”ì„œë“œ í˜¸ì¶œì„ ê°€ë¡œì±„ì„œ í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤. newProxyInstance","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ JDK ë™ì  í”„ë¡ì‹œ JDK ë™ì  í”„ë¡ì‹œëŠ” ì¸í„°í˜ì´ìŠ¤ ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡ì‹œ ë¥¼ ë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.JDK ë™ì  í”„ë¡ì‹œëŠ” ìë°” ë¦¬í”Œë ‰ì…˜(Reflection) ì„ ì´ìš©í•˜ì—¬ ëŸ°íƒ€ì„ ì‹œì— ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” í”„ë¡ì‹œ ê°ì²´ ë¥¼ ìƒì„±í•˜ëŠ” ê¸°ìˆ  ë™ì  í”„ë¡ì‹œ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ë©´ ê°œë°œìê°€ ì§ì ‘ Proxy í´ë˜ìŠ¤ë¥¼ ìƒì„±í•  í•„ìš”ê°€ ì—†ì´ ëŸ°íƒ€ì„ì‹œ ë¦¬í”Œë™ì…˜ì˜ Proxy í´ë˜ìŠ¤ê°€ ë™ì ìœ¼ë¡œ ìƒì„±í•´ì¤€ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. í•˜ì§€ë§Œ, ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ëŸ°íƒ€ì„ ì—ëŸ¬ ê°€ ë°œìƒí•˜ë¯€ë¡œ ì»´íŒŒì¼ ì‹œ ì˜¤ë¥˜ë¥¼ ì°¾ê¸°ê°€ ì–´ë ¤ìš´ ë¬¸ì œì  ë˜í•œ ì¡´ì¬í•œë‹¤. ë™ì  í”„ë¡ì‹œ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ë©´ ëŸ°íƒ€ì„ì‹œ í”„ë¡ì‹œ ê°ì²´ ë¥¼ ìƒì„±í•´ì¤€ë‹¤. ë¦¬í”Œë ‰ì…˜ ì„ ì´ìš©í•´ í”„ë¡ì‹œë¥¼ ìƒì„±í•œë‹¤. íƒ€ê²Ÿ ì¸í„°í˜ì´ìŠ¤ì™€ ë™ì¼í•œ í˜•íƒœë¡œ ìƒì„± FactoryBean ì„ í†µí•´ì„œ ìƒì„± í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ë³¸ ê°ì²´ì˜ ëŒ€ë¦¬ì ì—­í• ì„ í•˜ë©°, í´ë¼ì´ì–¸íŠ¸ê°€ í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ì›ë³¸ ê°ì²´ì— ì ‘ê·¼í•˜ë©´, í”„ë¡ì‹œ ê°ì²´ê°€ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ í•„ìš”í•œ ì „ì²˜ë¦¬ë‚˜ í›„ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•œ í›„, ìµœì¢… ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ë™ì  í”„ë¡ì‹œëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì„œë“œ í˜¸ì¶œì„ ê°€ë¡œì±„ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ì„œ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, AOP(Aspect Oriented Programming)ì—ì„œëŠ” ë™ì  í”„ë¡ì‹œë¥¼ ì´ìš©í•´ì„œ ë©”ì„œë“œ í˜¸ì¶œ ì „í›„ì— ë¡œê·¸ë¥¼ ë‚¨ê¸°ê±°ë‚˜, ë³´ì•ˆ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•˜ê±°ë‚˜, íŠ¸ëœì­ì…˜ ê´€ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JDKì—ì„œëŠ” java.lang.reflect íŒ¨í‚¤ì§€ì—ì„œ Proxy í´ë˜ìŠ¤ ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ì˜ ì •ì  ë©”ì„œë“œì¸ newProxyInstance() ë©”ì„œë“œë¥¼ ì´ìš©í•˜ë©´, ì¸í„°í˜ì´ìŠ¤ì™€ InvocationHandler ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ì „ë‹¬í•˜ì—¬ ë™ì  í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ, InvocationHandler ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì—ì„œëŠ” invoke() ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì—¬ ì›ë³¸ ê°ì²´ì˜ ë©”ì„œë“œ í˜¸ì¶œì„ ê°€ë¡œì±„ì„œ í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤. newProxyInstance Proxy í´ë˜ìŠ¤ ë‚´ ì •ì  ë©”ì†Œë“œë¡œ newProxyInstance ë¥¼ ì´ìš©í•´ ëŸ°íƒ€ì„ ì‹œ ë™ì ìœ¼ë¡œ í”„ë¡ì‹œ ê°ì²´ ë¥¼ ìƒì„± í›„ ë°˜í™˜í•œë‹¤. ì „ë‹¬ ë°›ì€ ì¸í„°í˜ì´ìŠ¤ ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Proxy í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œ í›„ JVM ì— ì˜¬ë¦¬ê³  Proxy ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. newProxyInstance ë©”ì†Œë“œëŠ” ì„¸ ê°œì˜ ì¸ìë¥¼ ë°›ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ì¸ìëŠ” ë™ì  í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  í´ë˜ìŠ¤ ë¡œë”(ClassLoader) ì…ë‹ˆë‹¤. ë‘ ë²ˆì§¸ ì¸ìëŠ” ë™ì  í”„ë¡ì‹œ ê°ì²´ê°€ êµ¬í˜„í•´ì•¼ í•  ì¸í„°í˜ì´ìŠ¤ ëª©ë¡ ì…ë‹ˆë‹¤. ì„¸ ë²ˆì§¸ ì¸ìëŠ” InvocationHandler ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ ì…ë‹ˆë‹¤. newProxyInstance ë©”ì†Œë“œëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ í”„ë¡ì‹œ ê°ì²´ëŠ” ì¸í„°í˜ì´ìŠ¤ ëª©ë¡ì— ì„ ì–¸ëœ ëª¨ë“  ë©”ì†Œë“œë¥¼ êµ¬í˜„í•˜ë©°, ì‹¤ì œ í˜¸ì¶œ ì‹œ InvocationHandlerì—ì„œ ì •ì˜í•œ ë¡œì§ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤. ClassLoader Proxy í´ë˜ìŠ¤ë¥¼ JVM ìœ¼ë¡œ ë¡œë“œí•  í´ë˜ìŠ¤ ë¡œë”, null ì„ ì „ë‹¬í•  ì‹œ ê¸°ë³¸ í´ë˜ìŠ¤ ë¡œë” ì‚¬ìš© Class&lt;?&gt; í”„ë¡ì‹œ í´ë˜ìŠ¤ê°€ êµ¬í˜„í•  ì¸í„°í˜ì´ìŠ¤ ëª©ë¡(ë°°ì—´) InvocationHandler ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆì„ë•Œ ì‹¤í–‰ë  Handler public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h) InvocationHandler InvocationHandler ë¥¼ ì´ìš©í•´ JDK ë™ì  í”„ë¡œì‹œì— ì ìš©í•  ê³µí†µ ë¡œì§ ì„ ê°œë°œí•œë‹¤. InvocationHandler ì¸í„°í˜ì´ìŠ¤ëŠ” invoke ë©”ì†Œë“œ í•˜ë‚˜ë§Œì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ì´ ë©”ì†Œë“œëŠ” ë™ì  í”„ë¡ì‹œ ê°ì²´ê°€ ì²˜ë¦¬í•´ì•¼ í•  ëª¨ë“  ë©”ì†Œë“œ í˜¸ì¶œì„ ê°€ë¡œì±„ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. invoke ë©”ì†Œë“œëŠ” ì„¸ ê°œì˜ ì¸ìë¥¼ ë°›ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ì¸ìëŠ” ë™ì  í”„ë¡ì‹œ ê°ì²´ ìì²´ì´ë©°, ë‘ ë²ˆì§¸ ì¸ìëŠ” ì›ë³¸ ê°ì²´ì˜ ë©”ì†Œë“œì…ë‹ˆë‹¤. ì„¸ ë²ˆì§¸ ì¸ìëŠ” ì›ë³¸ ê°ì²´ì˜ ë©”ì†Œë“œ í˜¸ì¶œ ì‹œ ì „ë‹¬ëœ ì¸ì ë°°ì—´ì…ë‹ˆë‹¤. InvocationHandlerë¥¼ êµ¬í˜„í•œ ê°ì²´ì—ì„œëŠ” invoke ë©”ì†Œë“œë¥¼ êµ¬í˜„í•˜ì—¬ í”„ë¡ì‹œ ê°ì²´ê°€ ìš”ì²­ì„ ê°€ë¡œì±Œ ë•Œ ì²˜ë¦¬í•´ì•¼ í•  ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë©”ì†Œë“œ í˜¸ì¶œ ì „í›„ì— ë¡œê·¸ë¥¼ ë‚¨ê¸°ê±°ë‚˜, ë©”ì†Œë“œ í˜¸ì¶œ ì‹œê°„ì„ ì¸¡ì •í•˜ê±°ë‚˜, íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. InvocationHandler.java public interface InvocationHandler &#123; public Object invoke(Object proxy, Method method, Object[] args) throws Throwable;&#125; Dynamic Proxy ìƒì„± InvocationHandler ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ ìƒì„±ì‹œ ì¶”ê°€í•  ë¡œì§ì„ ì •ì˜ í•œë‹¤. TimeInvocationHandler í´ë˜ìŠ¤ëŠ” Target í´ë˜ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œ ì‹œì‘ê³¼ ì¢…ë£Œ ë¡œê·¸ë¥¼ ì°ì–´ì£¼ëŠ” ê³µí†µ ë¡œì§ì„ ê°€ì§€ê³  ìˆë‹¤. @Slf4jpublic class TimeInvocationHandler implements InvocationHandler &#123; private final Object target; public TimeInvocationHandler(Object target) &#123; this.target = target; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; log.info(&quot;TimeProxy ì‹¤í–‰&quot;); long startTime = System.currentTimeMillis(); // Reflection ì„ ì´ìš©í•´ target ì¸ìŠ¤í„´ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤. args ëŠ” ë©”ì„œë“œ í˜¸ì¶œì‹œ ë„˜ê²¨ì¤„ ì¸ì Object result = method.invoke(target, args); long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;TimeProxy ì¢…ë£Œ resultTime = &#123;&#125;&quot;, resultTime); return result; &#125;&#125; newProxyInstance ë¥¼ ì´ìš©í•´ ë™ì ìœ¼ë¡œ Proxy ê°ì²´ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. public interface AInterface &#123; String call();&#125; @Slf4jpublic class AImpl implements AInterface&#123; @Override public String call() &#123; log.info(&quot;A í˜¸ì¶œ&quot;); return &quot;a&quot;; &#125;&#125; newProxyInstance ë¥¼ ì´ìš©í•´ ë™ì ìœ¼ë¡œ Proxy ê°ì²´ë¥¼ ìƒì„± newProxyInstance ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì‹¤ì œ ê°ì²´ì™€ ë™ì¼í•œ ì¸í„°í˜ì´ìŠ¤ ì™€ ë¶€ê°€ë¡œì§ ì´ ì¶”ê°€ëœ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. newProxyInstance ë©”ì†Œë“œëŠ” AInterface ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ ì‹œì‘ê³¼ ì¢…ë£Œ ë¡œê·¸ ë¥¼ ì°ì–´ì£¼ëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•œ í›„ ë°˜í™˜í•œë‹¤. ë°˜í™˜ëœ Proxy ê°ì²´ëŠ” AInterface ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ë¡œ ì‹¤ì œ ê°ì²´ì™€ ë™ì¼í•œ ë©”ì†Œë“œë¥¼ ì´ìš©í•´ í˜¸ì¶œí–ˆì„ë•Œ ì‹œì‘, ì¢…ë£Œ ë¡œê·¸ê°€ ì°íˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. @Testvoid dynamicA()&#123; AInterface target = new AImpl(); // ë™ì  Proxy ì— ì ìš©í•  Handler ë¡œì§ TimeInvocationHandler handler = new TimeInvocationHandler(target); // Proxy ê°ì²´ ìƒì„± AInterface proxy = (AInterface) Proxy // í˜„ì¬ Thread ì˜ Context Loader, Interface ë°°ì—´, InvocationHandler ê°ì²´ë¥¼ ì¸ìë¡œ ë„£ì–´ì¤€ë‹¤. .newProxyInstance(AInterface.class.getClassLoader(), new Class[]&#123;AInterface.class&#125;, handler); // Proxy ê°ì²´ í˜¸ì¶œ // Client ì—ì„œëŠ” ë™ì¼í•œ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. proxy.call(); log.info(&quot;targetClass = &#123;&#125;&quot;, target.getClass()); log.info(&quot;proxyClass = &#123;&#125;&quot;, proxy.getClass());&#125; í”„ë¡ì‹œ ê°ì²´ í˜¸ì¶œ ê²°ê³¼í”„ë¡ì‹œ ê°ì²´ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ AImpl ê°ì²´ë¥¼ í˜¸ì¶œí•˜ê¸° ì „ì— ì‹œì‘, ì¢…ë£Œ ë¡œê·¸ê°€ ì°íˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 17:43:18.808 [Test worker] INFO hello.proxy.jdkdynamic.code.TimeInvocationHandler - TimeProxy ì‹¤í–‰17:43:18.811 [Test worker] INFO hello.proxy.jdkdynamic.code.AImpl - A í˜¸ì¶œ17:43:18.811 [Test worker] INFO hello.proxy.jdkdynamic.code.TimeInvocationHandler - TimeProxy ì¢…ë£Œ resultTime = 017:43:18.812 [Test worker] INFO hello.proxy.jdkdynamic.JdkDynamicProxyTest - targetClass = class hello.proxy.jdkdynamic.code.AImpl17:43:18.813 [Test worker] INFO hello.proxy.jdkdynamic.JdkDynamicProxyTest - proxyClass = class com.sun.proxy.$Proxy12 public interface BInterface &#123; String call();&#125; @Slf4jpublic class BImpl implements BInterface&#123; @Override public String call() &#123; log.info(&quot;B í˜¸ì¶œ&quot;); return &quot;b&quot;; &#125;&#125; @Testvoid dynamicB()&#123; BInterface target = new BImpl(); TimeInvocationHandler handler = new TimeInvocationHandler(target); // Proxy ê°ì²´ ìƒì„± BInterface proxy = (BInterface) Proxy .newProxyInstance(BInterface.class.getClassLoader(), new Class[]&#123;BInterface.class&#125;, handler); proxy.call(); log.info(&quot;targetClass = &#123;&#125;&quot;, target.getClass()); log.info(&quot;proxyClass = &#123;&#125;&quot;, proxy.getClass());&#125; 17:49:03.329 [Test worker] INFO hello.proxy.jdkdynamic.code.TimeInvocationHandler - TimeProxy ì‹¤í–‰17:49:03.331 [Test worker] INFO hello.proxy.jdkdynamic.code.BImpl - B í˜¸ì¶œ17:49:03.331 [Test worker] INFO hello.proxy.jdkdynamic.code.TimeInvocationHandler - TimeProxy ì¢…ë£Œ resultTime = 017:49:03.333 [Test worker] INFO hello.proxy.jdkdynamic.JdkDynamicProxyTest - targetClass = class hello.proxy.jdkdynamic.code.BImpl17:49:03.333 [Test worker] INFO hello.proxy.jdkdynamic.JdkDynamicProxyTest - proxyClass = class com.sun.proxy.$Proxy12","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Dynamic Proxy","slug":"Spring/Spring-ê³ ê¸‰í¸/Dynamic-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Dynamic-Proxy/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜","slug":"spring/spring-aop/design-pattern/dynamic-proxy/reflection","date":"2021-11-25T16:31:07.000Z","updated":"2024-02-26T15:23:40.274Z","comments":true,"path":"2021/11/26/spring/spring-aop/design-pattern/dynamic-proxy/reflection/","link":"","permalink":"https://ckck803.github.io/2021/11/26/spring/spring-aop/design-pattern/dynamic-proxy/reflection/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ ë¦¬í”Œë ‰ì…˜ êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ íƒ€ì…ì„ ì•Œì§€ ëª»í•´ë„ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œ, íƒ€ì…, ë³€ìˆ˜ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ìë°” API ìë°” Reflection ì€ ì‹¤í–‰ ì¤‘ì¸ ìë°” í”„ë¡œê·¸ë¨ ì—ì„œ í´ë˜ìŠ¤ ì •ë³´ì— ì ‘ê·¼í•˜ë„ë¡ í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. Reflectionì„ ì‚¬ìš©í•˜ë©´ í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ì˜ ì´ë¦„, í•„ë“œì˜ ì´ë¦„, íƒ€ì… ë° ê°’, ë©”ì„œë“œì˜ ì´ë¦„, íŒŒë¼ë¯¸í„° íƒ€ì… ë“±ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  ì¡°ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê°ì²´ì˜ ìƒì„±, í•„ë“œê°’ ì„¤ì •, ë©”ì„œë“œ í˜¸ì¶œ ë“±ì„ ë™ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬í”Œë ‰ì…˜ - APIí´ë˜ìŠ¤ ì •ë³´ ê°€ì ¸ì˜¤ê¸° - forNameClass í´ë˜ìŠ¤ì˜ forName ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í´ë˜ìŠ¤ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì´ í´ë˜ìŠ¤ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Class&lt;?&gt; myClass = Class.forName(&quot;com.example.MyClass&quot;);","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ ë¦¬í”Œë ‰ì…˜ êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ íƒ€ì…ì„ ì•Œì§€ ëª»í•´ë„ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œ, íƒ€ì…, ë³€ìˆ˜ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ìë°” API ìë°” Reflection ì€ ì‹¤í–‰ ì¤‘ì¸ ìë°” í”„ë¡œê·¸ë¨ ì—ì„œ í´ë˜ìŠ¤ ì •ë³´ì— ì ‘ê·¼í•˜ë„ë¡ í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. Reflectionì„ ì‚¬ìš©í•˜ë©´ í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ì˜ ì´ë¦„, í•„ë“œì˜ ì´ë¦„, íƒ€ì… ë° ê°’, ë©”ì„œë“œì˜ ì´ë¦„, íŒŒë¼ë¯¸í„° íƒ€ì… ë“±ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  ì¡°ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê°ì²´ì˜ ìƒì„±, í•„ë“œê°’ ì„¤ì •, ë©”ì„œë“œ í˜¸ì¶œ ë“±ì„ ë™ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬í”Œë ‰ì…˜ - APIí´ë˜ìŠ¤ ì •ë³´ ê°€ì ¸ì˜¤ê¸° - forNameClass í´ë˜ìŠ¤ì˜ forName ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í´ë˜ìŠ¤ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì´ í´ë˜ìŠ¤ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Class&lt;?&gt; myClass = Class.forName(&quot;com.example.MyClass&quot;); ë©”ì„œë“œ ì •ë³´ ê°€ì ¸ì˜¤ê¸° - getMethodClass í´ë˜ìŠ¤ì˜ getMethod ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì„œë“œ ë©”íƒ€ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ë˜í•œ, ë©”ì„œë“œ í˜¸ì¶œì‹œ íŒŒë¼ë¯¸í„° ê°’ë“¤ì´ í•„ìš”í•œ ê²½ìš° parameterTypes ë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì„œë“œì˜ íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ë°°ì—´ í˜•íƒœë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Class&lt;?&gt; myClass = Class.forName(&quot;com.example.MyClass&quot;);// ë©”ì†Œë“œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ë•Œ íŒŒë¼ë¯¸í„° ì •ë³´ë¥¼ ë°°ì—´ í˜•íƒœë¡œ ê°™ì´ ë„˜ê²¨ì¤€ë‹¤.Method myMethod = myClass.getMethod(&quot;myMethod&quot;);// ë©”ì†Œë“œì— íŒŒë¼ë¯¸í„°ê°€ ìˆì„ ê²½ìš° ë°°ì—´ í˜•íƒœë¡œ ê°™ì´ ë„˜ê²¨ì¤€ë‹¤.Method myMethod = myClass.getMethod(&quot;myMethod&quot;, parameterTypes); ë©”ì„œë“œ í˜¸ì¶œí•˜ê¸° - invokeReflectionì„ ì‚¬ìš©í•˜ì—¬ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” Method í´ë˜ìŠ¤ì˜ invoke ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ target ê°ì²´ë‚´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Class&lt;?&gt; myClass = Class.forName(&quot;com.example.MyClass&quot;);Method myMethod = myClass.getMethod(&quot;myMethod&quot;);Object result = myMethod.invoke(target, args); target ê°ì²´ë‚´ ë©”ì†Œë“œ í˜¸ì¶œì‹œ ë‹¤ìŒê³¼ ê°™ì´ íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ì§€ì •í•´ì„œ í˜¸ì¶œí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. Class&lt;?&gt; myClass = MyClass.class;// ë©”ì†Œë“œ í˜¸ì¶œì‹œ íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•œ ê²½ìš° íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ì§€ì •í•´ì„œ ë©”ì†Œë“œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.Method myMethod = myClass.getMethod(&quot;myMethod&quot;, int.class, String.class);// ë©”ì†Œë“œ í˜¸ì¶œì‹œ íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•œ ê²½ìš° íŒŒë¼ë¯¸í„°ë¥¼ ë°°ì—´ í˜•íƒœë¡œ ê°™ì´ ë„˜ê²¨ì¤€ë‹¤. Object result = myMethod.invoke(target, 123, &quot;hello&quot;); í•„ë“œ ì •ë³´ ê°€ì ¸ì˜¤ê¸° - getFieldClass í´ë˜ìŠ¤ì˜ getField ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í•„ë“œ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. Class&lt;?&gt; myClass = Class.forName(&quot;com.example.MyClass&quot;);Field myField = myClass.getField(&quot;myField&quot;); í•„ë“œ ê°’ ê°€ì ¸ì˜¤ê¸° - getField í´ë˜ìŠ¤ì˜ get ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ target ê°ì²´ë‚´ í•„ë“œ ê°’ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. Class&lt;?&gt; myClass = Class.forName(&quot;com.example.MyClass&quot;);Field myField = myClass.getField(&quot;myField&quot;);Object fieldValue = myField.get(target); Reflection ì‚¬ìš©í•˜ê¸°@Testvoid reflection0()&#123; Hello target = new Hello(); // ê³µí†µ ë¡œì§ 1 ì‹œì‘ log.info(&quot;start&quot;); String result1 = target.callA(); // í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œë§Œ ë‹¤ë¦„ log.info(&quot;result = &#123;&#125;&quot;, result1); // ê³µí†µ ë¡œì§ 1 ì¢…ë£Œ // ê³µí†µ ë¡œì§ 2 ì‹œì‘ log.info(&quot;start&quot;); String result2 = target.callB(); // í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œë§ˆ ë‹¤ë¦„ log.info(&quot;result = &#123;&#125;&quot;, result2); // ê³µí†µ ë¡œì§ 2 ì¢…ë£Œ&#125;@Slf4jstatic class Hello()&#123; public String callA()&#123; log.info(&quot;callA&quot;); return &quot;A&quot;; &#125; public String callB()&#123; log.info(&quot;callB&quot;); return &quot;B&quot;; &#125;&#125; Reflection ì ìš© ì „ì²´ ì½”ë“œ íë¦„ì€ ë¹„ìŠ·í•˜ê³  ì¤‘ê°„ì— í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ í•˜ë‚˜ë§Œ ë‹¤ë¥´ë‹¤. log.info(&quot;start&quot;);String result = xxx(); // í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œë§ˆ ë‹¤ë¦„log.info(&quot;result = &#123;&#125;&quot;, result); @Testvoid reflection1() throws Exception&#123; // í´ë˜ìŠ¤ ì •ë³´ Class classHello = Class.forName(&quot;hello.proxy.jdkdynamic.ReflectionTest$Hello&quot;); Hello target = new Hello(); // CallA ë©”ì„œë“œ ì •ë³´ Method methodCallA = classHello.getMethod(&quot;callA&quot;); Object result1 = methodCallA.invoke(target); // ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ë¥¼ ë„˜ê²¨ì¤€ë‹¤. log.info(&quot;result = &#123;&#125;&quot;, result1); // CallB ë©”ì„œë“œ ì •ë³´ Method methodCallB = classHello.getMethod(&quot;callB&quot;); Object result2 = methodCallB.invoke(target); // ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ë¥¼ ë„˜ê²¨ì¤€ë‹¤. log.info(&quot;result = &#123;&#125;&quot;, result2);&#125; 15:14:29.958 [Test worker] INFO hello.proxy.jdkdynamic.ReflectionTest$Hello - callA15:14:29.959 [Test worker] INFO hello.proxy.jdkdynamic.ReflectionTest - result = A15:14:29.960 [Test worker] INFO hello.proxy.jdkdynamic.ReflectionTest$Hello - callB15:14:29.960 [Test worker] INFO hello.proxy.jdkdynamic.ReflectionTest - result = B @Testvoid reflection2() throws Exception&#123; // í´ë˜ìŠ¤ ì •ë³´ Class classHello = Class.forName(&quot;hello.proxy.jdkdynamic.ReflectionTest$Hello&quot;); Hello target = new Hello(); // CallA ë©”ì„œë“œ ì •ë³´ Method methodCallA = classHello.getMethod(&quot;callA&quot;); dynamicCall(methodCallA, target); // CallB ë©”ì„œë“œ ì •ë³´ Method methodCallB = classHello.getMethod(&quot;callB&quot;); dynamicCall(methodCallB, target);&#125;private void dynamicCall(Method method, Object target) throws InvocationTargetException, IllegalAccessException &#123; log.info(&quot;start&quot;); Object result = method.invoke(target); log.info(&quot;result = &#123;&#125;&quot;, result);&#125; ë¦¬í”Œë ‰ì…˜ ë‹¨ì  í´ë˜ìŠ¤ì™€ ë©”ì„œë“œì˜ ë©”íƒ€ì •ë³´ë¥¼ ì´ìš©í•œ ë¦¬í”Œë ‰ì…˜ ê¸°ìˆ ì€ ëŸ°íƒ€ì„ ì— ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ì»´íŒŒì¼ ì‹œì ì—ì„œ ì—ëŸ¬ë¥¼ ì¡ì„ ìˆ˜ ì—†ë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Dynamic Proxy","slug":"Spring/Spring-ê³ ê¸‰í¸/Dynamic-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Dynamic-Proxy/"}],"tags":[]},{"title":"ì»´íŒŒì¼ ì–¸ì–´, ì¸í„°í”„ë¦¬í„° ì–¸ì–´, í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´","slug":"computer-science/programming-language/build","date":"2021-11-24T21:16:13.000Z","updated":"2024-11-28T13:59:37.604Z","comments":true,"path":"2021/11/25/computer-science/programming-language/build/","link":"","permalink":"https://ckck803.github.io/2021/11/25/computer-science/programming-language/build/","excerpt":"ë¹Œë“œ : ì†ŒìŠ¤ ì½”ë“œë¥¼ ì»´í“¨í„°ì—ì„œ ì‹¤í–‰í•˜ëŠ¥í•œ íŒŒì¼ë¡œ ë§Œë“œëŠ” ê³¼ì • ì»´íŒŒì¼ : ì›ì‹œ ì½”ë“œì—ì„œ ëª©ì  ì½”ë“œë¡œ ë²ˆì—­í•˜ëŠ” ê³¼ì •","text":"ë¹Œë“œ : ì†ŒìŠ¤ ì½”ë“œë¥¼ ì»´í“¨í„°ì—ì„œ ì‹¤í–‰í•˜ëŠ¥í•œ íŒŒì¼ë¡œ ë§Œë“œëŠ” ê³¼ì • ì»´íŒŒì¼ : ì›ì‹œ ì½”ë“œì—ì„œ ëª©ì  ì½”ë“œë¡œ ë²ˆì—­í•˜ëŠ” ê³¼ì •","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Develop Lanuage","slug":"CS/Develop-Lanuage","permalink":"https://ckck803.github.io/categories/CS/Develop-Lanuage/"}],"tags":[]},{"title":"ì»´íŒŒì¼ ì–¸ì–´, ì¸í„°í”„ë¦¬í„° ì–¸ì–´, í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´","slug":"computer-science/programming-language/compile-interpreter","date":"2021-11-24T21:16:13.000Z","updated":"2024-11-28T13:59:37.677Z","comments":true,"path":"2021/11/25/computer-science/programming-language/compile-interpreter/","link":"","permalink":"https://ckck803.github.io/2021/11/25/computer-science/programming-language/compile-interpreter/","excerpt":"ì»´íŒŒì¼ ì–¸ì–´, ì¸í„°í”„ë¦¬í„° ì–¸ì–´, í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ ê°ì²´ ì§€í–¥ 3ìš”ì†Œ ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID ì»´íŒŒì¼ ì–¸ì–´, ì¸í„°í”„ë¦¬í„° ì–¸ì–´, í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ì»´íŒŒì¼ ì–¸ì–´ ê³ ê¸‰ ì–¸ì–´ë¡œ ì‘ì„±ëœ ì½”ë“œë¥¼ Compiler(ì»´íŒŒì¼ëŸ¬) ë¥¼ ì´ìš©í•´ ëª©ì  ì½”ë“œ ë¡œ ë²ˆì—­í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ëŠ” ì–¸ì–´ì¢ì€ ì˜ë¯¸ì—ì„œëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ ê¸°ê³„ì–´ ë¡œ ë²ˆì—­í•´ì£¼ëŠ” ê³¼ì •ì„ ì»´íŒŒì¼ì´ë¼ í•œë‹¤. í”„ë¡œê·¸ë¨ì„ í•œë²ˆì— ë²ˆì—°í•œ í›„ ì‹¤í–‰í•œë‹¤. í•œë²ˆì— ëª¨ë“  ì†ŒìŠ¤ë¥¼ ë²ˆì—­í•˜ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ í¬ë‹¤. ë²ˆì—­ ì†ë„ê°€ ëŠë¦¼ ì‹¤í–‰ ì†ë„ëŠ” ë¹ ë¦„ ë²ˆì—­ê³¼ ì‹¤í–‰ì´ ë”°ë¡œ ì´ë¤„ì§€ê¸° ë•Œë¬¸ì— ì‹¤í–‰ íŒŒì¼ (ex. .exe) ì´ ìƒì„±ëœë‹¤. C, C++ ì–¸ì–´ê°€ ëŒ€í‘œì ì¸ ì»´íŒŒì¼ ì–¸ì–´ë‹¤. ì¸í„°í”„ë¦¬í„° ì–¸ì–´ ì»´íŒŒì¼ ì–¸ì–´ì™€ëŠ” ë‹¤ë¥´ê²Œ ì†ŒìŠ¤ì½”ë“œë¥¼ ì›ì‹œì½”ë“œ(ê¸°ê³„ì–´)ë¡œ ë²ˆì—­í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ì§€ ì•ŠëŠ” ì–¸ì–´Interpreter(ì¸í„°í”„ë¦¬í„°) ë¥¼ ì´ìš©í•´ í•œì¤„ì”© ì½ì–´ê°€ë©´ì„œ ëª…ë ¹ì„ ì²˜ë¦¬í•œë‹¤. ë²ˆì—­ ì†ë„ê°€ ë¹ ë¦„ ì‹¤í–‰ ì†ë„ëŠ” ëŠë¦¼ ë²ˆì—­ê³¼ ì‹¤í–‰ì´ í•œë²ˆì— ì´ë¤„ì§€ê¸° ë•Œë¬¸ì— ë³„ë„ì˜ ì‹¤í–‰íŒŒì¼ì´ ë§Œë“¤ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤. Python, Javascript ê°€ ëŒ€í‘œì ì¸ ì¸í„°í”„ë¦¬í„° ì–¸ì–´ë‹¤. í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ ì»´íŒŒì¼ ê¸°ë²•ê³¼ ì¸í„°í”„ë¦¬í„° ê¸°ë²•ì„ ëª¨ë‘ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´","text":"ì»´íŒŒì¼ ì–¸ì–´, ì¸í„°í”„ë¦¬í„° ì–¸ì–´, í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ ê°ì²´ ì§€í–¥ 3ìš”ì†Œ ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID ì»´íŒŒì¼ ì–¸ì–´, ì¸í„°í”„ë¦¬í„° ì–¸ì–´, í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ì»´íŒŒì¼ ì–¸ì–´ ê³ ê¸‰ ì–¸ì–´ë¡œ ì‘ì„±ëœ ì½”ë“œë¥¼ Compiler(ì»´íŒŒì¼ëŸ¬) ë¥¼ ì´ìš©í•´ ëª©ì  ì½”ë“œ ë¡œ ë²ˆì—­í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ëŠ” ì–¸ì–´ì¢ì€ ì˜ë¯¸ì—ì„œëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ ê¸°ê³„ì–´ ë¡œ ë²ˆì—­í•´ì£¼ëŠ” ê³¼ì •ì„ ì»´íŒŒì¼ì´ë¼ í•œë‹¤. í”„ë¡œê·¸ë¨ì„ í•œë²ˆì— ë²ˆì—°í•œ í›„ ì‹¤í–‰í•œë‹¤. í•œë²ˆì— ëª¨ë“  ì†ŒìŠ¤ë¥¼ ë²ˆì—­í•˜ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ í¬ë‹¤. ë²ˆì—­ ì†ë„ê°€ ëŠë¦¼ ì‹¤í–‰ ì†ë„ëŠ” ë¹ ë¦„ ë²ˆì—­ê³¼ ì‹¤í–‰ì´ ë”°ë¡œ ì´ë¤„ì§€ê¸° ë•Œë¬¸ì— ì‹¤í–‰ íŒŒì¼ (ex. .exe) ì´ ìƒì„±ëœë‹¤. C, C++ ì–¸ì–´ê°€ ëŒ€í‘œì ì¸ ì»´íŒŒì¼ ì–¸ì–´ë‹¤. ì¸í„°í”„ë¦¬í„° ì–¸ì–´ ì»´íŒŒì¼ ì–¸ì–´ì™€ëŠ” ë‹¤ë¥´ê²Œ ì†ŒìŠ¤ì½”ë“œë¥¼ ì›ì‹œì½”ë“œ(ê¸°ê³„ì–´)ë¡œ ë²ˆì—­í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ì§€ ì•ŠëŠ” ì–¸ì–´Interpreter(ì¸í„°í”„ë¦¬í„°) ë¥¼ ì´ìš©í•´ í•œì¤„ì”© ì½ì–´ê°€ë©´ì„œ ëª…ë ¹ì„ ì²˜ë¦¬í•œë‹¤. ë²ˆì—­ ì†ë„ê°€ ë¹ ë¦„ ì‹¤í–‰ ì†ë„ëŠ” ëŠë¦¼ ë²ˆì—­ê³¼ ì‹¤í–‰ì´ í•œë²ˆì— ì´ë¤„ì§€ê¸° ë•Œë¬¸ì— ë³„ë„ì˜ ì‹¤í–‰íŒŒì¼ì´ ë§Œë“¤ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤. Python, Javascript ê°€ ëŒ€í‘œì ì¸ ì¸í„°í”„ë¦¬í„° ì–¸ì–´ë‹¤. í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ ì»´íŒŒì¼ ê¸°ë²•ê³¼ ì¸í„°í”„ë¦¬í„° ê¸°ë²•ì„ ëª¨ë‘ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ì¤‘ê°„ ì½”ë“œë¡œ ë³€í™˜ë˜ê³  ë‹¤ì–‘í•œ ì‹œìŠ¤í…œì˜ ì¸í„°í”„ë¦¬í„°ì— ì˜í•´ ì‹¤í–‰ í”„ë¡œê·¸ë¨ ì´ì‹ì„±ì´ ì¢‹ì•„ ì–´ë–¤ ì»´í“¨í„° ì‹œìŠ¤í…œì—ì„œë“  ì¦‰ì‹œ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤. JAVA, C# ì´ ëŒ€í‘œì ì¸ í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Develop Lanuage","slug":"CS/Develop-Lanuage","permalink":"https://ckck803.github.io/categories/CS/Develop-Lanuage/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade","slug":"jpa/jpa-programming/mapping/jpa-cascade","date":"2021-11-24T19:31:46.000Z","updated":"2024-11-28T13:59:27.775Z","comments":true,"path":"2021/11/25/jpa/jpa-programming/mapping/jpa-cascade/","link":"","permalink":"https://ckck803.github.io/2021/11/25/jpa/jpa-programming/mapping/jpa-cascade/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ JPA ì˜ì†ì„± ì „ì´ Cascade Cascading ì´ë€, íŠ¹ì • Entity ì— ì‘ì—…ì„ ìˆ˜í–‰í–ˆì„ ë•Œ, ê°™ì€ ì‘ì—…ì´ ì—°ê´€ëœ Entity ì—ë„ ì¼ì–´ë‚˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì˜ì†ì„± ì „ì´ëŠ” ì—°ê´€ê´€ê³„ë¥¼ ë§¤í•‘í•˜ëŠ” ê²ƒê³¼ ì•„ë¬´ ê´€ë ¨ì´ ì—†ë‹¤. ì—”í‹°í‹°ë¥¼ ì—°ì†í™” í• ë•Œ ì—°ê´€ëœ ì—”í‹°í‹°ë„ í•¨ê»˜ ì˜ì†í™” í•˜ëŠ” í¸ë¦¬í•¨ì„ ì œê³µí•œë‹¤. ì˜ì†ì„± ì „ì´ ì˜µì…˜ CascadeType.ALL ìƒìœ„ Entity ì—ì„œ ë°œìƒí•œ ëª¨ë“  ì‘ì—…ì„ í•˜ìœ„ Entity ë¡œ ëª¨ë‘ ì „íŒŒ CascadeType.PERSIST ìƒìœ„ Entity ë¥¼ ì˜ì†í™” í•˜ëŠ” ì‘ì—…ì´ ì¼ì–´ ë‚ ë•Œ í•˜ìœ„ Entity ë„ ê°™ì´ ì˜ì†í™” í•œë‹¤. CascadeType.MERGE ìƒìœ„ Entity ì—ì„œ ë°œìƒí•œ Merge ì‘ì—…ì„ í•˜ìœ„ Entity ê¹Œì§€ Merge ì‘ì—…ì„ ì „íŒŒí•œë‹¤. CascadeType.REMOVE ìƒìœ„ Entity ë¥¼ ì‚­ì œí•  ë•Œ í•˜ìœ„ Entity ê¹Œì§€ ì‚­ì œí•œë‹¤. CascadeType.REFRESH DataBase ë¡œë¶€í„° ìƒìœ„ Entity ë¥¼ ë‹¤ì‹œ ì½ì–´ì˜¬ë•Œ í•˜ìœ„ Entity ê¹Œì§€ ë‹¤ì‹œ ì½ì–´ì˜¨ë‹¤. CascadeType.DETACH ìƒìœ„ Entity ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì œê±°í•  ë•Œ í•˜ìœ„ Entity ê¹Œì§€ ê°™ì´ ì œê±°í•œë‹¤. @Entity@NoArgsConstructor@AllArgsConstructor@Setter@Getterpublic class Person &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private String name; @OneToMany(mappedBy = &quot;person&quot;, cascade = CascadeType.ALL) private List&lt;Phone&gt; phones = new ArrayList&lt;&gt;(); public void addPhone(Phone phone)&#123; phones.add(phone); phone.setPerson(this); &#125;&#125; @Entity@Builder@NoArgsConstructor@AllArgsConstructor@Getter@Setterpublic class Phone &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) public Long id; public String phoneNumber; @ManyToOne @JoinColumn(name = &quot;PERSON_ID&quot;) public Person person;&#125;","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ JPA ì˜ì†ì„± ì „ì´ Cascade Cascading ì´ë€, íŠ¹ì • Entity ì— ì‘ì—…ì„ ìˆ˜í–‰í–ˆì„ ë•Œ, ê°™ì€ ì‘ì—…ì´ ì—°ê´€ëœ Entity ì—ë„ ì¼ì–´ë‚˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì˜ì†ì„± ì „ì´ëŠ” ì—°ê´€ê´€ê³„ë¥¼ ë§¤í•‘í•˜ëŠ” ê²ƒê³¼ ì•„ë¬´ ê´€ë ¨ì´ ì—†ë‹¤. ì—”í‹°í‹°ë¥¼ ì—°ì†í™” í• ë•Œ ì—°ê´€ëœ ì—”í‹°í‹°ë„ í•¨ê»˜ ì˜ì†í™” í•˜ëŠ” í¸ë¦¬í•¨ì„ ì œê³µí•œë‹¤. ì˜ì†ì„± ì „ì´ ì˜µì…˜ CascadeType.ALL ìƒìœ„ Entity ì—ì„œ ë°œìƒí•œ ëª¨ë“  ì‘ì—…ì„ í•˜ìœ„ Entity ë¡œ ëª¨ë‘ ì „íŒŒ CascadeType.PERSIST ìƒìœ„ Entity ë¥¼ ì˜ì†í™” í•˜ëŠ” ì‘ì—…ì´ ì¼ì–´ ë‚ ë•Œ í•˜ìœ„ Entity ë„ ê°™ì´ ì˜ì†í™” í•œë‹¤. CascadeType.MERGE ìƒìœ„ Entity ì—ì„œ ë°œìƒí•œ Merge ì‘ì—…ì„ í•˜ìœ„ Entity ê¹Œì§€ Merge ì‘ì—…ì„ ì „íŒŒí•œë‹¤. CascadeType.REMOVE ìƒìœ„ Entity ë¥¼ ì‚­ì œí•  ë•Œ í•˜ìœ„ Entity ê¹Œì§€ ì‚­ì œí•œë‹¤. CascadeType.REFRESH DataBase ë¡œë¶€í„° ìƒìœ„ Entity ë¥¼ ë‹¤ì‹œ ì½ì–´ì˜¬ë•Œ í•˜ìœ„ Entity ê¹Œì§€ ë‹¤ì‹œ ì½ì–´ì˜¨ë‹¤. CascadeType.DETACH ìƒìœ„ Entity ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì œê±°í•  ë•Œ í•˜ìœ„ Entity ê¹Œì§€ ê°™ì´ ì œê±°í•œë‹¤. @Entity@NoArgsConstructor@AllArgsConstructor@Setter@Getterpublic class Person &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private String name; @OneToMany(mappedBy = &quot;person&quot;, cascade = CascadeType.ALL) private List&lt;Phone&gt; phones = new ArrayList&lt;&gt;(); public void addPhone(Phone phone)&#123; phones.add(phone); phone.setPerson(this); &#125;&#125; @Entity@Builder@NoArgsConstructor@AllArgsConstructor@Getter@Setterpublic class Phone &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) public Long id; public String phoneNumber; @ManyToOne @JoinColumn(name = &quot;PERSON_ID&quot;) public Person person;&#125; 1. CascadeType.ALL ìƒìœ„ Entity ì—ì„œ ë°œìƒí•œ ëª¨ë“  ì‘ì—…ì„ í•˜ìœ„ Entity ë¡œ ëª¨ë‘ ì „íŒŒí•œë‹¤. @Testvoid cascadeAllTest() &#123; Phone phone = new Phone(); phone.setPhoneNumber(&quot;010-1234-1234&quot;); Person person = new Person(); person.setName(&quot;tester&quot;); person.addPhone(phone); entityManager.persist(person); entityManager.flush();&#125; Hibernate: insert into person (id, name) values (null, ?)Hibernate: insert into phone (id, person_id, phone_number) values (null, ?, ?) 2. CascadeType.PERSIST ìƒìœ„ Entity ë¥¼ ì˜ì†í™” í•˜ëŠ” ì‘ì—…ì´ ì¼ì–´ ë‚ ë•Œ í•˜ìœ„ Entity ë„ ê°™ì´ ì˜ì†í™” í•œë‹¤. @Testvoid cascadePersistTest() &#123; Phone phone = new Phone(); phone.setPhoneNumber(&quot;010-1234-1234&quot;); Person person = new Person(); person.setName(&quot;tester&quot;); person.addPhone(phone); entityManager.persist(person); entityManager.flush(); entityManager.remove(person); // ë§Œì•½ ì§€ìš°ê²Œ ë  ê²½ìš° ì˜ˆì™¸ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.&#125; Hibernate: insert into person (id, name) values (null, ?)Hibernate: insert into phone (id, person_id, phone_number) values (null, ?, ?) 3. CascadeType.MERGE ìƒìœ„ Entity ì—ì„œ ë°œìƒí•œ Merge ì‘ì—…ì„ í•˜ìœ„ Entity ê¹Œì§€ Merge ì‘ì—…ì„ ì „íŒŒí•œë‹¤. @Testvoid cascadeMergeTest() &#123; Phone phone = new Phone(); phone.setPhoneNumber(&quot;010-1234-1234&quot;); Person person = new Person(); person.setName(&quot;tester&quot;); person.addPhone(phone); entityManager.persist(person); entityManager.persist(phone); entityManager.flush(); // ì˜ì†ì„± Context ë¥¼ ì´ˆê¸°í™” í•œë‹¤. entityManager.clear(); Person savedPerson = phone.getPerson(); phone.setPhoneNumber(&quot;010-1111-2222&quot;); savedPerson.setName(&quot;tester2&quot;); // Person ê°ì²´ë¥¼ merge í•  ê²½ìš° í•˜ìœ„ Phone ê°ì²´ê¹Œì§€ ê°™ì´ ì˜ì†ì„± Context ë¡œ ì˜¬ë¼ì˜¤ê²Œ ëœë‹¤. entityManager.merge(person);&#125; Hibernate: insert into person (id, name) values (null, ?)Hibernate: insert into phone (id, person_id, phone_number) values (null, ?, ?)Hibernate: select person0_.id as id1_0_1_, person0_.name as name2_0_1_, phones1_.person_id as person_i3_1_3_, phones1_.id as id1_1_3_, phones1_.id as id1_1_0_, phones1_.person_id as person_i3_1_0_, phones1_.phone_number as phone_nu2_1_0_ from person person0_ left outer join phone phones1_ on person0_.id=phones1_.person_id where person0_.id=?Hibernate: update phone set person_id=?, phone_number=? where id=?Hibernate: update person set name=? where id=? 4. CascadeType.REMOVE ìƒìœ„ Entity ë¥¼ ì‚­ì œí•  ë•Œ í•˜ìœ„ Entity ê¹Œì§€ ì‚­ì œí•œë‹¤. @Testvoid cascadeRemoveTest() &#123; Phone phone = new Phone(); phone.setPhoneNumber(&quot;010-1234-1234&quot;); Person person = new Person(); person.setName(&quot;tester&quot;); person.addPhone(phone); entityManager.persist(person); entityManager.persist(phone); entityManager.flush(); Long personId = person.getId(); entityManager.clear(); Person savedPerson = entityManager.find(Person.class, personId); // Person ê°ì²´ë¥¼ ì‚­ì œí•  ê²½ìš° í•˜ìœ„ Phone ê°ì²´ê¹Œì§€ ì‚­ì œëœë‹¤. entityManager.remove(savedPerson);&#125; Hibernate: delete from phone where id=?Hibernate: delete from person where id=? 5. CascadeType.REFRESH DataBase ë¡œë¶€í„° ìƒìœ„ Entity ë¥¼ ë‹¤ì‹œ ì½ì–´ì˜¬ë•Œ í•˜ìœ„ Entity ê¹Œì§€ ë‹¤ì‹œ ì½ì–´ì˜¨ë‹¤. @Testvoid cascadeRefreshTest() &#123; Phone phone = new Phone(); phone.setPhoneNumber(&quot;010-1234-1234&quot;); Person person = new Person(); person.setName(&quot;tester&quot;); person.addPhone(phone); entityManager.persist(person); entityManager.persist(phone); entityManager.flush(); person.setName(&quot;test2&quot;); phone.setPhoneNumber(&quot;010-1111-2222&quot;); // Person ê°ì²´ì™€ í•˜ìœ„ Phone ê°ì²´ê¹Œì§€ ì˜ì†ì„± Context ë‚´ ë°ì´í„°ê°€ ì´ˆê¸°í™” ëœë‹¤. entityManager.refresh(person); // DataBase ì— ë°ì´í„°ê°€ ë°˜ì˜ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ Refresh ì‘ì—…ì´ ì¼ì–´ë‚¬ê¸° ë•Œë¬¸ì— ìƒíƒœê°€ ì´ˆê¸°í™” ëœë‹¤. assertThat(person.getName()).isEqualTo(&quot;tester&quot;); assertThat(phone.getPhoneNumber()).isEqualTo(&quot;010-1234-1234&quot;);&#125; update ê°€ ì´ë¤„ì§€ì§€ ì•Šì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Hibernate: insert into person (id, name) values (null, ?)Hibernate: insert into phone (id, person_id, phone_number) values (null, ?, ?)Hibernate: select phone0_.id as id1_1_0_, phone0_.person_id as person_i3_1_0_, phone0_.phone_number as phone_nu2_1_0_ from phone phone0_ where phone0_.id=?Hibernate: select person0_.id as id1_0_1_, person0_.name as name2_0_1_, phones1_.person_id as person_i3_1_3_, phones1_.id as id1_1_3_, phones1_.id as id1_1_0_, phones1_.person_id as person_i3_1_0_, phones1_.phone_number as phone_nu2_1_0_ from person person0_ left outer join phone phones1_ on person0_.id=phones1_.person_id where person0_.id=? 6. CascadeType.DETACH ìƒìœ„ Entity ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì œê±°í•  ë•Œ í•˜ìœ„ Entity ê¹Œì§€ ê°™ì´ ì œê±°í•œë‹¤. @Testvoid cascadeDetachTest() &#123; Phone phone = new Phone(); phone.setPhoneNumber(&quot;010-1234-1234&quot;); Person person = new Person(); person.setName(&quot;tester&quot;); person.addPhone(phone); entityManager.persist(person); entityManager.persist(phone); entityManager.flush(); assertThat(entityManager.contains(person)).isTrue(); assertThat(entityManager.contains(phone)).isTrue(); // Person ê°ì²´ê°€ ì˜ì†ì„± Context ì—ì„œ detach ë ë•Œ ê´€ë ¨ëœ Phone ê°ì²´ë„ ê°™ì´ detach ëœë‹¤. entityManager.detach(person); assertThat(entityManager.contains(person)).isFalse(); assertThat(entityManager.contains(phone)).isFalse();&#125; ì˜ì†ì„± ì „ì´ ì£¼ì˜ì  ì†Œìœ ìê°€ í•˜ë‚˜ì¼ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ë‹¤ë¥¸ í…Œì´ë¸”ê³¼ ì—°ê´€ê´€ê³„ê°€ ìˆì„ ê²½ìš°ì— ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2","slug":"spring/spring-aop/design-pattern/concrete-proxy/concrete-proxy-04","date":"2021-11-21T22:31:07.000Z","updated":"2024-02-26T15:22:54.633Z","comments":true,"path":"2021/11/22/spring/spring-aop/design-pattern/concrete-proxy/concrete-proxy-04/","link":"","permalink":"https://ckck803.github.io/2021/11/22/spring/spring-aop/design-pattern/concrete-proxy/concrete-proxy-04/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2public class OrderRepositoryConcreteProxy extends OrderRepositoryV2 &#123; private final OrderRepositoryV2 target; private final LogTrace logTrace; public OrderRepositoryConcreteProxy(OrderRepositoryV2 target, LogTrace logTrace) &#123; this.target = target; this.logTrace = logTrace; &#125; @Override public void save(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderRepository.request()&quot;); // target í˜¸ì¶œ target.save(itemId); logTrace.end(status); &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; public class OrderServiceConcreteProxy extends OrderServiceV2 &#123; private final OrderServiceV2 target; private final LogTrace logTrace; public OrderServiceConcreteProxy(OrderServiceV2 target, LogTrace logTrace) &#123; super(null); this.target = target; this.logTrace = logTrace; &#125; @Override public void orderItem(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderService.orderItem()&quot;); // target í˜¸ì¶œ target.orderItem(itemId); logTrace.end(status); &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; public class OrderControllerConcreteProxy extends OrderControllerV2 &#123; private final OrderControllerV2 target; private final LogTrace logTrace; public OrderControllerConcreteProxy(OrderControllerV2 target, LogTrace logTrace) &#123; super(null); this.target = target; this.logTrace = logTrace; &#125; @Override public String request(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderController.request()&quot;); // target í˜¸ì¶œ String result = target.request(itemId); logTrace.end(status); return result; &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125; @Override public String noLog() &#123; return target.noLog(); &#125;&#125; @Configurationpublic class ConcreteProxyConfig &#123; @Bean public OrderControllerV2 orderControllerV2(LogTrace logTrace)&#123; OrderControllerV2 controllerImpl = new OrderControllerV2(orderServiceV2(logTrace)); return new OrderControllerConcreteProxy(controllerImpl, logTrace); &#125; @Bean public OrderServiceV2 orderServiceV2(LogTrace logTrace)&#123; OrderServiceV2 serviceImpl = new OrderServiceV2(orderRepositoryV2(logTrace)); return new OrderServiceConcreteProxy(serviceImpl, logTrace); &#125; @Bean public OrderRepositoryV2 orderRepositoryV2(LogTrace logTrace)&#123; OrderRepositoryV2 repositoryImpl = new OrderRepositoryV2(); return new OrderRepositoryConcreteProxy(repositoryImpl, logTrace); &#125;&#125; //@Import(AppV1Config.class)//@Import(&#123;AppV1Config.class, AppV2Config.class&#125;)//@Import(InterfaceProxyConfig.class)@Import(ConcreteProxyConfig.class)@SpringBootApplication(scanBasePackages = &quot;hello.proxy.app&quot;) //ì£¼ì˜public class ProxyApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProxyApplication.class, args); &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125; 2021-11-28 14:45:36.692 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] OrderController.request()2021-11-28 14:45:36.693 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] |--&gt;OrderService.orderItem()2021-11-28 14:45:36.693 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] | |--&gt;OrderRepository.request()2021-11-28 14:45:37.696 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] | |&lt;--OrderRepository.request() time=1003ms2021-11-28 14:45:37.696 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] |&lt;--OrderService.orderItem() time=1003ms2021-11-28 14:45:37.697 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] OrderController.request() time=1005ms","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2public class OrderRepositoryConcreteProxy extends OrderRepositoryV2 &#123; private final OrderRepositoryV2 target; private final LogTrace logTrace; public OrderRepositoryConcreteProxy(OrderRepositoryV2 target, LogTrace logTrace) &#123; this.target = target; this.logTrace = logTrace; &#125; @Override public void save(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderRepository.request()&quot;); // target í˜¸ì¶œ target.save(itemId); logTrace.end(status); &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; public class OrderServiceConcreteProxy extends OrderServiceV2 &#123; private final OrderServiceV2 target; private final LogTrace logTrace; public OrderServiceConcreteProxy(OrderServiceV2 target, LogTrace logTrace) &#123; super(null); this.target = target; this.logTrace = logTrace; &#125; @Override public void orderItem(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderService.orderItem()&quot;); // target í˜¸ì¶œ target.orderItem(itemId); logTrace.end(status); &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; public class OrderControllerConcreteProxy extends OrderControllerV2 &#123; private final OrderControllerV2 target; private final LogTrace logTrace; public OrderControllerConcreteProxy(OrderControllerV2 target, LogTrace logTrace) &#123; super(null); this.target = target; this.logTrace = logTrace; &#125; @Override public String request(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderController.request()&quot;); // target í˜¸ì¶œ String result = target.request(itemId); logTrace.end(status); return result; &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125; @Override public String noLog() &#123; return target.noLog(); &#125;&#125; @Configurationpublic class ConcreteProxyConfig &#123; @Bean public OrderControllerV2 orderControllerV2(LogTrace logTrace)&#123; OrderControllerV2 controllerImpl = new OrderControllerV2(orderServiceV2(logTrace)); return new OrderControllerConcreteProxy(controllerImpl, logTrace); &#125; @Bean public OrderServiceV2 orderServiceV2(LogTrace logTrace)&#123; OrderServiceV2 serviceImpl = new OrderServiceV2(orderRepositoryV2(logTrace)); return new OrderServiceConcreteProxy(serviceImpl, logTrace); &#125; @Bean public OrderRepositoryV2 orderRepositoryV2(LogTrace logTrace)&#123; OrderRepositoryV2 repositoryImpl = new OrderRepositoryV2(); return new OrderRepositoryConcreteProxy(repositoryImpl, logTrace); &#125;&#125; //@Import(AppV1Config.class)//@Import(&#123;AppV1Config.class, AppV2Config.class&#125;)//@Import(InterfaceProxyConfig.class)@Import(ConcreteProxyConfig.class)@SpringBootApplication(scanBasePackages = &quot;hello.proxy.app&quot;) //ì£¼ì˜public class ProxyApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProxyApplication.class, args); &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125; 2021-11-28 14:45:36.692 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] OrderController.request()2021-11-28 14:45:36.693 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] |--&gt;OrderService.orderItem()2021-11-28 14:45:36.693 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] | |--&gt;OrderRepository.request()2021-11-28 14:45:37.696 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] | |&lt;--OrderRepository.request() time=1003ms2021-11-28 14:45:37.696 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] |&lt;--OrderService.orderItem() time=1003ms2021-11-28 14:45:37.697 INFO 98295 --- [nio-8080-exec-1] h.p.trace.logtrace.ThreadLocalLogTrace : [56d57615] OrderController.request() time=1005ms","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Decorator íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Decorator-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Decorator-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ","slug":"spring/spring-aop/design-pattern/concrete-proxy/concrete-proxy-02","date":"2021-11-21T20:31:07.000Z","updated":"2024-02-26T15:22:51.300Z","comments":true,"path":"2021/11/22/spring/spring-aop/design-pattern/concrete-proxy/concrete-proxy-02/","link":"","permalink":"https://ckck803.github.io/2021/11/22/spring/spring-aop/design-pattern/concrete-proxy/concrete-proxy-02/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ@Slf4jpublic class ConcreteLogic &#123; public String operation()&#123; log.info(&quot;ConcreteLogic ì‹¤í–‰&quot;); return &quot;data&quot;; &#125;&#125; public class ConcreteClient &#123; private ConcreteLogic concreteLogic; public ConcreteClient(ConcreteLogic concreteLogic) &#123; this.concreteLogic = concreteLogic; &#125; public void execute()&#123; concreteLogic.operation(); &#125;&#125; @Testvoid noProxy()&#123; ConcreteLogic concreteLogic = new ConcreteLogic(); ConcreteClient client = new ConcreteClient(concreteLogic); client.execute();&#125; êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© ìë°”ì—ì„œ ë‹¤í˜•ì„±ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë“  ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ë˜ ìƒìœ„ íƒ€ì…ë§Œ ë§ìœ¼ë©´ ë‹¤í˜•ì„±ì´ ì ìš© ëœë‹¤.","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ@Slf4jpublic class ConcreteLogic &#123; public String operation()&#123; log.info(&quot;ConcreteLogic ì‹¤í–‰&quot;); return &quot;data&quot;; &#125;&#125; public class ConcreteClient &#123; private ConcreteLogic concreteLogic; public ConcreteClient(ConcreteLogic concreteLogic) &#123; this.concreteLogic = concreteLogic; &#125; public void execute()&#123; concreteLogic.operation(); &#125;&#125; @Testvoid noProxy()&#123; ConcreteLogic concreteLogic = new ConcreteLogic(); ConcreteClient client = new ConcreteClient(concreteLogic); client.execute();&#125; êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© ìë°”ì—ì„œ ë‹¤í˜•ì„±ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë“  ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ë˜ ìƒìœ„ íƒ€ì…ë§Œ ë§ìœ¼ë©´ ë‹¤í˜•ì„±ì´ ì ìš© ëœë‹¤. @Slf4jpublic class TimeProxy extends ConcreteLogic&#123; private ConcreteLogic concreteLogic; public TimeProxy(ConcreteLogic concreteLogic) &#123; this.concreteLogic = concreteLogic; &#125; @Override public String operation()&#123; log.info(&quot;TimeDecorator ì‹¤í–‰&quot;); long startTime = System.currentTimeMillis(); String result = concreteLogic.operation(); long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;TimeDecorator ì¢…ë£Œ resultTime = &#123;&#125;ms&quot;, resultTime); return result; &#125;&#125; @Testvoid addProxy()&#123; ConcreteLogic concreteLogic = new ConcreteLogic(); TimeProxy timeProxy = new TimeProxy(concreteLogic); ConcreteClient client = new ConcreteClient(timeProxy); client.execute();&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Decorator íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Decorator-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Decorator-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1","slug":"spring/spring-aop/design-pattern/concrete-proxy/concrete-proxy-01","date":"2021-11-21T19:31:07.000Z","updated":"2024-02-26T15:22:47.687Z","comments":true,"path":"2021/11/22/spring/spring-aop/design-pattern/concrete-proxy/concrete-proxy-01/","link":"","permalink":"https://ckck803.github.io/2021/11/22/spring/spring-aop/design-pattern/concrete-proxy/concrete-proxy-01/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ @RequiredArgsConstructorpublic class OrderRepositoryInterfaceProxy implements OrderRepositoryV1 &#123; // ì‹¤ì œ ê°ì²´ ì°¸ì¡° private final OrderRepositoryV1 target; private final LogTrace logTrace; @Override public void save(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderRepository.request()&quot;); // target í˜¸ì¶œ target.save(itemId); logTrace.end(status); &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; @RequiredArgsConstructorpublic class OrderServiceInterfaceProxy implements OrderServiceV1 &#123; private final OrderServiceV1 target; private final LogTrace logTrace; @Override public void orderItem(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderService.orderItem()&quot;); // target í˜¸ì¶œ target.orderItem(itemId); logTrace.end(status); &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; @RequiredArgsConstructorpublic class OrderControllerInterfaceProxy implements OrderControllerV1 &#123; private final OrderControllerV1 target; private final LogTrace logTrace; @Override public String request(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderController.request()&quot;); // target í˜¸ì¶œ String result = target.request(itemId); logTrace.end(status); return result; &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125; @Override public String noLog() &#123; return target.noLog(); &#125;&#125; Proxy Bean ë“±ë¡@Configurationpublic class InterfaceProxyConfig &#123; @Bean public OrderControllerV1 orderController(LogTrace logTrace)&#123; OrderControllerV1Impl controllerImpl = new OrderControllerV1Impl(orderService(logTrace)); return new OrderControllerInterfaceProxy(controllerImpl, logTrace); &#125; @Bean public OrderServiceV1 orderService(LogTrace logTrace)&#123; OrderServiceV1Impl orderServiceImpl = new OrderServiceV1Impl(orderRepository(logTrace)); return new OrderServiceInterfaceProxy(orderServiceImpl, logTrace); &#125; @Bean public OrderRepositoryV1 orderRepository(LogTrace logTrace)&#123; OrderRepositoryV1 orderRepositoryImpl = new OrderRepositoryV1Impl(); return new OrderRepositoryInterfaceProxy(orderRepositoryImpl, logTrace); &#125;&#125; //@Import(AppV1Config.class)//@Import(&#123;AppV1Config.class, AppV2Config.class&#125;)@Import(InterfaceProxyConfig.class)@SpringBootApplication(scanBasePackages = &quot;hello.proxy.app&quot;) //ì£¼ì˜public class ProxyApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProxyApplication.class, args); &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125; 2021-11-28 13:54:09.793 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] OrderController.request()2021-11-28 13:54:09.795 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] |--&gt;OrderService.orderItem()2021-11-28 13:54:09.795 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] | |--&gt;OrderRepository.request()2021-11-28 13:54:10.798 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] | |&lt;--OrderRepository.request() time=1003ms2021-11-28 13:54:10.798 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] |&lt;--OrderService.orderItem() time=1003ms2021-11-28 13:54:10.798 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] OrderController.request() time=1005ms","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ @RequiredArgsConstructorpublic class OrderRepositoryInterfaceProxy implements OrderRepositoryV1 &#123; // ì‹¤ì œ ê°ì²´ ì°¸ì¡° private final OrderRepositoryV1 target; private final LogTrace logTrace; @Override public void save(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderRepository.request()&quot;); // target í˜¸ì¶œ target.save(itemId); logTrace.end(status); &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; @RequiredArgsConstructorpublic class OrderServiceInterfaceProxy implements OrderServiceV1 &#123; private final OrderServiceV1 target; private final LogTrace logTrace; @Override public void orderItem(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderService.orderItem()&quot;); // target í˜¸ì¶œ target.orderItem(itemId); logTrace.end(status); &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125;&#125; @RequiredArgsConstructorpublic class OrderControllerInterfaceProxy implements OrderControllerV1 &#123; private final OrderControllerV1 target; private final LogTrace logTrace; @Override public String request(String itemId) &#123; TraceStatus status = null; try&#123; status = logTrace.begin(&quot;OrderController.request()&quot;); // target í˜¸ì¶œ String result = target.request(itemId); logTrace.end(status); return result; &#125;catch (Exception ex)&#123; logTrace.exception(status, ex); throw ex; &#125; &#125; @Override public String noLog() &#123; return target.noLog(); &#125;&#125; Proxy Bean ë“±ë¡@Configurationpublic class InterfaceProxyConfig &#123; @Bean public OrderControllerV1 orderController(LogTrace logTrace)&#123; OrderControllerV1Impl controllerImpl = new OrderControllerV1Impl(orderService(logTrace)); return new OrderControllerInterfaceProxy(controllerImpl, logTrace); &#125; @Bean public OrderServiceV1 orderService(LogTrace logTrace)&#123; OrderServiceV1Impl orderServiceImpl = new OrderServiceV1Impl(orderRepository(logTrace)); return new OrderServiceInterfaceProxy(orderServiceImpl, logTrace); &#125; @Bean public OrderRepositoryV1 orderRepository(LogTrace logTrace)&#123; OrderRepositoryV1 orderRepositoryImpl = new OrderRepositoryV1Impl(); return new OrderRepositoryInterfaceProxy(orderRepositoryImpl, logTrace); &#125;&#125; //@Import(AppV1Config.class)//@Import(&#123;AppV1Config.class, AppV2Config.class&#125;)@Import(InterfaceProxyConfig.class)@SpringBootApplication(scanBasePackages = &quot;hello.proxy.app&quot;) //ì£¼ì˜public class ProxyApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProxyApplication.class, args); &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125; 2021-11-28 13:54:09.793 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] OrderController.request()2021-11-28 13:54:09.795 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] |--&gt;OrderService.orderItem()2021-11-28 13:54:09.795 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] | |--&gt;OrderRepository.request()2021-11-28 13:54:10.798 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] | |&lt;--OrderRepository.request() time=1003ms2021-11-28 13:54:10.798 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] |&lt;--OrderService.orderItem() time=1003ms2021-11-28 13:54:10.798 INFO 97198 --- [nio-8080-exec-2] h.p.trace.logtrace.ThreadLocalLogTrace : [86b4baba] OrderController.request() time=1005ms","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Decorator íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Decorator-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Decorator-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2","slug":"spring/spring-aop/design-pattern/decorator/decorator-02","date":"2021-11-21T17:31:07.000Z","updated":"2024-02-26T15:23:04.573Z","comments":true,"path":"2021/11/22/spring/spring-aop/design-pattern/decorator/decorator-02/","link":"","permalink":"https://ckck803.github.io/2021/11/22/spring/spring-aop/design-pattern/decorator/decorator-02/","excerpt":"ëª©ì°¨ Post not found: springboot/spring-aop/cglib/cglib-01 Post not found: springboot/spring-aop/dynamic-proxy/dynamic-proxy-02 Post not found: springboot/spring-aop/dynamic-proxy/dynamic-proxy-01 Post not found: springboot/spring-aop/dynamic-proxy/reflection Post not found: springboot/spring-aop/concrete-proxy/concrete-proxy-04 Post not found: springboot/spring-aop/concrete-proxy/concrete-proxy-02 Post not found: springboot/spring-aop/concrete-proxy/concrete-proxy-01 Post not found: springboot/spring-aop/decorator/decorator-02 Post not found: springboot/spring-aop/decorator/decorator-01 Post not found: springboot/spring-aop/proxy-pattern/proxy-04 Post not found: springboot/spring-aop/proxy-pattern/proxy-03 Post not found: springboot/spring-aop/proxy-pattern/proxy-02 Post not found: springboot/spring-aop/proxy-pattern/proxy-01 Post not found: springboot/spring-aop/strategy-pattern/strategy-pattern-01 Post not found: springboot/spring-aop/template-method/template-method-01 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern ì ìš©@Slf4jpublic class TimeDecorator implements Component&#123; private Component component; public TimeDecorator(Component component) &#123; this.component = component; &#125; @Override public String operation() &#123; log.info(&quot;TimeDecorator ì‹¤í–‰&quot;); long startTime = System.currentTimeMillis(); String result = component.operation(); long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;TimeDecorator ì¢…ë£Œ resultTime = &#123;&#125;ms&quot;, resultTime); return null; &#125;&#125; @Testvoid decorator2()&#123; Component realComponent = new RealComponent(); Component messageDecorator = new MessageDecorator(realComponent); Component timeDecorator = new TimeDecorator(messageDecorator); DecoratorPatternClient client = new DecoratorPatternClient(timeDecorator); client.execute();&#125; Decoratro Pattern ì€ í•­ìƒ ë‚´ë¶€ì— ê¾¸ë©° ì¤„ ëŒ€ìƒ(Component) ê°€ ì¡´ì¬í•´ì•¼ í•œë‹¤.","text":"ëª©ì°¨ Post not found: springboot/spring-aop/cglib/cglib-01 Post not found: springboot/spring-aop/dynamic-proxy/dynamic-proxy-02 Post not found: springboot/spring-aop/dynamic-proxy/dynamic-proxy-01 Post not found: springboot/spring-aop/dynamic-proxy/reflection Post not found: springboot/spring-aop/concrete-proxy/concrete-proxy-04 Post not found: springboot/spring-aop/concrete-proxy/concrete-proxy-02 Post not found: springboot/spring-aop/concrete-proxy/concrete-proxy-01 Post not found: springboot/spring-aop/decorator/decorator-02 Post not found: springboot/spring-aop/decorator/decorator-01 Post not found: springboot/spring-aop/proxy-pattern/proxy-04 Post not found: springboot/spring-aop/proxy-pattern/proxy-03 Post not found: springboot/spring-aop/proxy-pattern/proxy-02 Post not found: springboot/spring-aop/proxy-pattern/proxy-01 Post not found: springboot/spring-aop/strategy-pattern/strategy-pattern-01 Post not found: springboot/spring-aop/template-method/template-method-01 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern ì ìš©@Slf4jpublic class TimeDecorator implements Component&#123; private Component component; public TimeDecorator(Component component) &#123; this.component = component; &#125; @Override public String operation() &#123; log.info(&quot;TimeDecorator ì‹¤í–‰&quot;); long startTime = System.currentTimeMillis(); String result = component.operation(); long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;TimeDecorator ì¢…ë£Œ resultTime = &#123;&#125;ms&quot;, resultTime); return null; &#125;&#125; @Testvoid decorator2()&#123; Component realComponent = new RealComponent(); Component messageDecorator = new MessageDecorator(realComponent); Component timeDecorator = new TimeDecorator(messageDecorator); DecoratorPatternClient client = new DecoratorPatternClient(timeDecorator); client.execute();&#125; Decoratro Pattern ì€ í•­ìƒ ë‚´ë¶€ì— ê¾¸ë©° ì¤„ ëŒ€ìƒ(Component) ê°€ ì¡´ì¬í•´ì•¼ í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Decorator íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Decorator-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Decorator-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1","slug":"spring/spring-aop/design-pattern/decorator/decorator-01","date":"2021-11-21T16:31:07.000Z","updated":"2024-02-26T15:22:59.402Z","comments":true,"path":"2021/11/22/spring/spring-aop/design-pattern/decorator/decorator-01/","link":"","permalink":"https://ckck803.github.io/2021/11/22/spring/spring-aop/design-pattern/decorator/decorator-01/","excerpt":"ëª©ì°¨ Post not found: spring/design-pattern/spring-aop/cglib/cglib-01 Post not found: spring/design-pattern/spring-aop/dynamic-proxy/dynamic-proxy-02 Post not found: spring/design-pattern/spring-aop/dynamic-proxy/dynamic-proxy-01 Post not found: spring/design-pattern/spring-aop/dynamic-proxy/reflection Post not found: spring/design-pattern/spring-aop/concrete-proxy/concrete-proxy-04 Post not found: spring/design-pattern/spring-aop/concrete-proxy/concrete-proxy-02 Post not found: spring/design-pattern/spring-aop/concrete-proxy/concrete-proxy-01 Post not found: spring/design-pattern/spring-aop/decorator/decorator-02 Post not found: spring/design-pattern/spring-aop/decorator/decorator-01 Post not found: spring/design-pattern/spring-aop/proxy-pattern/proxy-04 Post not found: spring/design-pattern/spring-aop/proxy-pattern/proxy-03 Post not found: spring/design-pattern/spring-aop/proxy-pattern/proxy-02 Post not found: spring/design-pattern/spring-aop/proxy-pattern/proxy-01 Post not found: spring/design-pattern/spring-aop/strategy-pattern/strategy-pattern-01 Post not found: spring/design-pattern/spring-aop/template-method/template-method-01 Decorator íŒ¨í„´ Decorator íŒ¨í„´ ì€ ê¸°ì¡´ ê°ì²´ ìˆ˜ì •ì—†ì´ ë¶€ê°€ ê¸°ëŠ¥ ì¶”ê°€ ë¥¼ ìœ„í•´ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì´ë‹¤. Decorator íŒ¨í„´ì€ ê°ì²´ ì§€í–¥ ë””ìì¸ ì›ì¹™ ì¤‘ í•˜ë‚˜ì¸ ê°œë°©-íì‡„ ì›ì¹™(OCP) ì„ ë”°ë¦…ë‹ˆë‹¤. ì´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ì½”ë“œì˜ ìˆ˜ì • ì—†ì´ ê¸°ì¡´ í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ê¸°ì¡´ ê¸°ëŠ¥ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Decorator í´ë˜ìŠ¤ëŠ” ê¸°ë³¸ ê°ì²´ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ êµ¬í˜„ë˜ë©°, ê¸°ë³¸ ê°ì²´ë¥¼ Wrapping í•˜ì—¬ ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ êµ¬ì¡°ëŠ” ê°ì²´ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³ , ìœ ì—°ì„±ê³¼ í™•ì¥ì„±ì„ ë†’ì…ë‹ˆë‹¤. ê¸°ì¡´ ê°ì²´ë¥¼ ê°ì‹¸ëŠ” Wrapper í´ë˜ìŠ¤ ë¥¼ ë§Œë“¤ê³ , Wrapper í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ê¸°ì¡´ ê¸°ëŠ¥ì„ ìˆ˜ì •í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Decorator íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ê°ì²´ì˜ ê¸°ì¡´ ë™ì‘ì„ ë³€ê²½í•˜ì§€ ì•Šê³ ë„ ê°ì²´ì— ìƒˆë¡œìš´ ë™ì‘ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Decorator íŒ¨í„´ì˜ êµ¬ì„±ìš”ì†Œ Component ì¸í„°í˜ì´ìŠ¤ë‚˜ ì¶”ìƒ í´ë˜ìŠ¤ë¡œ ì •ì˜ëœ ê¸°ë³¸ ê°ì²´ì˜ ê³µí†µ ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. ConcreteComponent Component ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ì‹¤ì œ ê°ì²´ì…ë‹ˆë‹¤. Decorator Component ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©°, ê¸°ë³¸ ê°ì²´ë¥¼ ë˜í•‘í•˜ê³  ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ConcreteDecorator Decorator ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ê¸°ë³¸ ê°ì²´ë¥¼ ë˜í•‘í•˜ê³  ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ì‹¤ì œ ê°ì²´ì…ë‹ˆë‹¤.","text":"ëª©ì°¨ Post not found: spring/design-pattern/spring-aop/cglib/cglib-01 Post not found: spring/design-pattern/spring-aop/dynamic-proxy/dynamic-proxy-02 Post not found: spring/design-pattern/spring-aop/dynamic-proxy/dynamic-proxy-01 Post not found: spring/design-pattern/spring-aop/dynamic-proxy/reflection Post not found: spring/design-pattern/spring-aop/concrete-proxy/concrete-proxy-04 Post not found: spring/design-pattern/spring-aop/concrete-proxy/concrete-proxy-02 Post not found: spring/design-pattern/spring-aop/concrete-proxy/concrete-proxy-01 Post not found: spring/design-pattern/spring-aop/decorator/decorator-02 Post not found: spring/design-pattern/spring-aop/decorator/decorator-01 Post not found: spring/design-pattern/spring-aop/proxy-pattern/proxy-04 Post not found: spring/design-pattern/spring-aop/proxy-pattern/proxy-03 Post not found: spring/design-pattern/spring-aop/proxy-pattern/proxy-02 Post not found: spring/design-pattern/spring-aop/proxy-pattern/proxy-01 Post not found: spring/design-pattern/spring-aop/strategy-pattern/strategy-pattern-01 Post not found: spring/design-pattern/spring-aop/template-method/template-method-01 Decorator íŒ¨í„´ Decorator íŒ¨í„´ ì€ ê¸°ì¡´ ê°ì²´ ìˆ˜ì •ì—†ì´ ë¶€ê°€ ê¸°ëŠ¥ ì¶”ê°€ ë¥¼ ìœ„í•´ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì´ë‹¤. Decorator íŒ¨í„´ì€ ê°ì²´ ì§€í–¥ ë””ìì¸ ì›ì¹™ ì¤‘ í•˜ë‚˜ì¸ ê°œë°©-íì‡„ ì›ì¹™(OCP) ì„ ë”°ë¦…ë‹ˆë‹¤. ì´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ì½”ë“œì˜ ìˆ˜ì • ì—†ì´ ê¸°ì¡´ í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ê¸°ì¡´ ê¸°ëŠ¥ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Decorator í´ë˜ìŠ¤ëŠ” ê¸°ë³¸ ê°ì²´ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ êµ¬í˜„ë˜ë©°, ê¸°ë³¸ ê°ì²´ë¥¼ Wrapping í•˜ì—¬ ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ êµ¬ì¡°ëŠ” ê°ì²´ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³ , ìœ ì—°ì„±ê³¼ í™•ì¥ì„±ì„ ë†’ì…ë‹ˆë‹¤. ê¸°ì¡´ ê°ì²´ë¥¼ ê°ì‹¸ëŠ” Wrapper í´ë˜ìŠ¤ ë¥¼ ë§Œë“¤ê³ , Wrapper í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ê¸°ì¡´ ê¸°ëŠ¥ì„ ìˆ˜ì •í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Decorator íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ê°ì²´ì˜ ê¸°ì¡´ ë™ì‘ì„ ë³€ê²½í•˜ì§€ ì•Šê³ ë„ ê°ì²´ì— ìƒˆë¡œìš´ ë™ì‘ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Decorator íŒ¨í„´ì˜ êµ¬ì„±ìš”ì†Œ Component ì¸í„°í˜ì´ìŠ¤ë‚˜ ì¶”ìƒ í´ë˜ìŠ¤ë¡œ ì •ì˜ëœ ê¸°ë³¸ ê°ì²´ì˜ ê³µí†µ ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. ConcreteComponent Component ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ì‹¤ì œ ê°ì²´ì…ë‹ˆë‹¤. Decorator Component ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©°, ê¸°ë³¸ ê°ì²´ë¥¼ ë˜í•‘í•˜ê³  ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ConcreteDecorator Decorator ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ê¸°ë³¸ ê°ì²´ë¥¼ ë˜í•‘í•˜ê³  ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ì‹¤ì œ ê°ì²´ì…ë‹ˆë‹¤. ì¸í„°í˜ì´ìŠ¤public interface Component &#123; String operation();&#125; ëŒ€ìƒ ê°ì²´@Slf4jpublic class RealComponent implements Component&#123; @Override public String operation() &#123; log.info(&quot;Real Component ì‹¤í–‰&quot;); return &quot;data&quot;; &#125;&#125; Client ì½”ë“œ@Slf4jpublic class DecoratorPatternClient &#123; private Component component; public DecoratorPatternClient(Component component)&#123; this.component = component; &#125; public void execute()&#123; String result = component.operation(); log.info(&quot;result = &#123;&#125;&quot;, result); &#125;&#125; ì‹¤í–‰ ë° ê²°ê³¼@Slf4jpublic class DecoratorPatternTest &#123; @Test void noDecorator()&#123; Component component = new RealComponent(); DecoratorPatternClient client = new DecoratorPatternClient(component); client.execute(); &#125;&#125; ë°ì½”ë ˆì´í„° íŒ¨í„´ ì ìš© MessageDecorator ëŠ” Component ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ ìƒì„±í•˜ê³  ë‚´ë¶€ì ìœ¼ë¡œ ëŒ€ìƒ Component ê°ì²´ë¥¼ ê´€ë¦¬í•œë‹¤. MessageDecorator ì—ì„œ êµ¬í˜„ëœ Method ëŠ” ë¶€ê°€ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ë¡œì§ì„ ìˆ˜í–‰í•˜ê³  ëŒ€ìƒ Component ê°ì²´ë¥¼ í˜¸ì¶œí•œë‹¤. @Slf4jpublic class MessageDecorator implements Component&#123; private Component component; // ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì… public MessageDecorator(Component component) &#123; this.component = component; &#125; @Override public String operation() &#123; log.info(&quot;MessageDecorator ì‹¤í–‰&quot;); // ëŒ€ìƒ ê°ì²´ë¥¼ í˜¸ì¶œí•œë‹¤. String result = component.operation(); String decoResult = &quot;*****&quot; + result + &quot;*****&quot; ; log.info(&quot;MessageDecorator ê¾¸ë¯¸ê¸° ì ìš© ì „ = &#123;&#125;, ì ìš© í›„ = &#123;&#125;&quot;, result, decoResult); return decoResult; &#125;&#125; ì‹¤í–‰ ë° ê²°ê³¼ì‹¤ì œ ê°ì²´ RealComponent ë¥¼ ì´ìš©í•´ ë¶€ê°€ê¸°ëŠ¥ì´ ì ìš©ëœ MessageDecorator ê°ì²´ë¥¼ ìƒì„±í•´ì¤€ë‹¤. @Testvoid decorator1()&#123; Component realComponent = new RealComponent(); Component messageDecorator = new MessageDecorator(realComponent); DecoratorPatternClient client = new DecoratorPatternClient(messageDecorator); client.execute();&#125; ì‹¤í–‰ ê²°ê³¼ë¥¼ í†µí•´ MessageDecorator ê°€ í˜¸ì¶œë¼ ë¶€ê°€ê¸°ëŠ¥ ë¡œì§ì´ ìˆ˜í–‰ë˜ê³  ì‹¤ì œ ê°ì²´ RealComponent ê°€ í˜¸ì¶œëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì—¬ëŸ¬ê°œì˜ ë°ì½”ë ˆì´í„° ì¶”ê°€","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Decorator íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Decorator-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Decorator-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡","slug":"spring/spring-aop/design-pattern/proxy-pattern/proxy-04","date":"2021-11-20T18:31:07.000Z","updated":"2024-02-26T15:23:58.742Z","comments":true,"path":"2021/11/21/spring/spring-aop/design-pattern/proxy-pattern/proxy-04/","link":"","permalink":"https://ckck803.github.io/2021/11/21/spring/spring-aop/design-pattern/proxy-pattern/proxy-04/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy Pattern ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡@Repositorypublic class OrderRepositoryV3 &#123; public void save(String itemId) &#123; if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125;catch (InterruptedException ex)&#123; ex.printStackTrace(); &#125; &#125;&#125; @Servicepublic class OrderServiceV3 &#123; private final OrderRepositoryV3 orderRepository; public OrderServiceV3(OrderRepositoryV3 orderRepository) &#123; this.orderRepository = orderRepository; &#125; public void orderItem(String itemId) &#123; orderRepository.save(itemId); &#125;&#125; @RestController@Slf4jpublic class OrderControllerV3 &#123; private final OrderServiceV3 orderService; public OrderControllerV3(OrderServiceV3 orderService) &#123; this.orderService = orderService; &#125; @GetMapping(&quot;/v3/request&quot;) public String request(String itemId) &#123; orderService.orderItem(itemId); return &quot;ok&quot;; &#125; @GetMapping(&quot;/v3/no-log&quot;) public String noLog() &#123; return &quot;ok&quot;; &#125;&#125;","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy Pattern ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡@Repositorypublic class OrderRepositoryV3 &#123; public void save(String itemId) &#123; if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125;catch (InterruptedException ex)&#123; ex.printStackTrace(); &#125; &#125;&#125; @Servicepublic class OrderServiceV3 &#123; private final OrderRepositoryV3 orderRepository; public OrderServiceV3(OrderRepositoryV3 orderRepository) &#123; this.orderRepository = orderRepository; &#125; public void orderItem(String itemId) &#123; orderRepository.save(itemId); &#125;&#125; @RestController@Slf4jpublic class OrderControllerV3 &#123; private final OrderServiceV3 orderService; public OrderControllerV3(OrderServiceV3 orderService) &#123; this.orderService = orderService; &#125; @GetMapping(&quot;/v3/request&quot;) public String request(String itemId) &#123; orderService.orderItem(itemId); return &quot;ok&quot;; &#125; @GetMapping(&quot;/v3/no-log&quot;) public String noLog() &#123; return &quot;ok&quot;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Proxy íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Proxy-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Proxy-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤","slug":"spring/spring-aop/design-pattern/proxy-pattern/proxy-03","date":"2021-11-20T17:31:07.000Z","updated":"2024-02-26T15:23:55.448Z","comments":true,"path":"2021/11/21/spring/spring-aop/design-pattern/proxy-pattern/proxy-03/","link":"","permalink":"https://ckck803.github.io/2021/11/21/spring/spring-aop/design-pattern/proxy-pattern/proxy-03/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy Pattern ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤Repositorypublic class OrderRepositoryV2 &#123; public void save(String itemId) &#123; if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125;catch (InterruptedException ex)&#123; ex.printStackTrace(); &#125; &#125;&#125; Servicepublic class OrderServiceV2 &#123; private final OrderRepositoryV2 orderRepository; public OrderServiceV2(OrderRepositoryV2 orderRepository) &#123; this.orderRepository = orderRepository; &#125; public void orderItem(String itemId) &#123; orderRepository.save(itemId); &#125;&#125; Controller@Slf4j@RequestMapping@ResponseBodypublic class OrderControllerV2 &#123; private final OrderServiceV2 orderService; public OrderControllerV2(OrderServiceV2 orderService) &#123; this.orderService = orderService; &#125; @GetMapping(&quot;/v2/request&quot;) public String request(String itemId) &#123; orderService.orderItem(itemId); return &quot;ok&quot;; &#125; @GetMapping(&quot;/v2/no-log&quot;) public String noLog() &#123; return &quot;ok&quot;; &#125;&#125; Bean ë“±ë¡","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy Pattern ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤Repositorypublic class OrderRepositoryV2 &#123; public void save(String itemId) &#123; if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125;catch (InterruptedException ex)&#123; ex.printStackTrace(); &#125; &#125;&#125; Servicepublic class OrderServiceV2 &#123; private final OrderRepositoryV2 orderRepository; public OrderServiceV2(OrderRepositoryV2 orderRepository) &#123; this.orderRepository = orderRepository; &#125; public void orderItem(String itemId) &#123; orderRepository.save(itemId); &#125;&#125; Controller@Slf4j@RequestMapping@ResponseBodypublic class OrderControllerV2 &#123; private final OrderServiceV2 orderService; public OrderControllerV2(OrderServiceV2 orderService) &#123; this.orderService = orderService; &#125; @GetMapping(&quot;/v2/request&quot;) public String request(String itemId) &#123; orderService.orderItem(itemId); return &quot;ok&quot;; &#125; @GetMapping(&quot;/v2/no-log&quot;) public String noLog() &#123; return &quot;ok&quot;; &#125;&#125; Bean ë“±ë¡@Configurationpublic class AppV2Config &#123; @Bean public OrderControllerV2 orderControllerV2()&#123; return new OrderControllerV2(orderServiceV2()); &#125; @Bean public OrderServiceV2 orderServiceV2()&#123; return new OrderServiceV2(orderRepositoryV2()); &#125; @Bean public OrderRepositoryV2 orderRepositoryV2()&#123; return new OrderRepositoryV2(); &#125;&#125; //@Import(AppV1Config.class)@Import(&#123;AppV1Config.class, AppV2Config.class&#125;)@SpringBootApplication(scanBasePackages = &quot;hello.proxy.app&quot;) //ì£¼ì˜public class ProxyApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProxyApplication.class, args); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Proxy íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Proxy-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Proxy-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤","slug":"spring/spring-aop/design-pattern/proxy-pattern/proxy-02","date":"2021-11-20T16:31:07.000Z","updated":"2024-02-26T15:23:51.154Z","comments":true,"path":"2021/11/21/spring/spring-aop/design-pattern/proxy-pattern/proxy-02/","link":"","permalink":"https://ckck803.github.io/2021/11/21/spring/spring-aop/design-pattern/proxy-pattern/proxy-02/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Proxy íŒ¨í„´ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ì‹¤ì œ ê°ì²´ ëŒ€ì‹  ê°€ìƒì˜ ê°ì²´(Proxy) ë¥¼ ìƒì„±í•´ ë¡œì§ì˜ íë¦„ì„ ì œì–´ í•˜ëŠ” ë°©ë²• Proxy ëŠ” ì‚¬ì „ì ì¸ ì˜ë¯¸ë¡œ ëŒ€ë¦¬ì, ëŒ€ë³€ì¸ì˜ ì˜ë¯¸ë¥¼ ê°–ê³  ìˆë‹¤. í”„ë¡œê·¸ë¨ ë¡œì§ ì‹¤í–‰ì‹œ ì‹¤ì œ ê°ì²´ ëŒ€ì‹  Proxy ê°ì²´ì— ë¡œì§ì„ ëŒ€ì‹  ë§¡ê¸°ê²Œ ëœë‹¤.(ê°ì²´ì˜ ì ‘ê·¼ì„ ì œì–´í•œë‹¤.) ì‹¤ì œ ê°ì²´ ìƒì„±ì„ í•´ë‹¹ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ ì‹œì ê¹Œì§€ ë¯¸ë£° ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤.(lazy-loading ê°€ëŠ¥) RepositoryRepository ì¸í„°í˜ì´ìŠ¤public interface OrderRepositoryV1 &#123; void save(String itemId);&#125; Repository êµ¬í˜„ í´ë˜ìŠ¤public class OrderRepositoryV1Impl implements OrderRepositoryV1&#123; @Override public void save(String itemId) &#123; if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125;catch (InterruptedException ex)&#123; ex.printStackTrace(); &#125; &#125;&#125;","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Proxy íŒ¨í„´ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ì‹¤ì œ ê°ì²´ ëŒ€ì‹  ê°€ìƒì˜ ê°ì²´(Proxy) ë¥¼ ìƒì„±í•´ ë¡œì§ì˜ íë¦„ì„ ì œì–´ í•˜ëŠ” ë°©ë²• Proxy ëŠ” ì‚¬ì „ì ì¸ ì˜ë¯¸ë¡œ ëŒ€ë¦¬ì, ëŒ€ë³€ì¸ì˜ ì˜ë¯¸ë¥¼ ê°–ê³  ìˆë‹¤. í”„ë¡œê·¸ë¨ ë¡œì§ ì‹¤í–‰ì‹œ ì‹¤ì œ ê°ì²´ ëŒ€ì‹  Proxy ê°ì²´ì— ë¡œì§ì„ ëŒ€ì‹  ë§¡ê¸°ê²Œ ëœë‹¤.(ê°ì²´ì˜ ì ‘ê·¼ì„ ì œì–´í•œë‹¤.) ì‹¤ì œ ê°ì²´ ìƒì„±ì„ í•´ë‹¹ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ ì‹œì ê¹Œì§€ ë¯¸ë£° ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤.(lazy-loading ê°€ëŠ¥) RepositoryRepository ì¸í„°í˜ì´ìŠ¤public interface OrderRepositoryV1 &#123; void save(String itemId);&#125; Repository êµ¬í˜„ í´ë˜ìŠ¤public class OrderRepositoryV1Impl implements OrderRepositoryV1&#123; @Override public void save(String itemId) &#123; if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125;catch (InterruptedException ex)&#123; ex.printStackTrace(); &#125; &#125;&#125; ServiceService ì¸í„°í˜ì´ìŠ¤public interface OrderServiceV1 &#123; void orderItem(String itemId);&#125; Service êµ¬í˜„ í´ë˜ìŠ¤public class OrderServiceV1Impl implements OrderServiceV1&#123; private final OrderRepositoryV1 orderRepository; public OrderServiceV1Impl(OrderRepositoryV1 orderRepositoryV1) &#123; this.orderRepository = orderRepositoryV1; &#125; @Override public void orderItem(String itemId) &#123; orderRepository.save(itemId); &#125;&#125; ControllerController ì¸í„°í˜ì´ìŠ¤@RequestMapping@ResponseBodypublic interface OrderControllerV1 &#123; @GetMapping(&quot;/v1/request&quot;) String request(@RequestParam(&quot;itemId&quot;) String itemId); @GetMapping(&quot;/v1/no-log&quot;) String noLog();&#125; Controller êµ¬í˜„ í´ë˜ìŠ¤public class OrderControllerV1Impl implements OrderControllerV1&#123; private final OrderServiceV1 orderService; public OrderControllerV1Impl(OrderServiceV1 orderService) &#123; this.orderService = orderService; &#125; @Override public String request(String itemId) &#123; orderService.orderItem(itemId); return &quot;ok&quot;; &#125; @Override public String noLog() &#123; return &quot;ok&quot;; &#125;&#125; Bean ë“±ë¡@Configurationpublic class AppV1Config &#123; @Bean public OrderControllerV1 orderControllerV1()&#123; return new OrderControllerV1Impl(orderServiceV1()); &#125; @Bean public OrderServiceV1 orderServiceV1()&#123; return new OrderServiceV1Impl(orderRepositoryV1()); &#125; @Bean public OrderRepositoryV1 orderRepositoryV1()&#123; return new OrderRepositoryV1Impl(); &#125;&#125; @Import(AppV1Config.class)@SpringBootApplication(scanBasePackages = &quot;hello.proxy.app&quot;) //ì£¼ì˜public class ProxyApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProxyApplication.class, args); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Proxy íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Proxy-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Proxy-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´","slug":"spring/spring-aop/design-pattern/proxy-pattern/proxy-01","date":"2021-11-20T15:31:07.000Z","updated":"2024-02-26T15:23:47.496Z","comments":true,"path":"2021/11/21/spring/spring-aop/design-pattern/proxy-pattern/proxy-01/","link":"","permalink":"https://ckck803.github.io/2021/11/21/spring/spring-aop/design-pattern/proxy-pattern/proxy-01/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Proxy íŒ¨í„´ - ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì ‘ê·¼ ì œì–´ë¥¼ ìœ„í•œ ë””ìì¸ íŒ¨í„´ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ì‹¤ì œ (Real) ê°ì²´ ëŒ€ì‹  ê°€ìƒì˜ (Proxy) ê°ì²´ ë¥¼ ì´ìš©í•´ ì‹¤ì œ ê°ì²´ ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´ í•˜ëŠ” ë””ìì¸ íŒ¨í„´ í”„ë¡ì‹œ íŒ¨í„´ì€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë””ìì¸ íŒ¨í„´ ì¤‘ í•˜ë‚˜ë¡œ ì‹¤ì œ ê°ì²´ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ ë¥¼ ì œê³µí•˜ëŠ” ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì¦‰, í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ìœ ì§€í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ê°€ ì‹¤ì œ ê°ì²´ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  í•  ë•Œ ëŒ€ì‹  ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë¯€ë¡œ, í´ë¼ì´ì–¸íŠ¸ëŠ” í”„ë¡ì‹œ ê°ì²´ì™€ ì‹¤ì œ ê°ì²´ë¥¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡ì‹œ íŒ¨í„´ì˜ ì‚¬ìš© ì‚¬ë¡€ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì´ ìˆìŠµë‹ˆë‹¤. ì›ê²© ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ì›ê²© ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•˜ë ¤ë©´, í´ë¼ì´ì–¸íŠ¸ëŠ” ì›ê²© ê°ì²´ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•˜ì§€ ì•Šê³ , ì›ê²© ê°ì²´ë¥¼ ëŒ€ì‹ í•˜ì—¬ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë•Œ í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ê²© ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•˜ê³ , ì›ê²© ê°ì²´ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë³´ì•ˆ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•˜ë©´, ë³´ì•ˆìƒ ì´ì ì´ ìˆìŠµë‹ˆë‹¤. í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´, í´ë¼ì´ì–¸íŠ¸ëŠ” ì‹¤ì œ ê°ì²´ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•˜ì§€ ì•Šê³ , í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ì•¡ì„¸ìŠ¤í•˜ë¯€ë¡œ, ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•˜ê³  ë³´ì•ˆì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ìš© ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ë¹„ìš©ì´ ë†’ì€ ê²½ìš°, í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ ë¹„ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì›ê²© ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ëŠ” ë„¤íŠ¸ì›Œí¬ ë¹„ìš©ì´ ë“¤ê¸° ë•Œë¬¸ì—, ì›ê²© ê°ì²´ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•˜ëŠ” ê²ƒë³´ë‹¤ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›ê²© ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ë¹„ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìºì‹± í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ìºì‹±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ì „ì— ìºì‹œëœ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´, ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ë¹„ìš©ì„ ì¤„ì´ê³ , ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Proxy íŒ¨í„´ì˜ êµ¬ì„± ìš”ì†Œ","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Proxy íŒ¨í„´ - ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì ‘ê·¼ ì œì–´ë¥¼ ìœ„í•œ ë””ìì¸ íŒ¨í„´ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ì‹¤ì œ (Real) ê°ì²´ ëŒ€ì‹  ê°€ìƒì˜ (Proxy) ê°ì²´ ë¥¼ ì´ìš©í•´ ì‹¤ì œ ê°ì²´ ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´ í•˜ëŠ” ë””ìì¸ íŒ¨í„´ í”„ë¡ì‹œ íŒ¨í„´ì€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë””ìì¸ íŒ¨í„´ ì¤‘ í•˜ë‚˜ë¡œ ì‹¤ì œ ê°ì²´ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ ë¥¼ ì œê³µí•˜ëŠ” ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì¦‰, í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ìœ ì§€í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ê°€ ì‹¤ì œ ê°ì²´ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  í•  ë•Œ ëŒ€ì‹  ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë¯€ë¡œ, í´ë¼ì´ì–¸íŠ¸ëŠ” í”„ë¡ì‹œ ê°ì²´ì™€ ì‹¤ì œ ê°ì²´ë¥¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡ì‹œ íŒ¨í„´ì˜ ì‚¬ìš© ì‚¬ë¡€ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì´ ìˆìŠµë‹ˆë‹¤. ì›ê²© ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ì›ê²© ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•˜ë ¤ë©´, í´ë¼ì´ì–¸íŠ¸ëŠ” ì›ê²© ê°ì²´ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•˜ì§€ ì•Šê³ , ì›ê²© ê°ì²´ë¥¼ ëŒ€ì‹ í•˜ì—¬ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë•Œ í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ê²© ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•˜ê³ , ì›ê²© ê°ì²´ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë³´ì•ˆ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•˜ë©´, ë³´ì•ˆìƒ ì´ì ì´ ìˆìŠµë‹ˆë‹¤. í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´, í´ë¼ì´ì–¸íŠ¸ëŠ” ì‹¤ì œ ê°ì²´ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•˜ì§€ ì•Šê³ , í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ì•¡ì„¸ìŠ¤í•˜ë¯€ë¡œ, ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•˜ê³  ë³´ì•ˆì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ìš© ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ë¹„ìš©ì´ ë†’ì€ ê²½ìš°, í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ ë¹„ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì›ê²© ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ëŠ” ë„¤íŠ¸ì›Œí¬ ë¹„ìš©ì´ ë“¤ê¸° ë•Œë¬¸ì—, ì›ê²© ê°ì²´ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•˜ëŠ” ê²ƒë³´ë‹¤ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›ê²© ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ë¹„ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìºì‹± í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ìºì‹±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ì „ì— ìºì‹œëœ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´, ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ë¹„ìš©ì„ ì¤„ì´ê³ , ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Proxy íŒ¨í„´ì˜ êµ¬ì„± ìš”ì†Œ Subject ì‹¤ì œ ê°ì²´ì™€ ëŒ€ë¦¬ì ê°ì²´ê°€ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê³µí†µ ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì‹¤ì œ ê°ì²´ì™€ ëŒ€ë¦¬ì ê°ì²´ë¥¼ ë™ì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°–ë„ë¡ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. Real Subject ì‹¤ì œ ê°ì²´ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ ê°ì²´ëŠ” Proxy ê°ì²´ì—ì„œ ëŒ€ì‹ í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. Proxy Real Subjectë¥¼ ëŒ€ì‹ í•´ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ìš”ì²­ì„ ë°›ì•„ ì²˜ë¦¬í•©ë‹ˆë‹¤. Real Subjectì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ìœ ì§€í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ê²Œ Real Subjectì™€ ë™ì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ProxyëŠ” Real Subjectì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´í•˜ê³ , ì‹¤ì œ ê°ì²´ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ì´ˆê¸°í™”í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. Proxy ì˜ ì£¼ìš” ê¸°ëŠ¥ Proxy ê°€ ì¤‘ê°„ì— ìˆìœ¼ë©´ ì ‘ê·¼ ì œì–´ ì™€ ë¶€ê°€ ê¸°ëŠ¥ ì¶”ê°€ ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ê°ì²´ì˜ ì ‘ê·¼ ì œì–´ í”„ë¡œê·¸ë¨ ë¡œì§ ì‹¤í–‰ì‹œ ì‹¤ì œ ê°ì²´ ëŒ€ì‹  Proxy ê°ì²´ì— ë¡œì§ì„ ëŒ€ì‹  ë§¡ê¸°ê²Œ ëœë‹¤. ê¶Œí•œì— ë”°ë¥¸ ì ‘ê·¼ ì°¨ë‹¨ ê¶Œí•œë³„ë¡œ ì‹¤ì œ ê°ì²´ì— ì ‘ê·¼ì„ ì œí•œí•˜ë„ë¡ í•œë‹¤. Lazy-Loading ì‹¤ì œ ê°ì²´ ìƒì„±ì„ í•´ë‹¹ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ ì‹œì ê¹Œì§€ ë¯¸ë£° ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤. Caching DB ì™€ ê°™ì´ ìš”ì²­ì´ ê¸¸ì–´ì§€ëŠ” ê°’ì„ ë¯¸ë¦¬ ì €ì¥í•´ ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì ‘ê·¼ì„ ì¤„ì¸ë‹¤. ë¶€ê°€ ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­ ê°’, ì‘ë‹µ ê°’ì„ ì¤‘ê°„ì— ë³€ê²½ ì¶”ê°€ ë¡œê·¸ ë‚¨ê¸°ê¸° Proxy Chain Proxy ê°ì²´ê°€ ë˜ ë‹¤ë¥¸ Proxy ê°ì²´ë¥¼ ë¶€ë¥¼ ìˆ˜ ìˆë‹¤. Proxy íŒ¨í„´ì˜ ì˜ì¡´ ê´€ê³„ Proxy íŒ¨í„´ì€ ì‹¤ì œ ê°ì²´ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ ë¥¼ ì‚¬ìš©í•œë‹¤. Client ê°ì²´ ì…ì¥ì—ì„œëŠ” Server ê°ì²´ ì‹¤í–‰ì‹œ Server ê°ì²´ë¥¼ ì‹¤í–‰í•˜ë“  Proxy ê°ì²´ë¥¼ ì‹¤í–‰í•˜ë“  ë™ì¼í•˜ê²Œ ì‹¤í–‰ì´ ë˜ì•¼ í•˜ê¸° ë•Œë¬¸ì— ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ êµ¬í˜„í•´ì•¼ í•œë‹¤. ì¸í„°í˜ì´ìŠ¤public interface Subject &#123; String operation();&#125; ì‹¤ì œ ê°ì²´@Slf4jpublic class RealSubject implements Subject&#123; @Override public String operation() &#123; log.info(&quot;ì‹¤ì œ ê°ì²´ í˜¸ì¶œ&quot;); sleep(1000); return &quot;data&quot;; &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125;catch (InterruptedException ex)&#123; ex.printStackTrace(); &#125; &#125;&#125; Client ì½”ë“œpublic class ProxyPatternClient &#123; private Subject subject; // ìƒì„±ì ì£¼ì…ì„ í†µí•´ Subject ê°ì²´ë¥¼ ì£¼ì…í•œë‹¤. public ProxyPatternClient(Subject subject)&#123; this.subject = subject; &#125; public void execute()&#123; subject.operation(); &#125;&#125; ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ ë° ê²°ê³¼client ê°ì²´ë‚´ execute ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ execute ë‚´ë¶€ ë¡œì§ì„ ë°˜ë³µí•´ì„œ 3ë²ˆ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. public class ProxyPatternTest &#123; @Test void noProxyTest()&#123; RealSubject realSubject = new RealSubject(); ProxyPatternClient client = new ProxyPatternClient(realSubject); client.execute(); client.execute(); client.execute(); &#125;&#125; 00:03:29.052 [Test worker] INFO hello.proxy.pureproxy.proxy.code.RealSubject - ì‹¤ì œ ê°ì²´ í˜¸ì¶œ00:03:30.059 [Test worker] INFO hello.proxy.pureproxy.proxy.code.RealSubject - ì‹¤ì œ ê°ì²´ í˜¸ì¶œ00:03:31.062 [Test worker] INFO hello.proxy.pureproxy.proxy.code.RealSubject - ì‹¤ì œ ê°ì²´ í˜¸ì¶œ Proxy íŒ¨í„´ ì ìš© - í”„ë¡ì‹œ í´ë˜ìŠ¤ ìƒì„±Proxy íŒ¨í„´ì„ ì ìš©í•´ RealSubject ê°ì²´ ì ‘ê·¼ì„ ì œì–´í•œë‹¤. ìš°ì„ , RealSubject ë¥¼ ë§Œë“¤ë•Œ ì‚¬ìš©í•œ Subject ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ CacheProxy í´ë˜ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. CacheProxy ëŠ” ì €ì¥ëœ ê°’ì´ ì—†ì„ ê²½ìš° RealSubject ê°ì²´ ëŒ€í•œ ì ‘ê·¼í•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ì €ì¥ëœ ê°’ì´ ìˆì„ ê²½ìš° RealSubject ê°ì²´ ì ‘ê·¼ì„ ìƒëµí•˜ê³  ì €ì¥ëœ ê°’ì„ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. @Slf4jpublic class CacheProxy implements Subject&#123; // Proxy ê°ì²´ ë‚´ ì‹¤ì œ ê°ì²´ë¥¼ ì €ì¥ private Subject target; // ì‹¤ì œ ê°ì²´ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ê°ì²´ private String cacheValue; public CacheProxy(Subject target) &#123; this.target = target; &#125; @Override public String operation() &#123; log.info(&quot;í”„ë¡ì‹œ í˜¸ì¶œ&quot;); // ê°’ì„ ìºì‹±í•´ ë†“ìŒìœ¼ë¡œì¨ ë§¤ë²ˆ ê°ì²´ë¥¼ ìƒì„± ë° DB ë¡œë¶€í„° ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì‘ì—…ì„ ìƒëµ í•œë‹¤. // 1. ìºì‹±ëœ ê°’ì´ ì—†ì„ ê²½ìš° ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì ‘ê·¼ì´ ì´ë¤„ì§„ë‹¤. // 2. ìºì‹±ëœ ê°’ì´ ìˆì„ ê²½ìš° ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì ‘ê·¼ì´ ì´ë¤„ì§€ì§€ ì•ŠëŠ”ë‹¤. if(cacheValue == null)&#123; // ì‹¤ì œ ê°ì²´ ì‹¤í–‰ cacheValue = target.operation(); &#125; return cacheValue; &#125;&#125; ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ ë° ê²°ê³¼ RealSubject ì½”ë“œì™€ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  Proxy ê°ì²´ë¥¼ í†µí•´ ì ‘ê·¼ ì œì–´ ë¥¼ í–ˆë‹¤. ì²˜ìŒì—ëŠ” ì‹¤ì œ ê°ì²´ë¥¼ ì‹¤í–‰í•´ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°›ê³  ë‘ë²ˆì§¸ ë¶€í„°ëŠ” ìºì‹±í•œ ê²°ê³¼ ë¥¼ ë°›ëŠ”ë‹¤. ì‹¤ì œ ê°ì²´ ëŒ€ì‹  Proxy ê°ì²´ ì£¼ì… ì„ í†µí•´ ëŸ°íƒ€ì„ì‹œ client -&gt; cacheProxy -&gt; realSubject ë¡œ ì˜ì¡´ ê´€ê³„ê°€ í˜•ì„±ëœë‹¤. @Testvoid cacheProxyTest()&#123; RealSubject realSubject = new RealSubject(); // ì‹¤ì œ ê°ì²´ë¥¼ ì´ìš©í•´ Proxy ê°ì²´ ìƒì„± CacheProxy cacheProxy = new CacheProxy(realSubject); // Client ì— ì‹¤ì œ ê°ì²´ ëŒ€ì‹  Proxy ê°ì²´ë¥¼ ì£¼ì… Client ê°€ Proxy ê°ì²´ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•œë‹¤. ProxyPatternClient client = new ProxyPatternClient(cacheProxy); client.execute(); // ì²˜ìŒì—ëŠ” ì‹¤ì œ ê°ì²´ë¥¼ ì‹¤í–‰í•´ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°›ëŠ”ë‹¤. client.execute(); // ë‘ë²ˆì§¸ ë¶€í„°ëŠ” ìºì‹±í•œ ê²°ê³¼ë¥¼ ë°›ëŠ”ë‹¤. client.execute();&#125; ì‹¤í–‰ ê²°ê³¼ë¥¼ í†µí•´ Proxy ê°ì²´ CacheProxy ë¥¼ í˜¸ì¶œ í›„ ì‹¤ì œ ê°ì²´ RealSubject ë¥¼ í˜¸ì¶œí•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë˜í•œ, í•œë²ˆ í˜¸ì¶œ í›„ ê°’ì´ ìºì‹±ë˜ë©´ ë” ì´ìƒ ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì ‘ê·¼ì´ ì´ë¤„ì§€ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 11:03:11.638 [Test worker] INFO hello.proxy.pureproxy.proxy.code.CacheProxy - í”„ë¡ì‹œ í˜¸ì¶œ11:03:11.640 [Test worker] INFO hello.proxy.pureproxy.proxy.code.RealSubject - ì‹¤ì œ ê°ì²´ í˜¸ì¶œ11:03:12.645 [Test worker] INFO hello.proxy.pureproxy.proxy.code.CacheProxy - í”„ë¡ì‹œ í˜¸ì¶œ11:03:12.645 [Test worker] INFO hello.proxy.pureproxy.proxy.code.CacheProxy - í”„ë¡ì‹œ í˜¸ì¶œ","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Proxy íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Proxy-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Proxy-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Callback íŒ¨í„´","slug":"spring/spring-aop/design-pattern/template-callback-pattern/Template-Callback-Pattern-01","date":"2021-11-20T07:31:07.000Z","updated":"2024-02-26T15:24:16.617Z","comments":true,"path":"2021/11/20/spring/spring-aop/design-pattern/template-callback-pattern/Template-Callback-Pattern-01/","link":"","permalink":"https://ckck803.github.io/2021/11/20/spring/spring-aop/design-pattern/template-callback-pattern/Template-Callback-Pattern-01/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ ì½œë°±ì´ë€ ì½œë°±, ì½œì—í”„í„° í•¨ìˆ˜ë€ ë‹¤ë¥¸ ì½”ë“œì˜ ì¸ìˆ˜ë¡œì„œ ë„˜ê²¨ì£¼ëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ ì½”ë“œì½œë°±ì„ ë„˜ê²¨ë°›ëŠ” ì½”ë“œëŠ” ì´ ì½œë°±ì„ í•„ìš”ì— ë”°ë¼ ì¦‰ì‹œ ì‹¤í–‰í•  ìˆ˜ ìˆê³ , ì•„ë‹ˆë©´ ë‚˜ì¤‘ì— ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. public interface Callback &#123; void call();&#125; @Slf4jpublic class TimeLogTemplate &#123; public void execute(Callback callback)&#123; long startTime = System.currentTimeMillis(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ callback.call(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¢…ë£Œ long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;resultTime = &#123;&#125;&quot;, resultTime); &#125;&#125; Template Callback Pattern ì‹¤í–‰ì§ì ‘ì ìœ¼ë¡œ Callback ê°ì²´ë‚´ call ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ TimeLogTemplate ê°ì²´ì—ì„œ execute ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ Callback ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ê³  execute ë‚´ì—ì„œ Callback ê°ì²´ì˜ call ë©”ì†Œë“œê°€ ì‹¤í–‰ëœë‹¤. @Slf4jpublic class TemplateCallbackTest &#123; @Test void callbackV1()&#123; TimeLogTemplate template = new TimeLogTemplate(); template.execute(new Callback() &#123; @Override public void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰&quot;); &#125; &#125;); // ëŒë‹¤ì‹ ì ìš© template.execute(() -&gt; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰&quot;)); &#125;&#125;","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ ì½œë°±ì´ë€ ì½œë°±, ì½œì—í”„í„° í•¨ìˆ˜ë€ ë‹¤ë¥¸ ì½”ë“œì˜ ì¸ìˆ˜ë¡œì„œ ë„˜ê²¨ì£¼ëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ ì½”ë“œì½œë°±ì„ ë„˜ê²¨ë°›ëŠ” ì½”ë“œëŠ” ì´ ì½œë°±ì„ í•„ìš”ì— ë”°ë¼ ì¦‰ì‹œ ì‹¤í–‰í•  ìˆ˜ ìˆê³ , ì•„ë‹ˆë©´ ë‚˜ì¤‘ì— ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. public interface Callback &#123; void call();&#125; @Slf4jpublic class TimeLogTemplate &#123; public void execute(Callback callback)&#123; long startTime = System.currentTimeMillis(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ callback.call(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¢…ë£Œ long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;resultTime = &#123;&#125;&quot;, resultTime); &#125;&#125; Template Callback Pattern ì‹¤í–‰ì§ì ‘ì ìœ¼ë¡œ Callback ê°ì²´ë‚´ call ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ TimeLogTemplate ê°ì²´ì—ì„œ execute ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ Callback ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ê³  execute ë‚´ì—ì„œ Callback ê°ì²´ì˜ call ë©”ì†Œë“œê°€ ì‹¤í–‰ëœë‹¤. @Slf4jpublic class TemplateCallbackTest &#123; @Test void callbackV1()&#123; TimeLogTemplate template = new TimeLogTemplate(); template.execute(new Callback() &#123; @Override public void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰&quot;); &#125; &#125;); // ëŒë‹¤ì‹ ì ìš© template.execute(() -&gt; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰&quot;)); &#125;&#125; Template Callback Pattern ì ìš©public class TraceTemplate &#123; private final LogTrace trace; public TraceTemplate(LogTrace trace)&#123; this.trace = trace; &#125; public &lt;T&gt; T execute(String message, TraceCallback&lt;T&gt; callback)&#123; TraceStatus status = null; try&#123; status = trace.begin(message); // ë¡œì§ í˜¸ì¶œ T result = callback.call(); trace.end(status); return result; &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; &#125; &#125;&#125; @RestControllerpublic class OrderControllerV5 &#123; private final OrderServiceV5 orderService; private final TraceTemplate template; public OrderControllerV5(OrderServiceV5 orderService, LogTrace logTrace) &#123; this.orderService = orderService; this.template = new TraceTemplate(logTrace); &#125; @GetMapping(&quot;/v5/request&quot;) public String request(String itemId)&#123; return template.execute(&quot;OrderController.request()&quot;, new TraceCallback&lt;String&gt;() &#123; @Override public String call() &#123; orderService.orderItem(itemId); return &quot;ok&quot;; &#125; &#125;); &#125;&#125; @Servicepublic class OrderServiceV5 &#123; private final OrderRepositoryV5 orderRepository; private final TraceTemplate template; public OrderServiceV5(OrderRepositoryV5 orderRepository, LogTrace trace) &#123; this.orderRepository = orderRepository; this.template = new TraceTemplate(trace); &#125; public void orderItem (String itemId)&#123; template.execute(&quot;OrderService.orderItem()&quot;, () -&gt; &#123; orderRepository.save(itemId); return null; &#125;); &#125;&#125; @Repositorypublic class OrderRepositoryV5 &#123; private final TraceTemplate template; public OrderRepositoryV5(LogTrace logTrace) &#123; this.template = new TraceTemplate(logTrace); &#125; public void save(String itemId)&#123; template.execute(&quot;OrderRepository.save()&quot;, () -&gt; &#123; if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); return null; &#125;); &#125; private void sleep(int millis) &#123; try&#123; Thread.sleep(millis); &#125;catch (InterruptedException e)&#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Template Callback íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Template-Callback-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Template-Callback-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´","slug":"spring/spring-aop/design-pattern/strategy-pattern/Strategy-Pattern-01","date":"2021-11-20T06:31:07.000Z","updated":"2024-02-26T15:24:11.416Z","comments":true,"path":"2021/11/20/spring/spring-aop/design-pattern/strategy-pattern/Strategy-Pattern-01/","link":"","permalink":"https://ckck803.github.io/2021/11/20/spring/spring-aop/design-pattern/strategy-pattern/Strategy-Pattern-01/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Strategy íŒ¨í„´ Strategy íŒ¨í„´ ì€ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ Context ì— ë‘ê³  ë³€í•˜ëŠ” ë¶€ë¶„ì„ Strategy ë¼ëŠ” Interface ë¥¼ ë§Œë“¤ê³  í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ ì½”ë“œ ì¤‘ë³µì„±ì„ í•´ê²°í•œë‹¤. Strategy íŒ¨í„´ ì½”ë“œ ì¤‘ë³µ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë””ìì¸ íŒ¨í„´ ì¤‘ í•˜ë‚˜ë¡œ Context ì™€ Strategy ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ê³µí†µ ë¡œì§ì€ Context í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ ê´€ë¦¬í•˜ê³  ì„œë¡œ ë‹¤ë¥¸ ë¡œì§ë“¤ì„ Strategy ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì½”ë“œ ì¤‘ë³µ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤. Strategy íŒ¨í„´ ì—ì„œ Context í´ë˜ìŠ¤ëŠ” ë‚´ë¶€ì— Strategy í´ë˜ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” Context ê°ì²´ê°€ ì‹¤í–‰ë  ë•Œ, ë‚´ë¶€ì— ì €ì¥ëœ Strategy ê°ì²´ë¥¼ í™œìš©í•˜ì—¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ Context ê°ì²´ëŠ” ì‹¤í–‰ ì‹œ Strategy ê°ì²´ì— ì˜ì¡´í•˜ê²Œ ë©ë‹ˆë‹¤. Strategy í´ë˜ìŠ¤ë“¤ì€ ì„œë¡œ ë‹¤ë¥¸ ë¡œì§ì„ ê°€ì§€ê³  ìˆì§€ë§Œ ë™ì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„ë©ë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ Context í´ë˜ìŠ¤ëŠ” ë™ì¼í•œ ë©”ì†Œë“œ í˜¸ì¶œì„ í†µí•´ ë‹¤ì–‘í•œ Strategy ê°ì²´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Template Method íŒ¨í„´ê³¼ì˜ ì°¨ì´ì ì€ ê³µí†µì ì¸ ë¶€ë¶„ì„ ì¶”ìƒ í´ë˜ìŠ¤ì—ì„œ ê´€ë¦¬í•˜ê³  ìƒì†ì„ í†µí•´ ë³€í•˜ëŠ” ë¶€ë¶„ì„ êµ¬í˜„í•´ ì½”ë“œ ì¤‘ë³µì„±ì„ í•´ê²° í–ˆìŠµë‹ˆë‹¤. Startegy Pattern ì€ ìƒì†ì´ ì•„ë‹ˆë¼ ìœ„ì„ ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤. Strategy ì¸í„°í˜ì´ìŠ¤ - ë³€í•˜ëŠ” ë¡œì§ì„ ê´€ë¦¬","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Strategy íŒ¨í„´ Strategy íŒ¨í„´ ì€ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ Context ì— ë‘ê³  ë³€í•˜ëŠ” ë¶€ë¶„ì„ Strategy ë¼ëŠ” Interface ë¥¼ ë§Œë“¤ê³  í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ ì½”ë“œ ì¤‘ë³µì„±ì„ í•´ê²°í•œë‹¤. Strategy íŒ¨í„´ ì½”ë“œ ì¤‘ë³µ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë””ìì¸ íŒ¨í„´ ì¤‘ í•˜ë‚˜ë¡œ Context ì™€ Strategy ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ê³µí†µ ë¡œì§ì€ Context í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ ê´€ë¦¬í•˜ê³  ì„œë¡œ ë‹¤ë¥¸ ë¡œì§ë“¤ì„ Strategy ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì½”ë“œ ì¤‘ë³µ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤. Strategy íŒ¨í„´ ì—ì„œ Context í´ë˜ìŠ¤ëŠ” ë‚´ë¶€ì— Strategy í´ë˜ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” Context ê°ì²´ê°€ ì‹¤í–‰ë  ë•Œ, ë‚´ë¶€ì— ì €ì¥ëœ Strategy ê°ì²´ë¥¼ í™œìš©í•˜ì—¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ Context ê°ì²´ëŠ” ì‹¤í–‰ ì‹œ Strategy ê°ì²´ì— ì˜ì¡´í•˜ê²Œ ë©ë‹ˆë‹¤. Strategy í´ë˜ìŠ¤ë“¤ì€ ì„œë¡œ ë‹¤ë¥¸ ë¡œì§ì„ ê°€ì§€ê³  ìˆì§€ë§Œ ë™ì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„ë©ë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ Context í´ë˜ìŠ¤ëŠ” ë™ì¼í•œ ë©”ì†Œë“œ í˜¸ì¶œì„ í†µí•´ ë‹¤ì–‘í•œ Strategy ê°ì²´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Template Method íŒ¨í„´ê³¼ì˜ ì°¨ì´ì ì€ ê³µí†µì ì¸ ë¶€ë¶„ì„ ì¶”ìƒ í´ë˜ìŠ¤ì—ì„œ ê´€ë¦¬í•˜ê³  ìƒì†ì„ í†µí•´ ë³€í•˜ëŠ” ë¶€ë¶„ì„ êµ¬í˜„í•´ ì½”ë“œ ì¤‘ë³µì„±ì„ í•´ê²° í–ˆìŠµë‹ˆë‹¤. Startegy Pattern ì€ ìƒì†ì´ ì•„ë‹ˆë¼ ìœ„ì„ ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤. Strategy ì¸í„°í˜ì´ìŠ¤ - ë³€í•˜ëŠ” ë¡œì§ì„ ê´€ë¦¬public interface Strategy &#123; void call();&#125; Strategy êµ¬í˜„ì²´StrategyLogic1 í´ë˜ìŠ¤ì™€ StrategyLogic2 í´ë˜ìŠ¤ëŠ” ë™ì¼í•œ Strategy ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ êµ¬í˜„í•©ë‹ˆë‹¤. @Slf4jpublic class StrategyLogic1 implements Strategy&#123; @Override public void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰&quot;); &#125;&#125; @Slf4jpublic class StrategyLogic2 implements Strategy&#123; @Override public void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰&quot;); &#125;&#125; Context - ë³€í•˜ì§€ ì•ŠëŠ” ê³µí†µ ë¡œì§ì„ ê´€ë¦¬ ì „ëµ íŒ¨í„´ì˜ í•µì‹¬ì€ Context ëŠ” Strategy ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ContextV1 ê°ì²´ëŠ” ë‚´ë¶€ì— Strategy ê°ì²´ë¥¼ ê°–ê³  ìˆëŠ” ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ContextV1 ê°ì²´ ì´ˆê¸°í™”ì‹œ ë‹¤ì–‘í•œ Strategy ê°ì²´ë¥¼ ì „ë‹¬í•¨ìœ¼ë¡œì¨ ê³µí†µ ë¡œì§ì„ ìˆ˜í–‰í•˜ë©´ì„œ ë‹¤ì–‘í•œ ë¡œì§ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ê³µí†µì ì¸ ì½”ë“œë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ì½”ë“œ ì¤‘ë³µì„ ì¤„ì´ê³  ì¬ì‚¬ìš©ì„±ì„ ë†’ì¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. Spring ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ ì´ ë°”ë¡œ Strategy Pattern ì…ë‹ˆë‹¤. ê³µí†µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” Spring í”„ë ˆì„ì›Œí¬ì— íŠ¹ì • ë¡œì§ì„ ìˆ˜í–‰í•˜ë„ë¡ êµ¬í˜„ëœ ê°ì²´ë¥¼ ì „ë‹¬í•¨ìœ¼ë¡œì¨ ê³µí†µëœ Spring ë¡œì§ê³¼ ê°œì¸ì´ êµ¬í˜„í•œ ë¡œì§ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í° ë¼ˆëŒ€ë¥¼ ê°–ëŠ” Context ëŠ” ìˆ˜ì •í•˜ì§€ ì•Šìœ¼ë©´ì„œ íŠ¹ì •ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” Stategy ë§Œ ìƒì„±í•´ ì‹¤í–‰í•¨ìœ¼ë¡œì¨ ê°ì²´ ì§€í–¥ ì›ì¹™ ì¤‘ í•˜ë‚˜ì¸ ê°œë°©-íì‡„ ì›ì¹™(OCP) ì„ ë”°ë¥´ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. @Slf4jpublic class ContextV1 &#123; // Strategy ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´ private Strategy strategy; public ContextV1 (Strategy strategy)&#123; this.strategy = strategy; &#125; public void execute()&#123; long startTime = System.currentTimeMillis(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ strategy.call(); // Strategy ê°ì²´ë¥¼ ì‹¤í–‰ // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¢…ë£Œ long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;resultTime = &#123;&#125;&quot;, resultTime); &#125;&#125; Strategy Pattern ì‹¤í–‰ ë° ê²°ê³¼ê³µí†µ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ContextV1 ê°ì²´ì— StrategyLogic1 ê°ì²´ì™€ StrategyLogic2 ê°ì²´ë¥¼ ì£¼ì…í•´ ì¤Œìœ¼ë¡œì¨ ì„œë¡œë‹¤ë¥¸ ë¡œì§ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. StrategyLogic1 ê°ì²´ì™€ StrategyLogic2 ê°ì²´ëŠ” ê°™ì€ Strategy ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ êµ¬í˜„ë˜ì—ˆê¸° ë•Œë¬¸ì— ContextV1 ê°ì²´ëŠ” ë™ì¼í•œ ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì£¼ì…ëœ ê°ì²´ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. @Testvoid strategyV1()&#123; StrategyLogic1 strategyLogic1 = new StrategyLogic1(); // StrategyLogic1 ê°ì²´ë¥¼ ContextV1 ì— ì£¼ì…í•´ì¤€ë‹¤. ContextV1 context1 = new ContextV1(strategyLogic1); context1.execute(); StrategyLogic2 strategyLogic2 = new StrategyLogic2(); // StrategyLogic2 ê°ì²´ë¥¼ ContextV1 ì— ì£¼ì…í•´ì¤€ë‹¤. ContextV1 context2 = new ContextV1(strategyLogic2); context2.execute();&#125; ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ ì‚¬ìš©@Testvoid strategyV2()&#123; Strategy strategyLogic1 = new Strategy() &#123; @Override public void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰&quot;); &#125; &#125;; ContextV1 contextV1 = new ContextV1(strategyLogic1); log.info(&quot;strategyLogic1 = &#123;&#125;&quot;, contextV1.getClass()); contextV1.execute(); Strategy strategyLogic2 = new Strategy() &#123; @Override public void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰&quot;); &#125; &#125;; ContextV1 contextV2 = new ContextV1(strategyLogic2); log.info(&quot;strategyLogic2 = &#123;&#125;&quot;, contextV2.getClass()); contextV2.execute();&#125; ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ &amp; ëŒë‹¤ ì´ìš©í•˜ê¸°@Testvoid strategyV3() &#123; ContextV1 contextV1 = new ContextV1(new Strategy() &#123; @Override public void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰&quot;); &#125; &#125;); log.info(&quot;strategyLogic1 = &#123;&#125;&quot;, contextV1.getClass()); contextV1.execute(); ContextV1 contextV2 = new ContextV1(() -&gt; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰&quot;)); log.info(&quot;strategyLogic2 = &#123;&#125;&quot;, contextV2.getClass()); contextV2.execute();&#125; íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ ë°›ëŠ” ë°©ì‹ Strategy ë¥¼ í•„ë“œë¡œ ê°–ì§€ ì•Šê³ , íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ ë°›ëŠ”ë‹¤. @Slf4jpublic class ContextV2 &#123; // private Strategy strategy; // Strategy ë¥¼ í•„ë“œë¡œ ê°–ì§€ ì•Šê³ , íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ ë°›ëŠ”ë‹¤. public void execute(Strategy strategy)&#123; long startTime = System.currentTimeMillis(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ strategy.call(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¢…ë£Œ long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;resultTime = &#123;&#125;&quot;, resultTime); &#125;&#125; Context ë¥¼ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬ ë°›ëŠ”ë‹¤. @Testvoid strategyV1()&#123; ContextV2 context = new ContextV2(); context.execute(new StrategyLogic1()); context.execute(new StrategyLogic2());&#125; @Testvoid strategyV2()&#123; ContextV2 context = new ContextV2(); context.execute(new Strategy() &#123; @Override public void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰&quot;); &#125; &#125;); context.execute(new Strategy() &#123; @Override public void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰&quot;); &#125; &#125;);&#125; @Testvoid strategyV3()&#123; ContextV2 context = new ContextV2(); context.execute(() -&gt; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰&quot;)); context.execute(() -&gt; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰&quot;));&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Strategy íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Strategy-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Strategy-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID","slug":"computer-science/programming-language/object/solid","date":"2021-11-20T05:16:17.000Z","updated":"2024-11-28T13:59:37.746Z","comments":true,"path":"2021/11/20/computer-science/programming-language/object/solid/","link":"","permalink":"https://ckck803.github.io/2021/11/20/computer-science/programming-language/object/solid/","excerpt":"ì»´íŒŒì¼ ì–¸ì–´, ì¸í„°í”„ë¦¬í„° ì–¸ì–´, í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ ê°ì²´ ì§€í–¥ 3ìš”ì†Œ ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID1. SRP(Single Responsibility Principle) - ë‹¨ì¼ ì±…ì„ ì›ì¹™í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„(ì—­í• )ë§Œ ê°€ì ¸ì•¼ í•œë‹¤. ì—­í• ì˜ ë¶„ë¦¬ë¼ê³  ìƒê°í•˜ë©´ í¸í•˜ë‹¤!ë³€ê²½ì´ ìˆì„ ë•Œ íŒŒê¸‰ íš¨ê³¼ê°€ ì ìœ¼ë©´ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì˜ ë”°ë¥´ëŠ” ê²ƒ 2. OCP(Open Close Principle) - ê°œë°© íì‡„ ì›ì¹™ í™•ì¥ ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤. ê¸°ì¡´ ì½”ë“œì— ëŒ€í•œ ìˆ˜ì •ì€ ì§ì ‘ì ìœ¼ë¡œ í•˜ì§€ ì•Šê³  ê¸°ëŠ¥ì„ í™•ì¥, ì¶”ê°€ í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤. ì¸í„°í˜ì´ìŠ¤ì™€ ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ ê³µí†µì ì¸ ì‘ì—…ì— ëŒ€í•´ ì¶”ìƒí™” ë¥¼ ì§„í–‰ ìƒì†ê³¼ êµ¬í˜„ì„ ì´ìš©í•´ ê¸°ì¡´ ì½”ë“œ(ìƒìœ„ í´ë˜ìŠ¤)ì— ëŒ€í•œ ìˆ˜ì • ì—†ì´ ê¸°ëŠ¥ì„ í™•ì¥ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì´ëŠ” ê³§ ë‹¤í˜•ì„± ì„ ì´ìš©í•œ ê¸°ëŠ¥ í™•ì¥ì´ë‹¤. OCP ë¬¸ì œì ","text":"ì»´íŒŒì¼ ì–¸ì–´, ì¸í„°í”„ë¦¬í„° ì–¸ì–´, í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ ê°ì²´ ì§€í–¥ 3ìš”ì†Œ ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID1. SRP(Single Responsibility Principle) - ë‹¨ì¼ ì±…ì„ ì›ì¹™í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„(ì—­í• )ë§Œ ê°€ì ¸ì•¼ í•œë‹¤. ì—­í• ì˜ ë¶„ë¦¬ë¼ê³  ìƒê°í•˜ë©´ í¸í•˜ë‹¤!ë³€ê²½ì´ ìˆì„ ë•Œ íŒŒê¸‰ íš¨ê³¼ê°€ ì ìœ¼ë©´ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì˜ ë”°ë¥´ëŠ” ê²ƒ 2. OCP(Open Close Principle) - ê°œë°© íì‡„ ì›ì¹™ í™•ì¥ ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤. ê¸°ì¡´ ì½”ë“œì— ëŒ€í•œ ìˆ˜ì •ì€ ì§ì ‘ì ìœ¼ë¡œ í•˜ì§€ ì•Šê³  ê¸°ëŠ¥ì„ í™•ì¥, ì¶”ê°€ í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤. ì¸í„°í˜ì´ìŠ¤ì™€ ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ ê³µí†µì ì¸ ì‘ì—…ì— ëŒ€í•´ ì¶”ìƒí™” ë¥¼ ì§„í–‰ ìƒì†ê³¼ êµ¬í˜„ì„ ì´ìš©í•´ ê¸°ì¡´ ì½”ë“œ(ìƒìœ„ í´ë˜ìŠ¤)ì— ëŒ€í•œ ìˆ˜ì • ì—†ì´ ê¸°ëŠ¥ì„ í™•ì¥ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì´ëŠ” ê³§ ë‹¤í˜•ì„± ì„ ì´ìš©í•œ ê¸°ëŠ¥ í™•ì¥ì´ë‹¤. OCP ë¬¸ì œì  êµ¬í˜„ ê°ì²´ë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ” Client ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. ì½”ë“œ ë³€ê²½ì´ ì´ë¤„ì§€ê¸° ë•Œë¬¸ì— OCP ì›ì¹™ì„ ê¹¨ì§€ê²Œ ëœë‹¤. ê°ì²´ë¥¼ ìƒì„± í•˜ê³  ì—°ê´€ê´€ê³„ ë¥¼ ë§ºì–´ì£¼ëŠ” ë³„ë„ì˜ ì¡°ë¦½, ì„¤ì •ìê°€ í•„ìš”í•˜ë‹¤. Spring ì—ì„œëŠ” Spring Container ê°€ í•´ë‹¹ ì—­í• ì„ í•œë‹¤. class OwnerController &#123; // private OwnerRepository repository = new MemoryOwnerRepository(); // MemoryOwnerRepository ì—ì„œ JdbcOwnerRepository ë¡œ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ” ì½”ë“œì— ëŒ€í•œ ë³€ê²½ì´ í•„ìš”í•˜ë‹¤. private OwnerRepository repository = new JdbcOwnerRepository();&#125; 3. LSP(The Liskov Substitution Principle) - ë¼ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™ í”„ë¡œê·¸ë¨ì˜ ê°ì²´ëŠ” í”„ë¡œê·¸ë¨ì˜ ì •í™•ì„±ì„ ê¹¨ëœ¨ë¦¬ì§€ ì•Šìœ¼ë©´ì„œ í•˜ìœ„ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë°”ê¿€ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì¸í„°í˜ì´ìŠ¤ ê·œì•½ì„ ì˜ ì§€ì¼œì•¼ í•œë‹¤. 4. ISP(Interface Segregation Principle) - ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™ í•˜ë‚˜ì˜ ë²”ìš© ì¸í„°í˜ì´ìŠ¤ë³´ë‹¤ íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ê°€ ì¢‹ë‹¤. 5. DIP(Dependency Inversion Principle) - ì˜ì¡´ ê´€ê³„ ì—­ì „ ì›ì¹™ í”„ë¡œê·¸ë˜ë¨¸ëŠ” ì¶”ìƒí™” ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™” ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤. êµ¬í˜„ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•Šê³ , ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë¼ëŠ” ëœ»ì´ë‹¤. Client ê°€ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•´ì•¼ ìœ ì—°í•˜ê²Œ êµ¬í˜„ì²´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ê³¼ ê°ì²´ ì§€í–¥ ì›ì¹™ìŠ¤í”„ë§ì€ DI(Dependency Injection)ê³¼ DI ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ OCPì™€ DIPë¥¼ ê°€ëŠ¥í•˜ê²Œ ì§€ì›í•œë‹¤. clientì˜ ì½”ë“œ ë³€ê²½ ì—†ì´ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Develop Lanuage","slug":"CS/Develop-Lanuage","permalink":"https://ckck803.github.io/categories/CS/Develop-Lanuage/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´","slug":"spring/spring-aop/design-pattern/template-method-pattern/Template-Method-Pattern-01","date":"2021-11-20T01:31:07.000Z","updated":"2024-02-26T15:24:20.926Z","comments":true,"path":"2021/11/20/spring/spring-aop/design-pattern/template-method-pattern/Template-Method-Pattern-01/","link":"","permalink":"https://ckck803.github.io/2021/11/20/spring/spring-aop/design-pattern/template-method-pattern/Template-Method-Pattern-01/","excerpt":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Template Method íŒ¨í„´ ìƒì†ì„ í†µí•´ ìŠˆí¼í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ëŒ€í‘œì ì¸ ë°©ë²•. ë³€í•˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥ì€ ìŠˆí¼í´ë˜ìŠ¤ ì— ë§Œë“¤ì–´ë‘ê³  ìì£¼ ë³€ê²½ë˜ë©° í™•ì¥í•  ê¸°ëŠ¥ì€ ì„œë¸Œí´ë˜ìŠ¤ ì—ì„œ ë§Œë“¤ë„ë¡ í•œë‹¤.(í† ë¹„ì˜ ìŠ¤í”„ë§) ë³€í•˜ëŠ” ë¶€ë¶„ê³¼ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ ì„ ë¶„ë¦¬í•œë‹¤. í…œí”Œë¦¿ì€ ê¸°ì¤€ì´ ë˜ëŠ” ê±°ëŒ€í•œ í‹€ì´ë‹¤. í…œí”Œë¦¿ ì•ˆì— ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ë„£ê³ , ì¼ë¶€ ë³€í•˜ëŠ” ë¶€ë¶„ì„ ë³„ë„ë¡œ í˜¸ì¶œí•œë‹¤. êµ¬ì¡°ê°€ ë™ì¼í•˜ê³  ì¤‘ê°„ì— í•µì‹¬ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë§Œ ë‹¤ë¥´ë‹¤. Template Method íŒ¨í„´ ì ìš© ì „@Slf4jpublic class TemplateMethodTest &#123; @Test void templateMethodV0()&#123; logic1(); logic2(); &#125; private void logic1()&#123; long startTime = System.currentTimeMillis(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§1 ì‹¤í–‰&quot;); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¢…ë£Œ long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;resultTime = &#123;&#125;&quot;, resultTime); &#125; private void logic2 ()&#123; long startTime = System.currentTimeMillis(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§1 ì‹¤í–‰&quot;); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¢…ë£Œ long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;resultTime = &#123;&#125;&quot;, resultTime); &#125;&#125; Template Method íŒ¨í„´ ì ìš© í›„","text":"ëª©ì°¨ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - CGLIB Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Dynamic Proxy 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë¦¬í”Œë ‰ì…˜ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ì ìš© 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ì¸í„°í˜ì´ìŠ¤ í”„ë¡ì‹œ 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 2 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Decorator Pattern 1 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ìë™ ë¹ˆ ë“±ë¡ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ ì—†ëŠ” ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ì²´ í´ë˜ìŠ¤ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Proxy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Strategy íŒ¨í„´ Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method íŒ¨í„´ Template Method íŒ¨í„´ ìƒì†ì„ í†µí•´ ìŠˆí¼í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ëŒ€í‘œì ì¸ ë°©ë²•. ë³€í•˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥ì€ ìŠˆí¼í´ë˜ìŠ¤ ì— ë§Œë“¤ì–´ë‘ê³  ìì£¼ ë³€ê²½ë˜ë©° í™•ì¥í•  ê¸°ëŠ¥ì€ ì„œë¸Œí´ë˜ìŠ¤ ì—ì„œ ë§Œë“¤ë„ë¡ í•œë‹¤.(í† ë¹„ì˜ ìŠ¤í”„ë§) ë³€í•˜ëŠ” ë¶€ë¶„ê³¼ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ ì„ ë¶„ë¦¬í•œë‹¤. í…œí”Œë¦¿ì€ ê¸°ì¤€ì´ ë˜ëŠ” ê±°ëŒ€í•œ í‹€ì´ë‹¤. í…œí”Œë¦¿ ì•ˆì— ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ë„£ê³ , ì¼ë¶€ ë³€í•˜ëŠ” ë¶€ë¶„ì„ ë³„ë„ë¡œ í˜¸ì¶œí•œë‹¤. êµ¬ì¡°ê°€ ë™ì¼í•˜ê³  ì¤‘ê°„ì— í•µì‹¬ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë§Œ ë‹¤ë¥´ë‹¤. Template Method íŒ¨í„´ ì ìš© ì „@Slf4jpublic class TemplateMethodTest &#123; @Test void templateMethodV0()&#123; logic1(); logic2(); &#125; private void logic1()&#123; long startTime = System.currentTimeMillis(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§1 ì‹¤í–‰&quot;); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¢…ë£Œ long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;resultTime = &#123;&#125;&quot;, resultTime); &#125; private void logic2 ()&#123; long startTime = System.currentTimeMillis(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§1 ì‹¤í–‰&quot;); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¢…ë£Œ long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;resultTime = &#123;&#125;&quot;, resultTime); &#125;&#125; Template Method íŒ¨í„´ ì ìš© í›„ë¡œê·¸ë¥¼ ì°ì€ ê³µí†µì ì¸ ë¡œì§ ì„ ë¬¶ì–´ í•˜ë‚˜ì˜ Template ì„ ë§Œë“¤ì–´ì¤€ë‹¤. ì¶”ìƒí™”ëœ Method ë¥¼ Template ë‚´ì— ë„£ì–´ì¤Œìœ¼ë¡œì¨ í•˜ìœ„ ê°ì²´ì—ì„œ ê°ê°ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•˜ë„ë¡ í•œë‹¤. ì´ë¥¼ í†µí•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ì‹œ ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œì‹œê°„ì— ëŒ€í•œ ë¡œê·¸ë¥¼ ì°ê³  ì‹¶ì€ ê°ì²´ëŠ” AbstractTemplate ê°ì²´ë¥¼ ìƒì†í•´ êµ¬í˜„í•˜ë©´ ëœë‹¤. ìƒì† ì„ í†µí•´ ì¶”ìƒ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„ëœ ê³µí†µ ë¡œì§ì„ í•˜ìœ„ í´ë˜ìŠ¤ì— ê·¸ëŒ€ë¡œ ì ìš©í•  ìˆ˜ ìˆë‹¤. ì¤‘ë³µëœ ì½”ë“œ ì‘ì„± ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤. @Slf4jpublic abstract class AbstractTemplate &#123; public void execute()&#123; long startTime = System.currentTimeMillis(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ call(); // ìƒì† // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¢…ë£Œ long endTime = System.currentTimeMillis(); long resultTime = endTime - startTime; log.info(&quot;resultTime = &#123;&#125;&quot;, resultTime); &#125; // Overriding ì„ í†µí•´ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ call ë©”ì†Œë“œë¥¼ êµ¬í˜„í•˜ë„ë¡ í•œë‹¤. protected abstract void call();&#125; @Slf4jpublic class SubclassLogic1 extends AbstractTemplate&#123; @Override protected void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰&quot;); &#125;&#125; @Slf4jpublic class SubclassLogic2 extends AbstractTemplate&#123; @Override protected void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰&quot;); &#125;&#125; ì‹¤í–‰@Testvoid templateMethodV1()&#123; AbstractTemplate template1 = new SubclassLogic1(); template1.execute(); AbstractTemplate template2 = new SubclassLogic1(); template2.execute();&#125; 02:25:23.488 [Test worker] INFO com.example.advancedspring.trace.template.TemplateMethodTest - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰02:25:23.491 [Test worker] INFO com.example.advancedspring.trace.template.code.AbstractTemplate - resultTime = 502:25:23.493 [Test worker] INFO com.example.advancedspring.trace.template.TemplateMethodTest - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰02:25:23.493 [Test worker] INFO com.example.advancedspring.trace.template.code.AbstractTemplate - resultTime = 0 ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ ì‚¬ìš©í•˜ê¸° í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´ì€ í´ë˜ìŠ¤ë¥¼ ê³„ì† ë§Œë“¤ì–´ ì¤˜ì•¼ í•˜ëŠ” ë‹¨ì ì´ ìˆë‹¤.ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ë‹¨ì ì„ ë³´ì™„í•  ìˆ˜ ìˆë‹¤. @Testvoid templateMethodV2()&#123; AbstractTemplate template = new AbstractTemplate() &#123; @Override protected void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰&quot;); &#125; &#125;; template.execute(); AbstractTemplate template2 = new AbstractTemplate() &#123; @Override protected void call() &#123; log.info(&quot;ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰&quot;); &#125; &#125;; template2.execute();&#125; 02:25:23.488 [Test worker] INFO com.example.advancedspring.trace.template.TemplateMethodTest - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 1 ì‹¤í–‰02:25:23.491 [Test worker] INFO com.example.advancedspring.trace.template.code.AbstractTemplate - resultTime = 502:25:23.493 [Test worker] INFO com.example.advancedspring.trace.template.TemplateMethodTest - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 2 ì‹¤í–‰02:25:23.493 [Test worker] INFO com.example.advancedspring.trace.template.code.AbstractTemplate - resultTime = 0 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Template Method Pattern ì ìš©public abstract class AbstractTemplate&lt;T&gt; &#123; private final LogTrace trace; public AbstractTemplate(LogTrace logTrace)&#123; this.trace = logTrace; &#125; public T execute(String message)&#123; TraceStatus status = null; try&#123; status = trace.begin(message); // ë¡œì§ í˜¸ì¶œ T result = call(); trace.end(status); return result; &#125;catch (Exception e)&#123; &#125; &#125; protected abstract T call();&#125; @GetMapping(&quot;/v4/request&quot;)public String request(String itemId)&#123; AbstractTemplate&lt;String&gt; template = new AbstractTemplate&lt;&gt;(trace) &#123; @Override protected String call() &#123; orderService.orderItem(itemId); return &quot;ok&quot;; &#125; &#125;; return template.execute(&quot;OrderController.request()&quot;);&#125; @Service@RequiredArgsConstructorpublic class OrderServiceV4 &#123; private final OrderRepositoryV4 orderRepository; private final LogTrace trace; public void orderItem (String itemId)&#123; TraceStatus status = null; AbstractTemplate&lt;Void&gt; template = new AbstractTemplate&lt;&gt;(trace) &#123; @Override protected Void call() &#123; orderRepository.save(itemId); return null; &#125; &#125;; template.execute(&quot;OrderService.orderItem()&quot;); &#125;&#125; @Repository@RequiredArgsConstructorpublic class OrderRepositoryV4 &#123; private final LogTrace trace; public void save(String itemId)&#123; TraceStatus status = null; AbstractTemplate&lt;Void&gt; template = new AbstractTemplate&lt;&gt;(trace) &#123; @Override protected Void call() &#123; if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); return null; &#125; &#125;; template.execute(&quot;OrderRepository.save()&quot;); &#125; private void sleep(int millis) &#123; try&#123; Thread.sleep(millis); &#125;catch (InterruptedException e)&#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"Template Method íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Template-Method-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Template-Method-%ED%8C%A8%ED%84%B4/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ThreadLocal","slug":"spring/spring-aop/threadlocal/threadlocal-06","date":"2021-11-19T21:31:07.000Z","updated":"2024-02-26T15:27:20.179Z","comments":true,"path":"2021/11/20/spring/spring-aop/threadlocal/threadlocal-06/","link":"","permalink":"https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-06/","excerpt":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 ThreadLocal@Configurationpublic class LogTraceConfig &#123;// @Bean// public LogTrace logTrace()&#123;// return new FieldLogTrace();// &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125; Thread ë³„ë¡œ ë¡œê·¸ê°€ ì •í™•í•˜ê²Œ ë‚˜ëˆ ì§„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 2021-12-06 02:15:37.485 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] OrderController.request()2021-12-06 02:15:37.485 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] |--&gt;OrderService.orderItem()2021-12-06 02:15:37.486 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] | |--&gt;OrderRepository.save()2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] | |&lt;--OrderRepository.save() time=1002ms2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] |&lt;--OrderService.orderItem() time=1003ms2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] OrderController.request() time=1003ms 2021-12-06 02:15:37.648 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] OrderController.request()2021-12-06 02:15:37.648 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] |--&gt;OrderService.orderItem()2021-12-06 02:15:37.648 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] | |--&gt;OrderRepository.save()2021-12-06 02:15:38.652 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] | |&lt;--OrderRepository.save() time=1004ms2021-12-06 02:15:38.653 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] |&lt;--OrderService.orderItem() time=1005ms2021-12-06 02:15:38.653 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] OrderController.request() time=1005ms","text":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 ThreadLocal@Configurationpublic class LogTraceConfig &#123;// @Bean// public LogTrace logTrace()&#123;// return new FieldLogTrace();// &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125; Thread ë³„ë¡œ ë¡œê·¸ê°€ ì •í™•í•˜ê²Œ ë‚˜ëˆ ì§„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 2021-12-06 02:15:37.485 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] OrderController.request()2021-12-06 02:15:37.485 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] |--&gt;OrderService.orderItem()2021-12-06 02:15:37.486 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] | |--&gt;OrderRepository.save()2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] | |&lt;--OrderRepository.save() time=1002ms2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] |&lt;--OrderService.orderItem() time=1003ms2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] OrderController.request() time=1003ms 2021-12-06 02:15:37.648 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] OrderController.request()2021-12-06 02:15:37.648 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] |--&gt;OrderService.orderItem()2021-12-06 02:15:37.648 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] | |--&gt;OrderRepository.save()2021-12-06 02:15:38.652 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] | |&lt;--OrderRepository.save() time=1004ms2021-12-06 02:15:38.653 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] |&lt;--OrderService.orderItem() time=1005ms2021-12-06 02:15:38.653 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] OrderController.request() time=1005ms","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"ThreadLocal","slug":"Spring/Spring-ê³ ê¸‰í¸/ThreadLocal","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/ThreadLocal/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ThreadLocal ì ìš©","slug":"spring/spring-aop/threadlocal/threadlocal-05","date":"2021-11-19T20:31:07.000Z","updated":"2024-02-26T15:27:17.025Z","comments":true,"path":"2021/11/20/spring/spring-aop/threadlocal/threadlocal-05/","link":"","permalink":"https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-05/","excerpt":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 ThreadLocal ì ìš©@Slf4jpublic class ThreadLocalLogTrace implements LogTrace &#123; private static final String START_PREFIX = &quot;--&gt;&quot;; private static final String COMPLETE_PREFIX = &quot;&lt;--&quot;; private static final String EX_PREFIX = &quot;&lt;X-&quot;; private ThreadLocal&lt;TraceId&gt; traceIdHolder; // traceId ë™ê¸°í™”, ë™ì‹œì„± ì´ìŠˆ @Override public TraceStatus begin(String message) &#123; syncTraceId(); TraceId traceId = traceIdHolder.get(); Long startTimeMs = System.currentTimeMillis(); log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, traceId.getId(), addSpace(START_PREFIX, traceId.getLevel()), message); return new TraceStatus(traceId, startTimeMs, message); &#125; private void syncTraceId()&#123; TraceId traceId = traceIdHolder.get(); if(traceId == null)&#123; traceIdHolder.set(new TraceId()); &#125;else&#123; traceIdHolder.set(traceId.createNextId()); &#125; &#125; @Override public void end(TraceStatus status) &#123; complete(status, null); &#125; @Override public void exception(TraceStatus status, Exception e) &#123; complete(status, e); &#125; private void complete(TraceStatus status, Exception e) &#123; Long stopTimeMs = System.currentTimeMillis(); long resultTimeMs = stopTimeMs - status.getStartTimeMs(); TraceId traceId = status.getTraceId(); if (e == null) &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms&quot;, traceId.getId(), addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs); &#125; else &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms ex=&#123;&#125;&quot;, traceId.getId(), addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs, e.toString()); &#125; releaseTraceId(); &#125; private void releaseTraceId() &#123; TraceId traceId = traceIdHolder.get(); if(traceId.isFirstLevel())&#123; traceIdHolder.remove(); // destroy &#125;else&#123; traceIdHolder.set(traceId.createPreviousId()); &#125; &#125; private static String addSpace(String prefix, int level) &#123; StringBuilder sb = new StringBuilder(); for (int i = 0; i &lt; level; i++) &#123; sb.append((i == level - 1) ? &quot;|&quot; + prefix : &quot;| &quot;); &#125; return sb.toString(); &#125;&#125; class ThreadLocalLogTraceTest &#123; ThreadLocalLogTrace trace = new ThreadLocalLogTrace(); @Test void begin_end_level2()&#123; TraceStatus status1 = trace.begin(&quot;hello1&quot;); TraceStatus status2 = trace.begin(&quot;hello2&quot;); trace.end(status2); trace.end(status1); &#125; @Test void begin_end_level2_exception()&#123; TraceStatus status1 = trace.begin(&quot;hello1&quot;); TraceStatus status2 = trace.begin(&quot;hello2&quot;); trace.exception(status2, new IllegalStateException()); trace.exception(status1, new IllegalStateException()); &#125;&#125; 15:20:49.175 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] hello115:20:49.179 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] |--&gt;hello215:20:49.180 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] |&lt;--hello2 time=3ms15:20:49.180 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] hello1 time=6ms @Configurationpublic class LogTraceConfig &#123;// @Bean// public LogTrace logTrace()&#123;// return new FieldLogTrace();// &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125; Thread ë³„ë¡œ ë¡œê·¸ê°€ ì •í™•í•˜ê²Œ ë‚˜ëˆ ì§„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 2021-12-06 02:15:37.485 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] OrderController.request()2021-12-06 02:15:37.485 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] |--&gt;OrderService.orderItem()2021-12-06 02:15:37.486 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] | |--&gt;OrderRepository.save()2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] | |&lt;--OrderRepository.save() time=1002ms2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] |&lt;--OrderService.orderItem() time=1003ms2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] OrderController.request() time=1003ms","text":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 ThreadLocal ì ìš©@Slf4jpublic class ThreadLocalLogTrace implements LogTrace &#123; private static final String START_PREFIX = &quot;--&gt;&quot;; private static final String COMPLETE_PREFIX = &quot;&lt;--&quot;; private static final String EX_PREFIX = &quot;&lt;X-&quot;; private ThreadLocal&lt;TraceId&gt; traceIdHolder; // traceId ë™ê¸°í™”, ë™ì‹œì„± ì´ìŠˆ @Override public TraceStatus begin(String message) &#123; syncTraceId(); TraceId traceId = traceIdHolder.get(); Long startTimeMs = System.currentTimeMillis(); log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, traceId.getId(), addSpace(START_PREFIX, traceId.getLevel()), message); return new TraceStatus(traceId, startTimeMs, message); &#125; private void syncTraceId()&#123; TraceId traceId = traceIdHolder.get(); if(traceId == null)&#123; traceIdHolder.set(new TraceId()); &#125;else&#123; traceIdHolder.set(traceId.createNextId()); &#125; &#125; @Override public void end(TraceStatus status) &#123; complete(status, null); &#125; @Override public void exception(TraceStatus status, Exception e) &#123; complete(status, e); &#125; private void complete(TraceStatus status, Exception e) &#123; Long stopTimeMs = System.currentTimeMillis(); long resultTimeMs = stopTimeMs - status.getStartTimeMs(); TraceId traceId = status.getTraceId(); if (e == null) &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms&quot;, traceId.getId(), addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs); &#125; else &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms ex=&#123;&#125;&quot;, traceId.getId(), addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs, e.toString()); &#125; releaseTraceId(); &#125; private void releaseTraceId() &#123; TraceId traceId = traceIdHolder.get(); if(traceId.isFirstLevel())&#123; traceIdHolder.remove(); // destroy &#125;else&#123; traceIdHolder.set(traceId.createPreviousId()); &#125; &#125; private static String addSpace(String prefix, int level) &#123; StringBuilder sb = new StringBuilder(); for (int i = 0; i &lt; level; i++) &#123; sb.append((i == level - 1) ? &quot;|&quot; + prefix : &quot;| &quot;); &#125; return sb.toString(); &#125;&#125; class ThreadLocalLogTraceTest &#123; ThreadLocalLogTrace trace = new ThreadLocalLogTrace(); @Test void begin_end_level2()&#123; TraceStatus status1 = trace.begin(&quot;hello1&quot;); TraceStatus status2 = trace.begin(&quot;hello2&quot;); trace.end(status2); trace.end(status1); &#125; @Test void begin_end_level2_exception()&#123; TraceStatus status1 = trace.begin(&quot;hello1&quot;); TraceStatus status2 = trace.begin(&quot;hello2&quot;); trace.exception(status2, new IllegalStateException()); trace.exception(status1, new IllegalStateException()); &#125;&#125; 15:20:49.175 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] hello115:20:49.179 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] |--&gt;hello215:20:49.180 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] |&lt;--hello2 time=3ms15:20:49.180 [Test worker] INFO com.example.advancedspring.trace.logtrace.ThreadLocalLogTrace - [fb5762b8] hello1 time=6ms @Configurationpublic class LogTraceConfig &#123;// @Bean// public LogTrace logTrace()&#123;// return new FieldLogTrace();// &#125; @Bean public LogTrace logTrace()&#123; return new ThreadLocalLogTrace(); &#125;&#125; Thread ë³„ë¡œ ë¡œê·¸ê°€ ì •í™•í•˜ê²Œ ë‚˜ëˆ ì§„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 2021-12-06 02:15:37.485 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] OrderController.request()2021-12-06 02:15:37.485 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] |--&gt;OrderService.orderItem()2021-12-06 02:15:37.486 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] | |--&gt;OrderRepository.save()2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] | |&lt;--OrderRepository.save() time=1002ms2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] |&lt;--OrderService.orderItem() time=1003ms2021-12-06 02:15:38.488 INFO 21903 --- [nio-8080-exec-1] c.e.a.t.logtrace.ThreadLocalLogTrace : [0b8754c1] OrderController.request() time=1003ms 2021-12-06 02:15:37.648 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] OrderController.request()2021-12-06 02:15:37.648 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] |--&gt;OrderService.orderItem()2021-12-06 02:15:37.648 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] | |--&gt;OrderRepository.save()2021-12-06 02:15:38.652 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] | |&lt;--OrderRepository.save() time=1004ms2021-12-06 02:15:38.653 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] |&lt;--OrderService.orderItem() time=1005ms2021-12-06 02:15:38.653 INFO 21903 --- [nio-8080-exec-2] c.e.a.t.logtrace.ThreadLocalLogTrace : [9e39132f] OrderController.request() time=1005ms","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"ThreadLocal","slug":"Spring/Spring-ê³ ê¸‰í¸/ThreadLocal","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/ThreadLocal/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ThreadLocal","slug":"spring/spring-aop/threadlocal/threadlocal-04","date":"2021-11-19T19:31:07.000Z","updated":"2024-02-26T15:27:13.445Z","comments":true,"path":"2021/11/20/spring/spring-aop/threadlocal/threadlocal-04/","link":"","permalink":"https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-04/","excerpt":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 ThreadLocal ThreadLocalì€ í•´ë‹¹ Thread ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì €ì¥ì†Œë‹¤ThreadLocalì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê° Threadë§ˆë‹¤ ë³„ë„ì˜ ì €ì¥ì†Œë¥¼ ì œê³µí•œë‹¤. ì‚¬ìš©ë²• ê°’ ì €ì¥ : ThreadLocal.set(value) ê°’ ì¡°íšŒ : ThreadLocal.get() ê°’ ì‚­ì œ : ThreadLocal.remove() í•´ë‹¹ Thread ê°€ ThreadLocal ì„ ëª¨ë‘ ì‚¬ìš©í•˜ê³  ë‚˜ë©´ ThreadLocal.remove() ë¥¼ í˜¸ì¶œí•´ ThreadLocal ì— ì €ì¥ëœ ê°’ì„ ì œê±°í•´ ì¤˜ì•¼ í•œë‹¤. @Slf4jpublic class ThreadLocalService &#123; private ThreadLocal&lt;String&gt; nameStore = new ThreadLocal&lt;&gt;(); public String logic(String name) &#123; log.info(&quot;ì €ì¥ name=&#123;&#125; -&gt; nameStore = &#123;&#125;&quot;, name, nameStore.get()); nameStore.set(name); sleep(1000); log.info(&quot;ì¡°íšŒ nameStore = &#123;&#125;&quot;, nameStore.get()); return nameStore.get(); &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125; @Slf4jpublic class ThreadLocalServiceTest &#123; private ThreadLocalService service = new ThreadLocalService(); @Test public void field()&#123; log.info(&quot;main start&quot;); Runnable userA = () -&gt; &#123; service.logic(&quot;userA&quot;); &#125;; Runnable userB = () -&gt; &#123; service.logic(&quot;userB&quot;); &#125;; Thread threadA = new Thread(userA); threadA.setName(&quot;thread - A&quot;); Thread threadB = new Thread(userB); threadB.setName(&quot;thread - B&quot;); threadA.start(); sleep(100); threadB.start(); sleep(2000); // ë©”ì¸ Thread ì¢…ë£Œ ëŒ€ê¸° &#125; private void sleep(int millis)&#123; try &#123; Thread.sleep(millis); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125;&#125; 15:09:42.290 [Test worker] INFO com.example.advancedspring.trace.threadlocal.ThreadLocalServiceTest - main start15:09:42.293 [thread - A] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - ì €ì¥ name=userA -&gt; nameStore = null15:09:42.397 [thread - B] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - ì €ì¥ name=userB -&gt; nameStore = null15:09:43.301 [thread - A] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - ì¡°íšŒ nameStore = userA15:09:43.400 [thread - B] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - ì¡°íšŒ nameStore = userB15:09:44.402 [Test worker] INFO com.example.advancedspring.trace.threadlocal.ThreadLocalServiceTest - main exit","text":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 ThreadLocal ThreadLocalì€ í•´ë‹¹ Thread ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì €ì¥ì†Œë‹¤ThreadLocalì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê° Threadë§ˆë‹¤ ë³„ë„ì˜ ì €ì¥ì†Œë¥¼ ì œê³µí•œë‹¤. ì‚¬ìš©ë²• ê°’ ì €ì¥ : ThreadLocal.set(value) ê°’ ì¡°íšŒ : ThreadLocal.get() ê°’ ì‚­ì œ : ThreadLocal.remove() í•´ë‹¹ Thread ê°€ ThreadLocal ì„ ëª¨ë‘ ì‚¬ìš©í•˜ê³  ë‚˜ë©´ ThreadLocal.remove() ë¥¼ í˜¸ì¶œí•´ ThreadLocal ì— ì €ì¥ëœ ê°’ì„ ì œê±°í•´ ì¤˜ì•¼ í•œë‹¤. @Slf4jpublic class ThreadLocalService &#123; private ThreadLocal&lt;String&gt; nameStore = new ThreadLocal&lt;&gt;(); public String logic(String name) &#123; log.info(&quot;ì €ì¥ name=&#123;&#125; -&gt; nameStore = &#123;&#125;&quot;, name, nameStore.get()); nameStore.set(name); sleep(1000); log.info(&quot;ì¡°íšŒ nameStore = &#123;&#125;&quot;, nameStore.get()); return nameStore.get(); &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125; @Slf4jpublic class ThreadLocalServiceTest &#123; private ThreadLocalService service = new ThreadLocalService(); @Test public void field()&#123; log.info(&quot;main start&quot;); Runnable userA = () -&gt; &#123; service.logic(&quot;userA&quot;); &#125;; Runnable userB = () -&gt; &#123; service.logic(&quot;userB&quot;); &#125;; Thread threadA = new Thread(userA); threadA.setName(&quot;thread - A&quot;); Thread threadB = new Thread(userB); threadB.setName(&quot;thread - B&quot;); threadA.start(); sleep(100); threadB.start(); sleep(2000); // ë©”ì¸ Thread ì¢…ë£Œ ëŒ€ê¸° &#125; private void sleep(int millis)&#123; try &#123; Thread.sleep(millis); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125;&#125; 15:09:42.290 [Test worker] INFO com.example.advancedspring.trace.threadlocal.ThreadLocalServiceTest - main start15:09:42.293 [thread - A] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - ì €ì¥ name=userA -&gt; nameStore = null15:09:42.397 [thread - B] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - ì €ì¥ name=userB -&gt; nameStore = null15:09:43.301 [thread - A] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - ì¡°íšŒ nameStore = userA15:09:43.400 [thread - B] INFO com.example.advancedspring.trace.threadlocal.code.ThreadLocalService - ì¡°íšŒ nameStore = userB15:09:44.402 [Test worker] INFO com.example.advancedspring.trace.threadlocal.ThreadLocalServiceTest - main exit","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"ThreadLocal","slug":"Spring/Spring-ê³ ê¸‰í¸/ThreadLocal","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/ThreadLocal/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - ë™ì‹œì„± ì´ìŠˆ","slug":"spring/spring-aop/threadlocal/threadlocal-03","date":"2021-11-19T18:31:07.000Z","updated":"2024-02-26T15:27:09.955Z","comments":true,"path":"2021/11/20/spring/spring-aop/threadlocal/threadlocal-03/","link":"","permalink":"https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-03/","excerpt":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 ë™ì‹œì„± ì´ìŠˆ ë°œìƒ ì—¬ëŸ¬ Threadê°€ ë™ì‹œì— Application ë¡œì§ì„ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ì„œ Level ìƒíƒœê°’ì´ ê¼¬ì—¬ì„œ ë³´ì´ê²Œ ëœë‹¤. Thread ë¡œ êµ¬ë¶„í•´ì„œ ë¡œê·¸ í™•ì¸2021-12-06 02:18:26.028 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] OrderController.request()2021-12-06 02:18:26.029 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] |--&gt;OrderService.orderItem()2021-12-06 02:18:26.029 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | |--&gt;OrderRepository.save()2021-12-06 02:18:27.033 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | |&lt;--OrderRepository.save() time=1004ms2021-12-06 02:18:27.033 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] |&lt;--OrderService.orderItem() time=1004ms2021-12-06 02:18:27.033 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] OrderController.request() time=1005ms 2021-12-06 02:18:26.114 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | |--&gt;OrderController.request()2021-12-06 02:18:26.115 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | | |--&gt;OrderService.orderItem()2021-12-06 02:18:26.115 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | | | |--&gt;OrderRepository.save()2021-12-06 02:18:27.119 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | | | |&lt;--OrderRepository.save() time=1004ms2021-12-06 02:18:27.120 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | | |&lt;--OrderService.orderItem() time=1005ms2021-12-06 02:18:27.120 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | |&lt;--OrderController.request() time=1006ms Thread ë¥¼ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Slf4jpublic class FieldService &#123; private String nameStore; public String logic(String name)&#123; log.info(&quot;ì €ì¥ name=&#123;&#125; -&gt; nameStore = &#123;&#125;&quot;, name, nameStore); nameStore = name; sleep(1000); log.info(&quot;ì¡°íšŒ nameStore = &#123;&#125;&quot;, nameStore); return nameStore; &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125;catch (InterruptedException e)&#123; e.printStackTrace(); &#125; &#125;&#125;","text":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 ë™ì‹œì„± ì´ìŠˆ ë°œìƒ ì—¬ëŸ¬ Threadê°€ ë™ì‹œì— Application ë¡œì§ì„ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ì„œ Level ìƒíƒœê°’ì´ ê¼¬ì—¬ì„œ ë³´ì´ê²Œ ëœë‹¤. Thread ë¡œ êµ¬ë¶„í•´ì„œ ë¡œê·¸ í™•ì¸2021-12-06 02:18:26.028 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] OrderController.request()2021-12-06 02:18:26.029 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] |--&gt;OrderService.orderItem()2021-12-06 02:18:26.029 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | |--&gt;OrderRepository.save()2021-12-06 02:18:27.033 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | |&lt;--OrderRepository.save() time=1004ms2021-12-06 02:18:27.033 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] |&lt;--OrderService.orderItem() time=1004ms2021-12-06 02:18:27.033 INFO 22044 --- [nio-8080-exec-1] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] OrderController.request() time=1005ms 2021-12-06 02:18:26.114 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | |--&gt;OrderController.request()2021-12-06 02:18:26.115 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | | |--&gt;OrderService.orderItem()2021-12-06 02:18:26.115 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | | | |--&gt;OrderRepository.save()2021-12-06 02:18:27.119 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | | | |&lt;--OrderRepository.save() time=1004ms2021-12-06 02:18:27.120 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | | |&lt;--OrderService.orderItem() time=1005ms2021-12-06 02:18:27.120 INFO 22044 --- [nio-8080-exec-2] c.e.a.trace.logtrace.FieldLogTrace : [c0f5fc0a] | | |&lt;--OrderController.request() time=1006ms Thread ë¥¼ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Slf4jpublic class FieldService &#123; private String nameStore; public String logic(String name)&#123; log.info(&quot;ì €ì¥ name=&#123;&#125; -&gt; nameStore = &#123;&#125;&quot;, name, nameStore); nameStore = name; sleep(1000); log.info(&quot;ì¡°íšŒ nameStore = &#123;&#125;&quot;, nameStore); return nameStore; &#125; private void sleep(int millis) &#123; try &#123; Thread.sleep(millis); &#125;catch (InterruptedException e)&#123; e.printStackTrace(); &#125; &#125;&#125; @Slf4jpublic class FieldServiceTest &#123; private FieldService fieldService = new FieldService(); @Test public void field()&#123; log.info(&quot;main start&quot;); Runnable userA = () -&gt; &#123; fieldService.logic(&quot;userA&quot;); &#125;; Runnable userB = () -&gt; &#123; fieldService.logic(&quot;userA&quot;); &#125;; Thread threadA = new Thread(userA); threadA.setName(&quot;thread - A&quot;); Thread threadB = new Thread(userB); threadB.setName(&quot;thread - B&quot;); threadA.start(); sleep(2000); threadB.start(); &#125; private void sleep(int millis)&#123; try &#123; Thread.sleep(millis); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125;&#125; 14:10:58.072 [Test worker] INFO com.example.advancedspring.trace.threadlocal.FieldServiceTest - main start14:10:58.076 [thread - A] INFO com.example.advancedspring.trace.threadlocal.code.FieldService - ì €ì¥ name=userA -&gt; nameStore = null14:10:59.081 [thread - A] INFO com.example.advancedspring.trace.threadlocal.code.FieldService - ì¡°íšŒ nameStore = userA14:11:00.078 [thread - B] INFO com.example.advancedspring.trace.threadlocal.code.FieldService - ì €ì¥ name=userB -&gt; nameStore = userA14:11:01.080 [thread - B] INFO com.example.advancedspring.trace.threadlocal.code.FieldService - ì¡°íšŒ nameStore = userB ë™ì‹œì„± ì´ìŠˆê°€ ë°œìƒí•˜ëŠ” ì½”ë“œ@Testpublic void field()&#123; log.info(&quot;main start&quot;); Runnable userA = () -&gt; &#123; fieldService.logic(&quot;userA&quot;); &#125;; Runnable userB = () -&gt; &#123; fieldService.logic(&quot;userB&quot;); &#125;; Thread threadA = new Thread(userA); threadA.setName(&quot;thread - A&quot;); Thread threadB = new Thread(userB); threadB.setName(&quot;thread - B&quot;); threadA.start(); sleep(100); threadB.start(); sleep(2000); // ë©”ì¸ Thread ì¢…ë£Œ ëŒ€ê¸°&#125; 14:32:12.377 [Test worker] INFO com.example.advancedspring.trace.threadlocal.FieldServiceTest - main start14:32:12.381 [thread - A] INFO com.example.advancedspring.trace.threadlocal.code.FieldService - ì €ì¥ name=userA -&gt; nameStore = null14:32:12.483 [thread - B] INFO com.example.advancedspring.trace.threadlocal.code.FieldService - ì €ì¥ name=userB -&gt; nameStore = userA14:32:13.387 [thread - A] INFO com.example.advancedspring.trace.threadlocal.code.FieldService - ì¡°íšŒ nameStore = userB14:32:13.489 [thread - B] INFO com.example.advancedspring.trace.threadlocal.code.FieldService - ì¡°íšŒ nameStore = userB ë™ì‹œì„± ë¬¸ì œëŠ” ì§€ì—­ ë³€ìˆ˜ì—ì„œëŠ” ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ì§€ì—­ ë³€ìˆ˜ëŠ” ì“°ë ˆë“œë§ˆë‹¤ ê°ê° ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì˜ì—­ì— í• ë‹¹ëœë‹¤.ë™ì‹œì„± ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ê³³ì€ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì˜ í•„ë“œ (ì£¼ë¡œ ì‹±ê¸€í†¤ì—ì„œ ë°œìƒ) ë˜ëŠ” static ê°™ì€ ê³µìš© í•„ë“œì—ì„œ ë°œìƒí•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"ThreadLocal","slug":"Spring/Spring-ê³ ê¸‰í¸/ThreadLocal","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/ThreadLocal/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - í•„ë“œ ë™ê¸°í™” ì ìš©","slug":"spring/spring-aop/threadlocal/threadlocal-02","date":"2021-11-19T17:31:07.000Z","updated":"2024-02-26T15:27:05.708Z","comments":true,"path":"2021/11/20/spring/spring-aop/threadlocal/threadlocal-02/","link":"","permalink":"https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-02/","excerpt":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 í•„ë“œ ë™ê¸°í™” ì ìš©Bean ìœ¼ë¡œ ë“±ë¡@Configuration public class LogTraceConfig &#123; @Bean public LogTrace logTrace() &#123; return new FieldLogTrace(); &#125; &#125; @RestController@RequiredArgsConstructorpublic class OrderControllerV3 &#123; private final OrderServiceV3 orderService; private final LogTrace trace; @GetMapping(&quot;/v3/request&quot;) public String request(String itemId)&#123; System.out.println(itemId); TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderController.request()&quot;); orderService.orderItem(itemId); trace.end(status); return &quot;ok&quot;; &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Service@RequiredArgsConstructorpublic class OrderServiceV3 &#123; private final OrderRepositoryV3 orderRepository; private final LogTrace trace; public void orderItem (String itemId)&#123; TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderService.orderItem()&quot;); orderRepository.save(itemId); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Repository@RequiredArgsConstructorpublic class OrderRepositoryV3 &#123; private final LogTrace trace; public void save(String itemId)&#123; TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderRepository.save()&quot;); // ì €ì¥ ë¡œì§ if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125; private void sleep(int millis) &#123; try&#123; Thread.sleep(millis); &#125;catch (InterruptedException e)&#123; e.printStackTrace(); &#125; &#125;&#125;","text":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 í•„ë“œ ë™ê¸°í™” ì ìš©Bean ìœ¼ë¡œ ë“±ë¡@Configuration public class LogTraceConfig &#123; @Bean public LogTrace logTrace() &#123; return new FieldLogTrace(); &#125; &#125; @RestController@RequiredArgsConstructorpublic class OrderControllerV3 &#123; private final OrderServiceV3 orderService; private final LogTrace trace; @GetMapping(&quot;/v3/request&quot;) public String request(String itemId)&#123; System.out.println(itemId); TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderController.request()&quot;); orderService.orderItem(itemId); trace.end(status); return &quot;ok&quot;; &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Service@RequiredArgsConstructorpublic class OrderServiceV3 &#123; private final OrderRepositoryV3 orderRepository; private final LogTrace trace; public void orderItem (String itemId)&#123; TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderService.orderItem()&quot;); orderRepository.save(itemId); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Repository@RequiredArgsConstructorpublic class OrderRepositoryV3 &#123; private final LogTrace trace; public void save(String itemId)&#123; TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderRepository.save()&quot;); // ì €ì¥ ë¡œì§ if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125; private void sleep(int millis) &#123; try&#123; Thread.sleep(millis); &#125;catch (InterruptedException e)&#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"ThreadLocal","slug":"Spring/Spring-ê³ ê¸‰í¸/ThreadLocal","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/ThreadLocal/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - í•„ë“œ ë™ê¸°í™”","slug":"spring/spring-aop/threadlocal/threadlocal-01","date":"2021-11-19T16:31:07.000Z","updated":"2024-02-26T15:27:00.716Z","comments":true,"path":"2021/11/20/spring/spring-aop/threadlocal/threadlocal-01/","link":"","permalink":"https://ckck803.github.io/2021/11/20/spring/spring-aop/threadlocal/threadlocal-01/","excerpt":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 í•„ë“œ ë™ê¸°í™”public interface LogTrace &#123; TraceStatus begin(String message); void end(TraceStatus status); void exception(TraceStatus status, Exception e);&#125; í•„ë“œ ë™ê¸°í™”ë¥¼ ìœ„í•œ ë¡œê·¸ ë¶„ì„ê¸° ë§Œë“¤ê¸° TraceId ê°ì²´ê°€ ì—†ì„ ê²½ìš° ìƒˆë¡œ ìƒì„±í•œë‹¤. TraceId ê°ì²´ê°€ ìˆì„ ê²½ìš° Level ì„ ì¦ê°€ ì‹œí‚¨ë‹¤. private void syncTraceId()&#123; if(traceIdHolder == null)&#123; traceIdHolder = new TraceId(); &#125;else&#123; traceIdHolder = traceIdHolder.createNextId(); &#125;&#125; TraceId ë‚´ Level ì´ 0ì¼ ê²½ìš° í•´ë‹¹ ê°ì²´ë¥¼ null ë¡œ ì´ˆê¸°í™” í•œë‹¤. TraceId ë‚´ Level ì´ 0ì´ ì•„ë‹ ê²½ìš° Levelì„ 1 ê°ì†Œì‹œí‚¨ë‹¤. private void releaseTraceId() &#123; if(traceIdHolder.isFirstLevel())&#123; traceIdHolder = null; // destroy &#125;else&#123; traceIdHolder = traceIdHolder.createPreviousId(); &#125;&#125; TraceId ê°ì²´ëŠ” íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ traceIdHolder í•„ë“œì— ì €ì¥ëœë‹¤.","text":"ëª©ì°¨ Post not found: springboot/spring-aop/threadlocal/threadlocal-01 Post not found: springboot/spring-aop/threadlocal/threadlocal-02 Post not found: springboot/spring-aop/threadlocal/threadlocal-03 Post not found: springboot/spring-aop/threadlocal/threadlocal-04 Post not found: springboot/spring-aop/threadlocal/threadlocal-05 Post not found: springboot/spring-aop/threadlocal/threadlocal-06 í•„ë“œ ë™ê¸°í™”public interface LogTrace &#123; TraceStatus begin(String message); void end(TraceStatus status); void exception(TraceStatus status, Exception e);&#125; í•„ë“œ ë™ê¸°í™”ë¥¼ ìœ„í•œ ë¡œê·¸ ë¶„ì„ê¸° ë§Œë“¤ê¸° TraceId ê°ì²´ê°€ ì—†ì„ ê²½ìš° ìƒˆë¡œ ìƒì„±í•œë‹¤. TraceId ê°ì²´ê°€ ìˆì„ ê²½ìš° Level ì„ ì¦ê°€ ì‹œí‚¨ë‹¤. private void syncTraceId()&#123; if(traceIdHolder == null)&#123; traceIdHolder = new TraceId(); &#125;else&#123; traceIdHolder = traceIdHolder.createNextId(); &#125;&#125; TraceId ë‚´ Level ì´ 0ì¼ ê²½ìš° í•´ë‹¹ ê°ì²´ë¥¼ null ë¡œ ì´ˆê¸°í™” í•œë‹¤. TraceId ë‚´ Level ì´ 0ì´ ì•„ë‹ ê²½ìš° Levelì„ 1 ê°ì†Œì‹œí‚¨ë‹¤. private void releaseTraceId() &#123; if(traceIdHolder.isFirstLevel())&#123; traceIdHolder = null; // destroy &#125;else&#123; traceIdHolder = traceIdHolder.createPreviousId(); &#125;&#125; TraceId ê°ì²´ëŠ” íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ traceIdHolder í•„ë“œì— ì €ì¥ëœë‹¤. @Slf4jpublic class FieldLogTrace implements LogTrace &#123; private static final String START_PREFIX = &quot;--&gt;&quot;; private static final String COMPLETE_PREFIX = &quot;&lt;--&quot;; private static final String EX_PREFIX = &quot;&lt;X-&quot;; private TraceId traceIdHolder; // traceId ë™ê¸°í™”, ë™ì‹œì„± ì´ìŠˆ @Override public TraceStatus begin(String message) &#123; syncTraceId(); TraceId traceId = traceIdHolder; Long startTimeMs = System.currentTimeMillis(); log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, traceId.getId(), addSpace(START_PREFIX, traceId.getLevel()), message); return new TraceStatus(traceId, startTimeMs, message); &#125; private void syncTraceId()&#123; if(traceIdHolder == null)&#123; traceIdHolder = new TraceId(); &#125;else&#123; traceIdHolder = traceIdHolder.createNextId(); &#125; &#125; @Override public void end(TraceStatus status) &#123; complete(status, null); &#125; @Override public void exception(TraceStatus status, Exception e) &#123; complete(status, e); &#125; private void complete(TraceStatus status, Exception e) &#123; Long stopTimeMs = System.currentTimeMillis(); long resultTimeMs = stopTimeMs - status.getStartTimeMs(); TraceId traceId = status.getTraceId(); if (e == null) &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms&quot;, traceId.getId(), addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs); &#125; else &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms ex=&#123;&#125;&quot;, traceId.getId(), addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs, e.toString()); &#125; releaseTraceId(); &#125; private void releaseTraceId() &#123; if(traceIdHolder.isFirstLevel())&#123; traceIdHolder = null; // destroy &#125;else&#123; traceIdHolder = traceIdHolder.createPreviousId(); &#125; &#125; private static String addSpace(String prefix, int level) &#123; StringBuilder sb = new StringBuilder(); for (int i = 0; i &lt; level; i++) &#123; sb.append((i == level - 1) ? &quot;|&quot; + prefix : &quot;| &quot;); &#125; return sb.toString(); &#125;&#125; class FieldLogTraceTest &#123; FieldLogTrace trace = new FieldLogTrace(); @Test void begin_end_level2()&#123; TraceStatus status1 = trace.begin(&quot;hello1&quot;); TraceStatus status2 = trace.begin(&quot;hello2&quot;); trace.end(status2); trace.end(status1); &#125; @Test void begin_end_level2_exception()&#123; TraceStatus status1 = trace.begin(&quot;hello1&quot;); TraceStatus status2 = trace.begin(&quot;hello2&quot;); trace.exception(status2, new IllegalStateException()); trace.exception(status1, new IllegalStateException()); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"ThreadLocal","slug":"Spring/Spring-ê³ ê¸‰í¸/ThreadLocal","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/ThreadLocal/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Logging Filter íŒŒë¼ë¯¸í„° ë™ê¸°í™” ê°œë°œ","slug":"spring/spring-aop/log-trace/log-trace-03","date":"2021-11-18T18:31:07.000Z","updated":"2024-02-26T15:24:33.544Z","comments":true,"path":"2021/11/19/spring/spring-aop/log-trace/log-trace-03/","link":"","permalink":"https://ckck803.github.io/2021/11/19/spring/spring-aop/log-trace/log-trace-03/","excerpt":"ëª©ì°¨ Post not found: springboot/spring-aop/log-trace/log-trace-01 Post not found: springboot/spring-aop/log-trace/log-trace-02 Post not found: springboot/spring-aop/log-trace/log-trace-03 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Logging Filter íŒŒë¼ë¯¸í„° ë™ê¸°í™” ê°œë°œLogging Filter íŒŒë¼ë¯¸í„° ë™ê¸°í™” ê°œë°œ@Slf4j@Componentpublic class HelloTraceV2 &#123; private static final String START_PREFIX = &quot;--&gt;&quot;; private static final String COMPLETE_PREFIX = &quot;&lt;--&quot;; private static final String EX_PREFIX = &quot;&lt;X-&quot;; public TraceStatus begin(String message) &#123; TraceId traceId = new TraceId(); Long startTimeMs = System.currentTimeMillis(); log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, traceId.getId(), addSpace(START_PREFIX, traceId.getLevel()), message); return new TraceStatus(traceId, startTimeMs, message); &#125; public TraceStatus beginSync(TraceId beforeTraceId, String message) &#123; TraceId nextId = beforeTraceId.createNextId(); Long startTimeMs = System.currentTimeMillis(); log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, nextId.getId(), addSpace(START_PREFIX, nextId.getLevel()), message); return new TraceStatus(nextId, startTimeMs, message); &#125; public void end(TraceStatus status) &#123; complete(status, null); &#125; public void exception(TraceStatus status, Exception e) &#123; complete(status, e); &#125; private void complete(TraceStatus status, Exception e) &#123; Long stopTimeMs = System.currentTimeMillis(); long resultTimeMs = stopTimeMs - status.getStartTimeMs(); TraceId traceId = status.getTraceId(); if (e == null) &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms&quot;, traceId.getId(), addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs); &#125; else &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms ex=&#123;&#125;&quot;, traceId.getId(), addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs, e.toString()); &#125; &#125; private static String addSpace(String prefix, int level) &#123; StringBuilder sb = new StringBuilder(); for (int i = 0; i &lt; level; i++) &#123; sb.append((i == level - 1) ? &quot;|&quot; + prefix : &quot;| &quot;); &#125; return sb.toString(); &#125;&#125; @RestController@RequiredArgsConstructorpublic class OrderControllerV2 &#123; private final OrderServiceV2 orderService; private final HelloTraceV2 trace; @GetMapping(&quot;/v2/request&quot;) public String request(String itemId)&#123; System.out.println(itemId); TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderController.request()&quot;); orderService.orderItem(status.getTraceId(), itemId); trace.end(status); return &quot;ok&quot;; &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Service@RequiredArgsConstructorpublic class OrderServiceV2 &#123; private final OrderRepositoryV2 orderRepository; private final HelloTraceV2 trace; public void orderItem(TraceId traceId, String itemId)&#123; TraceStatus status = null; try &#123; status = trace.beginSync(traceId, &quot;OrderService.orderItem()&quot;); orderRepository.save(status.getTraceId(),itemId); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Repository@RequiredArgsConstructorpublic class OrderRepositoryV2 &#123; private final HelloTraceV2 trace; public void save(TraceId traceId, String itemId)&#123; TraceStatus status = null; try &#123; status = trace.beginSync(traceId,&quot;OrderRepository.save()&quot;); // ì €ì¥ ë¡œì§ if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125; private void sleep(int millis) &#123; try&#123; Thread.sleep(millis); &#125;catch (InterruptedException e)&#123; e.printStackTrace(); &#125; &#125;&#125;","text":"ëª©ì°¨ Post not found: springboot/spring-aop/log-trace/log-trace-01 Post not found: springboot/spring-aop/log-trace/log-trace-02 Post not found: springboot/spring-aop/log-trace/log-trace-03 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Logging Filter íŒŒë¼ë¯¸í„° ë™ê¸°í™” ê°œë°œLogging Filter íŒŒë¼ë¯¸í„° ë™ê¸°í™” ê°œë°œ@Slf4j@Componentpublic class HelloTraceV2 &#123; private static final String START_PREFIX = &quot;--&gt;&quot;; private static final String COMPLETE_PREFIX = &quot;&lt;--&quot;; private static final String EX_PREFIX = &quot;&lt;X-&quot;; public TraceStatus begin(String message) &#123; TraceId traceId = new TraceId(); Long startTimeMs = System.currentTimeMillis(); log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, traceId.getId(), addSpace(START_PREFIX, traceId.getLevel()), message); return new TraceStatus(traceId, startTimeMs, message); &#125; public TraceStatus beginSync(TraceId beforeTraceId, String message) &#123; TraceId nextId = beforeTraceId.createNextId(); Long startTimeMs = System.currentTimeMillis(); log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, nextId.getId(), addSpace(START_PREFIX, nextId.getLevel()), message); return new TraceStatus(nextId, startTimeMs, message); &#125; public void end(TraceStatus status) &#123; complete(status, null); &#125; public void exception(TraceStatus status, Exception e) &#123; complete(status, e); &#125; private void complete(TraceStatus status, Exception e) &#123; Long stopTimeMs = System.currentTimeMillis(); long resultTimeMs = stopTimeMs - status.getStartTimeMs(); TraceId traceId = status.getTraceId(); if (e == null) &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms&quot;, traceId.getId(), addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs); &#125; else &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms ex=&#123;&#125;&quot;, traceId.getId(), addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs, e.toString()); &#125; &#125; private static String addSpace(String prefix, int level) &#123; StringBuilder sb = new StringBuilder(); for (int i = 0; i &lt; level; i++) &#123; sb.append((i == level - 1) ? &quot;|&quot; + prefix : &quot;| &quot;); &#125; return sb.toString(); &#125;&#125; @RestController@RequiredArgsConstructorpublic class OrderControllerV2 &#123; private final OrderServiceV2 orderService; private final HelloTraceV2 trace; @GetMapping(&quot;/v2/request&quot;) public String request(String itemId)&#123; System.out.println(itemId); TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderController.request()&quot;); orderService.orderItem(status.getTraceId(), itemId); trace.end(status); return &quot;ok&quot;; &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Service@RequiredArgsConstructorpublic class OrderServiceV2 &#123; private final OrderRepositoryV2 orderRepository; private final HelloTraceV2 trace; public void orderItem(TraceId traceId, String itemId)&#123; TraceStatus status = null; try &#123; status = trace.beginSync(traceId, &quot;OrderService.orderItem()&quot;); orderRepository.save(status.getTraceId(),itemId); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Repository@RequiredArgsConstructorpublic class OrderRepositoryV2 &#123; private final HelloTraceV2 trace; public void save(TraceId traceId, String itemId)&#123; TraceStatus status = null; try &#123; status = trace.beginSync(traceId,&quot;OrderRepository.save()&quot;); // ì €ì¥ ë¡œì§ if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125; private void sleep(int millis) &#123; try&#123; Thread.sleep(millis); &#125;catch (InterruptedException e)&#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Logging Filter","slug":"spring/spring-aop/log-trace/log-trace-02","date":"2021-11-18T17:31:07.000Z","updated":"2024-02-26T15:24:30.388Z","comments":true,"path":"2021/11/19/spring/spring-aop/log-trace/log-trace-02/","link":"","permalink":"https://ckck803.github.io/2021/11/19/spring/spring-aop/log-trace/log-trace-02/","excerpt":"ëª©ì°¨ Post not found: springboot/spring-aop/log-trace/log-trace-01 Post not found: springboot/spring-aop/log-trace/log-trace-02 Post not found: springboot/spring-aop/log-trace/log-trace-03 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Logging Filter@RestController@RequiredArgsConstructorpublic class OrderControllerV1 &#123; private final OrderServiceV1 orderService; private final HelloTraceV1 trace; @GetMapping(&quot;/v1/request&quot;) public String request(String itemId)&#123; TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderController.request()&quot;); orderService.orderItem(itemId); trace.end(status); return &quot;ok&quot;; &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Service@RequiredArgsConstructorpublic class OrderServiceV1 &#123; private final OrderRepositoryV1 orderRepository; private final HelloTraceV1 trace; public void orderItem(String itemId)&#123; TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderService.orderItem()&quot;); orderRepository.save(itemId); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Repository@RequiredArgsConstructorpublic class OrderRepositoryV1 &#123; private final HelloTraceV1 trace; public void save(String itemId)&#123; TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderRepository.save()&quot;); // ì €ì¥ ë¡œì§ if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125; private void sleep(int millis) &#123; try&#123; Thread.sleep(millis); &#125;catch (InterruptedException e)&#123; e.printStackTrace(); &#125; &#125;&#125;","text":"ëª©ì°¨ Post not found: springboot/spring-aop/log-trace/log-trace-01 Post not found: springboot/spring-aop/log-trace/log-trace-02 Post not found: springboot/spring-aop/log-trace/log-trace-03 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Logging Filter@RestController@RequiredArgsConstructorpublic class OrderControllerV1 &#123; private final OrderServiceV1 orderService; private final HelloTraceV1 trace; @GetMapping(&quot;/v1/request&quot;) public String request(String itemId)&#123; TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderController.request()&quot;); orderService.orderItem(itemId); trace.end(status); return &quot;ok&quot;; &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Service@RequiredArgsConstructorpublic class OrderServiceV1 &#123; private final OrderRepositoryV1 orderRepository; private final HelloTraceV1 trace; public void orderItem(String itemId)&#123; TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderService.orderItem()&quot;); orderRepository.save(itemId); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125;&#125; @Repository@RequiredArgsConstructorpublic class OrderRepositoryV1 &#123; private final HelloTraceV1 trace; public void save(String itemId)&#123; TraceStatus status = null; try &#123; status = trace.begin(&quot;OrderRepository.save()&quot;); // ì €ì¥ ë¡œì§ if(itemId.equals(&quot;ex&quot;))&#123; throw new IllegalStateException(&quot;ì˜ˆì™¸ ë°œìƒ!&quot;); &#125; sleep(1000); trace.end(status); &#125;catch (Exception e)&#123; trace.exception(status, e); throw e; // ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ë˜ì ¸ ì¤˜ì•¼ í•œë‹¤. &#125; &#125; private void sleep(int millis) &#123; try&#123; Thread.sleep(millis); &#125;catch (InterruptedException e)&#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"}],"tags":[]},{"title":"Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Logging Filter","slug":"spring/spring-aop/log-trace/log-trace-01","date":"2021-11-17T16:31:07.000Z","updated":"2024-02-26T15:24:25.816Z","comments":true,"path":"2021/11/18/spring/spring-aop/log-trace/log-trace-01/","link":"","permalink":"https://ckck803.github.io/2021/11/18/spring/spring-aop/log-trace/log-trace-01/","excerpt":"ëª©ì°¨ Post not found: springboot/spring-aop/log-trace/log-trace-01 Post not found: springboot/spring-aop/log-trace/log-trace-02 Post not found: springboot/spring-aop/log-trace/log-trace-03 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Logging FilterTraceId - íŠ¸ëœì­ì…˜ Idì™€ levelì„ ê´€ë¦¬public class TraceId &#123; private String id; // íŠ¸ëœì­ì…˜ ID private int level; // ê¹Šì´ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” Level public TraceId() &#123; this.id = creatId(); this.level = 0; &#125; private TraceId(String id, int level)&#123; this.id = id; this.level = level; &#125; public String creatId() &#123; return UUID.randomUUID().toString().substring(0, 8); &#125; public TraceId createNextId()&#123; return new TraceId(id, level+1); &#125; // íŠ¸ëœì­ì…˜ ID ëŠ” ê¸°ì¡´ê³¼ ê°™ê³  Level ì€ í•˜ë‚˜ ê°ì†Œì‹œí‚¨ë‹¤. public TraceId createPreviousId()&#123; return new TraceId(id, level-1); &#125; public boolean isFirstLevel()&#123; return level == 0; &#125;&#125; TraceStatus - ë¡œê·¸ ìƒíƒœ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. traceId ë‚´ë¶€ì— íŠ¸ëœì­ì…˜ Id ì™€ Level ì„ ê°€ì§€ê³  ìˆë‹¤. startTimeMs ë¡œê·¸ ì‹œì‘ ì‹œê°„ì´ë‹¤. ë¡œê·¸ ì¢…ë£Œì‹œ ì´ ì‹œì‘ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ì‹œì‘ ~ ì¢…ë£Œê¹Œì§€ ìˆ˜í–‰ì‹œê°„ì„ êµ¬í•  ìˆ˜ ìˆë‹¤. message ì‹œì‘ì‹œ ì‚¬ìš©í•œ ë©”ì‹œì§€ë‹¤. ë¡œê·¸ ì¢…ë£Œì‹œì— ì‚¬ìš©í•´ ì¶œë ¥í•œë‹¤. public class TraceStatus &#123; private TraceId traceId; private Long startTimeMs; private String message; public TraceStatus(TraceId traceId, Long startTimeMs, String message) &#123; this.traceId = traceId; this.startTimeMs = startTimeMs; this.message = message; &#125; public TraceId getTraceId() &#123; return traceId; &#125; public Long getStartTimeMs() &#123; return startTimeMs; &#125; public String getMessage() &#123; return message; &#125;&#125; @Slf4j@Componentpublic class HelloTraceV1 &#123; private static final String START_PREFIX = &quot;--&gt;&quot;; private static final String COMPLETE_PREFIX = &quot;&lt;--&quot;; private static final String EX_PREFIX = &quot;&lt;X-&quot;; public TraceStatus begin(String message) &#123; TraceId traceId = new TraceId(); Long startTimeMs = System.currentTimeMillis(); log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, traceId.getId(), addSpace(START_PREFIX, traceId.getLevel()), message); return new TraceStatus(traceId, startTimeMs, message); &#125; public void end(TraceStatus status) &#123; complete(status, null); &#125; public void exception(TraceStatus status, Exception e) &#123; complete(status, e); &#125; private void complete(TraceStatus status, Exception e) &#123; Long stopTimeMs = System.currentTimeMillis(); long resultTimeMs = stopTimeMs - status.getStartTimeMs(); TraceId traceId = status.getTraceId(); if (e == null) &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms&quot;, traceId.getId(), addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs); &#125; else &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms ex=&#123;&#125;&quot;, traceId.getId(), addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs, e.toString()); &#125; &#125; private static String addSpace(String prefix, int level) &#123; StringBuilder sb = new StringBuilder(); for (int i = 0; i &lt; level; i++) &#123; sb.append((i == level - 1) ? &quot;|&quot; + prefix : &quot;| &quot;); &#125; return sb.toString(); &#125;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±","text":"ëª©ì°¨ Post not found: springboot/spring-aop/log-trace/log-trace-01 Post not found: springboot/spring-aop/log-trace/log-trace-02 Post not found: springboot/spring-aop/log-trace/log-trace-03 Spring í•µì‹¬ì›ë¦¬ ê³ ê¸‰í¸ - Logging FilterTraceId - íŠ¸ëœì­ì…˜ Idì™€ levelì„ ê´€ë¦¬public class TraceId &#123; private String id; // íŠ¸ëœì­ì…˜ ID private int level; // ê¹Šì´ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” Level public TraceId() &#123; this.id = creatId(); this.level = 0; &#125; private TraceId(String id, int level)&#123; this.id = id; this.level = level; &#125; public String creatId() &#123; return UUID.randomUUID().toString().substring(0, 8); &#125; public TraceId createNextId()&#123; return new TraceId(id, level+1); &#125; // íŠ¸ëœì­ì…˜ ID ëŠ” ê¸°ì¡´ê³¼ ê°™ê³  Level ì€ í•˜ë‚˜ ê°ì†Œì‹œí‚¨ë‹¤. public TraceId createPreviousId()&#123; return new TraceId(id, level-1); &#125; public boolean isFirstLevel()&#123; return level == 0; &#125;&#125; TraceStatus - ë¡œê·¸ ìƒíƒœ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. traceId ë‚´ë¶€ì— íŠ¸ëœì­ì…˜ Id ì™€ Level ì„ ê°€ì§€ê³  ìˆë‹¤. startTimeMs ë¡œê·¸ ì‹œì‘ ì‹œê°„ì´ë‹¤. ë¡œê·¸ ì¢…ë£Œì‹œ ì´ ì‹œì‘ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ì‹œì‘ ~ ì¢…ë£Œê¹Œì§€ ìˆ˜í–‰ì‹œê°„ì„ êµ¬í•  ìˆ˜ ìˆë‹¤. message ì‹œì‘ì‹œ ì‚¬ìš©í•œ ë©”ì‹œì§€ë‹¤. ë¡œê·¸ ì¢…ë£Œì‹œì— ì‚¬ìš©í•´ ì¶œë ¥í•œë‹¤. public class TraceStatus &#123; private TraceId traceId; private Long startTimeMs; private String message; public TraceStatus(TraceId traceId, Long startTimeMs, String message) &#123; this.traceId = traceId; this.startTimeMs = startTimeMs; this.message = message; &#125; public TraceId getTraceId() &#123; return traceId; &#125; public Long getStartTimeMs() &#123; return startTimeMs; &#125; public String getMessage() &#123; return message; &#125;&#125; @Slf4j@Componentpublic class HelloTraceV1 &#123; private static final String START_PREFIX = &quot;--&gt;&quot;; private static final String COMPLETE_PREFIX = &quot;&lt;--&quot;; private static final String EX_PREFIX = &quot;&lt;X-&quot;; public TraceStatus begin(String message) &#123; TraceId traceId = new TraceId(); Long startTimeMs = System.currentTimeMillis(); log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125;&quot;, traceId.getId(), addSpace(START_PREFIX, traceId.getLevel()), message); return new TraceStatus(traceId, startTimeMs, message); &#125; public void end(TraceStatus status) &#123; complete(status, null); &#125; public void exception(TraceStatus status, Exception e) &#123; complete(status, e); &#125; private void complete(TraceStatus status, Exception e) &#123; Long stopTimeMs = System.currentTimeMillis(); long resultTimeMs = stopTimeMs - status.getStartTimeMs(); TraceId traceId = status.getTraceId(); if (e == null) &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms&quot;, traceId.getId(), addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs); &#125; else &#123; log.info(&quot;[&#123;&#125;] &#123;&#125;&#123;&#125; time=&#123;&#125;ms ex=&#123;&#125;&quot;, traceId.getId(), addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs, e.toString()); &#125; &#125; private static String addSpace(String prefix, int level) &#123; StringBuilder sb = new StringBuilder(); for (int i = 0; i &lt; level; i++) &#123; sb.append((i == level - 1) ? &quot;|&quot; + prefix : &quot;| &quot;); &#125; return sb.toString(); &#125;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void begin_end()&#123; HelloTraceV1 trace = new HelloTraceV1(); TraceStatus traceStatus = trace.begin(&quot;hello&quot;); trace.end(traceStatus);&#125; [942a9566] hello[942a9566] hello time=4ms ex=java.lang.IllegalStateException @Testpublic void begin_exception()&#123; HelloTraceV1 trace = new HelloTraceV1(); TraceStatus traceStatus = trace.begin(&quot;hello&quot;); trace.exception(traceStatus, new IllegalStateException());&#125; [3eca720c] hello[3eca720c] hello time=3ms ex=java.lang.IllegalStateException","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"}],"tags":[]},{"title":"STL - map ì»¨í…Œë‹ˆì–´","slug":"stl/map","date":"2021-11-15T20:31:46.000Z","updated":"2024-11-28T13:59:25.824Z","comments":true,"path":"2021/11/16/stl/map/","link":"","permalink":"https://ckck803.github.io/2021/11/16/stl/map/","excerpt":"map ì—°ê´€ ì»¨í…Œì´ë„ˆ ì—ì„œ ì›ì†Œë¡œ Keyì™€ Valueì˜ ìŒìœ¼ë¡œ ì €ì¥ë˜ëŠ” ì»¨í…Œì´ë„ˆ[] ì—°ì‚°ìë¥¼ ì´ìš©í•´ value ì— ì ‘ê·¼ í•  ìˆ˜ ìˆë‹¤. (value &#x3D; m[key] í˜•íƒœë¡œ ì‚¬ìš©) key ëŠ” ì¤‘ë³µí•´ì„œ ì €ì¥ë  ìˆ˜ ì—†ë‹¤. ë…¸ë“œ ê¸°ë°˜ ì»¨í…Œì´ë„ˆ ê· í˜„ ì´ì§„ íŠ¸ë¦¬ë¡œ êµ¬í˜„ë¼ ìˆë‹¤. Map Member í•¨ìˆ˜ í•¨ìˆ˜ ì„¤ëª… ë°˜í™˜ ê°’ begin() ì²«ë²ˆì§¸ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤ iterator end() ë§ˆì§€ë§‰ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” ë‹¤ìŒ iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤ iterator clear() map ë‚´ ëª¨ë“  ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤ empty() map ì´ ë¹„ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤ bool size() map ì— ì €ì¥ëœ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤ int find(key) map ë‚´ key ê°€ ì €ì¥ëœ iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ì—†ìœ¼ë©´ end iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator count(key) map ë‚´ key ì˜ ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤ int erase(key) map ë‚´ key ì›ì†Œë¥¼ ì‚­ì œí•œí›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” itratorë¥¼ ë°˜í™˜í•œë‹¤ iterator erase(iterator) iterator ê°€ ê°€ë¥´í‚¤ëŠ” ì›ì†Œë¥¼ ì‚­ì œí•œ í›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator erase(begin, end) iterator beginì—ì„œ endê¹Œì§€ ì›ì†Œë¥¼ ì‚­ì œí•œ í›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator insert(key) map ì— key ë¥¼ ì‚½ì…í•œ í›„ ì €ì¥ëœ iteratorì™€ ì„±ê³µ ì—¬ë¶€ë¥¼ ë‹´ëŠ” Pair ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤ Pair&lt;iterator, bool&gt; insert(begin, end) iterator beginì—ì„œ endê¹Œì§€ ì›ì†Œë¥¼ map ì— ì‚½ì…í•œë‹¤. lower_bound(key) key ê°’ ë³´ë‹¤ ê°™ê±°ë‚˜ í° ê°’ì´ ì²˜ìŒìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” iterator ë¥¼ ë°˜í™˜í•œë‹¤. (ì´ìƒ) iterator upper_bound(key) key ê°’ ë³´ë‹¤ í° ê°’ì´ ì²˜ìŒìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” iterator ë¥¼ ë°˜í™˜í•œë‹¤. (ì´ˆê³¼) iterator","text":"map ì—°ê´€ ì»¨í…Œì´ë„ˆ ì—ì„œ ì›ì†Œë¡œ Keyì™€ Valueì˜ ìŒìœ¼ë¡œ ì €ì¥ë˜ëŠ” ì»¨í…Œì´ë„ˆ[] ì—°ì‚°ìë¥¼ ì´ìš©í•´ value ì— ì ‘ê·¼ í•  ìˆ˜ ìˆë‹¤. (value &#x3D; m[key] í˜•íƒœë¡œ ì‚¬ìš©) key ëŠ” ì¤‘ë³µí•´ì„œ ì €ì¥ë  ìˆ˜ ì—†ë‹¤. ë…¸ë“œ ê¸°ë°˜ ì»¨í…Œì´ë„ˆ ê· í˜„ ì´ì§„ íŠ¸ë¦¬ë¡œ êµ¬í˜„ë¼ ìˆë‹¤. Map Member í•¨ìˆ˜ í•¨ìˆ˜ ì„¤ëª… ë°˜í™˜ ê°’ begin() ì²«ë²ˆì§¸ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤ iterator end() ë§ˆì§€ë§‰ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” ë‹¤ìŒ iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤ iterator clear() map ë‚´ ëª¨ë“  ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤ empty() map ì´ ë¹„ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤ bool size() map ì— ì €ì¥ëœ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤ int find(key) map ë‚´ key ê°€ ì €ì¥ëœ iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ì—†ìœ¼ë©´ end iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator count(key) map ë‚´ key ì˜ ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤ int erase(key) map ë‚´ key ì›ì†Œë¥¼ ì‚­ì œí•œí›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” itratorë¥¼ ë°˜í™˜í•œë‹¤ iterator erase(iterator) iterator ê°€ ê°€ë¥´í‚¤ëŠ” ì›ì†Œë¥¼ ì‚­ì œí•œ í›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator erase(begin, end) iterator beginì—ì„œ endê¹Œì§€ ì›ì†Œë¥¼ ì‚­ì œí•œ í›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator insert(key) map ì— key ë¥¼ ì‚½ì…í•œ í›„ ì €ì¥ëœ iteratorì™€ ì„±ê³µ ì—¬ë¶€ë¥¼ ë‹´ëŠ” Pair ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤ Pair&lt;iterator, bool&gt; insert(begin, end) iterator beginì—ì„œ endê¹Œì§€ ì›ì†Œë¥¼ map ì— ì‚½ì…í•œë‹¤. lower_bound(key) key ê°’ ë³´ë‹¤ ê°™ê±°ë‚˜ í° ê°’ì´ ì²˜ìŒìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” iterator ë¥¼ ë°˜í™˜í•œë‹¤. (ì´ìƒ) iterator upper_bound(key) key ê°’ ë³´ë‹¤ í° ê°’ì´ ì²˜ìŒìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” iterator ë¥¼ ë°˜í™˜í•œë‹¤. (ì´ˆê³¼) iterator","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Cpp","slug":"Develop/Cpp","permalink":"https://ckck803.github.io/categories/Develop/Cpp/"},{"name":"STL","slug":"Develop/Cpp/STL","permalink":"https://ckck803.github.io/categories/Develop/Cpp/STL/"}],"tags":[]},{"title":"STL - set ì»¨í…Œì´ë„ˆ","slug":"stl/set","date":"2021-11-15T19:31:46.000Z","updated":"2024-11-28T13:59:25.677Z","comments":true,"path":"2021/11/16/stl/set/","link":"","permalink":"https://ckck803.github.io/2021/11/16/stl/set/","excerpt":"set ì—°ê´€ ì»¨í…Œì´ë„ˆ ì—ì„œ key ë¼ ë¶ˆë¦¬ëŠ” ì›ì†Œì˜ ì§‘í•©ìœ¼ë¡œ ì´ë¤„ì§„ ì»¨í…Œì´ë„ˆ key ëŠ” ì¤‘ë³µí•´ì„œ ì €ì¥ë  ìˆ˜ ì—†ë‹¤. ë…¸ë“œ ê¸°ë°˜ ì»¨í…Œì´ë„ˆ ê· í˜„ ì´ì§„ íŠ¸ë¦¬ë¡œ êµ¬í˜„ë¼ ìˆë‹¤. ì‹œí€¸ìŠ¤ ì»¨í…Œì´ë„ˆë¡œ ë°°ì—´ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê³ , í¬ê¸°ê°€ ìë™ìœ¼ë¡œ ëŠ˜ì–´ë‚œë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. Set Member í•¨ìˆ˜ í•¨ìˆ˜ ì„¤ëª… ë°˜í™˜ ê°’ begin() ì²«ë²ˆì§¸ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤ iterator end() ë§ˆì§€ë§‰ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” ë‹¤ìŒ iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤ iterator clear() set ë‚´ ëª¨ë“  ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤ empty() set ì´ ë¹„ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤ bool size() set ì— ì €ì¥ëœ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤ int find(key) set ë‚´ key ê°€ ì €ì¥ëœ iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ì—†ìœ¼ë©´ end iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator count(key) set ë‚´ key ì˜ ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤ int erase(key) set ë‚´ key ì›ì†Œë¥¼ ì‚­ì œí•œí›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” itratorë¥¼ ë°˜í™˜í•œë‹¤ iterator erase(iterator) iterator ê°€ ê°€ë¥´í‚¤ëŠ” ì›ì†Œë¥¼ ì‚­ì œí•œ í›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator erase(begin, end) iterator beginì—ì„œ endê¹Œì§€ ì›ì†Œë¥¼ ì‚­ì œí•œ í›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator insert(key) set ì— key ë¥¼ ì‚½ì…í•œ í›„ ì €ì¥ëœ iteratorì™€ ì„±ê³µ ì—¬ë¶€ë¥¼ ë‹´ëŠ” Pair ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤ Pair&lt;iterator, bool&gt; insert(begin, end) iterator beginì—ì„œ endê¹Œì§€ ì›ì†Œë¥¼ set ì— ì‚½ì…í•œë‹¤. lower_bound(key) key ê°’ ë³´ë‹¤ ê°™ê±°ë‚˜ í° ê°’ì´ ì²˜ìŒìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” iterator ë¥¼ ë°˜í™˜í•œë‹¤. (ì´ìƒ) iterator upper_bound(key) key ê°’ ë³´ë‹¤ í° ê°’ì´ ì²˜ìŒìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” iterator ë¥¼ ë°˜í™˜í•œë‹¤. (ì´ˆê³¼) iterator insert(begin, end) ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì–´ ì €ì¥ëœ ë°ì´í„°ë¥¼ set ì— ë°ì´í„°ë¥¼ ë„£ì„ë•Œ ì‚¬ìš©í•˜ë©´ ìœ ìš©í•œ í•¨ìˆ˜ë‹¤.","text":"set ì—°ê´€ ì»¨í…Œì´ë„ˆ ì—ì„œ key ë¼ ë¶ˆë¦¬ëŠ” ì›ì†Œì˜ ì§‘í•©ìœ¼ë¡œ ì´ë¤„ì§„ ì»¨í…Œì´ë„ˆ key ëŠ” ì¤‘ë³µí•´ì„œ ì €ì¥ë  ìˆ˜ ì—†ë‹¤. ë…¸ë“œ ê¸°ë°˜ ì»¨í…Œì´ë„ˆ ê· í˜„ ì´ì§„ íŠ¸ë¦¬ë¡œ êµ¬í˜„ë¼ ìˆë‹¤. ì‹œí€¸ìŠ¤ ì»¨í…Œì´ë„ˆë¡œ ë°°ì—´ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê³ , í¬ê¸°ê°€ ìë™ìœ¼ë¡œ ëŠ˜ì–´ë‚œë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. Set Member í•¨ìˆ˜ í•¨ìˆ˜ ì„¤ëª… ë°˜í™˜ ê°’ begin() ì²«ë²ˆì§¸ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤ iterator end() ë§ˆì§€ë§‰ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” ë‹¤ìŒ iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤ iterator clear() set ë‚´ ëª¨ë“  ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤ empty() set ì´ ë¹„ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤ bool size() set ì— ì €ì¥ëœ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤ int find(key) set ë‚´ key ê°€ ì €ì¥ëœ iterator ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ì—†ìœ¼ë©´ end iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator count(key) set ë‚´ key ì˜ ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤ int erase(key) set ë‚´ key ì›ì†Œë¥¼ ì‚­ì œí•œí›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” itratorë¥¼ ë°˜í™˜í•œë‹¤ iterator erase(iterator) iterator ê°€ ê°€ë¥´í‚¤ëŠ” ì›ì†Œë¥¼ ì‚­ì œí•œ í›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator erase(begin, end) iterator beginì—ì„œ endê¹Œì§€ ì›ì†Œë¥¼ ì‚­ì œí•œ í›„ ë‹¤ìŒ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ë°˜í™˜í•œë‹¤ iterator insert(key) set ì— key ë¥¼ ì‚½ì…í•œ í›„ ì €ì¥ëœ iteratorì™€ ì„±ê³µ ì—¬ë¶€ë¥¼ ë‹´ëŠ” Pair ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤ Pair&lt;iterator, bool&gt; insert(begin, end) iterator beginì—ì„œ endê¹Œì§€ ì›ì†Œë¥¼ set ì— ì‚½ì…í•œë‹¤. lower_bound(key) key ê°’ ë³´ë‹¤ ê°™ê±°ë‚˜ í° ê°’ì´ ì²˜ìŒìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” iterator ë¥¼ ë°˜í™˜í•œë‹¤. (ì´ìƒ) iterator upper_bound(key) key ê°’ ë³´ë‹¤ í° ê°’ì´ ì²˜ìŒìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” iterator ë¥¼ ë°˜í™˜í•œë‹¤. (ì´ˆê³¼) iterator insert(begin, end) ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì–´ ì €ì¥ëœ ë°ì´í„°ë¥¼ set ì— ë°ì´í„°ë¥¼ ë„£ì„ë•Œ ì‚¬ìš©í•˜ë©´ ìœ ìš©í•œ í•¨ìˆ˜ë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Cpp","slug":"Develop/Cpp","permalink":"https://ckck803.github.io/categories/Develop/Cpp/"},{"name":"STL","slug":"Develop/Cpp/STL","permalink":"https://ckck803.github.io/categories/Develop/Cpp/STL/"}],"tags":[]},{"title":"STL - vector ì»¨í…Œì´ë„ˆ","slug":"stl/vector","date":"2021-11-14T19:31:46.000Z","updated":"2024-11-28T13:59:25.749Z","comments":true,"path":"2021/11/15/stl/vector/","link":"","permalink":"https://ckck803.github.io/2021/11/15/stl/vector/","excerpt":"vector ì‹œí€¸ìŠ¤ ì»¨í…Œì´ë„ˆë¡œ ë°°ì—´ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê³ , í¬ê¸°ê°€ ìë™ìœ¼ë¡œ ëŠ˜ì–´ë‚œë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. Vector Member í•¨ìˆ˜ í•¨ìˆ˜ ì„¤ëª… ë°˜í™˜ ê°’ push_back(value) vector ëì— value ë¥¼ ë„£ëŠ”ë‹¤ pop_back() vector ì˜ ë§ˆì§€ë§‰ ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤ begin() vector ì˜ ì²«ë²ˆì§¸ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ê°€ì ¸ì˜¨ë‹¤ Iterator end() vector ì˜ ë§ˆì§€ë§‰ ì›ì†Œ ë‹¤ìŒì„ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ê°€ì ¸ì˜¨ë‹¤. Iterator clear() vector ë‚´ ëª¨ë“  ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤. size() vector ì— ì €ì¥ëœ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. int empty() vector ê°€ ë¹„ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤. bool insert(iterator, value) í•´ë‹¹ iteratorê°€ ê°€ë¥´í‚¤ëŠ” ìœ„ì¹˜ì— valueë¥¼ ì‚½ì…í•œë‹¤. insert(iterator, begin, end) í•´ë‹¹ iteratorê°€ ê°€ë¥´í‚¤ëŠ” ìœ„ì¹˜ì— íŠ¹ì • iterator ê°€ë¥´í‚¤ëŠ” begin ì—ì„œ end ê¹Œì§€ ì›ì†Œë¥¼ ì‚½ì…í•œë‹¤. erase(iterator) í•´ë‹¹ iteratorê°€ ê°€ë¥´í‚¤ëŠ” ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤. ë°˜í™˜ ê°’ìœ¼ë¡œ ë‹¤ìŒ iterator ë¥¼ ë°˜í™˜í•œë‹¤. Iterator erase(begin, end) begin ì—ì„œ end ë²”ìœ„ê¹Œì§€ ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤. ë°˜í™˜ ê°’ìœ¼ë¡œ ì‚­ì œí•œ ë§ˆì§€ë§‰ ì›ì†Œ ë‹¤ìŒ iteratorë¥¼ ê°€ì ¸ì˜¨ë‹¤. Iterator assign(n, value) vector ì— valueë¥¼ n ê°œ ë§Œí¼ í• ë‹¹í•œë‹¤. ì´ì „ ê°’ì´ ìˆë”ë¼ë„ ì´ˆê¸°í™” ë˜ê³  ì¬í• ë‹¹ëœë‹¤. assign(begin, end) vector ê°’ì„ íŠ¹ì • iterator ê°€ë¥´í‚¤ëŠ” begin ì—ì„œ end ë²”ìœ„ ê°’ìœ¼ë¡œ í• ë‹¹í•œë‹¤ ì´ì „ ê°’ì´ ìˆë”ë¼ë„ ì´ˆê¸°í™”ë˜ê³  ì¬í• ë‹¹ëœë‹¤. at(index) indexê°€ ê°€ë¥´í‚¤ëŠ” valueë¥¼ ê°€ì ¸ì˜¨ë‹¤. ë°ì´í„° ì‚½ì… í•¨ìˆ˜push_back í•¨ìˆ˜ push_back í•¨ìˆ˜ëŠ” vector ë§ˆì§€ë§‰ì— ì›ì†Œë¥¼ ë„£ì–´ì¤€ë‹¤. #include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int main(void) &#123; vector&lt;int&gt; v; v.push_back(1); v.push_back(2); v.push_back(3); for (int a : v) &#123; cout &lt;&lt; a &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return 0;&#125; 1 2 3","text":"vector ì‹œí€¸ìŠ¤ ì»¨í…Œì´ë„ˆë¡œ ë°°ì—´ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê³ , í¬ê¸°ê°€ ìë™ìœ¼ë¡œ ëŠ˜ì–´ë‚œë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. Vector Member í•¨ìˆ˜ í•¨ìˆ˜ ì„¤ëª… ë°˜í™˜ ê°’ push_back(value) vector ëì— value ë¥¼ ë„£ëŠ”ë‹¤ pop_back() vector ì˜ ë§ˆì§€ë§‰ ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤ begin() vector ì˜ ì²«ë²ˆì§¸ ì›ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ê°€ì ¸ì˜¨ë‹¤ Iterator end() vector ì˜ ë§ˆì§€ë§‰ ì›ì†Œ ë‹¤ìŒì„ ê°€ë¥´í‚¤ëŠ” iteratorë¥¼ ê°€ì ¸ì˜¨ë‹¤. Iterator clear() vector ë‚´ ëª¨ë“  ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤. size() vector ì— ì €ì¥ëœ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. int empty() vector ê°€ ë¹„ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤. bool insert(iterator, value) í•´ë‹¹ iteratorê°€ ê°€ë¥´í‚¤ëŠ” ìœ„ì¹˜ì— valueë¥¼ ì‚½ì…í•œë‹¤. insert(iterator, begin, end) í•´ë‹¹ iteratorê°€ ê°€ë¥´í‚¤ëŠ” ìœ„ì¹˜ì— íŠ¹ì • iterator ê°€ë¥´í‚¤ëŠ” begin ì—ì„œ end ê¹Œì§€ ì›ì†Œë¥¼ ì‚½ì…í•œë‹¤. erase(iterator) í•´ë‹¹ iteratorê°€ ê°€ë¥´í‚¤ëŠ” ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤. ë°˜í™˜ ê°’ìœ¼ë¡œ ë‹¤ìŒ iterator ë¥¼ ë°˜í™˜í•œë‹¤. Iterator erase(begin, end) begin ì—ì„œ end ë²”ìœ„ê¹Œì§€ ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤. ë°˜í™˜ ê°’ìœ¼ë¡œ ì‚­ì œí•œ ë§ˆì§€ë§‰ ì›ì†Œ ë‹¤ìŒ iteratorë¥¼ ê°€ì ¸ì˜¨ë‹¤. Iterator assign(n, value) vector ì— valueë¥¼ n ê°œ ë§Œí¼ í• ë‹¹í•œë‹¤. ì´ì „ ê°’ì´ ìˆë”ë¼ë„ ì´ˆê¸°í™” ë˜ê³  ì¬í• ë‹¹ëœë‹¤. assign(begin, end) vector ê°’ì„ íŠ¹ì • iterator ê°€ë¥´í‚¤ëŠ” begin ì—ì„œ end ë²”ìœ„ ê°’ìœ¼ë¡œ í• ë‹¹í•œë‹¤ ì´ì „ ê°’ì´ ìˆë”ë¼ë„ ì´ˆê¸°í™”ë˜ê³  ì¬í• ë‹¹ëœë‹¤. at(index) indexê°€ ê°€ë¥´í‚¤ëŠ” valueë¥¼ ê°€ì ¸ì˜¨ë‹¤. ë°ì´í„° ì‚½ì… í•¨ìˆ˜push_back í•¨ìˆ˜ push_back í•¨ìˆ˜ëŠ” vector ë§ˆì§€ë§‰ì— ì›ì†Œë¥¼ ë„£ì–´ì¤€ë‹¤. #include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int main(void) &#123; vector&lt;int&gt; v; v.push_back(1); v.push_back(2); v.push_back(3); for (int a : v) &#123; cout &lt;&lt; a &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return 0;&#125; 1 2 3 insert í•¨ìˆ˜ vector ì˜ 5ë²ˆì§¸ ìœ„ì¹˜ì— ê°’ 50ì„ ì‚½ì…í•œë‹¤. #include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int main(void) &#123; vector&lt;int&gt; v; for (int i = 0; i &lt; 10; i++) &#123; v.push_back(i + 1); &#125; v.insert(v.begin() + 4, 50); // vector 5ë²ˆì§¸ ìœ„ì¹˜ì— 50ì„ ë„£ëŠ”ë‹¤. for (int a : v) &#123; cout &lt;&lt; a &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return 0;&#125; 1 2 3 4 50 5 6 7 8 9 10 insert í•¨ìˆ˜ - iteratorë¥¼ ì´ìš©í•œ ë°ì´í„° ì‚½ì…#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int main(void) &#123; vector&lt;int&gt; v; vector&lt;int&gt; v2; for (int i = 0; i &lt; 10; i++) &#123; v.push_back(i + 1); &#125; for (int i = 0; i &lt; 5; i++) &#123; v2.push_back(i + 20); &#125; v.insert(v.begin() + 5, v2.begin(), v2.end()); // 6ë²ˆì§¸ ìœ„ì¹˜ì— v2 vector ë°ì´í„°ë¥¼ ì‚½ì…í•œë‹¤. for (int a : v) &#123; cout &lt;&lt; a &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return 0;&#125; 1 2 3 4 5 20 21 22 23 24 6 7 8 9 10 ë°ì´í„° ì‚­ì œ í•¨ìˆ˜erase#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int main(void) &#123; vector&lt;int&gt; v; vector&lt;int&gt; v2; for (int i = 0; i &lt; 10; i++) &#123; v.push_back(i + 1); &#125; v.erase(v.begin() + 7); // 8ë²ˆì§¸ ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤. for (int a : v) &#123; cout &lt;&lt; a &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return 0;&#125; 1 2 3 4 5 6 7 9 10 erase - iteratorë¥¼ ì´ìš©í•œ ë°ì´í„° ì‚­ì œ#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int main(void) &#123; vector&lt;int&gt; v; vector&lt;int&gt; v2; for (int i = 0; i &lt; 10; i++) &#123; v.push_back(i + 1); &#125; v.erase(v.begin() + 4, v.begin() + 6); // 5ë²ˆì§¸ ì›ì†Œì—ì„œ 6ë²ˆì§¸ ì›ì†Œë¥¼ ì‚­ì œí•œë‹¤. for (int a : v) &#123; cout &lt;&lt; a &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return 0;&#125; 1 2 3 4 7 8 9 10 assign í•¨ìˆ˜ ë³´í†µì€ ë‹¤ë¥¸ ìë£Œ êµ¬ì¡°ë¥¼ vector ë¡œ ë³€í™˜í•  ë•Œ ë§ì´ ì‚¬ìš©í•œë‹¤. #include &lt;iostream&gt;#include &lt;set&gt;#include &lt;vector&gt;using namespace std;int main(void) &#123; vector&lt;int&gt; v; set&lt;int&gt; s; for (int i = 0; i &lt; 8; i++) &#123; s.insert(i + 1); &#125; // set ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ vector ì— ì €ì¥í•œë‹¤. v.assign(s.begin(), s.end()); for (int a : v) &#123; cout &lt;&lt; a &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return 0;&#125; 1 2 3 4 5 6 7 8","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Cpp","slug":"Develop/Cpp","permalink":"https://ckck803.github.io/categories/Develop/Cpp/"},{"name":"STL","slug":"Develop/Cpp/STL","permalink":"https://ckck803.github.io/categories/Develop/Cpp/STL/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass","slug":"jpa/jpa-programming/mapping/mapped-superclass","date":"2021-11-12T19:31:46.000Z","updated":"2024-11-28T13:59:27.520Z","comments":true,"path":"2021/11/13/jpa/jpa-programming/mapping/mapped-superclass/","link":"","permalink":"https://ckck803.github.io/2021/11/13/jpa/jpa-programming/mapping/mapped-superclass/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ê³µí†µ Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ MappedSuperclass Entity ì— ê³µí†µì ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•´ ì½”ë“œê°€ ì¤‘ë³µí•´ì„œ ì‘ì„±í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ìƒì†ê´€ê³„ Mapping ì´ ì•„ë‹ˆë‹¤. ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ëŠ” ìì‹ í´ë˜ìŠ¤ì— Mapping ì •ë³´ë§Œ ì„ ì œê³µí•œë‹¤. ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•  ì¼ì´ ì—†ìœ¼ë¯€ë¡œ ì¶”ìƒí´ë˜ìŠ¤(abstract) ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. MappedSuperclass í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ê¸° ìœ„í•´ì„œëŠ” ê°™ì€ @MappedSuperclass ë¥¼ ì‚¬ìš©í•œ í´ë˜ìŠ¤ë‚˜ @Entity ì„ ì´ìš©í•œ í´ë˜ìŠ¤ë§Œ ìƒì†ì´ ê°€ëŠ¥í•˜ë‹¤. ìš”êµ¬ ì‚¬í•­ ëª¨ë“  Entity ì—ëŠ” ìƒì„±ì, ìƒì„±ì¼, ìˆ˜ì •ì, ìˆ˜ì •ì¼ ì •ë³´ê°€ ë“¤ì–´ê°€ì•¼ í•œë‹¤. ëª¨ë“  Entity ì— ê³µí†µì ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” Mapping ì •ë³´ ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ BaseEntity í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. @MappedSuperclasspublic abstract class BaseEntity &#123; private String createdBy; private LocalDateTime createdDate; private String lastModifiedBy; private LocalDateTime lastModifiedDate;&#125;","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ê³µí†µ Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ MappedSuperclass Entity ì— ê³µí†µì ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•´ ì½”ë“œê°€ ì¤‘ë³µí•´ì„œ ì‘ì„±í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ìƒì†ê´€ê³„ Mapping ì´ ì•„ë‹ˆë‹¤. ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ëŠ” ìì‹ í´ë˜ìŠ¤ì— Mapping ì •ë³´ë§Œ ì„ ì œê³µí•œë‹¤. ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•  ì¼ì´ ì—†ìœ¼ë¯€ë¡œ ì¶”ìƒí´ë˜ìŠ¤(abstract) ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. MappedSuperclass í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ê¸° ìœ„í•´ì„œëŠ” ê°™ì€ @MappedSuperclass ë¥¼ ì‚¬ìš©í•œ í´ë˜ìŠ¤ë‚˜ @Entity ì„ ì´ìš©í•œ í´ë˜ìŠ¤ë§Œ ìƒì†ì´ ê°€ëŠ¥í•˜ë‹¤. ìš”êµ¬ ì‚¬í•­ ëª¨ë“  Entity ì—ëŠ” ìƒì„±ì, ìƒì„±ì¼, ìˆ˜ì •ì, ìˆ˜ì •ì¼ ì •ë³´ê°€ ë“¤ì–´ê°€ì•¼ í•œë‹¤. ëª¨ë“  Entity ì— ê³µí†µì ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” Mapping ì •ë³´ ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ BaseEntity í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. @MappedSuperclasspublic abstract class BaseEntity &#123; private String createdBy; private LocalDateTime createdDate; private String lastModifiedBy; private LocalDateTime lastModifiedDate;&#125; ê³µí†µ Mapping ì •ë³´ëŠ” ìƒì† ì„ í†µí•´ í˜„ì¬ Entity ì— ì ìš©í•  ìˆ˜ ìˆë‹¤. Member í…Œì´ë¸”ì´ ìƒì„±ë  ë•Œ ê³µí†µ Mapping ê°€ ì ìš©ë  ìˆ˜ ìˆë„ë¡ BaseEntity ë¥¼ ìƒì† ë°›ëŠ”ë‹¤. @Entitypublic class Member extends BaseEntity &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;MEMBER_ID&quot;) private long id; @Column(name = &quot;USERNAME&quot;) private String username; @ManyToOne @JoinColumn(name = &quot;TEAM_ID&quot;) private Team team; public void changeTeam(Team team)&#123; this.team = team; team.getMembers().add(this); &#125;&#125; Member í…Œì´ë¸”ì´ ìƒì„±ë  ë•Œ createdBy, createdDate, lastModifiedBy, lastModifiedDate ì»¬ëŸ¼ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Team í…Œì´ë¸”ì´ ìƒì„±ë  ë•Œ ê³µí†µ Mapping ê°€ ì ìš©ë  ìˆ˜ ìˆë„ë¡ BaseEntity ë¥¼ ìƒì† ë°›ëŠ”ë‹¤. @Entitypublic class Team extends BaseEntity &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;TEAM_ID&quot;) private Long id; private String name; @OneToMany(mappedBy = &quot;team&quot;) private List&lt;Member&gt; members = new ArrayList&lt;&gt;(); public void addMember(Member member)&#123; member.setTeam(this); members.add(member); &#125;&#125; Team í…Œì´ë¸”ì´ ìƒì„±ë  ë•Œ createdBy, createdDate, lastModifiedBy, lastModifiedDate ì»¬ëŸ¼ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"íŠ¸ëœì­ì…˜ ê²©ë¦¬ìˆ˜ì¤€ (Isolation Level)","slug":"database/transaction/isolation-level","date":"2021-11-12T16:15:42.000Z","updated":"2024-02-18T16:19:54.525Z","comments":true,"path":"2021/11/13/database/transaction/isolation-level/","link":"","permalink":"https://ckck803.github.io/2021/11/13/database/transaction/isolation-level/","excerpt":"ëª©ì°¨ íŠ¸ëœì­ì…˜ê³¼ ACID íŠ¸ëœì­ì…˜ ê²©ë¦¬ìˆ˜ì¤€ (Isolation Level) íŠ¸ëœì­ì…˜ ê²©ë¦¬ìˆ˜ì¤€ì´ë€ íŠ¸ëœì­ì…˜ ê²©ë¦¬ ìˆ˜ì¤€ì´ë€ ë™ì‹œì— ì—¬ëŸ¬ê°œì˜ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ í•  ë•Œ íŠ¸ëœì­ì…˜ë¼ë¦¬ ì–¼ë§ˆë‚˜ ê³ ë¦½ë˜ì–´ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.ì—¬ëŸ¬ê°œì˜ íŠ¸ëœì­ì…˜ì´ ê³µìœ  ìì› ì— ì ‘ê·¼í•´ ì‘ì—…(CRUD) ì„ í• ë•Œ ìì›ì˜ ì¼ê´€ì„± ì„ ì§€í‚¤ê¸° ìœ„í•´ íŠ¸ëœì­ì…˜ ì‘ì—…ì„ ì–¼ë§ˆë‚˜ ê³ ë¦½ì‹œí‚¬ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. Read Uncommited Dirty Read ë¬¸ì œê°€ ë°œìƒ Read Commited Non-Repeatable Read ë¬¸ì œê°€ ë°œìƒ Repeatable Head Phantom Read ë¬¸ì œê°€ ë°œìƒ Serializable ê²©ë¦¬ ìˆ˜ì¤€ì— ë”°ë¥¸ ë¬¸ì œ Dirty Read Non-Repeatable Read Phantom Read Read Uncommited ë°œìƒ ë°œìƒ ë°œìƒ Read Commited ë°œìƒí•˜ì§€ ì•ŠìŒ ë°œìƒ ë°œìƒ Repeatable Raead ë°œìƒí•˜ì§€ ì•ŠìŒ ë°œìƒí•˜ì§€ ì•ŠìŒ ë°œìƒ Serializable ë°œìƒí•˜ì§€ ì•ŠìŒ ë°œìƒí•˜ì§€ ì•ŠìŒ ë°œìƒí•˜ì§€ ì•ŠìŒ Read Uncommited í˜„ì¬ íŠ¸ëœì­ì…˜ì—ì„œ ì¼ì–´ë‚œ ë³€ê²½ ì‚¬í•­ì´ Commit ì´ë‚˜ Rollback ë˜ì§€ ì•Šì•„ë„ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ ë³€ê²½ëœ ê°’ì„ ì½ì„ ìˆ˜ ìˆë‹¤.","text":"ëª©ì°¨ íŠ¸ëœì­ì…˜ê³¼ ACID íŠ¸ëœì­ì…˜ ê²©ë¦¬ìˆ˜ì¤€ (Isolation Level) íŠ¸ëœì­ì…˜ ê²©ë¦¬ìˆ˜ì¤€ì´ë€ íŠ¸ëœì­ì…˜ ê²©ë¦¬ ìˆ˜ì¤€ì´ë€ ë™ì‹œì— ì—¬ëŸ¬ê°œì˜ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ í•  ë•Œ íŠ¸ëœì­ì…˜ë¼ë¦¬ ì–¼ë§ˆë‚˜ ê³ ë¦½ë˜ì–´ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.ì—¬ëŸ¬ê°œì˜ íŠ¸ëœì­ì…˜ì´ ê³µìœ  ìì› ì— ì ‘ê·¼í•´ ì‘ì—…(CRUD) ì„ í• ë•Œ ìì›ì˜ ì¼ê´€ì„± ì„ ì§€í‚¤ê¸° ìœ„í•´ íŠ¸ëœì­ì…˜ ì‘ì—…ì„ ì–¼ë§ˆë‚˜ ê³ ë¦½ì‹œí‚¬ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. Read Uncommited Dirty Read ë¬¸ì œê°€ ë°œìƒ Read Commited Non-Repeatable Read ë¬¸ì œê°€ ë°œìƒ Repeatable Head Phantom Read ë¬¸ì œê°€ ë°œìƒ Serializable ê²©ë¦¬ ìˆ˜ì¤€ì— ë”°ë¥¸ ë¬¸ì œ Dirty Read Non-Repeatable Read Phantom Read Read Uncommited ë°œìƒ ë°œìƒ ë°œìƒ Read Commited ë°œìƒí•˜ì§€ ì•ŠìŒ ë°œìƒ ë°œìƒ Repeatable Raead ë°œìƒí•˜ì§€ ì•ŠìŒ ë°œìƒí•˜ì§€ ì•ŠìŒ ë°œìƒ Serializable ë°œìƒí•˜ì§€ ì•ŠìŒ ë°œìƒí•˜ì§€ ì•ŠìŒ ë°œìƒí•˜ì§€ ì•ŠìŒ Read Uncommited í˜„ì¬ íŠ¸ëœì­ì…˜ì—ì„œ ì¼ì–´ë‚œ ë³€ê²½ ì‚¬í•­ì´ Commit ì´ë‚˜ Rollback ë˜ì§€ ì•Šì•„ë„ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ ë³€ê²½ëœ ê°’ì„ ì½ì„ ìˆ˜ ìˆë‹¤. Dirty Read í˜„ìƒì´ ë°œìƒ Commit ì´ ì¼ì–´ë‚˜ê¸° ì „ì— ë°œìƒí•œ ë³€ê²½ì‚¬í•­ì„ ë‹¤ë¥¸ Transaction ì—ì„œ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” í˜„ìƒ Read Commited ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ ì¼ì–´ë‚œ ë³€ê²½ ì‚¬í•­ì´ Commitë˜ì§€ ì•Šì•˜ìœ¼ë©´ Undo ì˜ì—­ ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ì½ì–´ì˜¨ë‹¤. Dirty Readê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. Non-Repeatable Read í˜„ìƒì´ ë°œìƒí•œë‹¤. í•œ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ê°™ì€ ë°ì´í„°ë¥¼ ë‘ë²ˆ ì¡°íšŒ í–ˆì„ ë•Œ ì´ì „ ë°ì´í„°ì™€ ì¼ì¹˜ í•˜ì§€ ì•ŠëŠ” ë°ì´í„° ë¶ˆì¼ì¹˜ í˜„ìƒ Repeatable Read íŠ¸ëœì­ì…˜ ID ë¥¼ ì´ìš©í•´ í˜„ì¬ íŠ¸ëœì­ì…˜ë³´ë‹¤ ì´ì „ì— ì¼ì–´ë‚œ ë³€ê²½ì‚¬í•­ ë§Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.ì¦‰, íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ì¡°íšŒí•œ ë°ì´í„°ëŠ” íŠ¸ëœì­ì…˜ ì¢…ë£Œ ì‹œì  ê¹Œì§€ ê°™ì€ ë°ì´í„°ë¥¼ ë°˜í™˜í•œë‹¤. Phantom Read ê°€ ë°œìƒí•œë‹¤.- í•œ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ê°™ì€ ë°ì´í„°ë¥¼ ë‘ë²ˆ ì¡°íšŒ í–ˆì„ ë•Œ ì´ì „ì— ì¡´ì¬í•˜ì§€ ì•Šì•˜ë˜ ê°’ì´ ë‹¤ì‹œ ì¡°íšŒí–ˆì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” í˜„ìƒ- íŠ¸ëœì­ì…˜ ë„ì¤‘ì— ë°ì´í„° ì‚½ì…(Insert) ì„ í—ˆìš©í•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ë¬¸ì œ REPETABLE READ ì´í•˜ì—ì„œë§Œ ë°œìƒí•œë‹¤ Serializable ê°€ì¥ ë†’ì€ ê²©ë¦¬ ìˆ˜ì¤€, ì½ê¸° ì‘ì—…ì—ë„ Lockì´ ê±¸ë¦¬ê²Œ ëœë‹¤. ë°ì´í„°ë¥¼ ì¡°íšŒí• ë•Œ Shared Lock ì„ íšë“í•´ì•¼ë§Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. ë°ì´í„°ë¥¼ ë³€ê²½í• ë•ŒëŠ” Exclusive Lock ì„ íšë“í•´ì•¼ë§Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"Transaction","slug":"CS/DataBase/Transaction","permalink":"https://ckck803.github.io/categories/CS/DataBase/Transaction/"}],"tags":[]},{"title":"ë°ì´í„° ë² ì´ìŠ¤ Lock","slug":"database/transaction/lock","date":"2021-11-12T16:15:42.000Z","updated":"2024-02-18T16:19:54.525Z","comments":true,"path":"2021/11/13/database/transaction/lock/","link":"","permalink":"https://ckck803.github.io/2021/11/13/database/transaction/lock/","excerpt":"ëª©ì°¨ íŠ¸ëœì­ì…˜ê³¼ ACID íŠ¸ëœì­ì…˜ ê²©ë¦¬ìˆ˜ì¤€ (Isolation Level) Post not found: database/transaction/isolation-lock ë°ì´í„° ë² ì´ìŠ¤ Lock Optimitic Lock","text":"ëª©ì°¨ íŠ¸ëœì­ì…˜ê³¼ ACID íŠ¸ëœì­ì…˜ ê²©ë¦¬ìˆ˜ì¤€ (Isolation Level) Post not found: database/transaction/isolation-lock ë°ì´í„° ë² ì´ìŠ¤ Lock Optimitic Lock","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"Transaction","slug":"CS/DataBase/Transaction","permalink":"https://ckck803.github.io/categories/CS/DataBase/Transaction/"}],"tags":[]},{"title":"Docker Compose - Kafka í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸°","slug":"docker/docker-compose/kafka-cluster","date":"2021-11-11T17:16:13.000Z","updated":"2024-11-28T13:59:37.464Z","comments":true,"path":"2021/11/12/docker/docker-compose/kafka-cluster/","link":"","permalink":"https://ckck803.github.io/2021/11/12/docker/docker-compose/kafka-cluster/","excerpt":"ëª©ì°¨ Docker Compose - Kafka ì‚¬ìš©í•˜ê¸° Docker Compose - Kafka í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸° zookeeper ì„¤ì •version: &quot;3.6&quot;services: zookeeper: container_name: zookeeper image: wurstmeister/zookeeper:3.4.6 volumes: - &quot;./zookeeper/data:/data&quot; - &quot;./zookeeper/logs:/datalog&quot; ports: - &quot;2181:2181&quot; Kafka ì„¤ì • KAFKA_BROKER_ID KAFKA_ZOOKEEPER_CONNECT KAFKA_ADVERTISED_HOST_NAME KAFKA_ADVERTISED_PORT KAFKA_CREATE_TOPICS KAFKA_ADVERTISED_LISTENERS KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 version: &quot;3.6&quot;... kafka1: container_name: kafka1 image: wurstmeister/kafka:2.12-2.3.0 restart: on-failure ports: - &quot;9092:9092&quot; volumes: - /var/run/docker.sock:/var/run/docker.sock environment: KAFKA_BROKER_ID: 1 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_ADVERTISED_HOST_NAME: 192.168.0.2 KAFKA_ADVERTISED_PORT: 9092 KAFKA_CREATE_TOPICS: &quot;temp_topic:1:1&quot; KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.0.2:9092 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 depends_on: - zookeeper ì „ì²´ ì†ŒìŠ¤ ì½”ë“œversion: &quot;3.6&quot;services: zookeeper: container_name: zookeeper image: wurstmeister/zookeeper:3.4.6 volumes: - &quot;./zookeeper/data:/data&quot; - &quot;./zookeeper/logs:/datalog&quot; ports: - &quot;2181:2181&quot; kafka1: container_name: kafka1 image: wurstmeister/kafka:2.12-2.3.0 restart: on-failure ports: - &quot;9092:9092&quot; volumes: - /var/run/docker.sock:/var/run/docker.sock environment: KAFKA_BROKER_ID: 1 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_ADVERTISED_HOST_NAME: 192.168.0.2 KAFKA_ADVERTISED_PORT: 9092 KAFKA_CREATE_TOPICS: &quot;temp_topic:1:1&quot; KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.0.2:9092 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 depends_on: - zookeeper kafka2: container_name: kafka2 image: wurstmeister/kafka:2.12-2.3.0 restart: on-failure ports: - &quot;9093:9092&quot; volumes: - /var/run/docker.sock:/var/run/docker.sock environment: KAFKA_BROKER_ID: 2 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_ADVERTISED_HOST_NAME: 192.168.0.2 KAFKA_ADVERTISED_PORT: 9092 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.0.2:9093 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 depends_on: - zookeeper kafka3: container_name: kafka3 image: wurstmeister/kafka:2.12-2.3.0 restart: on-failure ports: - &quot;9094:9092&quot; volumes: - /var/run/docker.sock:/var/run/docker.sock environment: KAFKA_BROKER_ID: 3 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_ADVERTISED_HOST_NAME: 192.168.0.2 KAFKA_ADVERTISED_PORT: 9092 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.0.2:9094 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 depends_on: - zookeeper","text":"ëª©ì°¨ Docker Compose - Kafka ì‚¬ìš©í•˜ê¸° Docker Compose - Kafka í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸° zookeeper ì„¤ì •version: &quot;3.6&quot;services: zookeeper: container_name: zookeeper image: wurstmeister/zookeeper:3.4.6 volumes: - &quot;./zookeeper/data:/data&quot; - &quot;./zookeeper/logs:/datalog&quot; ports: - &quot;2181:2181&quot; Kafka ì„¤ì • KAFKA_BROKER_ID KAFKA_ZOOKEEPER_CONNECT KAFKA_ADVERTISED_HOST_NAME KAFKA_ADVERTISED_PORT KAFKA_CREATE_TOPICS KAFKA_ADVERTISED_LISTENERS KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 version: &quot;3.6&quot;... kafka1: container_name: kafka1 image: wurstmeister/kafka:2.12-2.3.0 restart: on-failure ports: - &quot;9092:9092&quot; volumes: - /var/run/docker.sock:/var/run/docker.sock environment: KAFKA_BROKER_ID: 1 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_ADVERTISED_HOST_NAME: 192.168.0.2 KAFKA_ADVERTISED_PORT: 9092 KAFKA_CREATE_TOPICS: &quot;temp_topic:1:1&quot; KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.0.2:9092 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 depends_on: - zookeeper ì „ì²´ ì†ŒìŠ¤ ì½”ë“œversion: &quot;3.6&quot;services: zookeeper: container_name: zookeeper image: wurstmeister/zookeeper:3.4.6 volumes: - &quot;./zookeeper/data:/data&quot; - &quot;./zookeeper/logs:/datalog&quot; ports: - &quot;2181:2181&quot; kafka1: container_name: kafka1 image: wurstmeister/kafka:2.12-2.3.0 restart: on-failure ports: - &quot;9092:9092&quot; volumes: - /var/run/docker.sock:/var/run/docker.sock environment: KAFKA_BROKER_ID: 1 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_ADVERTISED_HOST_NAME: 192.168.0.2 KAFKA_ADVERTISED_PORT: 9092 KAFKA_CREATE_TOPICS: &quot;temp_topic:1:1&quot; KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.0.2:9092 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 depends_on: - zookeeper kafka2: container_name: kafka2 image: wurstmeister/kafka:2.12-2.3.0 restart: on-failure ports: - &quot;9093:9092&quot; volumes: - /var/run/docker.sock:/var/run/docker.sock environment: KAFKA_BROKER_ID: 2 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_ADVERTISED_HOST_NAME: 192.168.0.2 KAFKA_ADVERTISED_PORT: 9092 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.0.2:9093 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 depends_on: - zookeeper kafka3: container_name: kafka3 image: wurstmeister/kafka:2.12-2.3.0 restart: on-failure ports: - &quot;9094:9092&quot; volumes: - /var/run/docker.sock:/var/run/docker.sock environment: KAFKA_BROKER_ID: 3 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 KAFKA_ADVERTISED_HOST_NAME: 192.168.0.2 KAFKA_ADVERTISED_PORT: 9092 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.0.2:9094 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 depends_on: - zookeeper","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Docker","slug":"Develop/Docker","permalink":"https://ckck803.github.io/categories/Develop/Docker/"},{"name":"Docker Compose","slug":"Develop/Docker/Docker-Compose","permalink":"https://ckck803.github.io/categories/Develop/Docker/Docker-Compose/"}],"tags":[]},{"title":"Docker Compose - Kafka ì‚¬ìš©í•˜ê¸°","slug":"docker/docker-compose/kafka-single","date":"2021-11-11T16:16:13.000Z","updated":"2024-11-28T13:59:37.533Z","comments":true,"path":"2021/11/12/docker/docker-compose/kafka-single/","link":"","permalink":"https://ckck803.github.io/2021/11/12/docker/docker-compose/kafka-single/","excerpt":"ëª©ì°¨ Docker Compose - Kafka ì‚¬ìš©í•˜ê¸° Docker Compose - Kafka í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸° Zookeeper ì„¤ì •version: &quot;3&quot;services: zookeeper: container_name: local-zookeeper image: wurstmeister/zookeeper ports: - 2181:2181 Kafka ì„¤ì •version: &quot;3&quot;services: zookeeper: container_name: local-zookeeper image: wurstmeister/zookeeper ports: - 2181:2181 kafka: container_name: local-kafka image: wurstmeister/kafka depends_on: - zookeeper ports: - 9092:9092 environment: KAFKA_ADVERTISED_HOST_NAME: 127.0.0.1 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 volumes: - /var/run/docker.sock:/var/run/docker.sock ì „ì²´ ì†ŒìŠ¤ ì½”ë“œversion: &quot;3&quot;services: zookeeper: container_name: local-zookeeper image: wurstmeister/zookeeper ports: - 2181:2181 kafka: container_name: local-kafka image: wurstmeister/kafka depends_on: - zookeeper ports: - 9092:9092 environment: KAFKA_ADVERTISED_HOST_NAME: 127.0.0.1 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 volumes: - /var/run/docker.sock:/var/run/docker.sock","text":"ëª©ì°¨ Docker Compose - Kafka ì‚¬ìš©í•˜ê¸° Docker Compose - Kafka í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸° Zookeeper ì„¤ì •version: &quot;3&quot;services: zookeeper: container_name: local-zookeeper image: wurstmeister/zookeeper ports: - 2181:2181 Kafka ì„¤ì •version: &quot;3&quot;services: zookeeper: container_name: local-zookeeper image: wurstmeister/zookeeper ports: - 2181:2181 kafka: container_name: local-kafka image: wurstmeister/kafka depends_on: - zookeeper ports: - 9092:9092 environment: KAFKA_ADVERTISED_HOST_NAME: 127.0.0.1 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 volumes: - /var/run/docker.sock:/var/run/docker.sock ì „ì²´ ì†ŒìŠ¤ ì½”ë“œversion: &quot;3&quot;services: zookeeper: container_name: local-zookeeper image: wurstmeister/zookeeper ports: - 2181:2181 kafka: container_name: local-kafka image: wurstmeister/kafka depends_on: - zookeeper ports: - 9092:9092 environment: KAFKA_ADVERTISED_HOST_NAME: 127.0.0.1 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 volumes: - /var/run/docker.sock:/var/run/docker.sock","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Docker","slug":"Develop/Docker","permalink":"https://ckck803.github.io/categories/Develop/Docker/"}],"tags":[]},{"title":"Docker - Redis ì‚¬ìš©í•˜ê¸°","slug":"docker/docker-redis","date":"2021-11-10T18:16:13.000Z","updated":"2024-11-28T13:59:37.320Z","comments":true,"path":"2021/11/11/docker/docker-redis/","link":"","permalink":"https://ckck803.github.io/2021/11/11/docker/docker-redis/","excerpt":"Docker - Redis ì‚¬ìš©í•˜ê¸°","text":"Docker - Redis ì‚¬ìš©í•˜ê¸°","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Docker","slug":"Develop/Docker","permalink":"https://ckck803.github.io/categories/Develop/Docker/"}],"tags":[]},{"title":"Docker - Jenkins ì‚¬ìš©í•˜ê¸°","slug":"docker/docker-jenkins","date":"2021-11-10T17:16:13.000Z","updated":"2024-11-28T13:59:37.250Z","comments":true,"path":"2021/11/11/docker/docker-jenkins/","link":"","permalink":"https://ckck803.github.io/2021/11/11/docker/docker-jenkins/","excerpt":"Docker - Jenkins ì‚¬ìš©í•˜ê¸°# ltsë²„ì „ìœ¼ë¡œ ì‹¤í–‰ì‹œdocker run -d -p 8090:8080 -p 50000:50000 -v ~/docker/jenkins:/var/jenkins_home jenkins/jenkins:lts# jdk11ë²„ì „ìœ¼ë¡œ ì‹¤í–‰ì‹œdocker run -d -p 8090:8080 -p 50000:50000 -v ~/docker/jenkins-jdk11:/var/jenkins_home jenkins/jenkins:jdk11# docker container Id3c29b7adb686ad8310bf474fe91406e1ab8c569568e2ef2b5d09f40525aa78ee","text":"Docker - Jenkins ì‚¬ìš©í•˜ê¸°# ltsë²„ì „ìœ¼ë¡œ ì‹¤í–‰ì‹œdocker run -d -p 8090:8080 -p 50000:50000 -v ~/docker/jenkins:/var/jenkins_home jenkins/jenkins:lts# jdk11ë²„ì „ìœ¼ë¡œ ì‹¤í–‰ì‹œdocker run -d -p 8090:8080 -p 50000:50000 -v ~/docker/jenkins-jdk11:/var/jenkins_home jenkins/jenkins:jdk11# docker container Id3c29b7adb686ad8310bf474fe91406e1ab8c569568e2ef2b5d09f40525aa78ee","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Docker","slug":"Develop/Docker","permalink":"https://ckck803.github.io/categories/Develop/Docker/"}],"tags":[]},{"title":"Docker - MySQL ì‚¬ìš©í•˜ê¸°","slug":"docker/docker-mysql","date":"2021-11-10T16:16:13.000Z","updated":"2024-11-28T13:59:37.392Z","comments":true,"path":"2021/11/11/docker/docker-mysql/","link":"","permalink":"https://ckck803.github.io/2021/11/11/docker/docker-mysql/","excerpt":"Docker - MySQL ì‚¬ìš©í•˜ê¸°docker pull mysql:8.0.17 Docker MySQL ì»¨í…Œì´ë„ˆ ìƒì„± ë° ì‹¤í–‰ MySQL ì™¸ë¶€ ë³¼ë¥¨ìœ¼ë¡œ ì¡ì•„ì£¼ê¸° í˜¸ìŠ¤íŠ¸ì˜ ~&#x2F;docker&#x2F;mysql ë””ë ‰í† ë¦¬ë¥¼ MySQL ì»¨í…Œì´ë„ˆì˜ &#x2F;var&#x2F;lib&#x2F;mysql ë””ë ‰í† ë¦¬ë¡œ ë§ˆìš´íŠ¸ docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=password --name mysql -v ~/docker/mysql:/var/lib/mysql mysql --character-set-server=utf8mb4 docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=password --name mysql -v ~/docker/mysql:/var/lib/mysql mysql:8.0.17 --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci","text":"Docker - MySQL ì‚¬ìš©í•˜ê¸°docker pull mysql:8.0.17 Docker MySQL ì»¨í…Œì´ë„ˆ ìƒì„± ë° ì‹¤í–‰ MySQL ì™¸ë¶€ ë³¼ë¥¨ìœ¼ë¡œ ì¡ì•„ì£¼ê¸° í˜¸ìŠ¤íŠ¸ì˜ ~&#x2F;docker&#x2F;mysql ë””ë ‰í† ë¦¬ë¥¼ MySQL ì»¨í…Œì´ë„ˆì˜ &#x2F;var&#x2F;lib&#x2F;mysql ë””ë ‰í† ë¦¬ë¡œ ë§ˆìš´íŠ¸ docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=password --name mysql -v ~/docker/mysql:/var/lib/mysql mysql --character-set-server=utf8mb4 docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=password --name mysql -v ~/docker/mysql:/var/lib/mysql mysql:8.0.17 --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Docker","slug":"Develop/Docker","permalink":"https://ckck803.github.io/categories/Develop/Docker/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸","slug":"jpa/jpa-programming/mapping/jpa-mapping-4","date":"2021-11-05T22:31:46.000Z","updated":"2024-11-28T13:59:27.663Z","comments":true,"path":"2021/11/06/jpa/jpa-programming/mapping/jpa-mapping-4/","link":"","permalink":"https://ckck803.github.io/2021/11/06/jpa/jpa-programming/mapping/jpa-mapping-4/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì˜ ë¬¸ì œì  ê°ì²´ì—ì„œëŠ” ê°ê¸° ë‹¤ë¥¸ ê°ì²´ì—ì„œ ì°¸ì¡°í•˜ëŠ” ê°ì²´ë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ë°©ë²•ì´ ë‘ ê°€ì§€ê°€ ë°œìƒí•œë‹¤. ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì˜ í•´ê²° ë°©ë²• ê°ì²´ì˜ ë‘ ê´€ê³„ì¤‘ í•˜ë‚˜ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ ìœ¼ë¡œ ì§€ì •í•´ ì£¼ì¸ë§Œì´ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•˜ê²Œ í•œë‹¤.(ë“±ë¡, ìˆ˜ì •)ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì½ê¸°ë§Œ ê°€ëŠ¥í•˜ë‹¤ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì£¼ì¸ ì •í•˜ê¸° Foreign Key (ì™¸ë˜í‚¤) ê°€ ìˆëŠ” ê³³ì„ ì£¼ì¸ìœ¼ë¡œ ì •í•´ë¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì€ mappedBy ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ì—°ê´€ê´€ê³„ ì£¼ì¸ì´ ì•„ë‹ˆë©´ mappedBy ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì˜ ë¬¸ì œì  ê°ì²´ì—ì„œëŠ” ê°ê¸° ë‹¤ë¥¸ ê°ì²´ì—ì„œ ì°¸ì¡°í•˜ëŠ” ê°ì²´ë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ë°©ë²•ì´ ë‘ ê°€ì§€ê°€ ë°œìƒí•œë‹¤. ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì˜ í•´ê²° ë°©ë²• ê°ì²´ì˜ ë‘ ê´€ê³„ì¤‘ í•˜ë‚˜ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ ìœ¼ë¡œ ì§€ì •í•´ ì£¼ì¸ë§Œì´ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•˜ê²Œ í•œë‹¤.(ë“±ë¡, ìˆ˜ì •)ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì½ê¸°ë§Œ ê°€ëŠ¥í•˜ë‹¤ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì£¼ì¸ ì •í•˜ê¸° Foreign Key (ì™¸ë˜í‚¤) ê°€ ìˆëŠ” ê³³ì„ ì£¼ì¸ìœ¼ë¡œ ì •í•´ë¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì€ mappedBy ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ì—°ê´€ê´€ê³„ ì£¼ì¸ì´ ì•„ë‹ˆë©´ mappedBy ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì—°ê´€ê´€ê³„ ì£¼ì¸ì´ ì•„ë‹Œ ê°ì²´ì— ë°ì´í„° ì—…ë°ì´íŠ¸Member member = new Member();member.setUsername(&quot;member1&quot;);entityManager.persist(member);Team team = new Team();team.setName(&quot;TeamA&quot;);team.getMembers().add(member);entityManager.persist(team); MEMBER í…Œì´ë¸” ë‚´ TEAM_ID ê°’ì´ ë“¤ì–´ê°€ì§€ ì•Šì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì—°ê´€ê´€ê³„ ì£¼ì¸ì¸ ê°ì²´ì— ë°ì´í„° ì—…ë°ì´íŠ¸Team team = new Team();team.setName(&quot;TeamA&quot;);// team.getMembers().add(member);entityManager.persist(team);Member member = new Member();member.setUsername(&quot;member1&quot;);member.setTeam(team);entityManager.persist(member); MEMBER í…Œì´ë¸” ë‚´ TEAM_ID ê°’ì´ ì •ìƒì ìœ¼ë¡œ ë“¤ì–´ê°„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ ì£¼ì˜ì–‘ìª½ì— ë°ì´í„°ë¥¼ Setting í•´ ì¤€ë‹¤. ë°ì´í„°ê°€ ì˜ì†ì„± Context ë‚´ì—ë§Œ ì¡´ì¬í•  ê²½ìš° ì—°ê´€ëœ ë°ì´í„° ì¡°íšŒì‹œ ì •ìƒì ìœ¼ë¡œ ì¡°íšŒí•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.ìˆœìˆ˜ ê°ì²´ ìƒíƒœ ë¥¼ ê³ ë ¤í•´ í•­ìƒ ì–‘ìª½ì— ê°’ì„ ì„¤ì •í•œë‹¤. Teamê³¼ MemberëŠ” ì˜ì†ì„± Contextì—ë§Œ ë°ì´í„°ê°€ ìˆëŠ” ìƒíƒœ Team ë‚´ Member Listì—ëŠ” í˜„ì¬ ì•„ë¬´ ê°’ì´ ì—†ëŠ” ìƒíƒœ ê²°ê³¼ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ëª»ê°€ì ¸ì˜¤ê²Œ ëœë‹¤. Team team = new Team();team.setName(&quot;TeamA&quot;);em.persist(team);Member member = new Member();member.setUsername(&quot;member1&quot;);member.setTeam(team);em.persist(member);Team findTeam = em.find(Team.class, team.getId()); // 1ì°¨ ìºì‹œList&lt;Member&gt; members = findTeam.getMembers();System.out.println(&quot;==========================&quot;);for (Member m : members) &#123; System.out.println(&quot;m = &quot; + m.getUsername());&#125;System.out.println(&quot;==========================&quot;); Team team = new Team();team.setName(&quot;TeamA&quot;);em.persist(team);Member member = new Member();member.setUsername(&quot;member1&quot;);member.setTeam(team);em.persist(member);team.getMembers().add(member);Team findTeam = em.find(Team.class, team.getId()); // 1ì°¨ ìºì‹œList&lt;Member&gt; members = findTeam.getMembers();System.out.println(&quot;=====================================================================&quot;);for (Member m : members) &#123; System.out.println(&quot;m = &quot; + m.getUsername());&#125;System.out.println(&quot;=====================================================================&quot;); Flushì™€ Clearë¥¼ team.getMembers().add(member); ê°’ì„ ë„£ì§€ ì•Šì•„ë„ ë°ì´í„°ê°€ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ ëœë‹¤. Team team = new Team();team.setName(&quot;TeamA&quot;);em.persist(team);Member member = new Member();member.setUsername(&quot;member1&quot;);member.setTeam(team);em.persist(member);em.flush();em.clear();Team findTeam = em.find(Team.class, team.getId());List&lt;Member&gt; members = findTeam.getMembers();for (Member m : members) &#123; System.out.println(&quot;m = &quot; + m.getUsername());&#125; ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ ìƒì„±Member ì— ìƒì„±public void changeTeam(Team team)&#123; this.team = team; team.getMembers().add(this);&#125; @JoinColumn ëŠ” name ì†ì„±ì— Mapping í•  ì™¸ë˜ í‚¤ë¥¼ ì§€ì •í•œë‹¤. @Entitypublic class Member &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;MEMBER_ID&quot;) private long id; @Column(name = &quot;USERNAME&quot;) private String username; @ManyToOne @JoinColumn(name = &quot;TEAM_ID&quot;) private Team team; public void changeTeam(Team team)&#123; this.team = team; team.getMembers().add(this); &#125;&#125; Team ì— ìƒì„±public void addMember(Member member)&#123; member.setTeam(this); members.add(member);&#125; mappedBy ëŠ” ì–‘ë±¡í–¥ ì—°ê´€ê´€ê³„ì¼ë•Œ ë°˜ëŒ€ìª½ì— ë§¤í•‘ë˜ëŠ” Entity í•„ë“œ ê°’ì„ ì¤€ë‹¤. @Entitypublic class Team &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;TEAM_ID&quot;) private Long id; private String name; @OneToMany(mappedBy = &quot;team&quot;) private List&lt;Member&gt; members = new ArrayList&lt;&gt;(); public void addMember(Member member)&#123; member.setTeam(this); members.add(member); &#125;&#125; ì–‘ë°©í–¥ ë§¤í•‘ì‹œ ë¬´í•œ ë£¨í”„ë¥¼ ì¡°ì‹¬í•˜ìMemberì—ì„œ toString ìƒì„±ì‹œ Team ê°ì²´ë¥¼ ë§Œë‚  ê²½ìš° Team ê°ì²´ì˜ toStringì„ ë¶ˆëŸ¬ì˜¨ë‹¤. Team ê°ì²´ë‚´ toStringì€ Member ê°ì²´ì˜ toStringì„ ë¶ˆëŸ¬ì˜¤ë©´ì„œ ë¬´í•œ ë£¨í”„ê°€ ìƒê¸°ê²Œëœë‹¤. Member.java @Overridepublic String toString() &#123; return &quot;Member&#123;&quot; + &quot;id=&quot; + id + &quot;, username=&#x27;&quot; + username + &#x27;\\&#x27;&#x27; + &quot;, team=&quot; + team + // ë¬¸ì œ ë°œìƒ &#x27;&#125;&#x27;;&#125; Team.java @Overridepublic String toString() &#123; return &quot;Team&#123;&quot; + &quot;id=&quot; + id + &quot;, name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, members=&quot; + members + // ë¬¸ì œ ë°œìƒ &#x27;&#125;&#x27;;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„","slug":"jpa/jpa-programming/mapping/jpa-mapping-3","date":"2021-11-05T20:31:46.000Z","updated":"2024-11-28T13:59:27.023Z","comments":true,"path":"2021/11/06/jpa/jpa-programming/mapping/jpa-mapping-3/","link":"","permalink":"https://ckck803.github.io/2021/11/06/jpa/jpa-programming/mapping/jpa-mapping-3/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ê°ì²´ì™€ í…Œì´ë¸”ì´ ê´€ê³„ë¥¼ ë§ºëŠ” ì°¨ì´ ê°ì²´ì˜ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì‚¬ì‹¤ ì–‘ë°©í–¥ ê´€ê³„ê°€ ì•„ë‹ˆë¼ ì„œë¡œë‹¤ë¥¸ ë‹¨ë°©í–¥ ê´€ê³„ 2ê°œ ë‹¤.í…Œì´ë¸”ì€ ì™¸ë˜í‚¤ í•˜ë‚˜ ë¡œ ë‘ í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬í•œë‹¤. ê°ì²´ : ì—°ê´€ê´€ê³„ 2ê°œ (ë‹¨ë°©í–¥ 2ê°œ) íšŒì› â€”&gt; íŒ€ ì—°ê´€ê´€ê³„ 1ê°œ (ë‹¨ë°©í–¥) íŒ€ â€”&gt; íšŒì› ì—°ê´€ê´€ê³„ 1ê°œ (ë‹¨ë°©í–¥) í…Œì´ë¸” : ì—°ê´€ê´€ê³„ 1ê°œ (ì–‘ë°©í–¥ 1ê°œ) íšŒì› &lt;â€”&gt; íŒ€ì˜ ì—°ê´€ê´€ê³„ 1ê°œ (ì–‘ë°©í–¥) ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¡œ ì„¤ê³„í•˜ê¸°1:N ì—°ê´€ê´€ê³„ Mapping OneToMany ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ 1:N ì—°ê´€ê´€ê³„ë¥¼ Mapping í•œë‹¤. mappedBy ì†ì„±ì„ ì´ìš©í•´ ì—°ê´€ëœ Entity í´ë˜ìŠ¤ ë‚´ field ì´ë¦„ì„ ë„£ì–´ì¤€ë‹¤. @Entitypublic class Team &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;TEAM_ID&quot;) private Long id; private String name; @OneToMany(mappedBy = &quot;team&quot;) private List&lt;Member&gt; members = new ArrayList&lt;&gt;();&#125;","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ê°ì²´ì™€ í…Œì´ë¸”ì´ ê´€ê³„ë¥¼ ë§ºëŠ” ì°¨ì´ ê°ì²´ì˜ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì‚¬ì‹¤ ì–‘ë°©í–¥ ê´€ê³„ê°€ ì•„ë‹ˆë¼ ì„œë¡œë‹¤ë¥¸ ë‹¨ë°©í–¥ ê´€ê³„ 2ê°œ ë‹¤.í…Œì´ë¸”ì€ ì™¸ë˜í‚¤ í•˜ë‚˜ ë¡œ ë‘ í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬í•œë‹¤. ê°ì²´ : ì—°ê´€ê´€ê³„ 2ê°œ (ë‹¨ë°©í–¥ 2ê°œ) íšŒì› â€”&gt; íŒ€ ì—°ê´€ê´€ê³„ 1ê°œ (ë‹¨ë°©í–¥) íŒ€ â€”&gt; íšŒì› ì—°ê´€ê´€ê³„ 1ê°œ (ë‹¨ë°©í–¥) í…Œì´ë¸” : ì—°ê´€ê´€ê³„ 1ê°œ (ì–‘ë°©í–¥ 1ê°œ) íšŒì› &lt;â€”&gt; íŒ€ì˜ ì—°ê´€ê´€ê³„ 1ê°œ (ì–‘ë°©í–¥) ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¡œ ì„¤ê³„í•˜ê¸°1:N ì—°ê´€ê´€ê³„ Mapping OneToMany ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ 1:N ì—°ê´€ê´€ê³„ë¥¼ Mapping í•œë‹¤. mappedBy ì†ì„±ì„ ì´ìš©í•´ ì—°ê´€ëœ Entity í´ë˜ìŠ¤ ë‚´ field ì´ë¦„ì„ ë„£ì–´ì¤€ë‹¤. @Entitypublic class Team &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;TEAM_ID&quot;) private Long id; private String name; @OneToMany(mappedBy = &quot;team&quot;) private List&lt;Member&gt; members = new ArrayList&lt;&gt;();&#125; N:1 ì—°ê´€ê´€ê³„ Mapping ManyToOne ì–´ë…¸í…Œì´ì…˜ê³¼ JoinColumn ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ N:1 ì—°ê´€ê´€ê³„ë¥¼ Mapping í•œë‹¤. @Entitypublic class Member &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;MEMBER_ID&quot;) private long id; @Column(name = &quot;USERNAME&quot;) private String username; @ManyToOne @JoinColumn(name = &quot;TEAM_ID&quot;) private Team team;&#125; JoinColumn ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•œ ì™¸ë˜í‚¤ ê´€ê³„ ëª…ì‹œí•˜ê¸° Forign Key(ì™¸ë˜ í‚¤) ìƒì„±ì‹œ JoinColumn ì„ ì´ìš©í•´ ì—°ê´€ê´€ê³„ë¥¼ ëª…ì‹œí•  ê²½ìš°Forign Key(ì™¸ë˜ í‚¤) ê¸°ë³¸ ê°’ì€ í•„ë“œëª… + _ + ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ì»¬ëŸ¼ëª… ìœ¼ë¡œ ìƒì„±ëœë‹¤. @Entitypublic class Member &#123; @Id private long id; private String username; @ManyToOne @JoinColumn private Team team; // Team ê°ì²´ë¥¼ Member ê°ì²´ ë‚´ Field ê°’ìœ¼ë¡œ ê´€ë¦¬&#125; ì™¸ë˜í‚¤ ìƒì„±ì‹œ JoinColumn ì— name ì†ì„± ì„ ì´ìš©í•  ê²½ìš°ì™¸ë˜í‚¤ëŠ” name ì†ì„±ì— ëª…ì‹œëœ ê°’ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. @Entitypublic class Member &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;MEMBER_ID&quot;) private long id; @Column(name = &quot;USERNAME&quot;) private String username; @ManyToOne @JoinColumn(name = &quot;TEAM_ID&quot;) private Team team;&#125; Mappingëœ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°Team team = new Team();team.setName(&quot;TeamA&quot;);entityManager.persist(team);Member member = new Member();member.setUsername(&quot;member1&quot;);member.setTeam(team);entityManager.persist(member);entityManager.flush();entityManager.clear();Member findMember = entityManager.find(Member.class, member.getId()); // Memberê°€ ì†í•œ Team ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.List&lt;Member&gt; members = findMember.getTeam().getMembers(); // Teamì— ì†í•œ Member ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.for (Member m : members) &#123; System.out.println(&quot;m = &quot; + m.getUsername());&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸°","slug":"jpa/jpa-programming/mapping/jpa-mapping-1","date":"2021-11-04T20:31:46.000Z","updated":"2024-11-28T13:59:27.590Z","comments":true,"path":"2021/11/05/jpa/jpa-programming/mapping/jpa-mapping-1/","link":"","permalink":"https://ckck803.github.io/2021/11/05/jpa/jpa-programming/mapping/jpa-mapping-1/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ì™¸ë˜í‚¤ë¥¼ ê°ì²´ ë‚´ Field ê°’ ìœ¼ë¡œ ëª¨ë¸ë§ @Entitypublic class Team &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;TEAM_ID&quot;) private Long id; @Column private String name;&#125; @Entitypublic class Member &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;MEMBER_ID&quot;) private long id; @Column(name = &quot;USERNAME&quot;) private String username; @Column(name = &quot;TEAM_ID&quot;) private Long teamId; // ì™¸ë˜í‚¤ë¥¼ Field ê°’ìœ¼ë¡œ ê°–ëŠ”ë‹¤.&#125; Member ê°€ ì†Œì†ëœ Team ì •ë³´ ê°€ì ¸ì˜¤ê¸° Member ê°€ ì†Œì†ëœ Team ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œëŠ” Member Idë¥¼ ì´ìš©í•´ í•´ë‹¹ Member ê°ì²´ë¥¼ ê°€ì ¸ì™€ ì €ì¥ëœ Team Idë¥¼ ê°€ì ¸ì˜¨ í›„ í•´ë‹¹ Team Idë¥¼ ì´ìš©í•´ Memberê°€ ì†Œì†ëœ Team ì„ ì¡°íšŒí•´ì•¼ í•œë‹¤. Team team = new Team();team.setName(&quot;TeamA&quot;);entityManager.persist(team);Member member = new Member();member.setUsername(&quot;member1&quot;);member.setTeamId(team.getId());entityManager.persist(member);Member findMember = entityManager.find(Member.class, member.getId());Long findTeamId = findMember.getTeamId();Team findTeam = entityManager.find(Team.class, findTeamId); ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ì§€ ëª»í•œ ëª¨ë¸ë§","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ì™¸ë˜í‚¤ë¥¼ ê°ì²´ ë‚´ Field ê°’ ìœ¼ë¡œ ëª¨ë¸ë§ @Entitypublic class Team &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;TEAM_ID&quot;) private Long id; @Column private String name;&#125; @Entitypublic class Member &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;MEMBER_ID&quot;) private long id; @Column(name = &quot;USERNAME&quot;) private String username; @Column(name = &quot;TEAM_ID&quot;) private Long teamId; // ì™¸ë˜í‚¤ë¥¼ Field ê°’ìœ¼ë¡œ ê°–ëŠ”ë‹¤.&#125; Member ê°€ ì†Œì†ëœ Team ì •ë³´ ê°€ì ¸ì˜¤ê¸° Member ê°€ ì†Œì†ëœ Team ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œëŠ” Member Idë¥¼ ì´ìš©í•´ í•´ë‹¹ Member ê°ì²´ë¥¼ ê°€ì ¸ì™€ ì €ì¥ëœ Team Idë¥¼ ê°€ì ¸ì˜¨ í›„ í•´ë‹¹ Team Idë¥¼ ì´ìš©í•´ Memberê°€ ì†Œì†ëœ Team ì„ ì¡°íšŒí•´ì•¼ í•œë‹¤. Team team = new Team();team.setName(&quot;TeamA&quot;);entityManager.persist(team);Member member = new Member();member.setUsername(&quot;member1&quot;);member.setTeamId(team.getId());entityManager.persist(member);Member findMember = entityManager.find(Member.class, member.getId());Long findTeamId = findMember.getTeamId();Team findTeam = entityManager.find(Team.class, findTeamId); ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ì§€ ëª»í•œ ëª¨ë¸ë§ ìœ„ì™€ ê°™ì´ ëª¨ë¸ë§í•œ ê²½ìš° í•œ ê°ì²´ ë‚´ì—ì„œ ê´€ë ¨ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²Œ ì•„ë‹Œ ì„œë¡œ ë‹¤ë¥¸ ë‘ê°œì˜ ê°ì²´ë¥¼ ì´ìš©í•´ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— ê°ì²´ ì…ì¥ì—ì„œëŠ” ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ì§€ ëª»í•œ ëª¨ë¸ë§ì´ ëœë‹¤.ë­”ê°€ ì—°ê´€ë¼ ìˆëŠ” ë“¯ í•˜ì§€ë§Œ ê²°êµ­ì— ì„œë¡œ ë‹¤ë¥¸ ë‘ê°œì˜ ê°ì²´ ë¥¼ ê°€ì ¸ì˜¨ ëŠë‚Œì´ë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸°","slug":"jpa/jpa-programming/mapping/jpa-mapping-2","date":"2021-11-04T20:31:46.000Z","updated":"2024-11-28T13:59:27.234Z","comments":true,"path":"2021/11/05/jpa/jpa-programming/mapping/jpa-mapping-2/","link":"","permalink":"https://ckck803.github.io/2021/11/05/jpa/jpa-programming/mapping/jpa-mapping-2/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° ê°ì²´ëŠ” ì°¸ì¡°ë¥¼ ì´ìš©í•´ ë‹¤ë¥¸ ê°ì²´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. í•œ ê°ì²´ë‚´ì— ê´€ë ¨ëœ ê°ì²´ ì •ë³´ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ ëª¨ë¸ë§í•œë‹¤. Member ì—ì„œ Team ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ë•Œ Member ê°ì²´ ë‚´ ì°¸ì¡° ë¥¼ í†µí•´ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. N:1 ì—°ê´€ ê´€ê³„ë¥¼ ëª…ì‹œí•  ë•ŒëŠ” @ManyToOne ê³¼ @JoinColumn ì„ ì´ìš©í•´ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. @Entitypublic class Member &#123; @Id private long id; private String username; @ManyToOne @JoinColumn private Team team; // Member ê°ì²´ ë‚´ì—ì„œ ê´€ë ¨ëœ Team ê°ì²´ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½&#125; Member ê°€ ì†Œì†ëœ Team ì •ë³´ ê°€ì ¸ì˜¤ê¸°","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° ê°ì²´ëŠ” ì°¸ì¡°ë¥¼ ì´ìš©í•´ ë‹¤ë¥¸ ê°ì²´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. í•œ ê°ì²´ë‚´ì— ê´€ë ¨ëœ ê°ì²´ ì •ë³´ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ ëª¨ë¸ë§í•œë‹¤. Member ì—ì„œ Team ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ë•Œ Member ê°ì²´ ë‚´ ì°¸ì¡° ë¥¼ í†µí•´ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. N:1 ì—°ê´€ ê´€ê³„ë¥¼ ëª…ì‹œí•  ë•ŒëŠ” @ManyToOne ê³¼ @JoinColumn ì„ ì´ìš©í•´ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. @Entitypublic class Member &#123; @Id private long id; private String username; @ManyToOne @JoinColumn private Team team; // Member ê°ì²´ ë‚´ì—ì„œ ê´€ë ¨ëœ Team ê°ì²´ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½&#125; Member ê°€ ì†Œì†ëœ Team ì •ë³´ ê°€ì ¸ì˜¤ê¸°ì²˜ìŒì— ì„¤ê³„ëœ ê°ì²´ì™€ëŠ” ë‹¤ë¥´ê²Œ Member ê°ì²´ë‚´ì—ì„œ ê´€ë ¨ëœ Team ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. Team team = new Team();team.setName(&quot;TeamA&quot;);entityManager.persist(team);Member member = new Member();member.setUsername(&quot;member1&quot;);member.setTeam(team);entityManager.persist(team);// Member ê°ì²´ë‚´ì—ì„œ ì—°ê´€ëœ Team ì •ë³´ë¥¼ ë°”ë¡œ ì¡°íšŒí•œë‹¤.Member findMember = entityManager.find(Member.class, member.getId());Team findTeam = findMember.getTeam();entityManager.persist(member); ê°ì²´ì™€ í…Œì´ë¸”ê°„ì˜ íŒ¨ëŸ¬ë‹¤ì„ ì°¨ì´ í…Œì´ë¸”ì˜ ê²½ìš° ì™¸ë˜í‚¤ë¥¼ ì´ìš©í•´ ì–‘ë°©í–¥ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤.í•˜ì§€ë§Œ, ê°ì²´ì—ì„œ ê´€ê³„ëŠ” ë‹¨ë°©í–¥ìœ¼ë¡œë§Œ ê´€ê³„ë¥¼ ë§ºê¸° ë•Œë¬¸ì— ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œì˜ ì¡°íšŒëŠ” ë¶ˆê°€ëŠ¥ í•˜ë‹¤.ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ê²Œ í•˜ë ¤ë©´ ì—°ê´€ëœ ê°ì²´ì—ì„œë„ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ë„ë¡ ì„¤ê³„í•´ì•¼ í•œë‹¤.","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"JPA ì—°ê´€ ê´€ê³„","slug":"jpa/jpa-programming/mapping/jpa-mapping","date":"2021-11-04T19:31:46.000Z","updated":"2024-11-28T13:59:27.847Z","comments":true,"path":"2021/11/05/jpa/jpa-programming/mapping/jpa-mapping/","link":"","permalink":"https://ckck803.github.io/2021/11/05/jpa/jpa-programming/mapping/jpa-mapping/","excerpt":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ í…Œì´ë¸”ê³¼ ê°ì²´ ê°„ íŒ¨ëŸ¬íƒ€ì„ ì°¨ì´ë¡œ ì¸í•´ ìƒê¸°ëŠ” ë¬¸ì œê°€ ìˆë‹¤. ê·¸ ì¤‘ ëŒ€í‘œì ì¸ê²Œ í…Œì´ë¸” ì—°ê´€ê´€ê³„ ë¥¼ ê°ì²´ë¡œ í’€ì–´ë‚´ëŠ” ê²ƒí…Œì´ë¸”ê°„ì˜ ì—°ê´€ê´€ê³„ë¥¼ ê°ì²´ ì—°ê´€ê´€ê³„ë¡œ í’€ì–´ë‚´ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ 3ê°€ì§€ ì¡°ê±´ì„ ì˜ ì´í•´í•´ì•¼ í•œë‹¤. ë°©í–¥ í…Œì´ë¸” ì—°ê´€ê´€ê³„ëŠ” ì–‘ë°©í–¥ ê°ì²´ì˜ ì—°ê´€ê´€ê³„ëŠ” ë‹¨ë°©í–¥ìœ¼ë¡œë§Œ ì¡´ì¬í•œë‹¤. ê°ì²´ì˜ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ë‹¨ë°©í–¥ ê´€ê³„ 2ê°œë¥¼ ì´ìš©í•´ ë§Œë“¤ì–´ì¤€ë‹¤. ë‹¤ì¤‘ì„± One To One(ì¼ëŒ€ì¼) 1:1 One To Many(ì¼ëŒ€ë‹¤) 1:N Many To One(ë‹¤ëŒ€ì¼) N:1 Many To Many(ë‹¤ëŒ€ë‹¤) N:M ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ í…Œì´ë¸” ì—°ê´€ê´€ê³„ë¥¼ ê°ì²´ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì—°ê´€ê´€ê³„ ì£¼ì¸ ì„ ì •í•´ì•¼ í•œë‹¤. ê°ì²´ì˜ ë‘ ê´€ê³„ì¤‘ í•˜ë‚˜ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì§€ì •í•´ ì£¼ì¸ë§Œì´ ì™¸ë˜ í‚¤ ë¥¼ ê´€ë¦¬í•˜ê²Œ í•œë‹¤. ì—°ê´€ê´€ê³„ ì£¼ì¸ì€ ì™¸ë˜í‚¤ë¥¼ ì´ìš©í•´ (ë“±ë¡, ìˆ˜ì •) ë“±ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì½ê¸° ë§Œ ê°€ëŠ¥í•˜ë‹¤ JoinColumn ì–´ë…¸í…Œì´ì…˜ ì™¸ë˜í‚¤ ë¥¼ ë§¤í•‘í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ì†ì„± ê¸°ëŠ¥ ê¸°ë³¸ ê°’ name ë§¤í•„í•  ì™¸ë˜í‚¤ ì´ë¦„ì„ ëª…ì‹œí•œë‹¤. í•„ë“œëª… + _ + ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸” ê¸°ë³¸í‚¤ ì»¬ëŸ¼ëª… referencedColumnName ì™¸ë˜ í‚¤ê°€ ì°¸ì¡°í•˜ëŠ” ëŒ€ìƒ í…Œì´ë¸” ì»¬ëŸ¼ëª… ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ ì»¬ëŸ¼ëª… foreignKey ì™¸ë˜í‚¤ ì œì•½ ì¡°ê±´ì„ ì§ì ‘ ì§€ì •í•  ìˆ˜ ìˆë‹¤. unique, nullable, insertable, updatable, columnDefinition, table @Column ì†ì„±ê³¼ ê°™ë‹¤.","text":"ëª©ì°¨ JPA ì—°ê´€ ê´€ê³„ - ê³ ì•„ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”© JPA ì—°ê´€ ê´€ê³„ - í”„ë¡ì‹œ ê°ì²´ JPA ì—°ê´€ ê´€ê³„ - @MappedSuperclass JPA ì—°ê´€ ê´€ê³„ - ìƒì† ê´€ê³„ Mapping JPA ì—°ê´€ ê´€ê³„ - ì˜ì†ì„± ì „ì´ Cascade JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê³¼ê³„ì˜ ì£¼ì¸ JPA ì—°ê´€ ê´€ê³„ - ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ì§€í–¥ ìŠ¤ëŸ½ê²Œ ëª¨ë¸ë§ í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ - ê°ì²´ ê´€ê³„ ëª¨ë¸ë§í•˜ê¸° JPA ì—°ê´€ ê´€ê³„ JPA ì—°ê´€ ê´€ê³„ í…Œì´ë¸”ê³¼ ê°ì²´ ê°„ íŒ¨ëŸ¬íƒ€ì„ ì°¨ì´ë¡œ ì¸í•´ ìƒê¸°ëŠ” ë¬¸ì œê°€ ìˆë‹¤. ê·¸ ì¤‘ ëŒ€í‘œì ì¸ê²Œ í…Œì´ë¸” ì—°ê´€ê´€ê³„ ë¥¼ ê°ì²´ë¡œ í’€ì–´ë‚´ëŠ” ê²ƒí…Œì´ë¸”ê°„ì˜ ì—°ê´€ê´€ê³„ë¥¼ ê°ì²´ ì—°ê´€ê´€ê³„ë¡œ í’€ì–´ë‚´ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ 3ê°€ì§€ ì¡°ê±´ì„ ì˜ ì´í•´í•´ì•¼ í•œë‹¤. ë°©í–¥ í…Œì´ë¸” ì—°ê´€ê´€ê³„ëŠ” ì–‘ë°©í–¥ ê°ì²´ì˜ ì—°ê´€ê´€ê³„ëŠ” ë‹¨ë°©í–¥ìœ¼ë¡œë§Œ ì¡´ì¬í•œë‹¤. ê°ì²´ì˜ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ë‹¨ë°©í–¥ ê´€ê³„ 2ê°œë¥¼ ì´ìš©í•´ ë§Œë“¤ì–´ì¤€ë‹¤. ë‹¤ì¤‘ì„± One To One(ì¼ëŒ€ì¼) 1:1 One To Many(ì¼ëŒ€ë‹¤) 1:N Many To One(ë‹¤ëŒ€ì¼) N:1 Many To Many(ë‹¤ëŒ€ë‹¤) N:M ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ í…Œì´ë¸” ì—°ê´€ê´€ê³„ë¥¼ ê°ì²´ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì—°ê´€ê´€ê³„ ì£¼ì¸ ì„ ì •í•´ì•¼ í•œë‹¤. ê°ì²´ì˜ ë‘ ê´€ê³„ì¤‘ í•˜ë‚˜ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì§€ì •í•´ ì£¼ì¸ë§Œì´ ì™¸ë˜ í‚¤ ë¥¼ ê´€ë¦¬í•˜ê²Œ í•œë‹¤. ì—°ê´€ê´€ê³„ ì£¼ì¸ì€ ì™¸ë˜í‚¤ë¥¼ ì´ìš©í•´ (ë“±ë¡, ìˆ˜ì •) ë“±ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì½ê¸° ë§Œ ê°€ëŠ¥í•˜ë‹¤ JoinColumn ì–´ë…¸í…Œì´ì…˜ ì™¸ë˜í‚¤ ë¥¼ ë§¤í•‘í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ì†ì„± ê¸°ëŠ¥ ê¸°ë³¸ ê°’ name ë§¤í•„í•  ì™¸ë˜í‚¤ ì´ë¦„ì„ ëª…ì‹œí•œë‹¤. í•„ë“œëª… + _ + ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸” ê¸°ë³¸í‚¤ ì»¬ëŸ¼ëª… referencedColumnName ì™¸ë˜ í‚¤ê°€ ì°¸ì¡°í•˜ëŠ” ëŒ€ìƒ í…Œì´ë¸” ì»¬ëŸ¼ëª… ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ ì»¬ëŸ¼ëª… foreignKey ì™¸ë˜í‚¤ ì œì•½ ì¡°ê±´ì„ ì§ì ‘ ì§€ì •í•  ìˆ˜ ìˆë‹¤. unique, nullable, insertable, updatable, columnDefinition, table @Column ì†ì„±ê³¼ ê°™ë‹¤. ManyToOne ì–´ë…¸í…Œì´ì…˜ N:1 ê´€ê³„ë¥¼ Mapping í•˜ê¸° ìœ„í•œ ì–´ë…¸í…Œì´ì…˜ ì†ì„± ê¸°ëŠ¥ ê¸°ë³¸ ê°’ optional true ëŠ” í•´ë‹¹ ê°ì²´ì— null ê°’ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸, false ëŠ” í•´ë‹¹ ê°ì²´ê°€ í•­ìƒ ìˆì–´ì•¼ í•¨ì„ ì˜ë¯¸í•œë‹¤. ê¸°ë³¸ê°’ì€ true fetch Fetch ì „ëµì„ ì„¤ì •í•œë‹¤. @ManyToOne(fetch &#x3D; FetchType.EAGER) cascade targetEntity ì—°ê´€ëœ ì—”í‹°í‹°ì˜ íƒ€ì… ì •ë³´ë¥¼ ì„¤ì •í•œë‹¤. OneToMany ì–´ë…¸í…Œì´ì…˜ 1:N ê´€ê³„ë¥¼ Mapping í•˜ê¸° ìœ„í•œ ì–´ë…¸í…Œì´ì…˜ ì†ì„± ê¸°ëŠ¥ ê¸°ë³¸ ê°’ mappedBy ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ mapping ì‹œ ì—°ê´€ê´€ê³„ ì£¼ì¸ì¸ Entity í•„ë“œë¥¼ ëª…ì‹œí•œë‹¤ fetch Fetch ì „ëµì„ ì„¤ì •í•œë‹¤. @OneToMany(fetch &#x3D; FetchType.LAZY) cascade targetEntity ì—°ê´€ëœ ì—”í‹°í‹°ì˜ íƒ€ì… ì •ë³´ë¥¼ ì„¤ì •í•œë‹¤. orphanRemoval","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"}],"tags":[]},{"title":"Spring Boot - WebMvcConfigurer","slug":"spring/spring-framework/configuration/springboot-WebMvcConfigurer","date":"2021-11-03T23:09:05.000Z","updated":"2024-11-27T02:00:28.805Z","comments":true,"path":"2021/11/04/spring/spring-framework/configuration/springboot-WebMvcConfigurer/","link":"","permalink":"https://ckck803.github.io/2021/11/04/spring/spring-framework/configuration/springboot-WebMvcConfigurer/","excerpt":"Matrix Variable ì„¤ì • ì°¸ê³  https://www.baeldung.com/spring-mvc-matrix-variables WebMvcConfigurer Spring MVC ì„¤ì •ì„ ì¶”ê°€, ë³€ê²½í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤WebMvcConfigurer ì¸í„°í˜ì´ìŠ¤ëŠ” CORS, Interceptor, ViewResolver, MessageConverter ë“± ì—¬ëŸ¬ê°€ì§€ ì„¤ì •ì„ ë³€ê²½, ì¶”ê°€í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤. WebMvcConfigurer ì¸í„°í˜ì´ìŠ¤ë‚´ ë©”ì†Œë“œë“¤ì€ default ë¡œ ì„ ì–´ë¼ ìˆì–´ í•„ìš”í•œ ê²ƒë§Œ êµ¬í˜„í•˜ë©´ ëœë‹¤. add~: ê¸°ë³¸ ì„¤ì •ì´ ì—†ëŠ” Beanì— ëŒ€í•˜ì—¬ ìƒˆë¡œìš´ ì„¤ì • Beanì„ ì¶”ê°€í•¨ configure~: ê¸°ì¡´ ì„¤ì • ëŒ€ì‹  ìƒˆë¡­ê²Œ ì •ì˜í•œ ì„¤ì • Beanì„ ì‚¬ìš©í•œë‹¤. (set ë©”ì†Œë“œ) extend~: ê¸°ì¡´ ì„¤ì •ì— ìƒˆë¡­ê²Œ ì •ì˜í•œ ì„¤ì • Beanì„ ì¶”ê°€í•œë‹¤. (add ë©”ì†Œë“œ) WebMvcConfigurer.java public interface WebMvcConfigurer &#123; default void configurePathMatch(PathMatchConfigurer configurer) &#123;&#125; default void configureContentNegotiation(ContentNegotiationConfigurer configurer) &#123;&#125; default void configureAsyncSupport(AsyncSupportConfigurer configurer) &#123;&#125; default void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) &#123;&#125; default void addFormatters(FormatterRegistry registry) &#123;&#125; default void addInterceptors(InterceptorRegistry registry) &#123;&#125; default void addResourceHandlers(ResourceHandlerRegistry registry) &#123;&#125; default void addCorsMappings(CorsRegistry registry) &#123;&#125; default void addViewControllers(ViewControllerRegistry registry) &#123;&#125; default void configureViewResolvers(ViewResolverRegistry registry) &#123;&#125; default void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; resolvers) &#123;&#125; default void addReturnValueHandlers(List&lt;HandlerMethodReturnValueHandler&gt; handlers) &#123;&#125; default void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) &#123;&#125; default void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) &#123;&#125; default void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;&#125; default void extendHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;&#125; @Nullable default Validator getValidator() &#123;return null;&#125; @Nullable default MessageCodesResolver getMessageCodesResolver() &#123;return null;&#125;&#125; CORS ì„¤ì •Spring Boot ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ CORSì— ëŒ€í•œ ì„¤ì •ì´ ì—†ê¸° ë•Œë¬¸ì— CORS ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” WebMvcConfigurer ë‚´ addCorsMappings ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤.","text":"Matrix Variable ì„¤ì • ì°¸ê³  https://www.baeldung.com/spring-mvc-matrix-variables WebMvcConfigurer Spring MVC ì„¤ì •ì„ ì¶”ê°€, ë³€ê²½í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤WebMvcConfigurer ì¸í„°í˜ì´ìŠ¤ëŠ” CORS, Interceptor, ViewResolver, MessageConverter ë“± ì—¬ëŸ¬ê°€ì§€ ì„¤ì •ì„ ë³€ê²½, ì¶”ê°€í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤. WebMvcConfigurer ì¸í„°í˜ì´ìŠ¤ë‚´ ë©”ì†Œë“œë“¤ì€ default ë¡œ ì„ ì–´ë¼ ìˆì–´ í•„ìš”í•œ ê²ƒë§Œ êµ¬í˜„í•˜ë©´ ëœë‹¤. add~: ê¸°ë³¸ ì„¤ì •ì´ ì—†ëŠ” Beanì— ëŒ€í•˜ì—¬ ìƒˆë¡œìš´ ì„¤ì • Beanì„ ì¶”ê°€í•¨ configure~: ê¸°ì¡´ ì„¤ì • ëŒ€ì‹  ìƒˆë¡­ê²Œ ì •ì˜í•œ ì„¤ì • Beanì„ ì‚¬ìš©í•œë‹¤. (set ë©”ì†Œë“œ) extend~: ê¸°ì¡´ ì„¤ì •ì— ìƒˆë¡­ê²Œ ì •ì˜í•œ ì„¤ì • Beanì„ ì¶”ê°€í•œë‹¤. (add ë©”ì†Œë“œ) WebMvcConfigurer.java public interface WebMvcConfigurer &#123; default void configurePathMatch(PathMatchConfigurer configurer) &#123;&#125; default void configureContentNegotiation(ContentNegotiationConfigurer configurer) &#123;&#125; default void configureAsyncSupport(AsyncSupportConfigurer configurer) &#123;&#125; default void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) &#123;&#125; default void addFormatters(FormatterRegistry registry) &#123;&#125; default void addInterceptors(InterceptorRegistry registry) &#123;&#125; default void addResourceHandlers(ResourceHandlerRegistry registry) &#123;&#125; default void addCorsMappings(CorsRegistry registry) &#123;&#125; default void addViewControllers(ViewControllerRegistry registry) &#123;&#125; default void configureViewResolvers(ViewResolverRegistry registry) &#123;&#125; default void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; resolvers) &#123;&#125; default void addReturnValueHandlers(List&lt;HandlerMethodReturnValueHandler&gt; handlers) &#123;&#125; default void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) &#123;&#125; default void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) &#123;&#125; default void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;&#125; default void extendHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;&#125; @Nullable default Validator getValidator() &#123;return null;&#125; @Nullable default MessageCodesResolver getMessageCodesResolver() &#123;return null;&#125;&#125; CORS ì„¤ì •Spring Boot ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ CORSì— ëŒ€í•œ ì„¤ì •ì´ ì—†ê¸° ë•Œë¬¸ì— CORS ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” WebMvcConfigurer ë‚´ addCorsMappings ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤. @Configurationpublic class WebConfig implements WebMvcConfigurer &#123; @Override public void addCorsMappings(CorsRegistry registry) &#123; registry.addMapping(&quot;/**&quot;) .allowedOrigins(&quot;*&quot;);&#125; Matrix Variable ì‚¬ìš© ì„¤ì •Spring Boot ì—ì„œ ë§¤íŠ¸ë¦­ í˜•íƒœì˜ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ê¸°ì¡´ì— trueì¸ removeSemicolonContent ì„¤ì •ì„ falseë¡œ ë³€ê²½í•´ì•¼ í•œë‹¤. WebMvcConfigurer ë‚´ configurePathMatch ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ê¸°ì¡´ ì„¤ì •ì„ ë³€ê²½í•œë‹¤. @Configurationpublic class WebConfig implements WebMvcConfigurer &#123; @Override public void configurePathMatch(PathMatchConfigurer configurer) &#123; UrlPathHelper urlPathHelper = new UrlPathHelper(); urlPathHelper.setRemoveSemicolonContent(false); configurer.setUrlPathHelper(urlPathHelper); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"}],"tags":[]},{"title":"ìš´ì˜ì²´ì œ - Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ )","slug":"computer-science/os/deadlock","date":"2021-11-03T21:16:13.000Z","updated":"2024-02-18T16:19:54.520Z","comments":true,"path":"2021/11/04/computer-science/os/deadlock/","link":"","permalink":"https://ckck803.github.io/2021/11/04/computer-science/os/deadlock/","excerpt":"ìƒí˜¸ ë°°ì œ(Mutual Exclusion) Busy Waiting Sleep and WakeUp Semaphore(ì„¸ë§ˆí¬ì–´) Mutex(ë®¤í…ìŠ¤) Monitor Message Passing Barriers Busy Waiting Busy Waiting ì€ loopë¬¸ ì„ ì´ìš©í•´ ê³µìœ  ìì›ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ê³„ì† í™•ì¸í•˜ëŠ” ë°©ë²•ì´ë‹¤. cpuìì›ì„ ê³„ì†í•´ì„œ ë‚­ë¹„í•˜ê¸° ë•Œë¬¸ì— ë¬´ì¡°ê±´ ì ìœ¼ë¡œ í”¼í•´ì•¼ í•œë‹¤. ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ì´ ë§¤ìš° ì‘ì„ ë•Œë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. Semaphore(ì„¸ë§ˆí¬ì–´) ê³µìœ ëœ ìì›ì˜ ë°ì´í„°ì— í•œë²ˆì— ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ì ‘ê·¼í•˜ì§€ ëª»í•˜ê²Œ í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ ê³µìœ ìì›ì— ë”°ë¼ ëª‡ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì ‘ê·¼ì‹œí‚¬ì§€ì— ë”°ë¼ì„œ ì´ì§„ ì„¸ë§ˆí¬ì–´ ì™€ ê³„ìˆ˜í˜• ì„¸ë§ˆí¬ì–´ ë¡œ ë‚˜ë‰˜ê²Œ ëœë‹¤","text":"ìƒí˜¸ ë°°ì œ(Mutual Exclusion) Busy Waiting Sleep and WakeUp Semaphore(ì„¸ë§ˆí¬ì–´) Mutex(ë®¤í…ìŠ¤) Monitor Message Passing Barriers Busy Waiting Busy Waiting ì€ loopë¬¸ ì„ ì´ìš©í•´ ê³µìœ  ìì›ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ê³„ì† í™•ì¸í•˜ëŠ” ë°©ë²•ì´ë‹¤. cpuìì›ì„ ê³„ì†í•´ì„œ ë‚­ë¹„í•˜ê¸° ë•Œë¬¸ì— ë¬´ì¡°ê±´ ì ìœ¼ë¡œ í”¼í•´ì•¼ í•œë‹¤. ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ì´ ë§¤ìš° ì‘ì„ ë•Œë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. Semaphore(ì„¸ë§ˆí¬ì–´) ê³µìœ ëœ ìì›ì˜ ë°ì´í„°ì— í•œë²ˆì— ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ì ‘ê·¼í•˜ì§€ ëª»í•˜ê²Œ í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ ê³µìœ ìì›ì— ë”°ë¼ ëª‡ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì ‘ê·¼ì‹œí‚¬ì§€ì— ë”°ë¼ì„œ ì´ì§„ ì„¸ë§ˆí¬ì–´ ì™€ ê³„ìˆ˜í˜• ì„¸ë§ˆí¬ì–´ ë¡œ ë‚˜ë‰˜ê²Œ ëœë‹¤ ì´ì§„ ì„¸ë§ˆí¬ì–´(binary semaphore) ê³„ìˆ˜í˜• ì„¸ë§ˆí¬ì–´(counting semaphore) ë®¤í…ìŠ¤ ê³µìœ ëœ ìì›ì˜ ë°ì´í„°ì— í•œë²ˆì— ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ì ‘ê·¼í•˜ì§€ ëª»í•˜ê²Œ í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ Locking ë§¤ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš© ëª¨ë‹ˆí„° ì£¼ë¡œ ê³ ê¸‰ ì–¸ì–´ì—ì„œ ì´ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Process","slug":"CS/Process","permalink":"https://ckck803.github.io/categories/CS/Process/"}],"tags":[]},{"title":"Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ )","slug":"computer-science/os/process/ipc","date":"2021-11-03T21:16:13.000Z","updated":"2024-03-03T05:21:21.573Z","comments":true,"path":"2021/11/04/computer-science/os/process/ipc/","link":"","permalink":"https://ckck803.github.io/2021/11/04/computer-science/os/process/ipc/","excerpt":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) IPC(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) ë€? í”„ë¡œì„¸ìŠ¤ê°„ì˜ ë°ì´í„° ë° ì •ë³´ë¥¼ ì£¼ê³  ë°›ê¸° ìœ„í•œ ë©”ì»¤ë‹ˆì¦˜kernel ì—ì„œ IPCë¥¼ ìœ„í•œ ë„êµ¬ë¥¼ ì œê³µí•˜ë©°, System call í˜•íƒœë¡œ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ì œê³µì´ ëœë‹¤. ì™œ IPCê°€ í•„ìš”í•œê°€? ê°ê°ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ë…ë¦½ëœ ì‹¤í–‰ ê°ì²´ì´ê¸° ë•Œë¬¸ì— ì„œë¡œê°„ì˜ í†µì‹ ì´ ì–´ë µë‹¤. ê·¸ë˜ì„œ kenerlì—ì„œ í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ì„ ìœ„í•œ IPCì„ ì œê³µí•˜ëŠ” ê²ƒì´ë‹¤. ê³µìœ  ë©”ëª¨ë¦¬ (Shared Memory)","text":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) IPC(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) ë€? í”„ë¡œì„¸ìŠ¤ê°„ì˜ ë°ì´í„° ë° ì •ë³´ë¥¼ ì£¼ê³  ë°›ê¸° ìœ„í•œ ë©”ì»¤ë‹ˆì¦˜kernel ì—ì„œ IPCë¥¼ ìœ„í•œ ë„êµ¬ë¥¼ ì œê³µí•˜ë©°, System call í˜•íƒœë¡œ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ì œê³µì´ ëœë‹¤. ì™œ IPCê°€ í•„ìš”í•œê°€? ê°ê°ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ë…ë¦½ëœ ì‹¤í–‰ ê°ì²´ì´ê¸° ë•Œë¬¸ì— ì„œë¡œê°„ì˜ í†µì‹ ì´ ì–´ë µë‹¤. ê·¸ë˜ì„œ kenerlì—ì„œ í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ì„ ìœ„í•œ IPCì„ ì œê³µí•˜ëŠ” ê²ƒì´ë‹¤. ê³µìœ  ë©”ëª¨ë¦¬ (Shared Memory) ì´ ê³µê°„ì—ëŠ” ë°ì´í„°ê°€ ì–´ë–¤ í˜•ì‹ì¸ì§€, ì–´ë–¤ ìœ„ì¹˜ì— ì €ì¥ë˜ëŠ”ì§€ì— ëŒ€í•´ ìš´ì˜ì²´ì œê°€ ê´€ì—¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ì¥ì  ë¹ ë¥´ë‹¤. ë‹¨ì  Producer - Consumer ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ë©”ì‹œì§€ ì „ë‹¬ (Message Passing) ì»¤ë„ì„ ê²½ìœ í•´ ë©”ì‹œì§€ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤. ì»¤ë„ì—ì„œ í•˜ëŠ” ì—­í• ì€ ë©”ì‹œì§€ë“¤ì„ ë²„í¼í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤. ì¥ì êµ¬í˜„í•˜ê¸°ê°€ ì‰½ë‹¤. ë‹¨ì ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì»¤ë„ì„ ê±°ì³ì•¼í•˜ê¸° ë•Œë¬¸ì— ì†ë„ê°€ ëŠë¦¬ë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ìš´ì˜ì²´ì œ","slug":"CS/ìš´ì˜ì²´ì œ","permalink":"https://ckck803.github.io/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/"}],"tags":[]},{"title":"í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™”","slug":"computer-science/os/process/syncronize","date":"2021-11-03T19:16:13.000Z","updated":"2024-03-03T05:21:39.899Z","comments":true,"path":"2021/11/04/computer-science/os/process/syncronize/","link":"","permalink":"https://ckck803.github.io/2021/11/04/computer-science/os/process/syncronize/","excerpt":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™”ì˜ ëª©ì  ê³µìœ ìì›ì— ì ‘ê·¼í•˜ëŠ” ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì¹˜ë¦¬ìˆœì„œì— ìƒê´€ì—†ì´ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŒì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ë„ì…ëœ ê°œë…, ì´ë¥¼ í†µí•´ ê³µìœ ë˜ëŠ” ë°ì´í„°ì˜ ì¼ê´€ì„±ì„ ë³´ì¥í•œë‹¤.ì‰½ê²Œ ë§í•´, í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ê³µìœ ìì›ì„ ì‚¬ìš©í•˜ê³  ìˆì„ ë•Œ, ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ê³µìœ ìì›ì„ ì‚¬ìš©í—ˆì§€ ëª»í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤. Race Condition(ê²½ìŸìƒíƒœ) ê³µìœ ìì›ì— ì—¬ëŸ¬ê°œì˜ í”„ë¡œì„¸ìŠ¤ê°€ ì ‘ê·¼í•  ë•Œ ë°©ìƒí•œë‹¤. ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ê³µìœ ë°ì´í„°ì— ë™ì‹œì— ì ‘ê·¼í•  ë•Œ ì‹¤í–‰ìˆœì„œ ì— ë”°ë¼ì„œ ì‹¤í–‰ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ëŠ” í˜„ìƒì´ë‹¤. Critical Regions(ì„ê³„ ì˜ì—­) í”„ë¡œì„¸ìŠ¤ì˜ ì½”ë“œ ë¶€ë¶„ì—ì„œ ê³µìœ  ìì›ì— ë“¤ì–´ê°€ê¸° ìœ„í•œ ì½”ë“œë¶€ë¶„ì„ ì„ê³„ì˜ì—­(Criticla Regions) ì´ë¼ê³  ë¶€ë¥¸ë‹¤.í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” ë¥¼ ìœ„í•´ ì„ê³„ ì˜ì—­ ë‚´ ì½”ë“œëŠ” ê³µìœ  ìì›ì˜ ë…ì ì´ ë³´ì¥ ë¼ì•¼ í•œë‹¤.","text":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™”ì˜ ëª©ì  ê³µìœ ìì›ì— ì ‘ê·¼í•˜ëŠ” ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì¹˜ë¦¬ìˆœì„œì— ìƒê´€ì—†ì´ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŒì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ë„ì…ëœ ê°œë…, ì´ë¥¼ í†µí•´ ê³µìœ ë˜ëŠ” ë°ì´í„°ì˜ ì¼ê´€ì„±ì„ ë³´ì¥í•œë‹¤.ì‰½ê²Œ ë§í•´, í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ê³µìœ ìì›ì„ ì‚¬ìš©í•˜ê³  ìˆì„ ë•Œ, ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ê³µìœ ìì›ì„ ì‚¬ìš©í—ˆì§€ ëª»í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤. Race Condition(ê²½ìŸìƒíƒœ) ê³µìœ ìì›ì— ì—¬ëŸ¬ê°œì˜ í”„ë¡œì„¸ìŠ¤ê°€ ì ‘ê·¼í•  ë•Œ ë°©ìƒí•œë‹¤. ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ê³µìœ ë°ì´í„°ì— ë™ì‹œì— ì ‘ê·¼í•  ë•Œ ì‹¤í–‰ìˆœì„œ ì— ë”°ë¼ì„œ ì‹¤í–‰ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ëŠ” í˜„ìƒì´ë‹¤. Critical Regions(ì„ê³„ ì˜ì—­) í”„ë¡œì„¸ìŠ¤ì˜ ì½”ë“œ ë¶€ë¶„ì—ì„œ ê³µìœ  ìì›ì— ë“¤ì–´ê°€ê¸° ìœ„í•œ ì½”ë“œë¶€ë¶„ì„ ì„ê³„ì˜ì—­(Criticla Regions) ì´ë¼ê³  ë¶€ë¥¸ë‹¤.í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” ë¥¼ ìœ„í•´ ì„ê³„ ì˜ì—­ ë‚´ ì½”ë“œëŠ” ê³µìœ  ìì›ì˜ ë…ì ì´ ë³´ì¥ ë¼ì•¼ í•œë‹¤. êµì°© ìƒíƒœ êµì°© ìƒíƒœëŠ” ìƒí˜¸ë°°ì œ, ì ìœ ëŒ€ê¸°, ë¹„ì„ ì , ìˆœí™˜ëŒ€ê¸° ì´ 4ê°€ì§€ ì¡°ê±´ì„ ë™ì‹œì— ë§Œì¡±í•˜ë©´, êµì°© ìƒíƒœì— ë¹ ì¡Œë‹¤ê³  í•œë‹¤. í”„ë¡œì„¸ìŠ¤ë¡œë¶€í„° ìì›ì„ ë¹¼ì•—ì§€ ëª»í•˜ëŠ” ë¹„ì„ ì  ìƒí™© í•œ ìì›ì— ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ëŠ” ìƒí˜¸ë°°ì œ ìƒíƒœ ìì›1ì„ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì„¸ìŠ¤Aê°€ í”„ë¡œì„¸ìŠ¤Bê°€ ì‚¬ìš©í•˜ëŠ” ìì›2ë¥¼ ìš”ì²­í•  ê²½ìš° ìì›ì„ í• ë‹¹ ë°›ì„ ë•Œê¹Œì§€ ìì›1ì„ ê°€ì§„ ìƒíƒœë¡œ ëŒ€ê¸°ì— ë“¤ì–´ê°€ëŠ” ì ìœ  ëŒ€ê¸° ìƒíƒœê°€ ëœë‹¤. ì´ ë•Œ í”„ë¡œì„¸ìŠ¤B ë˜í•œ í”„ë¡œì„¸ìŠ¤Aê°€ ì‚¬ìš©í•˜ëŠ” ìì›1ì„ ìš”ì²­í•˜ê²Œ ë˜ë©´ í”„ë¡œì„¸ìŠ¤ Bì—­ì‹œ ì ìœ  ëŒ€ê¸° ìƒíƒœë¡œ ë“¤ì–´ê°€ëŠ”ë° ê²°êµ­, ì„œë¡œ ìƒëŒ€ë°©ì˜ ìì›ì„ ìš”ì²­í•˜ëŠ” ì‚¬ì´í´ì´ ë°œìƒí•˜ëŠ” ìˆœí™˜ëŒ€ê¸° ìƒíƒœë¥¼ ë³´ì´ê²Œëœë‹¤ ì„ê³„ êµ¬ì—­ ë¬¸ì œì˜ í•´ê²° ì¡°ê±´ ìƒí˜¸ ë°°ì œ (Mutual Exclusion) : ì–´ë–¤ í”„ë¡œì„¸ìŠ¤(ë˜ëŠ” ìŠ¤ë ˆë“œ)ê°€ ì„ê³„ êµ¬ì—­ì—ì„œ ì‘ì—… ì¤‘ì¼ ë•Œ, ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ëŠ” ì„ê³„ êµ¬ì—­ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤. ì§„í–‰ (Progress) : ì„ê³„ êµ¬ì—­ì—ì„œ ì‘ì—… ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ì—†ë‹¤ë©´, ì„ê³„ êµ¬ì—­ìœ¼ë¡œ ì§„ì…í•˜ë ¤ëŠ” í”„ë¡œì„¸ìŠ¤ ì¤‘ í•˜ë‚˜ë¥¼ ì ì ˆíˆ ì„ íƒí•˜ì—¬ ì„ê³„ êµ¬ì—­ì— ì§„ì…í•  ìˆ˜ ìˆê²Œ í•´ì•¼ í•œë‹¤. ìœ í•œ ëŒ€ê¸° (Bounded Waiting) : ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì˜ ê¸°ì•„(Starvation)ì„ ë°©ì§€í•˜ê¸° ìœ„í•´, ì„ê³„ êµ¬ì—­ì— í•œ ë²ˆ ì ‘ê·¼í–ˆë˜ í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ì‹œ ì„ê³„ êµ¬ì—­ì— ë“¤ì–´ê°ˆ ë•Œ ì œí•œì„ ë‘ì–´ì•¼ í•œë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ìš´ì˜ì²´ì œ","slug":"CS/ìš´ì˜ì²´ì œ","permalink":"https://ckck803.github.io/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/"}],"tags":[]},{"title":"ì“°ë ˆë“œ","slug":"computer-science/os/thread/thread","date":"2021-11-03T18:16:13.000Z","updated":"2024-03-03T05:21:44.866Z","comments":true,"path":"2021/11/04/computer-science/os/thread/thread/","link":"","permalink":"https://ckck803.github.io/2021/11/04/computer-science/os/thread/thread/","excerpt":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) Thread ë€? CPUì—ì„œ ì‹¤í–‰ë˜ëŠ” ì‹¤í–‰ ë‹¨ìœ„ í•œ í”„ë¡œì„¸ìŠ¤ ë‚´ì— ì—¬ëŸ¬ê°œì˜ ì“°ë ˆë“œê°€ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤. ê°™ì€ í”„ë¡œì„¸ìŠ¤ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ê°œì˜ ì“°ë˜ë“œê°€ ë™ì¼í•˜ê²Œ ë°œìƒí•  ìˆ˜ ìˆë‹¤.(ë©€í‹° ì“°ë ˆë“œ) a) í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì— í•˜ë‚˜ì˜ ì“°ë ˆë“œê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° ê°ê°ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ë…ë¦½ì ìœ¼ë¡œ ì›€ì§ì¸ë‹¤. b) í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë‚´ì— ì—¬ëŸ¬ê°€ì§€ ì“°ë ˆë“œê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°(multi thread) ì“°ë ˆë“œëŠ” ê²°êµ­ í”„ë¡œì„¸ìŠ¤ë‚´ì˜ ìˆ˜í–‰ ë‹¨ìœ„ì´ê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ë‹¨ì˜ Address Spaceë“¤ì„ ê³µìœ í•œë‹¤. ëŒ€ì‹ , ê°ê°ì˜ ì“°ë ˆë“œë§ˆë‹¤ PC(Program Counter), register, stackì„ ê°–ëŠ”ë‹¤. ê°ê°ì˜ ì“°ë ˆë“œëŠ” í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ìƒí˜¸ í˜‘ë ¥ì ì¸ ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤. ì“°ë ˆë“œì™€ ê´€ë ¨ëœ Procedures","text":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) Thread ë€? CPUì—ì„œ ì‹¤í–‰ë˜ëŠ” ì‹¤í–‰ ë‹¨ìœ„ í•œ í”„ë¡œì„¸ìŠ¤ ë‚´ì— ì—¬ëŸ¬ê°œì˜ ì“°ë ˆë“œê°€ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤. ê°™ì€ í”„ë¡œì„¸ìŠ¤ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ê°œì˜ ì“°ë˜ë“œê°€ ë™ì¼í•˜ê²Œ ë°œìƒí•  ìˆ˜ ìˆë‹¤.(ë©€í‹° ì“°ë ˆë“œ) a) í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì— í•˜ë‚˜ì˜ ì“°ë ˆë“œê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° ê°ê°ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ë…ë¦½ì ìœ¼ë¡œ ì›€ì§ì¸ë‹¤. b) í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë‚´ì— ì—¬ëŸ¬ê°€ì§€ ì“°ë ˆë“œê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°(multi thread) ì“°ë ˆë“œëŠ” ê²°êµ­ í”„ë¡œì„¸ìŠ¤ë‚´ì˜ ìˆ˜í–‰ ë‹¨ìœ„ì´ê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ë‹¨ì˜ Address Spaceë“¤ì„ ê³µìœ í•œë‹¤. ëŒ€ì‹ , ê°ê°ì˜ ì“°ë ˆë“œë§ˆë‹¤ PC(Program Counter), register, stackì„ ê°–ëŠ”ë‹¤. ê°ê°ì˜ ì“°ë ˆë“œëŠ” í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ìƒí˜¸ í˜‘ë ¥ì ì¸ ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤. ì“°ë ˆë“œì™€ ê´€ë ¨ëœ Procedures thread_create(ìƒˆë¡œìš´ ì“°ë ˆë“œë¥¼ ìƒì„±) therad_exit thread_wait thread_yield(threadì—ë§Œ ìˆëŠ” ê°œë…) ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ  ë§ì€ ì•±ì—ì„œ í•œë²ˆì— ì—¬ëŸ¬ê°€ì§€ ì¼ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° ì“°ë ˆë“œê°€ í”„ë¡œì„¸ìŠ¤ë³´ë‹¤ëŠ” ìƒì„±ê³¼ ì†Œë©¸ì‹œí‚¤ëŠ”ê²Œ ë” ì‰¬ì›Œì„œ performanceì— ëŒ€í•œ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆë‹¤. multiple CPUí™˜ê²½ì—ì„œëŠ” ì§„ì§œë¡œ ë³‘ë ¬ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ì“°ë ˆë“œë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì“°ë ˆë“œëŠ” User Spaceì—ì„œ ê·¸ë¦¬ê³  Kernelì—ì„œ êµ¬í˜„ì„ í•  ìˆ˜ ìˆë‹¤. User Spaceì—ì„œ ì“°ë ˆë“œë¥¼ êµ¬í˜„í•  ê²½ìš° User Level Thread Kernel ì˜ì—­ì—ì„œ ì“°ë ˆë“œë¥¼ êµ¬í˜„í•  ê²½ìš° Kernel Level Threadë¼ ë¶€ë¥¸ë‹¤. User Level Thread User Level Threadì˜ ê²½ìš° Kernelì€ Thread Tableì„ ê°€ì§€ê³  ìˆì§€ ëª»í•˜ë¯€ë¡œ threadì— ëŒ€í•œ ì •ë³´ëŠ” ëª¨ë¥¸ë‹¤. ì¦‰, OSê°€ Threadë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. Processì— blocking System Callì´ ë°œìƒí•  ê²½ìš° Processë‚´ë¶€ì˜ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ë„ blockëœë‹¤. Kernel Level Thread User Level Threadì™€ëŠ” ë‹¬ë¦¬ Kernelì˜ì—­ì— Thread Tableì´ ì¶”ê°€ë¨ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. ë•Œë¬¸ì— OSê°€ Threadë¥¼ ì§€ì›í•œë‹¤. kernelì´ Clock Interruptë¥¼ ì‚¬ìš©í•´ Schedulingì´ ê°€ëŠ¥í•˜ë‹¤. Hybrid Implementations User Level Threadì™€ Kernel Level Threaë¥¼ í•©ì¹œ ë°©ë²•ì´ë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ìš´ì˜ì²´ì œ","slug":"CS/ìš´ì˜ì²´ì œ","permalink":"https://ckck803.github.io/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/"}],"tags":[]},{"title":"í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜","slug":"computer-science/os/process/scheduling-algorithm","date":"2021-11-03T17:16:13.000Z","updated":"2024-03-03T05:21:31.392Z","comments":true,"path":"2021/11/04/computer-science/os/process/scheduling-algorithm/","link":"","permalink":"https://ckck803.github.io/2021/11/04/computer-science/os/process/scheduling-algorithm/","excerpt":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ì´ë€? ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìˆœì„œ ë¥¼ ì •í•´ì£¼ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìˆœì„œëŠ” ìì›(CPU, Memory) ë¥¼ í• ë‹¹ ë°›ëŠ” ìˆœì„œì— ë”°ë¼ ì‹¤í–‰ëœë‹¤. í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ì˜ ëª©ì ì€ Cpuë‚˜ Memory ê°™ì€ í•œì •ëœ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•´ ë™ì¼í•œ ì‹œê°„ì— ë” ë†’ì€ ì²˜ë¦¬ ëŠ¥ë ¥ ì„ ê°–ê¸° ìœ„í•¨ì´ë‹¤. ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ì€ í¬ê²Œ ë¹„ ì„ ì  ìŠ¤ì¼€ì¤„ë§ ê³¼ ì„ ì  ìŠ¤ì¼€ì¤„ë§ ìœ¼ë¡œ ë‚˜ë‰œë‹¤. ë¹„ ì„ ì  ìŠ¤ì¼€ì¤„ë§ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¡œ ë¶€í„° CPU ìì› ì„ ëºì–´ ì˜¬ ìˆ˜ ì—†ë‹¤. í•œ í”„ë¡œì„¸ìŠ¤ì— CPUê°€ í• ë‹¹ ë˜ë©´ í•´ë‹¹ ì‘ì—…ì´ ëë‚˜ê±°ë‚˜ ëŒ€ê¸°ìƒíƒœë¡œ ì „í™œë  ë•Œê¹Œì§€ CPUìì›ì„ ê³„ì†í•´ì„œ ì°¨ì§€í•œë‹¤. ë¹„ ì‹ ì  ìŠ¤ì¼€ì¤„ë§ìœ¼ë¡œëŠ” FCFS, SJF, HRN ë°©ì‹ì´ ìˆë‹¤. FCFS(First Come, First Served) - ë“¤ì–´ì˜¨ ìˆœì„œ","text":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ì´ë€? ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìˆœì„œ ë¥¼ ì •í•´ì£¼ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìˆœì„œëŠ” ìì›(CPU, Memory) ë¥¼ í• ë‹¹ ë°›ëŠ” ìˆœì„œì— ë”°ë¼ ì‹¤í–‰ëœë‹¤. í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ì˜ ëª©ì ì€ Cpuë‚˜ Memory ê°™ì€ í•œì •ëœ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•´ ë™ì¼í•œ ì‹œê°„ì— ë” ë†’ì€ ì²˜ë¦¬ ëŠ¥ë ¥ ì„ ê°–ê¸° ìœ„í•¨ì´ë‹¤. ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ì€ í¬ê²Œ ë¹„ ì„ ì  ìŠ¤ì¼€ì¤„ë§ ê³¼ ì„ ì  ìŠ¤ì¼€ì¤„ë§ ìœ¼ë¡œ ë‚˜ë‰œë‹¤. ë¹„ ì„ ì  ìŠ¤ì¼€ì¤„ë§ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¡œ ë¶€í„° CPU ìì› ì„ ëºì–´ ì˜¬ ìˆ˜ ì—†ë‹¤. í•œ í”„ë¡œì„¸ìŠ¤ì— CPUê°€ í• ë‹¹ ë˜ë©´ í•´ë‹¹ ì‘ì—…ì´ ëë‚˜ê±°ë‚˜ ëŒ€ê¸°ìƒíƒœë¡œ ì „í™œë  ë•Œê¹Œì§€ CPUìì›ì„ ê³„ì†í•´ì„œ ì°¨ì§€í•œë‹¤. ë¹„ ì‹ ì  ìŠ¤ì¼€ì¤„ë§ìœ¼ë¡œëŠ” FCFS, SJF, HRN ë°©ì‹ì´ ìˆë‹¤. FCFS(First Come, First Served) - ë“¤ì–´ì˜¨ ìˆœì„œ Ready Queue ì— ë“¤ì–´ì˜¨ ìˆœì„œëŒ€ë¡œ CPUìì›ì„ í• ë‹¹í•´ì£¼ëŠ” ë°©ì‹ì´ë‹¤. êµ¬í˜„ì´ ì—„ì²­ ë‹¨ìˆœí•˜ê³  ì²˜ë¦¬ ìˆœì„œê°€ í™•ì‹¤í•´ í™•ì‹¤í•œ ì‘ì—… ì²˜ë¦¬ë¥¼ ë³´ì¥ ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ Convoy Effect ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. Convoy Effect : ê¸´ ì‘ì—…ì‹œê°„ì„ ìš”êµ¬í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ ë•Œë¬¸ì— ê°„ë‹¨íˆ ëë‚¼ í”„ë¡œì„¸ìŠ¤ê°€ ìì›ì„ í• ë‹¹ ë°›ì§€ ëª»í•˜ëŠ” ìƒí™©ì´ë‹¤. SJF(Shortest Job First) - ì²˜ë¦¬ì‹œê°„ì´ ì§§ì€ ìˆœì„œ Ready Queue ì—ì„œ ì²˜ëŸ¬ì‹œê°„ì´ ì§§ì€ Jobì„ ìš°ì„ ì ìœ¼ë¡œ ì²˜ë¦¬í•´ì£¼ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë‹¤. Ready Qeueuì— ìˆëŠ” í”„ë¡œì„¸ìŠ¤ë“¤ì„ ì‘ì—…ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ë¥¼ ì •í•œë‹¤.(ìš°ì„ ìˆœìœ„ í ì‚¬ìš©) ì‘ì—…ì‹œê°„ì´ ê°€ì¥ ì§§ì€ í”„ë¡œì„¸ìŠ¤ê°€ ìì›ì„ í• ë‹¹ ë°›ëŠ” í˜•ì‹ìœ¼ë¡œ ì‘ì—…ì„ í•œë‹¤. Average Waiting Timeì´ ì¤„ì–´ë“ ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, Starvation ì´ ìƒê¸¸ ìˆ˜ ìˆëŠ” ë‹¨ì ì´ ìˆë‹¤. Starvation : ì‘ì—…ì‹œê°„ì´ ê¸¸ì–´ ë©”ëª¨ë¦¬ìƒì— ê³„ì† í”„ë¡œì„¸ìŠ¤ê°€ ì¡´ì¬í•˜ëŠ” ìƒíƒœ, ì˜êµ¬ì ìœ¼ë¡œ ìì›ì„ í• ë‹¹ë°›ì§€ ëª»í•˜ê³  ê°‡í˜€ ìˆì„ ìˆ˜ ìˆë‹¤.Aging : ë“¤ì–´ì˜¨ ì‹œê°„ ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ë¥¼ ë©”ê¸°ëŠ” ë°©ì‹, ì˜¤ë˜ ë‚¨ì•„ìˆì„ ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ê°€ ë†’ì•„ì ¸ ì˜¤ë˜ ë‚¨ì•„ ìˆëŠ” í”„ë¡œì„¸ìŠ¤ë“¤ë„ ìì›ì„ í• ë‹¹ë°›ì„ ìˆ˜ ìˆë‹¤. HRN(Hightest Response ratio Next) ìŠ¤ì¼€ì¤„ë§ SJFì˜ ë‹¨ì ì„ ë³´ì™„í•œ ì•Œê³ ë¦¬ì¦˜, ì²˜ë¦¬ì‹œê°„ ê³¼ ëŒ€ê¸°ì‹œê°„ ì„ ëª¨ë‘ ê³ ë ¤í•´ ìš°ì„ ìˆœìœ„ë¥¼ ì •í•œë‹¤. ì²˜ë¦¬ì‹œê°„ ê³¼ ëŒ€ê¸°ì‹œê°„ ì„ ê³ ë ¤í•œ ê³µì‹ì„ ì ìš©í•œë‹¤. (ëŒ€ê¸°ì‹œê°„ + ì²˜ë¦¬ì‹œê°„) &#x2F; ì²˜ë¦¬ì‹œê°„ ëŒ€ê¸°ì‹œê°„ì´ ê¸¸ì–´ì§€ë©´ ê¸¸ì–´ì§ˆ ìˆ˜ë¡ ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. ì„ ì  ìŠ¤ì¼€ì¤„ë§ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¡œë¶€í„° CPU ìì› ì„ ëºì–´ ì˜¬ ìˆ˜ ìˆë‹¤. ì‘ì—…ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¤‘ì§€ì‹œí‚¤ê³  CPUìì›ì„ ì°¨ì§€í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì„ ì  ìŠ¤ì¼€ì¤„ë§ ë°©ì‹ìœ¼ë¡œëŠ” RR, SRT, MLQ ë°©ì‹ì´ ìˆë‹¤ RR(Round Robin) ìŠ¤ì¼€ì¤„ë§ FCFSì•Œê³ ë¦¬ì¦˜ì„ ì„ ì  ìŠ¤ì¼€ì¤„ë§ í˜•ì‹ìœ¼ë¡œ ë°”ê¾¼ ë²„ì „ì´ë‹¤. ë³´í†µ ì‹œë¶„í•  ì‹œìŠ¤í…œ ì—ì„œ ì‚¬ìš©ì´ëœë‹¤. í• ë‹¹ë˜ëŠ” ì‹œê°„ì´ ì»¤ì§€ë©´ ì»¤ì§ˆ ìˆ˜ë¡ FCFSì•Œê³ ë¦¬ì¦˜ê³¼ ë¹„ìŠ·í•´ì§„ë‹¤. SRT(Shortest Temainint Time) SJFì•Œê³ ë¦¬ì¦˜ì„ ì„ ì  ìŠ¤ì¼€ì¤„ë§ í˜•ì‹ìœ¼ë¡œ ë°”ê¾¼ ë²„ì „ MLQ(Multi Level Queue : ë‹¤ë‹¨ê³„ í) ì‘ì—…ë“¤ì„ ì—¬ëŸ¬ ì¢…ë¥˜ì˜ Ready queueë¡œ êµ¬ë¶„í•˜ì—¬ ìŠ¤ì¼€ì¤„ë§í•˜ëŠ” ê¸°ë²• MFQ(Multi Level Feedback Qeueu : ë‹¤ë‹¨ê³„ í”¼ë“œë°± í) MLQì—ì„œ ìƒê¸¸ ìˆ˜ ìˆëŠ” Starvationì„ ë³´ì™„í•œ ìŠ¤ì¼€ì¤„ë§ ê¸°ë²•. ìš°ì„ ìˆ¨ìœ„ê°€ ê°€ì¥ ë‚®ì€ íëŠ” FCFS ë˜ëŠ” RRì„ ì‚¬ìš©í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ëª¨ë‘ RRìŠ¤ì¼€ì¤„ë§ì„ ì‚¬ìš©í•œë‹¤. ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ íì¼ìˆ˜ë¡ ì§§ì€ Time Sliceë¥¼ ì£¼ê³  í•´ë‹¹ Time Sliceë‚´ì— ëª» ëë‚´ê²Œ ë  ê²½ìš° ìš°ì„ ìˆœìœ„ê°€ í•œë‹¨ê³„ ë‚®ì€ íë¡œ ë³´ë‚´ì§„ë‹¤. ë°˜ëŒ€ë¡œ ì¼ì •ì‹œê°„ë™ì•ˆ ì‹¤í–‰ë˜ì§€ ëª»í•˜ê³  ë‚¨ì•„ìˆëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ê²½ìš° ìš°ì„ ìˆœìœ„ê°€ í•œë‹¨ê³„ ë†’ì€ íë¡œ ë³´ë‚´ì¤€ë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ìš´ì˜ì²´ì œ","slug":"CS/ìš´ì˜ì²´ì œ","permalink":"https://ckck803.github.io/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/"}],"tags":[]},{"title":"í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬","slug":"computer-science/os/process/scheduling","date":"2021-11-03T16:16:13.000Z","updated":"2024-03-03T05:21:34.701Z","comments":true,"path":"2021/11/04/computer-science/os/process/scheduling/","link":"","permalink":"https://ckck803.github.io/2021/11/04/computer-science/os/process/scheduling/","excerpt":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) ìš´ì˜ì²´ì œ - í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œìŠ¤í…œì´ ì‹¤í–‰í•˜ê³ ì í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì— CPUë¥¼ í• ë‹¹í•˜ëŠ” ê³¼ì • í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœ í”„ë¡œì„¸ìŠ¤ëŠ” Run, Ready, Waitë¼ëŠ” 3ê°€ì§€ ìƒíƒœë¥¼ ê°–ëŠ”ë‹¤. Run CPUê°€ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆëŠ” ìƒíƒœ Ready ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê¸°ìœ„í•´ ì ì‹œ ë©ˆì¶˜ìƒíƒœ(ì‹¤í–‰ê°€ëŠ¥í•œ ìƒíƒœ) Wait ì‹¤í–‰ ë¶ˆê°€ëŠ¥í•œ ìƒíƒœ, ë””ìŠ¤í¬ë¥¼ ì½ê±°ë‚˜ ë¬¸ìë¥¼ ì…ë ¥í•˜ëŠ” ë“±ì˜ ì™¸ë¶€ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œê¹Œì§€ ë©ˆì¶°ìˆëŠ” ìƒíƒœì´ë‹¤. Running Processê°€ ì–´ë–¤ ê°’ì„ ì…ë ¥ ë°›ê¸° ì „ê¹Œì§€ëŠ” Wait ìƒíƒœê°€ ëœë‹¤. ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„ íƒí•œ ê²½ìš° Running í”„ë¡œì„¸ìŠ¤ëŠ” Ready ìƒíƒœê°€ ëœë‹¤. ìŠ¤ì¼€ì¤„ëŸ¬ì—ì˜í•´ Ready ìƒíƒœì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„ íƒí•œ ê²½ìš° ë‹¤ì‹œ Running ìƒíƒœê°€ ëœë‹¤. ê°’ì„ ì…ë ¥ë°›ì„ ê²½ìš° Wait ëœ í”„ë¡œì„¸ìŠ¤ëŠ” Ready ìƒíƒœê°€ ëœë‹¤. ìŠ¤ì¼€ì¤„ë§ì´ë€","text":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) ìš´ì˜ì²´ì œ - í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œìŠ¤í…œì´ ì‹¤í–‰í•˜ê³ ì í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì— CPUë¥¼ í• ë‹¹í•˜ëŠ” ê³¼ì • í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœ í”„ë¡œì„¸ìŠ¤ëŠ” Run, Ready, Waitë¼ëŠ” 3ê°€ì§€ ìƒíƒœë¥¼ ê°–ëŠ”ë‹¤. Run CPUê°€ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆëŠ” ìƒíƒœ Ready ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê¸°ìœ„í•´ ì ì‹œ ë©ˆì¶˜ìƒíƒœ(ì‹¤í–‰ê°€ëŠ¥í•œ ìƒíƒœ) Wait ì‹¤í–‰ ë¶ˆê°€ëŠ¥í•œ ìƒíƒœ, ë””ìŠ¤í¬ë¥¼ ì½ê±°ë‚˜ ë¬¸ìë¥¼ ì…ë ¥í•˜ëŠ” ë“±ì˜ ì™¸ë¶€ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œê¹Œì§€ ë©ˆì¶°ìˆëŠ” ìƒíƒœì´ë‹¤. Running Processê°€ ì–´ë–¤ ê°’ì„ ì…ë ¥ ë°›ê¸° ì „ê¹Œì§€ëŠ” Wait ìƒíƒœê°€ ëœë‹¤. ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„ íƒí•œ ê²½ìš° Running í”„ë¡œì„¸ìŠ¤ëŠ” Ready ìƒíƒœê°€ ëœë‹¤. ìŠ¤ì¼€ì¤„ëŸ¬ì—ì˜í•´ Ready ìƒíƒœì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„ íƒí•œ ê²½ìš° ë‹¤ì‹œ Running ìƒíƒœê°€ ëœë‹¤. ê°’ì„ ì…ë ¥ë°›ì„ ê²½ìš° Wait ëœ í”„ë¡œì„¸ìŠ¤ëŠ” Ready ìƒíƒœê°€ ëœë‹¤. ìŠ¤ì¼€ì¤„ë§ì´ë€ ìŠ¤ì¼€ì¤„ë§ë€ osë‚´ì—ì„œ í”„ë¡œì„¸ìŠ¤ê°€ CPU ìœ„ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ ì œì–´í•´ì£¼ëŠ” í”„ë¡œê·¸ë¨ í”„ë¡œì„¸ìŠ¤ë¥¼ ìŠ¤ì¼€ì¤„ë§í•˜ê¸° ìœ„í•œ queueì—ëŠ” ì„¸ê°€ì§€ ì¢…ë¥˜ê°€ ì¡´ì¬í•œë‹¤. Job Queue : í˜„ì¬ ì‹œìŠ¤í…œ ë‚´ì— ìˆëŠ” ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì˜ ì§‘í•© Ready Queue : í˜„ì¬ ë©”ëª¨ë¦¬ ë‚´ì— ìˆìœ¼ë©´ì„œ CPUë¥¼ ì¡ì•„ì„œ ì‹¤í–‰ë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ì§‘í•© Device Queue : Device I&#x2F;O ì‘ì—…ì„ ëŒ€ê¸°í•˜ê³  ìˆëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ì§‘í•© ì¥ê¸° ìŠ¤ì¼€ì¤„ëŸ¬ (Memoy ì ì¬) ë””ìŠ¤í¬ì—ì„œ í”„ë¡œê·¸ë¨ì„ ì„ íƒí•´ Memory(ë©”ëª¨ë¦¬) ë¡œ ì ì¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤.ìš”ì¦˜ì€ Viratual Memory Management ì˜ ë°œë‹¬ë¡œ ì¥ê¸° ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì˜ë¯¸ê°€ ì—†ì–´ì¡Œë‹¤. í•œì •ëœ ë©”ëª¨ë¦¬ì— ë§ì€ í”„ë¡œì„¸ìŠ¤ë“¤ì´ í•œêº¼ë²ˆì— ì˜¬ë¼ì˜¬ ê²½ìš°, ëŒ€ìš©ëŸ‰ ë©”ëª¨ë¦¬(ë””ìŠ¤í¬)ì— ì„ì‹œë¡œ ì €ì¥ëœë‹¤. ëŒ€ìš©ëŸ‰ ë©”ëª¨ë¦¬ì— ì €ì¥ëœ í”„ë¡œì„¸ìŠ¤ ì¤‘ì—ì„œ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ì— ë©”ë¡œë¦¬ë¥¼ í• ë‹¹í•˜ì—¬ Ready Queue ë¡œ ë³´ë‚¼ì§€ ê²°ì •í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ë©”ëª¨ë¦¬ì™€ ë””ìŠ¤í¬ ì‚¬ì´ì˜ ìŠ¤ì¼€ì¤„ë§ì„ ë‹´ë‹¹í•œë‹¤. í”„ë¡œì„¸ìŠ¤ì— Memory ë° ê°ì¢…ë¦¬ì†ŒìŠ¤ë¥¼ í• ë‹¹í•œë‹¤. ë‹¤ì¤‘ í”„ë¡œê·¸ë˜ë° ì œì–´ ë‹¨ê¸° ìŠ¤ì¼€ì¤„ëŸ¬ (Cpu í• ë‹¹) í”„ë¡œì„¸ìŠ¤ì— CPU ë¥¼ í• ë‹¹í•´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ì—­í• ì„ í•œë‹¤. Ready Queueì— ì¡´ì¬í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ ì¤‘ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë¥¼ runí• ì§€ ê²°ì •í•œë‹¤. cpuì™€ ë©”ëª¨ë¦¬ ì‚¬ì´ì˜ ìŠ¤ì¼€ì¤„ë§ì„ ë‹´ë‹¹í•œë‹¤. í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœ : Ready -&gt; Run -&gt; Wait -&gt; Ready ì¤‘ê¸° ìŠ¤ì¼€ì¤„ëŸ¬ (ë©”ëª¨ë¦¬ ê´€ë¦¬) ì‹œìŠ¤í…œ ì„±ëŠ¥ì €í•˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë©”ëª¨ë¦¬ì— ì ì¬ëœ í”„ë¡œì„¸ìŠ¤ì˜ ìˆ˜ ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì ˆí•˜ê¸° ìœ„í•œ ìŠ¤ì¼€ì¤„ëŸ¬ í”„ë¡œì„¸ìŠ¤ì—ê²Œì„œ memoryë¥¼ deallocateí•œë‹¤. í˜„ ì‹œìŠ¤í…œì—ì„œ ë©”ëª¨ë¦¬ì— ë„ˆë¬´ ë§ì€ í”„ë¡œê·¸ë¨ì´ ë™ì‹œì— ì˜¬ë¼ê°€ëŠ” ê²ƒì„ ì¡°ì ˆí•œë‹¤. ë‹¤ì¤‘ í”„ë¡œê·¸ë˜ë°ì˜ ì •ë„ë¥¼ ì™„í™” í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœ : Ready -&gt; Suspended","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ìš´ì˜ì²´ì œ","slug":"CS/ìš´ì˜ì²´ì œ","permalink":"https://ckck803.github.io/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/"}],"tags":[]},{"title":"í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­","slug":"computer-science/os/process/process-memory","date":"2021-11-03T15:16:13.000Z","updated":"2024-03-03T05:21:24.460Z","comments":true,"path":"2021/11/04/computer-science/os/process/process-memory/","link":"","permalink":"https://ckck803.github.io/2021/11/04/computer-science/os/process/process-memory/","excerpt":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) í”„ë¡œì„¸ìŠ¤ì˜ Address Space(ì£¼ì†Œê³µê°„) í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ë©´ Process Address Spaceê°€ í• ë‹¹ëœë‹¤. Process Address SpaceëŠ” Text(Code), Data, Stack, Head 4ê°€ì§€ ì˜ì—­ìœ¼ë¡œ êµ¬ë¶„ëœë‹¤. í”„ë¡œì„¸ìŠ¤ê°€ ìƒí–‰ë˜ë©´ ê° í”„ë¡œì„¸ìŠ¤ëŠ” ìš´ì˜ì²´ì œë¡œë¶€í„° ë…ë¦½ëœ ë©”ëª¨ë¦¬ì˜ì—­ì„ í• ë‹¹ ë°›ìŠµë‹ˆë‹¤. ë•Œë¬¸ì— í•œ í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ì— ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ì€ Code, Data, Heap, Stack 4ê°€ì§€ ì˜ì—­ìœ¼ë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤. Text(Code) í”„ë¡œê·¸ë¨ ì½”ë“œê°€ ì €ì¥ë˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ë•Œ í• ë‹¹ ëë‹¤ê°€ í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œí•˜ë©´ í•´ì œëœë‹¤. (ê³ ì •ëœ ì˜ì—­) Read Only Data","text":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) í”„ë¡œì„¸ìŠ¤ì˜ Address Space(ì£¼ì†Œê³µê°„) í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ë©´ Process Address Spaceê°€ í• ë‹¹ëœë‹¤. Process Address SpaceëŠ” Text(Code), Data, Stack, Head 4ê°€ì§€ ì˜ì—­ìœ¼ë¡œ êµ¬ë¶„ëœë‹¤. í”„ë¡œì„¸ìŠ¤ê°€ ìƒí–‰ë˜ë©´ ê° í”„ë¡œì„¸ìŠ¤ëŠ” ìš´ì˜ì²´ì œë¡œë¶€í„° ë…ë¦½ëœ ë©”ëª¨ë¦¬ì˜ì—­ì„ í• ë‹¹ ë°›ìŠµë‹ˆë‹¤. ë•Œë¬¸ì— í•œ í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ì— ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ì€ Code, Data, Heap, Stack 4ê°€ì§€ ì˜ì—­ìœ¼ë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤. Text(Code) í”„ë¡œê·¸ë¨ ì½”ë“œê°€ ì €ì¥ë˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ë•Œ í• ë‹¹ ëë‹¤ê°€ í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œí•˜ë©´ í•´ì œëœë‹¤. (ê³ ì •ëœ ì˜ì—­) Read Only Data í”„ë¡œê·¸ë¨ì˜ ì „ì—­ë³€ìˆ˜, ì •ì ë³€ìˆ˜ê°€ ì €ì¥ë˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ë•Œ í• ë‹¹ ëë‹¤ê°€ í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œí•˜ë©´ í•´ì œëœë‹¤. (ê³ ì •ëœ ì˜ì—­) Read&#x2F;Write Stack í•¨ìˆ˜ í˜¸ì¶œì‹œ í• ë‹¹ëë‹¤ê°€ ì¢…ë£Œì‹œ í•´ì œë˜ëŠ” ë©”ëª¨ë¦¬ì˜ì—­ ì§€ì—­ë³€ìˆ˜ì™€ ë§¤ê²Œë³€ìˆ˜ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ë©”ëª¨ë¦¬ ì˜ì—­ í•¨ìˆ˜ í˜¸ì¶œê³¼ í•¨ê»˜ í• ë‹¹ ëë‹¤ê°€ í•¨ìˆ˜ í˜¸ì¶œì´ ëë‚˜ë©´ í•´ì œëœë‹¤. Thread ë³„ë¡œ ìƒì„±ë˜ëŠ” ì˜ì—­ì´ë‹¤. ë©”ëª¨ë¦¬ê°€ ë†’ì€ ì£¼ì†Œì—ì„œ ë‚®ì€ ì£¼ì†Œë¡œ í• ë‹¹ëœë‹¤ Read&#x2F;Write Heap ë™ì  í• ë‹¹ì„ ìœ„í•œ ë©”ëª¨ë¦¬ ì˜ì—­ Run Time(ëŸ°íƒ€ì„)ì— í¬ê¸°ê°€ ê²°ì •ë˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ Stackê³¼ëŠ” ë°˜ëŒ€ë¡œ ë©”ëª¨ë¦¬ê°€ ë‚®ì€ ì£¼ì†Œì—ì„œ ë†’ì€ ì£¼ì†Œë¡œ í• ë‹¹ëœë‹¤. Stack ê³¼ Heap ì˜ ë©”ëª¨ë¦¬ í• ë‹¹ ë°©ì‹ìŠ¤íƒ ì˜ì˜ê³¼ í™ ì˜ì—­ì€ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì„œë¡œ ë°˜ëŒ€ë¡œ ë©”ëª¨ë¦¬ë¥¼ í•­ë‹¹í•©ë‹ˆë‹¤. ë§Œì•½, ìŠ¤íƒì´ë‚˜ í™ì—ì„œ ì£¼ì–´ì§„ ì˜ì—­ì„ ë²—ì–´ë‚˜ ìƒëŒ€ë°© ë©”ëª¨ë¦¬ ì˜ì—­ì„ ì¹¨ë²Œí•˜ê²Œ ë˜ë©´ Overflow(ì˜¤ë²„ í”Œë¡œìš°) ë¼ í•©ë‹ˆë‹¤. í™ì´ ìŠ¤íƒì„ ì¹¨ë²”í•˜ëŠ” ê²½ìš°ë¥¼ Heap Overflow(í™ ì˜¤ë²„ í”Œë¡œìš°) ë¼ í•˜ê³ , ìŠ¤íƒì´ í™ì„ ì¹¨ë²”í•˜ëŠ” ê²½ìš°ë¥¼ Stack Overflow(ìŠ¤íƒ ì˜¤ë²„ í”Œë¡œìš°) ë¼ í•œë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ìš´ì˜ì²´ì œ","slug":"CS/ìš´ì˜ì²´ì œ","permalink":"https://ckck803.github.io/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/"}],"tags":[]},{"title":"Process (í”„ë¡œì„¸ìŠ¤)","slug":"computer-science/os/process/process","date":"2021-11-03T15:16:13.000Z","updated":"2024-03-03T05:21:27.659Z","comments":true,"path":"2021/11/04/computer-science/os/process/process/","link":"","permalink":"https://ckck803.github.io/2021/11/04/computer-science/os/process/process/","excerpt":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) í”„ë¡œì„¸ìŠ¤ì˜ ì •ì˜ Process(í”„ë¡œì„¸ìŠ¤) ëŠ” í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œê·¸ë¨ì„ ì˜ë¯¸í•œë‹¤. Process Control Block (í”„ë¡œì„¸ìŠ¤ ì œì–´ ë¸”ë¡) ìš´ì˜ì²´ì œ(OS) ê°€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì œì–´ í•˜ê¸° ìœ„í•´ ì •ë³´ë¥¼ ì €ì¥í•´ ë†“ì€ ê³³, í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœ ì •ë³´ ë¥¼ ì €ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°ë‹¤. í”„ë¡œì„¸ìŠ¤ ìƒíƒœ ê´€ë¦¬ ì™€ Context Switch(ë¬¸ë§¥ êµí™˜) ì„ ìœ„í•´ í•„ìš”í•˜ë‹¤. í”„ë¡œì„¸ìŠ¤ ID (PID) í”„ë¡œì„¸ìŠ¤ì˜ ê³ ìœ  ë²ˆí˜¸ í”„ë¡œì„¸ìŠ¤ í˜„ì¬ ìƒíƒœ ìƒì„±, ì¤€ë¹„, ì‹¤í–‰, ëŒ€ê¸°, ì†Œë©¸ë“± í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœë¥¼ ì €ì¥í•œë‹¤. í”„ë¡œì„¸ìŠ¤ Counter(PC) ë‹¤ìŒ ì‹¤í–‰ë  ëª…ë ¹ì–´ì˜ ì£¼ì†Œë¥¼ ì €ì¥í•˜ëŠ” Counter CPUì—ì„œëŠ” PCë¥¼ í†µí•´ í”„ë¡œì„¸ìŠ¤ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤. Process ìƒì„± ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ëŠ” í˜„ì¬ ì‹¤í–‰í•˜ê³  ìˆëŠ” í”„ë¡œì„¸ìŠ¤ê°€ í”„ë¡œì„¸ìŠ¤ ìƒì„± System Callì„ ì‹¤í–‰í•  ë•Œë§Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì£¼ìš” eventë“¤","text":"ëª©ì°¨ Thread Safe ì“°ë ˆë“œì™€ ë©”ëª¨ë¦¬êµ¬ì¡° ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœì™€ ìŠ¤ì¼€ì¤„ëŸ¬ Inter Process Communication(í”„ë¡œì„¸ìŠ¤ê°„ì˜ í†µì‹ ) í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì˜ì—­ Process (í”„ë¡œì„¸ìŠ¤) í”„ë¡œì„¸ìŠ¤ì˜ ì •ì˜ Process(í”„ë¡œì„¸ìŠ¤) ëŠ” í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œê·¸ë¨ì„ ì˜ë¯¸í•œë‹¤. Process Control Block (í”„ë¡œì„¸ìŠ¤ ì œì–´ ë¸”ë¡) ìš´ì˜ì²´ì œ(OS) ê°€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì œì–´ í•˜ê¸° ìœ„í•´ ì •ë³´ë¥¼ ì €ì¥í•´ ë†“ì€ ê³³, í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœ ì •ë³´ ë¥¼ ì €ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°ë‹¤. í”„ë¡œì„¸ìŠ¤ ìƒíƒœ ê´€ë¦¬ ì™€ Context Switch(ë¬¸ë§¥ êµí™˜) ì„ ìœ„í•´ í•„ìš”í•˜ë‹¤. í”„ë¡œì„¸ìŠ¤ ID (PID) í”„ë¡œì„¸ìŠ¤ì˜ ê³ ìœ  ë²ˆí˜¸ í”„ë¡œì„¸ìŠ¤ í˜„ì¬ ìƒíƒœ ìƒì„±, ì¤€ë¹„, ì‹¤í–‰, ëŒ€ê¸°, ì†Œë©¸ë“± í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœë¥¼ ì €ì¥í•œë‹¤. í”„ë¡œì„¸ìŠ¤ Counter(PC) ë‹¤ìŒ ì‹¤í–‰ë  ëª…ë ¹ì–´ì˜ ì£¼ì†Œë¥¼ ì €ì¥í•˜ëŠ” Counter CPUì—ì„œëŠ” PCë¥¼ í†µí•´ í”„ë¡œì„¸ìŠ¤ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤. Process ìƒì„± ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ëŠ” í˜„ì¬ ì‹¤í–‰í•˜ê³  ìˆëŠ” í”„ë¡œì„¸ìŠ¤ê°€ í”„ë¡œì„¸ìŠ¤ ìƒì„± System Callì„ ì‹¤í–‰í•  ë•Œë§Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì£¼ìš” eventë“¤ System initialization ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ í”„ë¡œì„¸ìŠ¤ ìƒì„± System Call ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œê²½ìš° ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•˜ë¼ëŠ” ì‚¬ìš©ì ìš”ì²­ ë°°ì¹˜ ì‘ì—…ì˜ ì‹œì‘ Processì˜ ì¢…ë£Œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œì‹œí‚¤ëŠ” ë°©ë²•ì€ í¬ê²Œ ìë°œì ì¸ ê²½ìš° ì™€ ë¹„ ìë°œì ì¸ ê²½ìš° ë¡œ ë‚˜ë‰œë‹¤. ìë°œì ì¸ ê²½ìš° ì •ìƒì ì¸ ì¢…ë£Œ ì—ëŸ¬ì—ì˜í•œ ì¢…ë£Œ ë¹„ìë°œì ì´ ê²½ìš° ì¹˜ëª…ì ì¸ ì˜¤ë¥˜ë¡œ ì¸í•œ ì¢…ë£Œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¥¼ ì£½ì¸ê²½ìš°(kill ëª…ë ¹ì–´)","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ìš´ì˜ì²´ì œ","slug":"CS/ìš´ì˜ì²´ì œ","permalink":"https://ckck803.github.io/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/"}],"tags":[]},{"title":"Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸°","slug":"spring/spring-rest/rest-api-05-swagger","date":"2021-11-03T14:47:05.000Z","updated":"2024-02-26T16:14:16.235Z","comments":true,"path":"2021/11/03/spring/spring-rest/rest-api-05-swagger/","link":"","permalink":"https://ckck803.github.io/2021/11/03/spring/spring-rest/rest-api-05-swagger/","excerpt":"ëª©ì°¨ Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Spring Rest API - ExceptionHandling Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸° Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸° Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„± Spring Boot Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Swagger ë€ Open API Specification(OAS) ë¥¼ ìœ„í•œ í”„ë ˆì„ì›Œí¬ë‹¤. ê°œë°œìê°€ REST API ì„œë¹„ìŠ¤ë¥¼ ì„¤ê³„, ë¹Œë“œ, ë¬¸ì„œí™” í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤. Swaggerë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì˜ì¡´ì„± ì¶”ê°€í•˜ê¸°implementation &quot;io.springfox:springfox-boot-starter:3.0.0&quot; Swaggerë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì • ì¶”ê°€ Docket Swagger ì„¤ì •ì˜ í•µì‹¬ì´ ë˜ëŠ” Bean apis ApiSelectorBuilder ë¥¼ ìƒì„± ëª…ì‹œëœ Packageë‚˜ ì–´ë…¸í…Œì´ì…˜ë¥¼ ëŒ€ìƒìœ¼ë¡œ Swagger API ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤. RequestHandlerSelectors í´ë˜ìŠ¤ ë©”ì†Œë“œë¥¼ í†µí•´ ì„¤ì •í•œë‹¤. any : ì „ë¶€ basePackage : ëª…ì‹œëœ íŒ¨í‚¤ì§€ë¥¼ ëŒ€ìƒìœ¼ë¡œ Swagger API ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤. withClassAnnotation : ëª…ì‹œëœ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ Classë§Œ Swagger API ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤. withMethodAnnotation : ëª…ì‹œëœ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ Methodë§Œ Swagger API ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤. paths apis ì—ì„œ ëª…ì‹œëœ ëŒ€ìƒì—ì„œ paths ì¡°ê±´ì— ë§ëŠ” ê²ƒë§Œ Swagger API ë¬¸ì„œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ í•„í„°ë§ í•œë‹¤. Open API 3.0 ì‚¬ìš©í•œ ë°©ë²•","text":"ëª©ì°¨ Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Spring Rest API - ExceptionHandling Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸° Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸° Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„± Spring Boot Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Swagger ë€ Open API Specification(OAS) ë¥¼ ìœ„í•œ í”„ë ˆì„ì›Œí¬ë‹¤. ê°œë°œìê°€ REST API ì„œë¹„ìŠ¤ë¥¼ ì„¤ê³„, ë¹Œë“œ, ë¬¸ì„œí™” í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤. Swaggerë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì˜ì¡´ì„± ì¶”ê°€í•˜ê¸°implementation &quot;io.springfox:springfox-boot-starter:3.0.0&quot; Swaggerë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì • ì¶”ê°€ Docket Swagger ì„¤ì •ì˜ í•µì‹¬ì´ ë˜ëŠ” Bean apis ApiSelectorBuilder ë¥¼ ìƒì„± ëª…ì‹œëœ Packageë‚˜ ì–´ë…¸í…Œì´ì…˜ë¥¼ ëŒ€ìƒìœ¼ë¡œ Swagger API ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤. RequestHandlerSelectors í´ë˜ìŠ¤ ë©”ì†Œë“œë¥¼ í†µí•´ ì„¤ì •í•œë‹¤. any : ì „ë¶€ basePackage : ëª…ì‹œëœ íŒ¨í‚¤ì§€ë¥¼ ëŒ€ìƒìœ¼ë¡œ Swagger API ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤. withClassAnnotation : ëª…ì‹œëœ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ Classë§Œ Swagger API ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤. withMethodAnnotation : ëª…ì‹œëœ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ Methodë§Œ Swagger API ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤. paths apis ì—ì„œ ëª…ì‹œëœ ëŒ€ìƒì—ì„œ paths ì¡°ê±´ì— ë§ëŠ” ê²ƒë§Œ Swagger API ë¬¸ì„œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ í•„í„°ë§ í•œë‹¤. Open API 3.0 ì‚¬ìš©í•œ ë°©ë²•SwaggerConfig.java @Configurationpublic class SwaggerConfig &#123; @Bean public Docket api() &#123; // Open Api Spec 3.0 return new Docket(DocumentationType.OAS_30) .select() .apis(RequestHandlerSelectors.any()) .**paths**(PathSelectors.any()) .build(); &#125;&#125; Swagger 2.0 ì‚¬ìš©í•œ ë°©ë²•@Beanpublic Docket api()&#123; return new Docket(DocumentationType.SWAGGER_2) .select() .apis(RequestHandlerSelectors.any()) .paths(PathSelectors.any()) .build();&#125; ì ‘ì† URLSwagger UI - http://localhost:8080/swagger-ui/index.html Swagger ì •ë³´ ì„¤ì •í•˜ê¸° Swagger APIì˜ ì •ë³´ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ ApiInfo ë¥¼ ì œê³µí•œë‹¤. ApiInfoBuilder ë¥¼ ì´ìš©í•´ title, description, version, license ë“±ì„ ì„¤ì •í•œ í›„ ApiInfo ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. apiInfo ì œëª©, ì„¤ëª… ë“± Swagger API ë¬¸ì„œì— ëŒ€í•œ ì •ë³´ë¥¼ ì„¤ì •í•œë‹¤. @Beanpublic Docket api() &#123; return new Docket(DocumentationType.OAS_30) // open api spec 3.0 .select() .apis(RequestHandlerSelectors.any()) .paths(PathSelectors.any()) .build() .apiInfo(apiInfo());&#125;private ApiInfo apiInfo() &#123; return new ApiInfoBuilder() .title(&quot;Sample Swagger Title&quot;) .description(&quot;sample swagger description&quot;) .version(&quot;1.0&quot;) .build();&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Rest","slug":"Spring/Spring-Rest","permalink":"https://ckck803.github.io/categories/Spring/Spring-Rest/"}],"tags":[]},{"title":"ê°ì²´ ì§€í–¥ 3ìš”ì†Œ","slug":"computer-science/programming-language/object/object","date":"2021-10-28T14:16:32.000Z","updated":"2024-11-28T13:59:37.888Z","comments":true,"path":"2021/10/28/computer-science/programming-language/object/object/","link":"","permalink":"https://ckck803.github.io/2021/10/28/computer-science/programming-language/object/object/","excerpt":"ì»´íŒŒì¼ ì–¸ì–´, ì¸í„°í”„ë¦¬í„° ì–¸ì–´, í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ ê°ì²´ ì§€í–¥ 3ìš”ì†Œ ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID ê°ì²´ ì§€í–¥ 3ìš”ì†Œ1. ìº¡ìŠí™” ì •ë³´ì˜ ì€ë‹‰ ê´€ë ¨ì´ ìˆëŠ” ë³€ìˆ˜ì™€ í•¨ìˆ˜ë¥¼ ë¬¶ëŠ” ì‘ì—… ê°ì²´ëŠ” ì ‘ê·¼ì œì–´ìë¥¼ ì´ìš©í•´ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì •ë³´ ì™€ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ì •ë³´ ë¥¼ ë¶„ë¦¬í•´ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. private : í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥ public : í´ë˜ìŠ¤ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥ protected : ìê¸° í´ë˜ìŠ¤ í˜¹ì€ ìƒì† ë°›ì€ í´ë˜ìŠ¤ì—ì„œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥ 2. ìƒì† ìì›ì˜ ìƒì† ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ëª¨ë“  ìì› (Field, Method) ë¥¼ ë¬¼ë ¤ ë°›ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. í•˜ë‚˜ì˜ ë¶€ëª¨í´ë˜ìŠ¤ëŠ” ì—¬ëŸ¬ê°œì˜ ìì‹ í´ë˜ìŠ¤ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì§€ë§Œ ê·¸ ë°˜ëŒ€ëŠ” ì•ˆëœë‹¤. ê°œë°œìëŠ” ìƒì†ì„ í†µí•´ ë¶ˆí•„ìš”í•œ ì½”ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆê³  ê³µí†µ ìì› ê´€ë¦¬ë¥¼ ì§‘ì¤‘ì‹œí‚¬ ìˆ˜ ìˆë‹¤. (ìœ ì§€ ë³´ìˆ˜ê°€ í¸ë¦¬í•˜ë‹¤.) 3. ë‹¤í˜•ì„± ì—¬ëŸ¬ê°€ì§€ í˜•íƒœë¥¼ ê°€ì§ˆ ìˆ˜ ìˆê²Œ í•˜ëŠ” íŠ¹ì„±ëŒ€í‘œì ìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë”© ê³¼ ì˜¤ë²„ë¡œë”© ì´ ìˆë‹¤.","text":"ì»´íŒŒì¼ ì–¸ì–´, ì¸í„°í”„ë¦¬í„° ì–¸ì–´, í•˜ì´ë¸Œë¦¬ë“œ ì–¸ì–´ ê°ì²´ ì§€í–¥ 3ìš”ì†Œ ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID ê°ì²´ ì§€í–¥ 3ìš”ì†Œ1. ìº¡ìŠí™” ì •ë³´ì˜ ì€ë‹‰ ê´€ë ¨ì´ ìˆëŠ” ë³€ìˆ˜ì™€ í•¨ìˆ˜ë¥¼ ë¬¶ëŠ” ì‘ì—… ê°ì²´ëŠ” ì ‘ê·¼ì œì–´ìë¥¼ ì´ìš©í•´ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì •ë³´ ì™€ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ì •ë³´ ë¥¼ ë¶„ë¦¬í•´ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. private : í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥ public : í´ë˜ìŠ¤ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥ protected : ìê¸° í´ë˜ìŠ¤ í˜¹ì€ ìƒì† ë°›ì€ í´ë˜ìŠ¤ì—ì„œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥ 2. ìƒì† ìì›ì˜ ìƒì† ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ëª¨ë“  ìì› (Field, Method) ë¥¼ ë¬¼ë ¤ ë°›ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. í•˜ë‚˜ì˜ ë¶€ëª¨í´ë˜ìŠ¤ëŠ” ì—¬ëŸ¬ê°œì˜ ìì‹ í´ë˜ìŠ¤ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì§€ë§Œ ê·¸ ë°˜ëŒ€ëŠ” ì•ˆëœë‹¤. ê°œë°œìëŠ” ìƒì†ì„ í†µí•´ ë¶ˆí•„ìš”í•œ ì½”ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆê³  ê³µí†µ ìì› ê´€ë¦¬ë¥¼ ì§‘ì¤‘ì‹œí‚¬ ìˆ˜ ìˆë‹¤. (ìœ ì§€ ë³´ìˆ˜ê°€ í¸ë¦¬í•˜ë‹¤.) 3. ë‹¤í˜•ì„± ì—¬ëŸ¬ê°€ì§€ í˜•íƒœë¥¼ ê°€ì§ˆ ìˆ˜ ìˆê²Œ í•˜ëŠ” íŠ¹ì„±ëŒ€í‘œì ìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë”© ê³¼ ì˜¤ë²„ë¡œë”© ì´ ìˆë‹¤. ì˜¤ë²„ë¼ì´ë”© ê¸°ì¡´ì˜ ê¸°ëŠ¥ì„ ë®ì–´ì“°ê³  ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë°©ì‹ interface Sample&#123; public void hello(String str);&#125;class SampleImpl implements Sample&#123; @Override public void hello(String str)&#123; System.out.println(&quot;Hello &quot; + srt); &#125;&#125;public class Main&#123; public static void main(String args[])&#123; Sample sample = new SampleImpl(); sample.hello(&quot;world!&quot;); &#125;&#125; ì˜¤ë²„ë¡œë”© ê°ì²´ë‚´ ë™ì¼í•œ ì´ë¦„ ì„ ê°€ì§„ Method ë¥¼ ì—¬ëŸ¬ê°œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” íŠ¹ì„±ë‹¨, Paramater ì¢…ë¥˜ ë‚˜ ê°œìˆ˜ ê°€ ë‹¬ë¼ì•¼ í•œë‹¤. public class Main &#123; public void method()&#123; System.out.println(&quot;Hello world!&quot;); &#125; public void method(String str)&#123; System.out.println(&quot;Hello world! &quot; + str); &#125; public void method(int value)&#123; System.out.println(&quot;Hello world! &quot; + value); &#125; public void method(int value, String str)&#123; System.out.println(&quot;Hello world! &quot; + value + str); &#125;&#125;","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Develop Lanuage","slug":"CS/Develop-Lanuage","permalink":"https://ckck803.github.io/categories/CS/Develop-Lanuage/"}],"tags":[]},{"title":"Spring Security - UsernamePasswordAuthenticationFilter & AbstractAuthenticationProcessingFilter","slug":"spring/spring-security/security/authentication/usernamepasswordAuthenticationFilter","date":"2021-10-26T13:25:35.000Z","updated":"2024-02-26T16:25:18.967Z","comments":true,"path":"2021/10/26/spring/spring-security/security/authentication/usernamepasswordAuthenticationFilter/","link":"","permalink":"https://ckck803.github.io/2021/10/26/spring/spring-security/security/authentication/usernamepasswordAuthenticationFilter/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://spring.io/guides/topicals/spring-security-architecture AbstractAuthenticationProcessingFilter ì¸ì¦ ê³¼ì • AbstractAuthenticationProcessingFilter ëŠ” Spring Security Filterì—ì„œ ì¸ì¦ ê³¼ì •ì„ êµ¬í˜„í•œ ì¶”ìƒ Class ë‹¤. ë¡œê·¸ì¸ì„ ì§„í–‰í•˜ëŠ” URLë¡œ ë¡œê·¸ì¸ ìš”ì²­ì´ ë“¤ì–´ì™”ëŠ”ì§€ í™•ì¸í•œë‹¤. ìš”ì²­ì— ëŒ€í•œ ì¸ì¦ì„ ì§„í–‰í•˜ê³  Authentication ê°ì²´ë¥¼ ë°˜í™˜ ë°›ëŠ”ë‹¤. Session ì „ëµì— ë”°ë¼ ì ì ˆí•œ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. (Session Id ë³€ê²½) ì¸ì¦ì´ ì™„ë£Œ ëìœ¼ë©´ Authentication ê°ì²´ë¥¼ SecurityContextì— ì €ì¥í•œë‹¤. AbstractAuthenticationProcessingFilter.java @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123; doFilter((HttpServletRequest)request, (HttpServletResponse)response, chain);&#125;private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; // ë¡œê·¸ì¸ì„ ì§„í–‰í•˜ëŠ” URLë¡œ ë¡œê·¸ì¸ ìš”ì²­ì´ ë“¤ì–´ì™”ëŠ”ì§€ í™•ì¸í•œë‹¤. if (!requiresAuthentication(request, response)) &#123; chain.doFilter(request, response); return; &#125; try &#123; // ì¸ì¦ì„ ì§„í–‰í•˜ê³  ìƒì„±ëœ Authentication ê°ì²´ë¥¼ ë°˜í™˜ë°›ëŠ”ë‹¤. // AbstractAuthenticationProcessingFilter ë¥¼ ìƒì†ë°›ì€ Classì— ì˜í•´ êµ¬í˜„ë˜ëŠ” ë¶€ë¶„ Authentication authenticationResult = attemptAuthentication(request, response); if (authenticationResult == null) &#123; return; &#125; // Sessionì— ëŒ€í•œ ì„¤ì •ì„ í•œë‹¤. Session Idë¥¼ ë³€ê²½ this.sessionStrategy.onAuthentication(authenticationResult, request, response); // Authentication success if (this.continueChainBeforeSuccessfulAuthentication) &#123; chain.doFilter(request, response); &#125; // ì¸ì¦ í›„ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. successfulAuthentication(request, response, chain, authenticationResult); &#125; catch (InternalAuthenticationServiceException failed) &#123; this.logger.error(&quot;An internal error occurred while trying to authenticate the user.&quot;, failed); unsuccessfulAuthentication(request, response, failed); &#125; catch (AuthenticationException ex) &#123; // Authentication failed unsuccessfulAuthentication(request, response, ex); &#125;&#125;","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://spring.io/guides/topicals/spring-security-architecture AbstractAuthenticationProcessingFilter ì¸ì¦ ê³¼ì • AbstractAuthenticationProcessingFilter ëŠ” Spring Security Filterì—ì„œ ì¸ì¦ ê³¼ì •ì„ êµ¬í˜„í•œ ì¶”ìƒ Class ë‹¤. ë¡œê·¸ì¸ì„ ì§„í–‰í•˜ëŠ” URLë¡œ ë¡œê·¸ì¸ ìš”ì²­ì´ ë“¤ì–´ì™”ëŠ”ì§€ í™•ì¸í•œë‹¤. ìš”ì²­ì— ëŒ€í•œ ì¸ì¦ì„ ì§„í–‰í•˜ê³  Authentication ê°ì²´ë¥¼ ë°˜í™˜ ë°›ëŠ”ë‹¤. Session ì „ëµì— ë”°ë¼ ì ì ˆí•œ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. (Session Id ë³€ê²½) ì¸ì¦ì´ ì™„ë£Œ ëìœ¼ë©´ Authentication ê°ì²´ë¥¼ SecurityContextì— ì €ì¥í•œë‹¤. AbstractAuthenticationProcessingFilter.java @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123; doFilter((HttpServletRequest)request, (HttpServletResponse)response, chain);&#125;private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; // ë¡œê·¸ì¸ì„ ì§„í–‰í•˜ëŠ” URLë¡œ ë¡œê·¸ì¸ ìš”ì²­ì´ ë“¤ì–´ì™”ëŠ”ì§€ í™•ì¸í•œë‹¤. if (!requiresAuthentication(request, response)) &#123; chain.doFilter(request, response); return; &#125; try &#123; // ì¸ì¦ì„ ì§„í–‰í•˜ê³  ìƒì„±ëœ Authentication ê°ì²´ë¥¼ ë°˜í™˜ë°›ëŠ”ë‹¤. // AbstractAuthenticationProcessingFilter ë¥¼ ìƒì†ë°›ì€ Classì— ì˜í•´ êµ¬í˜„ë˜ëŠ” ë¶€ë¶„ Authentication authenticationResult = attemptAuthentication(request, response); if (authenticationResult == null) &#123; return; &#125; // Sessionì— ëŒ€í•œ ì„¤ì •ì„ í•œë‹¤. Session Idë¥¼ ë³€ê²½ this.sessionStrategy.onAuthentication(authenticationResult, request, response); // Authentication success if (this.continueChainBeforeSuccessfulAuthentication) &#123; chain.doFilter(request, response); &#125; // ì¸ì¦ í›„ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. successfulAuthentication(request, response, chain, authenticationResult); &#125; catch (InternalAuthenticationServiceException failed) &#123; this.logger.error(&quot;An internal error occurred while trying to authenticate the user.&quot;, failed); unsuccessfulAuthentication(request, response, failed); &#125; catch (AuthenticationException ex) &#123; // Authentication failed unsuccessfulAuthentication(request, response, ex); &#125;&#125; ìš”ì²­ì´ ë¡œê·¸ì¸ì„ ì§„í–‰í•˜ëŠ” URLë¡œ ë¡œê·¸ì¸ ìš”ì²­ì´ ë“¤ì–´ì™”ëŠ”ì§€ í™•ì¸protected boolean requiresAuthentication(HttpServletRequest request, HttpServletResponse response) &#123; // ìš”ì²­ URLì´ ë¡œê·¸ì¸ì„ ì§„í–‰í•˜ëŠ” URLê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. if (this.requiresAuthenticationRequestMatcher.matches(request)) &#123; return true; &#125; if (this.logger.isTraceEnabled()) &#123; this.logger .trace(LogMessage.format(&quot;Did not match request to %s&quot;, this.requiresAuthenticationRequestMatcher)); &#125; return false;&#125; Usernameê³¼ Passwordë¥¼ ì´ìš©í•œ ì¸ì¦ ì§„í–‰ - UsernamePasswordAuthenticationFilter AbstractAuthenticationProcessingFilterë¥¼ ìƒì†í•œ ê°ì²´ë¡œ Usernameê³¼ Passwordë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” Filter ë‹¤.ì¸ì¦ ê³¼ì •ì—ì„œ Authentication ì„ êµ¬í˜„í•œ UsernamePasswordAuthenticationToken ì„ ì‚¬ìš©í•œë‹¤. username, passwordë¥¼ ì´ìš©í•´ UsernamePasswordAuthenticationToken ê°ì²´ë¥¼ ìƒì„± ìƒì„±ëœ UsernamePasswordAuthenticationToken ê°ì²´ë¥¼ ProviderManager ë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰ ProviderManagerëŠ” DaoAuthenticationProvider ë¥¼ ì´ìš©í•´ UsernamePasswordAuthenticationToken ê°ì²´ ì¸ì¦ì„ ì§„í–‰ ì¸ì¦ì— ëŒ€í•œ ì ì ˆí•œ Session ì²˜ë¦¬ë¥¼ í•œ í›„ ìƒì„±ëœ Authentication ê°ì²´ë¥¼ SecurityContextì— ì €ì¥í•œë‹¤. UsernamePasswordAuthenticationFilter.java @Overridepublic Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException &#123; if (this.postOnly &amp;&amp; !request.getMethod().equals(&quot;POST&quot;)) &#123; throw new AuthenticationServiceException(&quot;Authentication method not supported: &quot; + request.getMethod()); &#125; // reqeustë¡œë¶€í„° usernameì„ ê°€ì ¸ì˜¨ë‹¤. String username = obtainUsername(request); username = (username != null) ? username : &quot;&quot;; username = username.trim(); // requestë¡œë¶€í„° passwordë¥¼ ê°€ì ¸ì˜¨ë‹¤. String password = obtainPassword(request); password = (password != null) ? password : &quot;&quot;; // ì¸ì¦ ê°ì²´ ìƒì„± UsernamePasswordAuthenticationToken authRequest = new UsernamePasswordAuthenticationToken(username, password); // AuthenticationManagerë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•œë‹¤. setDetails(request, authRequest); return this.getAuthenticationManager().authenticate(authRequest);&#125; ì¸ì¦ ì™„ë£Œ í›„ ì‘ì—… ì¸ì¦ì´ ì™„ë£Œëœ í›„ ì‘ì—…ìœ¼ë¡œëŠ” Sessionì— ëŒ€í•œ ì²˜ë¦¬ ì™€ SecurityContextì— Authentication ê°ì²´ë¥¼ ë“±ë¡í•˜ëŠ” ì¼ì´ ë‚¨ì•„ ìˆë‹¤. Session ì²˜ë¦¬ - AbstractSessionFixationProtectionStrategy SessionAuthenticationStrategy ë¥¼ êµ¬í˜„í•œ ì¶”ìƒ í´ë˜ìŠ¤ë©°, Session ê³ ì • ê³µê²© ì„ í”¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. AbstractSessionFixationProtectionStrategy.java @Overridepublic void onAuthentication(Authentication authentication, HttpServletRequest request, HttpServletResponse response) &#123; boolean hadSessionAlready = request.getSession(false) != null; // Sessionì´ ì—†ê³  alwaysCreateSession ì˜µì…˜ì´ falseì¼ ê²½ìš°ì—ëŠ” ê·¸ëƒ¥ ë°˜í™˜í•œë‹¤. if (!hadSessionAlready &amp;&amp; !this.alwaysCreateSession) &#123; return; &#125; // ê¸°ì¡´ Sessionì„ ê°€ì ¸ì˜¤ê±°ë‚˜ ì—†ì„ ê²½ìš° ìƒˆë¡œìš´ Sessionì„ ìƒì„±í•œë‹¤. HttpSession session = request.getSession(); // Sessionì´ ì¡´ì¬í•˜ê³  ì•„ì§ ìœ íš¨í•œ ê²½ìš° ìƒˆë¡œìš´ Sessionì„ ìƒì„±í•˜ê³  ê¸°ì¡´ Sessionì„ ë³µì‚¬í•œë‹¤. if (hadSessionAlready &amp;&amp; request.isRequestedSessionIdValid()) &#123; String originalSessionId; String newSessionId; Object mutex = WebUtils.getSessionMutex(session); synchronized (mutex) &#123; originalSessionId = session.getId(); // Session Idë¥¼ ë³€ê²½í•œë‹¤. session = applySessionFixation(request); newSessionId = session.getId(); &#125; // Session Idì— ëŒ€í•œ ìœ íš¨ì„±ì„ ê²€ì‚¬í•œë‹¤. if (originalSessionId.equals(newSessionId)) &#123; this.logger.warn(&quot;Your servlet container did not change the session ID when a new session &quot; + &quot;was created. You will not be adequately protected against session-fixation attacks&quot;); &#125; else &#123; if (this.logger.isDebugEnabled()) &#123; this.logger.debug(LogMessage.format(&quot;Changed session id from %s&quot;, originalSessionId)); &#125; &#125; // Session Idê°€ ë³€ê²½ ëìŒìŒ Applicationì— ì•Œë ¤ì¤€ë‹¤. onSessionChange(originalSessionId, session, authentication); &#125;&#125; Session ì²˜ë¦¬ - ChangeSessionIdAuthenticationStrategy AbstractSessionFixationProtectionStrategy êµ¬í˜„ì²´ë¡œ ChangeSessionIdAuthenticationStrategy ë¥¼ ì‚¬ìš©í•´ Session Idë¥¼ ë³€ê²½í•œë‹¤. ChangeSessionIdAuthenticationStrategy.java public final class ChangeSessionIdAuthenticationStrategy extends AbstractSessionFixationProtectionStrategy &#123; @Override HttpSession applySessionFixation(HttpServletRequest request) &#123; request.changeSessionId(); return request.getSession(); &#125;&#125; ì¸ì¦ì´ ì™„ë£Œëœ Authentication ê°ì²´ë¥¼ SecurityContextì— ì €ì¥í•œë‹¤.successfulAuthentication ë©”ì†Œë“œëŠ” ì¸ì¦ì´ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ ì¡Œì„ ë•Œ í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œë¡œ í¬ê²Œ 3ê°€ì§€ ì‘ì—…ì„ ì§„í–‰í•œë‹¤. SecurityContextHolderë¡œë¶€í„° SecurityContext ê°ì²´ë¥¼ ê°€ì ¸ì™€ Authentication ê°ì²´ë¥¼ ë„£ì–´ì¤€ë‹¤. Remember Meì— ëŒ€í•œ ì„¤ì •ì„ í•´ì¤€ë‹¤. ì¸ì¦ì´ ì™„ë£Œ ë˜ë©´ successHandlerë¥¼ ì´ìš©í•´ ì •ìƒì ìœ¼ë¡œ ì¸ì¦ì´ ì™„ë£Œ ëì„ ë•Œì˜ ì‘ì—…ì„ ì§„í–‰í•œë‹¤. SecurityConfigì—ì„œ http.successHandler() ë©”ì†Œë“œë¡œ ë“±ë¡í•œ Handlerê°ì²´ê°€ ì‹¤í–‰ëœë‹¤. AbstractAuthenticationProcessingFilter.java protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException &#123; // SecurityContextHolderì— Authentication ê°ì²´ë¥¼ ë“±ë¡í•œë‹¤. SecurityContextHolder.getContext().setAuthentication(authResult); if (this.logger.isDebugEnabled()) &#123; this.logger.debug(LogMessage.format(&quot;Set SecurityContextHolder to %s&quot;, authResult)); &#125; this.rememberMeServices.loginSuccess(request, response, authResult); if (this.eventPublisher != null) &#123; this.eventPublisher.publishEvent(new InteractiveAuthenticationSuccessEvent(authResult, this.getClass())); &#125; this.successHandler.onAuthenticationSuccess(request, response, authResult);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"ì¸ì¦ ê³¼ì •","slug":"Spring/Spring-Security/ì¸ì¦-ê³¼ì •","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95/"}],"tags":[]},{"title":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš©","slug":"react/login/login-modal-09-reduxsaga","date":"2021-10-25T04:10:40.000Z","updated":"2024-11-23T16:46:04.735Z","comments":true,"path":"2021/10/25/react/login/login-modal-09-reduxsaga/","link":"","permalink":"https://ckck803.github.io/2021/10/25/react/login/login-modal-09-reduxsaga/","excerpt":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš©ëª¨ë“ˆ ì„¤ì¹˜í•˜ê¸°yarn add redux-saga Reducer ì •ì˜import &#123; SIGNUP_FAILURE, SIGNUP_REQUEST, SIGNUP_SUCCESS &#125; from &quot;../type&quot;;const initialState = &quot;&quot;;export const signupRequest = (form) =&gt; (&#123; type: SIGNUP_REQUEST, data: form,&#125;);const SignupReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case SIGNUP_REQUEST: return &#123; ...state, &#125;; case SIGNUP_SUCCESS: return &#123; ...state, &#125;; case SIGNUP_FAILURE: return &#123; ...state, &#125;; default: return state; &#125;&#125;;export default SignupReducer; import axios from &quot;axios&quot;;import &#123; LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS &#125; from &quot;../type&quot;;const initialState = &#123; token: localStorage.getItem(&quot;token&quot;),&#125;;export const loginRequest = (loginData) =&gt; (&#123; type: LOGIN_REQUEST, data: loginData,&#125;);const LoginReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case LOGIN_REQUEST: console.log(&quot;Log In Reqeust&quot;); return &#123; ...state, &#125;; case LOGIN_SUCCESS: console.log(&quot;Log In Success&quot;); return &#123; ...state, token: localStorage.getItem(&quot;token&quot;), &#125;; case LOGIN_FAILURE: console.log(&quot;Log In Failure&quot;); return &#123; ...state, &#125;; default: return state; &#125;&#125;;export default LoginReducer; Root Reducer ìƒì„±import &#123; combineReducers &#125; from &quot;redux&quot;;import LoginReducer from &quot;./LoginReducer&quot;;import SignupReducer from &quot;./SignupReducer&quot;;const createRootReducer = combineReducers(&#123; LoginReducer, SignupReducer,&#125;);export default createRootReducer;","text":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš©ëª¨ë“ˆ ì„¤ì¹˜í•˜ê¸°yarn add redux-saga Reducer ì •ì˜import &#123; SIGNUP_FAILURE, SIGNUP_REQUEST, SIGNUP_SUCCESS &#125; from &quot;../type&quot;;const initialState = &quot;&quot;;export const signupRequest = (form) =&gt; (&#123; type: SIGNUP_REQUEST, data: form,&#125;);const SignupReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case SIGNUP_REQUEST: return &#123; ...state, &#125;; case SIGNUP_SUCCESS: return &#123; ...state, &#125;; case SIGNUP_FAILURE: return &#123; ...state, &#125;; default: return state; &#125;&#125;;export default SignupReducer; import axios from &quot;axios&quot;;import &#123; LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS &#125; from &quot;../type&quot;;const initialState = &#123; token: localStorage.getItem(&quot;token&quot;),&#125;;export const loginRequest = (loginData) =&gt; (&#123; type: LOGIN_REQUEST, data: loginData,&#125;);const LoginReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case LOGIN_REQUEST: console.log(&quot;Log In Reqeust&quot;); return &#123; ...state, &#125;; case LOGIN_SUCCESS: console.log(&quot;Log In Success&quot;); return &#123; ...state, token: localStorage.getItem(&quot;token&quot;), &#125;; case LOGIN_FAILURE: console.log(&quot;Log In Failure&quot;); return &#123; ...state, &#125;; default: return state; &#125;&#125;;export default LoginReducer; Root Reducer ìƒì„±import &#123; combineReducers &#125; from &quot;redux&quot;;import LoginReducer from &quot;./LoginReducer&quot;;import SignupReducer from &quot;./SignupReducer&quot;;const createRootReducer = combineReducers(&#123; LoginReducer, SignupReducer,&#125;);export default createRootReducer; Sagaimport axios from &quot;axios&quot;;import &#123; all, call, put, takeEvery, fork &#125; from &quot;redux-saga/effects&quot;;import &#123;&#125; from &quot;../reducers/LoginReducer&quot;;import &#123; SIGNUP_REQUEST, SIGNUP_SUCCESS &#125; from &quot;../type&quot;;const SignupUserAPI = (signupData) =&gt; &#123; return axios.post(&quot;/api/signup&quot;, signupData).then((response) =&gt; &#123; return response.data; &#125;);&#125;;function* signupUser(action) &#123; try &#123; const result = yield call(SignupUserAPI, action.data); yield put(&#123; type: SIGNUP_SUCCESS, data: result, &#125;); &#125; catch (e) &#123; yield put(&#123; type: SIGNUP_REQUEST, &#125;); &#125;&#125;function* watchSignupUser() &#123; yield takeEvery(SIGNUP_REQUEST, signupUser);&#125;export default function* signupSaga() &#123; yield all([fork(watchSignupUser)]);&#125; import axios from &quot;axios&quot;;import &#123; LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS &#125; from &quot;../type&quot;;import &#123; all, call, fork, put, takeEvery &#125; from &quot;redux-saga/effects&quot;;const loginUserAPI = (loginData) =&gt; &#123; return axios .post(&quot;/api/login&quot;, loginData) .then((response) =&gt; &#123; localStorage.setItem(&quot;token&quot;, response.headers.authorization); return response.data; &#125;) .catch((err) =&gt; &#123; console.log(err); &#125;);&#125;;function* loginUser(action) &#123; try &#123; const result = yield call(loginUserAPI, action.data); yield put(&#123; type: LOGIN_SUCCESS, data: result, &#125;); &#125; catch (e) &#123; yield put(&#123; type: LOGIN_FAILURE, &#125;); &#125;&#125;function* watchLoginUser() &#123; yield takeEvery(LOGIN_REQUEST, loginUser);&#125;export default function* loginSaga() &#123; yield all([fork(watchLoginUser)]);&#125; Root Saga ìƒì„±import &#123; all, fork &#125; from &quot;redux-saga/effects&quot;;import loginSaga from &quot;./LoginSaga&quot;;import signupSaga from &quot;./SignupSaga&quot;;export default function* rootSaga() &#123; yield all([fork(loginSaga), fork(signupSaga)]);&#125; import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import &#x27;./index.css&#x27;;import App from &#x27;./App&#x27;;import reportWebVitals from &#x27;./reportWebVitals&#x27;;import &#123; composeWithDevTools &#125; from &#x27;redux-devtools-extension&#x27;; // ë¦¬ë•ìŠ¤ ê°œë°œì ë„êµ¬import &#123; createStore, applyMiddleware &#125; from &#x27;redux&#x27;;import &#123; Provider &#125; from &#x27;react-redux&#x27;;import createSagaMiddleware from &#x27;redux-saga&#x27;;import rootSaga from &#x27;./redux/sagas&#x27;;import createRootReducer from &#x27;./redux/reducers&#x27;;const sagaMiddleware = createSagaMiddleware();const store = createStore(createRootReducer, composeWithDevTools(applyMiddleware(sagaMiddleware)))sagaMiddleware.run(rootSaga);ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById(&#x27;root&#x27;));reportWebVitals();","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Login","slug":"Frontend/Login","permalink":"https://ckck803.github.io/categories/Frontend/Login/"}],"tags":[]},{"title":"Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer","slug":"spring/spring-security/security/configure/authorization","date":"2021-10-25T01:25:35.000Z","updated":"2024-02-26T16:26:38.354Z","comments":true,"path":"2021/10/25/spring/spring-security/security/configure/authorization/","link":"","permalink":"https://ckck803.github.io/2021/10/25/spring/spring-security/security/configure/authorization/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì¸ê°€ API ExpressionUrlAuthorizationConfigurer ë¥¼ í†µí•´ ìì›ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ë‹¤ì–‘í•œ ì¸ê°€ ë°©ì‹ì„ ì§€ì›í•œë‹¤.ì—­í• (ROLE) ê¸°ë°˜ ì¸ê°€ ë°©ì‹, ê¶Œí•œ(Authority) ê¸°ë°˜ ì¸ê°€ ë°©ì‹, IP ë¥¼ í†µí•œ ì¸ê°€ ë°©ì‹ë“± ë‹¤ì–‘í•œ APIë¥¼ ì œê³µí•œë‹¤. hasRole ëª…ì‹œëœ ê¶Œí•œì— ì ‘ë¯¸ì‚¬ ROLE_ ì„ ë¶™ì´ê³  í•´ë‹¹ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ìì›ì— ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasAuthority ì™€ ë¹„ìŠ·í•œ ê°œë…ì´ì§€ë§Œ hasRole ì€ USER, MANAGER, ADMINê³¼ ê°™ì€ ì—­í•  ì— ë”°ë¼ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasAnyRole ëª…ì‹œëœ ê¶Œí•œë“¤ì— ì ‘ë¯¸ì‚¬ ROLE_ ì„ ë¶™ì´ê³  ì‚¬ìš©ìê°€ í•˜ë‚˜ë¼ë„ ê¶Œí•œì„ ê°–ê³  ìˆìœ¼ë©´ í•´ë‹¹ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasAuthority í•´ë‹¹ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ìì›ì— ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasRole ì™€ ë¹„ìŠ·í•œ ê°œë…ì´ì§€ë§Œ hasAuthorityëŠ” CREATE, READ, WRITE, DELETE ì™€ ê°™ì´ ê¶Œí•œ ì— ë”°ë¼ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasAnyAuthority ëª…ì‹œëœ ê¶Œí•œë“¤ ì¤‘ í•˜ë‚˜ë¼ë„ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œ ìì›ì— ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasIpAddress íŠ¹ì • IP ì— ëŒ€í•´ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•  ë•Œ ì‚¬ìš©í•œë‹¤. permitAll ê¶Œí•œì— ëŒ€í•œ ê²€ì¦ ì—†ì´ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. anonymous ìµëª… ì‚¬ìš©ìì˜ ì ‘ê·¼ì„ í—ˆìš© ìµëª… ì‚¬ìš©ìëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ROLE_ANONYMOUS ê¶Œí•œì´ ë¶€ì—¬ë¼ ìˆë‹¤. rememberMe Remember-Me ë¥¼ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìê°€ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. denyAll ëª¨ë“  ì ‘ê·¼ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. authenticated ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. fullyAuthenticated Remember-Me ë¥¼ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìë¥¼ ì œì™¸í•˜ê³  ì¸ì¦ëœ ì‚¬ìš©ìì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. ExpressionUrlAuthorizationConfigurerpublic ExpressionInterceptUrlRegistry hasRole(String role) &#123; return access(ExpressionUrlAuthorizationConfigurer .hasRole(ExpressionUrlAuthorizationConfigurer.this.rolePrefix, role));&#125;public ExpressionInterceptUrlRegistry hasAnyRole(String... roles) &#123; return access(ExpressionUrlAuthorizationConfigurer .hasAnyRole(ExpressionUrlAuthorizationConfigurer.this.rolePrefix, roles));&#125;public ExpressionInterceptUrlRegistry hasAuthority(String authority) &#123; return access(ExpressionUrlAuthorizationConfigurer.hasAuthority(authority));&#125;public ExpressionInterceptUrlRegistry hasAnyAuthority(String... authorities) &#123; return access(ExpressionUrlAuthorizationConfigurer.hasAnyAuthority(authorities));&#125;public ExpressionInterceptUrlRegistry hasIpAddress(String ipaddressExpression) &#123; return access(ExpressionUrlAuthorizationConfigurer.hasIpAddress(ipaddressExpression));&#125;public ExpressionInterceptUrlRegistry permitAll() &#123; return access(permitAll);&#125;public ExpressionInterceptUrlRegistry anonymous() &#123; return access(anonymous);&#125;public ExpressionInterceptUrlRegistry rememberMe() &#123; return access(rememberMe);&#125;public ExpressionInterceptUrlRegistry denyAll() &#123; return access(denyAll);&#125;public ExpressionInterceptUrlRegistry authenticated() &#123; return access(authenticated);&#125;public ExpressionInterceptUrlRegistry fullyAuthenticated() &#123; return access(fullyAuthenticated);&#125;public ExpressionInterceptUrlRegistry access(String attribute) &#123; if (this.not) &#123; attribute = &quot;!&quot; + attribute; &#125; interceptUrl(this.requestMatchers, SecurityConfig.createList(attribute)); return ExpressionUrlAuthorizationConfigurer.this.REGISTRY;&#125;","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì¸ê°€ API ExpressionUrlAuthorizationConfigurer ë¥¼ í†µí•´ ìì›ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ë‹¤ì–‘í•œ ì¸ê°€ ë°©ì‹ì„ ì§€ì›í•œë‹¤.ì—­í• (ROLE) ê¸°ë°˜ ì¸ê°€ ë°©ì‹, ê¶Œí•œ(Authority) ê¸°ë°˜ ì¸ê°€ ë°©ì‹, IP ë¥¼ í†µí•œ ì¸ê°€ ë°©ì‹ë“± ë‹¤ì–‘í•œ APIë¥¼ ì œê³µí•œë‹¤. hasRole ëª…ì‹œëœ ê¶Œí•œì— ì ‘ë¯¸ì‚¬ ROLE_ ì„ ë¶™ì´ê³  í•´ë‹¹ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ìì›ì— ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasAuthority ì™€ ë¹„ìŠ·í•œ ê°œë…ì´ì§€ë§Œ hasRole ì€ USER, MANAGER, ADMINê³¼ ê°™ì€ ì—­í•  ì— ë”°ë¼ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasAnyRole ëª…ì‹œëœ ê¶Œí•œë“¤ì— ì ‘ë¯¸ì‚¬ ROLE_ ì„ ë¶™ì´ê³  ì‚¬ìš©ìê°€ í•˜ë‚˜ë¼ë„ ê¶Œí•œì„ ê°–ê³  ìˆìœ¼ë©´ í•´ë‹¹ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasAuthority í•´ë‹¹ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ìì›ì— ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasRole ì™€ ë¹„ìŠ·í•œ ê°œë…ì´ì§€ë§Œ hasAuthorityëŠ” CREATE, READ, WRITE, DELETE ì™€ ê°™ì´ ê¶Œí•œ ì— ë”°ë¼ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasAnyAuthority ëª…ì‹œëœ ê¶Œí•œë“¤ ì¤‘ í•˜ë‚˜ë¼ë„ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œ ìì›ì— ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. hasIpAddress íŠ¹ì • IP ì— ëŒ€í•´ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•  ë•Œ ì‚¬ìš©í•œë‹¤. permitAll ê¶Œí•œì— ëŒ€í•œ ê²€ì¦ ì—†ì´ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. anonymous ìµëª… ì‚¬ìš©ìì˜ ì ‘ê·¼ì„ í—ˆìš© ìµëª… ì‚¬ìš©ìëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ROLE_ANONYMOUS ê¶Œí•œì´ ë¶€ì—¬ë¼ ìˆë‹¤. rememberMe Remember-Me ë¥¼ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìê°€ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. denyAll ëª¨ë“  ì ‘ê·¼ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. authenticated ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. fullyAuthenticated Remember-Me ë¥¼ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìë¥¼ ì œì™¸í•˜ê³  ì¸ì¦ëœ ì‚¬ìš©ìì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤. ExpressionUrlAuthorizationConfigurerpublic ExpressionInterceptUrlRegistry hasRole(String role) &#123; return access(ExpressionUrlAuthorizationConfigurer .hasRole(ExpressionUrlAuthorizationConfigurer.this.rolePrefix, role));&#125;public ExpressionInterceptUrlRegistry hasAnyRole(String... roles) &#123; return access(ExpressionUrlAuthorizationConfigurer .hasAnyRole(ExpressionUrlAuthorizationConfigurer.this.rolePrefix, roles));&#125;public ExpressionInterceptUrlRegistry hasAuthority(String authority) &#123; return access(ExpressionUrlAuthorizationConfigurer.hasAuthority(authority));&#125;public ExpressionInterceptUrlRegistry hasAnyAuthority(String... authorities) &#123; return access(ExpressionUrlAuthorizationConfigurer.hasAnyAuthority(authorities));&#125;public ExpressionInterceptUrlRegistry hasIpAddress(String ipaddressExpression) &#123; return access(ExpressionUrlAuthorizationConfigurer.hasIpAddress(ipaddressExpression));&#125;public ExpressionInterceptUrlRegistry permitAll() &#123; return access(permitAll);&#125;public ExpressionInterceptUrlRegistry anonymous() &#123; return access(anonymous);&#125;public ExpressionInterceptUrlRegistry rememberMe() &#123; return access(rememberMe);&#125;public ExpressionInterceptUrlRegistry denyAll() &#123; return access(denyAll);&#125;public ExpressionInterceptUrlRegistry authenticated() &#123; return access(authenticated);&#125;public ExpressionInterceptUrlRegistry fullyAuthenticated() &#123; return access(fullyAuthenticated);&#125;public ExpressionInterceptUrlRegistry access(String attribute) &#123; if (this.not) &#123; attribute = &quot;!&quot; + attribute; &#125; interceptUrl(this.requestMatchers, SecurityConfig.createList(attribute)); return ExpressionUrlAuthorizationConfigurer.this.REGISTRY;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Security","slug":"Spring/Spring-Security/Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Security/"},{"name":"Config","slug":"Spring/Spring-Security/Security/Config","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Security/Config/"}],"tags":[]},{"title":"Spring Security - SessionManagementFilter & ConcurrentSessionFilter","slug":"spring/spring-security/security/filter/sessionmanagementfilter","date":"2021-10-24T14:25:35.000Z","updated":"2024-02-26T16:27:56.166Z","comments":true,"path":"2021/10/24/spring/spring-security/security/filter/sessionmanagementfilter/","link":"","permalink":"https://ckck803.github.io/2021/10/24/spring/spring-security/security/filter/sessionmanagementfilter/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ SessionManagementFilter SessionManagementFilter ëŠ” ì¸ì¦ëœ ì‚¬ìš©ìì— ëŒ€í•œ Session ê´€ë¦¬ ì™€ Session ê³µê²©ìœ¼ë¡œ ë¶€í„°ì˜ ë³´í˜¸ ë¥¼ ìœ„í•œ Filter Session ê´€ë¦¬ ì¸ì¦ì‹œ ì‚¬ìš©ìì˜ Session ë“±ë¡, ì¡°íšŒ, ì‚­ì œ ë“±ì˜ ì´ë ¥ì„ ê´€ë¦¬í•œë‹¤. ë™ì‹œì„± Session ì œì–´ ë™ì¼ ê³„ì •ìœ¼ë¡œ ì ‘ì†í•˜ëŠ” ìµœëŒ€ Session ìˆ˜ë¥¼ ì„¤ì •í•œë‹¤. Session ê³ ì • ë³´í˜¸ ì¸ì¦í• ë•Œ ë§ˆë‹¤ ìƒˆë¡œìš´ Session ì¿ í‚¤ë¥¼ ìƒˆë¡œ ë°œê¸‰í•´ ì¿ í‚¤ ì¡°ì‘ì„ ë°©ì§€í•œë‹¤. Session ìƒì„± ì •ì±… SessionManagementFilter.java private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; if (request.getAttribute(FILTER_APPLIED) != null) &#123; chain.doFilter(request, response); return; &#125; request.setAttribute(FILTER_APPLIED, Boolean.TRUE); if (!this.securityContextRepository.containsContext(request)) &#123; Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); if (authentication != null &amp;&amp; !this.trustResolver.isAnonymous(authentication)) &#123; try &#123; // ìµœëŒ€ ìƒì„± ê°œìˆ˜ë¥¼ ë„˜ì–´ì„°ëŠ”ì§€?, Session ê³ ì • ê³µê²©ì´ ë“¤ì–´ì™”ëŠ”ì§€? ë“± // Sessionì— ëŒ€í•œ ì¸ì¦ì„ ì§„í–‰í•œë‹¤. this.sessionAuthenticationStrategy.onAuthentication(authentication, request, response); &#125; catch (SessionAuthenticationException ex) &#123; this.logger.debug(&quot;SessionAuthenticationStrategy rejected the authentication object&quot;, ex); SecurityContextHolder.clearContext(); this.failureHandler.onAuthenticationFailure(request, response, ex); return; &#125; this.securityContextRepository.saveContext(SecurityContextHolder.getContext(), request, response); &#125; else &#123; if (request.getRequestedSessionId() != null &amp;&amp; !request.isRequestedSessionIdValid()) &#123; if (this.logger.isDebugEnabled()) &#123; this.logger.debug(LogMessage.format(&quot;Request requested invalid session id %s&quot;, request.getRequestedSessionId())); &#125; if (this.invalidSessionStrategy != null) &#123; this.invalidSessionStrategy.onInvalidSessionDetected(request, response); return; &#125; &#125; &#125; &#125; chain.doFilter(request, response);&#125; Session ê´€ë¦¬ë¥¼ ìœ„í•œ SessionAuthenticationStrategy SessionAuthenticationStrategy ëŠ” Session ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê±°ë‚˜ Session ê³ ì • ê³µê²©ì— ëŒ€í•œ ë³´í˜¸ë¥¼ ìœ„í•´ Session Idë¥¼ ë³€ê²½í•œë‹¤.","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ SessionManagementFilter SessionManagementFilter ëŠ” ì¸ì¦ëœ ì‚¬ìš©ìì— ëŒ€í•œ Session ê´€ë¦¬ ì™€ Session ê³µê²©ìœ¼ë¡œ ë¶€í„°ì˜ ë³´í˜¸ ë¥¼ ìœ„í•œ Filter Session ê´€ë¦¬ ì¸ì¦ì‹œ ì‚¬ìš©ìì˜ Session ë“±ë¡, ì¡°íšŒ, ì‚­ì œ ë“±ì˜ ì´ë ¥ì„ ê´€ë¦¬í•œë‹¤. ë™ì‹œì„± Session ì œì–´ ë™ì¼ ê³„ì •ìœ¼ë¡œ ì ‘ì†í•˜ëŠ” ìµœëŒ€ Session ìˆ˜ë¥¼ ì„¤ì •í•œë‹¤. Session ê³ ì • ë³´í˜¸ ì¸ì¦í• ë•Œ ë§ˆë‹¤ ìƒˆë¡œìš´ Session ì¿ í‚¤ë¥¼ ìƒˆë¡œ ë°œê¸‰í•´ ì¿ í‚¤ ì¡°ì‘ì„ ë°©ì§€í•œë‹¤. Session ìƒì„± ì •ì±… SessionManagementFilter.java private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; if (request.getAttribute(FILTER_APPLIED) != null) &#123; chain.doFilter(request, response); return; &#125; request.setAttribute(FILTER_APPLIED, Boolean.TRUE); if (!this.securityContextRepository.containsContext(request)) &#123; Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); if (authentication != null &amp;&amp; !this.trustResolver.isAnonymous(authentication)) &#123; try &#123; // ìµœëŒ€ ìƒì„± ê°œìˆ˜ë¥¼ ë„˜ì–´ì„°ëŠ”ì§€?, Session ê³ ì • ê³µê²©ì´ ë“¤ì–´ì™”ëŠ”ì§€? ë“± // Sessionì— ëŒ€í•œ ì¸ì¦ì„ ì§„í–‰í•œë‹¤. this.sessionAuthenticationStrategy.onAuthentication(authentication, request, response); &#125; catch (SessionAuthenticationException ex) &#123; this.logger.debug(&quot;SessionAuthenticationStrategy rejected the authentication object&quot;, ex); SecurityContextHolder.clearContext(); this.failureHandler.onAuthenticationFailure(request, response, ex); return; &#125; this.securityContextRepository.saveContext(SecurityContextHolder.getContext(), request, response); &#125; else &#123; if (request.getRequestedSessionId() != null &amp;&amp; !request.isRequestedSessionIdValid()) &#123; if (this.logger.isDebugEnabled()) &#123; this.logger.debug(LogMessage.format(&quot;Request requested invalid session id %s&quot;, request.getRequestedSessionId())); &#125; if (this.invalidSessionStrategy != null) &#123; this.invalidSessionStrategy.onInvalidSessionDetected(request, response); return; &#125; &#125; &#125; &#125; chain.doFilter(request, response);&#125; Session ê´€ë¦¬ë¥¼ ìœ„í•œ SessionAuthenticationStrategy SessionAuthenticationStrategy ëŠ” Session ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê±°ë‚˜ Session ê³ ì • ê³µê²©ì— ëŒ€í•œ ë³´í˜¸ë¥¼ ìœ„í•´ Session Idë¥¼ ë³€ê²½í•œë‹¤. SessionAuthenticationStrategy.java public interface SessionAuthenticationStrategy &#123; void onAuthentication(Authentication authentication, HttpServletRequest request, HttpServletResponse response) throws SessionAuthenticationException;&#125; SessionAuthenticationStrategy ê°ì²´ë“¤ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ - CompositeSessionAuthenticationStrategy CompositeSessionAuthenticationStrategy ëŠ” ì—¬ëŸ¬ê°œì˜ SessionAuthenticationStrategy ë¥¼ ê°–ê³  ìš”ì²­ì— ëŒ€í•œ Session ì¸ì¦ ì²˜ë¦¬ë¥¼ ìœ„ì„í•œë‹¤. @Overridepublic void onAuthentication(Authentication authentication, HttpServletRequest request, HttpServletResponse response) throws SessionAuthenticationException &#123; int currentPosition = 0; int size = this.delegateStrategies.size(); for (SessionAuthenticationStrategy delegate : this.delegateStrategies) &#123; if (this.logger.isTraceEnabled()) &#123; this.logger.trace(LogMessage.format(&quot;Preparing session with %s (%d/%d)&quot;, delegate.getClass().getSimpleName(), ++currentPosition, size)); &#125; delegate.onAuthentication(authentication, request, response); &#125;&#125; Session ì„ ì €ì¥í•˜ê¸° ìœ„í•œ - RegisterSessionAuthenticationStrategy RegisterSessionAuthenticationStrategy ëŠ” ì¸ì¦ì´ ì„±ê³µì ìœ¼ë¡œ ëë‚œ í›„ ì‚¬ìš©ì Sessionì„ ì €ì¥í•œë‹¤. @Overridepublic void onAuthentication(Authentication authentication, HttpServletRequest request, HttpServletResponse response) &#123; this.sessionRegistry.registerNewSession(request.getSession().getId(), authentication.getPrincipal());&#125; ë™ì‹œì„± Session ì œì–´ë¥¼ ìœ„í•œ - ConcurrentSessionControlAuthenticationStrategy ConcurrentSessionControlAuthenticationStrategy ì€ í•œ ì‚¬ìš©ìê°€ ë§Œë“¤ ìˆ˜ ìˆëŠ” Session ì´ ìµœëŒ€ ìƒì„± ê°œìˆ˜ ë¥¼ ë„˜ì–´ê°”ëŠ”ì§€ í™•ì¸í•œë‹¤. @Overridepublic void onAuthentication(Authentication authentication, HttpServletRequest request, HttpServletResponse response) &#123; int allowedSessions = getMaximumSessionsForThisUser(authentication); if (allowedSessions == -1) &#123; // We permit unlimited logins return; &#125; List&lt;SessionInformation&gt; sessions = this.sessionRegistry.getAllSessions(authentication.getPrincipal(), false); int sessionCount = sessions.size(); if (sessionCount &lt; allowedSessions) &#123; // They haven&#x27;t got too many login sessions running at present return; &#125; // í•´ë‹¹ ì‚¬ìš©ìë¡œ ë§Œë“¤ì–´ì§„ Sessionì˜ ê°œìˆ˜ì™€ í—ˆìš©ëœ Session ìƒì„± ê°œìˆ˜ë¥¼ ë¹„êµí•œë‹¤. if (sessionCount == allowedSessions) &#123; HttpSession session = request.getSession(false); if (session != null) &#123; for (SessionInformation si : sessions) &#123; if (si.getSessionId().equals(session.getId())) &#123; return; &#125; &#125; &#125; &#125; // Sessionì´ ìµœëŒ€ì¹˜ ë³´ë‹¤ ë§ì´ ìƒì„±ëœ ê²½ìš°ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. allowableSessionsExceeded(sessions, allowedSessions, this.sessionRegistry);&#125; allowableSessionsExceeded ë©”ì†Œë“œëŠ” í˜„ì¬ ì‚¬ìš©ìì˜ ì¸ì¦ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì§„í–‰í•˜ëŠ” ë°©ë²•ê³¼ì´ì „ ì‚¬ìš©ì Session ì •ë³´ë¥¼ ë§Œë£Œí•˜ëŠ” ë°©ë²• ì´ ìˆë‹¤. ConcurrentSessionControlAuthenticationStrategy.java protected void allowableSessionsExceeded(List&lt;SessionInformation&gt; sessions, int allowableSessions, SessionRegistry registry) throws SessionAuthenticationException &#123; // í˜„ì¬ ì‚¬ìš©ìê°€ ì¸ì¦ì„ ëª»í•˜ë„ë¡ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. // Sessionì´ í—ˆìš©ëœ ê°œìˆ˜ë³´ë‹¤ ë§ì´ ë§Œë“¤ì–´ì¡Œê±°ë‚˜, Session ìì²´ê°€ ì—†ì„ ê²½ìš° SessionAuthenticationException ì„ ë°œìƒì‹œí‚¨ë‹¤. if (this.exceptionIfMaximumExceeded || (sessions == null)) &#123; throw new SessionAuthenticationException( this.messages.getMessage(&quot;ConcurrentSessionControlAuthenticationStrategy.exceededAllowed&quot;, new Object[] &#123; allowableSessions &#125;, &quot;Maximum sessions of &#123;0&#125; for this principal exceeded&quot;)); &#125; // ì´ì „ ì‚¬ìš©ì Session ì •ë³´ë¥¼ ë§Œë£Œ í•œë‹¤. sessions.sort(Comparator.comparing(SessionInformation::getLastRequest)); int maximumSessionsExceededBy = sessions.size() - allowableSessions + 1; // ì²«ë²ˆì§¸ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì™€ ë§Œë£Œí•œë‹¤. List&lt;SessionInformation&gt; sessionsToBeExpired = sessions.subList(0, maximumSessionsExceededBy); for (SessionInformation session : sessionsToBeExpired) &#123; session.expireNow(); &#125;&#125; Session ê³ ì • ê³µê²© ë³´í˜¸ë¥¼ ìœ„í•œ - AbstractSessionFixationProtectionStrategy AbstractSessionFixationProtectionStrategy ëŠ” Session ê³ ì • ê³µê²© ë³´í˜¸ ê³µí†µì ì¸ ë¡œì§ì„ ìˆ˜í–‰ì‹œí‚¤ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ì¶”ìƒ Class Sessionì„ ê°€ì ¸ì˜¨ë‹¤. ë§Œì¼ Sessionì´ ì—†ì„ ê²½ìš° ìƒˆë¡œ ìƒì„±í•œë‹¤. Session ê³ ì •ì— ëŒ€í•œ ì ì ˆí•œ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤.(Session Idë¥¼ ë³€ê²½) Session Idê°€ ë³€ê²½ ëëŠ”ì§€ í™•ì¸í•œë‹¤. SessionFixationProtectionEvent ì´ë²¤íŠ¸ë¥¼ ë°œìƒí•œë‹¤. AbstractSessionFixationProtectionStrategy.java @Overridepublic void onAuthentication(Authentication authentication, HttpServletRequest request, HttpServletResponse response) &#123; // ë§Œë“¤ì–´ì§„ Sessionì´ ìˆìœ¼ë©´ ê°€ì ¸ì˜¨ë‹¤. boolean hadSessionAlready = request.getSession(false) != null; if (!hadSessionAlready &amp;&amp; !this.alwaysCreateSession) &#123; return; &#125; // Sessionì„ ìƒì„±í•œë‹¤. HttpSession session = request.getSession(); if (hadSessionAlready &amp;&amp; request.isRequestedSessionIdValid()) &#123; String originalSessionId; String newSessionId; Object mutex = WebUtils.getSessionMutex(session); synchronized (mutex) &#123; originalSessionId = session.getId(); // Session ê³ ì •ì— ëŒ€í•œ ì ì ˆí•œ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤.(Sessio Idë¥¼ ë³€ê²½) session = applySessionFixation(request); newSessionId = session.getId(); &#125; if (originalSessionId.equals(newSessionId)) &#123; this.logger.warn(&quot;Your servlet container did not change the session ID when a new session &quot; + &quot;was created. You will not be adequately protected against session-fixation attacks&quot;); &#125; else &#123; if (this.logger.isDebugEnabled()) &#123; this.logger.debug(LogMessage.format(&quot;Changed session id from %s&quot;, originalSessionId)); &#125; &#125; onSessionChange(originalSessionId, session, authentication); &#125;&#125; Session Idë¥¼ ë³€ê²½ - ChangeSessionIdAuthenticationStrategy ChangeSessionIdAuthenticationStrategy ëŠ” AbstractSessionFixationProtectionStrategy ìƒì†í•œ Class ë‹¤ChangeSessionIdAuthenticationStrategy ëŠ” Session ê³ ì • ê³µê²© ë³´í˜¸ë¥¼ ìœ„í•œ ë°©ë²•ìœ¼ë¡œ Session Idë¥¼ ë³€ê²½ í•œë‹¤. ChangeSessionIdAuthenticationStrategy.java public final class ChangeSessionIdAuthenticationStrategy extends AbstractSessionFixationProtectionStrategy &#123; @Override HttpSession applySessionFixation(HttpServletRequest request) &#123; request.changeSessionId(); return request.getSession(); &#125;&#125; ConcurrentSessionFilter - ë™ì‹œì„± Session ì œì–´ë¥¼ ìœ„í•œ Filter ConcurrentSessionFilter ëŠ” SessionManagementFilter ì™€ í•¨ê»˜ ë™ì‹œì  Session ì œì–´ë¥¼ ìœ„í•œ Filter ë§¤ ìš”ì²­ ë§ˆë‹¤ í˜„ì¬ ì‚¬ìš©ìì˜ Session ë§Œë£Œ ì—¬ë¶€ë¥¼ ì²´í¬ Sessionì´ ë§Œë£Œ ëì„ ê²½ìš° ì¦‰ì‹œ ë§Œë£Œ ì²˜ë¦¬í•œë‹¤. Logout ì²˜ë¦¬ Session ë§Œë£Œ ì •ë³´ì— ëŒ€í•œ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. ConcurrentSessionFilter.java private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; HttpSession session = request.getSession(false); if (session != null) &#123; SessionInformation info = this.sessionRegistry.getSessionInformation(session.getId()); if (info != null) &#123; // Sessionì´ ë°˜ë£Œ ëëŠ”ì§€ í™•ì¸í•œë‹¤. if (info.isExpired()) &#123; this.logger.debug(LogMessage .of(() -&gt; &quot;Requested session ID &quot; + request.getRequestedSessionId() + &quot; has expired.&quot;)); // Sessionì´ ë§Œë£Œ ëì„ ê²½ìš° Logout ì²˜ë¦¬í•œë‹¤. doLogout(request, response); this.sessionInformationExpiredStrategy .onExpiredSessionDetected(new SessionInformationExpiredEvent(info, request, response)); return; &#125; // Sessionì´ ë§Œë£Œë˜ì§€ ì•Šì•˜ì„ ê²½ìš° Session ì‹œê°„ì„ ê°±ì‹ í•œë‹¤. this.sessionRegistry.refreshLastRequest(info.getSessionId()); &#125; &#125; chain.doFilter(request, response);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Filter","slug":"Spring/Spring-Security/Filter","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Filter/"}],"tags":[]},{"title":"Spring Security - RembmerMeAuthenticationFilter","slug":"spring/spring-security/security/filter/remembermeauthenticationfilter","date":"2021-10-24T13:25:35.000Z","updated":"2024-02-26T16:27:33.537Z","comments":true,"path":"2021/10/24/spring/spring-security/security/filter/remembermeauthenticationfilter/","link":"","permalink":"https://ckck803.github.io/2021/10/24/spring/spring-security/security/filter/remembermeauthenticationfilter/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://docs.spring.io/spring-security/reference/servlet/authentication/rememberme.html RembmerMeAuthenticationFilter Client ë¡œë¶€í„° Request(ìš”ì²­) ì´ ì˜¤ê²Œ ë˜ë©´ Request ê°ì²´ Cookie ì— Remember Me Token ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. Token ì„ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•œ í›„ SecurityContext ì— Authentication ê°ì²´ë¥¼ ì €ì¥í•œë‹¤. RememberMeAuthenticationFilter.java private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; // SecurityContext ë‚´ Authentication ê°ì²´ê°€ ìˆëŠ”ì§€ í™•ì¸ í•œë‹¤. if (SecurityContextHolder.getContext().getAuthentication() != null) &#123; this.logger.debug(LogMessage .of(() -&gt; &quot;SecurityContextHolder not populated with remember-me token, as it already contained: &#x27;&quot; + SecurityContextHolder.getContext().getAuthentication() + &quot;&#x27;&quot;)); chain.doFilter(request, response); return; &#125; // Remember Me ì¸ì¦ì„ ì§„í–‰í•œ í›„ Authentication ê°ì²´ë¥¼ ë°˜í™˜ë°›ëŠ”ë‹¤. Authentication rememberMeAuth = this.rememberMeServices.autoLogin(request, response); if (rememberMeAuth != null) &#123; // Attempt authenticaton via AuthenticationManager try &#123; // RememberMeAuthenticationToken ê°ì²´ë‚´ Key ê°’ì— ëŒ€í•œ Hash ë¹„êµë¥¼ í†µí•´ ìœ íš¨ì„± ì¸ì¦ì„ ì§„í–‰ í›„ ê°ì²´ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜ë°›ëŠ”ë‹¤. rememberMeAuth = this.authenticationManager.authenticate(rememberMeAuth); // SecurityContextHolder ì— ì¸ì¦ ë°›ì€ Authentication ê°ì²´ë¥¼ ì €ì¥í•œë‹¤. SecurityContextHolder.getContext().setAuthentication(rememberMeAuth); // ì¸ì¦ ì„±ê³µ í›„ í›„ì‘ì—…ì„ ì§„í–‰í•œë‹¤. onSuccessfulAuthentication(request, response, rememberMeAuth); this.logger.debug(LogMessage.of(() -&gt; &quot;SecurityContextHolder populated with remember-me token: &#x27;&quot; + SecurityContextHolder.getContext().getAuthentication() + &quot;&#x27;&quot;)); if (this.eventPublisher != null) &#123; this.eventPublisher.publishEvent(new InteractiveAuthenticationSuccessEvent( SecurityContextHolder.getContext().getAuthentication(), this.getClass())); &#125; if (this.successHandler != null) &#123; this.successHandler.onAuthenticationSuccess(request, response, rememberMeAuth); return; &#125; &#125; catch (AuthenticationException ex) &#123; this.logger.debug(LogMessage .format(&quot;SecurityContextHolder not populated with remember-me token, as AuthenticationManager &quot; + &quot;rejected Authentication returned by RememberMeServices: &#x27;%s&#x27;; &quot; + &quot;invalidating remember-me token&quot;, rememberMeAuth), ex); this.rememberMeServices.loginFail(request, response); onUnsuccessfulAuthentication(request, response, ex); &#125; &#125; chain.doFilter(request, response);&#125; AbstractRememberMeServices","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://docs.spring.io/spring-security/reference/servlet/authentication/rememberme.html RembmerMeAuthenticationFilter Client ë¡œë¶€í„° Request(ìš”ì²­) ì´ ì˜¤ê²Œ ë˜ë©´ Request ê°ì²´ Cookie ì— Remember Me Token ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. Token ì„ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•œ í›„ SecurityContext ì— Authentication ê°ì²´ë¥¼ ì €ì¥í•œë‹¤. RememberMeAuthenticationFilter.java private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; // SecurityContext ë‚´ Authentication ê°ì²´ê°€ ìˆëŠ”ì§€ í™•ì¸ í•œë‹¤. if (SecurityContextHolder.getContext().getAuthentication() != null) &#123; this.logger.debug(LogMessage .of(() -&gt; &quot;SecurityContextHolder not populated with remember-me token, as it already contained: &#x27;&quot; + SecurityContextHolder.getContext().getAuthentication() + &quot;&#x27;&quot;)); chain.doFilter(request, response); return; &#125; // Remember Me ì¸ì¦ì„ ì§„í–‰í•œ í›„ Authentication ê°ì²´ë¥¼ ë°˜í™˜ë°›ëŠ”ë‹¤. Authentication rememberMeAuth = this.rememberMeServices.autoLogin(request, response); if (rememberMeAuth != null) &#123; // Attempt authenticaton via AuthenticationManager try &#123; // RememberMeAuthenticationToken ê°ì²´ë‚´ Key ê°’ì— ëŒ€í•œ Hash ë¹„êµë¥¼ í†µí•´ ìœ íš¨ì„± ì¸ì¦ì„ ì§„í–‰ í›„ ê°ì²´ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜ë°›ëŠ”ë‹¤. rememberMeAuth = this.authenticationManager.authenticate(rememberMeAuth); // SecurityContextHolder ì— ì¸ì¦ ë°›ì€ Authentication ê°ì²´ë¥¼ ì €ì¥í•œë‹¤. SecurityContextHolder.getContext().setAuthentication(rememberMeAuth); // ì¸ì¦ ì„±ê³µ í›„ í›„ì‘ì—…ì„ ì§„í–‰í•œë‹¤. onSuccessfulAuthentication(request, response, rememberMeAuth); this.logger.debug(LogMessage.of(() -&gt; &quot;SecurityContextHolder populated with remember-me token: &#x27;&quot; + SecurityContextHolder.getContext().getAuthentication() + &quot;&#x27;&quot;)); if (this.eventPublisher != null) &#123; this.eventPublisher.publishEvent(new InteractiveAuthenticationSuccessEvent( SecurityContextHolder.getContext().getAuthentication(), this.getClass())); &#125; if (this.successHandler != null) &#123; this.successHandler.onAuthenticationSuccess(request, response, rememberMeAuth); return; &#125; &#125; catch (AuthenticationException ex) &#123; this.logger.debug(LogMessage .format(&quot;SecurityContextHolder not populated with remember-me token, as AuthenticationManager &quot; + &quot;rejected Authentication returned by RememberMeServices: &#x27;%s&#x27;; &quot; + &quot;invalidating remember-me token&quot;, rememberMeAuth), ex); this.rememberMeServices.loginFail(request, response); onUnsuccessfulAuthentication(request, response, ex); &#125; &#125; chain.doFilter(request, response);&#125; AbstractRememberMeServices Request ê°ì²´ë¡œ ë¶€í„° Remember Me ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ í›„ Base64 ë¡œ ì¸ì½”ë”© Remember Me ì •ë³´ë¥¼ Decoding í•œë‹¤ ë””ì½”ë”© ëœ Remember Me ë¥¼ ì´ìš©í•´ Login ì„ ì§„í–‰í•œ í›„ UserDetails ê°ì²´ë¥¼ ë°˜í™˜ë°›ëŠ”ë‹¤. Key ì™€ UserDetails ê°ì²´ë¥¼ ì´ìš©í•´ RememberMeAuthenticationToken ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. @Overridepublic final Authentication autoLogin(HttpServletRequest request, HttpServletResponse response) &#123; // Cookie ë¡œë¶€í„° Remeber Me Token ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. String rememberMeCookie = extractRememberMeCookie(request); if (rememberMeCookie == null) &#123; return null; &#125; this.logger.debug(&quot;Remember-me cookie detected&quot;); if (rememberMeCookie.length() == 0) &#123; this.logger.debug(&quot;Cookie was empty&quot;); cancelCookie(request, response); return null; &#125; try &#123; // Base64 ë¡œ ì¸ì½”ë”© Remember Me Token ì •ë³´ë¥¼ Decoding í•œë‹¤. String[] cookieTokens = decodeCookie(rememberMeCookie); // Token ì„ ì´ìš©í•´ Login ì„ ì§„í–‰í•œ í›„ UserDetails ê°ì²´ë¥¼ ë°˜í™˜ë°›ëŠ”ë‹¤. UserDetails user = processAutoLoginCookie(cookieTokens, request, response); this.userDetailsChecker.check(user); this.logger.debug(&quot;Remember-me cookie accepted&quot;); // UserDetails ë¥¼ ì´ìš©í•´ RememberMeAuthenticationToken (Authentication) ë¥¼ ìƒì„± í›„ ë°˜í™˜í•œë‹¤. return createSuccessfulAuthentication(request, user); &#125; catch (CookieTheftException ex) &#123; cancelCookie(request, response); throw ex; &#125; catch (UsernameNotFoundException ex) &#123; this.logger.debug(&quot;Remember-me login was valid but corresponding user not found.&quot;, ex); &#125; catch (InvalidCookieException ex) &#123; this.logger.debug(&quot;Invalid remember-me cookie: &quot; + ex.getMessage()); &#125; catch (AccountStatusException ex) &#123; this.logger.debug(&quot;Invalid UserDetails: &quot; + ex.getMessage()); &#125; catch (RememberMeAuthenticationException ex) &#123; this.logger.debug(ex.getMessage()); &#125; cancelCookie(request, response); return null;&#125; RememberMeAuthenticationProvider RememberMeAuthenticationToken ì˜ ìœ íš¨ì„±ì„ íŒë‹¨í•  ë•Œ Key ì— ëŒ€í•œ Hash ê°’ ë¹„êµë¥¼ í†µí•´ í™•ì¸í•œë‹¤. @Overridepublic Authentication authenticate(Authentication authentication) throws AuthenticationException &#123; if (!supports(authentication.getClass())) &#123; return null; &#125; if (this.key.hashCode() != ((RememberMeAuthenticationToken) authentication).getKeyHash()) &#123; throw new BadCredentialsException(this.messages.getMessage(&quot;RememberMeAuthenticationProvider.incorrectKey&quot;, &quot;The presented RememberMeAuthenticationToken does not contain the expected key&quot;)); &#125; return authentication;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Filter","slug":"Spring/Spring-Security/Filter","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Filter/"}],"tags":[]},{"title":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸°","slug":"react/login/login-modal-08-redux","date":"2021-10-24T08:10:40.000Z","updated":"2024-11-23T16:46:04.109Z","comments":true,"path":"2021/10/24/react/login/login-modal-08-redux/","link":"","permalink":"https://ckck803.github.io/2021/10/24/react/login/login-modal-08-redux/","excerpt":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸°ëª¨ë“ˆ ì„¤ì¹˜í•˜ê¸°yarn add reduxyarn add react-redux Action ì •ì˜export const LOGIN_REQUEST = &quot;login/LOGIN_REQUEST&quot;; Action ìƒì„± í•¨ìˆ˜ ë° Reducer ìƒì„±í•˜ê¸°import axios from &#x27;axios&#x27;;import &#123; LOGIN_REQUEST &#125; from &quot;../type&quot;const initialState = &#123; token: localStorage.getItem(&#x27;token&#x27;),&#125;;export const loginRequest = (loginData) =&gt; &#123; const response = axios.post(&quot;/api/login&quot;, loginData) .then((response) =&gt; &#123; localStorage.setItem(&quot;token&quot;, response.headers.authorization); console.log(localStorage.getItem(&quot;token&quot;)); return response.data; &#125;) .catch((err) =&gt; &#123; console.log(err); &#125;); return &#123; type: LOGIN_REQUEST, data: response &#125;;&#125;;const LoginReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case LOGIN_REQUEST: return &#123; ...state, token: localStorage.getItem(&#x27;token&#x27;), &#125;; default: return state; &#125;&#125;export default LoginReducer; Store ìƒì„±í•˜ê¸°","text":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸°ëª¨ë“ˆ ì„¤ì¹˜í•˜ê¸°yarn add reduxyarn add react-redux Action ì •ì˜export const LOGIN_REQUEST = &quot;login/LOGIN_REQUEST&quot;; Action ìƒì„± í•¨ìˆ˜ ë° Reducer ìƒì„±í•˜ê¸°import axios from &#x27;axios&#x27;;import &#123; LOGIN_REQUEST &#125; from &quot;../type&quot;const initialState = &#123; token: localStorage.getItem(&#x27;token&#x27;),&#125;;export const loginRequest = (loginData) =&gt; &#123; const response = axios.post(&quot;/api/login&quot;, loginData) .then((response) =&gt; &#123; localStorage.setItem(&quot;token&quot;, response.headers.authorization); console.log(localStorage.getItem(&quot;token&quot;)); return response.data; &#125;) .catch((err) =&gt; &#123; console.log(err); &#125;); return &#123; type: LOGIN_REQUEST, data: response &#125;;&#125;;const LoginReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case LOGIN_REQUEST: return &#123; ...state, token: localStorage.getItem(&#x27;token&#x27;), &#125;; default: return state; &#125;&#125;export default LoginReducer; Store ìƒì„±í•˜ê¸°import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import &#x27;./index.css&#x27;;import App from &#x27;./App&#x27;;import reportWebVitals from &#x27;./reportWebVitals&#x27;;import &#123; composeWithDevTools &#125; from &#x27;redux-devtools-extension&#x27;; import &#123; createStore &#125; from &#x27;redux&#x27;;import &#123; Provider &#125; from &#x27;react-redux&#x27;;import LoginReducer from &#x27;./redux/reducers/LoginReducer&#x27;const store = createStore(LoginReducer, composeWithDevTools())ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById(&#x27;root&#x27;));// If you want to start measuring performance in your app, pass a function// to log results (for example: reportWebVitals(console.log))// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitalsreportWebVitals(); Dispatch í•¨ìˆ˜ ì ìš©import axios from &quot;axios&quot;;import &#123; useDispatch &#125; from &quot;react-redux&quot;;import &#123; loginRequest &#125; from &quot;../redux/reducers/LoginReducer&quot;;import React, &#123; useState, useCallback &#125; from &quot;react&quot;;import &#123; LoginBody, LoginFooter, LoginHeader, ModalBackGround, ModalBox,&#125; from &quot;../assets/css/login&quot;;const LoginTemplate = (&#123; open, close &#125;) =&gt; &#123; const [form, setForm] = useState(&#123; email: &quot;&quot;, password: &quot;&quot;, &#125;); const onChange = useCallback( (e) =&gt; &#123; setForm(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;, [form] ); const dispatch = useDispatch(); const onClick = useCallback(() =&gt; &#123; dispatch(loginRequest(form)); &#125;); return open ? ( &lt;ModalBackGround&gt; &lt;ModalBox&gt; &lt;LoginHeader&gt; ë¡œê·¸ì¸ &lt;button className=&quot;close&quot; onClick=&#123;close&#125;&gt; &#123;&quot; &quot;&#125; &amp;times;&#123;&quot; &quot;&#125; &lt;/button&gt; &lt;/LoginHeader&gt; &lt;LoginBody className=&quot;login-body&quot;&gt; &lt;div&gt; &lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input id=&quot;password&quot; name=&quot;password&quot; type=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;/LoginBody&gt; &lt;LoginFooter&gt; &lt;button onClick=&#123;onClick&#125;&gt;ë¡œê·¸ì¸&lt;/button&gt; &lt;/LoginFooter&gt; &lt;/ModalBox&gt; &lt;/ModalBackGround&gt; ) : null;&#125;;export default LoginTemplate;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Login","slug":"Frontend/Login","permalink":"https://ckck803.github.io/categories/Frontend/Login/"}],"tags":[]},{"title":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸°","slug":"react/login/login-modal-07-back-jwt","date":"2021-10-23T08:10:40.000Z","updated":"2024-11-23T16:46:04.178Z","comments":true,"path":"2021/10/23/react/login/login-modal-07-back-jwt/","link":"","permalink":"https://ckck803.github.io/2021/10/23/react/login/login-modal-07-back-jwt/","excerpt":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸°Propertiesì— JWT ì„¤ì • ê°’ ì¶”ê°€JWT ë¥¼ ì•”í˜¸í™” í•˜ê¸° ìœ„í•œ key ê°’, tokenì˜ ìœ íš¨ì‹œê°„ì„ ì •ì˜í•˜ê¸° ìœ„í•œ ê°’, ê·¸ë¦¬ê³  í† í°ì„ Http Headerì— ì €ì¥í•˜ê¸° ìœ„í•¸ Header Keyë¥¼ ì •ì˜í•´ì¤€ë‹¤. application.yml jwt: header: Authorization secret: c2lsdmVybmluZS10ZWNoLXNwcmluZy1ib290LWp3dC10dXRvcmlhbC1zZWNyZXQtc2lsdmVybmluZS10ZWNoLXNwcmluZy1ib290LWp3dC10dXRvcmlhbC1zZWNyZXQK token-validity-in-seconds: 86400000 JWTë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ JwtUtils ìƒì„± JwtUtilsì—ì„œëŠ” createToken ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ìƒˆë¡œìš´ JWTë¥¼ ë§Œë“¤ê³  validateToken ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì „ë‹¬ ë°›ì€ JWTì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•˜ê³  getAuthentication ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì „ë‹¬ ë°›ì€ JWTë¡œë¶€í„° Authentication ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤. Jwts.builder ë¥¼ ì´ìš©í•´ JWTë¥¼ ìƒì„±í•˜ê³  Jwts.parser ë¥¼ ì´ìš©í•´ JWTë¡œë¶€í„° ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. Value ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ Propertiesì— ì €ì¥í•œ tokenì„ ì•”í˜¸í™” í•˜ê¸° ìœ„í•œ Keyê°’ê³¼ token ìœ íš¨ì‹œê°„ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.","text":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸°Propertiesì— JWT ì„¤ì • ê°’ ì¶”ê°€JWT ë¥¼ ì•”í˜¸í™” í•˜ê¸° ìœ„í•œ key ê°’, tokenì˜ ìœ íš¨ì‹œê°„ì„ ì •ì˜í•˜ê¸° ìœ„í•œ ê°’, ê·¸ë¦¬ê³  í† í°ì„ Http Headerì— ì €ì¥í•˜ê¸° ìœ„í•¸ Header Keyë¥¼ ì •ì˜í•´ì¤€ë‹¤. application.yml jwt: header: Authorization secret: c2lsdmVybmluZS10ZWNoLXNwcmluZy1ib290LWp3dC10dXRvcmlhbC1zZWNyZXQtc2lsdmVybmluZS10ZWNoLXNwcmluZy1ib290LWp3dC10dXRvcmlhbC1zZWNyZXQK token-validity-in-seconds: 86400000 JWTë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ JwtUtils ìƒì„± JwtUtilsì—ì„œëŠ” createToken ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ìƒˆë¡œìš´ JWTë¥¼ ë§Œë“¤ê³  validateToken ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì „ë‹¬ ë°›ì€ JWTì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•˜ê³  getAuthentication ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì „ë‹¬ ë°›ì€ JWTë¡œë¶€í„° Authentication ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤. Jwts.builder ë¥¼ ì´ìš©í•´ JWTë¥¼ ìƒì„±í•˜ê³  Jwts.parser ë¥¼ ì´ìš©í•´ JWTë¡œë¶€í„° ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. Value ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ Propertiesì— ì €ì¥í•œ tokenì„ ì•”í˜¸í™” í•˜ê¸° ìœ„í•œ Keyê°’ê³¼ token ìœ íš¨ì‹œê°„ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. JwtUtils.java @Component@Slf4jpublic class JwtUtils &#123; @Value(&quot;$&#123;jwt.secret&#125;&quot;) private String secretKey; @Value(&quot;$&#123;jwt.token-validity-in-seconds&#125;&quot;) private Long tokenValidityInMilliseconds; public String createToken(Authentication authentication)&#123; String authorities = authentication.getAuthorities().stream() .map((autority) -&gt; autority.getAuthority()) .collect(Collectors.joining(&quot;,&quot;)); Long now = (new Date()).getTime(); Date validity = new Date(now + this.tokenValidityInMilliseconds); String JsonWebToken = Jwts.builder() .setSubject(authentication.getName()) .claim(&quot;auth&quot;, authorities) .signWith(SignatureAlgorithm.HS512, secretKey) .setExpiration(validity) .compact(); return JsonWebToken; &#125; public Authentication getAuthentication(String token)&#123; Claims claims = Jwts .parser() .setSigningKey(secretKey) .parseClaimsJws(token) .getBody(); Collection&lt;? extends GrantedAuthority&gt; authorities = Arrays.stream(claims.get(&quot;auth&quot;).toString().split(&quot;,&quot;)) .map(SimpleGrantedAuthority::new) .collect(Collectors.toList()); User principal = new User(claims.getSubject(), &quot;&quot;, authorities); return new JsonAuthenticationToken(principal, token, authorities); &#125; public boolean validateToken(String token)&#123; try&#123; Jws&lt;Claims&gt; claimsJws = Jwts.parser().setSigningKey(secretKey).parseClaimsJws(token); return true; &#125;catch (Exception e)&#123; log.info(&quot;JWT í† í°ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.&quot;); &#125; return false; &#125;&#125; JWTë¥¼ ì´ìš©í•œ ì¸ì¦ Filter JwtAuthenticationFilter ì—ì„œëŠ” Request Header ì •ë³´ë¥¼ í™•ì¸í•´ JWTê°€ ì „ë‹¬ ë°›ì•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ì „ë‹¬ ë°›ì€ JWT ì˜ ìœ íš¨ì„±ì„ ê²€ì¦ í•œ í›„ Authentication ê°ì²´ë¥¼ ìƒì„±í•´ SecurityContextì— ì €ì¥í•˜ëŠ” ì ˆì°¨ë¥¼ ê±°ì¹œë‹¤. JwtAuthenticationFilter.java @Component@RequiredArgsConstructorpublic class JwtAuthenticationFilter extends OncePerRequestFilter &#123; public final JwtUtils jwtUtils; @Override protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException &#123; String token = null; String authorizationHeader = request.getHeader(&quot;authorization&quot;); if(authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;))&#123; token = authorizationHeader.substring(7); &#125; if(token != null &amp;&amp; jwtUtils.validateToken(token))&#123; Authentication authentication = jwtUtils.getAuthentication(token); SecurityContextHolder.getContext().setAuthentication(authentication); &#125; filterChain.doFilter(request, response); &#125;&#125; ì¸ì¦ í›„ JWT ë§Œë“¤ê¸° ì‚¬ìš©ì ì¸ì¦ì´ ëë‚˜ê³  JWTë¥¼ ë§Œë“¤ì–´ ì£¼ê¸° ìœ„í•´ JsonAuthenticationSuccessHandler ë¥¼ ì´ìš©í•´ ì¸ì¦ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œëœ í›„ ìƒì„±ëœ Authentication ê°ì²´ë¥¼ ì´ìš©í•´ JWT ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤. JsonAuthenticationSuccessHandler.java @RequiredArgsConstructorpublic class JsonAuthenticationSuccessHandler implements AuthenticationSuccessHandler &#123; private final ObjectMapper objectMapper; private final JwtUtils jwtUtils; @Override public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException &#123; try &#123; UserDetails userDetails = (UserDetails) authentication.getPrincipal(); String jwt = jwtUtils.createToken(authentication); HttpHeaders httpHeaders = new HttpHeaders(); httpHeaders.add(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt); response.setStatus(HttpStatus.OK.value()); objectMapper.writeValue(response.getWriter(), jwt); &#125; catch (Exception e) &#123; throw new ServletException(&quot;inavalid username/password&quot;); &#125; &#125;&#125; JWTë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ Config êµ¬ì„±í•˜ê¸° JwtSecurityConfig ì—ì„œëŠ” JWT ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ JwtUtils ì™€ JWTë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•œ JwtAuthenticationFilter ë¥¼ Beanìœ¼ë¡œ ë“±ë¡í•´ UsernamePasswordAuthenticationFilter ì•ì— ìœ„ì¹˜í•˜ë„ë¡ í•œë‹¤. @Configuration@EnableWebSecurity@RequiredArgsConstructor@Order(1)public class JwtSecurityConfig extends WebSecurityConfigurerAdapter &#123; @Bean public JwtAuthenticationFilter jwtAuthenticationFilter()&#123; return new JwtAuthenticationFilter(jwtUtils()); &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .csrf().disable(); http .addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class); &#125; @Bean public JwtUtils jwtUtils()&#123; return new JwtUtils(); &#125;&#125;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Login","slug":"Frontend/Login","permalink":"https://ckck803.github.io/categories/Frontend/Login/"}],"tags":[]},{"title":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„","slug":"react/login/login-modal-06-back-login","date":"2021-10-22T07:10:40.000Z","updated":"2024-11-23T16:46:04.497Z","comments":true,"path":"2021/10/22/react/login/login-modal-06-back-login/","link":"","permalink":"https://ckck803.github.io/2021/10/22/react/login/login-modal-06-back-login/","excerpt":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„Json ì¸ì¦ Filter êµ¬í˜„í•˜ê¸°UsernamePasswordAuthenticationFilter ì˜ ê²½ìš° Form Loginì„ ìœ„í•´ êµ¬í˜„ëœ Filterë¼ Request Bodyë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ëŠ” Login ìš”ì²­ì„ ì ìš©í•˜ê¸°ëŠ” ì–´ë µê¸°ì— JSON ì„ ì´ìš©í•´ Loginì„ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ JsonAuthenticationFilter ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì¤„ í•„ìš”ê°€ ìˆë‹¤. UsernamePasswordAuthenticationFilter ì™€ ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” ê³¼ì •ì€ ë¹„ìŠ·í•˜ë¯€ë¡œ AbstractAuthenticationProcessingFilter ë¥¼ ìƒì†í•´ ìƒˆë¡œìš´ Filterë¥¼ ìƒì„±í•´ì¤€ë‹¤. JsonAuthenticationFilter.java public class JsonAuthenticationFilter extends AbstractAuthenticationProcessingFilter &#123; private static final String LOGIN_PROCESSING_URL = &quot;/api/login&quot;; @Autowired private ObjectMapper objectMapper; public JsonAuthenticationFilter() &#123; super(new AntPathRequestMatcher(LOGIN_PROCESSING_URL)); &#125; @Override public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException, IOException, ServletException &#123; if(!isApplicationJSON(request))&#123; throw new IllegalStateException(&quot;Content Type is not Application/json&quot;); &#125; LoginDto loginDto = objectMapper.readValue(request.getReader(), LoginDto.class); if(ObjectUtils.isEmpty(loginDto.getUsername()) || ObjectUtils.isEmpty(loginDto.getPassword()))&#123; throw new IllegalArgumentException(&quot;Username or Password is empty&quot;); &#125; JsonAuthenticationToken jsonAuthenticationToken = new JsonAuthenticationToken(loginDto.getUsername(), loginDto.getPassword()); getAuthenticationManager().authenticate(jsonAuthenticationToken); return null; &#125; private boolean isApplicationJSON(HttpServletRequest httpServletRequest)&#123; if(httpServletRequest.getHeader(&quot;Content-type&quot;).equals(MediaType.APPLICATION_JSON_VALUE))&#123; return true; &#125; return false; &#125;&#125; ìƒˆë¡œìš´ Authentication Token ë§Œë“¤ê¸° JsonAuthenticationFilter ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ìƒˆë¡œìš´ Authentication ìƒì„±","text":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„Json ì¸ì¦ Filter êµ¬í˜„í•˜ê¸°UsernamePasswordAuthenticationFilter ì˜ ê²½ìš° Form Loginì„ ìœ„í•´ êµ¬í˜„ëœ Filterë¼ Request Bodyë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ëŠ” Login ìš”ì²­ì„ ì ìš©í•˜ê¸°ëŠ” ì–´ë µê¸°ì— JSON ì„ ì´ìš©í•´ Loginì„ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ JsonAuthenticationFilter ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì¤„ í•„ìš”ê°€ ìˆë‹¤. UsernamePasswordAuthenticationFilter ì™€ ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” ê³¼ì •ì€ ë¹„ìŠ·í•˜ë¯€ë¡œ AbstractAuthenticationProcessingFilter ë¥¼ ìƒì†í•´ ìƒˆë¡œìš´ Filterë¥¼ ìƒì„±í•´ì¤€ë‹¤. JsonAuthenticationFilter.java public class JsonAuthenticationFilter extends AbstractAuthenticationProcessingFilter &#123; private static final String LOGIN_PROCESSING_URL = &quot;/api/login&quot;; @Autowired private ObjectMapper objectMapper; public JsonAuthenticationFilter() &#123; super(new AntPathRequestMatcher(LOGIN_PROCESSING_URL)); &#125; @Override public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException, IOException, ServletException &#123; if(!isApplicationJSON(request))&#123; throw new IllegalStateException(&quot;Content Type is not Application/json&quot;); &#125; LoginDto loginDto = objectMapper.readValue(request.getReader(), LoginDto.class); if(ObjectUtils.isEmpty(loginDto.getUsername()) || ObjectUtils.isEmpty(loginDto.getPassword()))&#123; throw new IllegalArgumentException(&quot;Username or Password is empty&quot;); &#125; JsonAuthenticationToken jsonAuthenticationToken = new JsonAuthenticationToken(loginDto.getUsername(), loginDto.getPassword()); getAuthenticationManager().authenticate(jsonAuthenticationToken); return null; &#125; private boolean isApplicationJSON(HttpServletRequest httpServletRequest)&#123; if(httpServletRequest.getHeader(&quot;Content-type&quot;).equals(MediaType.APPLICATION_JSON_VALUE))&#123; return true; &#125; return false; &#125;&#125; ìƒˆë¡œìš´ Authentication Token ë§Œë“¤ê¸° JsonAuthenticationFilter ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ìƒˆë¡œìš´ Authentication ìƒì„± JsonAuthenticationToken.java public class JsonAuthenticationToken extends AbstractAuthenticationToken &#123; private static final long serialVersionUID = SpringSecurityCoreVersion.SERIAL_VERSION_UID; private final Object principal; private Object credentials; public JsonAuthenticationToken(Object principal, Object credentials) &#123; super(null); this.principal = principal; this.credentials = credentials; setAuthenticated(false); &#125; public JsonAuthenticationToken(Object principal, Object credentials, Collection&lt;? extends GrantedAuthority&gt; authorities) &#123; super(authorities); this.principal = principal; this.credentials = credentials; super.setAuthenticated(true); &#125; @Override public Object getCredentials() &#123; return this.credentials; &#125; @Override public Object getPrincipal() &#123; return this.principal; &#125; @Override public void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException &#123; Assert.isTrue(!isAuthenticated, &quot;Cannot set this token to trusted - use constructor which takes a GrantedAuthority list instead&quot;); super.setAuthenticated(false); &#125; @Override public void eraseCredentials() &#123; super.eraseCredentials(); this.credentials = null; &#125;&#125; JsonAuthenticationToken ê°ì²´ ì¸ì¦ì„ ìœ„í•œ AuthenticationProvider ìƒì„± JsonAuthenticationToken ê°ì²´ë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ ìƒˆë¡œìš´ AuthenticationProvider ë¥¼ ìƒì„±í•œë‹¤. supports ë©”ì†Œë“œì—ì„œ ì „ë‹¬ë°›ì€ Authentication ê°ì²´ íƒ€ì…ì´ JsonAuthenticationToken ì¸ì§€ í™•ì¸ authenticate ë©”ì†Œë“œì—ì„œ ì „ë‹¬ë°›ì€ Authentication ê°ì²´ë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰ í•œ í›„ ìƒˆë¡œìš´ JsonAuthenticationToken ê°ì²´ ìƒì„± JsonAuthenticationProvider.java @RequiredArgsConstructorpublic class JsonAuthenticationProvider implements AuthenticationProvider &#123; private final PasswordEncoder passwordEncoder; private final UserDetailsService userDetailsService; @Override public Authentication authenticate(Authentication authentication) throws AuthenticationException &#123; String username = authentication.getName(); String password = (String) authentication.getCredentials(); UserDetails loadUserByUsername = userDetailsService.loadUserByUsername(username); if(!passwordEncoder.matches(password, loadUserByUsername.getPassword()))&#123; throw new BadCredentialsException(&quot;Invalid password&quot;); &#125; return new JsonAuthenticationToken(loadUserByUsername, authentication.getCredentials(), loadUserByUsername.getAuthorities()); &#125; @Override public boolean supports(Class&lt;?&gt; authentication) &#123; return authentication.equals(JsonAuthenticationToken.class); &#125;&#125; ì¸ì¦ ì„±ê³µ í›„ ì²˜ë¦¬ë¦‰ ìœ„í•œ SuccessHandler ìƒì„± AuthenticationSuccessHandler ë¥¼ êµ¬í˜„í•´ ì¸ì¦ì— ì„±ê½í•˜ë©´ HttpStatus 200(OK) ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. JsonAuthenticationSuccessHandler.java @RequiredArgsConstructorpublic class JsonAuthenticationSuccessHandler implements AuthenticationSuccessHandler &#123; @Override public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException &#123; try &#123; response.setStatus(HttpStatus.OK.value()); &#125; catch (Exception e) &#123; throw new ServletException(&quot;inavalid username/password&quot;); &#125; &#125;&#125; Security Config ì¶”ê°€ í•˜ê¸°ë¡œê·¸ì¸ìœ¼ë¡œ Json ë°ì´í„°ê°€ ì™”ì„ ë•Œ ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ ìƒˆë¡œ ë§Œë“  JsonAuthenticationFilter , JsonAuthenticationProvider , JsonAuthenticationSuccessHandler ë¥¼ Beanìœ¼ë¡œ ë“±ë¡í•´ ì¸ì¦ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. @Configuration@EnableWebSecurity@Order(0)@RequiredArgsConstructorpublic class JsonSecurityConfig extends WebSecurityConfigurerAdapter &#123; private final UserInfoRepository userInfoRepository; private final ObjectMapper objectMapper; private final JwtUtils jwtUtils; @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth .authenticationProvider(authenticationProvider()) .userDetailsService(userDetailsService()); &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .csrf().disable(); http .addFilterBefore(jsonAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class); &#125; @Bean @Override public AuthenticationManager authenticationManagerBean() throws Exception &#123; return super.authenticationManagerBean(); &#125; @Bean public UserDetailsService userDetailsService() &#123; return new UserInfoService(userInfoRepository, passwordEncoder()); &#125; @Bean public AuthenticationProvider authenticationProvider() &#123; return new JsonAuthenticationProvider(passwordEncoder(), userDetailsService()); &#125; @Bean public PasswordEncoder passwordEncoder() &#123; return new BCryptPasswordEncoder(); &#125; @Bean public JsonAuthenticationSuccessHandler jsonAuthenticationSuccessHandler()&#123; return new JsonAuthenticationSuccessHandler(objectMapper, jwtUtils); &#125; @Bean public JsonAuthenticationFilter jsonAuthenticationFilter() throws Exception &#123; JsonAuthenticationFilter jsonAuthenticationFilter = new JsonAuthenticationFilter(); jsonAuthenticationFilter.setAuthenticationManager(authenticationManagerBean()); jsonAuthenticationFilter.setAuthenticationSuccessHandler(jsonAuthenticationSuccessHandler()); return jsonAuthenticationFilter; &#125;&#125;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Login","slug":"Frontend/Login","permalink":"https://ckck803.github.io/categories/Frontend/Login/"}],"tags":[]},{"title":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„","slug":"react/login/login-modal-05-back-signup","date":"2021-10-21T06:10:40.000Z","updated":"2024-11-23T16:46:04.326Z","comments":true,"path":"2021/10/21/react/login/login-modal-05-back-signup/","link":"","permalink":"https://ckck803.github.io/2021/10/21/react/login/login-modal-05-back-signup/","excerpt":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„íšŒì› ë°ì´í„°ë¥¼ ì €ì¥í•  UserInfo ì •ì˜íšŒì› ê°€ì…ì„ ìœ„í•´ ì‚¬ìš©ì id, username, email, passwordì™€ ì‚¬ìš©ì ë³„ë¡œ ê¶Œí•œì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ UserInfo ê°ì²´ë¥¼ ê´€ë¦¬í•˜ë„ë¡ ì •ì˜ @Entity@NoArgsConstructor@AllArgsConstructor@Getter@Builderpublic class UserInfo &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @Column(nullable = false) private String username; @Column(nullable = false) private String email; @Column(nullable = false) private String password; @Enumerated(EnumType.STRING) private UserRole userRole;&#125; User ê¶Œí•œ ëª©ë¡ ê¶Œí•œì€ 3ê°€ì§€ë¡œ ì¼ë°˜ì‚¬ìš©ìë¥¼ ìœ„í•œ USER ê¶Œí•œ, ìˆ˜ì •&#x2F;ë³€ê²½ ê¶Œí•œì´ ìˆëŠ” MANAGER ê¶Œí•œê³¼ ê´€ë¦¬ìì¸ ADMIN 3ê°€ì§€ ê¶Œí•œìœ¼ë¡œ ë¶„ë¥˜ í•œë‹¤ public enum UserRole &#123; USER(&quot;ROLE_USER&quot;), MANAGER(&quot;ROLE_MANAGER&quot;), ADMIN(&quot;ROLE_ADMIN&quot;); private String value; UserRole(String value)&#123; this.value = value; &#125; public String getValue()&#123; return this.value; &#125;&#125; ì‚¬ìš©ì ì´ë¦„ê³¼ Emailì„ ì´ìš©í•´ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ ë©”ì†Œë“œë¥¼ ì¶”ê°€í•œë‹¤.","text":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„íšŒì› ë°ì´í„°ë¥¼ ì €ì¥í•  UserInfo ì •ì˜íšŒì› ê°€ì…ì„ ìœ„í•´ ì‚¬ìš©ì id, username, email, passwordì™€ ì‚¬ìš©ì ë³„ë¡œ ê¶Œí•œì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ UserInfo ê°ì²´ë¥¼ ê´€ë¦¬í•˜ë„ë¡ ì •ì˜ @Entity@NoArgsConstructor@AllArgsConstructor@Getter@Builderpublic class UserInfo &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @Column(nullable = false) private String username; @Column(nullable = false) private String email; @Column(nullable = false) private String password; @Enumerated(EnumType.STRING) private UserRole userRole;&#125; User ê¶Œí•œ ëª©ë¡ ê¶Œí•œì€ 3ê°€ì§€ë¡œ ì¼ë°˜ì‚¬ìš©ìë¥¼ ìœ„í•œ USER ê¶Œí•œ, ìˆ˜ì •&#x2F;ë³€ê²½ ê¶Œí•œì´ ìˆëŠ” MANAGER ê¶Œí•œê³¼ ê´€ë¦¬ìì¸ ADMIN 3ê°€ì§€ ê¶Œí•œìœ¼ë¡œ ë¶„ë¥˜ í•œë‹¤ public enum UserRole &#123; USER(&quot;ROLE_USER&quot;), MANAGER(&quot;ROLE_MANAGER&quot;), ADMIN(&quot;ROLE_ADMIN&quot;); private String value; UserRole(String value)&#123; this.value = value; &#125; public String getValue()&#123; return this.value; &#125;&#125; ì‚¬ìš©ì ì´ë¦„ê³¼ Emailì„ ì´ìš©í•´ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ ë©”ì†Œë“œë¥¼ ì¶”ê°€í•œë‹¤. @Repositorypublic interface UserInfoRepository extends JpaRepository&lt;UserInfo, String&gt; &#123; Optional&lt;UserInfo&gt; findByUsername(String useranme); Optional&lt;UserInfo&gt; findByEmail(String email);&#125; íšŒì› ê°€ì…ì„ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” DTO ê°ì²´ë¥¼ ì •ì˜í•œë‹¤. @Datapublic class UserInfoDto &#123; private String username; private String email; private String password;&#125; UserDetailsService ì •ì˜ UserDetailsService ì—ëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ loadUserByUsername ë§Œ ìˆì–´ ìƒˆë¡œìš´ ì‚¬ìš©ìë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ UserDetailsService ë¥¼ ìƒì†í•œ UserInfoService ì— saveUserInfo ë©”ì†Œë“œë¥¼ ì¶”ê°€í–ˆë‹¤ public interface UserInfoService extends UserDetailsService &#123; public UserInfo saveUserInfo(SignupDto signupDto);&#125; loadUserByUsername ë©”ì†Œë“œëŠ” ì „ë‹¬ ë°›ì€ Emailì„ ì´ìš©í•´ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ í›„ UserDetails ê°ì²´ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤. saveUserInfo ë©”ì†Œë“œì—ì„œëŠ” ì „ë‹¬ ë°›ì€ SignupDto ê°ì²´ë¡œë¶€í„° ìƒˆë¡œìš´ UserInfo ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ PasswordEncoder ë¥¼ ì´ìš©í•´ Passwordë¥¼ ì•”í˜¸í™” í•œ ë’¤ ì €ì¥í•œë‹¤. @RequiredArgsConstructorpublic class UserInfoServiceImpl implements UserInfoService &#123; private final UserInfoRepository userInfoRepository; private final PasswordEncoder passwordEncoder; @Override public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException &#123; Optional&lt;UserInfo&gt; userInfoOptional = userInfoRepository.findByEmail(email); if(userInfoOptional.isPresent())&#123; UserInfo userInfo = userInfoOptional.get(); List&lt;GrantedAuthority&gt; authorities = AuthorityUtils.createAuthorityList(userInfo.getUserRole().getValue()); return new User(userInfo.getEmail(), userInfo.getPassword(), authorities); &#125;else&#123; return null; &#125; &#125; public UserInfo saveUserInfo(SignupDto signupDto)&#123; UserInfo userInfo = UserInfo .builder() .username(signupDto.getUsername()) .email(signupDto.getEmail()) .password(passwordEncoder.encode(signupDto.getPassword())) .userRole(UserRole.USER).build(); return userInfoRepository.save(userInfo); &#125;&#125; íšŒì› ê°€ì…ì„ ìœ„í•œ Controller ì¶”ê°€@RestController@RequiredArgsConstructorpublic class UserInfoController &#123; private final UserInfoService userInfoService; @GetMapping(&quot;/hello&quot;) public String hello() &#123; return &quot;Hello World&quot;; &#125; @PostMapping(&quot;/api/signup&quot;) public ResponseEntity signUp(@RequestBody UserInfoDto userInfoDto) &#123; UserInfo userInfo = UserInfo.builder().username(userInfoDto.getUsername()).email(userInfoDto.getEmail()) .password(userInfoDto.getPassword()).userRole(UserRole.USER).build(); UserInfo createdUser = userInfoService.saveUserInfo(userInfo); URI uri = ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/&#123;id&#125;&quot;).buildAndExpand(createdUser.getId()) .toUri(); return ResponseEntity.created(uri).body(createdUser); &#125;&#125; Spring Security ì„¤ì •í•˜ê¸°configure(WebSecurity web) ë¥¼ ì´ìš©í•´ ì •ì  ìì›ì— ëŒ€í•œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ í•˜ê³ , configure(HttpSecurity http) ë¥¼ ì´ìš©í•´ ê°œë°œ URL ë³„ë¡œ ì ‘ê·¼ì„ ì„¤ì •í•œë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ Ajaxë¥¼ ì´ìš©í•´ Spring Securityì— ì ‘ê·¸í•˜ê¸° ìœ„í•´ì„œ CORS ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ CORSì— ëŒ€í•œ ì„¤ì •ë„ ì¶”ê°€í•´ ì¤€ë‹¤. @Configuration@EnableWebSecurity@Order(2)public class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override public void configure(WebSecurity web) &#123; web .ignoring() .requestMatchers(PathRequest.toStaticResources().atCommonLocations()); &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .authorizeRequests() .antMatchers(&quot;/api/signup&quot;).permitAll() .anyRequest().authenticated(); http .csrf().disable() .cors().configurationSource(corsConfigurationSource()); http .formLogin().disable(); &#125; @Bean public CorsConfigurationSource corsConfigurationSource() &#123; CorsConfiguration configuration = new CorsConfiguration(); // configuration.addAllowedOrigin(&quot;*&quot;); configuration.addAllowedOriginPattern(&quot;*&quot;); configuration.addAllowedHeader(&quot;*&quot;); configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;OPTIONS&quot;, &quot;DELETE&quot;, &quot;PUT&quot;, &quot;PATCH&quot;)); configuration.setAllowCredentials(true); UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource(); source.registerCorsConfiguration(&quot;/**&quot;, configuration); return source; &#125;&#125; Spring Securityì— CORSë¥¼ ì ìš©í•˜ë©´ì„œ ë°œìƒí–ˆë˜ ë¬¸ì œ java.lang.IllegalArgumentException: When allowCredentials is true, allowedOrigins cannot contain the special value â€œ*â€ since that cannot be set on the â€œAccess-Control-Allow-Originâ€ response header. To allow credentials to a set of origins, list them explicitly or consider using â€œallowedOriginPatternsâ€ instead. Spring Seurityì— CORS ì„¤ì •ì„ ì§„í–‰í•˜ë©´ì„œ ìœ„ì™€ ê°™ìŒ ë¬¸ì œê°€ ê³„ì† ë°œìƒí–ˆë‹¤. í•´ë‹¹ ì›ì¸ì— ëŒ€í•´ ì°¾ì•„ë³´ë‹ˆ CorsConfiguration ì— ëŒ€í•œ ì„¤ì •ìœ¼ë¡œ setAllowCredentials(true) ì™€ addAllowedOrigin(â€œ*â€) ë¥¼ ë™ì‹œì— ì„¤ì •í•´ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì˜€ë‹¤. í•´ê²° ë°©ë²•ì€ addAllowedOrigin(â€œ*â€) ëŒ€ì‹  addAllowedOriginPattern(â€œ*â€) ë¥¼ ì‚¬ìš©í•˜ë©´ ë¬¸ì œê°€ í•´ê²° ëœë‹¤. ì°¸ì¡°https://code-delivery.me/posts/2021-03-16/https://github.com/spring-projects/spring-framework/issues/26111","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Login","slug":"Frontend/Login","permalink":"https://ckck803.github.io/categories/Frontend/Login/"}],"tags":[]},{"title":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬","slug":"react/login/login-modal-04-async","date":"2021-10-20T04:10:40.000Z","updated":"2024-11-23T16:46:04.397Z","comments":true,"path":"2021/10/20/react/login/login-modal-04-async/","link":"","permalink":"https://ckck803.github.io/2021/10/20/react/login/login-modal-04-async/","excerpt":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬import axios from &quot;axios&quot;;import React, &#123; useState, useCallback &#125; from &quot;react&quot;;import &#123; LoginBody, LoginFooter, LoginHeader, ModalBackGround, ModalBox,&#125; from &quot;../assets/css/login&quot;;const LoginTemplate = (&#123; open, close &#125;) =&gt; &#123; const [form, setForm] = useState(&#123; email: &quot;&quot;, password: &quot;&quot;, &#125;); const onChange = useCallback( (e) =&gt; &#123; setForm(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;, [form] ); const onClick = useCallback( (e) =&gt; &#123; axios .post(&quot;/api/login&quot;, form) .then((response) =&gt; &#123; console.log(response); &#125;) .catch((err) =&gt; &#123; console.log(err); &#125;); &#125;, [form] ); return open ? ( &lt;ModalBackGround&gt; &lt;ModalBox&gt; &lt;LoginHeader&gt; ë¡œê·¸ì¸ &lt;button className=&quot;close&quot; onClick=&#123;close&#125;&gt; &#123;&quot; &quot;&#125; &amp;times;&#123;&quot; &quot;&#125; &lt;/button&gt; &lt;/LoginHeader&gt; &lt;LoginBody className=&quot;login-body&quot;&gt; &lt;div&gt; &lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input id=&quot;password&quot; name=&quot;password&quot; type=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;/LoginBody&gt; &lt;LoginFooter&gt; &lt;button onClick=&#123;onClick&#125;&gt;ë¡œê·¸ì¸&lt;/button&gt; &lt;/LoginFooter&gt; &lt;/ModalBox&gt; &lt;/ModalBackGround&gt; ) : null;&#125;;export default LoginTemplate; import React, &#123; useCallback, useState &#125; from &quot;react&quot;;import &#123; ModalBox &#125; from &quot;../assets/css/login&quot;;import axios from &quot;axios&quot;;import &#123; ModalBackGround, SignUpBody, SignUpFooter, SignUpHeader,&#125; from &quot;../assets/css/signup&quot;;const SignUpTemplate = (&#123; open, onChangeOpen &#125;) =&gt; &#123; const [form, setForm] = useState(&#123; username: &quot;&quot;, email: &quot;&quot;, password: &quot;&quot;, &#125;); const onChange = useCallback( (e) =&gt; &#123; setForm(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;, [form] ); const onClickSignUp = useCallback(() =&gt; &#123; axios.post(&quot;/api/signup&quot;, form).then((Response) =&gt; &#123; console.log(Response); &#125;); &#125;, [form]); return open ? ( &lt;ModalBackGround className=&quot;signup-modal-box&quot;&gt; &lt;ModalBox&gt; &lt;SignUpHeader&gt; íšŒì› ê°€ì… &lt;button className=&quot;close&quot; onClick=&#123;onChangeOpen&#125;&gt; &#123;&quot; &quot;&#125; &amp;times;&#123;&quot; &quot;&#125; &lt;/button&gt; &lt;/SignUpHeader&gt; &lt;SignUpBody&gt; &lt;div&gt; &lt;input type=&quot;username&quot; id=&quot;username&quot; name=&quot;username&quot; placeholder=&quot;ì´ë¦„&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;/SignUpBody&gt; &lt;SignUpFooter&gt; &lt;button onClick=&#123;onClickSignUp&#125;&gt;íšŒì›ê°€ì…&lt;/button&gt; &lt;/SignUpFooter&gt; &lt;/ModalBox&gt; &lt;/ModalBackGround&gt; ) : null;&#125;;export default SignUpTemplate;","text":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬import axios from &quot;axios&quot;;import React, &#123; useState, useCallback &#125; from &quot;react&quot;;import &#123; LoginBody, LoginFooter, LoginHeader, ModalBackGround, ModalBox,&#125; from &quot;../assets/css/login&quot;;const LoginTemplate = (&#123; open, close &#125;) =&gt; &#123; const [form, setForm] = useState(&#123; email: &quot;&quot;, password: &quot;&quot;, &#125;); const onChange = useCallback( (e) =&gt; &#123; setForm(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;, [form] ); const onClick = useCallback( (e) =&gt; &#123; axios .post(&quot;/api/login&quot;, form) .then((response) =&gt; &#123; console.log(response); &#125;) .catch((err) =&gt; &#123; console.log(err); &#125;); &#125;, [form] ); return open ? ( &lt;ModalBackGround&gt; &lt;ModalBox&gt; &lt;LoginHeader&gt; ë¡œê·¸ì¸ &lt;button className=&quot;close&quot; onClick=&#123;close&#125;&gt; &#123;&quot; &quot;&#125; &amp;times;&#123;&quot; &quot;&#125; &lt;/button&gt; &lt;/LoginHeader&gt; &lt;LoginBody className=&quot;login-body&quot;&gt; &lt;div&gt; &lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input id=&quot;password&quot; name=&quot;password&quot; type=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;/LoginBody&gt; &lt;LoginFooter&gt; &lt;button onClick=&#123;onClick&#125;&gt;ë¡œê·¸ì¸&lt;/button&gt; &lt;/LoginFooter&gt; &lt;/ModalBox&gt; &lt;/ModalBackGround&gt; ) : null;&#125;;export default LoginTemplate; import React, &#123; useCallback, useState &#125; from &quot;react&quot;;import &#123; ModalBox &#125; from &quot;../assets/css/login&quot;;import axios from &quot;axios&quot;;import &#123; ModalBackGround, SignUpBody, SignUpFooter, SignUpHeader,&#125; from &quot;../assets/css/signup&quot;;const SignUpTemplate = (&#123; open, onChangeOpen &#125;) =&gt; &#123; const [form, setForm] = useState(&#123; username: &quot;&quot;, email: &quot;&quot;, password: &quot;&quot;, &#125;); const onChange = useCallback( (e) =&gt; &#123; setForm(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;, [form] ); const onClickSignUp = useCallback(() =&gt; &#123; axios.post(&quot;/api/signup&quot;, form).then((Response) =&gt; &#123; console.log(Response); &#125;); &#125;, [form]); return open ? ( &lt;ModalBackGround className=&quot;signup-modal-box&quot;&gt; &lt;ModalBox&gt; &lt;SignUpHeader&gt; íšŒì› ê°€ì… &lt;button className=&quot;close&quot; onClick=&#123;onChangeOpen&#125;&gt; &#123;&quot; &quot;&#125; &amp;times;&#123;&quot; &quot;&#125; &lt;/button&gt; &lt;/SignUpHeader&gt; &lt;SignUpBody&gt; &lt;div&gt; &lt;input type=&quot;username&quot; id=&quot;username&quot; name=&quot;username&quot; placeholder=&quot;ì´ë¦„&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;/SignUpBody&gt; &lt;SignUpFooter&gt; &lt;button onClick=&#123;onClickSignUp&#125;&gt;íšŒì›ê°€ì…&lt;/button&gt; &lt;/SignUpFooter&gt; &lt;/ModalBox&gt; &lt;/ModalBackGround&gt; ) : null;&#125;;export default SignUpTemplate;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Login","slug":"Frontend/Login","permalink":"https://ckck803.github.io/categories/Frontend/Login/"}],"tags":[]},{"title":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì…","slug":"react/login/login-modal-03-signup","date":"2021-10-19T03:10:40.000Z","updated":"2024-11-23T16:46:04.036Z","comments":true,"path":"2021/10/19/react/login/login-modal-03-signup/","link":"","permalink":"https://ckck803.github.io/2021/10/19/react/login/login-modal-03-signup/","excerpt":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì…import styled, &#123; keyframes &#125; from &quot;styled-components&quot;;export const ModalFade = keyframes`&#123; from &#123; opacity: 0; margin-top: -50px; &#125; to &#123; opacity: 1; margin-top: 0; &#125;&#125;`;export const ModalBackGround = styled.div` position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; animation: modal-bg-show 0.3s;`;export const ModalBox = styled.div` width: 90%; max-width: 400px; margin: 0 auto; border-radius: 0.3rem; background-color: #fff; animation: ModalFade 0.3s; overflow: hidden;`;export const SignUpHeader = styled.div` position: relative; padding: 16px 64px 16px 16px; background-color: #f1f1f1; font-weight: 700; &amp; &gt; button &#123; position: absolute; top: 15px; right: 15px; width: 30px; font-size: 21px; font-weight: 700; text-align: center; color: #999; border: 0; &#125;`;export const SignUpBody = styled.div` padding: 10px; &amp; &gt; div &#123; padding: 5px; display: flex; align-items: center; justify-content: center; &#125; &amp; &gt; div &gt; input &#123; padding-top: 5px; padding-bottom: 5px; padding-left: 15px; padding-right: 15px; width: 290px; height: 30px; font-size: 14px; border: 1px solid rgb(222, 226, 230); &#125;`;export const SignUpFooter = styled.div` border-top: 1px solid; padding: 7px 16px; text-align: right; &amp; &gt; button &#123; padding: 6px 12px; color: #fff; background-color: #6c757d; border-radius: 5px; font-size: 13px; &#125;`; import React, &#123; useCallback, useState &#125; from &quot;react&quot;;import &#123; ModalBox &#125; from &quot;../assets/css/login&quot;;import &#123; ModalBackGround, SignUpBody, SignUpFooter, SignUpHeader,&#125; from &quot;../assets/css/signup&quot;;const SignUpTemplate = (&#123; open, onChangeOpen &#125;) =&gt; &#123; const [form, setForm] = useState(&#123; username: &quot;&quot;, email: &quot;&quot;, password: &quot;&quot;, &#125;); const onChange = useCallback( (e) =&gt; &#123; setForm(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;, [form] ); return open ? ( &lt;ModalBackGround className=&quot;signup-modal-box&quot;&gt; &lt;ModalBox&gt; &lt;SignUpHeader&gt; íšŒì› ê°€ì… &lt;button className=&quot;close&quot; onClick=&#123;onChangeOpen&#125;&gt; &#123;&quot; &quot;&#125; &amp;times;&#123;&quot; &quot;&#125; &lt;/button&gt; &lt;/SignUpHeader&gt; &lt;SignUpBody&gt; &lt;div&gt; &lt;input type=&quot;username&quot; id=&quot;username&quot; name=&quot;username&quot; placeholder=&quot;ì´ë¦„&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;/SignUpBody&gt; &lt;SignUpFooter&gt; &lt;button onClick=&#123;onChangeOpen&#125;&gt;ë‹«ê¸°&lt;/button&gt; &lt;/SignUpFooter&gt; &lt;/ModalBox&gt; &lt;/ModalBackGround&gt; ) : null;&#125;;export default SignUpTemplate;","text":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì…import styled, &#123; keyframes &#125; from &quot;styled-components&quot;;export const ModalFade = keyframes`&#123; from &#123; opacity: 0; margin-top: -50px; &#125; to &#123; opacity: 1; margin-top: 0; &#125;&#125;`;export const ModalBackGround = styled.div` position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; animation: modal-bg-show 0.3s;`;export const ModalBox = styled.div` width: 90%; max-width: 400px; margin: 0 auto; border-radius: 0.3rem; background-color: #fff; animation: ModalFade 0.3s; overflow: hidden;`;export const SignUpHeader = styled.div` position: relative; padding: 16px 64px 16px 16px; background-color: #f1f1f1; font-weight: 700; &amp; &gt; button &#123; position: absolute; top: 15px; right: 15px; width: 30px; font-size: 21px; font-weight: 700; text-align: center; color: #999; border: 0; &#125;`;export const SignUpBody = styled.div` padding: 10px; &amp; &gt; div &#123; padding: 5px; display: flex; align-items: center; justify-content: center; &#125; &amp; &gt; div &gt; input &#123; padding-top: 5px; padding-bottom: 5px; padding-left: 15px; padding-right: 15px; width: 290px; height: 30px; font-size: 14px; border: 1px solid rgb(222, 226, 230); &#125;`;export const SignUpFooter = styled.div` border-top: 1px solid; padding: 7px 16px; text-align: right; &amp; &gt; button &#123; padding: 6px 12px; color: #fff; background-color: #6c757d; border-radius: 5px; font-size: 13px; &#125;`; import React, &#123; useCallback, useState &#125; from &quot;react&quot;;import &#123; ModalBox &#125; from &quot;../assets/css/login&quot;;import &#123; ModalBackGround, SignUpBody, SignUpFooter, SignUpHeader,&#125; from &quot;../assets/css/signup&quot;;const SignUpTemplate = (&#123; open, onChangeOpen &#125;) =&gt; &#123; const [form, setForm] = useState(&#123; username: &quot;&quot;, email: &quot;&quot;, password: &quot;&quot;, &#125;); const onChange = useCallback( (e) =&gt; &#123; setForm(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;, [form] ); return open ? ( &lt;ModalBackGround className=&quot;signup-modal-box&quot;&gt; &lt;ModalBox&gt; &lt;SignUpHeader&gt; íšŒì› ê°€ì… &lt;button className=&quot;close&quot; onClick=&#123;onChangeOpen&#125;&gt; &#123;&quot; &quot;&#125; &amp;times;&#123;&quot; &quot;&#125; &lt;/button&gt; &lt;/SignUpHeader&gt; &lt;SignUpBody&gt; &lt;div&gt; &lt;input type=&quot;username&quot; id=&quot;username&quot; name=&quot;username&quot; placeholder=&quot;ì´ë¦„&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;/SignUpBody&gt; &lt;SignUpFooter&gt; &lt;button onClick=&#123;onChangeOpen&#125;&gt;ë‹«ê¸°&lt;/button&gt; &lt;/SignUpFooter&gt; &lt;/ModalBox&gt; &lt;/ModalBackGround&gt; ) : null;&#125;;export default SignUpTemplate;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Login","slug":"Frontend/Login","permalink":"https://ckck803.github.io/categories/Frontend/Login/"}],"tags":[]},{"title":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸°","slug":"react/login/login-modal-02-styled-component","date":"2021-10-18T02:10:40.000Z","updated":"2024-11-23T16:46:04.655Z","comments":true,"path":"2021/10/18/react/login/login-modal-02-styled-component/","link":"","permalink":"https://ckck803.github.io/2021/10/18/react/login/login-modal-02-styled-component/","excerpt":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸°ê¸°ì¡´ì— style ë‚´ìš©ë“¤ì„ css íŒŒì¼ë¡œ ê´€ë¦¬í•´ë„ ë¬¸ì œê°€ ì—†ìœ¼ë‚˜, Reactì—ì„œëŠ” styleë§ˆì €ë„ jsíŒŒì¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•´ì£¼ëŠ” ë‹¤ì–‘í•œ í”„ë ˆì„ ì›Œí¬ë“¤ì´ ìˆë‹¤. jsíŒŒì¼ë¡œ ê´€ë¦¬í•˜ê²Œ ë˜ë©´ Reactì˜ ì—¬ëŸ¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ê¸° ë•Œë¬¸ì— ê¸°ì¡´ì— ì‘ì„±í•´ì¤€ Login ê´€ë ¨ css ë‚´ìš©ì„ js íŒŒì¼ë¡œ ë³€ê²½í•˜ë ¤ê³  í•œë‹¤. import styled, &#123; keyframes &#125; from &quot;styled-components&quot;;export const ModalFade = keyframes`&#123; from &#123; opacity: 0; margin-top: -50px; &#125; to &#123; opacity: 1; margin-top: 0; &#125;&#125;`;export const ModalBackGround = styled.div` position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center;`;export const ModalBox = styled.div` width: 90%; max-width: 400px; margin: 0 auto; border-radius: 0.3rem; background-color: #fff; animation: $&#123;ModalFade&#125; 0.5s; overflow: hidden;`;export const LoginHeader = styled.div` position: relative; padding: 16px 64px 16px 16px; background-color: #f1f1f1; font-weight: 700; &amp; &gt; button &#123; position: absolute; top: 15px; right: 15px; width: 30px; font-size: 21px; font-weight: 700; text-align: center; color: #999; border: 0; &#125;`;export const LoginBody = styled.div` padding: 10px; &amp; &gt; div &#123; padding: 5px; display: flex; align-items: center; justify-content: center; &#125; &amp; &gt; div &gt; input &#123; padding-top: 5px; padding-bottom: 5px; padding-left: 15px; padding-right: 15px; width: 290px; height: 30px; font-size: 14px; border: 1px solid rgb(222, 226, 230); &#125;`;export const LoginFooter = styled.div` border-top: 1px solid rgb(222, 226, 230); padding: 7px 16px; text-align: right; &amp; &gt; button &#123; padding: 6px 12px; color: #fff; background-color: #6c757d; border-radius: 5px; font-size: 13px; &#125;`; Styled-Component ì ìš©í•˜ê¸°import React, &#123; useState, useCallback &#125; from &quot;react&quot;;import &#123; LoginBody, LoginFooter, LoginHeader, ModalBackGround, ModalBox,&#125; from &quot;../assets/css/login&quot;;const LoginTemplate = (&#123; open, close &#125;) =&gt; &#123; const [form, setForm] = useState(&#123; email: &quot;&quot;, password: &quot;&quot;, &#125;); const onChange = useCallback( (e) =&gt; &#123; setForm(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;, [form] ); return open ? ( &lt;ModalBackGround&gt; &lt;ModalBox&gt; &lt;LoginHeader&gt; ë¡œê·¸ì¸ &lt;button className=&quot;close&quot; onClick=&#123;close&#125;&gt; &#123;&quot; &quot;&#125; &amp;times;&#123;&quot; &quot;&#125; &lt;/button&gt; &lt;/LoginHeader&gt; &lt;LoginBody className=&quot;login-body&quot;&gt; &lt;div&gt; &lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input id=&quot;password&quot; name=&quot;password&quot; type=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;/LoginBody&gt; &lt;LoginFooter&gt; &lt;button onClick=&#123;close&#125;&gt;ë‹«ê¸°&lt;/button&gt; &lt;/LoginFooter&gt; &lt;/ModalBox&gt; &lt;/ModalBackGround&gt; ) : null;&#125;;export default LoginTemplate;","text":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸°ê¸°ì¡´ì— style ë‚´ìš©ë“¤ì„ css íŒŒì¼ë¡œ ê´€ë¦¬í•´ë„ ë¬¸ì œê°€ ì—†ìœ¼ë‚˜, Reactì—ì„œëŠ” styleë§ˆì €ë„ jsíŒŒì¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•´ì£¼ëŠ” ë‹¤ì–‘í•œ í”„ë ˆì„ ì›Œí¬ë“¤ì´ ìˆë‹¤. jsíŒŒì¼ë¡œ ê´€ë¦¬í•˜ê²Œ ë˜ë©´ Reactì˜ ì—¬ëŸ¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ê¸° ë•Œë¬¸ì— ê¸°ì¡´ì— ì‘ì„±í•´ì¤€ Login ê´€ë ¨ css ë‚´ìš©ì„ js íŒŒì¼ë¡œ ë³€ê²½í•˜ë ¤ê³  í•œë‹¤. import styled, &#123; keyframes &#125; from &quot;styled-components&quot;;export const ModalFade = keyframes`&#123; from &#123; opacity: 0; margin-top: -50px; &#125; to &#123; opacity: 1; margin-top: 0; &#125;&#125;`;export const ModalBackGround = styled.div` position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center;`;export const ModalBox = styled.div` width: 90%; max-width: 400px; margin: 0 auto; border-radius: 0.3rem; background-color: #fff; animation: $&#123;ModalFade&#125; 0.5s; overflow: hidden;`;export const LoginHeader = styled.div` position: relative; padding: 16px 64px 16px 16px; background-color: #f1f1f1; font-weight: 700; &amp; &gt; button &#123; position: absolute; top: 15px; right: 15px; width: 30px; font-size: 21px; font-weight: 700; text-align: center; color: #999; border: 0; &#125;`;export const LoginBody = styled.div` padding: 10px; &amp; &gt; div &#123; padding: 5px; display: flex; align-items: center; justify-content: center; &#125; &amp; &gt; div &gt; input &#123; padding-top: 5px; padding-bottom: 5px; padding-left: 15px; padding-right: 15px; width: 290px; height: 30px; font-size: 14px; border: 1px solid rgb(222, 226, 230); &#125;`;export const LoginFooter = styled.div` border-top: 1px solid rgb(222, 226, 230); padding: 7px 16px; text-align: right; &amp; &gt; button &#123; padding: 6px 12px; color: #fff; background-color: #6c757d; border-radius: 5px; font-size: 13px; &#125;`; Styled-Component ì ìš©í•˜ê¸°import React, &#123; useState, useCallback &#125; from &quot;react&quot;;import &#123; LoginBody, LoginFooter, LoginHeader, ModalBackGround, ModalBox,&#125; from &quot;../assets/css/login&quot;;const LoginTemplate = (&#123; open, close &#125;) =&gt; &#123; const [form, setForm] = useState(&#123; email: &quot;&quot;, password: &quot;&quot;, &#125;); const onChange = useCallback( (e) =&gt; &#123; setForm(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;, [form] ); return open ? ( &lt;ModalBackGround&gt; &lt;ModalBox&gt; &lt;LoginHeader&gt; ë¡œê·¸ì¸ &lt;button className=&quot;close&quot; onClick=&#123;close&#125;&gt; &#123;&quot; &quot;&#125; &amp;times;&#123;&quot; &quot;&#125; &lt;/button&gt; &lt;/LoginHeader&gt; &lt;LoginBody className=&quot;login-body&quot;&gt; &lt;div&gt; &lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input id=&quot;password&quot; name=&quot;password&quot; type=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;/div&gt; &lt;/LoginBody&gt; &lt;LoginFooter&gt; &lt;button onClick=&#123;close&#125;&gt;ë‹«ê¸°&lt;/button&gt; &lt;/LoginFooter&gt; &lt;/ModalBox&gt; &lt;/ModalBackGround&gt; ) : null;&#125;;export default LoginTemplate;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Login","slug":"Frontend/Login","permalink":"https://ckck803.github.io/categories/Frontend/Login/"}],"tags":[]},{"title":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸°","slug":"react/login/login-modal-01-login","date":"2021-10-18T01:10:40.000Z","updated":"2024-11-23T16:46:04.256Z","comments":true,"path":"2021/10/18/react/login/login-modal-01-login/","link":"","permalink":"https://ckck803.github.io/2021/10/18/react/login/login-modal-01-login/","excerpt":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸°ê¸°ì¡´ì— ê°œì¸ í”„ë¡œì íŠ¸ë¡œ ë¡œê·¸ì¸ ì°½ì„ ë§Œë“¤ê²Œ ë˜ë©´ ë³„ë„ì˜ ì›¹ í˜ì´ì§€ë¡œ ë¡œê·¸ì¸ í™”ë©´ì„ êµ¬í˜„ì„ í–ˆë‹¤. í•˜ì§€ë§Œ ì¢€ ë” ê¹”ë”í•˜ê³  ë°˜ì‘ì ì¸ ë°©ë²•ì„ ì°¾ë‹¤ê°€ Modalì— ëŒ€í•´ ì•Œê²Œ ëê³  Modalì„ ì´ìš©í•´ Login í™”ë©´ì„ êµ¬í˜„í•´ ë³´ê³ ì í•œë‹¤. ë¡œê·¸ì¸ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°ê°€ì¥ ë°”ê¹¥ WrapperëŠ” ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆ„ë¥¸ ìƒíƒœì™€ ëˆ„ë¥´ì§€ ì•Šì€ ìƒíƒœë¥¼ ë³´ì—¬ì¤˜ì•¼ í•¨ìœ¼ë¡œ ì¡°ê±´ì ˆì„ ì´ìš©í•´ classnameì„ ë³€ê²½í•˜ë„ë¡ ì„¤ì •í•œë‹¤. // Login í˜ì´ì§€ê°€ ì—´ë¦¬ë©´ modal-wrapperê°€ ì„ íƒëœë‹¤. &lt;div className=&#123;open ? &quot;modal-wrapper&quot; : null&#125;&gt; ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ë„ ìƒíƒœì— ë”°ë¼ ë³´ì´ê±°ë‚˜ ë³´ì´ì§€ ì•Šê²Œ ìƒíƒœë¥¼ ë³€ê²½í•´ì¤„ í•„ìš”ê°€ ìˆì–´ ì¡°ê±´ì ˆì„ í†µí•´ ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤. &#123;open ? ( &lt;div className=&quot;login-modal&quot;&gt; &lt;div className=&quot;login-header&quot;&gt;ë¡œê·¸ì¸&lt;/div&gt; &lt;div className=&quot;login-input&quot;&gt; &lt;div className=&quot;login-id&quot;&gt; &lt;input className=&quot;email&quot; type=&quot;email&quot; id=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChangeEmail&#125; /&gt; &lt;/div&gt; &lt;div className=&quot;login-password&quot;&gt; &lt;input className=&quot;password&quot; type=&quot;password&quot; id=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChangePassword&#125; /&gt; &lt;/div&gt; &lt;div className=&quot;close-login&quot;&gt; &lt;button className=&quot;close-button&quot; onClick=&#123;close&#125;&gt; ë‹«ê¸° &lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;) : null&#125; LoginTemplate.js","text":"React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 9 - Redux Saga ì ìš© React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 8 - Redux ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 7 - JWT ì ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 6 - Login êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 5 - íšŒì› ê°€ì… Back end êµ¬í˜„ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 4 - ë¹„ë™ê¸° ì²˜ë¦¬ React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 3 - íšŒì› ê°€ì… React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° 2 - styled-component ì‚¬ìš©í•˜ê¸° React ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸° ë¡œê·¸ì¸ Modal ë§Œë“¤ê¸°ê¸°ì¡´ì— ê°œì¸ í”„ë¡œì íŠ¸ë¡œ ë¡œê·¸ì¸ ì°½ì„ ë§Œë“¤ê²Œ ë˜ë©´ ë³„ë„ì˜ ì›¹ í˜ì´ì§€ë¡œ ë¡œê·¸ì¸ í™”ë©´ì„ êµ¬í˜„ì„ í–ˆë‹¤. í•˜ì§€ë§Œ ì¢€ ë” ê¹”ë”í•˜ê³  ë°˜ì‘ì ì¸ ë°©ë²•ì„ ì°¾ë‹¤ê°€ Modalì— ëŒ€í•´ ì•Œê²Œ ëê³  Modalì„ ì´ìš©í•´ Login í™”ë©´ì„ êµ¬í˜„í•´ ë³´ê³ ì í•œë‹¤. ë¡œê·¸ì¸ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°ê°€ì¥ ë°”ê¹¥ WrapperëŠ” ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆ„ë¥¸ ìƒíƒœì™€ ëˆ„ë¥´ì§€ ì•Šì€ ìƒíƒœë¥¼ ë³´ì—¬ì¤˜ì•¼ í•¨ìœ¼ë¡œ ì¡°ê±´ì ˆì„ ì´ìš©í•´ classnameì„ ë³€ê²½í•˜ë„ë¡ ì„¤ì •í•œë‹¤. // Login í˜ì´ì§€ê°€ ì—´ë¦¬ë©´ modal-wrapperê°€ ì„ íƒëœë‹¤. &lt;div className=&#123;open ? &quot;modal-wrapper&quot; : null&#125;&gt; ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ë„ ìƒíƒœì— ë”°ë¼ ë³´ì´ê±°ë‚˜ ë³´ì´ì§€ ì•Šê²Œ ìƒíƒœë¥¼ ë³€ê²½í•´ì¤„ í•„ìš”ê°€ ìˆì–´ ì¡°ê±´ì ˆì„ í†µí•´ ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤. &#123;open ? ( &lt;div className=&quot;login-modal&quot;&gt; &lt;div className=&quot;login-header&quot;&gt;ë¡œê·¸ì¸&lt;/div&gt; &lt;div className=&quot;login-input&quot;&gt; &lt;div className=&quot;login-id&quot;&gt; &lt;input className=&quot;email&quot; type=&quot;email&quot; id=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChangeEmail&#125; /&gt; &lt;/div&gt; &lt;div className=&quot;login-password&quot;&gt; &lt;input className=&quot;password&quot; type=&quot;password&quot; id=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChangePassword&#125; /&gt; &lt;/div&gt; &lt;div className=&quot;close-login&quot;&gt; &lt;button className=&quot;close-button&quot; onClick=&#123;close&#125;&gt; ë‹«ê¸° &lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;) : null&#125; LoginTemplate.js import React, &#123; useState, useCallback &#125; from &quot;react&quot;;import styled from &quot;styled-components&quot;;import &quot;../assets/css/modal.css&quot;;const LoginTemplate = (&#123; open, close &#125;) =&gt; &#123; const [email, setEmail] = useState(&quot;&quot;); const [password, setPassword] = useState(&quot;&quot;); const onChangeEmail = useCallback( (e) =&gt; &#123; setEmail(e.target.value); &#125;, [email] ); const onChangePassword = useCallback( (e) =&gt; &#123; setPassword(e.target.value); &#125;, [password] ); return ( // Login í˜ì´ì§€ê°€ ì—´ë¦¬ë©´ modal-wrapperê°€ ì„ íƒëœë‹¤. &lt;div className=&#123;open ? &quot;modal-wrapper&quot; : null&#125;&gt; &#123;open ? ( &lt;div className=&quot;login-modal&quot;&gt; &lt;div className=&quot;login-header&quot;&gt;ë¡œê·¸ì¸&lt;/div&gt; &lt;div className=&quot;login-input&quot;&gt; &lt;div className=&quot;login-id&quot;&gt; &lt;input className=&quot;email&quot; type=&quot;email&quot; id=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChangeEmail&#125; /&gt; &lt;/div&gt; &lt;div className=&quot;login-password&quot;&gt; &lt;input className=&quot;password&quot; type=&quot;password&quot; id=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChangePassword&#125; /&gt; &lt;/div&gt; &lt;div className=&quot;close-login&quot;&gt; &lt;button className=&quot;close-button&quot; onClick=&#123;close&#125;&gt; ë‹«ê¸° &lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; ) : null&#125; &lt;/div&gt; );&#125;;export default LoginTemplate; ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ë§ í•˜ê¸°.modal-wrapper&#123; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; animation: modal-bg-show .5s;&#125;.login-modal&#123; width: 90%; max-width: 400px; margin:0 auto; border-radius: .3rem; background-color: #fff; animation: modal-show .5s; overflow: hidden;&#125;.login-input&#123; padding-top:10px;&#125;.login-header&#123; position: relative; padding: 16px 64px 16px 16px; background-color: #f1f1f1; font-weight: 700;&#125;.login-id&#123; padding:10px; display: flex; align-items: center; justify-content: center;&#125;.login-password&#123; display: flex; align-items: center; justify-content: center; padding-bottom: 20px;&#125;.email&#123; padding-top:5px; padding-bottom:5px; padding-left: 15px; padding-right: 15px; width: 290px; height: 30px; font-size: 14px; border: 1px solid rgb(222, 226, 230);&#125;.password&#123; padding-top:5px; padding-bottom:5px; padding-left: 15px; padding-right: 15px; width: 290px; height: 30px; font-size: 14px; border: 1px solid rgb(222, 226, 230);&#125;.close-login&#123; border-top: 1px solid; padding: 12px 16px; text-align: right;&#125;.close-button&#123; padding: 6px 12px; color: #fff; background-color: #6c757d; border-radius: 5px; font-size: 13px;&#125;@keyframes modal-show &#123; from &#123; opacity: 0; margin-top: -50px; &#125; to &#123; opacity: 1; margin-top: 0; &#125;&#125;@keyframes modal-bg-show &#123; from &#123; opacity: 0; &#125; to &#123; opacity: 1; &#125;&#125; ì‘ë™ í™•ì¸í•˜ê¸°ì‘ì„±ì´ ì™„ë£Œëœ LoginTemplateë¥¼ ê°–ê³  ë©”ì¸ í™”ë©´ì—ì„œ ë³´ë‚´ëŠ” open ìƒíƒœì— ë”°ë¼ Login Modalì´ ì˜ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. App.js import &#123; useCallback, useState &#125; from &quot;react&quot;;import LoginTemplate from &quot;./components/LoginTemplate&quot;;// import &quot;./assets/css/modal.css&quot;;function App() &#123; const [open, setOpen] = useState(false); const onClickButton = useCallback(() =&gt; &#123; console.log(&quot;open login modal&quot;); setOpen(!open); &#125;, [open]); return ( &lt;div&gt; &lt;button onClick=&#123;onClickButton&#125;&gt;ë¡œê·¸ì¸ Modal Pop Up&lt;/button&gt; &lt;LoginTemplate open=&#123;open&#125; close=&#123;onClickButton&#125; /&gt; &lt;/div&gt; );&#125;export default App;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Login","slug":"Frontend/Login","permalink":"https://ckck803.github.io/categories/Frontend/Login/"}],"tags":[]},{"title":"Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬","slug":"spring/spring-resource/multipart-exception","date":"2021-10-16T13:39:59.000Z","updated":"2024-11-27T02:00:27.603Z","comments":true,"path":"2021/10/16/spring/spring-resource/multipart-exception/","link":"","permalink":"https://ckck803.github.io/2021/10/16/spring/spring-resource/multipart-exception/","excerpt":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ MaxUploadSizeExceededException ì˜ˆì™¸MaxUploadSizeExceededException ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ëŠ” í¬ê²Œ ë‘ ê°€ì§€ê°€ ìˆë‹¤. ì²« ë²ˆì§¸ëŠ” FileSizeLimitExceededException ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ ë‘ ë²ˆì§¸ëŠ” SizeLimitExceededException ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œë‹¤. FileSizeLimitExceededException ì„œë²„ë¡œ ì „ì†¡ë˜ëŠ” ê° íŒŒì¼ í¬ê¸°ê°€ ì œí•œì„ ì´ˆê³¼í–ˆì„ ë•Œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸, ê¸°ë³¸ê°’ì€ 1MBë‹¤.org.apache.tomcat.util.http.fileupload.impl.FileSizeLimitExceededException: The field file exceeds its maximum permitted size of 1048576 bytes. SizeLimitExceededException ì„œë²„ë¡œ ì „ì†¡ë˜ëŠ” ëª¨ë“  íŒŒì¼ í¬ê¸°ê°€ ì œí•œì„ ì´ˆê³¼í–ˆì„ ë•Œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸, ê¸°ë³¸ê°’ì€ 10MBë‹¤.org.apache.tomcat.util.http.fileupload.impl.SizeLimitExceededException: the request was rejected because its size (29404104) exceeds the configured maximum (10485760)","text":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ MaxUploadSizeExceededException ì˜ˆì™¸MaxUploadSizeExceededException ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ëŠ” í¬ê²Œ ë‘ ê°€ì§€ê°€ ìˆë‹¤. ì²« ë²ˆì§¸ëŠ” FileSizeLimitExceededException ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ ë‘ ë²ˆì§¸ëŠ” SizeLimitExceededException ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œë‹¤. FileSizeLimitExceededException ì„œë²„ë¡œ ì „ì†¡ë˜ëŠ” ê° íŒŒì¼ í¬ê¸°ê°€ ì œí•œì„ ì´ˆê³¼í–ˆì„ ë•Œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸, ê¸°ë³¸ê°’ì€ 1MBë‹¤.org.apache.tomcat.util.http.fileupload.impl.FileSizeLimitExceededException: The field file exceeds its maximum permitted size of 1048576 bytes. SizeLimitExceededException ì„œë²„ë¡œ ì „ì†¡ë˜ëŠ” ëª¨ë“  íŒŒì¼ í¬ê¸°ê°€ ì œí•œì„ ì´ˆê³¼í–ˆì„ ë•Œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸, ê¸°ë³¸ê°’ì€ 10MBë‹¤.org.apache.tomcat.util.http.fileupload.impl.SizeLimitExceededException: the request was rejected because its size (29404104) exceeds the configured maximum (10485760) MaxUploadSizeExceededException ì˜ˆì™¸ í•´ê²°í•˜ê¸°Propertiesì— ì†ì„± ì¶”ê°€MaxUploadSizeExceededException ì˜ˆì™¸ë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì€ ìŠ¤í”„ë§ propertiesì— spring.servlet.multipart.max-file-size ê°’ì„ ëª…ì‹œì ìœ¼ë¡œ ëŠ˜ë ¤ì£¼ë©´ ëœë‹¤. spring.servlet.multipart.max-file-size=200MB SizeLimitExceededException ì˜ˆì™¸ë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì€ ìŠ¤í”„ë§ propertiesì— spring.servlet.multipart.max-request-size ê°’ì„ ëª…ì‹œì ìœ¼ë¡œ ëŠ˜ë ¤ì£¼ë©´ ëœë‹¤. spring.servlet.multipart.max-request-size=200MB MultipartResolver ë“±ë¡í•˜ê¸°ìŠ¤í”„ë§ propertiesì— ê°’ì„ ì¶”ê°€í•˜ëŠ” ë°©ì‹ ì™¸ì—ë„ MultipartResolver Beanì„ ë“±ë¡í•´ MaxUploadSizeê°’ì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤. ì˜ì¡´ì„± ì¶”ê°€// https://mvnrepository.com/artifact/commons-io/commons-ioimplementation group: &#x27;commons-io&#x27;, name: &#x27;commons-io&#x27;, version: &#x27;2.11.0&#x27;// https://mvnrepository.com/artifact/commons-fileupload/commons-fileuploadimplementation group: &#x27;commons-fileupload&#x27;, name: &#x27;commons-fileupload&#x27;, version: &#x27;1.4&#x27; MultipartResolver ëŠ” setMaxUploadSize ë©”ì†Œë“œë¥¼ í†µí•´ ëª¨ë“  íŒŒì¼ í¬ê¸°ì— ëŒ€í•œ ì„¤ì •ì„ setMaxUploadSizePerFile ë©”ì†Œë“œë¥¼ í†µí•´ ê°ê°ì˜ íŒŒì¼ í¬ê¸°ì— ëŒ€í•œ ì„¤ì •ì„ í•  ìˆ˜ ìˆë‹¤. ì•„ë¬´ ì„¤ì •ë„ ì•ˆí•˜ë©´ Maxê°‘ì´ ì—†ì–´ íŒŒì¼ í¬ê¸°ì— ì œí•œì´ ì—†ë‹¤. @SpringBootApplicationpublic class DemoMultipartApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DemoMultipartApplication.class, args); &#125; @Bean public MultipartResolver multipartResolver() &#123; CommonsMultipartResolver multipartResolver = new CommonsMultipartResolver(); multipartResolver.setMaxUploadSize(524288000); multipartResolver.setMaxUploadSizePerFile(52428800); return multipartResolver; &#125;&#125; ì˜ˆì™¸ ì²˜ë¦¬ControllerAdvice ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•œ ì˜ˆì™¸ ì²˜ë¦¬@ControllerAdvice@Slf4jpublic class FileExceptionControllerAdvice &#123; @ExceptionHandler(MaxUploadSizeExceededException.class) public ResponseEntity handleMaxSizeException(MaxUploadSizeExceededException exc, HttpServletRequest request, HttpServletResponse response) &#123; log.info(&quot;File size exceeds limit!&quot;); return ResponseEntity.notFound().build(); &#125;&#125; HandlerExceptionResolver ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì„ í†µí•œ ì˜ˆì™¸ì²˜ë¦¬@Component@Slf4jpublic class FileExceptionResolver implements HandlerExceptionResolver &#123; @Override public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) &#123; ModelAndView modelAndView = new ModelAndView(&quot;file&quot;); if (ex instanceof MaxUploadSizeExceededException) &#123; log.info(&quot;File size exceeds limit!&quot;); modelAndView.getModel().put(&quot;message&quot;, &quot;File size exceeds limit!&quot;); &#125; return modelAndView; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"File","slug":"Spring/Spring-Boot/File","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/File/"}],"tags":[]},{"title":"HttpClient ì‚¬ìš©í•˜ê¸° - Multipart Parameter ë³´ë‚´ê¸°","slug":"java/http/java-httpclient-3","date":"2021-10-14T21:31:46.000Z","updated":"2024-11-28T13:59:32.246Z","comments":true,"path":"2021/10/15/java/http/java-httpclient-3/","link":"","permalink":"https://ckck803.github.io/2021/10/15/java/http/java-httpclient-3/","excerpt":"HttpClient ì‚¬ìš©í•˜ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Paramater ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Multipart Parameter ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Multipart Parameter ë³´ë‚´ê¸° Clientê°€ ì„œë²„ë¡œ íŒŒì¼ ì„ ì „ì†¡í•˜ê±°ë‚˜ í•œë²ˆì— ì—¬ëŸ¬ê°œì˜ Form ë°ì´í„° ë¥¼ ë³´ë‚´ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ë¯¸ì§€ì™€ ê°™ì€ Binary ë°ì´í„°ëŠ” ê¸°ì¡´ application&#x2F;x-www-form-urlencoded ë‚˜ application&#x2F;json ê³¼ ê°™ì€ ìš”ì²­ìœ¼ë¡œ ì ì ˆì¹˜ ì•Šì•„ multipart&#x2F;form-data í˜•íƒœì˜ ë°ì´í„°ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. application&#x2F;x-www-form-urlencoded ëŠ” ë³´ë‚´ëŠ” Paramaterë¥¼ encoding í•´ì„œ ì „ì†¡í•œë‹¤. ë°ì´í„°ê°€ ì˜ìˆ«ìê°€ ì•„ë‹Œ ê²½ìš° 3ë°”ì´íŠ¸ë¡œ í‘œí˜„í•˜ê¸° ë•Œë¬¸ì— ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ ì „ì†¡í•  ê²½ìš° í˜ì´ë¡œë“œë¥¼ 3ë°°ë¡œ ë§Œë“¤ê¸° ë•Œë¬¸ì— ë¹„íš¨ìœ¨ ì ì´ë‹¤. multipart&#x2F;form-data ì˜ ê²½ìš°ëŠ” ì „ì†¡í•œ ëª¨ë“  ë¬¸ìë¥¼ ì¸ì½”ë”©í•˜ì§€ ì•Šì€ í˜•íƒœë¡œ ë³´ë‚¸ë‹¤. ì˜ì¡´ì„± ì¶”ê°€í•˜ê¸°// https://mvnrepository.com/artifact/org.apache.httpcomponents/httpmimeimplementation group: &#x27;org.apache.httpcomponents&#x27;, name: &#x27;httpmime&#x27;, version: &#x27;4.3.4&#x27; MultipartEntityBuilder ë¥¼ ì´ìš©í•´ HttpEntity ê°ì²´ ìƒì„± MultipartEntityBuilder ë¥¼ ì´ìš©í•´ ì‰½ê²Œ Textë‚˜ íŒŒì¼ì„ (Key, Value) í˜•íƒœë¡œ Request Body ì— ë„£ì„ ìˆ˜ ìˆë‹¤. Textë¥¼ ë³´ë‚¼ë•ŒëŠ” addTextBody ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ê°’ì„ ë„£ì–´ì£¼ê³  ì´ë¯¸ì§€ë‚˜ íŒŒì¼ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•ŒëŠ” addBinaryBody ë©”ì†Œë“œë¥¼ ì´ìš©í•´ Binary íŒŒì¼ ì„ ë„£ì–´ì£¼ê³  Content Type ìœ¼ë¡œ MULTIPART_FORM_DATA ë¥¼ ëª…ì‹œí•´ì¤€ë‹¤.","text":"HttpClient ì‚¬ìš©í•˜ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Paramater ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Multipart Parameter ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Multipart Parameter ë³´ë‚´ê¸° Clientê°€ ì„œë²„ë¡œ íŒŒì¼ ì„ ì „ì†¡í•˜ê±°ë‚˜ í•œë²ˆì— ì—¬ëŸ¬ê°œì˜ Form ë°ì´í„° ë¥¼ ë³´ë‚´ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ë¯¸ì§€ì™€ ê°™ì€ Binary ë°ì´í„°ëŠ” ê¸°ì¡´ application&#x2F;x-www-form-urlencoded ë‚˜ application&#x2F;json ê³¼ ê°™ì€ ìš”ì²­ìœ¼ë¡œ ì ì ˆì¹˜ ì•Šì•„ multipart&#x2F;form-data í˜•íƒœì˜ ë°ì´í„°ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. application&#x2F;x-www-form-urlencoded ëŠ” ë³´ë‚´ëŠ” Paramaterë¥¼ encoding í•´ì„œ ì „ì†¡í•œë‹¤. ë°ì´í„°ê°€ ì˜ìˆ«ìê°€ ì•„ë‹Œ ê²½ìš° 3ë°”ì´íŠ¸ë¡œ í‘œí˜„í•˜ê¸° ë•Œë¬¸ì— ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ ì „ì†¡í•  ê²½ìš° í˜ì´ë¡œë“œë¥¼ 3ë°°ë¡œ ë§Œë“¤ê¸° ë•Œë¬¸ì— ë¹„íš¨ìœ¨ ì ì´ë‹¤. multipart&#x2F;form-data ì˜ ê²½ìš°ëŠ” ì „ì†¡í•œ ëª¨ë“  ë¬¸ìë¥¼ ì¸ì½”ë”©í•˜ì§€ ì•Šì€ í˜•íƒœë¡œ ë³´ë‚¸ë‹¤. ì˜ì¡´ì„± ì¶”ê°€í•˜ê¸°// https://mvnrepository.com/artifact/org.apache.httpcomponents/httpmimeimplementation group: &#x27;org.apache.httpcomponents&#x27;, name: &#x27;httpmime&#x27;, version: &#x27;4.3.4&#x27; MultipartEntityBuilder ë¥¼ ì´ìš©í•´ HttpEntity ê°ì²´ ìƒì„± MultipartEntityBuilder ë¥¼ ì´ìš©í•´ ì‰½ê²Œ Textë‚˜ íŒŒì¼ì„ (Key, Value) í˜•íƒœë¡œ Request Body ì— ë„£ì„ ìˆ˜ ìˆë‹¤. Textë¥¼ ë³´ë‚¼ë•ŒëŠ” addTextBody ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ê°’ì„ ë„£ì–´ì£¼ê³  ì´ë¯¸ì§€ë‚˜ íŒŒì¼ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•ŒëŠ” addBinaryBody ë©”ì†Œë“œë¥¼ ì´ìš©í•´ Binary íŒŒì¼ ì„ ë„£ì–´ì£¼ê³  Content Type ìœ¼ë¡œ MULTIPART_FORM_DATA ë¥¼ ëª…ì‹œí•´ì¤€ë‹¤. HttpEntity httpEntity = MultipartEntityBuilder.create() .addTextBody(&quot;name&quot;, &quot;Dongwoo&quot;) .addTextBody(&quot;nickname&quot;, &quot;Victor&quot;) .addBinaryBody(&quot;file&quot;, new File(&quot;/Users/dongwoo-yang/test.txt&quot;), ContentType.APPLICATION_OCTET_STREAM, &quot;test.txt&quot;) .build(); ì „ì²´ ì†ŒìŠ¤ ì½”ë“œpublic class JavaHttpClientMultipart &#123; public static void main(String[] args) throws IOException &#123; String url = &quot;http://localhost:8080/test/multipart&quot;; CloseableHttpClient httpClient = HttpClients.createDefault(); HttpPost httpPost = new HttpPost(url); HttpEntity httpEntity = MultipartEntityBuilder.create() .addTextBody(&quot;name&quot;, &quot;Dongwoo&quot;) .addTextBody(&quot;nickname&quot;, &quot;Victor&quot;) .addBinaryBody(&quot;file&quot;, new File(&quot;/Users/dongwoo-yang/test.txt&quot;), ContentType.MULTIPART_FORM_DATA, &quot;test.txt&quot;) .build(); httpPost.setEntity(httpEntity); CloseableHttpResponse response = httpClient.execute(httpPost); System.out.println(&quot;=========================== start ============================&quot;); System.out.println(&quot;Status Code: &quot; + response.getStatusLine().getStatusCode()); System.out.println(&quot;============================ end =============================&quot;); httpClient.close(); &#125;&#125; Paramater ìš”ì²­ ë°›ì„ ìˆ˜ ìˆëŠ” Back-end ì½”ë“œ Spring ì—ì„œëŠ” Multipart ìš”ì²­ì„ ì‰½ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ MultipartFile í´ë˜ìŠ¤ë¥¼ ì œê³µí•œë‹¤. MultipartFile ê°ì²´ë¡œë¶€í„° ì…ë ¥ ìŠ¤íŠ¸ë¦½ì„ ë°›ì•„ì™€ ì „ì†¡ëœ íŒŒì¼ ë‚´ìš©ì„ ì½ì–´ì˜¨ë‹¤. @PostMapping(value =&quot;/test/multipart&quot;)public ResponseEntity testMultipart(MultipartFile file) throws Exception &#123; if(file == null)&#123; throw new Exception(); &#125; String line; BufferedReader br = new BufferedReader(new InputStreamReader(file.getInputStream())); while((line = br.readLine()) != null)&#123; log.info(line); &#125; return ResponseEntity.ok().build();&#125; ì°¸ê³ http://tcpschool.com/html-tag-attrs/form-enctype","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JAVA","slug":"Develop/JAVA","permalink":"https://ckck803.github.io/categories/Develop/JAVA/"},{"name":"Rest","slug":"Develop/JAVA/Rest","permalink":"https://ckck803.github.io/categories/Develop/JAVA/Rest/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"HttpClient ì‚¬ìš©í•˜ê¸° - Paramater ë³´ë‚´ê¸°","slug":"java/http/java-httpclient-2","date":"2021-10-14T20:31:46.000Z","updated":"2024-11-28T13:59:32.171Z","comments":true,"path":"2021/10/15/java/http/java-httpclient-2/","link":"","permalink":"https://ckck803.github.io/2021/10/15/java/http/java-httpclient-2/","excerpt":"HttpClient ì‚¬ìš©í•˜ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Paramater ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Multipart Parameter ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Paramater ë³´ë‚´ê¸° Clientê°€ ì„œë²„ë¡œ ìš”ì²­ê³¼ í•¨ê»˜ Paramaterë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ì€ í¬ê²Œ Form í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ê³¼ JSON í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ì´ ìˆë‹¤. ë³´í†µ Form í˜•íƒœì˜ ë°ì´í„°ëŠ” (Key, Value) í˜•íƒœì˜ ë°ì´í„°ë¡œ Http Bodyì— ë„£ì–´ì„œ ë³´ë‚´ê³  JSON í˜•íƒœì˜ ë°ì´í„°ëŠ” String í˜•íƒœë¡œ ë³€í™˜í•´ Http Bodyì— ë„£ì–´ì„œ ë³´ë‚¸ë‹¤. Form í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ HeaderëŠ” application&#x2F;x-www-form-urlencoded ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³  JSON í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ HeaderëŠ” application&#x2F;json ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. Paramater ìš”ì²­ ë°›ì„ ìˆ˜ ìˆëŠ” Back-end ì½”ë“œ/test/params ì— ë“¤ì–´ì˜¤ëŠ” Http ìš”ì²­ê³¼ í•¨ê»˜ ì˜¤ëŠ” Paramater ë‚´ìš©ì„ ì°ì–´ì£¼ëŠ” ë¡œì§ì„ ì‘ì„±í•´ì¤€ë‹¤. Form í˜•íƒœì˜ Paramaterë¥¼ ë°›ì„ ë•ŒëŠ” @RequestParam ì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. @PostMapping(&quot;/test/params&quot;)public ResponseEntity testParams(@RequestParam(&quot;name&quot;) String name, @RequestParam(&quot;nickname&quot;) String nickName)&#123; log.info(&quot;=========================== start ============================&quot;); log.info(&quot;Name : &quot; + name); log.info(&quot;Nickname : &quot; + nickName); log.info(&quot;============================ end =============================&quot;); return ResponseEntity.ok().build();&#125; ìš”ì²­ì‹œ ë³´ë‚´ëŠ” Paramater ì‘ì„± ìš”ì²­ì‹œ ë³´ë‚´ëŠ” ParamaterëŠ” NameValuePair ê°ì²´ë¥¼ ì´ìš©í•´ (Key, Value) í˜•íƒœë¡œ ê°’ì„ ë„£ì–´ì¤€ë‹¤. ì‘ì„±ì´ ì™„ë£Œëœ NameValuePair ê°ì²´ë¥¼ ì´ìš©í•´ HttpEntity ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. HttpEntity ê°ì²´ë¥¼ ìš”ì²­ ê°ì²´ Entityì— ë„£ì–´ì„œ Http ìš”ì²­ì„ ë³´ë‚´ë©´ ìš”ì²­ì‹œ Paramaterë„ ê°™ì´ ì „ë‹¬ ëœë‹¤. UrlEncodedFormEntity ë¥¼ ì´ìš©í•´ ë§Œë“¤ì–´ì§„ Entityì— ëŒ€í•œ ìš”ì²­ì€ ContentType ì´ application&#x2F;x-www-form-urlencoded ìœ¼ë¡œ ë³´ë‚´ì§„ë‹¤. List&lt;NameValuePair&gt; params = new ArrayList&lt;&gt;();params.add(new BasicNameValuePair(&quot;name&quot;, &quot;test&quot;));params.add(new BasicNameValuePair(&quot;nickname&quot;, &quot;victor&quot;));// NameValuePair ê°ì²´ ì´ìš©í•´ HttpEntity ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.HttpEntity entity = new UrlEncodedFormEntity(params);// ìš”ì²­ ê°ì²´ì— Entityì— Paramater ë„£ì–´ì£¼ê¸°httpPost.setEntity(entity);","text":"HttpClient ì‚¬ìš©í•˜ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Paramater ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Multipart Parameter ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Paramater ë³´ë‚´ê¸° Clientê°€ ì„œë²„ë¡œ ìš”ì²­ê³¼ í•¨ê»˜ Paramaterë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ì€ í¬ê²Œ Form í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ê³¼ JSON í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ì´ ìˆë‹¤. ë³´í†µ Form í˜•íƒœì˜ ë°ì´í„°ëŠ” (Key, Value) í˜•íƒœì˜ ë°ì´í„°ë¡œ Http Bodyì— ë„£ì–´ì„œ ë³´ë‚´ê³  JSON í˜•íƒœì˜ ë°ì´í„°ëŠ” String í˜•íƒœë¡œ ë³€í™˜í•´ Http Bodyì— ë„£ì–´ì„œ ë³´ë‚¸ë‹¤. Form í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ HeaderëŠ” application&#x2F;x-www-form-urlencoded ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³  JSON í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ HeaderëŠ” application&#x2F;json ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. Paramater ìš”ì²­ ë°›ì„ ìˆ˜ ìˆëŠ” Back-end ì½”ë“œ/test/params ì— ë“¤ì–´ì˜¤ëŠ” Http ìš”ì²­ê³¼ í•¨ê»˜ ì˜¤ëŠ” Paramater ë‚´ìš©ì„ ì°ì–´ì£¼ëŠ” ë¡œì§ì„ ì‘ì„±í•´ì¤€ë‹¤. Form í˜•íƒœì˜ Paramaterë¥¼ ë°›ì„ ë•ŒëŠ” @RequestParam ì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. @PostMapping(&quot;/test/params&quot;)public ResponseEntity testParams(@RequestParam(&quot;name&quot;) String name, @RequestParam(&quot;nickname&quot;) String nickName)&#123; log.info(&quot;=========================== start ============================&quot;); log.info(&quot;Name : &quot; + name); log.info(&quot;Nickname : &quot; + nickName); log.info(&quot;============================ end =============================&quot;); return ResponseEntity.ok().build();&#125; ìš”ì²­ì‹œ ë³´ë‚´ëŠ” Paramater ì‘ì„± ìš”ì²­ì‹œ ë³´ë‚´ëŠ” ParamaterëŠ” NameValuePair ê°ì²´ë¥¼ ì´ìš©í•´ (Key, Value) í˜•íƒœë¡œ ê°’ì„ ë„£ì–´ì¤€ë‹¤. ì‘ì„±ì´ ì™„ë£Œëœ NameValuePair ê°ì²´ë¥¼ ì´ìš©í•´ HttpEntity ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. HttpEntity ê°ì²´ë¥¼ ìš”ì²­ ê°ì²´ Entityì— ë„£ì–´ì„œ Http ìš”ì²­ì„ ë³´ë‚´ë©´ ìš”ì²­ì‹œ Paramaterë„ ê°™ì´ ì „ë‹¬ ëœë‹¤. UrlEncodedFormEntity ë¥¼ ì´ìš©í•´ ë§Œë“¤ì–´ì§„ Entityì— ëŒ€í•œ ìš”ì²­ì€ ContentType ì´ application&#x2F;x-www-form-urlencoded ìœ¼ë¡œ ë³´ë‚´ì§„ë‹¤. List&lt;NameValuePair&gt; params = new ArrayList&lt;&gt;();params.add(new BasicNameValuePair(&quot;name&quot;, &quot;test&quot;));params.add(new BasicNameValuePair(&quot;nickname&quot;, &quot;victor&quot;));// NameValuePair ê°ì²´ ì´ìš©í•´ HttpEntity ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.HttpEntity entity = new UrlEncodedFormEntity(params);// ìš”ì²­ ê°ì²´ì— Entityì— Paramater ë„£ì–´ì£¼ê¸°httpPost.setEntity(entity); ì „ì²´ ì†ŒìŠ¤ ì½”ë“œpublic class JavaHttpClientParam &#123; public static void main(String[] args) throws IOException &#123; BufferedReader br; CloseableHttpClient client = HttpClients.createDefault(); HttpPost httpPost = new HttpPost(&quot;http://localhost:8080/test/params&quot;); List&lt;NameValuePair&gt; params = new ArrayList&lt;&gt;(); params.add(new BasicNameValuePair(&quot;name&quot;, &quot;test&quot;)); params.add(new BasicNameValuePair(&quot;nickname&quot;, &quot;victor&quot;)); HttpEntity entity = new UrlEncodedFormEntity(params); httpPost.setEntity(entity); CloseableHttpResponse response = client.execute(httpPost); System.out.println(&quot;=========================== start ============================&quot;); System.out.println(&quot;Http Status Code : &quot; + response.getStatusLine().getStatusCode()); System.out.println(&quot;============================ end =============================&quot;); &#125;&#125; JSON ìš”ì²­ ë³´ë‚´ê¸°Paramater ìš”ì²­ ë°›ì„ ìˆ˜ ìˆëŠ” Back-end ì½”ë“œ /test/json ì— ë“¤ì–´ì˜¤ëŠ” Http ìš”ì²­ê³¼ í•¨ê»˜ ì˜¤ëŠ” JSON ë‚´ìš©ì„ ì°ì–´ì£¼ëŠ” ë¡œì§ì„ ì‘ì„±í•´ì¤€ë‹¤. JSON í˜•íƒœì˜ Paramaterë¥¼ ë°›ì„ ë•ŒëŠ” @RequestBody ì„ ì´ìš©í•´ Request Body ë‚´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. @PostMapping(&quot;/test/json&quot;)public ResponseEntity testJsonParams(@RequestBody TestParam param)&#123; log.info(&quot;=========================== start ============================&quot;); log.info(&quot;Name : &quot; + param.getName()); log.info(&quot;Nickname : &quot; + param.getNickname()); log.info(&quot;============================ end =============================&quot;); return ResponseEntity.ok().build();&#125; nameê³¼ nicknameì„ JSON í˜•íƒœì˜ ìš”ì²­ìœ¼ë¡œ ë³´ë‚´ê¸° ìœ„í•´ í•´ë‹¹ ê°’ë“¤ì„ ì¸ìë¡œ ê°–ëŠ” TestParam í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤. class TestParam implements Serializable &#123; private String name; private String nickname; public TestParam(String name, String nickname)&#123; this.name = name; this.nickname = nickname; &#125;&#125; ê°ì²´ë¥¼ Stringìœ¼ë¡œ ë³€í™˜í•˜ê¸° ObjectMapper ë¥¼ ì´ìš©í•´ TestParam ê°ì²´ë¥¼ String ìœ¼ë¡œ ë³€í™˜í•œë‹¤. ë§Œë“¤ì–´ì§„ String ê°’ì„ ì´ìš©í•´ Entity ê°ì²´ë¥¼ ìƒì„±í•œ í›„ Request(ìš”ì²­) ê°ì²´ Entity ì— ë„£ì–´ì¤€ë‹¤. TestParam param = new TestParam(&quot;test&quot;, &quot;Victor&quot;);ObjectMapper objectMapper = new ObjectMapper();// ê°ì²´ë¥¼ ObjectMapper ë¥¼ ì´ìš©í•´ Stringìœ¼ë¡œ ë³€í™˜í•œ í›„ StringEntity ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.StringEntity stringEntity = new StringEntity(objectMapper.writeValueAsString(param));// ìš”ì²­ Entityì— ë„£ì–´ì¤€ë‹¤.httpPost.setEntity(stringEntity); ContentType ë³€ê²½í•˜ê¸°JSON í˜•íƒœì˜ ìš”ì²­ì„ ë³´ë‚´ê¸° ìœ„í•´ì„œëŠ” ìš”ì²­ Header ë‚´ Content-type ì„ application&#x2F;json ë¡œ ì„¤ì •í•´ì„œ ë³´ë‚´ì¤€ë‹¤. httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);httpPost.setHeader(&quot;Content-type&quot;, &quot;application/json&quot;);CloseableHttpResponse response = httpClient.execute(httpPost); ì „ì²´ ì†ŒìŠ¤ ì½”ë“œpublic class JavaHttpClientJson &#123; public static void main(String[] args) throws IOException &#123; CloseableHttpClient httpClient = HttpClients.createDefault(); HttpPost httpPost = new HttpPost(&quot;http://localhost:8080/test/json&quot;); TestParam param = new TestParam(&quot;test&quot;, &quot;Victor&quot;); ObjectMapper objectMapper = new ObjectMapper(); StringEntity stringEntity = new StringEntity(objectMapper.writeValueAsString(param)); httpPost.setEntity(stringEntity); httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;); httpPost.setHeader(&quot;Content-type&quot;, &quot;application/json&quot;); CloseableHttpResponse response = httpClient.execute(httpPost); System.out.println(&quot;=========================== start ============================&quot;); System.out.println(objectMapper.writeValueAsString(param)); System.out.println(&quot;Http Status Code : &quot; + response.getStatusLine().getStatusCode()); System.out.println(&quot;============================ end =============================&quot;); &#125;&#125;class TestParam implements Serializable &#123; private String name; private String nickname; public TestParam(String name, String nickname)&#123; this.name = name; this.nickname = nickname; &#125; public String getName()&#123; return name; &#125; public String getNickname()&#123; return nickname; &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JAVA","slug":"Develop/JAVA","permalink":"https://ckck803.github.io/categories/Develop/JAVA/"},{"name":"Rest","slug":"Develop/JAVA/Rest","permalink":"https://ckck803.github.io/categories/Develop/JAVA/Rest/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"HttpClient ì‚¬ìš©í•˜ê¸°","slug":"java/http/java-httpclient-1","date":"2021-10-14T19:31:46.000Z","updated":"2024-11-28T13:59:32.316Z","comments":true,"path":"2021/10/15/java/http/java-httpclient-1/","link":"","permalink":"https://ckck803.github.io/2021/10/15/java/http/java-httpclient-1/","excerpt":"HttpClient ì‚¬ìš©í•˜ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Paramater ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Multipart Parameter ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° HttpClient ëŠ” Apacheì—ì„œ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ HTTP ë¥¼ ì‚¬ìš©í•˜ëŠ” í†µì‹ ì— ì†ì‰½ê²Œ ìì›ì„ ìš”ì²­í•˜ê³  ì‘ë‹µë°›ì„ ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤. // https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclientimplementation group: &#x27;org.apache.httpcomponents&#x27;, name: &#x27;httpclient&#x27;, version: &#x27;4.3.4&#x27; Back-end ControllerHttpClient ë¥¼ ì‚¬ìš©í•´ ìš”ì²­ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•œ ì„œë²„ Controllerë¥¼ ìƒì„±í•œë‹¤. @RestControllerpublic class HttpClientBackend &#123; @PostMapping(&quot;/hello&quot;) @CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;) public String hello()&#123; return &quot;Hello World!&quot;; &#125;&#125; HttpClient ê°ì²´ ê°€ì ¸ì˜¤ê¸°","text":"HttpClient ì‚¬ìš©í•˜ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Paramater ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° - Multipart Parameter ë³´ë‚´ê¸° HttpClient ì‚¬ìš©í•˜ê¸° HttpClient ëŠ” Apacheì—ì„œ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ HTTP ë¥¼ ì‚¬ìš©í•˜ëŠ” í†µì‹ ì— ì†ì‰½ê²Œ ìì›ì„ ìš”ì²­í•˜ê³  ì‘ë‹µë°›ì„ ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤. // https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclientimplementation group: &#x27;org.apache.httpcomponents&#x27;, name: &#x27;httpclient&#x27;, version: &#x27;4.3.4&#x27; Back-end ControllerHttpClient ë¥¼ ì‚¬ìš©í•´ ìš”ì²­ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•œ ì„œë²„ Controllerë¥¼ ìƒì„±í•œë‹¤. @RestControllerpublic class HttpClientBackend &#123; @PostMapping(&quot;/hello&quot;) @CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;) public String hello()&#123; return &quot;Hello World!&quot;; &#125;&#125; HttpClient ê°ì²´ ê°€ì ¸ì˜¤ê¸° HttpClient ê°ì²´ë¥¼ ê°€ì €ì˜¤ëŠ” ë°©ë²•ì€ HttpClients í´ë˜ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” createDefault ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ê³¼ HttpClientBuilder ë¥¼ ì´ìš©í•œ ë°©ë²•ì´ ìˆë‹¤. createDefault ë‚´ë¶€ë¥¼ ë³´ë©´ HttpClientBuilder ë¥¼ ì´ìš©í•´ HttpClient ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— ì‚¬ì‹¤ìƒ ë˜‘ê°™ë‹¤. CloseableHttpClient client = HttpClients.createDefault();CloseableHttpClient client2 = HttpClientBuilder.create().build(); Post ìš”ì²­ì„ ìœ„í•œ HttpPost ê°ì²´ ìƒì„± HttpPostë¥¼ ì´ìš©í•´ Post ìš”ì²­ë³´ë‚´ê¸° ìœ„í•œ ìš”ì²­ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. ê°ì²´ë¥¼ ë§Œë“¤ë•Œ ìš”ì²­ì„ ë³´ë‚´ê¸° ìœ„í•œ ìš”ì²­ URLì„ ë„£ì–´ì¤€ë‹¤. HttpPost httpPost = new HttpPost(&quot;http://localhost:8080/hello&quot;); ìš”ì²­ í›„ ì‘ë‹µ ê°ì²´ ë°›ì•„ì˜¤ê¸° HttpClient ê°ì²´ì˜ execute ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì„œë²„ ì¸¡ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. execute ë©”ì†Œë“œì˜ ë§¤ê²Œë³€ìˆ˜ë¡œ ìƒì„±í•œ ìš”ì²­ ê°ì²´ (HttpGet, HttpPost, HttpPut, HttpPatch) ë¥¼ ë„£ì–´ì¤€ë‹¤. CloseableHttpResponse response = client.execute(httpPost); ì‘ë‹µ ê°’ ê°€ì ¸ì˜¤ê¸° ì‘ë‹µ ê°ì²´ë¡œë¶€í„° ì…ë ¥ ìŠ¤íŠ¸ë¦¼ ì„ ê°€ì ¸ì™€ ê°’ì„ ì½ì–´ì˜¨ë‹¤. BufferedReader br = new BufferedReader(new InputStreamReader(response.getEntity().getContent())); ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ@SpringBootApplicationpublic class JavaHttpclientApplication &#123; public static void main(String[] args) throws IOException &#123; CloseableHttpClient client = HttpClients.createDefault(); HttpPost httpPost = new HttpPost(&quot;http://localhost:8080/hello&quot;); CloseableHttpResponse response = client.execute(httpPost); System.out.println(&quot;============================ body =============================&quot;); String inputLine; StringBuffer result = new StringBuffer(); BufferedReader br = new BufferedReader(new InputStreamReader(response.getEntity().getContent())); while ((inputLine = br.readLine()) != null) &#123; result.append(inputLine); &#125; System.out.println(result); System.out.println(&quot;============================ body =============================&quot;); br.close(); client.close(); &#125;&#125; HttpClient Fluent API ì‚¬ìš©í•˜ê¸°Fluent API ë¥¼ ì´ìš©í•˜ë©´ ì¡°ê¸ˆë” ì‰½ê³  ê°„í¸í•˜ê³  ì§ê´€ì ìœ¼ë¡œ HTTP ìš”ì²­ì„ í•  ìˆ˜ ìˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€implementation group: &#x27;org.apache.httpcomponents&#x27;, name: &#x27;httpclient&#x27;, version: &#x27;4.3.4&#x27;// https://mvnrepository.com/artifact/org.apache.httpcomponents/fluent-hcimplementation group: &#x27;org.apache.httpcomponents&#x27;, name: &#x27;fluent-hc&#x27;, version: &#x27;4.3.4&#x27;&#125; ì„œë²„ì¸¡ì— ìš”ì²­í•˜ê³  ì‘ë‹µ ë°›ê¸°Fluent API ì—ì„œ ì œê³µí•˜ëŠ” Request ë¥¼ ì´ìš©í•˜ë©´ ìš”ì²­ ê°ì²´ë¥¼ ë”°ë¡œ ìƒì„±í•  í•„ìš” ì—†ì´ ê°„í¸í•˜ê²Œ ìš”ì²­í•˜ê³  ì‹¤í–‰í•´ ì‘ë‹µê°’ì„ ë°›ì•„ì˜¬ ìˆ˜ ìˆë‹¤. HttpResponse response = Request .Post(&quot;http://localhost:8080/hello&quot;) .execute() .returnResponse(); ì „ì²´ ì†ŒìŠ¤ ì½”ë“œpublic class JavaHttpClientFluentApi &#123; public static void main(String[] args) throws IOException &#123; HttpResponse response = Request .Post(&quot;http://localhost:8080/hello&quot;) .execute() .returnResponse(); String line; StringBuilder stringBuilder = new StringBuilder(); BufferedReader br = new BufferedReader(new InputStreamReader(response.getEntity().getContent())); while((line = br.readLine()) != null)&#123; stringBuilder.append(line); &#125; System.out.println(&quot;=========================== start ============================&quot;); System.out.println(&quot;Status Code: &quot; + response.getStatusLine().getStatusCode()); System.out.println(&quot;Content: &quot; + stringBuilder.toString()); System.out.println(&quot;============================ end =============================&quot;); &#125;&#125; ì°¸ê³  ì‚¬ì´íŠ¸https://www.baeldung.com/httpclient4","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JAVA","slug":"Develop/JAVA","permalink":"https://ckck803.github.io/categories/Develop/JAVA/"},{"name":"REST","slug":"Develop/JAVA/REST","permalink":"https://ckck803.github.io/categories/Develop/JAVA/REST/"}],"tags":[]},{"title":"Spring Boot @RequestMapping","slug":"spring/spring-framework/mvc/spring-mvc-02-requestmapping","date":"2021-10-12T16:05:00.000Z","updated":"2024-02-26T15:59:20.648Z","comments":true,"path":"2021/10/13/spring/spring-framework/mvc/spring-mvc-02-requestmapping/","link":"","permalink":"https://ckck803.github.io/2021/10/13/spring/spring-framework/mvc/spring-mvc-02-requestmapping/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot @RequestMapping ì‚¬ìš©ì ìš”ì²­ ë°›ê¸°RequestMapping ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ í•´ë‹¹ URLë¡œ ë“¤ì–´ì˜¤ëŠ” ì‚¬ìš©ì ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ì´ë•Œ, methodë¥¼ ëª…ì‹œí•˜ì§€ ì•Šì„ ê²½ìš° GET, POST, PUT, PATCH, DELETE ëª¨ë“  methodë¥¼ ì‚¬ìš©í•´ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ, íŠ¹ì • methodì—ì„œë§Œ ìš”ì²­ì„ ë°›ê³  ì‹¶ì„ ê²½ìš° methodë¥¼ ëª…ì‹œí•´ì¤˜ì•¼ í•œë‹¤. @RequestMapping(value = &quot;/hello-basic&quot;)public String helloBasic()&#123; log.info(&quot;helloBasic&quot;); return &quot;ok&quot;;&#125; @RequestMapping(value = &quot;/mapping-get-v1&quot;, method = RequestMethod.GET)public String mappingGetV1()&#123; log.info(&quot;helloBasic&quot;); return &quot;ok&quot;;&#125; GetMapping ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©í•˜ê¸°@GetMapping(value = &quot;/mapping-get-v2&quot;)public String mappingGetV2()&#123; log.info(&quot;helloBasic&quot;); return &quot;ok&quot;;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot @RequestMapping ì‚¬ìš©ì ìš”ì²­ ë°›ê¸°RequestMapping ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ í•´ë‹¹ URLë¡œ ë“¤ì–´ì˜¤ëŠ” ì‚¬ìš©ì ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ì´ë•Œ, methodë¥¼ ëª…ì‹œí•˜ì§€ ì•Šì„ ê²½ìš° GET, POST, PUT, PATCH, DELETE ëª¨ë“  methodë¥¼ ì‚¬ìš©í•´ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ, íŠ¹ì • methodì—ì„œë§Œ ìš”ì²­ì„ ë°›ê³  ì‹¶ì„ ê²½ìš° methodë¥¼ ëª…ì‹œí•´ì¤˜ì•¼ í•œë‹¤. @RequestMapping(value = &quot;/hello-basic&quot;)public String helloBasic()&#123; log.info(&quot;helloBasic&quot;); return &quot;ok&quot;;&#125; @RequestMapping(value = &quot;/mapping-get-v1&quot;, method = RequestMethod.GET)public String mappingGetV1()&#123; log.info(&quot;helloBasic&quot;); return &quot;ok&quot;;&#125; GetMapping ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©í•˜ê¸°@GetMapping(value = &quot;/mapping-get-v2&quot;)public String mappingGetV2()&#123; log.info(&quot;helloBasic&quot;); return &quot;ok&quot;;&#125; Path Variable ì‚¬ìš©@GetMapping(&quot;/mapping/&#123;userId&#125;&quot;)public String mappingPath(@PathVariable(&quot;userId&quot;) String data) &#123; log.info(&quot;mappingPath userId=&#123;&#125;&quot;, data); return &quot;ok&quot;;&#125; /** * PathVariable ì‚¬ìš© ë‹¤ì¤‘ */@GetMapping(&quot;/mapping/users/&#123;userId&#125;/orders/&#123;orderId&#125;&quot;)public String mappingPath(@PathVariable String userId, @PathVariable Long orderId) &#123; log.info(&quot;mappingPath userId=&#123;&#125;, orderId=&#123;&#125;&quot;, userId, orderId); return &quot;ok&quot;;&#125; íŠ¹ì • ë¯¸ë””ì–´ íƒ€ì… ìš”ì²­ë§Œ ì²˜ë¦¬í•˜ê³  ì‹¶ì„ ê²½ìš°consumes ì„ ì´ìš©í•´ /** * Content-Type í—¤ë” ê¸°ë°˜ ì¶”ê°€ ë§¤í•‘ Media Type * consumes=&quot;application/json&quot; * consumes=&quot;!application/json&quot; * consumes=&quot;application/*&quot; * consumes=&quot;*\\/*&quot; * MediaType.APPLICATION_JSON_VALUE */@PostMapping(value = &quot;/mapping-consume&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)public String mappingConsumes() &#123; log.info(&quot;mappingConsumes&quot;); return &quot;ok&quot;;&#125; íŠ¹ì • ë¯¸ë””ì–´ íƒ€ì… ì‘ë‹µì„ ë§Œë“¤ê³  ì‹¶ì„ ê²½ìš°Acceptì˜ Media Typeê³¼ producesê°€ ì¼ì¹˜í•´ì•¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. /*** Accept í—¤ë” ê¸°ë°˜ Media Type * produces = &quot;text/html&quot;* produces = &quot;!text/html&quot; * produces = &quot;text/*&quot;* produces = &quot;*\\/*&quot;*/@PostMapping(value = &quot;/mapping-produce&quot;, produces = MediaType.TEXT_HTML_VALUE)public String mappingProduces() &#123; log.info(&quot;mappingProduces&quot;); return &quot;ok&quot;;&#125; @RestController@Slf4jpublic class MappingController &#123; @RequestMapping(value = &quot;/hello-basic&quot;) public String helloBasic()&#123; log.info(&quot;helloBasic&quot;); return &quot;ok&quot;; &#125; @RequestMapping(value = &quot;/mapping-get-v1&quot;, method = RequestMethod.GET) public String mappingGetV1()&#123; log.info(&quot;helloBasic&quot;); return &quot;ok&quot;; &#125; @GetMapping(value = &quot;/mapping-get-v2&quot;) public String mappingGetV2()&#123; log.info(&quot;helloBasic&quot;); return &quot;ok&quot;; &#125; /** * PathVariable ì‚¬ìš© * ë³€ìˆ˜ëª…ì´ ê°™ìœ¼ë©´ ìƒëµ ê°€ëŠ¥ * @PathVariable(&quot;userId&quot;) String userId -&gt; @PathVariable userId */ @GetMapping(&quot;/mapping/&#123;userId&#125;&quot;) public String mappingPath(@PathVariable(&quot;userId&quot;) String data) &#123; log.info(&quot;mappingPath userId=&#123;&#125;&quot;, data); return &quot;ok&quot;; &#125; /** * PathVariable ì‚¬ìš© ë‹¤ì¤‘ */ @GetMapping(&quot;/mapping/users/&#123;userId&#125;/orders/&#123;orderId&#125;&quot;) public String mappingPath(@PathVariable String userId, @PathVariable Long orderId) &#123; log.info(&quot;mappingPath userId=&#123;&#125;, orderId=&#123;&#125;&quot;, userId, orderId); return &quot;ok&quot;; &#125; /** * íŒŒë¼ë¯¸í„°ë¡œ ì¶”ê°€ ë§¤í•‘ * params=&quot;mode&quot;, * params=&quot;!mode&quot; * params=&quot;mode=debug&quot; * params=&quot;mode!=debug&quot; (! = ) * params = &#123;&quot;mode=debug&quot;,&quot;data=good&quot;&#125; */ @GetMapping(value = &quot;/mapping-param&quot;, params = &quot;mode=debug&quot;) public String mappingParam() &#123; log.info(&quot;mappingParam&quot;); return &quot;ok&quot;; &#125; /** *íŠ¹ì • í—¤ë”ë¡œ ì¶”ê°€ ë§¤í•‘ * headers=&quot;mode&quot;, * headers=&quot;!mode&quot; * headers=&quot;mode=debug&quot; * headers=&quot;mode!=debug&quot; (! = ) */ @GetMapping(value = &quot;/mapping-header&quot;, headers = &quot;mode=debug&quot;) public String mappingHeader() &#123; log.info(&quot;mappingHeader&quot;); return &quot;ok&quot;; &#125; /** * Content-Type í—¤ë” ê¸°ë°˜ ì¶”ê°€ ë§¤í•‘ Media Type * consumes=&quot;application/json&quot; * consumes=&quot;!application/json&quot; * consumes=&quot;application/*&quot; * consumes=&quot;*\\/*&quot; * MediaType.APPLICATION_JSON_VALUE */ @PostMapping(value = &quot;/mapping-consume&quot;, consumes = MediaType.APPLICATION_JSON_VALUE) public String mappingConsumes() &#123; log.info(&quot;mappingConsumes&quot;); return &quot;ok&quot;; &#125; /** * Accept í—¤ë” ê¸°ë°˜ Media Type * produces = &quot;text/html&quot; * produces = &quot;!text/html&quot; * produces = &quot;text/*&quot; * produces = &quot;*\\/*&quot; */ @PostMapping(value = &quot;/mapping-produce&quot;, produces = MediaType.TEXT_HTML_VALUE) public String mappingProduces() &#123; log.info(&quot;mappingProduces&quot;); return &quot;ok&quot;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring MVC Request Life Cycle - ViewResolver","slug":"spring/spring-framework/lifecycle/spring-lifecycle-04-viewresolver","date":"2021-10-11T23:05:00.000Z","updated":"2024-02-26T15:56:50.418Z","comments":true,"path":"2021/10/12/spring/spring-framework/lifecycle/spring-lifecycle-04-viewresolver/","link":"","permalink":"https://ckck803.github.io/2021/10/12/spring/spring-framework/lifecycle/spring-lifecycle-04-viewresolver/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter Spring MVC Request Life Cycle - ViewResolver í•¸ë“¤ëŸ¬ ì–´ëí„° í˜¸ì¶œ ViewResolver í˜¸ì¶œ spring.mvc.view.prefix=/WEB-INF/views/spring.mvc.view.suffix=.jsp ViewResolver.java public interface ViewResolver &#123; @Nullable View resolveViewName(String viewName, Locale locale) throws Exception;&#125; ìŠ¤í”„ë§ ë¶€íˆ¬ì—ì„œëŠ” InternalResourceViewResolver ë¥¼ ë“±ë¡í• ë•Œ spring.mvc.view.prefix, spring.mvc.view.suffix ì„¤ì • ì •ë³´ë¥¼ ê°–ê³ ì™€ ë“±ë¡í•´ì¤€ë‹¤. public InternalResourceViewResolver(String prefix, String suffix) &#123; this(); setPrefix(prefix); setSuffix(suffix);&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter Spring MVC Request Life Cycle - ViewResolver í•¸ë“¤ëŸ¬ ì–´ëí„° í˜¸ì¶œ ViewResolver í˜¸ì¶œ spring.mvc.view.prefix=/WEB-INF/views/spring.mvc.view.suffix=.jsp ViewResolver.java public interface ViewResolver &#123; @Nullable View resolveViewName(String viewName, Locale locale) throws Exception;&#125; ìŠ¤í”„ë§ ë¶€íˆ¬ì—ì„œëŠ” InternalResourceViewResolver ë¥¼ ë“±ë¡í• ë•Œ spring.mvc.view.prefix, spring.mvc.view.suffix ì„¤ì • ì •ë³´ë¥¼ ê°–ê³ ì™€ ë“±ë¡í•´ì¤€ë‹¤. public InternalResourceViewResolver(String prefix, String suffix) &#123; this(); setPrefix(prefix); setSuffix(suffix);&#125; InternalResourceViewResolver.java public class InternalResourceViewResolver extends UrlBasedViewResolver &#123; private static final boolean jstlPresent = ClassUtils.isPresent(&quot;javax.servlet.jsp.jstl.core.Config&quot;, InternalResourceViewResolver.class.getClassLoader()); @Nullable private Boolean alwaysInclude; public InternalResourceViewResolver() &#123; Class&lt;?&gt; viewClass = requiredViewClass(); if (InternalResourceView.class == viewClass &amp;&amp; jstlPresent) &#123; viewClass = JstlView.class; &#125; setViewClass(viewClass); &#125; public InternalResourceViewResolver(String prefix, String suffix) &#123; this(); setPrefix(prefix); setSuffix(suffix); &#125; public void setAlwaysInclude(boolean alwaysInclude) &#123; this.alwaysInclude = alwaysInclude; &#125; @Override protected Class&lt;?&gt; requiredViewClass() &#123; return InternalResourceView.class; &#125; @Override protected AbstractUrlBasedView instantiateView() &#123; return (getViewClass() == InternalResourceView.class ? new InternalResourceView() : (getViewClass() == JstlView.class ? new JstlView() : super.instantiateView())); &#125; @Override protected AbstractUrlBasedView buildView(String viewName) throws Exception &#123; InternalResourceView view = (InternalResourceView) super.buildView(viewName); if (this.alwaysInclude != null) &#123; view.setAlwaysInclude(this.alwaysInclude); &#125; view.setPreventDispatchLoop(true); return view; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Framework","slug":"Spring/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/"},{"name":"lifecycle","slug":"Spring/Spring-Framework/lifecycle","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/lifecycle/"}],"tags":[]},{"title":"Spring MVC Request Life Cycle - HandlerAdapter","slug":"spring/spring-framework/lifecycle/spring-lifecycle-03-handleradapter","date":"2021-10-11T22:05:00.000Z","updated":"2024-02-26T15:56:45.373Z","comments":true,"path":"2021/10/12/spring/spring-framework/lifecycle/spring-lifecycle-03-handleradapter/","link":"","permalink":"https://ckck803.github.io/2021/10/12/spring/spring-framework/lifecycle/spring-lifecycle-03-handleradapter/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter HandlerAdapter ì‚´í´ë³´ê¸° HandlerAdapter ëŠ” HandlerMapping í†µí•´ ì°¾ì€ Handlerë¥¼ ì´ìš©í•´ ì‚¬ìš©ì ìš”ì²­(Request)ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤. public interface HandlerAdapter &#123; // supports ë©”ì†Œë“œë¥¼ í†µí•´ HandlerAdapter ê°€ ì¸ìë¡œ ë°›ì€ handlerë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. ë³´í†µ Handlerì—ëŠ” HandlerAdapterë¥¼ ê°–ëŠ”ë‹¤. boolean supports(Object handler); // handlerë¥¼ ì´ìš©í•´ ì‚¬ìš©ì Requestë¥¼ ì²˜ë¦¬í•œë‹¤. @Nullable ModelAndView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception; @Deprecated long getLastModified(HttpServletRequest request, Object handler);&#125; HandlerAdapter êµ¬í˜„ì²´ AbstractHandlerMethodAdapter RequestMappingHandlerAdapter HandlerAdapter ì§€ì› ì—¬ë¶€ í™•ì¸í•˜ê¸° supports ë©”ì†Œë“œë¥¼ ì´ìš©í•´ HandlerAdapterê°€ ì „ë‹¬ë°›ì€ Handlerë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter HandlerAdapter ì‚´í´ë³´ê¸° HandlerAdapter ëŠ” HandlerMapping í†µí•´ ì°¾ì€ Handlerë¥¼ ì´ìš©í•´ ì‚¬ìš©ì ìš”ì²­(Request)ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤. public interface HandlerAdapter &#123; // supports ë©”ì†Œë“œë¥¼ í†µí•´ HandlerAdapter ê°€ ì¸ìë¡œ ë°›ì€ handlerë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. ë³´í†µ Handlerì—ëŠ” HandlerAdapterë¥¼ ê°–ëŠ”ë‹¤. boolean supports(Object handler); // handlerë¥¼ ì´ìš©í•´ ì‚¬ìš©ì Requestë¥¼ ì²˜ë¦¬í•œë‹¤. @Nullable ModelAndView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception; @Deprecated long getLastModified(HttpServletRequest request, Object handler);&#125; HandlerAdapter êµ¬í˜„ì²´ AbstractHandlerMethodAdapter RequestMappingHandlerAdapter HandlerAdapter ì§€ì› ì—¬ë¶€ í™•ì¸í•˜ê¸° supports ë©”ì†Œë“œë¥¼ ì´ìš©í•´ HandlerAdapterê°€ ì „ë‹¬ë°›ì€ Handlerë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. AbstractHandlerMethodAdapter.java public final boolean supports(Object handler) &#123; return (handler instanceof HandlerMethod &amp;&amp; supportsInternal((HandlerMethod) handler));&#125; Handlerë¥¼ ì´ìš©í•´ Request(ìš”ì²­) ì²˜ë¦¬í•˜ê¸° HandlerAdapter ê°ì²´ëŠ” handle ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì‚¬ìš©ì ìš”ì²­ì„ Handler ë¥¼ ì´ìš©í•´ ì²˜ë¦¬í•œ í›„ ModelAndView ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. AbstractHandlerMethodAdapter.java @Override@Nullable public final ModelAndView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; return handleInternal(request, response, (HandlerMethod)handler);&#125; RequestMappingHandlerAdapter.java @Overrideprotected ModelAndView handleInternal(HttpServletRequest request, HttpServletResponse response, HandlerMethod handlerMethod) throws Exception &#123; ModelAndView mav; checkRequest(request); // Handlerë¥¼ ì´ìš©í•´ ì‚¬ìš©ì ìš”ì²­(Request)ë¥¼ ì²˜ë¦¬í•œ í›„ ModelAndView ê°ì²´ë¥¼ ë°˜í™˜ ë°›ëŠ”ë‹¤. if (this.synchronizeOnSession) &#123; HttpSession session = request.getSession(false); if (session != null) &#123; Object mutex = WebUtils.getSessionMutex(session); synchronized (mutex) &#123; mav = invokeHandlerMethod(request, response, handlerMethod); &#125; &#125; else &#123; // No HttpSession available -&gt; no mutex necessary mav = invokeHandlerMethod(request, response, handlerMethod); &#125; &#125; else &#123; // No synchronization on session demanded at all... mav = invokeHandlerMethod(request, response, handlerMethod); &#125; if (!response.containsHeader(HEADER_CACHE_CONTROL)) &#123; if (getSessionAttributesHandler(handlerMethod).hasSessionAttributes()) &#123; applyCacheSeconds(response, this.cacheSecondsForSessionAttributeHandlers); &#125; else &#123; prepareResponse(response); &#125; &#125; return mav;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Framework","slug":"Spring/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/"},{"name":"lifecycle","slug":"Spring/Spring-Framework/lifecycle","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/lifecycle/"}],"tags":[]},{"title":"Spring MVC Request Life Cycle - HandlerMapping","slug":"spring/spring-framework/lifecycle/spring-lifecycle-02-handlermapping","date":"2021-10-11T21:05:00.000Z","updated":"2024-02-26T15:56:41.093Z","comments":true,"path":"2021/10/12/spring/spring-framework/lifecycle/spring-lifecycle-02-handlermapping/","link":"","permalink":"https://ckck803.github.io/2021/10/12/spring/spring-framework/lifecycle/spring-lifecycle-02-handlermapping/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter Spring MVC Request Life Cycle - HandlerMapping RequestMapping ì–´ë…¸í…Œì´ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” Handler, Handler AdapterëŠ” RequestMappingHandlerMapping, RequestMappingHandlerAdapterë‹¤ HandlerMapping ì‚´í´ë³´ê¸° Request(ìš”ì²­)ì™€ Requestë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handlerì˜ Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•œë‹¤. HttpServletRequest ê°ì²´ Attributeì—ì„œ Handlerì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. BEST_MATCHING_HANDLER_ATTRIBUTE ìš”ì²­ URLê³¼ ê°€ì¥ ë§ì´ ì¼ì¹˜í•˜ëŠ” Handlerë¥¼ ê°€ì ¸ì˜¨ë‹¤. PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handlerì˜ URLì„ ê°€ì ¸ì˜¨ë‹¤. BEST_MATCHING_PATTERN_ATTRIBUTE ìš”ì²­ URLê³¼ ê°€ì¥ ë§ì´ ì¼ì¹˜í•˜ëŠ” Handler Pattern(URL)ì„ ê°€ì ¸ì˜¨ë‹¤. INTROSPECT_TYPE_LEVEL_MAPPING URI_TEMPLATE_VARIABLES_ATTRIBUTE ìš”ì²­ URLì— í¬í•¨ëœ PathVariable ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. MATRIX_VARIABLES_ATTRIBUTE ìš”ì²­ URLì— í¬í•¨ëœ MATRIX ë³€ìˆ˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. Matrix ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” WebMvcConfigurer ë¥¼ ì´ìš©í•´ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤. ë°˜í™˜ ê°’ì€ MultiValueMap í˜•íƒœì˜ ë°ì´í„°ë‹¤. PRODUCIBLE_MEDIA_TYPES_ATTRIBUTE HttpServletRequest ê°ì²´ë‚´ Attributeì—ì„œ Handlerê°€ ë°˜í™˜í•˜ëŠ” Media Type ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter Spring MVC Request Life Cycle - HandlerMapping RequestMapping ì–´ë…¸í…Œì´ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” Handler, Handler AdapterëŠ” RequestMappingHandlerMapping, RequestMappingHandlerAdapterë‹¤ HandlerMapping ì‚´í´ë³´ê¸° Request(ìš”ì²­)ì™€ Requestë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handlerì˜ Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•œë‹¤. HttpServletRequest ê°ì²´ Attributeì—ì„œ Handlerì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. BEST_MATCHING_HANDLER_ATTRIBUTE ìš”ì²­ URLê³¼ ê°€ì¥ ë§ì´ ì¼ì¹˜í•˜ëŠ” Handlerë¥¼ ê°€ì ¸ì˜¨ë‹¤. PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handlerì˜ URLì„ ê°€ì ¸ì˜¨ë‹¤. BEST_MATCHING_PATTERN_ATTRIBUTE ìš”ì²­ URLê³¼ ê°€ì¥ ë§ì´ ì¼ì¹˜í•˜ëŠ” Handler Pattern(URL)ì„ ê°€ì ¸ì˜¨ë‹¤. INTROSPECT_TYPE_LEVEL_MAPPING URI_TEMPLATE_VARIABLES_ATTRIBUTE ìš”ì²­ URLì— í¬í•¨ëœ PathVariable ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. MATRIX_VARIABLES_ATTRIBUTE ìš”ì²­ URLì— í¬í•¨ëœ MATRIX ë³€ìˆ˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. Matrix ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” WebMvcConfigurer ë¥¼ ì´ìš©í•´ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤. ë°˜í™˜ ê°’ì€ MultiValueMap í˜•íƒœì˜ ë°ì´í„°ë‹¤. PRODUCIBLE_MEDIA_TYPES_ATTRIBUTE HttpServletRequest ê°ì²´ë‚´ Attributeì—ì„œ Handlerê°€ ë°˜í™˜í•˜ëŠ” Media Type ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. Matrix ë³€ìˆ˜ ì‚¬ìš©í•˜ê¸° - https://www.baeldung.com/spring-mvc-matrix-variables HandlerMapping.java public interface HandlerMapping &#123; String BEST_MATCHING_HANDLER_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.bestMatchingHandler&quot;; @Deprecated String LOOKUP_PATH = HandlerMapping.class.getName() + &quot;.lookupPath&quot;; String PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.pathWithinHandlerMapping&quot;; String BEST_MATCHING_PATTERN_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.bestMatchingPattern&quot;; String INTROSPECT_TYPE_LEVEL_MAPPING = HandlerMapping.class.getName() + &quot;.introspectTypeLevelMapping&quot;; String URI_TEMPLATE_VARIABLES_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.uriTemplateVariables&quot;; String MATRIX_VARIABLES_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.matrixVariables&quot;; String PRODUCIBLE_MEDIA_TYPES_ATTRIBUTE = HandlerMapping.class.getName() + &quot;.producibleMediaTypes&quot;; default boolean usesPathPatterns() &#123; return false; &#125; // ìš”ì²­ì— ëŒ€í•œ Handler ì™€ Interceptorë¥¼ í¬í•¨í•˜ëŠ” HandlerExecutionChainì„ ë°˜í™˜í•œë‹¤. // ë§Œì•½ ìš”ì²­ì— ì ì ˆí•œ Handlerê°€ ì—†ì„ ê²½ìš° nullì„ ë°˜í™˜í•œë‹¤. @Nullable HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception;&#125; ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” Handler ê°€ì ¸ì˜¤ê¸° AbstractHandlerMapping ëŠ” HandlerMapping ì„ êµ¬í˜„í•œ ì¶”ìƒ í´ë˜ìŠ¤, ìš”ì²­ ê²½ë¡œì™€ Mappingëœ Hanlder Interceptor ì™€ Default Hanlder ë¥¼ ì§€ì›í•œë‹¤. Requestë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handerë¥¼ ê°€ì ¸ì˜¨ë‹¤. AbstractHandlerMapping.java public final HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception &#123; // Requestë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handlerë¥¼ ê°€ì ¸ì˜¨ë‹¤. Object handler = getHandlerInternal(request); if (handler == null) &#123; handler = getDefaultHandler(); &#125; if (handler == null) &#123; return null; &#125; // Beanì— ë“±ë¡ëœ Handlerë¥¼ ê°€ì ¸ì˜¨ë‹¤. if (handler instanceof String) &#123; String handlerName = (String) handler; handler = obtainApplicationContext().getBean(handlerName); &#125; // Ensure presence of cached lookupPath for interceptors and others if (!ServletRequestPathUtils.hasCachedPath(request)) &#123; initLookupPath(request); &#125; HandlerExecutionChain executionChain = getHandlerExecutionChain(handler, request); if (logger.isTraceEnabled()) &#123; logger.trace(&quot;Mapped to &quot; + handler); &#125; else if (logger.isDebugEnabled() &amp;&amp; !DispatcherType.ASYNC.equals(request.getDispatcherType())) &#123; logger.debug(&quot;Mapped to &quot; + executionChain.getHandler()); &#125; if (hasCorsConfigurationSource(handler) || CorsUtils.isPreFlightRequest(request)) &#123; CorsConfiguration config = getCorsConfiguration(handler, request); if (getCorsConfigurationSource() != null) &#123; CorsConfiguration globalConfig = getCorsConfigurationSource().getCorsConfiguration(request); config = (globalConfig != null ? globalConfig.combine(config) : config); &#125; if (config != null) &#123; config.validateAllowCredentials(); &#125; executionChain = getCorsHandlerExecutionChain(request, executionChain, config); &#125; return executionChain;&#125; AbstractHandlerMapping.java protected String initLookupPath(HttpServletRequest request) &#123; if (usesPathPatterns()) &#123; request.removeAttribute(UrlPathHelper.PATH_ATTRIBUTE); RequestPath requestPath = ServletRequestPathUtils.getParsedRequestPath(request); String lookupPath = requestPath.pathWithinApplication().value(); return UrlPathHelper.defaultInstance.removeSemicolonContent(lookupPath); &#125; else &#123; return getUrlPathHelper().resolveAndCacheLookupPath(request); &#125;&#125; AbstractHandlerMapping.java protected HandlerExecutionChain getHandlerExecutionChain(Object handler, HttpServletRequest request) &#123; HandlerExecutionChain chain = (handler instanceof HandlerExecutionChain ? (HandlerExecutionChain) handler : new HandlerExecutionChain(handler)); for (HandlerInterceptor interceptor : this.adaptedInterceptors) &#123; if (interceptor instanceof MappedInterceptor) &#123; MappedInterceptor mappedInterceptor = (MappedInterceptor) interceptor; if (mappedInterceptor.matches(request)) &#123; chain.addInterceptor(mappedInterceptor.getInterceptor()); &#125; &#125; else &#123; chain.addInterceptor(interceptor); &#125; &#125; return chain;&#125; AbstractHandlerMethodMapping.java protected HandlerMethod getHandlerInternal(HttpServletRequest request) throws Exception &#123; String lookupPath = initLookupPath(request); this.mappingRegistry.acquireReadLock(); try &#123; HandlerMethod handlerMethod = lookupHandlerMethod(lookupPath, request); return (handlerMethod != null ? handlerMethod.createWithResolvedBean() : null); &#125; finally &#123; this.mappingRegistry.releaseReadLock(); &#125;&#125; AbstractHandlerMethodMapping.java @Nullableprotected HandlerMethod lookupHandlerMethod(String lookupPath, HttpServletRequest request) throws Exception &#123; List&lt;Match&gt; matches = new ArrayList&lt;&gt;(); List&lt;T&gt; directPathMatches = this.mappingRegistry.getMappingsByDirectPath(lookupPath); // ì™„ì „íˆ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. if (directPathMatches != null) &#123; addMatchingMappings(directPathMatches, matches, request); &#125; // ìš”ì²­ URLì„ í¬í•¨í•˜ëŠ” Handlerë“¤ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. if (matches.isEmpty()) &#123; addMatchingMappings(this.mappingRegistry.getRegistrations().keySet(), matches, request); &#125; if (!matches.isEmpty()) &#123; Match bestMatch = matches.get(0); // ìš”ì²­ì— ëŒ€í•œ Handlerê°€ ì—¬ëŸ¬ê°œ ìˆëŠ” ê²½ìš° ê°€ì¥ ë§ì´ ì¼ì¹˜í•˜ëŠ” Handlerë¥¼ ê°€ì ¸ì˜¨ë‹¤. if (matches.size() &gt; 1) &#123; Comparator&lt;Match&gt; comparator = new MatchComparator(getMappingComparator(request)); matches.sort(comparator); bestMatch = matches.get(0); if (logger.isTraceEnabled()) &#123; logger.trace(matches.size() + &quot; matching mappings: &quot; + matches); &#125; if (CorsUtils.isPreFlightRequest(request)) &#123; for (Match match : matches) &#123; if (match.hasCorsConfig()) &#123; return PREFLIGHT_AMBIGUOUS_MATCH; &#125; &#125; &#125; else &#123; Match secondBestMatch = matches.get(1); if (comparator.compare(bestMatch, secondBestMatch) == 0) &#123; Method m1 = bestMatch.getHandlerMethod().getMethod(); Method m2 = secondBestMatch.getHandlerMethod().getMethod(); String uri = request.getRequestURI(); throw new IllegalStateException( &quot;Ambiguous handler methods mapped for &#x27;&quot; + uri + &quot;&#x27;: &#123;&quot; + m1 + &quot;, &quot; + m2 + &quot;&#125;&quot;); &#125; &#125; &#125; // Request ê°ì²´ì— Handlerë¥¼ BEST_MATCHING_HANDLER_ATTRIBUTE Keyë¡œ ì €ì¥í•œë‹¤. request.setAttribute(BEST_MATCHING_HANDLER_ATTRIBUTE, bestMatch.getHandlerMethod()); handleMatch(bestMatch.mapping, lookupPath, request); return bestMatch.getHandlerMethod(); &#125; else &#123; return handleNoMatch(this.mappingRegistry.getRegistrations().keySet(), lookupPath, request); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Framework","slug":"Spring/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/"},{"name":"lifecycle","slug":"Spring/Spring-Framework/lifecycle","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/lifecycle/"}],"tags":[]},{"title":"Spring MVC Request Life Cycle - DispatcherServlet","slug":"spring/spring-framework/lifecycle/spring-lifecycle-01-dispatcherservlet","date":"2021-10-11T20:05:00.000Z","updated":"2024-02-26T15:56:24.537Z","comments":true,"path":"2021/10/12/spring/spring-framework/lifecycle/spring-lifecycle-01-dispatcherservlet/","link":"","permalink":"https://ckck803.github.io/2021/10/12/spring/spring-framework/lifecycle/spring-lifecycle-01-dispatcherservlet/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter DispatcherServlet ì´ë€ ì‚¬ìš©ìì˜ ìš”ì²­ì„ ì œì¼ ë¨¼ì € ë°›ëŠ” Front Controller, ìŠ¤í”„ë§ MVCëŠ” Front Controller íŒ¨í„´ ìœ¼ë¡œ êµ¬í˜„ë¼ ìˆë‹¤.DispatcherServletë„ HttpServletì„ ìƒì† ë°›ê³  Servletìœ¼ë¡œ ë™ì‘í•œë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” DispatcherServletì„ Servletìœ¼ë¡œ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ë©´ì„œ ëª¨ë“  ê²½ë¡œ(urlpattern &#x3D; â€œ&#x2F;â€œ) ì— ëŒ€í•´ ë§¤í•‘í•œë‹¤. ì‚¬ìš©ìë¡œ ë¶€í„° ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì„ ì œì¼ ë¨¼ì € ë°›ì•„ ì ì ˆí•œ Handler(Controller) ë¥¼ ì°¾ì•„ í˜¸ì¶œí•œë‹¤. ëª¨ë“  ìš”ì²­ì€ DispatcherServletì„ ê±°ì¹˜ê¸° ë•Œë¬¸ì— ëª¨ë“  ìš”ì²­ì— ê³µí†µì ì¸ ì‘ì—… ì´ ê°€ëŠ¥í•œë‹¤. ìš”ì²­ íë¦„ ì„œë¸”ë¦¿ì´ í˜¸ì¶œ ë˜ë©´ HttpServletì—ì„œ ì œê³µí•˜ëŠ” service ë©”ì†Œë“œê°€ í˜¸ì¶œëœë‹¤. ìŠ¤í”„ë§ MVCëŠ” DispatcherServletì˜ ë¶€ëª¨ì¸ FrameworkServlet ì—ì„œ serviceë¥¼ ì˜¤ë²„ë¼ì´ë“œ í–ˆë‹¤. FrameworkServlet serviceë¥¼ ì‹œì‘ìœ¼ë¡œ ì—¬ëŸ¬ ë©”ì†Œë“œë¥¼ í˜¸ì¶œë˜ë©´ì„œ DispatcherServletì˜ doDispatch ë©”ì†Œë“œê°€ í˜¸ì¶œëœë‹¤. DispatcherServlet ë™ì‘ ê³¼ì • ì‚´í´ë³´ê¸°","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter DispatcherServlet ì´ë€ ì‚¬ìš©ìì˜ ìš”ì²­ì„ ì œì¼ ë¨¼ì € ë°›ëŠ” Front Controller, ìŠ¤í”„ë§ MVCëŠ” Front Controller íŒ¨í„´ ìœ¼ë¡œ êµ¬í˜„ë¼ ìˆë‹¤.DispatcherServletë„ HttpServletì„ ìƒì† ë°›ê³  Servletìœ¼ë¡œ ë™ì‘í•œë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” DispatcherServletì„ Servletìœ¼ë¡œ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ë©´ì„œ ëª¨ë“  ê²½ë¡œ(urlpattern &#x3D; â€œ&#x2F;â€œ) ì— ëŒ€í•´ ë§¤í•‘í•œë‹¤. ì‚¬ìš©ìë¡œ ë¶€í„° ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì„ ì œì¼ ë¨¼ì € ë°›ì•„ ì ì ˆí•œ Handler(Controller) ë¥¼ ì°¾ì•„ í˜¸ì¶œí•œë‹¤. ëª¨ë“  ìš”ì²­ì€ DispatcherServletì„ ê±°ì¹˜ê¸° ë•Œë¬¸ì— ëª¨ë“  ìš”ì²­ì— ê³µí†µì ì¸ ì‘ì—… ì´ ê°€ëŠ¥í•œë‹¤. ìš”ì²­ íë¦„ ì„œë¸”ë¦¿ì´ í˜¸ì¶œ ë˜ë©´ HttpServletì—ì„œ ì œê³µí•˜ëŠ” service ë©”ì†Œë“œê°€ í˜¸ì¶œëœë‹¤. ìŠ¤í”„ë§ MVCëŠ” DispatcherServletì˜ ë¶€ëª¨ì¸ FrameworkServlet ì—ì„œ serviceë¥¼ ì˜¤ë²„ë¼ì´ë“œ í–ˆë‹¤. FrameworkServlet serviceë¥¼ ì‹œì‘ìœ¼ë¡œ ì—¬ëŸ¬ ë©”ì†Œë“œë¥¼ í˜¸ì¶œë˜ë©´ì„œ DispatcherServletì˜ doDispatch ë©”ì†Œë“œê°€ í˜¸ì¶œëœë‹¤. DispatcherServlet ë™ì‘ ê³¼ì • ì‚´í´ë³´ê¸° Handler ì¡°íšŒ HandlerMappingì„ ì´ìš©í•´ ìš”ì²­ì— ë§¤í•‘ëœ í•¸ë“¤ëŸ¬ë¥¼ ì¡°íšŒí•œë‹¤. í•¸ë“¤ëŸ¬ë¥¼ ì¡°íšŒí•  ë•Œ ìš”ì²­ URLì„ ì´ìš©í•´ ë§ì´ ì¼ì¹˜í•˜ëŠ” ìˆœì„œëŒ€ë¡œ Handlerë“¤ì„ ë°˜í™˜ë°›ëŠ”ë‹¤. HandlerAdapter ì¡°íšŒ Handlerë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” HandlerAdapterë¥¼ ì¡°íšŒí•œë‹¤. HandlerInterceptorì˜ preHandler ë©”ì†Œë“œ ì‹¤í–‰ HandlerAdapterë¥¼ ì‹¤í–‰ HandlerAdapterëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” Handlerë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. ì²˜ë¦¬ ê²°ê³¼ë¡œ ModelAndViewë¥¼ ë°˜í™˜ë°›ëŠ”ë‹¤. ë°˜í™˜ëœ ModelAndView ê°ì²´ì— Viewê°€ ì—†ì„ ê²½ìš° RequestToViewNameTranslatorë¥¼ ì´ìš©í•´ ì ì ˆí•œ Viewë¥¼ ê°€ì ¸ì˜¨ë‹¤. HandlerInterceptorê°€ ìˆë‹¤ë©´ postHandlerë¥¼ ì‹¤í–‰ DispatcherServlet ê²°ê³¼ì— ëŒ€í•œ í›„ì²˜ë¦¬ë¥¼ ì§„í–‰ ì˜ˆì™¸ì— ëŒ€í•œ ì²˜ë¦¬ View ë Œë”ë§ protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; HttpServletRequest processedRequest = request; HandlerExecutionChain mappedHandler = null; boolean multipartRequestParsed = false; WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request); try &#123; ModelAndView mv = null; Exception dispatchException = null; try &#123; processedRequest = checkMultipart(request); multipartRequestParsed = (processedRequest != request); // 1. í˜„ì¬ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handler(HandlerExecutionChain ê°ì²´)ë¥¼ ê°€ì ¸ì˜¨ë‹¤. mappedHandler = getHandler(processedRequest); if (mappedHandler == null) &#123; noHandlerFound(processedRequest, response); return; &#125; // 2. í˜„ì¬ ìš”ì²­ì— í•´ë‹¹í•˜ëŠ” HandlerAdapterë¥¼ ê°€ì ¸ì˜¨ë‹¤. HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler()); // 3. HandlerInterceptorê°€ ìˆë‹¤ë©´ preHandlerë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. String method = request.getMethod(); boolean isGet = HttpMethod.GET.matches(method); if (isGet || HttpMethod.HEAD.matches(method)) &#123; long lastModified = ha.getLastModified(request, mappedHandler.getHandler()); if (new ServletWebRequest(request, response).checkNotModified(lastModified) &amp;&amp; isGet) &#123; return; &#125; &#125; // 3. ë“±ë¡ëœ ì¸í„°ì…‰í„°ì˜ preHandle ë©”ì„œë“œë¥¼ ì ìš©í•©ë‹ˆë‹¤. if (!mappedHandler.applyPreHandle(processedRequest, response)) &#123; return; &#125; // 4. HandlerAdapter ê°ì²´ë¥¼ ì´ìš©í•´ Requestë¥¼ Handlerë¡œ ì²˜ë¦¬í•œ í›„ ModelAndView ê°ì²´ë¥¼ ë°˜í™˜ ë°›ëŠ”ë‹¤. mv = ha.handle(processedRequest, response, mappedHandler.getHandler()); if (asyncManager.isConcurrentHandlingStarted()) &#123; return; &#125; // 5. ModelAndViewê°ì²´ì— View nameì´ ì—†ì„ ê²½ìš° RequestToViewNameTranslatorë¥¼ ì´ìš©í•´ View nameì„ ì„¤ì •í•œë‹¤. applyDefaultViewName(processedRequest, mv); // 6. HandlerInterceptorê°€ ìˆë‹¤ë©´ postHandlerë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. mappedHandler.applyPostHandle(processedRequest, response, mv); &#125; catch (Exception ex) &#123; dispatchException = ex; &#125; catch (Throwable err) &#123; // As of 4.3, we&#x27;re processing Errors thrown from handler methods as well, // making them available for @ExceptionHandler methods and other scenarios. dispatchException = new NestedServletException(&quot;Handler dispatch failed&quot;, err); &#125; // 7. DispatcherServlet ê²°ê³¼ì— ëŒ€í•œ í›„ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. // Handler ê²°ê³¼ì—ì„œ ì˜ˆì™¸ê°€ ë–¨ì–´ì§ˆ ê²½ìš° ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ì§„í–‰í•˜ê³  ì ì ˆí•œ Viewê°€ ìˆì„ ê²½ìš° Renderingì„ ì§„í–‰í•œë‹¤. processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException); &#125; catch (Exception ex) &#123; triggerAfterCompletion(processedRequest, response, mappedHandler, ex); &#125; catch (Throwable err) &#123; triggerAfterCompletion(processedRequest, response, mappedHandler, new NestedServletException(&quot;Handler processing failed&quot;, err)); &#125; finally &#123; if (asyncManager.isConcurrentHandlingStarted()) &#123; // Instead of postHandle and afterCompletion if (mappedHandler != null) &#123; mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response); &#125; &#125; else &#123; // Clean up any resources used by a multipart request. if (multipartRequestParsed) &#123; cleanupMultipart(processedRequest); &#125; &#125; &#125;&#125; 1. ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handler ê°€ì ¸ì˜¤ê¸° getHandler ë©”ì†Œë“œëŠ” DispatcherServletì´ ê°€ì§€ê³  ìˆëŠ” HandlerMapping ê°ì²´ë“¤ ì¤‘ì—ì„œ ì „ë‹¬ ë°›ì€ Requestë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” Handler ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. HandlerMapping ê°ì²´ëŠ” Request(ìš”ì²­)ì™€ Requestë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handlerì˜ Mapping ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê´€ë¦¬í•˜ëŠ” ê°ì²´ë‹¤. HandlerMapping ê°ì²´ëŠ” getHandler ë©”ì†Œë“œë¥¼ í†µí•´ Handler ì™€ HandlerInterceptor ë¥¼ ê°–ê³  ìˆëŠ” HandlerExecutionChain ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. @Nullableprotected HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception &#123; if (this.handlerMappings != null) &#123; for (HandlerMapping mapping : this.handlerMappings) &#123; HandlerExecutionChain handler = mapping.getHandler(request); if (handler != null) &#123; return handler; &#125; &#125; &#125; return null;&#125; 2. Handlerë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ HandlerAdapter ê°€ì ¸ì˜¤ê¸° getHandlerAdapter ë©”ì†Œë“œëŠ” DispatcherServletì´ ê°€ì§€ê³  ìˆëŠ” HandlerAdapter ê°ì²´ë“¤ ì¤‘ì—ì„œ ì „ë‹¬ ë°›ì€ Handlerë¥¼ ì§€ì› HandlerAdapter ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. protected HandlerAdapter getHandlerAdapter(Object handler) throws ServletException &#123; if (this.handlerAdapters != null) &#123; for (HandlerAdapter adapter : this.handlerAdapters) &#123; // HandlerAdapterê°€ Handlerë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. if (adapter.supports(handler)) &#123; return adapter; &#125; &#125; &#125; throw new ServletException(&quot;No adapter for handler [&quot; + handler + &quot;]: The DispatcherServlet configuration needs to include a HandlerAdapter that supports this handler&quot;);&#125; 3. ModelAndView ê°ì²´ì— View ì •ë³´ë¥¼ ì—°ê²° ModelAndView ê°ì²´ì— Viewê°€ ì—†ì„ ê²½ìš° RequestToViewNameTranslator ê°ì²´ë¥¼ ì´ìš©í•´ Viewë¥¼ ì–»ì–´ì˜¨ë‹¤. RequestToViewNameTranslator ê¸°ë³¸ì ì¸ êµ¬í˜„ì²´ëŠ” DefaultRequestToViewNameTranslator ê°€ ìˆë‹¤. DefaultRequestToViewNameTranslator ëŠ” ìš”ì²­ URLì— Prefix ì™€ Postfix ë¥¼ ë¶™ì¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤. private void applyDefaultViewName(HttpServletRequest request, @Nullable ModelAndView mv) throws Exception &#123; if (mv != null &amp;&amp; !mv.hasView()) &#123; String defaultViewName = getDefaultViewName(request); if (defaultViewName != null) &#123; mv.setViewName(defaultViewName); &#125; &#125;&#125; ë°˜í™˜ ë°›ì€ View ê°ì²´ê°€ null ì¼ ê²½ìš° Controllerì˜ ë°˜í™˜ ê°’ì´ nullì¼ ê²½ìš° DispatcherServletì—ì„œ applyDefaultViewName ë©”ì†Œë“œë¥¼ í†µí•´ Viewë¥¼ ê°€ì ¸ì˜¨ë‹¤. applyDefaultViewName ë©”ì†Œë“œì˜ ê¸°ë³¸ ì •ì±…ì€ Request URLë¡œë¶€í„° View nameì„ ê°€ì ¸ì˜¨ë‹¤. // ì•„ë¬´ê²ƒë„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ” Controller@RequestMapping(&quot;/response/hello&quot;)public void responseViewV3(Model model)&#123; model.addAttribute(&quot;data&quot;, &quot;hello!&quot;);&#125; ModelAndView ê°ì²´ë‚´ì˜ View ê°’ì´ null ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ìš”ì²­ URLì„ ì´ìš©í•´ View Name ì„ ê°€ì ¸ì˜¨ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 4. DispatcherServlet ê²°ê³¼ì— ëŒ€í•œ í›„ ì²˜ë¦¬ë¥¼ ì§„í–‰ processDispatchResult ë©”ì†Œë“œëŠ” ì „ë‹¬ ë°›ì€ Exception ê°ì²´ê°€ nullì´ ì•„ë‹ ê²½ìš° ì ì ˆí•œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤.ModelAndView ê°ì²´ê°€ ìˆì„ ê²½ìš° View or Model ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ë¬¸ì œê°€ ì—†ìœ¼ë©´ Viewë¥¼ ë Œë”ë§ í•œë‹¤. private void processDispatchResult(HttpServletRequest request, HttpServletResponse response, @Nullable HandlerExecutionChain mappedHandler, @Nullable ModelAndView mv, @Nullable Exception exception) throws Exception &#123; boolean errorView = false; // ì˜ˆì™¸ê°€ ìˆì„ ê²½ìš° ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. 1. ModelAndViewDefiningException, 2. ProcessHandlerException if (exception != null) &#123; if (exception instanceof ModelAndViewDefiningException) &#123; logger.debug(&quot;ModelAndViewDefiningException encountered&quot;, exception); mv = ((ModelAndViewDefiningException) exception).getModelAndView(); &#125; else &#123; Object handler = (mappedHandler != null ? mappedHandler.getHandler() : null); mv = processHandlerException(request, response, handler, exception); errorView = (mv != null); &#125; &#125; // 1. ModelAndView ê°ì²´ê°€ ë¹„ì—ˆëŠ”ì§€ í™•ì¸, 2. View or Model ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. if (mv != null &amp;&amp; !mv.wasCleared()) &#123; // View Renderingì„ í˜¸ì¶œí•œë‹¤. render(mv, request, response); if (errorView) &#123; WebUtils.clearErrorRequestAttributes(request); &#125; &#125; else &#123; if (logger.isTraceEnabled()) &#123; logger.trace(&quot;No view rendering, null ModelAndView returned.&quot;); &#125; &#125; if (WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123; // Concurrent handling started during a forward return; &#125; if (mappedHandler != null) &#123; // Exception (if any) is already handled.. mappedHandler.triggerAfterCompletion(request, response, null); &#125;&#125; Viewë¥¼ ë Œë”ë§ í•œë‹¤. render ë©”ì†Œë“œì—ì„œëŠ” ViewResolverë¥¼ ì´ìš©í•´ View ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ í›„ View ê°ì²´ë¥¼ ë Œë”ë§ í•´ì¤€ë‹¤. protected void render(ModelAndView mv, HttpServletRequest request, HttpServletResponse response) throws Exception &#123; // Determine locale for request and apply it to the response. Locale locale = (this.localeResolver != null ? this.localeResolver.resolveLocale(request) : request.getLocale()); response.setLocale(locale); View view; String viewName = mv.getViewName(); if (viewName != null) &#123; // ViewResolverë¥¼ ì´ìš©í•´ View ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. view = resolveViewName(viewName, mv.getModelInternal(), locale, request); if (view == null) &#123; throw new ServletException(&quot;Could not resolve view with name &#x27;&quot; + mv.getViewName() + &quot;&#x27; in servlet with name &#x27;&quot; + getServletName() + &quot;&#x27;&quot;); &#125; &#125; else &#123; // No need to lookup: the ModelAndView object contains the actual View object. view = mv.getView(); if (view == null) &#123; throw new ServletException(&quot;ModelAndView [&quot; + mv + &quot;] neither contains a view name nor a &quot; + &quot;View object in servlet with name &#x27;&quot; + getServletName() + &quot;&#x27;&quot;); &#125; &#125; // Delegate to the View object for rendering. if (logger.isTraceEnabled()) &#123; logger.trace(&quot;Rendering view [&quot; + view + &quot;] &quot;); &#125; try &#123; if (mv.getStatus() != null) &#123; response.setStatus(mv.getStatus().value()); &#125; // View ê°ì²´ë¥¼ ë Œë”ë§ í•´ì¤€ë‹¤. view.render(mv.getModelInternal(), request, response); &#125; catch (Exception ex) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(&quot;Error rendering view [&quot; + view + &quot;]&quot;, ex); &#125; throw ex; &#125;&#125; resolveViewName ë©”ì†Œë“œëŠ” viewNameê³¼ ì¼ì¹˜í•˜ëŠ” View ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. protected View resolveViewName(String viewName, @Nullable Map&lt;String, Object&gt; model, Locale locale, HttpServletRequest request) throws Exception &#123; if (this.viewResolvers != null) &#123; for (ViewResolver viewResolver : this.viewResolvers) &#123; // viewNameê³¼ ì¼ì¹˜í•˜ëŠ” Viewë¥¼ ê°€ì ¸ì˜¨ë‹¤. View view = viewResolver.resolveViewName(viewName, locale); if (view != null) &#123; return view; &#125; &#125; &#125; return null;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Framework","slug":"Spring/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/"},{"name":"lifecycle","slug":"Spring/Spring-Framework/lifecycle","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/lifecycle/"}],"tags":[]},{"title":"Spring MVC - ArgumentResolver","slug":"spring/spring-framework/mvc/spring-mvc-11-argumentresolver","date":"2021-10-11T19:05:00.000Z","updated":"2024-02-26T16:00:29.114Z","comments":true,"path":"2021/10/12/spring/spring-framework/mvc/spring-mvc-11-argumentresolver/","link":"","permalink":"https://ckck803.github.io/2021/10/12/spring/spring-framework/mvc/spring-mvc-11-argumentresolver/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging ì°¸ê³  https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-%20arguments Spring Boot ArgumentResolver ArgumentResolver ë¥¼ í†µí•´ Spring ì—ì„œëŠ” ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ Controllerì— ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìƒì„±í•  ë•Œ ë©”ì†Œë“œ ë§¤ê²Œë³€ìˆ˜ë¡œ ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë“¤ì„ ë„£ì„ ìˆ˜ ìˆë‹¤. ë©”ì†Œë“œì— ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë¥¼ ë„£ì„ ìˆ˜ ìˆë„ë¡ ë„ì›€ì„ ì£¼ëŠ” ê²Œ ë°”ë¡œ ArgumentResolver ë‹¤. HandlerMethodArgumentResolver.java HandlerMethodArgumentResolver ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•¨ìœ¼ë¡œì„œ Controller ì—ì„œ ë„˜ì–´ì˜¤ëŠ” Parameter ë¥¼ ì´ˆê¸°í™” í•  ìˆ˜ ìˆë‹¤. supportsParameter ë©”ì†Œë“œë¥¼ í†µí•´ ì „ë‹¬ ë°›ì€ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•œ í›„ í•´ë‹¹ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•˜ë©´ resolveArgument ë¥¼ í†µí•´ ì „ë‹¬ ë°›ì€ íŒŒë¦¬ë¯¸í„°ì— í•´ë‹¹í•˜ëŠ” ê°ì²´ë¥¼ ìƒì„±í•œ í›„ Controllerì— ë„˜ê²¨ì¤€ë‹¤.","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging ì°¸ê³  https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-%20arguments Spring Boot ArgumentResolver ArgumentResolver ë¥¼ í†µí•´ Spring ì—ì„œëŠ” ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ Controllerì— ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìƒì„±í•  ë•Œ ë©”ì†Œë“œ ë§¤ê²Œë³€ìˆ˜ë¡œ ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë“¤ì„ ë„£ì„ ìˆ˜ ìˆë‹¤. ë©”ì†Œë“œì— ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë¥¼ ë„£ì„ ìˆ˜ ìˆë„ë¡ ë„ì›€ì„ ì£¼ëŠ” ê²Œ ë°”ë¡œ ArgumentResolver ë‹¤. HandlerMethodArgumentResolver.java HandlerMethodArgumentResolver ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•¨ìœ¼ë¡œì„œ Controller ì—ì„œ ë„˜ì–´ì˜¤ëŠ” Parameter ë¥¼ ì´ˆê¸°í™” í•  ìˆ˜ ìˆë‹¤. supportsParameter ë©”ì†Œë“œë¥¼ í†µí•´ ì „ë‹¬ ë°›ì€ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•œ í›„ í•´ë‹¹ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•˜ë©´ resolveArgument ë¥¼ í†µí•´ ì „ë‹¬ ë°›ì€ íŒŒë¦¬ë¯¸í„°ì— í•´ë‹¹í•˜ëŠ” ê°ì²´ë¥¼ ìƒì„±í•œ í›„ Controllerì— ë„˜ê²¨ì¤€ë‹¤. public interface HandlerMethodArgumentResolver &#123; boolean supportsParameter(MethodParameter parameter); @Nullable Object resolveArgument(MethodParameter parameter, @Nullable ModelAndViewContainer mavContainer, NativeWebRequest webRequest, @Nullable WebDataBinderFactory binderFactory) throws Exception;&#125; HttpEntityMethodProcessor.java HttpEntity, RequestEntity ê°ì²´ë¥¼ ì´ˆê¸°í™” í•˜ëŠ” ArgumentResolver Parameter ì˜ íƒ€ì…ì´ HttpEntity, RequestEntity ì¸ì§€ í™•ì¸í•œë‹¤. public boolean supportsParameter(MethodParameter parameter) &#123; return HttpEntity.class == parameter.getParameterType() || RequestEntity.class == parameter.getParameterType();&#125; @Override@Nullablepublic Object resolveArgument(MethodParameter parameter, @Nullable ModelAndViewContainer mavContainer, NativeWebRequest webRequest, @Nullable WebDataBinderFactory binderFactory) throws IOException, HttpMediaTypeNotSupportedException &#123; ServletServerHttpRequest inputMessage = createInputMessage(webRequest); Type paramType = getHttpEntityType(parameter); if (paramType == null) &#123; throw new IllegalArgumentException(&quot;HttpEntity parameter &#x27;&quot; + parameter.getParameterName() + &quot;&#x27; in method &quot; + parameter.getMethod() + &quot; is not parameterized&quot;); &#125; Object body = readWithMessageConverters(webRequest, parameter, paramType); if (RequestEntity.class == parameter.getParameterType()) &#123; // RequestEntity ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. return new RequestEntity&lt;&gt;(body, inputMessage.getHeaders(), inputMessage.getMethod(), inputMessage.getURI()); &#125; else &#123; // HttpEntity ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. return new HttpEntity&lt;&gt;(body, inputMessage.getHeaders()); &#125;&#125; AbstractMessageConverterMethodArgumentResolver.java@SuppressWarnings(&quot;unchecked&quot;)@Nullableprotected &lt;T&gt; Object readWithMessageConverters(HttpInputMessage inputMessage, MethodParameter parameter, Type targetType) throws IOException, HttpMediaTypeNotSupportedException, HttpMessageNotReadableException &#123; MediaType contentType; boolean noContentType = false; try &#123; contentType = inputMessage.getHeaders().getContentType(); &#125; catch (InvalidMediaTypeException ex) &#123; throw new HttpMediaTypeNotSupportedException(ex.getMessage()); &#125; if (contentType == null) &#123; noContentType = true; contentType = MediaType.APPLICATION_OCTET_STREAM; &#125; Class&lt;?&gt; contextClass = parameter.getContainingClass(); Class&lt;T&gt; targetClass = (targetType instanceof Class ? (Class&lt;T&gt;) targetType : null); if (targetClass == null) &#123; ResolvableType resolvableType = ResolvableType.forMethodParameter(parameter); targetClass = (Class&lt;T&gt;) resolvableType.resolve(); &#125; HttpMethod httpMethod = (inputMessage instanceof HttpRequest ? ((HttpRequest) inputMessage).getMethod() : null); Object body = NO_VALUE; EmptyBodyCheckingHttpInputMessage message; try &#123; message = new EmptyBodyCheckingHttpInputMessage(inputMessage); for (HttpMessageConverter&lt;?&gt; converter : this.messageConverters) &#123; Class&lt;HttpMessageConverter&lt;?&gt;&gt; converterType = (Class&lt;HttpMessageConverter&lt;?&gt;&gt;) converter.getClass(); GenericHttpMessageConverter&lt;?&gt; genericConverter = (converter instanceof GenericHttpMessageConverter ? (GenericHttpMessageConverter&lt;?&gt;) converter : null); if (genericConverter != null ? genericConverter.canRead(targetType, contextClass, contentType) : (targetClass != null &amp;&amp; converter.canRead(targetClass, contentType))) &#123; if (message.hasBody()) &#123; HttpInputMessage msgToUse = getAdvice().beforeBodyRead(message, parameter, targetType, converterType); body = (genericConverter != null ? genericConverter.read(targetType, contextClass, msgToUse) : ((HttpMessageConverter&lt;T&gt;) converter).read(targetClass, msgToUse)); body = getAdvice().afterBodyRead(body, msgToUse, parameter, targetType, converterType); &#125; else &#123; body = getAdvice().handleEmptyBody(null, message, parameter, targetType, converterType); &#125; break; &#125; &#125; &#125; catch (IOException ex) &#123; throw new HttpMessageNotReadableException(&quot;I/O error while reading input message&quot;, ex, inputMessage); &#125; if (body == NO_VALUE) &#123; if (httpMethod == null || !SUPPORTED_METHODS.contains(httpMethod) || (noContentType &amp;&amp; !message.hasBody())) &#123; return null; &#125; throw new HttpMediaTypeNotSupportedException(contentType, getSupportedMediaTypes(targetClass != null ? targetClass : Object.class)); &#125; MediaType selectedContentType = contentType; Object theBody = body; LogFormatUtils.traceDebug(logger, traceOn -&gt; &#123; String formatted = LogFormatUtils.formatValue(theBody, !traceOn); return &quot;Read \\&quot;&quot; + selectedContentType + &quot;\\&quot; to [&quot; + formatted + &quot;]&quot;; &#125;); return body;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿","slug":"spring/spring-framework/mvc/spring-mvc-08-responsestatic","date":"2021-10-11T17:05:00.000Z","updated":"2024-02-26T15:59:55.978Z","comments":true,"path":"2021/10/12/spring/spring-framework/mvc/spring-mvc-08-responsestatic/","link":"","permalink":"https://ckck803.github.io/2021/10/12/spring/spring-framework/mvc/spring-mvc-08-responsestatic/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿@RequestMapping(&quot;/response-view-v1&quot;)public ModelAndView responseViewV1()&#123; ModelAndView mav = new ModelAndView(&quot;response/hello&quot;) .addObject(&quot;data&quot;, &quot;hello&quot;); return mav;&#125; Stringì„ ë°˜í™˜í•˜ëŠ” ê²½ìš°ë·° ë¦¬ì¡¸ë²„ë¥¼ í†µí•´ ë°˜í™˜ë˜ëŠ” ë¬¸ìì—´ì— í•´ë‹¹ë˜ëŠ” ë·°ë¥¼ ì°¾ì•„ ë Œë”ë§ í•´ì¤€ë‹¤. @RequestMapping(&quot;/response-view-v2&quot;)public String responseViewV2(Model model)&#123; model.addAttribute(&quot;data&quot;, &quot;hello!&quot;); return &quot;response/hello&quot;;&#125; voidë¥¼ ë°˜í™˜í•˜ëŠ” ê²½ìš°@RequestMapping(&quot;/response/hello&quot;)public void responseViewV3(Model model)&#123; model.addAttribute(&quot;data&quot;, &quot;hello!&quot;);&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿@RequestMapping(&quot;/response-view-v1&quot;)public ModelAndView responseViewV1()&#123; ModelAndView mav = new ModelAndView(&quot;response/hello&quot;) .addObject(&quot;data&quot;, &quot;hello&quot;); return mav;&#125; Stringì„ ë°˜í™˜í•˜ëŠ” ê²½ìš°ë·° ë¦¬ì¡¸ë²„ë¥¼ í†µí•´ ë°˜í™˜ë˜ëŠ” ë¬¸ìì—´ì— í•´ë‹¹ë˜ëŠ” ë·°ë¥¼ ì°¾ì•„ ë Œë”ë§ í•´ì¤€ë‹¤. @RequestMapping(&quot;/response-view-v2&quot;)public String responseViewV2(Model model)&#123; model.addAttribute(&quot;data&quot;, &quot;hello!&quot;); return &quot;response/hello&quot;;&#125; voidë¥¼ ë°˜í™˜í•˜ëŠ” ê²½ìš°@RequestMapping(&quot;/response/hello&quot;)public void responseViewV3(Model model)&#123; model.addAttribute(&quot;data&quot;, &quot;hello!&quot;);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥","slug":"spring/spring-framework/mvc/spring-mvc-09-httpresponse","date":"2021-10-11T17:05:00.000Z","updated":"2024-02-26T16:00:00.632Z","comments":true,"path":"2021/10/12/spring/spring-framework/mvc/spring-mvc-09-httpresponse/","link":"","permalink":"https://ckck803.github.io/2021/10/12/spring/spring-framework/mvc/spring-mvc-09-httpresponse/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥@GetMapping(&quot;/response-body-string-v1&quot;)public void responseBodyV1(HttpServletResponse response) throws IOException &#123; response.getWriter().write(&quot;ok&quot;);&#125; @GetMapping(&quot;/response-body-string-v2&quot;)public ResponseEntity&lt;String&gt; responseBodyV2(HttpServletResponse response) &#123; return new ResponseEntity&lt;&gt;(&quot;ok&quot;, HttpStatus.OK);&#125; @ResponseBody@GetMapping(&quot;/response-body-string-v3&quot;)public String responseBodyV3(HttpServletResponse response) &#123; return &quot;ok&quot;;&#125; @GetMapping(&quot;/response-body-json-v1&quot;)public ResponseEntity&lt;HelloData&gt; responseBodyJsonV1() &#123; HelloData helloData = new HelloData(); helloData.setUsername(&quot;userA&quot;); helloData.setAge(20); return new ResponseEntity&lt;&gt;(helloData, HttpStatus.OK);&#125; @ResponseBody@ResponseStatus(HttpStatus.OK)@GetMapping(&quot;/response-body-json-v1&quot;)public HelloData responseBodyJsonV2() &#123; HelloData helloData = new HelloData(); helloData.setUsername(&quot;userA&quot;); helloData.setAge(20); return helloData;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥@GetMapping(&quot;/response-body-string-v1&quot;)public void responseBodyV1(HttpServletResponse response) throws IOException &#123; response.getWriter().write(&quot;ok&quot;);&#125; @GetMapping(&quot;/response-body-string-v2&quot;)public ResponseEntity&lt;String&gt; responseBodyV2(HttpServletResponse response) &#123; return new ResponseEntity&lt;&gt;(&quot;ok&quot;, HttpStatus.OK);&#125; @ResponseBody@GetMapping(&quot;/response-body-string-v3&quot;)public String responseBodyV3(HttpServletResponse response) &#123; return &quot;ok&quot;;&#125; @GetMapping(&quot;/response-body-json-v1&quot;)public ResponseEntity&lt;HelloData&gt; responseBodyJsonV1() &#123; HelloData helloData = new HelloData(); helloData.setUsername(&quot;userA&quot;); helloData.setAge(20); return new ResponseEntity&lt;&gt;(helloData, HttpStatus.OK);&#125; @ResponseBody@ResponseStatus(HttpStatus.OK)@GetMapping(&quot;/response-body-json-v1&quot;)public HelloData responseBodyJsonV2() &#123; HelloData helloData = new HelloData(); helloData.setUsername(&quot;userA&quot;); helloData.setAge(20); return helloData;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring MVC - HttpMessageConverter","slug":"spring/spring-framework/mvc/spring-mvc-10-messagecoverter","date":"2021-10-11T16:05:00.000Z","updated":"2024-02-26T16:00:15.837Z","comments":true,"path":"2021/10/12/spring/spring-framework/mvc/spring-mvc-10-messagecoverter/","link":"","permalink":"https://ckck803.github.io/2021/10/12/spring/spring-framework/mvc/spring-mvc-10-messagecoverter/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring MVC - HttpMessageConverterHttpMessageConverter ëŠ” HTTP ìš”ì²­, ì‘ë‹µ ë‘˜ë‹¤ ì‚¬ìš©ëœë‹¤. canRead, canWrite : ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ í•´ë‹¹ í´ë˜ìŠ¤, ë¯¸ë””ì–´ íƒ€ì…ì„ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. read, write : ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ í†µí•´ ë©”ì‹œì§€ë¥´ ì½ê³  ì“°ëŠ” ê¸°ëŠ¥ public interface HttpMessageConverter&lt;T&gt; &#123; boolean canRead(Class&lt;?&gt; clazz, @Nullable MediaType mediaType); boolean canWrite(Class&lt;?&gt; clazz, @Nullable MediaType mediaType); List&lt;MediaType&gt; getSupportedMediaTypes(); default List&lt;MediaType&gt; getSupportedMediaTypes(Class&lt;?&gt; clazz) &#123; return (canRead(clazz, null) || canWrite(clazz, null) ? getSupportedMediaTypes() : Collections.emptyList()); &#125; T read(Class&lt;? extends T&gt; clazz, HttpInputMessage inputMessage) throws IOException, HttpMessageNotReadableException; void write(T t, @Nullable MediaType contentType, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException;&#125; ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë³¸ ë©”ì‹œì§€ ì»¨ë²„í„° ByteArrayHttpMessageConverter StringHttpMessageConverter MappingJackson2HttpMessageConverter ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ë‹¤ì–‘í•œ ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì œê³µí•˜ëŠ”ë°, ëŒ€ìƒ í´ë˜ìŠ¤ íƒ€ì…ê³¼ ë¯¸ë””ì–´ íƒ€ì… ë‘˜ì„ ì²´í¬í•´ ì‚¬ìš©ì—¬ë¶€ë¥¼ ê²°ì •í•œë‹¤. ë§Œì•½ í•´ë‹¹ë˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ ë©”ì‹œì§€ ì»¨ë²„í„°ë¡œ ë„˜ì–´ê°„ë‹¤. ByteArrayHttpMessageConverter","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring MVC - HttpMessageConverterHttpMessageConverter ëŠ” HTTP ìš”ì²­, ì‘ë‹µ ë‘˜ë‹¤ ì‚¬ìš©ëœë‹¤. canRead, canWrite : ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ í•´ë‹¹ í´ë˜ìŠ¤, ë¯¸ë””ì–´ íƒ€ì…ì„ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. read, write : ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ í†µí•´ ë©”ì‹œì§€ë¥´ ì½ê³  ì“°ëŠ” ê¸°ëŠ¥ public interface HttpMessageConverter&lt;T&gt; &#123; boolean canRead(Class&lt;?&gt; clazz, @Nullable MediaType mediaType); boolean canWrite(Class&lt;?&gt; clazz, @Nullable MediaType mediaType); List&lt;MediaType&gt; getSupportedMediaTypes(); default List&lt;MediaType&gt; getSupportedMediaTypes(Class&lt;?&gt; clazz) &#123; return (canRead(clazz, null) || canWrite(clazz, null) ? getSupportedMediaTypes() : Collections.emptyList()); &#125; T read(Class&lt;? extends T&gt; clazz, HttpInputMessage inputMessage) throws IOException, HttpMessageNotReadableException; void write(T t, @Nullable MediaType contentType, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException;&#125; ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë³¸ ë©”ì‹œì§€ ì»¨ë²„í„° ByteArrayHttpMessageConverter StringHttpMessageConverter MappingJackson2HttpMessageConverter ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ë‹¤ì–‘í•œ ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì œê³µí•˜ëŠ”ë°, ëŒ€ìƒ í´ë˜ìŠ¤ íƒ€ì…ê³¼ ë¯¸ë””ì–´ íƒ€ì… ë‘˜ì„ ì²´í¬í•´ ì‚¬ìš©ì—¬ë¶€ë¥¼ ê²°ì •í•œë‹¤. ë§Œì•½ í•´ë‹¹ë˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ ë©”ì‹œì§€ ì»¨ë²„í„°ë¡œ ë„˜ì–´ê°„ë‹¤. ByteArrayHttpMessageConverter byte[] ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Message Converter í´ë˜ìŠ¤ íƒ€ì… : byte[] ë¯¸ë””ì–´ íƒ€ì… : &#x2F; ìš”ì²­ ì˜ˆì‹œ : @ReqeustBody byte[] data ì‘ë‹µ ì˜ˆì‹œ : @ResponseBody return byte[] ì“°ê¸° ë¯¸ë””ì–´ íƒ€ì… : application&#x2F;octet-stream StringHttpMessageConverter ë¬¸ìë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Message Converter í´ë˜ìŠ¤ íƒ€ì… : String ë¯¸ë””ì–´ íƒ€ì… : &#x2F; ìš”ì²­ ì˜ˆì‹œ : @RequestBody String data ì‘ë‹µ ì˜ˆì‹œ : @ResponseBody return String ì“°ê¸° ë¯¸ë””ì–´ íƒ€ì… : text&#x2F;plain MappingJackson2HttpMessageConverter Json ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Message Converter í´ë˜ìŠ¤ íƒ€ì… : ê°ì²´ ë˜ëŠ” HashMap ë¯¸ë””ì–´ íƒ€ì… : application&#x2F;json ìš”ì²­ ì˜ˆì‹œ : @RequestBody Hello data ì‘ë‹µ ì˜ˆì‹œ : @ResponseBody return helloData ì“°ê¸° ë¯¸ë””ì–´ íƒ€ì… : application&#x2F;json HTTP ìš”ì²­ ë°ì´í„° ì½ê¸° HTTP ìš”ì²­ì´ ì˜¤ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ @RequestBody, HttpEntity íŒŒë¼ë¯¸í„°ë¥¼ í˜¸ì¶œí•œë‹¤. ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ ë©”ì‹œì§€ë¥¼ ì½ì„ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ canRead ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œë‹¤. ëŒ€ìƒ í´ë˜ìŠ¤ë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸ HTTP ìš”ì²­ì˜ Content-Typeì„ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸ canRead ì¡°ê±´ì— ë§Œì¡±í•˜ë©´ read ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œë‹¤. HTTP ì‘ë‹µ ë°ì´í„° ë³´ë‚´ê¸° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ @ResponseBody, HttpEntity ë¡œ ê°’ì´ ë°˜í™˜ëœë‹¤. ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ ë©”ì‹œì§€ë¥¼ ì“¸ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ canWrite ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œë‹¤. ëŒ€ìƒ í´ë˜ìŠ¤ë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸ HTTP ìš”ì²­ì˜ Accept ë¯¸ë””ì–´ íƒ€ì…ì„ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸ canWrite ì¡°ê±´ì— ë§Œì¡±í•˜ë©´ write ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ HTTP ì‘ë‹µ ë©”ì‹œì§€ ë°”ë””ì— ë°ì´í„°ë¥¼ ìƒì„±í•œë‹¤. public abstract class AbstractHttpMessageConverter&lt;T&gt; implements HttpMessageConverter&lt;T&gt; &#123; /** Logger available to subclasses. */ protected final Log logger = HttpLogging.forLogName(getClass()); private List&lt;MediaType&gt; supportedMediaTypes = Collections.emptyList(); @Nullable private Charset defaultCharset; protected AbstractHttpMessageConverter() &#123; &#125; protected AbstractHttpMessageConverter(MediaType supportedMediaType) &#123; setSupportedMediaTypes(Collections.singletonList(supportedMediaType)); &#125; protected AbstractHttpMessageConverter(MediaType... supportedMediaTypes) &#123; setSupportedMediaTypes(Arrays.asList(supportedMediaTypes)); &#125; protected AbstractHttpMessageConverter(Charset defaultCharset, MediaType... supportedMediaTypes) &#123; this.defaultCharset = defaultCharset; setSupportedMediaTypes(Arrays.asList(supportedMediaTypes)); &#125; public void setSupportedMediaTypes(List&lt;MediaType&gt; supportedMediaTypes) &#123; Assert.notEmpty(supportedMediaTypes, &quot;MediaType List must not be empty&quot;); this.supportedMediaTypes = new ArrayList&lt;&gt;(supportedMediaTypes); &#125; @Override public List&lt;MediaType&gt; getSupportedMediaTypes() &#123; return Collections.unmodifiableList(this.supportedMediaTypes); &#125; public void setDefaultCharset(@Nullable Charset defaultCharset) &#123; this.defaultCharset = defaultCharset; &#125; @Nullable public Charset getDefaultCharset() &#123; return this.defaultCharset; &#125; @Override public boolean canRead(Class&lt;?&gt; clazz, @Nullable MediaType mediaType) &#123; return supports(clazz) &amp;&amp; canRead(mediaType); &#125; protected boolean canRead(@Nullable MediaType mediaType) &#123; if (mediaType == null) &#123; return true; &#125; for (MediaType supportedMediaType : getSupportedMediaTypes()) &#123; if (supportedMediaType.includes(mediaType)) &#123; return true; &#125; &#125; return false; &#125; @Override public boolean canWrite(Class&lt;?&gt; clazz, @Nullable MediaType mediaType) &#123; return supports(clazz) &amp;&amp; canWrite(mediaType); &#125; protected boolean canWrite(@Nullable MediaType mediaType) &#123; if (mediaType == null || MediaType.ALL.equalsTypeAndSubtype(mediaType)) &#123; return true; &#125; for (MediaType supportedMediaType : getSupportedMediaTypes()) &#123; if (supportedMediaType.isCompatibleWith(mediaType)) &#123; return true; &#125; &#125; return false; &#125; @Override public final T read(Class&lt;? extends T&gt; clazz, HttpInputMessage inputMessage) throws IOException, HttpMessageNotReadableException &#123; return readInternal(clazz, inputMessage); &#125; @Override public final void write(final T t, @Nullable MediaType contentType, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException &#123; final HttpHeaders headers = outputMessage.getHeaders(); addDefaultHeaders(headers, t, contentType); if (outputMessage instanceof StreamingHttpOutputMessage) &#123; StreamingHttpOutputMessage streamingOutputMessage = (StreamingHttpOutputMessage) outputMessage; streamingOutputMessage.setBody(outputStream -&gt; writeInternal(t, new HttpOutputMessage() &#123; @Override public OutputStream getBody() &#123; return outputStream; &#125; @Override public HttpHeaders getHeaders() &#123; return headers; &#125; &#125;)); &#125; else &#123; writeInternal(t, outputMessage); outputMessage.getBody().flush(); &#125; &#125; protected void addDefaultHeaders(HttpHeaders headers, T t, @Nullable MediaType contentType) throws IOException &#123; if (headers.getContentType() == null) &#123; MediaType contentTypeToUse = contentType; if (contentType == null || !contentType.isConcrete()) &#123; contentTypeToUse = getDefaultContentType(t); &#125; else if (MediaType.APPLICATION_OCTET_STREAM.equals(contentType)) &#123; MediaType mediaType = getDefaultContentType(t); contentTypeToUse = (mediaType != null ? mediaType : contentTypeToUse); &#125; if (contentTypeToUse != null) &#123; if (contentTypeToUse.getCharset() == null) &#123; Charset defaultCharset = getDefaultCharset(); if (defaultCharset != null) &#123; contentTypeToUse = new MediaType(contentTypeToUse, defaultCharset); &#125; &#125; headers.setContentType(contentTypeToUse); &#125; &#125; if (headers.getContentLength() &lt; 0 &amp;&amp; !headers.containsKey(HttpHeaders.TRANSFER_ENCODING)) &#123; Long contentLength = getContentLength(t, headers.getContentType()); if (contentLength != null) &#123; headers.setContentLength(contentLength); &#125; &#125; &#125; @Nullable protected MediaType getDefaultContentType(T t) throws IOException &#123; List&lt;MediaType&gt; mediaTypes = getSupportedMediaTypes(); return (!mediaTypes.isEmpty() ? mediaTypes.get(0) : null); &#125; @Nullable protected Long getContentLength(T t, @Nullable MediaType contentType) throws IOException &#123; return null; &#125; protected abstract boolean supports(Class&lt;?&gt; clazz); protected abstract T readInternal(Class&lt;? extends T&gt; clazz, HttpInputMessage inputMessage) throws IOException, HttpMessageNotReadableException; protected abstract void writeInternal(T t, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException;&#125; public class ByteArrayHttpMessageConverter extends AbstractHttpMessageConverter&lt;byte[]&gt; &#123; /** * Create a new instance of the &#123;@code ByteArrayHttpMessageConverter&#125;. */ public ByteArrayHttpMessageConverter() &#123; super(MediaType.APPLICATION_OCTET_STREAM, MediaType.ALL); &#125; @Override public boolean supports(Class&lt;?&gt; clazz) &#123; return byte[].class == clazz; &#125; @Override public byte[] readInternal(Class&lt;? extends byte[]&gt; clazz, HttpInputMessage inputMessage) throws IOException &#123; long contentLength = inputMessage.getHeaders().getContentLength(); ByteArrayOutputStream bos = new ByteArrayOutputStream( contentLength &gt;= 0 ? (int) contentLength : StreamUtils.BUFFER_SIZE); StreamUtils.copy(inputMessage.getBody(), bos); return bos.toByteArray(); &#125; @Override protected Long getContentLength(byte[] bytes, @Nullable MediaType contentType) &#123; return (long) bytes.length; &#125; @Override protected void writeInternal(byte[] bytes, HttpOutputMessage outputMessage) throws IOException &#123; StreamUtils.copy(bytes, outputMessage.getBody()); &#125;&#125; public class StringHttpMessageConverter extends AbstractHttpMessageConverter&lt;String&gt; &#123; private static final MediaType APPLICATION_PLUS_JSON = new MediaType(&quot;application&quot;, &quot;*+json&quot;); /** * The default charset used by the converter. */ public static final Charset DEFAULT_CHARSET = StandardCharsets.ISO_8859_1; @Nullable private volatile List&lt;Charset&gt; availableCharsets; private boolean writeAcceptCharset = false; /** * A default constructor that uses &#123;@code &quot;ISO-8859-1&quot;&#125; as the default charset. * * @see #StringHttpMessageConverter(Charset) */ public StringHttpMessageConverter() &#123; this(DEFAULT_CHARSET); &#125; /** * A constructor accepting a default charset to use if the requested content * type does not specify one. */ public StringHttpMessageConverter(Charset defaultCharset) &#123; super(defaultCharset, MediaType.TEXT_PLAIN, MediaType.ALL); &#125; /** * Whether the &#123;@code Accept-Charset&#125; header should be written to any outgoing * request sourced from the value of &#123;@link Charset#availableCharsets()&#125;. The * behavior is suppressed if the header has already been set. * &lt;p&gt; * As of 5.2, by default is set to &#123;@code false&#125;. */ public void setWriteAcceptCharset(boolean writeAcceptCharset) &#123; this.writeAcceptCharset = writeAcceptCharset; &#125; @Override public boolean supports(Class&lt;?&gt; clazz) &#123; return String.class == clazz; &#125; @Override protected String readInternal(Class&lt;? extends String&gt; clazz, HttpInputMessage inputMessage) throws IOException &#123; Charset charset = getContentTypeCharset(inputMessage.getHeaders().getContentType()); return StreamUtils.copyToString(inputMessage.getBody(), charset); &#125; @Override protected Long getContentLength(String str, @Nullable MediaType contentType) &#123; Charset charset = getContentTypeCharset(contentType); return (long) str.getBytes(charset).length; &#125; @Override protected void addDefaultHeaders(HttpHeaders headers, String s, @Nullable MediaType type) throws IOException &#123; if (headers.getContentType() == null) &#123; if (type != null &amp;&amp; type.isConcrete() &amp;&amp; (type.isCompatibleWith(MediaType.APPLICATION_JSON) || type.isCompatibleWith(APPLICATION_PLUS_JSON))) &#123; // Prevent charset parameter for JSON.. headers.setContentType(type); &#125; &#125; super.addDefaultHeaders(headers, s, type); &#125; @Override protected void writeInternal(String str, HttpOutputMessage outputMessage) throws IOException &#123; HttpHeaders headers = outputMessage.getHeaders(); if (this.writeAcceptCharset &amp;&amp; headers.get(HttpHeaders.ACCEPT_CHARSET) == null) &#123; headers.setAcceptCharset(getAcceptedCharsets()); &#125; Charset charset = getContentTypeCharset(headers.getContentType()); StreamUtils.copy(str, charset, outputMessage.getBody()); &#125; /** * Return the list of supported &#123;@link Charset Charsets&#125;. * &lt;p&gt; * By default, returns &#123;@link Charset#availableCharsets()&#125;. Can be overridden in * subclasses. * * @return the list of accepted charsets */ protected List&lt;Charset&gt; getAcceptedCharsets() &#123; List&lt;Charset&gt; charsets = this.availableCharsets; if (charsets == null) &#123; charsets = new ArrayList&lt;&gt;(Charset.availableCharsets().values()); this.availableCharsets = charsets; &#125; return charsets; &#125; private Charset getContentTypeCharset(@Nullable MediaType contentType) &#123; if (contentType != null) &#123; Charset charset = contentType.getCharset(); if (charset != null) &#123; return charset; &#125; else if (contentType.isCompatibleWith(MediaType.APPLICATION_JSON) || contentType.isCompatibleWith(APPLICATION_PLUS_JSON)) &#123; // Matching to AbstractJackson2HttpMessageConverter#DEFAULT_CHARSET return StandardCharsets.UTF_8; &#125; &#125; Charset charset = getDefaultCharset(); Assert.state(charset != null, &quot;No default charset&quot;); return charset; &#125;&#125; public class MappingJackson2HttpMessageConverter extends AbstractJackson2HttpMessageConverter &#123; @Nullable private String jsonPrefix; /** * Construct a new &#123;@link MappingJackson2HttpMessageConverter&#125; using default * configuration provided by &#123;@link Jackson2ObjectMapperBuilder&#125;. */ public MappingJackson2HttpMessageConverter() &#123; this(Jackson2ObjectMapperBuilder.json().build()); &#125; /** * Construct a new &#123;@link MappingJackson2HttpMessageConverter&#125; with a custom * &#123;@link ObjectMapper&#125;. You can use &#123;@link Jackson2ObjectMapperBuilder&#125; to * build it easily. * * @see Jackson2ObjectMapperBuilder#json() */ public MappingJackson2HttpMessageConverter(ObjectMapper objectMapper) &#123; super(objectMapper, MediaType.APPLICATION_JSON, new MediaType(&quot;application&quot;, &quot;*+json&quot;)); &#125; /** * Specify a custom prefix to use for this view&#x27;s JSON output. Default is none. * * @see #setPrefixJson */ public void setJsonPrefix(String jsonPrefix) &#123; this.jsonPrefix = jsonPrefix; &#125; /** * Indicate whether the JSON output by this view should be prefixed with &quot;)]&#125;&#x27;, * &quot;. Default is false. * &lt;p&gt; * Prefixing the JSON string in this manner is used to help prevent JSON * Hijacking. The prefix renders the string syntactically invalid as a script so * that it cannot be hijacked. This prefix should be stripped before parsing the * string as JSON. * * @see #setJsonPrefix */ public void setPrefixJson(boolean prefixJson) &#123; this.jsonPrefix = (prefixJson ? &quot;)]&#125;&#x27;, &quot; : null); &#125; @Override protected void writePrefix(JsonGenerator generator, Object object) throws IOException &#123; if (this.jsonPrefix != null) &#123; generator.writeRaw(this.jsonPrefix); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot RequestMappingHandlerAdapter","slug":"spring/spring-framework/mvc/spring-mvc-12-RequestMappingHandlerAdapter","date":"2021-10-11T16:05:00.000Z","updated":"2024-02-26T16:01:10.559Z","comments":true,"path":"2021/10/12/spring/spring-framework/mvc/spring-mvc-12-RequestMappingHandlerAdapter/","link":"","permalink":"https://ckck803.github.io/2021/10/12/spring/spring-framework/mvc/spring-mvc-12-RequestMappingHandlerAdapter/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging public class RequestMappingHandlerAdapter extends AbstractHandlerMethodAdapter implements BeanFactoryAware, InitializingBean &#123; private static final boolean shouldIgnoreXml = SpringProperties.getFlag(&quot;spring.xml.ignore&quot;); public static final MethodFilter INIT_BINDER_METHODS = (method) -&gt; &#123; return AnnotatedElementUtils.hasAnnotation(method, InitBinder.class); &#125;; public static final MethodFilter MODEL_ATTRIBUTE_METHODS = (method) -&gt; &#123; return !AnnotatedElementUtils.hasAnnotation(method, RequestMapping.class) &amp;&amp; AnnotatedElementUtils.hasAnnotation(method, ModelAttribute.class); &#125;; @Nullable private List&lt;HandlerMethodArgumentResolver&gt; customArgumentResolvers; @Nullable private HandlerMethodArgumentResolverComposite argumentResolvers; @Nullable private HandlerMethodArgumentResolverComposite initBinderArgumentResolvers; @Nullable private List&lt;HandlerMethodReturnValueHandler&gt; customReturnValueHandlers; @Nullable private HandlerMethodReturnValueHandlerComposite returnValueHandlers; @Nullable private List&lt;ModelAndViewResolver&gt; modelAndViewResolvers; private ContentNegotiationManager contentNegotiationManager = new ContentNegotiationManager(); private List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new ArrayList(4); private final List&lt;Object&gt; requestResponseBodyAdvice = new ArrayList(); @Nullable private WebBindingInitializer webBindingInitializer; private AsyncTaskExecutor taskExecutor = new SimpleAsyncTaskExecutor(&quot;MvcAsync&quot;); @Nullable private Long asyncRequestTimeout; private CallableProcessingInterceptor[] callableInterceptors = new CallableProcessingInterceptor[0]; private DeferredResultProcessingInterceptor[] deferredResultInterceptors = new DeferredResultProcessingInterceptor[0]; private ReactiveAdapterRegistry reactiveAdapterRegistry = ReactiveAdapterRegistry.getSharedInstance(); private boolean ignoreDefaultModelOnRedirect = false; private int cacheSecondsForSessionAttributeHandlers = 0; private boolean synchronizeOnSession = false; private SessionAttributeStore sessionAttributeStore = new DefaultSessionAttributeStore(); private ParameterNameDiscoverer parameterNameDiscoverer = new DefaultParameterNameDiscoverer(); @Nullable private ConfigurableBeanFactory beanFactory; private final Map&lt;Class&lt;?&gt;, SessionAttributesHandler&gt; sessionAttributesHandlerCache = new ConcurrentHashMap(64); private final Map&lt;Class&lt;?&gt;, Set&lt;Method&gt;&gt; initBinderCache = new ConcurrentHashMap(64); private final Map&lt;ControllerAdviceBean, Set&lt;Method&gt;&gt; initBinderAdviceCache = new LinkedHashMap(); private final Map&lt;Class&lt;?&gt;, Set&lt;Method&gt;&gt; modelAttributeCache = new ConcurrentHashMap(64); private final Map&lt;ControllerAdviceBean, Set&lt;Method&gt;&gt; modelAttributeAdviceCache = new LinkedHashMap(); public RequestMappingHandlerAdapter() &#123; this.messageConverters.add(new ByteArrayHttpMessageConverter()); this.messageConverters.add(new StringHttpMessageConverter()); if (!shouldIgnoreXml) &#123; try &#123; this.messageConverters.add(new SourceHttpMessageConverter()); &#125; catch (Error var2) &#123; &#125; &#125; this.messageConverters.add(new AllEncompassingFormHttpMessageConverter()); &#125; public void setCustomArgumentResolvers(@Nullable List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) &#123; this.customArgumentResolvers = argumentResolvers; &#125; @Nullable public List&lt;HandlerMethodArgumentResolver&gt; getCustomArgumentResolvers() &#123; return this.customArgumentResolvers; &#125; public void setArgumentResolvers(@Nullable List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) &#123; if (argumentResolvers == null) &#123; this.argumentResolvers = null; &#125; else &#123; this.argumentResolvers = new HandlerMethodArgumentResolverComposite(); this.argumentResolvers.addResolvers(argumentResolvers); &#125; &#125; @Nullable public List&lt;HandlerMethodArgumentResolver&gt; getArgumentResolvers() &#123; return this.argumentResolvers != null ? this.argumentResolvers.getResolvers() : null; &#125; public void setInitBinderArgumentResolvers(@Nullable List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) &#123; if (argumentResolvers == null) &#123; this.initBinderArgumentResolvers = null; &#125; else &#123; this.initBinderArgumentResolvers = new HandlerMethodArgumentResolverComposite(); this.initBinderArgumentResolvers.addResolvers(argumentResolvers); &#125; &#125; @Nullable public List&lt;HandlerMethodArgumentResolver&gt; getInitBinderArgumentResolvers() &#123; return this.initBinderArgumentResolvers != null ? this.initBinderArgumentResolvers.getResolvers() : null; &#125; public void setCustomReturnValueHandlers(@Nullable List&lt;HandlerMethodReturnValueHandler&gt; returnValueHandlers) &#123; this.customReturnValueHandlers = returnValueHandlers; &#125; @Nullable public List&lt;HandlerMethodReturnValueHandler&gt; getCustomReturnValueHandlers() &#123; return this.customReturnValueHandlers; &#125; public void setReturnValueHandlers(@Nullable List&lt;HandlerMethodReturnValueHandler&gt; returnValueHandlers) &#123; if (returnValueHandlers == null) &#123; this.returnValueHandlers = null; &#125; else &#123; this.returnValueHandlers = new HandlerMethodReturnValueHandlerComposite(); this.returnValueHandlers.addHandlers(returnValueHandlers); &#125; &#125; @Nullable public List&lt;HandlerMethodReturnValueHandler&gt; getReturnValueHandlers() &#123; return this.returnValueHandlers != null ? this.returnValueHandlers.getHandlers() : null; &#125; public void setModelAndViewResolvers(@Nullable List&lt;ModelAndViewResolver&gt; modelAndViewResolvers) &#123; this.modelAndViewResolvers = modelAndViewResolvers; &#125; @Nullable public List&lt;ModelAndViewResolver&gt; getModelAndViewResolvers() &#123; return this.modelAndViewResolvers; &#125; public void setContentNegotiationManager(ContentNegotiationManager contentNegotiationManager) &#123; this.contentNegotiationManager = contentNegotiationManager; &#125; public void setMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters) &#123; this.messageConverters = messageConverters; &#125; public List&lt;HttpMessageConverter&lt;?&gt;&gt; getMessageConverters() &#123; return this.messageConverters; &#125; public void setRequestBodyAdvice(@Nullable List&lt;RequestBodyAdvice&gt; requestBodyAdvice) &#123; if (requestBodyAdvice != null) &#123; this.requestResponseBodyAdvice.addAll(requestBodyAdvice); &#125; &#125; public void setResponseBodyAdvice(@Nullable List&lt;ResponseBodyAdvice&lt;?&gt;&gt; responseBodyAdvice) &#123; if (responseBodyAdvice != null) &#123; this.requestResponseBodyAdvice.addAll(responseBodyAdvice); &#125; &#125; public void setWebBindingInitializer(@Nullable WebBindingInitializer webBindingInitializer) &#123; this.webBindingInitializer = webBindingInitializer; &#125; @Nullable public WebBindingInitializer getWebBindingInitializer() &#123; return this.webBindingInitializer; &#125; public void setTaskExecutor(AsyncTaskExecutor taskExecutor) &#123; this.taskExecutor = taskExecutor; &#125; public void setAsyncRequestTimeout(long timeout) &#123; this.asyncRequestTimeout = timeout; &#125; public void setCallableInterceptors(List&lt;CallableProcessingInterceptor&gt; interceptors) &#123; this.callableInterceptors = (CallableProcessingInterceptor[])interceptors.toArray(new CallableProcessingInterceptor[0]); &#125; public void setDeferredResultInterceptors(List&lt;DeferredResultProcessingInterceptor&gt; interceptors) &#123; this.deferredResultInterceptors = (DeferredResultProcessingInterceptor[])interceptors.toArray(new DeferredResultProcessingInterceptor[0]); &#125; public void setReactiveAdapterRegistry(ReactiveAdapterRegistry reactiveAdapterRegistry) &#123; this.reactiveAdapterRegistry = reactiveAdapterRegistry; &#125; public ReactiveAdapterRegistry getReactiveAdapterRegistry() &#123; return this.reactiveAdapterRegistry; &#125; public void setIgnoreDefaultModelOnRedirect(boolean ignoreDefaultModelOnRedirect) &#123; this.ignoreDefaultModelOnRedirect = ignoreDefaultModelOnRedirect; &#125; public void setSessionAttributeStore(SessionAttributeStore sessionAttributeStore) &#123; this.sessionAttributeStore = sessionAttributeStore; &#125; public void setCacheSecondsForSessionAttributeHandlers(int cacheSecondsForSessionAttributeHandlers) &#123; this.cacheSecondsForSessionAttributeHandlers = cacheSecondsForSessionAttributeHandlers; &#125; public void setSynchronizeOnSession(boolean synchronizeOnSession) &#123; this.synchronizeOnSession = synchronizeOnSession; &#125; public void setParameterNameDiscoverer(ParameterNameDiscoverer parameterNameDiscoverer) &#123; this.parameterNameDiscoverer = parameterNameDiscoverer; &#125; public void setBeanFactory(BeanFactory beanFactory) &#123; if (beanFactory instanceof ConfigurableBeanFactory) &#123; this.beanFactory = (ConfigurableBeanFactory)beanFactory; &#125; &#125; @Nullable protected ConfigurableBeanFactory getBeanFactory() &#123; return this.beanFactory; &#125; public void afterPropertiesSet() &#123; this.initControllerAdviceCache(); List handlers; if (this.argumentResolvers == null) &#123; handlers = this.getDefaultArgumentResolvers(); this.argumentResolvers = (new HandlerMethodArgumentResolverComposite()).addResolvers(handlers); &#125; if (this.initBinderArgumentResolvers == null) &#123; handlers = this.getDefaultInitBinderArgumentResolvers(); this.initBinderArgumentResolvers = (new HandlerMethodArgumentResolverComposite()).addResolvers(handlers); &#125; if (this.returnValueHandlers == null) &#123; handlers = this.getDefaultReturnValueHandlers(); this.returnValueHandlers = (new HandlerMethodReturnValueHandlerComposite()).addHandlers(handlers); &#125; &#125; private void initControllerAdviceCache() &#123; if (this.getApplicationContext() != null) &#123; List&lt;ControllerAdviceBean&gt; adviceBeans = ControllerAdviceBean.findAnnotatedBeans(this.getApplicationContext()); List&lt;Object&gt; requestResponseBodyAdviceBeans = new ArrayList(); Iterator var3 = adviceBeans.iterator(); while(var3.hasNext()) &#123; ControllerAdviceBean adviceBean = (ControllerAdviceBean)var3.next(); Class&lt;?&gt; beanType = adviceBean.getBeanType(); if (beanType == null) &#123; throw new IllegalStateException(&quot;Unresolvable type for ControllerAdviceBean: &quot; + adviceBean); &#125; Set&lt;Method&gt; attrMethods = MethodIntrospector.selectMethods(beanType, MODEL_ATTRIBUTE_METHODS); if (!attrMethods.isEmpty()) &#123; this.modelAttributeAdviceCache.put(adviceBean, attrMethods); &#125; Set&lt;Method&gt; binderMethods = MethodIntrospector.selectMethods(beanType, INIT_BINDER_METHODS); if (!binderMethods.isEmpty()) &#123; this.initBinderAdviceCache.put(adviceBean, binderMethods); &#125; if (RequestBodyAdvice.class.isAssignableFrom(beanType) || ResponseBodyAdvice.class.isAssignableFrom(beanType)) &#123; requestResponseBodyAdviceBeans.add(adviceBean); &#125; &#125; if (!requestResponseBodyAdviceBeans.isEmpty()) &#123; this.requestResponseBodyAdvice.addAll(0, requestResponseBodyAdviceBeans); &#125; if (this.logger.isDebugEnabled()) &#123; int modelSize = this.modelAttributeAdviceCache.size(); int binderSize = this.initBinderAdviceCache.size(); int reqCount = this.getBodyAdviceCount(RequestBodyAdvice.class); int resCount = this.getBodyAdviceCount(ResponseBodyAdvice.class); if (modelSize == 0 &amp;&amp; binderSize == 0 &amp;&amp; reqCount == 0 &amp;&amp; resCount == 0) &#123; this.logger.debug(&quot;ControllerAdvice beans: none&quot;); &#125; else &#123; this.logger.debug(&quot;ControllerAdvice beans: &quot; + modelSize + &quot; @ModelAttribute, &quot; + binderSize + &quot; @InitBinder, &quot; + reqCount + &quot; RequestBodyAdvice, &quot; + resCount + &quot; ResponseBodyAdvice&quot;); &#125; &#125; &#125; &#125; private int getBodyAdviceCount(Class&lt;?&gt; adviceType) &#123; List&lt;Object&gt; advice = this.requestResponseBodyAdvice; return RequestBodyAdvice.class.isAssignableFrom(adviceType) ? RequestResponseBodyAdviceChain.getAdviceByType(advice, RequestBodyAdvice.class).size() : RequestResponseBodyAdviceChain.getAdviceByType(advice, ResponseBodyAdvice.class).size(); &#125; private List&lt;HandlerMethodArgumentResolver&gt; getDefaultArgumentResolvers() &#123; List&lt;HandlerMethodArgumentResolver&gt; resolvers = new ArrayList(30); resolvers.add(new RequestParamMethodArgumentResolver(this.getBeanFactory(), false)); resolvers.add(new RequestParamMapMethodArgumentResolver()); resolvers.add(new PathVariableMethodArgumentResolver()); resolvers.add(new PathVariableMapMethodArgumentResolver()); resolvers.add(new MatrixVariableMethodArgumentResolver()); resolvers.add(new MatrixVariableMapMethodArgumentResolver()); resolvers.add(new ServletModelAttributeMethodProcessor(false)); resolvers.add(new RequestResponseBodyMethodProcessor(this.getMessageConverters(), this.requestResponseBodyAdvice)); resolvers.add(new RequestPartMethodArgumentResolver(this.getMessageConverters(), this.requestResponseBodyAdvice)); resolvers.add(new RequestHeaderMethodArgumentResolver(this.getBeanFactory())); resolvers.add(new RequestHeaderMapMethodArgumentResolver()); resolvers.add(new ServletCookieValueMethodArgumentResolver(this.getBeanFactory())); resolvers.add(new ExpressionValueMethodArgumentResolver(this.getBeanFactory())); resolvers.add(new SessionAttributeMethodArgumentResolver()); resolvers.add(new RequestAttributeMethodArgumentResolver()); resolvers.add(new ServletRequestMethodArgumentResolver()); resolvers.add(new ServletResponseMethodArgumentResolver()); resolvers.add(new HttpEntityMethodProcessor(this.getMessageConverters(), this.requestResponseBodyAdvice)); resolvers.add(new RedirectAttributesMethodArgumentResolver()); resolvers.add(new ModelMethodProcessor()); resolvers.add(new MapMethodProcessor()); resolvers.add(new ErrorsMethodArgumentResolver()); resolvers.add(new SessionStatusMethodArgumentResolver()); resolvers.add(new UriComponentsBuilderMethodArgumentResolver()); if (KotlinDetector.isKotlinPresent()) &#123; resolvers.add(new ContinuationHandlerMethodArgumentResolver()); &#125; if (this.getCustomArgumentResolvers() != null) &#123; resolvers.addAll(this.getCustomArgumentResolvers()); &#125; resolvers.add(new PrincipalMethodArgumentResolver()); resolvers.add(new RequestParamMethodArgumentResolver(this.getBeanFactory(), true)); resolvers.add(new ServletModelAttributeMethodProcessor(true)); return resolvers; &#125; private List&lt;HandlerMethodArgumentResolver&gt; getDefaultInitBinderArgumentResolvers() &#123; List&lt;HandlerMethodArgumentResolver&gt; resolvers = new ArrayList(20); resolvers.add(new RequestParamMethodArgumentResolver(this.getBeanFactory(), false)); resolvers.add(new RequestParamMapMethodArgumentResolver()); resolvers.add(new PathVariableMethodArgumentResolver()); resolvers.add(new PathVariableMapMethodArgumentResolver()); resolvers.add(new MatrixVariableMethodArgumentResolver()); resolvers.add(new MatrixVariableMapMethodArgumentResolver()); resolvers.add(new ExpressionValueMethodArgumentResolver(this.getBeanFactory())); resolvers.add(new SessionAttributeMethodArgumentResolver()); resolvers.add(new RequestAttributeMethodArgumentResolver()); resolvers.add(new ServletRequestMethodArgumentResolver()); resolvers.add(new ServletResponseMethodArgumentResolver()); if (this.getCustomArgumentResolvers() != null) &#123; resolvers.addAll(this.getCustomArgumentResolvers()); &#125; resolvers.add(new PrincipalMethodArgumentResolver()); resolvers.add(new RequestParamMethodArgumentResolver(this.getBeanFactory(), true)); return resolvers; &#125; private List&lt;HandlerMethodReturnValueHandler&gt; getDefaultReturnValueHandlers() &#123; List&lt;HandlerMethodReturnValueHandler&gt; handlers = new ArrayList(20); handlers.add(new ModelAndViewMethodReturnValueHandler()); handlers.add(new ModelMethodProcessor()); handlers.add(new ViewMethodReturnValueHandler()); handlers.add(new ResponseBodyEmitterReturnValueHandler(this.getMessageConverters(), this.reactiveAdapterRegistry, this.taskExecutor, this.contentNegotiationManager)); handlers.add(new StreamingResponseBodyReturnValueHandler()); handlers.add(new HttpEntityMethodProcessor(this.getMessageConverters(), this.contentNegotiationManager, this.requestResponseBodyAdvice)); handlers.add(new HttpHeadersReturnValueHandler()); handlers.add(new CallableMethodReturnValueHandler()); handlers.add(new DeferredResultMethodReturnValueHandler()); handlers.add(new AsyncTaskMethodReturnValueHandler(this.beanFactory)); handlers.add(new ServletModelAttributeMethodProcessor(false)); handlers.add(new RequestResponseBodyMethodProcessor(this.getMessageConverters(), this.contentNegotiationManager, this.requestResponseBodyAdvice)); handlers.add(new ViewNameMethodReturnValueHandler()); handlers.add(new MapMethodProcessor()); if (this.getCustomReturnValueHandlers() != null) &#123; handlers.addAll(this.getCustomReturnValueHandlers()); &#125; if (!CollectionUtils.isEmpty(this.getModelAndViewResolvers())) &#123; handlers.add(new ModelAndViewResolverMethodReturnValueHandler(this.getModelAndViewResolvers())); &#125; else &#123; handlers.add(new ServletModelAttributeMethodProcessor(true)); &#125; return handlers; &#125; protected boolean supportsInternal(HandlerMethod handlerMethod) &#123; return true; &#125; protected ModelAndView handleInternal(HttpServletRequest request, HttpServletResponse response, HandlerMethod handlerMethod) throws Exception &#123; this.checkRequest(request); ModelAndView mav; if (this.synchronizeOnSession) &#123; HttpSession session = request.getSession(false); if (session != null) &#123; Object mutex = WebUtils.getSessionMutex(session); synchronized(mutex) &#123; mav = this.invokeHandlerMethod(request, response, handlerMethod); &#125; &#125; else &#123; mav = this.invokeHandlerMethod(request, response, handlerMethod); &#125; &#125; else &#123; mav = this.invokeHandlerMethod(request, response, handlerMethod); &#125; if (!response.containsHeader(&quot;Cache-Control&quot;)) &#123; if (this.getSessionAttributesHandler(handlerMethod).hasSessionAttributes()) &#123; this.applyCacheSeconds(response, this.cacheSecondsForSessionAttributeHandlers); &#125; else &#123; this.prepareResponse(response); &#125; &#125; return mav; &#125; protected long getLastModifiedInternal(HttpServletRequest request, HandlerMethod handlerMethod) &#123; return -1L; &#125; private SessionAttributesHandler getSessionAttributesHandler(HandlerMethod handlerMethod) &#123; return (SessionAttributesHandler)this.sessionAttributesHandlerCache.computeIfAbsent(handlerMethod.getBeanType(), (type) -&gt; &#123; return new SessionAttributesHandler(type, this.sessionAttributeStore); &#125;); &#125; @Nullable protected ModelAndView invokeHandlerMethod(HttpServletRequest request, HttpServletResponse response, HandlerMethod handlerMethod) throws Exception &#123; ServletWebRequest webRequest = new ServletWebRequest(request, response); Object result; try &#123; WebDataBinderFactory binderFactory = this.getDataBinderFactory(handlerMethod); ModelFactory modelFactory = this.getModelFactory(handlerMethod, binderFactory); ServletInvocableHandlerMethod invocableMethod = this.createInvocableHandlerMethod(handlerMethod); if (this.argumentResolvers != null) &#123; invocableMethod.setHandlerMethodArgumentResolvers(this.argumentResolvers); &#125; if (this.returnValueHandlers != null) &#123; invocableMethod.setHandlerMethodReturnValueHandlers(this.returnValueHandlers); &#125; invocableMethod.setDataBinderFactory(binderFactory); invocableMethod.setParameterNameDiscoverer(this.parameterNameDiscoverer); ModelAndViewContainer mavContainer = new ModelAndViewContainer(); mavContainer.addAllAttributes(RequestContextUtils.getInputFlashMap(request)); modelFactory.initModel(webRequest, mavContainer, invocableMethod); mavContainer.setIgnoreDefaultModelOnRedirect(this.ignoreDefaultModelOnRedirect); AsyncWebRequest asyncWebRequest = WebAsyncUtils.createAsyncWebRequest(request, response); asyncWebRequest.setTimeout(this.asyncRequestTimeout); WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request); asyncManager.setTaskExecutor(this.taskExecutor); asyncManager.setAsyncWebRequest(asyncWebRequest); asyncManager.registerCallableInterceptors(this.callableInterceptors); asyncManager.registerDeferredResultInterceptors(this.deferredResultInterceptors); if (asyncManager.hasConcurrentResult()) &#123; result = asyncManager.getConcurrentResult(); mavContainer = (ModelAndViewContainer)asyncManager.getConcurrentResultContext()[0]; asyncManager.clearConcurrentResult(); LogFormatUtils.traceDebug(this.logger, (traceOn) -&gt; &#123; String formatted = LogFormatUtils.formatValue(result, !traceOn); return &quot;Resume with async result [&quot; + formatted + &quot;]&quot;; &#125;); invocableMethod = invocableMethod.wrapConcurrentResult(result); &#125; invocableMethod.invokeAndHandle(webRequest, mavContainer, new Object[0]); if (!asyncManager.isConcurrentHandlingStarted()) &#123; ModelAndView var15 = this.getModelAndView(mavContainer, modelFactory, webRequest); return var15; &#125; result = null; &#125; finally &#123; webRequest.requestCompleted(); &#125; return (ModelAndView)result; &#125; protected ServletInvocableHandlerMethod createInvocableHandlerMethod(HandlerMethod handlerMethod) &#123; return new ServletInvocableHandlerMethod(handlerMethod); &#125; private ModelFactory getModelFactory(HandlerMethod handlerMethod, WebDataBinderFactory binderFactory) &#123; SessionAttributesHandler sessionAttrHandler = this.getSessionAttributesHandler(handlerMethod); Class&lt;?&gt; handlerType = handlerMethod.getBeanType(); Set&lt;Method&gt; methods = (Set)this.modelAttributeCache.get(handlerType); if (methods == null) &#123; methods = MethodIntrospector.selectMethods(handlerType, MODEL_ATTRIBUTE_METHODS); this.modelAttributeCache.put(handlerType, methods); &#125; List&lt;InvocableHandlerMethod&gt; attrMethods = new ArrayList(); this.modelAttributeAdviceCache.forEach((controllerAdviceBean, methodSet) -&gt; &#123; if (controllerAdviceBean.isApplicableToBeanType(handlerType)) &#123; Object bean = controllerAdviceBean.resolveBean(); Iterator var7 = methodSet.iterator(); while(var7.hasNext()) &#123; Method method = (Method)var7.next(); attrMethods.add(this.createModelAttributeMethod(binderFactory, bean, method)); &#125; &#125; &#125;); Iterator var7 = methods.iterator(); while(var7.hasNext()) &#123; Method method = (Method)var7.next(); Object bean = handlerMethod.getBean(); attrMethods.add(this.createModelAttributeMethod(binderFactory, bean, method)); &#125; return new ModelFactory(attrMethods, binderFactory, sessionAttrHandler); &#125; private InvocableHandlerMethod createModelAttributeMethod(WebDataBinderFactory factory, Object bean, Method method) &#123; InvocableHandlerMethod attrMethod = new InvocableHandlerMethod(bean, method); if (this.argumentResolvers != null) &#123; attrMethod.setHandlerMethodArgumentResolvers(this.argumentResolvers); &#125; attrMethod.setParameterNameDiscoverer(this.parameterNameDiscoverer); attrMethod.setDataBinderFactory(factory); return attrMethod; &#125; private WebDataBinderFactory getDataBinderFactory(HandlerMethod handlerMethod) throws Exception &#123; Class&lt;?&gt; handlerType = handlerMethod.getBeanType(); Set&lt;Method&gt; methods = (Set)this.initBinderCache.get(handlerType); if (methods == null) &#123; methods = MethodIntrospector.selectMethods(handlerType, INIT_BINDER_METHODS); this.initBinderCache.put(handlerType, methods); &#125; List&lt;InvocableHandlerMethod&gt; initBinderMethods = new ArrayList(); this.initBinderAdviceCache.forEach((controllerAdviceBean, methodSet) -&gt; &#123; if (controllerAdviceBean.isApplicableToBeanType(handlerType)) &#123; Object bean = controllerAdviceBean.resolveBean(); Iterator var6 = methodSet.iterator(); while(var6.hasNext()) &#123; Method method = (Method)var6.next(); initBinderMethods.add(this.createInitBinderMethod(bean, method)); &#125; &#125; &#125;); Iterator var5 = methods.iterator(); while(var5.hasNext()) &#123; Method method = (Method)var5.next(); Object bean = handlerMethod.getBean(); initBinderMethods.add(this.createInitBinderMethod(bean, method)); &#125; return this.createDataBinderFactory(initBinderMethods); &#125; private InvocableHandlerMethod createInitBinderMethod(Object bean, Method method) &#123; InvocableHandlerMethod binderMethod = new InvocableHandlerMethod(bean, method); if (this.initBinderArgumentResolvers != null) &#123; binderMethod.setHandlerMethodArgumentResolvers(this.initBinderArgumentResolvers); &#125; binderMethod.setDataBinderFactory(new DefaultDataBinderFactory(this.webBindingInitializer)); binderMethod.setParameterNameDiscoverer(this.parameterNameDiscoverer); return binderMethod; &#125; protected InitBinderDataBinderFactory createDataBinderFactory(List&lt;InvocableHandlerMethod&gt; binderMethods) throws Exception &#123; return new ServletRequestDataBinderFactory(binderMethods, this.getWebBindingInitializer()); &#125; @Nullable private ModelAndView getModelAndView(ModelAndViewContainer mavContainer, ModelFactory modelFactory, NativeWebRequest webRequest) throws Exception &#123; modelFactory.updateModel(webRequest, mavContainer); if (mavContainer.isRequestHandled()) &#123; return null; &#125; else &#123; ModelMap model = mavContainer.getModel(); ModelAndView mav = new ModelAndView(mavContainer.getViewName(), model, mavContainer.getStatus()); if (!mavContainer.isViewReference()) &#123; mav.setView((View)mavContainer.getView()); &#125; if (model instanceof RedirectAttributes) &#123; Map&lt;String, ?&gt; flashAttributes = ((RedirectAttributes)model).getFlashAttributes(); HttpServletRequest request = (HttpServletRequest)webRequest.getNativeRequest(HttpServletRequest.class); if (request != null) &#123; RequestContextUtils.getOutputFlashMap(request).putAll(flashAttributes); &#125; &#125; return mav; &#125; &#125;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging public class RequestMappingHandlerAdapter extends AbstractHandlerMethodAdapter implements BeanFactoryAware, InitializingBean &#123; private static final boolean shouldIgnoreXml = SpringProperties.getFlag(&quot;spring.xml.ignore&quot;); public static final MethodFilter INIT_BINDER_METHODS = (method) -&gt; &#123; return AnnotatedElementUtils.hasAnnotation(method, InitBinder.class); &#125;; public static final MethodFilter MODEL_ATTRIBUTE_METHODS = (method) -&gt; &#123; return !AnnotatedElementUtils.hasAnnotation(method, RequestMapping.class) &amp;&amp; AnnotatedElementUtils.hasAnnotation(method, ModelAttribute.class); &#125;; @Nullable private List&lt;HandlerMethodArgumentResolver&gt; customArgumentResolvers; @Nullable private HandlerMethodArgumentResolverComposite argumentResolvers; @Nullable private HandlerMethodArgumentResolverComposite initBinderArgumentResolvers; @Nullable private List&lt;HandlerMethodReturnValueHandler&gt; customReturnValueHandlers; @Nullable private HandlerMethodReturnValueHandlerComposite returnValueHandlers; @Nullable private List&lt;ModelAndViewResolver&gt; modelAndViewResolvers; private ContentNegotiationManager contentNegotiationManager = new ContentNegotiationManager(); private List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new ArrayList(4); private final List&lt;Object&gt; requestResponseBodyAdvice = new ArrayList(); @Nullable private WebBindingInitializer webBindingInitializer; private AsyncTaskExecutor taskExecutor = new SimpleAsyncTaskExecutor(&quot;MvcAsync&quot;); @Nullable private Long asyncRequestTimeout; private CallableProcessingInterceptor[] callableInterceptors = new CallableProcessingInterceptor[0]; private DeferredResultProcessingInterceptor[] deferredResultInterceptors = new DeferredResultProcessingInterceptor[0]; private ReactiveAdapterRegistry reactiveAdapterRegistry = ReactiveAdapterRegistry.getSharedInstance(); private boolean ignoreDefaultModelOnRedirect = false; private int cacheSecondsForSessionAttributeHandlers = 0; private boolean synchronizeOnSession = false; private SessionAttributeStore sessionAttributeStore = new DefaultSessionAttributeStore(); private ParameterNameDiscoverer parameterNameDiscoverer = new DefaultParameterNameDiscoverer(); @Nullable private ConfigurableBeanFactory beanFactory; private final Map&lt;Class&lt;?&gt;, SessionAttributesHandler&gt; sessionAttributesHandlerCache = new ConcurrentHashMap(64); private final Map&lt;Class&lt;?&gt;, Set&lt;Method&gt;&gt; initBinderCache = new ConcurrentHashMap(64); private final Map&lt;ControllerAdviceBean, Set&lt;Method&gt;&gt; initBinderAdviceCache = new LinkedHashMap(); private final Map&lt;Class&lt;?&gt;, Set&lt;Method&gt;&gt; modelAttributeCache = new ConcurrentHashMap(64); private final Map&lt;ControllerAdviceBean, Set&lt;Method&gt;&gt; modelAttributeAdviceCache = new LinkedHashMap(); public RequestMappingHandlerAdapter() &#123; this.messageConverters.add(new ByteArrayHttpMessageConverter()); this.messageConverters.add(new StringHttpMessageConverter()); if (!shouldIgnoreXml) &#123; try &#123; this.messageConverters.add(new SourceHttpMessageConverter()); &#125; catch (Error var2) &#123; &#125; &#125; this.messageConverters.add(new AllEncompassingFormHttpMessageConverter()); &#125; public void setCustomArgumentResolvers(@Nullable List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) &#123; this.customArgumentResolvers = argumentResolvers; &#125; @Nullable public List&lt;HandlerMethodArgumentResolver&gt; getCustomArgumentResolvers() &#123; return this.customArgumentResolvers; &#125; public void setArgumentResolvers(@Nullable List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) &#123; if (argumentResolvers == null) &#123; this.argumentResolvers = null; &#125; else &#123; this.argumentResolvers = new HandlerMethodArgumentResolverComposite(); this.argumentResolvers.addResolvers(argumentResolvers); &#125; &#125; @Nullable public List&lt;HandlerMethodArgumentResolver&gt; getArgumentResolvers() &#123; return this.argumentResolvers != null ? this.argumentResolvers.getResolvers() : null; &#125; public void setInitBinderArgumentResolvers(@Nullable List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) &#123; if (argumentResolvers == null) &#123; this.initBinderArgumentResolvers = null; &#125; else &#123; this.initBinderArgumentResolvers = new HandlerMethodArgumentResolverComposite(); this.initBinderArgumentResolvers.addResolvers(argumentResolvers); &#125; &#125; @Nullable public List&lt;HandlerMethodArgumentResolver&gt; getInitBinderArgumentResolvers() &#123; return this.initBinderArgumentResolvers != null ? this.initBinderArgumentResolvers.getResolvers() : null; &#125; public void setCustomReturnValueHandlers(@Nullable List&lt;HandlerMethodReturnValueHandler&gt; returnValueHandlers) &#123; this.customReturnValueHandlers = returnValueHandlers; &#125; @Nullable public List&lt;HandlerMethodReturnValueHandler&gt; getCustomReturnValueHandlers() &#123; return this.customReturnValueHandlers; &#125; public void setReturnValueHandlers(@Nullable List&lt;HandlerMethodReturnValueHandler&gt; returnValueHandlers) &#123; if (returnValueHandlers == null) &#123; this.returnValueHandlers = null; &#125; else &#123; this.returnValueHandlers = new HandlerMethodReturnValueHandlerComposite(); this.returnValueHandlers.addHandlers(returnValueHandlers); &#125; &#125; @Nullable public List&lt;HandlerMethodReturnValueHandler&gt; getReturnValueHandlers() &#123; return this.returnValueHandlers != null ? this.returnValueHandlers.getHandlers() : null; &#125; public void setModelAndViewResolvers(@Nullable List&lt;ModelAndViewResolver&gt; modelAndViewResolvers) &#123; this.modelAndViewResolvers = modelAndViewResolvers; &#125; @Nullable public List&lt;ModelAndViewResolver&gt; getModelAndViewResolvers() &#123; return this.modelAndViewResolvers; &#125; public void setContentNegotiationManager(ContentNegotiationManager contentNegotiationManager) &#123; this.contentNegotiationManager = contentNegotiationManager; &#125; public void setMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters) &#123; this.messageConverters = messageConverters; &#125; public List&lt;HttpMessageConverter&lt;?&gt;&gt; getMessageConverters() &#123; return this.messageConverters; &#125; public void setRequestBodyAdvice(@Nullable List&lt;RequestBodyAdvice&gt; requestBodyAdvice) &#123; if (requestBodyAdvice != null) &#123; this.requestResponseBodyAdvice.addAll(requestBodyAdvice); &#125; &#125; public void setResponseBodyAdvice(@Nullable List&lt;ResponseBodyAdvice&lt;?&gt;&gt; responseBodyAdvice) &#123; if (responseBodyAdvice != null) &#123; this.requestResponseBodyAdvice.addAll(responseBodyAdvice); &#125; &#125; public void setWebBindingInitializer(@Nullable WebBindingInitializer webBindingInitializer) &#123; this.webBindingInitializer = webBindingInitializer; &#125; @Nullable public WebBindingInitializer getWebBindingInitializer() &#123; return this.webBindingInitializer; &#125; public void setTaskExecutor(AsyncTaskExecutor taskExecutor) &#123; this.taskExecutor = taskExecutor; &#125; public void setAsyncRequestTimeout(long timeout) &#123; this.asyncRequestTimeout = timeout; &#125; public void setCallableInterceptors(List&lt;CallableProcessingInterceptor&gt; interceptors) &#123; this.callableInterceptors = (CallableProcessingInterceptor[])interceptors.toArray(new CallableProcessingInterceptor[0]); &#125; public void setDeferredResultInterceptors(List&lt;DeferredResultProcessingInterceptor&gt; interceptors) &#123; this.deferredResultInterceptors = (DeferredResultProcessingInterceptor[])interceptors.toArray(new DeferredResultProcessingInterceptor[0]); &#125; public void setReactiveAdapterRegistry(ReactiveAdapterRegistry reactiveAdapterRegistry) &#123; this.reactiveAdapterRegistry = reactiveAdapterRegistry; &#125; public ReactiveAdapterRegistry getReactiveAdapterRegistry() &#123; return this.reactiveAdapterRegistry; &#125; public void setIgnoreDefaultModelOnRedirect(boolean ignoreDefaultModelOnRedirect) &#123; this.ignoreDefaultModelOnRedirect = ignoreDefaultModelOnRedirect; &#125; public void setSessionAttributeStore(SessionAttributeStore sessionAttributeStore) &#123; this.sessionAttributeStore = sessionAttributeStore; &#125; public void setCacheSecondsForSessionAttributeHandlers(int cacheSecondsForSessionAttributeHandlers) &#123; this.cacheSecondsForSessionAttributeHandlers = cacheSecondsForSessionAttributeHandlers; &#125; public void setSynchronizeOnSession(boolean synchronizeOnSession) &#123; this.synchronizeOnSession = synchronizeOnSession; &#125; public void setParameterNameDiscoverer(ParameterNameDiscoverer parameterNameDiscoverer) &#123; this.parameterNameDiscoverer = parameterNameDiscoverer; &#125; public void setBeanFactory(BeanFactory beanFactory) &#123; if (beanFactory instanceof ConfigurableBeanFactory) &#123; this.beanFactory = (ConfigurableBeanFactory)beanFactory; &#125; &#125; @Nullable protected ConfigurableBeanFactory getBeanFactory() &#123; return this.beanFactory; &#125; public void afterPropertiesSet() &#123; this.initControllerAdviceCache(); List handlers; if (this.argumentResolvers == null) &#123; handlers = this.getDefaultArgumentResolvers(); this.argumentResolvers = (new HandlerMethodArgumentResolverComposite()).addResolvers(handlers); &#125; if (this.initBinderArgumentResolvers == null) &#123; handlers = this.getDefaultInitBinderArgumentResolvers(); this.initBinderArgumentResolvers = (new HandlerMethodArgumentResolverComposite()).addResolvers(handlers); &#125; if (this.returnValueHandlers == null) &#123; handlers = this.getDefaultReturnValueHandlers(); this.returnValueHandlers = (new HandlerMethodReturnValueHandlerComposite()).addHandlers(handlers); &#125; &#125; private void initControllerAdviceCache() &#123; if (this.getApplicationContext() != null) &#123; List&lt;ControllerAdviceBean&gt; adviceBeans = ControllerAdviceBean.findAnnotatedBeans(this.getApplicationContext()); List&lt;Object&gt; requestResponseBodyAdviceBeans = new ArrayList(); Iterator var3 = adviceBeans.iterator(); while(var3.hasNext()) &#123; ControllerAdviceBean adviceBean = (ControllerAdviceBean)var3.next(); Class&lt;?&gt; beanType = adviceBean.getBeanType(); if (beanType == null) &#123; throw new IllegalStateException(&quot;Unresolvable type for ControllerAdviceBean: &quot; + adviceBean); &#125; Set&lt;Method&gt; attrMethods = MethodIntrospector.selectMethods(beanType, MODEL_ATTRIBUTE_METHODS); if (!attrMethods.isEmpty()) &#123; this.modelAttributeAdviceCache.put(adviceBean, attrMethods); &#125; Set&lt;Method&gt; binderMethods = MethodIntrospector.selectMethods(beanType, INIT_BINDER_METHODS); if (!binderMethods.isEmpty()) &#123; this.initBinderAdviceCache.put(adviceBean, binderMethods); &#125; if (RequestBodyAdvice.class.isAssignableFrom(beanType) || ResponseBodyAdvice.class.isAssignableFrom(beanType)) &#123; requestResponseBodyAdviceBeans.add(adviceBean); &#125; &#125; if (!requestResponseBodyAdviceBeans.isEmpty()) &#123; this.requestResponseBodyAdvice.addAll(0, requestResponseBodyAdviceBeans); &#125; if (this.logger.isDebugEnabled()) &#123; int modelSize = this.modelAttributeAdviceCache.size(); int binderSize = this.initBinderAdviceCache.size(); int reqCount = this.getBodyAdviceCount(RequestBodyAdvice.class); int resCount = this.getBodyAdviceCount(ResponseBodyAdvice.class); if (modelSize == 0 &amp;&amp; binderSize == 0 &amp;&amp; reqCount == 0 &amp;&amp; resCount == 0) &#123; this.logger.debug(&quot;ControllerAdvice beans: none&quot;); &#125; else &#123; this.logger.debug(&quot;ControllerAdvice beans: &quot; + modelSize + &quot; @ModelAttribute, &quot; + binderSize + &quot; @InitBinder, &quot; + reqCount + &quot; RequestBodyAdvice, &quot; + resCount + &quot; ResponseBodyAdvice&quot;); &#125; &#125; &#125; &#125; private int getBodyAdviceCount(Class&lt;?&gt; adviceType) &#123; List&lt;Object&gt; advice = this.requestResponseBodyAdvice; return RequestBodyAdvice.class.isAssignableFrom(adviceType) ? RequestResponseBodyAdviceChain.getAdviceByType(advice, RequestBodyAdvice.class).size() : RequestResponseBodyAdviceChain.getAdviceByType(advice, ResponseBodyAdvice.class).size(); &#125; private List&lt;HandlerMethodArgumentResolver&gt; getDefaultArgumentResolvers() &#123; List&lt;HandlerMethodArgumentResolver&gt; resolvers = new ArrayList(30); resolvers.add(new RequestParamMethodArgumentResolver(this.getBeanFactory(), false)); resolvers.add(new RequestParamMapMethodArgumentResolver()); resolvers.add(new PathVariableMethodArgumentResolver()); resolvers.add(new PathVariableMapMethodArgumentResolver()); resolvers.add(new MatrixVariableMethodArgumentResolver()); resolvers.add(new MatrixVariableMapMethodArgumentResolver()); resolvers.add(new ServletModelAttributeMethodProcessor(false)); resolvers.add(new RequestResponseBodyMethodProcessor(this.getMessageConverters(), this.requestResponseBodyAdvice)); resolvers.add(new RequestPartMethodArgumentResolver(this.getMessageConverters(), this.requestResponseBodyAdvice)); resolvers.add(new RequestHeaderMethodArgumentResolver(this.getBeanFactory())); resolvers.add(new RequestHeaderMapMethodArgumentResolver()); resolvers.add(new ServletCookieValueMethodArgumentResolver(this.getBeanFactory())); resolvers.add(new ExpressionValueMethodArgumentResolver(this.getBeanFactory())); resolvers.add(new SessionAttributeMethodArgumentResolver()); resolvers.add(new RequestAttributeMethodArgumentResolver()); resolvers.add(new ServletRequestMethodArgumentResolver()); resolvers.add(new ServletResponseMethodArgumentResolver()); resolvers.add(new HttpEntityMethodProcessor(this.getMessageConverters(), this.requestResponseBodyAdvice)); resolvers.add(new RedirectAttributesMethodArgumentResolver()); resolvers.add(new ModelMethodProcessor()); resolvers.add(new MapMethodProcessor()); resolvers.add(new ErrorsMethodArgumentResolver()); resolvers.add(new SessionStatusMethodArgumentResolver()); resolvers.add(new UriComponentsBuilderMethodArgumentResolver()); if (KotlinDetector.isKotlinPresent()) &#123; resolvers.add(new ContinuationHandlerMethodArgumentResolver()); &#125; if (this.getCustomArgumentResolvers() != null) &#123; resolvers.addAll(this.getCustomArgumentResolvers()); &#125; resolvers.add(new PrincipalMethodArgumentResolver()); resolvers.add(new RequestParamMethodArgumentResolver(this.getBeanFactory(), true)); resolvers.add(new ServletModelAttributeMethodProcessor(true)); return resolvers; &#125; private List&lt;HandlerMethodArgumentResolver&gt; getDefaultInitBinderArgumentResolvers() &#123; List&lt;HandlerMethodArgumentResolver&gt; resolvers = new ArrayList(20); resolvers.add(new RequestParamMethodArgumentResolver(this.getBeanFactory(), false)); resolvers.add(new RequestParamMapMethodArgumentResolver()); resolvers.add(new PathVariableMethodArgumentResolver()); resolvers.add(new PathVariableMapMethodArgumentResolver()); resolvers.add(new MatrixVariableMethodArgumentResolver()); resolvers.add(new MatrixVariableMapMethodArgumentResolver()); resolvers.add(new ExpressionValueMethodArgumentResolver(this.getBeanFactory())); resolvers.add(new SessionAttributeMethodArgumentResolver()); resolvers.add(new RequestAttributeMethodArgumentResolver()); resolvers.add(new ServletRequestMethodArgumentResolver()); resolvers.add(new ServletResponseMethodArgumentResolver()); if (this.getCustomArgumentResolvers() != null) &#123; resolvers.addAll(this.getCustomArgumentResolvers()); &#125; resolvers.add(new PrincipalMethodArgumentResolver()); resolvers.add(new RequestParamMethodArgumentResolver(this.getBeanFactory(), true)); return resolvers; &#125; private List&lt;HandlerMethodReturnValueHandler&gt; getDefaultReturnValueHandlers() &#123; List&lt;HandlerMethodReturnValueHandler&gt; handlers = new ArrayList(20); handlers.add(new ModelAndViewMethodReturnValueHandler()); handlers.add(new ModelMethodProcessor()); handlers.add(new ViewMethodReturnValueHandler()); handlers.add(new ResponseBodyEmitterReturnValueHandler(this.getMessageConverters(), this.reactiveAdapterRegistry, this.taskExecutor, this.contentNegotiationManager)); handlers.add(new StreamingResponseBodyReturnValueHandler()); handlers.add(new HttpEntityMethodProcessor(this.getMessageConverters(), this.contentNegotiationManager, this.requestResponseBodyAdvice)); handlers.add(new HttpHeadersReturnValueHandler()); handlers.add(new CallableMethodReturnValueHandler()); handlers.add(new DeferredResultMethodReturnValueHandler()); handlers.add(new AsyncTaskMethodReturnValueHandler(this.beanFactory)); handlers.add(new ServletModelAttributeMethodProcessor(false)); handlers.add(new RequestResponseBodyMethodProcessor(this.getMessageConverters(), this.contentNegotiationManager, this.requestResponseBodyAdvice)); handlers.add(new ViewNameMethodReturnValueHandler()); handlers.add(new MapMethodProcessor()); if (this.getCustomReturnValueHandlers() != null) &#123; handlers.addAll(this.getCustomReturnValueHandlers()); &#125; if (!CollectionUtils.isEmpty(this.getModelAndViewResolvers())) &#123; handlers.add(new ModelAndViewResolverMethodReturnValueHandler(this.getModelAndViewResolvers())); &#125; else &#123; handlers.add(new ServletModelAttributeMethodProcessor(true)); &#125; return handlers; &#125; protected boolean supportsInternal(HandlerMethod handlerMethod) &#123; return true; &#125; protected ModelAndView handleInternal(HttpServletRequest request, HttpServletResponse response, HandlerMethod handlerMethod) throws Exception &#123; this.checkRequest(request); ModelAndView mav; if (this.synchronizeOnSession) &#123; HttpSession session = request.getSession(false); if (session != null) &#123; Object mutex = WebUtils.getSessionMutex(session); synchronized(mutex) &#123; mav = this.invokeHandlerMethod(request, response, handlerMethod); &#125; &#125; else &#123; mav = this.invokeHandlerMethod(request, response, handlerMethod); &#125; &#125; else &#123; mav = this.invokeHandlerMethod(request, response, handlerMethod); &#125; if (!response.containsHeader(&quot;Cache-Control&quot;)) &#123; if (this.getSessionAttributesHandler(handlerMethod).hasSessionAttributes()) &#123; this.applyCacheSeconds(response, this.cacheSecondsForSessionAttributeHandlers); &#125; else &#123; this.prepareResponse(response); &#125; &#125; return mav; &#125; protected long getLastModifiedInternal(HttpServletRequest request, HandlerMethod handlerMethod) &#123; return -1L; &#125; private SessionAttributesHandler getSessionAttributesHandler(HandlerMethod handlerMethod) &#123; return (SessionAttributesHandler)this.sessionAttributesHandlerCache.computeIfAbsent(handlerMethod.getBeanType(), (type) -&gt; &#123; return new SessionAttributesHandler(type, this.sessionAttributeStore); &#125;); &#125; @Nullable protected ModelAndView invokeHandlerMethod(HttpServletRequest request, HttpServletResponse response, HandlerMethod handlerMethod) throws Exception &#123; ServletWebRequest webRequest = new ServletWebRequest(request, response); Object result; try &#123; WebDataBinderFactory binderFactory = this.getDataBinderFactory(handlerMethod); ModelFactory modelFactory = this.getModelFactory(handlerMethod, binderFactory); ServletInvocableHandlerMethod invocableMethod = this.createInvocableHandlerMethod(handlerMethod); if (this.argumentResolvers != null) &#123; invocableMethod.setHandlerMethodArgumentResolvers(this.argumentResolvers); &#125; if (this.returnValueHandlers != null) &#123; invocableMethod.setHandlerMethodReturnValueHandlers(this.returnValueHandlers); &#125; invocableMethod.setDataBinderFactory(binderFactory); invocableMethod.setParameterNameDiscoverer(this.parameterNameDiscoverer); ModelAndViewContainer mavContainer = new ModelAndViewContainer(); mavContainer.addAllAttributes(RequestContextUtils.getInputFlashMap(request)); modelFactory.initModel(webRequest, mavContainer, invocableMethod); mavContainer.setIgnoreDefaultModelOnRedirect(this.ignoreDefaultModelOnRedirect); AsyncWebRequest asyncWebRequest = WebAsyncUtils.createAsyncWebRequest(request, response); asyncWebRequest.setTimeout(this.asyncRequestTimeout); WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request); asyncManager.setTaskExecutor(this.taskExecutor); asyncManager.setAsyncWebRequest(asyncWebRequest); asyncManager.registerCallableInterceptors(this.callableInterceptors); asyncManager.registerDeferredResultInterceptors(this.deferredResultInterceptors); if (asyncManager.hasConcurrentResult()) &#123; result = asyncManager.getConcurrentResult(); mavContainer = (ModelAndViewContainer)asyncManager.getConcurrentResultContext()[0]; asyncManager.clearConcurrentResult(); LogFormatUtils.traceDebug(this.logger, (traceOn) -&gt; &#123; String formatted = LogFormatUtils.formatValue(result, !traceOn); return &quot;Resume with async result [&quot; + formatted + &quot;]&quot;; &#125;); invocableMethod = invocableMethod.wrapConcurrentResult(result); &#125; invocableMethod.invokeAndHandle(webRequest, mavContainer, new Object[0]); if (!asyncManager.isConcurrentHandlingStarted()) &#123; ModelAndView var15 = this.getModelAndView(mavContainer, modelFactory, webRequest); return var15; &#125; result = null; &#125; finally &#123; webRequest.requestCompleted(); &#125; return (ModelAndView)result; &#125; protected ServletInvocableHandlerMethod createInvocableHandlerMethod(HandlerMethod handlerMethod) &#123; return new ServletInvocableHandlerMethod(handlerMethod); &#125; private ModelFactory getModelFactory(HandlerMethod handlerMethod, WebDataBinderFactory binderFactory) &#123; SessionAttributesHandler sessionAttrHandler = this.getSessionAttributesHandler(handlerMethod); Class&lt;?&gt; handlerType = handlerMethod.getBeanType(); Set&lt;Method&gt; methods = (Set)this.modelAttributeCache.get(handlerType); if (methods == null) &#123; methods = MethodIntrospector.selectMethods(handlerType, MODEL_ATTRIBUTE_METHODS); this.modelAttributeCache.put(handlerType, methods); &#125; List&lt;InvocableHandlerMethod&gt; attrMethods = new ArrayList(); this.modelAttributeAdviceCache.forEach((controllerAdviceBean, methodSet) -&gt; &#123; if (controllerAdviceBean.isApplicableToBeanType(handlerType)) &#123; Object bean = controllerAdviceBean.resolveBean(); Iterator var7 = methodSet.iterator(); while(var7.hasNext()) &#123; Method method = (Method)var7.next(); attrMethods.add(this.createModelAttributeMethod(binderFactory, bean, method)); &#125; &#125; &#125;); Iterator var7 = methods.iterator(); while(var7.hasNext()) &#123; Method method = (Method)var7.next(); Object bean = handlerMethod.getBean(); attrMethods.add(this.createModelAttributeMethod(binderFactory, bean, method)); &#125; return new ModelFactory(attrMethods, binderFactory, sessionAttrHandler); &#125; private InvocableHandlerMethod createModelAttributeMethod(WebDataBinderFactory factory, Object bean, Method method) &#123; InvocableHandlerMethod attrMethod = new InvocableHandlerMethod(bean, method); if (this.argumentResolvers != null) &#123; attrMethod.setHandlerMethodArgumentResolvers(this.argumentResolvers); &#125; attrMethod.setParameterNameDiscoverer(this.parameterNameDiscoverer); attrMethod.setDataBinderFactory(factory); return attrMethod; &#125; private WebDataBinderFactory getDataBinderFactory(HandlerMethod handlerMethod) throws Exception &#123; Class&lt;?&gt; handlerType = handlerMethod.getBeanType(); Set&lt;Method&gt; methods = (Set)this.initBinderCache.get(handlerType); if (methods == null) &#123; methods = MethodIntrospector.selectMethods(handlerType, INIT_BINDER_METHODS); this.initBinderCache.put(handlerType, methods); &#125; List&lt;InvocableHandlerMethod&gt; initBinderMethods = new ArrayList(); this.initBinderAdviceCache.forEach((controllerAdviceBean, methodSet) -&gt; &#123; if (controllerAdviceBean.isApplicableToBeanType(handlerType)) &#123; Object bean = controllerAdviceBean.resolveBean(); Iterator var6 = methodSet.iterator(); while(var6.hasNext()) &#123; Method method = (Method)var6.next(); initBinderMethods.add(this.createInitBinderMethod(bean, method)); &#125; &#125; &#125;); Iterator var5 = methods.iterator(); while(var5.hasNext()) &#123; Method method = (Method)var5.next(); Object bean = handlerMethod.getBean(); initBinderMethods.add(this.createInitBinderMethod(bean, method)); &#125; return this.createDataBinderFactory(initBinderMethods); &#125; private InvocableHandlerMethod createInitBinderMethod(Object bean, Method method) &#123; InvocableHandlerMethod binderMethod = new InvocableHandlerMethod(bean, method); if (this.initBinderArgumentResolvers != null) &#123; binderMethod.setHandlerMethodArgumentResolvers(this.initBinderArgumentResolvers); &#125; binderMethod.setDataBinderFactory(new DefaultDataBinderFactory(this.webBindingInitializer)); binderMethod.setParameterNameDiscoverer(this.parameterNameDiscoverer); return binderMethod; &#125; protected InitBinderDataBinderFactory createDataBinderFactory(List&lt;InvocableHandlerMethod&gt; binderMethods) throws Exception &#123; return new ServletRequestDataBinderFactory(binderMethods, this.getWebBindingInitializer()); &#125; @Nullable private ModelAndView getModelAndView(ModelAndViewContainer mavContainer, ModelFactory modelFactory, NativeWebRequest webRequest) throws Exception &#123; modelFactory.updateModel(webRequest, mavContainer); if (mavContainer.isRequestHandled()) &#123; return null; &#125; else &#123; ModelMap model = mavContainer.getModel(); ModelAndView mav = new ModelAndView(mavContainer.getViewName(), model, mavContainer.getStatus()); if (!mavContainer.isViewReference()) &#123; mav.setView((View)mavContainer.getView()); &#125; if (model instanceof RedirectAttributes) &#123; Map&lt;String, ?&gt; flashAttributes = ((RedirectAttributes)model).getFlashAttributes(); HttpServletRequest request = (HttpServletRequest)webRequest.getNativeRequest(HttpServletRequest.class); if (request != null) &#123; RequestContextUtils.getOutputFlashMap(request).putAll(flashAttributes); &#125; &#125; return mav; &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot ReturnValueHandler","slug":"spring/spring-framework/mvc/spring-mvc-13-ReturnValueHandler","date":"2021-10-11T16:05:00.000Z","updated":"2024-02-26T16:01:41.272Z","comments":true,"path":"2021/10/12/spring/spring-framework/mvc/spring-mvc-13-ReturnValueHandler/","link":"","permalink":"https://ckck803.github.io/2021/10/12/spring/spring-framework/mvc/spring-mvc-13-ReturnValueHandler/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot ReturnValueHandlerpublic interface HandlerMethodReturnValueHandler &#123; boolean supportsReturnType(MethodParameter returnType); void handleReturnValue(@Nullable Object returnValue, MethodParameter returnType, ModelAndViewContainer mavContainer, NativeWebRequest webRequest) throws Exception;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot ReturnValueHandlerpublic interface HandlerMethodReturnValueHandler &#123; boolean supportsReturnType(MethodParameter returnType); void handleReturnValue(@Nullable Object returnValue, MethodParameter returnType, ModelAndViewContainer mavContainer, NativeWebRequest webRequest) throws Exception;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring MVC Request Life Cycle - Filter","slug":"spring/spring-framework/lifecycle/spring-lifecycle-request-lifecycle-filter","date":"2021-10-11T13:39:59.000Z","updated":"2024-02-26T15:57:00.891Z","comments":true,"path":"2021/10/11/spring/spring-framework/lifecycle/spring-lifecycle-request-lifecycle-filter/","link":"","permalink":"https://ckck803.github.io/2021/10/11/spring/spring-framework/lifecycle/spring-lifecycle-request-lifecycle-filter/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter Filter FilterëŠ” Spring Context ì´ì „ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— Springìì²´ì™€ëŠ” ë¬´ê´€í•˜ë©° Web Applicationì— ë“±ë¡ì´ ëœë‹¤. ìš”ì²­ì´ DispatcherServletì— ë„ì°©í•˜ê¸° ì „ì— ì²˜ë¦¬ë¥¼ í•˜ê±°ë‚˜ ìš”ì²­ì´ ëë‚˜ê³  ì‘ë‹µí•  ë•Œ ë§ˆì§€ë§‰ìœ¼ë¡œ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ì£¼ë¡œ ì¸ì½”ë”©, ìš”ì²­ì— ëŒ€í•œ ì¸ì¦, ê¶Œí•œ ì²´í¬ ì™€ ê°™ì€ ìš”ì²­ì— ëŒ€í•œ ì „ì—­ì ì¸ ì²˜ë¦¬ë¥¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤. Filter ì¸í„°í˜ì´ìŠ¤ init í•„í„° ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” doFilter ì‹¤ì œ ë¡œì§ ì²˜ë¦¬(Filter Chainì„ ë”°ë¼ ë‹¤ì„ Filterë¡œ ì›€ì§ì¸ë‹¤.) destroy í•„í„° ì¸ìŠ¤í„´ìŠ¤ ì¢…ë£Œ public interface Filter &#123; public default void init(FilterConfig filterConfig) throws ServletException &#123;&#125; public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException; public default void destroy() &#123;&#125;&#125; Filter Chain FilterëŠ” Clientì™€ Servletì‚¬ì´ì— ì¡´ì¬í•´ Clientê°€ ë³´ë‚´ëŠ” ìš”ì²­ì •ë³´ë¥¼ ê°€ê³µí•´ Servletìœ¼ë¡œ ë³´ë‚´ê³  Serveltì´ ë³´ë‚´ëŠ” ì‘ë‹µì •ë³´ë¥¼ ê°€ê³µí•´ Clientì—ê²Œ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤. FilterëŠ” ì¼ë°˜ì ì¸ ê²½ìš° 1ê°œê°€ ì¡´ì¬í•˜ì§€ë§Œ ì—¬ëŸ¬ê°œì˜ í•„í„°ë¥¼ ëª¨ì•„ Filter Chainì„ í˜•ì„±í•  ìˆ˜ ìˆë‹¤.","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter Filter FilterëŠ” Spring Context ì´ì „ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— Springìì²´ì™€ëŠ” ë¬´ê´€í•˜ë©° Web Applicationì— ë“±ë¡ì´ ëœë‹¤. ìš”ì²­ì´ DispatcherServletì— ë„ì°©í•˜ê¸° ì „ì— ì²˜ë¦¬ë¥¼ í•˜ê±°ë‚˜ ìš”ì²­ì´ ëë‚˜ê³  ì‘ë‹µí•  ë•Œ ë§ˆì§€ë§‰ìœ¼ë¡œ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ì£¼ë¡œ ì¸ì½”ë”©, ìš”ì²­ì— ëŒ€í•œ ì¸ì¦, ê¶Œí•œ ì²´í¬ ì™€ ê°™ì€ ìš”ì²­ì— ëŒ€í•œ ì „ì—­ì ì¸ ì²˜ë¦¬ë¥¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤. Filter ì¸í„°í˜ì´ìŠ¤ init í•„í„° ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” doFilter ì‹¤ì œ ë¡œì§ ì²˜ë¦¬(Filter Chainì„ ë”°ë¼ ë‹¤ì„ Filterë¡œ ì›€ì§ì¸ë‹¤.) destroy í•„í„° ì¸ìŠ¤í„´ìŠ¤ ì¢…ë£Œ public interface Filter &#123; public default void init(FilterConfig filterConfig) throws ServletException &#123;&#125; public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException; public default void destroy() &#123;&#125;&#125; Filter Chain FilterëŠ” Clientì™€ Servletì‚¬ì´ì— ì¡´ì¬í•´ Clientê°€ ë³´ë‚´ëŠ” ìš”ì²­ì •ë³´ë¥¼ ê°€ê³µí•´ Servletìœ¼ë¡œ ë³´ë‚´ê³  Serveltì´ ë³´ë‚´ëŠ” ì‘ë‹µì •ë³´ë¥¼ ê°€ê³µí•´ Clientì—ê²Œ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤. FilterëŠ” ì¼ë°˜ì ì¸ ê²½ìš° 1ê°œê°€ ì¡´ì¬í•˜ì§€ë§Œ ì—¬ëŸ¬ê°œì˜ í•„í„°ë¥¼ ëª¨ì•„ Filter Chainì„ í˜•ì„±í•  ìˆ˜ ìˆë‹¤. Login Filter ìƒì„±í•˜ê¸°@Slf4jpublic class LoginFilter implements Filter &#123; @Override public void init(FilterConfig filterConfig) throws ServletException &#123; log.info(&quot;log filter init&quot;); Filter.super.init(filterConfig); &#125; @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123; log.info(&quot;log filter doFilter&quot;); HttpServletRequest httpRequest = (HttpServletRequest) request; String requestURI = httpRequest.getRequestURI(); String uuid = UUID.randomUUID().toString(); try&#123; log.info(&quot;REQUEST [&#123;&#125;][&#123;&#125;]&quot;, uuid, request); chain.doFilter(request, response); &#125;catch (Exception e)&#123; throw e; &#125;finally &#123; log.info(&quot;RESPONSE [&#123;&#125;][&#123;&#125;]&quot;, uuid, requestURI); &#125; &#125; @Override public void destroy() &#123; log.info(&quot;log filter destroy&quot;); Filter.super.destroy(); &#125;&#125; Filter ë“±ë¡í•˜ê¸°ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ë‚´ì¥ í†°ìº£ì„ ê°€ì§€ê³  ìˆì–´ ìë°”ì½”ë“œë¡œ Filterë¥¼ Java Codeë¥¼ ì´ìš©í•´ ì† ì‰½ê²Œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤. FilterRegistrationBean ê°ì²´ë¥¼ ìƒì„±í•´ ë§Œë“œëŸ¬ì¤€ Filter ë¥¼ Bean ìœ¼ë¡œ ë“±ë¡í•œë‹¤. @Configurationpublic class WebConfig &#123; @Bean public FilterRegistrationBean logFilter()&#123; FilterRegistrationBean&lt;Filter&gt; filterRegistrationBean = new FilterRegistrationBean&lt;Filter&gt;(); filterRegistrationBean.setFilter(new LoginFilter()); filterRegistrationBean.setOrder(1); filterRegistrationBean.addUrlPatterns(&quot;/*&quot;); return filterRegistrationBean; &#125;&#125; @Slf4jpublic class LoginCheckFilter implements Filter &#123; private static final String[] whitelist = &#123;&quot;/&quot;, &quot;/members/add&quot;, &quot;/login&quot;, &quot;/logout&quot;, &quot;/css/*&quot;&#125;; @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123; HttpServletRequest httpRequest = (HttpServletRequest) request; String requestURI = httpRequest.getRequestURI(); HttpServletResponse httpResponse = (HttpServletResponse) response; try &#123; log.info(&quot;ì¸ì¦ ì²´í¬ í•„í„° ì‹œì‘ &#123;&#125;&quot;, requestURI); if (isLoginCheckPath(requestURI)) &#123; log.info(&quot;ì¸ì¦ ì²´í¬ ë¡œì§ ì‹¤í–‰ &#123;&#125;&quot;, requestURI); HttpSession session = httpRequest.getSession(false); if (session == null || session.getAttribute(SessionConst.LOGIN_MEMBER) == null) &#123; log.info(&quot;ë¯¸ì¸ì¦ ì‚¬ìš©ì ìš”ì²­ &#123;&#125;&quot;, requestURI); //ë¡œê·¸ì¸ìœ¼ë¡œ redirect httpResponse.sendRedirect(&quot;/login?redirectURL=&quot; + requestURI); return; &#125; &#125; chain.doFilter(request, response); &#125; catch (Exception e) &#123; throw e; //ì˜ˆì™¸ ë¡œê¹… ê°€ëŠ¥ í•˜ì§€ë§Œ, í†°ìº£ê¹Œì§€ ì˜ˆì™¸ë¥¼ ë³´ë‚´ì£¼ì–´ì•¼ í•¨ &#125; finally &#123; log.info(&quot;ì¸ì¦ ì²´í¬ í•„í„° ì¢…ë£Œ &#123;&#125; &quot;, requestURI); &#125; &#125; /** * í™”ì´íŠ¸ ë¦¬ìŠ¤íŠ¸ì˜ ê²½ìš° ì¸ì¦ ì²´í¬X */ private boolean isLoginCheckPath(String requestURI) &#123; return !PatternMatchUtils.simpleMatch(whitelist, requestURI); &#125;&#125; @Configurationpublic class WebConfig &#123; @Bean public FilterRegistrationBean logFilter()&#123; FilterRegistrationBean&lt;Filter&gt; filterRegistrationBean = new FilterRegistrationBean&lt;&gt;(); filterRegistrationBean.setFilter(new LoginFilter()); filterRegistrationBean.setOrder(1); filterRegistrationBean.addUrlPatterns(&quot;/*&quot;); return filterRegistrationBean; &#125; @Bean public FilterRegistrationBean logCheckFilter()&#123; FilterRegistrationBean&lt;Filter&gt; filterRegistrationBean = new FilterRegistrationBean&lt;&gt;(); filterRegistrationBean.setFilter(new LoginCheckFilter()); filterRegistrationBean.setOrder(2); filterRegistrationBean.addUrlPatterns(&quot;/*&quot;); return filterRegistrationBean; &#125;&#125; ë¡œê·¸ì¸ í›„ Redirect í•´ì£¼ê¸°@PostMapping(&quot;/login&quot;)public String loginV4(@Valid @ModelAttribute LoginForm form , BindingResult bindingResult , HttpServletRequest request , @RequestParam(defaultValue = &quot;/&quot;) String redirectURL)&#123; log.info(&quot;Request Params : &#123;&#125;&quot;, form); if(bindingResult.hasErrors())&#123; return &quot;login/loginForm&quot;; &#125; Member loginMember = loginService.login(form.getLoginId(), form.getPassword()); if(loginMember == null)&#123; bindingResult.reject(&quot;loginFail&quot;, &quot;ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.&quot;); return &quot;login/loginForm&quot;; &#125; // ë¡œê·¸ì¸ ì„¤ê³µ ì²˜ë¦¬ TODO // ì„¸ì…˜ì´ ìˆìœ¼ë©´ ìˆëŠ” ì„¸ì…˜ ë°˜í™˜, ì—†ìœ¼ë©´ ì‹ ê·œ ì„¸ì…˜ì„ ìƒì„± HttpSession session = request.getSession(); // ì„¸ì…˜ì— ë¡œê·¸ì¸ íšŒì› ì •ë³´ë¥¼ ë³´ê´€ session.setAttribute(SessionConst.LOGIN_MEMBER, loginMember); return &quot;redirect:&quot; + redirectURL;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Framework","slug":"Spring/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/"},{"name":"lifecycle","slug":"Spring/Spring-Framework/lifecycle","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/lifecycle/"}],"tags":[]},{"title":"Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text","slug":"spring/spring-framework/mvc/spring-mvc-06-requesttext","date":"2021-10-10T17:05:00.000Z","updated":"2024-02-26T15:59:47.412Z","comments":true,"path":"2021/10/11/spring/spring-framework/mvc/spring-mvc-06-requesttext/","link":"","permalink":"https://ckck803.github.io/2021/10/11/spring/spring-framework/mvc/spring-mvc-06-requesttext/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot ìš”ì²­ ë©”ì‹œì§€@PostMapping(&quot;/request-body-string-v1&quot;)public void requestBodyString(HttpServletRequest request, HttpServletResponse response) throws IOException &#123; ServletInputStream inputStream = request.getInputStream(); String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;messageBody = &#123;&#125;&quot;, messageBody); response.getWriter().write(&quot;ok&quot;);&#125; @PostMapping(&quot;/request-body-string-v2&quot;)public void requestBodyStringV2(InputStream inputStream, Writer responseWriter) throws IOException &#123; String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;messageBody = &#123;&#125;&quot;, messageBody); responseWriter.write(&quot;ok&quot;);&#125; HttpEntity ì‚¬ìš©í•˜ê¸°@PostMapping(&quot;/request-body-string-v3&quot;)public HttpEntity&lt;String&gt; requestBodyStringV3(HttpEntity&lt;String&gt; httpEntity) throws IOException &#123; String messageBody = httpEntity.getBody(); log.info(&quot;messageBody = &#123;&#125;&quot;, messageBody); return new HttpEntity&lt;&gt;(&quot;ok&quot;);&#125; RequestBody, ResponseBody ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©í•˜ê¸°@ResponseBody@PostMapping(&quot;/request-body-string-v4&quot;)public String requestBodyStringV4(@RequestBody String messageBody) throws IOException &#123; log.info(&quot;messageBody = &#123;&#125;&quot;, messageBody); return &quot;ok&quot;;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot ìš”ì²­ ë©”ì‹œì§€@PostMapping(&quot;/request-body-string-v1&quot;)public void requestBodyString(HttpServletRequest request, HttpServletResponse response) throws IOException &#123; ServletInputStream inputStream = request.getInputStream(); String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;messageBody = &#123;&#125;&quot;, messageBody); response.getWriter().write(&quot;ok&quot;);&#125; @PostMapping(&quot;/request-body-string-v2&quot;)public void requestBodyStringV2(InputStream inputStream, Writer responseWriter) throws IOException &#123; String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;messageBody = &#123;&#125;&quot;, messageBody); responseWriter.write(&quot;ok&quot;);&#125; HttpEntity ì‚¬ìš©í•˜ê¸°@PostMapping(&quot;/request-body-string-v3&quot;)public HttpEntity&lt;String&gt; requestBodyStringV3(HttpEntity&lt;String&gt; httpEntity) throws IOException &#123; String messageBody = httpEntity.getBody(); log.info(&quot;messageBody = &#123;&#125;&quot;, messageBody); return new HttpEntity&lt;&gt;(&quot;ok&quot;);&#125; RequestBody, ResponseBody ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©í•˜ê¸°@ResponseBody@PostMapping(&quot;/request-body-string-v4&quot;)public String requestBodyStringV4(@RequestBody String messageBody) throws IOException &#123; log.info(&quot;messageBody = &#123;&#125;&quot;, messageBody); return &quot;ok&quot;;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON","slug":"spring/spring-framework/mvc/spring-mvc-07-requestjson","date":"2021-10-10T17:05:00.000Z","updated":"2024-02-26T15:59:52.044Z","comments":true,"path":"2021/10/11/spring/spring-framework/mvc/spring-mvc-07-requestjson/","link":"","permalink":"https://ckck803.github.io/2021/10/11/spring/spring-framework/mvc/spring-mvc-07-requestjson/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON@PostMapping(&quot;/request-body-json-v1&quot;)public void requestBodyJsonV1(HttpServletRequest request, HttpServletResponse response) throws IOException &#123; ServletInputStream inputStream = request.getInputStream(); String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;messageBody=&#123;&#125;&quot;, messageBody); HelloData helloData = objectMapper.readValue(messageBody, HelloData.class); log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, helloData.getUsername(), helloData.getAge()); response.getWriter().write(&quot;ok&quot;);&#125; RequestBody ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©í•˜ê¸°RequestParam ì–´ë…¸í…Œì´ì…˜ê³¼ ë‹¤ë¥´ê²Œ RequestBody ì–´ë…¸í…Œì´ì…˜ì€ ìƒëµí•˜ë©´ ì•ˆëœë‹¤. @ResponseBody@PostMapping(&quot;/request-body-json-v2&quot;)public String requestBodyJsonV2(@RequestBody String messageBody) throws IOException &#123; log.info(&quot;messageBody=&#123;&#125;&quot;, messageBody); HelloData helloData = objectMapper.readValue(messageBody, HelloData.class); log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, helloData.getUsername(), helloData.getAge()); return &quot;ok&quot;;&#125; DTO ì‚¬ìš©í•˜ê¸°@ResponseBody@PostMapping(&quot;/request-body-json-v3&quot;)public String requestBodyJsonV3(@RequestBody HelloData helloData) throws IOException &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, helloData.getUsername(), helloData.getAge()); return &quot;ok&quot;;&#125; @ResponseBody@PostMapping(&quot;/request-body-json-v4&quot;)public String requestBodyJsonV4(HttpEntity&lt;HelloData&gt; data) throws IOException &#123; HelloData body = data.getBody(); log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, body.getUsername(), body.getAge()); return &quot;ok&quot;;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON@PostMapping(&quot;/request-body-json-v1&quot;)public void requestBodyJsonV1(HttpServletRequest request, HttpServletResponse response) throws IOException &#123; ServletInputStream inputStream = request.getInputStream(); String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;messageBody=&#123;&#125;&quot;, messageBody); HelloData helloData = objectMapper.readValue(messageBody, HelloData.class); log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, helloData.getUsername(), helloData.getAge()); response.getWriter().write(&quot;ok&quot;);&#125; RequestBody ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©í•˜ê¸°RequestParam ì–´ë…¸í…Œì´ì…˜ê³¼ ë‹¤ë¥´ê²Œ RequestBody ì–´ë…¸í…Œì´ì…˜ì€ ìƒëµí•˜ë©´ ì•ˆëœë‹¤. @ResponseBody@PostMapping(&quot;/request-body-json-v2&quot;)public String requestBodyJsonV2(@RequestBody String messageBody) throws IOException &#123; log.info(&quot;messageBody=&#123;&#125;&quot;, messageBody); HelloData helloData = objectMapper.readValue(messageBody, HelloData.class); log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, helloData.getUsername(), helloData.getAge()); return &quot;ok&quot;;&#125; DTO ì‚¬ìš©í•˜ê¸°@ResponseBody@PostMapping(&quot;/request-body-json-v3&quot;)public String requestBodyJsonV3(@RequestBody HelloData helloData) throws IOException &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, helloData.getUsername(), helloData.getAge()); return &quot;ok&quot;;&#125; @ResponseBody@PostMapping(&quot;/request-body-json-v4&quot;)public String requestBodyJsonV4(HttpEntity&lt;HelloData&gt; data) throws IOException &#123; HelloData body = data.getBody(); log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, body.getUsername(), body.getAge()); return &quot;ok&quot;;&#125; @ResponseBody@PostMapping(&quot;/request-body-json-v5&quot;)public HelloData requestBodyJsonV5(@RequestBody HelloData data) throws IOException &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, data.getUsername(), data.getAge()); return data;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot Logging","slug":"spring/spring-framework/mvc/spring-mvc-01-logging","date":"2021-10-10T16:05:00.000Z","updated":"2024-02-26T15:58:59.598Z","comments":true,"path":"2021/10/11/spring/spring-framework/mvc/spring-mvc-01-logging/","link":"","permalink":"https://ckck803.github.io/2021/10/11/spring/spring-framework/mvc/spring-mvc-01-logging/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot Loggingë¡œê·¸ ì„ ì–¸ ë°©ë²• private final Logger log &#x3D; LoggerFactory.getLogger(getClass()); private static final Logger log &#x3D; LoggerFactory.getLogger(xxx.class); @slf4j &#x2F;&#x2F; Lombokì—ì„œ ì œê³µí•˜ëŠ” Log ê¸°ëŠ¥ ì‚¬ìš© log.trace(&quot;info log = &#123;&#125;&quot;, name);log.debug(&quot;info log = &#123;&#125;&quot;, name);log.info(&quot;info log = &#123;&#125;&quot;, name);log.warn(&quot;info log = &#123;&#125;&quot;, name);log.error(&quot;info log = &#123;&#125;&quot;, name); logging.level.com.example.springmvc=trace @Slf4j@RestControllerpublic class LogTestController &#123;// private final Logger log = LoggerFactory.getLogger(getClass()); @RequestMapping(&quot;/log-test&quot;) public String logTest()&#123; String name = &quot;Spring&quot;; System.out.println(&quot;name = &quot; + name); log.trace(&quot;info log = &#123;&#125;&quot;, name); log.debug(&quot;info log = &#123;&#125;&quot;, name); log.info(&quot;info log = &#123;&#125;&quot;, name); log.warn(&quot;info log = &#123;&#125;&quot;, name); log.error(&quot;info log = &#123;&#125;&quot;, name); return &quot;ok&quot;; &#125;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot Loggingë¡œê·¸ ì„ ì–¸ ë°©ë²• private final Logger log &#x3D; LoggerFactory.getLogger(getClass()); private static final Logger log &#x3D; LoggerFactory.getLogger(xxx.class); @slf4j &#x2F;&#x2F; Lombokì—ì„œ ì œê³µí•˜ëŠ” Log ê¸°ëŠ¥ ì‚¬ìš© log.trace(&quot;info log = &#123;&#125;&quot;, name);log.debug(&quot;info log = &#123;&#125;&quot;, name);log.info(&quot;info log = &#123;&#125;&quot;, name);log.warn(&quot;info log = &#123;&#125;&quot;, name);log.error(&quot;info log = &#123;&#125;&quot;, name); logging.level.com.example.springmvc=trace @Slf4j@RestControllerpublic class LogTestController &#123;// private final Logger log = LoggerFactory.getLogger(getClass()); @RequestMapping(&quot;/log-test&quot;) public String logTest()&#123; String name = &quot;Spring&quot;; System.out.println(&quot;name = &quot; + name); log.trace(&quot;info log = &#123;&#125;&quot;, name); log.debug(&quot;info log = &#123;&#125;&quot;, name); log.info(&quot;info log = &#123;&#125;&quot;, name); log.warn(&quot;info log = &#123;&#125;&quot;, name); log.error(&quot;info log = &#123;&#125;&quot;, name); return &quot;ok&quot;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ","slug":"spring/spring-framework/mvc/spring-mvc-04","date":"2021-10-10T16:05:00.000Z","updated":"2024-02-26T15:59:37.530Z","comments":true,"path":"2021/10/11/spring/spring-framework/mvc/spring-mvc-04/","link":"","permalink":"https://ckck803.github.io/2021/10/11/spring/spring-framework/mvc/spring-mvc-04/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging ê¸°ë³¸ í—¤ë” ì¡°íšŒController ì‚¬ìš© ê°€ëŠ¥í•œ íŒŒë¦¬ë¯¸í„° ëª©ë¡\u001c @Slf4j@RestControllerpublic class RequestHeaderController &#123; @RequestMapping(&quot;/headers&quot;) public String headers(HttpServletRequest request, HttpServletResponse response, HttpMethod httpMethod, Locale locale, @RequestHeader MultiValueMap&lt;String, String&gt; headerMap, @RequestHeader(&quot;host&quot;) String host, @CookieValue(value = &quot;myCookie&quot;, required = false) String cookie) &#123; log.info(&quot;request=&#123;&#125;&quot;, request); log.info(&quot;response=&#123;&#125;&quot;, response); log.info(&quot;httpMethod=&#123;&#125;&quot;, httpMethod); log.info(&quot;locale=&#123;&#125;&quot;, locale); log.info(&quot;headerMap=&#123;&#125;&quot;, headerMap); log.info(&quot;header host=&#123;&#125;&quot;, host); log.info(&quot;myCookie=&#123;&#125;&quot;, cookie); return &quot;ok&quot;; &#125;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging ê¸°ë³¸ í—¤ë” ì¡°íšŒController ì‚¬ìš© ê°€ëŠ¥í•œ íŒŒë¦¬ë¯¸í„° ëª©ë¡\u001c @Slf4j@RestControllerpublic class RequestHeaderController &#123; @RequestMapping(&quot;/headers&quot;) public String headers(HttpServletRequest request, HttpServletResponse response, HttpMethod httpMethod, Locale locale, @RequestHeader MultiValueMap&lt;String, String&gt; headerMap, @RequestHeader(&quot;host&quot;) String host, @CookieValue(value = &quot;myCookie&quot;, required = false) String cookie) &#123; log.info(&quot;request=&#123;&#125;&quot;, request); log.info(&quot;response=&#123;&#125;&quot;, response); log.info(&quot;httpMethod=&#123;&#125;&quot;, httpMethod); log.info(&quot;locale=&#123;&#125;&quot;, locale); log.info(&quot;headerMap=&#123;&#125;&quot;, headerMap); log.info(&quot;header host=&#123;&#125;&quot;, host); log.info(&quot;myCookie=&#123;&#125;&quot;, cookie); return &quot;ok&quot;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot API ì˜ˆì‹œ","slug":"spring/spring-framework/mvc/spring-mvc-03-api-method","date":"2021-10-10T16:05:00.000Z","updated":"2024-02-26T15:59:29.248Z","comments":true,"path":"2021/10/11/spring/spring-framework/mvc/spring-mvc-03-api-method/","link":"","permalink":"https://ckck803.github.io/2021/10/11/spring/spring-framework/mvc/spring-mvc-03-api-method/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot API ì˜ˆì‹œ@RestController@RequestMapping(&quot;/mapping/users&quot;)public class MappingClassController &#123; @GetMapping public String user()&#123; return &quot;get users&quot;; &#125; @PostMapping public String addUser()&#123; return &quot;post user&quot;; &#125; @GetMapping(&quot;/&#123;userId&#125;&quot;) public String findUser(@PathVariable String userId)&#123; return &quot;get suerId = &quot; + userId; &#125; @PatchMapping(&quot;/&#123;userId&#125;&quot;) public String updateUser(@PathVariable String userId)&#123; return &quot;update userId = &quot; + userId; &#125; @DeleteMapping(&quot;/&#123;userId&#125;&quot;) public String deleteUser(@PathVariable String userId)&#123; return &quot;delete userId = &quot; + userId; &#125;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot API ì˜ˆì‹œ@RestController@RequestMapping(&quot;/mapping/users&quot;)public class MappingClassController &#123; @GetMapping public String user()&#123; return &quot;get users&quot;; &#125; @PostMapping public String addUser()&#123; return &quot;post user&quot;; &#125; @GetMapping(&quot;/&#123;userId&#125;&quot;) public String findUser(@PathVariable String userId)&#123; return &quot;get suerId = &quot; + userId; &#125; @PatchMapping(&quot;/&#123;userId&#125;&quot;) public String updateUser(@PathVariable String userId)&#123; return &quot;update userId = &quot; + userId; &#125; @DeleteMapping(&quot;/&#123;userId&#125;&quot;) public String deleteUser(@PathVariable String userId)&#123; return &quot;delete userId = &quot; + userId; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form","slug":"spring/spring-framework/mvc/spring-mvc-05-queryparameter","date":"2021-10-10T16:05:00.000Z","updated":"2024-02-26T15:59:42.221Z","comments":true,"path":"2021/10/11/spring/spring-framework/mvc/spring-mvc-05-queryparameter/","link":"","permalink":"https://ckck803.github.io/2021/10/11/spring/spring-framework/mvc/spring-mvc-05-queryparameter/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action=&quot;/request-param-v1&quot; method=&quot;post&quot;&gt; username: &lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt; age: &lt;input type=&quot;text&quot; name=&quot;age&quot;/&gt; &lt;button type=&quot;submit&quot;&gt;ì „ì†¡&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; HttpServletRequest ê°ì²´ ë‚´ ë©”ì†Œë“œ ì‚¬ìš©í•˜ê¸°@Slf4j@RestControllerpublic class RequestParamController &#123; @RequestMapping(&quot;/request-param-v1&quot;) public void requestParamV1(HttpServletRequest request, HttpServletResponse response) throws IOException &#123; String username = request.getParameter(&quot;username&quot;); int age = Integer.parseInt(request.getParameter(&quot;age&quot;)); log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, username, age); response.getWriter().write(&quot;ok&quot;); &#125;&#125; RequestParam ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©í•˜ê¸°@RequestMapping(&quot;/request-param-v2&quot;)@ResponseBodypublic String requestParamV2( @RequestParam(&quot;username&quot;) String memberName, @RequestParam(&quot;age&quot;) int memberAge) &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, memberName, memberAge); return &quot;ok&quot;;&#125; @RequestMapping(&quot;/request-param-v3&quot;)@ResponseBodypublic String requestParamV3( @RequestParam String username, @RequestParam int age) &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, username, age ); return &quot;ok&quot;;&#125; @RequestMapping(&quot;/request-param-v4&quot;)@ResponseBodypublic String requestParamV4(String username, int age) &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, username, age ); return &quot;ok&quot;;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC - HttpMessageConverter Spring Boot Http ì‘ë‹µ - HTTP API, Message Bodyì— ì§ì ‘ ì…ë ¥ Spring Boot ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ Spring Boot ìš”ì²­ ë©”ì‹œì§€ - JSON Spring Boot ìš”ì²­ ë©”ì‹œì§€ - Text Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form Spring Boot ê¸°ë³¸ í—¤ë” ì¡°íšŒ Spring Boot API ì˜ˆì‹œ Spring Boot @RequestMapping Spring Boot Logging Spring Boot ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action=&quot;/request-param-v1&quot; method=&quot;post&quot;&gt; username: &lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt; age: &lt;input type=&quot;text&quot; name=&quot;age&quot;/&gt; &lt;button type=&quot;submit&quot;&gt;ì „ì†¡&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; HttpServletRequest ê°ì²´ ë‚´ ë©”ì†Œë“œ ì‚¬ìš©í•˜ê¸°@Slf4j@RestControllerpublic class RequestParamController &#123; @RequestMapping(&quot;/request-param-v1&quot;) public void requestParamV1(HttpServletRequest request, HttpServletResponse response) throws IOException &#123; String username = request.getParameter(&quot;username&quot;); int age = Integer.parseInt(request.getParameter(&quot;age&quot;)); log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, username, age); response.getWriter().write(&quot;ok&quot;); &#125;&#125; RequestParam ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©í•˜ê¸°@RequestMapping(&quot;/request-param-v2&quot;)@ResponseBodypublic String requestParamV2( @RequestParam(&quot;username&quot;) String memberName, @RequestParam(&quot;age&quot;) int memberAge) &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, memberName, memberAge); return &quot;ok&quot;;&#125; @RequestMapping(&quot;/request-param-v3&quot;)@ResponseBodypublic String requestParamV3( @RequestParam String username, @RequestParam int age) &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, username, age ); return &quot;ok&quot;;&#125; @RequestMapping(&quot;/request-param-v4&quot;)@ResponseBodypublic String requestParamV4(String username, int age) &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, username, age ); return &quot;ok&quot;;&#125; @RequestMapping(&quot;/request-param-required&quot;)@ResponseBodypublic String requestParamV5( @RequestParam(required = true) String username, @RequestParam(required = false) Integer age) &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, username, age ); return &quot;ok&quot;;&#125; @RequestMapping(&quot;/request-param-default&quot;)@ResponseBodypublic String requestParamDefault( @RequestParam(required = true, defaultValue = &quot;guest&quot;) String username, @RequestParam(required = false, defaultValue = &quot;-1&quot;) Integer age) &#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, username, age ); return &quot;ok&quot;;&#125; @RequestMapping(&quot;/request-param-map&quot;)@ResponseBodypublic String requestParamMap(@RequestParam Map&lt;String, Object&gt; paramMap)&#123; log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, paramMap.get(&quot;username&quot;), paramMap.get(&quot;age&quot;)); return &quot;ok&quot;;&#125; DTO ì´ìš©í•˜ê¸°@Datapublic class HelloData &#123; private String username; private int age;&#125; @ResponseBody@RequestMapping(&quot;/model-attribute-v1&quot;)public String modelAttributeV1(@RequestParam String username, @RequestParam int age)&#123; HelloData helloData = new HelloData(); helloData.setUsername(username); helloData.setAge(age); log.info(&quot;username = &#123;&#125;, age = &#123;&#125;&quot;, helloData.getUsername(), helloData.getAge()); log.info(&quot;helloData=&#123;&#125;&quot;, helloData); return &quot;ok&quot;;&#125; ModelAttribute ì–´ë…¸í…Œì´ì…˜ ì´ìš©í•˜ê¸°@ResponseBody@RequestMapping(&quot;/model-attribute-v2&quot;)public String modelAttributeV2(@ModelAttribute HelloData helloData)&#123; log.info(&quot;username = &#123;&#125;, age = &#123;&#125;&quot;, helloData.getUsername(), helloData.getAge()); log.info(&quot;helloData=&#123;&#125;&quot;, helloData); return &quot;ok&quot;;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Security - AuthenticationProvider","slug":"spring/spring-security/security/authentication/authenticationprovider","date":"2021-10-08T00:25:35.000Z","updated":"2024-02-26T16:25:10.810Z","comments":true,"path":"2021/10/08/spring/spring-security/security/authentication/authenticationprovider/","link":"","permalink":"https://ckck803.github.io/2021/10/08/spring/spring-security/security/authentication/authenticationprovider/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://spring.io/guides/topicals/spring-security-architecture Spring Security - AuthenticationProviderAuthenticationProvider.java AuthenticationManagerë¡œ ë¶€í„° ì¸ì¦ì„ ìœ„ì„ë°›ì•„ ì‹¤ì œë¡œ ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” ê°ì²´, AuthenticationProviderì˜ êµ¬í˜„ì²´ë¡œëŠ” AbstractUserDetailsAuthenticationProvider ì™€ DaoAuthenticationProvider ê°€ ì¡´ì¬í•œë‹¤. AuthenticationProvider ì˜ ì¸ì¦ ê³¼ì • ì „ë‹¬ë°›ëŠ” authentication ì—ì„œ usernameì„ ê°€ì ¸ì˜¨ ë’¤ DBì—ì„œ í•´ë‹¹ í•˜ëŠ” ìœ ì € ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ì „ DBë¡œë¶€í„° ê°€ì ¸ì˜¨ UserDetails ê°ì²´ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì§„í–‰í•œë‹¤. ì „ë‹¬ ë°›ì€ Authentication ê°ì²´ë‚´ì˜ Credential ì •ë³´ì™€ UserDetails ê°ì²´ì˜ Passwordì™€ ê°’ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. usernameì— ëŒ€í•œí•˜ëŠ” UserDetails ê°ì²´ë¥¼ ëª» ì°¾ì„ ê²½ìš° UsernameNotFoundException ì˜ˆì™¸ë¥¼ ë˜ì§€ê³  Credentialsê°€ Passwordì™€ ë‹¤ë¥¼ ê²½ìš° BadCredentialsException ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤. ì¸ì¦ í›„ ë‹¤ì‹œí•œë²ˆ UserDetails ê°ì²´ì˜ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì§„í–‰í•˜ê³ , ìºì‹œì— UserDetails ê°ì²´ë¥¼ ì €ì¥í•œë‹¤. ìƒˆë¡œìš´ Authentication ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•œë‹¤.","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://spring.io/guides/topicals/spring-security-architecture Spring Security - AuthenticationProviderAuthenticationProvider.java AuthenticationManagerë¡œ ë¶€í„° ì¸ì¦ì„ ìœ„ì„ë°›ì•„ ì‹¤ì œë¡œ ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” ê°ì²´, AuthenticationProviderì˜ êµ¬í˜„ì²´ë¡œëŠ” AbstractUserDetailsAuthenticationProvider ì™€ DaoAuthenticationProvider ê°€ ì¡´ì¬í•œë‹¤. AuthenticationProvider ì˜ ì¸ì¦ ê³¼ì • ì „ë‹¬ë°›ëŠ” authentication ì—ì„œ usernameì„ ê°€ì ¸ì˜¨ ë’¤ DBì—ì„œ í•´ë‹¹ í•˜ëŠ” ìœ ì € ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ì „ DBë¡œë¶€í„° ê°€ì ¸ì˜¨ UserDetails ê°ì²´ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì§„í–‰í•œë‹¤. ì „ë‹¬ ë°›ì€ Authentication ê°ì²´ë‚´ì˜ Credential ì •ë³´ì™€ UserDetails ê°ì²´ì˜ Passwordì™€ ê°’ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. usernameì— ëŒ€í•œí•˜ëŠ” UserDetails ê°ì²´ë¥¼ ëª» ì°¾ì„ ê²½ìš° UsernameNotFoundException ì˜ˆì™¸ë¥¼ ë˜ì§€ê³  Credentialsê°€ Passwordì™€ ë‹¤ë¥¼ ê²½ìš° BadCredentialsException ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤. ì¸ì¦ í›„ ë‹¤ì‹œí•œë²ˆ UserDetails ê°ì²´ì˜ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì§„í–‰í•˜ê³ , ìºì‹œì— UserDetails ê°ì²´ë¥¼ ì €ì¥í•œë‹¤. ìƒˆë¡œìš´ Authentication ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•œë‹¤. public interface AuthenticationProvider &#123; Authentication authenticate(Authentication authentication) throws AuthenticationException; boolean supports(Class&lt;?&gt; authentication);&#125; UserDetailsë¥¼ ì´ìš©í•´ ê²€ì¦í•˜ëŠ” AbstractUserDetailsAuthenticationProvider AbstractUserDetailsAuthenticationProvider í´ë˜ìŠ¤ëŠ” AuthenticationProviderë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë‹¤. AbstractUserDetailsAuthenticationProvider í´ë˜ìŠ¤ëŠ” ì „ë‹¬ ë°›ì€ Authentication ê°ì²´ì™€ ê¸°ì¡´ì— ì €ì¥ëœ UserDetails ê°ì²´ë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” ë¡œì§ì´ êµ¬í˜„ ë¼ ìˆë‹¤. AbstractUserDetailsAuthenticationProvider.java @Overridepublic Authentication authenticate(Authentication authentication) throws AuthenticationException &#123; Assert.isInstanceOf(UsernamePasswordAuthenticationToken.class, authentication, () -&gt; this.messages.getMessage(&quot;AbstractUserDetailsAuthenticationProvider.onlySupports&quot;, &quot;Only UsernamePasswordAuthenticationToken is supported&quot;)); String username = determineUsername(authentication); boolean cacheWasUsed = true; UserDetails user = this.userCache.getUserFromCache(username); if (user == null) &#123; cacheWasUsed = false; try &#123; user = retrieveUser(username, (UsernamePasswordAuthenticationToken) authentication); &#125; catch (UsernameNotFoundException ex) &#123; this.logger.debug(&quot;Failed to find user &#x27;&quot; + username + &quot;&#x27;&quot;); if (!this.hideUserNotFoundExceptions) &#123; throw ex; &#125; throw new BadCredentialsException(this.messages .getMessage(&quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;, &quot;Bad credentials&quot;)); &#125; Assert.notNull(user, &quot;retrieveUser returned null - a violation of the interface contract&quot;); &#125; // UserDetails ê°ì²´ì— ëŒ€í•œ ìƒíƒœë¥¼ ì²´í¬í•œë‹¤. try &#123; this.preAuthenticationChecks.check(user); additionalAuthenticationChecks(user, (UsernamePasswordAuthenticationToken) authentication); &#125; catch (AuthenticationException ex) &#123; if (!cacheWasUsed) &#123; throw ex; &#125; cacheWasUsed = false; user = retrieveUser(username, (UsernamePasswordAuthenticationToken) authentication); this.preAuthenticationChecks.check(user); additionalAuthenticationChecks(user, (UsernamePasswordAuthenticationToken) authentication); &#125; this.postAuthenticationChecks.check(user); if (!cacheWasUsed) &#123; this.userCache.putUserInCache(user); &#125; Object principalToReturn = user; if (this.forcePrincipalAsString) &#123; principalToReturn = user.getUsername(); &#125; return createSuccessAuthentication(principalToReturn, authentication, user);&#125; ì¸ì¦ í›„ ìƒˆë¡œìš´ ì¸ì¦ ê°ì²´ ë°˜í™˜AbstractUserDetailsAuthenticationProvider.java protected Authentication createSuccessAuthentication(Object principal, Authentication authentication, UserDetails user) &#123; UsernamePasswordAuthenticationToken result = new UsernamePasswordAuthenticationToken(principal, authentication.getCredentials(), this.authoritiesMapper.mapAuthorities(user.getAuthorities())); result.setDetails(authentication.getDetails()); this.logger.debug(&quot;Authenticated user&quot;); return result;&#125; DBì— ì €ì¥ëœ User ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ DaoAuthenticationProvider DaoAuthenticationProvider í´ë˜ìŠ¤ëŠ” AbstractUserDetailsAuthenticationProvider ë¥¼ ìƒì†í•´ êµ¬í˜„í•œ í´ë˜ìŠ¤ë‹¤. DaoAuthenticationProvider í´ë˜ìŠ¤ì—ëŠ” ì£¼ë¡œ DBë¡œë¶€í„° User ì •ë³´ë¥¼ ì¡°íšŒ ë° ê°€ì ¸ì˜¨ User ì •ë³´ë¥¼ ê²€ì¦í•˜ëŠ” ë¡œì§ì´ êµ¬í˜„ ë¼ ìˆë‹¤. DBì— ì €ì¥ëœ User ì •ë³´ ê°€ì ¸ì˜¤ê¸°DaoAuthenticationProvider.java @Overrideprotected final UserDetails retrieveUser(String username, UsernamePasswordAuthenticationToken authentication) throws AuthenticationException &#123; prepareTimingAttackProtection(); // usernameì„ ì´ìš©í•´ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. try &#123; UserDetails loadedUser = this.getUserDetailsService().loadUserByUsername(username); if (loadedUser == null) &#123; throw new InternalAuthenticationServiceException( &quot;UserDetailsService returned null, which is an interface contract violation&quot;); &#125; return loadedUser; &#125; catch (UsernameNotFoundException ex) &#123; mitigateAgainstTimingAttack(authentication); throw ex; &#125; catch (InternalAuthenticationServiceException ex) &#123; throw ex; &#125; catch (Exception ex) &#123; throw new InternalAuthenticationServiceException(ex.getMessage(), ex); &#125;&#125; Authentication ê°ì²´ì˜ Credentials ì •ë³´ì™€ UserDetails ê°ì²´ì˜ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦DaoAuthenticationProvider.java protected void additionalAuthenticationChecks(UserDetails userDetails, UsernamePasswordAuthenticationToken authentication) throws AuthenticationException &#123; if (authentication.getCredentials() == null) &#123; this.logger.debug(&quot;Failed to authenticate since no credentials provided&quot;); throw new BadCredentialsException(this.messages .getMessage(&quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;, &quot;Bad credentials&quot;)); &#125; String presentedPassword = authentication.getCredentials().toString(); if (!this.passwordEncoder.matches(presentedPassword, userDetails.getPassword())) &#123; this.logger.debug(&quot;Failed to authenticate since password does not match stored value&quot;); throw new BadCredentialsException(this.messages .getMessage(&quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;, &quot;Bad credentials&quot;)); &#125;&#125; UserDetailsChecker ê°ì²´ë¥¼ ì´ìš©í•œ UserDetails ê°ì²´ì— ëŒ€í•œ ê²€ì¦ UserDetailsChecker ê°ì²´ëŠ” DBë¡œë¶€í„° í˜¹ì€ ìºì‹œì— ì €ì¥ëœ UserDetails ê°ì²´ì— ëŒ€í•œ ìœ íš¨ì„±ì„ ê²€ì¦í•œë‹¤. DefaultPreAuthenticationChecks.java private class DefaultPreAuthenticationChecks implements UserDetailsChecker &#123; @Override // ê³„ì •ì´ ì ê²¼ëŠ”ì§€, ì‚¬ìš©ê°€ëŠ¥í•œì§€, ë§Œë£ŒëëŠ”ì§€ í™•ì¸í•œë‹¤. public void check(UserDetails user) &#123; if (!user.isAccountNonLocked()) &#123; AbstractUserDetailsAuthenticationProvider.this.logger .debug(&quot;Failed to authenticate since user account is locked&quot;); throw new LockedException(AbstractUserDetailsAuthenticationProvider.this.messages .getMessage(&quot;AbstractUserDetailsAuthenticationProvider.locked&quot;, &quot;User account is locked&quot;)); &#125; if (!user.isEnabled()) &#123; AbstractUserDetailsAuthenticationProvider.this.logger .debug(&quot;Failed to authenticate since user account is disabled&quot;); throw new DisabledException(AbstractUserDetailsAuthenticationProvider.this.messages .getMessage(&quot;AbstractUserDetailsAuthenticationProvider.disabled&quot;, &quot;User is disabled&quot;)); &#125; if (!user.isAccountNonExpired()) &#123; AbstractUserDetailsAuthenticationProvider.this.logger .debug(&quot;Failed to authenticate since user account has expired&quot;); throw new AccountExpiredException(AbstractUserDetailsAuthenticationProvider.this.messages .getMessage(&quot;AbstractUserDetailsAuthenticationProvider.expired&quot;, &quot;User account has expired&quot;)); &#125; &#125;&#125; ì¸ì¦ ì „ Authentication ê°ì²´ì¸ì¦ ì „ Authenticatin ê°ì²´ë‚´ì˜ principalì—ëŠ” usernameì´ credentialsëŠ” passwordê°€ ë“¤ì–´ìˆê³ , ì¸ì¦ ìœ ë¬´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” authenticated ê°’ì´ falseë¡œ ë‚˜íƒ€ë‚˜ ìˆë‹¤. ì¸ì¦ í›„ Authentication ê°ì²´ì¸ì¦ì„ ì§„í–‰í•œ í›„ ì¸ì¦ ì „ê³¼ ë‹¤ë¥´ê²Œ Authenticatin ê°ì²´ì˜ principalì—ëŠ” UserDeails ë¥¼ êµ¬í˜„í•œ ê°ì²´ê°€ ë“¤ì–´ê°”ê³  authenticated ê°’ì´ trueê°€ ëë‹¤. ìµœì¢…ì ìœ¼ë¡œ ë°˜í™˜ ë  ë•ŒëŠ” Authenticatin ê°ì²´ì—ì„œ credentialsë¥¼ ì§€ìš°ê³  ë°˜í™˜í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"ì¸ì¦ ê³¼ì •","slug":"Spring/Spring-Security/ì¸ì¦-ê³¼ì •","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95/"}],"tags":[]},{"title":"Spring Security - AuthenticationManager","slug":"spring/spring-security/security/authentication/authenticationManager","date":"2021-10-07T14:25:35.000Z","updated":"2024-02-26T16:25:06.361Z","comments":true,"path":"2021/10/07/spring/spring-security/security/authentication/authenticationManager/","link":"","permalink":"https://ckck803.github.io/2021/10/07/spring/spring-security/security/authentication/authenticationManager/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://spring.io/guides/topicals/spring-security-architecture Spring Security - AuthenticationManager AuthenticationManager ëŠ” ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” AuthenticationProvider ê°ì²´ë“¤ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ë‹¤. AuthenticationManager ëŠ” AuthenticationProvider ì— ì¸ì¦ì„ ìœ„ì„í•˜ëŠ” í˜•íƒœë¡œ ì¸ì¦ì„ ì§„í–‰í•œë‹¤. public interface AuthenticationManager &#123; Authentication authenticate(Authentication authentication) throws AuthenticationException;&#125; ProviderManager AuthenticationManagerì˜ ê°€ì¥ ëŒ€í‘œì ì¸ êµ¬í˜„ì²´","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://spring.io/guides/topicals/spring-security-architecture Spring Security - AuthenticationManager AuthenticationManager ëŠ” ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” AuthenticationProvider ê°ì²´ë“¤ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ë‹¤. AuthenticationManager ëŠ” AuthenticationProvider ì— ì¸ì¦ì„ ìœ„ì„í•˜ëŠ” í˜•íƒœë¡œ ì¸ì¦ì„ ì§„í–‰í•œë‹¤. public interface AuthenticationManager &#123; Authentication authenticate(Authentication authentication) throws AuthenticationException;&#125; ProviderManager AuthenticationManagerì˜ ê°€ì¥ ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ ProviderManager hierarchyê° ProviderManager ì—ëŠ” ì—¬ëŸ¬ê°œì˜ AuthenticationProvider ê°ì²´ë“¤ì´ ìˆë‹¤. ë§Œì•½ í˜„ì¬ì˜ ProviderManagerì— ì¸ì¦ì„ ì²˜ë¦¬í•  AuthenticationProvider ê°ì²´ê°€ ì—†ì„ ê²½ìš° Parent ProviderManagerë¡œ ì´ë™í•˜ê²Œ ëœë‹¤. Parent ProviderManager ì—­ì‹œ AuthenticationProvider ê°ì²´ë“¤ì´ ì¡´ì¬í•œë‹¤. ì—¬ê¸°ì„œì˜ ParentëŠ” ìƒì† ê°œë…ì´ ì•„ë‹ˆë¼ fieldê°’ìœ¼ë¡œ parentë¥¼ ê°€ì§€ê³  ìˆë‹¤. ProviderManagerë¥¼ í†µí•œ ì¸ì¦ ì§„í–‰ ProviderManager ê°ì²´ëŠ” ì¸ì¦ì„ ì§ì ‘ ì§„í–‰í•˜ëŠ” í•˜ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹ , ì¸ì¦ì„ ìœ„í•œ ë‹¤ì–‘í•œ AuthenticationProvider ê°ì²´ë“¤ì„ ê°€ì§€ê³  ìˆê³  AuthenticationProvider ê°ì²´ì—ê²Œ ì¸ì¦ì„ ìœ„ì„í•˜ëŠ” í˜•íƒœë¡œ ì¸ì¦ì„ ì§„í–‰í•œë‹¤. ProviderManagerì—ì„œ ì¸ì¦ì„ ì²˜ë¦¬í•  AuthenticationProvider ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ê°€ì ¸ì˜¨ AuthenticationProviderë¥¼ ì´ìš©í•´ Authenticationê°ì²´ ì¸ì¦ì„ ì§„í–‰ ì¸ì¦ì´ ì™„ë£Œ ë˜ë©´ ìƒˆë¡œìš´ Authentication ê°ì²´ê°€ ìƒì„±ëœë‹¤. í˜„ì¬ ì ì ˆí•œ AuthenticationProvider ê°ì²´ê°€ ì—†ë‹¤ë©´ ë¶€ëª¨ ProviderManagerë¡œ ì´ë™í•´ ì¸ì¦ì„ ì‹œë„í•œë‹¤. ì¸ì¦ì— ì‹¤íŒ¨í•œ ê²½ìš°ì—ëŠ” ProviderNotFoundException ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤. Authentication ê°ì²´ë¡œ ë¶€í„° Credentials ì •ë³´ë¥¼ ì§€ìš°ê³  ìƒì„±ëœ Authentication ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. ProviderManager.java @Overridepublic Authentication authenticate(Authentication authentication) throws AuthenticationException &#123; Class&lt;? extends Authentication&gt; toTest = authentication.getClass(); Authentication result = null; Authentication parentResult = null; // ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•œ AuthenticationProviderë¥¼ ê°€ì ¸ì˜¨ë‹¤. for (AuthenticationProvider provider : getProviders()) &#123; // AuthenticationProviderê°€ Authentication ê°ì²´ ì¸ì¦ì„ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸ if (!provider.supports(toTest)) &#123; continue; &#125; try &#123; // AuthenticationProvider ê°ì²´ë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•œë‹¤. result = provider.authenticate(authentication); if (result != null) &#123; // ê¸°ì¡´ì˜ Authentication ê°ì²´ì™€ resultë¥¼ ì´ìš©í•´ ìƒˆë¡œìš´ Authentication ê°ì²´ë¥¼ ìƒì„± copyDetails(authentication, result); break; &#125; &#125; catch (AccountStatusException | InternalAuthenticationServiceException ex) &#123; prepareException(ex, authentication); throw ex; &#125; catch (AuthenticationException ex) &#123; lastException = ex; &#125; &#125; // ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•œ ì ì ˆí•œ AuthenticationProvider ê°ì²´ ì—†ê³  Parent AuthenticationProvider ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° // Parent AuthenticationProvider ë¡œ ì´ë™í•´ ì¸ì¦ì„ ì§„í–‰í•œë‹¤. if (result == null &amp;&amp; this.parent != null) &#123; try &#123; parentResult = this.parent.authenticate(authentication); result = parentResult; &#125; catch (ProviderNotFoundException ex) &#123; &#125; catch (AuthenticationException ex) &#123; parentException = ex; lastException = ex; &#125; &#125; if (result != null) &#123; if (this.eraseCredentialsAfterAuthentication &amp;&amp; (result instanceof CredentialsContainer)) &#123; // ì¸ì¦ì„ ì™„ë£Œí•œ í›„ì— Authentication ê°ì²´ì—ì„œ Credentialsì™€ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì§€ìš´ë‹¤. ((CredentialsContainer) result).eraseCredentials(); &#125; if (parentResult == null) &#123; this.eventPublisher.publishAuthenticationSuccess(result); &#125; // ì¸ì¦ì´ ì™„ë£Œëœ Authentication ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. return result; &#125; // ì¸ì¦ì´ ì‹¤íŒ¨ í–ˆì„ ê²½ìš° ProviderNotFoundException ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤. if (lastException == null) &#123; lastException = new ProviderNotFoundException(this.messages.getMessage(&quot;ProviderManager.providerNotFound&quot;, new Object[] &#123; toTest.getName() &#125;, &quot;No AuthenticationProvider found for &#123;0&#125;&quot;)); &#125; if (parentException == null) &#123; prepareException(lastException, authentication); &#125; throw lastException;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"ì¸ì¦ ê³¼ì •","slug":"Spring/Spring-Security/ì¸ì¦-ê³¼ì •","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95/"}],"tags":[]},{"title":"Spring Security - SecurityContextHolder ì™€ SecurityContext","slug":"spring/spring-security/security/authentication/securitycontext","date":"2021-10-07T14:25:35.000Z","updated":"2024-02-26T16:25:14.824Z","comments":true,"path":"2021/10/07/spring/spring-security/security/authentication/securitycontext/","link":"","permalink":"https://ckck803.github.io/2021/10/07/spring/spring-security/security/authentication/securitycontext/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://spring.io/guides/topicals/spring-security-architecture Spring Security - SecurityContextHolder ì™€ SecurityContext ì¸ì¦ì„ ì§„í–‰í•˜ë©´ì„œ ìƒì„±ëœ Authentication ê°ì²´ëŠ” SecurityContext ê°ì²´ ë‚´ì— ì €ì¥ëœë‹¤. ì €ì¥ëœ Authentication ê°ì²´ë¥¼ ì €ì¥í•˜ê³  ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œ SecurityContextëŠ” getAuthentication ë©”ì†Œë“œì™€ setAuthentication ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤. SecurityContext.java public interface SecurityContext extends Serializable &#123; Authentication getAuthentication(); void setAuthentication(Authentication authentication);&#125;","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://spring.io/guides/topicals/spring-security-architecture Spring Security - SecurityContextHolder ì™€ SecurityContext ì¸ì¦ì„ ì§„í–‰í•˜ë©´ì„œ ìƒì„±ëœ Authentication ê°ì²´ëŠ” SecurityContext ê°ì²´ ë‚´ì— ì €ì¥ëœë‹¤. ì €ì¥ëœ Authentication ê°ì²´ë¥¼ ì €ì¥í•˜ê³  ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œ SecurityContextëŠ” getAuthentication ë©”ì†Œë“œì™€ setAuthentication ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤. SecurityContext.java public interface SecurityContext extends Serializable &#123; Authentication getAuthentication(); void setAuthentication(Authentication authentication);&#125; SecurityContext ì¸í„°í˜ì´ìŠ¤ì˜ ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ë¡œëŠ” SecurityContextImpl í´ë˜ìŠ¤ê°€ ìˆë‹¤. SecutiryContextHolder SecurityContextë¥¼ ThreadLocalì— ì €ì¥í•˜ê¸° ìœ„í•œ ê°ì²´ SecurityContextHolder ë‚´ì—ëŠ” ThreadLocal ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆê³ , ì´ ThreadLocal ê°ì²´ì— SecurityContext ê°ì²´ë¥¼ ì €ì¥í•œë‹¤. SecurityContextHolder ê°€ ThreadLocal ì— SecurityContext ë¥¼ ì €ì¥í•˜ëŠ” ì „ëµì€ 3ê°€ì§€ê°€ ìˆë‹¤. | | MODE_THREADLOCAL í•œ ìŠ¤ë ˆë“œë‹¹ securityContextë¥¼ ì €ì¥í•˜ê³  ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤ MODE_INHERITABLETHREADLOCAL ë©”ì¸ ìŠ¤ë ˆë“œì™€ ìì‹ ìŠ¤ë ˆë“œì—ì„œ ë™ì¼í•œ SecurityContextë¥¼ ê°–ê³  ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤ MODE_GLOBAL ì‘ìš© í”„ë¡œê·¸ë¨ë‚´ì—ì„œ ë‹¨ í•˜ë‚˜ì˜ SecurityContextë¥¼ ì €ì¥í•˜ê³  ëª¨ë‘ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. SecurityContextHolderëŠ” ThreadLocalì— SecurityContext ê°ì²´ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ setContext ë©”ì†Œë“œì™€ getContext ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤. // SecurityContext ê°ì²´ë¥¼ ThreadLocalì— ì €ì¥í•œë‹¤.SecurityContextHolder.setContext(securityContext);// ThreadLocalì— ì €ì¥ëœ SecurityContext ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.SecurityContext securityContext = SecurityContextHolder.getContext(); SecurityContextHolder ë‚´ì—ëŠ” SecurityContextHolderStrategy ê°ì²´ë¥¼ ê°€ì§„ë‹¤. ë°”ë¡œ ì´ SecurityContextHolderStrategy ê¸°ë³¸ êµ¬í˜„ì²´ë¡œ ThreadLocalSecurityContextHolderStrategy ê°€ ìˆê³  í•´ë‹¹ ê°ì²´ë‚´ì— ThreadLocal ê°ì²´ê°€ ì¡´ì¬í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"ì¸ì¦ ê³¼ì •","slug":"Spring/Spring-Security/ì¸ì¦-ê³¼ì •","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95/"}],"tags":[]},{"title":"Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer","slug":"spring/spring-security/security/configure/rememberme","date":"2021-10-07T13:25:35.000Z","updated":"2024-02-26T16:26:46.554Z","comments":true,"path":"2021/10/07/spring/spring-security/security/configure/rememberme/","link":"","permalink":"https://ckck803.github.io/2021/10/07/spring/spring-security/security/configure/rememberme/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API rememberMeParameter ì¿ í‚¤ì˜ íŒŒë¼ë¯¸í„°ëª…ì„ ì§€ì •í•œë‹¤. ì²´í¬ë°•ìŠ¤ì˜ ì´ë¦„(parameter)ê³¼ remember-meì˜ íŒŒë¼ë¯¸í„° ëª…ì€ ì¼ì¹˜ ì‹œì¼œì¤˜ì•¼ í•œë‹¤. tokenValiditySeconds ì¿ í‚¤ì˜ ë§Œë£Œì‹œê°„ì„ ì„¤ì •í•œë‹¤. useSecureCookie Cookie ì— ë³´ì•ˆ ì„¤ì •ì„ í•  ë•Œ ì‚¬ìš©í•˜ëŠ” Flag HTTPS í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. userDetailsService remember-me ë¥¼ ì´ìš©í•œ ì¸ì¦ ì§„í–‰ì‹œ ì‹œìŠ¤í…œì˜ ì‚¬ìš©ì ê³„ì •ì„ ì¡°íšŒí•  ë•Œ ì‚¬ìš©í•˜ëŠ” class ë¥¼ ì§€ì •í•œë‹¤. tokenRepository Remember Me Token ì €ì¥ì†Œë¥¼ ì„¤ì •í•œë‹¤. ê¸°ë³¸ì€ TokenBasedRememberMeServices ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— Cookie ì— ì €ì¥í•˜ëŠ” ë°©ì‹ì´ë‹¤. ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” InMemoryTokenRepositoryImpl ì™€ JdbcTokenRepositoryImpl ë¡œ ì €ì¥ì†Œë¥¼ ëª…ì‹œí•´ì£¼ë©´ PersistentTokenBasedRememberMeServices ë¥¼ ì‚¬ìš©í•œë‹¤. key Remember Me Authentication ê°ì²´ ìœ íš¨ì„±ì„ í™•ì¸í•˜ê¸° ìœ„í•œ Key ê°’ì„ ì„¤ì •í•œë‹¤. String Hash ë¹„êµë¥¼ í†µí•´ ì¸ì¦ ìœ íš¨ì„±ì„ í™•ì¸í•œë‹¤. alwaysRemember Remember Me ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ì§€ ì•Šì•„ë„ í•­ìƒ ì‹¤í–‰í•˜ëŠ” Flag ì‚¬ìš©ìì˜ Sessionì´ ìƒì„±ë˜ì—ˆê³  Sessionì´ ì¸ì¦ ê°ì²´ë¥¼ ë‹´ê³  ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. RememberMeConfigurerpublic RememberMeConfigurer&lt;H&gt; tokenValiditySeconds(int tokenValiditySeconds) &#123; this.tokenValiditySeconds = tokenValiditySeconds; return this;&#125;public RememberMeConfigurer&lt;H&gt; useSecureCookie(boolean useSecureCookie) &#123; this.useSecureCookie = useSecureCookie; return this;&#125;public RememberMeConfigurer&lt;H&gt; userDetailsService(UserDetailsService userDetailsService) &#123; this.userDetailsService = userDetailsService; return this;&#125;public RememberMeConfigurer&lt;H&gt; tokenRepository(PersistentTokenRepository tokenRepository) &#123; this.tokenRepository = tokenRepository; return this;&#125;public RememberMeConfigurer&lt;H&gt; key(String key) &#123; this.key = key; return this;&#125;public RememberMeConfigurer&lt;H&gt; rememberMeParameter(String rememberMeParameter) &#123; this.rememberMeParameter = rememberMeParameter; return this;&#125;public RememberMeConfigurer&lt;H&gt; rememberMeCookieName(String rememberMeCookieName) &#123; this.rememberMeCookieName = rememberMeCookieName; return this;&#125;public RememberMeConfigurer&lt;H&gt; rememberMeCookieDomain(String rememberMeCookieDomain) &#123; this.rememberMeCookieDomain = rememberMeCookieDomain; return this;&#125;public RememberMeConfigurer&lt;H&gt; authenticationSuccessHandler( AuthenticationSuccessHandler authenticationSuccessHandler) &#123; this.authenticationSuccessHandler = authenticationSuccessHandler; return this;&#125;public RememberMeConfigurer&lt;H&gt; rememberMeServices(RememberMeServices rememberMeServices) &#123; this.rememberMeServices = rememberMeServices; return this;&#125;public RememberMeConfigurer&lt;H&gt; alwaysRemember(boolean alwaysRemember) &#123; this.alwaysRemember = alwaysRemember; return this;&#125;","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API rememberMeParameter ì¿ í‚¤ì˜ íŒŒë¼ë¯¸í„°ëª…ì„ ì§€ì •í•œë‹¤. ì²´í¬ë°•ìŠ¤ì˜ ì´ë¦„(parameter)ê³¼ remember-meì˜ íŒŒë¼ë¯¸í„° ëª…ì€ ì¼ì¹˜ ì‹œì¼œì¤˜ì•¼ í•œë‹¤. tokenValiditySeconds ì¿ í‚¤ì˜ ë§Œë£Œì‹œê°„ì„ ì„¤ì •í•œë‹¤. useSecureCookie Cookie ì— ë³´ì•ˆ ì„¤ì •ì„ í•  ë•Œ ì‚¬ìš©í•˜ëŠ” Flag HTTPS í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. userDetailsService remember-me ë¥¼ ì´ìš©í•œ ì¸ì¦ ì§„í–‰ì‹œ ì‹œìŠ¤í…œì˜ ì‚¬ìš©ì ê³„ì •ì„ ì¡°íšŒí•  ë•Œ ì‚¬ìš©í•˜ëŠ” class ë¥¼ ì§€ì •í•œë‹¤. tokenRepository Remember Me Token ì €ì¥ì†Œë¥¼ ì„¤ì •í•œë‹¤. ê¸°ë³¸ì€ TokenBasedRememberMeServices ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— Cookie ì— ì €ì¥í•˜ëŠ” ë°©ì‹ì´ë‹¤. ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” InMemoryTokenRepositoryImpl ì™€ JdbcTokenRepositoryImpl ë¡œ ì €ì¥ì†Œë¥¼ ëª…ì‹œí•´ì£¼ë©´ PersistentTokenBasedRememberMeServices ë¥¼ ì‚¬ìš©í•œë‹¤. key Remember Me Authentication ê°ì²´ ìœ íš¨ì„±ì„ í™•ì¸í•˜ê¸° ìœ„í•œ Key ê°’ì„ ì„¤ì •í•œë‹¤. String Hash ë¹„êµë¥¼ í†µí•´ ì¸ì¦ ìœ íš¨ì„±ì„ í™•ì¸í•œë‹¤. alwaysRemember Remember Me ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ì§€ ì•Šì•„ë„ í•­ìƒ ì‹¤í–‰í•˜ëŠ” Flag ì‚¬ìš©ìì˜ Sessionì´ ìƒì„±ë˜ì—ˆê³  Sessionì´ ì¸ì¦ ê°ì²´ë¥¼ ë‹´ê³  ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. RememberMeConfigurerpublic RememberMeConfigurer&lt;H&gt; tokenValiditySeconds(int tokenValiditySeconds) &#123; this.tokenValiditySeconds = tokenValiditySeconds; return this;&#125;public RememberMeConfigurer&lt;H&gt; useSecureCookie(boolean useSecureCookie) &#123; this.useSecureCookie = useSecureCookie; return this;&#125;public RememberMeConfigurer&lt;H&gt; userDetailsService(UserDetailsService userDetailsService) &#123; this.userDetailsService = userDetailsService; return this;&#125;public RememberMeConfigurer&lt;H&gt; tokenRepository(PersistentTokenRepository tokenRepository) &#123; this.tokenRepository = tokenRepository; return this;&#125;public RememberMeConfigurer&lt;H&gt; key(String key) &#123; this.key = key; return this;&#125;public RememberMeConfigurer&lt;H&gt; rememberMeParameter(String rememberMeParameter) &#123; this.rememberMeParameter = rememberMeParameter; return this;&#125;public RememberMeConfigurer&lt;H&gt; rememberMeCookieName(String rememberMeCookieName) &#123; this.rememberMeCookieName = rememberMeCookieName; return this;&#125;public RememberMeConfigurer&lt;H&gt; rememberMeCookieDomain(String rememberMeCookieDomain) &#123; this.rememberMeCookieDomain = rememberMeCookieDomain; return this;&#125;public RememberMeConfigurer&lt;H&gt; authenticationSuccessHandler( AuthenticationSuccessHandler authenticationSuccessHandler) &#123; this.authenticationSuccessHandler = authenticationSuccessHandler; return this;&#125;public RememberMeConfigurer&lt;H&gt; rememberMeServices(RememberMeServices rememberMeServices) &#123; this.rememberMeServices = rememberMeServices; return this;&#125;public RememberMeConfigurer&lt;H&gt; alwaysRemember(boolean alwaysRemember) &#123; this.alwaysRemember = alwaysRemember; return this;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Security","slug":"Spring/Spring-Security/Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Security/"},{"name":"Config","slug":"Spring/Spring-Security/Security/Config","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Security/Config/"}],"tags":[]},{"title":"Spring Security - Authentication ê°ì²´","slug":"spring/spring-security/security/authentication/authentication","date":"2021-10-07T13:25:35.000Z","updated":"2024-02-26T16:24:59.341Z","comments":true,"path":"2021/10/07/spring/spring-security/security/authentication/authentication/","link":"","permalink":"https://ckck803.github.io/2021/10/07/spring/spring-security/security/authentication/authentication/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://spring.io/guides/topicals/spring-security-architecture Spring Security - Authentication ê°ì²´ Authentication ê°ì²´ ë‚´ì—ëŠ” ìì›ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ëŒ€ìƒì˜ ì •ë³´ì™€ ê¶Œí•œ ì •ë³´ê°€ ë“¤ì–´ê°€ ìˆë‹¤. Authentication ê°ì²´ì˜ ëŒ€í‘œì ì¸ êµ¬í˜„ í´ë˜ìŠ¤ëŠ” AbstractAuthenticationToken í´ë˜ìŠ¤ì™€ UsernamePasswordAuthenticationToken ê°€ ìˆë‹¤. ì¸ì¦ì„ ì§„í–‰í•˜ë©´ì„œ ìƒì„±ëœ Authentication ê°ì²´ëŠ” SecurityContext ê°ì²´ì— ì €ì¥ëœë‹¤. Authentication ê°ì²´ ë‚´ì— Principal, Credentials, GrantedAuthority ê°€ ìˆë‹¤. Principal Object íƒ€ì…ìœ¼ë¡œ ë³´í†µì€ User IDê°€ ë“¤ì–´ê°€ê±°ë‚˜ UserDetailsê°€ ë“¤ì–´ê°€ê²Œ ëœë‹¤. Credentials Object íƒ€ì…ìœ¼ë¡œ ë³´í†µì€ User Passwordê°€ ë“¤ì–´ê°€ ìˆë‹¤. GrantedAuthority ì ‘ê·¼ ê¶Œí•œ ëª©ë¡ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤. public interface Authentication extends Principal, Serializable &#123; Collection&lt;? extends GrantedAuthority&gt; getAuthorities(); Object getCredentials(); Object getDetails(); Object getPrincipal(); boolean isAuthenticated(); void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException;&#125;","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ ì°¸ê³  https://spring.io/guides/topicals/spring-security-architecture Spring Security - Authentication ê°ì²´ Authentication ê°ì²´ ë‚´ì—ëŠ” ìì›ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ëŒ€ìƒì˜ ì •ë³´ì™€ ê¶Œí•œ ì •ë³´ê°€ ë“¤ì–´ê°€ ìˆë‹¤. Authentication ê°ì²´ì˜ ëŒ€í‘œì ì¸ êµ¬í˜„ í´ë˜ìŠ¤ëŠ” AbstractAuthenticationToken í´ë˜ìŠ¤ì™€ UsernamePasswordAuthenticationToken ê°€ ìˆë‹¤. ì¸ì¦ì„ ì§„í–‰í•˜ë©´ì„œ ìƒì„±ëœ Authentication ê°ì²´ëŠ” SecurityContext ê°ì²´ì— ì €ì¥ëœë‹¤. Authentication ê°ì²´ ë‚´ì— Principal, Credentials, GrantedAuthority ê°€ ìˆë‹¤. Principal Object íƒ€ì…ìœ¼ë¡œ ë³´í†µì€ User IDê°€ ë“¤ì–´ê°€ê±°ë‚˜ UserDetailsê°€ ë“¤ì–´ê°€ê²Œ ëœë‹¤. Credentials Object íƒ€ì…ìœ¼ë¡œ ë³´í†µì€ User Passwordê°€ ë“¤ì–´ê°€ ìˆë‹¤. GrantedAuthority ì ‘ê·¼ ê¶Œí•œ ëª©ë¡ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤. public interface Authentication extends Principal, Serializable &#123; Collection&lt;? extends GrantedAuthority&gt; getAuthorities(); Object getCredentials(); Object getDetails(); Object getPrincipal(); boolean isAuthenticated(); void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException;&#125; AbstractAuthenticationToken AbstractAuthenticationTokenëŠ” Authentication ê¶Œí•œ ì—¬ë¶€ì™€ ì¸ì¦ ì—¬ë¶€ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ êµ¬í˜„ëœ ì¶”ìƒ í´ë˜ìŠ¤ë‹¤. GrantedAuthority ëª©ë¡ ì •ë³´ë¥¼ ë‹´ê¸° ìœ„í•œ Object ê°ì²´, authenticated í”Œë˜ê·¸ ì„¸ í•„ë“œë¥¼ ê°–ê³  ìˆë‹¤. AbstractAuthenticationToken.java public abstract class AbstractAuthenticationToken implements Authentication, CredentialsContainer &#123; private final Collection&lt;GrantedAuthority&gt; authorities; private Object details; private boolean authenticated = false; public AbstractAuthenticationToken(Collection&lt;? extends GrantedAuthority&gt; authorities) &#123;...&#125; @Override public Collection&lt;GrantedAuthority&gt; getAuthorities() &#123;...&#125; @Override public String getName() &#123;...&#125; @Override public boolean isAuthenticated() &#123;...&#125; @Override public void setAuthenticated(boolean authenticated) &#123;...&#125; @Override public Object getDetails() &#123;...&#125; public void setDetails(Object details) &#123;...&#125; @Override public void eraseCredentials() &#123;...&#125; private void eraseSecret(Object secret) &#123;...&#125; @Override public boolean equals(Object obj) &#123;...&#125; @Override public int hashCode() &#123;...&#125; @Override public String toString() &#123;...&#125;&#125; UsernamePasswordAuthenticationToken username ê³¼ password ë¥¼ ì´ìš©í•´ ë§Œë“¤ì–´ì§„ Authentication êµ¬í˜„ í´ë˜ìŠ¤ Object ê°ì²´ì¸ principal Object ê°ì²´ì¸ credentials ë‘ í•„ë“œë¥¼ ê°–ê³  ìˆê³ , ë³´í†µ principal í•„ë“œì—ëŠ” UserDetails, AuthenticatedPrincipal ê°ì²´ê°€ credentials í•„ë“œì—ëŠ” CredentialsContainer ê°ì²´ê°€ ë“¤ì–´ê°„ë‹¤. UsernamePasswordAuthenticationToken.java public class UsernamePasswordAuthenticationToken extends AbstractAuthenticationToken &#123; private static final long serialVersionUID = SpringSecurityCoreVersion.SERIAL_VERSION_UID; private final Object principal; private Object credentials; public UsernamePasswordAuthenticationToken(Object principal, Object credentials) &#123; super(null); this.principal = principal; this.credentials = credentials; setAuthenticated(false); &#125; public UsernamePasswordAuthenticationToken(Object principal, Object credentials, Collection&lt;? extends GrantedAuthority&gt; authorities) &#123; super(authorities); this.principal = principal; this.credentials = credentials; super.setAuthenticated(true); &#125; @Override public Object getCredentials() &#123; return this.credentials; &#125; @Override public Object getPrincipal() &#123; return this.principal; &#125; @Override public void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException &#123; Assert.isTrue(!isAuthenticated, &quot;Cannot set this token to trusted - use constructor which takes a GrantedAuthority list instead&quot;); super.setAuthenticated(false); &#125; @Override public void eraseCredentials() &#123; super.eraseCredentials(); this.credentials = null; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"ì¸ì¦ ê³¼ì •","slug":"Spring/Spring-Security/ì¸ì¦-ê³¼ì •","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - HTTP Status Code","slug":"computer-science/network/http/http-status-code","date":"2021-10-04T01:39:59.000Z","updated":"2024-02-18T16:19:54.518Z","comments":true,"path":"2021/10/04/computer-science/network/http/http-status-code/","link":"","permalink":"https://ckck803.github.io/2021/10/04/computer-science/network/http/http-status-code/","excerpt":"HTTP Status Code1xx (Information) - ì •ë³´ì„± ìƒíƒœ ì½”ë“œ Http Status CodeëŠ” HTTP&#x2F;1.1 ì—ì„œ ë„ì…ëœ ìƒíƒœ ì½”ë“œ 2xx (Successful) - ì„±ê³µ ìƒíƒœ ì½”ë“œ ì½”ë“œ ì„¤ëª… 200 : OK ìš”ì²­ ì„±ê³µí–ˆìŒì„ ë‚˜íƒ€ë‚¸ë‹¤. 201 : Created ìš”ì²­ì´ ì„±ê³µí•˜ê³  ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±ëìŒì„ ë‚˜íƒ€ë‚¸ë‹¤. 202 : Accepted ìš”ì²­ì€ ì„±ê³µí–ˆìœ¼ë‚˜ ì„œë²„ê°€ ì•„ì§ ì‘ì—…ì„ ì§„í–‰í•˜ì§€ ì•Šì€ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. 204 : No Content ìš”ì²­ì´ ì„±ê³µí–ˆê³  Serverì—ì„œ Clientë¡œ ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ëŠ” ìƒíƒœë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. 3xx (Redirection) - ë¦¬ë‹¤ì´ë ‰ì…˜ ìƒíƒœ ì½”ë“œ ì½”ë“œ ì„¤ëª… 300 : Multiple Choices ë¦¬ì†ŒìŠ¤ì˜ URIê°€ ì˜êµ¬ì ìœ¼ë¡œ ì´ë™ 301 : Moved Permanently 302 : Found 303 : See Other 304 : Not Modified 307 : Temporary Redirect 308 : Permanent Redirect 4xx (Client Error) - í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜","text":"HTTP Status Code1xx (Information) - ì •ë³´ì„± ìƒíƒœ ì½”ë“œ Http Status CodeëŠ” HTTP&#x2F;1.1 ì—ì„œ ë„ì…ëœ ìƒíƒœ ì½”ë“œ 2xx (Successful) - ì„±ê³µ ìƒíƒœ ì½”ë“œ ì½”ë“œ ì„¤ëª… 200 : OK ìš”ì²­ ì„±ê³µí–ˆìŒì„ ë‚˜íƒ€ë‚¸ë‹¤. 201 : Created ìš”ì²­ì´ ì„±ê³µí•˜ê³  ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±ëìŒì„ ë‚˜íƒ€ë‚¸ë‹¤. 202 : Accepted ìš”ì²­ì€ ì„±ê³µí–ˆìœ¼ë‚˜ ì„œë²„ê°€ ì•„ì§ ì‘ì—…ì„ ì§„í–‰í•˜ì§€ ì•Šì€ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. 204 : No Content ìš”ì²­ì´ ì„±ê³µí–ˆê³  Serverì—ì„œ Clientë¡œ ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ëŠ” ìƒíƒœë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. 3xx (Redirection) - ë¦¬ë‹¤ì´ë ‰ì…˜ ìƒíƒœ ì½”ë“œ ì½”ë“œ ì„¤ëª… 300 : Multiple Choices ë¦¬ì†ŒìŠ¤ì˜ URIê°€ ì˜êµ¬ì ìœ¼ë¡œ ì´ë™ 301 : Moved Permanently 302 : Found 303 : See Other 304 : Not Modified 307 : Temporary Redirect 308 : Permanent Redirect 4xx (Client Error) - í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ ì½”ë“œ ì„¤ëª… 400 : Bad Request í´ë¼ì´ì–¸íŠ¸ê°€ ì˜ëª»ëœ ìš”ì²­ì„ í•´ì„œ ì„œë²„ê°€ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ìƒíƒœë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. 401 : Unauthorized í´ë¼ì´ì–¸íŠ¸ê°€ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” ì¸ì¦ì´ í•„ìš”í•¨ì„ ë‚˜íƒ€ë‚¸ë‹¤. 403 : Forbidded í´ë¼ë¦¬ì–¸íŠ¸ê°€ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” ê¶Œí•œì´ í•„ìš”í•¨ì„ ë‚˜íƒ€ë‚¸ë‹¤.(ì¸ê°€) 404 : Not Found í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ê°€ ì„œë²„ì—ì„œ ì°¾ì„ ìˆ˜ ì—†ìŒì„ ë‚˜íƒ€ë‚¸ë‹¤. 5xx (Server Error) - ì„œë²„ ì˜¤ë¥˜ ì½”ë“œ ì„¤ëª… 500 : Internal Server Error 503 : Service Unavailable","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"HTTP","slug":"CS/Network/HTTP","permalink":"https://ckck803.github.io/categories/CS/Network/HTTP/"}],"tags":[]},{"title":"Spring MVC Request Life Cycle - Interceptor","slug":"spring/spring-framework/lifecycle/spring-lifecycle-06-interceptor","date":"2021-10-04T01:39:59.000Z","updated":"2024-02-26T15:56:54.971Z","comments":true,"path":"2021/10/04/spring/spring-framework/lifecycle/spring-lifecycle-06-interceptor/","link":"","permalink":"https://ckck803.github.io/2021/10/04/spring/spring-framework/lifecycle/spring-lifecycle-06-interceptor/","excerpt":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter Interceptor ìŠ¤í”„ë§ Interceptor ëŠ” Handler(Controller) í˜¸ì¶œ ì „, í›„ì— ì‚¬ìš©ì ìš”ì²­ ë° ì‘ë‹µì„ ê°€ë¡œì±„ íŠ¹ì • ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì„ í•œë‹¤. DispatcherServlet ì´í›„ì— ë™ì‘í•œë‹¤. ìŠ¤í”„ë§ Filter ì²˜ëŸ¼ Request, Response ê°ì²´ë¥¼ ë‹¤ë¥¸ ê°ì²´ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥ í•˜ë‹¤. Interceptor ëŠ” Request, Response ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•˜ì§€ ì•Šê³ , boolean ê°’ì„ ë°˜í™˜í•˜ëŠ” í˜•íƒœë¡œ ë¡œì§ ìˆ˜í–‰ Interceptor ì¸í„°í˜ì´ìŠ¤ preHandle Handler í˜¸ì¶œ ì „ì— ì‹¤í–‰ëœë‹¤. HttpServletRequest ê°ì²´ë¥¼ ì´ìš©í•´ preHandle ì´ true ë¥¼ ë°˜í™˜í•˜ë©´ ë‹¤ìŒìœ¼ë¡œ ì§„í–‰í•˜ê³ , false ë©´ ì§„í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. postHandle Handler í˜¸ì¶œ í›„ì— ì‹¤í–‰ëœë‹¤. afterCompletion View ê°€ ë Œë”ë§ ëœ ì´í›„ì— í˜¸ì¶œëœë‹¤. public interface HandlerInterceptor &#123; default boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; return true; &#125; default void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable ModelAndView modelAndView) throws Exception &#123; &#125; default void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable Exception ex) throws Exception &#123; &#125;&#125;","text":"ëª©ì°¨ Spring MVC - ArgumentResolver Spring MVC Request Life Cycle - ViewResolver Spring MVC Request Life Cycle - HandlerAdapter Spring MVC Request Life Cycle - HandlerMapping Spring MVC Request Life Cycle - DispatcherServlet Spring MVC Request Life Cycle - Interceptor Spring MVC Request Life Cycle - Filter Interceptor ìŠ¤í”„ë§ Interceptor ëŠ” Handler(Controller) í˜¸ì¶œ ì „, í›„ì— ì‚¬ìš©ì ìš”ì²­ ë° ì‘ë‹µì„ ê°€ë¡œì±„ íŠ¹ì • ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì„ í•œë‹¤. DispatcherServlet ì´í›„ì— ë™ì‘í•œë‹¤. ìŠ¤í”„ë§ Filter ì²˜ëŸ¼ Request, Response ê°ì²´ë¥¼ ë‹¤ë¥¸ ê°ì²´ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥ í•˜ë‹¤. Interceptor ëŠ” Request, Response ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•˜ì§€ ì•Šê³ , boolean ê°’ì„ ë°˜í™˜í•˜ëŠ” í˜•íƒœë¡œ ë¡œì§ ìˆ˜í–‰ Interceptor ì¸í„°í˜ì´ìŠ¤ preHandle Handler í˜¸ì¶œ ì „ì— ì‹¤í–‰ëœë‹¤. HttpServletRequest ê°ì²´ë¥¼ ì´ìš©í•´ preHandle ì´ true ë¥¼ ë°˜í™˜í•˜ë©´ ë‹¤ìŒìœ¼ë¡œ ì§„í–‰í•˜ê³ , false ë©´ ì§„í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. postHandle Handler í˜¸ì¶œ í›„ì— ì‹¤í–‰ëœë‹¤. afterCompletion View ê°€ ë Œë”ë§ ëœ ì´í›„ì— í˜¸ì¶œëœë‹¤. public interface HandlerInterceptor &#123; default boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; return true; &#125; default void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable ModelAndView modelAndView) throws Exception &#123; &#125; default void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable Exception ex) throws Exception &#123; &#125;&#125; Interceptor ì˜ˆì™¸ Handler(Controller) ì‹¤í–‰ ì¤‘ê°„ì— ì˜ˆì™¸ê°€ ë°œìƒí•˜ê²Œ ë˜ë©´ postHandler ëŠ” í˜¸ì¶œë˜ì§€ ì•Šê³ , ë˜ì ¸ì§„ ì˜ˆì™¸ëŠ” afterCompletion ì— ì „ë‹¬ëœë‹¤. preHandler ì˜ ê²½ìš° Handler ìˆ˜í–‰ ì „ì— ì‹¤í–‰ë˜ë¯€ë¡œ Handler ì˜ˆì™¸ì™€ëŠ” ìƒê´€ì´ ì—†ë‹¤. postHandler ì˜ ê²½ìš° Handler ì˜ˆì™¸ ë°œìƒì‹œ ë¡œì§ì´ ìˆ˜í–‰ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜ˆì™¸ ë°œìƒ ìƒí™©ê³¼ ê´€ê³„ì—†ì´ Handler ì‹¤í–‰ í›„ ì‘ì—…ì„ ì§„í–‰í•˜ê³  ì‹¶ìœ¼ë©´ afterCompletion ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ë„ë¡ í•œë‹¤. afterCompletion ì— ì „ë‹¬ëœ ì˜ˆì™¸ëŠ” ë¡œì§ì„ ìˆ˜í–‰í•œ í›„ Filter ì—ë„ ì „ë‹¬ëœë‹¤. ìš”ì²­ ë¡œê·¸ ë‚¨ê¸°ê¸°@Slf4jpublic class LogInterceptor implements HandlerInterceptor &#123; public static final String LOGIN_ID = &quot;loginId&quot;; @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; String requestURI = request.getRequestURI(); String uuid = UUID.randomUUID().toString(); request.setAttribute(LOGIN_ID, uuid); if(handler instanceof HandlerMethod)&#123; HandlerMethod hm = (HandlerMethod) handler;// í˜¸ì¶œí•  ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì†Œë“œì˜ ëª¨ë“  ì •ë³´ê°€ í¬í•¨ë¼ ìˆë‹¤. &#125; log.info(&quot;REQUEST [&#123;&#125;][&#123;&#125;][&#123;&#125;]&quot;, uuid, requestURI, handler); return true; &#125; @Override public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123; log.info(&quot;postHandle [&#123;&#125;]&quot;, modelAndView); &#125; @Override public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123; String requestURI = request.getRequestURI(); String loginId = (String) request.getAttribute(LOGIN_ID); log.info(&quot;RESPONSE [&#123;&#125;][&#123;&#125;][&#123;&#125;]&quot;, loginId, requestURI, handler); if(ex != null)&#123; log.error(&quot;afterCompletion error!!&quot;, ex); &#125; &#125;&#125; Interceptor ë“±ë¡í•˜ê¸°ìŠ¤í”„ë§ MVC ì„¤ì •ì„ ìœ„í•œ WebMvcConfigurer ì¸í„°í˜ì´ìŠ¤ëŠ” Interceptor ë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•œ addInterceptors ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤. InterceptorRegistry ê°ì²´ì— ìƒˆë¡œ ë§Œë“  Interceptor ì™€ ì„¤ì • ì •ë³´ë¥¼ ë„£ì–´ì£¼ë©´ ì ìš©ëœë‹¤. @Configurationpublic class WebConfig implements WebMvcConfigurer &#123; @Override public void addInterceptors(InterceptorRegistry registry) &#123; registry.addInterceptor(new LogInterceptor()) .order(1) .addPathPatterns(&quot;/**&quot;) .excludePathPatterns(&quot;/css/**&quot;, &quot;/*.ico&quot;, &quot;/error&quot;); &#125;&#125; ë¡œê·¸ì¸ Check Interceptor ì‘ì„±í•˜ê¸°@Slf4jpublic class LoginCheckInterceptor implements HandlerInterceptor &#123; @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; String requestURI = request.getRequestURI(); log.info(&quot;ì¸ì¦ ì²´í¬ ì¸í„°ì…‰í„° ì‹¤í–‰ &#123;&#125;&quot;, requestURI); HttpSession httpSession = request.getSession(); if(httpSession == null || httpSession.getAttribute(SessionConst.LOGIN_MEMBER) == null)&#123; log.info(&quot;ë¯¸ ì¸ì¦ ì‚¬ìš©ì ìš”ì²­&quot;); // ë¡œê·¸ì¸ìœ¼ë¡œ redirect response.sendRedirect(&quot;/login?redirectURL=&quot;+requestURI); return false; &#125; return true; &#125;&#125; Interceptor ë“±ë¡í•˜ê¸°@Configurationpublic class WebConfig implements WebMvcConfigurer &#123; @Override public void addInterceptors(InterceptorRegistry registry) &#123; registry.addInterceptor(new LogInterceptor()) .order(1) .addPathPatterns(&quot;/**&quot;) .excludePathPatterns(&quot;/css/**&quot;, &quot;/*.ico&quot;, &quot;/error&quot;); registry.addInterceptor(new LoginCheckInterceptor()) .order(2) .addPathPatterns(&quot;/**&quot;) .excludePathPatterns(&quot;/&quot;, &quot;/members/add&quot;, &quot;/login&quot;, &quot;/logout&quot;, &quot;/css/**&quot;, &quot;/*.ico&quot;, &quot;/error&quot;); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Framework","slug":"Spring/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/"},{"name":"lifecycle","slug":"Spring/Spring-Framework/lifecycle","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/lifecycle/"}],"tags":[]},{"title":"Spring Boot - HttpSession ì‚¬ìš©í•˜ê¸°","slug":"spring/spring-framework/session/springboot-session-02","date":"2021-10-03T14:39:59.000Z","updated":"2024-11-27T02:00:28.467Z","comments":true,"path":"2021/10/03/spring/spring-framework/session/springboot-session-02/","link":"","permalink":"https://ckck803.github.io/2021/10/03/spring/spring-framework/session/springboot-session-02/","excerpt":"ëª©ì°¨ Spring Boot - HttpSession ì‚¬ìš©í•˜ê¸° Spring Boot - ì§ì ‘ Session Storage êµ¬í˜„í•˜ê¸° Spring Boot - Cookie ì‚¬ìš©í•˜ê¸° Spring boot Session ì‚¬ìš©í•˜ê¸° 2 request.getSession(true) HttpSession ì´ ì¡´ì¬í•˜ë©´ HttpSession ì„ ë°˜í™˜í•˜ê³  ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ìƒˆë¡œìš´ Session ì„ ë°˜í™˜í•œë‹¤. request.getSession(false) HttpSession ì´ ì¡´ì¬í•˜ë©´ í˜„ì¬ HttpSession ì„ ë°˜í•œí•˜ê³  ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ null ì„ ë°˜í™˜í•œë‹¤. @PostMapping(&quot;/login&quot;)public String loginV3(@Valid @ModelAttribute LoginForm form, BindingResult bindingResult, HttpServletRequest request)&#123; log.info(&quot;Request Params : &#123;&#125;&quot;, form); if(bindingResult.hasErrors())&#123; return &quot;login/loginForm&quot;; &#125; Member loginMember = loginService.login(form.getLoginId(), form.getPassword()); if(loginMember == null)&#123; bindingResult.reject(&quot;loginFail&quot;, &quot;ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.&quot;); return &quot;login/loginForm&quot;; &#125; // ë¡œê·¸ì¸ ì„¤ê³µ ì²˜ë¦¬ TODO // ì„¸ì…˜ì´ ìˆìœ¼ë©´ ìˆëŠ” ì„¸ì…˜ ë°˜í™˜, ì—†ìœ¼ë©´ ì‹ ê·œ ì„¸ì…˜ì„ ìƒì„± HttpSession session = request.getSession(); // ì„¸ì…˜ì— ë¡œê·¸ì¸ íšŒì› ì •ë³´ë¥¼ ë³´ê´€ session.setAttribute(SessionConst.LOGIN_MEMBER, loginMember); return &quot;redirect:/&quot;;&#125; @PostMapping(&quot;/logout&quot;)public String logoutV3(HttpServletRequest request)&#123; HttpSession session = request.getSession(false); if(session != null)&#123; session.invalidate(); &#125; return &quot;redirect:/&quot;;&#125; @GetMapping(&quot;/&quot;)public String homeLoginV3(HttpServletRequest request, Model model)&#123; HttpSession session = request.getSession(false); if(session == null)&#123; return &quot;home&quot;; &#125; Member LoginMember = (Member) session.getAttribute(SessionConst.LOGIN_MEMBER); // ì„¸ì…˜ì— íšŒì› ë°ì´í„°ê°€ ì—†ìœ¼ë©´ home if(LoginMember == null)&#123; return &quot;home&quot;; &#125; // ì„¸ì…˜ì´ ìœ ì§€ë˜ ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™ model.addAttribute(&quot;member&quot;, LoginMember); return &quot;loginHome&quot;;&#125; ìŠ¤í”„ë§ì—ì„œ ì§€ì›í•˜ëŠ” Session ê¸°ëŠ¥ ì‚¬ìš©í•˜ê¸°@GetMapping(&quot;/&quot;)public String homeLoginV3Spring( @SessionAttribute(name = SessionConst.LOGIN_MEMBER, required = false) Member loginMember, Model model)&#123; // ì„¸ì…˜ì— íšŒì› ë°ì´í„°ê°€ ì—†ìœ¼ë©´ home if(loginMember == null)&#123; return &quot;home&quot;; &#125; // ì„¸ì…˜ì´ ìœ ì§€ë˜ ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™ model.addAttribute(&quot;member&quot;, loginMember); return &quot;loginHome&quot;;&#125;","text":"ëª©ì°¨ Spring Boot - HttpSession ì‚¬ìš©í•˜ê¸° Spring Boot - ì§ì ‘ Session Storage êµ¬í˜„í•˜ê¸° Spring Boot - Cookie ì‚¬ìš©í•˜ê¸° Spring boot Session ì‚¬ìš©í•˜ê¸° 2 request.getSession(true) HttpSession ì´ ì¡´ì¬í•˜ë©´ HttpSession ì„ ë°˜í™˜í•˜ê³  ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ìƒˆë¡œìš´ Session ì„ ë°˜í™˜í•œë‹¤. request.getSession(false) HttpSession ì´ ì¡´ì¬í•˜ë©´ í˜„ì¬ HttpSession ì„ ë°˜í•œí•˜ê³  ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ null ì„ ë°˜í™˜í•œë‹¤. @PostMapping(&quot;/login&quot;)public String loginV3(@Valid @ModelAttribute LoginForm form, BindingResult bindingResult, HttpServletRequest request)&#123; log.info(&quot;Request Params : &#123;&#125;&quot;, form); if(bindingResult.hasErrors())&#123; return &quot;login/loginForm&quot;; &#125; Member loginMember = loginService.login(form.getLoginId(), form.getPassword()); if(loginMember == null)&#123; bindingResult.reject(&quot;loginFail&quot;, &quot;ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.&quot;); return &quot;login/loginForm&quot;; &#125; // ë¡œê·¸ì¸ ì„¤ê³µ ì²˜ë¦¬ TODO // ì„¸ì…˜ì´ ìˆìœ¼ë©´ ìˆëŠ” ì„¸ì…˜ ë°˜í™˜, ì—†ìœ¼ë©´ ì‹ ê·œ ì„¸ì…˜ì„ ìƒì„± HttpSession session = request.getSession(); // ì„¸ì…˜ì— ë¡œê·¸ì¸ íšŒì› ì •ë³´ë¥¼ ë³´ê´€ session.setAttribute(SessionConst.LOGIN_MEMBER, loginMember); return &quot;redirect:/&quot;;&#125; @PostMapping(&quot;/logout&quot;)public String logoutV3(HttpServletRequest request)&#123; HttpSession session = request.getSession(false); if(session != null)&#123; session.invalidate(); &#125; return &quot;redirect:/&quot;;&#125; @GetMapping(&quot;/&quot;)public String homeLoginV3(HttpServletRequest request, Model model)&#123; HttpSession session = request.getSession(false); if(session == null)&#123; return &quot;home&quot;; &#125; Member LoginMember = (Member) session.getAttribute(SessionConst.LOGIN_MEMBER); // ì„¸ì…˜ì— íšŒì› ë°ì´í„°ê°€ ì—†ìœ¼ë©´ home if(LoginMember == null)&#123; return &quot;home&quot;; &#125; // ì„¸ì…˜ì´ ìœ ì§€ë˜ ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™ model.addAttribute(&quot;member&quot;, LoginMember); return &quot;loginHome&quot;;&#125; ìŠ¤í”„ë§ì—ì„œ ì§€ì›í•˜ëŠ” Session ê¸°ëŠ¥ ì‚¬ìš©í•˜ê¸°@GetMapping(&quot;/&quot;)public String homeLoginV3Spring( @SessionAttribute(name = SessionConst.LOGIN_MEMBER, required = false) Member loginMember, Model model)&#123; // ì„¸ì…˜ì— íšŒì› ë°ì´í„°ê°€ ì—†ìœ¼ë©´ home if(loginMember == null)&#123; return &quot;home&quot;; &#125; // ì„¸ì…˜ì´ ìœ ì§€ë˜ ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™ model.addAttribute(&quot;member&quot;, loginMember); return &quot;loginHome&quot;;&#125; Tracking Mode ë„ê¸°@Slf4j@RestControllerpublic class SessionInfoController &#123; @GetMapping(&quot;/session-info&quot;) public String sessionInfo(HttpServletRequest request)&#123; HttpSession session = request.getSession(false); if(session == null)&#123; return &quot;ì„¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.&quot;; &#125; session.getAttributeNames() .asIterator() .forEachRemaining(name -&gt; log.info(&quot;session name = &#123;&#125;, value = &#123;&#125;&quot;, name, session.getAttribute(name))); log.info(&quot;sessionId = &#123;&#125;&quot;, session.getId()); log.info(&quot;getMaxInactiveInterval = &#123;&#125;&quot;, session.getMaxInactiveInterval()); log.info(&quot;creationTime = &#123;&#125;&quot;, new Date(session.getCreationTime())); log.info(&quot;lastAccessedTime = &#123;&#125;&quot;, new Date(session.getLastAccessedTime())); log.info(&quot;isNew = &#123;&#125;&quot;, session.isNew()); return &quot;ì„¸ì…˜ ì¶œë ¥&quot;; &#125;&#125; Session Timeout ì„¤ì •í•˜ê¸°server.servlet.session.timeout=1800 session.setMaxInactiveInterval(1800); //1800ì´ˆ","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot - ì§ì ‘ Session Storage êµ¬í˜„í•˜ê¸°","slug":"spring/spring-framework/session/springboot-session-01","date":"2021-10-03T13:39:59.000Z","updated":"2024-11-27T02:00:28.541Z","comments":true,"path":"2021/10/03/spring/spring-framework/session/springboot-session-01/","link":"","permalink":"https://ckck803.github.io/2021/10/03/spring/spring-framework/session/springboot-session-01/","excerpt":"ëª©ì°¨ Spring Boot - HttpSession ì‚¬ìš©í•˜ê¸° Spring Boot - ì§ì ‘ Session Storage êµ¬í˜„í•˜ê¸° Spring Boot - Cookie ì‚¬ìš©í•˜ê¸° ì§ì ‘ ë§Œë“  Session ì‚¬ìš©í•˜ê¸°@Componentpublic class SessionManager &#123; public static final String SESSION_COOKIE_NAME = &quot;mySessionId&quot;; private Map&lt;String, Object&gt; sessionStore = new ConcurrentHashMap&lt;&gt;(); public void createSession(Object value, HttpServletResponse response)&#123; // Session idë¥¼ ìƒì„±í•˜ê³  ê°’ì„ Sessionì— ì €ì¥ String sessionId = UUID.randomUUID().toString(); // Session Store ì— ìƒˆë¡œìš´ Session ì •ë³´ë¥¼ ì €ì¥í•œë‹¤. // Session ì€ Key Value í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì €ì¥ sessionStore.put(sessionId, value); // ì¿ í‚¤ ìƒì„± // Session Id ë¥¼ Cookie ì— ë„£ì–´ ì „ë‹¬í•œë‹¤. Cookie mySessionCookie = new Cookie(SESSION_COOKIE_NAME, sessionId); response.addCookie(mySessionCookie); &#125; public Object getSession(HttpServletRequest request)&#123; // Request ì—ì„œ Session Id ë¥¼ ê°€ì ¸ì˜¨ë‹¤. Cookie sessionCookie = findCookie(request, SESSION_COOKIE_NAME); if(sessionCookie == null)&#123; return null; &#125; // Session Store ì— ì €ì¥ëœ Session ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. return sessionStore.get(sessionCookie.getValue()); &#125; public void expire(HttpServletRequest request)&#123; Cookie sessionCookie = findCookie(request, SESSION_COOKIE_NAME); if(sessionCookie != null)&#123; sessionStore.remove(sessionCookie.getValue()); &#125; &#125; public Cookie findCookie(HttpServletRequest request, String cookieName)&#123; if(request.getCookies() == null)&#123; return null; &#125; return Arrays.stream(request.getCookies()) .filter(cookie -&gt; cookie.getName().equals(cookieName)) .findAny() .orElse(null); &#125;&#125; @PostMapping(&quot;/login&quot;)public String login(@Valid @ModelAttribute LoginForm form, BindingResult bindingResult, HttpServletResponse response)&#123; log.info(&quot;Request Params : &#123;&#125;&quot;, form); if(bindingResult.hasErrors())&#123; return &quot;login/loginForm&quot;; &#125; Member loginMember = loginService.login(form.getLoginId(), form.getPassword()); if(loginMember == null)&#123; bindingResult.reject(&quot;loginFail&quot;, &quot;ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.&quot;); return &quot;login/loginForm&quot;; &#125; // ë¡œê·¸ì¸ ì„¤ê³µ ì²˜ë¦¬ TODO // ì¿ í‚¤ ì‚¬ìš©í•˜ê¸° // ì¿ í‚¤ì— ì‹œê°„ ì •ë³´ë¥¼ ì£¼ì§€ ì•Šìœ¼ë©´ ì„¸ì„  ì¿ (ë¸Œë¼ìš°ì € ì¢…ë£Œì‹œ ëª¨ë‘ ì¢…ë£Œ) Cookie cookie = new Cookie(&quot;memberId&quot;, String.valueOf(loginMember.getId())); response.addCookie(cookie); return &quot;redirect:/&quot;;&#125; Testclass SessionManagerTest &#123; SessionManager sessionManager = new SessionManager(); @Test void SessionTest()&#123; // ì„¸ì…˜ ìƒì„± MockHttpServletResponse response = new MockHttpServletResponse(); Member member = new Member(); sessionManager.createSession(member, response); // ìš”ì²­ì— ì‘ë‹µ ì¿ í‚¤ ì €ì¥ MockHttpServletRequest request = new MockHttpServletRequest(); request.setCookies(response.getCookies()); // ì„¸ì…˜ ì¡°íšŒ Object result = sessionManager.getSession(request); assertThat(result).isEqualTo(member); // ì„¸ì…˜ ë§Œë£Œ sessionManager.expire(request); Object expired = sessionManager.getSession(request); assertThat(expired).isNull(); &#125;&#125; @PostMapping(&quot;/login&quot;)public String loginV2(@Valid @ModelAttribute LoginForm form, BindingResult bindingResult, HttpServletResponse response)&#123; log.info(&quot;Request Params : &#123;&#125;&quot;, form); if(bindingResult.hasErrors())&#123; return &quot;login/loginForm&quot;; &#125; Member loginMember = loginService.login(form.getLoginId(), form.getPassword()); if(loginMember == null)&#123; bindingResult.reject(&quot;loginFail&quot;, &quot;ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.&quot;); return &quot;login/loginForm&quot;; &#125; // ë¡œê·¸ì¸ ì„¤ê³µ ì²˜ë¦¬ TODO // ì„¸ì…˜ ê´€ë¦¬ìë¥¼ í†µí•´ ì„¸ì…˜ì„ ìƒì„±í•˜ê³ , íšŒì› ë°ì´í„° ë³´ê´€ // ì¿ í‚¤ì— ì‹œê°„ ì •ë³´ë¥¼ ì£¼ì§€ ì•Šìœ¼ë©´ ì„¸ì…˜ ì¿ í‚¤(ë¸Œë¼ì£¼ì–´ ì¢…ë£Œì‹œ ëª¨ë‘ ì¢…ë£Œ) sessionManager.createSession(loginMember, response); return &quot;redirect:/&quot;;&#125; @PostMapping(&quot;/logout&quot;)public String logoutV2(HttpServletRequest request)&#123; sessionManager.expire(request); return &quot;redirect:/&quot;;&#125;","text":"ëª©ì°¨ Spring Boot - HttpSession ì‚¬ìš©í•˜ê¸° Spring Boot - ì§ì ‘ Session Storage êµ¬í˜„í•˜ê¸° Spring Boot - Cookie ì‚¬ìš©í•˜ê¸° ì§ì ‘ ë§Œë“  Session ì‚¬ìš©í•˜ê¸°@Componentpublic class SessionManager &#123; public static final String SESSION_COOKIE_NAME = &quot;mySessionId&quot;; private Map&lt;String, Object&gt; sessionStore = new ConcurrentHashMap&lt;&gt;(); public void createSession(Object value, HttpServletResponse response)&#123; // Session idë¥¼ ìƒì„±í•˜ê³  ê°’ì„ Sessionì— ì €ì¥ String sessionId = UUID.randomUUID().toString(); // Session Store ì— ìƒˆë¡œìš´ Session ì •ë³´ë¥¼ ì €ì¥í•œë‹¤. // Session ì€ Key Value í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì €ì¥ sessionStore.put(sessionId, value); // ì¿ í‚¤ ìƒì„± // Session Id ë¥¼ Cookie ì— ë„£ì–´ ì „ë‹¬í•œë‹¤. Cookie mySessionCookie = new Cookie(SESSION_COOKIE_NAME, sessionId); response.addCookie(mySessionCookie); &#125; public Object getSession(HttpServletRequest request)&#123; // Request ì—ì„œ Session Id ë¥¼ ê°€ì ¸ì˜¨ë‹¤. Cookie sessionCookie = findCookie(request, SESSION_COOKIE_NAME); if(sessionCookie == null)&#123; return null; &#125; // Session Store ì— ì €ì¥ëœ Session ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. return sessionStore.get(sessionCookie.getValue()); &#125; public void expire(HttpServletRequest request)&#123; Cookie sessionCookie = findCookie(request, SESSION_COOKIE_NAME); if(sessionCookie != null)&#123; sessionStore.remove(sessionCookie.getValue()); &#125; &#125; public Cookie findCookie(HttpServletRequest request, String cookieName)&#123; if(request.getCookies() == null)&#123; return null; &#125; return Arrays.stream(request.getCookies()) .filter(cookie -&gt; cookie.getName().equals(cookieName)) .findAny() .orElse(null); &#125;&#125; @PostMapping(&quot;/login&quot;)public String login(@Valid @ModelAttribute LoginForm form, BindingResult bindingResult, HttpServletResponse response)&#123; log.info(&quot;Request Params : &#123;&#125;&quot;, form); if(bindingResult.hasErrors())&#123; return &quot;login/loginForm&quot;; &#125; Member loginMember = loginService.login(form.getLoginId(), form.getPassword()); if(loginMember == null)&#123; bindingResult.reject(&quot;loginFail&quot;, &quot;ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.&quot;); return &quot;login/loginForm&quot;; &#125; // ë¡œê·¸ì¸ ì„¤ê³µ ì²˜ë¦¬ TODO // ì¿ í‚¤ ì‚¬ìš©í•˜ê¸° // ì¿ í‚¤ì— ì‹œê°„ ì •ë³´ë¥¼ ì£¼ì§€ ì•Šìœ¼ë©´ ì„¸ì„  ì¿ (ë¸Œë¼ìš°ì € ì¢…ë£Œì‹œ ëª¨ë‘ ì¢…ë£Œ) Cookie cookie = new Cookie(&quot;memberId&quot;, String.valueOf(loginMember.getId())); response.addCookie(cookie); return &quot;redirect:/&quot;;&#125; Testclass SessionManagerTest &#123; SessionManager sessionManager = new SessionManager(); @Test void SessionTest()&#123; // ì„¸ì…˜ ìƒì„± MockHttpServletResponse response = new MockHttpServletResponse(); Member member = new Member(); sessionManager.createSession(member, response); // ìš”ì²­ì— ì‘ë‹µ ì¿ í‚¤ ì €ì¥ MockHttpServletRequest request = new MockHttpServletRequest(); request.setCookies(response.getCookies()); // ì„¸ì…˜ ì¡°íšŒ Object result = sessionManager.getSession(request); assertThat(result).isEqualTo(member); // ì„¸ì…˜ ë§Œë£Œ sessionManager.expire(request); Object expired = sessionManager.getSession(request); assertThat(expired).isNull(); &#125;&#125; @PostMapping(&quot;/login&quot;)public String loginV2(@Valid @ModelAttribute LoginForm form, BindingResult bindingResult, HttpServletResponse response)&#123; log.info(&quot;Request Params : &#123;&#125;&quot;, form); if(bindingResult.hasErrors())&#123; return &quot;login/loginForm&quot;; &#125; Member loginMember = loginService.login(form.getLoginId(), form.getPassword()); if(loginMember == null)&#123; bindingResult.reject(&quot;loginFail&quot;, &quot;ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.&quot;); return &quot;login/loginForm&quot;; &#125; // ë¡œê·¸ì¸ ì„¤ê³µ ì²˜ë¦¬ TODO // ì„¸ì…˜ ê´€ë¦¬ìë¥¼ í†µí•´ ì„¸ì…˜ì„ ìƒì„±í•˜ê³ , íšŒì› ë°ì´í„° ë³´ê´€ // ì¿ í‚¤ì— ì‹œê°„ ì •ë³´ë¥¼ ì£¼ì§€ ì•Šìœ¼ë©´ ì„¸ì…˜ ì¿ í‚¤(ë¸Œë¼ì£¼ì–´ ì¢…ë£Œì‹œ ëª¨ë‘ ì¢…ë£Œ) sessionManager.createSession(loginMember, response); return &quot;redirect:/&quot;;&#125; @PostMapping(&quot;/logout&quot;)public String logoutV2(HttpServletRequest request)&#123; sessionManager.expire(request); return &quot;redirect:/&quot;;&#125; @GetMapping(&quot;/&quot;)public String homeLoginV2(HttpServletRequest request, Model model)&#123; // ì„¸ì…˜ ê´€ë¦¬ìì— ì €ì¥ëœ íšŒì› ì •ë³´ë¥¼ ì¡°íšŒ Member member = (Member) sessionManager.getSession(request); // ë¡œê·¸ì¸ if(member == null)&#123; return &quot;home&quot; &#125; model.addAttribute(&quot;member&quot;, member); return &quot;loginHome&quot;;&#125; No newline at end of file","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"}],"tags":[]},{"title":"Spring Boot - Cookie ì‚¬ìš©í•˜ê¸°","slug":"spring/spring-framework/cookie/springboot-cookie","date":"2021-10-03T01:39:59.000Z","updated":"2024-11-27T02:00:28.613Z","comments":true,"path":"2021/10/03/spring/spring-framework/cookie/springboot-cookie/","link":"","permalink":"https://ckck803.github.io/2021/10/03/spring/spring-framework/cookie/springboot-cookie/","excerpt":"ëª©ì°¨ Spring Boot - HttpSession ì‚¬ìš©í•˜ê¸° Spring Boot - ì§ì ‘ Session Storage êµ¬í˜„í•˜ê¸° Spring Boot - Cookie ì‚¬ìš©í•˜ê¸° ì¿ í‚¤ ìƒì„±ìŠ¤í”„ë§ì—ì„œ ì¿ í‚¤ëŠ” Cookie ë¥¼ ì´ìš©í•´ ì‰½ê²Œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒì„±í•œ ì¿ í‚¤ë¥¼ Client ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°ë¡œ HttpServletResponse ê°ì²´ë¥¼ ì¶”ê°€í•œ í›„ HttpServletResponse ê°ì²´ì— ìƒì„±í•œ ì¿ í‚¤ë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤. @GetMapping(&quot;/cookie/create&quot;)public ResponseEntity&lt;String&gt; helloCookie(HttpServletResponse httpServletResponse) &#123; Cookie cookie = new Cookie(&quot;helloCookie&quot;, URLEncoder.encode(&quot;Hello world&quot;, StandardCharsets.UTF_8)); httpServletResponse.addCookie(cookie); return ResponseEntity.ok().body(&quot;Create Cookie&quot;);&#125; ì¿ í‚¤ ìƒì„± í…ŒìŠ¤íŠ¸@Testvoid CookieTest() throws Exception &#123; ResultActions resultActions = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/cookie/create&quot;)) .andExpect(status().isOk()) .andExpect(cookie().exists(&quot;helloCookie&quot;)) .andExpect(cookie().value(&quot;helloCookie&quot;, &quot;Hello+world&quot;)) .andDo(print());&#125; TestRestTemplate ì„ ì´ìš©í•´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤. Client ë¡œ ì „ë‹¬ëœ ì¿ í‚¤ëŠ” Response Header ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. @LocalServerPortprivate int port;@Autowiredprivate TestRestTemplate restTemplate;@Testvoid helloCookie() &#123; String url = &quot;http://localhost:&quot; + port + &quot;/cookie/create&quot;; // í…ŒìŠ¤íŠ¸í•  ì—”ë“œí¬ì¸íŠ¸ URL // REST API í˜¸ì¶œ ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(url, String.class); // ì‘ë‹µ í—¤ë”ì—ì„œ ì¿ í‚¤ ì •ë³´ ê°€ì ¸ì˜¤ê¸° HttpHeaders headers = response.getHeaders(); List&lt;String&gt; cookies = headers.get(HttpHeaders.SET_COOKIE); assertThat(response.getBody()).isEqualTo(&quot;Create Cookie&quot;); assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK); for (String cookie : cookies) &#123; System.out.println(&quot;cookie = &quot; + cookie); assertThat(cookie.contains(&quot;helloCookie&quot;)).isTrue(); &#125;&#125;","text":"ëª©ì°¨ Spring Boot - HttpSession ì‚¬ìš©í•˜ê¸° Spring Boot - ì§ì ‘ Session Storage êµ¬í˜„í•˜ê¸° Spring Boot - Cookie ì‚¬ìš©í•˜ê¸° ì¿ í‚¤ ìƒì„±ìŠ¤í”„ë§ì—ì„œ ì¿ í‚¤ëŠ” Cookie ë¥¼ ì´ìš©í•´ ì‰½ê²Œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒì„±í•œ ì¿ í‚¤ë¥¼ Client ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°ë¡œ HttpServletResponse ê°ì²´ë¥¼ ì¶”ê°€í•œ í›„ HttpServletResponse ê°ì²´ì— ìƒì„±í•œ ì¿ í‚¤ë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤. @GetMapping(&quot;/cookie/create&quot;)public ResponseEntity&lt;String&gt; helloCookie(HttpServletResponse httpServletResponse) &#123; Cookie cookie = new Cookie(&quot;helloCookie&quot;, URLEncoder.encode(&quot;Hello world&quot;, StandardCharsets.UTF_8)); httpServletResponse.addCookie(cookie); return ResponseEntity.ok().body(&quot;Create Cookie&quot;);&#125; ì¿ í‚¤ ìƒì„± í…ŒìŠ¤íŠ¸@Testvoid CookieTest() throws Exception &#123; ResultActions resultActions = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/cookie/create&quot;)) .andExpect(status().isOk()) .andExpect(cookie().exists(&quot;helloCookie&quot;)) .andExpect(cookie().value(&quot;helloCookie&quot;, &quot;Hello+world&quot;)) .andDo(print());&#125; TestRestTemplate ì„ ì´ìš©í•´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤. Client ë¡œ ì „ë‹¬ëœ ì¿ í‚¤ëŠ” Response Header ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. @LocalServerPortprivate int port;@Autowiredprivate TestRestTemplate restTemplate;@Testvoid helloCookie() &#123; String url = &quot;http://localhost:&quot; + port + &quot;/cookie/create&quot;; // í…ŒìŠ¤íŠ¸í•  ì—”ë“œí¬ì¸íŠ¸ URL // REST API í˜¸ì¶œ ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(url, String.class); // ì‘ë‹µ í—¤ë”ì—ì„œ ì¿ í‚¤ ì •ë³´ ê°€ì ¸ì˜¤ê¸° HttpHeaders headers = response.getHeaders(); List&lt;String&gt; cookies = headers.get(HttpHeaders.SET_COOKIE); assertThat(response.getBody()).isEqualTo(&quot;Create Cookie&quot;); assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK); for (String cookie : cookies) &#123; System.out.println(&quot;cookie = &quot; + cookie); assertThat(cookie.contains(&quot;helloCookie&quot;)).isTrue(); &#125;&#125; ì¿ í‚¤ ì‚­ì œì¿ í‚¤ë¥¼ ì§€ìš°ëŠ” ë°©ë²•ì€ setMaxAge ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì¿ í‚¤ ì‹œê°„ì„ ì—†ì• ë©´ ëœë‹¤. @GetMapping(&quot;/cookie/delete&quot;)public ResponseEntity&lt;String&gt; deleteCookie(HttpServletResponse httpServletResponse) &#123; Cookie cookie = new Cookie(&quot;helloCookie&quot;, null); // ì¿ í‚¤ ì‹œê°„ì„ ì—†ì• ë©´ Client ì—ì„œ ìë™ì ìœ¼ë¡œ ì¿ í‚¤ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. cookie.setMaxAge(0); httpServletResponse.addCookie(cookie); return ResponseEntity.ok().body(&quot;Delete Cookie&quot;);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Framework","slug":"Spring/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/"},{"name":"lifecycle","slug":"Spring/Spring-Framework/lifecycle","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/lifecycle/"}],"tags":[]},{"title":"ë°±ì¤€ 14592 - ì—°êµ¬ì†Œ","slug":"algorithm/baekjoon/BFS/14592-ì—°êµ¬ì†Œ","date":"2021-09-26T02:53:25.000Z","updated":"2024-11-28T13:59:36.301Z","comments":true,"path":"2021/09/26/algorithm/baekjoon/BFS/14592-ì—°êµ¬ì†Œ/","link":"","permalink":"https://ckck803.github.io/2021/09/26/algorithm/baekjoon/BFS/14592-%EC%97%B0%EA%B5%AC%EC%86%8C/","excerpt":"ë°±ì¤€ 14592 - ì—°êµ¬ì†Œhttps://www.acmicpc.net/problem/14592 ë¬¸ì œí’€ì´í•´ë‹¹ ë¬¸ì œì—ì„œëŠ” 3ê°€ì§€ ì…ë ¥ N, M, ì§€ë„ ëª¨ì–‘ì´ ì£¼ì–´ì§„ë‹¤. N : ì„¸ë¡œ í¬ê¸° M : ê°€ë¡œ í¬ê¸° ì§€ë„ ì •ë³´ ì§€ë„ ë‚´ ìƒíƒœëŠ” 3ê°€ì§€ ìƒíƒœê°€ ì¡´ì¬í•œë‹¤. 0 : ë¹ˆì¹¸ 1 : ë²½ 2 : ë°”ì´ëŸ¬ìŠ¤ ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰ê³„íšì€ ë‹¤ìŒê³¼ ê°™ì´ ì§„í–‰í•œë‹¤. ë²½ì„ ì„¸ìš´ë‹¤. ë°”ì´ëŸ¬ìŠ¤ í™•ì‚° ì‹œí‚¨ë‹¤. ë°”ì´ëŸ¬ìŠ¤ ì˜ì—­ì„ í™•ì¸í•œë‹¤.","text":"ë°±ì¤€ 14592 - ì—°êµ¬ì†Œhttps://www.acmicpc.net/problem/14592 ë¬¸ì œí’€ì´í•´ë‹¹ ë¬¸ì œì—ì„œëŠ” 3ê°€ì§€ ì…ë ¥ N, M, ì§€ë„ ëª¨ì–‘ì´ ì£¼ì–´ì§„ë‹¤. N : ì„¸ë¡œ í¬ê¸° M : ê°€ë¡œ í¬ê¸° ì§€ë„ ì •ë³´ ì§€ë„ ë‚´ ìƒíƒœëŠ” 3ê°€ì§€ ìƒíƒœê°€ ì¡´ì¬í•œë‹¤. 0 : ë¹ˆì¹¸ 1 : ë²½ 2 : ë°”ì´ëŸ¬ìŠ¤ ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰ê³„íšì€ ë‹¤ìŒê³¼ ê°™ì´ ì§„í–‰í•œë‹¤. ë²½ì„ ì„¸ìš´ë‹¤. ë°”ì´ëŸ¬ìŠ¤ í™•ì‚° ì‹œí‚¨ë‹¤. ë°”ì´ëŸ¬ìŠ¤ ì˜ì—­ì„ í™•ì¸í•œë‹¤. ì´ ë¬¸ì œì—ì„œëŠ” 3ê°€ì§€ ë²½ì„ ì–´ë–»ê²Œ ì„¸ìš¸ì§€ê°€ ê´€ê±´ì´ë‹¤. ë‹¤í–‰ì´ ì§€ë„ì˜ í¬ê¸°ëŠ” ìµœëŒ€ 8*8ì„ ê°–ê³  ì§€ë„ì˜ ë²½ì„ ì„¸ìš¸ ê²½ìš°ì˜ ìˆ˜ëŠ” 64C3ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê°–ëŠ”ë‹¤. ì§€ë„ì˜ ë²½ì„ ì„¸ìš°ëŠ” ê²½ìš°ì˜ ìˆ˜ * ì§€ë„ íƒìƒ‰ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê³„ì‚°í•˜ë©´ ìµœëŒ€ 260ë§Œì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°–ê²Œ ë˜ë¯€ë¡œ ë¸Œë£¨íŠ¸ í¬ìŠ¤ ë°©ì‹ìœ¼ë¡œ ë²½ì„ ì„¸ì›Œì„œ í™•ì¸í•´ë„ ì¶©ë¶„íˆ ì‹œê°„ë‚´ì— í•´ê²°í•  ìˆ˜ ìˆë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œimport java.io.*;import java.util.*;public class Main &#123; public static int maxValue = 0; public static int[] dy = &#123; 1, -1, 0, 0 &#125;; public static int[] dx = &#123; 0, 0, 1, -1 &#125;; public static void findVirus(int N, int M, int[][] lab) &#123; int count = 0; for (int i = 0; i &lt; N; i++) &#123; for (int j = 0; j &lt; M; j++) &#123; if (lab[i][j] == 0) &#123; count++; &#125; &#125; &#125; if (count &gt; maxValue) &#123; maxValue = count; &#125; &#125; public static void bfs(int N, int M, int[][] lab) &#123; Queue&lt;int[]&gt; q = new LinkedList(); boolean[][] check = new boolean[N][M]; for (int i = 0; i &lt; N; i++) &#123; for (int j = 0; j &lt; M; j++) &#123; if (lab[i][j] == 2) &#123; check[i][j] = true; q.add(new int[] &#123; i, j &#125;); &#125; &#125; &#125; while (!q.isEmpty()) &#123; int[] front = q.remove(); int cntY = front[0]; int cntX = front[1]; for (int i = 0; i &lt; 4; i++) &#123; int ny = cntY + dy[i]; int nx = cntX + dx[i]; if (0 &gt; ny || ny &gt;= N || 0 &gt; nx || nx &gt;= M) &#123; continue; &#125; if (lab[ny][nx] == 0 &amp;&amp; check[ny][nx] == false) &#123; lab[ny][nx] = 2; check[ny][nx] = true; q.add(new int[] &#123; ny, nx &#125;); &#125; &#125; &#125; &#125; public static void copyLab(int[][] copiedLab, int[][] lab, int N, int M) &#123; for (int i = 0; i &lt; N; i++) &#123; for (int j = 0; j &lt; M; j++) &#123; copiedLab[i][j] = lab[i][j]; &#125; &#125; &#125; public static void makeWall(int N, int M, int[][] lab, int depth) &#123; if (depth == 3) &#123; int[][] copiedLab = new int[N][M]; copyLab(copiedLab, lab, N, M); bfs(N, M, lab); findVirus(N, M, lab); copyLab(lab, copiedLab, N, M); return; &#125; for (int i = 0; i &lt; N; i++) &#123; for (int j = 0; j &lt; M; j++) &#123; if (lab[i][j] != 0) &#123; continue; &#125; lab[i][j] = 1; makeWall(N, M, lab, depth + 1); lab[i][j] = 0; &#125; &#125; &#125; public static void main(String[] args) throws IOException &#123; BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); String[] inputs = br.readLine().split(&quot; &quot;); int N, M; N = Integer.parseInt(inputs[0]); M = Integer.parseInt(inputs[1]); int[][] lab = new int[N][M]; for (int i = 0; i &lt; N; i++) &#123; inputs = br.readLine().split(&quot; &quot;); for (int j = 0; j &lt; M; j++) &#123; lab[i][j] = Integer.parseInt(inputs[j]); &#125; &#125; makeWall(N, M, lab, 0); System.out.println(maxValue); &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"BFS","slug":"Develop/Beakjoon/BFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/BFS/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"},{"name":"beakjoon","slug":"beakjoon","permalink":"https://ckck803.github.io/tags/beakjoon/"}]},{"title":"ë°±ì¤€ 1158 - ìš”ì„¸í‘¸ìŠ¤ ë¬¸ì œ","slug":"algorithm/baekjoon/á„Œá…¡á„…á…­á„€á…®á„Œá…©/á„…á…µá„‰á…³á„á…³/1158-ìš”ì„¸í‘¸ìŠ¤ë¬¸ì œ","date":"2021-09-26T01:53:25.000Z","updated":"2024-11-28T13:59:36.526Z","comments":true,"path":"2021/09/26/algorithm/baekjoon/á„Œá…¡á„…á…­á„€á…®á„Œá…©/á„…á…µá„‰á…³á„á…³/1158-ìš”ì„¸í‘¸ìŠ¤ë¬¸ì œ/","link":"","permalink":"https://ckck803.github.io/2021/09/26/algorithm/baekjoon/%E1%84%8C%E1%85%A1%E1%84%85%E1%85%AD%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9/%E1%84%85%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3/1158-%EC%9A%94%EC%84%B8%ED%91%B8%EC%8A%A4%EB%AC%B8%EC%A0%9C/","excerpt":"ë°±ì¤€ 1158 - ìš”ì„¸í‘¸ìŠ¤ ë¬¸ì œhttps://www.acmicpc.net/problem/1158 ë¬¸ì œ í’€ì´í•´ë‹¹ ë¬¸ì œì—ì„œëŠ” ë‘ê°€ì§€ ì…ë ¥ N, Kê°€ ì£¼ì–´ì§„ë‹¤. N : ì‚¬ëŒ ìˆ˜ K : ì›ì—ì„œ ì‚¬ëŒì´ ì œê±°ë˜ëŠ” ê°„ê²© N, Kì˜ ìµœëŒ€ 5000 ì´ë¯€ë¡œ, ìµœëŒ€ O(N^2)ì˜ ì‹œê°„ë³µì¡ë„ë‚´ì—ì„œ ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼ í•œë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œimport java.io.*;import java.util.*;public class Main &#123; public static void main(String[] args) throws IOException &#123; BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); String[] arguments = br.readLine().split(&quot; &quot;); int N, K; N = Integer.parseInt(arguments[0]); K = Integer.parseInt(arguments[1]); List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; N; i++) &#123; list.add(i + 1); &#125; int index = 0; StringBuilder sb = new StringBuilder(); sb.append(&quot;&lt;&quot;); // ì‚¬ëŒì„ ê°„ê²©ì— ë§ê²Œ í•˜ë‚˜ì”© ì œê±°í•´ì¤€ë‹¤. while (list.size() &gt; 1) &#123; index += K - 1; index %= list.size(); int removedValue = list.remove(index); sb.append(Integer.toString(removedValue)); sb.append(&quot;, &quot;); &#125; // ë§ˆì§€ë§‰ ìˆ«ìë¥¼ ì œê±°í•œë‹¤. index += K - 1; index %= list.size(); int removedValue = list.remove(index); sb.append(Integer.toString(removedValue)); sb.append(&quot;&gt;&quot;); System.out.println(sb.toString()); br.close(); &#125;&#125;","text":"ë°±ì¤€ 1158 - ìš”ì„¸í‘¸ìŠ¤ ë¬¸ì œhttps://www.acmicpc.net/problem/1158 ë¬¸ì œ í’€ì´í•´ë‹¹ ë¬¸ì œì—ì„œëŠ” ë‘ê°€ì§€ ì…ë ¥ N, Kê°€ ì£¼ì–´ì§„ë‹¤. N : ì‚¬ëŒ ìˆ˜ K : ì›ì—ì„œ ì‚¬ëŒì´ ì œê±°ë˜ëŠ” ê°„ê²© N, Kì˜ ìµœëŒ€ 5000 ì´ë¯€ë¡œ, ìµœëŒ€ O(N^2)ì˜ ì‹œê°„ë³µì¡ë„ë‚´ì—ì„œ ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼ í•œë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œimport java.io.*;import java.util.*;public class Main &#123; public static void main(String[] args) throws IOException &#123; BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); String[] arguments = br.readLine().split(&quot; &quot;); int N, K; N = Integer.parseInt(arguments[0]); K = Integer.parseInt(arguments[1]); List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; N; i++) &#123; list.add(i + 1); &#125; int index = 0; StringBuilder sb = new StringBuilder(); sb.append(&quot;&lt;&quot;); // ì‚¬ëŒì„ ê°„ê²©ì— ë§ê²Œ í•˜ë‚˜ì”© ì œê±°í•´ì¤€ë‹¤. while (list.size() &gt; 1) &#123; index += K - 1; index %= list.size(); int removedValue = list.remove(index); sb.append(Integer.toString(removedValue)); sb.append(&quot;, &quot;); &#125; // ë§ˆì§€ë§‰ ìˆ«ìë¥¼ ì œê±°í•œë‹¤. index += K - 1; index %= list.size(); int removedValue = list.remove(index); sb.append(Integer.toString(removedValue)); sb.append(&quot;&gt;&quot;); System.out.println(sb.toString()); br.close(); &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ìë£Œêµ¬ì¡°","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/"},{"name":"List","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°/List","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/List/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"},{"name":"beakjoon","slug":"beakjoon","permalink":"https://ckck803.github.io/tags/beakjoon/"}]},{"title":"Spring Boot - Resource ì¶”ìƒí™”","slug":"spring/spring-resource/resource","date":"2021-09-20T14:39:59.000Z","updated":"2024-11-27T02:00:27.513Z","comments":true,"path":"2021/09/20/spring/spring-resource/resource/","link":"","permalink":"https://ckck803.github.io/2021/09/20/spring/spring-resource/resource/","excerpt":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring boot Resource ì¶”ìƒí™”https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/resources.html Resource ëŠ” java.net.URL ì„ ì¶”ìƒí™” í•´ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ Low-Levelì— ìˆëŠ” ìì›ì— ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤ ClassPathë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥ì˜ ë¶€ì¬ ServletContextë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìƒëŒ€ ê²½ë¡œë¥¼ ì½ì–´ì˜¤ëŠ” ê¸°ëŠ¥ì˜ ë¶€ì¬ Resource.java public interface Resource extends InputStreamSource &#123; boolean exists(); URL getURL() throws IOException; URI getURI() throws IOException; File getFile() throws IOException; long contentLength() throws IOException; long lastModified() throws IOException; Resource createRelative(String relativePath) throws IOException; @Nullable String getFilename(); String getDescription(); default boolean isReadable() &#123; return exists(); &#125; default boolean isOpen() &#123; return false; &#125; default boolean isFile() &#123; return false; &#125; default ReadableByteChannel readableChannel() throws IOException &#123; return Channels.newChannel(getInputStream()); &#125;&#125; Resource êµ¬í˜„ì²´","text":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring boot Resource ì¶”ìƒí™”https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/resources.html Resource ëŠ” java.net.URL ì„ ì¶”ìƒí™” í•´ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ Low-Levelì— ìˆëŠ” ìì›ì— ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤ ClassPathë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥ì˜ ë¶€ì¬ ServletContextë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìƒëŒ€ ê²½ë¡œë¥¼ ì½ì–´ì˜¤ëŠ” ê¸°ëŠ¥ì˜ ë¶€ì¬ Resource.java public interface Resource extends InputStreamSource &#123; boolean exists(); URL getURL() throws IOException; URI getURI() throws IOException; File getFile() throws IOException; long contentLength() throws IOException; long lastModified() throws IOException; Resource createRelative(String relativePath) throws IOException; @Nullable String getFilename(); String getDescription(); default boolean isReadable() &#123; return exists(); &#125; default boolean isOpen() &#123; return false; &#125; default boolean isFile() &#123; return false; &#125; default ReadableByteChannel readableChannel() throws IOException &#123; return Channels.newChannel(getInputStream()); &#125;&#125; Resource êµ¬í˜„ì²´ UrlResource ClassPathResource FileSystemResource ServletContextResource UrlResource URLì„ ê¸°ì¤€ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì½ì–´ë“¤ì´ê³ , ìì›ì— ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì— ë”°ë¼ Prefix ë¥¼ ë¶™ì¸ë‹¤. File Systemì˜ ê²½ìš° file: Prefixë¥¼ ì´ìš© Http ë¥¼ ì´ìš©í•´ ìì›ì— ì ‘ê·¼í•  ê²½ìš° http: Prefixë¥¼ ì´ìš© FTP ë¥¼ ì´ìš©í•´ ìì›ì— ì ‘ê·¼í•  ê²½ìš° ftp: Prefixë¥¼ ì´ìš© ClassPathResource Class Loaderë¥¼ ì‚¬ìš©í•´ classpath ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì½ì–´ë“¤ì´ëŠ” ë°©ì‹ FileSystemResource FileSystemResourceLoader ë¥¼ ì‚¬ìš©í•´ File Systemì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ì½ì–´ë“¤ì´ëŠ” ë°©ì‹ ServletContextResource ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë£¨íŠ¸ì—ì„œ ìƒëŒ€ ê²½ë¡œë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ëŠ”ë‹¤. Spring Boot ì—ì„œ ì§€ì›í•˜ëŠ” ë‚´ì¥í˜• í†°ìº£ì—ì„œëŠ” ê¸°ë³¸ Context Pathê°€ ì§€ì • ë¼ ìˆì§€ ì•Šë‹¤. ì½”ë“œë¥¼ í†µí•´ í™•ì¸í•˜ê¸°Resource ê°ì²´ ë³´ë‚´ê¸°ClassPathResource ë¥¼ ì´ìš©í•´ /src/test/resource ì— ì €ì¥ëœ testFile.txt íŒŒì¼ì„ ê°€ì ¸ì™€ ì„œë²„ìª½ìœ¼ë¡œ ë³´ë‚´ëŠ” ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤. @Testpublic void uploadTest() throws IOException &#123; // ClassPathResource ë¥¼ ì´ìš©í•´ testFile.txt íŒŒì¼ì„ ì½ì–´ì˜¨ë‹¤. ClassPathResource resource = new ClassPathResource(&quot;testFile.txt&quot;); File file = resource.getFile(); MultiValueMap multiValueMap = new LinkedMultiValueMap(); multiValueMap.add(&quot;file&quot;, resource); // íŒŒì¼ì„ ë³´ë‚´ê¸° ìœ„í•´ Http Header Content Typeì„ MULTIPART_FORM_DATA ë¡œ ì„¤ì •í•´ì¤€ë‹¤. HttpHeaders headers = new HttpHeaders(); headers.setContentType(MediaType.MULTIPART_FORM_DATA); // HttpEntity ì— Resource ê°ì²´ë¥¼ ê°–ê³  ìˆëŠ” MultiValueMap ê°ì²´ë¥¼ ë„£ì–´ì¤€ë‹¤. HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; httpEntity = new HttpEntity(multiValueMap, headers); String requestURL = &quot;http://localhost:&quot; + randomServerPort + &quot;/file/upload&quot;; ResponseEntity&lt;String&gt; responseEntity = this.testRestTemplate.exchange(requestURL, HttpMethod.POST, httpEntity, new ParameterizedTypeReference&lt;String&gt;() &#123; &#125;); assertThat(responseEntity.getStatusCode()).isEqualTo(HttpStatus.CREATED); assertThat(responseEntity.getBody()).isEqualTo(&quot;File Upload Success&quot;);&#125; Resource ê°ì²´ ë°˜í™˜í•˜ê¸°ë‘ ë²ˆì§¸ ì˜ˆì‹œë¡œ MultipartFile ê°ì²´ë¥¼ ë°›ì•„ ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¨ í›„ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ì‹œ ë°˜í™˜í•˜ëŠ” ë¡œì§ì„ ì‘ì„±í–ˆë‹¤. @PostMapping(&quot;/file/upload2&quot;)public ResponseEntity&lt;Resource&gt; upload2(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws IOException &#123; if(multipartFile.isEmpty())&#123; log.info(&quot;File is empty&quot;); &#125; // MultipartFile ê°ì²´ì— ì €ì¥ëœ Resource ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. Resource resource = multipartFile.getResource(); // Http Header ì— contentDisposition ì˜µì…˜ì„ ì¶”ê°€í•´ì¤€ë‹¤. ContentDisposition contentDisposition = ContentDisposition.builder(&quot;attachment&quot;) .filename(multipartFile.getOriginalFilename()) .build(); HttpHeaders httpHeaders = new HttpHeaders(); httpHeaders.setContentDisposition(contentDisposition); return ResponseEntity.ok() .headers(httpHeaders) .body(resource);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"File","slug":"Spring/Spring-Boot/File","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/File/"}],"tags":[]},{"title":"Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸°","slug":"spring/spring-resource/file-upload-4","date":"2021-09-19T22:39:59.000Z","updated":"2024-11-27T02:00:27.258Z","comments":true,"path":"2021/09/20/spring/spring-resource/file-upload-4/","link":"","permalink":"https://ckck803.github.io/2021/09/20/spring/spring-resource/file-upload-4/","excerpt":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•œ HTTP í•´ë”ì„œë²„ì— ì €ì¥ëœ íŒŒì¼ì„ ë‹¤ìš´ ë°›ê¸° ìœ„í•´ì„œëŠ” Response í•´ë”ì— Content-Disposition ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤. Content-Disposition ëŠ” HTTP í”„ë¡œí† ì½œì—ì„œ ì‚¬ìš©ë˜ëŠ” í—¤ë”ë¡œ, ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì œê³µí•˜ëŠ” ì½˜í…ì¸ ê°€ ë¸Œë¼ìš°ì €ì— í‘œì‹œë ì§€ ë˜ëŠ” ë‹¤ìš´ë¡œë“œí• ì§€, ê·¸ë¦¬ê³  ë‹¤ìš´ë¡œë“œë  ê²½ìš° íŒŒì¼ ì´ë¦„ì€ ë¬´ì—‡ì¸ì§€ ë“±ì„ ì§€ì •í•©ë‹ˆë‹¤. Content-Disposition ëŠ” inline, attachment ë‘ ê°€ì§€ ì¢…ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤. Content-Disposition ê°’ì´ inline ë©´ ì½˜í…ì¸ ê°€ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í‘œì‹œë©ë‹ˆë‹¤. attachment ë©´ ì½˜í…ì¸ ê°€ ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•œ íŒŒì¼ë¡œ ì œê³µë©ë‹ˆë‹¤. filename ì†ì„±ì„ ì´ìš©í•˜ë©´ ë‹¤ìš´ë¡œë“œí•˜ê¸° ìœ„í•œ íŒŒì¼ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. // Content-Disposition ê°’ì´ inline ì¼ ê²½ìš° ë¸Œë¼ìš°ì €ì— ì§ì ‘ í‘œì‹œë©ë‹ˆë‹¤.Content-Disposition: inline// attachment ì¼ ê²½ìš° ë¦¬ì†ŒìŠ¤ë¥¼ íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. filename ì†ì„±ì„ í†µí•´ íŒŒì¼ ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.Content-Disposition: attachment; filename=&quot;example.txt&quot; ë¦¬ì†ŒìŠ¤ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” Response ê°ì²´ì— Content-Disposition í•´ë”ë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.","text":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•œ HTTP í•´ë”ì„œë²„ì— ì €ì¥ëœ íŒŒì¼ì„ ë‹¤ìš´ ë°›ê¸° ìœ„í•´ì„œëŠ” Response í•´ë”ì— Content-Disposition ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤. Content-Disposition ëŠ” HTTP í”„ë¡œí† ì½œì—ì„œ ì‚¬ìš©ë˜ëŠ” í—¤ë”ë¡œ, ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì œê³µí•˜ëŠ” ì½˜í…ì¸ ê°€ ë¸Œë¼ìš°ì €ì— í‘œì‹œë ì§€ ë˜ëŠ” ë‹¤ìš´ë¡œë“œí• ì§€, ê·¸ë¦¬ê³  ë‹¤ìš´ë¡œë“œë  ê²½ìš° íŒŒì¼ ì´ë¦„ì€ ë¬´ì—‡ì¸ì§€ ë“±ì„ ì§€ì •í•©ë‹ˆë‹¤. Content-Disposition ëŠ” inline, attachment ë‘ ê°€ì§€ ì¢…ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤. Content-Disposition ê°’ì´ inline ë©´ ì½˜í…ì¸ ê°€ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í‘œì‹œë©ë‹ˆë‹¤. attachment ë©´ ì½˜í…ì¸ ê°€ ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•œ íŒŒì¼ë¡œ ì œê³µë©ë‹ˆë‹¤. filename ì†ì„±ì„ ì´ìš©í•˜ë©´ ë‹¤ìš´ë¡œë“œí•˜ê¸° ìœ„í•œ íŒŒì¼ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. // Content-Disposition ê°’ì´ inline ì¼ ê²½ìš° ë¸Œë¼ìš°ì €ì— ì§ì ‘ í‘œì‹œë©ë‹ˆë‹¤.Content-Disposition: inline// attachment ì¼ ê²½ìš° ë¦¬ì†ŒìŠ¤ë¥¼ íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. filename ì†ì„±ì„ í†µí•´ íŒŒì¼ ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.Content-Disposition: attachment; filename=&quot;example.txt&quot; ë¦¬ì†ŒìŠ¤ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” Response ê°ì²´ì— Content-Disposition í•´ë”ë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤. String contentDisposition = &quot;attachment; filename=\\&quot;&quot; + encodedUploadFileName + &quot;\\&quot;&quot;; Resource ê°ì²´ë¡œ ì—…ë¡œë“œëœ íŒŒì¼ì„ ì „ì†¡í•œë‹¤. UrlResource ê°ì²´ë¥¼ ì´ìš©í•´ íŠ¹ì • ê²½ë¡œì— ì €ì¥ëœ Resource ë¥¼ ê°€ì ¸ì˜¨ í›„ ResponseEntity ì˜ Bodyì— ë„£ì–´ì„œ ë°˜í™˜í•œë‹¤. @GetMapping(&quot;/attach/&#123;itemId&#125;&quot;)public ResponseEntity&lt;Resource&gt; downloadAttach(@PathVariable Long itemId) throws MalformedURLException &#123; Item item = itemRepository.findById(itemId); String storeFileName = item.getAttachFile().getStoreFileName(); String uploadFileName = item.getAttachFile().getUploadFileName(); UrlResource resource = new UrlResource(&quot;file:&quot; + fileStore.getFullPath(storeFileName)); log.info(&quot;uploadFileName=&#123;&#125;&quot;, uploadFileName); String encodedUploadFileName = UriUtils.encode(uploadFileName, StandardCharsets.UTF_8); String contentDisposition = &quot;attachment; filename=\\&quot;&quot; + encodedUploadFileName + &quot;\\&quot;&quot;; return ResponseEntity.ok() .header(HttpHeaders.CONTENT_DISPOSITION, contentDisposition) .body(resource);&#125; ì „ì²´ ì½”ë“œ@Slf4j@Controller@RequiredArgsConstructorpublic class ItemController &#123; private final ItemRepository itemRepository; private final FileStore fileStore; @GetMapping(&quot;/items/new&quot;) public String newItem(@ModelAttribute ItemForm form) &#123; return &quot;item-form&quot;; &#125; @PostMapping(&quot;/items/new&quot;) public String saveItem(@ModelAttribute ItemForm form, RedirectAttributes redirectAttributes) throws IOException &#123; UploadFile attachFile = fileStore.storeFile(form.getAttachFile()); List&lt;UploadFile&gt; storeImageFiles = fileStore.storeFiles(form.getImageFiles()); //ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ Item item = new Item(); item.setItemName(form.getItemName()); item.setAttachFile(attachFile); item.setImageFiles(storeImageFiles); itemRepository.save(item); redirectAttributes.addAttribute(&quot;itemId&quot;, item.getId()); return &quot;redirect:/items/&#123;itemId&#125;&quot;; &#125; @GetMapping(&quot;/items/&#123;id&#125;&quot;) public String items(@PathVariable Long id, Model model) &#123; Item item = itemRepository.findById(id); model.addAttribute(&quot;item&quot;, item); return &quot;item-view&quot;; &#125; @ResponseBody @GetMapping(&quot;/images/&#123;filename&#125;&quot;) public Resource downloadImage(@PathVariable String filename) throws MalformedURLException &#123; return new UrlResource(&quot;file:&quot; + fileStore.getFullPath(filename)); &#125; @GetMapping(&quot;/attach/&#123;itemId&#125;&quot;) public ResponseEntity&lt;Resource&gt; downloadAttach(@PathVariable Long itemId) throws MalformedURLException &#123; Item item = itemRepository.findById(itemId); String storeFileName = item.getAttachFile().getStoreFileName(); String uploadFileName = item.getAttachFile().getUploadFileName(); UrlResource resource = new UrlResource(&quot;file:&quot; + fileStore.getFullPath(storeFileName)); log.info(&quot;uploadFileName=&#123;&#125;&quot;, uploadFileName); String encodedUploadFileName = UriUtils.encode(uploadFileName, StandardCharsets.UTF_8); String contentDisposition = &quot;attachment; filename=\\&quot;&quot; + encodedUploadFileName + &quot;\\&quot;&quot;; return ResponseEntity.ok() .header(HttpHeaders.CONTENT_DISPOSITION, contentDisposition) .body(resource); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"File","slug":"Spring/Spring-Boot/File","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/File/"}],"tags":[]},{"title":"Spring Cloud - 33. Order Kafka Producer","slug":"spring/spring-cloud/kafka/spring-cloud-33","date":"2021-09-19T18:31:31.000Z","updated":"2024-02-26T15:34:29.891Z","comments":true,"path":"2021/09/20/spring/spring-cloud/kafka/spring-cloud-33/","link":"","permalink":"https://ckck803.github.io/2021/09/20/spring/spring-cloud/kafka/spring-cloud-33/","excerpt":"ëª©ì°¨ Spring Cloud - 33. Order Kafka Producer Spring Cloud - 32. kafka-mariadb ì—°ê²° Spring Cloud - 31. Kafka Topic ì ìš© Order Kafka Producer@RestController@RequestMapping(&quot;/order-service/&quot;)@RequiredArgsConstructorpublic class OrderController &#123; private final OrderService orderService; private final KafkaProducer kafkaProducer; private final OrderProducer orderProducer; @PostMapping(value = &quot;/&#123;userId&#125;/orders&quot;) public ResponseEntity&lt;ResponseOrder&gt; createOrder(@PathVariable(&quot;userId&quot;) String userId, @RequestBody RequestOrder orderDetails)&#123; ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); OrderDto orderDto = modelMapper.map(orderDetails, OrderDto.class); orderDto.setUserId(userId); orderDto.setOrderId(UUID.randomUUID().toString()); orderDto.setTotalPrice(orderDetails.getQty() * orderDetails.getUnitPrice()); ResponseOrder returnValue = modelMapper.map(orderDto, ResponseOrder.class); kafkaProducer.send(&quot;example-order-topic&quot;, orderDto); orderProducer.send(&quot;orders&quot;, orderDto); return ResponseEntity.status(HttpStatus.CREATED).body(returnValue); &#125; @GetMapping(value = &quot;/&#123;userId&#125;/orders&quot;) public ResponseEntity&lt;List&lt;ResponseOrder&gt;&gt; getOrder(@PathVariable(&quot;userId&quot;) String userId)&#123; Iterable&lt;OrderEntity&gt; orderList = orderService.getOrdersByUserId(userId); List&lt;ResponseOrder&gt; result = new ArrayList&lt;&gt;(); orderList.forEach(v -&gt; &#123; result.add(new ModelMapper().map(v, ResponseOrder.class)); &#125;); return ResponseEntity.status(HttpStatus.OK).body(result); &#125;&#125; @Service@Slf4j@RequiredArgsConstructorpublic class OrderProducer &#123; private final KafkaTemplate&lt;String, String&gt; kafkaTemplate; public OrderDto send(String topic, OrderDto orderDto)&#123; ObjectMapper mapper = new ObjectMapper(); String jsonInString = &quot;&quot;; try&#123; jsonInString = mapper.writeValueAsString(orderDto); &#125;catch (JsonProcessingException ex)&#123; ex.printStackTrace(); &#125; kafkaTemplate.send(topic, jsonInString); log.info(&quot;Kafka Producer sent data from the Order microservice: &quot; + orderDto); return orderDto; &#125;&#125; @Data@Builderpublic class Scheme &#123; private String type; private List&lt;Field&gt; fields; private boolean optional; private String name;&#125; @Data@AllArgsConstructorpublic class Field &#123; private String type; private boolean optional; private String field;&#125; @Data@Builderpublic class Payload &#123; private String order_id; private String user_id; private String product_id; private int qty; private int unit_price; private int total_price;&#125; @Data@AllArgsConstructorpublic class KafkaOrderDto implements Serializable &#123; private Scheme scheme; private Payload payload;&#125;","text":"ëª©ì°¨ Spring Cloud - 33. Order Kafka Producer Spring Cloud - 32. kafka-mariadb ì—°ê²° Spring Cloud - 31. Kafka Topic ì ìš© Order Kafka Producer@RestController@RequestMapping(&quot;/order-service/&quot;)@RequiredArgsConstructorpublic class OrderController &#123; private final OrderService orderService; private final KafkaProducer kafkaProducer; private final OrderProducer orderProducer; @PostMapping(value = &quot;/&#123;userId&#125;/orders&quot;) public ResponseEntity&lt;ResponseOrder&gt; createOrder(@PathVariable(&quot;userId&quot;) String userId, @RequestBody RequestOrder orderDetails)&#123; ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); OrderDto orderDto = modelMapper.map(orderDetails, OrderDto.class); orderDto.setUserId(userId); orderDto.setOrderId(UUID.randomUUID().toString()); orderDto.setTotalPrice(orderDetails.getQty() * orderDetails.getUnitPrice()); ResponseOrder returnValue = modelMapper.map(orderDto, ResponseOrder.class); kafkaProducer.send(&quot;example-order-topic&quot;, orderDto); orderProducer.send(&quot;orders&quot;, orderDto); return ResponseEntity.status(HttpStatus.CREATED).body(returnValue); &#125; @GetMapping(value = &quot;/&#123;userId&#125;/orders&quot;) public ResponseEntity&lt;List&lt;ResponseOrder&gt;&gt; getOrder(@PathVariable(&quot;userId&quot;) String userId)&#123; Iterable&lt;OrderEntity&gt; orderList = orderService.getOrdersByUserId(userId); List&lt;ResponseOrder&gt; result = new ArrayList&lt;&gt;(); orderList.forEach(v -&gt; &#123; result.add(new ModelMapper().map(v, ResponseOrder.class)); &#125;); return ResponseEntity.status(HttpStatus.OK).body(result); &#125;&#125; @Service@Slf4j@RequiredArgsConstructorpublic class OrderProducer &#123; private final KafkaTemplate&lt;String, String&gt; kafkaTemplate; public OrderDto send(String topic, OrderDto orderDto)&#123; ObjectMapper mapper = new ObjectMapper(); String jsonInString = &quot;&quot;; try&#123; jsonInString = mapper.writeValueAsString(orderDto); &#125;catch (JsonProcessingException ex)&#123; ex.printStackTrace(); &#125; kafkaTemplate.send(topic, jsonInString); log.info(&quot;Kafka Producer sent data from the Order microservice: &quot; + orderDto); return orderDto; &#125;&#125; @Data@Builderpublic class Scheme &#123; private String type; private List&lt;Field&gt; fields; private boolean optional; private String name;&#125; @Data@AllArgsConstructorpublic class Field &#123; private String type; private boolean optional; private String field;&#125; @Data@Builderpublic class Payload &#123; private String order_id; private String user_id; private String product_id; private int qty; private int unit_price; private int total_price;&#125; @Data@AllArgsConstructorpublic class KafkaOrderDto implements Serializable &#123; private Scheme scheme; private Payload payload;&#125; @Service@Slf4j@RequiredArgsConstructorpublic class OrderProducer &#123; private final KafkaTemplate&lt;String, String&gt; kafkaTemplate; List&lt;Field&gt; fields = Arrays.asList( new Field(&quot;String&quot;, true, &quot;order_id&quot;) , new Field(&quot;String&quot;, true, &quot;user_id&quot;) , new Field(&quot;String&quot;, true, &quot;product_id&quot;) , new Field(&quot;int32&quot;, true, &quot;qty&quot;) , new Field(&quot;int32&quot;, true, &quot;unit_price&quot;) , new Field(&quot;int32&quot;, true, &quot;total_price&quot;) ); Scheme scheme = Scheme.builder() .type(&quot;struct&quot;) .fields(fields) .optional(false) .name(&quot;orders&quot;) .build(); public OrderDto send(String topic, OrderDto orderDto)&#123; Payload payload = Payload.builder() .order_id(orderDto.getOrderId()) .user_id(orderDto.getUserId()) .product_id(orderDto.getProductId()) .qty(orderDto.getQty()) .unit_price(orderDto.getUnitPrice()) .total_price(orderDto.getTotalPrice()) .build(); KafkaOrderDto kafkaOrderDto = new KafkaOrderDto(scheme, payload); ObjectMapper mapper = new ObjectMapper(); String jsonInString = &quot;&quot;; try&#123; jsonInString = mapper.writeValueAsString(orderDto); &#125;catch (JsonProcessingException ex)&#123; ex.printStackTrace(); &#125; kafkaTemplate.send(topic, jsonInString); log.info(&quot;Kafka Producer sent data from the Order microservice: &quot; + orderDto); return orderDto; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Kafka","slug":"Spring/Spring-Cloud/Kafka","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Kafka/"}],"tags":[]},{"title":"Spring Cloud - 32. kafka-mariadb ì—°ê²°","slug":"spring/spring-cloud/kafka/spring-cloud-32","date":"2021-09-19T17:31:31.000Z","updated":"2024-02-26T15:34:21.872Z","comments":true,"path":"2021/09/20/spring/spring-cloud/kafka/spring-cloud-32/","link":"","permalink":"https://ckck803.github.io/2021/09/20/spring/spring-cloud/kafka/spring-cloud-32/","excerpt":"ëª©ì°¨ Spring Cloud - 33. Order Kafka Producer Spring Cloud - 32. kafka-mariadb ì—°ê²° Spring Cloud - 31. Kafka Topic ì ìš© Config// https://mvnrepository.com/artifact/org.mariadb.jdbc/mariadb-java-clientimplementation &#x27;org.mariadb.jdbc:mariadb-java-client&#x27; create table users( id int auto_increment primary key, user_id varchar(20), pwd varchar(20), name varchar(20), created_at datetime default NOW()); Kafka Connect ì„¤ì¹˜curl -O http://packages.confluent.io/archive/5.5/confluent-community-5.5.2-2.12.tar.gz curl -O http://packages.confluent.io/archive/6.1/confluent-community-6.1.0.tar.gz tar xvf confluent-community-6.1.0.tar.gz","text":"ëª©ì°¨ Spring Cloud - 33. Order Kafka Producer Spring Cloud - 32. kafka-mariadb ì—°ê²° Spring Cloud - 31. Kafka Topic ì ìš© Config// https://mvnrepository.com/artifact/org.mariadb.jdbc/mariadb-java-clientimplementation &#x27;org.mariadb.jdbc:mariadb-java-client&#x27; create table users( id int auto_increment primary key, user_id varchar(20), pwd varchar(20), name varchar(20), created_at datetime default NOW()); Kafka Connect ì„¤ì¹˜curl -O http://packages.confluent.io/archive/5.5/confluent-community-5.5.2-2.12.tar.gz curl -O http://packages.confluent.io/archive/6.1/confluent-community-6.1.0.tar.gz tar xvf confluent-community-6.1.0.tar.gz cd $KAFKA_CONNECT_HOME Kafka Connect ì‹¤í–‰./bin/connect-distributed ./etc/kafka/connect-distributed.properties JDBC Connector ì„¤ì¹˜- https://docs.confluent.io/5.5.1/connect/kafka-connect-jdbc/index.html - confluentinc-kafka-connect-jdbc-10.0.1.zip etc/kafka/connect-distributed.properties íŒŒì¼ ë§ˆì§€ë§‰ì— ì•„ë˜ plugin ì •ë³´ ì¶”ê°€- plugin.path=[confluentinc-kafka-connect-jdbc-10.0.1 í´ë”] JdbcSourceConnectorì—ì„œ MariaDB ì‚¬ìš©í•˜ê¸° ìœ„í•´ mariadb ë“œë¼ì´ë²„ ë³µì‚¬./share/java/kafka/ í´ë”ì— mariadb-java-client-2.7.2.jar íŒŒì¼ ë³µì‚¬ echo &#x27;&#123; &quot;name&quot; : &quot;my-source-connect&quot;, &quot;config&quot; : &#123; &quot;connector.class&quot; : &quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;, &quot;connection.url&quot;:&quot;jdbc:mysql://localhost:3306/mydb&quot;, &quot;connection.user&quot;:&quot;root&quot;, &quot;connection.password&quot;:&quot;test1357&quot;, &quot;mode&quot;: &quot;incrementing&quot;, &quot;incrementing.column.name&quot; : &quot;id&quot;, &quot;table.whitelist&quot;:&quot;users&quot;, &quot;topic.prefix&quot; : &quot;my_topic_&quot;, &quot;tasks.max&quot; : &quot;1&quot; &#125;&#125;&#x27; | curl -X POST -d @- http://localhost:8083/connectors --header &quot;content-Type:application/json&quot; echo &#x27;&#123; &quot;name&quot; : &quot;my-sink-connect&quot;, &quot;config&quot; : &#123; &quot;connector.class&quot; : &quot;io.confluent.connect.jdbc.JdbcSinkConnector&quot;, &quot;connection.url&quot;:&quot;jdbc:mysql://localhost:3306/mydb&quot;, &quot;connection.user&quot;:&quot;root&quot;, &quot;connection.password&quot;:&quot;1234&quot;, &quot;auto.create&quot;:&quot;true&quot;, &quot;auto.evolve&quot;:&quot;true&quot;, &quot;delete.enabled&quot;:&quot;false&quot;, &quot;tasks.max&quot;:&quot;1&quot;, &quot;topics&quot;:&quot;my_topic_users&quot; &#125;&#125;&#x27;| curl -X POST -d @- http://localhost:8083/connectors --header &quot;content-Type:application/json&quot; ERROR WorkerSinkTask&#123;id=my-sink-connect-0&#125; Error converting message value in topic &#x27;my_topic_users&#x27; partition 0 at offset 37 and timestamp 1620840246979: Converting byte[] to Kafka Connect data failed due to serialization error: (org.apache.kafka.connect.runtime.WorkerSinkTask:547)org.apache.kafka.connect.errors.DataException: Converting byte[] to Kafka Connect data failed due to serialization error: at org.apache.kafka.connect.json.JsonConverter.toConnectData(JsonConverter.java:366) at org.apache.kafka.connect.storage.Converter.toConnectData(Converter.java:87) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertValue(WorkerSinkTask.java:545) at org.apache.kafka.connect.runtime.WorkerSinkTask.lambda$convertAndTransformRecord$1(WorkerSinkTask.java:501) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndRetry(RetryWithToleranceOperator.java:156) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndHandleError(RetryWithToleranceOperator.java:190) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execute(RetryWithToleranceOperator.java:132) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertAndTransformRecord(WorkerSinkTask.java:501) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertMessages(WorkerSinkTask.java:478) at org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:328) at org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:232) at org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:201) at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:185) at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:234) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834)Caused by: org.apache.kafka.common.errors.SerializationException: com.fasterxml.jackson.core.io.JsonEOFException: Unexpected end-of-input: expected close marker for Object (start marker at [Source: (byte[])&quot;&#123;&quot;; line: 1, column: 1]) at [Source: (byte[])&quot;&#123;&quot;; line: 1, column: 2]Caused by: com.fasterxml.jackson.core.io.JsonEOFException: Unexpected end-of-input: expected close marker for Object (start marker at [Source: (byte[])&quot;&#123;&quot;; line: 1, column: 1]) at [Source: (byte[])&quot;&#123;&quot;; line: 1, column: 2] at com.fasterxml.jackson.core.base.ParserMinimalBase._reportInvalidEOF(ParserMinimalBase.java:664) at com.fasterxml.jackson.core.base.ParserBase._handleEOF(ParserBase.java:486) at com.fasterxml.jackson.core.base.ParserBase._eofAsNextChar(ParserBase.java:498) at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._skipWSOrEnd(UTF8StreamJsonParser.java:2961) at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextFieldName(UTF8StreamJsonParser.java:989) at com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer.deserializeObject(JsonNodeDeserializer.java:249) at com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:68) at com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:15) at com.fasterxml.jackson.databind.ObjectMapper._readTreeAndClose(ObjectMapper.java:4270) at com.fasterxml.jackson.databind.ObjectMapper.readTree(ObjectMapper.java:2734) at org.apache.kafka.connect.json.JsonDeserializer.deserialize(JsonDeserializer.java:64) at org.apache.kafka.connect.json.JsonConverter.toConnectData(JsonConverter.java:364) at org.apache.kafka.connect.storage.Converter.toConnectData(Converter.java:87) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertValue(WorkerSinkTask.java:545) at org.apache.kafka.connect.runtime.WorkerSinkTask.lambda$convertAndTransformRecord$1(WorkerSinkTask.java:501) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndRetry(RetryWithToleranceOperator.java:156) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndHandleError(RetryWithToleranceOperator.java:190) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execute(RetryWithToleranceOperator.java:132) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertAndTransformRecord(WorkerSinkTask.java:501) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertMessages(WorkerSinkTask.java:478) at org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:328) at org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:232) at org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:201) at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:185) at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:234) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834) [2021-05-13 02:24:07,986] ERROR WorkerSinkTask&#123;id=my-sink-connect-0&#125; Task threw an uncaught and unrecoverable exception. Task is being killed and will not recover until manually restarted (org.apache.kafka.connect.runtime.WorkerTask:187)org.apache.kafka.connect.errors.ConnectException: Tolerance exceeded in error handler at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndHandleError(RetryWithToleranceOperator.java:206) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execute(RetryWithToleranceOperator.java:132) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertAndTransformRecord(WorkerSinkTask.java:501) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertMessages(WorkerSinkTask.java:478) at org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:328) at org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:232) at org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:201) at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:185) at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:234) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834)Caused by: org.apache.kafka.connect.errors.DataException: Converting byte[] to Kafka Connect data failed due to serialization error: at org.apache.kafka.connect.json.JsonConverter.toConnectData(JsonConverter.java:366) at org.apache.kafka.connect.storage.Converter.toConnectData(Converter.java:87) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertValue(WorkerSinkTask.java:545) at org.apache.kafka.connect.runtime.WorkerSinkTask.lambda$convertAndTransformRecord$1(WorkerSinkTask.java:501) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndRetry(RetryWithToleranceOperator.java:156) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndHandleError(RetryWithToleranceOperator.java:190) ... 13 moreCaused by: org.apache.kafka.common.errors.SerializationException: com.fasterxml.jackson.core.io.JsonEOFException: Unexpected end-of-input: expected close marker for Object (start marker at [Source: (byte[])&quot;&#123;&quot;; line: 1, column: 1]) at [Source: (byte[])&quot;&#123;&quot;; line: 1, column: 2]Caused by: com.fasterxml.jackson.core.io.JsonEOFException: Unexpected end-of-input: expected close marker for Object (start marker at [Source: (byte[])&quot;&#123;&quot;; line: 1, column: 1]) at [Source: (byte[])&quot;&#123;&quot;; line: 1, column: 2] at com.fasterxml.jackson.core.base.ParserMinimalBase._reportInvalidEOF(ParserMinimalBase.java:664) at com.fasterxml.jackson.core.base.ParserBase._handleEOF(ParserBase.java:486) at com.fasterxml.jackson.core.base.ParserBase._eofAsNextChar(ParserBase.java:498) at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._skipWSOrEnd(UTF8StreamJsonParser.java:2961) at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextFieldName(UTF8StreamJsonParser.java:989) at com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer.deserializeObject(JsonNodeDeserializer.java:249) at com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:68) at com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:15) at com.fasterxml.jackson.databind.ObjectMapper._readTreeAndClose(ObjectMapper.java:4270) at com.fasterxml.jackson.databind.ObjectMapper.readTree(ObjectMapper.java:2734) at org.apache.kafka.connect.json.JsonDeserializer.deserialize(JsonDeserializer.java:64) at org.apache.kafka.connect.json.JsonConverter.toConnectData(JsonConverter.java:364) at org.apache.kafka.connect.storage.Converter.toConnectData(Converter.java:87) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertValue(WorkerSinkTask.java:545) at org.apache.kafka.connect.runtime.WorkerSinkTask.lambda$convertAndTransformRecord$1(WorkerSinkTask.java:501) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndRetry(RetryWithToleranceOperator.java:156) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndHandleError(RetryWithToleranceOperator.java:190) at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execute(RetryWithToleranceOperator.java:132) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertAndTransformRecord(WorkerSinkTask.java:501) at org.apache.kafka.connect.runtime.WorkerSinkTask.convertMessages(WorkerSinkTask.java:478) at org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:328) at org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:232) at org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:201) at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:185) at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:234) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834)","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Kafka","slug":"Spring/Spring-Cloud/Kafka","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Kafka/"}],"tags":[]},{"title":"Spring Cloud - 31. Kafka Topic ì ìš©","slug":"spring/spring-cloud/kafka/spring-cloud-31","date":"2021-09-19T16:31:31.000Z","updated":"2024-02-26T15:34:11.213Z","comments":true,"path":"2021/09/20/spring/spring-cloud/kafka/spring-cloud-31/","link":"","permalink":"https://ckck803.github.io/2021/09/20/spring/spring-cloud/kafka/spring-cloud-31/","excerpt":"ëª©ì°¨ Spring Cloud - 33. Order Kafka Producer Spring Cloud - 32. kafka-mariadb ì—°ê²° Spring Cloud - 31. Kafka Topic ì ìš© Catalog Service// https://mvnrepository.com/artifact/org.springframework.kafka/spring-kafkaimplementation &#x27;org.springframework.kafka:spring-kafka&#x27; @EnableKafka@Configurationpublic class KafkaConsumerConfig &#123; @Bean public ConsumerFactory&lt;String, String&gt; consumerFactory()&#123; Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;(); properties.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;127.0.0.1:9092&quot;); properties.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;consumerGroupId&quot;); properties.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); properties.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); return new DefaultKafkaConsumerFactory&lt;&gt;(properties); &#125; @Bean public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory()&#123; ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;(); kafkaListenerContainerFactory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;(); kafkaListenerContainerFactory.setConsumerFactory(consumerFactory()); return kafkaListenerContainerFactory; &#125;&#125; Order Service@Configurationpublic class KafkaProducerConfig &#123; @Bean public ProducerFactory&lt;String, String&gt; producerFactory()&#123; Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;(); configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;127.0.0.1:9092&quot;); configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class); configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class); return new DefaultKafkaProducerFactory&lt;&gt;(configProps); &#125; @Bean public KafkaTemplate&lt;String, String&gt; kafkaTemplate()&#123; return new KafkaTemplate&lt;&gt;(producerFactory()); &#125;&#125; @Service@Slf4j@RequiredArgsConstructorpublic class KafkaProducer &#123; private final KafkaTemplate&lt;String, String&gt; kafkaTemplate; public OrderDto send(String kafkaTopic, OrderDto orderDto)&#123; ObjectMapper mapper = new ObjectMapper(); String jsonInString = &quot;&quot;; try&#123; jsonInString = mapper.writeValueAsString(orderDto); &#125;catch (JsonProcessingException e)&#123; e.printStackTrace(); &#125; kafkaTemplate.send(kafkaTopic, jsonInString); log.info(&quot;Kafka Producer send data from the Order microservice: &quot; + orderDto); return orderDto; &#125;&#125;","text":"ëª©ì°¨ Spring Cloud - 33. Order Kafka Producer Spring Cloud - 32. kafka-mariadb ì—°ê²° Spring Cloud - 31. Kafka Topic ì ìš© Catalog Service// https://mvnrepository.com/artifact/org.springframework.kafka/spring-kafkaimplementation &#x27;org.springframework.kafka:spring-kafka&#x27; @EnableKafka@Configurationpublic class KafkaConsumerConfig &#123; @Bean public ConsumerFactory&lt;String, String&gt; consumerFactory()&#123; Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;(); properties.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;127.0.0.1:9092&quot;); properties.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;consumerGroupId&quot;); properties.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); properties.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); return new DefaultKafkaConsumerFactory&lt;&gt;(properties); &#125; @Bean public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory()&#123; ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;(); kafkaListenerContainerFactory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;(); kafkaListenerContainerFactory.setConsumerFactory(consumerFactory()); return kafkaListenerContainerFactory; &#125;&#125; Order Service@Configurationpublic class KafkaProducerConfig &#123; @Bean public ProducerFactory&lt;String, String&gt; producerFactory()&#123; Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;(); configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;127.0.0.1:9092&quot;); configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class); configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class); return new DefaultKafkaProducerFactory&lt;&gt;(configProps); &#125; @Bean public KafkaTemplate&lt;String, String&gt; kafkaTemplate()&#123; return new KafkaTemplate&lt;&gt;(producerFactory()); &#125;&#125; @Service@Slf4j@RequiredArgsConstructorpublic class KafkaProducer &#123; private final KafkaTemplate&lt;String, String&gt; kafkaTemplate; public OrderDto send(String kafkaTopic, OrderDto orderDto)&#123; ObjectMapper mapper = new ObjectMapper(); String jsonInString = &quot;&quot;; try&#123; jsonInString = mapper.writeValueAsString(orderDto); &#125;catch (JsonProcessingException e)&#123; e.printStackTrace(); &#125; kafkaTemplate.send(kafkaTopic, jsonInString); log.info(&quot;Kafka Producer send data from the Order microservice: &quot; + orderDto); return orderDto; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Kafka","slug":"Spring/Spring-Cloud/Kafka","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Kafka/"}],"tags":[]},{"title":"Spring Cloud - 30. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„","slug":"spring/spring-cloud/feign-client/spring-cloud-30","date":"2021-09-19T15:31:31.000Z","updated":"2024-02-26T15:33:00.331Z","comments":true,"path":"2021/09/20/spring/spring-cloud/feign-client/spring-cloud-30/","link":"","permalink":"https://ckck803.github.io/2021/09/20/spring/spring-cloud/feign-client/spring-cloud-30/","excerpt":"ëª©ì°¨ Spring Cloud - 30. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„ Spring Cloud - 29. Micro Serviceê°„ í†µì‹  Feign client ì˜ˆì™¸ ì²˜ë¦¬ Spring Cloud - 28. Micro Serviceê°„ í†µì‹  Feign client Spring Cloud - 27. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„public class FeignErrorDecoder implements ErrorDecoder &#123; @Override public Exception decode(String methodKey, Response response) &#123; switch (response.status()) &#123; case 400: break; case 404: if (methodKey.contains(&quot;getOrders&quot;)) &#123; return new ResponseStatusException(HttpStatus.valueOf(response.status()) , &quot;User&#x27;s orders is empty.&quot;); &#125; break; default: return new Exception(response.reason()); &#125; return null; &#125;&#125; @SpringBootApplication@EnableDiscoveryClient@EnableFeignClients@Slf4jpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125; @Bean public BCryptPasswordEncoder passwordEncoder() throws UnknownHostException &#123; return new BCryptPasswordEncoder(); &#125; @Bean @LoadBalanced public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125; @Bean public Logger.Level feignLoggerLevel()&#123; return Logger.Level.FULL; &#125; @Bean public FeignErrorDecoder getFeignErrorDecoder()&#123; return new FeignErrorDecoder(); &#125;&#125; token: expiration_time: 84600000 secret: user_token_native_application_changedgateway: ip: 192.168.123.106order_service: url: http://ORDER-SERVICE/order-service/%s/orders exception: orders_is_empty: User&#x27;s orders is empty. @Component@RequiredArgsConstructorpublic class FeignErrorDecoder implements ErrorDecoder &#123; private final Environment env; @Override public Exception decode(String methodKey, Response response) &#123; switch (response.status()) &#123; case 400: break; case 404: if (methodKey.contains(&quot;getOrders&quot;)) &#123; return new ResponseStatusException(HttpStatus.valueOf(response.status()) , env.getProperty(&quot;order_service.exception.orders_is_empty&quot;)); &#125; break; default: return new Exception(response.reason()); &#125; return null; &#125;&#125;","text":"ëª©ì°¨ Spring Cloud - 30. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„ Spring Cloud - 29. Micro Serviceê°„ í†µì‹  Feign client ì˜ˆì™¸ ì²˜ë¦¬ Spring Cloud - 28. Micro Serviceê°„ í†µì‹  Feign client Spring Cloud - 27. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„public class FeignErrorDecoder implements ErrorDecoder &#123; @Override public Exception decode(String methodKey, Response response) &#123; switch (response.status()) &#123; case 400: break; case 404: if (methodKey.contains(&quot;getOrders&quot;)) &#123; return new ResponseStatusException(HttpStatus.valueOf(response.status()) , &quot;User&#x27;s orders is empty.&quot;); &#125; break; default: return new Exception(response.reason()); &#125; return null; &#125;&#125; @SpringBootApplication@EnableDiscoveryClient@EnableFeignClients@Slf4jpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125; @Bean public BCryptPasswordEncoder passwordEncoder() throws UnknownHostException &#123; return new BCryptPasswordEncoder(); &#125; @Bean @LoadBalanced public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125; @Bean public Logger.Level feignLoggerLevel()&#123; return Logger.Level.FULL; &#125; @Bean public FeignErrorDecoder getFeignErrorDecoder()&#123; return new FeignErrorDecoder(); &#125;&#125; token: expiration_time: 84600000 secret: user_token_native_application_changedgateway: ip: 192.168.123.106order_service: url: http://ORDER-SERVICE/order-service/%s/orders exception: orders_is_empty: User&#x27;s orders is empty. @Component@RequiredArgsConstructorpublic class FeignErrorDecoder implements ErrorDecoder &#123; private final Environment env; @Override public Exception decode(String methodKey, Response response) &#123; switch (response.status()) &#123; case 400: break; case 404: if (methodKey.contains(&quot;getOrders&quot;)) &#123; return new ResponseStatusException(HttpStatus.valueOf(response.status()) , env.getProperty(&quot;order_service.exception.orders_is_empty&quot;)); &#125; break; default: return new Exception(response.reason()); &#125; return null; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Feign Client","slug":"Spring/Spring-Cloud/Feign-Client","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Feign-Client/"}],"tags":[]},{"title":"Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸°","slug":"spring/spring-resource/file-upload-3","date":"2021-09-19T14:39:59.000Z","updated":"2024-11-27T02:00:27.842Z","comments":true,"path":"2021/09/19/spring/spring-resource/file-upload-3/","link":"","permalink":"https://ckck803.github.io/2021/09/19/spring/spring-resource/file-upload-3/","excerpt":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ DTO ìƒì„±í•˜ê¸°@Datapublic class Item &#123; private Long id; private String itemName; private UploadFile attachFile; // ì—¬ëŸ¬ê°œì˜ ì´ë¯¸ì§€ íŒŒì¼ì„ ì…ë ¥í•˜ê¸° ìœ„í•œ List private List&lt;UploadFile&gt; imageFiles;&#125; íŒŒì¼ì„ ì—…ë¡œë“œ í• ë•Œ ì¤‘ë³µëœ ì´ë¦„ì„ ê°€ì§„ íŒŒì¼ì´ ìˆì„ ê²½ìš° í•´ë‹¹ íŒŒì¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ íŒŒì¼ì„ ì €ì¥í• ë•ŒëŠ” ë‹¤ë¦„ ì´ë¦„ìœ¼ë¡œ ì €ì¥í•˜ê³  ì›ë˜ íŒŒì¼ì´ë¦„ì„ ë³„ë„ë¡œ ì €ì¥í•©ë‹ˆë‹¤. ì €ì¥ëœ íŒŒì¼ì´ë¦„ê³¼ ë§¤í•‘ë˜ëŠ” ì›ë˜ íŒŒì¼ ì´ë¦„ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ UploadFile ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. @Datapublic class UploadFile &#123; private String uploadFileName; private String storeFileName; public UploadFile(String uploadFileName, String storeFileName) &#123; this.uploadFileName = uploadFileName; this.storeFileName = storeFileName; &#125;&#125; íŒŒì¼ ì €ì¥ - ì„œë¹„ìŠ¤ êµ¬í˜„íŒŒì¼ì—ì„œ í™•ì¥ì ì¶”ì¶œí•˜ê¸°","text":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ DTO ìƒì„±í•˜ê¸°@Datapublic class Item &#123; private Long id; private String itemName; private UploadFile attachFile; // ì—¬ëŸ¬ê°œì˜ ì´ë¯¸ì§€ íŒŒì¼ì„ ì…ë ¥í•˜ê¸° ìœ„í•œ List private List&lt;UploadFile&gt; imageFiles;&#125; íŒŒì¼ì„ ì—…ë¡œë“œ í• ë•Œ ì¤‘ë³µëœ ì´ë¦„ì„ ê°€ì§„ íŒŒì¼ì´ ìˆì„ ê²½ìš° í•´ë‹¹ íŒŒì¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ íŒŒì¼ì„ ì €ì¥í• ë•ŒëŠ” ë‹¤ë¦„ ì´ë¦„ìœ¼ë¡œ ì €ì¥í•˜ê³  ì›ë˜ íŒŒì¼ì´ë¦„ì„ ë³„ë„ë¡œ ì €ì¥í•©ë‹ˆë‹¤. ì €ì¥ëœ íŒŒì¼ì´ë¦„ê³¼ ë§¤í•‘ë˜ëŠ” ì›ë˜ íŒŒì¼ ì´ë¦„ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ UploadFile ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. @Datapublic class UploadFile &#123; private String uploadFileName; private String storeFileName; public UploadFile(String uploadFileName, String storeFileName) &#123; this.uploadFileName = uploadFileName; this.storeFileName = storeFileName; &#125;&#125; íŒŒì¼ ì €ì¥ - ì„œë¹„ìŠ¤ êµ¬í˜„íŒŒì¼ì—ì„œ í™•ì¥ì ì¶”ì¶œí•˜ê¸°String ê°ì²´ì—ì„œ lastIndexOf ë©”ì†Œë“œë¥¼ ì´ìš©í•´ í™•ì¥ìëª…ì´ ì‹œì‘ë˜ëŠ” ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜¨ í›„ substring ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì¶”ì¶œí•œë‹¤. private String extractExt(String originalFilename) &#123; int pos = originalFilename.lastIndexOf(&quot;.&quot;); return originalFilename.substring(pos + 1);&#125; UUIDì— íŒŒì¼ í™•ì¥ì ì¶”ê°€ì „ì†¡ëœ íŒŒì¼ëª…ì„ ì‚¬ìš©í•  ê²½ìš° ì¤‘ë³µì´ ì¼ì–´ë‚ ì‹œ íŒŒì¼ì´ ì—…ë°ì´íŠ¸ê°€ ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— íŒŒì¼ë§ˆë‹¤ ê³ ìœ í•œ ì´ë¦„ ê°’ì„ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ UUID ë¥¼ ì‚¬ìš©í•´ ìœ ë‹ˆí¬í•œ ê°’ì„ ê°–ë„ë¡ ë³€ê²½í•œ í›„ extractExt ë©”ì†Œë“œë¥¼ í†µí•´ ì¶”ì¶œëœ í™•ì¥ìë¥¼ ë¶™ì—¬ì¤€ë‹¤. private String createStoreFileName(String originalFilename) &#123; String ext = extractExt(originalFilename); String uuid = UUID.randomUUID().toString(); return uuid + &quot;.&quot; + ext;&#125; MultipartFile ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì €ì¥MultipartFile ê°ì²´ë¥¼ ì´ìš©í•´ íŒŒì¼ì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. getOriginalFilename() íŒŒì¼ ëª…ì„ ê°€ì ¸ì˜¤ëŠ” ë©”ì†Œë“œ transferTo(File file) MultipartFile ë‚´ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ì€ File ê°ì²´ì— ì €ì¥í•œë‹¤. public UploadFile storeFile(MultipartFile multipartFile) throws IOException &#123; if (multipartFile.isEmpty()) &#123; return null; &#125; String originalFilename = multipartFile.getOriginalFilename(); String storeFileName = createStoreFileName(originalFilename); multipartFile.transferTo(new File(getFullPath(storeFileName))); return new UploadFile(originalFilename, storeFileName);&#125; ì—¬ëŸ¬ê°œ íŒŒì¼ ì €ì¥í•˜ê¸°ì—¬ëŸ¬ê°œì˜ íŒŒì¼ì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” List ê°ì²´ë¥¼ ì´ìš©í•´ MultipartFile ê°ì²´ë“¤ì„ ë°›ì•„ì˜¨ í›„ ë°˜ë³µë¬¸ì„ í†µí•´ íŒŒì¼ì„ ì €ì¥í•©ë‹ˆë‹¤. public List&lt;UploadFile&gt; storeFiles(List&lt;MultipartFile&gt; multipartFiles) throws IOException &#123; List&lt;UploadFile&gt; storeFileResult = new ArrayList&lt;&gt;(); for (MultipartFile multipartFile : multipartFiles) &#123; if (!multipartFile.isEmpty()) &#123; storeFileResult.add(storeFile(multipartFile)); &#125; &#125; return storeFileResult;&#125; ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ@Componentpublic class FileStore &#123; @Value(&quot;$&#123;file.dir&#125;&quot;) private String fileDir; public String getFullPath(String filename) &#123; return fileDir + filename; &#125; public List&lt;UploadFile&gt; storeFiles(List&lt;MultipartFile&gt; multipartFiles) throws IOException &#123; List&lt;UploadFile&gt; storeFileResult = new ArrayList&lt;&gt;(); for (MultipartFile multipartFile : multipartFiles) &#123; if (!multipartFile.isEmpty()) &#123; storeFileResult.add(storeFile(multipartFile)); &#125; &#125; return storeFileResult; &#125; public UploadFile storeFile(MultipartFile multipartFile) throws IOException &#123; if (multipartFile.isEmpty()) &#123; return null; &#125; String originalFilename = multipartFile.getOriginalFilename(); String storeFileName = createStoreFileName(originalFilename); multipartFile.transferTo(new File(getFullPath(storeFileName))); return new UploadFile(originalFilename, storeFileName); &#125; private String createStoreFileName(String originalFilename) &#123; String ext = extractExt(originalFilename); String uuid = UUID.randomUUID().toString(); return uuid + &quot;.&quot; + ext; &#125; private String extractExt(String originalFilename) &#123; int pos = originalFilename.lastIndexOf(&quot;.&quot;); return originalFilename.substring(pos + 1); &#125;&#125; Controller êµ¬í˜„DTO ìƒì„±@Datapublic class ItemForm &#123; private Long itemId; private String itemName; private MultipartFile attachFile; private List&lt;MultipartFile&gt; imageFiles;&#125; íŒŒì¼ ì €ì¥@PostMapping(&quot;/items/new&quot;)public String saveItem(@ModelAttribute ItemForm form, RedirectAttributes redirectAttributes) throws IOException &#123; UploadFile attachFile = fileStore.storeFile(form.getAttachFile()); // Request ê°ì²´ì—ì„œ ë°›ì•„ì˜¨ MultipartFile ê°ì²´ë“¤ì„ ê°€ì ¸ì™€ ì €ì¥í•œë‹¤. List&lt;UploadFile&gt; storeImageFiles = fileStore.storeFiles(form.getImageFiles()); //ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ Item item = new Item(); item.setItemName(form.getItemName()); item.setAttachFile(attachFile); item.setImageFiles(storeImageFiles); itemRepository.save(item); redirectAttributes.addAttribute(&quot;itemId&quot;, item.getId()); return &quot;redirect:/items/&#123;itemId&#125;&quot;;&#125; ì €ì¥ëœ íŒŒì¼ë“¤ ë³´ì—¬ì£¼ê¸° ìœ„í•œ Controller@GetMapping(&quot;/items/&#123;id&#125;&quot;)public String items(@PathVariable Long id, Model model) &#123; Item item = itemRepository.findById(id); model.addAttribute(&quot;item&quot;, item); return &quot;item-view&quot;;&#125; UrlResource ë¥¼ í†µí•´ ì„œë²„ì— ì €ì¥ëœ íŒŒì¼ ë³´ì—¬ì£¼ê¸°@ResponseBody@GetMapping(&quot;/images/&#123;filename&#125;&quot;)public Resource downloadImage(@PathVariable String filename) throws MalformedURLException &#123; return new UrlResource(&quot;file:&quot; + fileStore.getFullPath(filename));&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"File","slug":"Spring/Spring-Boot/File","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/File/"}],"tags":[]},{"title":"Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ","slug":"spring/spring-resource/multipart","date":"2021-09-19T13:39:59.000Z","updated":"2024-11-27T02:00:27.916Z","comments":true,"path":"2021/09/19/spring/spring-resource/multipart/","link":"","permalink":"https://ckck803.github.io/2021/09/19/spring/spring-resource/multipart/","excerpt":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ MultipartFile ì¸í„°í˜ì´ìŠ¤ multipart&#x2F;form-data ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ê°ì²´ Spring ì—ì„œëŠ” ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì„ ì²˜ë¦¬ í•˜ê¸° ìœ„í•´ MultipartFile ê°ì²´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. public interface MultipartFile extends InputStreamSource &#123; // ì „ë‹¬ ë°›ì€ Parameter Keyê°’ì„ ê°€ì ¸ì˜¨ë‹¤. String getName(); // íŒŒì¼ ëª…ì„ ê°€ì ¸ì˜¨ë‹¤. @Nullable String getOriginalFilename(); // íŒŒì¼ì˜ ContentTypeì„ ê°€ì ¸ì˜¨ë‹¤. // pdf íŒŒì¼ì˜ ê²½ìš° application/pdf, mp4 íŒŒì¼ì˜ ê²½ìš° video/mp4, png íŒŒì¼ì˜ ê²½ìš° image/png @Nullable String getContentType(); // ì „ë‹¬ ë°›ì€ Parameter Valueê°’ì´ ë¹„ì–´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. boolean isEmpty(); // ì „ë‹¬ ë°›ì€ íŒŒì¼ì˜ í¬ê¸°ë¥¼ ê°€ì ¸ì˜¨ë‹¤. // íŒŒì¼ì€ byte ë‹¨ìœ„ë¡œ í‘œì‹œëœë‹¤. long getSize(); byte[] getBytes() throws IOException; // ì „ë‹¬ ë°›ì€ íŒŒì¼ì„ ì½ê¸° ìœ„í•œ InputStreamì„ ê°€ì ¸ì˜¨ë‹¤. @Override InputStream getInputStream() throws IOException; // MultipartFile ê°ì²´ë¥¼ ì´ìš©í•´ Resource(MultipartFileResource) ê°ì²´ë¥¼ ë°˜í™˜ ë°›ëŠ”ë‹¤. default Resource getResource() &#123; return new MultipartFileResource(this); &#125; // MultipartFile ë‚´ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ì€ File ê°ì²´ì— ì €ì¥í•œë‹¤. // í•œë²ˆë§Œ í˜¸ì¶œì´ ê°€ëŠ¥í•œ ë©”ì†Œë“œë‹¤. void transferTo(File dest) throws IOException, IllegalStateException; // MultipartFile ë‚´ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ì€ Path ê°ì²´ì— ì €ì¥í•œë‹¤. default void transferTo(Path dest) throws IOException, IllegalStateException &#123; FileCopyUtils.copy(getInputStream(), Files.newOutputStream(dest)); &#125;&#125; íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ Controller êµ¬í˜„ multipart&#x2F;form-data ìš”ì²­ì€ Form í˜•ì‹ìœ¼ë¡œ ìš”ì²­ì´ ì˜¤ê¸° ë•Œë¬¸ì— RequestBody ì–´ë…¸í…Œì´ì…˜ì´ ì•„ë‹ˆë¼ RequestParam ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤.","text":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ MultipartFile ì¸í„°í˜ì´ìŠ¤ multipart&#x2F;form-data ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ê°ì²´ Spring ì—ì„œëŠ” ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì„ ì²˜ë¦¬ í•˜ê¸° ìœ„í•´ MultipartFile ê°ì²´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. public interface MultipartFile extends InputStreamSource &#123; // ì „ë‹¬ ë°›ì€ Parameter Keyê°’ì„ ê°€ì ¸ì˜¨ë‹¤. String getName(); // íŒŒì¼ ëª…ì„ ê°€ì ¸ì˜¨ë‹¤. @Nullable String getOriginalFilename(); // íŒŒì¼ì˜ ContentTypeì„ ê°€ì ¸ì˜¨ë‹¤. // pdf íŒŒì¼ì˜ ê²½ìš° application/pdf, mp4 íŒŒì¼ì˜ ê²½ìš° video/mp4, png íŒŒì¼ì˜ ê²½ìš° image/png @Nullable String getContentType(); // ì „ë‹¬ ë°›ì€ Parameter Valueê°’ì´ ë¹„ì–´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. boolean isEmpty(); // ì „ë‹¬ ë°›ì€ íŒŒì¼ì˜ í¬ê¸°ë¥¼ ê°€ì ¸ì˜¨ë‹¤. // íŒŒì¼ì€ byte ë‹¨ìœ„ë¡œ í‘œì‹œëœë‹¤. long getSize(); byte[] getBytes() throws IOException; // ì „ë‹¬ ë°›ì€ íŒŒì¼ì„ ì½ê¸° ìœ„í•œ InputStreamì„ ê°€ì ¸ì˜¨ë‹¤. @Override InputStream getInputStream() throws IOException; // MultipartFile ê°ì²´ë¥¼ ì´ìš©í•´ Resource(MultipartFileResource) ê°ì²´ë¥¼ ë°˜í™˜ ë°›ëŠ”ë‹¤. default Resource getResource() &#123; return new MultipartFileResource(this); &#125; // MultipartFile ë‚´ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ì€ File ê°ì²´ì— ì €ì¥í•œë‹¤. // í•œë²ˆë§Œ í˜¸ì¶œì´ ê°€ëŠ¥í•œ ë©”ì†Œë“œë‹¤. void transferTo(File dest) throws IOException, IllegalStateException; // MultipartFile ë‚´ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ì€ Path ê°ì²´ì— ì €ì¥í•œë‹¤. default void transferTo(Path dest) throws IOException, IllegalStateException &#123; FileCopyUtils.copy(getInputStream(), Files.newOutputStream(dest)); &#125;&#125; íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ Controller êµ¬í˜„ multipart&#x2F;form-data ìš”ì²­ì€ Form í˜•ì‹ìœ¼ë¡œ ìš”ì²­ì´ ì˜¤ê¸° ë•Œë¬¸ì— RequestBody ì–´ë…¸í…Œì´ì…˜ì´ ì•„ë‹ˆë¼ RequestParam ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤. @RestController@Slf4jpublic class FileController &#123; String filePath = &quot;/Users/dongwoo-yang/spring-file/&quot;; @PostMapping(&quot;/file/upload&quot;) public ResponseEntity upload(@RequestParam(&quot;file&quot;) MultipartFile multipartFile, HttpServletRequest request) throws IOException, URISyntaxException &#123; if(multipartFile.isEmpty())&#123; log.info(&quot;File is empty&quot;); &#125; log.info(&quot;multipartFile.getName() : &#123;&#125;&quot;, multipartFile.getName()); log.info(&quot;multipartFile.getOriginalFilename() : &#123;&#125;&quot;, multipartFile.getOriginalFilename()); log.info(&quot;multipartFile.getContentType() : &#123;&#125;&quot;, multipartFile.getContentType()); log.info(&quot;multipartFile.getSize() : &#123;&#125;&quot;, multipartFile.getSize()); log.info(&quot;multipartFile.getResource() : &#123;&#125;&quot;, multipartFile.getResource()); String fullFilename = multipartFile.getOriginalFilename(); int lastIndex = fullFilename.lastIndexOf(&quot;.&quot;); String filename = fullFilename.substring(0, lastIndex); String ext = fullFilename.substring(lastIndex + 1); // ìƒˆë¡œìš´ íŒŒì¼ ì´ë¦„ ìƒì„± String newName = UUID.randomUUID() + &quot;.&quot; + ext; String uploadPath = filePath + newName; // File ê°ì²´ë¥¼ ì´ìš©í•´ ì €ì¥ // multipartFile.transferTo(new File(uploadPath)); // Path ê°ì²´ë¥¼ ì´ìš©í•´ ì €ì¥ multipartFile.transferTo(Paths.get(uploadPath)); URI uri = new URI(request.getRequestURI()); return ResponseEntity.created(uri).body(&quot;File Upload Success&quot;); &#125;&#125; File Upload í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±íŒŒì¼ì„ RestTemplateìœ¼ë¡œ ì „ë‹¬í•  ë•ŒëŠ” MultiValueMap ì— ë‹´ì•„ ì „ì†¡í•œë‹¤. MultiValueMap ì— ë“¤ì–´ê°€ëŠ” ë°ì´í„° í˜•ìœ¼ë¡œëŠ” File ê°ì²´ê°€ ì•„ë‹ˆë¼ Resource ê°ì²´ë¥¼ ë˜ì ¸ ì¤˜ì•¼ mulipart/form-data í˜•íƒœë¡œ ì „ì†¡ì´ ëœë‹¤. ì´ê±° ë•Œë¬¸ì— ì§„ì§œ í•œì°¸ ì°¾ì•„ ë‹¤ë…”ë‹¤. @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)class FileControllerTest &#123; @Autowired private TestRestTemplate testRestTemplate; @LocalServerPort int randomServerPort; @Test public void uploadTest() throws IOException &#123; ClassPathResource resource = new ClassPathResource(&quot;testFile.txt&quot;); File file = resource.getFile(); MultiValueMap multiValueMap = new LinkedMultiValueMap(); multiValueMap.add(&quot;file&quot;, resource); HttpHeaders headers = new HttpHeaders(); headers.setContentType(MediaType.MULTIPART_FORM_DATA); HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; httpEntity = new HttpEntity(multiValueMap, headers); String requestURL = &quot;http://localhost:&quot; + randomServerPort + &quot;/file/upload&quot;; ResponseEntity&lt;String&gt; responseEntity = this.testRestTemplate.exchange(requestURL, HttpMethod.POST, httpEntity, new ParameterizedTypeReference&lt;String&gt;() &#123; &#125;); assertThat(responseEntity.getStatusCode()).isEqualTo(HttpStatus.CREATED); assertThat(responseEntity.getBody()).isEqualTo(&quot;File Upload Success&quot;); &#125;&#125; ì´ë¯¸ì§€ íŒŒì¼ Upload PDF íŒŒì¼ Upload Mp4 íŒŒì¼ upload","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"File","slug":"Spring/Spring-Boot/File","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/File/"}],"tags":[]},{"title":"Spring Cloud - 29. Micro Serviceê°„ í†µì‹  Feign client ì˜ˆì™¸ ì²˜ë¦¬","slug":"spring/spring-cloud/feign-client/spring-cloud-29","date":"2021-09-19T00:31:31.000Z","updated":"2024-02-26T15:33:05.743Z","comments":true,"path":"2021/09/19/spring/spring-cloud/feign-client/spring-cloud-29/","link":"","permalink":"https://ckck803.github.io/2021/09/19/spring/spring-cloud/feign-client/spring-cloud-29/","excerpt":"ëª©ì°¨ Spring Cloud - 30. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„ Spring Cloud - 29. Micro Serviceê°„ í†µì‹  Feign client ì˜ˆì™¸ ì²˜ë¦¬ Spring Cloud - 28. Micro Serviceê°„ í†µì‹  Feign client Spring Cloud - 27. Micro Serviceê°„ í†µì‹  User serviceserver: port: 0spring: application: name: user-service h2: console: enabled: true settings: web-allow-others: true datasource: username: sa password: driver-class-name: org.h2.Driver url: jdbc:h2:mem:testdb rabbitmq: host: 127.0.0.1 port: 5672 username: guest password: guesteureka: instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekagreeting: message: Welcome to the Simple E-commerce.management: endpoints: web: exposure: include: refresh, health, beans, busrefreshlogging: level: com.example.userservice.client: DEBUG#token:# expiration_time: 84600000# secret: user_token @SpringBootApplication@EnableDiscoveryClient@EnableFeignClients@Slf4jpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125; @Bean public BCryptPasswordEncoder passwordEncoder() throws UnknownHostException &#123; return new BCryptPasswordEncoder(); &#125; @Bean @LoadBalanced public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125; @Bean public Logger.Level feignLoggerLevel()&#123; return Logger.Level.FULL; &#125;&#125; @Overridepublic UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); List&lt;ResponseOrder&gt; orderList = null; try &#123; orderList = orderServiceClient.getOrders(userId); &#125; catch (FeignException ex) &#123; log.error(ex.getMessage()); &#125; userDto.setOrders(orderList); return userDto;&#125;","text":"ëª©ì°¨ Spring Cloud - 30. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„ Spring Cloud - 29. Micro Serviceê°„ í†µì‹  Feign client ì˜ˆì™¸ ì²˜ë¦¬ Spring Cloud - 28. Micro Serviceê°„ í†µì‹  Feign client Spring Cloud - 27. Micro Serviceê°„ í†µì‹  User serviceserver: port: 0spring: application: name: user-service h2: console: enabled: true settings: web-allow-others: true datasource: username: sa password: driver-class-name: org.h2.Driver url: jdbc:h2:mem:testdb rabbitmq: host: 127.0.0.1 port: 5672 username: guest password: guesteureka: instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekagreeting: message: Welcome to the Simple E-commerce.management: endpoints: web: exposure: include: refresh, health, beans, busrefreshlogging: level: com.example.userservice.client: DEBUG#token:# expiration_time: 84600000# secret: user_token @SpringBootApplication@EnableDiscoveryClient@EnableFeignClients@Slf4jpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125; @Bean public BCryptPasswordEncoder passwordEncoder() throws UnknownHostException &#123; return new BCryptPasswordEncoder(); &#125; @Bean @LoadBalanced public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125; @Bean public Logger.Level feignLoggerLevel()&#123; return Logger.Level.FULL; &#125;&#125; @Overridepublic UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); List&lt;ResponseOrder&gt; orderList = null; try &#123; orderList = orderServiceClient.getOrders(userId); &#125; catch (FeignException ex) &#123; log.error(ex.getMessage()); &#125; userDto.setOrders(orderList); return userDto;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Feign Client","slug":"Spring/Spring-Cloud/Feign-Client","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Feign-Client/"}],"tags":[]},{"title":"Spring Cloud - 28. Micro Serviceê°„ í†µì‹  Feign client","slug":"spring/spring-cloud/feign-client/spring-cloud-28","date":"2021-09-18T23:31:31.000Z","updated":"2024-02-26T15:32:35.804Z","comments":true,"path":"2021/09/19/spring/spring-cloud/feign-client/spring-cloud-28/","link":"","permalink":"https://ckck803.github.io/2021/09/19/spring/spring-cloud/feign-client/spring-cloud-28/","excerpt":"ëª©ì°¨ Spring Cloud - 30. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„ Spring Cloud - 29. Micro Serviceê°„ í†µì‹  Feign client ì˜ˆì™¸ ì²˜ë¦¬ Spring Cloud - 28. Micro Serviceê°„ í†µì‹  Feign client Spring Cloud - 27. Micro Serviceê°„ í†µì‹  User service// https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-openfeignimplementation &#x27;org.springframework.cloud:spring-cloud-starter-openfeign&#x27; @SpringBootApplication@EnableDiscoveryClient@EnableFeignClients@Slf4jpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125; @Bean public BCryptPasswordEncoder passwordEncoder() throws UnknownHostException &#123; return new BCryptPasswordEncoder(); &#125; @Bean @LoadBalanced public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125;&#125; FeignClientì˜ nameì†ì„±ì— ë“¤ì–´ê°€ëŠ” ê°’ì€ eureka ì„œë²„ì— ë“±ë¡ ë¼ ìˆëŠ” Application ì´ë¦„ì´ë‹¤. @FeignClient(name = &quot;order-service&quot;)public interface OrderServiceClient &#123; @GetMapping(&quot;/order-service/&#123;userId&#125;/orders&quot;) List&lt;ResponseOrder&gt; getOrders(@PathVariable String userId);&#125; @Overridepublic UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); List&lt;ResponseOrder&gt; orderList = orderServiceClient.getOrders(userId); userDto.setOrders(orderList); return userDto;&#125;","text":"ëª©ì°¨ Spring Cloud - 30. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„ Spring Cloud - 29. Micro Serviceê°„ í†µì‹  Feign client ì˜ˆì™¸ ì²˜ë¦¬ Spring Cloud - 28. Micro Serviceê°„ í†µì‹  Feign client Spring Cloud - 27. Micro Serviceê°„ í†µì‹  User service// https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-openfeignimplementation &#x27;org.springframework.cloud:spring-cloud-starter-openfeign&#x27; @SpringBootApplication@EnableDiscoveryClient@EnableFeignClients@Slf4jpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125; @Bean public BCryptPasswordEncoder passwordEncoder() throws UnknownHostException &#123; return new BCryptPasswordEncoder(); &#125; @Bean @LoadBalanced public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125;&#125; FeignClientì˜ nameì†ì„±ì— ë“¤ì–´ê°€ëŠ” ê°’ì€ eureka ì„œë²„ì— ë“±ë¡ ë¼ ìˆëŠ” Application ì´ë¦„ì´ë‹¤. @FeignClient(name = &quot;order-service&quot;)public interface OrderServiceClient &#123; @GetMapping(&quot;/order-service/&#123;userId&#125;/orders&quot;) List&lt;ResponseOrder&gt; getOrders(@PathVariable String userId);&#125; @Overridepublic UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); List&lt;ResponseOrder&gt; orderList = orderServiceClient.getOrders(userId); userDto.setOrders(orderList); return userDto;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Feign Client","slug":"Spring/Spring-Cloud/Feign-Client","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Feign-Client/"}],"tags":[]},{"title":"Spring Cloud - 27. Micro Serviceê°„ í†µì‹ ","slug":"spring/spring-cloud/feign-client/spring-cloud-27","date":"2021-09-18T18:31:31.000Z","updated":"2024-02-26T15:32:20.478Z","comments":true,"path":"2021/09/19/spring/spring-cloud/feign-client/spring-cloud-27/","link":"","permalink":"https://ckck803.github.io/2021/09/19/spring/spring-cloud/feign-client/spring-cloud-27/","excerpt":"ëª©ì°¨ Spring Cloud - 30. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„ Spring Cloud - 29. Micro Serviceê°„ í†µì‹  Feign client ì˜ˆì™¸ ì²˜ë¦¬ Spring Cloud - 28. Micro Serviceê°„ í†µì‹  Feign client Spring Cloud - 27. Micro Serviceê°„ í†µì‹  User Service@SpringBootApplication@EnableDiscoveryClient@Slf4jpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125; @Bean public BCryptPasswordEncoder passwordEncoder() throws UnknownHostException &#123; return new BCryptPasswordEncoder(); &#125; @Bean public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125;&#125; @Overridepublic UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); // List&lt;ResponseOrder&gt; orders = new ArrayList&lt;&gt;(); // userDto.setOrders(orders); String orderUrl = String.format(env.getProperty(&quot;order_service.url&quot;), userId); ResponseEntity&lt;List&lt;ResponseOrder&gt;&gt; orderListResponse = restTemplate.exchange(orderUrl , HttpMethod.GET , null , new ParameterizedTypeReference&lt;List&lt;ResponseOrder&gt;&gt;() &#123;&#125;); List&lt;ResponseOrder&gt; orderList = orderListResponse.getBody(); userDto.setOrders(orderList); return userDto;&#125; application.ymltoken: expiration_time: 84600000 secret: user_token_native_application_changedgateway: ip: 192.168.123.106order_service: url: http://127.0.0.1:8080/order-service/%s/orders token: expiration_time: 84600000 secret: user_token_native_application_changedgateway: ip: 192.168.123.106order_service: url: http://ORDER-SERVICE/order-service/%s/orders @SpringBootApplication@EnableDiscoveryClient@Slf4jpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125; @Bean public BCryptPasswordEncoder passwordEncoder() throws UnknownHostException &#123; return new BCryptPasswordEncoder(); &#125; @Bean @LoadBalanced public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125;&#125;","text":"ëª©ì°¨ Spring Cloud - 30. Micro Serviceê°„ í†µì‹  ErrorDecoder êµ¬í˜„ Spring Cloud - 29. Micro Serviceê°„ í†µì‹  Feign client ì˜ˆì™¸ ì²˜ë¦¬ Spring Cloud - 28. Micro Serviceê°„ í†µì‹  Feign client Spring Cloud - 27. Micro Serviceê°„ í†µì‹  User Service@SpringBootApplication@EnableDiscoveryClient@Slf4jpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125; @Bean public BCryptPasswordEncoder passwordEncoder() throws UnknownHostException &#123; return new BCryptPasswordEncoder(); &#125; @Bean public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125;&#125; @Overridepublic UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); // List&lt;ResponseOrder&gt; orders = new ArrayList&lt;&gt;(); // userDto.setOrders(orders); String orderUrl = String.format(env.getProperty(&quot;order_service.url&quot;), userId); ResponseEntity&lt;List&lt;ResponseOrder&gt;&gt; orderListResponse = restTemplate.exchange(orderUrl , HttpMethod.GET , null , new ParameterizedTypeReference&lt;List&lt;ResponseOrder&gt;&gt;() &#123;&#125;); List&lt;ResponseOrder&gt; orderList = orderListResponse.getBody(); userDto.setOrders(orderList); return userDto;&#125; application.ymltoken: expiration_time: 84600000 secret: user_token_native_application_changedgateway: ip: 192.168.123.106order_service: url: http://127.0.0.1:8080/order-service/%s/orders token: expiration_time: 84600000 secret: user_token_native_application_changedgateway: ip: 192.168.123.106order_service: url: http://ORDER-SERVICE/order-service/%s/orders @SpringBootApplication@EnableDiscoveryClient@Slf4jpublic class UserServiceApplication &#123; public static void main(String[] args)&#123; SpringApplication.run(UserServiceApplication.class, args); &#125; @Bean public BCryptPasswordEncoder passwordEncoder() throws UnknownHostException &#123; return new BCryptPasswordEncoder(); &#125; @Bean @LoadBalanced public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 26. Spring Cloud Bus","slug":"spring/spring-cloud/spring-cloud-26","date":"2021-09-18T17:31:31.000Z","updated":"2024-02-26T15:36:16.369Z","comments":true,"path":"2021/09/19/spring/spring-cloud/spring-cloud-26/","link":"","permalink":"https://ckck803.github.io/2021/09/19/spring/spring-cloud/spring-cloud-26/","excerpt":"Config Server// https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-actuatorimplementation &#x27;org.springframework.boot:spring-boot-starter-actuator&#x27; // https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-bus-amqpimplementation &#x27;org.springframework.cloud:spring-cloud-starter-bus-amqp&#x27; Users Microservice// https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-bus-amqpimplementation &#x27;org.springframework.cloud:spring-cloud-starter-bus-amqp&#x27; Gateway Service// https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-bus-amqpimplementation &#x27;org.springframework.cloud:spring-cloud-starter-bus-amqp&#x27; Config Serverserver: port: 8888spring: application: name: config-service profiles: active: native cloud: config: server: native: search-locations: file://$&#123;user.home&#125;/dev/study/Spring-Cloud/gateway/git-local-repository rabbitmq: host: 127.0.0.1 port: 5672 username: guest password: guestmanagement: endpoints: web: exposure: include: health, busrefresh#spring:# application:# name: config-service# cloud:# config:# server:# git:# uri: https://github.com/ckck803/spring-cloud-config## uri: file:///Users/dongwoo-yang/dev/study/Spring-Cloud/gateway/git-local-repository User Service","text":"Config Server// https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-actuatorimplementation &#x27;org.springframework.boot:spring-boot-starter-actuator&#x27; // https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-bus-amqpimplementation &#x27;org.springframework.cloud:spring-cloud-starter-bus-amqp&#x27; Users Microservice// https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-bus-amqpimplementation &#x27;org.springframework.cloud:spring-cloud-starter-bus-amqp&#x27; Gateway Service// https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-bus-amqpimplementation &#x27;org.springframework.cloud:spring-cloud-starter-bus-amqp&#x27; Config Serverserver: port: 8888spring: application: name: config-service profiles: active: native cloud: config: server: native: search-locations: file://$&#123;user.home&#125;/dev/study/Spring-Cloud/gateway/git-local-repository rabbitmq: host: 127.0.0.1 port: 5672 username: guest password: guestmanagement: endpoints: web: exposure: include: health, busrefresh#spring:# application:# name: config-service# cloud:# config:# server:# git:# uri: https://github.com/ckck803/spring-cloud-config## uri: file:///Users/dongwoo-yang/dev/study/Spring-Cloud/gateway/git-local-repository User Serviceserver: port: 0spring: application: name: user-service h2: console: enabled: true settings: web-allow-others: true datasource: username: sa password: driver-class-name: org.h2.Driver url: jdbc:h2:mem:testdb rabbitmq: host: 127.0.0.1 port: 5672 username: guest password: guesteureka: instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekagreeting: message: Welcome to the Simple E-commerce.management: endpoints: web: exposure: include: refresh, health, beans, busrefresh#token:# expiration_time: 84600000# secret: user_token spring: cloud: config: uri: http://127.0.0.1:8888 name: config-server# profiles:# active: dev#spring:# cloud:# config:# uri: http://127.0.0.1:8888# name: ecommerce# profiles:# active: dev gateway serviceserver: port: 8080eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes: - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/login - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/users - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/** - Method=GET filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - AuthorizationHeaderFilter - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/actuator/** - Method=GET, POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: catalog-service uri: lb://CATALOG-SERVICE predicates: - Path=/catalog-service/** filters: - CustomFilter - id: order-service uri: lb://ORDER-SERVICE predicates: - Path=/order-service/** filters: - CustomFilter rabbitmq: host: 127.0.0.1 port: 5672 username: guest password: guesttoken: secret: user_tokenmanagement: endpoints: web: exposure: include: refresh, health, beans, httptrace, busrefresh spring: cloud: config: uri: http://127.0.0.1:8888 name: config-server# profiles:# active: dev#spring:# cloud:# config:# uri: http://127.0.0.1:8888# name: ecommerce# profiles:# active: dev","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 25. Spring Cloud Config Native","slug":"spring/spring-cloud/config/spring-cloud-25","date":"2021-09-18T16:31:31.000Z","updated":"2024-02-26T15:32:03.865Z","comments":true,"path":"2021/09/19/spring/spring-cloud/config/spring-cloud-25/","link":"","permalink":"https://ckck803.github.io/2021/09/19/spring/spring-cloud/config/spring-cloud-25/","excerpt":"ëª©ì°¨ Spring Cloud - 25. Spring Cloud Config Native Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸° Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸° Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2 Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor server: port: 8888spring: application: name: config-service profiles: active: native cloud: config: server: native: search-locations: file://$&#123;user.home&#125;/dev/study/Spring-Cloud/gateway/git-local-repository#spring:# application:# name: config-service# cloud:# config:# server:# git:# uri: https://github.com/ckck803/spring-cloud-config## uri: file:///Users/dongwoo-yang/dev/study/Spring-Cloud/gateway/git-local-repository","text":"ëª©ì°¨ Spring Cloud - 25. Spring Cloud Config Native Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸° Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸° Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2 Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor server: port: 8888spring: application: name: config-service profiles: active: native cloud: config: server: native: search-locations: file://$&#123;user.home&#125;/dev/study/Spring-Cloud/gateway/git-local-repository#spring:# application:# name: config-service# cloud:# config:# server:# git:# uri: https://github.com/ckck803/spring-cloud-config## uri: file:///Users/dongwoo-yang/dev/study/Spring-Cloud/gateway/git-local-repository","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Config","slug":"Spring/Spring-Cloud/Config","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Config/"}],"tags":[]},{"title":"Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸°","slug":"spring/spring-cloud/config/spring-cloud-24","date":"2021-09-18T15:31:31.000Z","updated":"2024-02-26T15:31:56.139Z","comments":true,"path":"2021/09/19/spring/spring-cloud/config/spring-cloud-24/","link":"","permalink":"https://ckck803.github.io/2021/09/19/spring/spring-cloud/config/spring-cloud-24/","excerpt":"ëª©ì°¨ Spring Cloud - 25. Spring Cloud Config Native Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸° Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸° Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2 Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor Client Service ì—ì„œ Config Server ë¡œë¶€í„° Config íŒŒì¼ ì½ì–´ì˜¤ê¸°// ì™¸ë¶€ Configë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Dependency ì„¤ì •implementation &#x27;org.springframework.cloud:spring-cloud-config-server&#x27;implementation &#x27;org.springframework.cloud:spring-cloud-starter-bootstrap&#x27; spring: cloud: config: uri: http://127.0.0.1:8888 name: ecommerce profiles: active: dev spring: cloud: config: uri: http://127.0.0.1:8888 name: ecommerce profiles: active: prod","text":"ëª©ì°¨ Spring Cloud - 25. Spring Cloud Config Native Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸° Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸° Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2 Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor Client Service ì—ì„œ Config Server ë¡œë¶€í„° Config íŒŒì¼ ì½ì–´ì˜¤ê¸°// ì™¸ë¶€ Configë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Dependency ì„¤ì •implementation &#x27;org.springframework.cloud:spring-cloud-config-server&#x27;implementation &#x27;org.springframework.cloud:spring-cloud-starter-bootstrap&#x27; spring: cloud: config: uri: http://127.0.0.1:8888 name: ecommerce profiles: active: dev spring: cloud: config: uri: http://127.0.0.1:8888 name: ecommerce profiles: active: prod","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Config","slug":"Spring/Spring-Cloud/Config","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Config/"}],"tags":[]},{"title":"Spring Boot - íŒŒì¼ ì—…ë¡œë“œ 2","slug":"spring/spring-resource/file-upload-2","date":"2021-09-18T14:39:59.000Z","updated":"2024-11-27T02:00:27.680Z","comments":true,"path":"2021/09/18/spring/spring-resource/file-upload-2/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-resource/file-upload-2/","excerpt":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring boot íŒŒì¼ ì—…ë¡œë“œ 2 getHeaderNames() part Typeìœ¼ë¡œ ì „ë‹¬ëœ ë°ì´í„°ì˜ ëª¨ë“  í•´ë” ì´ë¦„ì„ ê°€ì ¸ì˜¨ë‹¤. getHeader(headerName) getHeaderë©”ì†Œë“œì— í—¤ë” ì´ë¦„ì„ ë„˜ê²¨ì£¼ë©´ í•´ë” ì´ë¦„ì´ ê°–ëŠ” ìš”ì²­ì˜ ëª¨ë“  í•´ë” ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. getSubmittedFileName() íŒŒì¼ ëª…ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ë©”ì†Œë“œ getInputStream() Partì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ë©”ì†Œë“œ write(filepath) write ë©”ì†Œë“œì— íŒŒì¼ì´ ì €ì¥ë  File Pathë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ê²½ë¡œì— íŒŒì¼ì´ ì €ì¥í•˜ëŠ” ë©”ì†Œë“œ Collection&lt;Part&gt; parts = request.getParts();log.info(&quot;parts=&#123;&#125;&quot;, parts);for (Part part : parts) &#123; log.info(&quot;==== PART ====&quot;); log.info(&quot;name=&#123;&#125;&quot;, part.getName()); Collection&lt;String&gt; headerNames = part.getHeaderNames(); for (String headerName : headerNames) &#123; log.info(&quot;header &#123;&#125;: &#123;&#125;&quot;, headerName, part.getHeader(headerName)); &#125; //í¸ì˜ ë©”ì„œë“œ //content-disposition; filename log.info(&quot;submittedFilename=&#123;&#125;&quot;, part.getSubmittedFileName()); log.info(&quot;size=&#123;&#125;&quot;, part.getSize()); //part body size //ë°ì´í„° ì½ê¸° InputStream inputStream = part.getInputStream(); String body = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;body=&#123;&#125;&quot;, body); //íŒŒì¼ì— ì €ì¥í•˜ê¸° if (StringUtils.hasText(part.getSubmittedFileName())) &#123; String fullPath = fileDir + part.getSubmittedFileName(); log.info(&quot;íŒŒì¼ ì €ì¥ fullPath=&#123;&#125;&quot;, fullPath); part.write(fullPath); &#125;&#125; @Slf4j@Controller@RequestMapping(&quot;/servlet/v2&quot;)public class ServletUploadControllerV2 &#123; @Value(&quot;$&#123;file.dir&#125;&quot;) private String fileDir; @GetMapping(&quot;/upload&quot;) public String newFile() &#123; return &quot;upload-form&quot;; &#125; @PostMapping(&quot;/upload&quot;) public String saveFileV1(HttpServletRequest request) throws ServletException, IOException &#123; log.info(&quot;request=&#123;&#125;&quot;, request); String itemName = request.getParameter(&quot;itemName&quot;); log.info(&quot;itemName=&#123;&#125;&quot;, itemName); Collection&lt;Part&gt; parts = request.getParts(); log.info(&quot;parts=&#123;&#125;&quot;, parts); for (Part part : parts) &#123; log.info(&quot;==== PART ====&quot;); log.info(&quot;name=&#123;&#125;&quot;, part.getName()); Collection&lt;String&gt; headerNames = part.getHeaderNames(); for (String headerName : headerNames) &#123; log.info(&quot;header &#123;&#125;: &#123;&#125;&quot;, headerName, part.getHeader(headerName)); &#125; //í¸ì˜ ë©”ì„œë“œ //content-disposition; filename log.info(&quot;submittedFilename=&#123;&#125;&quot;, part.getSubmittedFileName()); log.info(&quot;size=&#123;&#125;&quot;, part.getSize()); //part body size //ë°ì´í„° ì½ê¸° InputStream inputStream = part.getInputStream(); String body = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;body=&#123;&#125;&quot;, body); //íŒŒì¼ì— ì €ì¥í•˜ê¸° if (StringUtils.hasText(part.getSubmittedFileName())) &#123; String fullPath = fileDir + part.getSubmittedFileName(); log.info(&quot;íŒŒì¼ ì €ì¥ fullPath=&#123;&#125;&quot;, fullPath); part.write(fullPath); &#125; &#125; return &quot;upload-form&quot;; &#125;&#125;","text":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring boot íŒŒì¼ ì—…ë¡œë“œ 2 getHeaderNames() part Typeìœ¼ë¡œ ì „ë‹¬ëœ ë°ì´í„°ì˜ ëª¨ë“  í•´ë” ì´ë¦„ì„ ê°€ì ¸ì˜¨ë‹¤. getHeader(headerName) getHeaderë©”ì†Œë“œì— í—¤ë” ì´ë¦„ì„ ë„˜ê²¨ì£¼ë©´ í•´ë” ì´ë¦„ì´ ê°–ëŠ” ìš”ì²­ì˜ ëª¨ë“  í•´ë” ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. getSubmittedFileName() íŒŒì¼ ëª…ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ë©”ì†Œë“œ getInputStream() Partì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ë©”ì†Œë“œ write(filepath) write ë©”ì†Œë“œì— íŒŒì¼ì´ ì €ì¥ë  File Pathë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ê²½ë¡œì— íŒŒì¼ì´ ì €ì¥í•˜ëŠ” ë©”ì†Œë“œ Collection&lt;Part&gt; parts = request.getParts();log.info(&quot;parts=&#123;&#125;&quot;, parts);for (Part part : parts) &#123; log.info(&quot;==== PART ====&quot;); log.info(&quot;name=&#123;&#125;&quot;, part.getName()); Collection&lt;String&gt; headerNames = part.getHeaderNames(); for (String headerName : headerNames) &#123; log.info(&quot;header &#123;&#125;: &#123;&#125;&quot;, headerName, part.getHeader(headerName)); &#125; //í¸ì˜ ë©”ì„œë“œ //content-disposition; filename log.info(&quot;submittedFilename=&#123;&#125;&quot;, part.getSubmittedFileName()); log.info(&quot;size=&#123;&#125;&quot;, part.getSize()); //part body size //ë°ì´í„° ì½ê¸° InputStream inputStream = part.getInputStream(); String body = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;body=&#123;&#125;&quot;, body); //íŒŒì¼ì— ì €ì¥í•˜ê¸° if (StringUtils.hasText(part.getSubmittedFileName())) &#123; String fullPath = fileDir + part.getSubmittedFileName(); log.info(&quot;íŒŒì¼ ì €ì¥ fullPath=&#123;&#125;&quot;, fullPath); part.write(fullPath); &#125;&#125; @Slf4j@Controller@RequestMapping(&quot;/servlet/v2&quot;)public class ServletUploadControllerV2 &#123; @Value(&quot;$&#123;file.dir&#125;&quot;) private String fileDir; @GetMapping(&quot;/upload&quot;) public String newFile() &#123; return &quot;upload-form&quot;; &#125; @PostMapping(&quot;/upload&quot;) public String saveFileV1(HttpServletRequest request) throws ServletException, IOException &#123; log.info(&quot;request=&#123;&#125;&quot;, request); String itemName = request.getParameter(&quot;itemName&quot;); log.info(&quot;itemName=&#123;&#125;&quot;, itemName); Collection&lt;Part&gt; parts = request.getParts(); log.info(&quot;parts=&#123;&#125;&quot;, parts); for (Part part : parts) &#123; log.info(&quot;==== PART ====&quot;); log.info(&quot;name=&#123;&#125;&quot;, part.getName()); Collection&lt;String&gt; headerNames = part.getHeaderNames(); for (String headerName : headerNames) &#123; log.info(&quot;header &#123;&#125;: &#123;&#125;&quot;, headerName, part.getHeader(headerName)); &#125; //í¸ì˜ ë©”ì„œë“œ //content-disposition; filename log.info(&quot;submittedFilename=&#123;&#125;&quot;, part.getSubmittedFileName()); log.info(&quot;size=&#123;&#125;&quot;, part.getSize()); //part body size //ë°ì´í„° ì½ê¸° InputStream inputStream = part.getInputStream(); String body = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;body=&#123;&#125;&quot;, body); //íŒŒì¼ì— ì €ì¥í•˜ê¸° if (StringUtils.hasText(part.getSubmittedFileName())) &#123; String fullPath = fileDir + part.getSubmittedFileName(); log.info(&quot;íŒŒì¼ ì €ì¥ fullPath=&#123;&#125;&quot;, fullPath); part.write(fullPath); &#125; &#125; return &quot;upload-form&quot;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"File","slug":"Spring/Spring-Boot/File","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/File/"}],"tags":[]},{"title":"Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸°","slug":"spring/spring-cloud/config/spring-cloud-23","date":"2021-09-18T14:31:31.000Z","updated":"2024-02-26T15:31:47.256Z","comments":true,"path":"2021/09/18/spring/spring-cloud/config/spring-cloud-23/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/config/spring-cloud-23/","excerpt":"ëª©ì°¨ Spring Cloud - 25. Spring Cloud Config Native Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸° Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸° Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2 Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor Spring Cloud Config Server ì˜ì¡´ì„± ì¶”ê°€// ì™¸ë¶€ Configë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Dependency ì„¤ì •implementation &#x27;org.springframework.cloud:spring-cloud-config-server&#x27;implementation &#x27;org.springframework.cloud:spring-cloud-starter-bootstrap&#x27; Config Server ë§Œë“¤ê¸°@EnableConfigServer ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ì—¬ Config Serverë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤. @SpringBootApplication@EnableConfigServerpublic class ConfigServiceApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigServiceApplication.class, args); &#125;&#125; Config íŒŒì¼ ì½ì–´ì˜¤ê¸°Config íŒŒì¼ ìœ„ì¹˜ì— ë”°ë¼ì„œ Spring Cloud Config Server ì—ì„œ Config íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ë°©ì‹ì´ ë‹¬ë¼ì§„ë‹¤.","text":"ëª©ì°¨ Spring Cloud - 25. Spring Cloud Config Native Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸° Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸° Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2 Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor Spring Cloud Config Server ì˜ì¡´ì„± ì¶”ê°€// ì™¸ë¶€ Configë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Dependency ì„¤ì •implementation &#x27;org.springframework.cloud:spring-cloud-config-server&#x27;implementation &#x27;org.springframework.cloud:spring-cloud-starter-bootstrap&#x27; Config Server ë§Œë“¤ê¸°@EnableConfigServer ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ì—¬ Config Serverë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤. @SpringBootApplication@EnableConfigServerpublic class ConfigServiceApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigServiceApplication.class, args); &#125;&#125; Config íŒŒì¼ ì½ì–´ì˜¤ê¸°Config íŒŒì¼ ìœ„ì¹˜ì— ë”°ë¼ì„œ Spring Cloud Config Server ì—ì„œ Config íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ë°©ì‹ì´ ë‹¬ë¼ì§„ë‹¤. Local ì— ì €ì¥ëœ Config íŒŒì¼ ì½ì–´ì˜¤ê¸°server: port:8888spring: application: name: config-service cloud: config: server: git: uri: file:///Users/dongwoo-yang/dev/study/Spring-Cloud/gateway/git-local-repository server: port: 8888spring: application: name: config-service profiles: active: native cloud: config: server: native: search-locations: file://$&#123;user.home&#125;/dev/study/Spring-Cloud/gateway/git-local-repository Git Repository ë¡œ ë¶€í„° Config íŒŒì¼ ì½ì–´ì˜¤ê¸°server: port: 8888spring: application: name: config-service cloud: config: server: git: uri: https://github.com/ckck803/spring-cloud-config Git Privagte Repository ë¡œ ë¶€í„° Config íŒŒì¼ ì½ì–´ì˜¤ê¸° username, password ë¥¼ ì´ìš©í•œ ì¸ì¦ spring: cloud: config: server: git: uri: https://github.com/spring-cloud-samples/config-repo username: trolley password: strongpassword ssh key ë¥¼ ì´ìš©í•œ ì¸ì¦ spring: cloud: config: server: git: uri: git@gitserver.com:team/repo1.git ignoreLocalSshSettings: true hostKey: someHostKey # hostKey ê°€ ì—†ì„ ê²½ìš° ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìŒ hostKeyAlgorithm: ssh-rsa # hostKey ê°€ ì—†ì„ ê²½ìš° ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìŒ privateKey: | -----BEGIN RSA PRIVATE KEY----- MIIEpgIBAAKCAQEAx4UbaDzY5xjW6hc9jwN0mX33XpTDVW9WqHp5AKaRbtAC3DqX IXFMPgw3K45jxRb93f8tv9vL3rD9CUG1Gv4FM+o7ds7FRES5RTjv2RT/JVNJCoqF .... -----END RSA PRIVATE KEY-----","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Config","slug":"Spring/Spring-Cloud/Config","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Config/"}],"tags":[]},{"title":"Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ","slug":"spring/spring-resource/part","date":"2021-09-18T13:39:59.000Z","updated":"2024-11-27T02:00:27.766Z","comments":true,"path":"2021/09/18/spring/spring-resource/part/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-resource/part/","excerpt":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring boot íŒŒì¼ ì—…ë¡œë“œForm íƒœê·¸ì— enctype ì˜µì…˜ìœ¼ë¡œ multipart/form-data ë¥¼ ëª…ì‹œí•˜ë©´ íŒŒì¼ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. &lt;form th:action method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;!DOCTYPE HTML&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;py-5 text-center&quot;&gt; &lt;h2&gt;ìƒí’ˆ ë“±ë¡ í¼&lt;/h2&gt; &lt;/div&gt; &lt;h4 class=&quot;mb-3&quot;&gt;ìƒí’ˆ ì…ë ¥&lt;/h4&gt; &lt;form th:action method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;ul&gt; &lt;li&gt;ìƒí’ˆëª… &lt;input type=&quot;text&quot; name=&quot;itemName&quot;&gt;&lt;/li&gt; &lt;li&gt;íŒŒì¼&lt;input type=&quot;file&quot; name=&quot;file&quot; &gt;&lt;/li&gt; &lt;/ul&gt; &lt;input type=&quot;submit&quot;/&gt; &lt;/form&gt;&lt;/div&gt; &lt;!-- /container --&gt;&lt;/body&gt;&lt;/html&gt; Part ì¸í„°í˜ì´ìŠ¤Servlet ì—ì„œëŠ” HTTP ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ Part ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. getHeaderNames() part Typeìœ¼ë¡œ ì „ë‹¬ëœ ë°ì´í„°ì˜ ëª¨ë“  í•´ë” ì´ë¦„ì„ ê°€ì ¸ì˜¨ë‹¤. getContentType() íŒŒì¼ì˜ ContentTypeì„ ê°€ì ¸ì˜¨ë‹¤. getHeader(headerName) getHeaderë©”ì†Œë“œì— í—¤ë” ì´ë¦„ì„ ë„˜ê²¨ì£¼ë©´ í•´ë” ì´ë¦„ì´ ê°–ëŠ” ìš”ì²­ì˜ ëª¨ë“  í•´ë” ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. getSubmittedFileName() íŒŒì¼ ëª…ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ë©”ì†Œë“œ getInputStream() Partì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ë©”ì†Œë“œ write(filepath) write ë©”ì†Œë“œì— íŒŒì¼ì´ ì €ì¥ë  File Pathë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ê²½ë¡œì— íŒŒì¼ì´ ì €ì¥í•˜ëŠ” ë©”ì†Œë“œ","text":"ëª©ì°¨ Spring Boot - StreamingResponseBody Spring Boot - ResourceRegion Spring Boot - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„í•˜ê¸° Spring Boot - Resource ì¶”ìƒí™” Spring Boot - MultipartFile ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ Spring Boot - MultipartFile ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring Boot - Part ê°ì²´ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ Spring boot íŒŒì¼ ì—…ë¡œë“œForm íƒœê·¸ì— enctype ì˜µì…˜ìœ¼ë¡œ multipart/form-data ë¥¼ ëª…ì‹œí•˜ë©´ íŒŒì¼ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. &lt;form th:action method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;!DOCTYPE HTML&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;py-5 text-center&quot;&gt; &lt;h2&gt;ìƒí’ˆ ë“±ë¡ í¼&lt;/h2&gt; &lt;/div&gt; &lt;h4 class=&quot;mb-3&quot;&gt;ìƒí’ˆ ì…ë ¥&lt;/h4&gt; &lt;form th:action method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;ul&gt; &lt;li&gt;ìƒí’ˆëª… &lt;input type=&quot;text&quot; name=&quot;itemName&quot;&gt;&lt;/li&gt; &lt;li&gt;íŒŒì¼&lt;input type=&quot;file&quot; name=&quot;file&quot; &gt;&lt;/li&gt; &lt;/ul&gt; &lt;input type=&quot;submit&quot;/&gt; &lt;/form&gt;&lt;/div&gt; &lt;!-- /container --&gt;&lt;/body&gt;&lt;/html&gt; Part ì¸í„°í˜ì´ìŠ¤Servlet ì—ì„œëŠ” HTTP ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ Part ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. getHeaderNames() part Typeìœ¼ë¡œ ì „ë‹¬ëœ ë°ì´í„°ì˜ ëª¨ë“  í•´ë” ì´ë¦„ì„ ê°€ì ¸ì˜¨ë‹¤. getContentType() íŒŒì¼ì˜ ContentTypeì„ ê°€ì ¸ì˜¨ë‹¤. getHeader(headerName) getHeaderë©”ì†Œë“œì— í—¤ë” ì´ë¦„ì„ ë„˜ê²¨ì£¼ë©´ í•´ë” ì´ë¦„ì´ ê°–ëŠ” ìš”ì²­ì˜ ëª¨ë“  í•´ë” ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. getSubmittedFileName() íŒŒì¼ ëª…ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ë©”ì†Œë“œ getInputStream() Partì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ë©”ì†Œë“œ write(filepath) write ë©”ì†Œë“œì— íŒŒì¼ì´ ì €ì¥ë  File Pathë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ê²½ë¡œì— íŒŒì¼ì´ ì €ì¥í•˜ëŠ” ë©”ì†Œë“œ public interface Part &#123; InputStream getInputStream() throws IOException; String getContentType(); String getName(); String getSubmittedFileName(); long getSize(); void write(String var1) throws IOException; void delete() throws IOException; String getHeader(String var1); Collection&lt;String&gt; getHeaders(String var1); Collection&lt;String&gt; getHeaderNames();&#125; Request ê°ì²´ë‚´ íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°HttpServletRequest ê°ì²´ë‚´ getParts ë©”ì†Œë“œë¥¼ í†µí•´ Part ê°ì²´ë“¤ì„ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤. public String saveFileV1(HttpServletRequest request) throws ServletException, IOException&#123; ... Collection&lt;Part&gt; parts = request.getParts(); @Slf4j@Controller@RequestMapping(&quot;/servlet/v1&quot;)public class ServletUploadControllerV1 &#123; @GetMapping(&quot;upload&quot;) public String newFile()&#123; return &quot;upload-form&quot;; &#125; @PostMapping(&quot;upload&quot;) public String saveFileV1(HttpServletRequest request) throws ServletException, IOException&#123; log.info(&quot;request=&#123;&#125;&quot;, request); String itemName = request.getParameter(&quot;itemName&quot;); log.info(&quot;itemName=&#123;&#125;&quot;, itemName); Collection&lt;Part&gt; parts = request.getParts(); log.info(&quot;parts=&#123;&#125;&quot;, parts); return &quot;upload-form&quot;; &#125;&#125; Part ê°ì²´ë¥¼ í†µí•´ íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°Collection&lt;Part&gt; parts = request.getParts();log.info(&quot;parts=&#123;&#125;&quot;, parts);for (Part part : parts) &#123; log.info(&quot;==== PART ====&quot;); log.info(&quot;name=&#123;&#125;&quot;, part.getName()); Collection&lt;String&gt; headerNames = part.getHeaderNames(); for (String headerName : headerNames) &#123; log.info(&quot;header &#123;&#125;: &#123;&#125;&quot;, headerName, part.getHeader(headerName)); &#125; //í¸ì˜ ë©”ì„œë“œ //content-disposition; filename log.info(&quot;submittedFilename=&#123;&#125;&quot;, part.getSubmittedFileName()); log.info(&quot;size=&#123;&#125;&quot;, part.getSize()); //part body size //ë°ì´í„° ì½ê¸° InputStream inputStream = part.getInputStream(); String body = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;body=&#123;&#125;&quot;, body); //íŒŒì¼ì— ì €ì¥í•˜ê¸° if (StringUtils.hasText(part.getSubmittedFileName())) &#123; String fullPath = fileDir + part.getSubmittedFileName(); log.info(&quot;íŒŒì¼ ì €ì¥ fullPath=&#123;&#125;&quot;, fullPath); part.write(fullPath); &#125;&#125; @Slf4j@Controller@RequestMapping(&quot;/servlet/v2&quot;)public class ServletUploadControllerV2 &#123; @Value(&quot;$&#123;file.dir&#125;&quot;) private String fileDir; @GetMapping(&quot;/upload&quot;) public String newFile() &#123; return &quot;upload-form&quot;; &#125; @PostMapping(&quot;/upload&quot;) public String saveFileV1(HttpServletRequest request) throws ServletException, IOException &#123; log.info(&quot;request=&#123;&#125;&quot;, request); String itemName = request.getParameter(&quot;itemName&quot;); log.info(&quot;itemName=&#123;&#125;&quot;, itemName); Collection&lt;Part&gt; parts = request.getParts(); log.info(&quot;parts=&#123;&#125;&quot;, parts); for (Part part : parts) &#123; log.info(&quot;==== PART ====&quot;); log.info(&quot;name=&#123;&#125;&quot;, part.getName()); Collection&lt;String&gt; headerNames = part.getHeaderNames(); for (String headerName : headerNames) &#123; log.info(&quot;header &#123;&#125;: &#123;&#125;&quot;, headerName, part.getHeader(headerName)); &#125; //í¸ì˜ ë©”ì„œë“œ //content-disposition; filename log.info(&quot;submittedFilename=&#123;&#125;&quot;, part.getSubmittedFileName()); log.info(&quot;size=&#123;&#125;&quot;, part.getSize()); //part body size //ë°ì´í„° ì½ê¸° InputStream inputStream = part.getInputStream(); String body = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info(&quot;body=&#123;&#125;&quot;, body); //íŒŒì¼ì— ì €ì¥í•˜ê¸° if (StringUtils.hasText(part.getSubmittedFileName())) &#123; String fullPath = fileDir + part.getSubmittedFileName(); log.info(&quot;íŒŒì¼ ì €ì¥ fullPath=&#123;&#125;&quot;, fullPath); part.write(fullPath); &#125; &#125; return &quot;upload-form&quot;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"File","slug":"Spring/Spring-Boot/File","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/File/"}],"tags":[]},{"title":"Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2","slug":"spring/spring-cloud/config/spring-cloud-22","date":"2021-09-18T13:31:31.000Z","updated":"2024-02-26T15:31:41.219Z","comments":true,"path":"2021/09/18/spring/spring-cloud/config/spring-cloud-22/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/config/spring-cloud-22/","excerpt":"ëª©ì°¨ Spring Cloud - 25. Spring Cloud Config Native Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸° Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸° Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2 Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 22 - Spring Cloud Config ì—°ë™ Actuator 2// ì™¸ë¶€ Configë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Dependency ì„¤ì •implementation &#x27;org.springframework.cloud:spring-cloud-starter-config&#x27;implementation &#x27;org.springframework.cloud:spring-cloud-starter-bootstrap&#x27;// https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-actuatorimplementation &#x27;org.springframework.boot:spring-boot-starter-actuator&#x27; spring: cloud: config: uri: http://127.0.0.1:8888 name: ecommerce @SpringBootApplicationpublic class ApigatewayServiceApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ApigatewayServiceApplication.class, args); &#125; @Bean public HttpTraceRepository httpTraceRepository()&#123; return new InMemoryHttpTraceRepository(); &#125;&#125; server: port: 8080eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes:# - id: user-service# uri: lb://USER-SERVICE# predicates:# - Path=/user-service/**# filters:# - CustomFilter - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/login - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/users - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/** - Method=GET filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - AuthorizationHeaderFilter - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/actuator/** - Method=GET, POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: catalog-service uri: lb://CATALOG-SERVICE predicates: - Path=/catalog-service/** filters: - CustomFilter - id: order-service uri: lb://ORDER-SERVICE predicates: - Path=/order-service/** filters: - CustomFiltertoken: secret: user_tokenmanagement: endpoints: web: exposure: include: refresh, health, beans, httptrace","text":"ëª©ì°¨ Spring Cloud - 25. Spring Cloud Config Native Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸° Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸° Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2 Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 22 - Spring Cloud Config ì—°ë™ Actuator 2// ì™¸ë¶€ Configë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Dependency ì„¤ì •implementation &#x27;org.springframework.cloud:spring-cloud-starter-config&#x27;implementation &#x27;org.springframework.cloud:spring-cloud-starter-bootstrap&#x27;// https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-actuatorimplementation &#x27;org.springframework.boot:spring-boot-starter-actuator&#x27; spring: cloud: config: uri: http://127.0.0.1:8888 name: ecommerce @SpringBootApplicationpublic class ApigatewayServiceApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ApigatewayServiceApplication.class, args); &#125; @Bean public HttpTraceRepository httpTraceRepository()&#123; return new InMemoryHttpTraceRepository(); &#125;&#125; server: port: 8080eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes:# - id: user-service# uri: lb://USER-SERVICE# predicates:# - Path=/user-service/**# filters:# - CustomFilter - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/login - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/users - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/** - Method=GET filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - AuthorizationHeaderFilter - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/actuator/** - Method=GET, POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: catalog-service uri: lb://CATALOG-SERVICE predicates: - Path=/catalog-service/** filters: - CustomFilter - id: order-service uri: lb://ORDER-SERVICE predicates: - Path=/order-service/** filters: - CustomFiltertoken: secret: user_tokenmanagement: endpoints: web: exposure: include: refresh, health, beans, httptrace","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Config","slug":"Spring/Spring-Cloud/Config","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Config/"}],"tags":[]},{"title":"Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor","slug":"spring/spring-cloud/config/spring-cloud-21","date":"2021-09-18T12:31:31.000Z","updated":"2024-02-26T15:31:16.190Z","comments":true,"path":"2021/09/18/spring/spring-cloud/config/spring-cloud-21/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/config/spring-cloud-21/","excerpt":"ëª©ì°¨ Spring Cloud - 25. Spring Cloud Config Native Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸° Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸° Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2 Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor ì°¸ê³  https://www.baeldung.com/spring-cloud-config-without-git https://mangkyu.tistory.com/253 Spring Cloud Config ServerSpring Cloud Config Server ì˜ì¡´ì„± ì¶”ê°€// ì™¸ë¶€ Configë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Dependency ì„¤ì •implementation &#x27;org.springframework.cloud:spring-cloud-config-server&#x27;implementation &#x27;org.springframework.cloud:spring-cloud-starter-bootstrap&#x27; /&#123;application&#125;/&#123;profile&#125;[/&#123;label&#125;]/&#123;application&#125;-&#123;profile&#125;.yml/&#123;label&#125;/&#123;application&#125;-&#123;profile&#125;.yml/&#123;application&#125;-&#123;profile&#125;.properties/&#123;label&#125;/&#123;application&#125;-&#123;profile&#125;.properties @EnableConfigServer ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ì—¬ Config Serverë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤.","text":"ëª©ì°¨ Spring Cloud - 25. Spring Cloud Config Native Spring Cloud - 24. Client Service ì—ì„œ Config Server ì—°ë™í•˜ê¸° Spring Cloud - 23. Spring Cloud Config Server ë§Œë“¤ê¸° Spring Cloud - 22. Spring Cloud Config ì—°ë™ Actuator 2 Spring Cloud - 21. Spring Cloud Config ì—°ë™ Actuactor ì°¸ê³  https://www.baeldung.com/spring-cloud-config-without-git https://mangkyu.tistory.com/253 Spring Cloud Config ServerSpring Cloud Config Server ì˜ì¡´ì„± ì¶”ê°€// ì™¸ë¶€ Configë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Dependency ì„¤ì •implementation &#x27;org.springframework.cloud:spring-cloud-config-server&#x27;implementation &#x27;org.springframework.cloud:spring-cloud-starter-bootstrap&#x27; /&#123;application&#125;/&#123;profile&#125;[/&#123;label&#125;]/&#123;application&#125;-&#123;profile&#125;.yml/&#123;label&#125;/&#123;application&#125;-&#123;profile&#125;.yml/&#123;application&#125;-&#123;profile&#125;.properties/&#123;label&#125;/&#123;application&#125;-&#123;profile&#125;.properties @EnableConfigServer ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ì—¬ Config Serverë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤. @SpringBootApplication@EnableConfigServerpublic class ConfigServiceApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigServiceApplication.class, args); &#125;&#125; server: port: 8888spring: application: name: config-service cloud: config: server: git: uri: file:///Users/dongwoo-yang/dev/study/Spring-Cloud/gateway/git-local-repository default-label: master spring: cloud: config: uri: http://127.0.0.1:8888 name: ecommerce @RestControllerpublic class UserController &#123; private Environment env; private UserService userService; private Greeting greeting; public UserController(Environment env, UserService userService) &#123; this.env = env; this.userService = userService; &#125; @GetMapping(&quot;/health_check&quot;) public String status() &#123; return String.format(&quot;It&#x27;s Working in User Service&quot; + &quot;, Port(local.server.port) = &quot; + env.getProperty(&quot;local.server.port&quot;) + &quot;\\n&quot; + &quot;, Port(server.port) = &quot; + env.getProperty(&quot;server.port&quot;) + &quot;\\n&quot; + &quot;, token secret = &quot; + env.getProperty(&quot;token.secret&quot;) + &quot;\\n&quot; + &quot;, token expiration time = &quot; + env.getProperty(&quot;token.expiration_time&quot;)); &#125; @GetMapping(&quot;/welcome&quot;) public String welcome() &#123; return env.getProperty(&quot;greeting.message&quot;); &#125; @GetMapping(&quot;/welcome_value&quot;) public String welcomeValue() &#123; return greeting.getMessage(); &#125; @PostMapping(&quot;/users&quot;) public ResponseEntity createUser(@RequestBody RequestUser user) &#123; ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); UserDto userDto = modelMapper.map(user, UserDto.class); userService.createUser(userDto); ResponseUser responseUser = modelMapper.map(userDto, ResponseUser.class); return ResponseEntity.status(HttpStatus.CREATED).body(responseUser); &#125; @GetMapping(&quot;/users&quot;) public ResponseEntity&lt;List&lt;ResponseUser&gt;&gt; getUsers() &#123; Iterable&lt;UserEntity&gt; userList = userService.getUserByAll(); List&lt;ResponseUser&gt; result = new ArrayList&lt;&gt;(); userList.forEach(v -&gt; &#123; result.add(new ModelMapper().map(v, ResponseUser.class)); &#125;); return ResponseEntity.status(HttpStatus.OK).body(result); &#125; @GetMapping(&quot;/users/&#123;userId&#125;&quot;) public ResponseEntity&lt;ResponseUser&gt; getUsers(@PathVariable(&quot;userId&quot;) String userId) &#123; UserDto userDto = userService.getUserByUserId(userId); ResponseUser returnValue = new ModelMapper().map(userDto, ResponseUser.class); return ResponseEntity.status(HttpStatus.OK).body(returnValue); &#125;&#125; Spring Cloud Config Client// https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-actuatorimplementation &#x27;org.springframework.boot:spring-boot-starter-actuator&#x27; server: port: 0spring: application: name: user-service h2: console: enabled: true settings: web-allow-others: true datasource: username: sa password: driver-class-name: org.h2.Driver url: jdbc:h2:mem:testdbeureka: instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekagreeting: message: Welcome to the Simple E-commerce.management: endpoints: web: exposure: include: refresh, health, beans#token:# expiration_time: 84600000# secret: user_token","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Config","slug":"Spring/Spring-Cloud/Config","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Config/"}],"tags":[]},{"title":"Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€","slug":"spring/spring-cloud/spring-cloud-20","date":"2021-09-18T11:31:31.000Z","updated":"2024-02-26T15:36:10.833Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-20/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-20/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice AuthorizationHeaderFilter ì¶”ê°€@Component@Slf4jpublic class AuthorizationHeaderFilter extends AbstractGatewayFilterFactory&lt;AuthorizationHeaderFilter.Config&gt; &#123; private Environment env; public AuthorizationHeaderFilter(Environment env)&#123; super(Config.class); this.env = env; &#125; // login -&gt; token -&gt; users (with token) -&gt; header(include token) @Override public GatewayFilter apply(Config config) &#123; return ((exchange, chain) -&gt; &#123; ServerHttpRequest request = exchange.getRequest(); if(!request.getHeaders().containsKey(HttpHeaders.AUTHORIZATION))&#123; return onError(exchange, &quot;No Authorization Header&quot;, HttpStatus.UNAUTHORIZED); &#125; String authorizationHeader = request.getHeaders().get(HttpHeaders.AUTHORIZATION).get(0); String jwt = authorizationHeader.replace(&quot;Bearer &quot;, &quot;&quot;); if(!isJwtValid(jwt))&#123; return onError(exchange, &quot;JWT token is not valid&quot;, HttpStatus.UNAUTHORIZED); &#125; return chain.filter(exchange); &#125;); &#125; private boolean isJwtValid(String jwt)&#123; boolean returnValue = true; String subject = null; String key = env.getProperty(&quot;token.secret&quot;); try &#123; subject = Jwts.parser() .setSigningKey(env.getProperty(&quot;token.secret&quot;)) .parseClaimsJws(jwt).getBody() .getSubject(); &#125; catch (Exception ex)&#123; returnValue = false; &#125; if(subject == null || subject.isEmpty())&#123; returnValue = false; &#125; return returnValue; &#125; private Mono&lt;Void&gt; onError(ServerWebExchange exchange, String error, HttpStatus httpStatus) &#123; ServerHttpResponse response = exchange.getResponse(); response.setStatusCode(httpStatus); log.error(error); return response.setComplete(); &#125; public static class Config&#123; &#125;&#125; // https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api implementation group: &#x27;javax.xml.bind&#x27;, name: &#x27;jaxb-api&#x27;, version: &#x27;2.3.1&#x27; server: port: 8080eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes:# - id: user-service# uri: lb://USER-SERVICE# predicates:# - Path=/user-service/**# filters:# - CustomFilter - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/login - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/users - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/** - Method=GET filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - AuthorizationHeaderFilter - id: catalog-service uri: lb://CATALOG-SERVICE predicates: - Path=/catalog-service/** filters: - CustomFilter - id: order-service uri: lb://ORDER-SERVICE predicates: - Path=/order-service/** filters: - CustomFiltertoken: secret: user_token","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice AuthorizationHeaderFilter ì¶”ê°€@Component@Slf4jpublic class AuthorizationHeaderFilter extends AbstractGatewayFilterFactory&lt;AuthorizationHeaderFilter.Config&gt; &#123; private Environment env; public AuthorizationHeaderFilter(Environment env)&#123; super(Config.class); this.env = env; &#125; // login -&gt; token -&gt; users (with token) -&gt; header(include token) @Override public GatewayFilter apply(Config config) &#123; return ((exchange, chain) -&gt; &#123; ServerHttpRequest request = exchange.getRequest(); if(!request.getHeaders().containsKey(HttpHeaders.AUTHORIZATION))&#123; return onError(exchange, &quot;No Authorization Header&quot;, HttpStatus.UNAUTHORIZED); &#125; String authorizationHeader = request.getHeaders().get(HttpHeaders.AUTHORIZATION).get(0); String jwt = authorizationHeader.replace(&quot;Bearer &quot;, &quot;&quot;); if(!isJwtValid(jwt))&#123; return onError(exchange, &quot;JWT token is not valid&quot;, HttpStatus.UNAUTHORIZED); &#125; return chain.filter(exchange); &#125;); &#125; private boolean isJwtValid(String jwt)&#123; boolean returnValue = true; String subject = null; String key = env.getProperty(&quot;token.secret&quot;); try &#123; subject = Jwts.parser() .setSigningKey(env.getProperty(&quot;token.secret&quot;)) .parseClaimsJws(jwt).getBody() .getSubject(); &#125; catch (Exception ex)&#123; returnValue = false; &#125; if(subject == null || subject.isEmpty())&#123; returnValue = false; &#125; return returnValue; &#125; private Mono&lt;Void&gt; onError(ServerWebExchange exchange, String error, HttpStatus httpStatus) &#123; ServerHttpResponse response = exchange.getResponse(); response.setStatusCode(httpStatus); log.error(error); return response.setComplete(); &#125; public static class Config&#123; &#125;&#125; // https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api implementation group: &#x27;javax.xml.bind&#x27;, name: &#x27;jaxb-api&#x27;, version: &#x27;2.3.1&#x27; server: port: 8080eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes:# - id: user-service# uri: lb://USER-SERVICE# predicates:# - Path=/user-service/**# filters:# - CustomFilter - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/login - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/users - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/** - Method=GET filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - AuthorizationHeaderFilter - id: catalog-service uri: lb://CATALOG-SERVICE predicates: - Path=/catalog-service/** filters: - CustomFilter - id: order-service uri: lb://ORDER-SERVICE predicates: - Path=/order-service/** filters: - CustomFiltertoken: secret: user_token","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 19. Users Microservice JWT ìƒì„±","slug":"spring/spring-cloud/spring-cloud-19","date":"2021-09-18T10:31:31.000Z","updated":"2024-02-26T15:36:07.096Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-19/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-19/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice JWT ìƒì„±// https://mvnrepository.com/artifact/io.jsonwebtoken/jjwtimplementation group: &#x27;io.jsonwebtoken&#x27;, name: &#x27;jjwt&#x27;, version: &#x27;0.9.1&#x27; @Slf4jpublic class AuthenticationFilter extends UsernamePasswordAuthenticationFilter &#123; private UserService userService; private Environment env; public AuthenticationFilter(AuthenticationManager authenticationManager, UserService userService, Environment env)&#123; super.setAuthenticationManager( authenticationManager); this.userService = userService; this.env = env; &#125; @Override public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException &#123; try &#123; RequestLogin creds = new ObjectMapper().readValue(request.getInputStream(), RequestLogin.class); Authentication token = new UsernamePasswordAuthenticationToken(creds.getEmail(), creds.getPassword(), new ArrayList&lt;&gt;()); return getAuthenticationManager().authenticate(token); &#125; catch (IOException e)&#123; throw new RuntimeException(e); &#125; &#125; @Override protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException &#123; String username = ((User)authResult.getPrincipal()).getUsername(); UserDto userDetails = userService.getUserDetailsByEmail(username); String token = Jwts.builder() .setSubject(userDetails.getUserId()) .setExpiration(new Date(System.currentTimeMillis() + Long.parseLong(env.getProperty(&quot;token.expiration_time&quot;)))) .signWith(SignatureAlgorithm.HS512, env.getProperty(&quot;token.secret&quot;)) .compact(); response.addHeader(&quot;token&quot;, token); response.addHeader(&quot;userId&quot;, userDetails.getUserId()); &#125;&#125;","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice JWT ìƒì„±// https://mvnrepository.com/artifact/io.jsonwebtoken/jjwtimplementation group: &#x27;io.jsonwebtoken&#x27;, name: &#x27;jjwt&#x27;, version: &#x27;0.9.1&#x27; @Slf4jpublic class AuthenticationFilter extends UsernamePasswordAuthenticationFilter &#123; private UserService userService; private Environment env; public AuthenticationFilter(AuthenticationManager authenticationManager, UserService userService, Environment env)&#123; super.setAuthenticationManager( authenticationManager); this.userService = userService; this.env = env; &#125; @Override public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException &#123; try &#123; RequestLogin creds = new ObjectMapper().readValue(request.getInputStream(), RequestLogin.class); Authentication token = new UsernamePasswordAuthenticationToken(creds.getEmail(), creds.getPassword(), new ArrayList&lt;&gt;()); return getAuthenticationManager().authenticate(token); &#125; catch (IOException e)&#123; throw new RuntimeException(e); &#125; &#125; @Override protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException &#123; String username = ((User)authResult.getPrincipal()).getUsername(); UserDto userDetails = userService.getUserDetailsByEmail(username); String token = Jwts.builder() .setSubject(userDetails.getUserId()) .setExpiration(new Date(System.currentTimeMillis() + Long.parseLong(env.getProperty(&quot;token.expiration_time&quot;)))) .signWith(SignatureAlgorithm.HS512, env.getProperty(&quot;token.secret&quot;)) .compact(); response.addHeader(&quot;token&quot;, token); response.addHeader(&quot;userId&quot;, userDetails.getUserId()); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬","slug":"spring/spring-cloud/spring-cloud-18","date":"2021-09-18T09:31:31.000Z","updated":"2024-02-26T15:36:03.107Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-18/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-18/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬@Slf4jpublic class AuthenticationFilter extends UsernamePasswordAuthenticationFilter &#123; private UserService userService; private Environment env; public AuthenticationFilter(AuthenticationManager authenticationManager, UserService userService, Environment env)&#123; super(authenticationManager); this.userService = userService; this.env = env; &#125; @Override public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException &#123; try &#123; RequestLogin creds = new ObjectMapper().readValue(request.getInputStream(), RequestLogin.class); Authentication token = new UsernamePasswordAuthenticationToken(creds.getEmail(), creds.getPassword(), new ArrayList&lt;&gt;()); return getAuthenticationManager().authenticate(token); &#125; catch (IOException e)&#123; throw new RuntimeException(e); &#125; &#125; @Override protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException &#123; String username = ((User)authResult.getPrincipal()).getUsername(); UserDto userDetails = userService.getUserDetailsByEmail(username); &#125;&#125; @Configuration@EnableWebSecuritypublic class WebSecurity extends WebSecurityConfigurerAdapter &#123; private Environment env; private UserService userService; private BCryptPasswordEncoder bCryptPasswordEncoder; public WebSecurity(Environment evn, UserService userService, BCryptPasswordEncoder bCryptPasswordEncoder)&#123; this.env = env; this.userService = userService; this.bCryptPasswordEncoder = bCryptPasswordEncoder; &#125; @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.userDetailsService(userService).passwordEncoder(bCryptPasswordEncoder); &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.csrf().disable(); http.authorizeRequests().antMatchers(&quot;/users/**&quot;) .hasIpAddress(&quot;192.168.0.2&quot;) .and() .addFilter(getAuthenticationFilter()); http.headers().frameOptions().disable(); &#125; private AuthenticationFilter getAuthenticationFilter() throws Exception&#123; AuthenticationFilter authenticationFilter = new AuthenticationFilter(authenticationManager(), userService, env); return authenticationFilter; &#125;&#125; public interface UserService extends UserDetailsService &#123; UserDto createUser(UserDto userDto); UserDto getUserByUserId(String userId); Iterable&lt;UserEntity&gt; getUserByAll(); UserDto getUserDetailsByEmail(String username);&#125; @Servicepublic class UserServiceImpl implements UserService &#123; UserRepository userRepository; BCryptPasswordEncoder passwordEncoder; @Override public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException &#123; UserEntity userEntity = userRepository.findByEmail(username); if (userEntity == null) &#123; throw new UsernameNotFoundException(username); &#125; return new User(userEntity.getEmail() , userEntity.getEncryptedPwd() , true , true , true , true , new ArrayList&lt;&gt;()); &#125; public UserServiceImpl(UserRepository userRepository, BCryptPasswordEncoder passwordEncoder) &#123; this.userRepository = userRepository; this.passwordEncoder = passwordEncoder; &#125; @Override public UserDto createUser(UserDto userDto) &#123; userDto.setUserId(UUID.randomUUID().toString()); ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); UserEntity userEntity = modelMapper.map(userDto, UserEntity.class); userEntity.setEncryptedPwd(passwordEncoder.encode(userDto.getPwd())); userRepository.save(userEntity); UserDto returnUserDto = modelMapper.map(userEntity, UserDto.class); return returnUserDto; &#125; @Override public UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); List&lt;ResponseOrder&gt; orders = new ArrayList&lt;&gt;(); userDto.setOrders(orders); return userDto; &#125; @Override public Iterable&lt;UserEntity&gt; getUserByAll() &#123; return userRepository.findAll(); &#125; @Override public UserDto getUserDetailsByEmail(String email) &#123; UserEntity userEntity = userRepository.findByEmail(email); if(userEntity == null)&#123; throw new UsernameNotFoundException(email); &#125; UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); return userDto; &#125;&#125;","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬@Slf4jpublic class AuthenticationFilter extends UsernamePasswordAuthenticationFilter &#123; private UserService userService; private Environment env; public AuthenticationFilter(AuthenticationManager authenticationManager, UserService userService, Environment env)&#123; super(authenticationManager); this.userService = userService; this.env = env; &#125; @Override public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException &#123; try &#123; RequestLogin creds = new ObjectMapper().readValue(request.getInputStream(), RequestLogin.class); Authentication token = new UsernamePasswordAuthenticationToken(creds.getEmail(), creds.getPassword(), new ArrayList&lt;&gt;()); return getAuthenticationManager().authenticate(token); &#125; catch (IOException e)&#123; throw new RuntimeException(e); &#125; &#125; @Override protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException &#123; String username = ((User)authResult.getPrincipal()).getUsername(); UserDto userDetails = userService.getUserDetailsByEmail(username); &#125;&#125; @Configuration@EnableWebSecuritypublic class WebSecurity extends WebSecurityConfigurerAdapter &#123; private Environment env; private UserService userService; private BCryptPasswordEncoder bCryptPasswordEncoder; public WebSecurity(Environment evn, UserService userService, BCryptPasswordEncoder bCryptPasswordEncoder)&#123; this.env = env; this.userService = userService; this.bCryptPasswordEncoder = bCryptPasswordEncoder; &#125; @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.userDetailsService(userService).passwordEncoder(bCryptPasswordEncoder); &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.csrf().disable(); http.authorizeRequests().antMatchers(&quot;/users/**&quot;) .hasIpAddress(&quot;192.168.0.2&quot;) .and() .addFilter(getAuthenticationFilter()); http.headers().frameOptions().disable(); &#125; private AuthenticationFilter getAuthenticationFilter() throws Exception&#123; AuthenticationFilter authenticationFilter = new AuthenticationFilter(authenticationManager(), userService, env); return authenticationFilter; &#125;&#125; public interface UserService extends UserDetailsService &#123; UserDto createUser(UserDto userDto); UserDto getUserByUserId(String userId); Iterable&lt;UserEntity&gt; getUserByAll(); UserDto getUserDetailsByEmail(String username);&#125; @Servicepublic class UserServiceImpl implements UserService &#123; UserRepository userRepository; BCryptPasswordEncoder passwordEncoder; @Override public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException &#123; UserEntity userEntity = userRepository.findByEmail(username); if (userEntity == null) &#123; throw new UsernameNotFoundException(username); &#125; return new User(userEntity.getEmail() , userEntity.getEncryptedPwd() , true , true , true , true , new ArrayList&lt;&gt;()); &#125; public UserServiceImpl(UserRepository userRepository, BCryptPasswordEncoder passwordEncoder) &#123; this.userRepository = userRepository; this.passwordEncoder = passwordEncoder; &#125; @Override public UserDto createUser(UserDto userDto) &#123; userDto.setUserId(UUID.randomUUID().toString()); ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); UserEntity userEntity = modelMapper.map(userDto, UserEntity.class); userEntity.setEncryptedPwd(passwordEncoder.encode(userDto.getPwd())); userRepository.save(userEntity); UserDto returnUserDto = modelMapper.map(userEntity, UserDto.class); return returnUserDto; &#125; @Override public UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); List&lt;ResponseOrder&gt; orders = new ArrayList&lt;&gt;(); userDto.setOrders(orders); return userDto; &#125; @Override public Iterable&lt;UserEntity&gt; getUserByAll() &#123; return userRepository.findAll(); &#125; @Override public UserDto getUserDetailsByEmail(String email) &#123; UserEntity userEntity = userRepository.findByEmail(email); if(userEntity == null)&#123; throw new UsernameNotFoundException(email); &#125; UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); return userDto; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½","slug":"spring/spring-cloud/spring-cloud-17","date":"2021-09-18T08:31:31.000Z","updated":"2024-02-26T15:35:58.167Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-17/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-17/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice Routes ì •ë³´ ë³€ê²½server: port: 8080eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes:# - id: user-service# uri: lb://USER-SERVICE# predicates:# - Path=/user-service/**# filters:# - CustomFilter - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/login - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/users - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/** - Method=GET filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: catalog-service uri: lb://CATALOG-SERVICE predicates: - Path=/catalog-service/** filters: - CustomFilter - id: order-service uri: lb://ORDER-SERVICE predicates: - Path=/order-service/** filters: - CustomFilter","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice Routes ì •ë³´ ë³€ê²½server: port: 8080eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes:# - id: user-service# uri: lb://USER-SERVICE# predicates:# - Path=/user-service/**# filters:# - CustomFilter - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/login - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/users - Method=POST filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/** - Method=GET filters: - RemoveRequestHeader=Cookie - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\\&#123;segment&#125; - id: catalog-service uri: lb://CATALOG-SERVICE predicates: - Path=/catalog-service/** filters: - CustomFilter - id: order-service uri: lb://ORDER-SERVICE predicates: - Path=/order-service/** filters: - CustomFilter","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„","slug":"spring/spring-cloud/spring-cloud-16","date":"2021-09-18T07:31:31.000Z","updated":"2024-02-26T15:35:54.610Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-16/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-16/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice loadUserByUsername() êµ¬í˜„public interface UserService extends UserDetailsService &#123; UserDto createUser(UserDto userDto); UserDto getUserByUserId(String userId); Iterable&lt;UserEntity&gt; getUserByAll();&#125; public interface UserRepository extends CrudRepository&lt;UserEntity, Long&gt; &#123; UserEntity findByUserId(String userId); UserEntity findByEmail(String username);&#125; @Servicepublic class UserServiceImpl implements UserService &#123; UserRepository userRepository; BCryptPasswordEncoder passwordEncoder; @Override public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException &#123; UserEntity userEntity = userRepository.findByEmail(username); if (UserEntity == null) &#123; throw new UsernameNotFoundException(username); &#125; return new User(userEntity.getEmail() , userEntity.getEncryptedPwd() , true , true , true , true , new ArrayList&lt;&gt;()); &#125; public UserServiceImpl(UserRepository userRepository, BCryptPasswordEncoder passwordEncoder) &#123; this.userRepository = userRepository; this.passwordEncoder = passwordEncoder; &#125; @Override public UserDto createUser(UserDto userDto) &#123; userDto.setUserId(UUID.randomUUID().toString()); ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); UserEntity userEntity = modelMapper.map(userDto, UserEntity.class); userEntity.setEncryptedPwd(passwordEncoder.encode(userDto.getPwd())); userRepository.save(userEntity); UserDto returnUserDto = modelMapper.map(userEntity, UserDto.class); return returnUserDto; &#125; @Override public UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); List&lt;ResponseOrder&gt; orders = new ArrayList&lt;&gt;(); userDto.setOrders(orders); return userDto; &#125; @Override public Iterable&lt;UserEntity&gt; getUserByAll() &#123; return userRepository.findAll(); &#125;&#125; @Configuration@EnableWebSecuritypublic class WebSecurity extends WebSecurityConfigurerAdapter &#123; private Environment env; private UserService userService; private BCryptPasswordEncoder bCryptPasswordEncoder; public WebSecurity(Environment evn, UserService userService, BCryptPasswordEncoder bCryptPasswordEncoder)&#123; this.env = env; this.userService = userService; this.bCryptPasswordEncoder = bCryptPasswordEncoder; &#125; @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.userDetailsService(userService).passwordEncoder(bCryptPasswordEncoder); &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.csrf().disable(); http.authorizeRequests().antMatchers(&quot;/users/**&quot;) .hasIpAddress(&quot;192.168.0.2&quot;) .and() .addFilter(getAuthenticationFilter()); http.headers().frameOptions().disable(); &#125; private AuthenticationFilter getAuthenticationFilter() throws Exception&#123; AuthenticationFilter authenticationFilter = new AuthenticationFilter(); authenticationFilter.setAuthenticationManager(authenticationManager()); return authenticationFilter; &#125; @Bean public BCryptPasswordEncoder passwordEncoder() &#123; return new BCryptPasswordEncoder(); &#125;&#125;","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice loadUserByUsername() êµ¬í˜„public interface UserService extends UserDetailsService &#123; UserDto createUser(UserDto userDto); UserDto getUserByUserId(String userId); Iterable&lt;UserEntity&gt; getUserByAll();&#125; public interface UserRepository extends CrudRepository&lt;UserEntity, Long&gt; &#123; UserEntity findByUserId(String userId); UserEntity findByEmail(String username);&#125; @Servicepublic class UserServiceImpl implements UserService &#123; UserRepository userRepository; BCryptPasswordEncoder passwordEncoder; @Override public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException &#123; UserEntity userEntity = userRepository.findByEmail(username); if (UserEntity == null) &#123; throw new UsernameNotFoundException(username); &#125; return new User(userEntity.getEmail() , userEntity.getEncryptedPwd() , true , true , true , true , new ArrayList&lt;&gt;()); &#125; public UserServiceImpl(UserRepository userRepository, BCryptPasswordEncoder passwordEncoder) &#123; this.userRepository = userRepository; this.passwordEncoder = passwordEncoder; &#125; @Override public UserDto createUser(UserDto userDto) &#123; userDto.setUserId(UUID.randomUUID().toString()); ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); UserEntity userEntity = modelMapper.map(userDto, UserEntity.class); userEntity.setEncryptedPwd(passwordEncoder.encode(userDto.getPwd())); userRepository.save(userEntity); UserDto returnUserDto = modelMapper.map(userEntity, UserDto.class); return returnUserDto; &#125; @Override public UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); List&lt;ResponseOrder&gt; orders = new ArrayList&lt;&gt;(); userDto.setOrders(orders); return userDto; &#125; @Override public Iterable&lt;UserEntity&gt; getUserByAll() &#123; return userRepository.findAll(); &#125;&#125; @Configuration@EnableWebSecuritypublic class WebSecurity extends WebSecurityConfigurerAdapter &#123; private Environment env; private UserService userService; private BCryptPasswordEncoder bCryptPasswordEncoder; public WebSecurity(Environment evn, UserService userService, BCryptPasswordEncoder bCryptPasswordEncoder)&#123; this.env = env; this.userService = userService; this.bCryptPasswordEncoder = bCryptPasswordEncoder; &#125; @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.userDetailsService(userService).passwordEncoder(bCryptPasswordEncoder); &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.csrf().disable(); http.authorizeRequests().antMatchers(&quot;/users/**&quot;) .hasIpAddress(&quot;192.168.0.2&quot;) .and() .addFilter(getAuthenticationFilter()); http.headers().frameOptions().disable(); &#125; private AuthenticationFilter getAuthenticationFilter() throws Exception&#123; AuthenticationFilter authenticationFilter = new AuthenticationFilter(); authenticationFilter.setAuthenticationManager(authenticationManager()); return authenticationFilter; &#125; @Bean public BCryptPasswordEncoder passwordEncoder() &#123; return new BCryptPasswordEncoder(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 15. Users Microservice AuthenticationFilter","slug":"spring/spring-cloud/spring-cloud-15","date":"2021-09-18T06:31:31.000Z","updated":"2024-02-26T15:35:48.884Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-15/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-15/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice 15. Users Microservice AuthenticationFilter@Datapublic class RequestLogin &#123; @NotNull(message = &quot;Email cannot be null&quot;) @Size(min = 2, message = &quot;Email not be less than two characters&quot;) private String email; @NotNull(message = &quot;Password cannot be null&quot;) @Size(min = 8, message = &quot;Password must be equals or grater than 8 characters&quot;) private String password;&#125; public class AuthenticationFilter extends UsernamePasswordAuthenticationFilter &#123; @Override public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException &#123; try &#123; RequestLogin creds = new ObjectMapper().readValue(request.getInputStream(), RequestLogin.class); Authentication token = new UsernamePasswordAuthenticationToken(creds.getEmail(), creds.getPassword(), new ArrayList&lt;&gt;()); return getAuthenticationManager().authenticate(token); &#125; catch (IOException e)&#123; throw new RuntimeException(e); &#125; &#125; @Override protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException &#123; super.successfulAuthentication(request, response, chain, authResult); &#125;&#125;","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice 15. Users Microservice AuthenticationFilter@Datapublic class RequestLogin &#123; @NotNull(message = &quot;Email cannot be null&quot;) @Size(min = 2, message = &quot;Email not be less than two characters&quot;) private String email; @NotNull(message = &quot;Password cannot be null&quot;) @Size(min = 8, message = &quot;Password must be equals or grater than 8 characters&quot;) private String password;&#125; public class AuthenticationFilter extends UsernamePasswordAuthenticationFilter &#123; @Override public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException &#123; try &#123; RequestLogin creds = new ObjectMapper().readValue(request.getInputStream(), RequestLogin.class); Authentication token = new UsernamePasswordAuthenticationToken(creds.getEmail(), creds.getPassword(), new ArrayList&lt;&gt;()); return getAuthenticationManager().authenticate(token); &#125; catch (IOException e)&#123; throw new RuntimeException(e); &#125; &#125; @Override protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException &#123; super.successfulAuthentication(request, response, chain, authResult); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 14. Users Microservice Order Service","slug":"spring/spring-cloud/spring-cloud-14","date":"2021-09-18T05:31:31.000Z","updated":"2024-02-26T15:35:44.343Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-14/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-14/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice Order Serviceì„¤ì •server: port: 0spring: application: name: order-service h2: console: enabled: true settings: web-allow-others: true datasource: driver-class-name: org.h2.Driver username: sa password: url: jdbc:h2:mem:testdb jpa: hibernate: ddl-auto: create-drop generate-ddl: true show-sql: trueeureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eureka instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; @Data@Entity@Table(name = &quot;orders&quot;)public class OrderEntity implements Serializable &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @Column(nullable = false, length = 120) private String productId; @Column(nullable = false) private Integer qty; @Column(nullable = false) private Integer unitPrice; @Column(nullable = false) private Integer totalPrice; @Column(nullable = false) private String userId; @Column(nullable = false, unique = true) private String orderId; @Column(nullable = false, updatable = false, insertable = false) @ColumnDefault(value = &quot;CURRENT_TIMESTAMP&quot;) private Date createdAt;&#125; @Repositorypublic interface OrderRepository extends CrudRepository&lt;OrderEntity, Long&gt; &#123; OrderEntity findByOrderId(String orderId); Iterable&lt;OrderEntity&gt; findByUserId(String userId);&#125; @Data@JsonInclude(JsonInclude.Include.NON_NULL)public class ResponseOrder &#123; private String productId; private Integer qty; private Integer unitPrice; private Integer totalPrice; private Date createdAt; private String orderId;&#125; @Datapublic class RequestOrder &#123; private String productId; private Integer qty; private Integer unitPrice;&#125;","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice Order Serviceì„¤ì •server: port: 0spring: application: name: order-service h2: console: enabled: true settings: web-allow-others: true datasource: driver-class-name: org.h2.Driver username: sa password: url: jdbc:h2:mem:testdb jpa: hibernate: ddl-auto: create-drop generate-ddl: true show-sql: trueeureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eureka instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; @Data@Entity@Table(name = &quot;orders&quot;)public class OrderEntity implements Serializable &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @Column(nullable = false, length = 120) private String productId; @Column(nullable = false) private Integer qty; @Column(nullable = false) private Integer unitPrice; @Column(nullable = false) private Integer totalPrice; @Column(nullable = false) private String userId; @Column(nullable = false, unique = true) private String orderId; @Column(nullable = false, updatable = false, insertable = false) @ColumnDefault(value = &quot;CURRENT_TIMESTAMP&quot;) private Date createdAt;&#125; @Repositorypublic interface OrderRepository extends CrudRepository&lt;OrderEntity, Long&gt; &#123; OrderEntity findByOrderId(String orderId); Iterable&lt;OrderEntity&gt; findByUserId(String userId);&#125; @Data@JsonInclude(JsonInclude.Include.NON_NULL)public class ResponseOrder &#123; private String productId; private Integer qty; private Integer unitPrice; private Integer totalPrice; private Date createdAt; private String orderId;&#125; @Datapublic class RequestOrder &#123; private String productId; private Integer qty; private Integer unitPrice;&#125; @Datapublic class OrderDto implements Serializable &#123; private String productId; private Integer qty; private Integer unitPrice; private Integer totalPrice; private String orderId; private String userId;&#125; public interface OrderService &#123; OrderDto createOrder(OrderDto orderDetails); OrderDto getOrderByOrderId(String orderId); Iterable&lt;OrderEntity&gt; getOrdersByUserId(String userId);&#125; @Servicepublic class OrderServiceImpl implements OrderService&#123; private OrderRepository orderRepository; public OrderServiceImpl(OrderRepository orderRepository)&#123; this.orderRepository = orderRepository; &#125; @Override public OrderDto createOrder(OrderDto orderDto) &#123; orderDto.setOrderId(UUID.randomUUID().toString()); orderDto.setTotalPrice(orderDto.getQty() * orderDto.getUnitPrice()); ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); OrderEntity orderEntity = modelMapper.map(orderDto, OrderEntity.class); orderRepository.save(orderEntity); OrderDto returnValue = modelMapper.map(orderEntity, OrderDto.class); return returnValue; &#125; @Override public OrderDto getOrderByOrderId(String orderId) &#123; OrderEntity orderEntity = orderRepository.findByOrderId(orderId); OrderDto orderDto = new ModelMapper().map(orderEntity, OrderDto.class); return orderDto; &#125; @Override public Iterable&lt;OrderEntity&gt; getOrdersByUserId(String userId) &#123; return orderRepository.findByUserId(userId); &#125;&#125; @RestController@RequestMapping(&quot;/order-service/&quot;)public class OrderController &#123; private OrderService orderService; public OrderController(OrderService orderService)&#123; this.orderService = orderService; &#125; @PostMapping(value = &quot;/&#123;userId&#125;/orders&quot;) public ResponseEntity&lt;ResponseOrder&gt; createOrder(@PathVariable(&quot;userId&quot;) String userId, @RequestBody RequestOrder orderDetails)&#123; ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); OrderDto orderDto = modelMapper.map(orderDetails, OrderDto.class); orderDto.setUserId(userId); OrderDto createDto = orderService.createOrder(orderDto); ResponseOrder returnValue = modelMapper.map(createDto, ResponseOrder.class); return ResponseEntity.status(HttpStatus.CREATED).body(returnValue); &#125; @GetMapping(value = &quot;/&#123;userId&#125;/orders&quot;) public ResponseEntity&lt;List&lt;ResponseOrder&gt;&gt; getOrder(@PathVariable(&quot;userId&quot;) String userId)&#123; Iterable&lt;OrderEntity&gt; orderList = orderService.getOrdersByUserId(userId); List&lt;ResponseOrder&gt; result = new ArrayList&lt;&gt;(); orderList.forEach(v -&gt; &#123; result.add(new ModelMapper().map(v, ResponseOrder.class)); &#125;); return ResponseEntity.status(HttpStatus.OK).body(result); &#125;&#125; Gatewayì— ë“±ë¡- id: order-service uri: lb://ORDER-SERVICE predicates: - Path=/order-service/** filters: - CustomFilter server: port: 8080eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes: - id: user-service uri: lb://USER-SERVICE predicates: - Path=/user-service/** filters: - CustomFilter - id: catalog-service uri: lb://CATALOG-SERVICE predicates: - Path=/catalog-service/** filters: - CustomFilter - id: order-service uri: lb://ORDER-SERVICE predicates: - Path=/order-service/** filters: - CustomFilter","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 13. Users Microservice Catalog","slug":"spring/spring-cloud/spring-cloud-13","date":"2021-09-18T04:31:31.000Z","updated":"2024-02-26T15:35:39.584Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-13/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-13/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice 13. Users Microservice Catalogì„¤ì • ì •ë³´server: port: 0spring: application: name: catalog-service h2: console: enabled: true settings: web-allow-others: true datasource: hikari: driver-class-name: org.h2.Driver url: jdbc:h2:mem:testdb username: sa password: jpa: hibernate: ddl-auto: create-drop show-sql: true generate-ddl: trueeureka: client: service-url: defaultZone: http://localhost:8761/eureka#logging:# level:# com.example.catalogservice: DEBUG @Data@Entity@Table(name = &quot;catalog&quot;)public class CatalogEntity &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @Column(nullable = false, length = 120, unique = true) private String productId; @Column(nullable = false) private String productName; @Column(nullable = false) private Integer stock; @Column(nullable = false) private Integer unitPrice; @Column(nullable = false, updatable = false, insertable = false) @ColumnDefault(value = &quot;CURRENT_TIMESTAMP&quot;) private Date createdAt;&#125; @Repositorypublic interface CatalogRepository extends CrudRepository&lt;CatalogEntity, Long&gt; &#123; CatalogEntity findByProductId(String productId);&#125; public interface CatalogService &#123; Iterable&lt;CatalogEntity&gt; getAllCatalogs();&#125; @Service@Slf4jpublic class CatalogServiceImpl implements CatalogService&#123; CatalogRepository repository; Environment env; public CatalogServiceImpl(CatalogRepository repository, Environment env)&#123; this.repository = repository; this.env = env; &#125; @Override public Iterable&lt;CatalogEntity&gt; getAllCatalogs() &#123; return repository.findAll(); &#125;&#125;","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice 13. Users Microservice Catalogì„¤ì • ì •ë³´server: port: 0spring: application: name: catalog-service h2: console: enabled: true settings: web-allow-others: true datasource: hikari: driver-class-name: org.h2.Driver url: jdbc:h2:mem:testdb username: sa password: jpa: hibernate: ddl-auto: create-drop show-sql: true generate-ddl: trueeureka: client: service-url: defaultZone: http://localhost:8761/eureka#logging:# level:# com.example.catalogservice: DEBUG @Data@Entity@Table(name = &quot;catalog&quot;)public class CatalogEntity &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @Column(nullable = false, length = 120, unique = true) private String productId; @Column(nullable = false) private String productName; @Column(nullable = false) private Integer stock; @Column(nullable = false) private Integer unitPrice; @Column(nullable = false, updatable = false, insertable = false) @ColumnDefault(value = &quot;CURRENT_TIMESTAMP&quot;) private Date createdAt;&#125; @Repositorypublic interface CatalogRepository extends CrudRepository&lt;CatalogEntity, Long&gt; &#123; CatalogEntity findByProductId(String productId);&#125; public interface CatalogService &#123; Iterable&lt;CatalogEntity&gt; getAllCatalogs();&#125; @Service@Slf4jpublic class CatalogServiceImpl implements CatalogService&#123; CatalogRepository repository; Environment env; public CatalogServiceImpl(CatalogRepository repository, Environment env)&#123; this.repository = repository; this.env = env; &#125; @Override public Iterable&lt;CatalogEntity&gt; getAllCatalogs() &#123; return repository.findAll(); &#125;&#125; @RestController@RequestMapping(&quot;/catalog-service&quot;)public class CatalogController &#123; private Environment env; CatalogService catalogService; public CatalogController(Environment env, CatalogService catalogService)&#123; this.env = env; this.catalogService = catalogService; &#125; @GetMapping(&quot;/health_check&quot;) public String status(HttpServletRequest request)&#123; return String.format(&quot;It&#x27;s Working in Catalog Service on Port %s&quot;, request.getServerPort()); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ","slug":"spring/spring-cloud/spring-cloud-12","date":"2021-09-18T03:31:31.000Z","updated":"2024-02-26T15:35:35.907Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-12/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-12/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ@Overridepublic UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); List&lt;ResponseOrder&gt; orders = new ArrayList&lt;&gt;(); userDto.setOrders(orders); return userDto;&#125;@Overridepublic Iterable&lt;UserEntity&gt; getUserByAll() &#123; return userRepository.findAll();&#125; public interface UserRepository extends CrudRepository&lt;UserEntity, Long&gt; &#123; UserEntity findByUserId(String userId);&#125; ì „ì²´ User ì •ë³´ ê°€ì ¸ì˜¤ê¸°@GetMapping(&quot;/users&quot;)public ResponseEntity&lt;List&lt;ResponseUser&gt;&gt; getUsers() &#123; Iterable&lt;UserEntity&gt; userList = userService.getUserByAll(); List&lt;ResponseUser&gt; result = new ArrayList&lt;&gt;(); userList.forEach(v -&gt; &#123; result.add(new ModelMapper().map(v, ResponseUser.class)); &#125;); return ResponseEntity.status(HttpStatus.OK).body(result);&#125; íŠ¹ì • User ì •ë³´ ê°€ì ¸ì˜¤ê¸°@GetMapping(&quot;/users/&#123;userId&#125;&quot;) public ResponseEntity&lt;ResponseUser&gt; getUsers(@PathVariable(&quot;userId&quot;) String userId) &#123; UserDto userDto = userService.getUserByUserId(userId); ResponseUser returnValue = new ModelMapper().map(userDto, ResponseUser.class); return ResponseEntity.status(HttpStatus.OK).body(returnValue); &#125;","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ@Overridepublic UserDto getUserByUserId(String userId) &#123; UserEntity userEntity = userRepository.findByUserId(userId); if (userEntity == null) throw new UsernameNotFoundException(&quot;User not found&quot;); UserDto userDto = new ModelMapper().map(userEntity, UserDto.class); List&lt;ResponseOrder&gt; orders = new ArrayList&lt;&gt;(); userDto.setOrders(orders); return userDto;&#125;@Overridepublic Iterable&lt;UserEntity&gt; getUserByAll() &#123; return userRepository.findAll();&#125; public interface UserRepository extends CrudRepository&lt;UserEntity, Long&gt; &#123; UserEntity findByUserId(String userId);&#125; ì „ì²´ User ì •ë³´ ê°€ì ¸ì˜¤ê¸°@GetMapping(&quot;/users&quot;)public ResponseEntity&lt;List&lt;ResponseUser&gt;&gt; getUsers() &#123; Iterable&lt;UserEntity&gt; userList = userService.getUserByAll(); List&lt;ResponseUser&gt; result = new ArrayList&lt;&gt;(); userList.forEach(v -&gt; &#123; result.add(new ModelMapper().map(v, ResponseUser.class)); &#125;); return ResponseEntity.status(HttpStatus.OK).body(result);&#125; íŠ¹ì • User ì •ë³´ ê°€ì ¸ì˜¤ê¸°@GetMapping(&quot;/users/&#123;userId&#125;&quot;) public ResponseEntity&lt;ResponseUser&gt; getUsers(@PathVariable(&quot;userId&quot;) String userId) &#123; UserDto userDto = userService.getUserByUserId(userId); ResponseUser returnValue = new ModelMapper().map(userDto, ResponseUser.class); return ResponseEntity.status(HttpStatus.OK).body(returnValue); &#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 11. Users Microservice Gateway ì—°ë™","slug":"spring/spring-cloud/spring-cloud-11","date":"2021-09-18T02:31:31.000Z","updated":"2024-02-26T15:35:32.281Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-11/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-11/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice Gateway ì—°ë™@GetMapping(&quot;/health_check&quot;)public String status()&#123; return String.format(&quot;It&#x27;s Working in User Service on PORT %s&quot;, env.getProperty(&quot;local.server.port&quot;));&#125; server: port: 8080eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes: - id: user-service # uri: http://localhost:8081/ uri: lb://USER-SERVICE predicates: - Path=/user-service/** filters: - CustomFilter # - AddRequestHeader=first-request, first-request-header2 # - AddResponseHeader=first-response, first-response-header2 - id: first-service # uri: http://localhost:8081/ uri: lb://MY-FIRST-SERVICE predicates: - Path=/first-service/** filters: - CustomFilter # - AddRequestHeader=first-request, first-request-header2 # - AddResponseHeader=first-response, first-response-header2 Gatewayë¥¼ ê±°ì²˜ User Serviceì— ì ‘ê·¼í•˜ê²Œ ë˜ë©´ ë¬¸ì œê°€ ë°œìƒ User Serviceì˜ URIì™€ API Gatewayì˜ URIê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ìƒê¹€ @GetMapping(&quot;/user-service/health_check&quot;)public String status()&#123; return String.format(&quot;It&#x27;s Working in User Service on PORT %s&quot;, env.getProperty(&quot;local.server.port&quot;));&#125;","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice Gateway ì—°ë™@GetMapping(&quot;/health_check&quot;)public String status()&#123; return String.format(&quot;It&#x27;s Working in User Service on PORT %s&quot;, env.getProperty(&quot;local.server.port&quot;));&#125; server: port: 8080eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes: - id: user-service # uri: http://localhost:8081/ uri: lb://USER-SERVICE predicates: - Path=/user-service/** filters: - CustomFilter # - AddRequestHeader=first-request, first-request-header2 # - AddResponseHeader=first-response, first-response-header2 - id: first-service # uri: http://localhost:8081/ uri: lb://MY-FIRST-SERVICE predicates: - Path=/first-service/** filters: - CustomFilter # - AddRequestHeader=first-request, first-request-header2 # - AddResponseHeader=first-response, first-response-header2 Gatewayë¥¼ ê±°ì²˜ User Serviceì— ì ‘ê·¼í•˜ê²Œ ë˜ë©´ ë¬¸ì œê°€ ë°œìƒ User Serviceì˜ URIì™€ API Gatewayì˜ URIê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ìƒê¹€ @GetMapping(&quot;/user-service/health_check&quot;)public String status()&#123; return String.format(&quot;It&#x27;s Working in User Service on PORT %s&quot;, env.getProperty(&quot;local.server.port&quot;));&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€","slug":"spring/spring-cloud/spring-cloud-10","date":"2021-09-18T01:31:31.000Z","updated":"2024-02-26T15:35:28.301Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-10/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-10/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice ì‚¬ìš©ì ì¶”ê°€@RestController@RequestMapping(&quot;/&quot;)public class UserController &#123; private Environment env; private UserService userService; private Greeting greeting; public UserController(Environment env, UserService userService)&#123; this.env = env; this.userService = userService; &#125; @GetMapping(&quot;/health_check&quot;) public String status()&#123; return &quot;It&#x27;s Working in User Service&quot;; &#125; @GetMapping(&quot;/welcome&quot;) public String welcome()&#123; return env.getProperty(&quot;greeting.message&quot;); &#125; @GetMapping(&quot;/welcome_value&quot;) public String welcomeValue()&#123; return greeting.getMessage(); &#125; @PostMapping(&quot;/users&quot;) public ResponseEntity createUser(@RequestBody RequestUser user)&#123; ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); UserDto userDto = modelMapper.map(user, UserDto.class); userService.createUser(userDto); ResponseUser responseUser = modelMapper.map(userDto, ResponseUser.class); return ResponseEntity.status(HttpStatus.CREATED).body(responseUser); &#125;&#125; @Datapublic class ResponseUser &#123; private String email; private String name; private String userId;&#125; @Datapublic class RequestUser &#123; @NotNull(message = &quot;Email cannot be null&quot;) @Size(min = 2, message = &quot;Email not be less than two characters&quot;) private String email; @NotNull(message = &quot;Name cannot be null&quot;) @Size(min = 2, message = &quot;Name not be less than two characters&quot;) private String pwd; @NotNull(message = &quot;Password cannot be null&quot;) @Size(min = 8, message = &quot;Password not be less than two characters&quot;) private String name;&#125; @Datapublic class UserDto &#123; private String email; private String name; private String pwd; private String userId; private Date createdAt; private String encryptedPwd;&#125; @Component@Data@AllArgsConstructor@NoArgsConstructorpublic class Greeting &#123; @Value(&quot;$&#123;greeting.message&#125;&quot;) private String message;&#125; @Data@Entity@Table(&quot;users&quot;)public class UserEntity &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @Column(nullable = false, length = 50) private String email; @Column(nullable = false, length = 50) private String name; @Column(nullable = false, unique = true) private String userId; @Column(nullable = false, unique = true) private String encryptedPwd;&#125;","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice ì‚¬ìš©ì ì¶”ê°€@RestController@RequestMapping(&quot;/&quot;)public class UserController &#123; private Environment env; private UserService userService; private Greeting greeting; public UserController(Environment env, UserService userService)&#123; this.env = env; this.userService = userService; &#125; @GetMapping(&quot;/health_check&quot;) public String status()&#123; return &quot;It&#x27;s Working in User Service&quot;; &#125; @GetMapping(&quot;/welcome&quot;) public String welcome()&#123; return env.getProperty(&quot;greeting.message&quot;); &#125; @GetMapping(&quot;/welcome_value&quot;) public String welcomeValue()&#123; return greeting.getMessage(); &#125; @PostMapping(&quot;/users&quot;) public ResponseEntity createUser(@RequestBody RequestUser user)&#123; ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); UserDto userDto = modelMapper.map(user, UserDto.class); userService.createUser(userDto); ResponseUser responseUser = modelMapper.map(userDto, ResponseUser.class); return ResponseEntity.status(HttpStatus.CREATED).body(responseUser); &#125;&#125; @Datapublic class ResponseUser &#123; private String email; private String name; private String userId;&#125; @Datapublic class RequestUser &#123; @NotNull(message = &quot;Email cannot be null&quot;) @Size(min = 2, message = &quot;Email not be less than two characters&quot;) private String email; @NotNull(message = &quot;Name cannot be null&quot;) @Size(min = 2, message = &quot;Name not be less than two characters&quot;) private String pwd; @NotNull(message = &quot;Password cannot be null&quot;) @Size(min = 8, message = &quot;Password not be less than two characters&quot;) private String name;&#125; @Datapublic class UserDto &#123; private String email; private String name; private String pwd; private String userId; private Date createdAt; private String encryptedPwd;&#125; @Component@Data@AllArgsConstructor@NoArgsConstructorpublic class Greeting &#123; @Value(&quot;$&#123;greeting.message&#125;&quot;) private String message;&#125; @Data@Entity@Table(&quot;users&quot;)public class UserEntity &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @Column(nullable = false, length = 50) private String email; @Column(nullable = false, length = 50) private String name; @Column(nullable = false, unique = true) private String userId; @Column(nullable = false, unique = true) private String encryptedPwd;&#125; public interface UserRepository extends CrudRepository&lt;UserEntity, Long&gt; &#123;&#125; @Servicepublic class UserServiceImpl implements UserService&#123; @Autowired UserRepository userRepository; @Override public UserDto createUser(UserDto userDto) &#123; userDto.setUserId(UUID.randomUUID().toString()); ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); UserEntity userEntity = modelMapper.map(userDto, UserEntity.class); userEntity.setEncryptedPwd(&quot;encrypted_password&quot;); userRepository.save(userEntity); return null; &#125;&#125; Spring Security ì—°ë™@Configuration@EnableWebSecuritypublic class WebSecurity extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.csrf().disable(); http.authorizeRequests().antMatchers(&quot;/users/**&quot;).permitAll(); http.headers().frameOptions().disable(); &#125; @Bean public BCryptPasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125;&#125; @Servicepublic class UserServiceImpl implements UserService&#123; UserRepository userRepository; BCryptPasswordEncoder passwordEncoder; public UserServiceImpl(UserRepository userRepository, BCryptPasswordEncoder passwordEncoder)&#123; this.userRepository = userRepository; this.passwordEncoder = passwordEncoder; &#125; @Override public UserDto createUser(UserDto userDto) &#123; userDto.setUserId(UUID.randomUUID().toString()); ModelMapper modelMapper = new ModelMapper(); modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT); UserEntity userEntity = modelMapper.map(userDto, UserEntity.class); userEntity.setEncryptedPwd(passwordEncoder.encode(userDto.getPwd())); userRepository.save(userEntity); UserDto returnUserDto = modelMapper.map(userEntity, UserDto.class); return returnUserDto; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9","slug":"spring/spring-cloud/spring-cloud-09","date":"2021-09-18T00:31:31.000Z","updated":"2024-02-26T15:35:24.611Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-09/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-09/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9server: port: 0spring: application: name: user-service h2: console: enabled: true settings: web-allow-others: true datasource: username: sa password: hikari: driver-class-name: org.h2.Driver url: jdbc:h2:mem:testdbeureka: instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekagreeting: message: Welcome to the Simple E-commerce.n","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9server: port: 0spring: application: name: user-service h2: console: enabled: true settings: web-allow-others: true datasource: username: sa password: hikari: driver-class-name: org.h2.Driver url: jdbc:h2:mem:testdbeureka: instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekagreeting: message: Welcome to the Simple E-commerce.n","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - Users Microservice","slug":"spring/spring-cloud/spring-cloud-08","date":"2021-09-17T23:31:31.000Z","updated":"2024-02-26T15:35:19.233Z","comments":true,"path":"2021/09/18/spring/spring-cloud/spring-cloud-08/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/spring-cloud-08/","excerpt":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice@RestController@RequestMapping(&quot;/&quot;)public class UserController &#123; @GetMapping(&quot;/health_check&quot;) public String status()&#123; return &quot;It&#x27;s Working in User Service&quot;; &#125;&#125; í”„ë¡œì íŠ¸ ì„¤ì • ì¶”ê°€í•˜ê¸°server: port: 0spring: application: name: user-serviceeureka: instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eureka Application.yml íŒŒì¼ë¡œë¶€í„° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°server: port: 0spring: application: name: user-serviceeureka: instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekagreeting: message: Welcome to the Simple E-commerce. Enviroment ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•","text":"ëª©ì°¨ Spring Cloud - 20. Users Microservice AuthorizationHeaderFilter ì¶”ê°€ Spring Cloud - 19. Users Microservice JWT ìƒì„± Spring Cloud - 18. Users Microservice ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ Spring Cloud - 17. Users Microservice Routes ì •ë³´ ë³€ê²½ Spring Cloud - 16. Users Microservice loadUserByUsername() êµ¬í˜„ Spring Cloud - 15. Users Microservice AuthenticationFilter Spring Cloud - 14. Users Microservice Order Service Spring Cloud - 13. Users Microservice Catalog Spring Cloud - 12. Users Microservice ì‚¬ìš©ì ì¡°íšŒ Spring Cloud - 11. Users Microservice Gateway ì—°ë™ Spring Cloud - 10. Users Microservice ì‚¬ìš©ì ì¶”ê°€ Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 9 Spring Cloud - Users Microservice Users Microservice@RestController@RequestMapping(&quot;/&quot;)public class UserController &#123; @GetMapping(&quot;/health_check&quot;) public String status()&#123; return &quot;It&#x27;s Working in User Service&quot;; &#125;&#125; í”„ë¡œì íŠ¸ ì„¤ì • ì¶”ê°€í•˜ê¸°server: port: 0spring: application: name: user-serviceeureka: instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eureka Application.yml íŒŒì¼ë¡œë¶€í„° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°server: port: 0spring: application: name: user-serviceeureka: instance: instanceId: $&#123;spring.application.name&#125;:$&#123;spring.application.instance_id:$&#123;random.value&#125;&#125; client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eurekagreeting: message: Welcome to the Simple E-commerce. Enviroment ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•@RestController@RequestMapping(&quot;/&quot;)public class UserController &#123; private Environment env; public UserController(Environment env)&#123; this.env = env; &#125; @GetMapping(&quot;/health_check&quot;) public String status()&#123; return &quot;It&#x27;s Working in User Service&quot;; &#125; @GetMapping(&quot;/welcome&quot;) public String welcome()&#123; return env.getProperty(&quot;greeting.message&quot;); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"}],"tags":[]},{"title":"Spring Cloud - 7. Load Balancer ì ìš©","slug":"spring/spring-cloud/gateway/spring-cloud-07","date":"2021-09-17T22:31:31.000Z","updated":"2024-02-26T15:33:55.049Z","comments":true,"path":"2021/09/18/spring/spring-cloud/gateway/spring-cloud-07/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/gateway/spring-cloud-07/","excerpt":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 7 - Load Balancer ì ìš©Spring Cloud Gatewayì™€ Eurekaì—°ë™ Gateway ì„¤ì •eureka ì„¤ì •í•˜ê¸° eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eureka Gateway ì„¤ì •í•˜ê¸° spring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes: - id: first-service# uri: http://localhost:8081/ uri: lb://MY-FIRST-SERVICE predicates: - Path=/first-service/** filters: - CustomFilter# - AddRequestHeader=first-request, first-request-header2# - AddResponseHeader=first-response, first-response-header2 - id: second-service# uri: http://localhost:8082/ uri: lb://MY-SECOND-SERVICE predicates: - Path=/second-service/** filters: - name: CustomFilter - name: LoggingFilter args: baseMessage: Hi, there. preLogger: true postLogger: true# - AddRequestHeader=second-request, second-request-header2# - AddResponseHeader=second-response, second-response-header2 Client ì„¤ì •","text":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 7 - Load Balancer ì ìš©Spring Cloud Gatewayì™€ Eurekaì—°ë™ Gateway ì„¤ì •eureka ì„¤ì •í•˜ê¸° eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eureka Gateway ì„¤ì •í•˜ê¸° spring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes: - id: first-service# uri: http://localhost:8081/ uri: lb://MY-FIRST-SERVICE predicates: - Path=/first-service/** filters: - CustomFilter# - AddRequestHeader=first-request, first-request-header2# - AddResponseHeader=first-response, first-response-header2 - id: second-service# uri: http://localhost:8082/ uri: lb://MY-SECOND-SERVICE predicates: - Path=/second-service/** filters: - name: CustomFilter - name: LoggingFilter args: baseMessage: Hi, there. preLogger: true postLogger: true# - AddRequestHeader=second-request, second-request-header2# - AddResponseHeader=second-response, second-response-header2 Client ì„¤ì •first-service server: port: 8081spring: application: name: my-first-serviceeureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eureka second-service server: port: 8082spring: application: name: my-second-serviceeureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://localhost:8761/eureka","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Gateway","slug":"Spring/Spring-Cloud/Gateway","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Gateway/"}],"tags":[]},{"title":"Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš©","slug":"spring/spring-cloud/gateway/spring-cloud-06","date":"2021-09-17T21:31:31.000Z","updated":"2024-02-26T15:33:51.316Z","comments":true,"path":"2021/09/18/spring/spring-cloud/gateway/spring-cloud-06/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/gateway/spring-cloud-06/","excerpt":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 6 - Spring Cloud Gateway Global Filter ì ìš©LoggingFilter @Component@Slf4jpublic class LoggingFilter extends AbstractGatewayFilterFactory&lt;LoggingFilter.Config&gt; &#123; public LoggingFilter()&#123; super(Config.class); &#125; @Override public GatewayFilter apply(Config config) &#123; GatewayFilter filter = new OrderedGatewayFilter((exchange, chain) -&gt; &#123; ServerHttpRequest request = exchange.getRequest(); ServerHttpResponse response = exchange.getResponse(); log.info(&quot;Logging Filter baseMessage : &#123;&#125;&quot;, request.getId()); if(config.isPreLogger())&#123; log.info(&quot;Logging Pre Filter: request id -&gt; &#123;&#125;&quot;, request.getId()); &#125; // Custom Post Filter return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; &#123; if(config.isPostLogger())&#123; log.info(&quot;Logging Post Filter: response code -&gt; &#123;&#125;&quot;, response.getStatusCode()); &#125; &#125;)); &#125;, Ordered.HIGHEST_PRECEDENCE); return filter; &#125; @Data public static class Config&#123; // Put the configuration properties private String baseMessage; private boolean preLogger; private boolean postLogger; &#125;&#125; application.yml server: port: 8080eureka: client: register-with-eureka: false fetch-registry: false service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes: - id: first-service uri: http://localhost:8081/ predicates: - Path=/first-service/** filters: - CustomFilter# - AddRequestHeader=first-request, first-request-header2# - AddResponseHeader=first-response, first-response-header2 - id: second-service uri: http://localhost:8082/ predicates: - Path=/second-service/** filters: - name: CustomFilter - name: LoggingFilter args: baseMessage: Hi, there. preLogger: true postLogger: true# - AddRequestHeader=second-request, second-request-header2# - AddResponseHeader=second-response, second-response-header2","text":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 6 - Spring Cloud Gateway Global Filter ì ìš©LoggingFilter @Component@Slf4jpublic class LoggingFilter extends AbstractGatewayFilterFactory&lt;LoggingFilter.Config&gt; &#123; public LoggingFilter()&#123; super(Config.class); &#125; @Override public GatewayFilter apply(Config config) &#123; GatewayFilter filter = new OrderedGatewayFilter((exchange, chain) -&gt; &#123; ServerHttpRequest request = exchange.getRequest(); ServerHttpResponse response = exchange.getResponse(); log.info(&quot;Logging Filter baseMessage : &#123;&#125;&quot;, request.getId()); if(config.isPreLogger())&#123; log.info(&quot;Logging Pre Filter: request id -&gt; &#123;&#125;&quot;, request.getId()); &#125; // Custom Post Filter return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; &#123; if(config.isPostLogger())&#123; log.info(&quot;Logging Post Filter: response code -&gt; &#123;&#125;&quot;, response.getStatusCode()); &#125; &#125;)); &#125;, Ordered.HIGHEST_PRECEDENCE); return filter; &#125; @Data public static class Config&#123; // Put the configuration properties private String baseMessage; private boolean preLogger; private boolean postLogger; &#125;&#125; application.yml server: port: 8080eureka: client: register-with-eureka: false fetch-registry: false service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway Global Filter preLogger: true postLogger: true routes: - id: first-service uri: http://localhost:8081/ predicates: - Path=/first-service/** filters: - CustomFilter# - AddRequestHeader=first-request, first-request-header2# - AddResponseHeader=first-response, first-response-header2 - id: second-service uri: http://localhost:8082/ predicates: - Path=/second-service/** filters: - name: CustomFilter - name: LoggingFilter args: baseMessage: Hi, there. preLogger: true postLogger: true# - AddRequestHeader=second-request, second-request-header2# - AddResponseHeader=second-response, second-response-header2","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Gateway","slug":"Spring/Spring-Cloud/Gateway","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Gateway/"}],"tags":[]},{"title":"JPA - Persist Context (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸)","slug":"jpa/jpa-programming/persist/jpa-persist-context","date":"2021-09-17T20:31:46.000Z","updated":"2024-11-28T13:59:26.642Z","comments":true,"path":"2021/09/18/jpa/jpa-programming/persist/jpa-persist-context/","link":"","permalink":"https://ckck803.github.io/2021/09/18/jpa/jpa-programming/persist/jpa-persist-context/","excerpt":"ëª©ì°¨ JPA - Entityì˜ ìƒëª…ì£¼ê¸° JPA - Persist Context (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸) Persist Context (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸) ë€? JPA ê°€ Entity ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê³µê°„, Entity ìƒíƒœê°€ Database ì— ë°˜ì˜ë˜ê¸° ì „ê¹Œì§€ Entity ì˜ ì½ê¸°&#x2F;ì“°ê¸°&#x2F;ìˆ˜ì •&#x2F;ì‚­ì œë¥¼ ìƒíƒœ ê´€ë¦¬í•œë‹¤. EntityManagerFactory ì—ì„œ EntityManager ë¥¼ ìƒì„±í•˜ê³  EntityManager ë¥¼ ì´ìš©í•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. EntityManager ë¥¼ ì´ìš©í•´ Entity(ë°ì´í„°)ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ì¡°íšŒí•˜ë©´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ í•´ë‹¹ Entity ë¥¼ ê´€ë¦¬í•˜ê²Œ ëœë‹¤. EntityManager ëŠ” Transaction ë‹¨ìœ„ë¡œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ê³  ì§€ìš´ë‹¤. EntityManager ì™€ ì˜ì†ì„± Contextê°€ 1:1ë¡œ ëŒ€ì‘ì´ ëœë‹¤. ì˜ì†ì„± ContextëŠ” ë‚´ë¶€ì— 1ì°¨ cacheê°€ ì¡´ì¬í•˜ê³  (key, value) í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•œë‹¤.ì¥ì  : bufferingì´ë‚˜ Cachingì„ í•  ìˆ˜ ìˆë‹¤. @Id Entity Member1 member @Id : Key Entity : ê°ì²´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ì´ì ","text":"ëª©ì°¨ JPA - Entityì˜ ìƒëª…ì£¼ê¸° JPA - Persist Context (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸) Persist Context (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸) ë€? JPA ê°€ Entity ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê³µê°„, Entity ìƒíƒœê°€ Database ì— ë°˜ì˜ë˜ê¸° ì „ê¹Œì§€ Entity ì˜ ì½ê¸°&#x2F;ì“°ê¸°&#x2F;ìˆ˜ì •&#x2F;ì‚­ì œë¥¼ ìƒíƒœ ê´€ë¦¬í•œë‹¤. EntityManagerFactory ì—ì„œ EntityManager ë¥¼ ìƒì„±í•˜ê³  EntityManager ë¥¼ ì´ìš©í•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. EntityManager ë¥¼ ì´ìš©í•´ Entity(ë°ì´í„°)ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ì¡°íšŒí•˜ë©´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ í•´ë‹¹ Entity ë¥¼ ê´€ë¦¬í•˜ê²Œ ëœë‹¤. EntityManager ëŠ” Transaction ë‹¨ìœ„ë¡œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ê³  ì§€ìš´ë‹¤. EntityManager ì™€ ì˜ì†ì„± Contextê°€ 1:1ë¡œ ëŒ€ì‘ì´ ëœë‹¤. ì˜ì†ì„± ContextëŠ” ë‚´ë¶€ì— 1ì°¨ cacheê°€ ì¡´ì¬í•˜ê³  (key, value) í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•œë‹¤.ì¥ì  : bufferingì´ë‚˜ Cachingì„ í•  ìˆ˜ ìˆë‹¤. @Id Entity Member1 member @Id : Key Entity : ê°ì²´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ì´ì  1ì°¨ ìºì‹œ Database ì—ì„œ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ ì„ì‹œì ìœ¼ë¡œ ì €ì¥í•˜ê³  ê´€ë¦¬í•œë‹¤. ë™ì¼ì„± ë³´ì¥ ê°™ì€ Key ë¥¼ í†µí•´ ì¡°íšŒí• ë•Œ ë°˜í™˜ë˜ëŠ” ê°ì²´ëŠ” í•­ìƒ ê°™ë‹¤. íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—° Entity ì— ëŒ€í•œ ë³€ê²½ ì‘ì—…ì´ ëë‚˜ë©´ Database ì— ë°˜ì˜í•œë‹¤. ë³€ê²½ ê°ì§€ Entity ê°€ ë³€ê²½ì´ ì¼ì–´ë‚˜ë©´ Database ì— ë°˜ì˜í•œë‹¤. ë³€ê²½ì´ ì—†ì„ ê²½ìš°ì—ëŠ” ë°˜ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤. ì§€ì—° ë¡œë”© ì‹¤ì œ ê°ì²´ë¥¼ í˜¸ì¶œ ì „ê¹Œì§€ëŠ” Proxy ê°ì²´ë¥¼ Loading í•´ ë†“ëŠ”ë‹¤. 1ì°¨ ìºì‹œì—ì„œ ì¡°íšŒì¡°íšŒë¥¼ í–ˆì§€ë§Œ select ì¿¼ë¦¬ê°€ ë‚˜ê°€ì§€ ì•ŠëŠ”ë‹¤. persistë¡œ ì €ì¥ ì‹œì—ëŠ” 1ì°¨ ìºì‹œì— ë°ì´í„°ê°€ ì €ì¥ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ì¡°íšŒë¥¼ í•  ë•Œ DBë¥¼ ì¡°íšŒ í•œ ê²ƒì´ ì•„ë‹Œ ìš°ì„ ì ìœ¼ë¡œ 1ì°¨ ìºì‹œë¥¼ ì¡°íšŒí•´ ê°’ì„ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— DBì— select ì¿¼ë¦¬ê°€ ë‚˜ê°€ì§€ ì•Šì•˜ë˜ ê²ƒì´ë‹¤. public class JpaMain &#123; public static void main(String[] args) &#123; EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = emf.createEntityManager(); EntityTransaction tx = em.getTransaction(); tx.begin(); try &#123; // ë¹„ì˜ì† ìƒíƒœ Member member = new Member(); member.setId(101L); member.setName(&quot;HelloJPA&quot;); // ì˜ì† ìƒíƒœ em.persist(member); // Member Entity ë¥¼ ì¡°íšŒí•œë‹¤. Member findMember = em.find(Member.class, 101L); System.out.println(&quot;findMember.id = &quot; + findMember.getId()); System.out.println(&quot;findMember.name = &quot; + findMember.getName()); tx.commit(); &#125;catch (Exception e)&#123; tx.rollback(); &#125;finally &#123; em.close(); &#125; emf.close(); &#125;&#125; Member Entity ë¥¼ ì¡°íšŒ í–ˆì§€ë§Œ ë”°ë¡œ Select ì¿¼ë¦¬ë¬¸ì´ ë‚˜ê°€ì§€ ì•Šê³ , ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë„£ê¸° ìœ„í•œ Insert ë¬¸ì´ ë°œìƒíŒë‹¤. findMember.id = 101 findMember.name = HelloJPA Hibernate: /* insert hellojpa.Member */ insert into Member (name, id) values (?, ?) 1ì°¨ ìºì‹œì— dataê°€ ì—†ëŠ” ê²½ìš° DBì—ì„œ ì¡°íšŒ 1ì°¨ Cacheì— ë°ì´í„°ë¥¼ ì €ì¥(ìˆìœ¼ë©´)í–ˆìœ¼ë©´ í•´ë‹¹ ê°ì²´ë¥¼ ê°€ì ¸ì™€ì„œ ì‚¬ìš© 1ì°¨ Cacheì— ì—†ì„ ê²½ìš° Database ì— ì ‘ê·¼í•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ í›„ 1ì°¨ Cache ì— ì €ì¥í•œë‹¤. ë˜‘ê°™ì€ Key(ì¡°íšŒì¡°ê±´) ë¥¼ ê°€ì§€ê³  ì¡°íšŒ í–ˆì„ ë•Œ ì¿¼ë¦¬ê°€ í•œë²ˆë§Œ ë‚˜ê°€ê³  ê·¸ ë‹¤ìŒì—ëŠ” 1ì°¨ ìºì‹œ(ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸) ì— ì €ì¥ëœ Entity ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. public class JpaMain &#123; public static void main(String[] args) &#123; EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = emf.createEntityManager(); EntityTransaction tx = em.getTransaction(); tx.begin(); try &#123; Member findMember1 = em.find(Member.class, 101L); // ì²«ë²ˆì§¸ ì¡°íšŒì‹œì—ëŠ” queryê°€ ë‚˜ê°„ë‹¤. Member findMember2 = em.find(Member.class, 101L); // ë‘ë²ˆì§¸ ì¡°íšŒì‹œì—ëŠ” ë‚˜ê°€ì§€ ì•ŠëŠ”ë‹¤. tx.commit(); &#125;catch (Exception e)&#123; tx.rollback(); &#125;finally &#123; em.close(); &#125; emf.close(); &#125;&#125; ë‘ë²ˆì˜ ì¡°íšŒë¥¼ í–ˆì§€ë§Œ í•˜ë‚˜ì˜ select ë¬¸ë§Œ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Hibernate: select member0_.id as id1_0_0_, member0_.name as name2_0_0_ from Member member0_ where member0_.id=? ì˜ì† ì—”í‹°í‹°ì˜ ë™ì¼ì„± ë³´ì¥Member findMember1 = em.find(Member.class, 101L); // ì²«ë²ˆì§¸ ì¡°íšŒì‹œì—ëŠ” queryê°€ ë‚˜ê°„ë‹¤.Member findMember2 = em.find(Member.class, 101L); // ë‘ë²ˆì§¸ ì¡°íšŒì‹œì—ëŠ” ë‚˜ê°€ì§€ ì•ŠëŠ”ë‹¤.System.out.println(&quot;result = &quot; + (findMember1 == findMember2)); // trueê°€ ë‚˜ì˜¨ë‹¤. result = true íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—°commit()ì„ ì‹¤í–‰í–ˆì„ ë•Œ queryë¬¸ì´ ë‚ ë¼ê°€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. public class JpaMain &#123; public static void main(String[] args) &#123; EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = emf.createEntityManager(); EntityTransaction tx = em.getTransaction(); tx.begin(); try &#123; Member member1 = new Member(150L, &quot;A&quot;); Member member2 = new Member(160L, &quot;B&quot;); em.persist(member1); em.persist(member2); System.out.println(&quot;==========================&quot;); tx.commit(); &#125;catch (Exception e)&#123; tx.rollback(); &#125;finally &#123; em.close(); &#125; emf.close(); &#125;&#125; Hibernate: /* insert hellojpa.Member */ insert into Member (name, id) values (?, ?)Hibernate: /* insert hellojpa.Member */ insert into Member (name, id) values (?, ?) ì—”í‹°í‹° ìˆ˜ì •public class JpaMain &#123; public static void main(String[] args) &#123; EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager em = emf.createEntityManager(); EntityTransaction tx = em.getTransaction(); tx.begin(); try &#123; Member member = em.find(Member.class, 150L); member.setName(&quot;ZZZZZ&quot;);// em.persist(member); persistë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤. System.out.println(&quot;==========================&quot;); tx.commit(); &#125;catch (Exception e)&#123; tx.rollback(); &#125;finally &#123; em.close(); &#125; emf.close(); &#125;&#125; Hibernate: select member0_.id as id1_0_0_, member0_.name as name2_0_0_ from Member member0_ where member0_.id=?==========================Hibernate: /* update hellojpa.Member */ update Member set name=? where id=?","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"JPA í”„ë¡œê·¸ë˜ë°(ê¸°ë³¸í¸)","slug":"Develop/JPA/JPA-í”„ë¡œê·¸ë˜ë°-ê¸°ë³¸í¸","permalink":"https://ckck803.github.io/categories/Develop/JPA/JPA-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EA%B8%B0%EB%B3%B8%ED%8E%B8/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš©","slug":"spring/spring-cloud/gateway/spring-cloud-05","date":"2021-09-17T20:31:31.000Z","updated":"2024-02-26T15:33:47.424Z","comments":true,"path":"2021/09/18/spring/spring-cloud/gateway/spring-cloud-05/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/gateway/spring-cloud-05/","excerpt":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 5 - Spring Cloud Gateway Global Filter ì ìš©ê³µí†µì ìœ¼ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” Filter. ë¼ìš°íŒ… ì •ë³´ë§ˆë‹¤ ê°œë³„ì ìœ¼ë¡œ í•„í„°ë¥¼ ì§€ì •í•´ì•¼ í•˜ëŠ” Custom Filterì™€ ë‹¤ë¥´ê²Œ Global Filterì˜ ê²½ìš° í•œë²ˆì— ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤. GlobalFilter.java @Component@Slf4jpublic class GlobalFilter extends AbstractGatewayFilterFactory&lt;GlobalFilter.Config&gt; &#123; public GlobalFilter()&#123; super(Config.class); &#125; @Override public GatewayFilter apply(Config config) &#123; // Custom Pre Filter return (exchange, chain) -&gt; &#123; ServerHttpRequest request = exchange.getRequest(); ServerHttpResponse response = exchange.getResponse(); log.info(&quot;Global Filter baseMessage : &#123;&#125;&quot;, request.getId()); if(config.isPreLogger())&#123; log.info(&quot;Global Filter Start: request id -&gt; &#123;&#125;&quot;, request.getId()); &#125; // Custom Post Filter return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; &#123; if(config.isPostLogger())&#123; log.info(&quot;Global Filter End: response code -&gt; &#123;&#125;&quot;, response.getStatusCode()); &#125; &#125;)); &#125;; &#125; @Data public static class Config&#123; // Put the configuration properties private String baseMessage; private boolean preLogger; private boolean postLogger; &#125;&#125; application.yml spring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway GlobalFilter preLogger: true postLogger: true","text":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) Spring Cloudë¡œ ê°œë°œí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ 5 - Spring Cloud Gateway Global Filter ì ìš©ê³µí†µì ìœ¼ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” Filter. ë¼ìš°íŒ… ì •ë³´ë§ˆë‹¤ ê°œë³„ì ìœ¼ë¡œ í•„í„°ë¥¼ ì§€ì •í•´ì•¼ í•˜ëŠ” Custom Filterì™€ ë‹¤ë¥´ê²Œ Global Filterì˜ ê²½ìš° í•œë²ˆì— ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤. GlobalFilter.java @Component@Slf4jpublic class GlobalFilter extends AbstractGatewayFilterFactory&lt;GlobalFilter.Config&gt; &#123; public GlobalFilter()&#123; super(Config.class); &#125; @Override public GatewayFilter apply(Config config) &#123; // Custom Pre Filter return (exchange, chain) -&gt; &#123; ServerHttpRequest request = exchange.getRequest(); ServerHttpResponse response = exchange.getResponse(); log.info(&quot;Global Filter baseMessage : &#123;&#125;&quot;, request.getId()); if(config.isPreLogger())&#123; log.info(&quot;Global Filter Start: request id -&gt; &#123;&#125;&quot;, request.getId()); &#125; // Custom Post Filter return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; &#123; if(config.isPostLogger())&#123; log.info(&quot;Global Filter End: response code -&gt; &#123;&#125;&quot;, response.getStatusCode()); &#125; &#125;)); &#125;; &#125; @Data public static class Config&#123; // Put the configuration properties private String baseMessage; private boolean preLogger; private boolean postLogger; &#125;&#125; application.yml spring: application: name: apigateway-service cloud: gateway: default-filters: - name: GlobalFilter args: baseMessage: Spring Cloud Gateway GlobalFilter preLogger: true postLogger: true","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Gateway","slug":"Spring/Spring-Cloud/Gateway","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Gateway/"}],"tags":[]},{"title":"Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš©","slug":"spring/spring-cloud/gateway/spring-cloud-04","date":"2021-09-17T19:31:31.000Z","updated":"2024-02-26T15:33:43.634Z","comments":true,"path":"2021/09/18/spring/spring-cloud/gateway/spring-cloud-04/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/gateway/spring-cloud-04/","excerpt":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) ì‚¬ìš©ì ì •ì˜ í•„í„° ë§Œë“¤ê¸°AbstractGatewayFilterFactory ë¥¼ ì´ìš©í•´ Custom Filterë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤. CustomFilter.java @Component@Slf4jpublic class CustomFilter extends AbstractGatewayFilterFactory&lt;CustomFilter.Config&gt; &#123; public CustomFilter()&#123; super(Config.class); &#125; @Override public GatewayFilter apply(Config config) &#123; // Custom Pre Filter return (exchange, chain) -&gt; &#123; ServerHttpRequest request = exchange.getRequest(); ServerHttpResponse response = exchange.getResponse(); log.info(&quot;Custom PRE filter: request id -&gt; &#123;&#125;&quot;, request.getId()); // Custom Post Filter return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; &#123; log.info(&quot;Custom POST filter: request id -&gt; &#123;&#125;&quot;, response.getStatusCode()); &#125;)); &#125;; &#125; public static class Config&#123; // Put the configuration properties &#125;&#125; ì„¤ì •ì— ì¶”ê°€í•˜ê¸° spring.cloud.gateway.routes.filters application.yml server: port: 8080eureka: client: register-with-eureka: false fetch-registry: false service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: routes: - id: first-service uri: http://localhost:8081/ predicates: - Path=/first-service/** filters: - CustomFilter# - AddRequestHeader=first-request, first-request-header2# - AddResponseHeader=first-response, first-response-header2 - id: second-service uri: http://localhost:8082/ predicates: - Path=/second-service/** filters: - CustomFilter# - AddRequestHeader=second-request, second-request-header2# - AddResponseHeader=second-response, second-response-header2","text":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) ì‚¬ìš©ì ì •ì˜ í•„í„° ë§Œë“¤ê¸°AbstractGatewayFilterFactory ë¥¼ ì´ìš©í•´ Custom Filterë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤. CustomFilter.java @Component@Slf4jpublic class CustomFilter extends AbstractGatewayFilterFactory&lt;CustomFilter.Config&gt; &#123; public CustomFilter()&#123; super(Config.class); &#125; @Override public GatewayFilter apply(Config config) &#123; // Custom Pre Filter return (exchange, chain) -&gt; &#123; ServerHttpRequest request = exchange.getRequest(); ServerHttpResponse response = exchange.getResponse(); log.info(&quot;Custom PRE filter: request id -&gt; &#123;&#125;&quot;, request.getId()); // Custom Post Filter return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; &#123; log.info(&quot;Custom POST filter: request id -&gt; &#123;&#125;&quot;, response.getStatusCode()); &#125;)); &#125;; &#125; public static class Config&#123; // Put the configuration properties &#125;&#125; ì„¤ì •ì— ì¶”ê°€í•˜ê¸° spring.cloud.gateway.routes.filters application.yml server: port: 8080eureka: client: register-with-eureka: false fetch-registry: false service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: routes: - id: first-service uri: http://localhost:8081/ predicates: - Path=/first-service/** filters: - CustomFilter# - AddRequestHeader=first-request, first-request-header2# - AddResponseHeader=first-response, first-response-header2 - id: second-service uri: http://localhost:8082/ predicates: - Path=/second-service/** filters: - CustomFilter# - AddRequestHeader=second-request, second-request-header2# - AddResponseHeader=second-response, second-response-header2","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Gateway","slug":"Spring/Spring-Cloud/Gateway","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Gateway/"}],"tags":[]},{"title":"Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš©","slug":"spring/spring-cloud/gateway/spring-cloud-03","date":"2021-09-17T18:31:31.000Z","updated":"2024-02-26T15:33:39.327Z","comments":true,"path":"2021/09/18/spring/spring-cloud/gateway/spring-cloud-03/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/gateway/spring-cloud-03/","excerpt":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) ì½”ë“œë¥¼ í†µí•œ ë¼ìš°íŒ… ì„¤ì •RouteLocatorBuilder ë¥¼ ì´ìš©í•´ Filterë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. FilterConfig.java @Configurationpublic class FilterConfig &#123; @Bean public RouteLocator gatewayRoutes(RouteLocatorBuilder builder) &#123; return builder.routes() .route(r -&gt; r.path(&quot;/first-service/**&quot;) .filters(f -&gt; f.addRequestHeader(&quot;first-request&quot;, &quot;first-request-header&quot;) .addResponseHeader(&quot;first-response&quot;, &quot;first-response-header&quot;)) .uri(&quot;http://localhost:8081&quot;)) .route(r -&gt; r.path(&quot;/second-service/**&quot;) .filters(f -&gt; f.addRequestHeader(&quot;second-request&quot;, &quot;second-request-header&quot;) .addResponseHeader(&quot;second-response&quot;, &quot;second-response-header&quot;)) .uri(&quot;http://localhost:8082&quot;)) .build(); &#125;&#125; application.ymlì„ í†µí•œ ë¼ìš°íŒ… ì„¤ì • spring.cloud.gateway.routes.filters application.yml spring: application: name: apigateway-service cloud: gateway: routes: - id: first-service uri: http://localhost:8081/ predicates: - Path=/first-service/** filters: - AddRequestHeader=first-request, first-request-header2 - AddResponseHeader=first-response, first-response-header2 - id: second-service uri: http://localhost:8082/ predicates: - Path=/second-service/** filters: - AddRequestHeader=second-request, second-request-header2 - AddResponseHeader=second-response, second-response-header2","text":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) ì½”ë“œë¥¼ í†µí•œ ë¼ìš°íŒ… ì„¤ì •RouteLocatorBuilder ë¥¼ ì´ìš©í•´ Filterë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. FilterConfig.java @Configurationpublic class FilterConfig &#123; @Bean public RouteLocator gatewayRoutes(RouteLocatorBuilder builder) &#123; return builder.routes() .route(r -&gt; r.path(&quot;/first-service/**&quot;) .filters(f -&gt; f.addRequestHeader(&quot;first-request&quot;, &quot;first-request-header&quot;) .addResponseHeader(&quot;first-response&quot;, &quot;first-response-header&quot;)) .uri(&quot;http://localhost:8081&quot;)) .route(r -&gt; r.path(&quot;/second-service/**&quot;) .filters(f -&gt; f.addRequestHeader(&quot;second-request&quot;, &quot;second-request-header&quot;) .addResponseHeader(&quot;second-response&quot;, &quot;second-response-header&quot;)) .uri(&quot;http://localhost:8082&quot;)) .build(); &#125;&#125; application.ymlì„ í†µí•œ ë¼ìš°íŒ… ì„¤ì • spring.cloud.gateway.routes.filters application.yml spring: application: name: apigateway-service cloud: gateway: routes: - id: first-service uri: http://localhost:8081/ predicates: - Path=/first-service/** filters: - AddRequestHeader=first-request, first-request-header2 - AddResponseHeader=first-response, first-response-header2 - id: second-service uri: http://localhost:8082/ predicates: - Path=/second-service/** filters: - AddRequestHeader=second-request, second-request-header2 - AddResponseHeader=second-response, second-response-header2","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Gateway","slug":"Spring/Spring-Cloud/Gateway","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Gateway/"}],"tags":[]},{"title":"Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸°","slug":"spring/spring-cloud/gateway/spring-cloud-02","date":"2021-09-17T17:31:31.000Z","updated":"2024-02-26T15:33:27.553Z","comments":true,"path":"2021/09/18/spring/spring-cloud/gateway/spring-cloud-02/","link":"","permalink":"https://ckck803.github.io/2021/09/18/spring/spring-cloud/gateway/spring-cloud-02/","excerpt":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) ì°¸ê³  https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/ Spring Cloud Gatewayë‹¹ì—°íˆ ê°€ëŠ¥í•©ë‹ˆë‹¤! Spring Cloud GatewayëŠ” ìŠ¤í”„ë§ ìƒíƒœê³„ì—ì„œ ì œê³µí•˜ëŠ” ë„êµ¬ ì¤‘ í•˜ë‚˜ë¡œ, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. Spring Cloud GatewayëŠ” API ê²Œì´íŠ¸ì›¨ì´ë¡œ ì‘ë™í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì™€ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ì‚¬ì´ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ê³  ë³´ì•ˆ, ë¡œë“œ ë°¸ëŸ°ì‹±, ë¼ìš°íŒ…, í•„í„°ë§ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. Spring Cloud Gatewayì˜ í•µì‹¬ ê°œë…ì€ ë¼ìš°íŠ¸(Routes)ì™€ í•„í„°(Filters)ì…ë‹ˆë‹¤. ë¼ìš°íŠ¸ëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ìˆ˜ì‹ í•˜ê³ , í•´ë‹¹ ìš”ì²­ì„ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ë¡œ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì„ ì •ì˜í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ê° ë¼ìš°íŠ¸ëŠ” ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ê²½ë¡œ, ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” ëŒ€ìƒ URI, í•„ìš”í•œ í•„í„° ë“±ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìš”ì²­ì˜ ë™ì ì¸ ë¼ìš°íŒ…ê³¼ ë¡œë“œ ë°¸ëŸ°ì‹±ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, í•„í„°ëŠ” ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì „ì²˜ë¦¬ì™€ í›„ì²˜ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¸ì¦, ë¡œê¹…, í—¤ë” ì¡°ì‘ ë“±ì˜ ì‘ì—…ì„ í•„í„°ë¥¼ í†µí•´ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•„í„°ëŠ” ì „ì—­ í•„í„°(Global Filters)ì™€ ë¼ìš°íŠ¸ë³„ í•„í„°(Route Filters)ë¡œ êµ¬ë¶„ë  ìˆ˜ ìˆìœ¼ë©°, í•„í„° ì²´ì¸ì„ í†µí•´ ì—¬ëŸ¬ í•„í„°ë¥¼ ì¡°í•©í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Cloud GatewayëŠ” Netty ì„œë²„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°, ë¹„ë™ê¸°ì ì´ê³  ë„Œë¸”ë¡œí‚¹ ë°©ì‹ìœ¼ë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë†’ì€ ì„±ëŠ¥ê³¼ í™•ì¥ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ, Spring Cloud GatewayëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ê³¼ í™•ì¥ í¬ì¸íŠ¸ë¥¼ ì œê³µí•˜ì—¬ ê°œë°œìê°€ í•„ìš”ì— ë§ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ì•½í•˜ìë©´, Spring Cloud GatewayëŠ” ìŠ¤í”„ë§ ê¸°ë°˜ì˜ API ê²Œì´íŠ¸ì›¨ì´ë¡œì„œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë¹„ìŠ¤ ì‚¬ì´ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ê³  ë³´ì•ˆ, ë¡œë“œ ë°¸ëŸ°ì‹±, ë¼ìš°íŒ…, í•„í„°ë§ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.","text":"Spring Cloud - 7. Load Balancer ì ìš© Spring Cloud - 6. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 5. Spring Cloud Gateway Global Filter ì ìš© Spring Cloud - 4. Spring Cloud Gateway Custom Filter ì ìš© Spring Cloud - 3. Spring Cloud Gateway Filter ì ìš© Spring Cloud - 2. Spring Cloud Gateway ì‚¬ìš©í•˜ê¸° Spring Cloud - Eureka ì— Service ë“±ë¡í•˜ê¸° Spring Cloud - Service Discovery Server (Eureka) ì°¸ê³  https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/ Spring Cloud Gatewayë‹¹ì—°íˆ ê°€ëŠ¥í•©ë‹ˆë‹¤! Spring Cloud GatewayëŠ” ìŠ¤í”„ë§ ìƒíƒœê³„ì—ì„œ ì œê³µí•˜ëŠ” ë„êµ¬ ì¤‘ í•˜ë‚˜ë¡œ, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. Spring Cloud GatewayëŠ” API ê²Œì´íŠ¸ì›¨ì´ë¡œ ì‘ë™í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì™€ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ì‚¬ì´ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ê³  ë³´ì•ˆ, ë¡œë“œ ë°¸ëŸ°ì‹±, ë¼ìš°íŒ…, í•„í„°ë§ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. Spring Cloud Gatewayì˜ í•µì‹¬ ê°œë…ì€ ë¼ìš°íŠ¸(Routes)ì™€ í•„í„°(Filters)ì…ë‹ˆë‹¤. ë¼ìš°íŠ¸ëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ìˆ˜ì‹ í•˜ê³ , í•´ë‹¹ ìš”ì²­ì„ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ë¡œ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì„ ì •ì˜í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ê° ë¼ìš°íŠ¸ëŠ” ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ê²½ë¡œ, ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” ëŒ€ìƒ URI, í•„ìš”í•œ í•„í„° ë“±ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìš”ì²­ì˜ ë™ì ì¸ ë¼ìš°íŒ…ê³¼ ë¡œë“œ ë°¸ëŸ°ì‹±ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, í•„í„°ëŠ” ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì „ì²˜ë¦¬ì™€ í›„ì²˜ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¸ì¦, ë¡œê¹…, í—¤ë” ì¡°ì‘ ë“±ì˜ ì‘ì—…ì„ í•„í„°ë¥¼ í†µí•´ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•„í„°ëŠ” ì „ì—­ í•„í„°(Global Filters)ì™€ ë¼ìš°íŠ¸ë³„ í•„í„°(Route Filters)ë¡œ êµ¬ë¶„ë  ìˆ˜ ìˆìœ¼ë©°, í•„í„° ì²´ì¸ì„ í†µí•´ ì—¬ëŸ¬ í•„í„°ë¥¼ ì¡°í•©í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Cloud GatewayëŠ” Netty ì„œë²„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°, ë¹„ë™ê¸°ì ì´ê³  ë„Œë¸”ë¡œí‚¹ ë°©ì‹ìœ¼ë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë†’ì€ ì„±ëŠ¥ê³¼ í™•ì¥ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ, Spring Cloud GatewayëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ê³¼ í™•ì¥ í¬ì¸íŠ¸ë¥¼ ì œê³µí•˜ì—¬ ê°œë°œìê°€ í•„ìš”ì— ë§ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ì•½í•˜ìë©´, Spring Cloud GatewayëŠ” ìŠ¤í”„ë§ ê¸°ë°˜ì˜ API ê²Œì´íŠ¸ì›¨ì´ë¡œì„œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë¹„ìŠ¤ ì‚¬ì´ì˜ í†µì‹ ì„ ê´€ë¦¬í•˜ê³  ë³´ì•ˆ, ë¡œë“œ ë°¸ëŸ°ì‹±, ë¼ìš°íŒ…, í•„í„°ë§ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. Spring Cloud Gateway ì˜ì¡´ì„± ì¶”ê°€implementation &#x27;org.springframework.cloud:spring-cloud-starter-gateway&#x27;implementation &#x27;org.springframework.cloud:spring-cloud-starter-netflix-eureka-client&#x27; Gateway ì„¤ì •í•˜ê¸° spring.cloud.gateway.routes.id spring.cloud.gateway.routes.uri spring.cloud.gateway.routes.predicates application.yml server: port: 8080eureka: client: register-with-eureka: false fetch-registry: false service-url: defaultZone: http://localhost:8761/eurekaspring: application: name: apigateway-service cloud: gateway: routes: - id: first-service uri: http://localhost:8081/ predicates: - Path=/first-service/** - id: second-service uri: http://localhost:8082/ predicates: - Path=/second-service/** First Serviceserver: port: 8081spring: application: name: my-first-serviceeureka: client: fetch-registry: false register-with-eureka: false @RestController@RequestMapping(&quot;first-service&quot;)public class FirstServiceController &#123; @GetMapping(&quot;/welcome&quot;) public String welcome()&#123; return &quot;Welcome to the First Service&quot;; &#125;&#125; Second Serviceserver: port: 8082spring: application: name: my-first-serviceeureka: client: fetch-registry: false register-with-eureka: false @RestController@RequestMapping(&quot;second-service&quot;)public class SecondServiceController &#123; @GetMapping(&quot;/welcome&quot;) public String welcome()&#123; return &quot;Welcome to the Second service&quot;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Gateway","slug":"Spring/Spring-Cloud/Gateway","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Gateway/"}],"tags":[]},{"title":"React Toast UI Editor 4 - ì´ë¯¸ì§€ ì˜¬ë¦¬ê¸°","slug":"react/ToastUI/toastui-4","date":"2021-09-15T00:31:46.000Z","updated":"2024-11-23T16:46:03.959Z","comments":true,"path":"2021/09/15/react/ToastUI/toastui-4/","link":"","permalink":"https://ckck803.github.io/2021/09/15/react/ToastUI/toastui-4/","excerpt":"React Toast UI Editor 4 - ì´ë¯¸ì§€ ì˜¬ë¦¬ê¸°Editorì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ì§€ì›í•˜ë‹¤ê³  í•´ì„œ ì´ë¯¸ì§€ë¥¼ ë¶™ì—¬ ë„£ì—ˆë”ë‹ˆ ë‹¤ìŒê³¼ ê°™ì´ ì´ë¯¸ì§€ê°€ base64ë¡œ ì¸ì½”ë”© ë¼ ì˜¬ë¼ê°€ëŠ” ê²ƒì„ ë³´ê³  ì‚´ì§ ë‹¹í™©í–ˆë‹¤. ì–´ë–»ê²Œ í•´ì•¼ì§€ í•˜ë©´ì„œ ë¬¸ë“ ìƒê°ì´ ë“¤ì—ˆë˜ê²Œ Markdown Editorë¥¼ ì‚¬ìš©í•˜ëŠ” ëŒ€í‘œ ë¸”ë¡œê·¸ ì‚¬ì´íŠ¸ì¸ velogê°€ ìƒê°ì´ ë‚¬ë‹¤. ê·¸ë˜ì„œ ë‹¹ì¥ velogë¡œ ê°€ì„œ ì´ë¯¸ì§€ë¥¼ ì˜¬ë ¤ë³´ë‹ˆ! ë‹¤ìŒê³¼ ê°™ì´ ì´ë¯¸ì§€ê°€ ì €ì¥ëœ URLì„ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆì—ˆë‹¤. ì•„ë§ˆ ë‚´ë¶€ì ìœ¼ë¡œ ì´ë¯¸ì§€ê°€ ë“¤ì–´ì˜¤ë©´ ë¨¼ì € ì„œë²„ì— ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ê³  ì´ë¯¸ì§€ê°€ ì €ì¥ëœ ê²½ë¡œë¥¼ ë°›ëŠ” ë¡œì§ ê°™ì•˜ë‹¤. ì¦‰! ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œ í•˜ë ¤ë©´ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì„œë²„ë¥¼ ì¤€ë¹„í•´ ì—°ë™í•  í•„ìš”ê°€ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. Toast UI Editorì— Image ì—…ë¡œë“œ í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì°¾ë‹¤ ë³´ë‹ˆ ì²˜ìŒì— ì—°ê²°ëœ Hookì„ ì œê±°í•˜ê³  ìƒˆë¡œìš´ Hookì„ ì •ì˜í•´ ì„œë²„ì— ì´ë¯¸ì§€ë¥¼ ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ê²ƒì„ ì•Œê²Œ ëë‹¤. https://github.com/nhn/tui.editor/issues/1588 TOAST UI ì— Image Server ì— ì˜¬ë¦¬ëŠ” ê¸°ëŠ¥ êµ¬í˜„import React, &#123; useRef, useEffect &#125; from &quot;react&quot;;import axios from &quot;axios&quot;;// Toast UI Editor ëª¨ë“ˆ ì¶”ê°€import &#123; Editor &#125; from &quot;@toast-ui/react-editor&quot;;import &quot;@toast-ui/editor/dist/toastui-editor.css&quot;;// SyntaxHighlight ëª¨ë“ˆ ì¶”ê°€import codeSyntaxHighlight from &quot;@toast-ui/editor-plugin-code-syntax-highlight/dist/toastui-editor-plugin-code-syntax-highlight-all.js&quot;;// prism ëª¨ë“ˆ ì¶”ê°€import &quot;prismjs/themes/prism.css&quot;;const Write = () =&gt; &#123; const editorRef = useRef(); const handleClick = () =&gt; &#123; console.log(editorRef.current.getInstance().getMarkdown()); &#125;; useEffect(() =&gt; &#123; if (editorRef.current) &#123; // ê¸°ì¡´ì— Image ë¥¼ Import í•˜ëŠ” Hook ì„ ì œê±°í•œë‹¤. editorRef.current.getInstance().removeHook(&quot;addImageBlobHook&quot;); // ìƒˆë¡­ê²Œ Image ë¥¼ Import í•˜ëŠ” Hook ì„ ìƒì„±í•œë‹¤. editorRef.current .getInstance() .addHook(&quot;addImageBlobHook&quot;, (blob, callback) =&gt; &#123; (async () =&gt; &#123; let formData = new FormData(); formData.append(&quot;file&quot;, blob); console.log(&quot;ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œ ëìŠµë‹ˆë‹¤.&quot;); const &#123; data: filename &#125; = await axios.post( &quot;/file/upload&quot;, formData, &#123; header: &#123; &quot;content-type&quot;: &quot;multipart/formdata&quot; &#125;, &#125; ); // .then((response) =&gt; &#123; // console.log(response); // &#125;); const imageUrl = &quot;http://localhost:8080/file/upload/&quot; + filename; // Image ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” URL ì„ callback ë©”ì„œë“œì— ë„£ì–´ì£¼ë©´ ìë™ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤. callback(imageUrl, &quot;iamge&quot;); &#125;)(); return false; &#125;); &#125; return () =&gt; &#123;&#125;; &#125;, [editorRef]); return ( &lt;div&gt; &lt;Editor initialValue=&quot;hello react editor world!&quot; previewStyle=&quot;vertical&quot; height=&quot;800px&quot; initialEditType=&quot;markdown&quot; useCommandShortcut=&#123;true&#125; ref=&#123;editorRef&#125; plugins=&#123;[codeSyntaxHighlight]&#125; /&gt; &lt;button onClick=&#123;handleClick&#125;&gt;Markdown ë°˜í™˜í•˜ê¸°&lt;/button&gt; &lt;/div&gt; );&#125;;export default Write;","text":"React Toast UI Editor 4 - ì´ë¯¸ì§€ ì˜¬ë¦¬ê¸°Editorì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ì§€ì›í•˜ë‹¤ê³  í•´ì„œ ì´ë¯¸ì§€ë¥¼ ë¶™ì—¬ ë„£ì—ˆë”ë‹ˆ ë‹¤ìŒê³¼ ê°™ì´ ì´ë¯¸ì§€ê°€ base64ë¡œ ì¸ì½”ë”© ë¼ ì˜¬ë¼ê°€ëŠ” ê²ƒì„ ë³´ê³  ì‚´ì§ ë‹¹í™©í–ˆë‹¤. ì–´ë–»ê²Œ í•´ì•¼ì§€ í•˜ë©´ì„œ ë¬¸ë“ ìƒê°ì´ ë“¤ì—ˆë˜ê²Œ Markdown Editorë¥¼ ì‚¬ìš©í•˜ëŠ” ëŒ€í‘œ ë¸”ë¡œê·¸ ì‚¬ì´íŠ¸ì¸ velogê°€ ìƒê°ì´ ë‚¬ë‹¤. ê·¸ë˜ì„œ ë‹¹ì¥ velogë¡œ ê°€ì„œ ì´ë¯¸ì§€ë¥¼ ì˜¬ë ¤ë³´ë‹ˆ! ë‹¤ìŒê³¼ ê°™ì´ ì´ë¯¸ì§€ê°€ ì €ì¥ëœ URLì„ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆì—ˆë‹¤. ì•„ë§ˆ ë‚´ë¶€ì ìœ¼ë¡œ ì´ë¯¸ì§€ê°€ ë“¤ì–´ì˜¤ë©´ ë¨¼ì € ì„œë²„ì— ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ê³  ì´ë¯¸ì§€ê°€ ì €ì¥ëœ ê²½ë¡œë¥¼ ë°›ëŠ” ë¡œì§ ê°™ì•˜ë‹¤. ì¦‰! ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œ í•˜ë ¤ë©´ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì„œë²„ë¥¼ ì¤€ë¹„í•´ ì—°ë™í•  í•„ìš”ê°€ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. Toast UI Editorì— Image ì—…ë¡œë“œ í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì°¾ë‹¤ ë³´ë‹ˆ ì²˜ìŒì— ì—°ê²°ëœ Hookì„ ì œê±°í•˜ê³  ìƒˆë¡œìš´ Hookì„ ì •ì˜í•´ ì„œë²„ì— ì´ë¯¸ì§€ë¥¼ ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ê²ƒì„ ì•Œê²Œ ëë‹¤. https://github.com/nhn/tui.editor/issues/1588 TOAST UI ì— Image Server ì— ì˜¬ë¦¬ëŠ” ê¸°ëŠ¥ êµ¬í˜„import React, &#123; useRef, useEffect &#125; from &quot;react&quot;;import axios from &quot;axios&quot;;// Toast UI Editor ëª¨ë“ˆ ì¶”ê°€import &#123; Editor &#125; from &quot;@toast-ui/react-editor&quot;;import &quot;@toast-ui/editor/dist/toastui-editor.css&quot;;// SyntaxHighlight ëª¨ë“ˆ ì¶”ê°€import codeSyntaxHighlight from &quot;@toast-ui/editor-plugin-code-syntax-highlight/dist/toastui-editor-plugin-code-syntax-highlight-all.js&quot;;// prism ëª¨ë“ˆ ì¶”ê°€import &quot;prismjs/themes/prism.css&quot;;const Write = () =&gt; &#123; const editorRef = useRef(); const handleClick = () =&gt; &#123; console.log(editorRef.current.getInstance().getMarkdown()); &#125;; useEffect(() =&gt; &#123; if (editorRef.current) &#123; // ê¸°ì¡´ì— Image ë¥¼ Import í•˜ëŠ” Hook ì„ ì œê±°í•œë‹¤. editorRef.current.getInstance().removeHook(&quot;addImageBlobHook&quot;); // ìƒˆë¡­ê²Œ Image ë¥¼ Import í•˜ëŠ” Hook ì„ ìƒì„±í•œë‹¤. editorRef.current .getInstance() .addHook(&quot;addImageBlobHook&quot;, (blob, callback) =&gt; &#123; (async () =&gt; &#123; let formData = new FormData(); formData.append(&quot;file&quot;, blob); console.log(&quot;ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œ ëìŠµë‹ˆë‹¤.&quot;); const &#123; data: filename &#125; = await axios.post( &quot;/file/upload&quot;, formData, &#123; header: &#123; &quot;content-type&quot;: &quot;multipart/formdata&quot; &#125;, &#125; ); // .then((response) =&gt; &#123; // console.log(response); // &#125;); const imageUrl = &quot;http://localhost:8080/file/upload/&quot; + filename; // Image ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” URL ì„ callback ë©”ì„œë“œì— ë„£ì–´ì£¼ë©´ ìë™ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤. callback(imageUrl, &quot;iamge&quot;); &#125;)(); return false; &#125;); &#125; return () =&gt; &#123;&#125;; &#125;, [editorRef]); return ( &lt;div&gt; &lt;Editor initialValue=&quot;hello react editor world!&quot; previewStyle=&quot;vertical&quot; height=&quot;800px&quot; initialEditType=&quot;markdown&quot; useCommandShortcut=&#123;true&#125; ref=&#123;editorRef&#125; plugins=&#123;[codeSyntaxHighlight]&#125; /&gt; &lt;button onClick=&#123;handleClick&#125;&gt;Markdown ë°˜í™˜í•˜ê¸°&lt;/button&gt; &lt;/div&gt; );&#125;;export default Write; ì´ë¯¸ì§€ ì—…ë¡œë“œ ì„œë²„ êµ¬í˜„ì´ë¯¸ì§€ ì €ì¥ API êµ¬í˜„ ë™ì¼í•œ Image ëª…ìœ¼ë¡œ ì¸í•´ ê¸°ì¡´ ì´ë¯¸ì§€ë¥¼ ë®ì–´ì“°ëŠ” ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ UUID ë¥¼ ì´ìš©í•´ Image ë¥¼ ì €ì¥í•œë‹¤. String filePath = &quot;/Users/dongwoo-yang/spring-file/&quot;;@PostMapping(&quot;/file/upload&quot;)public ResponseEntity upload(@RequestParam(&quot;file&quot;) MultipartFile multipartFile, HttpServletRequest request) throws IOException, URISyntaxException &#123; if(multipartFile.isEmpty())&#123; log.info(&quot;File is empty&quot;); &#125; String fullFilename = multipartFile.getOriginalFilename(); int lastIndex = fullFilename.lastIndexOf(&quot;.&quot;); String filename = fullFilename.substring(0, lastIndex); String ext = fullFilename.substring(lastIndex + 1); // ìƒˆë¡œìš´ íŒŒì¼ ì´ë¦„ ìƒì„± String newName = UUID.randomUUID() + &quot;.&quot; + ext; String uploadPath = filePath + newName; // Path ê°ì²´ë¥¼ ì´ìš©í•´ ì €ì¥ multipartFile.transferTo(Paths.get(uploadPath)); URI uri = new URI(request.getRequestURI()); return ResponseEntity.created(uri).body(newName);&#125; ì €ì¥ëœ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•œ API êµ¬í˜„ ì „ë‹¬ ë°›ì€ File ëª…ì„ ì´ìš©í•´ ì„œë²„ì— ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¨ í›„ UrlResource ê°ì²´ë¡œ ë°˜í™˜í•˜ë©´ ë¸Œë¼ìš°ì €ì—ì„œ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. @ResponseBody@GetMapping(&quot;/file/upload/&#123;filename&#125;&quot;)public Resource downloadImage(@PathVariable String filename) throws MalformedURLException &#123; log.info(&quot;file: &#123;&#125;&quot;, filePath + filename); return new UrlResource(&quot;file:&quot; + filePath + filename);&#125; ì´ë¯¸ì§€ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì„œë²„ì— ì˜¬ë¦¬ê³  ì„œë²„ì— ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ToastUI","slug":"Frontend/ToastUI","permalink":"https://ckck803.github.io/categories/Frontend/ToastUI/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"React Toast UI Editor 3 - ì…ë ¥ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°","slug":"react/ToastUI/toastui-3","date":"2021-09-14T23:31:46.000Z","updated":"2024-11-23T16:46:03.816Z","comments":true,"path":"2021/09/15/react/ToastUI/toastui-3/","link":"","permalink":"https://ckck803.github.io/2021/09/15/react/ToastUI/toastui-3/","excerpt":"React Toast UI Editor 3 - ì…ë ¥ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°Editorì— ì…ë ¥ëœ ë‚´ìš©ì„ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì…ë ¥ëœ ê°’ì„ ë°›ì•„ì™€ì•¼ í•œë‹¤. Toast UI Editorì—ì„œëŠ” useRefë¥¼ ì´ìš©í•´ const editorRef = useRef(); ë²„íŠ¼ Event Handler ë§Œë“¤ê¸°ë²„íŠ¼ì„ ë§Œë“¤ì–´ì¤˜ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ Editorì— ì…ë ¥ëœ ë‚´ìš©ì„ ë°˜í™˜í•´ ì£¼ëŠ” Evnetë¥¼ ì‘ì„±í•œë‹¤. ì…ë ¥ëœ ê°’ì„ ë°›ì•„ì˜¬ ë•ŒëŠ” Ref ê°ì²´ì¸ editorRef ë¥¼ ì´ìš©í•´ Toast UI Editor ê°ì²´ë¥¼ ê°€ì ¸ì™€ ì…ë ¥ëœ ê°’ì„ ë°›ì•„ì˜¬ ìˆ˜ ìˆë„ë¡ í•œë‹¤. const handleClick = () =&gt; &#123; console.log(editorRef.current.getInstance().getMarkdown());&#125;; Button í´ë¦­ì— ëŒ€í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ Editor ì»´í¬ë„ŒíŠ¸ì— Ref ê°ì²´ë¥¼ ë„£ì–´ì¤€ë‹¤. &lt;div&gt; &lt;Editor initialValue=&quot;hello react editor world!&quot; previewStyle=&quot;vertical&quot; height=&quot;600px&quot; initialEditType=&quot;markdown&quot; useCommandShortcut=&#123;true&#125; ref=&#123;editorRef&#125; plugins=&#123;[codeSyntaxHighlight]&#125; /&gt; &lt;button onClick=&#123;handleClick&#125;&gt;Markdown ë°˜í™˜í•˜ê¸°&lt;/button&gt;&lt;/div&gt; ì „ì²´ ì†ŒìŠ¤","text":"React Toast UI Editor 3 - ì…ë ¥ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°Editorì— ì…ë ¥ëœ ë‚´ìš©ì„ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì…ë ¥ëœ ê°’ì„ ë°›ì•„ì™€ì•¼ í•œë‹¤. Toast UI Editorì—ì„œëŠ” useRefë¥¼ ì´ìš©í•´ const editorRef = useRef(); ë²„íŠ¼ Event Handler ë§Œë“¤ê¸°ë²„íŠ¼ì„ ë§Œë“¤ì–´ì¤˜ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ Editorì— ì…ë ¥ëœ ë‚´ìš©ì„ ë°˜í™˜í•´ ì£¼ëŠ” Evnetë¥¼ ì‘ì„±í•œë‹¤. ì…ë ¥ëœ ê°’ì„ ë°›ì•„ì˜¬ ë•ŒëŠ” Ref ê°ì²´ì¸ editorRef ë¥¼ ì´ìš©í•´ Toast UI Editor ê°ì²´ë¥¼ ê°€ì ¸ì™€ ì…ë ¥ëœ ê°’ì„ ë°›ì•„ì˜¬ ìˆ˜ ìˆë„ë¡ í•œë‹¤. const handleClick = () =&gt; &#123; console.log(editorRef.current.getInstance().getMarkdown());&#125;; Button í´ë¦­ì— ëŒ€í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ Editor ì»´í¬ë„ŒíŠ¸ì— Ref ê°ì²´ë¥¼ ë„£ì–´ì¤€ë‹¤. &lt;div&gt; &lt;Editor initialValue=&quot;hello react editor world!&quot; previewStyle=&quot;vertical&quot; height=&quot;600px&quot; initialEditType=&quot;markdown&quot; useCommandShortcut=&#123;true&#125; ref=&#123;editorRef&#125; plugins=&#123;[codeSyntaxHighlight]&#125; /&gt; &lt;button onClick=&#123;handleClick&#125;&gt;Markdown ë°˜í™˜í•˜ê¸°&lt;/button&gt;&lt;/div&gt; ì „ì²´ ì†ŒìŠ¤import React, &#123; useRef &#125; from &quot;react&quot;;// Toast UI Editor ëª¨ë“ˆ ì¶”ê°€import &#123; Editor &#125; from &quot;@toast-ui/react-editor&quot;;import &quot;@toast-ui/editor/dist/toastui-editor.css&quot;;// SyntaxHighlight ëª¨ë“ˆ ì¶”ê°€import codeSyntaxHighlight from &quot;@toast-ui/editor-plugin-code-syntax-highlight/dist/toastui-editor-plugin-code-syntax-highlight-all.js&quot;;// prism ëª¨ë“ˆ ì¶”ê°€import &quot;prismjs/themes/prism.css&quot;;const Write = () =&gt; &#123; const editorRef = useRef(); const handleClick = () =&gt; &#123; console.log(editorRef.current.getInstance().getMarkdown()); &#125;; return ( &lt;div&gt; &lt;Editor initialValue=&quot;hello react editor world!&quot; previewStyle=&quot;vertical&quot; height=&quot;600px&quot; initialEditType=&quot;markdown&quot; useCommandShortcut=&#123;true&#125; ref=&#123;editorRef&#125; plugins=&#123;[codeSyntaxHighlight]&#125; /&gt; &lt;button onClick=&#123;handleClick&#125;&gt;Markdown ë°˜í™˜í•˜ê¸°&lt;/button&gt; &lt;/div&gt; );&#125;;export default Write; Editorì— ì…ë ¥ëœ ê°’ë“¤ì´ Markdown ë°˜í™˜í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œë§ˆë‹¤ Consoleì— ì°íˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. https://github.com/nhn/tui.editor/tree/master/apps/react-editor","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ToastUI","slug":"Frontend/ToastUI","permalink":"https://ckck803.github.io/categories/Frontend/ToastUI/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"React Toast UI Editor 2 - Syntax Highlight ì ìš©í•˜ê¸°","slug":"react/ToastUI/toastui-2","date":"2021-09-14T22:31:46.000Z","updated":"2024-11-23T16:46:03.700Z","comments":true,"path":"2021/09/15/react/ToastUI/toastui-2/","link":"","permalink":"https://ckck803.github.io/2021/09/15/react/ToastUI/toastui-2/","excerpt":"Reactë¡œ Toast UI Editor 2 - Syntax Highlight ì ìš©í•˜ê¸°https://github.com/nhn/tui.editor/tree/master/plugins/code-syntax-highlight ê¸€ì„ ì“°ë‹¤ë³´ë©´ Postì— ì½”ë“œë¥¼ ê°™ì´ ì˜¬ë¦´ ê²½ìš°ê°€ ë§ì€ë°, ì´ˆê¸° Settingì€ Code Highlightê°€ ì ìš©ë¼ ìˆì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. ì•„ë¬´ë˜ë„ Code Highlightê°€ ì—†ì–´ì„œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê²Œ ë˜ë©´ ê°€ë…ì„±ë„ ì¢€ ë–¨ì–´ì§€ê³  Post ì‘ì„±í•  ë§›ë„ ì•ˆë‚˜ì„œ Editorì— Code Highlightë¥¼ ì ìš©í•˜ë ¤ê³  í•œë‹¤. íŒ¨í‚¤ì§€ ì¶”ê°€yarn add @toast-ui/editor-plugin-code-syntax-highlightyarn add prism import React from &quot;react&quot;;// Toast UI Editor ëª¨ë“ˆ ì¶”ê°€import &#123; Editor &#125; from &quot;@toast-ui/react-editor&quot;;import &quot;@toast-ui/editor/dist/toastui-editor.css&quot;;// SyntaxHighlight ëª¨ë“ˆ ì¶”ê°€import codeSyntaxHighlight from &quot;@toast-ui/editor-plugin-code-syntax-highlight/dist/toastui-editor-plugin-code-syntax-highlight-all.js&quot;;// prism ëª¨ë“ˆ ì¶”ê°€import &quot;prismjs/themes/prism.css&quot;;const Write = () =&gt; &#123; return ( &lt;Editor initialValue=&quot;hello react editor world!&quot; previewStyle=&quot;vertical&quot; height=&quot;600px&quot; initialEditType=&quot;markdown&quot; useCommandShortcut=&#123;true&#125; plugins=&#123;[codeSyntaxHighlight]&#125; /&gt; );&#125;;export default Write; Code Highlightê°€ ì ìš©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë•ë¶„ì— ê°€ë…ì„±ë„ í›¨ì”¬ ì¢‹ì•„ì ¸ ì ì  ë§˜ì— ë“¤ê¸° ì‹œì‘í–ˆë‹¤.","text":"Reactë¡œ Toast UI Editor 2 - Syntax Highlight ì ìš©í•˜ê¸°https://github.com/nhn/tui.editor/tree/master/plugins/code-syntax-highlight ê¸€ì„ ì“°ë‹¤ë³´ë©´ Postì— ì½”ë“œë¥¼ ê°™ì´ ì˜¬ë¦´ ê²½ìš°ê°€ ë§ì€ë°, ì´ˆê¸° Settingì€ Code Highlightê°€ ì ìš©ë¼ ìˆì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. ì•„ë¬´ë˜ë„ Code Highlightê°€ ì—†ì–´ì„œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê²Œ ë˜ë©´ ê°€ë…ì„±ë„ ì¢€ ë–¨ì–´ì§€ê³  Post ì‘ì„±í•  ë§›ë„ ì•ˆë‚˜ì„œ Editorì— Code Highlightë¥¼ ì ìš©í•˜ë ¤ê³  í•œë‹¤. íŒ¨í‚¤ì§€ ì¶”ê°€yarn add @toast-ui/editor-plugin-code-syntax-highlightyarn add prism import React from &quot;react&quot;;// Toast UI Editor ëª¨ë“ˆ ì¶”ê°€import &#123; Editor &#125; from &quot;@toast-ui/react-editor&quot;;import &quot;@toast-ui/editor/dist/toastui-editor.css&quot;;// SyntaxHighlight ëª¨ë“ˆ ì¶”ê°€import codeSyntaxHighlight from &quot;@toast-ui/editor-plugin-code-syntax-highlight/dist/toastui-editor-plugin-code-syntax-highlight-all.js&quot;;// prism ëª¨ë“ˆ ì¶”ê°€import &quot;prismjs/themes/prism.css&quot;;const Write = () =&gt; &#123; return ( &lt;Editor initialValue=&quot;hello react editor world!&quot; previewStyle=&quot;vertical&quot; height=&quot;600px&quot; initialEditType=&quot;markdown&quot; useCommandShortcut=&#123;true&#125; plugins=&#123;[codeSyntaxHighlight]&#125; /&gt; );&#125;;export default Write; Code Highlightê°€ ì ìš©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë•ë¶„ì— ê°€ë…ì„±ë„ í›¨ì”¬ ì¢‹ì•„ì ¸ ì ì  ë§˜ì— ë“¤ê¸° ì‹œì‘í–ˆë‹¤.","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ToastUI","slug":"Frontend/ToastUI","permalink":"https://ckck803.github.io/categories/Frontend/ToastUI/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"Reactë¡œ Toast UI Editor ì‚¬ìš©í•´ë³´ê¸°","slug":"react/ToastUI/toastui-1","date":"2021-09-14T21:31:46.000Z","updated":"2024-11-23T16:46:03.901Z","comments":true,"path":"2021/09/15/react/ToastUI/toastui-1/","link":"","permalink":"https://ckck803.github.io/2021/09/15/react/ToastUI/toastui-1/","excerpt":"Reactë¡œ Toast UI Editor ì‚¬ìš©í•´ë³´ê¸°ê°œì¸ í”„ë¡œì íŠ¸ë„ í•˜ê³  ì‹¶ê³  ë‚˜ë§Œì˜ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê³  ì‹¶ì€ ë§ˆìŒì— UIë„ ì°¾ì•„ë³´ê³  Editorë„ ì°¾ê³  ìˆì—ˆì—ˆë‹¤. ê°œì¸ì ìœ¼ë¡œ Editorë¥¼ ì°¾ê³  ìˆë˜ ê¸°ì¤€ì€ ì²«ë²ˆì§¸ëŠ” Markdown ì–¸ì–´ê°€ ì‚¬ìš© ê°€ëŠ¥í•´ì•¼ í•˜ê³  ë‘ë²ˆì§¸ëŠ” ì´ë¯¸ì§€ ì—…ë¡œë“œê°€ ê°€ëŠ¥í•œ Editorë¥¼ ì°¾ê³  ìˆë˜ ì™€ì¤‘ì— NHNì—ì„œ ì œê³µí•˜ëŠ” Toast UI Editorë¥¼ ì°¾ê²Œ ëë‹¤. ê¸°ëŠ¥ë“¤ì´ ë„ˆë¬´ë„ˆë¬´ ë§˜ì— ë“¤ì–´ ì‚¬ìš©í•´ë³´ê¸°ë¡œ í–ˆë‹¤. Toast UI Editorì—ì„œëŠ” ë‚´ê°€ ê°€ì¥ ì›í–ˆë˜ Markdown ë¬¸ë²•ì´ ì‚¬ìš© ê°€ëŠ¥ í–ˆê³ , ì´ë¯¸ì§€ ì—…ë¡œë“œë„ ê°€ëŠ¥ í–ˆë‹¤.!!! ê·¸ë¦¬ê³  ì½”ë“œë¸”ëŸ­ì— ë§ˆìŒì— ë“œëŠ” Syntax Highlighterë¥¼ ì ìš©í•  ìˆ˜ ìˆëŠ” ì¥ì ê³¼ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì´ ìˆì–´ ë„ˆë¬´ë‚˜ë„ ë§˜ì— ë“¤ì—ˆë‹¤. í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜í•˜ê¸°yarn add @toast-ui/react-editor Write.jsx import React from &quot;react&quot;;import &#123; Editor &#125; from &quot;@toast-ui/react-editor&quot;;import &quot;@toast-ui/editor/dist/toastui-editor.css&quot;;const Write = () =&gt; &#123; return ( &lt;Editor initialValue=&quot;hello react editor world!&quot; previewStyle=&quot;vertical&quot; height=&quot;600px&quot; initialEditType=&quot;markdown&quot; useCommandShortcut=&#123;true&#125; /&gt; );&#125;;export default Write; ë§ˆì§€ë§‰ìœ¼ë¡œ App.jsì— ìƒˆë¡œë§Œë“  Write.jsx ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€í•˜ë©´ í™”ë©´ì—ì„œ Toast UIê°€ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","text":"Reactë¡œ Toast UI Editor ì‚¬ìš©í•´ë³´ê¸°ê°œì¸ í”„ë¡œì íŠ¸ë„ í•˜ê³  ì‹¶ê³  ë‚˜ë§Œì˜ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê³  ì‹¶ì€ ë§ˆìŒì— UIë„ ì°¾ì•„ë³´ê³  Editorë„ ì°¾ê³  ìˆì—ˆì—ˆë‹¤. ê°œì¸ì ìœ¼ë¡œ Editorë¥¼ ì°¾ê³  ìˆë˜ ê¸°ì¤€ì€ ì²«ë²ˆì§¸ëŠ” Markdown ì–¸ì–´ê°€ ì‚¬ìš© ê°€ëŠ¥í•´ì•¼ í•˜ê³  ë‘ë²ˆì§¸ëŠ” ì´ë¯¸ì§€ ì—…ë¡œë“œê°€ ê°€ëŠ¥í•œ Editorë¥¼ ì°¾ê³  ìˆë˜ ì™€ì¤‘ì— NHNì—ì„œ ì œê³µí•˜ëŠ” Toast UI Editorë¥¼ ì°¾ê²Œ ëë‹¤. ê¸°ëŠ¥ë“¤ì´ ë„ˆë¬´ë„ˆë¬´ ë§˜ì— ë“¤ì–´ ì‚¬ìš©í•´ë³´ê¸°ë¡œ í–ˆë‹¤. Toast UI Editorì—ì„œëŠ” ë‚´ê°€ ê°€ì¥ ì›í–ˆë˜ Markdown ë¬¸ë²•ì´ ì‚¬ìš© ê°€ëŠ¥ í–ˆê³ , ì´ë¯¸ì§€ ì—…ë¡œë“œë„ ê°€ëŠ¥ í–ˆë‹¤.!!! ê·¸ë¦¬ê³  ì½”ë“œë¸”ëŸ­ì— ë§ˆìŒì— ë“œëŠ” Syntax Highlighterë¥¼ ì ìš©í•  ìˆ˜ ìˆëŠ” ì¥ì ê³¼ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì´ ìˆì–´ ë„ˆë¬´ë‚˜ë„ ë§˜ì— ë“¤ì—ˆë‹¤. í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜í•˜ê¸°yarn add @toast-ui/react-editor Write.jsx import React from &quot;react&quot;;import &#123; Editor &#125; from &quot;@toast-ui/react-editor&quot;;import &quot;@toast-ui/editor/dist/toastui-editor.css&quot;;const Write = () =&gt; &#123; return ( &lt;Editor initialValue=&quot;hello react editor world!&quot; previewStyle=&quot;vertical&quot; height=&quot;600px&quot; initialEditType=&quot;markdown&quot; useCommandShortcut=&#123;true&#125; /&gt; );&#125;;export default Write; ë§ˆì§€ë§‰ìœ¼ë¡œ App.jsì— ìƒˆë¡œë§Œë“  Write.jsx ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€í•˜ë©´ í™”ë©´ì—ì„œ Toast UIê°€ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. App.js import Write from &#x27;./Write&#x27;;function App() &#123; return ( &lt;div className=&quot;App&quot;&gt; &lt;Write /&gt; &lt;/div&gt; &lt;/div&gt; );&#125;export default App; í•˜ë‹¨ì— ê³ ì •ì‹œí‚¤ê¸°ìƒë‹¨ì— ìˆìœ¼ë©´ ë„¤ë¹„ê²Œì´ì…˜ë°”ë‚˜ POST ì œëª©ì„ ì¶”ê°€í•˜ê¸° ë¶ˆí¸í•´ ìƒë‹¨ì— ê³ ì •ë¼ ìˆëŠ” Editorë¥¼ í•˜ë‹¨ìœ¼ë¡œ ë‚´ë ¤ì„œ ì‚¬ìš©í•  ê²ƒì´ë‹¤. style ì˜µì…˜ì„ í†µí•´ Toast UI Editorë¥¼ í•˜ë‹¨ì— ê³ ì •ì‹œí‚¬ ìˆ˜ ìˆë‹¤ import Write from &#x27;./Write&#x27;;function App() &#123; return ( &lt;div className=&quot;App&quot;&gt; &lt;div style=&#123;&#123; position: &quot;fixed&quot;, bottom: &quot;0&quot;, width: &quot;100%&quot; &#125;&#125;&gt; &lt;Write /&gt; &lt;/div&gt; &lt;/div&gt; );&#125;export default App;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ToastUI","slug":"Frontend/ToastUI","permalink":"https://ckck803.github.io/categories/Frontend/ToastUI/"}],"tags":[{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"}]},{"title":"JPA í”„ë¡œê·¸ë˜ë°(ê¸°ë³¸í¸) 2 - JPA ì„¤ì •í•˜ê¸°","slug":"jpa/jpa-programming/jpa-2","date":"2021-09-10T20:31:46.000Z","updated":"2024-11-28T13:59:26.425Z","comments":true,"path":"2021/09/11/jpa/jpa-programming/jpa-2/","link":"","permalink":"https://ckck803.github.io/2021/09/11/jpa/jpa-programming/jpa-2/","excerpt":"JPA í”„ë¡œê·¸ë˜ë°(ê¸°ë³¸í¸) 2 - JPA ì„¤ì •í•˜ê¸°Entity ìƒì„±í•˜ê¸°Entity ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ JPAê°€ ê´€ë¦¬í•˜ëŠ” ê°ì²´ì„ì„ ëª…ì‹œí•´ì¤€ë‹¤. @Entitypublic class Member &#123; @Id private long id; private String name; public long getId() &#123; return id; &#125; public void setId(long id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125;&#125; EntityManagerFactory ìƒì„±í•˜ê¸° JPAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ persistence.xmlì— JPA ì„¤ì • ì •ë³´ë¥¼ ë„£ì–´ ì¤¬ë‹¤. í•´ë‹¹ ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ EntityManagerFactoryë¥¼ ìƒì„±í•´ì£¼ë„ë¡ í•œë‹¤. EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager ìƒì„±í•˜ê¸°EntityManagerFactoryë¥¼ ì´ìš©í•´ EntityManagerë¥¼ ìƒì„±í•´ì¤€ë‹¤.","text":"JPA í”„ë¡œê·¸ë˜ë°(ê¸°ë³¸í¸) 2 - JPA ì„¤ì •í•˜ê¸°Entity ìƒì„±í•˜ê¸°Entity ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ JPAê°€ ê´€ë¦¬í•˜ëŠ” ê°ì²´ì„ì„ ëª…ì‹œí•´ì¤€ë‹¤. @Entitypublic class Member &#123; @Id private long id; private String name; public long getId() &#123; return id; &#125; public void setId(long id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125;&#125; EntityManagerFactory ìƒì„±í•˜ê¸° JPAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ persistence.xmlì— JPA ì„¤ì • ì •ë³´ë¥¼ ë„£ì–´ ì¤¬ë‹¤. í•´ë‹¹ ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ EntityManagerFactoryë¥¼ ìƒì„±í•´ì£¼ë„ë¡ í•œë‹¤. EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); EntityManager ìƒì„±í•˜ê¸°EntityManagerFactoryë¥¼ ì´ìš©í•´ EntityManagerë¥¼ ìƒì„±í•´ì¤€ë‹¤. // EntityManagerë¥¼ ìƒì„±í•œë‹¤.EntityManager entityManager = entityManagerFactory.createEntityManager(); íŠ¸ëœì­ì…˜ ìƒì„±í•˜ê¸°JPAì—ì„œ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ëª¨ë“  ì‘ì—…ì€ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì‘ì—…ì„ ì§„í–‰í•´ì•¼ í•œë‹¤. // íŠ¸ëœì­ì…˜ì„ ìƒì„±í•œë‹¤.EntityTransaction transaction = entityManager.getTransaction(); ë°ì´í„° ì €ì¥í•˜ê¸° (Create)ìƒˆë¡œìš´ Member ê°ì²´ë¥¼ ìƒì„±í•˜ê³  EntityManagerì˜ persist ë©”ì†Œë“œë¥¼ í†µí•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥í•´ì¤€ë‹¤. Member member = new Member();member.setId(1L);member.setName(&quot;HelloA&quot;);// ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥í•œë‹¤.entityManager.persist(member); ë°ì´í„° ì¡°íšŒí•˜ê¸° (Read)ì €ì¥ëœ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•´ì„œëŠ” EntityManagerì˜ find ë©”ì†Œë“œë¥¼ ì´ìš©í•´ DBì—ì„œ ì €ì¥ëœ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤. Member findMember = entityManager.find(Member.class, 1L); ë°ì´í„° ìˆ˜ì •í•˜ê¸° (Update)ì €ì¥ëœ ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•´ì„œëŠ” EntityManagerì˜ find ë©”ì†Œë“œë¥¼ ì´ìš©í•´ DBì—ì„œ ì €ì¥ëœ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì •ë³´ë¥¼ ìˆ˜ì •í•´ì¤€ë‹¤. ì •ë³´ ìˆ˜ì •ì´ ëë‚œ í›„ persist ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ JPAì˜ ë³€ê²½ ê°ì§€ë¥¼ í†µí•´ updateê°€ ì´ë¤„ì§„ë‹¤. Member findMember = entityManager.find(Member.class, 1L);findMember.setName(&quot;HelloJPA&quot;); ë°ì´í„° ì‚­ì œí•˜ê¸°\u001e (Delete)ì €ì¥ëœ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê¸° ìœ„í•´ì„œëŠ” EntityManagerì˜ find ë©”ì†Œë“œë¥¼ ì´ìš©í•´ DBì—ì„œ ì €ì¥ëœ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  remove ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ì‚­ì œí•´ ì¤€ë‹¤. Member findMember = entityManager.find(Member.class, 1L);entityManager.remove(findMember); JPQLì„ ì´ìš©í•´ íŠ¹ì • ì¿¼ë¦¬ ì‘ì„±í•˜ê¸°JPAì—ì„œ ì œê³µí•´ì£¼ëŠ” ê¸°ë³¸ì ì¸ ì¿¼ë¦¬ë¬¸ì™¸ì— ë‹¤ë¥¸ ì—¬ëŸ¬ê°€ì§€ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” EntityManagerì—ì„œ ì œê³µí•˜ëŠ” CreateQuery ë©”ì†Œë“œë¥¼ í†µí•´ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ JPQLì´ë¼ í•˜ê³  JPQLì€ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. List&lt;Member&gt; result = entityManager.createQuery(&quot;select m from Member as m&quot;, Member.class) .setFirstResult(5) .setMaxResults(10) .getResultList(); public class JpaMain &#123; public static void main(String[] ars) &#123; // persistence.xmlì„ ì´ìš©í•´ // EntityManagerFactoryë¥¼ ìƒì„±í•œë‹¤. EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;hello&quot;); // EntityManagerë¥¼ ìƒì„±í•œë‹¤. EntityManager entityManager = entityManagerFactory.createEntityManager(); // íŠ¸ëœì­ì…˜ì„ ìƒì„±í•œë‹¤. EntityTransaction transaction = entityManager.getTransaction(); // JPAì—ì„œ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ëª¨ë“  ì‘ì—…ì€ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ì´ë£¨ì–´ì ¸ì•¼ í•œë‹¤. transaction.begin(); try &#123; Member member = new Member(); member.setId(1L); member.setName(&quot;HelloA&quot;); List&lt;Member&gt; result = entityManager.createQuery(&quot;select m from Member as m&quot;, Member.class) .setFirstResult(5) .setMaxResults(10) .getResultList(); // ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥í•œë‹¤. entityManager.persist(member); // DBì— ë³€ê²½ì‚¬í•­ì„ ë°˜ì˜í•œë‹¤. transaction.commit(); &#125; catch (Exception e) &#123; transaction.rollback(); &#125; finally &#123; // EntityManagerë¥¼ ì¢…ë£Œì‹œí‚¨ë‹¤. entityManager.close(); &#125; // EntityManagerFactoryë¥¼ ì¢…ë£Œì‹œí‚¨ë‹¤. entityManagerFactory.close(); &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"JPA í”„ë¡œê·¸ë˜ë°(ê¸°ë³¸í¸) 1 - JPA ì„¤ì •í•˜ê¸°","slug":"jpa/jpa-programming/jpa-1","date":"2021-09-10T19:31:46.000Z","updated":"2024-11-28T13:59:26.344Z","comments":true,"path":"2021/09/11/jpa/jpa-programming/jpa-1/","link":"","permalink":"https://ckck803.github.io/2021/09/11/jpa/jpa-programming/jpa-1/","excerpt":"JPA í”„ë¡œê·¸ë˜ë°(ê¸°ë³¸í¸) 1 - JPA ì„¤ì •í•˜ê¸°ì˜ì¡´ì„± ì¶”ê°€í•˜ê¸°JPAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ JPAë¥¼ êµ¬í˜„í•œ hibernate ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤. DBë¡œëŠ” ë©”ëª¨ë¦¬ DBì¸ H2 DataBaseë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤. &lt;!-- JPA í•˜ì´ë²„ë„¤ì´íŠ¸ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.hibernate&lt;/groupId&gt; &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt; &lt;version&gt;5.3.10.Final&lt;/version&gt;&lt;/dependency&gt;&lt;!-- H2 ë°ì´í„°ë² ì´ìŠ¤ --&gt;&lt;dependency&gt; &lt;groupId&gt;com.h2database&lt;/groupId&gt; &lt;artifactId&gt;h2&lt;/artifactId&gt; &lt;version&gt;1.4.200&lt;/version&gt;&lt;/dependency&gt; JPA Setting í•˜ê¸°resource&#x2F;META-INF&#x2F;persistence.xml JPA í‘œì¤€ ë¬¸ë²• ì„¤ì • javax.persistence.jdbc.driver : ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” DB ë“œë¼ì´ë²„ë¥¼ ì„¤ì •í•œë‹¤. javax.persistence.jdbc.user : DBì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ Username javax.persistence.jdbc.password : DBì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ Password javax.persistence.jdbc.url : ì ‘ê·¼í•˜ê³ ì í•˜ëŠ” DataBase ê²½ë¡œ hibernate ì „ìš© ë¬¸ë²• ì„¤ì •","text":"JPA í”„ë¡œê·¸ë˜ë°(ê¸°ë³¸í¸) 1 - JPA ì„¤ì •í•˜ê¸°ì˜ì¡´ì„± ì¶”ê°€í•˜ê¸°JPAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ JPAë¥¼ êµ¬í˜„í•œ hibernate ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤. DBë¡œëŠ” ë©”ëª¨ë¦¬ DBì¸ H2 DataBaseë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤. &lt;!-- JPA í•˜ì´ë²„ë„¤ì´íŠ¸ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.hibernate&lt;/groupId&gt; &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt; &lt;version&gt;5.3.10.Final&lt;/version&gt;&lt;/dependency&gt;&lt;!-- H2 ë°ì´í„°ë² ì´ìŠ¤ --&gt;&lt;dependency&gt; &lt;groupId&gt;com.h2database&lt;/groupId&gt; &lt;artifactId&gt;h2&lt;/artifactId&gt; &lt;version&gt;1.4.200&lt;/version&gt;&lt;/dependency&gt; JPA Setting í•˜ê¸°resource&#x2F;META-INF&#x2F;persistence.xml JPA í‘œì¤€ ë¬¸ë²• ì„¤ì • javax.persistence.jdbc.driver : ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” DB ë“œë¼ì´ë²„ë¥¼ ì„¤ì •í•œë‹¤. javax.persistence.jdbc.user : DBì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ Username javax.persistence.jdbc.password : DBì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ Password javax.persistence.jdbc.url : ì ‘ê·¼í•˜ê³ ì í•˜ëŠ” DataBase ê²½ë¡œ hibernate ì „ìš© ë¬¸ë²• ì„¤ì • hibernate.dialect : DBì—ì„œ ì‚¬ìš©í•˜ëŠ” SQL ë¬¸ë²•ì„ ì ìš©í•œë‹¤.(DBë§ˆë‹¤ ì•½ê°„ì”© ì°¨ì´ê°€ ì¡´ì¬) hibernate.show_sql : hibernateì—ì„œ ë§Œë“¤ì–´ì£¼ëŠ” ì¿¼ë¦¬ë¬¸ì„ ë³¼ ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤. hibernate.format_sql : hibernateì—ì„œ ë³´ì—¬ì£¼ëŠ” ì¿¼ë¦¬ë¬¸ì„ ë³´ê¸° ì¢‹ê²Œ í¬ë©§íŒ… í•´ì¤€ë‹¤. hibernate.use_sql_comments : ì–´ë–¤ ê°ì²´ë¥¼ ì‚¬ìš©í•´ ì‘ì—…ì„ ì§„í–‰í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.(ë””ë²„ê¹…ì‹œ ìš©ì´) hibernate.hbm2ddl.auto : í”„ë¡œì íŠ¸ê°€ ì‹¤í–‰ë  ë•Œ ìë™ìœ¼ë¡œ DDLì„ ìƒì„±í• ì§€ì— ëŒ€í•œ ì„¤ì •ì„ í•´ì¤€ë‹¤. persistence.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;persistence version=&quot;2.2&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt; &lt;persistence-unit name=&quot;hello&quot;&gt; &lt;properties&gt; &lt;!-- í•„ìˆ˜ ì†ì„± --&gt; &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;org.h2.Driver&quot;/&gt; &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;sa&quot;/&gt; &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;&quot;/&gt; &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:h2:tcp://localhost/~/test&quot;/&gt; &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.H2Dialect&quot;/&gt; &lt;!-- ì˜µì…˜ --&gt; &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt; &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/&gt; &lt;property name=&quot;hibernate.use_sql_comments&quot; value=&quot;true&quot;/&gt; &lt;!--&lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot; /&gt;--&gt; &lt;/properties&gt; &lt;/persistence-unit&gt;&lt;/persistence&gt;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"ë¦¬ì—‘íŠ¸ ë¡œê·¸ì¸ í˜ì´ì§€ ë§Œë“¤ê¸°","slug":"react/login/login","date":"2021-09-10T11:10:40.000Z","updated":"2024-11-23T16:46:04.576Z","comments":true,"path":"2021/09/10/react/login/login/","link":"","permalink":"https://ckck803.github.io/2021/09/10/react/login/login/","excerpt":"ë¦¬ì—‘íŠ¸ ë¡œê·¸ì¸ í˜ì´ì§€ ë§Œë“¤ê¸°import React, &#123; useState, useCallback &#125; from &quot;react&quot;;import styled from &quot;styled-components&quot;;import axios from &quot;axios&quot;;const LoginFragment = styled.div` display:flex; justify-content:center; align-items:center; width:400px; height:400px; position: relative; /* ì¶”í›„ ë°•ìŠ¤ í•˜ë‹¨ì— ì¶”ê°€ ë²„íŠ¼ì„ ìœ„ì¹˜ì‹œí‚¤ê¸° ìœ„í•œ ì„¤ì • */ background: white; border-radius: 16px; box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.04); margin: 0 auto;`;const LoginInputs = () =&gt; &#123; const [id, setId] = useState(&quot;&quot;); const [password, setPassword] = useState(&quot;&quot;); const onChangeId = useCallback((e) =&gt; &#123; setId(e.target.value); &#125;, []); const onChangePassword = useCallback((e) =&gt; &#123; setPassword(e.target.value); &#125;, []); const onSubmit = useCallback((e) =&gt; &#123; e.preventDefault(); let data = &#123; username: id, password: password, &#125; console.log(data); axios.post(&quot;/api/users/login&quot;, data) .then((response =&gt; &#123; console.log(response.data) &#125;)); &#125;, [id, password]) return ( &lt;LoginFragment&gt; &lt;form style= &#123;&#123; display: &quot;flex&quot;, flexDirection: &quot;column&quot;, &#125;&#125; onSubmit=&#123;onSubmit&#125; &gt; &lt;label htmlFor=&quot;user-id&quot;&gt;ì•„ì´ë””&lt;/label&gt; &lt;input name=&quot;user-id&quot; value=&#123;id&#125; onChange=&#123;onChangeId&#125; /&gt; &lt;label htmlFor=&quot;user-password&quot;&gt;ë¹„ë°€ë²ˆí˜¸&lt;/label&gt; &lt;input name=&quot;user-password&quot; type=&quot;password&quot; value=&#123;password&#125; onChange=&#123;onChangePassword&#125; /&gt; &lt;br /&gt; &lt;button type=&quot;submit&quot;&gt;ë¡œê·¸ì¸&lt;/button&gt; &lt;/form&gt; &lt;/LoginFragment &gt; )&#125;export default LoginInputs; import React from &quot;react&quot;import &#123; styled, createGlobalStyle &#125; from &quot;styled-components&quot;;import LoginInputs from &quot;./components/LoginInputs&quot;;const GlobalStyle = createGlobalStyle` body &#123; background: #e9ecef; &#125;`;function App() &#123; return ( &lt;div&gt; &lt;GlobalStyle /&gt; &lt;LoginInputs /&gt; &lt;/div&gt; )&#125;export default App; CORS í•´ê²°í•˜ê¸°const &#123; createProxyMiddleware &#125; = require(&quot;http-proxy-middleware&quot;);module.exports = (app) =&gt; &#123; app.use( &quot;/api&quot;, createProxyMiddleware(&#123; target: &quot;http://localhost:8080&quot;, changeOrigin: true, &#125;) );&#125;;","text":"ë¦¬ì—‘íŠ¸ ë¡œê·¸ì¸ í˜ì´ì§€ ë§Œë“¤ê¸°import React, &#123; useState, useCallback &#125; from &quot;react&quot;;import styled from &quot;styled-components&quot;;import axios from &quot;axios&quot;;const LoginFragment = styled.div` display:flex; justify-content:center; align-items:center; width:400px; height:400px; position: relative; /* ì¶”í›„ ë°•ìŠ¤ í•˜ë‹¨ì— ì¶”ê°€ ë²„íŠ¼ì„ ìœ„ì¹˜ì‹œí‚¤ê¸° ìœ„í•œ ì„¤ì • */ background: white; border-radius: 16px; box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.04); margin: 0 auto;`;const LoginInputs = () =&gt; &#123; const [id, setId] = useState(&quot;&quot;); const [password, setPassword] = useState(&quot;&quot;); const onChangeId = useCallback((e) =&gt; &#123; setId(e.target.value); &#125;, []); const onChangePassword = useCallback((e) =&gt; &#123; setPassword(e.target.value); &#125;, []); const onSubmit = useCallback((e) =&gt; &#123; e.preventDefault(); let data = &#123; username: id, password: password, &#125; console.log(data); axios.post(&quot;/api/users/login&quot;, data) .then((response =&gt; &#123; console.log(response.data) &#125;)); &#125;, [id, password]) return ( &lt;LoginFragment&gt; &lt;form style= &#123;&#123; display: &quot;flex&quot;, flexDirection: &quot;column&quot;, &#125;&#125; onSubmit=&#123;onSubmit&#125; &gt; &lt;label htmlFor=&quot;user-id&quot;&gt;ì•„ì´ë””&lt;/label&gt; &lt;input name=&quot;user-id&quot; value=&#123;id&#125; onChange=&#123;onChangeId&#125; /&gt; &lt;label htmlFor=&quot;user-password&quot;&gt;ë¹„ë°€ë²ˆí˜¸&lt;/label&gt; &lt;input name=&quot;user-password&quot; type=&quot;password&quot; value=&#123;password&#125; onChange=&#123;onChangePassword&#125; /&gt; &lt;br /&gt; &lt;button type=&quot;submit&quot;&gt;ë¡œê·¸ì¸&lt;/button&gt; &lt;/form&gt; &lt;/LoginFragment &gt; )&#125;export default LoginInputs; import React from &quot;react&quot;import &#123; styled, createGlobalStyle &#125; from &quot;styled-components&quot;;import LoginInputs from &quot;./components/LoginInputs&quot;;const GlobalStyle = createGlobalStyle` body &#123; background: #e9ecef; &#125;`;function App() &#123; return ( &lt;div&gt; &lt;GlobalStyle /&gt; &lt;LoginInputs /&gt; &lt;/div&gt; )&#125;export default App; CORS í•´ê²°í•˜ê¸°const &#123; createProxyMiddleware &#125; = require(&quot;http-proxy-middleware&quot;);module.exports = (app) =&gt; &#123; app.use( &quot;/api&quot;, createProxyMiddleware(&#123; target: &quot;http://localhost:8080&quot;, changeOrigin: true, &#125;) );&#125;;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¡œê·¸ì¸","slug":"Frontend/ë¡œê·¸ì¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%A1%9C%EA%B7%B8%EC%9D%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 3 - Context APIë¥¼ ì´ìš©í•´ ìƒíƒœ ê´€ë¦¬í•˜ê¸°","slug":"react/todolist/todolist-3","date":"2021-09-09T11:10:40.000Z","updated":"2024-11-23T16:52:20.124Z","comments":true,"path":"2021/09/09/react/todolist/todolist-3/","link":"","permalink":"https://ckck803.github.io/2021/09/09/react/todolist/todolist-3/","excerpt":"ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 3 - Context APIë¥¼ ì´ìš©í•´ ìƒíƒœ ê´€ë¦¬í•˜ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 2 - ë¦¬ìŠ¤íŠ¸ í•­ëª© ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 1 - ê¸°ë³¸ í…œí”Œë¦¿ ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 3 - Context APIë¥¼ ì´ìš©í•´ ìƒíƒœ ê´€ë¦¬í•˜ê¸°Context API ì‚¬ìš© ì„¤ì •í•˜ê¸°Reducer ìƒì„±function todoReducer(state, action) &#123; switch (action.type) &#123; case &quot;CREATE&quot;: return state.concat(action.todo); case &quot;TOGGLE&quot;: return state.map((todo) =&gt; todo.id === action.id ? &#123; ...todo, done: !todo.done &#125; : todo ); case &quot;REMOVE&quot;: return state.filter((todo) =&gt; todo.id !== action.id); default: throw new Error(`Unhandled action type: $&#123;action.type&#125;`); &#125;&#125; Conext API ì ìš©í•˜ê¸°const TodoStateContext = createContext();const TodoDispatchContext = createContext();const TodoNextIdContext = createContext();export function TodoProvider(&#123; children &#125;) &#123; const [state, dispatch] = useReducer(todoReducer, initialTodos); const nextId = useRef(5); return ( &lt;TodoStateContext.Provider value=&#123;state&#125;&gt; &lt;TodoDispatchContext.Provider value=&#123;dispatch&#125;&gt; &lt;TodoNextIdContext.Provider value=&#123;nextId&#125;&gt; &#123;children&#125; &lt;/TodoNextIdContext.Provider&gt; &lt;/TodoDispatchContext.Provider&gt; &lt;/TodoStateContext.Provider&gt; );&#125; Context ì‚¬ìš©ì„ ìœ„í•œ Custom Hook ìƒì„±export function useTodoState() &#123; return useContext(TodoStateContext);&#125;export function useTodoDispatch() &#123; return useContext(TodoDispatchContext);&#125;export function useTodoNextId() &#123; return useContext(TodoNextIdContext);&#125;","text":"ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 3 - Context APIë¥¼ ì´ìš©í•´ ìƒíƒœ ê´€ë¦¬í•˜ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 2 - ë¦¬ìŠ¤íŠ¸ í•­ëª© ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 1 - ê¸°ë³¸ í…œí”Œë¦¿ ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 3 - Context APIë¥¼ ì´ìš©í•´ ìƒíƒœ ê´€ë¦¬í•˜ê¸°Context API ì‚¬ìš© ì„¤ì •í•˜ê¸°Reducer ìƒì„±function todoReducer(state, action) &#123; switch (action.type) &#123; case &quot;CREATE&quot;: return state.concat(action.todo); case &quot;TOGGLE&quot;: return state.map((todo) =&gt; todo.id === action.id ? &#123; ...todo, done: !todo.done &#125; : todo ); case &quot;REMOVE&quot;: return state.filter((todo) =&gt; todo.id !== action.id); default: throw new Error(`Unhandled action type: $&#123;action.type&#125;`); &#125;&#125; Conext API ì ìš©í•˜ê¸°const TodoStateContext = createContext();const TodoDispatchContext = createContext();const TodoNextIdContext = createContext();export function TodoProvider(&#123; children &#125;) &#123; const [state, dispatch] = useReducer(todoReducer, initialTodos); const nextId = useRef(5); return ( &lt;TodoStateContext.Provider value=&#123;state&#125;&gt; &lt;TodoDispatchContext.Provider value=&#123;dispatch&#125;&gt; &lt;TodoNextIdContext.Provider value=&#123;nextId&#125;&gt; &#123;children&#125; &lt;/TodoNextIdContext.Provider&gt; &lt;/TodoDispatchContext.Provider&gt; &lt;/TodoStateContext.Provider&gt; );&#125; Context ì‚¬ìš©ì„ ìœ„í•œ Custom Hook ìƒì„±export function useTodoState() &#123; return useContext(TodoStateContext);&#125;export function useTodoDispatch() &#123; return useContext(TodoDispatchContext);&#125;export function useTodoNextId() &#123; return useContext(TodoNextIdContext);&#125; TodoContext.js import React, &#123; useReducer, createContext, useContext, useRef &#125; from &quot;react&quot;;const initialTodos = [ &#123; id: 1, text: &quot;í”„ë¡œì íŠ¸ ìƒì„±í•˜ê¸°&quot;, done: true, &#125;, &#123; id: 2, text: &quot;ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ë§í•˜ê¸°&quot;, done: true, &#125;, &#123; id: 3, text: &quot;Context ë§Œë“¤ê¸°&quot;, done: false, &#125;, &#123; id: 4, text: &quot;ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°&quot;, done: false, &#125;,];function todoReducer(state, action) &#123; switch (action.type) &#123; case &quot;CREATE&quot;: return state.concat(action.todo); case &quot;TOGGLE&quot;: return state.map((todo) =&gt; todo.id === action.id ? &#123; ...todo, done: !todo.done &#125; : todo ); case &quot;REMOVE&quot;: return state.filter((todo) =&gt; todo.id !== action.id); default: throw new Error(`Unhandled action type: $&#123;action.type&#125;`); &#125;&#125;const TodoStateContext = createContext();const TodoDispatchContext = createContext();const TodoNextIdContext = createContext();export function TodoProvider(&#123; children &#125;) &#123; const [state, dispatch] = useReducer(todoReducer, initialTodos); const nextId = useRef(5); return ( &lt;TodoStateContext.Provider value=&#123;state&#125;&gt; &lt;TodoDispatchContext.Provider value=&#123;dispatch&#125;&gt; &lt;TodoNextIdContext.Provider value=&#123;nextId&#125;&gt; &#123;children&#125; &lt;/TodoNextIdContext.Provider&gt; &lt;/TodoDispatchContext.Provider&gt; &lt;/TodoStateContext.Provider&gt; );&#125;export function useTodoState() &#123; return useContext(TodoStateContext);&#125;export function useTodoDispatch() &#123; return useContext(TodoDispatchContext);&#125;export function useTodoNextId() &#123; return useContext(TodoNextIdContext);&#125; Context API ì ìš©í•˜ê¸°App.js import React from &quot;react&quot;;import &#123; createGlobalStyle &#125; from &quot;styled-components&quot;;import TodoTemplate from &quot;./components/TodoTemplate&quot;;import TodoHead from &quot;./components/TodoHead&quot;;import TodoList from &quot;./components/TodoList&quot;;import TodoCreate from &quot;./components/TodoCreate&quot;;import &#123; TodoProvider &#125; from &quot;./TodoContext&quot;;const GlobalStyle = createGlobalStyle` body &#123; background: #e9ecef; &#125;`;function App() &#123; return ( &lt;TodoProvider&gt; &lt;GlobalStyle /&gt; &lt;TodoTemplate&gt; &lt;TodoHead /&gt; &lt;TodoList /&gt; &lt;TodoCreate /&gt; &lt;/TodoTemplate&gt; &lt;/TodoProvider&gt; );&#125;export default App;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"To do List","slug":"Frontend/To-do-List","permalink":"https://ckck803.github.io/categories/Frontend/To-do-List/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 2 - ë¦¬ìŠ¤íŠ¸ í•­ëª© ë§Œë“¤ê¸°","slug":"react/todolist/todolist-2","date":"2021-09-08T11:10:40.000Z","updated":"2024-11-23T16:52:16.322Z","comments":true,"path":"2021/09/08/react/todolist/todolist-2/","link":"","permalink":"https://ckck803.github.io/2021/09/08/react/todolist/todolist-2/","excerpt":"ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 3 - Context APIë¥¼ ì´ìš©í•´ ìƒíƒœ ê´€ë¦¬í•˜ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 2 - ë¦¬ìŠ¤íŠ¸ í•­ëª© ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 1 - ê¸°ë³¸ í…œí”Œë¦¿ ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 2- ë¦¬ìŠ¤íŠ¸ í•­ëª© ë§Œë“¤ê¸° TodoCreate.js import React, &#123; useState &#125; from &#x27;react&#x27;;import styled, &#123; css &#125; from &#x27;styled-components&#x27;;import &#123; MdAdd &#125; from &#x27;react-icons/md&#x27;;const CircleButton = styled.button` background: #38d9a9; &amp;:hover &#123; background: #63e6be; &#125; &amp;:active &#123; background: #20c997; &#125; z-index: 5; cursor: pointer; width: 80px; height: 80px; display: block; align-items: center; justify-content: center; font-size: 60px; position: absolute; left: 50%; bottom: 0px; transform: translate(-50%, 50%); color: white; border-radius: 50%; border: none; outline: none; display: flex; align-items: center; justify-content: center; transition: 0.125s all ease-in; $&#123;props =&gt; props.open &amp;&amp; css` background: #ff6b6b; &amp;:hover &#123; background: #ff8787; &#125; &amp;:active &#123; background: #fa5252; &#125; transform: translate(-50%, 50%) rotate(45deg); `&#125;`;const InsertFormPositioner = styled.div` width: 100%; bottom: 0; left: 0; position: absolute;`;const InsertForm = styled.form` background: #f8f9fa; padding-left: 32px; padding-top: 32px; padding-right: 32px; padding-bottom: 72px; border-bottom-left-radius: 16px; border-bottom-right-radius: 16px; border-top: 1px solid #e9ecef;`;const Input = styled.input` padding: 12px; border-radius: 4px; border: 1px solid #dee2e6; width: 100%; outline: none; font-size: 18px; box-sizing: border-box;`;function TodoCreate() &#123; const [open, setOpen] = useState(false); const onToggle = () =&gt; setOpen(!open); const isOpen = (open) =&gt;&#123; if(open)&#123; return( &lt;InsertFormPositioner&gt; &lt;InsertForm&gt; &lt;Input autoFocus placeholder=&quot;í•  ì¼ì„ ì…ë ¥ í›„, Enter ë¥¼ ëˆ„ë¥´ì„¸ìš”&quot; /&gt; &lt;/InsertForm&gt; &lt;/InsertFormPositioner&gt;) &#125;else&#123; return null; &#125; &#125; return ( &lt;div&gt; &#123;isOpen(open)&#125; &lt;CircleButton onClick=&#123;onToggle&#125; open=&#123;open&#125;&gt; &lt;MdAdd /&gt; &lt;/CircleButton&gt; &lt;/div&gt; );&#125;export default TodoCreate; TodoItem.js import React from &quot;react&quot;;import styled, &#123; css &#125; from &quot;styled-components&quot;;import &#123; MdDone, MdDelete &#125; from &quot;react-icons/md&quot;;import &#123; useTodoDispatch &#125; from &quot;../TodoContext&quot;;const Remove = styled.div` display: flex; align-items: center; justify-content: center; color: #dee2e6; font-size: 24px; cursor: pointer; opacity: 0; &amp;:hover &#123; color: #ff6b6b; &#125;`;const TodoItemBlock = styled.div` display: flex; align-items: center; padding-top: 12px; padding-bottom: 12px; &amp;:hover &#123; $&#123;Remove&#125; &#123; opacity: 1; &#125; &#125;`;const CheckCircle = styled.div` width: 32px; height: 32px; border-radius: 16px; border: 1px solid #ced4da; font-size: 24px; display: flex; align-items: center; justify-content: center; margin-right: 20px; cursor: pointer; $&#123;(props) =&gt; props.done &amp;&amp; css` border: 1px solid #38d9a9; color: #38d9a9; `&#125;`;const Text = styled.div` flex: 1; font-size: 21px; color: #495057; $&#123;(props) =&gt; props.done &amp;&amp; css` color: #ced4da; `&#125;`;function TodoItem(&#123; id, done, text &#125;) &#123; const dispatch = useTodoDispatch(); const onToggle = () =&gt; dispatch(&#123; type: &quot;TOGGLE&quot;, id &#125;); const onRemove = () =&gt; dispatch(&#123; type: &quot;REMOVE&quot;, id &#125;); return ( &lt;TodoItemBlock&gt; &lt;CheckCircle done=&#123;done&#125; onClick=&#123;onToggle&#125;&gt; &#123;done &amp;&amp; &lt;MdDone /&gt;&#125; &lt;/CheckCircle&gt; &lt;Text done=&#123;done&#125;&gt;&#123;text&#125;&lt;/Text&gt; &lt;Remove onClick=&#123;onRemove&#125;&gt; &lt;MdDelete /&gt; &lt;/Remove&gt; &lt;/TodoItemBlock&gt; );&#125;export default TodoItem;","text":"ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 3 - Context APIë¥¼ ì´ìš©í•´ ìƒíƒœ ê´€ë¦¬í•˜ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 2 - ë¦¬ìŠ¤íŠ¸ í•­ëª© ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 1 - ê¸°ë³¸ í…œí”Œë¦¿ ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 2- ë¦¬ìŠ¤íŠ¸ í•­ëª© ë§Œë“¤ê¸° TodoCreate.js import React, &#123; useState &#125; from &#x27;react&#x27;;import styled, &#123; css &#125; from &#x27;styled-components&#x27;;import &#123; MdAdd &#125; from &#x27;react-icons/md&#x27;;const CircleButton = styled.button` background: #38d9a9; &amp;:hover &#123; background: #63e6be; &#125; &amp;:active &#123; background: #20c997; &#125; z-index: 5; cursor: pointer; width: 80px; height: 80px; display: block; align-items: center; justify-content: center; font-size: 60px; position: absolute; left: 50%; bottom: 0px; transform: translate(-50%, 50%); color: white; border-radius: 50%; border: none; outline: none; display: flex; align-items: center; justify-content: center; transition: 0.125s all ease-in; $&#123;props =&gt; props.open &amp;&amp; css` background: #ff6b6b; &amp;:hover &#123; background: #ff8787; &#125; &amp;:active &#123; background: #fa5252; &#125; transform: translate(-50%, 50%) rotate(45deg); `&#125;`;const InsertFormPositioner = styled.div` width: 100%; bottom: 0; left: 0; position: absolute;`;const InsertForm = styled.form` background: #f8f9fa; padding-left: 32px; padding-top: 32px; padding-right: 32px; padding-bottom: 72px; border-bottom-left-radius: 16px; border-bottom-right-radius: 16px; border-top: 1px solid #e9ecef;`;const Input = styled.input` padding: 12px; border-radius: 4px; border: 1px solid #dee2e6; width: 100%; outline: none; font-size: 18px; box-sizing: border-box;`;function TodoCreate() &#123; const [open, setOpen] = useState(false); const onToggle = () =&gt; setOpen(!open); const isOpen = (open) =&gt;&#123; if(open)&#123; return( &lt;InsertFormPositioner&gt; &lt;InsertForm&gt; &lt;Input autoFocus placeholder=&quot;í•  ì¼ì„ ì…ë ¥ í›„, Enter ë¥¼ ëˆ„ë¥´ì„¸ìš”&quot; /&gt; &lt;/InsertForm&gt; &lt;/InsertFormPositioner&gt;) &#125;else&#123; return null; &#125; &#125; return ( &lt;div&gt; &#123;isOpen(open)&#125; &lt;CircleButton onClick=&#123;onToggle&#125; open=&#123;open&#125;&gt; &lt;MdAdd /&gt; &lt;/CircleButton&gt; &lt;/div&gt; );&#125;export default TodoCreate; TodoItem.js import React from &quot;react&quot;;import styled, &#123; css &#125; from &quot;styled-components&quot;;import &#123; MdDone, MdDelete &#125; from &quot;react-icons/md&quot;;import &#123; useTodoDispatch &#125; from &quot;../TodoContext&quot;;const Remove = styled.div` display: flex; align-items: center; justify-content: center; color: #dee2e6; font-size: 24px; cursor: pointer; opacity: 0; &amp;:hover &#123; color: #ff6b6b; &#125;`;const TodoItemBlock = styled.div` display: flex; align-items: center; padding-top: 12px; padding-bottom: 12px; &amp;:hover &#123; $&#123;Remove&#125; &#123; opacity: 1; &#125; &#125;`;const CheckCircle = styled.div` width: 32px; height: 32px; border-radius: 16px; border: 1px solid #ced4da; font-size: 24px; display: flex; align-items: center; justify-content: center; margin-right: 20px; cursor: pointer; $&#123;(props) =&gt; props.done &amp;&amp; css` border: 1px solid #38d9a9; color: #38d9a9; `&#125;`;const Text = styled.div` flex: 1; font-size: 21px; color: #495057; $&#123;(props) =&gt; props.done &amp;&amp; css` color: #ced4da; `&#125;`;function TodoItem(&#123; id, done, text &#125;) &#123; const dispatch = useTodoDispatch(); const onToggle = () =&gt; dispatch(&#123; type: &quot;TOGGLE&quot;, id &#125;); const onRemove = () =&gt; dispatch(&#123; type: &quot;REMOVE&quot;, id &#125;); return ( &lt;TodoItemBlock&gt; &lt;CheckCircle done=&#123;done&#125; onClick=&#123;onToggle&#125;&gt; &#123;done &amp;&amp; &lt;MdDone /&gt;&#125; &lt;/CheckCircle&gt; &lt;Text done=&#123;done&#125;&gt;&#123;text&#125;&lt;/Text&gt; &lt;Remove onClick=&#123;onRemove&#125;&gt; &lt;MdDelete /&gt; &lt;/Remove&gt; &lt;/TodoItemBlock&gt; );&#125;export default TodoItem;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"To do List","slug":"Frontend/To-do-List","permalink":"https://ckck803.github.io/categories/Frontend/To-do-List/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 1 - ê¸°ë³¸ í…œí”Œë¦¿ ë§Œë“¤ê¸°","slug":"react/todolist/todolist-1","date":"2021-09-07T11:10:40.000Z","updated":"2024-11-23T16:52:11.410Z","comments":true,"path":"2021/09/07/react/todolist/todolist-1/","link":"","permalink":"https://ckck803.github.io/2021/09/07/react/todolist/todolist-1/","excerpt":"ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 3 - Context APIë¥¼ ì´ìš©í•´ ìƒíƒœ ê´€ë¦¬í•˜ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 2 - ë¦¬ìŠ¤íŠ¸ í•­ëª© ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 1 - ê¸°ë³¸ í…œí”Œë¦¿ ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 1 - ê¸°ë³¸ í…œí”Œë¦¿ ë§Œë“¤ê¸° TodoTemplate.js import React from &quot;react&quot;;import styled from &quot;styled-components&quot;;const TodoTemplateBlock = styled.div` width: 512px; height: 768px; position: relative; /* ì¶”í›„ ë°•ìŠ¤ í•˜ë‹¨ì— ì¶”ê°€ ë²„íŠ¼ì„ ìœ„ì¹˜ì‹œí‚¤ê¸° ìœ„í•œ ì„¤ì • */ background: white; border-radius: 16px; box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.04); margin: 0 auto; /* í˜ì´ì§€ ì¤‘ì•™ì— ë‚˜íƒ€ë‚˜ë„ë¡ ì„¤ì • */ margin-top: 96px; margin-bottom: 32px; display: flex; flex-direction: column;`;const TodoTemplate = (&#123; children &#125;) =&gt; &#123; return &lt;TodoTemplateBlock&gt;&#123;children&#125;&lt;/TodoTemplateBlock&gt;;&#125;export default TodoTemplate; TodoHead.js import React from &#x27;react&#x27;;import styled from &#x27;styled-components&#x27;;import &#123; useTodoState &#125; from &#x27;../TodoContext&#x27;;const TodoHeadBlock = styled.div` padding-top: 48px; padding-left: 32px; padding-right: 32px; padding-bottom: 24px; border-bottom: 1px solid #e9ecef; h1 &#123; margin: 0; font-size: 36px; color: #343a40; &#125; .day &#123; margin-top: 4px; color: #868e96; font-size: 21px; &#125; .tasks-left &#123; color: #20c997; font-size: 18px; margin-top: 40px; font-weight: bold; &#125;`;function TodoHead() &#123; const todos = useTodoState(); const undoneTasks = todos.filter(todo =&gt; !todo.done); const today = new Date(); const dateString = today.toLocaleDateString(&#x27;ko-KR&#x27;, &#123; year: &#x27;numeric&#x27;, month: &#x27;long&#x27;, day: &#x27;numeric&#x27; &#125;); const dayName = today.toLocaleDateString(&#x27;ko-KR&#x27;, &#123; weekday: &#x27;long&#x27; &#125;); return ( &lt;TodoHeadBlock&gt; &lt;h1&gt;&#123;dateString&#125;&lt;/h1&gt; &lt;div className=&quot;day&quot;&gt;&#123;dayName&#125;&lt;/div&gt; &lt;div className=&quot;tasks-left&quot;&gt;í•  ì¼ &#123;undoneTasks.length&#125;ê°œ ë‚¨ìŒ&lt;/div&gt; &lt;/TodoHeadBlock&gt; );&#125;export default TodoHead;","text":"ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 3 - Context APIë¥¼ ì´ìš©í•´ ìƒíƒœ ê´€ë¦¬í•˜ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 2 - ë¦¬ìŠ¤íŠ¸ í•­ëª© ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 1 - ê¸°ë³¸ í…œí”Œë¦¿ ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ Todo List ë§Œë“¤ê¸° 1 - ê¸°ë³¸ í…œí”Œë¦¿ ë§Œë“¤ê¸° TodoTemplate.js import React from &quot;react&quot;;import styled from &quot;styled-components&quot;;const TodoTemplateBlock = styled.div` width: 512px; height: 768px; position: relative; /* ì¶”í›„ ë°•ìŠ¤ í•˜ë‹¨ì— ì¶”ê°€ ë²„íŠ¼ì„ ìœ„ì¹˜ì‹œí‚¤ê¸° ìœ„í•œ ì„¤ì • */ background: white; border-radius: 16px; box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.04); margin: 0 auto; /* í˜ì´ì§€ ì¤‘ì•™ì— ë‚˜íƒ€ë‚˜ë„ë¡ ì„¤ì • */ margin-top: 96px; margin-bottom: 32px; display: flex; flex-direction: column;`;const TodoTemplate = (&#123; children &#125;) =&gt; &#123; return &lt;TodoTemplateBlock&gt;&#123;children&#125;&lt;/TodoTemplateBlock&gt;;&#125;export default TodoTemplate; TodoHead.js import React from &#x27;react&#x27;;import styled from &#x27;styled-components&#x27;;import &#123; useTodoState &#125; from &#x27;../TodoContext&#x27;;const TodoHeadBlock = styled.div` padding-top: 48px; padding-left: 32px; padding-right: 32px; padding-bottom: 24px; border-bottom: 1px solid #e9ecef; h1 &#123; margin: 0; font-size: 36px; color: #343a40; &#125; .day &#123; margin-top: 4px; color: #868e96; font-size: 21px; &#125; .tasks-left &#123; color: #20c997; font-size: 18px; margin-top: 40px; font-weight: bold; &#125;`;function TodoHead() &#123; const todos = useTodoState(); const undoneTasks = todos.filter(todo =&gt; !todo.done); const today = new Date(); const dateString = today.toLocaleDateString(&#x27;ko-KR&#x27;, &#123; year: &#x27;numeric&#x27;, month: &#x27;long&#x27;, day: &#x27;numeric&#x27; &#125;); const dayName = today.toLocaleDateString(&#x27;ko-KR&#x27;, &#123; weekday: &#x27;long&#x27; &#125;); return ( &lt;TodoHeadBlock&gt; &lt;h1&gt;&#123;dateString&#125;&lt;/h1&gt; &lt;div className=&quot;day&quot;&gt;&#123;dayName&#125;&lt;/div&gt; &lt;div className=&quot;tasks-left&quot;&gt;í•  ì¼ &#123;undoneTasks.length&#125;ê°œ ë‚¨ìŒ&lt;/div&gt; &lt;/TodoHeadBlock&gt; );&#125;export default TodoHead; TodoList.js import React from &quot;react&quot;;import styled from &quot;styled-components&quot;;import TodoItem from &quot;./TodoItem&quot;;import &#123; useTodoState &#125; from &quot;../TodoContext&quot;;const TodoListBlock = styled.div` flex: 1; padding: 20px 32px; padding-bottom: 48px; overflow-y: auto;`;function TodoList() &#123; const todos = useTodoState(); return ( &lt;TodoListBlock&gt; &#123;todos.map((todo) =&gt; ( &lt;TodoItem key=&#123;todo.id&#125; id=&#123;todo.id&#125; text=&#123;todo.text&#125; done=&#123;todo.done&#125; /&gt; ))&#125; &lt;/TodoListBlock&gt; );&#125;export default TodoList; App.js import React from &quot;react&quot;;import &#123; createGlobalStyle &#125; from &quot;styled-components&quot;;import TodoTemplate from &quot;./components/TodoTemplate&quot;;import TodoHead from &quot;./components/TodoHead&quot;;import TodoList from &quot;./components/TodoList&quot;;import TodoCreate from &quot;./components/TodoCreate&quot;;import &#123; TodoProvider &#125; from &quot;./TodoContext&quot;;const GlobalStyle = createGlobalStyle` body &#123; background: #e9ecef; &#125;`;function App() &#123; return ( &lt;TodoProvider&gt; &lt;GlobalStyle /&gt; &lt;TodoTemplate&gt; &lt;TodoHead /&gt; &lt;TodoList /&gt; &lt;TodoCreate /&gt; &lt;/TodoTemplate&gt; &lt;/TodoProvider&gt; );&#125;export default App;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"To do List","slug":"Frontend/To-do-List","permalink":"https://ckck803.github.io/categories/Frontend/To-do-List/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2","slug":"react/react-blog/react-blog-15-postcardlist2","date":"2021-09-07T03:10:40.000Z","updated":"2024-11-23T16:51:43.346Z","comments":true,"path":"2021/09/07/react/react-blog/react-blog-15-postcardlist2/","link":"","permalink":"https://ckck803.github.io/2021/09/07/react/react-blog/react-blog-15-postcardlist2/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2import &#123; POSTS_LOADING_FAILURE, POSTS_LOADING_REQUEST, POSTS_LOADING_SUCCESS &#125; from &quot;../types&quot;;const initialState = &#123; isAuthenticated: null, posts: [], postDetails: &quot;&quot;, postCount: &quot;&quot;, loading: false, error: &quot;&quot;, creatorId: &quot;&quot;, categoryFindResult: &quot;&quot;, title: &quot;&quot;, searchBy: &quot;&quot;, searchResult: &quot;&quot;,&#125;;export default function postReducer(state = initialState, action) &#123; switch (action.type) &#123; case POSTS_LOADING_REQUEST: return &#123; ...state, posts: [], loading: true, &#125; case POSTS_LOADING_SUCCESS: return &#123; ...state, posts: [...state.posts, ...action.payload], loading: false, &#125;; case POSTS_LOADING_FAILURE: return &#123; ...state, loading: false, &#125;; default: return state; &#125;;&#125; // POST WRITEexport const POSTS_WRITE_REQUEST = &quot;POST_WRITE_REQUEST&quot;;export const POSTS_WRITE_FAILURE = &quot;POST_WRITE_FAILURE&quot;;export const POSTS_WRITE_SUCCESS = &quot;POST_WRITE_SUCCESS&quot;;// POST LOADINGexport const POSTS_LOADING_REQUEST = &quot;POST_LOADING_REQUEST&quot;;export const POSTS_LOADING_FAILURE = &quot;POST_LOADING_FAILURE&quot;;export const POSTS_LOADING_SUCCESS = &quot;POST_LOADING_SUCCESS&quot;; import &#123; combineReducers &#125; from &quot;redux&quot;;import &#123; connectRouter &#125; from &quot;connected-react-router&quot;;import authReducer from &quot;./authReducer.js&quot;;import postReducer from &quot;./postReducer.js&quot;;import commentReducer from &quot;./commentReducer.js&quot;;const createRootReducer = (history) =&gt; combineReducers(&#123; router: connectRouter(history), auth: authReducer, post: postReducer, comment: commentReducer, &#125;);export default createRootReducer; import axios from &quot;axios&quot;;import &#123; put, call, takeEvery, all, fork &#125; from &quot;redux-saga/effects&quot;;import &#123; push &#125; from &quot;connected-react-router&quot;;import &#123; POSTS_LOADING_FAILURE, POSTS_LOADING_SUCCESS, POSTS_LOADING_REQUEST, POST_UPLOADING_SUCCESS, POST_UPLOADING_FAILURE, POST_UPLOADING_REQUEST, POST_DETAIL_LOADING_SUCCESS, POST_DETAIL_LOADING_FAILURE, POST_DETAIL_LOADING_REQUEST, POST_DELETE_SUCCESS, POST_DELETE_FAILURE, POST_DELETE_REQUEST, POST_EDIT_LOADING_SUCCESS, POST_EDIT_LOADING_FAILURE, POST_EDIT_UPLOADING_SUCCESS, POST_EDIT_UPLOADING_FAILURE, POST_EDIT_UPLOADING_REQUEST, POST_EDIT_LOADING_REQUEST, CATEGORY_FIND_FAILURE, CATEGORY_FIND_SUCCESS, CATEGORY_FIND_REQUEST, SEARCH_SUCCESS, SEARCH_FAILURE, SEARCH_REQUEST,&#125; from &quot;../types&quot;;// All Posts loadconst loadPostAPI = (payload) =&gt; &#123; return axios.get(`/api/post/skip/$&#123;payload&#125;`);&#125;;function* loadPosts(action) &#123; try &#123; const result = yield call(loadPostAPI, action.payload); console.log(result, &quot;loadPosts&quot;); yield put(&#123; type: POSTS_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POSTS_LOADING_FAILURE, payload: e, &#125;); &#125;&#125;function* watchLoadPosts() &#123; yield takeEvery(POSTS_LOADING_REQUEST, loadPosts);&#125;// Post Uploadconst uploadPostAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.post(&quot;/api/post&quot;, payload, config);&#125;;function* uploadPosts(action) &#123; try &#123; console.log(action, &quot;uploadPost function&quot;); const result = yield call(uploadPostAPI, action.payload); console.log(result, &quot;uploadPostAPI, action.payload&quot;); yield put(&#123; type: POST_UPLOADING_SUCCESS, payload: result.data, &#125;); yield put(push(`/post/$&#123;result.data._id&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: POST_UPLOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchuploadPosts() &#123; yield takeEvery(POST_UPLOADING_REQUEST, uploadPosts);&#125;// Post Detailconst loadPostDetailAPI = (payload) =&gt; &#123; console.log(payload); return axios.get(`/api/post/$&#123;payload&#125;`);&#125;;function* loadPostDetail(action) &#123; try &#123; console.log(action); const result = yield call(loadPostDetailAPI, action.payload); console.log(result, &quot;post_detail_saga_data&quot;); yield put(&#123; type: POST_DETAIL_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POST_DETAIL_LOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchloadPostDetail() &#123; yield takeEvery(POST_DETAIL_LOADING_REQUEST, loadPostDetail);&#125;// Post Deleteconst DeletePostAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.delete(`/api/post/$&#123;payload.id&#125;`, config);&#125;;function* DeletePost(action) &#123; try &#123; const result = yield call(DeletePostAPI, action.payload); yield put(&#123; type: POST_DELETE_SUCCESS, payload: result.data, &#125;); yield put(push(&quot;/&quot;)); &#125; catch (e) &#123; yield put(&#123; type: POST_DELETE_FAILURE, payload: e, &#125;); &#125;&#125;function* watchDeletePost() &#123; yield takeEvery(POST_DELETE_REQUEST, DeletePost);&#125;// Post Edit Loadconst PostEditLoadAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.get(`/api/post/$&#123;payload.id&#125;/edit`, config);&#125;;function* PostEditLoad(action) &#123; try &#123; const result = yield call(PostEditLoadAPI, action.payload); yield put(&#123; type: POST_EDIT_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POST_EDIT_LOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchPostEditLoad() &#123; yield takeEvery(POST_EDIT_LOADING_REQUEST, PostEditLoad);&#125;// Post Edit UpLoadconst PostEditUploadAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.post(`/api/post/$&#123;payload.id&#125;/edit`, payload, config);&#125;;function* PostEditUpload(action) &#123; try &#123; const result = yield call(PostEditUploadAPI, action.payload); yield put(&#123; type: POST_EDIT_UPLOADING_SUCCESS, payload: result.data, &#125;); yield put(push(`/post/$&#123;result.data._id&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: POST_EDIT_UPLOADING_FAILURE, payload: e, &#125;); &#125;&#125;function* watchPostEditUpload() &#123; yield takeEvery(POST_EDIT_UPLOADING_REQUEST, PostEditUpload);&#125;// Category Findconst CategoryFindAPI = (payload) =&gt; &#123; return axios.get(`/api/post/category/$&#123;encodeURIComponent(payload)&#125;`);&#125;;function* CategoryFind(action) &#123; try &#123; const result = yield call(CategoryFindAPI, action.payload); yield put(&#123; type: CATEGORY_FIND_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: CATEGORY_FIND_FAILURE, payload: e, &#125;); &#125;&#125;function* watchCategoryFind() &#123; yield takeEvery(CATEGORY_FIND_REQUEST, CategoryFind);&#125;// Search Findconst SearchResultAPI = (payload) =&gt; &#123; return axios.get(`/api/search/$&#123;encodeURIComponent(payload)&#125;`);&#125;;function* SearchResult(action) &#123; try &#123; const result = yield call(SearchResultAPI, action.payload); yield put(&#123; type: SEARCH_SUCCESS, payload: result.data, &#125;); yield put(push(`/search/$&#123;encodeURIComponent(action.payload)&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: SEARCH_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchSearchResult() &#123; yield takeEvery(SEARCH_REQUEST, SearchResult);&#125;export default function* postSaga() &#123; yield all([ fork(watchLoadPosts), fork(watchuploadPosts), fork(watchloadPostDetail), fork(watchDeletePost), fork(watchPostEditLoad), fork(watchPostEditUpload), fork(watchCategoryFind), fork(watchSearchResult), ]);&#125; import React, &#123; Fragment &#125; from &quot;react&quot;;import &#123; Row, Spinner &#125; from &quot;reactstrap&quot;;export const GrowingSpinner = ( &lt;Fragment&gt; &lt;Row className=&quot;d-flex justify-content-center m-5&quot;&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;primary&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;secondary&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;success&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;danger&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;warning&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;info&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;light&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;dark&quot; /&gt; &lt;/Row&gt; &lt;/Fragment&gt;); import React, &#123; Fragment &#125; from &quot;react&quot;;import &#123; Card, CardImg, CardBody, CardTitle, Button, Badge, Row,&#125; from &quot;reactstrap&quot;;import &#123; Link &#125; from &quot;react-router-dom&quot;;import &#123; FontAwesomeIcon &#125; from &quot;@fortawesome/react-fontawesome&quot;;import &#123; faMouse &#125; from &quot;@fortawesome/free-solid-svg-icons&quot;;const PostCardOne = (&#123; posts &#125;) =&gt; &#123; return ( &lt;Fragment&gt; &#123;Array.isArray(posts) ? posts.map((&#123; _id, title, fileUrl, comments, views &#125;) =&gt; &#123; return ( &lt;div key=&#123;_id&#125; className=&quot;col-md-4&quot;&gt; &lt;Link to=&#123;`/post/$&#123;_id&#125;`&#125; className=&quot;text-dark text-decoration-none&quot; &gt; &lt;Card className=&quot;mb-3&quot;&gt; &lt;CardImg top alt=&quot;ì¹´ë“œì´ë¯¸ì§€&quot; src=&#123;fileUrl&#125; /&gt; &lt;CardBody&gt; &lt;CardTitle className=&quot;text-truncate d-flex justify-content-between&quot;&gt; &lt;span className=&quot;text-truncate&quot;&gt;&#123;title&#125; &lt;/span&gt; &lt;span&gt; &lt;FontAwesomeIcon icon=&#123;faMouse&#125; /&gt; &amp;nbsp;&amp;nbsp; &lt;span&gt;&#123;views&#125;&lt;/span&gt; &lt;/span&gt; &lt;/CardTitle&gt; &lt;Row&gt; &lt;Button color=&quot;primary&quot; className=&quot;p-2 btn-block&quot;&gt; More &lt;Badge color=&quot;light&quot;&gt;&#123;comments.length&#125;&lt;/Badge&gt; &lt;/Button&gt; &lt;/Row&gt; &lt;/CardBody&gt; &lt;/Card&gt; &lt;/Link&gt; &lt;/div&gt; ); &#125;) : &quot;&quot;&#125; &lt;/Fragment&gt; );&#125;;export default PostCardOne;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2import &#123; POSTS_LOADING_FAILURE, POSTS_LOADING_REQUEST, POSTS_LOADING_SUCCESS &#125; from &quot;../types&quot;;const initialState = &#123; isAuthenticated: null, posts: [], postDetails: &quot;&quot;, postCount: &quot;&quot;, loading: false, error: &quot;&quot;, creatorId: &quot;&quot;, categoryFindResult: &quot;&quot;, title: &quot;&quot;, searchBy: &quot;&quot;, searchResult: &quot;&quot;,&#125;;export default function postReducer(state = initialState, action) &#123; switch (action.type) &#123; case POSTS_LOADING_REQUEST: return &#123; ...state, posts: [], loading: true, &#125; case POSTS_LOADING_SUCCESS: return &#123; ...state, posts: [...state.posts, ...action.payload], loading: false, &#125;; case POSTS_LOADING_FAILURE: return &#123; ...state, loading: false, &#125;; default: return state; &#125;;&#125; // POST WRITEexport const POSTS_WRITE_REQUEST = &quot;POST_WRITE_REQUEST&quot;;export const POSTS_WRITE_FAILURE = &quot;POST_WRITE_FAILURE&quot;;export const POSTS_WRITE_SUCCESS = &quot;POST_WRITE_SUCCESS&quot;;// POST LOADINGexport const POSTS_LOADING_REQUEST = &quot;POST_LOADING_REQUEST&quot;;export const POSTS_LOADING_FAILURE = &quot;POST_LOADING_FAILURE&quot;;export const POSTS_LOADING_SUCCESS = &quot;POST_LOADING_SUCCESS&quot;; import &#123; combineReducers &#125; from &quot;redux&quot;;import &#123; connectRouter &#125; from &quot;connected-react-router&quot;;import authReducer from &quot;./authReducer.js&quot;;import postReducer from &quot;./postReducer.js&quot;;import commentReducer from &quot;./commentReducer.js&quot;;const createRootReducer = (history) =&gt; combineReducers(&#123; router: connectRouter(history), auth: authReducer, post: postReducer, comment: commentReducer, &#125;);export default createRootReducer; import axios from &quot;axios&quot;;import &#123; put, call, takeEvery, all, fork &#125; from &quot;redux-saga/effects&quot;;import &#123; push &#125; from &quot;connected-react-router&quot;;import &#123; POSTS_LOADING_FAILURE, POSTS_LOADING_SUCCESS, POSTS_LOADING_REQUEST, POST_UPLOADING_SUCCESS, POST_UPLOADING_FAILURE, POST_UPLOADING_REQUEST, POST_DETAIL_LOADING_SUCCESS, POST_DETAIL_LOADING_FAILURE, POST_DETAIL_LOADING_REQUEST, POST_DELETE_SUCCESS, POST_DELETE_FAILURE, POST_DELETE_REQUEST, POST_EDIT_LOADING_SUCCESS, POST_EDIT_LOADING_FAILURE, POST_EDIT_UPLOADING_SUCCESS, POST_EDIT_UPLOADING_FAILURE, POST_EDIT_UPLOADING_REQUEST, POST_EDIT_LOADING_REQUEST, CATEGORY_FIND_FAILURE, CATEGORY_FIND_SUCCESS, CATEGORY_FIND_REQUEST, SEARCH_SUCCESS, SEARCH_FAILURE, SEARCH_REQUEST,&#125; from &quot;../types&quot;;// All Posts loadconst loadPostAPI = (payload) =&gt; &#123; return axios.get(`/api/post/skip/$&#123;payload&#125;`);&#125;;function* loadPosts(action) &#123; try &#123; const result = yield call(loadPostAPI, action.payload); console.log(result, &quot;loadPosts&quot;); yield put(&#123; type: POSTS_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POSTS_LOADING_FAILURE, payload: e, &#125;); &#125;&#125;function* watchLoadPosts() &#123; yield takeEvery(POSTS_LOADING_REQUEST, loadPosts);&#125;// Post Uploadconst uploadPostAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.post(&quot;/api/post&quot;, payload, config);&#125;;function* uploadPosts(action) &#123; try &#123; console.log(action, &quot;uploadPost function&quot;); const result = yield call(uploadPostAPI, action.payload); console.log(result, &quot;uploadPostAPI, action.payload&quot;); yield put(&#123; type: POST_UPLOADING_SUCCESS, payload: result.data, &#125;); yield put(push(`/post/$&#123;result.data._id&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: POST_UPLOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchuploadPosts() &#123; yield takeEvery(POST_UPLOADING_REQUEST, uploadPosts);&#125;// Post Detailconst loadPostDetailAPI = (payload) =&gt; &#123; console.log(payload); return axios.get(`/api/post/$&#123;payload&#125;`);&#125;;function* loadPostDetail(action) &#123; try &#123; console.log(action); const result = yield call(loadPostDetailAPI, action.payload); console.log(result, &quot;post_detail_saga_data&quot;); yield put(&#123; type: POST_DETAIL_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POST_DETAIL_LOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchloadPostDetail() &#123; yield takeEvery(POST_DETAIL_LOADING_REQUEST, loadPostDetail);&#125;// Post Deleteconst DeletePostAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.delete(`/api/post/$&#123;payload.id&#125;`, config);&#125;;function* DeletePost(action) &#123; try &#123; const result = yield call(DeletePostAPI, action.payload); yield put(&#123; type: POST_DELETE_SUCCESS, payload: result.data, &#125;); yield put(push(&quot;/&quot;)); &#125; catch (e) &#123; yield put(&#123; type: POST_DELETE_FAILURE, payload: e, &#125;); &#125;&#125;function* watchDeletePost() &#123; yield takeEvery(POST_DELETE_REQUEST, DeletePost);&#125;// Post Edit Loadconst PostEditLoadAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.get(`/api/post/$&#123;payload.id&#125;/edit`, config);&#125;;function* PostEditLoad(action) &#123; try &#123; const result = yield call(PostEditLoadAPI, action.payload); yield put(&#123; type: POST_EDIT_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POST_EDIT_LOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchPostEditLoad() &#123; yield takeEvery(POST_EDIT_LOADING_REQUEST, PostEditLoad);&#125;// Post Edit UpLoadconst PostEditUploadAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.post(`/api/post/$&#123;payload.id&#125;/edit`, payload, config);&#125;;function* PostEditUpload(action) &#123; try &#123; const result = yield call(PostEditUploadAPI, action.payload); yield put(&#123; type: POST_EDIT_UPLOADING_SUCCESS, payload: result.data, &#125;); yield put(push(`/post/$&#123;result.data._id&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: POST_EDIT_UPLOADING_FAILURE, payload: e, &#125;); &#125;&#125;function* watchPostEditUpload() &#123; yield takeEvery(POST_EDIT_UPLOADING_REQUEST, PostEditUpload);&#125;// Category Findconst CategoryFindAPI = (payload) =&gt; &#123; return axios.get(`/api/post/category/$&#123;encodeURIComponent(payload)&#125;`);&#125;;function* CategoryFind(action) &#123; try &#123; const result = yield call(CategoryFindAPI, action.payload); yield put(&#123; type: CATEGORY_FIND_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: CATEGORY_FIND_FAILURE, payload: e, &#125;); &#125;&#125;function* watchCategoryFind() &#123; yield takeEvery(CATEGORY_FIND_REQUEST, CategoryFind);&#125;// Search Findconst SearchResultAPI = (payload) =&gt; &#123; return axios.get(`/api/search/$&#123;encodeURIComponent(payload)&#125;`);&#125;;function* SearchResult(action) &#123; try &#123; const result = yield call(SearchResultAPI, action.payload); yield put(&#123; type: SEARCH_SUCCESS, payload: result.data, &#125;); yield put(push(`/search/$&#123;encodeURIComponent(action.payload)&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: SEARCH_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchSearchResult() &#123; yield takeEvery(SEARCH_REQUEST, SearchResult);&#125;export default function* postSaga() &#123; yield all([ fork(watchLoadPosts), fork(watchuploadPosts), fork(watchloadPostDetail), fork(watchDeletePost), fork(watchPostEditLoad), fork(watchPostEditUpload), fork(watchCategoryFind), fork(watchSearchResult), ]);&#125; import React, &#123; Fragment &#125; from &quot;react&quot;;import &#123; Row, Spinner &#125; from &quot;reactstrap&quot;;export const GrowingSpinner = ( &lt;Fragment&gt; &lt;Row className=&quot;d-flex justify-content-center m-5&quot;&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;primary&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;secondary&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;success&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;danger&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;warning&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;info&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;light&quot; /&gt; &lt;Spinner style=&#123;&#123; width: &quot;2rem&quot;, height: &quot;2rem&quot; &#125;&#125; type=&quot;grow&quot; color=&quot;dark&quot; /&gt; &lt;/Row&gt; &lt;/Fragment&gt;); import React, &#123; Fragment &#125; from &quot;react&quot;;import &#123; Card, CardImg, CardBody, CardTitle, Button, Badge, Row,&#125; from &quot;reactstrap&quot;;import &#123; Link &#125; from &quot;react-router-dom&quot;;import &#123; FontAwesomeIcon &#125; from &quot;@fortawesome/react-fontawesome&quot;;import &#123; faMouse &#125; from &quot;@fortawesome/free-solid-svg-icons&quot;;const PostCardOne = (&#123; posts &#125;) =&gt; &#123; return ( &lt;Fragment&gt; &#123;Array.isArray(posts) ? posts.map((&#123; _id, title, fileUrl, comments, views &#125;) =&gt; &#123; return ( &lt;div key=&#123;_id&#125; className=&quot;col-md-4&quot;&gt; &lt;Link to=&#123;`/post/$&#123;_id&#125;`&#125; className=&quot;text-dark text-decoration-none&quot; &gt; &lt;Card className=&quot;mb-3&quot;&gt; &lt;CardImg top alt=&quot;ì¹´ë“œì´ë¯¸ì§€&quot; src=&#123;fileUrl&#125; /&gt; &lt;CardBody&gt; &lt;CardTitle className=&quot;text-truncate d-flex justify-content-between&quot;&gt; &lt;span className=&quot;text-truncate&quot;&gt;&#123;title&#125; &lt;/span&gt; &lt;span&gt; &lt;FontAwesomeIcon icon=&#123;faMouse&#125; /&gt; &amp;nbsp;&amp;nbsp; &lt;span&gt;&#123;views&#125;&lt;/span&gt; &lt;/span&gt; &lt;/CardTitle&gt; &lt;Row&gt; &lt;Button color=&quot;primary&quot; className=&quot;p-2 btn-block&quot;&gt; More &lt;Badge color=&quot;light&quot;&gt;&#123;comments.length&#125;&lt;/Badge&gt; &lt;/Button&gt; &lt;/Row&gt; &lt;/CardBody&gt; &lt;/Card&gt; &lt;/Link&gt; &lt;/div&gt; ); &#125;) : &quot;&quot;&#125; &lt;/Fragment&gt; );&#125;;export default PostCardOne;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸°","slug":"react/react-blog/react-blog-14-postcardlist","date":"2021-09-06T10:10:40.000Z","updated":"2024-11-23T16:51:42.503Z","comments":true,"path":"2021/09/06/react/react-blog/react-blog-14-postcardlist/","link":"","permalink":"https://ckck803.github.io/2021/09/06/react/react-blog/react-blog-14-postcardlist/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸°import &#123; POSTS_LOADING_FAILURE, POSTS_LOADING_REQUEST, POSTS_LOADING_SUCCESS &#125; from &quot;../types&quot;;const initialState = &#123; isAuthenticated: null, posts: [], postDetails: &quot;&quot;, postCount: &quot;&quot;, loading: false, error: &quot;&quot;, creatorId: &quot;&quot;, categoryFindResult: &quot;&quot;, title: &quot;&quot;, searchBy: &quot;&quot;, searchResult: &quot;&quot;,&#125;;export default function postReducer(state = initialState, action) &#123; switch (action.type) &#123; case POSTS_LOADING_REQUEST: return &#123; ...state, posts: [], loading: true, &#125; case POSTS_LOADING_SUCCESS: return &#123; ...state, posts: [...state.posts, ...action.payload], loading: false, &#125;; case POSTS_LOADING_FAILURE: return &#123; ...state, loading: false, &#125;; default: return state; &#125;;&#125; // POST WRITEexport const POSTS_WRITE_REQUEST = &quot;POST_WRITE_REQUEST&quot;;export const POSTS_WRITE_FAILURE = &quot;POST_WRITE_FAILURE&quot;;export const POSTS_WRITE_SUCCESS = &quot;POST_WRITE_SUCCESS&quot;;// POST LOADINGexport const POSTS_LOADING_REQUEST = &quot;POST_LOADING_REQUEST&quot;;export const POSTS_LOADING_FAILURE = &quot;POST_LOADING_FAILURE&quot;;export const POSTS_LOADING_SUCCESS = &quot;POST_LOADING_SUCCESS&quot;; import &#123; combineReducers &#125; from &quot;redux&quot;;import &#123; connectRouter &#125; from &quot;connected-react-router&quot;;import authReducer from &quot;./authReducer.js&quot;;import postReducer from &quot;./postReducer.js&quot;;import commentReducer from &quot;./commentReducer.js&quot;;const createRootReducer = (history) =&gt; combineReducers(&#123; router: connectRouter(history), auth: authReducer, post: postReducer, comment: commentReducer, &#125;);export default createRootReducer; import axios from &quot;axios&quot;;import &#123; put, call, takeEvery, all, fork &#125; from &quot;redux-saga/effects&quot;;import &#123; push &#125; from &quot;connected-react-router&quot;;import &#123; POSTS_LOADING_FAILURE, POSTS_LOADING_SUCCESS, POSTS_LOADING_REQUEST, POST_UPLOADING_SUCCESS, POST_UPLOADING_FAILURE, POST_UPLOADING_REQUEST, POST_DETAIL_LOADING_SUCCESS, POST_DETAIL_LOADING_FAILURE, POST_DETAIL_LOADING_REQUEST, POST_DELETE_SUCCESS, POST_DELETE_FAILURE, POST_DELETE_REQUEST, POST_EDIT_LOADING_SUCCESS, POST_EDIT_LOADING_FAILURE, POST_EDIT_UPLOADING_SUCCESS, POST_EDIT_UPLOADING_FAILURE, POST_EDIT_UPLOADING_REQUEST, POST_EDIT_LOADING_REQUEST, CATEGORY_FIND_FAILURE, CATEGORY_FIND_SUCCESS, CATEGORY_FIND_REQUEST, SEARCH_SUCCESS, SEARCH_FAILURE, SEARCH_REQUEST,&#125; from &quot;../types&quot;;// All Posts loadconst loadPostAPI = (payload) =&gt; &#123; return axios.get(`/api/post/skip/$&#123;payload&#125;`);&#125;;function* loadPosts(action) &#123; try &#123; const result = yield call(loadPostAPI, action.payload); console.log(result, &quot;loadPosts&quot;); yield put(&#123; type: POSTS_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POSTS_LOADING_FAILURE, payload: e, &#125;); &#125;&#125;function* watchLoadPosts() &#123; yield takeEvery(POSTS_LOADING_REQUEST, loadPosts);&#125;// Post Uploadconst uploadPostAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.post(&quot;/api/post&quot;, payload, config);&#125;;function* uploadPosts(action) &#123; try &#123; console.log(action, &quot;uploadPost function&quot;); const result = yield call(uploadPostAPI, action.payload); console.log(result, &quot;uploadPostAPI, action.payload&quot;); yield put(&#123; type: POST_UPLOADING_SUCCESS, payload: result.data, &#125;); yield put(push(`/post/$&#123;result.data._id&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: POST_UPLOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchuploadPosts() &#123; yield takeEvery(POST_UPLOADING_REQUEST, uploadPosts);&#125;// Post Detailconst loadPostDetailAPI = (payload) =&gt; &#123; console.log(payload); return axios.get(`/api/post/$&#123;payload&#125;`);&#125;;function* loadPostDetail(action) &#123; try &#123; console.log(action); const result = yield call(loadPostDetailAPI, action.payload); console.log(result, &quot;post_detail_saga_data&quot;); yield put(&#123; type: POST_DETAIL_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POST_DETAIL_LOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchloadPostDetail() &#123; yield takeEvery(POST_DETAIL_LOADING_REQUEST, loadPostDetail);&#125;// Post Deleteconst DeletePostAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.delete(`/api/post/$&#123;payload.id&#125;`, config);&#125;;function* DeletePost(action) &#123; try &#123; const result = yield call(DeletePostAPI, action.payload); yield put(&#123; type: POST_DELETE_SUCCESS, payload: result.data, &#125;); yield put(push(&quot;/&quot;)); &#125; catch (e) &#123; yield put(&#123; type: POST_DELETE_FAILURE, payload: e, &#125;); &#125;&#125;function* watchDeletePost() &#123; yield takeEvery(POST_DELETE_REQUEST, DeletePost);&#125;// Post Edit Loadconst PostEditLoadAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.get(`/api/post/$&#123;payload.id&#125;/edit`, config);&#125;;function* PostEditLoad(action) &#123; try &#123; const result = yield call(PostEditLoadAPI, action.payload); yield put(&#123; type: POST_EDIT_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POST_EDIT_LOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchPostEditLoad() &#123; yield takeEvery(POST_EDIT_LOADING_REQUEST, PostEditLoad);&#125;// Post Edit UpLoadconst PostEditUploadAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.post(`/api/post/$&#123;payload.id&#125;/edit`, payload, config);&#125;;function* PostEditUpload(action) &#123; try &#123; const result = yield call(PostEditUploadAPI, action.payload); yield put(&#123; type: POST_EDIT_UPLOADING_SUCCESS, payload: result.data, &#125;); yield put(push(`/post/$&#123;result.data._id&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: POST_EDIT_UPLOADING_FAILURE, payload: e, &#125;); &#125;&#125;function* watchPostEditUpload() &#123; yield takeEvery(POST_EDIT_UPLOADING_REQUEST, PostEditUpload);&#125;// Category Findconst CategoryFindAPI = (payload) =&gt; &#123; return axios.get(`/api/post/category/$&#123;encodeURIComponent(payload)&#125;`);&#125;;function* CategoryFind(action) &#123; try &#123; const result = yield call(CategoryFindAPI, action.payload); yield put(&#123; type: CATEGORY_FIND_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: CATEGORY_FIND_FAILURE, payload: e, &#125;); &#125;&#125;function* watchCategoryFind() &#123; yield takeEvery(CATEGORY_FIND_REQUEST, CategoryFind);&#125;// Search Findconst SearchResultAPI = (payload) =&gt; &#123; return axios.get(`/api/search/$&#123;encodeURIComponent(payload)&#125;`);&#125;;function* SearchResult(action) &#123; try &#123; const result = yield call(SearchResultAPI, action.payload); yield put(&#123; type: SEARCH_SUCCESS, payload: result.data, &#125;); yield put(push(`/search/$&#123;encodeURIComponent(action.payload)&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: SEARCH_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchSearchResult() &#123; yield takeEvery(SEARCH_REQUEST, SearchResult);&#125;export default function* postSaga() &#123; yield all([ fork(watchLoadPosts), fork(watchuploadPosts), fork(watchloadPostDetail), fork(watchDeletePost), fork(watchPostEditLoad), fork(watchPostEditUpload), fork(watchCategoryFind), fork(watchSearchResult), ]);&#125;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸°import &#123; POSTS_LOADING_FAILURE, POSTS_LOADING_REQUEST, POSTS_LOADING_SUCCESS &#125; from &quot;../types&quot;;const initialState = &#123; isAuthenticated: null, posts: [], postDetails: &quot;&quot;, postCount: &quot;&quot;, loading: false, error: &quot;&quot;, creatorId: &quot;&quot;, categoryFindResult: &quot;&quot;, title: &quot;&quot;, searchBy: &quot;&quot;, searchResult: &quot;&quot;,&#125;;export default function postReducer(state = initialState, action) &#123; switch (action.type) &#123; case POSTS_LOADING_REQUEST: return &#123; ...state, posts: [], loading: true, &#125; case POSTS_LOADING_SUCCESS: return &#123; ...state, posts: [...state.posts, ...action.payload], loading: false, &#125;; case POSTS_LOADING_FAILURE: return &#123; ...state, loading: false, &#125;; default: return state; &#125;;&#125; // POST WRITEexport const POSTS_WRITE_REQUEST = &quot;POST_WRITE_REQUEST&quot;;export const POSTS_WRITE_FAILURE = &quot;POST_WRITE_FAILURE&quot;;export const POSTS_WRITE_SUCCESS = &quot;POST_WRITE_SUCCESS&quot;;// POST LOADINGexport const POSTS_LOADING_REQUEST = &quot;POST_LOADING_REQUEST&quot;;export const POSTS_LOADING_FAILURE = &quot;POST_LOADING_FAILURE&quot;;export const POSTS_LOADING_SUCCESS = &quot;POST_LOADING_SUCCESS&quot;; import &#123; combineReducers &#125; from &quot;redux&quot;;import &#123; connectRouter &#125; from &quot;connected-react-router&quot;;import authReducer from &quot;./authReducer.js&quot;;import postReducer from &quot;./postReducer.js&quot;;import commentReducer from &quot;./commentReducer.js&quot;;const createRootReducer = (history) =&gt; combineReducers(&#123; router: connectRouter(history), auth: authReducer, post: postReducer, comment: commentReducer, &#125;);export default createRootReducer; import axios from &quot;axios&quot;;import &#123; put, call, takeEvery, all, fork &#125; from &quot;redux-saga/effects&quot;;import &#123; push &#125; from &quot;connected-react-router&quot;;import &#123; POSTS_LOADING_FAILURE, POSTS_LOADING_SUCCESS, POSTS_LOADING_REQUEST, POST_UPLOADING_SUCCESS, POST_UPLOADING_FAILURE, POST_UPLOADING_REQUEST, POST_DETAIL_LOADING_SUCCESS, POST_DETAIL_LOADING_FAILURE, POST_DETAIL_LOADING_REQUEST, POST_DELETE_SUCCESS, POST_DELETE_FAILURE, POST_DELETE_REQUEST, POST_EDIT_LOADING_SUCCESS, POST_EDIT_LOADING_FAILURE, POST_EDIT_UPLOADING_SUCCESS, POST_EDIT_UPLOADING_FAILURE, POST_EDIT_UPLOADING_REQUEST, POST_EDIT_LOADING_REQUEST, CATEGORY_FIND_FAILURE, CATEGORY_FIND_SUCCESS, CATEGORY_FIND_REQUEST, SEARCH_SUCCESS, SEARCH_FAILURE, SEARCH_REQUEST,&#125; from &quot;../types&quot;;// All Posts loadconst loadPostAPI = (payload) =&gt; &#123; return axios.get(`/api/post/skip/$&#123;payload&#125;`);&#125;;function* loadPosts(action) &#123; try &#123; const result = yield call(loadPostAPI, action.payload); console.log(result, &quot;loadPosts&quot;); yield put(&#123; type: POSTS_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POSTS_LOADING_FAILURE, payload: e, &#125;); &#125;&#125;function* watchLoadPosts() &#123; yield takeEvery(POSTS_LOADING_REQUEST, loadPosts);&#125;// Post Uploadconst uploadPostAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.post(&quot;/api/post&quot;, payload, config);&#125;;function* uploadPosts(action) &#123; try &#123; console.log(action, &quot;uploadPost function&quot;); const result = yield call(uploadPostAPI, action.payload); console.log(result, &quot;uploadPostAPI, action.payload&quot;); yield put(&#123; type: POST_UPLOADING_SUCCESS, payload: result.data, &#125;); yield put(push(`/post/$&#123;result.data._id&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: POST_UPLOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchuploadPosts() &#123; yield takeEvery(POST_UPLOADING_REQUEST, uploadPosts);&#125;// Post Detailconst loadPostDetailAPI = (payload) =&gt; &#123; console.log(payload); return axios.get(`/api/post/$&#123;payload&#125;`);&#125;;function* loadPostDetail(action) &#123; try &#123; console.log(action); const result = yield call(loadPostDetailAPI, action.payload); console.log(result, &quot;post_detail_saga_data&quot;); yield put(&#123; type: POST_DETAIL_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POST_DETAIL_LOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchloadPostDetail() &#123; yield takeEvery(POST_DETAIL_LOADING_REQUEST, loadPostDetail);&#125;// Post Deleteconst DeletePostAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.delete(`/api/post/$&#123;payload.id&#125;`, config);&#125;;function* DeletePost(action) &#123; try &#123; const result = yield call(DeletePostAPI, action.payload); yield put(&#123; type: POST_DELETE_SUCCESS, payload: result.data, &#125;); yield put(push(&quot;/&quot;)); &#125; catch (e) &#123; yield put(&#123; type: POST_DELETE_FAILURE, payload: e, &#125;); &#125;&#125;function* watchDeletePost() &#123; yield takeEvery(POST_DELETE_REQUEST, DeletePost);&#125;// Post Edit Loadconst PostEditLoadAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.get(`/api/post/$&#123;payload.id&#125;/edit`, config);&#125;;function* PostEditLoad(action) &#123; try &#123; const result = yield call(PostEditLoadAPI, action.payload); yield put(&#123; type: POST_EDIT_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: POST_EDIT_LOADING_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchPostEditLoad() &#123; yield takeEvery(POST_EDIT_LOADING_REQUEST, PostEditLoad);&#125;// Post Edit UpLoadconst PostEditUploadAPI = (payload) =&gt; &#123; const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; const token = payload.token; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.post(`/api/post/$&#123;payload.id&#125;/edit`, payload, config);&#125;;function* PostEditUpload(action) &#123; try &#123; const result = yield call(PostEditUploadAPI, action.payload); yield put(&#123; type: POST_EDIT_UPLOADING_SUCCESS, payload: result.data, &#125;); yield put(push(`/post/$&#123;result.data._id&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: POST_EDIT_UPLOADING_FAILURE, payload: e, &#125;); &#125;&#125;function* watchPostEditUpload() &#123; yield takeEvery(POST_EDIT_UPLOADING_REQUEST, PostEditUpload);&#125;// Category Findconst CategoryFindAPI = (payload) =&gt; &#123; return axios.get(`/api/post/category/$&#123;encodeURIComponent(payload)&#125;`);&#125;;function* CategoryFind(action) &#123; try &#123; const result = yield call(CategoryFindAPI, action.payload); yield put(&#123; type: CATEGORY_FIND_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: CATEGORY_FIND_FAILURE, payload: e, &#125;); &#125;&#125;function* watchCategoryFind() &#123; yield takeEvery(CATEGORY_FIND_REQUEST, CategoryFind);&#125;// Search Findconst SearchResultAPI = (payload) =&gt; &#123; return axios.get(`/api/search/$&#123;encodeURIComponent(payload)&#125;`);&#125;;function* SearchResult(action) &#123; try &#123; const result = yield call(SearchResultAPI, action.payload); yield put(&#123; type: SEARCH_SUCCESS, payload: result.data, &#125;); yield put(push(`/search/$&#123;encodeURIComponent(action.payload)&#125;`)); &#125; catch (e) &#123; yield put(&#123; type: SEARCH_FAILURE, payload: e, &#125;); yield put(push(&quot;/&quot;)); &#125;&#125;function* watchSearchResult() &#123; yield takeEvery(SEARCH_REQUEST, SearchResult);&#125;export default function* postSaga() &#123; yield all([ fork(watchLoadPosts), fork(watchuploadPosts), fork(watchloadPostDetail), fork(watchDeletePost), fork(watchPostEditLoad), fork(watchPostEditUpload), fork(watchCategoryFind), fork(watchSearchResult), ]);&#125;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸","slug":"react/react-blog/react-blog-13-category","date":"2021-09-06T09:10:40.000Z","updated":"2024-11-23T16:51:42.909Z","comments":true,"path":"2021/09/06/react/react-blog/react-blog-13-category/","link":"","permalink":"https://ckck803.github.io/2021/09/06/react/react-blog/react-blog-13-category/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸import React from &#x27;react&#x27;;const CategoryResult = () =&gt; &#123; return &lt;h1&gt;CategoryResult&lt;/h1&gt;&#125;export default CategoryResult; import &#123; Fragment, useEffect &#125; from &quot;react&quot;;import &#123; Helmet &#125; from &quot;react-helmet&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; Row, Spinner &#125; from &#x27;reactstrap&#x27;;import PostCardOne from &quot;../../components/post/PostCardOne&quot;;import &#123; POSTS_LOADING_REQUEST &#125; from &quot;../../redux/types&quot;;const PostCardList = () =&gt; &#123; const &#123; posts &#125; = useSelector((state) =&gt; state.post) const dispatch = useDispatch() useEffect(() =&gt; &#123; dispatch(&#123; type: POSTS_LOADING_REQUEST &#125;) &#125;, [dispatch]) return ( &lt;Fragment&gt; &lt;Helmet title=&quot;Home&quot; /&gt; &lt;Row&gt; &#123;posts ? &lt;PostCardOne posts=&#123;posts&#125; /&gt; : &lt;Spinner /&gt;&#125; &lt;/Row&gt; &lt;/Fragment&gt; )&#125;export default PostCardList; import React from &#x27;react&#x27;;const PostDetail = () =&gt; &#123; return ( &lt;div&gt; PostDetail &lt;/div&gt; )&#125;export default PostDetail; import React from &#x27;react&#x27;;const PostEdit = () =&gt; &#123; return ( &lt;div&gt; PostEdit &lt;/div&gt; )&#125;export default PostEdit; import React, &#123; useState &#125; from &#x27;react&#x27;import &#123; useDispatch, useSelector &#125; from &#x27;react-redux&#x27;import &#123; Col, Form, FormGroup, Label, Progress, Button, Input &#125; from &#x27;reactstrap&#x27;import &#123; CKEditor &#125; from &quot;@ckeditor/ckeditor5-react&quot;import ClassicEditor from &#x27;@ckeditor/ckeditor5-editor-classic/src/classiceditor&#x27;import &#123; editorConfiguration &#125; from &#x27;../../components/editor/EditorConfig&#x27;import Myinit from &#x27;../../components/editor/UploadAdapter&#x27;const PostWrite = () =&gt; &#123; const &#123; isAuthenticated &#125; = useSelector((state) =&gt; state.auth) const [form, setValues] = useState(&#123; title: &quot;&quot;, contents: &quot;&quot;, fileUrl: &quot;&quot; &#125;) const diapatch = useDispatch const onChange = (e) =&gt; &#123; setValues(&#123; ...form, [e.target.name]: e.target.value &#125;) &#125; const onSubmit = async (e) =&gt; &#123; await e.preventDefault() const &#123; title, contents, fileUrl, category &#125; = form &#125; const getDataFromCKEditor = (event, editor) =&gt; &#123; console.log(&quot;editor&quot;) &#125; return ( &lt;div&gt; &#123;isAuthenticated ? ( &lt;Form onSubmit=&#123;onSubmit&#125;&gt; &lt;FormGroup className=&quot;mb-3&quot;&gt; &lt;Label for=&quot;title&quot;&gt;Title&lt;/Label&gt; &lt;Input type=&quot;text&quot; name=&quot;title&quot; id=&quot;title&quot; className=&quot;form-control&quot; onChange=&#123;onChange&#125; /&gt; &lt;/FormGroup&gt; &lt;FormGroup className=&quot;mb-3&quot;&gt; &lt;Label for=&quot;category&quot;&gt;Category&lt;/Label&gt; &lt;Input type=&quot;text&quot; name=&quot;category&quot; id=&quot;category&quot; className=&quot;form-control&quot; onChange=&#123;onChange&#125; /&gt; &lt;/FormGroup&gt; &lt;FormGroup className=&quot;mb-3&quot;&gt; &lt;Label for=&quot;content&quot;&gt;Content&lt;/Label&gt; &lt;CKEditor editor=&#123;ClassicEditor&#125; config=&#123;editorConfiguration&#125; onInit=&#123;Myinit&#125; onBlur=&#123;getDataFromCKEditor&#125; /&gt; &lt;Button color=&quot;success&quot; block className=&quot;mt-3 col-md-2 offset-md-10 mb-3&quot; &gt; ì œì¶œí•˜ê¸° &lt;/Button&gt; &lt;/FormGroup&gt; &lt;/Form&gt; ) : ( &lt;Col width=&#123;50&#125; className=&quot;p-5 m-5&quot;&gt; &lt;Progress animated color=&quot;info&quot; value=&#123;100&#125; /&gt; &lt;/Col&gt; )&#125; &lt;/div&gt; )&#125;export default PostWrite import React from &#x27;react&#x27;const Profile = () =&gt; &#123; &lt;div&gt; Profile &lt;/div&gt;&#125;export default Profile import React from &#x27;react&#x27;const Search = () =&gt; &#123; return ( &lt;div&gt; Search &lt;/div&gt; )&#125;export default Search","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸import React from &#x27;react&#x27;;const CategoryResult = () =&gt; &#123; return &lt;h1&gt;CategoryResult&lt;/h1&gt;&#125;export default CategoryResult; import &#123; Fragment, useEffect &#125; from &quot;react&quot;;import &#123; Helmet &#125; from &quot;react-helmet&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; Row, Spinner &#125; from &#x27;reactstrap&#x27;;import PostCardOne from &quot;../../components/post/PostCardOne&quot;;import &#123; POSTS_LOADING_REQUEST &#125; from &quot;../../redux/types&quot;;const PostCardList = () =&gt; &#123; const &#123; posts &#125; = useSelector((state) =&gt; state.post) const dispatch = useDispatch() useEffect(() =&gt; &#123; dispatch(&#123; type: POSTS_LOADING_REQUEST &#125;) &#125;, [dispatch]) return ( &lt;Fragment&gt; &lt;Helmet title=&quot;Home&quot; /&gt; &lt;Row&gt; &#123;posts ? &lt;PostCardOne posts=&#123;posts&#125; /&gt; : &lt;Spinner /&gt;&#125; &lt;/Row&gt; &lt;/Fragment&gt; )&#125;export default PostCardList; import React from &#x27;react&#x27;;const PostDetail = () =&gt; &#123; return ( &lt;div&gt; PostDetail &lt;/div&gt; )&#125;export default PostDetail; import React from &#x27;react&#x27;;const PostEdit = () =&gt; &#123; return ( &lt;div&gt; PostEdit &lt;/div&gt; )&#125;export default PostEdit; import React, &#123; useState &#125; from &#x27;react&#x27;import &#123; useDispatch, useSelector &#125; from &#x27;react-redux&#x27;import &#123; Col, Form, FormGroup, Label, Progress, Button, Input &#125; from &#x27;reactstrap&#x27;import &#123; CKEditor &#125; from &quot;@ckeditor/ckeditor5-react&quot;import ClassicEditor from &#x27;@ckeditor/ckeditor5-editor-classic/src/classiceditor&#x27;import &#123; editorConfiguration &#125; from &#x27;../../components/editor/EditorConfig&#x27;import Myinit from &#x27;../../components/editor/UploadAdapter&#x27;const PostWrite = () =&gt; &#123; const &#123; isAuthenticated &#125; = useSelector((state) =&gt; state.auth) const [form, setValues] = useState(&#123; title: &quot;&quot;, contents: &quot;&quot;, fileUrl: &quot;&quot; &#125;) const diapatch = useDispatch const onChange = (e) =&gt; &#123; setValues(&#123; ...form, [e.target.name]: e.target.value &#125;) &#125; const onSubmit = async (e) =&gt; &#123; await e.preventDefault() const &#123; title, contents, fileUrl, category &#125; = form &#125; const getDataFromCKEditor = (event, editor) =&gt; &#123; console.log(&quot;editor&quot;) &#125; return ( &lt;div&gt; &#123;isAuthenticated ? ( &lt;Form onSubmit=&#123;onSubmit&#125;&gt; &lt;FormGroup className=&quot;mb-3&quot;&gt; &lt;Label for=&quot;title&quot;&gt;Title&lt;/Label&gt; &lt;Input type=&quot;text&quot; name=&quot;title&quot; id=&quot;title&quot; className=&quot;form-control&quot; onChange=&#123;onChange&#125; /&gt; &lt;/FormGroup&gt; &lt;FormGroup className=&quot;mb-3&quot;&gt; &lt;Label for=&quot;category&quot;&gt;Category&lt;/Label&gt; &lt;Input type=&quot;text&quot; name=&quot;category&quot; id=&quot;category&quot; className=&quot;form-control&quot; onChange=&#123;onChange&#125; /&gt; &lt;/FormGroup&gt; &lt;FormGroup className=&quot;mb-3&quot;&gt; &lt;Label for=&quot;content&quot;&gt;Content&lt;/Label&gt; &lt;CKEditor editor=&#123;ClassicEditor&#125; config=&#123;editorConfiguration&#125; onInit=&#123;Myinit&#125; onBlur=&#123;getDataFromCKEditor&#125; /&gt; &lt;Button color=&quot;success&quot; block className=&quot;mt-3 col-md-2 offset-md-10 mb-3&quot; &gt; ì œì¶œí•˜ê¸° &lt;/Button&gt; &lt;/FormGroup&gt; &lt;/Form&gt; ) : ( &lt;Col width=&#123;50&#125; className=&quot;p-5 m-5&quot;&gt; &lt;Progress animated color=&quot;info&quot; value=&#123;100&#125; /&gt; &lt;/Col&gt; )&#125; &lt;/div&gt; )&#125;export default PostWrite import React from &#x27;react&#x27;const Profile = () =&gt; &#123; &lt;div&gt; Profile &lt;/div&gt;&#125;export default Profile import React from &#x27;react&#x27;const Search = () =&gt; &#123; return ( &lt;div&gt; Search &lt;/div&gt; )&#125;export default Search import React, &#123; Fragment &#125; from &#x27;react&#x27;;import &#123; Redirect, Route, Switch &#125; from &#x27;react-router-dom&#x27;;import &#123; Container &#125; from &#x27;reactstrap&#x27;;import AppNavbar from &quot;../components/AppNavbar&quot;;import Footer from &#x27;../components/Footer&#x27;;import Header from &#x27;../components/Header&#x27;;import CategoryResult from &#x27;./normalRoute/CategoryResult&#x27;;import PostCardList from &#x27;./normalRoute/PostCardList&#x27;;import PostDetail from &#x27;./normalRoute/PostDetail&#x27;;import PostWrite from &#x27;./normalRoute/PostWrite&#x27;;import Search from &#x27;./normalRoute/Search&#x27;;const Router = () =&gt; ( &lt;Fragment&gt; &lt;AppNavbar /&gt; &lt;Header /&gt; &lt;Container id=&quot;main-body&quot;&gt; &lt;Switch&gt; &lt;Route path=&#x27;/&#x27; exact component=&#123;PostCardList&#125; /&gt; &lt;Route path=&#x27;/post&#x27; exact component=&#123;PostWrite&#125; /&gt; &lt;Route path=&#x27;/post/:id&#x27; exact component=&#123;PostDetail&#125; /&gt; &lt;Route path=&#x27;/post/category/:categoryName&#x27; exact component=&#123;CategoryResult&#125; /&gt; &lt;Route path=&#x27;/search/:searchTerm&#x27; exact component=&#123;Search&#125; /&gt; &lt;Redirect from=&quot;*&quot; to=&quot;/&quot; /&gt; &lt;/Switch&gt; &#123;/* &lt;h1&gt;Hello Body&lt;/h1&gt; */&#125; &lt;/Container&gt; &lt;Footer /&gt; &lt;/Fragment&gt;)export default Router","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸°","slug":"react/react-blog/react-blog-12-loading","date":"2021-09-06T08:10:40.000Z","updated":"2024-11-23T16:51:42.423Z","comments":true,"path":"2021/09/06/react/react-blog/react-blog-12-loading/","link":"","permalink":"https://ckck803.github.io/2021/09/06/react/react-blog/react-blog-12-loading/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸°// USER LOADINGexport const USER_LOADING_REQUEST = &quot;USER_LOADING_REQUEST&quot;export const USER_LOADING_SUCCESS = &quot;USER_LOADING_SUCCESS&quot;export const USER_LOADING_FAILURE = &quot;USER_LOADING_FAILURE&quot; const authReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case REGISTER_REQUEST: case LOGIN_REQUEST: case LOGOUT_REQUEST: return &#123; ...state, errorMsg: &quot;&quot;, isLoading: true &#125; case REGISTER_SUCCESS: case LOGIN_SUCCESS: localStorage.setItem(&quot;token&quot;, action.payload.token) return &#123; ...state, ...action.payload, isAuthenticated: true, isLoading: false, userId: action.payload.user.userId, userRole: action.payload.user.role, errorMsg: &quot;&quot; &#125; case REGISTER_FAILURE: case LOGOUT_FAILURE: case LOGIN_FAILURE: localStorage.removeItem(&quot;token&quot;) return &#123; ...state, ...action.payload, token: null, user: null, userId: null, isAuthenticated: false, isLoading: false, userRole: null, errorMsg: action.payload.user.role &#125; case LOGOUT_SUCCESS: localStorage.removeItem(&quot;token&quot;) return &#123; token: null, user: null, userId: null, isAuthenticated: false, isLoading: false, userRole: null, errorMsg: &quot;&quot; &#125;; case CLEAR_ERROR_REQUEST: return &#123; ...state, errorMsg: null, &#125; case CLEAR_ERROR_SUCCESS: return &#123; ...state, errorMsg: null, &#125; case CLEAR_ERROR_FAILURE: return &#123; ...state, errorMsg: null &#125; case USER_LOADING_REQUEST: return &#123; ...state, isLoading: true &#125; case USER_LOADING_SUCCESS: return &#123; ...state, isAuthenticated: true, isLoading: false, user: action.payload, userId: action.payload._id, userName: action.payload.userName, userRole: action.payload.role &#125; case USER_LOADING_FAILURE: return &#123; ...state, user: null, isAuthenticated: false, isLoading: false, userRole: &quot;&quot;, &#125; default: return state; &#125;&#125; // User Loadingconst userLoadingAPI = (token) =&gt; &#123; console.log(token); const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;applicatio n/json&quot;, &#125;, &#125;; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.get(&quot;api/auth/user&quot;, config);&#125;function* userLoading(action) &#123; try &#123; console.log(action, &quot;userLoading&quot;) const result = yield call(userLoadingAPI, action.payload) console.log(result) yield put(&#123; type: USER_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: USER_LOADING_FAILURE, payload: e.response &#125;) &#125;&#125; // Clear Errorfunction* clearError() &#123; try &#123; yield put(&#123; type: CLEAR_ERROR_SUCCESS, &#125;); &#125; catch (e) &#123; yield put(&#123; type: CLEAR_ERROR_FAILURE, &#125;); &#125;&#125;function* watchClearError() &#123; yield takeEvery(CLEAR_ERROR_REQUEST, clearError);&#125; export default function* authSaga() &#123; yield all([ fork(watchLoginUser), fork(watchLogoutUser), fork(watchUserLoading), fork(watchRegisterUser), fork(watchClearError), ]);&#125; import &#123; USER_LOADING_REQUEST &#125; from &#x27;../../redux/types&#x27;;import store from &#x27;../../store&#x27;;const laodUser = () =&gt; &#123; try &#123; store.dispatch(&#123; type: USER_LOADING_REQUEST, payload: localStorage.getItem(&quot;token&quot;), &#125;); &#125; catch (e) &#123; console.log(e); &#125;&#125;export default laodUser; import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import App from &#x27;./App&#x27;;import loadUser from &#x27;./components/auth/loadUser&#x27;;import &#x27;./index.css&#x27;;import reportWebVitals from &#x27;./reportWebVitals&#x27;;// ë¡œê·¸ì¸ì„ í•­ìƒ ìœ ì§€loadUser();ReactDOM.render( &lt;App /&gt;, document.getElementById(&#x27;root&#x27;));// If you want to start measuring performance in your app, pass a function// to log results (for example: reportWebVitals(console.log))// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitalsreportWebVitals();","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸°// USER LOADINGexport const USER_LOADING_REQUEST = &quot;USER_LOADING_REQUEST&quot;export const USER_LOADING_SUCCESS = &quot;USER_LOADING_SUCCESS&quot;export const USER_LOADING_FAILURE = &quot;USER_LOADING_FAILURE&quot; const authReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case REGISTER_REQUEST: case LOGIN_REQUEST: case LOGOUT_REQUEST: return &#123; ...state, errorMsg: &quot;&quot;, isLoading: true &#125; case REGISTER_SUCCESS: case LOGIN_SUCCESS: localStorage.setItem(&quot;token&quot;, action.payload.token) return &#123; ...state, ...action.payload, isAuthenticated: true, isLoading: false, userId: action.payload.user.userId, userRole: action.payload.user.role, errorMsg: &quot;&quot; &#125; case REGISTER_FAILURE: case LOGOUT_FAILURE: case LOGIN_FAILURE: localStorage.removeItem(&quot;token&quot;) return &#123; ...state, ...action.payload, token: null, user: null, userId: null, isAuthenticated: false, isLoading: false, userRole: null, errorMsg: action.payload.user.role &#125; case LOGOUT_SUCCESS: localStorage.removeItem(&quot;token&quot;) return &#123; token: null, user: null, userId: null, isAuthenticated: false, isLoading: false, userRole: null, errorMsg: &quot;&quot; &#125;; case CLEAR_ERROR_REQUEST: return &#123; ...state, errorMsg: null, &#125; case CLEAR_ERROR_SUCCESS: return &#123; ...state, errorMsg: null, &#125; case CLEAR_ERROR_FAILURE: return &#123; ...state, errorMsg: null &#125; case USER_LOADING_REQUEST: return &#123; ...state, isLoading: true &#125; case USER_LOADING_SUCCESS: return &#123; ...state, isAuthenticated: true, isLoading: false, user: action.payload, userId: action.payload._id, userName: action.payload.userName, userRole: action.payload.role &#125; case USER_LOADING_FAILURE: return &#123; ...state, user: null, isAuthenticated: false, isLoading: false, userRole: &quot;&quot;, &#125; default: return state; &#125;&#125; // User Loadingconst userLoadingAPI = (token) =&gt; &#123; console.log(token); const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;applicatio n/json&quot;, &#125;, &#125;; if (token) &#123; config.headers[&quot;x-auth-token&quot;] = token; &#125; return axios.get(&quot;api/auth/user&quot;, config);&#125;function* userLoading(action) &#123; try &#123; console.log(action, &quot;userLoading&quot;) const result = yield call(userLoadingAPI, action.payload) console.log(result) yield put(&#123; type: USER_LOADING_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: USER_LOADING_FAILURE, payload: e.response &#125;) &#125;&#125; // Clear Errorfunction* clearError() &#123; try &#123; yield put(&#123; type: CLEAR_ERROR_SUCCESS, &#125;); &#125; catch (e) &#123; yield put(&#123; type: CLEAR_ERROR_FAILURE, &#125;); &#125;&#125;function* watchClearError() &#123; yield takeEvery(CLEAR_ERROR_REQUEST, clearError);&#125; export default function* authSaga() &#123; yield all([ fork(watchLoginUser), fork(watchLogoutUser), fork(watchUserLoading), fork(watchRegisterUser), fork(watchClearError), ]);&#125; import &#123; USER_LOADING_REQUEST &#125; from &#x27;../../redux/types&#x27;;import store from &#x27;../../store&#x27;;const laodUser = () =&gt; &#123; try &#123; store.dispatch(&#123; type: USER_LOADING_REQUEST, payload: localStorage.getItem(&quot;token&quot;), &#125;); &#125; catch (e) &#123; console.log(e); &#125;&#125;export default laodUser; import React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import App from &#x27;./App&#x27;;import loadUser from &#x27;./components/auth/loadUser&#x27;;import &#x27;./index.css&#x27;;import reportWebVitals from &#x27;./reportWebVitals&#x27;;// ë¡œê·¸ì¸ì„ í•­ìƒ ìœ ì§€loadUser();ReactDOM.render( &lt;App /&gt;, document.getElementById(&#x27;root&#x27;));// If you want to start measuring performance in your app, pass a function// to log results (for example: reportWebVitals(console.log))// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitalsreportWebVitals();","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—…","slug":"react/react-blog/react-blog-11-register","date":"2021-09-06T06:10:40.000Z","updated":"2024-11-23T16:51:43.259Z","comments":true,"path":"2021/09/06/react/react-blog/react-blog-11-register/","link":"","permalink":"https://ckck803.github.io/2021/09/06/react/react-blog/react-blog-11-register/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—…const authReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case REGISTER_REQUEST: case LOGIN_REQUEST: case LOGOUT_REQUEST: return &#123; ...state, errorMsg: &quot;&quot;, isLoading: true &#125; case REGISTER_SUCCESS: case LOGIN_SUCCESS: localStorage.setItem(&quot;token&quot;, action.payload.token) return &#123; ...state, ...action.payload, isAuthenticated: true, isLoading: false, userId: action.payload.user.userId, userRole: action.payload.user.role, errorMsg: &quot;&quot; &#125; case REGISTER_FAILURE: case LOGOUT_FAILURE: case LOGIN_FAILURE: localStorage.removeItem(&quot;token&quot;) return &#123; ...state, ...action.payload, token: null, user: null, userId: null, isAuthenticated: false, isLoading: false, userRole: null, errorMsg: action.payload.user.role &#125; case LOGOUT_SUCCESS: localStorage.removeItem(&quot;token&quot;) return &#123; token: null, user: null, userId: null, isAuthenticated: false, isLoading: false, userRole: null, errorMsg: &quot;&quot; &#125;; case CLEAR_ERROR_REQUEST: return &#123; ...state, errorMsg: null, &#125; case CLEAR_ERROR_SUCCESS: return &#123; ...state, errorMsg: null, &#125; case CLEAR_ERROR_FAILURE: return &#123; ...state, errorMsg: null &#125; case USER_LOADING_REQUEST: return &#123; ...state, isLoading: true &#125; case USER_LOADING_SUCCESS: return &#123; ...state, isAuthenticated: true, isLoading: false, user: action.payload, userId: action.payload._id, userName: action.payload.userName, userRole: action.payload.role &#125; case USER_LOADING_FAILURE: return &#123; ...state, user: null, isAuthenticated: false, isLoading: false, userRole: &quot;&quot;, &#125; default: return state; &#125;&#125; // Registerconst registerUserAPI = (req) =&gt; &#123; console.log(req, &quot;req&quot;); return axios.post(&quot;api/user&quot;, req);&#125;;function* registerUser(action) &#123; try &#123; const result = yield call(registerUserAPI, action.payload); console.log(result, &quot;RegisterUser Data&quot;); yield put(&#123; type: REGISTER_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: REGISTER_FAILURE, payload: e.response, &#125;); &#125;&#125;function* watchRegisterUser() &#123; yield takeEvery(REGISTER_REQUEST, registerUser);&#125; export default function* authSaga() &#123; yield all([ fork(watchLoginUser), fork(watchLogoutUser), fork(watchUserLoading), fork(watchRegisterUser), fork(watchClearError), ]);&#125;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—…const authReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case REGISTER_REQUEST: case LOGIN_REQUEST: case LOGOUT_REQUEST: return &#123; ...state, errorMsg: &quot;&quot;, isLoading: true &#125; case REGISTER_SUCCESS: case LOGIN_SUCCESS: localStorage.setItem(&quot;token&quot;, action.payload.token) return &#123; ...state, ...action.payload, isAuthenticated: true, isLoading: false, userId: action.payload.user.userId, userRole: action.payload.user.role, errorMsg: &quot;&quot; &#125; case REGISTER_FAILURE: case LOGOUT_FAILURE: case LOGIN_FAILURE: localStorage.removeItem(&quot;token&quot;) return &#123; ...state, ...action.payload, token: null, user: null, userId: null, isAuthenticated: false, isLoading: false, userRole: null, errorMsg: action.payload.user.role &#125; case LOGOUT_SUCCESS: localStorage.removeItem(&quot;token&quot;) return &#123; token: null, user: null, userId: null, isAuthenticated: false, isLoading: false, userRole: null, errorMsg: &quot;&quot; &#125;; case CLEAR_ERROR_REQUEST: return &#123; ...state, errorMsg: null, &#125; case CLEAR_ERROR_SUCCESS: return &#123; ...state, errorMsg: null, &#125; case CLEAR_ERROR_FAILURE: return &#123; ...state, errorMsg: null &#125; case USER_LOADING_REQUEST: return &#123; ...state, isLoading: true &#125; case USER_LOADING_SUCCESS: return &#123; ...state, isAuthenticated: true, isLoading: false, user: action.payload, userId: action.payload._id, userName: action.payload.userName, userRole: action.payload.role &#125; case USER_LOADING_FAILURE: return &#123; ...state, user: null, isAuthenticated: false, isLoading: false, userRole: &quot;&quot;, &#125; default: return state; &#125;&#125; // Registerconst registerUserAPI = (req) =&gt; &#123; console.log(req, &quot;req&quot;); return axios.post(&quot;api/user&quot;, req);&#125;;function* registerUser(action) &#123; try &#123; const result = yield call(registerUserAPI, action.payload); console.log(result, &quot;RegisterUser Data&quot;); yield put(&#123; type: REGISTER_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: REGISTER_FAILURE, payload: e.response, &#125;); &#125;&#125;function* watchRegisterUser() &#123; yield takeEvery(REGISTER_REQUEST, registerUser);&#125; export default function* authSaga() &#123; yield all([ fork(watchLoginUser), fork(watchLogoutUser), fork(watchUserLoading), fork(watchRegisterUser), fork(watchClearError), ]);&#125;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2","slug":"react/react-blog/react-blog-10-register","date":"2021-09-06T05:10:40.000Z","updated":"2024-11-23T16:51:42.574Z","comments":true,"path":"2021/09/06/react/react-blog/react-blog-10-register/","link":"","permalink":"https://ckck803.github.io/2021/09/06/react/react-blog/react-blog-10-register/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2import React, &#123; Fragment, useCallback, useEffect, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; Link &#125; from &quot;react-router-dom&quot;;import &#123; Button, Collapse, Container, Form, Nav, Navbar, NavbarToggler, NavItem,&#125; from &quot;reactstrap&quot;;import &#123; LOGOUT_REQUEST &#125; from &quot;../redux/types&quot;;import LoginModal from &quot;./auth/LoginModal&quot;;import RegisterModal from &quot;./auth/RegisterModal&quot;;const AppNavbar = () =&gt; &#123; const [isOpen, setIsOpen] = useState(false); const &#123; isAuthenticated, user, userRole &#125; = useSelector( (state) =&gt; state.auth ); console.log(userRole, &quot;UserRole&quot;); const dispatch = useDispatch(); const onLogout = useCallback(() =&gt; &#123; dispatch(&#123; type: LOGOUT_REQUEST, &#125;); &#125;, [dispatch]); useEffect(() =&gt; &#123; setIsOpen(false); &#125;, [user]); const handleToggle = () =&gt; &#123; setIsOpen(!isOpen); &#125;; const addPostClick = () =&gt; &#123;&#125;; const authLink = ( &lt;Fragment&gt; &lt;NavItem&gt; &#123;userRole === &quot;MainJuin&quot; ? ( &lt;Form className=&quot;col mt-2&quot;&gt; &lt;Link to=&quot;posts&quot; className=&quot;btn btn-success block text-white px-3&quot; onClick=&#123;addPostClick&#125; &gt; AddPost &lt;/Link&gt; &lt;/Form&gt; ) : ( &quot;&quot; )&#125; &lt;/NavItem&gt; &lt;NavItem className=&quot;d-flex justify-content-center&quot;&gt; &lt;Form className=&quot;col mt-2&quot;&gt; &#123;user &amp;&amp; user.name ? ( &lt;Link&gt; &lt;Button outline color=&quot;light&quot; className=&quot;px-3&quot; block&gt; &lt;strong&gt;&#123;user ? `Welcom $&#123;user.name&#125;` : &quot;&quot;&#125;&lt;/strong&gt; &lt;/Button&gt; &lt;/Link&gt; ) : ( &lt;Button outline color=&quot;light&quot; className=&quot;px-3&quot; block&gt; &lt;strong&gt;No User&lt;/strong&gt; &lt;/Button&gt; )&#125; &lt;/Form&gt; &lt;/NavItem&gt; &lt;NavItem&gt; &lt;Form className=&quot;col&quot;&gt; &lt;Link onClick=&#123;onLogout&#125; to=&quot;#&quot;&gt; &lt;Button outline color=&quot;light&quot; className=&quot;mt-2&quot; block&gt; Logout &lt;/Button&gt; &lt;/Link&gt; &lt;/Form&gt; &lt;/NavItem&gt; &lt;/Fragment&gt; ); const guestLink = ( &lt;Fragment&gt; &lt;NavItem&gt; &lt;RegisterModal /&gt; &lt;/NavItem&gt; &lt;NavItem&gt; &lt;LoginModal /&gt; &lt;/NavItem&gt; &lt;/Fragment&gt; ); return ( &lt;div&gt; &lt;Navbar color=&quot;dark&quot; dark expand=&quot;lg&quot; className=&quot;sticky-top&quot;&gt; &lt;Container&gt; &lt;Link to=&quot;/&quot; className=&quot;text-white text-decoration-none&quot;&gt; Victorì˜ ë¸”ë¡œê·¸ &lt;/Link&gt; &lt;NavbarToggler onClick=&#123;handleToggle&#125; /&gt; &lt;Collapse isOpen=&#123;isOpen&#125; navbar&gt; &lt;Nav className=&quot;ml-auto d-flex justify-content-around&quot; navbar&gt; &#123;isAuthenticated ? authLink : guestLink&#125; &lt;/Nav&gt; &lt;/Collapse&gt; &lt;/Container&gt; &lt;/Navbar&gt; &lt;/div&gt; );&#125;;export default AppNavbar;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2import React, &#123; Fragment, useCallback, useEffect, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; Link &#125; from &quot;react-router-dom&quot;;import &#123; Button, Collapse, Container, Form, Nav, Navbar, NavbarToggler, NavItem,&#125; from &quot;reactstrap&quot;;import &#123; LOGOUT_REQUEST &#125; from &quot;../redux/types&quot;;import LoginModal from &quot;./auth/LoginModal&quot;;import RegisterModal from &quot;./auth/RegisterModal&quot;;const AppNavbar = () =&gt; &#123; const [isOpen, setIsOpen] = useState(false); const &#123; isAuthenticated, user, userRole &#125; = useSelector( (state) =&gt; state.auth ); console.log(userRole, &quot;UserRole&quot;); const dispatch = useDispatch(); const onLogout = useCallback(() =&gt; &#123; dispatch(&#123; type: LOGOUT_REQUEST, &#125;); &#125;, [dispatch]); useEffect(() =&gt; &#123; setIsOpen(false); &#125;, [user]); const handleToggle = () =&gt; &#123; setIsOpen(!isOpen); &#125;; const addPostClick = () =&gt; &#123;&#125;; const authLink = ( &lt;Fragment&gt; &lt;NavItem&gt; &#123;userRole === &quot;MainJuin&quot; ? ( &lt;Form className=&quot;col mt-2&quot;&gt; &lt;Link to=&quot;posts&quot; className=&quot;btn btn-success block text-white px-3&quot; onClick=&#123;addPostClick&#125; &gt; AddPost &lt;/Link&gt; &lt;/Form&gt; ) : ( &quot;&quot; )&#125; &lt;/NavItem&gt; &lt;NavItem className=&quot;d-flex justify-content-center&quot;&gt; &lt;Form className=&quot;col mt-2&quot;&gt; &#123;user &amp;&amp; user.name ? ( &lt;Link&gt; &lt;Button outline color=&quot;light&quot; className=&quot;px-3&quot; block&gt; &lt;strong&gt;&#123;user ? `Welcom $&#123;user.name&#125;` : &quot;&quot;&#125;&lt;/strong&gt; &lt;/Button&gt; &lt;/Link&gt; ) : ( &lt;Button outline color=&quot;light&quot; className=&quot;px-3&quot; block&gt; &lt;strong&gt;No User&lt;/strong&gt; &lt;/Button&gt; )&#125; &lt;/Form&gt; &lt;/NavItem&gt; &lt;NavItem&gt; &lt;Form className=&quot;col&quot;&gt; &lt;Link onClick=&#123;onLogout&#125; to=&quot;#&quot;&gt; &lt;Button outline color=&quot;light&quot; className=&quot;mt-2&quot; block&gt; Logout &lt;/Button&gt; &lt;/Link&gt; &lt;/Form&gt; &lt;/NavItem&gt; &lt;/Fragment&gt; ); const guestLink = ( &lt;Fragment&gt; &lt;NavItem&gt; &lt;RegisterModal /&gt; &lt;/NavItem&gt; &lt;NavItem&gt; &lt;LoginModal /&gt; &lt;/NavItem&gt; &lt;/Fragment&gt; ); return ( &lt;div&gt; &lt;Navbar color=&quot;dark&quot; dark expand=&quot;lg&quot; className=&quot;sticky-top&quot;&gt; &lt;Container&gt; &lt;Link to=&quot;/&quot; className=&quot;text-white text-decoration-none&quot;&gt; Victorì˜ ë¸”ë¡œê·¸ &lt;/Link&gt; &lt;NavbarToggler onClick=&#123;handleToggle&#125; /&gt; &lt;Collapse isOpen=&#123;isOpen&#125; navbar&gt; &lt;Nav className=&quot;ml-auto d-flex justify-content-around&quot; navbar&gt; &#123;isAuthenticated ? authLink : guestLink&#125; &lt;/Nav&gt; &lt;/Collapse&gt; &lt;/Container&gt; &lt;/Navbar&gt; &lt;/div&gt; );&#125;;export default AppNavbar;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì…","slug":"react/react-blog/react-blog-09-register","date":"2021-09-06T03:10:40.000Z","updated":"2024-11-23T16:51:43.151Z","comments":true,"path":"2021/09/06/react/react-blog/react-blog-09-register/","link":"","permalink":"https://ckck803.github.io/2021/09/06/react/react-blog/react-blog-09-register/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì…// REGISTERexport const REGISTER_REQUEST = &quot;REGISTER_REQUEST&quot;;export const REGISTER_SUCCESS = &quot;REGISTER_SUCCESS&quot;;export const REGISTER_FAILURE = &quot;REGISTER_FAILURE&quot;; import React, &#123; useEffect, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; Alert, Button, Form, FormGroup, Input, Label, Modal, ModalBody, ModalHeader, NavLink,&#125; from &quot;reactstrap&quot;;import &#123; CLEAR_ERROR_REQUEST, REGISTER_REQUEST &#125; from &quot;../../redux/types&quot;;const RegisterModal = () =&gt; &#123; const [modal, setModal] = useState(false); const [form, setValue] = useState(&#123; name: &quot;&quot;, email: &quot;&quot;, password: &quot;&quot;, &#125;); const [localMsg, setLocalMsg] = useState(&quot;&quot;); const &#123; errorMsg &#125; = useSelector((state) =&gt; state.auth); const dispatch = useDispatch(); const handleToggle = () =&gt; &#123; dispatch(&#123; type: CLEAR_ERROR_REQUEST, &#125;); setModal(!modal); &#125;; useEffect(() =&gt; &#123; try &#123; setLocalMsg(errorMsg); &#125; catch (e) &#123; console.error(e); &#125; &#125;, [errorMsg]); const onChange = (e) =&gt; &#123; setValue(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;; const onSubmit = (e) =&gt; &#123; e.preventDefault(); const &#123; name, email, password &#125; = form; const newUser = &#123; name, email, password &#125;; console.log(newUser, &quot;newUser&quot;); dispatch(&#123; type: REGISTER_REQUEST, payload: newUser, &#125;); &#125;; return ( &lt;div&gt; &lt;NavLink onClick=&#123;handleToggle&#125; href=&quot;#&quot;&gt; Register &lt;/NavLink&gt; &lt;Modal isOpen=&#123;modal&#125; toggle=&#123;handleToggle&#125;&gt; &lt;ModalHeader toggle=&#123;handleToggle&#125;&gt;Register&lt;/ModalHeader&gt; &lt;ModalBody&gt; &#123;localMsg ? &lt;Alert color=&quot;danger&quot;&gt;&lt;/Alert&gt; : null&#125; &lt;Form onSubmit=&#123;onSubmit&#125;&gt; &lt;FormGroup&gt; &lt;Label for=&quot;name&quot;&gt;Name&lt;/Label&gt; &lt;Input type=&quot;text&quot; name=&quot;name&quot; id=&quot;name&quot; placeholder=&quot;Name&quot; onChange=&#123;onChange&#125; /&gt; &lt;Label for=&quot;email&quot;&gt;Email&lt;/Label&gt; &lt;Input type=&quot;text&quot; name=&quot;email&quot; id=&quot;email&quot; placeholder=&quot;email&quot; onChange=&#123;onChange&#125; /&gt; &lt;Label for=&quot;password&quot;&gt;Password&lt;/Label&gt; &lt;Input type=&quot;text&quot; name=&quot;password&quot; id=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;Button color=&quot;dark&quot; className=&quot;mt-2&quot; block&gt; Register &lt;/Button&gt; &lt;/FormGroup&gt; &lt;/Form&gt; &lt;/ModalBody&gt; &lt;/Modal&gt; &lt;/div&gt; );&#125;;export default RegisterModal; import React, &#123; Fragment, useCallback, useEffect, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; Link &#125; from &quot;react-router-dom&quot;;import &#123; Button, Collapse, Container, Form, Nav, Navbar, NavbarToggler, NavItem,&#125; from &quot;reactstrap&quot;;import &#123; LOGOUT_REQUEST &#125; from &quot;../redux/types&quot;;import LoginModal from &quot;./auth/LoginModal&quot;;import RegisterModal from &quot;./auth/RegisterModal&quot;;const AppNavbar = () =&gt; &#123; const [isOpen, setIsOpen] = useState(false); const &#123; isAuthenticated, user, userRole &#125; = useSelector( (state) =&gt; state.auth ); console.log(userRole, &quot;UserRole&quot;); const dispatch = useDispatch(); const onLogout = useCallback(() =&gt; &#123; dispatch(&#123; type: LOGOUT_REQUEST, &#125;); &#125;, [dispatch]); useEffect(() =&gt; &#123; setIsOpen(false); &#125;, [user]); const handleToggle = () =&gt; &#123; setIsOpen(!isOpen); &#125;; const addPostClick = () =&gt; &#123;&#125;; const authLink = ( &lt;Fragment&gt; &lt;NavItem&gt; &#123;userRole === &quot;MainJuin&quot; ? ( &lt;Form className=&quot;col mt-2&quot;&gt; &lt;Link to=&quot;posts&quot; className=&quot;btn btn-success block text-white px-3&quot; onClick=&#123;addPostClick&#125; &gt; AddPost &lt;/Link&gt; &lt;/Form&gt; ) : ( &quot;&quot; )&#125; &lt;/NavItem&gt; &lt;NavItem className=&quot;d-flex justify-content-center&quot;&gt; &lt;Form className=&quot;col mt-2&quot;&gt; &#123;user &amp;&amp; user.name ? ( &lt;Link&gt; &lt;Button outline color=&quot;light&quot; className=&quot;px-3&quot; block&gt; &lt;strong&gt;&#123;user ? `Welcom $&#123;user.name&#125;` : &quot;&quot;&#125;&lt;/strong&gt; &lt;/Button&gt; &lt;/Link&gt; ) : ( &lt;Button outline color=&quot;light&quot; className=&quot;px-3&quot; block&gt; &lt;strong&gt;No User&lt;/strong&gt; &lt;/Button&gt; )&#125; &lt;/Form&gt; &lt;/NavItem&gt; &lt;NavItem&gt; &lt;Form className=&quot;col&quot;&gt; &lt;Link onClick=&#123;onLogout&#125; to=&quot;#&quot;&gt; &lt;Button outline color=&quot;light&quot; className=&quot;mt-2&quot; block&gt; Logout &lt;/Button&gt; &lt;/Link&gt; &lt;/Form&gt; &lt;/NavItem&gt; &lt;/Fragment&gt; ); const guestLink = ( &lt;Fragment&gt; &lt;NavItem&gt; &lt;RegisterModal /&gt; &lt;/NavItem&gt; &lt;NavItem&gt; &lt;LoginModal /&gt; &lt;/NavItem&gt; &lt;/Fragment&gt; ); return ( &lt;div&gt; &lt;Navbar color=&quot;dark&quot; dark expand=&quot;lg&quot; className=&quot;sticky-top&quot;&gt; &lt;Container&gt; &lt;Link to=&quot;/&quot; className=&quot;text-white text-decoration-none&quot;&gt; Victorì˜ ë¸”ë¡œê·¸ &lt;/Link&gt; &lt;NavbarToggler onClick=&#123;handleToggle&#125; /&gt; &lt;Collapse isOpen=&#123;isOpen&#125; navbar&gt; &lt;Nav className=&quot;ml-auto d-flex justify-content-around&quot; navbar&gt; &#123;isAuthenticated ? authLink : guestLink&#125; &lt;/Nav&gt; &lt;/Collapse&gt; &lt;/Container&gt; &lt;/Navbar&gt; &lt;/div&gt; );&#125;;export default AppNavbar;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì…// REGISTERexport const REGISTER_REQUEST = &quot;REGISTER_REQUEST&quot;;export const REGISTER_SUCCESS = &quot;REGISTER_SUCCESS&quot;;export const REGISTER_FAILURE = &quot;REGISTER_FAILURE&quot;; import React, &#123; useEffect, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; Alert, Button, Form, FormGroup, Input, Label, Modal, ModalBody, ModalHeader, NavLink,&#125; from &quot;reactstrap&quot;;import &#123; CLEAR_ERROR_REQUEST, REGISTER_REQUEST &#125; from &quot;../../redux/types&quot;;const RegisterModal = () =&gt; &#123; const [modal, setModal] = useState(false); const [form, setValue] = useState(&#123; name: &quot;&quot;, email: &quot;&quot;, password: &quot;&quot;, &#125;); const [localMsg, setLocalMsg] = useState(&quot;&quot;); const &#123; errorMsg &#125; = useSelector((state) =&gt; state.auth); const dispatch = useDispatch(); const handleToggle = () =&gt; &#123; dispatch(&#123; type: CLEAR_ERROR_REQUEST, &#125;); setModal(!modal); &#125;; useEffect(() =&gt; &#123; try &#123; setLocalMsg(errorMsg); &#125; catch (e) &#123; console.error(e); &#125; &#125;, [errorMsg]); const onChange = (e) =&gt; &#123; setValue(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;; const onSubmit = (e) =&gt; &#123; e.preventDefault(); const &#123; name, email, password &#125; = form; const newUser = &#123; name, email, password &#125;; console.log(newUser, &quot;newUser&quot;); dispatch(&#123; type: REGISTER_REQUEST, payload: newUser, &#125;); &#125;; return ( &lt;div&gt; &lt;NavLink onClick=&#123;handleToggle&#125; href=&quot;#&quot;&gt; Register &lt;/NavLink&gt; &lt;Modal isOpen=&#123;modal&#125; toggle=&#123;handleToggle&#125;&gt; &lt;ModalHeader toggle=&#123;handleToggle&#125;&gt;Register&lt;/ModalHeader&gt; &lt;ModalBody&gt; &#123;localMsg ? &lt;Alert color=&quot;danger&quot;&gt;&lt;/Alert&gt; : null&#125; &lt;Form onSubmit=&#123;onSubmit&#125;&gt; &lt;FormGroup&gt; &lt;Label for=&quot;name&quot;&gt;Name&lt;/Label&gt; &lt;Input type=&quot;text&quot; name=&quot;name&quot; id=&quot;name&quot; placeholder=&quot;Name&quot; onChange=&#123;onChange&#125; /&gt; &lt;Label for=&quot;email&quot;&gt;Email&lt;/Label&gt; &lt;Input type=&quot;text&quot; name=&quot;email&quot; id=&quot;email&quot; placeholder=&quot;email&quot; onChange=&#123;onChange&#125; /&gt; &lt;Label for=&quot;password&quot;&gt;Password&lt;/Label&gt; &lt;Input type=&quot;text&quot; name=&quot;password&quot; id=&quot;password&quot; placeholder=&quot;Password&quot; onChange=&#123;onChange&#125; /&gt; &lt;Button color=&quot;dark&quot; className=&quot;mt-2&quot; block&gt; Register &lt;/Button&gt; &lt;/FormGroup&gt; &lt;/Form&gt; &lt;/ModalBody&gt; &lt;/Modal&gt; &lt;/div&gt; );&#125;;export default RegisterModal; import React, &#123; Fragment, useCallback, useEffect, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; Link &#125; from &quot;react-router-dom&quot;;import &#123; Button, Collapse, Container, Form, Nav, Navbar, NavbarToggler, NavItem,&#125; from &quot;reactstrap&quot;;import &#123; LOGOUT_REQUEST &#125; from &quot;../redux/types&quot;;import LoginModal from &quot;./auth/LoginModal&quot;;import RegisterModal from &quot;./auth/RegisterModal&quot;;const AppNavbar = () =&gt; &#123; const [isOpen, setIsOpen] = useState(false); const &#123; isAuthenticated, user, userRole &#125; = useSelector( (state) =&gt; state.auth ); console.log(userRole, &quot;UserRole&quot;); const dispatch = useDispatch(); const onLogout = useCallback(() =&gt; &#123; dispatch(&#123; type: LOGOUT_REQUEST, &#125;); &#125;, [dispatch]); useEffect(() =&gt; &#123; setIsOpen(false); &#125;, [user]); const handleToggle = () =&gt; &#123; setIsOpen(!isOpen); &#125;; const addPostClick = () =&gt; &#123;&#125;; const authLink = ( &lt;Fragment&gt; &lt;NavItem&gt; &#123;userRole === &quot;MainJuin&quot; ? ( &lt;Form className=&quot;col mt-2&quot;&gt; &lt;Link to=&quot;posts&quot; className=&quot;btn btn-success block text-white px-3&quot; onClick=&#123;addPostClick&#125; &gt; AddPost &lt;/Link&gt; &lt;/Form&gt; ) : ( &quot;&quot; )&#125; &lt;/NavItem&gt; &lt;NavItem className=&quot;d-flex justify-content-center&quot;&gt; &lt;Form className=&quot;col mt-2&quot;&gt; &#123;user &amp;&amp; user.name ? ( &lt;Link&gt; &lt;Button outline color=&quot;light&quot; className=&quot;px-3&quot; block&gt; &lt;strong&gt;&#123;user ? `Welcom $&#123;user.name&#125;` : &quot;&quot;&#125;&lt;/strong&gt; &lt;/Button&gt; &lt;/Link&gt; ) : ( &lt;Button outline color=&quot;light&quot; className=&quot;px-3&quot; block&gt; &lt;strong&gt;No User&lt;/strong&gt; &lt;/Button&gt; )&#125; &lt;/Form&gt; &lt;/NavItem&gt; &lt;NavItem&gt; &lt;Form className=&quot;col&quot;&gt; &lt;Link onClick=&#123;onLogout&#125; to=&quot;#&quot;&gt; &lt;Button outline color=&quot;light&quot; className=&quot;mt-2&quot; block&gt; Logout &lt;/Button&gt; &lt;/Link&gt; &lt;/Form&gt; &lt;/NavItem&gt; &lt;/Fragment&gt; ); const guestLink = ( &lt;Fragment&gt; &lt;NavItem&gt; &lt;RegisterModal /&gt; &lt;/NavItem&gt; &lt;NavItem&gt; &lt;LoginModal /&gt; &lt;/NavItem&gt; &lt;/Fragment&gt; ); return ( &lt;div&gt; &lt;Navbar color=&quot;dark&quot; dark expand=&quot;lg&quot; className=&quot;sticky-top&quot;&gt; &lt;Container&gt; &lt;Link to=&quot;/&quot; className=&quot;text-white text-decoration-none&quot;&gt; Victorì˜ ë¸”ë¡œê·¸ &lt;/Link&gt; &lt;NavbarToggler onClick=&#123;handleToggle&#125; /&gt; &lt;Collapse isOpen=&#123;isOpen&#125; navbar&gt; &lt;Nav className=&quot;ml-auto d-flex justify-content-around&quot; navbar&gt; &#123;isAuthenticated ? authLink : guestLink&#125; &lt;/Nav&gt; &lt;/Collapse&gt; &lt;/Container&gt; &lt;/Navbar&gt; &lt;/div&gt; );&#125;;export default AppNavbar;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ & ë¡œê·¸ì•„ì›ƒ","slug":"react/react-blog/react-blog-08-logout","date":"2021-09-06T02:10:40.000Z","updated":"2024-11-23T16:51:43.068Z","comments":true,"path":"2021/09/06/react/react-blog/react-blog-08-logout/","link":"","permalink":"https://ckck803.github.io/2021/09/06/react/react-blog/react-blog-08-logout/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ//LOGINexport const LOGIN_REQUEST = &quot;LOGIN_REQUEST&quot;;export const LOGIN_SUCCESS = &quot;LOGIN_SUCCESS&quot;;export const LOGIN_FAILURE = &quot;LOGIN_FAILURE&quot;;//LOGINexport const LOGOUT_REQUEST = &quot;LOGOUT_REQUEST&quot;;export const LOGOUT_SUCCESS = &quot;LOGOUT_SUCCESS&quot;;export const LOGOUT_FAILURE = &quot;LOGOUT_FAILURE&quot;;// CLEAR ERRORexport const CLEAR_ERROR_REQUEST = &quot;CLEAR_REQUEST&quot;;export const CLEAR_ERROR_SUCCESS = &quot;CLEAR_SUCCESS&quot;;export const CLEAR_ERROR_FAILURE = &quot;CLEAR_FAILURE&quot;; import &#123; LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILURE, CLEAR_ERROR_REQUEST, CLEAR_ERROR_SUCCESS, CLEAR_ERROR_FAILURE, LOGOUT_REQUEST, LOGOUT_SUCCESS, LOGOUT_FAILURE,&#125; from &quot;../types&quot;;const initialState = &#123; token: localStorage.getItem(&quot;token&quot;), isAuthenticated: null, isLoading: false, user: &quot;&quot;, userId: &quot;&quot;, userName: &quot;&quot;, userRole: &quot;&quot;, errorMsg: &quot;&quot;, successMsg: &quot;&quot;,&#125;;const authReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case LOGOUT_REQUEST: case LOGIN_REQUEST: return &#123; ...state, errorMsg: &quot;&quot;, &#125;; case LOGIN_SUCCESS: localStorage.setItem(&quot;token&quot;, action.payload.token); return &#123; ...state, ...action.payload, isAuthenticated: true, isLoading: false, userId: action.payload.user.id, userRole: action.payload.user.role, errorMsg: &quot;&quot;, &#125;; case LOGOUT_FAILURE: case LOGIN_FAILURE: localStorage.removeItem(&quot;token&quot;); return &#123; ...state, ...action.payload, token: null, user: null, userId: null, userRole: null, errorMsg: action.payload.data.msg, &#125;; case LOGOUT_SUCCESS: localStorage.removeItem(&quot;token&quot;); return &#123; ...state, ...action.payload, token: null, user: null, userId: null, isAuthenticated: false, isLoading: false, userRole: null, errorMsg: &quot;&quot;, &#125;; case CLEAR_ERROR_REQUEST: return &#123; ...state, errorMsg: null, &#125;; case CLEAR_ERROR_SUCCESS: return &#123; ...state, errorMsg: null, &#125;; case CLEAR_ERROR_FAILURE: return &#123; ...state, errorMsg: null, &#125;; default: return state; &#125;&#125;;export default authReducer; import &#123; all, put &#125; from &quot;@redux-saga/core/effects&quot;;import axios from &quot;axios&quot;;import &#123; call, fork, takeEvery &#125; from &quot;redux-saga/effects&quot;;import &#123; LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS, LOGOUT_REQUEST,&#125; from &quot;../types&quot;;const loginUserAPI = (loginData) =&gt; &#123; console.log(loginData, &quot;loginData&quot;); const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; return axios.post(&quot;api/auth&quot;, loginData, config);&#125;;function* loginUser(action) &#123; try &#123; const result = yield call(loginUserAPI, action.payload); console.log(result); yield put(&#123; type: LOGIN_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: LOGIN_FAILURE, payload: e.response, &#125;); &#125;&#125;function* logout(action) &#123; try &#123; const result = yield call(loginUserAPI, action.payload); console.log(result); yield put(&#123; type: LOGIN_SUCCESS, &#125;); &#125; catch (e) &#123; yield put(&#123; type: LOGIN_FAILURE, &#125;); console.log(e); &#125;&#125;function* watchLoginUser() &#123; yield takeEvery(LOGIN_REQUEST, loginUser);&#125;function* watchLogout() &#123; yield takeEvery(LOGOUT_REQUEST, logout);&#125;export default function* authSaga() &#123; yield all([fork(watchLoginUser), fork(watchLogout)]);&#125; import React, &#123; useCallback, useEffect, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; Link &#125; from &quot;react-router-dom&quot;;import &#123; Collapse, Container, Nav, Navbar, NavbarToggler &#125; from &quot;reactstrap&quot;;import &#123; LOGOUT_REQUEST &#125; from &quot;../redux/types&quot;;import LoginModal from &quot;./auth/LoginModal&quot;;const AppNavbar = () =&gt; &#123; const [isOpen, setIsOpen] = useState(false); const &#123; isAuthenticated, user, userRole &#125; = useSelector( (state) =&gt; state.auth ); console.log(userRole, &quot;UserRole&quot;); const dispatch = useDispatch(); const onLogout = useCallback(() =&gt; &#123; dispatch(&#123; type: LOGOUT_REQUEST, &#125;); &#125;, [dispatch]); useEffect(() =&gt; &#123; setIsOpen(false); &#125;, [user]); const handleToggle = () =&gt; &#123; setIsOpen(!isOpen); &#125;; return ( &lt;div&gt; &lt;Navbar color=&quot;dark&quot; dark expand=&quot;lg&quot; className=&quot;sticky-top&quot;&gt; &lt;Container&gt; &lt;Link to=&quot;/&quot; className=&quot;text-white text-decoration-none&quot;&gt; Victorì˜ ë¸”ë¡œê·¸ &lt;/Link&gt; &lt;NavbarToggler onClick=&#123;handleToggle&#125; /&gt; &lt;Collapse isOpen=&#123;isOpen&#125; navbar&gt; &lt;Nav className=&quot;ml-auto d-flex justify-content-around&quot; navbar&gt; &#123;isAuthenticated ? ( &lt;h1 className=&quot;text-white&quot;&gt;authLink&lt;/h1&gt; ) : ( &lt;LoginModal /&gt; )&#125; &lt;/Nav&gt; &lt;/Collapse&gt; &lt;/Container&gt; &lt;/Navbar&gt; &lt;/div&gt; );&#125;;export default AppNavbar;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ//LOGINexport const LOGIN_REQUEST = &quot;LOGIN_REQUEST&quot;;export const LOGIN_SUCCESS = &quot;LOGIN_SUCCESS&quot;;export const LOGIN_FAILURE = &quot;LOGIN_FAILURE&quot;;//LOGINexport const LOGOUT_REQUEST = &quot;LOGOUT_REQUEST&quot;;export const LOGOUT_SUCCESS = &quot;LOGOUT_SUCCESS&quot;;export const LOGOUT_FAILURE = &quot;LOGOUT_FAILURE&quot;;// CLEAR ERRORexport const CLEAR_ERROR_REQUEST = &quot;CLEAR_REQUEST&quot;;export const CLEAR_ERROR_SUCCESS = &quot;CLEAR_SUCCESS&quot;;export const CLEAR_ERROR_FAILURE = &quot;CLEAR_FAILURE&quot;; import &#123; LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILURE, CLEAR_ERROR_REQUEST, CLEAR_ERROR_SUCCESS, CLEAR_ERROR_FAILURE, LOGOUT_REQUEST, LOGOUT_SUCCESS, LOGOUT_FAILURE,&#125; from &quot;../types&quot;;const initialState = &#123; token: localStorage.getItem(&quot;token&quot;), isAuthenticated: null, isLoading: false, user: &quot;&quot;, userId: &quot;&quot;, userName: &quot;&quot;, userRole: &quot;&quot;, errorMsg: &quot;&quot;, successMsg: &quot;&quot;,&#125;;const authReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case LOGOUT_REQUEST: case LOGIN_REQUEST: return &#123; ...state, errorMsg: &quot;&quot;, &#125;; case LOGIN_SUCCESS: localStorage.setItem(&quot;token&quot;, action.payload.token); return &#123; ...state, ...action.payload, isAuthenticated: true, isLoading: false, userId: action.payload.user.id, userRole: action.payload.user.role, errorMsg: &quot;&quot;, &#125;; case LOGOUT_FAILURE: case LOGIN_FAILURE: localStorage.removeItem(&quot;token&quot;); return &#123; ...state, ...action.payload, token: null, user: null, userId: null, userRole: null, errorMsg: action.payload.data.msg, &#125;; case LOGOUT_SUCCESS: localStorage.removeItem(&quot;token&quot;); return &#123; ...state, ...action.payload, token: null, user: null, userId: null, isAuthenticated: false, isLoading: false, userRole: null, errorMsg: &quot;&quot;, &#125;; case CLEAR_ERROR_REQUEST: return &#123; ...state, errorMsg: null, &#125;; case CLEAR_ERROR_SUCCESS: return &#123; ...state, errorMsg: null, &#125;; case CLEAR_ERROR_FAILURE: return &#123; ...state, errorMsg: null, &#125;; default: return state; &#125;&#125;;export default authReducer; import &#123; all, put &#125; from &quot;@redux-saga/core/effects&quot;;import axios from &quot;axios&quot;;import &#123; call, fork, takeEvery &#125; from &quot;redux-saga/effects&quot;;import &#123; LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS, LOGOUT_REQUEST,&#125; from &quot;../types&quot;;const loginUserAPI = (loginData) =&gt; &#123; console.log(loginData, &quot;loginData&quot;); const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; return axios.post(&quot;api/auth&quot;, loginData, config);&#125;;function* loginUser(action) &#123; try &#123; const result = yield call(loginUserAPI, action.payload); console.log(result); yield put(&#123; type: LOGIN_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: LOGIN_FAILURE, payload: e.response, &#125;); &#125;&#125;function* logout(action) &#123; try &#123; const result = yield call(loginUserAPI, action.payload); console.log(result); yield put(&#123; type: LOGIN_SUCCESS, &#125;); &#125; catch (e) &#123; yield put(&#123; type: LOGIN_FAILURE, &#125;); console.log(e); &#125;&#125;function* watchLoginUser() &#123; yield takeEvery(LOGIN_REQUEST, loginUser);&#125;function* watchLogout() &#123; yield takeEvery(LOGOUT_REQUEST, logout);&#125;export default function* authSaga() &#123; yield all([fork(watchLoginUser), fork(watchLogout)]);&#125; import React, &#123; useCallback, useEffect, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; Link &#125; from &quot;react-router-dom&quot;;import &#123; Collapse, Container, Nav, Navbar, NavbarToggler &#125; from &quot;reactstrap&quot;;import &#123; LOGOUT_REQUEST &#125; from &quot;../redux/types&quot;;import LoginModal from &quot;./auth/LoginModal&quot;;const AppNavbar = () =&gt; &#123; const [isOpen, setIsOpen] = useState(false); const &#123; isAuthenticated, user, userRole &#125; = useSelector( (state) =&gt; state.auth ); console.log(userRole, &quot;UserRole&quot;); const dispatch = useDispatch(); const onLogout = useCallback(() =&gt; &#123; dispatch(&#123; type: LOGOUT_REQUEST, &#125;); &#125;, [dispatch]); useEffect(() =&gt; &#123; setIsOpen(false); &#125;, [user]); const handleToggle = () =&gt; &#123; setIsOpen(!isOpen); &#125;; return ( &lt;div&gt; &lt;Navbar color=&quot;dark&quot; dark expand=&quot;lg&quot; className=&quot;sticky-top&quot;&gt; &lt;Container&gt; &lt;Link to=&quot;/&quot; className=&quot;text-white text-decoration-none&quot;&gt; Victorì˜ ë¸”ë¡œê·¸ &lt;/Link&gt; &lt;NavbarToggler onClick=&#123;handleToggle&#125; /&gt; &lt;Collapse isOpen=&#123;isOpen&#125; navbar&gt; &lt;Nav className=&quot;ml-auto d-flex justify-content-around&quot; navbar&gt; &#123;isAuthenticated ? ( &lt;h1 className=&quot;text-white&quot;&gt;authLink&lt;/h1&gt; ) : ( &lt;LoginModal /&gt; )&#125; &lt;/Nav&gt; &lt;/Collapse&gt; &lt;/Container&gt; &lt;/Navbar&gt; &lt;/div&gt; );&#125;;export default AppNavbar;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2","slug":"react/react-blog/react-blog-07-login","date":"2021-09-06T01:10:40.000Z","updated":"2024-11-23T16:51:42.837Z","comments":true,"path":"2021/09/06/react/react-blog/react-blog-07-login/","link":"","permalink":"https://ckck803.github.io/2021/09/06/react/react-blog/react-blog-07-login/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2import React, &#123; useEffect, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; NavLink &#125; from &quot;react-router-dom&quot;;import &#123; Alert, Button, Form, FormGroup, Input, Label, Modal, ModalBody, ModalHeader,&#125; from &quot;reactstrap&quot;;import &#123; CLEAR_ERROR_REQUEST, LOGIN_REQUEST &#125; from &quot;../../redux/types&quot;;const LoginModal = () =&gt; &#123; const [modal, setModal] = useState(false); const [localMsg, setLocalMsg] = useState(&quot;&quot;); const [form, setValues] = useState(&#123; email: &quot;&quot;, password: &quot;&quot;, &#125;); const dispatch = useDispatch(); const &#123; errorMsg &#125; = useSelector((state) =&gt; state.auth); useEffect(() =&gt; &#123; try &#123; setLocalMsg(errorMsg); &#125; catch (e) &#123; console.log(e); &#125; &#125;, [errorMsg]); const handleToggle = () =&gt; &#123; dispatch(&#123; type: CLEAR_ERROR_REQUEST, &#125;); setModal(!modal); &#125;; const onChange = (e) =&gt; &#123; setValues(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;; const onSubmit = (e) =&gt; &#123; e.preventDefault(); const &#123; email, password &#125; = form; const user = &#123; email, password &#125;; console.log(user); dispatch(&#123; type: LOGIN_REQUEST, data: user, &#125;); &#125;; return ( &lt;div&gt; &lt;NavLink onClick=&#123;handleToggle&#125; href=&quot;#&quot;&gt; Login &lt;/NavLink&gt; &lt;Modal isOpen=&#123;modal&#125; toggle=&#123;handleToggle&#125;&gt; &lt;ModalHeader toggle=&#123;handleToggle&#125;&gt;Login&lt;/ModalHeader&gt; &lt;ModalBody&gt; &#123;localMsg ? &lt;Alert color=&quot;danger&quot;&gt;&#123;localMsg&#125;&lt;/Alert&gt; : null&#125; &lt;Form&gt; &lt;FormGroup&gt; &lt;Label for=&quot;email&quot;&gt;Email&lt;/Label&gt; &lt;Input type=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;Label for=&quot;passowrd&quot;&gt;Passowrd&lt;/Label&gt; &lt;Input type=&quot;passowrd&quot; name=&quot;passowrd&quot; id=&quot;passowrd&quot; placeholder=&quot;Passowrd&quot; onChange=&#123;onChange&#125; /&gt; &lt;Button color=&quot;dark&quot; style=&#123;&#123; marginTop: &quot;2rem&quot; &#125;&#125; block /&gt; &lt;/FormGroup&gt; &lt;/Form&gt; &lt;/ModalBody&gt; &lt;/Modal&gt; &lt;/div&gt; );&#125;;export default LoginModal;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2import React, &#123; useEffect, useState &#125; from &quot;react&quot;;import &#123; useDispatch, useSelector &#125; from &quot;react-redux&quot;;import &#123; NavLink &#125; from &quot;react-router-dom&quot;;import &#123; Alert, Button, Form, FormGroup, Input, Label, Modal, ModalBody, ModalHeader,&#125; from &quot;reactstrap&quot;;import &#123; CLEAR_ERROR_REQUEST, LOGIN_REQUEST &#125; from &quot;../../redux/types&quot;;const LoginModal = () =&gt; &#123; const [modal, setModal] = useState(false); const [localMsg, setLocalMsg] = useState(&quot;&quot;); const [form, setValues] = useState(&#123; email: &quot;&quot;, password: &quot;&quot;, &#125;); const dispatch = useDispatch(); const &#123; errorMsg &#125; = useSelector((state) =&gt; state.auth); useEffect(() =&gt; &#123; try &#123; setLocalMsg(errorMsg); &#125; catch (e) &#123; console.log(e); &#125; &#125;, [errorMsg]); const handleToggle = () =&gt; &#123; dispatch(&#123; type: CLEAR_ERROR_REQUEST, &#125;); setModal(!modal); &#125;; const onChange = (e) =&gt; &#123; setValues(&#123; ...form, [e.target.name]: e.target.value, &#125;); &#125;; const onSubmit = (e) =&gt; &#123; e.preventDefault(); const &#123; email, password &#125; = form; const user = &#123; email, password &#125;; console.log(user); dispatch(&#123; type: LOGIN_REQUEST, data: user, &#125;); &#125;; return ( &lt;div&gt; &lt;NavLink onClick=&#123;handleToggle&#125; href=&quot;#&quot;&gt; Login &lt;/NavLink&gt; &lt;Modal isOpen=&#123;modal&#125; toggle=&#123;handleToggle&#125;&gt; &lt;ModalHeader toggle=&#123;handleToggle&#125;&gt;Login&lt;/ModalHeader&gt; &lt;ModalBody&gt; &#123;localMsg ? &lt;Alert color=&quot;danger&quot;&gt;&#123;localMsg&#125;&lt;/Alert&gt; : null&#125; &lt;Form&gt; &lt;FormGroup&gt; &lt;Label for=&quot;email&quot;&gt;Email&lt;/Label&gt; &lt;Input type=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot; placeholder=&quot;Email&quot; onChange=&#123;onChange&#125; /&gt; &lt;Label for=&quot;passowrd&quot;&gt;Passowrd&lt;/Label&gt; &lt;Input type=&quot;passowrd&quot; name=&quot;passowrd&quot; id=&quot;passowrd&quot; placeholder=&quot;Passowrd&quot; onChange=&#123;onChange&#125; /&gt; &lt;Button color=&quot;dark&quot; style=&#123;&#123; marginTop: &quot;2rem&quot; &#125;&#125; block /&gt; &lt;/FormGroup&gt; &lt;/Form&gt; &lt;/ModalBody&gt; &lt;/Modal&gt; &lt;/div&gt; );&#125;;export default LoginModal;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1","slug":"react/react-blog/react-blog-06-login","date":"2021-09-05T14:10:40.000Z","updated":"2024-11-23T16:51:42.687Z","comments":true,"path":"2021/09/05/react/react-blog/react-blog-06-login/","link":"","permalink":"https://ckck803.github.io/2021/09/05/react/react-blog/react-blog-06-login/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1import &#123; all, put &#125; from &quot;@redux-saga/core/effects&quot;;import axios from &quot;axios&quot;;import &#123; takeEvery &#125; from &quot;redux-saga&quot;;import &#123; call, fork &#125; from &quot;redux-saga/effects&quot;;import &#123; LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS &#125; from &quot;../types&quot;;const loginUserAPI = (loginData) =&gt; &#123; console.log(loginData, &quot;loginData&quot;); const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; return axios.post(&quot;api/auth&quot;, loginData, config);&#125;;function* loginUser(action) &#123; try &#123; const result = yield call(loginUserAPI, action.payload); console.log(result); yield put(&#123; ytpe: LOGIN_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: LOGIN_FAILURE, payload: e.response, &#125;); &#125;&#125;function* watchLoginUser() &#123; yield takeEvery(LOGIN_REQUEST, loginUser);&#125;export default function* authSaga()&#123; yield all([ fork(watchLoginUser) ])&#125;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1import &#123; all, put &#125; from &quot;@redux-saga/core/effects&quot;;import axios from &quot;axios&quot;;import &#123; takeEvery &#125; from &quot;redux-saga&quot;;import &#123; call, fork &#125; from &quot;redux-saga/effects&quot;;import &#123; LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS &#125; from &quot;../types&quot;;const loginUserAPI = (loginData) =&gt; &#123; console.log(loginData, &quot;loginData&quot;); const config = &#123; headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;, &#125;; return axios.post(&quot;api/auth&quot;, loginData, config);&#125;;function* loginUser(action) &#123; try &#123; const result = yield call(loginUserAPI, action.payload); console.log(result); yield put(&#123; ytpe: LOGIN_SUCCESS, payload: result.data, &#125;); &#125; catch (e) &#123; yield put(&#123; type: LOGIN_FAILURE, payload: e.response, &#125;); &#125;&#125;function* watchLoginUser() &#123; yield takeEvery(LOGIN_REQUEST, loginUser);&#125;export default function* authSaga()&#123; yield all([ fork(watchLoginUser) ])&#125;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸°","slug":"react/react-blog/react-blog-05-reudx-setting","date":"2021-09-05T13:10:40.000Z","updated":"2024-11-23T16:51:42.992Z","comments":true,"path":"2021/09/05/react/react-blog/react-blog-05-reudx-setting/","link":"","permalink":"https://ckck803.github.io/2021/09/05/react/react-blog/react-blog-05-reudx-setting/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸°//LOGINexport const LOGIN_REQUEST = &quot;LOGIN_REQUEST&quot;;export const LOGIN_SUCCESS = &quot;LOGIN_SUCCESS&quot;;export const LOGIN_FAILURE = &quot;LOGIN_FAILURE&quot;;// CLEAR ERRORexport const CLEAR_ERROR_REQUEST = &quot;CLEAR_REQUEST&quot;;export const CLEAR_ERROR_SUCCESS = &quot;CLEAR_SUCCESS&quot;;export const CLEAR_ERROR_FAILURE = &quot;CLEAR_FAILURE&quot;; import &#123; LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILURE, CLEAR_ERROR_REQUEST, CLEAR_ERROR_SUCCESS, CLEAR_ERROR_FAILURE,&#125; from &quot;../types&quot;;const initialState = &#123; token: localStorage.getItem(&quot;token&quot;), isAuthenticated: null, isLoading: false, user: &quot;&quot;, userId: &quot;&quot;, userName: &quot;&quot;, userRole: &quot;&quot;, errorMsg: &quot;&quot;, successMsg: &quot;&quot;,&#125;;const authReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case LOGIN_REQUEST: return &#123; ...state, errorMsg: &quot;&quot;, &#125;; case LOGIN_SUCCESS: localStorage.setItem(&quot;token&quot;, action.payload.token); return &#123; ...state, ...action.payload, isAuthenticated: true, isLoading: false, userId: action.payload.user.id, userRole: action.payload.user.role, errorMsg: &quot;&quot;, &#125;; case LOGIN_FAILURE: localStorage.removeItem(&quot;token&quot;); return &#123; ...state, ...action.payload, token: null, user: null, userId: null, userRole: null, errorMsg: action.payload.data.msg, &#125;; case CLEAR_ERROR_REQUEST: return &#123; ...state, errorMsg: null, &#125;; case CLEAR_ERROR_SUCCESS: return &#123; ...state, errorMsg: null, &#125;; case CLEAR_ERROR_FAILURE: return &#123; ...state, errorMsg: null, &#125;; default: return state; &#125;&#125;;export default authReducer;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸°//LOGINexport const LOGIN_REQUEST = &quot;LOGIN_REQUEST&quot;;export const LOGIN_SUCCESS = &quot;LOGIN_SUCCESS&quot;;export const LOGIN_FAILURE = &quot;LOGIN_FAILURE&quot;;// CLEAR ERRORexport const CLEAR_ERROR_REQUEST = &quot;CLEAR_REQUEST&quot;;export const CLEAR_ERROR_SUCCESS = &quot;CLEAR_SUCCESS&quot;;export const CLEAR_ERROR_FAILURE = &quot;CLEAR_FAILURE&quot;; import &#123; LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILURE, CLEAR_ERROR_REQUEST, CLEAR_ERROR_SUCCESS, CLEAR_ERROR_FAILURE,&#125; from &quot;../types&quot;;const initialState = &#123; token: localStorage.getItem(&quot;token&quot;), isAuthenticated: null, isLoading: false, user: &quot;&quot;, userId: &quot;&quot;, userName: &quot;&quot;, userRole: &quot;&quot;, errorMsg: &quot;&quot;, successMsg: &quot;&quot;,&#125;;const authReducer = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case LOGIN_REQUEST: return &#123; ...state, errorMsg: &quot;&quot;, &#125;; case LOGIN_SUCCESS: localStorage.setItem(&quot;token&quot;, action.payload.token); return &#123; ...state, ...action.payload, isAuthenticated: true, isLoading: false, userId: action.payload.user.id, userRole: action.payload.user.role, errorMsg: &quot;&quot;, &#125;; case LOGIN_FAILURE: localStorage.removeItem(&quot;token&quot;); return &#123; ...state, ...action.payload, token: null, user: null, userId: null, userRole: null, errorMsg: action.payload.data.msg, &#125;; case CLEAR_ERROR_REQUEST: return &#123; ...state, errorMsg: null, &#125;; case CLEAR_ERROR_SUCCESS: return &#123; ...state, errorMsg: null, &#125;; case CLEAR_ERROR_FAILURE: return &#123; ...state, errorMsg: null, &#125;; default: return state; &#125;&#125;;export default authReducer;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸°","slug":"react/react-blog/react-blog-04-navbar","date":"2021-09-05T12:10:40.000Z","updated":"2024-11-23T16:51:42.763Z","comments":true,"path":"2021/09/05/react/react-blog/react-blog-04-navbar/","link":"","permalink":"https://ckck803.github.io/2021/09/05/react/react-blog/react-blog-04-navbar/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸°import React from &quot;react&quot;;import &#123; Link &#125; from &quot;react-router-dom&quot;;import &#123; Collapse, Container, Nav, Navbar, NavbarToggler &#125; from &quot;reactstrap&quot;;const AppNavbar = () =&gt; &#123; return ( &lt;div&gt; &lt;Navbar color=&quot;dark&quot; dark expand=&quot;lg&quot; className=&quot;sticky-top&quot;&gt; &lt;Container&gt; &lt;Link to=&quot;/&quot; className=&quot;text-white text-decoration-none&quot;&gt; Victorì˜ ë¸”ë¡œê·¸ &lt;/Link&gt; &lt;NavbarToggler /&gt; &lt;Collapse isOpen=&#123;true&#125; navbar&gt; &lt;Nav className=&quot;ml-auto d-flex justify-content-around&quot; navbar&gt; &#123;true ? ( &lt;h1 className=&quot;text-white&quot;&gt;authLink&lt;/h1&gt; ) : ( &lt;h1 className=&quot;text-white&quot;&gt;gestLink&lt;/h1&gt; )&#125; &lt;/Nav&gt; &lt;/Collapse&gt; &lt;/Container&gt; &lt;/Navbar&gt; &lt;/div&gt; );&#125;;export default AppNavbar; import React, &#123; Fragment &#125; from &quot;react&quot;;import Header from &quot;../components/Header&quot;;import Footer from &quot;../components/Footer&quot;;import AppNavbar from &quot;../components/AppNavbar&quot;;const MyRouter = () =&gt; ( &lt;Fragment&gt; &lt;AppNavbar /&gt; &lt;Header&gt; &lt;h1&gt;Hello Body&lt;/h1&gt; &lt;/Header&gt; &lt;Footer&gt;&lt;/Footer&gt; &lt;/Fragment&gt;);export default MyRouter;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸°import React from &quot;react&quot;;import &#123; Link &#125; from &quot;react-router-dom&quot;;import &#123; Collapse, Container, Nav, Navbar, NavbarToggler &#125; from &quot;reactstrap&quot;;const AppNavbar = () =&gt; &#123; return ( &lt;div&gt; &lt;Navbar color=&quot;dark&quot; dark expand=&quot;lg&quot; className=&quot;sticky-top&quot;&gt; &lt;Container&gt; &lt;Link to=&quot;/&quot; className=&quot;text-white text-decoration-none&quot;&gt; Victorì˜ ë¸”ë¡œê·¸ &lt;/Link&gt; &lt;NavbarToggler /&gt; &lt;Collapse isOpen=&#123;true&#125; navbar&gt; &lt;Nav className=&quot;ml-auto d-flex justify-content-around&quot; navbar&gt; &#123;true ? ( &lt;h1 className=&quot;text-white&quot;&gt;authLink&lt;/h1&gt; ) : ( &lt;h1 className=&quot;text-white&quot;&gt;gestLink&lt;/h1&gt; )&#125; &lt;/Nav&gt; &lt;/Collapse&gt; &lt;/Container&gt; &lt;/Navbar&gt; &lt;/div&gt; );&#125;;export default AppNavbar; import React, &#123; Fragment &#125; from &quot;react&quot;;import Header from &quot;../components/Header&quot;;import Footer from &quot;../components/Footer&quot;;import AppNavbar from &quot;../components/AppNavbar&quot;;const MyRouter = () =&gt; ( &lt;Fragment&gt; &lt;AppNavbar /&gt; &lt;Header&gt; &lt;h1&gt;Hello Body&lt;/h1&gt; &lt;/Header&gt; &lt;Footer&gt;&lt;/Footer&gt; &lt;/Fragment&gt;);export default MyRouter;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸°","slug":"react/react-blog/react-blog-03-header","date":"2021-09-05T11:10:40.000Z","updated":"2024-11-23T16:51:40.748Z","comments":true,"path":"2021/09/05/react/react-blog/react-blog-03-header/","link":"","permalink":"https://ckck803.github.io/2021/09/05/react/react-blog/react-blog-03-header/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸°import React from &quot;react&quot;;import &#123; Row, Col &#125; from &quot;reactstrap&quot;;const Header = () =&gt; &#123; return ( &lt;div id=&quot;page-header&quot;&gt; &lt;Row&gt; &lt;Col md=&quot;6&quot; sm=&quot;auto&quot; className=&quot;text-center m-auto&quot;&gt; &lt;h1&gt;Read Our Blog&lt;/h1&gt; &lt;p&gt;Victorì˜ ì‚¬ì´ë“œ ë¸”ë¡œê·¸ ì…ë‹ˆë‹¤.&lt;/p&gt; &lt;/Col&gt; &lt;/Row&gt; &lt;/div&gt; );&#125;;export default Header; #main-footer&#123; background: #343a40; color:#fff;&#125;#page-header&#123; height:200px; background: url(./img/free-image.jpeg); background-position: 54% 94%; background-attachment: fixed; color: #fff; border-bottom: 1px #eee solid; padding-top: 60px;&#125;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸°import React from &quot;react&quot;;import &#123; Row, Col &#125; from &quot;reactstrap&quot;;const Header = () =&gt; &#123; return ( &lt;div id=&quot;page-header&quot;&gt; &lt;Row&gt; &lt;Col md=&quot;6&quot; sm=&quot;auto&quot; className=&quot;text-center m-auto&quot;&gt; &lt;h1&gt;Read Our Blog&lt;/h1&gt; &lt;p&gt;Victorì˜ ì‚¬ì´ë“œ ë¸”ë¡œê·¸ ì…ë‹ˆë‹¤.&lt;/p&gt; &lt;/Col&gt; &lt;/Row&gt; &lt;/div&gt; );&#125;;export default Header; #main-footer&#123; background: #343a40; color:#fff;&#125;#page-header&#123; height:200px; background: url(./img/free-image.jpeg); background-position: 54% 94%; background-attachment: fixed; color: #fff; border-bottom: 1px #eee solid; padding-top: 60px;&#125;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸°","slug":"react/react-blog/react-blog-02-footer","date":"2021-09-04T11:10:40.000Z","updated":"2024-11-23T16:50:29.083Z","comments":true,"path":"2021/09/04/react/react-blog/react-blog-02-footer/","link":"","permalink":"https://ckck803.github.io/2021/09/04/react/react-blog/react-blog-02-footer/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸°import React from &quot;react&quot;;import &#123; Row, Col &#125; from &quot;reactstrap&quot;;const Footer = () =&gt; &#123; const thisYear = () =&gt; &#123; const year = new Date().getFullYear(); return year; &#125;; return ( &lt;div id=&quot;main-footer&quot; className=&quot;text-center m-center p-2&quot;&gt; &lt;Row&gt; &lt;Col&gt; &lt;p&gt; Copyright Copy &lt;span&gt;&#123;thisYear()&#125;&lt;/span&gt; &lt;/p&gt; &lt;/Col&gt; &lt;/Row&gt; &lt;/div&gt; );&#125;;export default Footer; íŒ¨í‚¤ì§€ ì„¤ì¹˜ npm install node-sass sass-loaderyarn add node-sass sass-loader #main-footer&#123; background: #343a40; color:#fff;&#125; import React from &quot;react&quot;import &#123; Provider &#125; from &#x27;react-redux&#x27;import &#123; ConnectedRouter &#125; from &#x27;connected-react-router&#x27;import store, &#123; history &#125; from &quot;./store&quot;import MyRouter from &#x27;./routes/Router&#x27;import &quot;bootstrap/dist/css/bootstrap.min.css&quot;;import &quot;./assets/custom.scss&quot;const App = () =&gt; &#123; return ( &lt;Provider store=&#123;store&#125;&gt; &lt;ConnectedRouter history=&#123;history&#125;&gt; &lt;MyRouter /&gt; &lt;/ConnectedRouter&gt; &lt;/Provider&gt; );&#125;export default App;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸°import React from &quot;react&quot;;import &#123; Row, Col &#125; from &quot;reactstrap&quot;;const Footer = () =&gt; &#123; const thisYear = () =&gt; &#123; const year = new Date().getFullYear(); return year; &#125;; return ( &lt;div id=&quot;main-footer&quot; className=&quot;text-center m-center p-2&quot;&gt; &lt;Row&gt; &lt;Col&gt; &lt;p&gt; Copyright Copy &lt;span&gt;&#123;thisYear()&#125;&lt;/span&gt; &lt;/p&gt; &lt;/Col&gt; &lt;/Row&gt; &lt;/div&gt; );&#125;;export default Footer; íŒ¨í‚¤ì§€ ì„¤ì¹˜ npm install node-sass sass-loaderyarn add node-sass sass-loader #main-footer&#123; background: #343a40; color:#fff;&#125; import React from &quot;react&quot;import &#123; Provider &#125; from &#x27;react-redux&#x27;import &#123; ConnectedRouter &#125; from &#x27;connected-react-router&#x27;import store, &#123; history &#125; from &quot;./store&quot;import MyRouter from &#x27;./routes/Router&#x27;import &quot;bootstrap/dist/css/bootstrap.min.css&quot;;import &quot;./assets/custom.scss&quot;const App = () =&gt; &#123; return ( &lt;Provider store=&#123;store&#125;&gt; &lt;ConnectedRouter history=&#123;history&#125;&gt; &lt;MyRouter /&gt; &lt;/ConnectedRouter&gt; &lt;/Provider&gt; );&#125;export default App;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸°","slug":"react/react-blog/react-blog-01-setting","date":"2021-09-03T11:10:40.000Z","updated":"2024-11-23T16:49:57.152Z","comments":true,"path":"2021/09/03/react/react-blog/react-blog-01-setting/","link":"","permalink":"https://ckck803.github.io/2021/09/03/react/react-blog/react-blog-01-setting/","excerpt":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸°yarn add axios redux react-redux redux-saga react-router-dom connected-react-router dotenv bootstrap reactstrap Root Reducer ìƒì„±&#x2F;src&#x2F;redux&#x2F;reducers&#x2F;index.js import &#123; connectRouter &#125; from &#x27;connected-react-router&#x27;;import &#123; combineReducers &#125; from &quot;redux&quot;;// Root Reducerë¥¼ ìƒì„±í•œë‹¤.const createRootReducer = (history) =&gt; combineReducers(&#123; router: connectRouter(history),&#125;);export default createRootReducer; Root Saga ìƒì„±&#x2F;src&#x2F;redux&#x2F;sagas&#x2F;index.js import &#123; all &#125; from &#x27;redux-saga/effects&#x27;;// Root Sagaë¥¼ ìƒì„±í•œë‹¤.export default function* rootSaga() &#123; yield all([]);&#125;","text":"ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 15 - Post Card List ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 14 - Post Card List ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 13 - ë¼ìš°íŠ¸ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 12 - Loading ë§Œë“¤ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 11 - íšŒì›ê°€ì… ë¦¬ë•ìŠ¤ ì‘ì—… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 10 - íšŒì›ê°€ì… 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 9 - íšŒì›ê°€ì… ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 8 - ë¡œê·¸ì¸ &amp; ë¡œê·¸ì•„ì›ƒ ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 7 - Login Modal ë§Œë“¤ê¸° 2 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 6 - Login Modal ë§Œë“¤ê¸° 1 ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 5 - ë¦¬ë•ìŠ¤ ì„¸íŒ…í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 4 - Navbar ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 3 - Header ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 2 - Footer ì‘ì„±í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸° ë¦¬ì—‘íŠ¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° 1 - ì´ˆê¸° setting í•˜ê¸°yarn add axios redux react-redux redux-saga react-router-dom connected-react-router dotenv bootstrap reactstrap Root Reducer ìƒì„±&#x2F;src&#x2F;redux&#x2F;reducers&#x2F;index.js import &#123; connectRouter &#125; from &#x27;connected-react-router&#x27;;import &#123; combineReducers &#125; from &quot;redux&quot;;// Root Reducerë¥¼ ìƒì„±í•œë‹¤.const createRootReducer = (history) =&gt; combineReducers(&#123; router: connectRouter(history),&#125;);export default createRootReducer; Root Saga ìƒì„±&#x2F;src&#x2F;redux&#x2F;sagas&#x2F;index.js import &#123; all &#125; from &#x27;redux-saga/effects&#x27;;// Root Sagaë¥¼ ìƒì„±í•œë‹¤.export default function* rootSaga() &#123; yield all([]);&#125; Store ë§Œë“¤ì–´ì£¼ê¸°src&#x2F;store.js import &#123; createStore, compose, applyMiddleware &#125; from &#x27;redux&#x27;;import createSagaMiddleware from &#x27;@redux-saga&#x27;;import &#123; createBrowserHistory &#125; from &#x27;history&#x27;;import &#123; routerMiddleware &#125; from &#x27;connected-react-router&#x27;;import createRootReducer from &#x27;./redux/reducers&#x27;;import rootSaga from &#x27;./redux/sagas&#x27;;export const history = createBrowserHistory();const sagaMiddleware = createSagaMiddleware();const initialState = &#123;&#125;;const middleware = [sagaMiddleware, routerMiddleware(history)];const devtools = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__const composeEnhancer = process.env.NODE_ENV === &#x27;production&#x27; ? compose : devtools || compose;const store = createStore( createRootReducer(history), initialState, composeEnhancer(applyMiddleware(...middleware)))sagaMiddleware.run(rootSaga);export default store; Router ìƒì„±í•˜ê¸°src&#x2F;routes&#x2F;Router.js import React, &#123; Fragment &#125; from &#x27;react&#x27;import Header from &#x27;../components/Header&#x27;import Footer from &#x27;../components/Footer&#x27;const MyRouter = () =&gt; &#123; &lt;Fragment&gt; &lt;Header&gt; &lt;h1&gt;Hello Body&lt;/h1&gt; &lt;/Header&gt; &lt;/Fragment&gt;&#125;export default MyRouter; Reduxì™€ Router ì ìš©í•´ì£¼ê¸°src&#x2F;app.js import React from &#x27;react&#x27;import &#123; Provider &#125; from &#x27;react-redux&#x27;import &#123; ConnectedRouter &#125; from &#x27;connected-react-router&#x27;import store, &#123; history &#125; from &#x27;./store&#x27;import MyRouter from &#x27;./routes/Router&#x27;import &quot;bootstrap/dist/css/bootstrap.min.css&quot;;import &#x27;./assets/custom.scss&#x27;function App() &#123; return ( &lt;Provider store=&#123;store&#125;&gt; &lt;ConnectedRouter history=&#123;history&#125;&gt; &lt;MyRouter /&gt; &lt;/ConnectedRouter&gt; &lt;/Provider&gt; );&#125;export default App;","categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì¹´ë“œ ì§ ë§ì¶”ê¸° (Cpp)","slug":"algorithm/programmers/ê²½ìš°ì˜ìˆ˜/72415-ì¹´ë“œì§ë§ì¶”ê¸°-Cpp","date":"2021-08-26T11:10:40.000Z","updated":"2024-11-28T13:59:32.703Z","comments":true,"path":"2021/08/26/algorithm/programmers/ê²½ìš°ì˜ìˆ˜/72415-ì¹´ë“œì§ë§ì¶”ê¸°-Cpp/","link":"","permalink":"https://ckck803.github.io/2021/08/26/algorithm/programmers/%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98/72415-%EC%B9%B4%EB%93%9C%EC%A7%9D%EB%A7%9E%EC%B6%94%EA%B8%B0-Cpp/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/72415 ë¬¸ì œ í’€ì´ì¢Œí‘œë¥¼ ì´ë™í•  ë•Œ ê³ ë ¤í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ 2ê°€ì§€ê°€ ìˆë‹¤ ì²« ë²ˆì§¸ ìƒ, í•˜, ì¢Œ, ìš° í•œì¹¸ì”© ì´ë™í•˜ëŠ” ê²½ìš°ì™€ í•œë²ˆì— ì¹´ë“œê°€ ìˆëŠ” ê³³ì´ë‚˜ ë²½ìª½ìœ¼ë¡œ ë°”ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°ë‹¤.ì¹´ë“œë¥¼ ì°¾ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“œëŠ”ë° ìˆì–´ ê³ ë ¤í•´ì•¼ í•˜ëŠ” ì‚¬í•­ì´ 2ê°€ì§€ê°€ ìˆë‹¤. ì²«ë²ˆì§¸ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì¹´ë“œë¥¼ ì°¾ì•„ê°€ëŠ” ê²½ìš°ì˜ ìˆ˜ì™€ ê°™ì€ ìˆ«ìë¥¼ ì°¾ëŠ” ìˆœì„œë¥¼ ì •í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë‹¤.ì˜ˆë¥¼ ë“¤ì–´ 1 -&gt; 2 -&gt; 3 ì˜ ìˆœì„œë¡œ ì¹´ë“œë¥¼ ì°¾ì•„ê°„ë‹¤ê³  í•˜ë©´ (1 -&gt; 1 ì§ ì°¾ëŠ” ìˆœì„œ) -&gt; (2 -&gt; 2 ì§ ì°¾ëŠ” ìˆœì„œ) -&gt; (3 -&gt; 3 ì§ ì°¾ëŠ” ìˆœì„œ) ë¥¼ ê³ ë ¤í•´ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ë‹¤. ê²½ìš°ì˜ ìˆ˜ê°€ ë§Œë“¤ì–´ì§€ë©´ ê° ìˆœì„œì— ë§ê²Œ BFSë¥¼ ì´ìš©í•´ ìµœë‹¨ê±°ë¦¬ë¥¼ êµ¬í•´ì£¼ë©´ ëœë‹¤. ë‹¤ë§Œ, ì¹´ë“œëŠ” ì§ì„ ë§Œë‹¤ë©´ ì‚¬ë¼ì§€ë¯€ë¡œ ìµœë‹¨ ê±°ë¦¬ë¥¼ ì°¾ì„ ë•Œ board ì—ì„œ ì¹´ë“œê°€ ì‚¬ë¼ì¡ŒëŠ”ì§€ì— ëŒ€í•œ ì—¬ë¶€ë„ ê³ ë ¤í•˜ë©´ì„œ ì´ë™í•´ì¤˜ì•¼ í•œë‹¤. ê³ ë ¤ ì‚¬í•­ enterë¥¼ ëˆ„ë¥´ëŠ” ê²ƒë„ count 1ì„ ê°–ëŠ”ë‹¤. ì¹´ë“œ ë’¤ì§‘ëŠ” ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³„ì‚°í•´ì•¼ í•œë‹¤. 1, 2, 3 ì„œë¡œ ë‹¤ë¥¸ ì¹´ë“œë¥¼ ì°¾ì•„ê°€ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ì°¾ëŠ”ë‹¤. ê°ê°ì˜ ìˆœì„œë¥¼ ê³ ë ¤ í•˜ë¯€ë¡œ ìˆœì—´ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê°–ëŠ”ë‹¤. 1 -&gt; 1, 2 -&gt; 2, 3 -&gt; 3 ê°ê° ì§ì„ ë§Œë“œëŠ” ë°©í–¥ì´ ë‹¨ë°©í–¥ìœ¼ë¡œ ì •í•´ì§„ ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ë°˜ëŒ€ ë°©í–¥ì— ëŒ€í•´ì„œë„ ê³ ë ¤ì•  ì¤˜ì•¼ í•œë‹¤. ì¦‰, ìµœëŒ€ ê²½ìš°ì˜ ìˆ˜ëŠ” 6! * 2 ^ 6 ì´ëœë‹¤. ì´ë™í•  ë•Œ ì¹´ë“œê°€ ì‚¬ë¼ì¡ŒëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤. board ì—ì„œ ê° ì¹´ë“œì˜ ìœ„ì¹˜ ì°¾ê¸°int findCards(vector&lt;vector&lt;int&gt;&gt;&amp; board) &#123; int count = 0; for (int i = 0; i &lt; 4; i++) &#123; for (int j = 0; j &lt; 4; j++) &#123; int value = board[i][j]; if (value &gt; 0) &#123; cards[value].push_back(&#123;i, j&#125;); count++; &#125; &#125; &#125; return (count / 2);&#125; ì¹´ë“œë¥¼ ë’¤ì§‘ëŠ” ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ ì°¾ê¸°","text":"https://programmers.co.kr/learn/courses/30/lessons/72415 ë¬¸ì œ í’€ì´ì¢Œí‘œë¥¼ ì´ë™í•  ë•Œ ê³ ë ¤í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ 2ê°€ì§€ê°€ ìˆë‹¤ ì²« ë²ˆì§¸ ìƒ, í•˜, ì¢Œ, ìš° í•œì¹¸ì”© ì´ë™í•˜ëŠ” ê²½ìš°ì™€ í•œë²ˆì— ì¹´ë“œê°€ ìˆëŠ” ê³³ì´ë‚˜ ë²½ìª½ìœ¼ë¡œ ë°”ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°ë‹¤.ì¹´ë“œë¥¼ ì°¾ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“œëŠ”ë° ìˆì–´ ê³ ë ¤í•´ì•¼ í•˜ëŠ” ì‚¬í•­ì´ 2ê°€ì§€ê°€ ìˆë‹¤. ì²«ë²ˆì§¸ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì¹´ë“œë¥¼ ì°¾ì•„ê°€ëŠ” ê²½ìš°ì˜ ìˆ˜ì™€ ê°™ì€ ìˆ«ìë¥¼ ì°¾ëŠ” ìˆœì„œë¥¼ ì •í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë‹¤.ì˜ˆë¥¼ ë“¤ì–´ 1 -&gt; 2 -&gt; 3 ì˜ ìˆœì„œë¡œ ì¹´ë“œë¥¼ ì°¾ì•„ê°„ë‹¤ê³  í•˜ë©´ (1 -&gt; 1 ì§ ì°¾ëŠ” ìˆœì„œ) -&gt; (2 -&gt; 2 ì§ ì°¾ëŠ” ìˆœì„œ) -&gt; (3 -&gt; 3 ì§ ì°¾ëŠ” ìˆœì„œ) ë¥¼ ê³ ë ¤í•´ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ë‹¤. ê²½ìš°ì˜ ìˆ˜ê°€ ë§Œë“¤ì–´ì§€ë©´ ê° ìˆœì„œì— ë§ê²Œ BFSë¥¼ ì´ìš©í•´ ìµœë‹¨ê±°ë¦¬ë¥¼ êµ¬í•´ì£¼ë©´ ëœë‹¤. ë‹¤ë§Œ, ì¹´ë“œëŠ” ì§ì„ ë§Œë‹¤ë©´ ì‚¬ë¼ì§€ë¯€ë¡œ ìµœë‹¨ ê±°ë¦¬ë¥¼ ì°¾ì„ ë•Œ board ì—ì„œ ì¹´ë“œê°€ ì‚¬ë¼ì¡ŒëŠ”ì§€ì— ëŒ€í•œ ì—¬ë¶€ë„ ê³ ë ¤í•˜ë©´ì„œ ì´ë™í•´ì¤˜ì•¼ í•œë‹¤. ê³ ë ¤ ì‚¬í•­ enterë¥¼ ëˆ„ë¥´ëŠ” ê²ƒë„ count 1ì„ ê°–ëŠ”ë‹¤. ì¹´ë“œ ë’¤ì§‘ëŠ” ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³„ì‚°í•´ì•¼ í•œë‹¤. 1, 2, 3 ì„œë¡œ ë‹¤ë¥¸ ì¹´ë“œë¥¼ ì°¾ì•„ê°€ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ì°¾ëŠ”ë‹¤. ê°ê°ì˜ ìˆœì„œë¥¼ ê³ ë ¤ í•˜ë¯€ë¡œ ìˆœì—´ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê°–ëŠ”ë‹¤. 1 -&gt; 1, 2 -&gt; 2, 3 -&gt; 3 ê°ê° ì§ì„ ë§Œë“œëŠ” ë°©í–¥ì´ ë‹¨ë°©í–¥ìœ¼ë¡œ ì •í•´ì§„ ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ë°˜ëŒ€ ë°©í–¥ì— ëŒ€í•´ì„œë„ ê³ ë ¤ì•  ì¤˜ì•¼ í•œë‹¤. ì¦‰, ìµœëŒ€ ê²½ìš°ì˜ ìˆ˜ëŠ” 6! * 2 ^ 6 ì´ëœë‹¤. ì´ë™í•  ë•Œ ì¹´ë“œê°€ ì‚¬ë¼ì¡ŒëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤. board ì—ì„œ ê° ì¹´ë“œì˜ ìœ„ì¹˜ ì°¾ê¸°int findCards(vector&lt;vector&lt;int&gt;&gt;&amp; board) &#123; int count = 0; for (int i = 0; i &lt; 4; i++) &#123; for (int j = 0; j &lt; 4; j++) &#123; int value = board[i][j]; if (value &gt; 0) &#123; cards[value].push_back(&#123;i, j&#125;); count++; &#125; &#125; &#125; return (count / 2);&#125; ì¹´ë“œë¥¼ ë’¤ì§‘ëŠ” ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ ì°¾ê¸°void findAllOrderCase(int depth) &#123; if (depth == cardCount * 2) &#123; allOrderCase.push_back(oneOrderCase); return; &#125; for (int i = 1; i &lt; 7; i++) &#123; if (cards[i].size() &gt; 0 &amp;&amp; checkOrder[i] == false) &#123; pair&lt;int, int&gt; point1 = cards[i][0]; pair&lt;int, int&gt; point2 = cards[i][1]; checkOrder[i] = true; oneOrderCase[depth] = point1; oneOrderCase[depth + 1] = point2; findAllOrderCase(depth + 2); oneOrderCase[depth] = point2; oneOrderCase[depth + 1] = point1; findAllOrderCase(depth + 2); checkOrder[i] = false; &#125; &#125;&#125; í•œ ì ì—ì„œ ë‹¤ë¥¸ ì ê¹Œì§€ì˜ ìµœë‹¨ê±°ë¦¬ êµ¬í•˜ê¸°int bfs(vector&lt;vector&lt;int&gt;&gt;&amp; board, pair&lt;int, int&gt; startPoint, pair&lt;int, int&gt; endPoint) &#123; queue&lt;pair&lt;int, int&gt;&gt; q; q.push(&#123;startPoint.first, startPoint.second&#125;); int count = 0; while (!q.empty()) &#123; int q_size = q.size(); while (q_size--) &#123; int cntY = q.front().first; int cntX = q.front().second; q.pop(); if (cntY == endPoint.first &amp;&amp; cntX == endPoint.second) &#123; if (board[startPoint.first][startPoint.second] == board[endPoint.first][endPoint.second]) &#123; isDisappear[startPoint.first][startPoint.second] = true; isDisappear[endPoint.first][endPoint.second] = true; &#125; return count + 1; &#125; for (int i = 0; i &lt; 4; i++) &#123; int ny = cntY + dy[i]; int nx = cntX + dx[i]; if (0 &gt; ny || ny &gt;= 4 || 0 &gt; nx || nx &gt;= 4) &#123; continue; &#125; q.push(&#123;ny, nx&#125;); while (0 &lt;= (ny + dy[i]) &amp;&amp; (ny + dy[i]) &lt; 4 &amp;&amp; 0 &lt;= (nx + dx[i]) &amp;&amp; (nx + dx[i]) &lt; 4 &amp;&amp; (board[ny][nx] == 0 || isDisappear[ny][nx] == true)) &#123; ny += dy[i]; nx += dx[i]; &#125; q.push(&#123;ny, nx&#125;); &#125; &#125; count++; &#125; return count;&#125; ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;const int INF = 987654321;vector&lt;pair&lt;int, int&gt;&gt; cards[7];int cardCount = 0;bool checkCard[7];int dy[4] = &#123;1, -1, 0, 0&#125;;int dx[4] = &#123;0, 0, 1, -1&#125;;bool checkOrder[7];vector&lt;pair&lt;int, int&gt;&gt; oneOrderCase;vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt; allOrderCase;vector&lt;vector&lt;bool&gt;&gt; isDisappear;int findCards(vector&lt;vector&lt;int&gt;&gt;&amp; board) &#123; int count = 0; for (int i = 0; i &lt; 4; i++) &#123; for (int j = 0; j &lt; 4; j++) &#123; int value = board[i][j]; if (value &gt; 0) &#123; cards[value].push_back(&#123;i, j&#125;); count++; &#125; &#125; &#125; return (count / 2);&#125;void findAllOrderCase(int depth) &#123; if (depth == cardCount * 2) &#123; allOrderCase.push_back(oneOrderCase); return; &#125; for (int i = 1; i &lt; 7; i++) &#123; if (cards[i].size() &gt; 0 &amp;&amp; checkOrder[i] == false) &#123; pair&lt;int, int&gt; point1 = cards[i][0]; pair&lt;int, int&gt; point2 = cards[i][1]; checkOrder[i] = true; oneOrderCase[depth] = point1; oneOrderCase[depth + 1] = point2; findAllOrderCase(depth + 2); oneOrderCase[depth] = point2; oneOrderCase[depth + 1] = point1; findAllOrderCase(depth + 2); checkOrder[i] = false; &#125; &#125;&#125;int bfs(vector&lt;vector&lt;int&gt;&gt;&amp; board, pair&lt;int, int&gt; startPoint, pair&lt;int, int&gt; endPoint) &#123; queue&lt;pair&lt;int, int&gt;&gt; q; q.push(&#123;startPoint.first, startPoint.second&#125;); int count = 0; while (!q.empty()) &#123; int q_size = q.size(); while (q_size--) &#123; int cntY = q.front().first; int cntX = q.front().second; q.pop(); if (cntY == endPoint.first &amp;&amp; cntX == endPoint.second) &#123; if (board[startPoint.first][startPoint.second] == board[endPoint.first][endPoint.second]) &#123; isDisappear[startPoint.first][startPoint.second] = true; isDisappear[endPoint.first][endPoint.second] = true; &#125; return count + 1; &#125; for (int i = 0; i &lt; 4; i++) &#123; int ny = cntY + dy[i]; int nx = cntX + dx[i]; if (0 &gt; ny || ny &gt;= 4 || 0 &gt; nx || nx &gt;= 4) &#123; continue; &#125; q.push(&#123;ny, nx&#125;); while (0 &lt;= (ny + dy[i]) &amp;&amp; (ny + dy[i]) &lt; 4 &amp;&amp; 0 &lt;= (nx + dx[i]) &amp;&amp; (nx + dx[i]) &lt; 4 &amp;&amp; (board[ny][nx] == 0 || isDisappear[ny][nx] == true)) &#123; ny += dy[i]; nx += dx[i]; &#125; q.push(&#123;ny, nx&#125;); &#125; &#125; count++; &#125; return count;&#125;int solution(vector&lt;vector&lt;int&gt;&gt; board, int r, int c) &#123; int answer = 0; cardCount = findCards(board); oneOrderCase = vector&lt;pair&lt;int, int&gt;&gt;(cardCount * 2); findAllOrderCase(0); int minDist = INF; for (vector&lt;pair&lt;int, int&gt;&gt; points : allOrderCase) &#123; isDisappear = vector&lt;vector&lt;bool&gt;&gt;(4, vector&lt;bool&gt;(4, false)); pair&lt;int, int&gt; startPoint = &#123;r, c&#125;; int cntDist = 0; for (int i = 0; i &lt; points.size(); i++) &#123; pair&lt;int, int&gt; endPoint = points[i]; int value = bfs(board, startPoint, endPoint); cntDist += value; startPoint = endPoint; &#125; minDist = min(minDist, cntDist); &#125; answer = minDist; return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"}],"tags":[]},{"title":"Spring Data JPA - Auditing","slug":"spring/spring-data-jpa/10-spring-data-jpa-auditing","date":"2021-08-26T10:39:59.000Z","updated":"2024-02-26T15:37:30.325Z","comments":true,"path":"2021/08/26/spring/spring-data-jpa/10-spring-data-jpa-auditing/","link":"","permalink":"https://ckck803.github.io/2021/08/26/spring/spring-data-jpa/10-spring-data-jpa-auditing/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° ì°¸ê³ https://docs.spring.io/spring-data/jpa/docs/1.7.0.DATAJPA-580-SNAPSHOT/reference/html/auditing.html Spring Data JPA - Auditing(ê°ì‚¬) ë°ì´í„°ê°€ ì–¸ì œ ëˆ„êµ¬ì— ì˜í•´ì„œ ìƒì„±, ìˆ˜ì • ëëŠ”ì§€ ì¶”ì í•  í•„ìš”ê°€ ìˆëŠ”ë°Spring Data JPA ì—ì„œëŠ” ì‰½ê²Œ Audit ë¥¼ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë“¤ì„ ì œê³µí•œë‹¤. Spring Data JPA Auditing ì‚¬ìš©í•˜ê¸°EnableJpaAuditing ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ í”„ë¡œì íŠ¸ì— Auditing ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤. @SpringBootApplication@EnableJpaAuditingpublic class DataJpaApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DataJpaApplication.class, args); &#125; // ë°ì´í„°ê°€ ìƒì„± ë° ìˆ˜ì •ë  ë•Œ ìƒì„±í•œ ì‚¬ëŒê³¼ ìˆ˜ì •í•œ ì‚¬ëŒ ì •ë³´ë¥¼ ë„£ê¸° ìœ„í•œ Bean ì„ ë§Œë“¤ì–´ì¤€ë‹¤. @Bean public AuditorAware&lt;String&gt; auditorProvider()&#123; return () -&gt; Optional.of(UUID.randomUUID().toString()); &#125;&#125;","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° ì°¸ê³ https://docs.spring.io/spring-data/jpa/docs/1.7.0.DATAJPA-580-SNAPSHOT/reference/html/auditing.html Spring Data JPA - Auditing(ê°ì‚¬) ë°ì´í„°ê°€ ì–¸ì œ ëˆ„êµ¬ì— ì˜í•´ì„œ ìƒì„±, ìˆ˜ì • ëëŠ”ì§€ ì¶”ì í•  í•„ìš”ê°€ ìˆëŠ”ë°Spring Data JPA ì—ì„œëŠ” ì‰½ê²Œ Audit ë¥¼ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë“¤ì„ ì œê³µí•œë‹¤. Spring Data JPA Auditing ì‚¬ìš©í•˜ê¸°EnableJpaAuditing ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ í”„ë¡œì íŠ¸ì— Auditing ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤. @SpringBootApplication@EnableJpaAuditingpublic class DataJpaApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DataJpaApplication.class, args); &#125; // ë°ì´í„°ê°€ ìƒì„± ë° ìˆ˜ì •ë  ë•Œ ìƒì„±í•œ ì‚¬ëŒê³¼ ìˆ˜ì •í•œ ì‚¬ëŒ ì •ë³´ë¥¼ ë„£ê¸° ìœ„í•œ Bean ì„ ë§Œë“¤ì–´ì¤€ë‹¤. @Bean public AuditorAware&lt;String&gt; auditorProvider()&#123; return () -&gt; Optional.of(UUID.randomUUID().toString()); &#125;&#125; @EntityListeners(AuditingEntityListener.class) í•´ë‹¹ í´ë˜ìŠ¤ì— Auditing ê¸°ëŠ¥ì„ í¬í•¨ ì‹œí‚¨ë‹¤. CreatedDate : Entity ê°€ ìƒì„±ë  ë•Œ ì‹œê°„ì„ ìë™ìœ¼ë¡œ ì €ì¥í•œë‹¤. LastModifiedDate : Entityê°€ ìˆ˜ì •ë  ë•Œ ì‹œê°„ì„ ìë™ìœ¼ë¡œ ì €ì¥í•œë‹¤. CreatedBy : Entity ë¥¼ ìƒì„±í•œ ì£¼ì²´ë¥¼ ì €ì¥í•œë‹¤. LastModifiedBy : Entity ë¥¼ ìˆ˜ì •í•œ ì£¼ì²´ë¥¼ ì €ì¥í•œë‹¤. EntityListeners : JPA Entityì— ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ Callback ì„ ì²˜ë¦¬í•˜ê³  ì‹¤í–‰í•˜ëŠ” ë°©ë²• @EntityListeners(AuditingEntityListener.class)@MappedSuperclass@Getterpublic class BaseEntity &#123; @CreatedDate @Column(updatable = false) private LocalDateTime createdDate; @LastModifiedDate private LocalDateTime lastModifiedDate; @CreatedBy @Column(updatable = false) private String createdBy; @LastModifiedBy private String lastModifiedBy;&#125; Auditing ê¸°ëŠ¥ ì ìš©í•˜ê¸°@Entity@Setter@Getter@NoArgsConstructor(access = AccessLevel.PROTECTED)@ToString(of = &#123;&quot;id&quot;, &quot;username&quot;, &quot;age&quot;&#125;)@NamedEntityGraph(name = &quot;Member.all&quot;, attributeNodes = @NamedAttributeNode(&quot;team&quot;))public class Member extends BaseEntity&#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;member_id&quot;) private Long id; private String username; private int age; // ì—¬ëŸ¬ëª…ì˜ Memberê°€ í•œ íŒ€ì— ê°€ì… @ManyToOne(fetch = FetchType.LAZY) @JoinColumn(name = &quot;team_id&quot;) private Team team; public Member(String username)&#123; this.username = username; &#125; public Member(String username, int age, Team team) &#123; this.username = username; this.age = age; if (team != null) &#123; changeTeam(team); &#125; &#125; public Member(String username, int age) &#123; this.username = username; this.age = age; &#125; public void changeTeam(Team team)&#123; this.team = team; team.getMembers().add(this); &#125;&#125; @Entity@Setter@Getter@NoArgsConstructor(access= AccessLevel.PROTECTED)@ToString(of = &#123;&quot;id&quot;, &quot;name&quot;&#125;)public class Team extends BaseEntity&#123; @Id @GeneratedValue @Column(name = &quot;team_id&quot;) private Long id; private String name; // í•œ íŒ€ì— ì—¬ëŸ¬ëª…ì˜ íšŒì›ì´ ê°€ì…í•˜ëŠ” ê°œë… @OneToMany(mappedBy = &quot;team&quot;) private List&lt;Member&gt; members = new ArrayList&lt;&gt;(); public Team(String name) &#123; this.name = name; &#125;&#125; Spring Data JPA Auditing ì‚¬ìš©í•˜ê¸° ë°ì´í„° ì¶”ê°€ ë° ì‚­ì œì‹œ ì‚¬ìš©ì ì •ë³´ë¥¼ Auditing í•˜ê¸° ìœ„í•´ì„œëŠ” AuditorAware Bean ì´ í•„ìš”í•˜ë‹¤. @CreatedBy ì™€ @LastModifiedBy ìœ¼ë¡œ ì»¬ëŸ¼ì— ëª…ì‹œí•˜ë©´ ë°ì´í„° ìƒì„±, ë³€ê²½ì‹œ ì‚¬ìš©ì ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ë„£ì–´ì¤€ë‹¤. @SpringBootApplication@EnableJpaAuditingpublic class DataJpaApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DataJpaApplication.class, args); &#125; // ë°ì´í„°ê°€ ìƒì„± ë° ìˆ˜ì •ë  ë•Œ ìƒì„±í•œ ì‚¬ëŒê³¼ ìˆ˜ì •í•œ ì‚¬ëŒ ì •ë³´ë¥¼ ë„£ê¸° ìœ„í•œ Bean ì„ ë§Œë“¤ì–´ì¤€ë‹¤. @Bean public AuditorAware&lt;String&gt; auditorProvider()&#123; return () -&gt; Optional.of(UUID.randomUUID().toString()); &#125;&#125; AuditorAware ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•œ êµ¬í˜„ì²´ ìƒì„±public class AuditorAwareImpl implements AuditorAware&lt;String&gt; &#123; @Override public Optional&lt;String&gt; getCurrentAuditor() &#123; Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); if(authentication == null)&#123; return Optional.of(null); &#125; String username = authentication.getName(); return Optional.of(username); &#125;&#125; Config Class ì— AuditorAware Bean ì„ ë“±ë¡í•œë‹¤. @Configuration@EnableJpaAuditing@RequiredArgsConstructor@Slf4jpublic class JpaConfig &#123; @Bean public AuditorAware&lt;String&gt; auditorProvider()&#123; return new AuditorAwareImpl(); &#125;&#125; ëŒë‹¤ì‹ìœ¼ë¡œ ìƒì„±@Configuration@EnableJpaAuditing@RequiredArgsConstructor@Slf4jpublic class JpaConfig &#123; @Bean public AuditorAware&lt;String&gt; auditorProvider()&#123; return () -&gt; &#123; Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); if(authentication == null)&#123; return Optional.ofNullable(null); &#125; String username = authentication.getName(); return Optional.of(username); &#125;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"Spring Data JPA - Paging Request Paramater","slug":"spring/spring-data-jpa/09-spring-data-jpa-paging-web","date":"2021-08-26T09:39:59.000Z","updated":"2024-02-26T15:37:25.832Z","comments":true,"path":"2021/08/26/spring/spring-data-jpa/09-spring-data-jpa-paging-web/","link":"","permalink":"https://ckck803.github.io/2021/08/26/spring/spring-data-jpa/09-spring-data-jpa-paging-web/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° ì°¸ê³ https://docs.spring.io/spring-data/jpa/docs/1.7.0.DATAJPA-580-SNAPSHOT/reference/html/auditing.html Paging Request Paramater Page ì™€ Size ë¥¼ ì‚¬ìš©í•´ Paging ê³¼ ê´€ë ¨í•œ Request Parameter ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. Page Paging ëœ ë°ì´í„°ì˜ Page ë²ˆí˜¸ Size Paging í•  ë°ì´í„° í¬ê¸° Default Size &#x3D; 20 ì´ë‹¤. @GetMapping(&quot;/members&quot;)public Page&lt;Member&gt; list(Pageable pageable) &#123; Page&lt;Member&gt; page = memberRepository.findAll(pageable); return page;&#125; Paramater ë¥¼ ì´ìš©í•´ ìš”ì²­ ë³´ë‚´ê¸°","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° ì°¸ê³ https://docs.spring.io/spring-data/jpa/docs/1.7.0.DATAJPA-580-SNAPSHOT/reference/html/auditing.html Paging Request Paramater Page ì™€ Size ë¥¼ ì‚¬ìš©í•´ Paging ê³¼ ê´€ë ¨í•œ Request Parameter ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. Page Paging ëœ ë°ì´í„°ì˜ Page ë²ˆí˜¸ Size Paging í•  ë°ì´í„° í¬ê¸° Default Size &#x3D; 20 ì´ë‹¤. @GetMapping(&quot;/members&quot;)public Page&lt;Member&gt; list(Pageable pageable) &#123; Page&lt;Member&gt; page = memberRepository.findAll(pageable); return page;&#125; Paramater ë¥¼ ì´ìš©í•´ ìš”ì²­ ë³´ë‚´ê¸°# 0ë²ˆ í˜ì´ì§€ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë“¤ì„ ëª¨ë‘ ê°€ì ¸ì˜¨ë‹¤.http://localhost:8080/members?page=0# 1ë²ˆ í˜ì´ì§€ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë“¤ì„ ëª¨ë‘ ê°€ì ¸ì˜¨ë‹¤.http://localhost:8080/members?page=1# ì „ì²´ ë°ì´í„°ë¥¼ sizeì— ë§ì¶°ì„œ Pagingí•˜ê³  0ë²ˆ í˜ì´ì§€ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.http://localhost:8080/members?page=0&amp;size=3 Default Paging ì„¤ì • ë³€ê²½í•˜ê¸°Global(ì „ì—­ì ) ìœ¼ë¡œ Paging ì„¤ì •propertiyë¥¼ ì´ìš©í•´ Paging Sizeì™€ ìµœëŒ€ Pageì˜ ê°œìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. spring.data.web.pageable.default-page-size : Paging Size ì˜ í¬ê¸°ë¥¼ ì„¤ì •í•œë‹¤. spring.data.web.pageable.max-age-size : Paging ì˜ ìµœëŒ€ ê°œìˆ˜ë¥¼ ì„¤ì •í•œë‹¤. spring: data: web: pageable: default-page-size: 10 max-page-size: 2000 ì§€ì—­ì ìœ¼ë¡œ Paging ì„¤ì •PageableDefault ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ê¸°ë³¸ì ì¸ Page, Size, Sort ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. @GetMapping(&quot;/members&quot;)public Page&lt;Member&gt; list(@PageableDefault(size = 5, sort = &quot;username&quot;) Pageable pageable) &#123; Pageable requestPaging = pageable; Page&lt;Member&gt; page = memberRepository.findAll(pageable); return page;&#125; Paging ë‚´ìš©ì„ DTOë¡œ ë³€í™˜Method Referenceë¡œ ë³€í˜•í•˜ê¸°@Datapublic class MemberDto &#123; private Long id; private String username; private String teamName; public MemberDto(Long id, String username, String teamName)&#123; this.id = id; this.username = username; this.teamName = teamName; &#125; // Entityë¥¼ ì´ìš©í•´ Dto ê°ì²´ë¥¼ ìƒì„± public MemberDto(Member member) &#123; this.id = member.getId(); this.username = member.getUsername(); &#125;&#125; @GetMapping(&quot;/members&quot;)public Page&lt;MemberDto&gt; list(@PageableDefault(size = 5, sort = &quot;username&quot;) Pageable pageable) &#123; Page&lt;Member&gt; page = memberRepository.findAll(pageable); // Paging ê²°ê³¼ë¥¼ DTO classë¡œ ë³€í™˜í•´ ë°˜í™˜í•œë‹¤. Page&lt;MemberDto&gt; map = page .map(member -&gt; new MemberDto(member.getId(), member.getUsername(), null)); return map;&#125; @GetMapping(&quot;/members&quot;)public Page&lt;MemberDto&gt; list(@PageableDefault(size = 5, sort = &quot;username&quot;) Pageable pageable) &#123; // Paging ê²°ê³¼ë¥¼ DTO classë¡œ ë³€í™˜í•´ ë°˜í™˜í•œë‹¤. Page&lt;MemberDto&gt; map = memberRepository.findAll(pageable) .map(MemberDto::new); return map;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬","slug":"spring/spring-data-jpa/08-spring-data-jpa-paging","date":"2021-08-26T07:39:59.000Z","updated":"2024-02-26T15:37:21.684Z","comments":true,"path":"2021/08/26/spring/spring-data-jpa/08-spring-data-jpa-paging/","link":"","permalink":"https://ckck803.github.io/2021/08/26/spring/spring-data-jpa/08-spring-data-jpa-paging/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ ì¡°íšŒ ì¿¼ë¦¬ì— Pageable ê°ì²´ë¥¼ ë„£ì–´ ì¤Œìœ¼ë¡œì¨ JPA ì—ì„œ ì œê³µí•˜ëŠ” Paging ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ì—ì„œëŠ” Page ì„ ì†ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ Pageable ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. í˜ì´ì§•ì‹œ offset (ì‹œì‘ì§€ì ) ë¶€í„° ì‹œì‘í•´ limit ë§Œí¼ì”© ì˜ë¼ Page Number ë¥¼ ë¶™ì…ë‹ˆë‹¤. // Page ê°ì²´ë¥¼ ë°˜í™˜Page&lt;Member&gt; findPageByAge(int age, Pageable pageable);// Slice ê°ì²´ë¥¼ ë°˜í™˜Slice&lt;Member&gt; findSliceByAge(int age, Pageable pageable);// List ê°ì²´ë¥¼ ë°˜í™˜List&lt;Member&gt; findListByAge(int age, Pageable pageable); Paging ë°˜í™˜ ê°’Paging ë°˜í™˜ë˜ëŠ” ê°ì²´ë¡œ Page, Slice, List ì„¸ê°€ì§€ ì¢…ë¥˜ì˜ ê°ì²´ê°€ ìˆìŠµë‹ˆë‹¤. ì¢…ë¥˜ ì„¤ëª… Page Count ì¿¼ë¦¬ ë¥¼ í¬í•¨í•˜ëŠ” í˜ì´ì§• Slice ë‚´ë¶€ì ìœ¼ë¡œ Limit + 1 ì¡°íšŒ List ë³„ë„ì˜ ì‘ì—… ì—†ì´ ê²°ê³¼ë§Œ ë°˜í™˜","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ ì¡°íšŒ ì¿¼ë¦¬ì— Pageable ê°ì²´ë¥¼ ë„£ì–´ ì¤Œìœ¼ë¡œì¨ JPA ì—ì„œ ì œê³µí•˜ëŠ” Paging ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ì—ì„œëŠ” Page ì„ ì†ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ Pageable ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. í˜ì´ì§•ì‹œ offset (ì‹œì‘ì§€ì ) ë¶€í„° ì‹œì‘í•´ limit ë§Œí¼ì”© ì˜ë¼ Page Number ë¥¼ ë¶™ì…ë‹ˆë‹¤. // Page ê°ì²´ë¥¼ ë°˜í™˜Page&lt;Member&gt; findPageByAge(int age, Pageable pageable);// Slice ê°ì²´ë¥¼ ë°˜í™˜Slice&lt;Member&gt; findSliceByAge(int age, Pageable pageable);// List ê°ì²´ë¥¼ ë°˜í™˜List&lt;Member&gt; findListByAge(int age, Pageable pageable); Paging ë°˜í™˜ ê°’Paging ë°˜í™˜ë˜ëŠ” ê°ì²´ë¡œ Page, Slice, List ì„¸ê°€ì§€ ì¢…ë¥˜ì˜ ê°ì²´ê°€ ìˆìŠµë‹ˆë‹¤. ì¢…ë¥˜ ì„¤ëª… Page Count ì¿¼ë¦¬ ë¥¼ í¬í•¨í•˜ëŠ” í˜ì´ì§• Slice ë‚´ë¶€ì ìœ¼ë¡œ Limit + 1 ì¡°íšŒ List ë³„ë„ì˜ ì‘ì—… ì—†ì´ ê²°ê³¼ë§Œ ë°˜í™˜ Pageable ì¸í„°í˜ì´ìŠ¤ getPageNumber í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. getPageSize í˜ì´ì§€ë‹¹ ë°ì´í„° ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. getOffset í˜ì´ì§•ì„ ì‹œì‘í•˜ëŠ” ì‹œì‘ ë²ˆí˜¸ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. offset &#x3D; page * size; public interface Pageable &#123; static Pageable unpaged() &#123; return Unpaged.INSTANCE; &#125; static Pageable ofSize(int pageSize) &#123; return PageRequest.of(0, pageSize); &#125; default boolean isPaged() &#123; return true; &#125; default boolean isUnpaged() &#123; return !isPaged(); &#125; int getPageNumber(); int getPageSize(); long getOffset(); Sort getSort(); default Sort getSortOr(Sort sort) &#123; Assert.notNull(sort, &quot;Fallback Sort must not be null&quot;); return getSort().isSorted() ? getSort() : sort; &#125; Pageable next(); Pageable previousOrFirst(); Pageable first(); Pageable withPage(int pageNumber); boolean hasPrevious(); default Optional&lt;Pageable&gt; toOptional() &#123; return isUnpaged() ? Optional.empty() : Optional.of(this); &#125;&#125; PageRequest - Pageable ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´PageRequest ëŠ” Pageable êµ¬í˜„ì²´ë¡œ ì°¾ì„ Page Index ì •ë³´, Paging í•  Size ë¥¼ ì´ìš©í•´ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì •ë ¬í–‡ Paging ì„ í•  ê²½ìš° Sort ê°ì²´ë¥¼ ì¶”ê°€ë¡œ ë„£ì–´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. PageRequest pageRequest = PageRequest .of(0, 3);// Page Indexê°€ 0ë¶€í„° ì‹œì‘í•œë‹¤.// username ìœ¼ë¡œ ì •ë ¬ í›„ Paging í•©ë‹ˆë‹¤.PageRequest pageRequest = PageRequest .of(0, 3, Sort.by(Sort.Direction.DESC, &quot;username&quot;));// Page Indexê°€ 0ë¶€í„° ì‹œì‘í•œë‹¤. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±Page ê°ì²´ë¡œ ë°˜í™˜// whenPage&lt;Member&gt; page = memberRepository.findPageByAge(10, pageRequest);// thenList&lt;Member&gt; content = page.getContent();long totalElement = page.getTotalElements();for (Member member : content) &#123; System.out.println(&quot;member : &quot; + member);&#125;System.out.println(&quot;totalElements : &quot; + totalElement);assertThat(content.size()).isEqualTo(3); // paging ëœ element ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤.assertThat(page.getTotalElements()).isEqualTo(5); // ì „ì²´ element ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤.assertThat(page.getNumber()).isEqualTo(0); // paging ì‹œì‘ indexë¥¼ ê°€ì ¸ì˜¨ë‹¤.assertThat(page.getTotalPages()).isEqualTo(2); // page ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤.assertThat(page.isFirst()).isTrue(); // ì²«ë²ˆì§¸ pageì¸ì§€ í™•ì¸assertThat(page.hasNext()).isTrue(); // ë‹¤ìŒ pageê°€ ìˆëŠ”ì§€ í™•ì¸ Slice ê°ì²´ë¡œ ë°˜í™˜Slice&lt;Member&gt; slice = memberRepository.findSliceByAge(10, pageRequest);assertThat(content.size()).isEqualTo(3); // paging ëœ element ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤.assertThat(slice.getNumber()).isEqualTo(0); // paging ì‹œì‘ indexë¥¼ ê°€ì ¸ì˜¨ë‹¤.assertThat(slice.isFirst()).isTrue(); // ì²«ë²ˆì§¸ pageì¸ì§€ í™•ì¸assertThat(slice.hasNext()).isTrue(); // ë‹¤ìŒ pageê°€ ìˆëŠ”ì§€ í™•ì¸ List ê°ì²´ë¡œ ë°˜í™˜List&lt;Member&gt; list = memberRepository.findListByAge(10, pageRequest); ì „ì²´ ì½”ë“œ@Testpublic void paging()&#123; // given memberRepository.save(new Member(&quot;member1&quot;, 10)); memberRepository.save(new Member(&quot;member2&quot;, 10)); memberRepository.save(new Member(&quot;member3&quot;, 10)); memberRepository.save(new Member(&quot;member4&quot;, 10)); memberRepository.save(new Member(&quot;member5&quot;, 10)); int age = 10; PageRequest pageRequest = PageRequest .of(0, 3, Sort.by(Sort.Direction.DESC, &quot;username&quot;));// Page Indexê°€ 0ë¶€í„° ì‹œì‘í•œë‹¤. // when Page&lt;Member&gt; page = memberRepository.findPageByAge(10, pageRequest); // then List&lt;Member&gt; content = page.getContent(); long totalElement = page.getTotalElements(); for (Member member : content) &#123; System.out.println(&quot;member : &quot; + member); &#125; System.out.println(&quot;totalElements : &quot; + totalElement); assertThat(content.size()).isEqualTo(3); // paging ëœ element ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. assertThat(page.getTotalElements()).isEqualTo(5); // ì „ì²´ element ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. assertThat(page.getNumber()).isEqualTo(0); // paging ì‹œì‘ indexë¥¼ ê°€ì ¸ì˜¨ë‹¤. assertThat(page.getTotalPages()).isEqualTo(2); // page ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. assertThat(page.isFirst()).isTrue(); // ì²«ë²ˆì§¸ pageì¸ì§€ í™•ì¸ assertThat(page.hasNext()).isTrue(); // ë‹¤ìŒ pageê°€ ìˆëŠ”ì§€ í™•ì¸ Slice&lt;Member&gt; slice = memberRepository.findSliceByAge(10, pageRequest); assertThat(content.size()).isEqualTo(3); // paging ëœ element ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. assertThat(slice.getNumber()).isEqualTo(0); // paging ì‹œì‘ indexë¥¼ ê°€ì ¸ì˜¨ë‹¤. assertThat(slice.isFirst()).isTrue(); // ì²«ë²ˆì§¸ pageì¸ì§€ í™•ì¸ assertThat(slice.hasNext()).isTrue(); // ë‹¤ìŒ pageê°€ ìˆëŠ”ì§€ í™•ì¸ List&lt;Member&gt; list = memberRepository.findListByAge(10, pageRequest); Page&lt;Member&gt; pageDivideCount = memberRepository.findPageDivideCountByAge(10, pageRequest); List&lt;Member&gt; contentDivideCount = page.getContent(); long totalElementDivideCount = page.getTotalElements(); System.out.println(&quot;totalElementDivideCount : &quot; + totalElementDivideCount); assertThat(content.size()).isEqualTo(3); // paging ëœ element ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. assertThat(pageDivideCount.getTotalElements()).isEqualTo(5); // ì „ì²´ element ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. assertThat(pageDivideCount.getNumber()).isEqualTo(0); // paging ì‹œì‘ indexë¥¼ ê°€ì ¸ì˜¨ë‹¤. assertThat(pageDivideCount.getTotalPages()).isEqualTo(2); // page ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. assertThat(pageDivideCount.isFirst()).isTrue(); // ì²«ë²ˆì§¸ pageì¸ì§€ í™•ì¸ assertThat(pageDivideCount.hasNext()).isTrue(); // ë‹¤ìŒ pageê°€ ìˆëŠ”ì§€ í™•ì¸&#125; Count ì¿¼ë¦¬ ë¶„ë¦¬í•˜ê¸° Page ê°ì²´ë¥¼ ë°˜í™˜í•˜ê²Œ ë  ê²½ìš° Count ì¿¼ë¦¬ë„ ê°™ì´ ì‹¤í–‰ì´ ëœë‹¤. ì´ë•Œ ì‹¤í–‰í•˜ê³  ì‹¶ì€ Count ì¿¼ë¦¬ë¥¼ ë³„ë„ë¡œ ì‘ì„±í•´ ì‹¤í–‰ ì‹œí‚¬ ìˆ˜ ìˆë‹¤. @Query ì‚¬ìš©ì‹œ countQuery ì†ì„±ì„ ì´ìš©í•´ Count ì¿¼ë¦¬ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Count ì¿¼ë¦¬ë¥¼ ì—¼ë‘í•´ ë‘¬ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ê°ì²´ë¼ë¦¬ì˜ ì—°ê´€ê´€ê³„ê°€ ìˆì„ ê²½ìš° ì˜ ëª»í•˜ë©´ N+1 ì˜ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. // Count ì¿¼ë¦¬ ë¶„ë¦¬@Query(value = &quot;select m from Member m left join m.team t&quot;, countQuery = &quot;select count(m.username) from Member m&quot;)Page&lt;Member&gt; findPageDivideCountByAge(int age, Pageable pageable);","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"Spring Data JPA - JPQL í˜ì´ì§•ê³¼ ì •ë ¬","slug":"spring/spring-data-jpa/07-spring-data-jpa-jpql-paging","date":"2021-08-26T05:39:59.000Z","updated":"2024-02-26T15:37:17.780Z","comments":true,"path":"2021/08/26/spring/spring-data-jpa/07-spring-data-jpa-jpql-paging/","link":"","permalink":"https://ckck803.github.io/2021/08/26/spring/spring-data-jpa/07-spring-data-jpa-jpql-paging/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Spring Data JPA - JPQL í˜ì´ì§•ê³¼ ì •ë ¬ Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° JPQL í˜ì´ì§•ê³¼ ì •ë ¬public List&lt;Member&gt; findByPage(int age, int offset, int limit) &#123; return em.createQuery(&quot;select m from Member m where m.age = :age order by m.username desc&quot;) .setParameter(&quot;age&quot;, age) .setFirstResult(offset) // Paging ì‹œì‘ Index .setMaxResults(limit) .getResultList();&#125;public long totalCount(int age)&#123; return em.createQuery(&quot;select count(m) from Member m where m.age = :age&quot;, Long.class) .setParameter(&quot;age&quot;, age) .getSingleResult();&#125; @Testpublic void paging()&#123; // given memberJpaRepository.save(new Member(&quot;member1&quot;, 10)); memberJpaRepository.save(new Member(&quot;member2&quot;, 10)); memberJpaRepository.save(new Member(&quot;member3&quot;, 10)); memberJpaRepository.save(new Member(&quot;member4&quot;, 10)); memberJpaRepository.save(new Member(&quot;member5&quot;, 10)); int age = 10; int offset = 0; int limit = 3; // when List&lt;Member&gt; members = memberJpaRepository.findByPage(age, offset, limit); long totalCount = memberJpaRepository.totalCount(age); // then assertThat(members.size()).isEqualTo(3); assertThat(totalCount).isEqualTo(5);&#125;","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Spring Data JPA - JPQL í˜ì´ì§•ê³¼ ì •ë ¬ Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° JPQL í˜ì´ì§•ê³¼ ì •ë ¬public List&lt;Member&gt; findByPage(int age, int offset, int limit) &#123; return em.createQuery(&quot;select m from Member m where m.age = :age order by m.username desc&quot;) .setParameter(&quot;age&quot;, age) .setFirstResult(offset) // Paging ì‹œì‘ Index .setMaxResults(limit) .getResultList();&#125;public long totalCount(int age)&#123; return em.createQuery(&quot;select count(m) from Member m where m.age = :age&quot;, Long.class) .setParameter(&quot;age&quot;, age) .getSingleResult();&#125; @Testpublic void paging()&#123; // given memberJpaRepository.save(new Member(&quot;member1&quot;, 10)); memberJpaRepository.save(new Member(&quot;member2&quot;, 10)); memberJpaRepository.save(new Member(&quot;member3&quot;, 10)); memberJpaRepository.save(new Member(&quot;member4&quot;, 10)); memberJpaRepository.save(new Member(&quot;member5&quot;, 10)); int age = 10; int offset = 0; int limit = 3; // when List&lt;Member&gt; members = memberJpaRepository.findByPage(age, offset, limit); long totalCount = memberJpaRepository.totalCount(age); // then assertThat(members.size()).isEqualTo(3); assertThat(totalCount).isEqualTo(5);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í•©ìŠ¹ íƒì‹œ ìš”ê¸ˆ (Cpp)","slug":"algorithm/programmers/ë‹¤ìµìŠ¤íŠ¸ë¼/72413-í•©ìŠ¹íƒì‹œìš”ê¸ˆ","date":"2021-08-25T11:10:40.000Z","updated":"2024-11-28T13:59:32.467Z","comments":true,"path":"2021/08/25/algorithm/programmers/ë‹¤ìµìŠ¤íŠ¸ë¼/72413-í•©ìŠ¹íƒì‹œìš”ê¸ˆ/","link":"","permalink":"https://ckck803.github.io/2021/08/25/algorithm/programmers/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/72413-%ED%95%A9%EC%8A%B9%ED%83%9D%EC%8B%9C%EC%9A%94%EA%B8%88/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/72413 ë¬¸ì œ í’€ì´ëª¨ë“  ê°„ì„ ì˜ weightê°€ ìŒìˆ˜ê°€ ì•„ë‹Œ ê°’, ì‹œì‘ì  sì—ì„œ ë„ì°©í•  ìˆ˜ ìˆëŠ” ê±°ë¦¬ì˜ ìµœì†Œ ë¹„ìš©ì„ êµ¬í•˜ëŠ” ë¬¸ì œë¼ ë‹¤ìµìŠ¤íŠ¸ë¼ë¥¼ ì´ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ì‹œì‘ì  sì—ì„œ ì‹œì‘í•´ xì ê¹Œì§€ ê°™ì´ ì´ë™í•˜ëŠ” ìµœì†Œ ë¹„ìš© + xì ì—ì„œ ì‹œì‘í•´ aì ê¹Œì§€ ì´ë™í•˜ëŠ” ìµœì†Œ ë¹„ìš© + xì ì—ì„œ ì‹œì‘í•´ bì ê¹Œì§€ ì´ë™í•˜ëŠ” ìµœì†Œ ë¹„ìš© ì¤‘ì—ì„œ ê°€ì¥ ê°’ì´ ì‘ì€ ê°’ì„ ì°¾ëŠ” ë¬¸ì œë‹¤.ì›ë¦¬ëŠ” ê°„ë‹¨í•˜ì§€ë§Œ ë‹¤ìµìŠ¤íŠ¸ë¼ì— ëŒ€í•´ ì˜ ì•Œê³  ìˆì–´ì•¼ í’€ ìˆ˜ ìˆëŠ” ë¬¸ì œë‹¤. void dijkstra(int node) &#123; for (int i = 1; i &lt; 220; i++) &#123; dist[node][i] = INF; &#125; priority_queue&lt;pair&lt;int, int&gt;&gt; pq; pq.push(make_pair(0, node)); dist[node][node] = 0; while (!pq.empty()) &#123; int nodeDist = -pq.top().first; int cntNode = pq.top().second; pq.pop(); if (dist[node][cntNode] != nodeDist) &#123; continue; &#125; for (pair&lt;int, int&gt; vertex : graph[cntNode]) &#123; int nextWeight = nodeDist + vertex.second; int nextNode = vertex.first; if (nextWeight &lt; dist[node][nextNode]) &#123; dist[node][nextNode] = nextWeight; pq.push(make_pair(-nextWeight, nextNode)); &#125; &#125; &#125;&#125; ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;const int INF = 987654321;long long dist[220][220];vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt; graph;void dijkstra(int node) &#123; for (int i = 1; i &lt; 220; i++) &#123; dist[node][i] = INF; &#125; priority_queue&lt;pair&lt;int, int&gt;&gt; pq; pq.push(make_pair(0, node)); dist[node][node] = 0; while (!pq.empty()) &#123; int nodeDist = -pq.top().first; int cntNode = pq.top().second; pq.pop(); if (dist[node][cntNode] != nodeDist) &#123; continue; &#125; for (pair&lt;int, int&gt; vertex : graph[cntNode]) &#123; int nextWeight = nodeDist + vertex.second; int nextNode = vertex.first; if (nextWeight &lt; dist[node][nextNode]) &#123; dist[node][nextNode] = nextWeight; pq.push(make_pair(-nextWeight, nextNode)); &#125; &#125; &#125;&#125;int solution(int n, int s, int a, int b, vector&lt;vector&lt;int&gt;&gt; fares) &#123; int answer = 0; graph = vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt;(n + 1); for (vector&lt;int&gt; fare : fares) &#123; int start = fare[0]; int end = fare[1]; int weight = fare[2]; graph[start].push_back(make_pair(end, weight)); graph[end].push_back(make_pair(start, weight)); &#125; // dijkstra_start(s); for (int i = 1; i &lt;= n; i++) &#123; dijkstra(i); &#125; long long minValue = INF; for (int i = 1; i &lt;= n; i++) &#123; if (minValue &gt; dist[s][i] + dist[i][a] + dist[i][b]) &#123; minValue = dist[s][i] + dist[i][a] + dist[i][b]; &#125; &#125; answer = minValue; return answer;&#125;","text":"https://programmers.co.kr/learn/courses/30/lessons/72413 ë¬¸ì œ í’€ì´ëª¨ë“  ê°„ì„ ì˜ weightê°€ ìŒìˆ˜ê°€ ì•„ë‹Œ ê°’, ì‹œì‘ì  sì—ì„œ ë„ì°©í•  ìˆ˜ ìˆëŠ” ê±°ë¦¬ì˜ ìµœì†Œ ë¹„ìš©ì„ êµ¬í•˜ëŠ” ë¬¸ì œë¼ ë‹¤ìµìŠ¤íŠ¸ë¼ë¥¼ ì´ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ì‹œì‘ì  sì—ì„œ ì‹œì‘í•´ xì ê¹Œì§€ ê°™ì´ ì´ë™í•˜ëŠ” ìµœì†Œ ë¹„ìš© + xì ì—ì„œ ì‹œì‘í•´ aì ê¹Œì§€ ì´ë™í•˜ëŠ” ìµœì†Œ ë¹„ìš© + xì ì—ì„œ ì‹œì‘í•´ bì ê¹Œì§€ ì´ë™í•˜ëŠ” ìµœì†Œ ë¹„ìš© ì¤‘ì—ì„œ ê°€ì¥ ê°’ì´ ì‘ì€ ê°’ì„ ì°¾ëŠ” ë¬¸ì œë‹¤.ì›ë¦¬ëŠ” ê°„ë‹¨í•˜ì§€ë§Œ ë‹¤ìµìŠ¤íŠ¸ë¼ì— ëŒ€í•´ ì˜ ì•Œê³  ìˆì–´ì•¼ í’€ ìˆ˜ ìˆëŠ” ë¬¸ì œë‹¤. void dijkstra(int node) &#123; for (int i = 1; i &lt; 220; i++) &#123; dist[node][i] = INF; &#125; priority_queue&lt;pair&lt;int, int&gt;&gt; pq; pq.push(make_pair(0, node)); dist[node][node] = 0; while (!pq.empty()) &#123; int nodeDist = -pq.top().first; int cntNode = pq.top().second; pq.pop(); if (dist[node][cntNode] != nodeDist) &#123; continue; &#125; for (pair&lt;int, int&gt; vertex : graph[cntNode]) &#123; int nextWeight = nodeDist + vertex.second; int nextNode = vertex.first; if (nextWeight &lt; dist[node][nextNode]) &#123; dist[node][nextNode] = nextWeight; pq.push(make_pair(-nextWeight, nextNode)); &#125; &#125; &#125;&#125; ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;const int INF = 987654321;long long dist[220][220];vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt; graph;void dijkstra(int node) &#123; for (int i = 1; i &lt; 220; i++) &#123; dist[node][i] = INF; &#125; priority_queue&lt;pair&lt;int, int&gt;&gt; pq; pq.push(make_pair(0, node)); dist[node][node] = 0; while (!pq.empty()) &#123; int nodeDist = -pq.top().first; int cntNode = pq.top().second; pq.pop(); if (dist[node][cntNode] != nodeDist) &#123; continue; &#125; for (pair&lt;int, int&gt; vertex : graph[cntNode]) &#123; int nextWeight = nodeDist + vertex.second; int nextNode = vertex.first; if (nextWeight &lt; dist[node][nextNode]) &#123; dist[node][nextNode] = nextWeight; pq.push(make_pair(-nextWeight, nextNode)); &#125; &#125; &#125;&#125;int solution(int n, int s, int a, int b, vector&lt;vector&lt;int&gt;&gt; fares) &#123; int answer = 0; graph = vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt;(n + 1); for (vector&lt;int&gt; fare : fares) &#123; int start = fare[0]; int end = fare[1]; int weight = fare[2]; graph[start].push_back(make_pair(end, weight)); graph[end].push_back(make_pair(start, weight)); &#125; // dijkstra_start(s); for (int i = 1; i &lt;= n; i++) &#123; dijkstra(i); &#125; long long minValue = INF; for (int i = 1; i &lt;= n; i++) &#123; if (minValue &gt; dist[s][i] + dist[i][a] + dist[i][b]) &#123; minValue = dist[s][i] + dist[i][a] + dist[i][b]; &#125; &#125; answer = minValue; return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"}],"tags":[{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"}]},{"title":"Spring Data JPA - ë°˜í™˜ íƒ€ì…","slug":"spring/spring-data-jpa/06-spring-data-jpa-dto","date":"2021-08-25T05:39:59.000Z","updated":"2024-02-26T15:37:14.088Z","comments":true,"path":"2021/08/25/spring/spring-data-jpa/06-spring-data-jpa-dto/","link":"","permalink":"https://ckck803.github.io/2021/08/25/spring/spring-data-jpa/06-spring-data-jpa-dto/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° ë°˜í™˜ íƒ€ì…List&lt;Member&gt; findListByUsername(String username); // ë°˜í™˜ íƒ€ì… : ì»¬ë™ì…˜Member findMemberByUsername(String username); // ë°˜í™˜ íƒ€ì… : ë‹¨ê±´Optional&lt;Member&gt; findOptionalByUsername(String useranme); // ë°˜í™˜ í‹°ì… : ë‹¨ê±´ Optional public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; &#123; List&lt;Member&gt; findByUsernameAndAgeGreaterThan(String username, int age); @Query(&quot;select m from Member m where m.username = :username and m.age = :age&quot;) List&lt;Member&gt; findUser(@Param(&quot;username&quot;) String username, @Param(&quot;age&quot;) int age); // ê°’ìœ¼ë¡œ ì¡°íšŒí•˜ê¸° @Query(&quot;select m.username from Member m&quot;) List&lt;String&gt; findUsernameList(); // DTOë¡œ ì¡°íšŒí•˜ê¸° @Query(&quot;select new com.example.datajpa.dto.MemberDto( m.id, m.username, t.name)from Member m join m.team t&quot;) List&lt;MemberDto&gt; findMemberByDto(); @Query(&quot;select m from Member m where m.username in :names&quot;) List&lt;Member&gt; findByNames(@Param(&quot;names&quot;) Collection&lt;String&gt; names); List&lt;Member&gt; findListByUsername(String username); // ë°˜í™˜ íƒ€ì… : ì»¬ë™ì…˜ Member findMemberByUsername(String username); // ë°˜í™˜ íƒ€ì… : ë‹¨ê±´ Optional&lt;Member&gt; findOptionalByUsername(String useranme); // ë°˜í™˜ í‹°ì… : ë‹¨ê±´ Optional&#125; @Testpublic void returnType()&#123; Member member1 = new Member(&quot;AAA&quot;, 10); Member member2 = new Member(&quot;BBB&quot;, 20); memberRepository.save(member1); memberRepository.save(member2); List&lt;Member&gt; members = memberRepository.findListByUsername(&quot;AAA&quot;); Member member = memberRepository.findMemberByUsername(&quot;AAA&quot;); Optional&lt;Member&gt; optional = memberRepository.findOptionalByUsername(&quot;AAA&quot;); assertThat(members).isInstanceOf(List.class); assertThat(member).isInstanceOf(Member.class); assertThat(optional).isInstanceOf(Optional.class);&#125;","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° ë°˜í™˜ íƒ€ì…List&lt;Member&gt; findListByUsername(String username); // ë°˜í™˜ íƒ€ì… : ì»¬ë™ì…˜Member findMemberByUsername(String username); // ë°˜í™˜ íƒ€ì… : ë‹¨ê±´Optional&lt;Member&gt; findOptionalByUsername(String useranme); // ë°˜í™˜ í‹°ì… : ë‹¨ê±´ Optional public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; &#123; List&lt;Member&gt; findByUsernameAndAgeGreaterThan(String username, int age); @Query(&quot;select m from Member m where m.username = :username and m.age = :age&quot;) List&lt;Member&gt; findUser(@Param(&quot;username&quot;) String username, @Param(&quot;age&quot;) int age); // ê°’ìœ¼ë¡œ ì¡°íšŒí•˜ê¸° @Query(&quot;select m.username from Member m&quot;) List&lt;String&gt; findUsernameList(); // DTOë¡œ ì¡°íšŒí•˜ê¸° @Query(&quot;select new com.example.datajpa.dto.MemberDto( m.id, m.username, t.name)from Member m join m.team t&quot;) List&lt;MemberDto&gt; findMemberByDto(); @Query(&quot;select m from Member m where m.username in :names&quot;) List&lt;Member&gt; findByNames(@Param(&quot;names&quot;) Collection&lt;String&gt; names); List&lt;Member&gt; findListByUsername(String username); // ë°˜í™˜ íƒ€ì… : ì»¬ë™ì…˜ Member findMemberByUsername(String username); // ë°˜í™˜ íƒ€ì… : ë‹¨ê±´ Optional&lt;Member&gt; findOptionalByUsername(String useranme); // ë°˜í™˜ í‹°ì… : ë‹¨ê±´ Optional&#125; @Testpublic void returnType()&#123; Member member1 = new Member(&quot;AAA&quot;, 10); Member member2 = new Member(&quot;BBB&quot;, 20); memberRepository.save(member1); memberRepository.save(member2); List&lt;Member&gt; members = memberRepository.findListByUsername(&quot;AAA&quot;); Member member = memberRepository.findMemberByUsername(&quot;AAA&quot;); Optional&lt;Member&gt; optional = memberRepository.findOptionalByUsername(&quot;AAA&quot;); assertThat(members).isInstanceOf(List.class); assertThat(member).isInstanceOf(Member.class); assertThat(optional).isInstanceOf(Optional.class);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ìˆœìœ„ ê²€ìƒ‰ (JAVA)","slug":"algorithm/programmers/ê²½ìš°ì˜ìˆ˜/72412-ìˆœìœ„ê²€ìƒ‰-Java","date":"2021-08-24T11:10:40.000Z","updated":"2024-11-28T13:59:32.766Z","comments":true,"path":"2021/08/24/algorithm/programmers/ê²½ìš°ì˜ìˆ˜/72412-ìˆœìœ„ê²€ìƒ‰-Java/","link":"","permalink":"https://ckck803.github.io/2021/08/24/algorithm/programmers/%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98/72412-%EC%88%9C%EC%9C%84%EA%B2%80%EC%83%89-Java/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/72412 ë¬¸ì œ í’€ì´ì´ ë¬¸ì œëŠ” ê·¸ëƒ¥ ë¬¸ìì—´ëŒ€ ë¬¸ìì—´ë¡œ ë¶€ë”ªíˆê²Œ ë˜ë©´ ì‹œê°„ ì´ˆê³¼ê°€ ë‚  ìˆ˜ ë°–ì— ì—†ëŠ” ë¬¸ì œë‹¤. ì„ í˜•ì ìœ¼ë¡œ í’€ë©´ info ë°°ì—´ì˜ ìµœëŒ€ í¬ê¸°ëŠ” 5ë§Œ, query ë°°ì—´ì˜ ìµœëŒ€ í¬ê¸°ëŠ” 10ë§Œ ì´ë¯€ë¡œ ìµœëŒ€ 50ì–µ ì—°ì‚°ì„ í•˜ê²Œ ë˜ë¯€ë¡œ íš¨ìœ¨ì„± ì¸¡ë©´ì—ì„œ ë¬¸ì œê°€ ìƒê¸´ë‹¤.ê²°êµ­ ì´ ë¬¸ì œëŠ” ì–´ë–¤ ë°©ë²•ì„ ì´ìš©í•´ ê²€ìƒ‰í•  ê²ƒì¸ê°€ê°€ ê°€ì¥ í° ê´€ê±´ì´ ëœë‹¤. ì„ í˜•ì ì¸ íƒìƒ‰ì„ í•˜ëŠ” ë°©ë²•ì´ ì•„ë‹Œ O(logn)ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°–ëŠ” ìë£Œêµ¬ì¡° í˜¹ì€ íƒìƒ‰ ê¸°ë²•ì„ ì´ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë¬¸ì œë¥¼ ì ‘ê·¼í•´ì•¼ í•œë‹¤. ë™ì‹œì— ë§Œë“¤ ìˆ˜ ìˆëŠ” ë¬¸ì¥ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³ ë ¤í•´ì¤˜ì•¼ í•œë‹¤. ë³µí•©ì ì¸ ë¬¸ì œë¼ ì‰½ì§€ ì•Šë‹¤. ì²˜ìŒì— ê° ë¬¸ìì—´ë‚´ ë¬¸ìë“¤ì„ íŒŒì‹±í•´ì„œ mapì—ë‹¤ê°€ ì €ì¥ì„ í•´ì•¼ í•˜ë‚˜?â€¦. ê·¸ëŸ¬ë©´ íƒìƒ‰ì„ ì–´ë–»ê²Œ í•´ì•¼í•˜ì§€?â€¦ í•˜ë©´ì„œ ë¬¸ì œ ì ‘ê·¼ì„ ëª»í•˜ë‹¤ê°€ ë‹¤ë¥¸ ë¶„ í’€ì´ë¥¼ ì‚´ì§ ì°¸ê³  í–ˆëŠ”ë° ë¬¸ìì—´ ìì²´ë¥¼ mapì˜ keyê°’ìœ¼ë¡œ ë„£ëŠ” ê²ƒì„ ë³´ê³  íŒíŠ¸ë¥¼ ì–»ì–´ ë¬¸ì œë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆì—ˆë‹¤. info ë‚´ ë¬¸ìì—´ì„ ì •ì¬í•´ ë„ì–´ì“°ê¸°ëŠ” ë¬¸ì¥ì„ ë§Œë“¤ì–´ì¤€ë‹¤. keyë¡œ ì •ì¬ëœ ë¬¸ì¥ì„ valueë¡œëŠ” ê°™ì€ keyë¥¼ ê°–ëŠ” ë¬¸ì¥ì— ëŒ€í•œ ê°’ë“¤ì„ ë³´ê´€í•˜ê¸° ìœ„í•´ Listí˜•íƒœë¡œ ë„£ì–´ì¤€ë‹¤. info ë‚´ ë¬¸ì¥ë“¤ì´ mapìœ¼ë¡œ ë‹¤ ë“¤ì–´ê°”ìœ¼ë©´ Binary Searchë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì˜¤ë¦„ ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ í•´ì¤€ë‹¤. query ë‚´ ë¬¸ìì—´ì„ ì •ì¬í•´ ì¤€ë‹¤. infoì—ì„œ êµ¬ë¶„ìëŠ” ë„ì–´ì“°ê¸° ì˜€ì§€ë§Œ queryì—ì„œ êµ¬ë¶„ìëŠ” andì™€ ë„ì–´ì“°ê¸°ë‹¤. â€˜-â€˜ë¥¼ ë§Œë‚˜ê²Œ ë˜ë©´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë¬¸ì¥ì˜ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. ì •ì¬ëœ ë¬¸ìë¥¼ ê°–ê³  infoì— ê°’ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. ê°’ì´ ìˆìœ¼ë©´ Listì—ì„œ queryì—ì„œ ìš”êµ¬í•˜ëŠ” ê°’ ì´ìƒì´ ë˜ëŠ” ì‚¬ëŒ ìˆ˜ë¥¼ ì°¾ëŠ”ë‹¤.(Lower Bound) ì¿¼ë¦¬ê°€ ì—¬ëŸ¬ê°œì¸ ê²½ìš°ëŠ” ê°ê°ì˜ ê²½ìš°ë“¤ì„ ëª¨ë‘ ì°¾ì•„ì„œ ë”í•´ì¤€ë‹¤. ì°¾ì€ ê²°ê³¼ë¥¼ answerì— ë„£ì–´ ë°˜í™˜í•œë‹¤. info ë‚´ ë¬¸ìì—´ì„ ì •ì¬í•˜ê¸°public void infoToMap(String[] info) &#123; for (int i = 0; i &lt; info.length; i++) &#123; String[] words = info[i].split(&quot; &quot;); StringBuilder sb = new StringBuilder(); int score = Integer.parseInt(words[words.length - 1]); for (int j = 0; j &lt; words.length - 1; j++) &#123; sb.append(words[j]); &#125; String key = sb.toString(); infos.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(score); &#125;&#125; map ë‚´ Listê°’ë“¤ì„ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê¸°infos.forEach((key, value) -&gt; &#123; value.sort(null);&#125;);","text":"https://programmers.co.kr/learn/courses/30/lessons/72412 ë¬¸ì œ í’€ì´ì´ ë¬¸ì œëŠ” ê·¸ëƒ¥ ë¬¸ìì—´ëŒ€ ë¬¸ìì—´ë¡œ ë¶€ë”ªíˆê²Œ ë˜ë©´ ì‹œê°„ ì´ˆê³¼ê°€ ë‚  ìˆ˜ ë°–ì— ì—†ëŠ” ë¬¸ì œë‹¤. ì„ í˜•ì ìœ¼ë¡œ í’€ë©´ info ë°°ì—´ì˜ ìµœëŒ€ í¬ê¸°ëŠ” 5ë§Œ, query ë°°ì—´ì˜ ìµœëŒ€ í¬ê¸°ëŠ” 10ë§Œ ì´ë¯€ë¡œ ìµœëŒ€ 50ì–µ ì—°ì‚°ì„ í•˜ê²Œ ë˜ë¯€ë¡œ íš¨ìœ¨ì„± ì¸¡ë©´ì—ì„œ ë¬¸ì œê°€ ìƒê¸´ë‹¤.ê²°êµ­ ì´ ë¬¸ì œëŠ” ì–´ë–¤ ë°©ë²•ì„ ì´ìš©í•´ ê²€ìƒ‰í•  ê²ƒì¸ê°€ê°€ ê°€ì¥ í° ê´€ê±´ì´ ëœë‹¤. ì„ í˜•ì ì¸ íƒìƒ‰ì„ í•˜ëŠ” ë°©ë²•ì´ ì•„ë‹Œ O(logn)ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°–ëŠ” ìë£Œêµ¬ì¡° í˜¹ì€ íƒìƒ‰ ê¸°ë²•ì„ ì´ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë¬¸ì œë¥¼ ì ‘ê·¼í•´ì•¼ í•œë‹¤. ë™ì‹œì— ë§Œë“¤ ìˆ˜ ìˆëŠ” ë¬¸ì¥ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³ ë ¤í•´ì¤˜ì•¼ í•œë‹¤. ë³µí•©ì ì¸ ë¬¸ì œë¼ ì‰½ì§€ ì•Šë‹¤. ì²˜ìŒì— ê° ë¬¸ìì—´ë‚´ ë¬¸ìë“¤ì„ íŒŒì‹±í•´ì„œ mapì—ë‹¤ê°€ ì €ì¥ì„ í•´ì•¼ í•˜ë‚˜?â€¦. ê·¸ëŸ¬ë©´ íƒìƒ‰ì„ ì–´ë–»ê²Œ í•´ì•¼í•˜ì§€?â€¦ í•˜ë©´ì„œ ë¬¸ì œ ì ‘ê·¼ì„ ëª»í•˜ë‹¤ê°€ ë‹¤ë¥¸ ë¶„ í’€ì´ë¥¼ ì‚´ì§ ì°¸ê³  í–ˆëŠ”ë° ë¬¸ìì—´ ìì²´ë¥¼ mapì˜ keyê°’ìœ¼ë¡œ ë„£ëŠ” ê²ƒì„ ë³´ê³  íŒíŠ¸ë¥¼ ì–»ì–´ ë¬¸ì œë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆì—ˆë‹¤. info ë‚´ ë¬¸ìì—´ì„ ì •ì¬í•´ ë„ì–´ì“°ê¸°ëŠ” ë¬¸ì¥ì„ ë§Œë“¤ì–´ì¤€ë‹¤. keyë¡œ ì •ì¬ëœ ë¬¸ì¥ì„ valueë¡œëŠ” ê°™ì€ keyë¥¼ ê°–ëŠ” ë¬¸ì¥ì— ëŒ€í•œ ê°’ë“¤ì„ ë³´ê´€í•˜ê¸° ìœ„í•´ Listí˜•íƒœë¡œ ë„£ì–´ì¤€ë‹¤. info ë‚´ ë¬¸ì¥ë“¤ì´ mapìœ¼ë¡œ ë‹¤ ë“¤ì–´ê°”ìœ¼ë©´ Binary Searchë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì˜¤ë¦„ ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ í•´ì¤€ë‹¤. query ë‚´ ë¬¸ìì—´ì„ ì •ì¬í•´ ì¤€ë‹¤. infoì—ì„œ êµ¬ë¶„ìëŠ” ë„ì–´ì“°ê¸° ì˜€ì§€ë§Œ queryì—ì„œ êµ¬ë¶„ìëŠ” andì™€ ë„ì–´ì“°ê¸°ë‹¤. â€˜-â€˜ë¥¼ ë§Œë‚˜ê²Œ ë˜ë©´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë¬¸ì¥ì˜ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. ì •ì¬ëœ ë¬¸ìë¥¼ ê°–ê³  infoì— ê°’ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. ê°’ì´ ìˆìœ¼ë©´ Listì—ì„œ queryì—ì„œ ìš”êµ¬í•˜ëŠ” ê°’ ì´ìƒì´ ë˜ëŠ” ì‚¬ëŒ ìˆ˜ë¥¼ ì°¾ëŠ”ë‹¤.(Lower Bound) ì¿¼ë¦¬ê°€ ì—¬ëŸ¬ê°œì¸ ê²½ìš°ëŠ” ê°ê°ì˜ ê²½ìš°ë“¤ì„ ëª¨ë‘ ì°¾ì•„ì„œ ë”í•´ì¤€ë‹¤. ì°¾ì€ ê²°ê³¼ë¥¼ answerì— ë„£ì–´ ë°˜í™˜í•œë‹¤. info ë‚´ ë¬¸ìì—´ì„ ì •ì¬í•˜ê¸°public void infoToMap(String[] info) &#123; for (int i = 0; i &lt; info.length; i++) &#123; String[] words = info[i].split(&quot; &quot;); StringBuilder sb = new StringBuilder(); int score = Integer.parseInt(words[words.length - 1]); for (int j = 0; j &lt; words.length - 1; j++) &#123; sb.append(words[j]); &#125; String key = sb.toString(); infos.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(score); &#125;&#125; map ë‚´ Listê°’ë“¤ì„ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê¸°infos.forEach((key, value) -&gt; &#123; value.sort(null);&#125;); query ë‚´ ë¬¸ìì—´ ì •ì¬í•˜ê³  ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ ë§Œë“¤ê¸°â€˜-â€˜ëŠ” ëª¨ë“  ì¡°ê±´ì„ í—ˆìš©í•œë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì£¼ë„ë¡ í•œë‹¤. String[] words = query[i].split(&quot; and | &quot;);// ì–¸ì–´ cpp, java, python, -// ì§êµ° backend, frontend, -// ê²½ë ¥ junior, senior, -// ì†Œìš¸ í‘¸ë“œ chicken, pizza, -// ì ìˆ˜ArrayList&lt;String&gt; qu = new ArrayList&lt;&gt;();qu.add(&quot;&quot;);for (int j = 0; j &lt; words.length - 1; j++) &#123; int arrSize = qu.size(); for (int aIndex = 0; aIndex &lt; arrSize; aIndex++) &#123; String subStr = qu.get(aIndex); if (words[j].equals(&quot;-&quot;)) &#123; if (j == 0) &#123; qu.set(aIndex, subStr + &quot;cpp&quot;); qu.add(subStr + &quot;java&quot;); qu.add(subStr + &quot;python&quot;); &#125; else if (j == 1) &#123; qu.set(aIndex, subStr + &quot;backend&quot;); qu.add(subStr + &quot;frontend&quot;); &#125; else if (j == 2) &#123; qu.set(aIndex, subStr + &quot;junior&quot;); qu.add(subStr + &quot;senior&quot;); &#125; else if (j == 3) &#123; qu.set(aIndex, subStr + &quot;chicken&quot;); qu.add(subStr + &quot;pizza&quot;); &#125; &#125; else &#123; qu.set(aIndex, subStr + words[j]); &#125; &#125;&#125; ì •ì¬ëœ query ë¬¸ìì—´ì„ ì´ìš©í•´ qeuryì—ì„œ ìš”êµ¬í•˜ëŠ” ê°’ ì´ìƒì˜ ì‚¬ëŒ ìˆ˜ë¥¼ ì°¾ëŠ”ë‹¤.public int binarySearch(List&lt;Integer&gt; list, int value) &#123; int begin = 0; int end = list.size(); int mid = (begin + end) / 2; while (begin &lt; end) &#123; mid = (begin + end) / 2; if (value &gt; list.get(mid)) &#123; begin = mid + 1; &#125; else &#123; end = mid; &#125; &#125; return list.size() - begin;&#125; int num = 0;for (int j = 0; j &lt; qu.size(); j++) &#123; String key = qu.get(j).trim(); int value = Integer.parseInt(words[words.length - 1]); List&lt;Integer&gt; list = infos.getOrDefault(key, new ArrayList&lt;&gt;()); num += binarySearch(list, value);&#125;answer[i] = num; ì „ì²´ ì†ŒìŠ¤import java.util.*;import java.io.*;class Solution &#123; Map&lt;String, List&lt;Integer&gt;&gt; infos = new HashMap&lt;&gt;(); // Map&lt;String, Integer&gt; querys = new HashMap&lt;&gt;(); // int[] filter1() public int binarySearch(List&lt;Integer&gt; list, int value) &#123; int begin = 0; int end = list.size(); int mid = (begin + end) / 2; while (begin &lt; end) &#123; mid = (begin + end) / 2; if (value &gt; list.get(mid)) &#123; begin = mid + 1; &#125; else &#123; end = mid; &#125; &#125; return list.size() - begin; &#125; public void infoToMap(String[] info) &#123; for (int i = 0; i &lt; info.length; i++) &#123; String[] words = info[i].split(&quot; &quot;); StringBuilder sb = new StringBuilder(); int score = Integer.parseInt(words[words.length - 1]); for (int j = 0; j &lt; words.length - 1; j++) &#123; sb.append(words[j]); &#125; String key = sb.toString(); infos.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(score); &#125; &#125; public int[] solution(String[] info, String[] query) &#123; int[] answer = new int[query.length]; infoToMap(info); infos.forEach((key, value) -&gt; &#123; value.sort(null); &#125;); for (int i = 0; i &lt; query.length; i++) &#123; String[] words = query[i].split(&quot; and | &quot;); // ì–¸ì–´ cpp, java, python, - // ì§êµ° backend, frontend, - // ê²½ë ¥ junior, senior, - // ì†Œìš¸ í‘¸ë“œ chicken, pizza, - // ì ìˆ˜ ArrayList&lt;String&gt; qu = new ArrayList&lt;&gt;(); qu.add(&quot;&quot;); for (int j = 0; j &lt; words.length - 1; j++) &#123; int arrSize = qu.size(); for (int aIndex = 0; aIndex &lt; arrSize; aIndex++) &#123; String subStr = qu.get(aIndex); if (words[j].equals(&quot;-&quot;)) &#123; if (j == 0) &#123; qu.set(aIndex, subStr + &quot;cpp&quot;); qu.add(subStr + &quot;java&quot;); qu.add(subStr + &quot;python&quot;); &#125; else if (j == 1) &#123; qu.set(aIndex, subStr + &quot;backend&quot;); qu.add(subStr + &quot;frontend&quot;); &#125; else if (j == 2) &#123; qu.set(aIndex, subStr + &quot;junior&quot;); qu.add(subStr + &quot;senior&quot;); &#125; else if (j == 3) &#123; qu.set(aIndex, subStr + &quot;chicken&quot;); qu.add(subStr + &quot;pizza&quot;); &#125; &#125; else &#123; qu.set(aIndex, subStr + words[j]); &#125; &#125; &#125; int num = 0; for (int j = 0; j &lt; qu.size(); j++) &#123; String key = qu.get(j).trim(); int value = Integer.parseInt(words[words.length - 1]); List&lt;Integer&gt; list = infos.getOrDefault(key, new ArrayList&lt;&gt;()); num += binarySearch(list, value); &#125; answer[i] = num; &#125; return answer; &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"}],"tags":[{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"}]},{"title":"Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”©","slug":"spring/spring-data-jpa/05-spring-data-jpa-query-param","date":"2021-08-24T05:39:59.000Z","updated":"2024-02-26T15:37:10.391Z","comments":true,"path":"2021/08/24/spring/spring-data-jpa/05-spring-data-jpa-query-param/","link":"","permalink":"https://ckck803.github.io/2021/08/24/spring/spring-data-jpa/05-spring-data-jpa-query-param/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° JPQLì— íŒŒë¼ë¯¸í„° ë°”ì¸ë”©Param ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ì¿¼ë¦¬ë¬¸ë‚´ íŒŒë¼ë¯¸í„°ë“¤ì„ ë°”ì¸ë”© í•´ì¤€ë‹¤. @Query(&quot;select m from Member m where m.username = :username and m.age = :age&quot;)List&lt;Member&gt; findUser(@Param(&quot;username&quot;) String username, @Param(&quot;age&quot;) int age); ì»¬ë ‰ì…˜ íŒŒë¦¬ë¯¸í„° ë°”ì¸ë”©Collection íƒ€ì…ìœ¼ë¡œ in ì ˆ ì§€ì› @Query(&quot;select m from Member m where m.username in :names&quot;)List&lt;Member&gt; findByNames(@Param(&quot;names&quot;) List&lt;String&gt; names); @Testpublic void findByNames()&#123; Member member1 = new Member(&quot;AAA&quot;, 10); Member member2 = new Member(&quot;BBB&quot;, 20); memberRepository.save(member1); memberRepository.save(member2); List&lt;Member&gt; result = memberRepository.findByNames(Arrays.asList(&quot;AAA&quot;, &quot;BBB&quot;)); for (Member member : result) &#123; System.out.println(&quot;Member : &quot; + member); &#125;&#125;","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° JPQLì— íŒŒë¼ë¯¸í„° ë°”ì¸ë”©Param ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ì¿¼ë¦¬ë¬¸ë‚´ íŒŒë¼ë¯¸í„°ë“¤ì„ ë°”ì¸ë”© í•´ì¤€ë‹¤. @Query(&quot;select m from Member m where m.username = :username and m.age = :age&quot;)List&lt;Member&gt; findUser(@Param(&quot;username&quot;) String username, @Param(&quot;age&quot;) int age); ì»¬ë ‰ì…˜ íŒŒë¦¬ë¯¸í„° ë°”ì¸ë”©Collection íƒ€ì…ìœ¼ë¡œ in ì ˆ ì§€ì› @Query(&quot;select m from Member m where m.username in :names&quot;)List&lt;Member&gt; findByNames(@Param(&quot;names&quot;) List&lt;String&gt; names); @Testpublic void findByNames()&#123; Member member1 = new Member(&quot;AAA&quot;, 10); Member member2 = new Member(&quot;BBB&quot;, 20); memberRepository.save(member1); memberRepository.save(member2); List&lt;Member&gt; result = memberRepository.findByNames(Arrays.asList(&quot;AAA&quot;, &quot;BBB&quot;)); for (Member member : result) &#123; System.out.println(&quot;Member : &quot; + member); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸°","slug":"spring/spring-data-jpa/04-spring-data-jpa-query","date":"2021-08-23T05:39:59.000Z","updated":"2024-02-26T15:37:06.108Z","comments":true,"path":"2021/08/23/spring/spring-data-jpa/04-spring-data-jpa-query/","link":"","permalink":"https://ckck803.github.io/2021/08/23/spring/spring-data-jpa/04-spring-data-jpa-query/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° @Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° DBë¡œ ë¶€í„° ì¡°íšŒí•œ ê²°ê³¼ì—ì„œ ê°ì²´ì˜ íŠ¹ì • ê°’ë§Œ ê°€ì ¸ì˜¤ê³  ì‹¶ì€ ê²½ìš° ê°ì²´ì—ì„œ feildê°’ì„ ì¡°íšŒ í•˜ë“¯ì´ ê°ì²´.field í˜•ì‹ìœ¼ë¡œ ëª…ì‹œí•´ì£¼ë©´ í•´ë‹¹ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ë°˜í™˜ í˜•ì‹ìœ¼ë¡œëŠ” í•´ë‹¹ fieldì˜ ë°ì´í„° í˜•ì‹ì— ë§ì¶°ì£¼ë©´ ëœë‹¤. @Query(&quot;select m.username from Member m&quot;)List&lt;String&gt; findUsernameList(); public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; &#123; List&lt;Member&gt; findByUsernameAndAgeGreaterThan(String username, int age); @Query(&quot;select m from Member m where m.username = :username and m.age = :age&quot;) List&lt;Member&gt; findUser(@Param(&quot;username&quot;) String username, @Param(&quot;age&quot;) int age); @Query(&quot;select m.username from Member m&quot;) List&lt;String&gt; findUsernameList();&#125; @Testpublic void findUsernameList() &#123; Member m1 = new Member(&quot;AAA&quot;, 10); Member m2 = new Member(&quot;BBB&quot;, 20); memberRepository.save(m1); memberRepository.save(m2); List&lt;String&gt; memberNames = memberRepository.findUsernameList(); for (String name : memberNames) &#123; System.out.println(&quot;Username : &quot; + name); &#125;&#125; DTOë¥¼ ì‚¬ìš©í•´ @Query ì‘ì„±í•˜ê¸°ì¼ë°˜ì ìœ¼ë¡œ DBì—ì„œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ë•Œ Entity ëª¨ë“  ê°’ë³´ë‹¤ëŠ” í•„ìš”í•œ ê°’ ëª‡ê°€ì§€ë§Œì„ ê°€ì ¸ì˜¤ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ì´ë ‡ê²Œ í•„ìš”í•œ ë°ì´í„° ë§Œì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ DTO classë¥¼ ì •ì˜í•˜ê³  DTOë¥¼ ì´ìš©í•´ Entityì—ì„œ í•„ìš”í•œ ë°ì´í„°ë§Œì„ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì´ ë” íš¨ìœ¨ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ì´ë‹¤. DTOë¥¼ ì´ìš©í•´ í•´ë‹¹ Entityì—ì„œ í•„ìš”í•œ ë°ì´í„°ë§Œì„ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•´ë³´ì!","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° @Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° DBë¡œ ë¶€í„° ì¡°íšŒí•œ ê²°ê³¼ì—ì„œ ê°ì²´ì˜ íŠ¹ì • ê°’ë§Œ ê°€ì ¸ì˜¤ê³  ì‹¶ì€ ê²½ìš° ê°ì²´ì—ì„œ feildê°’ì„ ì¡°íšŒ í•˜ë“¯ì´ ê°ì²´.field í˜•ì‹ìœ¼ë¡œ ëª…ì‹œí•´ì£¼ë©´ í•´ë‹¹ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ë°˜í™˜ í˜•ì‹ìœ¼ë¡œëŠ” í•´ë‹¹ fieldì˜ ë°ì´í„° í˜•ì‹ì— ë§ì¶°ì£¼ë©´ ëœë‹¤. @Query(&quot;select m.username from Member m&quot;)List&lt;String&gt; findUsernameList(); public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; &#123; List&lt;Member&gt; findByUsernameAndAgeGreaterThan(String username, int age); @Query(&quot;select m from Member m where m.username = :username and m.age = :age&quot;) List&lt;Member&gt; findUser(@Param(&quot;username&quot;) String username, @Param(&quot;age&quot;) int age); @Query(&quot;select m.username from Member m&quot;) List&lt;String&gt; findUsernameList();&#125; @Testpublic void findUsernameList() &#123; Member m1 = new Member(&quot;AAA&quot;, 10); Member m2 = new Member(&quot;BBB&quot;, 20); memberRepository.save(m1); memberRepository.save(m2); List&lt;String&gt; memberNames = memberRepository.findUsernameList(); for (String name : memberNames) &#123; System.out.println(&quot;Username : &quot; + name); &#125;&#125; DTOë¥¼ ì‚¬ìš©í•´ @Query ì‘ì„±í•˜ê¸°ì¼ë°˜ì ìœ¼ë¡œ DBì—ì„œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ë•Œ Entity ëª¨ë“  ê°’ë³´ë‹¤ëŠ” í•„ìš”í•œ ê°’ ëª‡ê°€ì§€ë§Œì„ ê°€ì ¸ì˜¤ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ì´ë ‡ê²Œ í•„ìš”í•œ ë°ì´í„° ë§Œì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ DTO classë¥¼ ì •ì˜í•˜ê³  DTOë¥¼ ì´ìš©í•´ Entityì—ì„œ í•„ìš”í•œ ë°ì´í„°ë§Œì„ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì´ ë” íš¨ìœ¨ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ì´ë‹¤. DTOë¥¼ ì´ìš©í•´ í•´ë‹¹ Entityì—ì„œ í•„ìš”í•œ ë°ì´í„°ë§Œì„ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•´ë³´ì! @Datapublic class MemberDto &#123; private Long id; private String username; private String teamName; public MemberDto(Long id, String username, String teamName)&#123; this.id = id; this.username = username; this.teamName = teamName; &#125;&#125; @Queryì—ì„œ DTOë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Selectì ˆì— íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•œ Class ê²½ë¡œë¥¼ ëª…ì‹œí•´ì¤˜ì•¼ í•œë‹¤. // DTO ë¡œ ê²°ê³¼ ê°’ ë°˜í™˜ ë°›ê¸°@Query(&quot;select new com.example.datajpa.dto.MemberDto( m.id, m.username, t.name)from Member m join m.team t&quot;)List&lt;MemberDto&gt; findMemberByDto(); ë°˜í™˜ ê°’ í™•ì¸í•˜ê¸°@Testpublic void findMemberDto()&#123; Team team = new Team(&quot;teamA&quot;); teamRepository.save(team); Member member = new Member(&quot;AAA&quot;, 10); member.setTeam(team); memberRepository.save(member); // Dtoë¡œ ê²°ê³¼ ê°’ì„ ë°˜í™˜ ë°›ëŠ”ë‹¤. List&lt;MemberDto&gt; memberDto = memberRepository.findMemberByDto(); for(MemberDto dto : memberDto)&#123; System.out.println(&quot;dto : &quot; + dto); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸°","slug":"spring/spring-data-jpa/03-spring-data-jpa-jpql","date":"2021-08-23T03:39:59.000Z","updated":"2024-02-26T15:37:01.647Z","comments":true,"path":"2021/08/23/spring/spring-data-jpa/03-spring-data-jpa-jpql/","link":"","permalink":"https://ckck803.github.io/2021/08/23/spring/spring-data-jpa/03-spring-data-jpa-jpql/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Table ëŒ€ìƒì´ ì•„ë‹Œ Etity(ê°ì²´) ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì‘ì„±í•˜ëŠ” ê°ì²´ ì§€í–¥ ì¿¼ë¦¬ íŠ¹ì • ë°ì´í„° ë² ì´ìŠ¤ SQLì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ì¥ì ì´ ìˆë‹¤. EntityManager ê°ì²´ createQuery ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ì¿¼ë¦¬ë¬¸ì„ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆë‹¤. select ë¬¸ìœ¼ë¡œ ë°ì´í„° ì¡°íšŒ í›„ List, Stream, ë‹¨ê±´ ë°ì´í„° 3ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ë©”ì†Œë“œ ì„¤ëª… getResultList select ë¬¸ ì‹¤í–‰í›„ ì—¬ëŸ¬ Row ê²°ê³¼ ë°ì´í„°ë¥¼ Listë¡œ ë°˜í™˜í•œë‹¤. getResultStream select ë¬¸ ì‹¤í–‰í›„ ì—¬ëŸ¬ Row ê²°ê³¼ ë°ì´í„°ë¥¼ Stream ìœ¼ë¡œ ë°˜í™˜í•œë‹¤. getSingleResult select ë¬¸ ì‹¤í–‰í›„ í•œ Row ê²°ê³¼ ë°ì´í„°ë¥¼ ë°˜í™˜í•œë‹¤. // Readpublic List&lt;Member&gt; findAll() &#123; // JPQL List&lt;Member&gt; result = em.createQuery(&quot;select m from Member m&quot;, Member.class) .getResultList(); return result;&#125; public long count() &#123; return em.createQuery(&quot;select count(m) from Member m&quot;, Long.class) .getSingleResult();&#125; public List&lt;Member&gt; findByUsernameAndAgeGreaterThan(String username, int age) &#123; return em.createQuery(&quot;select m from Member m &quot; + &quot;where m.username = :username &quot; + &quot;and m.age &gt; :age&quot;) .setParameter(&quot;username&quot;, username) .setParameter(&quot;age&quot;, age) .getResultList();&#125;","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Table ëŒ€ìƒì´ ì•„ë‹Œ Etity(ê°ì²´) ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì‘ì„±í•˜ëŠ” ê°ì²´ ì§€í–¥ ì¿¼ë¦¬ íŠ¹ì • ë°ì´í„° ë² ì´ìŠ¤ SQLì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ì¥ì ì´ ìˆë‹¤. EntityManager ê°ì²´ createQuery ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ì¿¼ë¦¬ë¬¸ì„ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆë‹¤. select ë¬¸ìœ¼ë¡œ ë°ì´í„° ì¡°íšŒ í›„ List, Stream, ë‹¨ê±´ ë°ì´í„° 3ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ë©”ì†Œë“œ ì„¤ëª… getResultList select ë¬¸ ì‹¤í–‰í›„ ì—¬ëŸ¬ Row ê²°ê³¼ ë°ì´í„°ë¥¼ Listë¡œ ë°˜í™˜í•œë‹¤. getResultStream select ë¬¸ ì‹¤í–‰í›„ ì—¬ëŸ¬ Row ê²°ê³¼ ë°ì´í„°ë¥¼ Stream ìœ¼ë¡œ ë°˜í™˜í•œë‹¤. getSingleResult select ë¬¸ ì‹¤í–‰í›„ í•œ Row ê²°ê³¼ ë°ì´í„°ë¥¼ ë°˜í™˜í•œë‹¤. // Readpublic List&lt;Member&gt; findAll() &#123; // JPQL List&lt;Member&gt; result = em.createQuery(&quot;select m from Member m&quot;, Member.class) .getResultList(); return result;&#125; public long count() &#123; return em.createQuery(&quot;select count(m) from Member m&quot;, Long.class) .getSingleResult();&#125; public List&lt;Member&gt; findByUsernameAndAgeGreaterThan(String username, int age) &#123; return em.createQuery(&quot;select m from Member m &quot; + &quot;where m.username = :username &quot; + &quot;and m.age &gt; :age&quot;) .setParameter(&quot;username&quot;, username) .setParameter(&quot;age&quot;, age) .getResultList();&#125; @Testpublic void findByUsernameAndAgeGreaterThen()&#123; Member member1 = new Member(&quot;AAA&quot;, 10); Member member2 = new Member(&quot;AAA&quot;, 20); memberJpaRepository.save(member1); memberJpaRepository.save(member2); List&lt;Member&gt; result = memberJpaRepository.findByUsernameAndAgeGreaterThan(&quot;AAA&quot;, 15); assertThat(result.get(0).getUsername()).isEqualTo(&quot;AAA&quot;); assertThat(result.get(0).getAge()).isEqualTo(20); assertThat(result.size()).isEqualTo(1);&#125; @Query, ë¦¬í¬ì§€í† ë¦¬ ë©”ì†Œë“œì— ì¿¼ë¦¬ ì •ì˜í•˜ê¸° Query ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ë©´ ì¸í„°í˜ì´ìŠ¤ ë©”ì†Œë“œì— JPQL ì„ ë°”ë¡œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.ì¿¼ë¦¬ë¬¸ì— ì˜¤íƒ€ê°€ ìˆì–´ë„ Application ë¡œë”© ì‹œì ì— íŒŒì‹±ì„ ì§„í–‰í•´ ì˜¤ë¥˜ë¥¼ ì¡ì•„ì¤€ë‹¤. @Query(&quot;select m from Member m where m.username = :username and m.age = :age&quot;)List&lt;Member&gt; findUser(@Param(&quot;username&quot;) String username, @Param(&quot;age&quot;) int age); @Testpublic void testQuery()&#123; Member m1 = new Member(&quot;AAA&quot;, 10); Member m2 = new Member(&quot;AAA&quot;, 20); memberRepository.save(m1); memberRepository.save(m2); List&lt;Member&gt; members = memberRepository.findUser(&quot;AAA&quot;, 10); assertThat(members.get(0).getUsername()).isEqualTo(&quot;AAA&quot;); assertThat(members.get(0).getAge()).isEqualTo(10);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸°","slug":"spring/spring-data-jpa/02-spring-data-jpa-methodname","date":"2021-08-22T14:29:59.000Z","updated":"2024-02-26T15:36:58.107Z","comments":true,"path":"2021/08/22/spring/spring-data-jpa/02-spring-data-jpa-methodname/","link":"","permalink":"https://ckck803.github.io/2021/08/22/spring/spring-data-jpa/02-spring-data-jpa-methodname/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸°https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation @Testpublic void findByUsernameAndAgeGreaterThen()&#123; Member member1 = new Member(&quot;AAA&quot;, 10); Member member2 = new Member(&quot;AAA&quot;, 20); memberJpaRepository.save(member1); memberJpaRepository.save(member2); List&lt;Member&gt; result = memberJpaRepository.findByUsernameAndAgeGreaterThan(&quot;AAA&quot;, 15); assertThat(result.get(0).getUsername()).isEqualTo(&quot;AAA&quot;); assertThat(result.get(0).getAge()).isEqualTo(20); assertThat(result.size()).isEqualTo(1);&#125; List&lt;Member&gt; findByUsernameAndAgeGreaterThan(String username, int age);","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸°https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation @Testpublic void findByUsernameAndAgeGreaterThen()&#123; Member member1 = new Member(&quot;AAA&quot;, 10); Member member2 = new Member(&quot;AAA&quot;, 20); memberJpaRepository.save(member1); memberJpaRepository.save(member2); List&lt;Member&gt; result = memberJpaRepository.findByUsernameAndAgeGreaterThan(&quot;AAA&quot;, 15); assertThat(result.get(0).getUsername()).isEqualTo(&quot;AAA&quot;); assertThat(result.get(0).getAge()).isEqualTo(20); assertThat(result.size()).isEqualTo(1);&#125; List&lt;Member&gt; findByUsernameAndAgeGreaterThan(String username, int age);","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"Spring Data JPA - ì‹œì‘í•˜ê¸°","slug":"spring/spring-data-jpa/01-spring-data-jpa","date":"2021-08-22T13:39:59.000Z","updated":"2024-02-26T15:36:54.069Z","comments":true,"path":"2021/08/22/spring/spring-data-jpa/01-spring-data-jpa/","link":"","permalink":"https://ckck803.github.io/2021/08/22/spring/spring-data-jpa/01-spring-data-jpa/","excerpt":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° Spring Data JPA ì‹œì‘í•˜ê¸°JPAë¥¼ ì‚¬ìš©í•´ Repository êµ¬ì„±í•˜ê¸°ìŠ¤í”„ë§ì—ì„œ EntityManager ëŠ” ë‹¤ë¥¸ Beanë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ PersistenceContext ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ê°ì²´ë¥¼ ì£¼ì… ë°›ëŠ”ë‹¤.EntityManager ë¥¼ ì´ìš©í•´ ê°„ë‹¨í•˜ê²Œ CRUDë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. persist : Create remove : Delete find : Read @Repositorypublic class MemberRepository&#123; @PersistenceContext private EntityManager em; // Create public Member save(Member member)&#123; em.persist(member); // DB ì— ë°ì´í„° ì €ì¥ return member; &#125; // Delete public void delete(Member member) &#123; em.remove(member); // DB ì— ì €ì¥ëœ ë°ì´í„° ì‚­ì œ &#125; // Read public Member find(Long id)&#123; Member member = em.find(Member.class, id); // DB ì— ì €ì¥ëœ ë°ì´í„° ì¡°íšŒ return member; &#125;&#125; ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” JpaRepositoryë¥¼ ì‚¬ìš©ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” JpaRepository ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ì¸ CRUD ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ì£¼ê¸° ë•Œë¬¸ì— ë³´ë‹¤ ê°„í¸í•˜ê²Œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.","text":"ëª©ì°¨ Spring Data JPA - ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ Spring Data JPA - Convertor Spring Data JPA - Auditing Spring Data JPA - Paging Request Paramater Spring Data JPA - í˜ì´ì§•ê³¼ ì •ë ¬ Post not found: spring/spring-data-jpa/07-spring-data-jpa Spring Data JPA - ë°˜í™˜ íƒ€ì… Spring Data JPA - Query íŒŒë¼ë¯¸í„° ë°”ì¸ë”© Spring Data JPA - Query ë¥¼ ì´ìš©í•œ ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° Spring Data JPA - JPQL (Java Persistence Query Lange) ì‚¬ìš©í•˜ê¸° Spring Data JPA - ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±í•˜ê¸° Spring Data JPA - ì‹œì‘í•˜ê¸° Spring Data JPA ì‹œì‘í•˜ê¸°JPAë¥¼ ì‚¬ìš©í•´ Repository êµ¬ì„±í•˜ê¸°ìŠ¤í”„ë§ì—ì„œ EntityManager ëŠ” ë‹¤ë¥¸ Beanë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ PersistenceContext ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ê°ì²´ë¥¼ ì£¼ì… ë°›ëŠ”ë‹¤.EntityManager ë¥¼ ì´ìš©í•´ ê°„ë‹¨í•˜ê²Œ CRUDë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. persist : Create remove : Delete find : Read @Repositorypublic class MemberRepository&#123; @PersistenceContext private EntityManager em; // Create public Member save(Member member)&#123; em.persist(member); // DB ì— ë°ì´í„° ì €ì¥ return member; &#125; // Delete public void delete(Member member) &#123; em.remove(member); // DB ì— ì €ì¥ëœ ë°ì´í„° ì‚­ì œ &#125; // Read public Member find(Long id)&#123; Member member = em.find(Member.class, id); // DB ì— ì €ì¥ëœ ë°ì´í„° ì¡°íšŒ return member; &#125;&#125; ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” JpaRepositoryë¥¼ ì‚¬ìš©ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” JpaRepository ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ì¸ CRUD ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ì£¼ê¸° ë•Œë¬¸ì— ë³´ë‹¤ ê°„í¸í•˜ê²Œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; &#123;&#125; @SpringBootTest@Transactional@Rollback(value = false)public class MemberRepositoryTest &#123; @Autowired private MemberRepository memberRepository; @Test public void testMember()&#123; Member member = new Member(&quot;memberA&quot;); Member savedMember = memberRepository.save(member); Member findMember = memberRepository.findById(savedMember.getId()).get(); assertThat(findMember.getId()).isEqualTo(member.getId()); assertThat(findMember.getUsername()).isEqualTo(member.getUsername()); assertThat(findMember).isEqualTo(member); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë©”ë‰´ ë¦¬ë‰´ì–¼ (JAVA)","slug":"algorithm/programmers/ê²½ìš°ì˜ìˆ˜/72411-ë©”ë‰´ë¦¬ë‰´ì–¼-Java","date":"2021-08-22T11:10:40.000Z","updated":"2024-11-28T13:59:32.541Z","comments":true,"path":"2021/08/22/algorithm/programmers/ê²½ìš°ì˜ìˆ˜/72411-ë©”ë‰´ë¦¬ë‰´ì–¼-Java/","link":"","permalink":"https://ckck803.github.io/2021/08/22/algorithm/programmers/%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98/72411-%EB%A9%94%EB%89%B4%EB%A6%AC%EB%89%B4%EC%96%BC-Java/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/72411 ë¬¸ì œ í’€ì´ì²˜ìŒì— ë¬¸ìì—´ ë¹„êµë¡œ ì ‘ê·¼í•´ ì—„ì²­ í•´ë©¨ë‹¤. ì´ ë¬¸ì œëŠ” ë¬¸ìì—´ ë¹„êµë¡œ ì ‘ê·¼ì„ í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ í•œ ì‚¬ëŒì´ ì‹œí‚¨ ë©”ë‰´ ì½”ìŠ¤ë¥¼ ì´ìš©í•´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë¹„êµí•˜ëŠ” ë¬¸ì œë‹¤. ì½”ìŠ¤ë¥¼ ì‚¬ì „ ìˆœì„œë¡œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ì£¼ë¬¸ì„ ì •ë ¬í•´ì¤€ë‹¤. í•œ ì†ë‹˜ì´ ì£¼ë¬¸í•œ ë‹¨í’ˆ ë©”ë‰´ë“¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ì½”ìŠ¤ ì¡°í•©ì„ ë§Œë“¤ì–´ì¤€ë‹¤. ì½”ìŠ¤ë‚´ ë©”ë‰´ ê°œìˆ˜ì— ë”°ë¼ ê°€ì¥ ë§ì´ ì„ íƒëœ íšŸìˆ˜ë¥¼ ì €ì¥í•´ ë†“ëŠ”ë‹¤. ì½”ìŠ¤ë¥¼ ì„ íƒí• ë•Œ ì½”ìŠ¤ë‚´ ë©”ë‰´ê°€ ë©”ë‰´ ê°œìˆ˜ì—ì„œ ê°€ì¥ ë§ì´ ì„ íƒëœ íšŸìˆ˜ì™€ ê°™ë‹¤ë©´ ë„£ì–´ì¤€ë‹¤. ëª¨ë“  ì½”ìŠ¤ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” í•¨ìˆ˜public void findAllCourse(String order, String subOrder, int depth) &#123; if (depth == order.length()) &#123; if (subOrder.length() &gt; 1) &#123; if (map.containsKey(subOrder)) &#123; int value = map.get(subOrder); map.put(subOrder, value + 1); &#125; else &#123; map.put(subOrder, 1); &#125; &#125; return; &#125; findAllCourse(order, subOrder + order.charAt(depth), depth + 1); findAllCourse(order, subOrder, depth + 1);&#125; ì „ì²´ ì†ŒìŠ¤import java.io.*;import java.util.*;class Solution &#123; Map&lt;String, Integer&gt; map = new TreeMap&lt;&gt;(); public void findAllCourse(String order, String subOrder, int depth) &#123; if (depth == order.length()) &#123; if (subOrder.length() &gt; 1) &#123; if (map.containsKey(subOrder)) &#123; int value = map.get(subOrder); map.put(subOrder, value + 1); &#125; else &#123; map.put(subOrder, 1); &#125; &#125; return; &#125; findAllCourse(order, subOrder + order.charAt(depth), depth + 1); findAllCourse(order, subOrder, depth + 1); &#125; public String[] solution(String[] orders, int[] course) &#123; for (String order : orders) &#123; // ë¬¸ìì—´ë‚´ ë¬¸ìë“¤ì„ ì‚¬ì „ ìˆœì„œëŒ€ë¡œ ì •ë ¬ char[] charArr = order.toCharArray(); Arrays.sort(charArr); String sortedOrder = new String(charArr); // ì£¼ë¬¸í•œ ë©”ë‰´ë“¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ì½”ìŠ¤ ì¡°í•©ì„ ë§Œë“¤ì–´ì¤€ë‹¤. findAllCourse(sortedOrder, &quot;&quot;, 0); &#125; int[] maxValues = new int[101]; ArrayList&lt;String&gt; result = new ArrayList&lt;&gt;(); map.forEach((key, value) -&gt; maxValues[key.length()] = Math.max(maxValues[key.length()], value)); map.forEach((key, value) -&gt; &#123; if (value &gt;= maxValues[key.length()] &amp;&amp; value &gt; 1) &#123; for (int i = 0; i &lt; course.length; i++) &#123; if (course[i] == key.length()) &#123; result.add(key); &#125; &#125; &#125; &#125;); String[] answer = new String[result.size()]; int index = 0; for (String s : result) &#123; answer[index++] = s; &#125; return answer; &#125;&#125;","text":"https://programmers.co.kr/learn/courses/30/lessons/72411 ë¬¸ì œ í’€ì´ì²˜ìŒì— ë¬¸ìì—´ ë¹„êµë¡œ ì ‘ê·¼í•´ ì—„ì²­ í•´ë©¨ë‹¤. ì´ ë¬¸ì œëŠ” ë¬¸ìì—´ ë¹„êµë¡œ ì ‘ê·¼ì„ í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ í•œ ì‚¬ëŒì´ ì‹œí‚¨ ë©”ë‰´ ì½”ìŠ¤ë¥¼ ì´ìš©í•´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë¹„êµí•˜ëŠ” ë¬¸ì œë‹¤. ì½”ìŠ¤ë¥¼ ì‚¬ì „ ìˆœì„œë¡œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ì£¼ë¬¸ì„ ì •ë ¬í•´ì¤€ë‹¤. í•œ ì†ë‹˜ì´ ì£¼ë¬¸í•œ ë‹¨í’ˆ ë©”ë‰´ë“¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ì½”ìŠ¤ ì¡°í•©ì„ ë§Œë“¤ì–´ì¤€ë‹¤. ì½”ìŠ¤ë‚´ ë©”ë‰´ ê°œìˆ˜ì— ë”°ë¼ ê°€ì¥ ë§ì´ ì„ íƒëœ íšŸìˆ˜ë¥¼ ì €ì¥í•´ ë†“ëŠ”ë‹¤. ì½”ìŠ¤ë¥¼ ì„ íƒí• ë•Œ ì½”ìŠ¤ë‚´ ë©”ë‰´ê°€ ë©”ë‰´ ê°œìˆ˜ì—ì„œ ê°€ì¥ ë§ì´ ì„ íƒëœ íšŸìˆ˜ì™€ ê°™ë‹¤ë©´ ë„£ì–´ì¤€ë‹¤. ëª¨ë“  ì½”ìŠ¤ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” í•¨ìˆ˜public void findAllCourse(String order, String subOrder, int depth) &#123; if (depth == order.length()) &#123; if (subOrder.length() &gt; 1) &#123; if (map.containsKey(subOrder)) &#123; int value = map.get(subOrder); map.put(subOrder, value + 1); &#125; else &#123; map.put(subOrder, 1); &#125; &#125; return; &#125; findAllCourse(order, subOrder + order.charAt(depth), depth + 1); findAllCourse(order, subOrder, depth + 1);&#125; ì „ì²´ ì†ŒìŠ¤import java.io.*;import java.util.*;class Solution &#123; Map&lt;String, Integer&gt; map = new TreeMap&lt;&gt;(); public void findAllCourse(String order, String subOrder, int depth) &#123; if (depth == order.length()) &#123; if (subOrder.length() &gt; 1) &#123; if (map.containsKey(subOrder)) &#123; int value = map.get(subOrder); map.put(subOrder, value + 1); &#125; else &#123; map.put(subOrder, 1); &#125; &#125; return; &#125; findAllCourse(order, subOrder + order.charAt(depth), depth + 1); findAllCourse(order, subOrder, depth + 1); &#125; public String[] solution(String[] orders, int[] course) &#123; for (String order : orders) &#123; // ë¬¸ìì—´ë‚´ ë¬¸ìë“¤ì„ ì‚¬ì „ ìˆœì„œëŒ€ë¡œ ì •ë ¬ char[] charArr = order.toCharArray(); Arrays.sort(charArr); String sortedOrder = new String(charArr); // ì£¼ë¬¸í•œ ë©”ë‰´ë“¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ì½”ìŠ¤ ì¡°í•©ì„ ë§Œë“¤ì–´ì¤€ë‹¤. findAllCourse(sortedOrder, &quot;&quot;, 0); &#125; int[] maxValues = new int[101]; ArrayList&lt;String&gt; result = new ArrayList&lt;&gt;(); map.forEach((key, value) -&gt; maxValues[key.length()] = Math.max(maxValues[key.length()], value)); map.forEach((key, value) -&gt; &#123; if (value &gt;= maxValues[key.length()] &amp;&amp; value &gt; 1) &#123; for (int i = 0; i &lt; course.length; i++) &#123; if (course[i] == key.length()) &#123; result.add(key); &#125; &#125; &#125; &#125;); String[] answer = new String[result.size()]; int index = 0; for (String s : result) &#123; answer[index++] = s; &#125; return answer; &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"}],"tags":[{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"}]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ë©”ë‰´ ë¦¬ë‰´ì–¼ (Cpp)","slug":"algorithm/programmers/ê²½ìš°ì˜ìˆ˜/72411-ë©”ë‰´ë¦¬ë‰´ì–¼-Cpp","date":"2021-08-20T11:10:40.000Z","updated":"2024-11-28T13:59:32.950Z","comments":true,"path":"2021/08/20/algorithm/programmers/ê²½ìš°ì˜ìˆ˜/72411-ë©”ë‰´ë¦¬ë‰´ì–¼-Cpp/","link":"","permalink":"https://ckck803.github.io/2021/08/20/algorithm/programmers/%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98/72411-%EB%A9%94%EB%89%B4%EB%A6%AC%EB%89%B4%EC%96%BC-Cpp/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/72411 ë¬¸ì œ í’€ì´ì²˜ìŒì— ë¬¸ìì—´ ë¹„êµë¡œ ì ‘ê·¼í•´ ì—„ì²­ í•´ë©¨ë‹¤. ì´ ë¬¸ì œëŠ” ë¬¸ìì—´ ë¹„êµë¡œ ì ‘ê·¼ì„ í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ í•œ ì‚¬ëŒì´ ì‹œí‚¨ ë©”ë‰´ ì½”ìŠ¤ë¥¼ ì´ìš©í•´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë¹„êµí•˜ëŠ” ë¬¸ì œë‹¤. ì½”ìŠ¤ë¥¼ ì‚¬ì „ ìˆœì„œë¡œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ì£¼ë¬¸ì„ ì •ë ¬í•´ì¤€ë‹¤. í•œ ì†ë‹˜ì´ ì£¼ë¬¸í•œ ë‹¨í’ˆ ë©”ë‰´ë“¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ì½”ìŠ¤ ì¡°í•©ì„ ë§Œë“¤ì–´ì¤€ë‹¤. ì½”ìŠ¤ë‚´ ë©”ë‰´ ê°œìˆ˜ì— ë”°ë¼ ê°€ì¥ ë§ì´ ì„ íƒëœ íšŸìˆ˜ë¥¼ ì €ì¥í•´ ë†“ëŠ”ë‹¤. ì½”ìŠ¤ë¥¼ ì„ íƒí• ë•Œ ì½”ìŠ¤ë‚´ ë©”ë‰´ê°€ ë©”ë‰´ ê°œìˆ˜ì—ì„œ ê°€ì¥ ë§ì´ ì„ íƒëœ íšŸìˆ˜ì™€ ê°™ë‹¤ë©´ ë„£ì–´ì¤€ë‹¤. ëª¨ë“  ì½”ìŠ¤ ì¡°í•©ì„ ë§Œë“¤ì–´ì£¼ëŠ” í•¨ìˆ˜void makeAllCourse(string subOrder, string order, int depth) &#123; if (depth &gt; order.size()) &#123; return; &#125; if (depth == order.size() &amp;&amp; subOrder.size() &gt; 1) &#123; if (m.find(subOrder) == m.end()) &#123; m[subOrder] = 1; &#125; else &#123; m[subOrder] += 1; &#125; &#125; // í˜„ì¬ ë©”ë‰´ë¥¼ ì„ íƒí•˜ê³  ë‹¤ìŒ ë©”ë‰´ë¡œ ë„˜ì–´ê°„ë‹¤. makeAllCourse(subOrder + order[depth], order, depth + 1); // í˜„ì¬ ë©”ë‰´ë¥¼ ì„ íƒí•˜ì§€ ì•Šê³  ë‹¤ìŒ ë©”ë‰´ë¡œ ë„˜ì–´ê°„ë‹¤. makeAllCourse(subOrder, order, depth + 1);&#125; ì „ì²´ ì†ŒìŠ¤#include &lt;bits/stdc++.h&gt;using namespace std;map&lt;string, int&gt; m;int maxValues[100];void makeAllCourse(string subOrder, string order, int depth) &#123; if (depth &gt; order.size()) &#123; return; &#125; if (depth == order.size() &amp;&amp; subOrder.size() &gt; 1) &#123; if (m.find(subOrder) == m.end()) &#123; m[subOrder] = 1; &#125; else &#123; m[subOrder] += 1; &#125; &#125; makeAllCourse(subOrder + order[depth], order, depth + 1); makeAllCourse(subOrder, order, depth + 1);&#125;vector&lt;string&gt; solution(vector&lt;string&gt; orders, vector&lt;int&gt; course) &#123; vector&lt;string&gt; answer; for (int i = 0; i &lt; orders.size(); i++) &#123; sort(orders[i].begin(), orders[i].end()); makeAllCourse(&quot;&quot;, orders[i], 0); &#125; for (auto iter = m.begin(); iter != m.end(); iter++) &#123; int courseCount = iter-&gt;first.length(); maxValues[courseCount] = max(maxValues[courseCount], iter-&gt;second); &#125; for (auto iter = m.begin(); iter != m.end(); iter++) &#123; int courseCount = iter-&gt;first.length(); if (iter-&gt;second == maxValues[courseCount] &amp;&amp; iter-&gt;second &gt;= 2) &#123; for (int i = 0; i &lt; course.size(); i++) &#123; if (courseCount == course[i]) &#123; answer.push_back(iter-&gt;first); &#125; &#125; &#125; &#125; return answer;&#125;","text":"https://programmers.co.kr/learn/courses/30/lessons/72411 ë¬¸ì œ í’€ì´ì²˜ìŒì— ë¬¸ìì—´ ë¹„êµë¡œ ì ‘ê·¼í•´ ì—„ì²­ í•´ë©¨ë‹¤. ì´ ë¬¸ì œëŠ” ë¬¸ìì—´ ë¹„êµë¡œ ì ‘ê·¼ì„ í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ í•œ ì‚¬ëŒì´ ì‹œí‚¨ ë©”ë‰´ ì½”ìŠ¤ë¥¼ ì´ìš©í•´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë¹„êµí•˜ëŠ” ë¬¸ì œë‹¤. ì½”ìŠ¤ë¥¼ ì‚¬ì „ ìˆœì„œë¡œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ì£¼ë¬¸ì„ ì •ë ¬í•´ì¤€ë‹¤. í•œ ì†ë‹˜ì´ ì£¼ë¬¸í•œ ë‹¨í’ˆ ë©”ë‰´ë“¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ì½”ìŠ¤ ì¡°í•©ì„ ë§Œë“¤ì–´ì¤€ë‹¤. ì½”ìŠ¤ë‚´ ë©”ë‰´ ê°œìˆ˜ì— ë”°ë¼ ê°€ì¥ ë§ì´ ì„ íƒëœ íšŸìˆ˜ë¥¼ ì €ì¥í•´ ë†“ëŠ”ë‹¤. ì½”ìŠ¤ë¥¼ ì„ íƒí• ë•Œ ì½”ìŠ¤ë‚´ ë©”ë‰´ê°€ ë©”ë‰´ ê°œìˆ˜ì—ì„œ ê°€ì¥ ë§ì´ ì„ íƒëœ íšŸìˆ˜ì™€ ê°™ë‹¤ë©´ ë„£ì–´ì¤€ë‹¤. ëª¨ë“  ì½”ìŠ¤ ì¡°í•©ì„ ë§Œë“¤ì–´ì£¼ëŠ” í•¨ìˆ˜void makeAllCourse(string subOrder, string order, int depth) &#123; if (depth &gt; order.size()) &#123; return; &#125; if (depth == order.size() &amp;&amp; subOrder.size() &gt; 1) &#123; if (m.find(subOrder) == m.end()) &#123; m[subOrder] = 1; &#125; else &#123; m[subOrder] += 1; &#125; &#125; // í˜„ì¬ ë©”ë‰´ë¥¼ ì„ íƒí•˜ê³  ë‹¤ìŒ ë©”ë‰´ë¡œ ë„˜ì–´ê°„ë‹¤. makeAllCourse(subOrder + order[depth], order, depth + 1); // í˜„ì¬ ë©”ë‰´ë¥¼ ì„ íƒí•˜ì§€ ì•Šê³  ë‹¤ìŒ ë©”ë‰´ë¡œ ë„˜ì–´ê°„ë‹¤. makeAllCourse(subOrder, order, depth + 1);&#125; ì „ì²´ ì†ŒìŠ¤#include &lt;bits/stdc++.h&gt;using namespace std;map&lt;string, int&gt; m;int maxValues[100];void makeAllCourse(string subOrder, string order, int depth) &#123; if (depth &gt; order.size()) &#123; return; &#125; if (depth == order.size() &amp;&amp; subOrder.size() &gt; 1) &#123; if (m.find(subOrder) == m.end()) &#123; m[subOrder] = 1; &#125; else &#123; m[subOrder] += 1; &#125; &#125; makeAllCourse(subOrder + order[depth], order, depth + 1); makeAllCourse(subOrder, order, depth + 1);&#125;vector&lt;string&gt; solution(vector&lt;string&gt; orders, vector&lt;int&gt; course) &#123; vector&lt;string&gt; answer; for (int i = 0; i &lt; orders.size(); i++) &#123; sort(orders[i].begin(), orders[i].end()); makeAllCourse(&quot;&quot;, orders[i], 0); &#125; for (auto iter = m.begin(); iter != m.end(); iter++) &#123; int courseCount = iter-&gt;first.length(); maxValues[courseCount] = max(maxValues[courseCount], iter-&gt;second); &#125; for (auto iter = m.begin(); iter != m.end(); iter++) &#123; int courseCount = iter-&gt;first.length(); if (iter-&gt;second == maxValues[courseCount] &amp;&amp; iter-&gt;second &gt;= 2) &#123; for (int i = 0; i &lt; course.size(); i++) &#123; if (courseCount == course[i]) &#123; answer.push_back(iter-&gt;first); &#125; &#125; &#125; &#125; return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"}],"tags":[{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"}]},{"title":"ë°±ì¤€ 2178 - ë¯¸ë¡œíƒìƒ‰","slug":"algorithm/baekjoon/BFS/2178-ë¯¸ë¡œíƒìƒ‰","date":"2021-08-17T06:19:42.000Z","updated":"2024-11-28T13:59:36.157Z","comments":true,"path":"2021/08/17/algorithm/baekjoon/BFS/2178-ë¯¸ë¡œíƒìƒ‰/","link":"","permalink":"https://ckck803.github.io/2021/08/17/algorithm/baekjoon/BFS/2178-%EB%AF%B8%EB%A1%9C%ED%83%90%EC%83%89/","excerpt":"ë§í¬https://www.acmicpc.net/problem/2178 ë¬¸ì œ í’€ì´ê¸°ë³¸ì ì¸ BFS ë¬¸ì œë‹¤. ì¡°ê±´ì— ë§ì¶° ê°’ì„ ì½ì–´ì˜¨ í›„ íƒìƒ‰ì„ ì§„í–‰í•˜ë©´ ì›í•˜ëŠ” ê°’ì„ ì–»ì„ ìˆ˜ ìˆë‹¤. ì „ì²´ ì†ŒìŠ¤import java.io.BufferedReader;import java.io.IOError;import java.io.IOException;import java.io.InputStreamReader;import java.util.LinkedList;import java.util.Queue;public class Main &#123; public static int height, width; public static int[] dx = &#123; 0, 0, 1, -1 &#125;; public static int[] dy = &#123; 1, -1, 0, 0 &#125;; public static int[][] map; public static int bfs() &#123; Queue&lt;int[]&gt; q = new LinkedList&lt;&gt;(); boolean check[][] = new boolean[height + 1][width + 1]; q.offer(new int[] &#123; 0, 0 &#125;); check[0][0] = true; int count = 0; while (!q.isEmpty()) &#123; int qSize = q.size(); count++; while (qSize-- &gt; 0) &#123; int[] point = q.remove(); int cntY = point[0]; int cntX = point[1]; if (cntY == height - 1 &amp;&amp; cntX == width - 1) &#123; return count; &#125; for (int i = 0; i &lt; 4; i++) &#123; int nY = cntY + dy[i]; int nX = cntX + dx[i]; if (0 &lt;= nY &amp;&amp; nY &lt; height &amp;&amp; 0 &lt;= nX &amp;&amp; nX &lt; width) &#123; if (check[nY][nX] == false &amp;&amp; map[nY][nX] == 1) &#123; check[nY][nX] = true; q.offer(new int[] &#123; nY, nX &#125;); &#125; &#125; &#125; &#125; &#125; return count; &#125; public static void main(String args[]) throws IOException &#123; BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); String[] inputValues = br.readLine().split(&quot; &quot;); height = Integer.parseInt(inputValues[0]); width = Integer.parseInt(inputValues[1]); map = new int[height + 1][width + 1]; for (int h = 0; h &lt; height; h++) &#123; String inputValue = br.readLine(); for (int w = 0; w &lt; width; w++) &#123; // System.out.println(inputValue.charAt(w)); map[h][w] = inputValue.charAt(w) - &#x27;0&#x27;; &#125; &#125; int count = bfs(); System.out.println(count); br.close(); &#125;&#125;","text":"ë§í¬https://www.acmicpc.net/problem/2178 ë¬¸ì œ í’€ì´ê¸°ë³¸ì ì¸ BFS ë¬¸ì œë‹¤. ì¡°ê±´ì— ë§ì¶° ê°’ì„ ì½ì–´ì˜¨ í›„ íƒìƒ‰ì„ ì§„í–‰í•˜ë©´ ì›í•˜ëŠ” ê°’ì„ ì–»ì„ ìˆ˜ ìˆë‹¤. ì „ì²´ ì†ŒìŠ¤import java.io.BufferedReader;import java.io.IOError;import java.io.IOException;import java.io.InputStreamReader;import java.util.LinkedList;import java.util.Queue;public class Main &#123; public static int height, width; public static int[] dx = &#123; 0, 0, 1, -1 &#125;; public static int[] dy = &#123; 1, -1, 0, 0 &#125;; public static int[][] map; public static int bfs() &#123; Queue&lt;int[]&gt; q = new LinkedList&lt;&gt;(); boolean check[][] = new boolean[height + 1][width + 1]; q.offer(new int[] &#123; 0, 0 &#125;); check[0][0] = true; int count = 0; while (!q.isEmpty()) &#123; int qSize = q.size(); count++; while (qSize-- &gt; 0) &#123; int[] point = q.remove(); int cntY = point[0]; int cntX = point[1]; if (cntY == height - 1 &amp;&amp; cntX == width - 1) &#123; return count; &#125; for (int i = 0; i &lt; 4; i++) &#123; int nY = cntY + dy[i]; int nX = cntX + dx[i]; if (0 &lt;= nY &amp;&amp; nY &lt; height &amp;&amp; 0 &lt;= nX &amp;&amp; nX &lt; width) &#123; if (check[nY][nX] == false &amp;&amp; map[nY][nX] == 1) &#123; check[nY][nX] = true; q.offer(new int[] &#123; nY, nX &#125;); &#125; &#125; &#125; &#125; &#125; return count; &#125; public static void main(String args[]) throws IOException &#123; BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); String[] inputValues = br.readLine().split(&quot; &quot;); height = Integer.parseInt(inputValues[0]); width = Integer.parseInt(inputValues[1]); map = new int[height + 1][width + 1]; for (int h = 0; h &lt; height; h++) &#123; String inputValue = br.readLine(); for (int w = 0; w &lt; width; w++) &#123; // System.out.println(inputValue.charAt(w)); map[h][w] = inputValue.charAt(w) - &#x27;0&#x27;; &#125; &#125; int count = bfs(); System.out.println(count); br.close(); &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"BFS","slug":"Develop/Beakjoon/BFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/BFS/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"},{"name":"BFS","slug":"BFS","permalink":"https://ckck803.github.io/tags/BFS/"}]},{"title":"Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy","slug":"spring/spring-security/security/role-hierarchy","date":"2021-08-16T07:34:10.000Z","updated":"2024-02-26T16:28:09.586Z","comments":true,"path":"2021/08/16/spring/spring-security/security/role-hierarchy/","link":"","permalink":"https://ckck803.github.io/2021/08/16/spring/spring-security/security/role-hierarchy/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ @RoleHierarcyìš°ë¦¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ADMIN, MANAGER, USER ê¶Œí•œì´ ìˆë‹¤ê³  í•˜ë©´ Admin ê¶Œí•œìœ¼ë¡œ ëª¨ë“  ìì›ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°í•˜ì§€ë§Œ Spring SecurityëŠ” ìƒí•˜ìœ„ ê°œë…ìœ¼ë¡œ ì¸ì‹í•˜ì§€ ëª»í•˜ê³  ê¶Œí•œë“¤ì„ ë…ë¦½ì ìœ¼ë¡œ ì¸ì‹í•´ MANAGER ê¶Œí•œ, USER ê¶Œí•œ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤. ë§Œì•½ ì ‘ê·¼í•˜ë ¤ê³  í•˜ë©´ ì ‘ê·¼ ê¶Œí•œê³¼ ê´€ë ¨ëœ 403(Forbidden) Error ê°€ ë°œìƒí•œë‹¤. ê¶Œí•œê°„ ìƒí•˜ ê´€ê³„ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ Spring Securityì—ì„œëŠ” RoleHierarchy ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ê³  êµ¬í˜„ì²´ë¡œëŠ” RoleHierarchyImpl ë¥¼ ì œê³µí•œë‹¤.ê¶Œí•œì„ ì ìš©í•˜ê¸° ìœ„í•´ RoleHierarchyVoter ê°ì²´ì— RoleHierarchy ê°ì²´ë¥¼ ë„£ì–´ì¤Œìœ¼ë¡œì¨ ê¶Œí•œ ê³„ì¸µ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. RoleHierarchy : ê¶Œí•œê°„ ê³„ì¸µ ê´€ê³„ ì •ë³´ë¥¼ ì €ì¥ RoleHierarchyVoter ì¸ê°€ ì²˜ë¦¬ì‹œ RoleHierarchy ë‚´ ì €ì¥ëœ ê¶Œí•œê°„ ê³„ì¸µ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. ê¶Œí•œì„ ì €ì¥í•˜ê¸° ìœ„í•œ Entity@Entity@Table(name = &quot;ROLE_HIERARCHY&quot;)@AllArgsConstructor@NoArgsConstructor@Data@Builder@ToString(exclude = &#123;&quot;parentName&quot;, &quot;roleHierarchy&quot;&#125;)public class RoleHierarchy implements Serializable &#123; @Id @GeneratedValue private Long id; @Column(name = &quot;child_name&quot;) private String childName; @ManyToOne(cascade = &#123;CascadeType.ALL&#125;, fetch = FetchType.LAZY) @JoinColumn(name = &quot;parent_name&quot;, referencedColumnName = &quot;child_name&quot;) private RoleHierarchy parentName; @OneToMany(mappedBy = &quot;parentName&quot;, cascade = &#123;CascadeType.ALL &#125;) private Set&lt;RoleHierarchy&gt; roleHierarchy = new HashSet&lt;&gt;();&#125;","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ @RoleHierarcyìš°ë¦¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ADMIN, MANAGER, USER ê¶Œí•œì´ ìˆë‹¤ê³  í•˜ë©´ Admin ê¶Œí•œìœ¼ë¡œ ëª¨ë“  ìì›ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°í•˜ì§€ë§Œ Spring SecurityëŠ” ìƒí•˜ìœ„ ê°œë…ìœ¼ë¡œ ì¸ì‹í•˜ì§€ ëª»í•˜ê³  ê¶Œí•œë“¤ì„ ë…ë¦½ì ìœ¼ë¡œ ì¸ì‹í•´ MANAGER ê¶Œí•œ, USER ê¶Œí•œ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤. ë§Œì•½ ì ‘ê·¼í•˜ë ¤ê³  í•˜ë©´ ì ‘ê·¼ ê¶Œí•œê³¼ ê´€ë ¨ëœ 403(Forbidden) Error ê°€ ë°œìƒí•œë‹¤. ê¶Œí•œê°„ ìƒí•˜ ê´€ê³„ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ Spring Securityì—ì„œëŠ” RoleHierarchy ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ê³  êµ¬í˜„ì²´ë¡œëŠ” RoleHierarchyImpl ë¥¼ ì œê³µí•œë‹¤.ê¶Œí•œì„ ì ìš©í•˜ê¸° ìœ„í•´ RoleHierarchyVoter ê°ì²´ì— RoleHierarchy ê°ì²´ë¥¼ ë„£ì–´ì¤Œìœ¼ë¡œì¨ ê¶Œí•œ ê³„ì¸µ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. RoleHierarchy : ê¶Œí•œê°„ ê³„ì¸µ ê´€ê³„ ì •ë³´ë¥¼ ì €ì¥ RoleHierarchyVoter ì¸ê°€ ì²˜ë¦¬ì‹œ RoleHierarchy ë‚´ ì €ì¥ëœ ê¶Œí•œê°„ ê³„ì¸µ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. ê¶Œí•œì„ ì €ì¥í•˜ê¸° ìœ„í•œ Entity@Entity@Table(name = &quot;ROLE_HIERARCHY&quot;)@AllArgsConstructor@NoArgsConstructor@Data@Builder@ToString(exclude = &#123;&quot;parentName&quot;, &quot;roleHierarchy&quot;&#125;)public class RoleHierarchy implements Serializable &#123; @Id @GeneratedValue private Long id; @Column(name = &quot;child_name&quot;) private String childName; @ManyToOne(cascade = &#123;CascadeType.ALL&#125;, fetch = FetchType.LAZY) @JoinColumn(name = &quot;parent_name&quot;, referencedColumnName = &quot;child_name&quot;) private RoleHierarchy parentName; @OneToMany(mappedBy = &quot;parentName&quot;, cascade = &#123;CascadeType.ALL &#125;) private Set&lt;RoleHierarchy&gt; roleHierarchy = new HashSet&lt;&gt;();&#125; ê¶Œí•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Repository@Repositorypublic interface RoleHierarchyRepository extends JpaRepository&lt;RoleHierarchy, Long&gt; &#123; RoleHierarchy findByChildName(String roleName);&#125; ê¶Œí•œì„ ê°€ì ¸ì™€ ê¶Œí•œê°„ ê³„ì¸µì„ ì ìš©findAllHierarchy ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì €ì¥ëœ ê¶Œí•œì„ ê°€ì ¸ì™€ ìƒí•˜ ê´€ê³„ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤.ìƒìœ„ ê¶Œí•œ &gt; í•˜ìœ„ ê¶Œí•œ í˜•íƒœë¡œ ë§Œë“¤ì–´ ë°˜í™˜í•´ì¤€ë‹¤. @Servicepublic class RoleHierarchyService &#123; @Autowired private RoleHierarchyRepository roleHierarchyRepository; @Transactional public String findAllHierarchy()&#123; List&lt;RoleHierarchy&gt; roleHierarchies = roleHierarchyRepository.findAll(); StringBuilder concatedRoles = new StringBuilder(); roleHierarchies.stream().forEach( roleHierarchy -&gt; &#123; if(roleHierarchy.getParentName() != null)&#123; concatedRoles.append(roleHierarchy.getParentName().getChildName()); concatedRoles.append(&quot; &gt; &quot;); concatedRoles.append(roleHierarchy.getChildName()); concatedRoles.append(&quot;\\n&quot;); &#125; &#125;); return concatedRoles.toString(); &#125;&#125; ì„¤ì •ì„ í™•ì¸í•˜ê¸° ìœ„í•œ Controller@RestControllerpublic class SampleController &#123; @GetMapping(&quot;/&quot;) public String home()&#123; return &quot;Home&quot;; &#125; @GetMapping(&quot;/user&quot;) public String user()&#123; return &quot;user&quot;; &#125; @GetMapping(&quot;/manager&quot;) public String manager(Principal principal)&#123; return &quot;manager&quot;; &#125; @GetMapping(&quot;/admin&quot;) public String admin(Principal principal)&#123; return &quot;admin&quot;; &#125;&#125; Security ì„¤ì • /user : USER ê¶Œí•œì´ ìˆëŠ” ìœ ì €ê°€ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. /manager : MANAGER ê¶Œí•œì´ ìˆëŠ” ìœ ì €ê°€ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. /admin : ADMIN ê¶Œí•œì´ ìˆëŠ” ìœ ì €ê°€ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ê°„ë‹¨í•œ User ë“±ë¡ì„ ìœ„í•´ In-Memory Userë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤. UserëŠ” ì´ 3ëª…ìœ¼ë¡œ ê°ê° ADMIN, MANAGER, USER ê¶Œí•œì„ ê°€ì§€ê³  ìˆë‹¤. @EnableWebSecurity@Slf4jpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Autowired private RoleHierarchyService roleHierarchyService; @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.inMemoryAuthentication() .withUser(&quot;admin&quot;).password(&quot;&#123;noop&#125;1234&quot;).roles(&quot;ADMIN&quot;).and() .withUser(&quot;manager&quot;).password(&quot;&#123;noop&#125;1234&quot;).roles(&quot;MANAGER&quot;).and() .withUser(&quot;user&quot;).password(&quot;&#123;noop&#125;1234&quot;).roles(&quot;USER&quot;); &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http. authorizeRequests() .antMatchers(&quot;/signup&quot;).permitAll() .antMatchers(&quot;/h2-console/**&quot;).permitAll() .antMatchers(&quot;/login&quot;).permitAll() .antMatchers(&quot;/logout&quot;).permitAll() .antMatchers(&quot;/user&quot;).hasRole(&quot;USER&quot;) .antMatchers(&quot;/manager&quot;).hasRole(&quot;MANAGER&quot;) .antMatchers(&quot;/admin&quot;).hasRole(&quot;ADMIN&quot;) .anyRequest().authenticated(); http .formLogin().permitAll(); &#125; @Bean public RoleHierarchyImpl roleHierarchy()&#123; String allHierarchy = roleHierarchyService.findAllHierarchy(); RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl(); roleHierarchy.setHierarchy(allHierarchy); return roleHierarchy; &#125; @Bean public AccessDecisionVoter&lt;? extends Object&gt; roleVoter()&#123; RoleHierarchyVoter roleHierarchyVoter = new RoleHierarchyVoter(roleHierarchy()); return roleHierarchyVoter; &#125;&#125; ìŠ¤í”„ë§ Securityì—ì„œ ê¶Œí•œê°„ ìƒí•˜ê´€ê³„ë¥¼ ì¸ì‹í•  ìˆ˜ ìˆì–´ ADMIN ê¶Œí•œìœ¼ë¡œ MANAGER ê¶Œí•œì˜ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ (Python)","slug":"algorithm/programmers/string/72410-ì‹ ê·œì•„ì´ë””ì¶”ì²œ-python","date":"2021-08-09T11:10:40.000Z","updated":"2024-11-28T13:59:33.318Z","comments":true,"path":"2021/08/09/algorithm/programmers/string/72410-ì‹ ê·œì•„ì´ë””ì¶”ì²œ-python/","link":"","permalink":"https://ckck803.github.io/2021/08/09/algorithm/programmers/string/72410-%EC%8B%A0%EA%B7%9C%EC%95%84%EC%9D%B4%EB%94%94%EC%B6%94%EC%B2%9C-python/","excerpt":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/72410 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ (Java) í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ (Python) def solution(new_id): answer = &#x27;&#x27; lowerLine = new_id.lower() for i in lowerLine: if i.isalpha() or i.isdigit() or i in [&#x27;-&#x27;, &#x27;_&#x27;, &#x27;.&#x27;]: answer += i while &#x27;..&#x27; in answer: answer = answer.replace(&#x27;..&#x27;, &#x27;.&#x27;) if len(answer) &gt; 1: if answer[0] == &#x27;.&#x27;: answer = answer[1:] elif len(answer) == 1 and answer[0] == &#x27;.&#x27;: answer = &#x27;&#x27; if len(answer) &gt; 1: if answer[-1] == &#x27;.&#x27;: answer = answer[:-1] elif len(answer) == 1 and answer[-1] == &#x27;.&#x27;: answer = &#x27;&#x27; if len(answer) == 0: answer += &#x27;a&#x27; if len(answer) &gt; 15: answer = answer[:15] if answer[-1] == &#x27;.&#x27;: answer = answer[:-1] while len(answer) &lt;= 2: answer += answer[-1] return answer","text":"ë¬¸ì œ ë§í¬ : https://programmers.co.kr/learn/courses/30/lessons/72410 í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ (Java) í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ (Python) def solution(new_id): answer = &#x27;&#x27; lowerLine = new_id.lower() for i in lowerLine: if i.isalpha() or i.isdigit() or i in [&#x27;-&#x27;, &#x27;_&#x27;, &#x27;.&#x27;]: answer += i while &#x27;..&#x27; in answer: answer = answer.replace(&#x27;..&#x27;, &#x27;.&#x27;) if len(answer) &gt; 1: if answer[0] == &#x27;.&#x27;: answer = answer[1:] elif len(answer) == 1 and answer[0] == &#x27;.&#x27;: answer = &#x27;&#x27; if len(answer) &gt; 1: if answer[-1] == &#x27;.&#x27;: answer = answer[:-1] elif len(answer) == 1 and answer[-1] == &#x27;.&#x27;: answer = &#x27;&#x27; if len(answer) == 0: answer += &#x27;a&#x27; if len(answer) &gt; 15: answer = answer[:15] if answer[-1] == &#x27;.&#x27;: answer = answer[:-1] while len(answer) &lt;= 2: answer += answer[-1] return answer","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ë¬¸ìì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/"},{"name":"ì •ê·œ í‘œí˜„ì‹","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´/ì •ê·œ-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/%EC%A0%95%EA%B7%9C-%ED%91%9C%ED%98%84%EC%8B%9D/"}],"tags":[{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"}]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - í‘œ í¸ì§‘ (Cpp)","slug":"algorithm/programmers/ìë£Œêµ¬ì¡°/SET/81303-í‘œí¸ì§‘-Cpp","date":"2021-08-03T11:10:40.000Z","updated":"2024-11-28T13:59:33.973Z","comments":true,"path":"2021/08/03/algorithm/programmers/ìë£Œêµ¬ì¡°/SET/81303-í‘œí¸ì§‘-Cpp/","link":"","permalink":"https://ckck803.github.io/2021/08/03/algorithm/programmers/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/SET/81303-%ED%91%9C%ED%8E%B8%EC%A7%91-Cpp/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/81303 ë¬¸ì œ í•´ì„¤ìë£Œêµ¬ì¡° Setì— ëŒ€í•œ í™•ì‹¤í•œ ì´í•´ê°€ ìˆì–´ì•¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œ,Setì˜ ë‹¤ì–‘í•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ë¬¸ì œë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;bool check[1000010];set&lt;int&gt; arr;stack&lt;int&gt; deletedData;int executeCmd(int point, string cmd) &#123; char commond = cmd[0]; auto iter = arr.find(point); string str; int value; if (commond == &#x27;U&#x27; || commond == &#x27;D&#x27;) &#123; for (int i = 2; i &lt; cmd.size(); i++) &#123; str += cmd[i]; &#125; value = stoi(str); &#125; if (commond == &#x27;U&#x27;) &#123; for (int i = 0; i &lt; value; i++) &#123; iter--; &#125; &#125; if (commond == &#x27;D&#x27;) &#123; for (int i = 0; i &lt; value; i++) &#123; iter++; &#125; &#125; if (commond == &#x27;C&#x27;) &#123; deletedData.push(*iter); iter = arr.erase(iter); if (iter == arr.end()) &#123; iter--; &#125; &#125; if (commond == &#x27;Z&#x27;) &#123; if (!deletedData.empty()) &#123; int value = deletedData.top(); deletedData.pop(); arr.insert(value); &#125; &#125; return *iter;&#125;void insertNumber(int n) &#123; for (int i = 0; i &lt; n; i++) &#123; arr.insert(i); &#125;&#125;void scanSet() &#123; for (auto iter = arr.begin(); iter != arr.end(); iter++) &#123; int index = *iter; check[index] = true; &#125;&#125;string solution(int n, int k, vector&lt;string&gt; cmd) &#123; string answer = &quot;&quot;; insertNumber(n); int point = k; for (int i = 0; i &lt; cmd.size(); i++) &#123; point = executeCmd(point, cmd[i]); &#125; scanSet(); for (int i = 0; i &lt; n; i++) &#123; if (check[i]) &#123; answer += &#x27;O&#x27;; &#125; else &#123; answer += &#x27;X&#x27;; &#125; &#125; return answer;&#125;","text":"https://programmers.co.kr/learn/courses/30/lessons/81303 ë¬¸ì œ í•´ì„¤ìë£Œêµ¬ì¡° Setì— ëŒ€í•œ í™•ì‹¤í•œ ì´í•´ê°€ ìˆì–´ì•¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œ,Setì˜ ë‹¤ì–‘í•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ë¬¸ì œë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;bool check[1000010];set&lt;int&gt; arr;stack&lt;int&gt; deletedData;int executeCmd(int point, string cmd) &#123; char commond = cmd[0]; auto iter = arr.find(point); string str; int value; if (commond == &#x27;U&#x27; || commond == &#x27;D&#x27;) &#123; for (int i = 2; i &lt; cmd.size(); i++) &#123; str += cmd[i]; &#125; value = stoi(str); &#125; if (commond == &#x27;U&#x27;) &#123; for (int i = 0; i &lt; value; i++) &#123; iter--; &#125; &#125; if (commond == &#x27;D&#x27;) &#123; for (int i = 0; i &lt; value; i++) &#123; iter++; &#125; &#125; if (commond == &#x27;C&#x27;) &#123; deletedData.push(*iter); iter = arr.erase(iter); if (iter == arr.end()) &#123; iter--; &#125; &#125; if (commond == &#x27;Z&#x27;) &#123; if (!deletedData.empty()) &#123; int value = deletedData.top(); deletedData.pop(); arr.insert(value); &#125; &#125; return *iter;&#125;void insertNumber(int n) &#123; for (int i = 0; i &lt; n; i++) &#123; arr.insert(i); &#125;&#125;void scanSet() &#123; for (auto iter = arr.begin(); iter != arr.end(); iter++) &#123; int index = *iter; check[index] = true; &#125;&#125;string solution(int n, int k, vector&lt;string&gt; cmd) &#123; string answer = &quot;&quot;; insertNumber(n); int point = k; for (int i = 0; i &lt; cmd.size(); i++) &#123; point = executeCmd(point, cmd[i]); &#125; scanSet(); for (int i = 0; i &lt; n; i++) &#123; if (check[i]) &#123; answer += &#x27;O&#x27;; &#125; else &#123; answer += &#x27;X&#x27;; &#125; &#125; return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ìë£Œêµ¬ì¡°","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ìë£Œêµ¬ì¡°","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/"},{"name":"SET","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ìë£Œêµ¬ì¡°/SET","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/SET/"}],"tags":[{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"Cpp","slug":"Cpp","permalink":"https://ckck803.github.io/tags/Cpp/"}]},{"title":"ì¹´í”„ì¹´ ì‚¬ìš©í•˜ê¸°","slug":"kafka/spring-cloud-kafka","date":"2021-04-19T16:58:03.000Z","updated":"2024-11-28T13:59:25.434Z","comments":true,"path":"2021/04/20/kafka/spring-cloud-kafka/","link":"","permalink":"https://ckck803.github.io/2021/04/20/kafka/spring-cloud-kafka/","excerpt":"ì¹´í”„ì¹´ ëª…ë ¹ì–´ì£¼í‚¤í¼ ì‹¤í–‰ ./bin/zookeeper-server-start.sh config/zookeeper.properties ì¹´í”„ì¹´ ì‹¤í–‰ ./bin/kafka-server-start.sh config/server.properties ì¹´í”„ì¹´ í† í”½ê´€ë¦¬í† í”½ì„ ìƒˆë¡œ ìƒì„±í•˜ê³  ì‹¶ìœ¼ë©´ kafka-topics ëª…ë ¹ì–´ì— --create ì˜µì…©ì„ í†µí•´ ìƒˆë¡œìš´ í† í”½ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ./bin/kafka-topics.sh \\ --create \\ --topic quickstart-events \\ --bootstrap-server localhost:9092 ì¹´í”„ì¹´ì— ì €ì¥ëœ ëª¨ë“  í† í”½ ì •ë³´ë¥¼ ë³´ê³  ì‹¶ì„ ê²½ìš° --list ì˜µì…©ì„ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","text":"ì¹´í”„ì¹´ ëª…ë ¹ì–´ì£¼í‚¤í¼ ì‹¤í–‰ ./bin/zookeeper-server-start.sh config/zookeeper.properties ì¹´í”„ì¹´ ì‹¤í–‰ ./bin/kafka-server-start.sh config/server.properties ì¹´í”„ì¹´ í† í”½ê´€ë¦¬í† í”½ì„ ìƒˆë¡œ ìƒì„±í•˜ê³  ì‹¶ìœ¼ë©´ kafka-topics ëª…ë ¹ì–´ì— --create ì˜µì…©ì„ í†µí•´ ìƒˆë¡œìš´ í† í”½ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ./bin/kafka-topics.sh \\ --create \\ --topic quickstart-events \\ --bootstrap-server localhost:9092 ì¹´í”„ì¹´ì— ì €ì¥ëœ ëª¨ë“  í† í”½ ì •ë³´ë¥¼ ë³´ê³  ì‹¶ì„ ê²½ìš° --list ì˜µì…©ì„ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ./bin/kafka-topics.sh \\ --bootstrap-server localhost:9092 \\ --list í† í”½ì— ëŒ€í•œ ìƒì„¸ ì •ë³´ë¥¼ ë³´ê³  ì‹¶ì„ ê²½ìš° --describe ì˜µì…˜ì„ í†µí•´ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ./bin/kafka-topics.sh \\ --describe \\ --topic quickstart-events \\ --bootstrap-server localhost:9092 ì¹´í”„ì¹´ ë©”ì‹œì§€ ìƒì„±ì¹´í”„ì¹´ í† í”½ì— ìƒˆë¡œìš´ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³  ì‹¶ì„ ê²½ìš° kafka-console-producer ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. --broker-list ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê¸° ìœ„í•œ ì¹´í”„ì¹´ ë¸Œë¡œì»¤ ì£¼ì†Œ --topic ë©”ì‹œì§€ê°€ ì €ì¥ë  í† í”½ ./bin/kafka-console-producer.sh \\ --broker-list localhost:9092 \\ --topic quickstart-events ì¹´í”„ì¹´ ë©”ì‹œì§€ ì†Œë¹„ì¹´í”„ì¹´ í† í”½ì— ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ê²½ìš° kafka-console-consumer ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. --bootstrap-server ë©”ì‹œì§€ë¥¼ êµ¬ë…í•˜ê¸° ìœ„í•œ ì¹´í”„ì¹´ ì£¼ì†Œ --topic êµ¬ë…í•  í† í”½ ì •ë³´ ./bin/kafka-console-consumer.sh \\ --bootstrap-server localhost:9092 \\ --topic quickstart-events \\ --from-beginning","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Kafka","slug":"Develop/Kafka","permalink":"https://ckck803.github.io/categories/Develop/Kafka/"}],"tags":[]},{"title":"ë°±ì¤€ 3015 - ë‹¨ì–´ ì •ë ¬","slug":"algorithm/baekjoon/á„Œá…¡á„…á…­á„€á…®á„Œá…©/SET/1181-ë‹¨ì–´ì •ë ¬","date":"2021-04-17T01:53:25.000Z","updated":"2024-11-28T13:59:36.456Z","comments":true,"path":"2021/04/17/algorithm/baekjoon/á„Œá…¡á„…á…­á„€á…®á„Œá…©/SET/1181-ë‹¨ì–´ì •ë ¬/","link":"","permalink":"https://ckck803.github.io/2021/04/17/algorithm/baekjoon/%E1%84%8C%E1%85%A1%E1%84%85%E1%85%AD%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9/SET/1181-%EB%8B%A8%EC%96%B4%EC%A0%95%EB%A0%AC/","excerpt":"https://www.acmicpc.net/problem/1181 ë°±ì¤€ 3015 ë‹¨ì–´ ì •ë ¬ë¬¸ì œ í’€ì´ìë£Œêµ¬ì¡° Setì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ë¬¸ì œì´ë‹¤. ë‹¤ë§Œ Setì—ì„œ ì‚¬ìš©í•˜ëŠ” ì •ë ¬ë°©ì‹ì„ ì¡°ê±´ì— ë§ê²Œ ë³€í˜•í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. ì†ŒìŠ¤ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;set&lt;pair&lt;int, string&gt;&gt; s;int n;int main(void) &#123; cin.tie(0); cout.tie(0); ios_base::sync_with_stdio(false); cin &gt;&gt; n; while (n--) &#123; string word; cin &gt;&gt; word; s.insert(&#123;word.length(), word&#125;); &#125; for (auto iter = s.begin(); iter != s.end(); iter++) &#123; cout &lt;&lt; iter-&gt;second &lt;&lt; &#x27;\\n&#x27;; &#125; return 0;&#125; ìë°” ì†ŒìŠ¤ ì½”ë“œComparator ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ setì˜ ì •ë ¬ê¸°ì¤€ì„ ì‚¬ìš©ìê°€ ì •ì˜í•œ ì •ë ¬ê¸°ì¤€ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. Comparator ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ compare ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•´ ì›í•˜ëŠ” ì •ë ¬ ê¸°ì¤€ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤. import java.io.BufferedReader;import java.io.IOException;import java.io.InputStreamReader;import java.util.Comparator;import java.util.Set;import java.util.TreeSet;public class Main &#123; public static void main(String args[]) throws IOException &#123; BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); int count = Integer.parseInt(br.readLine()); Set&lt;String&gt; words = new TreeSet&lt;String&gt;(new Comparator&lt;String&gt;() &#123; @Override public int compare(String o1, String o2) &#123; if (o1.length() &lt; o2.length()) &#123; return -1; &#125; else if (o1.length() &gt; o2.length()) &#123; return 1; &#125; else &#123; return o1.compareTo(o2); &#125; &#125; &#125;); for (int countIdx = 0; countIdx &lt; count; countIdx++) &#123; String word = br.readLine(); words.add(word); &#125; words.stream().forEach(x -&gt; System.out.println(x)); &#125;&#125;","text":"https://www.acmicpc.net/problem/1181 ë°±ì¤€ 3015 ë‹¨ì–´ ì •ë ¬ë¬¸ì œ í’€ì´ìë£Œêµ¬ì¡° Setì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ë¬¸ì œì´ë‹¤. ë‹¤ë§Œ Setì—ì„œ ì‚¬ìš©í•˜ëŠ” ì •ë ¬ë°©ì‹ì„ ì¡°ê±´ì— ë§ê²Œ ë³€í˜•í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. ì†ŒìŠ¤ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;set&lt;pair&lt;int, string&gt;&gt; s;int n;int main(void) &#123; cin.tie(0); cout.tie(0); ios_base::sync_with_stdio(false); cin &gt;&gt; n; while (n--) &#123; string word; cin &gt;&gt; word; s.insert(&#123;word.length(), word&#125;); &#125; for (auto iter = s.begin(); iter != s.end(); iter++) &#123; cout &lt;&lt; iter-&gt;second &lt;&lt; &#x27;\\n&#x27;; &#125; return 0;&#125; ìë°” ì†ŒìŠ¤ ì½”ë“œComparator ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ setì˜ ì •ë ¬ê¸°ì¤€ì„ ì‚¬ìš©ìê°€ ì •ì˜í•œ ì •ë ¬ê¸°ì¤€ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. Comparator ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ compare ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•´ ì›í•˜ëŠ” ì •ë ¬ ê¸°ì¤€ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤. import java.io.BufferedReader;import java.io.IOException;import java.io.InputStreamReader;import java.util.Comparator;import java.util.Set;import java.util.TreeSet;public class Main &#123; public static void main(String args[]) throws IOException &#123; BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); int count = Integer.parseInt(br.readLine()); Set&lt;String&gt; words = new TreeSet&lt;String&gt;(new Comparator&lt;String&gt;() &#123; @Override public int compare(String o1, String o2) &#123; if (o1.length() &lt; o2.length()) &#123; return -1; &#125; else if (o1.length() &gt; o2.length()) &#123; return 1; &#125; else &#123; return o1.compareTo(o2); &#125; &#125; &#125;); for (int countIdx = 0; countIdx &lt; count; countIdx++) &#123; String word = br.readLine(); words.add(word); &#125; words.stream().forEach(x -&gt; System.out.println(x)); &#125;&#125; íŒŒì´ì¬ ì†ŒìŠ¤ ì½”ë“œíŒŒì´ì¬ì—ì„œëŠ” sorted ë©”ì†Œë“œì— ì •ë ¬ ê¸°ì¤€ì„ ë„˜ê²¨ì£¼ë©´ í•´ë‹¹ ì •ë ¬ ê¸°ì¤€ì„ ì´ìš©í•´ ì •ë ¬ì„ í•˜ê²Œ ëœë‹¤. n = int(input())s = set()for i in range(n): s.add(input())s = sorted(sorted(s), key=len)for a in s: print(a)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ìë£Œêµ¬ì¡°","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/"},{"name":"SET","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°/SET","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/SET/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"},{"name":"beakjoon","slug":"beakjoon","permalink":"https://ckck803.github.io/tags/beakjoon/"}]},{"title":"ë°±ì¤€ 12100 - 2048","slug":"algorithm/baekjoon/á„‰á…µá„†á…²á†¯á„…á…¦á„‹á…µá„‰á…§á†«/12100-2048","date":"2021-04-15T13:39:03.000Z","updated":"2024-11-28T13:59:36.987Z","comments":true,"path":"2021/04/15/algorithm/baekjoon/á„‰á…µá„†á…²á†¯á„…á…¦á„‹á…µá„‰á…§á†«/12100-2048/","link":"","permalink":"https://ckck803.github.io/2021/04/15/algorithm/baekjoon/%E1%84%89%E1%85%B5%E1%84%86%E1%85%B2%E1%86%AF%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB/12100-2048/","excerpt":"https://www.acmicpc.net/problem/12100 ë°±ì¤€ 12100 - 2048ë¬¸ì œ í’€ì´ë³´ë“œë¥¼ ìƒí•˜ì¢Œìš°ë¡œ ì›€ì§ì´ë©´ì„œ ë¸”ë¡ì´ ìµœëŒ€ê°’ì´ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ê²½ìš°ë¥¼ ì°¾ëŠ” ë¬¸ì œì´ë‹¤. í•œ ë³´ë“œë¥¼ ìƒí•˜ì¢Œìš°ë¡œ ì›€ì§ì´ê³  ì›ë˜ë°ë¡œ ë˜ëŒë¦° í›„ ë‹¤ì‹œ ì‹œë„í•˜ê¸° ìœ„í•´ ë°±íŠ¸ë ˆí‚¹ ê¸°ë²•ì´ í•„ìš”í•˜ë‹¤. ë¸”ë¡ì„ ìƒí•˜ì¢Œìš°ì¤‘ í•œ ë°©í–¥ìœ¼ë¡œ ì›€ì§ì¸ë‹¤. 5ë²ˆ ì›€ì§ì´ë©´ ë¸”ë¡ì„ ìŠ¤ìº”í•´ ìµœëŒ€ê°’ì„ ì°¾ëŠ”ë‹¤. ì´ì „ ë‹¨ê³„ë¡œ ë˜ëŒë¦° í›„ ë‹¤ë¥¸ë°©í–¥ìœ¼ë¡œ ì›€ì§ì´ë©´ì„œ ìµœëŒ€ê°’ì„ ì°¾ì•„ë³¸ë‹¤. ë¬¸ì œ ì˜ˆì™¸ ì²˜ë¦¬ í•œë²ˆ í•©ì²˜ì§„ ë¸”ë¡ì€ ì—°ì†ì ìœ¼ë¡œ í•©ì²˜ì§ˆ ìˆ˜ ì—†ë‹¤. í•©ì²˜ì§€ëŠ” ìˆœì„œëŠ” ì´ë™í•˜ë ¤ê³  í•˜ëŠ” ìª½ì˜ ì¹¸ì´ ë¨¼ì € í•©ì³ì§„ë‹¤. ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;int maxValue = 0;int board[22][22];int boardSize = 0;void initBoard(int size) &#123; for (int i = 0; i &lt; size; i++) &#123; for (int j = 0; j &lt; size; j++) &#123; cin &gt;&gt; board[i][j]; &#125; &#125;&#125;void moveTop() &#123; int check[22][22]; for (int col = 0; col &lt; boardSize; col++) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; check[col][row] = false; &#125; &#125; for (int row = 0; row &lt; boardSize; row++) &#123; for (int col = 0; col &lt; boardSize; col++) &#123; int cntRow = row; int cntCol = col; if (board[cntRow][cntCol] == 0) &#123; continue; &#125; while (cntRow - 1 &gt;= 0 &amp;&amp; (board[cntRow - 1][cntCol] == board[cntRow][cntCol] || board[cntRow - 1][cntCol] == 0)) &#123; if (board[cntRow - 1][cntCol] == board[cntRow][cntCol]) &#123; if (check[cntRow - 1][cntCol] == false &amp;&amp; check[cntRow][cntCol] == false) &#123; board[cntRow - 1][cntCol] += board[cntRow][cntCol]; check[cntRow - 1][cntCol] = true; board[cntRow][cntCol] = 0; &#125; else &#123; break; &#125; &#125; else &#123; swap(board[cntRow - 1][cntCol], board[cntRow][cntCol]); &#125; cntRow--; &#125; &#125; &#125;&#125;void moveButton() &#123; int check[22][22]; for (int col = 0; col &lt; boardSize; col++) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; check[col][row] = false; &#125; &#125; for (int row = boardSize - 1; row &gt;= 0; row--) &#123; for (int col = 0; col &lt; boardSize; col++) &#123; int cntCol = col; int cntRow = row; if (board[cntRow][cntCol] == 0) &#123; continue; &#125; while (cntRow + 1 &lt; boardSize &amp;&amp; (board[cntRow + 1][cntCol] == board[cntRow][cntCol] || board[cntRow + 1][cntCol] == 0)) &#123; if (board[cntRow + 1][cntCol] == board[cntRow][cntCol]) &#123; if (check[cntRow + 1][cntCol] == false &amp;&amp; check[cntRow][cntCol] == false) &#123; board[cntRow + 1][cntCol] += board[cntRow][cntCol]; check[cntRow + 1][cntCol] = true; board[cntRow][cntCol] = 0; &#125; else &#123; break; &#125; &#125; else &#123; swap(board[cntRow + 1][cntCol], board[cntRow][cntCol]); &#125; cntRow++; &#125; &#125; &#125;&#125;void moveLeft() &#123; int check[22][22]; for (int col = 0; col &lt; boardSize; col++) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; check[col][row] = false; &#125; &#125; for (int col = 0; col &lt; boardSize; col++) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; int cntCol = col; int cntRow = row; if (board[cntRow][cntCol] == 0) &#123; continue; &#125; while (cntCol - 1 &gt;= 0 &amp;&amp; (board[cntRow][cntCol - 1] == board[cntRow][cntCol] || board[cntRow][cntCol - 1] == 0)) &#123; if (board[cntRow][cntCol - 1] == board[cntRow][cntCol]) &#123; if (check[cntRow][cntCol - 1] == false &amp;&amp; check[cntRow][cntCol] == false) &#123; board[cntRow][cntCol - 1] += board[cntRow][cntCol]; check[cntRow][cntCol - 1] = true; board[cntRow][cntCol] = 0; &#125; else &#123; break; &#125; &#125; else &#123; swap(board[cntRow][cntCol - 1], board[cntRow][cntCol]); &#125; cntCol--; &#125; &#125; &#125;&#125;void moveRight() &#123; int check[22][22]; for (int col = 0; col &lt; boardSize; col++) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; check[col][row] = false; &#125; &#125; for (int col = boardSize - 1; col &gt;= 0; col--) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; int cntRow = row; int cntCol = col; if (board[cntRow][cntCol] == 0) &#123; continue; &#125; while (cntCol + 1 &lt; boardSize &amp;&amp; (board[cntRow][cntCol + 1] == board[cntRow][cntCol] || board[cntRow][cntCol + 1] == 0)) &#123; if (board[cntRow][cntCol + 1] == board[cntRow][cntCol]) &#123; if (check[cntRow][cntCol + 1] == false &amp;&amp; check[cntRow][cntCol] == false) &#123; board[cntRow][cntCol + 1] += board[cntRow][cntCol]; check[cntRow][cntCol + 1] = true; board[cntRow][cntCol] = 0; &#125; else &#123; break; &#125; &#125; else &#123; swap(board[cntRow][cntCol], board[cntRow][cntCol + 1]); &#125; cntCol++; &#125; &#125; &#125;&#125;void returnBoard(int (*board)[22], int (*copy)[22]) &#123; for (int i = 0; i &lt; boardSize; i++) &#123; for (int j = 0; j &lt; boardSize; j++) &#123; board[i][j] = copy[i][j]; &#125; &#125;&#125;void moveBoard(int depth) &#123; int copyBoard[22][22]; for (int i = 0; i &lt; boardSize; i++) &#123; for (int j = 0; j &lt; boardSize; j++) &#123; copyBoard[i][j] = board[i][j]; &#125; &#125; if (depth == 5) &#123; for (int i = 0; i &lt; boardSize; i++) &#123; for (int j = 0; j &lt; boardSize; j++) &#123; if (board[i][j] &gt; maxValue) &#123; maxValue = board[i][j]; &#125; &#125; &#125; return; &#125; moveTop(); moveBoard(depth + 1); returnBoard(board, copyBoard); moveButton(); moveBoard(depth + 1); returnBoard(board, copyBoard); moveLeft(); moveBoard(depth + 1); returnBoard(board, copyBoard); moveRight(); moveBoard(depth + 1); returnBoard(board, copyBoard);&#125;int main(void) &#123; cin &gt;&gt; boardSize; initBoard(boardSize); moveBoard(0); cout &lt;&lt; maxValue &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","text":"https://www.acmicpc.net/problem/12100 ë°±ì¤€ 12100 - 2048ë¬¸ì œ í’€ì´ë³´ë“œë¥¼ ìƒí•˜ì¢Œìš°ë¡œ ì›€ì§ì´ë©´ì„œ ë¸”ë¡ì´ ìµœëŒ€ê°’ì´ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ê²½ìš°ë¥¼ ì°¾ëŠ” ë¬¸ì œì´ë‹¤. í•œ ë³´ë“œë¥¼ ìƒí•˜ì¢Œìš°ë¡œ ì›€ì§ì´ê³  ì›ë˜ë°ë¡œ ë˜ëŒë¦° í›„ ë‹¤ì‹œ ì‹œë„í•˜ê¸° ìœ„í•´ ë°±íŠ¸ë ˆí‚¹ ê¸°ë²•ì´ í•„ìš”í•˜ë‹¤. ë¸”ë¡ì„ ìƒí•˜ì¢Œìš°ì¤‘ í•œ ë°©í–¥ìœ¼ë¡œ ì›€ì§ì¸ë‹¤. 5ë²ˆ ì›€ì§ì´ë©´ ë¸”ë¡ì„ ìŠ¤ìº”í•´ ìµœëŒ€ê°’ì„ ì°¾ëŠ”ë‹¤. ì´ì „ ë‹¨ê³„ë¡œ ë˜ëŒë¦° í›„ ë‹¤ë¥¸ë°©í–¥ìœ¼ë¡œ ì›€ì§ì´ë©´ì„œ ìµœëŒ€ê°’ì„ ì°¾ì•„ë³¸ë‹¤. ë¬¸ì œ ì˜ˆì™¸ ì²˜ë¦¬ í•œë²ˆ í•©ì²˜ì§„ ë¸”ë¡ì€ ì—°ì†ì ìœ¼ë¡œ í•©ì²˜ì§ˆ ìˆ˜ ì—†ë‹¤. í•©ì²˜ì§€ëŠ” ìˆœì„œëŠ” ì´ë™í•˜ë ¤ê³  í•˜ëŠ” ìª½ì˜ ì¹¸ì´ ë¨¼ì € í•©ì³ì§„ë‹¤. ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;int maxValue = 0;int board[22][22];int boardSize = 0;void initBoard(int size) &#123; for (int i = 0; i &lt; size; i++) &#123; for (int j = 0; j &lt; size; j++) &#123; cin &gt;&gt; board[i][j]; &#125; &#125;&#125;void moveTop() &#123; int check[22][22]; for (int col = 0; col &lt; boardSize; col++) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; check[col][row] = false; &#125; &#125; for (int row = 0; row &lt; boardSize; row++) &#123; for (int col = 0; col &lt; boardSize; col++) &#123; int cntRow = row; int cntCol = col; if (board[cntRow][cntCol] == 0) &#123; continue; &#125; while (cntRow - 1 &gt;= 0 &amp;&amp; (board[cntRow - 1][cntCol] == board[cntRow][cntCol] || board[cntRow - 1][cntCol] == 0)) &#123; if (board[cntRow - 1][cntCol] == board[cntRow][cntCol]) &#123; if (check[cntRow - 1][cntCol] == false &amp;&amp; check[cntRow][cntCol] == false) &#123; board[cntRow - 1][cntCol] += board[cntRow][cntCol]; check[cntRow - 1][cntCol] = true; board[cntRow][cntCol] = 0; &#125; else &#123; break; &#125; &#125; else &#123; swap(board[cntRow - 1][cntCol], board[cntRow][cntCol]); &#125; cntRow--; &#125; &#125; &#125;&#125;void moveButton() &#123; int check[22][22]; for (int col = 0; col &lt; boardSize; col++) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; check[col][row] = false; &#125; &#125; for (int row = boardSize - 1; row &gt;= 0; row--) &#123; for (int col = 0; col &lt; boardSize; col++) &#123; int cntCol = col; int cntRow = row; if (board[cntRow][cntCol] == 0) &#123; continue; &#125; while (cntRow + 1 &lt; boardSize &amp;&amp; (board[cntRow + 1][cntCol] == board[cntRow][cntCol] || board[cntRow + 1][cntCol] == 0)) &#123; if (board[cntRow + 1][cntCol] == board[cntRow][cntCol]) &#123; if (check[cntRow + 1][cntCol] == false &amp;&amp; check[cntRow][cntCol] == false) &#123; board[cntRow + 1][cntCol] += board[cntRow][cntCol]; check[cntRow + 1][cntCol] = true; board[cntRow][cntCol] = 0; &#125; else &#123; break; &#125; &#125; else &#123; swap(board[cntRow + 1][cntCol], board[cntRow][cntCol]); &#125; cntRow++; &#125; &#125; &#125;&#125;void moveLeft() &#123; int check[22][22]; for (int col = 0; col &lt; boardSize; col++) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; check[col][row] = false; &#125; &#125; for (int col = 0; col &lt; boardSize; col++) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; int cntCol = col; int cntRow = row; if (board[cntRow][cntCol] == 0) &#123; continue; &#125; while (cntCol - 1 &gt;= 0 &amp;&amp; (board[cntRow][cntCol - 1] == board[cntRow][cntCol] || board[cntRow][cntCol - 1] == 0)) &#123; if (board[cntRow][cntCol - 1] == board[cntRow][cntCol]) &#123; if (check[cntRow][cntCol - 1] == false &amp;&amp; check[cntRow][cntCol] == false) &#123; board[cntRow][cntCol - 1] += board[cntRow][cntCol]; check[cntRow][cntCol - 1] = true; board[cntRow][cntCol] = 0; &#125; else &#123; break; &#125; &#125; else &#123; swap(board[cntRow][cntCol - 1], board[cntRow][cntCol]); &#125; cntCol--; &#125; &#125; &#125;&#125;void moveRight() &#123; int check[22][22]; for (int col = 0; col &lt; boardSize; col++) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; check[col][row] = false; &#125; &#125; for (int col = boardSize - 1; col &gt;= 0; col--) &#123; for (int row = 0; row &lt; boardSize; row++) &#123; int cntRow = row; int cntCol = col; if (board[cntRow][cntCol] == 0) &#123; continue; &#125; while (cntCol + 1 &lt; boardSize &amp;&amp; (board[cntRow][cntCol + 1] == board[cntRow][cntCol] || board[cntRow][cntCol + 1] == 0)) &#123; if (board[cntRow][cntCol + 1] == board[cntRow][cntCol]) &#123; if (check[cntRow][cntCol + 1] == false &amp;&amp; check[cntRow][cntCol] == false) &#123; board[cntRow][cntCol + 1] += board[cntRow][cntCol]; check[cntRow][cntCol + 1] = true; board[cntRow][cntCol] = 0; &#125; else &#123; break; &#125; &#125; else &#123; swap(board[cntRow][cntCol], board[cntRow][cntCol + 1]); &#125; cntCol++; &#125; &#125; &#125;&#125;void returnBoard(int (*board)[22], int (*copy)[22]) &#123; for (int i = 0; i &lt; boardSize; i++) &#123; for (int j = 0; j &lt; boardSize; j++) &#123; board[i][j] = copy[i][j]; &#125; &#125;&#125;void moveBoard(int depth) &#123; int copyBoard[22][22]; for (int i = 0; i &lt; boardSize; i++) &#123; for (int j = 0; j &lt; boardSize; j++) &#123; copyBoard[i][j] = board[i][j]; &#125; &#125; if (depth == 5) &#123; for (int i = 0; i &lt; boardSize; i++) &#123; for (int j = 0; j &lt; boardSize; j++) &#123; if (board[i][j] &gt; maxValue) &#123; maxValue = board[i][j]; &#125; &#125; &#125; return; &#125; moveTop(); moveBoard(depth + 1); returnBoard(board, copyBoard); moveButton(); moveBoard(depth + 1); returnBoard(board, copyBoard); moveLeft(); moveBoard(depth + 1); returnBoard(board, copyBoard); moveRight(); moveBoard(depth + 1); returnBoard(board, copyBoard);&#125;int main(void) &#123; cin &gt;&gt; boardSize; initBoard(boardSize); moveBoard(0); cout &lt;&lt; maxValue &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì‹œë®¬ë ˆì´ì…˜","slug":"Develop/Beakjoon/ì‹œë®¬ë ˆì´ì…˜","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ì‹œë®¬ë ˆì´ì…˜","slug":"ì‹œë®¬ë ˆì´ì…˜","permalink":"https://ckck803.github.io/tags/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/"},{"name":"ì‚¼ì„± ê¸°ì¶œ","slug":"ì‚¼ì„±-ê¸°ì¶œ","permalink":"https://ckck803.github.io/tags/%EC%82%BC%EC%84%B1-%EA%B8%B0%EC%B6%9C/"}]},{"title":"ë°±ì¤€ 1920 - ìˆ˜ ì°¾ê¸°","slug":"algorithm/baekjoon/BinarySearch/1920-ìˆ˜ì°¾ê¸°","date":"2021-04-04T08:21:14.000Z","updated":"2024-11-28T13:59:36.915Z","comments":true,"path":"2021/04/04/algorithm/baekjoon/BinarySearch/1920-ìˆ˜ì°¾ê¸°/","link":"","permalink":"https://ckck803.github.io/2021/04/04/algorithm/baekjoon/BinarySearch/1920-%EC%88%98%EC%B0%BE%EA%B8%B0/","excerpt":"ë°±ì¤€ 1920 - ìˆ˜ ì°¾ê¸°ë¬¸ì œ í’€ì´ë²”ìœ„ 1~10ë§Œê°œì˜ ìˆ«ìë“¤ ì¤‘ì—ì„œ Mê°œì˜ ì£¼ì–´ì§„ ê°’ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë¬¸ì œì´ë‹¤. ì¼ë°˜ì ì¸ íƒìƒ‰ì„ ì§„í–‰í•  ê²½ìš° O(N*N)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°–ê²Œ ë˜ë¯€ë¡œ O(logN)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°–ëŠ” ì´ë¶„ íƒìƒ‰ì„ ì´ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë„ë¡ í•œë‹¤. ì „ì²´ ì†ŒìŠ¤#include &lt;bits/stdc++.h&gt;using namespace std;int binarySearch(vector&lt;int&gt;&amp; arr, int value) &#123; int begin = 0; int end = arr.size() - 1; while (begin &lt;= end) &#123; int mid = (begin + end) / 2; int midValue = arr[mid]; if (value == midValue) &#123; return 1; &#125; else if (value &gt; midValue) &#123; begin = mid + 1; &#125; else &#123; end = mid - 1; &#125; &#125; return 0;&#125;vector&lt;int&gt; solution(vector&lt;int&gt; arr, vector&lt;int&gt; values) &#123; vector&lt;int&gt; results; for (int valuesIndex = 0; valuesIndex &lt; values.size(); valuesIndex++) &#123; int result = binarySearch(arr, values[valuesIndex]); results.push_back(result); &#125; return results;&#125;int main(void) &#123; int n, m; vector&lt;int&gt; arr; vector&lt;int&gt; values; cin &gt;&gt; n; arr = vector&lt;int&gt;(n); for (int i = 0; i &lt; n; i++) &#123; cin &gt;&gt; arr[i]; &#125; sort(arr.begin(), arr.end()); cin &gt;&gt; m; values = vector&lt;int&gt;(m); for (int i = 0; i &lt; m; i++) &#123; cin &gt;&gt; values[i]; &#125; vector&lt;int&gt; results = solution(arr, values); for (int value : results) &#123; cout &lt;&lt; value &lt;&lt; &#x27;\\n&#x27;; &#125; return 0;&#125;","text":"ë°±ì¤€ 1920 - ìˆ˜ ì°¾ê¸°ë¬¸ì œ í’€ì´ë²”ìœ„ 1~10ë§Œê°œì˜ ìˆ«ìë“¤ ì¤‘ì—ì„œ Mê°œì˜ ì£¼ì–´ì§„ ê°’ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë¬¸ì œì´ë‹¤. ì¼ë°˜ì ì¸ íƒìƒ‰ì„ ì§„í–‰í•  ê²½ìš° O(N*N)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°–ê²Œ ë˜ë¯€ë¡œ O(logN)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°–ëŠ” ì´ë¶„ íƒìƒ‰ì„ ì´ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë„ë¡ í•œë‹¤. ì „ì²´ ì†ŒìŠ¤#include &lt;bits/stdc++.h&gt;using namespace std;int binarySearch(vector&lt;int&gt;&amp; arr, int value) &#123; int begin = 0; int end = arr.size() - 1; while (begin &lt;= end) &#123; int mid = (begin + end) / 2; int midValue = arr[mid]; if (value == midValue) &#123; return 1; &#125; else if (value &gt; midValue) &#123; begin = mid + 1; &#125; else &#123; end = mid - 1; &#125; &#125; return 0;&#125;vector&lt;int&gt; solution(vector&lt;int&gt; arr, vector&lt;int&gt; values) &#123; vector&lt;int&gt; results; for (int valuesIndex = 0; valuesIndex &lt; values.size(); valuesIndex++) &#123; int result = binarySearch(arr, values[valuesIndex]); results.push_back(result); &#125; return results;&#125;int main(void) &#123; int n, m; vector&lt;int&gt; arr; vector&lt;int&gt; values; cin &gt;&gt; n; arr = vector&lt;int&gt;(n); for (int i = 0; i &lt; n; i++) &#123; cin &gt;&gt; arr[i]; &#125; sort(arr.begin(), arr.end()); cin &gt;&gt; m; values = vector&lt;int&gt;(m); for (int i = 0; i &lt; m; i++) &#123; cin &gt;&gt; values[i]; &#125; vector&lt;int&gt; results = solution(arr, values); for (int value : results) &#123; cout &lt;&lt; value &lt;&lt; &#x27;\\n&#x27;; &#125; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì´ë¶„íƒìƒ‰","slug":"Develop/Beakjoon/ì´ë¶„íƒìƒ‰","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9D%B4%EB%B6%84%ED%83%90%EC%83%89/"}],"tags":[]},{"title":"ë°±ì¤€ 2343 - ê¸°íƒ€ ë ˆìŠ¨","slug":"algorithm/baekjoon/BinarySearch/2343-ê¸°íƒ€ë ˆìŠ¨","date":"2021-04-04T08:21:14.000Z","updated":"2024-11-28T13:59:36.844Z","comments":true,"path":"2021/04/04/algorithm/baekjoon/BinarySearch/2343-ê¸°íƒ€ë ˆìŠ¨/","link":"","permalink":"https://ckck803.github.io/2021/04/04/algorithm/baekjoon/BinarySearch/2343-%EA%B8%B0%ED%83%80%EB%A0%88%EC%8A%A8/","excerpt":"ë°±ì¤€ 2343 - ê¸°íƒ€ ë ˆìŠ¨https://www.acmicpc.net/problem/2343 ë¬¸ì œ í’€ì´íƒìƒ‰ ë²”ìœ„ëŠ” (1~10ì–µ)ì´ê³  ì—°ì‚°ì„ Në²ˆ í•´ì•¼ í•¨ìœ¼ë¡œ O(N) or O(NlogN)ì˜ ì‹œê°„ë³µì¡ë„ ë‚´ì— ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼ í•œë‹¤. íƒìƒ‰ ì‹œê°„ì„ ì¤„ì´ê¸° ìœ„í•´ì„œ O(logN)ì‹œê°„ ë³µì¡ë„ ë‚´ì— íƒìƒ‰ì„ ëë‚¼ ìˆ˜ ìˆëŠ” ì´ë¶„íƒìƒ‰ì„ ì´ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼ í•œë‹¤. ì´ ë¬¸ì œì˜ í•¨ì •ì€ ì¡°ê±´ ì¤‘ ìˆœì„œê°€ ë’¤ë°”ë€Œë©´ ì•ˆëœë‹¤ëŠ” ì¡°ê»€ì´ ìˆê¸° ë•Œë¬¸ì— ë ˆìŠ¨ì´ ë“¤ì–´ì˜¨ ìˆœì„œë¥¼ sortingí•  ê²½ìš° í‹€ë¦¬ê²Œ ëœë‹¤. beginì„ 1ë¡œ endë¥¼ ë“¤ì–´ì˜¨ ê°’ì˜ í•©ì„ ì¤€ë‹¤. beginê³¼ end ë²”ìœ„ ë‚´ì—ì„œ ì´ë¶„ íƒìƒ‰ì„ ì§„í–‰í•œë‹¤. ì´ë¶„íƒìƒ‰ì„ ì§„í–‰í•˜ë©´ì„œ ë¸”ë£¨ë ˆì´ë¥¼ ë…¹í™”í•  ìˆ˜ ìˆëŠ” ì˜ìƒì˜ ê¸¸ì´ê°€ í•œ ì˜ìƒì˜ ê¸¸ì´ë³´ë‹¤ ì‘ìœ¼ë©´ beginì„ ì›€ì§ì¸ë‹¤. ë¸”ë£¨ë ˆì´ì— ë…¹í™”í•˜ëŠ” ê°¯ìˆ˜ê°€ ë¸”ë£¨ë ˆì´ë³´ë‹¤ ì´ ê°¯ìˆ˜ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì„ ê²½ìš° endë¥¼ ì›€ì§ì¸ë‹¤. ë¸”ë£¨ë ˆì´ì— ë…¹í™”í•˜ëŠ” ê°¯ìˆ˜ê°€ ë¸”ë£¨ë ˆì´ë³´ë‹¤ ì‘ì„ ê²½ìš° beginì„ ì›€ì§ì¸ë‹¤. ì „ì²´ ì†ŒìŠ¤#include &lt;bits/stdc++.h&gt;using namespace std;bool cmp(vector&lt;int&gt; arr, int mid, int M) &#123; int sum = 0; int count = 1; for (int arrIndex = 0; arrIndex &lt; arr.size(); arrIndex++) &#123; int value = arr[arrIndex]; if (value &gt; mid) &#123; return true; &#125; if (sum + value &lt;= mid) &#123; sum += value; &#125; else &#123; count += 1; sum = value; &#125; &#125; // ê¸¸ì´ê°€ ë„ˆë¬´ ì§§ë‹¤. beginì„ ëŠ˜ë ¤ì¤˜ì•¼ í•œë‹¤. return count &gt; M;&#125;int binarySearch(vector&lt;int&gt; arr, int N, int M) &#123; int begin = 1; int end = 0; for (int arrIndex = 0; arrIndex &lt; arr.size(); arrIndex++) &#123; end += arr[arrIndex]; &#125; while (begin &lt;= end) &#123; int mid = (begin + end) / 2; if (cmp(arr, mid, M)) &#123; begin = mid + 1; &#125; else &#123; end = mid - 1; &#125; &#125; return begin;&#125;int solution(vector&lt;int&gt; arr, int N, int M) &#123; int result = 0; result = binarySearch(arr, N, M); return result;&#125;int main(void) &#123; int N, M; vector&lt;int&gt; arr; cin &gt;&gt; N &gt;&gt; M; arr = vector&lt;int&gt;(N); for (int i = 0; i &lt; N; i++) &#123; cin &gt;&gt; arr[i]; &#125; cout &lt;&lt; solution(arr, N, M) &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","text":"ë°±ì¤€ 2343 - ê¸°íƒ€ ë ˆìŠ¨https://www.acmicpc.net/problem/2343 ë¬¸ì œ í’€ì´íƒìƒ‰ ë²”ìœ„ëŠ” (1~10ì–µ)ì´ê³  ì—°ì‚°ì„ Në²ˆ í•´ì•¼ í•¨ìœ¼ë¡œ O(N) or O(NlogN)ì˜ ì‹œê°„ë³µì¡ë„ ë‚´ì— ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼ í•œë‹¤. íƒìƒ‰ ì‹œê°„ì„ ì¤„ì´ê¸° ìœ„í•´ì„œ O(logN)ì‹œê°„ ë³µì¡ë„ ë‚´ì— íƒìƒ‰ì„ ëë‚¼ ìˆ˜ ìˆëŠ” ì´ë¶„íƒìƒ‰ì„ ì´ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼ í•œë‹¤. ì´ ë¬¸ì œì˜ í•¨ì •ì€ ì¡°ê±´ ì¤‘ ìˆœì„œê°€ ë’¤ë°”ë€Œë©´ ì•ˆëœë‹¤ëŠ” ì¡°ê»€ì´ ìˆê¸° ë•Œë¬¸ì— ë ˆìŠ¨ì´ ë“¤ì–´ì˜¨ ìˆœì„œë¥¼ sortingí•  ê²½ìš° í‹€ë¦¬ê²Œ ëœë‹¤. beginì„ 1ë¡œ endë¥¼ ë“¤ì–´ì˜¨ ê°’ì˜ í•©ì„ ì¤€ë‹¤. beginê³¼ end ë²”ìœ„ ë‚´ì—ì„œ ì´ë¶„ íƒìƒ‰ì„ ì§„í–‰í•œë‹¤. ì´ë¶„íƒìƒ‰ì„ ì§„í–‰í•˜ë©´ì„œ ë¸”ë£¨ë ˆì´ë¥¼ ë…¹í™”í•  ìˆ˜ ìˆëŠ” ì˜ìƒì˜ ê¸¸ì´ê°€ í•œ ì˜ìƒì˜ ê¸¸ì´ë³´ë‹¤ ì‘ìœ¼ë©´ beginì„ ì›€ì§ì¸ë‹¤. ë¸”ë£¨ë ˆì´ì— ë…¹í™”í•˜ëŠ” ê°¯ìˆ˜ê°€ ë¸”ë£¨ë ˆì´ë³´ë‹¤ ì´ ê°¯ìˆ˜ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì„ ê²½ìš° endë¥¼ ì›€ì§ì¸ë‹¤. ë¸”ë£¨ë ˆì´ì— ë…¹í™”í•˜ëŠ” ê°¯ìˆ˜ê°€ ë¸”ë£¨ë ˆì´ë³´ë‹¤ ì‘ì„ ê²½ìš° beginì„ ì›€ì§ì¸ë‹¤. ì „ì²´ ì†ŒìŠ¤#include &lt;bits/stdc++.h&gt;using namespace std;bool cmp(vector&lt;int&gt; arr, int mid, int M) &#123; int sum = 0; int count = 1; for (int arrIndex = 0; arrIndex &lt; arr.size(); arrIndex++) &#123; int value = arr[arrIndex]; if (value &gt; mid) &#123; return true; &#125; if (sum + value &lt;= mid) &#123; sum += value; &#125; else &#123; count += 1; sum = value; &#125; &#125; // ê¸¸ì´ê°€ ë„ˆë¬´ ì§§ë‹¤. beginì„ ëŠ˜ë ¤ì¤˜ì•¼ í•œë‹¤. return count &gt; M;&#125;int binarySearch(vector&lt;int&gt; arr, int N, int M) &#123; int begin = 1; int end = 0; for (int arrIndex = 0; arrIndex &lt; arr.size(); arrIndex++) &#123; end += arr[arrIndex]; &#125; while (begin &lt;= end) &#123; int mid = (begin + end) / 2; if (cmp(arr, mid, M)) &#123; begin = mid + 1; &#125; else &#123; end = mid - 1; &#125; &#125; return begin;&#125;int solution(vector&lt;int&gt; arr, int N, int M) &#123; int result = 0; result = binarySearch(arr, N, M); return result;&#125;int main(void) &#123; int N, M; vector&lt;int&gt; arr; cin &gt;&gt; N &gt;&gt; M; arr = vector&lt;int&gt;(N); for (int i = 0; i &lt; N; i++) &#123; cin &gt;&gt; arr[i]; &#125; cout &lt;&lt; solution(arr, N, M) &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì´ë¶„íƒìƒ‰","slug":"Develop/Beakjoon/ì´ë¶„íƒìƒ‰","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9D%B4%EB%B6%84%ED%83%90%EC%83%89/"}],"tags":[]},{"title":"ë°±ì¤€ 3015 - ì˜¤ì•„ì‹œìŠ¤ ì¬ê²°í•©","slug":"algorithm/baekjoon/á„Œá…¡á„…á…­á„€á…®á„Œá…©/STACK/3015-ì˜¤ì•„ì‹œìŠ¤_ì¬ê²°í•©","date":"2021-04-03T11:10:40.000Z","updated":"2024-11-28T13:59:36.629Z","comments":true,"path":"2021/04/03/algorithm/baekjoon/á„Œá…¡á„…á…­á„€á…®á„Œá…©/STACK/3015-ì˜¤ì•„ì‹œìŠ¤_ì¬ê²°í•©/","link":"","permalink":"https://ckck803.github.io/2021/04/03/algorithm/baekjoon/%E1%84%8C%E1%85%A1%E1%84%85%E1%85%AD%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9/STACK/3015-%EC%98%A4%EC%95%84%EC%8B%9C%EC%8A%A4_%EC%9E%AC%EA%B2%B0%ED%95%A9/","excerpt":"ë°±ì¤€ 3015 - ì˜¤ì•„ì‹œìŠ¤ ì¬ê²°í•©https://www.acmicpc.net/problem/1920 ë¬¸ì œ í•´ì„¤ì…ë ¥ë˜ëŠ” ê°’ì´ ì´ 50ë§Œê°œì´ë‹¤. ì´ ë¬¸ì œëŠ” O(N) or O(NlogN)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°–ê³  í•´ê²°ì„ í•´ì•¼í•˜ëŠ” ë¬¸ì œì´ë‹¤. í˜„ì¬ ê°’ì„ ì´ì „ ê°’ê³¼ ë¹„êµí•´ê°€ë©´ì„œ ë¬¸ì œë¥¼ í•´ê²° í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìŠ¤íƒì˜ ì—­í• ì€ ì„œë¡œë¶ˆ ìˆ˜ ìˆëŠ” ê°’ì˜ ìŒì„ ì €ì¥í•˜ê¸° ìœ„í•œ ì—­í• ì„ í•œë‹¤. ìŠ¤íƒë‚´ì˜ ê°’ì€ ì ì  ì‘ì€ ê°’ì´ ì¶”ê°€ ë˜ì•¼ í•œë‹¤. ë“¤ì–´ì˜¤ëŠ” ê°’ì´ topë³´ë‹¤ í´ ê²½ìš° ë“¤ì–´ì˜¤ëŠ” ê°’ë³´ë‹¤ í° ê°’ì´ ë‚˜íƒ€ë‚  ë•Œê¹Œì§€ popì„ ì§„í–‰í•˜ë©´ì„œ popì„ ì§„í–‰í•  ë•Œ í•´ë‹¹ ì¸ì›ìˆ˜ ë§Œí¼ ê°’ì„ ë”í•´ì¤€ë‹¤. ê°™ì€ ê°’ì´ ë“¤ì–´ì˜¬ ê²½ìš°ì„ ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ” ê²ƒì´ ì´ ë¬¸ì œì˜ ì–´ë ¤ìš´ ì ì´ë‹¤. ìë£Œêµ¬ì¡° pairë¥¼ ì´ìš©í•œë‹¤. firstì—ëŠ” ì‚¬ëŒì˜ í‚¤ë¥¼ secondì—ëŠ” ê°™ì€ í‚¤ì¸ ì‚¬ëŒì˜ ìˆ˜ë¥¼ ì €ì¥í•œë‹¤. í‚¤ê°€ ê°™ì€ ì‚¬ëŒì´ ë“¤ì–´ì˜¬ ê²½ìš° ê°™ì€ í‚¤ë¥¼ ê°–ëŠ” ì‚¬ëŒë§Œí¼ ê°’ì„ ì¶”ê°€í•´ì£¼ê³  ì‚¬ëŒìˆ˜ë¥¼ + 1 í•´ì£¼ê³  í•´ë‹¹ í‚¤ë¥¼ ë‹¤ì‹œ pushí•´ì¤€ë‹¤. ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;long long solution(vector&lt;int&gt; heights) &#123; stack&lt;pair&lt;int, int&gt;&gt; st; long long result = 0; for (int heightsIndex = 0; heightsIndex &lt; heights.size(); heightsIndex++) &#123; int height = heights[heightsIndex]; while (!st.empty() &amp;&amp; height &gt; st.top().first) &#123; result += st.top().second; st.pop(); &#125; if (!st.empty()) &#123; if (st.top().first == height) &#123; pair&lt;int, int&gt; temp = st.top(); st.pop(); result += temp.second; if (!st.empty()) &#123; result += 1; &#125; st.push(&#123;height, temp.second + 1&#125;); &#125; else &#123; result += 1; st.push(&#123;height, 1&#125;); &#125; &#125; else &#123; st.push(&#123;height, 1&#125;); &#125; &#125; return result;&#125;int main(void) &#123; int numOfPeople; vector&lt;int&gt; heights; cin &gt;&gt; numOfPeople; for (int peopleIndex = 0; peopleIndex &lt; numOfPeople; peopleIndex++) &#123; int height; cin &gt;&gt; height; heights.push_back(height); &#125; cout &lt;&lt; solution(heights) &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","text":"ë°±ì¤€ 3015 - ì˜¤ì•„ì‹œìŠ¤ ì¬ê²°í•©https://www.acmicpc.net/problem/1920 ë¬¸ì œ í•´ì„¤ì…ë ¥ë˜ëŠ” ê°’ì´ ì´ 50ë§Œê°œì´ë‹¤. ì´ ë¬¸ì œëŠ” O(N) or O(NlogN)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°–ê³  í•´ê²°ì„ í•´ì•¼í•˜ëŠ” ë¬¸ì œì´ë‹¤. í˜„ì¬ ê°’ì„ ì´ì „ ê°’ê³¼ ë¹„êµí•´ê°€ë©´ì„œ ë¬¸ì œë¥¼ í•´ê²° í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìŠ¤íƒì˜ ì—­í• ì€ ì„œë¡œë¶ˆ ìˆ˜ ìˆëŠ” ê°’ì˜ ìŒì„ ì €ì¥í•˜ê¸° ìœ„í•œ ì—­í• ì„ í•œë‹¤. ìŠ¤íƒë‚´ì˜ ê°’ì€ ì ì  ì‘ì€ ê°’ì´ ì¶”ê°€ ë˜ì•¼ í•œë‹¤. ë“¤ì–´ì˜¤ëŠ” ê°’ì´ topë³´ë‹¤ í´ ê²½ìš° ë“¤ì–´ì˜¤ëŠ” ê°’ë³´ë‹¤ í° ê°’ì´ ë‚˜íƒ€ë‚  ë•Œê¹Œì§€ popì„ ì§„í–‰í•˜ë©´ì„œ popì„ ì§„í–‰í•  ë•Œ í•´ë‹¹ ì¸ì›ìˆ˜ ë§Œí¼ ê°’ì„ ë”í•´ì¤€ë‹¤. ê°™ì€ ê°’ì´ ë“¤ì–´ì˜¬ ê²½ìš°ì„ ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ” ê²ƒì´ ì´ ë¬¸ì œì˜ ì–´ë ¤ìš´ ì ì´ë‹¤. ìë£Œêµ¬ì¡° pairë¥¼ ì´ìš©í•œë‹¤. firstì—ëŠ” ì‚¬ëŒì˜ í‚¤ë¥¼ secondì—ëŠ” ê°™ì€ í‚¤ì¸ ì‚¬ëŒì˜ ìˆ˜ë¥¼ ì €ì¥í•œë‹¤. í‚¤ê°€ ê°™ì€ ì‚¬ëŒì´ ë“¤ì–´ì˜¬ ê²½ìš° ê°™ì€ í‚¤ë¥¼ ê°–ëŠ” ì‚¬ëŒë§Œí¼ ê°’ì„ ì¶”ê°€í•´ì£¼ê³  ì‚¬ëŒìˆ˜ë¥¼ + 1 í•´ì£¼ê³  í•´ë‹¹ í‚¤ë¥¼ ë‹¤ì‹œ pushí•´ì¤€ë‹¤. ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;long long solution(vector&lt;int&gt; heights) &#123; stack&lt;pair&lt;int, int&gt;&gt; st; long long result = 0; for (int heightsIndex = 0; heightsIndex &lt; heights.size(); heightsIndex++) &#123; int height = heights[heightsIndex]; while (!st.empty() &amp;&amp; height &gt; st.top().first) &#123; result += st.top().second; st.pop(); &#125; if (!st.empty()) &#123; if (st.top().first == height) &#123; pair&lt;int, int&gt; temp = st.top(); st.pop(); result += temp.second; if (!st.empty()) &#123; result += 1; &#125; st.push(&#123;height, temp.second + 1&#125;); &#125; else &#123; result += 1; st.push(&#123;height, 1&#125;); &#125; &#125; else &#123; st.push(&#123;height, 1&#125;); &#125; &#125; return result;&#125;int main(void) &#123; int numOfPeople; vector&lt;int&gt; heights; cin &gt;&gt; numOfPeople; for (int peopleIndex = 0; peopleIndex &lt; numOfPeople; peopleIndex++) &#123; int height; cin &gt;&gt; height; heights.push_back(height); &#125; cout &lt;&lt; solution(heights) &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ìë£Œêµ¬ì¡°","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/"},{"name":"ìŠ¤íƒ","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°/ìŠ¤íƒ","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/"}],"tags":[]},{"title":"ë°±ì¤€ - ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬","slug":"algorithm/category/baekjoon-segment-tree","date":"2021-03-25T17:12:13.000Z","updated":"2024-11-28T13:59:34.856Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-segment-tree/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-segment-tree/","excerpt":"ë°±ì¤€ ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  2042 êµ¬ê°„ í•© êµ¬í•˜ê¸° ê¸°ë³¸ ìœ í˜•","text":"ë°±ì¤€ ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  2042 êµ¬ê°„ í•© êµ¬í•˜ê¸° ê¸°ë³¸ ìœ í˜•","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - ìŠ¬ë¼ì´ë”© ìœˆë„ìš°","slug":"algorithm/category/baekjoon-sliding-window","date":"2021-03-25T17:10:47.000Z","updated":"2024-11-28T13:59:34.361Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-sliding-window/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-sliding-window/","excerpt":"ë°±ì¤€ ìŠ¬ë¼ì´ë”© ìœˆë„ìš°ìŠ¬ë¼ì´ë”© ìœˆë„ìš° ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  2075 Në²ˆì§¸ í° ìˆ˜ ìŠ¬ë¼ì´ë”© ìœˆë„ìš° ê¸°ë³¸ ìœ í˜• 2096 ë‚´ë ¤ê°€ê¸°","text":"ë°±ì¤€ ìŠ¬ë¼ì´ë”© ìœˆë„ìš°ìŠ¬ë¼ì´ë”© ìœˆë„ìš° ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  2075 Në²ˆì§¸ í° ìˆ˜ ìŠ¬ë¼ì´ë”© ìœˆë„ìš° ê¸°ë³¸ ìœ í˜• 2096 ë‚´ë ¤ê°€ê¸°","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - ìˆ˜í•™","slug":"algorithm/category/baekjoon-math","date":"2021-03-25T17:09:10.000Z","updated":"2024-11-28T13:59:34.930Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-math/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-math/","excerpt":"ë°±ì¤€ - ìˆ˜í•™ìˆ˜í•™ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1085 ì§ì‚¬ê°í˜•ì—ì„œ íƒˆì¶œ https://www.acmicpc.net/problem/1085 1644 ì†Œìˆ˜ì˜ ì—°ì†í•© https://www.acmicpc.net/problem/1644 1712 ì†ìµë¶„ê¸°ì  https://www.acmicpc.net/problem/1712 1722 ìˆœì—´ì˜ ìˆœì„œ https://www.acmicpc.net/problem/1722 1978 ì•ŒíŒŒë²³ https://www.acmicpc.net/problem/1978 1990 ì†Œìˆ˜ì¸íŒ¬ë¦°ë“œë¡¬ https://www.acmicpc.net/problem/1990 2292 ë²Œì§‘ https://www.acmicpc.net/problem/2292 2839 ì„¤íƒˆë°°ë‹¬ https://www.acmicpc.net/problem/2839 2960 ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´ https://www.acmicpc.net/problem/2960 10819 ì°¨ì´ë¥¼ ìµœëŒ€ë¡œ https://www.acmicpc.net/problem/10819 ìˆœì—´, next_permutation 10950 A+B - 3 https://www.acmicpc.net/problem/10950 10952 A+B - 5 https://www.acmicpc.net/problem/10952 11021 A+B - 7 https://www.acmicpc.net/problem/11021 11022 A+B - 8 https://www.acmicpc.net/problem/11022","text":"ë°±ì¤€ - ìˆ˜í•™ìˆ˜í•™ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1085 ì§ì‚¬ê°í˜•ì—ì„œ íƒˆì¶œ https://www.acmicpc.net/problem/1085 1644 ì†Œìˆ˜ì˜ ì—°ì†í•© https://www.acmicpc.net/problem/1644 1712 ì†ìµë¶„ê¸°ì  https://www.acmicpc.net/problem/1712 1722 ìˆœì—´ì˜ ìˆœì„œ https://www.acmicpc.net/problem/1722 1978 ì•ŒíŒŒë²³ https://www.acmicpc.net/problem/1978 1990 ì†Œìˆ˜ì¸íŒ¬ë¦°ë“œë¡¬ https://www.acmicpc.net/problem/1990 2292 ë²Œì§‘ https://www.acmicpc.net/problem/2292 2839 ì„¤íƒˆë°°ë‹¬ https://www.acmicpc.net/problem/2839 2960 ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´ https://www.acmicpc.net/problem/2960 10819 ì°¨ì´ë¥¼ ìµœëŒ€ë¡œ https://www.acmicpc.net/problem/10819 ìˆœì—´, next_permutation 10950 A+B - 3 https://www.acmicpc.net/problem/10950 10952 A+B - 5 https://www.acmicpc.net/problem/10952 11021 A+B - 7 https://www.acmicpc.net/problem/11021 11022 A+B - 8 https://www.acmicpc.net/problem/11022","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - ë¹„íŠ¸ë§ˆìŠ¤í‚¹","slug":"algorithm/category/baekjoon-bitmasking","date":"2021-03-25T17:07:50.000Z","updated":"2024-11-28T13:59:34.144Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-bitmasking/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-bitmasking/","excerpt":"ë°±ì¤€ - ë¹„íŠ¸ ë§ˆìŠ¤í‚¹ë¹„íŠ¸ ë§ˆìŠ¤í¬ ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  2064 IP ì£¼ì†Œ í† í¬ë‚˜ì´ì§•, ë¹„íŠ¸ ì—°ì‚° 11723 ì§‘í•© ê¸°ë³¸ìœ í˜•","text":"ë°±ì¤€ - ë¹„íŠ¸ ë§ˆìŠ¤í‚¹ë¹„íŠ¸ ë§ˆìŠ¤í¬ ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  2064 IP ì£¼ì†Œ í† í¬ë‚˜ì´ì§•, ë¹„íŠ¸ ì—°ì‚° 11723 ì§‘í•© ê¸°ë³¸ìœ í˜•","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - ìœ ë‹ˆì˜¨ íŒŒì¸ë“œ","slug":"algorithm/category/baekjoon-union-find","date":"2021-03-25T17:06:18.000Z","updated":"2024-11-28T13:59:34.500Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-union-find/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-union-find/","excerpt":"ë°±ì¤€ ìœ ë‹ˆì˜¨ íŒŒì¸ë“œìœ ë‹ˆì˜¨ íŒŒì¸ë“œ ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1717 ì§‘í•©ì˜ í‘œí˜„ 1976 ì—¬í–‰ê°€ì 4195 ì¹œêµ¬ ë„¤íŠ¸ì›Œí¬ 10774 ì €ì§€ 10775 ê³µí•­","text":"ë°±ì¤€ ìœ ë‹ˆì˜¨ íŒŒì¸ë“œìœ ë‹ˆì˜¨ íŒŒì¸ë“œ ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1717 ì§‘í•©ì˜ í‘œí˜„ 1976 ì—¬í–‰ê°€ì 4195 ì¹œêµ¬ ë„¤íŠ¸ì›Œí¬ 10774 ì €ì§€ 10775 ê³µí•­","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬","slug":"algorithm/category/baekjoon-minimum-spaning-tree","date":"2021-03-25T17:04:36.000Z","updated":"2024-11-28T13:59:35.002Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-minimum-spaning-tree/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-minimum-spaning-tree/","excerpt":"ë°±ì¤€ ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬ ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1196 ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬ ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬ ê¸°ë³¸ ìœ í˜• 9372 ìƒê·¼ì´ì˜ ì—¬í–‰ 17472 ë‹¤ë¦¬ ë§Œë“¤ê¸° 2 ì‚¼ì„±, ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬","text":"ë°±ì¤€ ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬ ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1196 ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬ ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬ ê¸°ë³¸ ìœ í˜• 9372 ìƒê·¼ì´ì˜ ì—¬í–‰ 17472 ë‹¤ë¦¬ ë§Œë“¤ê¸° 2 ì‚¼ì„±, ìµœì†Œ ìŠ¤íŒ¨ë‹ íŠ¸ë¦¬","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - íˆ¬ í¬ì¸í„°","slug":"algorithm/category/baekjoon-twopointer","date":"2021-03-25T17:02:50.000Z","updated":"2024-11-28T13:59:34.569Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-twopointer/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-twopointer/","excerpt":"ë°±ì¤€ - íˆ¬ í¬ì¸í„°íˆ¬ í¬ì¸í„° ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1484 ë‹¤ì´ì–´íŠ¸ 1806 ë¶€ë¶„í•© 2003 ìˆ˜ë“¤ì˜ í•© 2 ê¸°ë³¸ ìœ í˜• 2230 ìˆ˜ ê³ ë¥´ê¸°","text":"ë°±ì¤€ - íˆ¬ í¬ì¸í„°íˆ¬ í¬ì¸í„° ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1484 ë‹¤ì´ì–´íŠ¸ 1806 ë¶€ë¶„í•© 2003 ìˆ˜ë“¤ì˜ í•© 2 ê¸°ë³¸ ìœ í˜• 2230 ìˆ˜ ê³ ë¥´ê¸°","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - ë°±íŠ¸ë˜í‚¹","slug":"algorithm/category/baekjoon-backtracking","date":"2021-03-25T17:01:10.000Z","updated":"2024-11-28T13:59:34.781Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-backtracking/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-backtracking/","excerpt":"ë°±ì¤€ ë°±íŠ¸ë˜í‚¹ë°±íŠ¸ë˜í‚¹ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1987 ë³‘ë“  ë‚˜ì´íŠ¸ https://www.acmicpc.net/problem/1987 2580 ìŠ¤ë„ì¿  https://www.acmicpc.net/problem/2580 4574 ìŠ¤ë„ë¯¸ë…¸ì¿  https://www.acmicpc.net/problem/4574 6603 ë¡œë˜ https://www.acmicpc.net/problem/6603 9663 N-Queen https://www.acmicpc.net/problem/9663 16987 ê³„ë€ìœ¼ë¡œ ê³„ë€ì¹˜ê¸° https://www.acmicpc.net/problem/16987","text":"ë°±ì¤€ ë°±íŠ¸ë˜í‚¹ë°±íŠ¸ë˜í‚¹ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1987 ë³‘ë“  ë‚˜ì´íŠ¸ https://www.acmicpc.net/problem/1987 2580 ìŠ¤ë„ì¿  https://www.acmicpc.net/problem/2580 4574 ìŠ¤ë„ë¯¸ë…¸ì¿  https://www.acmicpc.net/problem/4574 6603 ë¡œë˜ https://www.acmicpc.net/problem/6603 9663 N-Queen https://www.acmicpc.net/problem/9663 16987 ê³„ë€ìœ¼ë¡œ ê³„ë€ì¹˜ê¸° https://www.acmicpc.net/problem/16987","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - ì´ë¶„íƒìƒ‰","slug":"algorithm/category/baekjoon-binary","date":"2021-03-25T16:58:58.000Z","updated":"2024-11-28T13:59:34.432Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-binary/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-binary/","excerpt":"ë°±ì¤€ ì´ë¶„íƒìƒ‰ì´ë¶„ íƒìƒ‰ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1920 ìˆ˜ì°¾ê¸° https://www.acmicpc.net/problem/1920 1939 ì¤‘ëŸ‰ì œí•œ https://www.acmicpc.net/problem/13397 2110 ê³µìœ ê¸° ì„¤ì¹˜ https://www.acmicpc.net/problem/2210 2343 ê¸°íƒ€ë ˆìŠ¨ https://www.acmicpc.net/problem/2343 O ê²ë‚˜ ë§ì´ í‹€ë¦¼ 2792 ë³´ì„ìƒì https://www.acmicpc.net/problem/2792 O ì¤‘ìš”! ë‹¤ì‹œ í’€ì–´ë³´ê¸° 2805 ë‚˜ë¬´ìë¥´ê¸° https://www.acmicpc.net/problem/2805 2869 ë‹¬íŒ½ì´ëŠ” ì˜¬ë¼ê°€ê³  ì‹¶ë‹¤ https://www.acmicpc.net/problem/2869 3020 ê°œë˜¥ë²Œë ˆ https://www.acmicpc.net/problem/3020 10815 ìˆ«ìì¹´ë“œ https://www.acmicpc.net/problem/10815 10816 ìˆ«ìì¹´ë“œ2 https://www.acmicpc.net/problem/10816 13397 êµ¬ê°„ ë‚˜ëˆ„ê¸°2 https://www.acmicpc.net/problem/13397","text":"ë°±ì¤€ ì´ë¶„íƒìƒ‰ì´ë¶„ íƒìƒ‰ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1920 ìˆ˜ì°¾ê¸° https://www.acmicpc.net/problem/1920 1939 ì¤‘ëŸ‰ì œí•œ https://www.acmicpc.net/problem/13397 2110 ê³µìœ ê¸° ì„¤ì¹˜ https://www.acmicpc.net/problem/2210 2343 ê¸°íƒ€ë ˆìŠ¨ https://www.acmicpc.net/problem/2343 O ê²ë‚˜ ë§ì´ í‹€ë¦¼ 2792 ë³´ì„ìƒì https://www.acmicpc.net/problem/2792 O ì¤‘ìš”! ë‹¤ì‹œ í’€ì–´ë³´ê¸° 2805 ë‚˜ë¬´ìë¥´ê¸° https://www.acmicpc.net/problem/2805 2869 ë‹¬íŒ½ì´ëŠ” ì˜¬ë¼ê°€ê³  ì‹¶ë‹¤ https://www.acmicpc.net/problem/2869 3020 ê°œë˜¥ë²Œë ˆ https://www.acmicpc.net/problem/3020 10815 ìˆ«ìì¹´ë“œ https://www.acmicpc.net/problem/10815 10816 ìˆ«ìì¹´ë“œ2 https://www.acmicpc.net/problem/10816 13397 êµ¬ê°„ ë‚˜ëˆ„ê¸°2 https://www.acmicpc.net/problem/13397","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - BFS","slug":"algorithm/category/baekjoon-bfs","date":"2021-03-25T16:57:16.000Z","updated":"2024-11-28T13:59:34.710Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-bfs/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-bfs/","excerpt":"ë°±ì¤€ BFSBFSê¸°ë³¸ ìœ í˜• ë¬¸ì œ ì´ë¦„ í‹€ë¦°íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  c++ java python 1260 DFSì™€ BFS ê¸°ì´ˆ O 1953 íŒ€ ë°°ë¶„ 0 O ì´ë¶„ ê·¸ë˜í”„ 2178 ë¯¸ë¡œ íƒìƒ‰ ìµœë‹¨ ê±°ë¦¬ O O O ì „ì²´ ë¬¸ì œ ë¬¸ì œ ì´ë¦„ í‹€ë¦°íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  c++ java python 1012 ìœ ê¸°ë† ë°°ì¶” 2 O 1194 ë‹¬ì´ ì°¨ì˜¤ë¥¸ë‹¤, ê°€ì\u001c 1 O 1260 DFSì™€ BFS ê¸°ì´ˆ O O 1600 ë§ì´ ë˜ê³ í”ˆ ì›ìˆ­ì´ 5 O 1707 ì´ë¶„ ê·¸ë˜í”„ 4 O 1726 ë¡œë´‡ 1 O 1939 ì¤‘ëŸ‰ì œí•œ 3 O 1953 íŒ€ ë°°ë¶„ 0 O ì´ë¶„ ê·¸ë˜í”„ O 1963 ì†Œìˆ˜ ê²½ë¡œ 0 O 1967 íŠ¸ë¦¬ì˜ ì§€ë¦„ 2 O 2146 ë‹¤ë¦¬ ë§Œë“¤ê¸° 5 O 2178 ë¯¸ë¡œ íƒìƒ‰ ìµœë‹¨ ê±°ë¦¬ O O O 2206 ë²½ ë¶€ìˆ˜ê³  ì´ë™í•˜ê¸° 5 2251 ë¬¼í†µ 0 2234 ì„±ê³½ 0 2468 ì•ˆì „ ì˜ì—­ 2 2573 ë¹™ì‚° 3 2583 ì˜ì—­ êµ¬í•˜ê¸° 1 2589 ë³´ë¬¼ì„¬ 0 2606 ë°”ì´ëŸ¬ìŠ¤ 0 2644 ì´Œìˆ˜ ê³„ì‚° 0 2667 ë‹¨ì§€ë²ˆí˜¸ ë¶™ì´ê¸° 4 2933 ë¯¸ë„¤ë„ 5 5014 ìŠ¤íƒ€íŠ¸ì™€ ë§í¬ 1 5213 ê³¼ì™¸ë§¨ 6 5427 ë¶ˆ 2 6087 ë ˆì´ì € í†µì‹  0 6593 ìƒë²” ë¹Œë”© 1 7576 í† ë§ˆí†  1 9019 DSLR 4 9205 ë§¥ì£¼ ë§ˆì‹œë©´ì„œ ê±¸ì–´ê°€ê¸° 3 9372 ìƒê·¼ì´ì˜ ì—¬í–‰ 1 12886 ëŒ ê·¸ë£¹ 1 15558 ì í”„ ê²Œì„ 11 16236 ì•„ê¸° ìƒì–´ 4 O bfsë¥¼ í†µí•´ ê±°ë¦¬êµ¬í•˜ê¸° 16397 íƒˆì¶œ 5 16933 ë²½ ë¶€ìˆ˜ê³  ì´ë™í•˜ê¸°3 6 16959 ì²´ìŠ¤íŒ ì—¬í–‰ 1 0 17471 ê²Œë¦¬ë§¨ë”ë§ 4 O ì¡°í•©, bfs, ì‚¼ì„± 17836 ê³µì£¼ë‹˜ì„ êµ¬í•´ë¼ 5 18809 Gaaaaaaaaaarden 0 ì¡°í•©, bfs, ì‚¼ì„±","text":"ë°±ì¤€ BFSBFSê¸°ë³¸ ìœ í˜• ë¬¸ì œ ì´ë¦„ í‹€ë¦°íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  c++ java python 1260 DFSì™€ BFS ê¸°ì´ˆ O 1953 íŒ€ ë°°ë¶„ 0 O ì´ë¶„ ê·¸ë˜í”„ 2178 ë¯¸ë¡œ íƒìƒ‰ ìµœë‹¨ ê±°ë¦¬ O O O ì „ì²´ ë¬¸ì œ ë¬¸ì œ ì´ë¦„ í‹€ë¦°íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  c++ java python 1012 ìœ ê¸°ë† ë°°ì¶” 2 O 1194 ë‹¬ì´ ì°¨ì˜¤ë¥¸ë‹¤, ê°€ì\u001c 1 O 1260 DFSì™€ BFS ê¸°ì´ˆ O O 1600 ë§ì´ ë˜ê³ í”ˆ ì›ìˆ­ì´ 5 O 1707 ì´ë¶„ ê·¸ë˜í”„ 4 O 1726 ë¡œë´‡ 1 O 1939 ì¤‘ëŸ‰ì œí•œ 3 O 1953 íŒ€ ë°°ë¶„ 0 O ì´ë¶„ ê·¸ë˜í”„ O 1963 ì†Œìˆ˜ ê²½ë¡œ 0 O 1967 íŠ¸ë¦¬ì˜ ì§€ë¦„ 2 O 2146 ë‹¤ë¦¬ ë§Œë“¤ê¸° 5 O 2178 ë¯¸ë¡œ íƒìƒ‰ ìµœë‹¨ ê±°ë¦¬ O O O 2206 ë²½ ë¶€ìˆ˜ê³  ì´ë™í•˜ê¸° 5 2251 ë¬¼í†µ 0 2234 ì„±ê³½ 0 2468 ì•ˆì „ ì˜ì—­ 2 2573 ë¹™ì‚° 3 2583 ì˜ì—­ êµ¬í•˜ê¸° 1 2589 ë³´ë¬¼ì„¬ 0 2606 ë°”ì´ëŸ¬ìŠ¤ 0 2644 ì´Œìˆ˜ ê³„ì‚° 0 2667 ë‹¨ì§€ë²ˆí˜¸ ë¶™ì´ê¸° 4 2933 ë¯¸ë„¤ë„ 5 5014 ìŠ¤íƒ€íŠ¸ì™€ ë§í¬ 1 5213 ê³¼ì™¸ë§¨ 6 5427 ë¶ˆ 2 6087 ë ˆì´ì € í†µì‹  0 6593 ìƒë²” ë¹Œë”© 1 7576 í† ë§ˆí†  1 9019 DSLR 4 9205 ë§¥ì£¼ ë§ˆì‹œë©´ì„œ ê±¸ì–´ê°€ê¸° 3 9372 ìƒê·¼ì´ì˜ ì—¬í–‰ 1 12886 ëŒ ê·¸ë£¹ 1 15558 ì í”„ ê²Œì„ 11 16236 ì•„ê¸° ìƒì–´ 4 O bfsë¥¼ í†µí•´ ê±°ë¦¬êµ¬í•˜ê¸° 16397 íƒˆì¶œ 5 16933 ë²½ ë¶€ìˆ˜ê³  ì´ë™í•˜ê¸°3 6 16959 ì²´ìŠ¤íŒ ì—¬í–‰ 1 0 17471 ê²Œë¦¬ë§¨ë”ë§ 4 O ì¡°í•©, bfs, ì‚¼ì„± 17836 ê³µì£¼ë‹˜ì„ êµ¬í•´ë¼ 5 18809 Gaaaaaaaaaarden 0 ì¡°í•©, bfs, ì‚¼ì„±","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - DFS","slug":"algorithm/category/baekjoon-dfs","date":"2021-03-25T16:55:55.000Z","updated":"2024-11-28T13:59:34.218Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-dfs/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-dfs/","excerpt":"ë°±ì¤€ DFSDFS(ê¹Šì´ ìš°ì„  íƒìƒ‰) ë¬¸ì œ ì´ë¦„ í‹€ë¦°íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  c++ java python 1260 DFSì™€ BFS 1325 íš¨ìœ¨ì ì¸ í•´í‚¹ 9466 í…€ í”„ë¡œì íŠ¸ 10026 ì ë¡ìƒ‰ì•½ 15649 Nê³¼ M(1) 15650 Nê³¼ M(2) 15651 Nê³¼ M(3) 15652 Nê³¼ M(4)","text":"ë°±ì¤€ DFSDFS(ê¹Šì´ ìš°ì„  íƒìƒ‰) ë¬¸ì œ ì´ë¦„ í‹€ë¦°íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  c++ java python 1260 DFSì™€ BFS 1325 íš¨ìœ¨ì ì¸ í•´í‚¹ 9466 í…€ í”„ë¡œì íŠ¸ 10026 ì ë¡ìƒ‰ì•½ 15649 Nê³¼ M(1) 15650 Nê³¼ M(2) 15651 Nê³¼ M(3) 15652 Nê³¼ M(4)","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - ë¬¸ìì—´ ì²˜ë¦¬","slug":"algorithm/category/baekjoon-string","date":"2021-03-25T16:52:49.000Z","updated":"2024-11-28T13:59:35.109Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-string/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-string/","excerpt":"ë°±ì¤€ ë¬¸ìì—´ ì²˜ë¦¬ë¬¸ìì—´ ì²˜ë¦¬ ë¬¸ì œ ì´ë¦„ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  cpp java python 1032 ëª…ë ¹ í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´ ì† ë¬¸ì, ë¬¸ìì—´ ë¹„êµ O O O 1152 ë‹¨ì–´ì˜ ê°œìˆ˜ ë¬¸ìì—´ ë¶„ë¦¬, ë¬¸ìì—´ í† í°í™” O O 1157 ë‹¨ì–´ ê³µë¶€ ì†Œë¬¸ì -&gt; ëŒ€ë¬¸ì O O 1296 ë°ì´íŠ¸ ë¬¸ìì—´ ì •ë ¬ O O O 1316 ê·¸ë£¹ ë‹¨ì–´ ì²´ì»¤ ë¬¸ìì—´ ì† ë¬¸ì ì°¾ê¸° O O O 1475 ë°© ë²ˆí˜¸ ë¬¸ìì—´ ì† ë¬¸ì O O 2064 IP ì£¼ì†Œ í† í¬ë‚˜ì´ì§• O 2743 ë‹¨ì–´ ê¸¸ì´ ì¬ê¸° ë¬¸ìì—´ ê¸¸ì´ O O O 2857 FBI ë¬¸ìì—´ ì† ë‹¨ì–´ ì°¾ê¸° O O O 2902 KMPëŠ” ì™œ KMPì¼ê¹Œ? ë¬¸ìì—´ í† í°í™” O O O 2908 ìƒìˆ˜ ë¬¸ìì—´ ë’¤ì§‘ê¸° O O 2941 í¬ë¡œì•„í‹°ì•„ ë¬¸ì ë¬¸ìì—´ ì† ë¬¸ì ì°¾ê¸°, ë¬¸ìì—´ ëŒ€ì¹˜ O O O 5586 JOIì™€ IOI ë¬¸ìì—´ ë¶„ë¦¬substr O O O 10808 ì•ŒíŒŒë²³ ê°¯ìˆ˜ 10809 ì•ŒíŒŒë²³ ì°¾ê¸° ë¬¸ì checkí•˜ëŠ” ë°©ë²•, dic ì‚¬ìš© ë°©ë²• O 11654 ì•„ìŠ¤í‚¤ ì½”ë“œ ì•„ìŠ¤í‚¤ ì½”ë“œ ë³€í™˜ O","text":"ë°±ì¤€ ë¬¸ìì—´ ì²˜ë¦¬ë¬¸ìì—´ ì²˜ë¦¬ ë¬¸ì œ ì´ë¦„ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  cpp java python 1032 ëª…ë ¹ í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´ ì† ë¬¸ì, ë¬¸ìì—´ ë¹„êµ O O O 1152 ë‹¨ì–´ì˜ ê°œìˆ˜ ë¬¸ìì—´ ë¶„ë¦¬, ë¬¸ìì—´ í† í°í™” O O 1157 ë‹¨ì–´ ê³µë¶€ ì†Œë¬¸ì -&gt; ëŒ€ë¬¸ì O O 1296 ë°ì´íŠ¸ ë¬¸ìì—´ ì •ë ¬ O O O 1316 ê·¸ë£¹ ë‹¨ì–´ ì²´ì»¤ ë¬¸ìì—´ ì† ë¬¸ì ì°¾ê¸° O O O 1475 ë°© ë²ˆí˜¸ ë¬¸ìì—´ ì† ë¬¸ì O O 2064 IP ì£¼ì†Œ í† í¬ë‚˜ì´ì§• O 2743 ë‹¨ì–´ ê¸¸ì´ ì¬ê¸° ë¬¸ìì—´ ê¸¸ì´ O O O 2857 FBI ë¬¸ìì—´ ì† ë‹¨ì–´ ì°¾ê¸° O O O 2902 KMPëŠ” ì™œ KMPì¼ê¹Œ? ë¬¸ìì—´ í† í°í™” O O O 2908 ìƒìˆ˜ ë¬¸ìì—´ ë’¤ì§‘ê¸° O O 2941 í¬ë¡œì•„í‹°ì•„ ë¬¸ì ë¬¸ìì—´ ì† ë¬¸ì ì°¾ê¸°, ë¬¸ìì—´ ëŒ€ì¹˜ O O O 5586 JOIì™€ IOI ë¬¸ìì—´ ë¶„ë¦¬substr O O O 10808 ì•ŒíŒŒë²³ ê°¯ìˆ˜ 10809 ì•ŒíŒŒë²³ ì°¾ê¸° ë¬¸ì checkí•˜ëŠ” ë°©ë²•, dic ì‚¬ìš© ë°©ë²• O 11654 ì•„ìŠ¤í‚¤ ì½”ë“œ ì•„ìŠ¤í‚¤ ì½”ë“œ ë³€í™˜ O","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - ì‚¼ì„± ê¸°ì¶œë¬¸ì œ","slug":"algorithm/category/baekjoon-samsung","date":"2021-03-25T16:50:28.000Z","updated":"2024-11-28T13:59:34.288Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-samsung/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-samsung/","excerpt":"ë°±ì¤€ ì‚¼ì„± ê¸°ì¶œë¬¸ì œì‚¼ì„± ê¸°ì¶œ ë¬¸ì œ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1012 ìœ ê¸°ë† ë°°ì¶” https://www.acmicpc.net/problem/1012 1600 ë§ì´ ë˜ê³ í”ˆ ì›ìˆ­ì´ https://www.acmicpc.net/problem/1600 1707 ì´ë¶„ ê·¸ë˜í”„ https://www.acmicpc.net/problem/1707 1726 ë¡œë´‡ https://www.acmicpc.net/problem/1726 1939 ì¤‘ëŸ‰ì œí•œ https://www.acmicpc.net/problem/1939 1953 íŒ€ ë°°ë¶„ https://www.acmicpc.net/problem/1953 O ì´ë¶„ ê·¸ë˜í”„ 1963 ì†Œìˆ˜ ê²½ë¡œ https://www.acmicpc.net/problem/1963 1967 íŠ¸ë¦¬ì˜ ì§€ë¦„ https://www.acmicpc.net/problem/1967 2146 ë‹¤ë¦¬ ë§Œë“¤ê¸° https://www.acmicpc.net/problem/2146 2206 ë²½ ë¶€ìˆ˜ê³  ì´ë™í•˜ê¸° https://www.acmicpc.net/problem/2206 2251 ë¬¼í†µ https://www.acmicpc.net/problem/2251 2468 ì•ˆì „ ì˜ì—­ https://www.acmicpc.net/problem/2468 2573 ë¹™ì‚° https://www.acmicpc.net/problem/2573 2583 ì˜ì—­ êµ¬í•˜ê¸° https://www.acmicpc.net/problem/2583 2589 ë³´ë¬¼ì„¬ https://www.acmicpc.net/problem/2589 2606 ë°”ì´ëŸ¬ìŠ¤ https://www.acmicpc.net/problem/2606 2644 ì´Œìˆ˜ ê³„ì‚° https://www.acmicpc.net/problem/2644 2667 ë‹¨ì§€ë²ˆí˜¸ ë¶™ì´ê¸° https://www.acmicpc.net/problem/2667 2933 ë¯¸ë„¤ë„ https://www.acmicpc.net/problem/2933 5014 ìŠ¤íƒ€íŠ¸ì™€ ë§í¬ https://www.acmicpc.net/problem/5014 5213 ê³¼ì™¸ë§¨ https://www.acmicpc.net/problem/5213 5427 ë¶ˆ https://www.acmicpc.net/problem/5427 6087 ë ˆì´ì € í†µì‹  https://www.acmicpc.net/problem/6087 6593 ìƒë²” ë¹Œë”© https://www.acmicpc.net/problem/5427 7576 í† ë§ˆí†  https://www.acmicpc.net/problem/7576 9019 DSLR https://www.acmicpc.net/problem/9019 9205 ë§¥ì£¼ ë§ˆì‹œë©´ì„œ ê±¸ì–´ê°€ê¸° https://www.acmicpc.net/problem/9205 9372 ìƒê·¼ì´ì˜ ì—¬í–‰ https://www.acmicpc.net/problem/9372 12886 ëŒ ê·¸ë£¹ https://www.acmicpc.net/problem/12886 16236 ì•„ê¸° ìƒì–´ https://www.acmicpc.net/problem/16236 O bfsë¥¼ í†µí•´ ê±°ë¦¬êµ¬í•˜ê¸° 16397 íƒˆì¶œ https://www.acmicpc.net/problem/16397 17471 ê²Œë¦¬ë§¨ë”ë§ https://www.acmicpc.net/problem/17471 O ì¡°í•©, bfs 17836 ê³µì£¼ë‹˜ì„ êµ¬í•´ë¼ https://www.acmicpc.net/problem/17836 ë¸Œë£¨íŠ¸ í¬ìŠ¤ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1051 ìˆ«ì ì§ì‚¬ê°í˜• https://www.acmicpc.net/problem/1051 1065 í•œìˆ˜ https://www.acmicpc.net/problem/1065 1182 ë¶€ë¶„ìˆ˜ì—´ì˜ í•© https://www.acmicpc.net/problem/1182 1436 ì˜í™”ê°ë… ìŠ˜ https://www.acmicpc.net/problem/1436 1748 ìˆ˜ ì´ì–´ì“°ê¸°1 https://www.acmicpc.net/problem/1748 2231 ë¶„í•´ í•© https://www.acmicpc.net/problem/2231 2309 ì¼ê³± ë‚œìŸì´ https://www.acmicpc.net/problem/2309 2798 ë¸”ë™ì­ https://www.acmicpc.net/problem/2798 3085 ì‚¬íƒ• ê²Œì„ https://www.acmicpc.net/problem/3085 7568 ë©ì¹˜ https://www.acmicpc.net/problem/7568 10448 ìœ ë ˆì¹´ ì´ë¡  https://www.acmicpc.net/problem/10448 12100 2048(Easy) https://www.acmicpc.net/problem/12100 12738 ê°€ì¥ ê¸´ ì¦ê°€í•˜ëŠ” ë¶€ë¶„ ìˆ˜ì—´3 https://www.acmicpc.net/problem/12738 13460 êµ¬ìŠ¬ íƒˆì¶œ2 https://www.acmicpc.net/problem/13460 O whileë¬¸ì„ ì´ìš©í•œ bfs 14502 ì—°êµ¬ì†Œ https://www.acmicpc.net/problem/14502 14888 ì—°ì‚°ì ë¼ì›Œë„£ê¸° https://www.acmicpc.net/problem/14888 14889 ìŠ¤íƒ€í¬ì™€ ë§í¬ https://www.acmicpc.net/problem/14889 15653 êµ¬ìŠ¬ íƒˆì¶œ4 https://www.acmicpc.net/problem/15653 O whileë¬¸ì„ ì´ìš©í•œ bfs 15683 ê°ì‹œ https://www.acmicpc.net/problem/15683 15684 ì‚¬ë‹¤ë¦¬ ì¡°ì‘ https://www.acmicpc.net/problem/15684 15686 ì¹˜í‚¨ ë°°ë‹¬ https://www.acmicpc.net/problem/14686 16198 ì—ë„ˆì§€ ëª¨ìœ¼ê¸° https://www.acmicpc.net/problem/16198 17127 ë²šê½ƒì´ ì •ë³´ì„¬ì— í”¼ì–´ë‚œ ì´ìœ  https://www.acmicpc.net/problem/17127 17142 ì—°êµ¬ì†Œ 3 https://www.acmicpc.net/problem/17142 O ì¡°í•©, ê²½ìš°ì˜ ìˆ˜ íƒìƒ‰bfs 17779 ê²Œë¦¬ë©˜ë”ë§2 https://www.acmicpc.net/problem/17779 O ì˜ì—­ ë‚˜ëˆ„ì–´ íƒìƒ‰í•˜ê¸°","text":"ë°±ì¤€ ì‚¼ì„± ê¸°ì¶œë¬¸ì œì‚¼ì„± ê¸°ì¶œ ë¬¸ì œ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1012 ìœ ê¸°ë† ë°°ì¶” https://www.acmicpc.net/problem/1012 1600 ë§ì´ ë˜ê³ í”ˆ ì›ìˆ­ì´ https://www.acmicpc.net/problem/1600 1707 ì´ë¶„ ê·¸ë˜í”„ https://www.acmicpc.net/problem/1707 1726 ë¡œë´‡ https://www.acmicpc.net/problem/1726 1939 ì¤‘ëŸ‰ì œí•œ https://www.acmicpc.net/problem/1939 1953 íŒ€ ë°°ë¶„ https://www.acmicpc.net/problem/1953 O ì´ë¶„ ê·¸ë˜í”„ 1963 ì†Œìˆ˜ ê²½ë¡œ https://www.acmicpc.net/problem/1963 1967 íŠ¸ë¦¬ì˜ ì§€ë¦„ https://www.acmicpc.net/problem/1967 2146 ë‹¤ë¦¬ ë§Œë“¤ê¸° https://www.acmicpc.net/problem/2146 2206 ë²½ ë¶€ìˆ˜ê³  ì´ë™í•˜ê¸° https://www.acmicpc.net/problem/2206 2251 ë¬¼í†µ https://www.acmicpc.net/problem/2251 2468 ì•ˆì „ ì˜ì—­ https://www.acmicpc.net/problem/2468 2573 ë¹™ì‚° https://www.acmicpc.net/problem/2573 2583 ì˜ì—­ êµ¬í•˜ê¸° https://www.acmicpc.net/problem/2583 2589 ë³´ë¬¼ì„¬ https://www.acmicpc.net/problem/2589 2606 ë°”ì´ëŸ¬ìŠ¤ https://www.acmicpc.net/problem/2606 2644 ì´Œìˆ˜ ê³„ì‚° https://www.acmicpc.net/problem/2644 2667 ë‹¨ì§€ë²ˆí˜¸ ë¶™ì´ê¸° https://www.acmicpc.net/problem/2667 2933 ë¯¸ë„¤ë„ https://www.acmicpc.net/problem/2933 5014 ìŠ¤íƒ€íŠ¸ì™€ ë§í¬ https://www.acmicpc.net/problem/5014 5213 ê³¼ì™¸ë§¨ https://www.acmicpc.net/problem/5213 5427 ë¶ˆ https://www.acmicpc.net/problem/5427 6087 ë ˆì´ì € í†µì‹  https://www.acmicpc.net/problem/6087 6593 ìƒë²” ë¹Œë”© https://www.acmicpc.net/problem/5427 7576 í† ë§ˆí†  https://www.acmicpc.net/problem/7576 9019 DSLR https://www.acmicpc.net/problem/9019 9205 ë§¥ì£¼ ë§ˆì‹œë©´ì„œ ê±¸ì–´ê°€ê¸° https://www.acmicpc.net/problem/9205 9372 ìƒê·¼ì´ì˜ ì—¬í–‰ https://www.acmicpc.net/problem/9372 12886 ëŒ ê·¸ë£¹ https://www.acmicpc.net/problem/12886 16236 ì•„ê¸° ìƒì–´ https://www.acmicpc.net/problem/16236 O bfsë¥¼ í†µí•´ ê±°ë¦¬êµ¬í•˜ê¸° 16397 íƒˆì¶œ https://www.acmicpc.net/problem/16397 17471 ê²Œë¦¬ë§¨ë”ë§ https://www.acmicpc.net/problem/17471 O ì¡°í•©, bfs 17836 ê³µì£¼ë‹˜ì„ êµ¬í•´ë¼ https://www.acmicpc.net/problem/17836 ë¸Œë£¨íŠ¸ í¬ìŠ¤ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1051 ìˆ«ì ì§ì‚¬ê°í˜• https://www.acmicpc.net/problem/1051 1065 í•œìˆ˜ https://www.acmicpc.net/problem/1065 1182 ë¶€ë¶„ìˆ˜ì—´ì˜ í•© https://www.acmicpc.net/problem/1182 1436 ì˜í™”ê°ë… ìŠ˜ https://www.acmicpc.net/problem/1436 1748 ìˆ˜ ì´ì–´ì“°ê¸°1 https://www.acmicpc.net/problem/1748 2231 ë¶„í•´ í•© https://www.acmicpc.net/problem/2231 2309 ì¼ê³± ë‚œìŸì´ https://www.acmicpc.net/problem/2309 2798 ë¸”ë™ì­ https://www.acmicpc.net/problem/2798 3085 ì‚¬íƒ• ê²Œì„ https://www.acmicpc.net/problem/3085 7568 ë©ì¹˜ https://www.acmicpc.net/problem/7568 10448 ìœ ë ˆì¹´ ì´ë¡  https://www.acmicpc.net/problem/10448 12100 2048(Easy) https://www.acmicpc.net/problem/12100 12738 ê°€ì¥ ê¸´ ì¦ê°€í•˜ëŠ” ë¶€ë¶„ ìˆ˜ì—´3 https://www.acmicpc.net/problem/12738 13460 êµ¬ìŠ¬ íƒˆì¶œ2 https://www.acmicpc.net/problem/13460 O whileë¬¸ì„ ì´ìš©í•œ bfs 14502 ì—°êµ¬ì†Œ https://www.acmicpc.net/problem/14502 14888 ì—°ì‚°ì ë¼ì›Œë„£ê¸° https://www.acmicpc.net/problem/14888 14889 ìŠ¤íƒ€í¬ì™€ ë§í¬ https://www.acmicpc.net/problem/14889 15653 êµ¬ìŠ¬ íƒˆì¶œ4 https://www.acmicpc.net/problem/15653 O whileë¬¸ì„ ì´ìš©í•œ bfs 15683 ê°ì‹œ https://www.acmicpc.net/problem/15683 15684 ì‚¬ë‹¤ë¦¬ ì¡°ì‘ https://www.acmicpc.net/problem/15684 15686 ì¹˜í‚¨ ë°°ë‹¬ https://www.acmicpc.net/problem/14686 16198 ì—ë„ˆì§€ ëª¨ìœ¼ê¸° https://www.acmicpc.net/problem/16198 17127 ë²šê½ƒì´ ì •ë³´ì„¬ì— í”¼ì–´ë‚œ ì´ìœ  https://www.acmicpc.net/problem/17127 17142 ì—°êµ¬ì†Œ 3 https://www.acmicpc.net/problem/17142 O ì¡°í•©, ê²½ìš°ì˜ ìˆ˜ íƒìƒ‰bfs 17779 ê²Œë¦¬ë©˜ë”ë§2 https://www.acmicpc.net/problem/17779 O ì˜ì—­ ë‚˜ëˆ„ì–´ íƒìƒ‰í•˜ê¸°","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"ë°±ì¤€ - ìë£Œêµ¬ì¡°","slug":"algorithm/category/baekjoon-structure","date":"2021-03-25T16:43:37.000Z","updated":"2024-11-28T13:59:34.639Z","comments":true,"path":"2021/03/26/algorithm/category/baekjoon-structure/","link":"","permalink":"https://ckck803.github.io/2021/03/26/algorithm/category/baekjoon-structure/","excerpt":"ë°±ì¤€ ìë£Œêµ¬ì¡°vector ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1158 ìš”ì„¸í‘¸ìŠ¤ ë¬¸ì œ 1 ìŠ¤íƒ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1406 ì—ë””í„° https://www.acmicpc.net/problem/1406 1918 í›„ìœ„í‘œê¸°ì‹ https://www.acmicpc.net/problem/1918 3015 ì˜¤ì•„ì‹œìŠ¤ ì¬ê²°í•© https://www.acmicpc.net/problem/3015 O ë‹¤ì‹œ í’€ì–´ë³´ê¸° 9012 ê´„í˜¸ https://www.acmicpc.net/problem/9012 10799 ì‡ ë§‰ëŒ€ê¸° https://www.acmicpc.net/problem/10799 Set ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1181 ë‹¨ì–´ ì •ë ¬ 1539 ì´ì§„ ê²€ìƒ‰ íŠ¸ë¦¬ 2210 ìˆ«ìíŒ ì í”„ 7785 íšŒì‚¬ì— ìˆëŠ” ì‚¬ëŒ map ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1302 1539 9375","text":"ë°±ì¤€ ìë£Œêµ¬ì¡°vector ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1158 ìš”ì„¸í‘¸ìŠ¤ ë¬¸ì œ 1 ìŠ¤íƒ ë¬¸ì œ ì´ë¦„ ë§í¬ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1406 ì—ë””í„° https://www.acmicpc.net/problem/1406 1918 í›„ìœ„í‘œê¸°ì‹ https://www.acmicpc.net/problem/1918 3015 ì˜¤ì•„ì‹œìŠ¤ ì¬ê²°í•© https://www.acmicpc.net/problem/3015 O ë‹¤ì‹œ í’€ì–´ë³´ê¸° 9012 ê´„í˜¸ https://www.acmicpc.net/problem/9012 10799 ì‡ ë§‰ëŒ€ê¸° https://www.acmicpc.net/problem/10799 Set ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1181 ë‹¨ì–´ ì •ë ¬ 1539 ì´ì§„ ê²€ìƒ‰ íŠ¸ë¦¬ 2210 ìˆ«ìíŒ ì í”„ 7785 íšŒì‚¬ì— ìˆëŠ” ì‚¬ëŒ map ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  1302 1539 9375 ì´ì§„ ê²€ìƒ‰ íŠ¸ë¦¬ ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  5639 ì´ì§„ ê²€ìƒ‰ íŠ¸ë¦¬ 1 íŠ¸ë¼ì´ ë¬¸ì œ ì´ë¦„ í‹€ë¦° íšŸìˆ˜ ì •ë¦¬ì—¬ë¶€ ë¹„ê³  5052 ì „í™”ë²ˆí˜¸ ëª©ë¡ 5670 íœ´ëŒ€í° ìíŒ 13505","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"1194-ë‹¬ì´ì°¨ì˜¤ë¥¸ë‹¤_ê°€ì","slug":"algorithm/baekjoon/BFS/1194-ë‹¬ì´ì°¨ì˜¤ë¥¸ë‹¤-ê°€ì","date":"2021-03-19T17:21:07.000Z","updated":"2024-11-28T13:59:36.379Z","comments":true,"path":"2021/03/20/algorithm/baekjoon/BFS/1194-ë‹¬ì´ì°¨ì˜¤ë¥¸ë‹¤-ê°€ì/","link":"","permalink":"https://ckck803.github.io/2021/03/20/algorithm/baekjoon/BFS/1194-%EB%8B%AC%EC%9D%B4%EC%B0%A8%EC%98%A4%EB%A5%B8%EB%8B%A4-%EA%B0%80%EC%9E%90/","excerpt":"ë°±ì¤€ 1194 - ë‹¬ì´ ì°¨ì˜¤ë¥¸ë‹¤. ê°€ìhttps://www.acmicpc.net/problem/1194 ë¬¸ì œ í•´ì„¤ê¸°ì¡´ BFSë¬¸ì œë¥¼ í‘¸ëŠ” í˜•ì‹ì— ë¹„íŠ¸ë§ˆìŠ¤í‚¹ê¹Œì§€ ë”í•´ì§„ ë¬¸ì œì´ë‹¤. ë¹„íŠ¸ë§ˆìŠ¤í‚¹ì„ í†µí•´ í‚¤ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê°ê°ì˜ ìƒíƒœë“¤ì„ ì²´í¬í•  ìˆ˜ ìˆë‹¤. í‚¤ëŠ” ì´ 6ê°œê°€ ì£¼ì–´ì§€ê¸° ë•Œë¬¸ì— 50x50x64 = 160,000 ì˜ ê³µê°„ ë³µì¡ë„ë¥¼ ê°–ê²Œ ë¼ ë©”ëª¨ë¦¬ ì œí•œì— ê±¸ë¦¬ì§€ ì•ŠëŠ”ë‹¤. ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;int N, M;char Map[55][55];bool check[1 &lt;&lt; 6][55][55];int dx[4] = &#123;1, -1, 0, 0&#125;;int dy[4] = &#123;0, 0, 1, -1&#125;;queue&lt;pair&lt;int, int&gt;&gt; q;int startY, startX;struct point &#123; int y; int x; int key; int count;&#125;;int bfs() &#123; queue&lt;point&gt; q; q.push(&#123;startY, startX, 0, 0&#125;); check[0][startY][startX] = true; while (!q.empty()) &#123; int cntY = q.front().y; int cntX = q.front().x; int cntKey = q.front().key; int cntCount = q.front().count; q.pop(); if (Map[cntY][cntX] == &#x27;1&#x27;) &#123; return cntCount; &#125; for (int i = 0; i &lt; 4; i++) &#123; int ny = cntY + dy[i]; int nx = cntX + dx[i]; if (0 &gt;= ny || ny &gt; N || 0 &gt;= nx || nx &gt; M) &#123; continue; &#125; if (check[cntKey][ny][nx] == true) &#123; continue; &#125; if (Map[ny][nx] == &#x27;.&#x27;) &#123; check[cntKey][ny][nx] = true; q.push(&#123;ny, nx, cntKey, cntCount + 1&#125;); &#125; else &#123; // ì—´ì‡ ì— ë§ˆì£¼ì³¤ì„ ê²½ìš° if (&#x27;a&#x27; &lt;= Map[ny][nx] &amp;&amp; Map[ny][nx] &lt;= &#x27;f&#x27;) &#123; int key = (1 &lt;&lt; (Map[ny][nx] - &#x27;a&#x27;)); check[cntKey | key][ny][nx] = true; q.push(&#123;ny, nx, cntKey | key, cntCount + 1&#125;); &#125; // ë¬¸ì„ ë§Œë‚¬ì„ ê²½ìš° if (&#x27;A&#x27; &lt;= Map[ny][nx] &amp;&amp; Map[ny][nx] &lt;= &#x27;F&#x27;) &#123; int door = (1 &lt;&lt; (Map[ny][nx] - &#x27;A&#x27;)); if (door &amp; cntKey) &#123; check[cntKey][ny][nx] = true; q.push(&#123;ny, nx, cntKey, cntCount + 1&#125;); &#125; &#125; // ì¶œêµ¬ë¥¼ ë§Œë‚¬ì„ ê²½ìš° if (Map[ny][nx] == &#x27;1&#x27;) &#123; q.push(&#123;ny, nx, cntKey, cntCount + 1&#125;); &#125; &#125; &#125; &#125; return -1;&#125;void init() &#123; for (int i = 1; i &lt;= N; i++) &#123; for (int j = 1; j &lt;= M; j++) &#123; cin &gt;&gt; Map[i][j]; if (Map[i][j] == &#x27;0&#x27;) &#123; startY = i; startX = j; Map[i][j] = &#x27;.&#x27;; &#125; &#125; &#125;&#125;int main(void) &#123; cin &gt;&gt; N &gt;&gt; M; init(); cout &lt;&lt; bfs() &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","text":"ë°±ì¤€ 1194 - ë‹¬ì´ ì°¨ì˜¤ë¥¸ë‹¤. ê°€ìhttps://www.acmicpc.net/problem/1194 ë¬¸ì œ í•´ì„¤ê¸°ì¡´ BFSë¬¸ì œë¥¼ í‘¸ëŠ” í˜•ì‹ì— ë¹„íŠ¸ë§ˆìŠ¤í‚¹ê¹Œì§€ ë”í•´ì§„ ë¬¸ì œì´ë‹¤. ë¹„íŠ¸ë§ˆìŠ¤í‚¹ì„ í†µí•´ í‚¤ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê°ê°ì˜ ìƒíƒœë“¤ì„ ì²´í¬í•  ìˆ˜ ìˆë‹¤. í‚¤ëŠ” ì´ 6ê°œê°€ ì£¼ì–´ì§€ê¸° ë•Œë¬¸ì— 50x50x64 = 160,000 ì˜ ê³µê°„ ë³µì¡ë„ë¥¼ ê°–ê²Œ ë¼ ë©”ëª¨ë¦¬ ì œí•œì— ê±¸ë¦¬ì§€ ì•ŠëŠ”ë‹¤. ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;int N, M;char Map[55][55];bool check[1 &lt;&lt; 6][55][55];int dx[4] = &#123;1, -1, 0, 0&#125;;int dy[4] = &#123;0, 0, 1, -1&#125;;queue&lt;pair&lt;int, int&gt;&gt; q;int startY, startX;struct point &#123; int y; int x; int key; int count;&#125;;int bfs() &#123; queue&lt;point&gt; q; q.push(&#123;startY, startX, 0, 0&#125;); check[0][startY][startX] = true; while (!q.empty()) &#123; int cntY = q.front().y; int cntX = q.front().x; int cntKey = q.front().key; int cntCount = q.front().count; q.pop(); if (Map[cntY][cntX] == &#x27;1&#x27;) &#123; return cntCount; &#125; for (int i = 0; i &lt; 4; i++) &#123; int ny = cntY + dy[i]; int nx = cntX + dx[i]; if (0 &gt;= ny || ny &gt; N || 0 &gt;= nx || nx &gt; M) &#123; continue; &#125; if (check[cntKey][ny][nx] == true) &#123; continue; &#125; if (Map[ny][nx] == &#x27;.&#x27;) &#123; check[cntKey][ny][nx] = true; q.push(&#123;ny, nx, cntKey, cntCount + 1&#125;); &#125; else &#123; // ì—´ì‡ ì— ë§ˆì£¼ì³¤ì„ ê²½ìš° if (&#x27;a&#x27; &lt;= Map[ny][nx] &amp;&amp; Map[ny][nx] &lt;= &#x27;f&#x27;) &#123; int key = (1 &lt;&lt; (Map[ny][nx] - &#x27;a&#x27;)); check[cntKey | key][ny][nx] = true; q.push(&#123;ny, nx, cntKey | key, cntCount + 1&#125;); &#125; // ë¬¸ì„ ë§Œë‚¬ì„ ê²½ìš° if (&#x27;A&#x27; &lt;= Map[ny][nx] &amp;&amp; Map[ny][nx] &lt;= &#x27;F&#x27;) &#123; int door = (1 &lt;&lt; (Map[ny][nx] - &#x27;A&#x27;)); if (door &amp; cntKey) &#123; check[cntKey][ny][nx] = true; q.push(&#123;ny, nx, cntKey, cntCount + 1&#125;); &#125; &#125; // ì¶œêµ¬ë¥¼ ë§Œë‚¬ì„ ê²½ìš° if (Map[ny][nx] == &#x27;1&#x27;) &#123; q.push(&#123;ny, nx, cntKey, cntCount + 1&#125;); &#125; &#125; &#125; &#125; return -1;&#125;void init() &#123; for (int i = 1; i &lt;= N; i++) &#123; for (int j = 1; j &lt;= M; j++) &#123; cin &gt;&gt; Map[i][j]; if (Map[i][j] == &#x27;0&#x27;) &#123; startY = i; startX = j; Map[i][j] = &#x27;.&#x27;; &#125; &#125; &#125;&#125;int main(void) &#123; cin &gt;&gt; N &gt;&gt; M; init(); cout &lt;&lt; bfs() &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"BFS","slug":"Develop/Beakjoon/BFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/BFS/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"BFS","slug":"BFS","permalink":"https://ckck803.github.io/tags/BFS/"},{"name":"í‹€ë ¸ìŠµë‹ˆë‹¤ 5","slug":"í‹€ë ¸ìŠµë‹ˆë‹¤-5","permalink":"https://ckck803.github.io/tags/%ED%8B%80%EB%A0%B8%EC%8A%B5%EB%8B%88%EB%8B%A4-5/"}]},{"title":"Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper","slug":"spring/spring-security/security/configure/web-security-configurer","date":"2021-03-19T13:25:35.000Z","updated":"2024-02-26T16:26:56.989Z","comments":true,"path":"2021/03/19/spring/spring-security/security/configure/web-security-configurer/","link":"","permalink":"https://ckck803.github.io/2021/03/19/spring/spring-security/security/configure/web-security-configurer/","excerpt":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ Spring Security ì„¤ì •í•˜ê¸° - WebSecurityConfigurerAdatperìŠ¤í”„ë§ Scurityì— ëŒ€í•œ ì„¤ì •ì€ WebSecurityConfigurer ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„í•˜ê±°ë‚˜ WebSecurityConfigurerAdapter í´ë˜ìŠ¤ë¥¼ ìƒì†í•´ ì„¤ì •ì„ í•  ìˆ˜ ìˆë‹¤. ì¸ì¦ ë°©ì‹ ì„¤ì • configure(AuthenticationManagerBuilder auth) ì¸ì¦ ë°©ì‹ê³¼ ê´€ë ¨ëœ ì„¤ì •ì„ í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œ AuthenticationManagerBuilderëŠ” ì¸ì¦ê°ì²´(AuthenticationManager)ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ì´ë‹¤. In Memory authenticationë‚˜ UserDetailsServiceë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ ì¸ì¦ ë°©ì‹ì„ ì† ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤. configure(AuthenticationManagerBuilder auth) private final CustomUserDetailsService customUserDetailsService;@Overrideprotected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.userDetailsService(customUserDetailsService);&#125;","text":"ëª©ì°¨ Spring Security ê¶Œí•œ ê³„ì¸µ ì‚¬ìš©í•˜ê¸° - @RoleHierarcy Spring Security - DelegateFilterProxy Spring Security - Remember Meì™€ ê´€ë ¨ëœ ì¸ì¦ API - RememberMeConfigurer Spring Security - RembmerMeAuthenticationFilter Spring Security - SessionManagementFilter &amp; ConcurrentSessionFilter Spring Security - ì¸ê°€ API ExpressionUrlAuthorizationConfigurer Spring Security - Security ì„¤ì •ì„ ìœ„í•œ WebSecurityConfigurerAdatper Spring Security - AuthenticationProvider Spring Security - AuthenticationManager Spring Security - UsernamePasswordAuthenticationFilter &amp; AbstractAuthenticationProcessingFilter Spring Security - SecurityContextHolder ì™€ SecurityContext Spring Security - Authentication ê°ì²´ Spring Security ì„¤ì •í•˜ê¸° - WebSecurityConfigurerAdatperìŠ¤í”„ë§ Scurityì— ëŒ€í•œ ì„¤ì •ì€ WebSecurityConfigurer ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„í•˜ê±°ë‚˜ WebSecurityConfigurerAdapter í´ë˜ìŠ¤ë¥¼ ìƒì†í•´ ì„¤ì •ì„ í•  ìˆ˜ ìˆë‹¤. ì¸ì¦ ë°©ì‹ ì„¤ì • configure(AuthenticationManagerBuilder auth) ì¸ì¦ ë°©ì‹ê³¼ ê´€ë ¨ëœ ì„¤ì •ì„ í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œ AuthenticationManagerBuilderëŠ” ì¸ì¦ê°ì²´(AuthenticationManager)ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ì´ë‹¤. In Memory authenticationë‚˜ UserDetailsServiceë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ ì¸ì¦ ë°©ì‹ì„ ì† ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤. configure(AuthenticationManagerBuilder auth) private final CustomUserDetailsService customUserDetailsService;@Overrideprotected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.userDetailsService(customUserDetailsService);&#125; ì „ì—­ì ì¸ Security ì„¤ì • configure(WebSecurity web) ì „ì—­ì ì¸ Security ì„¤ì •ì„ í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œ ì •ì  íŒŒì¼ì— ëŒ€í•œ ë³´ì•ˆ ì˜ˆì™¸ì²˜ë¦¬ì™€ ê°™ì´ Security Filter Chainì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤. WebSecurity í´ë˜ìŠ¤ëŠ” Spring Securityì—ì„œ FilterChainProxyë¥¼ ìƒì„±í•œë‹¤. configure(WebSecurity web) @Overridepublic void configure(WebSecurity web) throws Exception &#123; web .ignoring() .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;) .antMatchers(&quot;/favicon.ico&quot;, &quot;/resources/**&quot;, &quot;/error&quot;);&#125; Resourceë³„ë¡œ Securityë¥¼ ì„¤ì • configure(HttpSecurity http) Resourceë³„ë¡œ Securityë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œì´ë‹¤. HttpSecurity í´ë˜ìŠ¤ë¥¼ í†µí•´ ì¸ì¦, ì¸ê°€ì™€ ê´€ë ¨ëœ Web ê¸°ë°˜ì˜ ë³´ì•ˆ ì„¤ì •ì„ í•  ìˆ˜ ìˆë‹¤. ì¸ì¦ : Form Login, Http Basic, OAuth2 Login ë“± ì¸ê°€ : Matchers, Role, Authenticate, permit ë“± configure(HttpSecurity http) @Overrideprotected void configure(HttpSecurity http) throws Exception &#123; // ì¸ê°€ http .authorizeRequests() // ì¸ê°€ì— ëŒ€í•œ ì„¤ì •ì„ í•œë‹¤. .antMatchers(&quot;/loginPage&quot;).permitAll() // /loginPage ì ‘ê·¼ì‹œì—ëŠ” ì¸ì¦ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤. .anyRequest().authenticated(); // ë‹¤ë¥¸ ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¸í•˜ê¸° ìœ„í•´ì„œëŠ” ì¸ì¦ì´ í•„ìš”í•˜ë‹¤ // ì¸ì¦ http .formLogin() // Form Login ë°©ì‹ì˜ ì¸ì¦ì„ ì‚¬ìš©í•œë‹¤. .loginPage(&quot;/loginPage&quot;) // ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ì„¤ì •í•œë‹¤. .defaultSuccessUrl(&quot;/&quot;) // Loginì„ ì„±ê³µí•œ í›„ / í˜ì´ì§€ë¡œ ì´ë™í•˜ê²Œ ëœë‹¤. .failureUrl(&quot;/loginPage&quot;) // ë¡œê·¸ì¸ ì‹¤íŒ¨ì‹œ /loginPageë¡œ ì´ë™í•˜ê²Œ ëœë‹¤. .usernameParameter(&quot;username&quot;) // ìš”ì²­ íŒŒë¼ë¯¸í„°ì—ì„œ usernameì„ usernameParameterë¡œ ì‚¬ìš©í•œë‹¤. .passwordParameter(&quot;password&quot;) // ìš”ì²­ íŒŒë¼ë¯¸í„°ì—ì„œ passwordë¥¼ passwordParameterë¡œ ì‚¬ìš©í•œë‹¤. .loginProcessingUrl(&quot;/login_proc&quot;) // ë¡œê·¸ì¸ì„ ì§„í–‰í•˜ê¸° ìœ„í•œ URL // ë¡œê·¸ì¸ì´ ì„±ê³µí–ˆì„ ë•Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handler .successHandler(new AuthenticationSuccessHandler() &#123; @Override public void onAuthenticationSuccess(HttpServletRequest httpServletRequest , HttpServletResponse httpServletResponse , Authentication authentication) throws IOException, ServletException &#123; httpServletResponse.sendRedirect(&quot;/&quot;); &#125; &#125;) // ë¡œê·¸ì¸ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Handler .failureHandler(new AuthenticationFailureHandler() &#123; @Override public void onAuthenticationFailure(HttpServletRequest httpServletRequest , HttpServletResponse httpServletResponse , AuthenticationException e) throws IOException, ServletException &#123; httpServletResponse.sendRedirect(&quot;/loginPage&quot;); &#125; &#125;);&#125; íŒ¨ìŠ¤ì›Œë“œ ì•”í˜¸í™”Spring Bootì—ì„œëŠ” ì‚¬ìš©ìì˜ PasswordëŠ” ì•”í˜¸í™”ëœ ìƒíƒœë¡œ ì €ì¥ì´ ë¼ì•¼ í•œë‹¤. ì•”í˜¸í™”ê°€ ì•ˆëœ ìƒíƒœë¡œ ì €ì¥í•˜ê²Œ ë˜ë©´ ì‚¬ìš©ì ì¸ì¦ì‹œì— ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. ê·¸ë˜ì„œ Passwordë¥¼ ì•”í˜¸í™”ëœ ìƒíƒœë¡œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ PasswordEncoder ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤. PasswordEncoder PasswordEncoder ì¸í„°í˜ì´ìŠ¤ëŠ” ë³´í†µ íŒ¨ìŠ¤ì›Œë“œë¥¼ ë‹¨ë°©í–¥ìœ¼ë¡œ ë³€í™˜í•œë‹¤. ì¦‰ ë‹¤ì‹œ ì›ë˜ëŒ€ë¡œ ë˜ëŒë¦´ ìˆ˜ ì—†ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ê·¸ë˜ì„œ Hash ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•œë‹¤. BcryptPasswordEncoder Argon2PasswordEncoder Pbkdf2PasswordEncoder SCryptPasswordEncoder @Beanpublic PasswordEncoder passwordEncoder() &#123; return new BCryptPasswordEncoder();&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Security","slug":"Spring/Spring-Security/Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Security/"},{"name":"Config","slug":"Spring/Spring-Security/Security/Config","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Security/Config/"}],"tags":[]},{"title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ìˆ˜ì‹ ìµœëŒ€í™” (Cpp)","slug":"algorithm/programmers/ìë£Œêµ¬ì¡°/ìŠ¤íƒ/67257-ìˆ˜ì‹ìµœëŒ€í™”-Cpp","date":"2021-03-15T11:10:40.000Z","updated":"2024-11-28T13:59:34.051Z","comments":true,"path":"2021/03/15/algorithm/programmers/ìë£Œêµ¬ì¡°/ìŠ¤íƒ/67257-ìˆ˜ì‹ìµœëŒ€í™”-Cpp/","link":"","permalink":"https://ckck803.github.io/2021/03/15/algorithm/programmers/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/67257-%EC%88%98%EC%8B%9D%EC%B5%9C%EB%8C%80%ED%99%94-Cpp/","excerpt":"https://programmers.co.kr/learn/courses/30/lessons/67257 ë¬¸ì œ í•´ì„¤ê²½ìš°ì˜ ìˆ˜ ë¬¸ì œì´ë‹¤. ëª¨ë“  ê²½ìš°ì˜ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ë§Œë“¤ì–´ í•´ë‹¹ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ì´ìš©í•´ ì—°ì‚°ì„ ì§„í–‰í•˜ë©´ ëœë‹¤. ì¤‘ìœ„í‘œê¸°ì‹ìœ¼ë¡œ ë‚˜íƒ€ë‚œ ì‹ì„ í›„ìœ„ í‘œê¸°ì‹ìœ¼ë¡œ ë°”ê¿”ì„œ ë¬¸ì œë¥¼ í•´ê²° í–ˆë‹¤. ê²½ìš°ì˜ ìˆ˜ ë§Œë“¤ê¸°ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤. DFSë¥¼ ì´ìš©í•´ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì¤¬ë‹¤. void makeAllCase(int depth) &#123; if (depth == 3) &#123; allCase.push_back(cntCase); &#125; for (int i = 0; i &lt; 3; i++) &#123; int cntOper = operation[i]; if (check[i] == false) &#123; check[i] = true; cntCase[depth] = cntOper; makeAllCase(depth + 1); check[i] = false; &#125; &#125;&#125; ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ê°€ë°˜ìœ¼ë¡œ í•œ ì—°ì‚° ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„ì˜ ì—°ì‚°ìê°€ ë“¤ì–´ì™”ì„ ë•Œ Stackì„ í™•ì¸í•´ ê°™ì€ ë¨¼ì € ë“¤ì–´ì˜¨ ê°™ì€ ìš°ì„ ìˆœìœ„ì˜ ì—°ì‚°ìê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. ê°™ì€ ìš°ì„ ìˆœìœ„ì˜ ì—°ì‚°ìê°€ Stackì— ìˆëŠ” ê²½ìš° pop í•´ì„œ í•´ë‹¹ ì—°ì‚°ì„ ì§„í–‰í•œ í›„ ì§€ê¸ˆ ë“¤ì–´ì˜¨ ì—°ì‚°ìë¥¼ pushí•œë‹¤. ì—†ëŠ” ê²½ìš°ì—ëŠ” Stackì— push í•œë‹¤. ë‘ë²ˆì§¸ ìš°ì„  ìˆœìœ„ê°€ ì—°ì‚°ìê°€ ë“¤ì–´ì˜¨ ê²½ìš° Stackì„ í™•ì¸í•´ ìš°ì„ ìˆœìœ„ê°€ ê°™ê±°ë‚˜ í° ì—°ì‚°ìê°€ ì—†ì–´ì§ˆ ë•Œê¹Œì§€ ì—°ì‚°ì„ ì§„í–‰í•œ í›„ pop í•œë‹¤. Stackì— ìš°ì„ ìˆœìœ„ê°€ ê°™ê±°ë‚˜ í° ì—°ì‚°ìê°€ ì—†ì„ ê²½ìš°ì—ëŠ” Stackì— push í•œë‹¤. ì„¸ë²ˆì§¸ ìš°ì„  ìˆœìœ„ì˜ ì—°ì‚°ìê°€ ë“¤ì–´ì˜¨ ê²½ìš° Stackì„ í™•ì¸í•´ ìš°ì„ ìˆœìœ„ê°€ ê°™ê±°ë‚˜ í° ì—°ì‚°ìê°€ ì—†ì–´ì§ˆ ë•Œê¹Œì§€ ì—°ì‚°ì„ ì§„í–‰í•œ í›„ pop í•œë‹¤. Stackì— ìš°ì„ ìˆœìœ„ê°€ ê°™ê±°ë‚˜ í° ì—°ì‚°ìê°€ ì—†ì„ ê²½ìš°ì—ëŠ” Stackì— push í•œë‹¤.","text":"https://programmers.co.kr/learn/courses/30/lessons/67257 ë¬¸ì œ í•´ì„¤ê²½ìš°ì˜ ìˆ˜ ë¬¸ì œì´ë‹¤. ëª¨ë“  ê²½ìš°ì˜ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ë§Œë“¤ì–´ í•´ë‹¹ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ì´ìš©í•´ ì—°ì‚°ì„ ì§„í–‰í•˜ë©´ ëœë‹¤. ì¤‘ìœ„í‘œê¸°ì‹ìœ¼ë¡œ ë‚˜íƒ€ë‚œ ì‹ì„ í›„ìœ„ í‘œê¸°ì‹ìœ¼ë¡œ ë°”ê¿”ì„œ ë¬¸ì œë¥¼ í•´ê²° í–ˆë‹¤. ê²½ìš°ì˜ ìˆ˜ ë§Œë“¤ê¸°ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤. DFSë¥¼ ì´ìš©í•´ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì¤¬ë‹¤. void makeAllCase(int depth) &#123; if (depth == 3) &#123; allCase.push_back(cntCase); &#125; for (int i = 0; i &lt; 3; i++) &#123; int cntOper = operation[i]; if (check[i] == false) &#123; check[i] = true; cntCase[depth] = cntOper; makeAllCase(depth + 1); check[i] = false; &#125; &#125;&#125; ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ê°€ë°˜ìœ¼ë¡œ í•œ ì—°ì‚° ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„ì˜ ì—°ì‚°ìê°€ ë“¤ì–´ì™”ì„ ë•Œ Stackì„ í™•ì¸í•´ ê°™ì€ ë¨¼ì € ë“¤ì–´ì˜¨ ê°™ì€ ìš°ì„ ìˆœìœ„ì˜ ì—°ì‚°ìê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. ê°™ì€ ìš°ì„ ìˆœìœ„ì˜ ì—°ì‚°ìê°€ Stackì— ìˆëŠ” ê²½ìš° pop í•´ì„œ í•´ë‹¹ ì—°ì‚°ì„ ì§„í–‰í•œ í›„ ì§€ê¸ˆ ë“¤ì–´ì˜¨ ì—°ì‚°ìë¥¼ pushí•œë‹¤. ì—†ëŠ” ê²½ìš°ì—ëŠ” Stackì— push í•œë‹¤. ë‘ë²ˆì§¸ ìš°ì„  ìˆœìœ„ê°€ ì—°ì‚°ìê°€ ë“¤ì–´ì˜¨ ê²½ìš° Stackì„ í™•ì¸í•´ ìš°ì„ ìˆœìœ„ê°€ ê°™ê±°ë‚˜ í° ì—°ì‚°ìê°€ ì—†ì–´ì§ˆ ë•Œê¹Œì§€ ì—°ì‚°ì„ ì§„í–‰í•œ í›„ pop í•œë‹¤. Stackì— ìš°ì„ ìˆœìœ„ê°€ ê°™ê±°ë‚˜ í° ì—°ì‚°ìê°€ ì—†ì„ ê²½ìš°ì—ëŠ” Stackì— push í•œë‹¤. ì„¸ë²ˆì§¸ ìš°ì„  ìˆœìœ„ì˜ ì—°ì‚°ìê°€ ë“¤ì–´ì˜¨ ê²½ìš° Stackì„ í™•ì¸í•´ ìš°ì„ ìˆœìœ„ê°€ ê°™ê±°ë‚˜ í° ì—°ì‚°ìê°€ ì—†ì–´ì§ˆ ë•Œê¹Œì§€ ì—°ì‚°ì„ ì§„í–‰í•œ í›„ pop í•œë‹¤. Stackì— ìš°ì„ ìˆœìœ„ê°€ ê°™ê±°ë‚˜ í° ì—°ì‚°ìê°€ ì—†ì„ ê²½ìš°ì—ëŠ” Stackì— push í•œë‹¤. // ì²«ë²ˆì§¸ ìš°ì„ ìˆœìœ„ì˜ ì—°ì‚°ìê°€ ë“¤ì–´ì˜¨ ê²½ìš°if (cntChar == cnt_priority[0]) &#123; opernand.push(stol(value)); value = &quot;&quot;; while (!operation.empty() &amp;&amp; operation.top() == cnt_priority[0]) &#123; long long value1 = opernand.top(); opernand.pop(); long long value2 = opernand.top(); opernand.pop(); char oper = operation.top(); operation.pop(); long long result = calValue1Value2(value1, value2, oper); opernand.push(result); &#125; operation.push(cntChar);&#125;// ë‘ë²ˆì§¸ ìš°ì„ ìˆœìœ„ì˜ ì—°ì‚°ìê°€ ë“¤ì–´ì˜¨ ê²½ìš°if (cntChar == cnt_priority[1]) &#123; opernand.push(stol(value)); value = &quot;&quot;; while (!operation.empty() &amp;&amp; operation.top() != cnt_priority[2]) &#123; long long value1 = opernand.top(); opernand.pop(); long long value2 = opernand.top(); opernand.pop(); char oper = operation.top(); operation.pop(); long long result = calValue1Value2(value1, value2, oper); opernand.push(result); &#125; operation.push(cntChar);&#125;// ì„¸ë²ˆì§¸ ìš°ì„ ìˆœìœ„ì˜ ì—°ì‚°ìê°€ ë“¤ì–´ì˜¨ ê²½ìš°if (cntChar == cnt_priority[2]) &#123; opernand.push(stol(value)); value = &quot;&quot;; while (!operation.empty()) &#123; long long value1 = opernand.top(); opernand.pop(); long long value2 = opernand.top(); opernand.pop(); char oper = operation.top(); operation.pop(); long long result = calValue1Value2(value1, value2, oper); opernand.push(result); &#125; operation.push(cntChar);&#125; Stackì„ ì´ìš©í•œ ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;char operation[3] = &#123;&#x27;*&#x27;, &#x27;+&#x27;, &#x27;-&#x27;&#125;;bool check[3];vector&lt;char&gt; cntCase(3);vector&lt;vector&lt;char&gt;&gt; allCase;void makeAllCase(int depth) &#123; if (depth == 3) &#123; allCase.push_back(cntCase); &#125; for (int i = 0; i &lt; 3; i++) &#123; int cntOper = operation[i]; if (check[i] == false) &#123; check[i] = true; cntCase[depth] = cntOper; makeAllCase(depth + 1); check[i] = false; &#125; &#125;&#125;long long calValue1Value2(long long value1, long long value2, char oper) &#123; long long result = 0; if (oper == &#x27;*&#x27;) &#123; result = value2 * value1; &#125; else if (oper == &#x27;+&#x27;) &#123; result = value2 + value1; &#125; else &#123; result = value2 - value1; &#125; return result;&#125;long long solveExpression(string expression) &#123; long long maxValue = 0; for (vector&lt;char&gt; cnt_priority : allCase) &#123; stack&lt;long long&gt; opernand; stack&lt;char&gt; operation; string value = &quot;&quot;; for (int i = 0; i &lt; expression.size(); i++) &#123; char cntChar = expression[i]; if (&#x27;0&#x27; &lt;= cntChar &amp;&amp; cntChar &lt;= &#x27;9&#x27;) &#123; value += cntChar; &#125; if (cntChar == cnt_priority[0]) &#123; opernand.push(stol(value)); value = &quot;&quot;; while (!operation.empty() &amp;&amp; operation.top() == cnt_priority[0]) &#123; long long value1 = opernand.top(); opernand.pop(); long long value2 = opernand.top(); opernand.pop(); char oper = operation.top(); operation.pop(); long long result = calValue1Value2(value1, value2, oper); opernand.push(result); &#125; operation.push(cntChar); &#125; if (cntChar == cnt_priority[1]) &#123; opernand.push(stol(value)); value = &quot;&quot;; while (!operation.empty() &amp;&amp; operation.top() != cnt_priority[2]) &#123; long long value1 = opernand.top(); opernand.pop(); long long value2 = opernand.top(); opernand.pop(); char oper = operation.top(); operation.pop(); long long result = calValue1Value2(value1, value2, oper); opernand.push(result); &#125; operation.push(cntChar); &#125; if (cntChar == cnt_priority[2]) &#123; opernand.push(stol(value)); value = &quot;&quot;; while (!operation.empty()) &#123; long long value1 = opernand.top(); opernand.pop(); long long value2 = opernand.top(); opernand.pop(); char oper = operation.top(); operation.pop(); long long result = calValue1Value2(value1, value2, oper); opernand.push(result); &#125; operation.push(cntChar); &#125; &#125; opernand.push(stol(value)); while (!operation.empty()) &#123; long long value1 = opernand.top(); opernand.pop(); long long value2 = opernand.top(); opernand.pop(); char oper = operation.top(); operation.pop(); long long result = calValue1Value2(value1, value2, oper); opernand.push(abs(result)); &#125; if (maxValue &lt; opernand.top()) &#123; maxValue = opernand.top(); &#125; &#125; return maxValue;&#125;long long solution(string expression) &#123; long long answer = 0; makeAllCase(0); answer = solveExpression(expression); return answer;&#125; dqë¥¼ ì´ìš©í•œ ë¬¸ì œ í•´ê²°#include &lt;bits/stdc++.h&gt;using namespace std;typedef long long ll;char operation[3] = &#123;&#x27;+&#x27;, &#x27;-&#x27;, &#x27;*&#x27;&#125;;bool check[3];vector&lt;char&gt; op(3);vector&lt;vector&lt;char&gt;&gt; operations;deque&lt;long long&gt; dq_opernand;deque&lt;char&gt; dq_operator;ll max_value = 0;void nPr(int depth) &#123; if (3 == depth) &#123; vector&lt;char&gt; v(op); operations.push_back(op); return; &#125; for (int i = 0; i &lt; 3; i++) &#123; if (check[i] == true) continue; op[depth] = operation[i]; check[i] = true; nPr(depth + 1); check[i] = false; &#125;&#125;void divideOperaion(string expression) &#123; string s; for (int i = 0; i &lt; expression.size(); i++) &#123; if (&#x27;0&#x27; &lt;= expression[i] &amp;&amp; expression[i] &lt;= &#x27;9&#x27;) &#123; s += expression[i]; &#125; else &#123; dq_opernand.push_back(stol(s)); dq_operator.push_back(expression[i]); s = &quot;&quot;; &#125; &#125; dq_opernand.push_back(stol(s));&#125;long long operValue(ll a, ll b, char op) &#123; if (op == &#x27;+&#x27;) &#123; return a + b; &#125; else if (op == &#x27;-&#x27;) &#123; return a - b; &#125; else &#123; return a * b; &#125;&#125;void operate(string expression) &#123; deque&lt;ll&gt; temp_opernand; deque&lt;char&gt; temp_operator; for (auto o : operations) &#123; deque&lt;ll&gt; copy_opernand(dq_opernand); deque&lt;char&gt; copy_operator(dq_operator); for (int i = 0; i &lt; 3; i++) &#123; char cnt_operation = o[i]; while (!copy_operator.empty()) &#123; if (copy_operator.front() == cnt_operation) &#123; ll value1 = copy_opernand.front(); copy_opernand.pop_front(); ll value2 = copy_opernand.front(); copy_opernand.pop_front(); char oper = copy_operator.front(); copy_operator.pop_front(); ll result = operValue(value1, value2, oper); copy_opernand.push_front(result); &#125; else &#123; temp_opernand.push_back(copy_opernand.front()); temp_operator.push_back(copy_operator.front()); copy_opernand.pop_front(); copy_operator.pop_front(); &#125; &#125; while (!copy_opernand.empty()) &#123; temp_opernand.push_back(copy_opernand.front()); copy_opernand.pop_front(); &#125; while (!temp_operator.empty()) &#123; copy_operator.push_back(temp_operator.front()); temp_operator.pop_front(); &#125; while (!temp_opernand.empty()) &#123; copy_opernand.push_back(temp_opernand.front()); temp_opernand.pop_front(); &#125; &#125; max_value = max(max_value, abs(copy_opernand.front())); &#125;&#125;long long solution(string expression) &#123; long long answer; nPr(0); divideOperaion(expression); operate(expression); answer = max_value; return answer;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ìë£Œêµ¬ì¡°","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ìë£Œêµ¬ì¡°","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/"},{"name":"ìŠ¤íƒ","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ìë£Œêµ¬ì¡°/ìŠ¤íƒ","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/"}],"tags":[{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"Cpp","slug":"Cpp","permalink":"https://ckck803.github.io/tags/Cpp/"}]},{"title":"ë°±ì¤€ 1406 - í›„ìœ„í‘œê¸°ì‹","slug":"algorithm/baekjoon/á„Œá…¡á„…á…­á„€á…®á„Œá…©/STACK/1918-í›„ìœ„í‘œê¸°ì‹","date":"2021-03-15T11:10:40.000Z","updated":"2024-11-28T13:59:36.698Z","comments":true,"path":"2021/03/15/algorithm/baekjoon/á„Œá…¡á„…á…­á„€á…®á„Œá…©/STACK/1918-í›„ìœ„í‘œê¸°ì‹/","link":"","permalink":"https://ckck803.github.io/2021/03/15/algorithm/baekjoon/%E1%84%8C%E1%85%A1%E1%84%85%E1%85%AD%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9/STACK/1918-%ED%9B%84%EC%9C%84%ED%91%9C%EA%B8%B0%EC%8B%9D/","excerpt":"https://www.acmicpc.net/problem/1918 ë¬¸ì œ í•´ì„¤ë¬¸ì œë¥¼ í•´ê²°í•  ë•Œ í›„ìœ„ í‘œê¸°ì‹ì— ëŒ€í•œ ëª…í™•í•œ ì´í•´ì™€ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ì— ëŒ€í•´ ê³ ë ¤ í•´ì•¼ í•œë‹¤. ì—°ì‚°ìë¥¼ ë³„ë„ì˜ stackì— ìŒ“ì•„ê°€ë©´ì„œ í›„ìœ„ í‘œê¸°ì‹ì„ ë§Œë“ ë‹¤. stackì— ì—°ì‚°ìë¥¼ ë„£ê¸° ì „ì— ì—°ì‚°ì ë¹„êµë¥¼ í†µí•´ stackì— ë„£ì„ ë ¤ëŠ” ì—°ì‚°ì ìš°ì„ ìˆœìœ„ ë³´ë‹¤ stackì— ìˆëŠ” ì—°ì‚°ìì˜ ìš°ì„ ìˆœìœ„ê°€ ì‘ì„ ë•Œê¹Œì§€ ê³„ì†í•´ì„œ stackì—ì„œ ì—°ì‚°ìë¥¼ êº¼ë‚´ í›„ìœ„ í‘œê¸°ì‹ì— ì¶”ê°€í•´ì¤€ë‹¤. ì—°ì‚°ì ìš°ì„ ìˆœìœ„ (ê°€ ì œì¼ ë†’ì€ ìš°ì„ ìˆœìœ„ë‹¤. * ì™€ /ê°€ ê·¸ ë‹¤ìŒ ìš°ì„ ìˆœìœ„ + ì™€ -ê°€ ë‹¤ìŒ ìš°ì„ ìˆœìœ„ë¥¼ ê°–ê³  ìˆë‹¤. )ê°€ ì œì¼ ë‚®ì€ ìš°ì„ ìˆœìœ„ë‹¤. (ë¥¼ ë§Œë‚ ë•Œê¹Œì§€ ëª¨ë“  ì—°ì‚°ìë¥¼ stackì—ì„œ êº¼ë‚¸ë‹¤. ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;string str;string result;int main(void) &#123; cin &gt;&gt; str; stack&lt;char&gt; operation; for (int i = 0; i &lt; str.length(); i++) &#123; char cntChar = str[i]; if (cntChar == &#x27;(&#x27;) &#123; operation.push(cntChar); &#125; else if (cntChar == &#x27;*&#x27; || cntChar == &#x27;/&#x27;) &#123; while (!operation.empty() &amp;&amp; (operation.top() == &#x27;*&#x27; || operation.top() == &#x27;/&#x27;)) &#123; result += operation.top(); operation.pop(); &#125; operation.push(cntChar); &#125; else if (cntChar == &#x27;+&#x27; || cntChar == &#x27;-&#x27;) &#123; while (!operation.empty() &amp;&amp; (operation.top() != &#x27;(&#x27;)) &#123; result += operation.top(); operation.pop(); &#125; operation.push(cntChar); &#125; else if (cntChar == &#x27;)&#x27;) &#123; while (!operation.empty() &amp;&amp; operation.top() != &#x27;(&#x27;) &#123; result += operation.top(); operation.pop(); &#125; operation.pop(); &#125; else &#123; result += cntChar; &#125; &#125; while (!operation.empty()) &#123; result += operation.top(); operation.pop(); &#125; cout &lt;&lt; result &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","text":"https://www.acmicpc.net/problem/1918 ë¬¸ì œ í•´ì„¤ë¬¸ì œë¥¼ í•´ê²°í•  ë•Œ í›„ìœ„ í‘œê¸°ì‹ì— ëŒ€í•œ ëª…í™•í•œ ì´í•´ì™€ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ì— ëŒ€í•´ ê³ ë ¤ í•´ì•¼ í•œë‹¤. ì—°ì‚°ìë¥¼ ë³„ë„ì˜ stackì— ìŒ“ì•„ê°€ë©´ì„œ í›„ìœ„ í‘œê¸°ì‹ì„ ë§Œë“ ë‹¤. stackì— ì—°ì‚°ìë¥¼ ë„£ê¸° ì „ì— ì—°ì‚°ì ë¹„êµë¥¼ í†µí•´ stackì— ë„£ì„ ë ¤ëŠ” ì—°ì‚°ì ìš°ì„ ìˆœìœ„ ë³´ë‹¤ stackì— ìˆëŠ” ì—°ì‚°ìì˜ ìš°ì„ ìˆœìœ„ê°€ ì‘ì„ ë•Œê¹Œì§€ ê³„ì†í•´ì„œ stackì—ì„œ ì—°ì‚°ìë¥¼ êº¼ë‚´ í›„ìœ„ í‘œê¸°ì‹ì— ì¶”ê°€í•´ì¤€ë‹¤. ì—°ì‚°ì ìš°ì„ ìˆœìœ„ (ê°€ ì œì¼ ë†’ì€ ìš°ì„ ìˆœìœ„ë‹¤. * ì™€ /ê°€ ê·¸ ë‹¤ìŒ ìš°ì„ ìˆœìœ„ + ì™€ -ê°€ ë‹¤ìŒ ìš°ì„ ìˆœìœ„ë¥¼ ê°–ê³  ìˆë‹¤. )ê°€ ì œì¼ ë‚®ì€ ìš°ì„ ìˆœìœ„ë‹¤. (ë¥¼ ë§Œë‚ ë•Œê¹Œì§€ ëª¨ë“  ì—°ì‚°ìë¥¼ stackì—ì„œ êº¼ë‚¸ë‹¤. ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;string str;string result;int main(void) &#123; cin &gt;&gt; str; stack&lt;char&gt; operation; for (int i = 0; i &lt; str.length(); i++) &#123; char cntChar = str[i]; if (cntChar == &#x27;(&#x27;) &#123; operation.push(cntChar); &#125; else if (cntChar == &#x27;*&#x27; || cntChar == &#x27;/&#x27;) &#123; while (!operation.empty() &amp;&amp; (operation.top() == &#x27;*&#x27; || operation.top() == &#x27;/&#x27;)) &#123; result += operation.top(); operation.pop(); &#125; operation.push(cntChar); &#125; else if (cntChar == &#x27;+&#x27; || cntChar == &#x27;-&#x27;) &#123; while (!operation.empty() &amp;&amp; (operation.top() != &#x27;(&#x27;)) &#123; result += operation.top(); operation.pop(); &#125; operation.push(cntChar); &#125; else if (cntChar == &#x27;)&#x27;) &#123; while (!operation.empty() &amp;&amp; operation.top() != &#x27;(&#x27;) &#123; result += operation.top(); operation.pop(); &#125; operation.pop(); &#125; else &#123; result += cntChar; &#125; &#125; while (!operation.empty()) &#123; result += operation.top(); operation.pop(); &#125; cout &lt;&lt; result &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ìë£Œêµ¬ì¡°","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/"},{"name":"ìŠ¤íƒ","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°/ìŠ¤íƒ","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/"}],"tags":[]},{"title":"ë°±ì¤€ 1406 - ì—ë””í„°","slug":"algorithm/baekjoon/á„Œá…¡á„…á…­á„€á…®á„Œá…©/STACK/1406-ì—ë””í„°","date":"2021-03-15T06:23:54.000Z","updated":"2024-11-28T13:59:36.773Z","comments":true,"path":"2021/03/15/algorithm/baekjoon/á„Œá…¡á„…á…­á„€á…®á„Œá…©/STACK/1406-ì—ë””í„°/","link":"","permalink":"https://ckck803.github.io/2021/03/15/algorithm/baekjoon/%E1%84%8C%E1%85%A1%E1%84%85%E1%85%AD%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9/STACK/1406-%EC%97%90%EB%94%94%ED%84%B0/","excerpt":"https://www.acmicpc.net/problem/1406 ë¬¸ì œ í•´ì„¤Stackì„ ì´ìš©í•œ ë¬¸ì œ í’€ì´ê¸°ë³¸ì ì¸ ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë¬¸ì œì´ë‹¤. ë‘ê°œì˜ ìŠ¤íƒì„ ì´ìš©í•´ì„œ ì»¤ì„œë¥¼ ê¸°ì ìœ¼ë¡œ ì»¤ì„œ ì™¼ìª½ì— ìˆëŠ” ê²ƒë“¤ì€ left ìŠ¤íƒì— ì»¤ì„œ ì˜¤ë¥¸ìª½ì— ìˆëŠ” ë‹¨ì–´ë“¤ì€ right ìŠ¤íƒì— ë„£ì–´ì„œ ê´€ë¦¬ë¥¼ í•œë‹¤. import java.io.IOException;import java.util.Scanner;import java.util.Stack;public class Main &#123; public static void main(String[] args) throws IOException &#123; Scanner sc = new Scanner(System.in); String str = sc.nextLine(); Stack&lt;Character&gt; left = new Stack&lt;&gt;(); Stack&lt;Character&gt; right = new Stack&lt;&gt;(); for (int i = 0; i &lt; str.length(); i++) &#123; left.push(str.charAt(i)); &#125; int numOfCmd = sc.nextInt(); for (int i = 0; i &lt; numOfCmd; i++) &#123; String cmd = sc.next(); if (cmd.equals(&quot;L&quot;)) &#123; if (!left.isEmpty()) &#123; right.push(left.peek()); left.pop(); &#125; &#125; else if (cmd.equals(&quot;D&quot;)) &#123; if (!right.isEmpty()) &#123; left.push(right.peek()); right.pop(); &#125; &#125; else if (cmd.equals(&quot;B&quot;)) &#123; if (!left.isEmpty()) &#123; left.pop(); &#125; &#125; else if (cmd.equals(&quot;P&quot;)) &#123; char value = sc.next().charAt(0); left.push(value); &#125; &#125; while (!left.isEmpty()) &#123; right.push(left.peek()); left.pop(); &#125; StringBuilder stringBuilder = new StringBuilder(); while (!right.isEmpty()) &#123; stringBuilder.append(right.peek()); right.pop(); &#125; System.out.println(stringBuilder.toString()); &#125;&#125; LinkedListì™€ ListIteratorë¥¼ ì´ìš©í•œ ë¬¸ì œ í’€ì´í•´ë‹¹ ë¬¸ì œëŠ” LinkedListë¥¼ ì´ìš©í•´ì„œë„ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. LinkedListì˜ ì›ì†Œì— Listë¡œ ì ‘ê·¼ì„ í•˜ê²Œ ë˜ë©´ O(n) ì˜ ì‹œê°„ì´ ê±¸ë ¤ ì‹œê°„ ì´ˆê³¼ê°€ ëœ¨ê²Œ ëœë‹¤. ë•Œë¬¸ì— ë‹¤í–‰ì´ ë¬¸ì œëŠ” Cursorìœ„ì¹˜ë¥¼ í•œì¹¸ì”© ë°–ì— ëª» ì›€ì§ì´ë¯€ë¡œ ListIterator ë¼ëŠ” ê°ì²´ë¥¼ ì´ìš©í•´ LinkedListë¥¼ ê´€ë¦¬í•˜ë„ë¡ í•œë‹¤. public class Main &#123; public static void main(String[] args) throws IOException &#123; BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); BufferedWriter wr = new BufferedWriter(new OutputStreamWriter(System.out)); String[] str = br.readLine().split(&quot;&quot;); List&lt;Character&gt; charList = new LinkedList&lt;&gt;(); ListIterator&lt;Character&gt; iter = charList.listIterator(); for (int i = 0; i &lt; str.length; i++) &#123; iter.add(str[i].charAt(0)); &#125; int index = charList.size(); int numOfCmd = Integer.parseInt(br.readLine()); for (int i = 0; i &lt; numOfCmd; i++) &#123; char[] inputs = br.readLine().toCharArray(); if (inputs[0] == &#x27;L&#x27;) &#123; if (iter.hasPrevious()) &#123; iter.previous(); &#125; &#125; else if (inputs[0] == &#x27;D&#x27;) &#123; if (iter.hasNext()) &#123; iter.next(); &#125; &#125; else if (inputs[0] == &#x27;B&#x27;) &#123; if (iter.hasPrevious()) &#123; iter.previous(); iter.remove(); &#125; &#125; else if (inputs[0] == &#x27;P&#x27;) &#123; char value = inputs[2]; iter.add(value); &#125; &#125; for (char c : charList) &#123; wr.write(c); &#125; wr.flush(); &#125;&#125;","text":"https://www.acmicpc.net/problem/1406 ë¬¸ì œ í•´ì„¤Stackì„ ì´ìš©í•œ ë¬¸ì œ í’€ì´ê¸°ë³¸ì ì¸ ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë¬¸ì œì´ë‹¤. ë‘ê°œì˜ ìŠ¤íƒì„ ì´ìš©í•´ì„œ ì»¤ì„œë¥¼ ê¸°ì ìœ¼ë¡œ ì»¤ì„œ ì™¼ìª½ì— ìˆëŠ” ê²ƒë“¤ì€ left ìŠ¤íƒì— ì»¤ì„œ ì˜¤ë¥¸ìª½ì— ìˆëŠ” ë‹¨ì–´ë“¤ì€ right ìŠ¤íƒì— ë„£ì–´ì„œ ê´€ë¦¬ë¥¼ í•œë‹¤. import java.io.IOException;import java.util.Scanner;import java.util.Stack;public class Main &#123; public static void main(String[] args) throws IOException &#123; Scanner sc = new Scanner(System.in); String str = sc.nextLine(); Stack&lt;Character&gt; left = new Stack&lt;&gt;(); Stack&lt;Character&gt; right = new Stack&lt;&gt;(); for (int i = 0; i &lt; str.length(); i++) &#123; left.push(str.charAt(i)); &#125; int numOfCmd = sc.nextInt(); for (int i = 0; i &lt; numOfCmd; i++) &#123; String cmd = sc.next(); if (cmd.equals(&quot;L&quot;)) &#123; if (!left.isEmpty()) &#123; right.push(left.peek()); left.pop(); &#125; &#125; else if (cmd.equals(&quot;D&quot;)) &#123; if (!right.isEmpty()) &#123; left.push(right.peek()); right.pop(); &#125; &#125; else if (cmd.equals(&quot;B&quot;)) &#123; if (!left.isEmpty()) &#123; left.pop(); &#125; &#125; else if (cmd.equals(&quot;P&quot;)) &#123; char value = sc.next().charAt(0); left.push(value); &#125; &#125; while (!left.isEmpty()) &#123; right.push(left.peek()); left.pop(); &#125; StringBuilder stringBuilder = new StringBuilder(); while (!right.isEmpty()) &#123; stringBuilder.append(right.peek()); right.pop(); &#125; System.out.println(stringBuilder.toString()); &#125;&#125; LinkedListì™€ ListIteratorë¥¼ ì´ìš©í•œ ë¬¸ì œ í’€ì´í•´ë‹¹ ë¬¸ì œëŠ” LinkedListë¥¼ ì´ìš©í•´ì„œë„ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. LinkedListì˜ ì›ì†Œì— Listë¡œ ì ‘ê·¼ì„ í•˜ê²Œ ë˜ë©´ O(n) ì˜ ì‹œê°„ì´ ê±¸ë ¤ ì‹œê°„ ì´ˆê³¼ê°€ ëœ¨ê²Œ ëœë‹¤. ë•Œë¬¸ì— ë‹¤í–‰ì´ ë¬¸ì œëŠ” Cursorìœ„ì¹˜ë¥¼ í•œì¹¸ì”© ë°–ì— ëª» ì›€ì§ì´ë¯€ë¡œ ListIterator ë¼ëŠ” ê°ì²´ë¥¼ ì´ìš©í•´ LinkedListë¥¼ ê´€ë¦¬í•˜ë„ë¡ í•œë‹¤. public class Main &#123; public static void main(String[] args) throws IOException &#123; BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); BufferedWriter wr = new BufferedWriter(new OutputStreamWriter(System.out)); String[] str = br.readLine().split(&quot;&quot;); List&lt;Character&gt; charList = new LinkedList&lt;&gt;(); ListIterator&lt;Character&gt; iter = charList.listIterator(); for (int i = 0; i &lt; str.length; i++) &#123; iter.add(str[i].charAt(0)); &#125; int index = charList.size(); int numOfCmd = Integer.parseInt(br.readLine()); for (int i = 0; i &lt; numOfCmd; i++) &#123; char[] inputs = br.readLine().toCharArray(); if (inputs[0] == &#x27;L&#x27;) &#123; if (iter.hasPrevious()) &#123; iter.previous(); &#125; &#125; else if (inputs[0] == &#x27;D&#x27;) &#123; if (iter.hasNext()) &#123; iter.next(); &#125; &#125; else if (inputs[0] == &#x27;B&#x27;) &#123; if (iter.hasPrevious()) &#123; iter.previous(); iter.remove(); &#125; &#125; else if (inputs[0] == &#x27;P&#x27;) &#123; char value = inputs[2]; iter.add(value); &#125; &#125; for (char c : charList) &#123; wr.write(c); &#125; wr.flush(); &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ìë£Œêµ¬ì¡°","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/"},{"name":"ìŠ¤íƒ","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°/ìŠ¤íƒ","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/"}],"tags":[]},{"title":"Spring-JWT(JSON Web Token) - 4. JWT ë‹¤ë£¨ê¸°","slug":"spring/spring-security/jwt/spring-jwt-04","date":"2021-03-14T17:20:47.000Z","updated":"2024-02-26T16:22:12.462Z","comments":true,"path":"2021/03/15/spring/spring-security/jwt/spring-jwt-04/","link":"","permalink":"https://ckck803.github.io/2021/03/15/spring/spring-security/jwt/spring-jwt-04/","excerpt":"4. JWT ë‹¤ë£¨ê¸°ëª©ì°¨ Spring-JWT(JSON Web Token) - 4. JWT ë‹¤ë£¨ê¸° Spring-JWT(JSON Web Token) - 3. Spring Security ì ìš©í•˜ê¸° Spring-JWT(JSON Web Token) - 2. íšŒì›ê°€ì… Spring-JWT(JSON Web Token) - 1. JWT ì•Œì•„ë³´ê¸° JWTë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ Util Classë§Œë“¤ê¸° JwtUtil ê°ì²´ëŠ” Jwts.builderë¥¼ ì´ìš©í•´ JWTë¥¼ ìƒì„±í•˜ê³  Jwts.parserBuilderë¥¼ ì´ìš©í•´ Tokenì„ JWTë¡œ ë³€í™˜ì‹œì¼œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤. Jwts.builder(JwtBuilder) setHeader JWTì˜ Header ì— ëŒ€í•œ ì„¤ì •ì„ ìœ„í•œ ë©”ì†Œë“œ setSubject, setExpiration, setIssuer, setAudience, setNotBefore, setIssuedAt Registed PayloadëŠ” ê°ê°ì— í•´ë‹¹í•˜ëŠ” set ë©”ì†Œë“œë“¤ì´ ì œê³µëœë‹¤. setClaims JWTì˜ Claim ë°ì´í„° ë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œ signWith Headerì™€ Payloadë¥¼ ê°–ê³  Secret Key ë¡œ ì„œëª…í•œë‹¤. ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œëŠ” ë³´í†µ HMAC or RSA ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•œë‹¤. Jwts.parserBuilder(JwtParser) setSigningKey ë°ì´í„° ìœ„ë³€ì¡° í™•ì¸ì„ ìœ„í•´ secretKeyë¥¼ ì´ìš©í•´ JWSì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì¦ì„ í•œë‹¤. secretKeyë¥¼ ì´ìš©í•œ ê²€ì¦ ì‹¤íŒ¨ì‹œ í•´ë‹¹ JWTëŠ” ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤. parseClaimsJws tokenì„ JWSë¡œ íŒŒì‹±í•´ì¤€ë‹¤.","text":"4. JWT ë‹¤ë£¨ê¸°ëª©ì°¨ Spring-JWT(JSON Web Token) - 4. JWT ë‹¤ë£¨ê¸° Spring-JWT(JSON Web Token) - 3. Spring Security ì ìš©í•˜ê¸° Spring-JWT(JSON Web Token) - 2. íšŒì›ê°€ì… Spring-JWT(JSON Web Token) - 1. JWT ì•Œì•„ë³´ê¸° JWTë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ Util Classë§Œë“¤ê¸° JwtUtil ê°ì²´ëŠ” Jwts.builderë¥¼ ì´ìš©í•´ JWTë¥¼ ìƒì„±í•˜ê³  Jwts.parserBuilderë¥¼ ì´ìš©í•´ Tokenì„ JWTë¡œ ë³€í™˜ì‹œì¼œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤. Jwts.builder(JwtBuilder) setHeader JWTì˜ Header ì— ëŒ€í•œ ì„¤ì •ì„ ìœ„í•œ ë©”ì†Œë“œ setSubject, setExpiration, setIssuer, setAudience, setNotBefore, setIssuedAt Registed PayloadëŠ” ê°ê°ì— í•´ë‹¹í•˜ëŠ” set ë©”ì†Œë“œë“¤ì´ ì œê³µëœë‹¤. setClaims JWTì˜ Claim ë°ì´í„° ë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œ signWith Headerì™€ Payloadë¥¼ ê°–ê³  Secret Key ë¡œ ì„œëª…í•œë‹¤. ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œëŠ” ë³´í†µ HMAC or RSA ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•œë‹¤. Jwts.parserBuilder(JwtParser) setSigningKey ë°ì´í„° ìœ„ë³€ì¡° í™•ì¸ì„ ìœ„í•´ secretKeyë¥¼ ì´ìš©í•´ JWSì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì¦ì„ í•œë‹¤. secretKeyë¥¼ ì´ìš©í•œ ê²€ì¦ ì‹¤íŒ¨ì‹œ í•´ë‹¹ JWTëŠ” ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤. parseClaimsJws tokenì„ JWSë¡œ íŒŒì‹±í•´ì¤€ë‹¤. JwtUtil.java @Componentpublic class JwtUtil &#123; private final String secretKey = &quot;ThisIsA_SecretKeyForJwtExample&quot;; public String generateToken(String username) &#123; String JSONWebToken = Jwts.builder() .setHeader(createHeader()) .setClaims(createClaims(username)) .setExpiration(createExpireDateForOneYear()) .signWith(SignatureAlgorithm.HS256, secretKey) .compact(); return JSONWebToken; &#125; private Map&lt;String, Object&gt; createHeader() &#123; Map&lt;String, Object&gt; header = new HashMap&lt;&gt;(); header.put(&quot;typ&quot;, &quot;JWT&quot;); header.put(&quot;alg&quot;, &quot;HS256&quot;); header.put(&quot;regDate&quot;, System.currentTimeMillis()); return header; &#125; private Map&lt;String, Object&gt; createClaims(String username) &#123; Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;(); claims.put(&quot;username&quot;, username); &#125; private Date createExpireDateForOneYear() &#123; // í† í° ë§Œë£Œì‹œê°„ì€ 30ì¼ìœ¼ë¡œ ì„¤ì • Calendar calendar = Calendar.getInstance(); calendar.add(Calendar.DATE, 30); return calendar.getTime(); &#125; private Claims getAllClaims(String token) &#123; return Jwts.parser() .setSigningKey(secretKey) .parseClaimsJws(token) .getBody(); &#125; public String getUsername(String token) &#123; Claims claims = getAllClaims(token); String username = claims.get(&quot;username&quot;, String.class); return username; &#125; public Date getExpiration(String token) &#123; Claims claims = getAllClaims(token); return claims.getExpiration(); &#125; public Boolean validateToken(String token, UserDetails userDetails) &#123; final String username = getUsername(token); return (username.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token)); &#125; private Boolean isTokenExpired(String token) &#123; return getExpiration(token).before(new Date()); &#125;&#125; JWTë¥¼ ì´ìš©í•œ ì¸ì¦ì„ ìœ„í•´ ìƒˆë¡œìš´ Filterì •ì˜í•˜ê¸°OncePerRequestFilterë¥¼ ìƒì† ë°›ì•„ JWTë¡œ ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” JwtAuthenticationFilterë¥¼ ìƒì„±í•œë‹¤.JwtAuthenticationFilterì—ì„œëŠ” ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ Tokenì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  í•´ë‹¹ Tokenì„ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•œ í›„ AuthenticationTokenì„ ìƒì„±í•´ SecurityContextHolderì— ì €ì¥í•œë‹¤. UsernamePasswordAuthenticationToken ì‚¬ìš©ìì˜ Usernameê³¼ Passwordë¥¼ ì´ìš©í•˜ì—¬ AuthenticationTokenì„ ìƒì„±í•œë‹¤. JwtAuthenticationFilter.java @Componentpublic class JwtAuthenticationFilter extends OncePerRequestFilter &#123; private final Logger logger = LoggerFactory.getLogger(JwtAuthenticationFilter.class); @Autowired private JwtUtil jwtUtil; @Autowired private CustomUserDetailsService service; @Override protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException &#123; // Http ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ headerë¥¼ ê²€ì‚¬í•´ Authorization ê°’ì„ ê°€ì ¸ì˜¨ë‹¤. String authorizationHeader = request.getHeader(&quot;Authorization&quot;); String token = null; String username = null; // ì¸ì¦ í† í°ì„ ë°›ì•˜ì„ ê²½ìš° // Bearer í† í°ì¸ì§€ í™•ì¸í•œë‹¤. if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) &#123; token = authorizationHeader.substring(7); username = jwtUtil.extractUsername(token); &#125; // Bearer í† í°ìœ¼ë¡œë¶€í„° ì¶”ì¶œí•œ usernameì„ ì´ìš©í•´ // í•´ë‹¹ ìœ ì €ê°€ ë“±ë¡ëœ ìœ ì €ì¸ì§€ ê²€ì¦í•œë‹¤. if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) &#123; UserDetails userDetails = service.loadUserByUsername(username); if (jwtUtil.validateToken(token, userDetails)) &#123; UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities()); usernamePasswordAuthenticationToken .setDetails(new WebAuthenticationDetailsSource().buildDetails(request)); SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken); &#125; &#125; filterChain.doFilter(request, response); &#125;&#125; ë¡œê·¸ì¸ì„ ìœ„í•œ Controller ì¶”ê°€Usernameê³¼ Passwordë¥¼ ì´ìš©í•´ /api/user/login ê²½ë¡œë¡œ ì¸ì¦ì„ ì‹œë„í•˜ë©´ AuthenticationManager ê°ì²´ë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ì§„í–‰í•˜ê³  ì¸ì¦ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ë˜ë©´ JWTë¥¼ ìƒì„±í•´ Headerì— JWTë¥¼ ë„£ì–´ Status code : 200ê³¼ í•¨ê»˜ ë°˜í™˜í•œë‹¤. JwtController.java ....private final AuthenticationManager authenticationManager;private final JwtUtil jwtUtil;@PostMapping(&quot;/login&quot;)public ResponseEntity login(@RequestBody AuthRequest authRequest) throws Exception &#123; String username = authRequest.getUsername(); String password = authRequest.getPassword(); try &#123; // AuthnRequestë¡œë¶€í„° ë°›ì€ usernameê³¼ passwordë¥¼ ì´ìš©í•˜ì—¬ UsernamePasswordAuthenticationTokenì„ ìƒì„±í•œ í›„ // ìƒì„±ëœ í† í°ì„ ì´ìš©í•´ ì¸ì¦ì„ ì‹œë„í•œë‹¤. authenticationManager.authenticate( new UsernamePasswordAuthenticationToken(username, password)); &#125; catch (Exception ex) &#123; throw new Exception(&quot;inavalid username/password&quot;); &#125; String token = jwtUtil.generateToken(authRequest.getUsername()); HttpHeaders httpHeaders = new HttpHeaders(); httpHeaders.add(&quot;Authorization&quot;, &quot;Bearer &quot; +token); // ì¸ì¦ì´ ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš° usernameì„ ì´ìš©í•´ JWTë¥¼ ìƒì„±í•´ ë°˜í™˜í•œë‹¤. return new ResponseEntity(httpHeaders, HttpStatus.OK);&#125; ê¶Œí•œì„ ê°–ê³  ì ‘ê·¼í•˜ê¸° ìœ„í•œ Controller ì¶”ê°€ ë°˜í™˜ë°›ì€ JWTë¥¼ ê°–ê³  /api/user/access ê²½ë¡œë¡œ ì ‘ê·¼í•˜ë©´ Permission to Access ë¬¸êµ¬ê°€ ë°˜í™˜ëœë‹¤. JwtController.java @GetMapping(&quot;/access&quot;)public String accessByToken()&#123; return &quot;Permission to Access&quot;;&#125; Security ì„¤ì • ì¶”ê°€í•˜ê¸°AuthenticationManagerBuilderê°ì²´ì˜ userDetailsService ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì‚¬ìš©ìê°€ ì •ì˜í•œ CustomUserDetailsService ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë“±ë¡í•œë‹¤. SecurityConfig.java @Overrideprotected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; // ì‚¬ìš©ìê°€ ì •ì˜í•œ UserDetailsServiceë¥¼ ì‚¬ìš©í•œë‹¤. auth.userDetailsService(customUserDetailsService);&#125; íšŒì›ê°€ì…ì„ ìœ„í•œ /api/user/signup ê²½ë¡œì™€ ë¡œê·¸ì¸ì„ ìœ„í•œ /api/user/login ê²½ë¡œëŠ” ì¸ì¦ì „ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ê²½ë¡œì´ë¯€ë¡œ ê¶Œí•œ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥í•´ì•¼ í•œë‹¤. ê·¸ì™¸ ëª¨ë“  ê²½ë¡œëŠ” ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤. ì‚¬ìš©ì ì •ì˜ Filterì¸ JwtAuthenticationFilterë¥¼ Spring Filterì— ì¶”ê°€í•œë‹¤. SecurityConfig.java @Overrideprotected void configure(HttpSecurity http) throws Exception &#123; http.csrf().disable().authorizeRequests() .antMatchers(&quot;/api/user/login&quot;).permitAll() .antMatchers(&quot;/api/user/signup&quot;).permitAll() .anyRequest().authenticated() .and() // í† í°ì„ í™œìš©í•˜ë©´ ì„¸ì…˜ì´ í•„ìš” ì—†ìœ¼ë¯€ë¡œ STATELESSë¡œ ì„¤ì •í•˜ì—¬ Sessionì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS) .and() // form ê¸°ë°˜ì˜ ë¡œê·¸ì¸ì— ëŒ€í•´ ë¹„í™œì„±í™” í•œë‹¤. .formLogin().disable() // ìƒˆë¡­ê²Œ ì •ì˜í•œ Filterë¥¼ ë“±ë¡í•œë‹¤. .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"JWT","slug":"Spring/Spring-Security/JWT","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/JWT/"}],"tags":[]},{"title":"Spring-JWT(JSON Web Token) - 3. Spring Security ì ìš©í•˜ê¸°","slug":"spring/spring-security/jwt/spring-jwt-03","date":"2021-03-14T15:49:30.000Z","updated":"2024-02-26T16:22:04.002Z","comments":true,"path":"2021/03/15/spring/spring-security/jwt/spring-jwt-03/","link":"","permalink":"https://ckck803.github.io/2021/03/15/spring/spring-security/jwt/spring-jwt-03/","excerpt":"3. ë¡œê·¸ì¸ëª©ì°¨ Spring-JWT(JSON Web Token) - 4. JWT ë‹¤ë£¨ê¸° Spring-JWT(JSON Web Token) - 3. Spring Security ì ìš©í•˜ê¸° Spring-JWT(JSON Web Token) - 2. íšŒì›ê°€ì… Spring-JWT(JSON Web Token) - 1. JWT ì•Œì•„ë³´ê¸° ì˜ì¡´ì„± ì¶”ê°€Spring Bootì— Securityë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ Spring Security ì˜ì¡´ì„±ê³¼ JWTë¥¼ ì‚¬ìš©í•˜ê¸°ìœ„í•´ jjwt ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì£¼ë„ë¡ í•œë‹¤. build.gradle dependencies &#123; .... implementation &#x27;org.thymeleaf.extras:thymeleaf-extras-springsecurity5&#x27; // https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt implementation group: &#x27;io.jsonwebtoken&#x27;, name: &#x27;jjwt&#x27;, version: &#x27;0.9.1&#x27; ....&#125; Security ì„¤ì •í•˜ê¸°Spring SecurityëŠ” ì¸ì¦ì— í•„ìš”í•œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•  ë•Œ ë¹„ë°€ë²ˆí˜¸ëŠ” PasswordEncoder ê°ì²´ë¥¼ ì´ìš©í•´ ì•”í˜¸í™”ëœ Passwordë¡œ ì €ì¥ë¼ì•¼ í•œë‹¤. í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” PasswordEncoderë¥¼ êµ¬í˜„í•œ BcryptPasswordEncoder ê°ì²´ë¥¼ ì´ìš©í•´ ì•”í˜¸í™”ë¥¼ í•  ê²ƒì´ë‹¤.","text":"3. ë¡œê·¸ì¸ëª©ì°¨ Spring-JWT(JSON Web Token) - 4. JWT ë‹¤ë£¨ê¸° Spring-JWT(JSON Web Token) - 3. Spring Security ì ìš©í•˜ê¸° Spring-JWT(JSON Web Token) - 2. íšŒì›ê°€ì… Spring-JWT(JSON Web Token) - 1. JWT ì•Œì•„ë³´ê¸° ì˜ì¡´ì„± ì¶”ê°€Spring Bootì— Securityë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ Spring Security ì˜ì¡´ì„±ê³¼ JWTë¥¼ ì‚¬ìš©í•˜ê¸°ìœ„í•´ jjwt ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì£¼ë„ë¡ í•œë‹¤. build.gradle dependencies &#123; .... implementation &#x27;org.thymeleaf.extras:thymeleaf-extras-springsecurity5&#x27; // https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt implementation group: &#x27;io.jsonwebtoken&#x27;, name: &#x27;jjwt&#x27;, version: &#x27;0.9.1&#x27; ....&#125; Security ì„¤ì •í•˜ê¸°Spring SecurityëŠ” ì¸ì¦ì— í•„ìš”í•œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•  ë•Œ ë¹„ë°€ë²ˆí˜¸ëŠ” PasswordEncoder ê°ì²´ë¥¼ ì´ìš©í•´ ì•”í˜¸í™”ëœ Passwordë¡œ ì €ì¥ë¼ì•¼ í•œë‹¤. í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” PasswordEncoderë¥¼ êµ¬í˜„í•œ BcryptPasswordEncoder ê°ì²´ë¥¼ ì´ìš©í•´ ì•”í˜¸í™”ë¥¼ í•  ê²ƒì´ë‹¤. ì •ì ìì›ì— ëŒ€í•œ ì ‘ê·¼ì€ Spring Filterë¥¼ ê±°ì¹˜ì§€ ì•Šë„ë¡ ì„¤ì •ì„ ì¶”ê°€í•œë‹¤. SecurityConfig.java @EnableWebSecurity@RequiredArgsConstructorpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; private static final String[] CLASSPATH_RESOURCE_LOCATIONS = &#123; &quot;classpath:/static/&quot; , &quot;classpath:/public/&quot; , &quot;classpath:/&quot; , &quot;classpath:/resources/&quot; , &quot;classpath:/META-INF/resources/&quot; , &quot;classpath:/META-INF/resources/webjars/&quot; &#125;; @Override public void configure(WebSecurity web) &#123; web.ignoring().requestMatchers(PathRequest.toStaticResources().atCommonLocations()); &#125; @Bean @Override public AuthenticationManager authenticationManagerBean() throws Exception &#123; return super.authenticationManagerBean(); &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.csrf().disable().authorizeRequests() .antMatchers(&quot;/api/user/signup&quot;).permitAll() .anyRequest().authenticated() .and() // í† í°ì„ í™œìš©í•˜ë©´ ì„¸ì…˜ì´ í•„ìš” ì—†ìœ¼ë¯€ë¡œ STATELESSë¡œ ì„¤ì •í•˜ì—¬ Sessionì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS) .and() // form ê¸°ë°˜ì˜ ë¡œê·¸ì¸ì— ëŒ€í•´ ë¹„í™œì„±í™” í•œë‹¤. .formLogin().disable(); &#125; @Bean public PasswordEncoder passwordEncoder() &#123; return new BCryptPasswordEncoder(); &#125;&#125; íšŒì› ê°€ì… Serviceì— ì•”í˜¸í™” ì ìš©í•˜ê¸°PasswordEncoder ê°ì²´ë¥¼ ì´ìš©í•´ ì•”í˜¸í™”ëœ Passwordë¥¼ ê°–ëŠ” Account ê°ì²´ë¥¼ ìƒì„±í•˜ë„ë¡ ë³€ê²½í•œë‹¤. AccountService.java @Service@RequiredArgsConstructorpublic class AccountService &#123; private final AccountRepository accountRepository; private final PasswordEncoder passwordEncoder; public Account saveAccount(SignUpRequest signUpRequest) &#123; Account newAccount = Account.builder() .username(signUpRequest.getUsername()) .password(passwordEncoder.encode(signUpRequest.getPassword())) .role(Role.USER) .build(); return accountRepository.save(newAccount); &#125;&#125; usernameì„ ì´ìš©í•œ Account ê°ì²´ ì¡°íšŒ ì¡°ê±´ ì¶”ê°€í•˜ê¸° AccountRepository.java @Repositorypublic interface AccountRepository extends JpaRepository&lt;Account, String&gt; &#123; Optional&lt;Account&gt; findByUsername(String username);&#125; ì¸ì¦ì— í•„ìš”í•œ User ê°ì²´ ìƒì„±í•˜ê¸°CustomUserDetailsServiceëŠ” ì €ì¥ëœ Accountê°ì²´ë¥¼ ê°€ì ¸ì™€ UserDetailsê°ì²´ë¡œ ë³€í™˜í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤. CustomUserDetailsService.java @Service@RequiredArgsConstructorpublic class CustomUserDetailsService implements UserDetailsService &#123; private final AccountRepository accountRepository; @Override public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException &#123; Account account = accountRepository .findByUsername(username) .orElseThrow(() -&gt; new UsernameNotFoundException(username + &quot;ì‚¬ìš©ì ì—†ìŒ&quot;)); return new User(account.getUsername(), account.getPassword(), AuthorityUtils.createAuthorityList(account.getRole().getValue())); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"JWT","slug":"Spring/Spring-Security/JWT","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/JWT/"}],"tags":[]},{"title":"Spring-JWT(JSON Web Token) - 2. íšŒì›ê°€ì…","slug":"spring/spring-security/jwt/spring-jwt-02","date":"2021-03-14T13:11:14.000Z","updated":"2024-02-26T16:21:59.236Z","comments":true,"path":"2021/03/14/spring/spring-security/jwt/spring-jwt-02/","link":"","permalink":"https://ckck803.github.io/2021/03/14/spring/spring-security/jwt/spring-jwt-02/","excerpt":"2. íšŒì›ê°€ì…ëª©ì°¨ Spring-JWT(JSON Web Token) - 4. JWT ë‹¤ë£¨ê¸° Spring-JWT(JSON Web Token) - 3. Spring Security ì ìš©í•˜ê¸° Spring-JWT(JSON Web Token) - 2. íšŒì›ê°€ì… Spring-JWT(JSON Web Token) - 1. JWT ì•Œì•„ë³´ê¸° ì˜ì¡´ì„± ê´€ê³„build.gradle dependencies &#123; implementation &#x27;org.springframework.boot:spring-boot-starter-data-jpa&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-security&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-thymeleaf&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-web&#x27; compileOnly &#x27;org.projectlombok:lombok&#x27; developmentOnly &#x27;org.springframework.boot:spring-boot-devtools&#x27; runtimeOnly &#x27;com.h2database:h2&#x27; annotationProcessor &#x27;org.projectlombok:lombok&#x27; testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27; testImplementation &#x27;org.springframework.security:spring-security-test&#x27;&#125; íšŒì›ê°€ì…ì„ ìœ„í•œ DTO ë§Œë“¤ê¸°SignUpRequest.java @Data@AllArgsConstructor@NoArgsConstructorpublic class SignUpRequest &#123; private String username; private String password;&#125;","text":"2. íšŒì›ê°€ì…ëª©ì°¨ Spring-JWT(JSON Web Token) - 4. JWT ë‹¤ë£¨ê¸° Spring-JWT(JSON Web Token) - 3. Spring Security ì ìš©í•˜ê¸° Spring-JWT(JSON Web Token) - 2. íšŒì›ê°€ì… Spring-JWT(JSON Web Token) - 1. JWT ì•Œì•„ë³´ê¸° ì˜ì¡´ì„± ê´€ê³„build.gradle dependencies &#123; implementation &#x27;org.springframework.boot:spring-boot-starter-data-jpa&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-security&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-thymeleaf&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-web&#x27; compileOnly &#x27;org.projectlombok:lombok&#x27; developmentOnly &#x27;org.springframework.boot:spring-boot-devtools&#x27; runtimeOnly &#x27;com.h2database:h2&#x27; annotationProcessor &#x27;org.projectlombok:lombok&#x27; testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27; testImplementation &#x27;org.springframework.security:spring-security-test&#x27;&#125; íšŒì›ê°€ì…ì„ ìœ„í•œ DTO ë§Œë“¤ê¸°SignUpRequest.java @Data@AllArgsConstructor@NoArgsConstructorpublic class SignUpRequest &#123; private String username; private String password;&#125; íšŒì› ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ Entity ìƒì„±Account.java @Data@NoArgsConstructor@AllArgsConstructor@Entity@Builderpublic class Account &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private int id; @Column(unique = true) private String username; private String password; private Role role;&#125; Accountë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ Repository ìƒì„±@Repositorypublic interface AccountRepository extends JpaRepository&lt;Account, String&gt; &#123;&#125; íšŒì› ê°€ì… ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Service ìƒì„±@Service@RequiredArgsConstructorpublic class AccountService &#123; private final AccountRepository accountRepository; public Account saveAccount(SignUpRequest signUpRequest) &#123; Account newAccount = Account.builder() .username(signUpRequest.getUsername()) .password(signUpRequest.getPassword()) .role(Role.USER) .build(); return accountRepository.save(newAccount); &#125;&#125; ControlleríšŒì›ê°€ì…ì— í•„ìš”í•œ Usernameê³¼ Passwordë¥¼ ê°–ê³  /api/user/signupì— Post ìš”ì²­ì„ ë³´ë‚´ë©´ íšŒì›ê°€ì…ì´ ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš° Status Code : 200ì´ ë°˜í™˜ë˜ê²Œ ëœë‹¤. JwtController.java @RestController@RequestMapping(&quot;/api/user&quot;)@RequiredArgsConstructorpublic class UserController &#123; private final AccountService accountService; @PostMapping(&quot;/signup&quot;) public ResponseEntity signup(@RequestBody SignUpRequest signUpRequest)&#123; accountService.saveAccount(signUpRequest); return ResponseEntity.ok().build(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"JWT","slug":"Spring/Spring-Security/JWT","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/JWT/"}],"tags":[]},{"title":"ë©”ëª¨ë¦¬ ê´€ë¦¬","slug":"computer-science/os/memory-management","date":"2021-03-07T15:16:13.000Z","updated":"2024-02-18T16:19:54.520Z","comments":true,"path":"2021/03/08/computer-science/os/memory-management/","link":"","permalink":"https://ckck803.github.io/2021/03/08/computer-science/os/memory-management/","excerpt":"ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ë³¸ì ì¸ ë©”ëª¨ë¦¬ ê´€ë¦¬ swapping ê°€ìƒ ë©”ëª¨ë¦¬ Page replacement ì•Œê³ ë¦¬ì¦˜ ì„¸ê·¸ë©˜í…Œì´ì…˜ í”„ë¡œê·¸ë˜ë¨¸ë“¤ì´ ê°€ì¥ ë°”ë¼ëŠ” ë©”ëª¨ë¦¬ëŠ” ë°”ë¡œ í¬ê³  ë¹ ë¥´ê³  ë¹„ íœ˜ë°œì„±ì¸ê²ƒì„ ì›í•œë‹¤. Memory Manager(ë©”ëª¨ë¦¬ ê´€ë¦¬ì) ë©”ëª¨ë¦¬ ê³„ì¸µì„ ê´€ë¦¬í•˜ëŠ” ìš´ì˜ì²´ì œì˜ ì¼ë¶€ë¶„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë©”ëª¨ë¦¬ì™€ ì‚¬ìš©í•˜ê³ ìˆì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ë¥¼ ê³„ì†í•´ì„œ ì¶”ì í•œë‹¤. ë©”ëª¨ë¦¬ë¥¼ í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹í•˜ê³  í•´ì œí•œë‹¤. í”„ë¡œì„¸ìŠ¤ì˜ ìš©ëŸ‰ì´ ì»¤ì„œ ë©”ëª¨ë¦¬ì— ìš©ëŸ‰ì´ ì‘ì„ ê²½ìš° ë©”ëª¨ë¦¬ì™€ ë””ìŠ¤í¬ë¥¼ swappingí•œë‹¤. ê¸°ë³¸ì ì¸ ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ë²•pagingì´ë‚˜ swappingì´ ì—†ëŠ” ë‹¨ì¼ í”„ë¡œê·¸ë¨ë©”ëª¨ë¦¬ë³´ë‹¤ ë” í° Programì˜ ë“±ì¥í”„ë¡œê·¸ë¨ì´ ì ì  ì»¤ì§€ë‹¤ ë³´ë‹ˆ ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ë©”ì¸ ë©”ëª¨ë¦¬ë³´ë‹¤ í° í”„ë¡œê·¸ë¨ì´ ìƒê²¨ë‚˜ê²Œ ëë‹¤.ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ overlayì™€ virtual memory ë°©ë²•ì´ ë‚˜ì™”ë‹¤.","text":"ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ë³¸ì ì¸ ë©”ëª¨ë¦¬ ê´€ë¦¬ swapping ê°€ìƒ ë©”ëª¨ë¦¬ Page replacement ì•Œê³ ë¦¬ì¦˜ ì„¸ê·¸ë©˜í…Œì´ì…˜ í”„ë¡œê·¸ë˜ë¨¸ë“¤ì´ ê°€ì¥ ë°”ë¼ëŠ” ë©”ëª¨ë¦¬ëŠ” ë°”ë¡œ í¬ê³  ë¹ ë¥´ê³  ë¹„ íœ˜ë°œì„±ì¸ê²ƒì„ ì›í•œë‹¤. Memory Manager(ë©”ëª¨ë¦¬ ê´€ë¦¬ì) ë©”ëª¨ë¦¬ ê³„ì¸µì„ ê´€ë¦¬í•˜ëŠ” ìš´ì˜ì²´ì œì˜ ì¼ë¶€ë¶„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë©”ëª¨ë¦¬ì™€ ì‚¬ìš©í•˜ê³ ìˆì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ë¥¼ ê³„ì†í•´ì„œ ì¶”ì í•œë‹¤. ë©”ëª¨ë¦¬ë¥¼ í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹í•˜ê³  í•´ì œí•œë‹¤. í”„ë¡œì„¸ìŠ¤ì˜ ìš©ëŸ‰ì´ ì»¤ì„œ ë©”ëª¨ë¦¬ì— ìš©ëŸ‰ì´ ì‘ì„ ê²½ìš° ë©”ëª¨ë¦¬ì™€ ë””ìŠ¤í¬ë¥¼ swappingí•œë‹¤. ê¸°ë³¸ì ì¸ ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ë²•pagingì´ë‚˜ swappingì´ ì—†ëŠ” ë‹¨ì¼ í”„ë¡œê·¸ë¨ë©”ëª¨ë¦¬ë³´ë‹¤ ë” í° Programì˜ ë“±ì¥í”„ë¡œê·¸ë¨ì´ ì ì  ì»¤ì§€ë‹¤ ë³´ë‹ˆ ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ë©”ì¸ ë©”ëª¨ë¦¬ë³´ë‹¤ í° í”„ë¡œê·¸ë¨ì´ ìƒê²¨ë‚˜ê²Œ ëë‹¤.ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ overlayì™€ virtual memory ë°©ë²•ì´ ë‚˜ì™”ë‹¤. overlayì™€ virtual memoryì˜ ê¸°ë³¸ ì•„ì´ë””ì–´ëŠ” í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì„ ì—¬ëŸ¬ê°€ì§€ ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì‹¤í–‰í•œë‹¤ëŠ” ê³µí†µì ì´ ìˆë‹¤. í•˜ì§€ë§Œ, overlayì˜ ê²½ìš°ì—ëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ í”„ë¡œê·¸ë¨ë“¤ì„ ë‚˜ëˆ„ì–´ì•¼ í•˜ê³  virtual memoryì˜ ê²½ìš°ì—ëŠ” ì»´í“¨í„°ê°€ ëŒ€ì‹ í•´ì¤€ë‹¤ëŠ” ì°¨ì´ì ì´ ìˆë‹¤. Virtual MemoryVirtual MemoryëŠ” pagingê¸°ë²•ê³¼ segmentation ê¸°ë²•ì„ ì´ìš©í•œë‹¤. paging : ê³ ì •ë¶„í•  segmentation : ê°€ë³€ë¶„í• ","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Process","slug":"CS/Process","permalink":"https://ckck803.github.io/categories/CS/Process/"}],"tags":[]},{"title":"ë„¤íŠ¸ì›Œí¬ - TCP","slug":"computer-science/network/TCP","date":"2021-03-07T14:21:17.000Z","updated":"2024-02-18T16:19:54.518Z","comments":true,"path":"2021/03/07/computer-science/network/TCP/","link":"","permalink":"https://ckck803.github.io/2021/03/07/computer-science/network/TCP/","excerpt":"TCP(Transmission Control Protocol) TCP ì„œë¹„ìŠ¤ ì—°ê²° ì§€í–¥ì˜ ì‹ ë¢°ì„±ì´ ìˆëŠ” ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤. ì–‘ë°©í–¥ í†µì‹ ì„ ì§€ì›í•œë‹¤.(Full-Duplex Communication) íë¦„ì œì–´ì™€ ì—ëŸ¬ì œì–´, ê·¸ë¦¬ê³  í˜¼ì¡ì œì–´ë¥¼ ì œê³µí•œë‹¤.(ì‹ ë¢°ì„± ìˆëŠ” ì „ì†¡) ì‹ ë¢°ì„± ìˆëŠ” ì „ì†¡ì´ë€? ë°ì´í„°ê°€ ì†ì‹¤, ì¤‘ë³µë˜ì§€ ì•Šê³  ìˆœì„œê°€ ì–´ê¸‹ë‚˜ì§€ ì•ŠëŠ” ì „ì†¡ë°©ì‹ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ ì„œë¹„ìŠ¤ë€? ë°ì´í„° ì†¡ ìˆ˜ì‹ ì‹œ ë²„í¼ ê¸°ëŠ¥ì„ ì´ìš©í•´ Byte ë‹¨ìœ„ë¡œ ì²˜ë¦¬","text":"TCP(Transmission Control Protocol) TCP ì„œë¹„ìŠ¤ ì—°ê²° ì§€í–¥ì˜ ì‹ ë¢°ì„±ì´ ìˆëŠ” ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤. ì–‘ë°©í–¥ í†µì‹ ì„ ì§€ì›í•œë‹¤.(Full-Duplex Communication) íë¦„ì œì–´ì™€ ì—ëŸ¬ì œì–´, ê·¸ë¦¬ê³  í˜¼ì¡ì œì–´ë¥¼ ì œê³µí•œë‹¤.(ì‹ ë¢°ì„± ìˆëŠ” ì „ì†¡) ì‹ ë¢°ì„± ìˆëŠ” ì „ì†¡ì´ë€? ë°ì´í„°ê°€ ì†ì‹¤, ì¤‘ë³µë˜ì§€ ì•Šê³  ìˆœì„œê°€ ì–´ê¸‹ë‚˜ì§€ ì•ŠëŠ” ì „ì†¡ë°©ì‹ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ ì„œë¹„ìŠ¤ë€? ë°ì´í„° ì†¡ ìˆ˜ì‹ ì‹œ ë²„í¼ ê¸°ëŠ¥ì„ ì´ìš©í•´ Byte ë‹¨ìœ„ë¡œ ì²˜ë¦¬ TCPëŠ” ë°ì´í„° ì†¡&#x2F;ìˆ˜ì‹ ì‹œ ë²„í¼ë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— íë¦„ì œì–´ë¥¼ í•  ìˆ˜ ìˆë‹¤. Connection Oriented Protocal(ì—°ê²° ì§€í–¥ í”„ë¡œí† ì½œ)ì—°ê²°ì§€í–¥ í”„ë¡œí† ì½œì€ ë‹¤ìŒê³¼ ê°™ì€ 3ê°€ì§€ ë‹¨ê³„ë¥¼ ê±°ì¹˜ê²Œ ëœë‹¤. ì—°ê²° ë°ì´í„° ì „ì†¡ ì—°ê²° ì¢…ë£Œ 3-way handskaing í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ SYN íŒ¨í‚·ì„ ë³´ë‚¸ë‹¤. ê·¸ë¦¬ê³  í´ë¼ì´ì–¸íŠ¸ëŠ” SYN&#x2F;ACKì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” SYN_SENTìƒíƒœê°€ ëœë‹¤. ì„œë²„ëŠ” SYNìš”ì²­ì„ ë°›ê³  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ìš”ì²­ì„ ìˆ˜ë½í•œë‹¤ëŠ” ACKì™€ SYN flogê°€ ì„¤ì •ëœ íŒ¨í‚·ì„ ë°œì†¡í•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ ACKë¡œ ì‘ë‹µí•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤. ì„œë²„ëŠ” SYN_RECEIVED ìƒíƒœê°€ ëœë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ë¡œ ACKë¥¼ ë³´ë‚´ê²Œ ë˜ë©´ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²°ì´ ì´ë£¨ì–´ì§„ë‹¤. ì„œë²„ ìƒíƒœëŠ” ESTABLISHEDê°€ ëœë‹¤. SYN(í´ë¼ì´ì–¸íŠ¸) -&gt; SYN&#x2F;ACK(ì„œë²„) -&gt; ACK(í´ë¼ì´ì–¸íŠ¸)SYN_SENT(í´ë¼ì´ì–¸íŠ¸) -&gt; SYN_RECEIVED(ì„œë²„) -&gt; ESTABLISED(ì„œë²„) 4-way handshaking í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²°ì„ ì¢…ë£Œí•˜ê² ë‹¤ëŠ” FIN íŒ¨í‚·ì„ ì „ì†¡í•œë‹¤. FIN íŒ¨í‚·ì„ ë°›ì€ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ì—°ê²°ì„ ëŠëŠ”ë‹¤. ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ì—°ê²°ì€ ì•„ì§ ì‚´ì•„ìˆë‹¤.(Half-closed) ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œì˜ í†µì‹ ì´ ëë‚˜ê²Œ ë˜ë©´ ì„œë²„ì—ì„œ FIN íŒ¨í‚·ì„ ì „ì†¡í•œë‹¤. FIN íŒ¨í‚·ì„ ë°›ì€ í´ë¼ì´ì–¸íŠ¸ëŠ” ë§ˆì§€ë§‰ìœ¼ë¡œ ACKíŒ¨í‚·ì„ ë³´ë‚´ê²Œ ë˜ë©´ ì—°ê²°ì´ ëŠê¸°ê²Œ ëœë‹¤. TCPì— ì‚¬ìš©ë˜ëŠ” flag(control field) ACK(Acknowledgment) : í™•ì¸ì„ ìœ„í•œ flag SYN(Synchronize sequence numbers) : TCPë¥¼ ì´ìš©í•´ ì—°ê²°ì„ ë§Œë“¤ ë•Œ ì‚¬ìš©í•˜ëŠ” flag FIN(Terminate the connection) : TCP ì—°ê²°ì„ ëŠì„ ë•Œ ì‚¬ìš©í•œë‹¤. URG(Urgent) : urgent dataê°€ ì¡´ì¬í•¨ì„ ì•Œë ¤ì¤€ë‹¤. urgent dataëŠ” ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ë¬´ì‹œí•˜ê³  ë°”ë¡œ processë¡œ ë³´ë‚´ì§„ë‹¤. RST(Reset the connection) : ë¹„ì •ìƒì ìœ¼ë¡œ connectionì„ ëŠì„ ë•Œ ì‚¬ìš©í•œë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"}],"tags":[]},{"title":"í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤","slug":"computer-science/network/cloud","date":"2021-03-07T14:16:32.000Z","updated":"2024-02-18T16:19:54.518Z","comments":true,"path":"2021/03/07/computer-science/network/cloud/","link":"","permalink":"https://ckck803.github.io/2021/03/07/computer-science/network/cloud/","excerpt":"í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ì¢…ë¥˜IaaS(Infrastructure as a Service)ì¸í”„ë¼ë¥¼ ì œê³µí•˜ëŠ” ë°©ì‹ - ì»´í“¨í„°ë¥¼ ëŒ€ì—¬í•´ì£¼ëŠ” ê±°ë¼ê³  ìƒê°í•˜ë©´ ì´í•´í•˜ê¸° ì‰½ë‹¤. ì•„ë§ˆì¡´ì˜ AWS, MSì˜ Azure, êµ¬ê¸€ì˜ GCP Platform as a Serviceí”Œë«í¼ì„ ì œê³µí•˜ëŠ” ë°©ì‹ - IaaS ì„œë¹„ìŠ¤ì— Runtimeí™˜ê²½ê¹Œì§€ ì„¤ì •ì´ ì´ë¯¸ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— Software as a ServiceíŠ¹ì • ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì œê³µí•˜ëŠ” ë°©ì‹ - ë“œëë°•ìŠ¤, êµ¬ê¸€ Docs, ì˜¤í”¼ìŠ¤365 ì¥ì  ì»´í“¨íŒ… í™˜ê²½ì„ ë¹ ë¥´ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ì‚¬ìš©í•œ ë§Œí¼ë§Œ ëˆì„ ì§€ë¶ˆí•˜ë©´ ëœë‹¤. íŠ¹ì •ê¸°ê°„ íŠ¸ë˜í”½ì´ í­ì£¼í•˜ëŠ” ê²½ìš°ì— ìì›ì˜ ë¦¬ì†ŒìŠ¤ ì¶”ê°€ì™€ ì‚­ì œê°€ ê¸°ì¡´ì˜ on-premiseë°©ì‹ì— ë¹„í•´ ìš©ì´í•˜ë‹¤. ì„œë²„ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë¬¼ë¦¬ì  ê³µê°„ê³¼ ì¸ì  ìì›ì— ëŒ€í•´ ì‹ ê²½ì“¸ í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤.","text":"í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ì¢…ë¥˜IaaS(Infrastructure as a Service)ì¸í”„ë¼ë¥¼ ì œê³µí•˜ëŠ” ë°©ì‹ - ì»´í“¨í„°ë¥¼ ëŒ€ì—¬í•´ì£¼ëŠ” ê±°ë¼ê³  ìƒê°í•˜ë©´ ì´í•´í•˜ê¸° ì‰½ë‹¤. ì•„ë§ˆì¡´ì˜ AWS, MSì˜ Azure, êµ¬ê¸€ì˜ GCP Platform as a Serviceí”Œë«í¼ì„ ì œê³µí•˜ëŠ” ë°©ì‹ - IaaS ì„œë¹„ìŠ¤ì— Runtimeí™˜ê²½ê¹Œì§€ ì„¤ì •ì´ ì´ë¯¸ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— Software as a ServiceíŠ¹ì • ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì œê³µí•˜ëŠ” ë°©ì‹ - ë“œëë°•ìŠ¤, êµ¬ê¸€ Docs, ì˜¤í”¼ìŠ¤365 ì¥ì  ì»´í“¨íŒ… í™˜ê²½ì„ ë¹ ë¥´ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ì‚¬ìš©í•œ ë§Œí¼ë§Œ ëˆì„ ì§€ë¶ˆí•˜ë©´ ëœë‹¤. íŠ¹ì •ê¸°ê°„ íŠ¸ë˜í”½ì´ í­ì£¼í•˜ëŠ” ê²½ìš°ì— ìì›ì˜ ë¦¬ì†ŒìŠ¤ ì¶”ê°€ì™€ ì‚­ì œê°€ ê¸°ì¡´ì˜ on-premiseë°©ì‹ì— ë¹„í•´ ìš©ì´í•˜ë‹¤. ì„œë²„ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë¬¼ë¦¬ì  ê³µê°„ê³¼ ì¸ì  ìì›ì— ëŒ€í•´ ì‹ ê²½ì“¸ í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤. ë‹¨ì  íŠ¸ë˜í”½ì²˜ë¦¬ì— ë”°ë¥¸ ì´ˆê³¼ë¹„ìš© ìœ„í—˜ ë³´ì•ˆ ì´ìŠˆ - ìì‚¬ì˜ í”„ë¼ì´ë¹— ì„œë²„ì— ì €ì¥í•˜ëŠ”ê²ƒì´ ë‹¤ë¥¸ ì™¸ë¶€ì¸ì´ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"}],"tags":[]},{"title":"Spring Boot - Logging ì„¤ì •","slug":"spring/logging/logging","date":"2021-03-06T12:59:57.000Z","updated":"2024-11-27T02:00:27.173Z","comments":true,"path":"2021/03/06/spring/logging/logging/","link":"","permalink":"https://ckck803.github.io/2021/03/06/spring/logging/logging/","excerpt":"ë¡œê·¸ ë ˆë²¨ ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” ë¡œê¹… ë ˆë²¨ì€ ì´ 5ê°€ì§€ ì…ë‹ˆë‹¤. ë¡œê¹… ë ˆë²¨ì€ ERROR ê°€ ì œì¼ ë†’ê³  TRACE ê°€ ê°€ì¥ ë‚®ìŠµë‹ˆë‹¤. ë¡œí‚¹ ë ˆë²¨ ì„¤ì •ì‹œ í˜„ì¬ ë ˆë²¨ì´ìƒì˜ ë¡œê·¸ ì •ë³´ë¥¼ í•©ê»˜ ë³´ì—¬ì¤ë‹ˆë‹¤. ë”°ë¼ì„œ ë¡œê·¸ ë ˆë²¨ì€ TRACEë¡œ ê°ˆ ìˆ˜ë¡ í‘œí˜„ë˜ëŠ” Logì˜ ì–‘ì´ ë§ì•„ì§€ê³  ERRORë¡œ ê°ˆ ìˆ˜ë¡ í‘œí˜„ë˜ëŠ” Logì˜ ì–‘ì´ ì ì–´ì§‘ë‹ˆë‹¤. Configure íŒŒì¼ ë¬¸ë²•Logback ConfigureíŒŒì¼ì„ êµ¬ì„±í•˜ëŠ” 3ê°€ì§€ íƒœê·¸ê°€ ìˆë‹¤. appender ë¡œê·¸ì˜ ì¶œë ¥ ìœ„ì¹˜, ì¶œë ¥ í˜•ì‹ë° ë¡œê¹…ì— ëŒ€í•œ ì„¤ì •(ex. ê¸°ê°„, ìš©ëŸ‰ ë“±)ì„ ì§€ì •í•œë‹¤ root ì „ì—­ì ì¸ ë¡œê·¸ ì„¤ì •ì„ ìœ„í•´ ì‚¬ìš©í•œë‹¤. appenderë¥¼ ì‚¬ìš©í•´ appenderì— ì •ì˜ëœ í˜•ì‹ê³¼ ìœ„ì¹˜ë¡œ ë¡œê·¸ë¥¼ ì¶œë ¥ ì—¬ëŸ¬ê°œì˜ appenderë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. logger rootì™€ëŠ” ë°˜ëŒ€ë¡œ classë‚˜ Packageë‹¨ìœ„ë¡œ Logging ì •ì±…ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ë¡œê·¸ ë©”ì‹œì§€ë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ëª…ì‹œí•˜ê³  appenderë¥¼ ì‚¬ìš©í•´ appenderì— ì •ì˜ëœ í˜•ì‹ê³¼ ìœ„ì¹˜ë¡œ ë¡œê·¸ë¥¼ ì¶œë ¥í•œë‹¤. ì—¬ëŸ¬ê°œì˜ appenderë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. appender í´ë˜ìŠ¤ì˜ ì¢…ë¥˜","text":"ë¡œê·¸ ë ˆë²¨ ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” ë¡œê¹… ë ˆë²¨ì€ ì´ 5ê°€ì§€ ì…ë‹ˆë‹¤. ë¡œê¹… ë ˆë²¨ì€ ERROR ê°€ ì œì¼ ë†’ê³  TRACE ê°€ ê°€ì¥ ë‚®ìŠµë‹ˆë‹¤. ë¡œí‚¹ ë ˆë²¨ ì„¤ì •ì‹œ í˜„ì¬ ë ˆë²¨ì´ìƒì˜ ë¡œê·¸ ì •ë³´ë¥¼ í•©ê»˜ ë³´ì—¬ì¤ë‹ˆë‹¤. ë”°ë¼ì„œ ë¡œê·¸ ë ˆë²¨ì€ TRACEë¡œ ê°ˆ ìˆ˜ë¡ í‘œí˜„ë˜ëŠ” Logì˜ ì–‘ì´ ë§ì•„ì§€ê³  ERRORë¡œ ê°ˆ ìˆ˜ë¡ í‘œí˜„ë˜ëŠ” Logì˜ ì–‘ì´ ì ì–´ì§‘ë‹ˆë‹¤. Configure íŒŒì¼ ë¬¸ë²•Logback ConfigureíŒŒì¼ì„ êµ¬ì„±í•˜ëŠ” 3ê°€ì§€ íƒœê·¸ê°€ ìˆë‹¤. appender ë¡œê·¸ì˜ ì¶œë ¥ ìœ„ì¹˜, ì¶œë ¥ í˜•ì‹ë° ë¡œê¹…ì— ëŒ€í•œ ì„¤ì •(ex. ê¸°ê°„, ìš©ëŸ‰ ë“±)ì„ ì§€ì •í•œë‹¤ root ì „ì—­ì ì¸ ë¡œê·¸ ì„¤ì •ì„ ìœ„í•´ ì‚¬ìš©í•œë‹¤. appenderë¥¼ ì‚¬ìš©í•´ appenderì— ì •ì˜ëœ í˜•ì‹ê³¼ ìœ„ì¹˜ë¡œ ë¡œê·¸ë¥¼ ì¶œë ¥ ì—¬ëŸ¬ê°œì˜ appenderë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. logger rootì™€ëŠ” ë°˜ëŒ€ë¡œ classë‚˜ Packageë‹¨ìœ„ë¡œ Logging ì •ì±…ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ë¡œê·¸ ë©”ì‹œì§€ë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ëª…ì‹œí•˜ê³  appenderë¥¼ ì‚¬ìš©í•´ appenderì— ì •ì˜ëœ í˜•ì‹ê³¼ ìœ„ì¹˜ë¡œ ë¡œê·¸ë¥¼ ì¶œë ¥í•œë‹¤. ì—¬ëŸ¬ê°œì˜ appenderë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. appender í´ë˜ìŠ¤ì˜ ì¢…ë¥˜ ch.qos.logback.core.ConsoleAppender ì½˜ì†”ì— ë¡œê·¸ë¥¼ ì°ìŒ ch.qos.logback.core.FileAppender íŒŒì¼ì— ë¡œê·¸ë¥¼ ì°ìŒ ch.qos.logback.core.rolling.RollingFileAppender ì—¬ëŸ¬ê°œì˜ íŒŒì¼ì„ ìˆœíšŒí•˜ë©´ì„œ ë¡œê·¸ë¥¼ ì°ìŒ ch.qos.logback.classic.net.SMTPAppender ë¡œê·¸ë¥¼ ë©”ì¼ì— ì°ì–´ ë³´ëƒ„ ch.qos.logback.classic.db.DBAppender ë°ì´í„°ë² ì´ìŠ¤ì— ë¡œê·¸ë¥¼ ì°ìŒ ì˜ì¡´ì„± ì¶”ê°€í•˜ê¸°ì¿¼ë¦¬ ë¡œê·¸ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” log4jdbc ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. build.gradle implementation group: &#x27;com.integralblue&#x27;, name: &#x27;log4jdbc-spring-boot-starter&#x27;, version: &#x27;2.0.0&#x27; ì„¤ì • ì¶”ê°€í•˜ê¸° jdbc.sqlonly SQLë¬¸ë§Œì„ ë¡œê·¸ë¡œ ë‚¨ê¸´ë‹¤. jdbc.sqltiming SQLë¬¸ê³¼ í•´ë‹¹ SQLì„ ìˆ˜í–‰í•œ ì‹œê°„ì„ ë¡œê·¸ë¡œ ë‚¨ê¸´ë‹¤. jdbc.audit ResultSetì„ ì œì™¸í•œ ëª¨ë“  JDBC í˜¸ì¶œ ì •ë³´ë¥¼ ë¡œê·¸ë¡œ ë‚¨ê¸´ë‹¤. ë§ì€ ì–‘ì˜ ë¡œê·¸ë¥¼ ìƒì„±í•˜ë¯€ë¡œ JDBC ë¬¸ì œë¥¼ ì¶”ì í•´ì•¼ í•  í•„ìš”ë¥¼ ì£„ì™¸í•˜ê³ ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. jdbc.resultset ResultSetì„ í¬í•¨í•œ ëª¨ë“  JDBC í˜¸ì¶œ ì •ë³´ë¥¼ ë¡œê·¸ë¡œ ë‚¨ê¸´ë‹¤. ë§ì€ ì–‘ì˜ ë¡œê·¸ë¥¼ ìƒì„±í•˜ë¯€ë¡œ JDBC ë¬¸ì œë¥¼ ì¶”ì í•´ì•¼ í•  í•„ìš”ë¥¼ ì£„ì™¸í•˜ê³ ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. jdbc.resultsettable SQLë¬¸ì„ ìˆ˜í–‰í•œ í›„ ì¡°íšŒëœ tableì„ ë¡œê·¸ë¡œ ë‚¨ê¸´ë‹¤. logback-spring.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;configuration&gt; &lt;property name=&quot;LOGS_PATH&quot; value=&quot;./logs&quot;/&gt; &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt; &lt;encoder&gt; &lt;pattern&gt;%d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;logger name=&quot;jdbc.sqlonly&quot; level=&quot;INFO&quot;/&gt; &lt;root level=&quot;off&quot;&gt; &lt;appender-ref ref=&quot;STDOUT&quot;&gt;&lt;/appender-ref&gt; &lt;/root&gt;&lt;/configuration&gt; DataBase ì ‘ì† ì„¤ì • ì¶”ê°€í•˜ê¸°DataBase ì ‘ì† URLê³¼ Driverë¥¼ ë³€ê²½í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. URLì—ì„œëŠ” jdbcí•˜ê³  ì ‘ì†í•˜ê³  ì‹¶ì€ DBì‚¬ì´ì— log4jdbcë¥¼ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤. DriverëŠ” log4jdbcì—ì„œ ì œê³µí•´ì£¼ëŠ” Driverë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. url: jdbc:log4jdbc:h2:mem:testdb driver-class-name: net.sf.log4jdbc.sql.jdbcapi.DriverSpy appplication.yml datasource: # url: jdbc:h2:mem:testdb url: jdbc:log4jdbc:h2:mem:testdb driver-class-name: net.sf.log4jdbc.sql.jdbcapi.DriverSpy username: sa password: Consoleì— SQLë¬¸ì´ ì°íˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ìƒí•˜ê²Œ Memory DBë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° SQLë¬¸ì´ ì¤‘ë³µìœ¼ë¡œ ì°íŒë‹¤. MySQL ì ‘ì† ì„¤ì • ë³€ê²½í•˜ê¸°H2 DataBaseí–ˆë˜ ê²ƒê³¼ ë§ˆì°¬ê°€ì§€ë¡œ Driverì™€ URLì„ ë³€ê²½í•´ì¤€ë‹¤. application-mysql.yml spring: datasource: driver-class-name: net.sf.log4jdbc.sql.jdbcapi.DriverSpy# driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:log4jdbc:mysql://localhost:3306/test?serverTimezone=UTC&amp;characterEncoding=UTF-8# url: jdbc:mysql://localhost:3306/test?serverTimezone=UTC&amp;characterEncoding=UTF-8 username: [DataBase ID] password: [DataBase Password] Createì‹œ engine&#x3D;InnoDBê°€ ë‚˜íƒ€ë‚œ ê²ƒì„ ë³´ì•„ MySQLì„ ì´ìš©í•œ SQLë¬¸ì´ ì œëŒ€ë¡œ ìƒì„±ë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤. íŒŒì¼ì— Log ì¶œë ¥í•˜ê¸°íŒŒì¼ì— ë¡œê·¸ë¥¼ ë‚¨ê¸°ê¸° ìœ„í•´ appender í´ë˜ìŠ¤ë¡œ ch.qos.logback.core.FileAppenderë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤. ë¡œê·¸íŒŒì¼ì„ ê´€ë¦¬í•˜ëŠ” ì •ì±… ì„¸ìš°ê¸°rollingPolicy íƒœê·¸ë¥¼ ì´ìš©í•´ ë¡œê·¸íŒŒì¼ì„ ê´€ë¦¬í•˜ëŠ” ì •ì±…ì„ ì„¸ìš¸ ìˆ˜ ìˆë‹¤. rollingPolicy ch.qos.logback.core.rolling.RollingFileAppender ì¼ìë³„ë¡œ ë¡œê·¸íŒŒì¼ì„ ê´€ë¦¬í•œë‹¤. ì¼ìê°€ ë°”ë€Œë©´ fileNamePatternì— ë”°ë¼ ë³„ë„ì˜ ë¡œê·¸íŒŒì¼ì´ ìƒì„±ëœë‹¤. timeBasedFileNamingAndTriggeringPolicy ì¼ì ì™¸ì—ë„ íŒŒì¼ì˜ ìš©ëŸ‰ì— ë”°ë¼ ë³„ë„ì˜ ë¡œê·¸íŒŒì¼ì´ ìƒì„±ëœë‹¤. maxFileSizeë³´ë‹¤ ë¡œê·¸ íŒŒì¼ì˜ í¬ê¸°ê°€ ì»¤ì§€ë©´ ë³„ë„ì˜ ë¡œê·¸íŒŒì¼ì´ ìƒì„±ëœë‹¤. logback-spring.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;configuration&gt; &lt;property name=&quot;LOGS_PATH&quot; value=&quot;./logs&quot;/&gt; &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt; &lt;encoder&gt; &lt;pattern&gt;%d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;file&gt;$&#123;LOGS_PATH&#125;/logback.log&lt;/file&gt; &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt; &lt;Pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss&#125;- %-5level - %msg%n&lt;/Pattern&gt; &lt;/encoder&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;fileNamePattern&gt;$&#123;LOGS_PATH&#125;/$&#123;LOG_PREFIX&#125;.%d&#123;yyyy-MM-dd&#125;.%i.log&lt;/fileNamePattern&gt; &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt; &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt; &lt;/rollingPolicy&gt; &lt;/appender&gt;&lt;!-- &lt;logger name=&quot;jdbc.sqlonly&quot; level=&quot;INFO&quot;/&gt;--&gt; &lt;logger name=&quot;jdbc.sqlonly&quot; level=&quot;INFO&quot;/&gt; &lt;root level=&quot;off&quot;&gt; &lt;appender-ref ref=&quot;FILE&quot;&gt;&lt;/appender-ref&gt; &lt;/root&gt;&lt;/configuration&gt; logsë¼ëŠ” í´ë”ê°€ ìƒì„±ë˜ê³  ì—¬ê¸°ì— logback.logë¼ëŠ” íŒŒì¼ì´ ìƒì„±ë˜ ë¡œê·¸ê°€ ì°íˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. logback.log http://logback.qos.ch/manual/index.html","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 22 - Github Action ì‚¬ìš©í•˜ê¸°","slug":"spring/sample-board/board-22-github-action","date":"2021-03-06T05:12:05.000Z","updated":"2024-02-26T15:50:08.187Z","comments":true,"path":"2021/03/06/spring/sample-board/board-22-github-action/","link":"","permalink":"https://ckck803.github.io/2021/03/06/spring/sample-board/board-22-github-action/","excerpt":"22. Github Action ì‚¬ìš©í•˜ê¸°ì´ì „ì— Jenkinsë¥¼ ì´ìš©í•´ CI í™˜ê²½ì„ êµ¬ì„±í–ˆë‹¤. Jenkinsë¥¼ ì´ìš©í•œ CI í™˜ê²½ì˜ ê°€ì¥ í° ë‹¨ì ì€ Githubë¡œë¶€í„° Web Hookì„ ë°›ì„ ìˆ˜ ìˆê²Œ Portë¥¼ ì—´ì–´ë‘¬ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ngrokì„ ì´ìš©í•˜ë”ë¼ë„ ê³„ì†í•´ì„œ Portë¥¼ ì—´ì–´ë‘˜ ìˆ˜ëŠ” ì—†ëŠ” ë…¸ë¦‡ì´ë¼ì„œ Githubì—ì„œ ì œê³µí•˜ëŠ” CI ë„êµ¬ì¸ Github Actionì„ ì´ìš©í•˜ê¸°ë¡œ í–ˆë‹¤. Github Action Workflow Template ì„ íƒí•˜ê¸°Githubì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ë©´ ìƒë‹¨ì— Actionì„ ì„ íƒí•˜ë©´ ë³¸ì¸ì˜ í™˜ê²½ì— ë§ëŠ” Build í™˜ê²½ì„ ìœ„í•œ Templateë¥¼ ì„ íƒí•  ìˆ˜ ìˆë‹¤. Gradleì„ ì´ìš©í•´ Spring Boot í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ìˆìœ¼ë¯€ë¡œ Gradleì„ ì„ íƒí•˜ë„ë¡ í•œë‹¤. Template ìˆ˜ì •í•˜ê¸°Gradleì„ ì„ íƒí•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ Gradleì„ ì´ìš©í•œ Build Plan Templateê°€ ì£¼ì–´ì§„ë‹¤. ê¸°ë³¸ì ì¸ Templateì—ì„œëŠ” JDK ë²„ì „ì´ 1.8ì¸ë° í”„ë¡œì íŠ¸ëŠ” JDK 11ì„ ì´ìš©í•´ ì§„í–‰í•˜ê³  ìˆìœ¼ë¯€ë¡œ ë³€ê²½í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. ê·¸ ì™¸ì— ìš´ì˜ì²´ì œë‚˜ ì›í•˜ëŠ” Build Branchë“¤ì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤.","text":"22. Github Action ì‚¬ìš©í•˜ê¸°ì´ì „ì— Jenkinsë¥¼ ì´ìš©í•´ CI í™˜ê²½ì„ êµ¬ì„±í–ˆë‹¤. Jenkinsë¥¼ ì´ìš©í•œ CI í™˜ê²½ì˜ ê°€ì¥ í° ë‹¨ì ì€ Githubë¡œë¶€í„° Web Hookì„ ë°›ì„ ìˆ˜ ìˆê²Œ Portë¥¼ ì—´ì–´ë‘¬ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ngrokì„ ì´ìš©í•˜ë”ë¼ë„ ê³„ì†í•´ì„œ Portë¥¼ ì—´ì–´ë‘˜ ìˆ˜ëŠ” ì—†ëŠ” ë…¸ë¦‡ì´ë¼ì„œ Githubì—ì„œ ì œê³µí•˜ëŠ” CI ë„êµ¬ì¸ Github Actionì„ ì´ìš©í•˜ê¸°ë¡œ í–ˆë‹¤. Github Action Workflow Template ì„ íƒí•˜ê¸°Githubì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ë©´ ìƒë‹¨ì— Actionì„ ì„ íƒí•˜ë©´ ë³¸ì¸ì˜ í™˜ê²½ì— ë§ëŠ” Build í™˜ê²½ì„ ìœ„í•œ Templateë¥¼ ì„ íƒí•  ìˆ˜ ìˆë‹¤. Gradleì„ ì´ìš©í•´ Spring Boot í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ìˆìœ¼ë¯€ë¡œ Gradleì„ ì„ íƒí•˜ë„ë¡ í•œë‹¤. Template ìˆ˜ì •í•˜ê¸°Gradleì„ ì„ íƒí•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ Gradleì„ ì´ìš©í•œ Build Plan Templateê°€ ì£¼ì–´ì§„ë‹¤. ê¸°ë³¸ì ì¸ Templateì—ì„œëŠ” JDK ë²„ì „ì´ 1.8ì¸ë° í”„ë¡œì íŠ¸ëŠ” JDK 11ì„ ì´ìš©í•´ ì§„í–‰í•˜ê³  ìˆìœ¼ë¯€ë¡œ ë³€ê²½í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. ê·¸ ì™¸ì— ìš´ì˜ì²´ì œë‚˜ ì›í•˜ëŠ” Build Branchë“¤ì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤. on-push-branch Pushë¥¼ í–ˆì„ ë•Œ Buildë¥¼ ì§„í–‰í•  Branchë¥¼ ì„ íƒí•œë‹¤. í˜„ì¬ëŠ” masterì—ì„œ Pushê°€ ì¼ì–´ë‚¬ì„ ë•Œë§Œ Buildë¥¼ ì§„í–‰í•œë‹¤. on-pull_request-branch Pull Requestë¥¼ ì§„í–‰í–ˆì„ ë•Œ Buildë¥¼ ì§„í–‰í•  Branchë¥¼ ì„ íƒí•œë‹¤. í˜„ì¬ëŠ” masterë¡œ Pull Requstë¥¼ ì§„í–‰í•  ë•Œë§Œ Buildë¥¼ ì§„í–‰í•œë‹¤. jobs-build-runs-on Buildë¥¼ ì§„í–‰í•  í™˜ê²½(ìš´ì˜ì²´ì œ)ë¥¼ ì„ íƒí•œë‹¤. jobs-build-steps Buildë¥¼ ì§„í–‰í•  ë‹¨ê³„ë¥¼ ì •ì˜í•œë‹¤. jobs-build-steps-name Build ë‹¨ê³„ ì´ë¦„ì„ ëª…ì‹œí•œë‹¤. jobs-build-steps-uses Build ë‹¨ê³„ì—ì„œ ì‚¬ìš©í•  ê²ƒë“¤ì„ ë‚˜íƒ€ë‚¸ë‹¤. actions&#x2F;checkout@v2 : í˜„ì¬ Repositoryì˜ Projectë¥¼ í™•ì¸í•œë‹¤. actions&#x2F;setup-java@v1 : ì‚¬ìš©í•  ìë°” ë²„ì „ì„ ëª…ì‹œí•œë‹¤. withë¥¼ ì‚¬ìš©í•´ ì‚¬ìš© ë²„ì „ê¹Œì§€ ëª…ì‹œ jobs-build-steps-run ëª…ë ¹ì–´ë“¤ì„ ìˆ˜í•¸í•œë‹¤. chmod +x .&#x2F;gradlew : gradlewì— ëŒ€í•œ ì‹¤í–‰ ê¶Œí•œì„ ë¶€ì—¬í•œë‹¤. .&#x2F;gradlew clean build : gradlewë¥¼ ì´ìš©í•´ì„œ Buildë¥¼ ì§„í–‰í•œë‹¤. Github Actionì„ í†µí•œ Build ì§„í–‰í•˜ê¸°Template ì‘ì„±ì„ ì™„ë£Œí•œ í›„ ìš°ì¸¡ ìƒë‹¨ì˜ commitì„ ëˆ„ë¥´ê²Œ ë˜ë©´ Buildê°€ ì§„í–‰ë˜ê²Œ ëœë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"ë³µìˆ˜ì˜ í…Œì´ë¸” ë‹¤ë£¨ê¸°","slug":"database/sql/union-join","date":"2021-03-06T01:02:35.000Z","updated":"2024-02-18T16:19:54.524Z","comments":true,"path":"2021/03/06/database/sql/union-join/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/sql/union-join/","excerpt":"07ì¥ ë³µìˆ˜ì˜ í…Œì´ë¸” ë‹¤ë£¨ê¸°UNIONìœ¼ë¡œ í•©ì§‘í•© êµ¬í•˜ê¸°UNIONìœ¼ë¡œ í•©ì§‘í•© êµ¬í•˜ê¸°SELECT * FROM sample71_a;+------+| a |+------+| 1 || 2 || 3 |+------+3 rows in set (0.00 sec) SELECT * FROM sample71_b;+------+| b |+------+| 2 || 10 || 11 |+------+3 rows in set (0.00 sec) ë‘ê°œì˜ SELECT ëª…ë ¹ì„ UNIONí•´ì„œ í•©ì§‘í•© êµ¬í•˜ê¸°SELECT * FROM sample71_aUNIONSELECT * FROM sample71_b; ê²°ê³¼ +------+| a |+------+| 1 || 2 || 3 || 10 || 11 |+------+5 rows in set (0.00 sec)","text":"07ì¥ ë³µìˆ˜ì˜ í…Œì´ë¸” ë‹¤ë£¨ê¸°UNIONìœ¼ë¡œ í•©ì§‘í•© êµ¬í•˜ê¸°UNIONìœ¼ë¡œ í•©ì§‘í•© êµ¬í•˜ê¸°SELECT * FROM sample71_a;+------+| a |+------+| 1 || 2 || 3 |+------+3 rows in set (0.00 sec) SELECT * FROM sample71_b;+------+| b |+------+| 2 || 10 || 11 |+------+3 rows in set (0.00 sec) ë‘ê°œì˜ SELECT ëª…ë ¹ì„ UNIONí•´ì„œ í•©ì§‘í•© êµ¬í•˜ê¸°SELECT * FROM sample71_aUNIONSELECT * FROM sample71_b; ê²°ê³¼ +------+| a |+------+| 1 || 2 || 3 || 10 || 11 |+------+5 rows in set (0.00 sec) UNION ì—°ì‚°ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” SELECT ëª…ë ¹ì˜ ì—´ì˜ ë‚´ìš©ì´ ì„œë¡œ ì¼ì¹˜í•´ì•¼ í•œë‹¤. UNIONì„ ì‚¬ìš©í•  ê²½ìš° ê° SECECTëª…ë ¹ì— ORDER BYë¥¼ ì§€ì •í•´ ì •ë ¬í•  ìˆ˜ëŠ” ì—†ë‹¤. ë§ˆì§€ë§‰ SELECT ëª…ë ¹ì—ë§Œ ì§€ì •í•˜ë„ë¡ í•œë‹¤. ë‘ê°œì˜ SELECT ëª…ë ¹ì— UNION ALLì„ ì ìš©í•´ í•©ì§‘í•© êµ¬í•˜ê¸°SELECT * FROM sample71_aUNION ALLSELECT * FROM sample71_b; ê²°ê³¼ +------+| a |+------+| 1 || 2 || 3 || 2 || 10 || 11 |+------+6 rows in set (0.00 sec) í…Œì´ë¸” ê²°í•©êµì°¨ ê²°í•©FROM êµ¬ë¡œ ê³±ì§‘í•© êµ¬í•˜ê¸° FROMêµ¬ì— í…Œì´ë¸” ë‘ê°œë¥¼ ì§€ì •í•´ ê³±ì§‘í•© êµ¬í•˜ê¸° SELECT * FROM sample72_x, sample72_y; ê²°ê³¼ +------+------+| x | y |+------+------+| A | 1 || B | 1 || C | 1 || A | 2 || B | 2 || C | 2 || A | 3 || B | 3 || C | 3 |+------+------+9 rows in set (0.00 sec) ë‚´ë¶€ ê²°í•©ìƒí’ˆ í…Œì´ë¸”ê³¼ ì¬ê³ ìˆ˜ í…Œì´ë¸”ì„ êµì°¨ê²°í•©í•˜ê¸°SELECT * FROM ìƒí’ˆ, ì¬ê³ ìˆ˜; ê²°ê³¼ +--------------+-----------+--------------+--------+--------------+--------------+------------+-----------+| ìƒí’ˆì½”ë“œ | ìƒí’ˆëª… | ë©”ì´ì»¤ëª… | ê°€ê²© | ìƒí’ˆë¶„ë¥˜ | ìƒí’ˆì½”ë“œ | ì…ê³ ì¼ | ì¬ê³ ìˆ˜ |+--------------+-----------+--------------+--------+--------------+--------------+------------+-----------+| 0001 | ìƒí’ˆ1 | ë©”ì´ì»¤1 | 100 | ì‹ë£Œí’ˆ | 0001 | 2014-01-03 | 200 || 0002 | ìƒí’ˆ2 | ë©”ì´ì»¤2 | 200 | ì‹ë£Œí’ˆ | 0001 | 2014-01-03 | 200 || 0003 | ìƒí’ˆ3 | ë©”ì´ì»¤3 | 1980 | ìƒí™œìš©í’ˆ | 0001 | 2014-01-03 | 200 || 0001 | ìƒí’ˆ1 | ë©”ì´ì»¤1 | 100 | ì‹ë£Œí’ˆ | 0002 | 2014-02-10 | 500 || 0002 | ìƒí’ˆ2 | ë©”ì´ì»¤2 | 200 | ì‹ë£Œí’ˆ | 0002 | 2014-02-10 | 500 || 0003 | ìƒí’ˆ3 | ë©”ì´ì»¤3 | 1980 | ìƒí™œìš©í’ˆ | 0002 | 2014-02-10 | 500 || 0001 | ìƒí’ˆ1 | ë©”ì´ì»¤1 | 100 | ì‹ë£Œí’ˆ | 0003 | 2014-02-14 | 10 || 0002 | ìƒí’ˆ2 | ë©”ì´ì»¤2 | 200 | ì‹ë£Œí’ˆ | 0003 | 2014-02-14 | 10 || 0003 | ìƒí’ˆ3 | ë©”ì´ì»¤3 | 1980 | ìƒí™œìš©í’ˆ | 0003 | 2014-02-14 | 10 |+--------------+-----------+--------------+--------+--------------+--------------+------------+-----------+9 rows in set (0.00 sec) ìƒí’ˆì½”ë“œê°€ ê°™ì€ í–‰ì„ ê²€ìƒ‰í•˜ê¸°SELECT* FROM ìƒí’ˆ, ì¬ê³ ìˆ˜ WHERE ìƒí’ˆ. ìƒí’ˆì½”ë“œ = ì¬ê³ ìˆ˜.ìƒí’ˆì½”ë“œ; ê²°ê³¼ +--------------+-----------+--------------+--------+--------------+--------------+------------+-----------+| ìƒí’ˆì½”ë“œ | ìƒí’ˆëª… | ë©”ì´ì»¤ëª… | ê°€ê²© | ìƒí’ˆë¶„ë¥˜ | ìƒí’ˆì½”ë“œ | ì…ê³ ì¼ | ì¬ê³ ìˆ˜ |+--------------+-----------+--------------+--------+--------------+--------------+------------+-----------+| 0001 | ìƒí’ˆ1 | ë©”ì´ì»¤1 | 100 | ì‹ë£Œí’ˆ | 0001 | 2014-01-03 | 200 || 0002 | ìƒí’ˆ2 | ë©”ì´ì»¤2 | 200 | ì‹ë£Œí’ˆ | 0002 | 2014-02-10 | 500 || 0003 | ìƒí’ˆ3 | ë©”ì´ì»¤3 | 1980 | ìƒí™œìš©í’ˆ | 0003 | 2014-02-14 | 10 |+--------------+-----------+--------------+--------+--------------+--------------+------------+-----------+ ê²€ìƒ‰í•  í–‰ê³¼ ë°˜í™˜í•  ì—´ ì œí•œí•˜ê¸°SELECT ìƒí’ˆ.ìƒí’ˆëª…, ì¬ê³ ìˆ˜.ì¬ê³ ìˆ˜ FROM ìƒí’ˆ, ì¬ê³ ìˆ˜WHERE ìƒí’ˆ.ìƒí’ˆì½”ë“œ = ì¬ê³ ìˆ˜.ìƒí’ˆì½”ë“œAND ìƒí’ˆ.ìƒí’ˆë¶„ë¥˜ = &#x27;ì‹ë£Œí’ˆ&#x27;; ê²°ê³¼ +-----------+-----------+| ìƒí’ˆëª… | ì¬ê³ ìˆ˜ |+-----------+-----------+| ìƒí’ˆ1 | 200 || ìƒí’ˆ2 | 500 |+-----------+-----------+2 rows in set (0.00 sec) ë‚´ë¶€ê²°í•©ì„ í™œìš©í•œ ë°ì´í„° ê´€ë¦¬ìƒí’ˆ í…Œì´ë¸”ê³¼ ë©”ì´ì»¤ í…Œì´ë¸”ì„ ë‚´ë¶€ ê²°í•©í•˜ê¸°SELECT S.ìƒí’ˆëª…, M.ë©”ì´ì»¤ëª…FROM ìƒí’ˆ2 S INNER JOIN ë©”ì´ì»¤ MON S.ë©”ì´ì»¤ì½”ë“œ = M.ë©”ì´ì»¤ì½”ë“œ; ê²°ê³¼ +-----------+--------------+| ìƒí’ˆëª… | ë©”ì´ì»¤ëª… |+-----------+--------------+| ìƒí’ˆ1 | ë©”ì´ì»¤1 || ìƒí’ˆ2 | ë©”ì´ì»¤1 || ìƒí’ˆ3 | ë©”ì´ì»¤2 |+-----------+--------------+3 rows in set (0.01 sec) ìƒí’ˆ í…Œì´ë¸”ì„ ìê¸°ê²°í•© í•˜ê¸°SELECT S1.ìƒí’ˆëª…, S2.ìƒí’ˆëª…FROM ìƒí’ˆ S1 INNER JOIN ìƒí’ˆ S2ON S1.ìƒí’ˆì½”ë“œ = S2.ìƒí’ˆì½”ë“œ; ê²°ê³¼ +-----------+-----------+| ìƒí’ˆëª… | ìƒí’ˆëª… |+-----------+-----------+| ìƒí’ˆ1 | ìƒí’ˆ1 || ìƒí’ˆ2 | ìƒí’ˆ2 || ìƒí’ˆ3 | ìƒí’ˆ3 |+-----------+-----------+3 rows in set (0.00 sec) ë‚´ë¶€ê²°í•©ì—ì„œëŠ” ìƒí’ˆì½”ë“œê°€ 0009ì¸ ìƒí’ˆì´ ì œì™¸ëœë‹¤.SELECT ìƒí’ˆ3.ìƒí’ˆëª…, ì¬ê³ ìˆ˜.ì¬ê³ ìˆ˜FROM ìƒí’ˆ3 INNER JOIN ì¬ê³ ìˆ˜ON ìƒí’ˆ3.ìƒí’ˆì½”ë“œ = ì¬ê³ ìˆ˜.ìƒí’ˆì½”ë“œWHERE ìƒí’ˆ3.ìƒí’ˆë¶„ë¥˜=&#x27;ì‹ë£Œí’ˆ&#x27;; ê²°ê³¼ +-----------+-----------+| ìƒí’ˆëª… | ì¬ê³ ìˆ˜ |+-----------+-----------+| ìƒí’ˆ1 | 200 || ìƒí’ˆ2 | 500 |+-----------+-----------+2 rows in set (0.01 sec) ì™¸ë¶€ê²°í•©ìœ¼ë¡œ ìƒí’ˆì½”ë“œ 0009ì¸ ìƒí’ˆë„ ê²°ê³¼ì— í¬í•¨í•˜ê¸°SELECT ìƒí’ˆ3.ìƒí’ˆëª…, ì¬ê³ ìˆ˜.ì¬ê³ ìˆ˜FROM ìƒí’ˆ3 LEFT JOIN ì¬ê³ ìˆ˜ON ìƒí’ˆ3.ìƒí’ˆì½”ë“œ = ì¬ê³ ìˆ˜.ìƒí’ˆì½”ë“œWHERE ìƒí’ˆ3.ìƒí’ˆë¶„ë¥˜ = &#x27;ì‹ë£Œí’ˆ&#x27;; ê²°ê³¼ +--------------+-----------+| ìƒí’ˆëª… | ì¬ê³ ìˆ˜ |+--------------+-----------+| ìƒí’ˆ1 | 200 || ìƒí’ˆ2 | 500 || ì¶”ê°€ìƒí’ˆ | NULL |+--------------+-----------+3 rows in set (0.00 sec)","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"SQL","slug":"CS/DataBase/SQL","permalink":"https://ckck803.github.io/categories/CS/DataBase/SQL/"}],"tags":[]},{"title":"ë°ì´í„°ë² ì´ìŠ¤ ê°ì²´ ì‘ì„±ê³¼ ì‚­ì œ","slug":"database/sql/delete","date":"2021-03-06T01:01:46.000Z","updated":"2024-02-18T16:19:54.523Z","comments":true,"path":"2021/03/06/database/sql/delete/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/sql/delete/","excerpt":"6ì¥ ë°ì´í„°ë² ì´ìŠ¤ ê°ì²´ ì‘ì„±ê³¼ ì‚­ì œ26ì¥ í…Œì´ë¸” ì‘ì„±, ì‚­ì œ, ë³€ê²½CREATE TABLEë¡œ í…Œì´ë¸” ì‘ì„±í•˜ê¸°CREATE TABLE sample62( no INTEGER NOT NULL, a VARCHAR(30), b DATE);) ê²°ê³¼ mysql&gt; DESC sample62;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| no | int | NO | | NULL | || a | varchar(30) | YES | | NULL | || b | date | YES | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) ë°ì´í„° í–‰ ì‚­ì œ TRUNCATE TABLE [í…Œì´ë¸”ëª…] ALTER TABLEë¡œ í…Œì´ë¸”ì— ì—´ ì¶”ê°€í•˜ê¸°","text":"6ì¥ ë°ì´í„°ë² ì´ìŠ¤ ê°ì²´ ì‘ì„±ê³¼ ì‚­ì œ26ì¥ í…Œì´ë¸” ì‘ì„±, ì‚­ì œ, ë³€ê²½CREATE TABLEë¡œ í…Œì´ë¸” ì‘ì„±í•˜ê¸°CREATE TABLE sample62( no INTEGER NOT NULL, a VARCHAR(30), b DATE);) ê²°ê³¼ mysql&gt; DESC sample62;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| no | int | NO | | NULL | || a | varchar(30) | YES | | NULL | || b | date | YES | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) ë°ì´í„° í–‰ ì‚­ì œ TRUNCATE TABLE [í…Œì´ë¸”ëª…] ALTER TABLEë¡œ í…Œì´ë¸”ì— ì—´ ì¶”ê°€í•˜ê¸° ëª…ë ¹ì–´ ALTER TABLE sample62 ADD newcol INTEGER; ê²°ê³¼ DESC sample62;+--------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+--------+-------------+------+-----+---------+-------+| no | int | NO | | NULL | || a | varchar(30) | YES | | NULL | || b | date | YES | | NULL | || newcol | int | YES | | NULL | |+--------+-------------+------+-----+---------+-------+4 rows in set (0.00 sec) ALTER TABLE ADDë¡œ í…Œì´ë¸”ì— ì—´ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. ALTER TABLEë¡œ ì—´ ì†ì„± ë³€ê²½í•˜ê¸° ëª…ë ¹ì–´ ALTER TABLE sample62 MODIFY newcol VARCHAR(20); ê²°ê³¼ DESC sample62;+--------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+--------+-------------+------+-----+---------+-------+| no | int | NO | | NULL | || a | varchar(30) | YES | | NULL | || b | date | YES | | NULL | || newcol | varchar(20) | YES | | NULL | |+--------+-------------+------+-----+---------+-------+4 rows in set (0.00 sec) ALTER TABLEë¡œ ì—´ ì´ë¦„ ë³€ê²½í•˜ê¸° ëª…ë ¹ì–´ ALTER TABLE sample62 CHANGE newcol c VARCHAR(20); ê²°ê³¼ DESC sample62;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| no | int | NO | | NULL | || a | varchar(30) | YES | | NULL | || b | date | YES | | NULL | || c | varchar(20) | YES | | NULL | |+-------+-------------+------+-----+---------+-------+4 rows in set (0.00 sec) ALTER TABLEë¡œ ì—´ ì‚­ì œí•˜ê¸° ëª…ë ¹ì–´ ALTER TABLE smaple62 DROP c; ê²°ê³¼ DESC sample62;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| no | int | NO | | NULL | || a | varchar(30) | YES | | NULL | || b | date | YES | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) 27ì¥ ì œì•½í…Œì´ë¸” ì—´ì— ì œì•½ ì •ì˜í•˜ê¸° ëª…ë ¹ì–´ CREATE TABLE sample631( a INTEGER NOT NULL, b INTEGER NOT NULL UNIQUE, c VARCHAR(30)); ê²°ê³¼ DESC sample631;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| a | int | NO | | NULL | || b | int | NO | PRI | NULL | || c | varchar(30) | YES | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) í…Œì´ë¸”ì— â€˜í…Œì´ë¸” ì œì•½â€™ ì •ì˜í•˜ê¸° ëª…ë ¹ì–´ CREATE TABLE sample632( no INTEGER NOT NULL, sub_no INTEGER NOT NULL, name VARCHAR(30), PRIMARY KEY(no, sub_no)); ê²°ê³¼ DESC sample632;+--------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+--------+-------------+------+-----+---------+-------+| no | int | NO | PRI | NULL | || sub_no | int | NO | PRI | NULL | || name | varchar(30) | YES | | NULL | |+--------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) â€˜í…Œì´ë¸” ì œì•½â€™ì— ì´ë¦„ ë¶€ì´ê¸° ëª…ë ¹ì–´ CREATE TABLE sample632( no INTEGER NOT NULL, sub_no INTEGER NOT NULL, name VARCHAR(30), CONSTRAINT pkey_sample PRIMARY KEY(no, sub_no)); ê²°ê³¼ DESC sample632;+--------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+--------+-------------+------+-----+---------+-------+| no | int | NO | PRI | NULL | || sub_no | int | NO | PRI | NULL | || name | varchar(30) | YES | | NULL | |+--------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) ì—´ ì œì•½ ì¶”ê°€í•˜ê¸° ê¸°ì¡´ í…Œì´ë¸” DESC sample631;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| a | int | NO | | NULL | || b | int | NO | PRI | NULL | || c | varchar(30) | YES | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) ëª…ë ¹ì–´ ALTER TABLE sample631 MODIFY c VARCHAR(30) NOT NULL; DESC sample631;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| a | int | NO | | NULL | || b | int | NO | PRI | NULL | || c | varchar(30) | NO | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) í…Œì´ë¸” ì œì•½ ì¶”ê°€í•˜ê¸° ê¸°ì¡´ í…Œì´ë¸” DESC sample631;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| a | int | NO | | NULL | || b | int | NO | PRI | NULL | || c | varchar(30) | NO | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) ê¸°ë³¸í‚¤ ì œì•½ ì¶”ê°€í•˜ê¸° ALTER TABLE sample631 ADD CONSTRAINT pkey_sample631 PRIMARY KEY(a); ê²°ê³¼ DESC sample631;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| a | int | NO | PRI | NULL | || b | int | NO | UNI | NULL | || c | varchar(30) | NO | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) ì œì•½ ì‚­ì œì—´ ì œì•½ ì‚­ì œí•˜ê¸° ê¸°ì¡´ í…Œì´ë¸” +-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| a | int | NO | PRI | NULL | || b | int | NO | UNI | NULL | || c | varchar(30) | NO | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.01 sec) c ì—´ì˜ NOT NULL ì œì•½ ì—†ì• ê¸° ALTER TABLE sample631 MODIFY c VARCHAR(30); ê²°ê³¼ DESC sample631;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| a | int | NO | PRI | NULL | || b | int | NO | UNI | NULL | || c | varchar(30) | YES | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) í…Œì´ë¸” ì œì•½ ì‚­ì œí•˜ê¸° ê¸°ì¡´ í…Œì´ë¸” DESC sample631;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| a | int | NO | PRI | NULL | || b | int | NO | UNI | NULL | || c | varchar(30) | YES | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) pkey_sample631 ì œì•½ ì‚­ì œí•˜ê¸° ALTER TABLE sample631 DROP CONSTRAINT pkey_sample631; my_sqlì˜ ê²½ìš° ALTER TABLE sample631 DROP PRIMARY KEY; ê²°ê³¼ DESC sample631;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| a | int | NO | | NULL | || b | int | NO | PRI | NULL | || c | varchar(30) | YES | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) ê¸°ë³¸í‚¤sample634 í…Œì´ë¸” ì‘ì„±í•˜ê¸°CREATE TABLE sample634( p INTEGER NOT NULL, a VARCHAR(30), CONSTRAINT pkey_sample634 PRIMARY KEY(p)); sample634ì— í–‰ ì¶”ê°€í•˜ê¸°INSERT INTO sample634 VALUES(1, &#x27;ì²«ì§¸ì¤„&#x27;);INSERT INTO sample634 VALUES(2, &#x27;ë‘˜ì§¸ì¤„&#x27;);INSERT INTO sample634 VALUES(3, &#x27;ì…‹ì§¸ì¤„&#x27;); saple634ì— ì¤‘ë³µí•˜ëŠ” í–‰ ì¶”ê°€í•˜ê¸°INSERT INTO sample634 VALUES(2, &#x27;ë‘˜ì§¸ì¤„&#x27;); ê²°ê³¼ ERROR 1062 (23000): Duplicate entry &#x27;2&#x27; for key &#x27;sample634.PRIMARY&#x27; sample634ì„ ì¤‘ë³µëœ ê°’ìœ¼ë¡œ ê°±ì‹ í•˜ê¸°UPDATE sample634 SET p=2 WHERE p=3; ERROR 1062 (23000): Duplicate entry &#x27;2&#x27; for key &#x27;sample634.PRIMARY&#x27; 29ì¥ ì¸ë±ìŠ¤ ì‘ì„±ê³¼ ì‚­ì œ30ì¥ ë·° ì‘ì„±ê³¼ ì‚­ì œ","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"SQL","slug":"CS/DataBase/SQL","permalink":"https://ckck803.github.io/categories/CS/DataBase/SQL/"}],"tags":[]},{"title":"ì§‘ê³„ì™€ ì„œë¸Œì¿¼ë¦¬","slug":"database/sql/subquery","date":"2021-03-06T01:01:04.000Z","updated":"2024-02-18T16:19:54.524Z","comments":true,"path":"2021/03/06/database/sql/subquery/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/sql/subquery/","excerpt":"ì§‘ê³„ì™€ ì„œë¸Œì¿¼ë¦¬í–‰ ê°œìˆ˜ êµ¬í•˜ê¸° - COUNTCOUNTë¡œ í–‰ ê°œìˆ˜ êµ¬í•˜ê¸° í…Œì´ë¸” SELECT* FROM sample51;+------+------+----------+| no | name | quantity |+------+------+----------+| 1 | A | 1 || 2 | A | 2 || 3 | B | 10 || 4 | C | 3 || 5 | NULL | NULL |+------+------+----------+5 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT COUNT(*) FROM sample51; ê²°ê³¼ +----------+| COUNT(*) |+----------+| 5 |+----------+1 row in set (0.00 sec)","text":"ì§‘ê³„ì™€ ì„œë¸Œì¿¼ë¦¬í–‰ ê°œìˆ˜ êµ¬í•˜ê¸° - COUNTCOUNTë¡œ í–‰ ê°œìˆ˜ êµ¬í•˜ê¸° í…Œì´ë¸” SELECT* FROM sample51;+------+------+----------+| no | name | quantity |+------+------+----------+| 1 | A | 1 || 2 | A | 2 || 3 | B | 10 || 4 | C | 3 || 5 | NULL | NULL |+------+------+----------+5 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT COUNT(*) FROM sample51; ê²°ê³¼ +----------+| COUNT(*) |+----------+| 5 |+----------+1 row in set (0.00 sec) í–‰ ê°œìˆ˜ë¥¼ WHERE êµ¬ë¥¼ ì§€ì •í•˜ì—¬ êµ¬í•˜ê¸° í…Œì´ë¸” SELECT* FROM sample51 WHERE name=&#x27;A&#x27;;+------+------+----------+| no | name | quantity |+------+------+----------+| 1 | A | 1 || 2 | A | 2 |+------+------+----------+2 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT COUNT(*) FROM sample51 WHERE name = &#x27;A&#x27;; ê²°ê³¼ +----------+| COUNT(*) |+----------+| 2 |+----------+1 row in set (0.00 sec) ì§‘ê³„í•¨ìˆ˜ì™€ NULLê°’ ëª…ë ¹ì–´ SELECT COUNT(no), COUNT(name) FROM sample51; ê²°ê³¼ +-----------+-------------+| COUNT(no) | COUNT(name) |+-----------+-------------+| 5 | 4 |+-----------+-------------+1 row in set (0.00 sec) DISTINCTë¡œ ì¤‘ë³µ ì œê±° í…Œì´ë¸” SELECT* FROM sample51;+------+------+----------+| no | name | quantity |+------+------+----------+| 1 | A | 1 || 2 | A | 2 || 3 | B | 10 || 4 | C | 3 || 5 | NULL | NULL |+------+------+----------+5 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT DISTINCT name FROM sample51; +------+| name |+------+| A || B || C || NULL |+------+4 rows in set (0.00 sec) ì§‘ê³„í•¨ìˆ˜ì—ì„œ DISTINCT ëª…ë ¹ì–´ SELECT COUNT(ALL name), COUNT(DISTINCT name) FROM sample51; ê²°ê³¼ +-----------------+----------------------+| COUNT(ALL name) | COUNT(DISTINCT name) |+-----------------+----------------------+| 4 | 3 |+-----------------+----------------------+1 row in set (0.00 sec) COUNT ì´ì™¸ì˜ ì§‘ê³„í•¨ìˆ˜SUMìœ¼ë¡œ í•©ê³„ êµ¬í•˜ê¸° í…Œì´ë¸” SELECT* FROM sample51;+------+------+----------+| no | name | quantity |+------+------+----------+| 1 | A | 1 || 2 | A | 2 || 3 | B | 10 || 4 | C | 3 || 5 | NULL | NULL |+------+------+----------+5 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT SUM(quantity) FROM sample51; ê²°ê³¼ +---------------+| SUM(quantity) |+---------------+| 16 |+---------------+1 row in set (0.00 sec) AVGë¡œ í‰ê· ë‚´ê¸° ëª…ë ¹ì–´ SELECT AVG(quantity), SUM(quantity)/COUNT(quantity) FROM sample51; ê²°ê³¼ +---------------+-------------------------------+| AVG(quantity) | SUM(quantity)/COUNT(quantity) |+---------------+-------------------------------+| 4.0000 | 4.0000 |+---------------+-------------------------------+1 row in set (0.01 sec) MIN, MAXë¡œ ìµœì†Ÿê°’, ìµœëŒ“ê°’ êµ¬í•˜ê¸° ëª…ë ¹ì–´ SELECT MIN(quantity), MAX(quantity), MIN(name), MAX(name) FROM sample51; ê²°ê³¼ +---------------+---------------+-----------+-----------+| MIN(quantity) | MAX(quantity) | MIN(name) | MAX(name) |+---------------+---------------+-----------+-----------+| 1 | 10 | A | C |+---------------+---------------+-----------+-----------+1 row in set (0.00 sec) ê·¸ë£¹í™” - GROUP BYGROUP BYë¡œ ê·¸ë£¹í™” ëª…ë ¹ì–´ SELECT name FROM sample51 GROUP BY name; ê²°ê³¼ +------+| name |+------+| A || B || C || NULL |+------+4 rows in set (0.00 sec) name ì—´ì„ ê·¸ë£¹í™”í•´ ê³„ì‚°í•˜ê¸° ëª…ë ¹ì–´ SELECT name, COUNT(name), SUM(quantity) FROM sample51 GROUP BY name; ê²°ê³¼ +------+-------------+---------------+| name | COUNT(name) | SUM(quantity) |+------+-------------+---------------+| A | 2 | 3 || B | 1 | 10 || C | 1 | 3 || NULL | 0 | NULL |+------+-------------+---------------+4 rows in set (0.00 sec) HAVING êµ¬ë¡œ ì¡°ê±´ ì§€ì • í…Œì´ë¸” SELECT name, COUNT(name) FROM sample51 GROUP BY name;+------+-------------+| name | COUNT(name) |+------+-------------+| A | 2 || B | 1 || C | 1 || NULL | 0 |+------+-------------+4 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT name, COUNT(name) FROM sample51 GROUP BY name HAVING COUNT(name) = 1; ê²°ê³¼ +------+-------------+| name | COUNT(name) |+------+-------------+| B | 1 || C | 1 |+------+-------------+2 rows in set (0.00 sec) ë‚´ë¶€ ì²˜ë¦¬ ìˆœì„œWHERE êµ¬ -&gt; GROUP BY êµ¬ -&gt; HAVING êµ¬ -&gt; SELECT êµ¬ -&gt; ORDER BY êµ¬ ë³µìˆ˜ì—´ì˜ ê·¸ë£¹í™” í…Œì´ë¸” SELECT* FROM sample51;+------+------+----------+| no | name | quantity |+------+------+----------+| 1 | A | 1 || 2 | A | 2 || 3 | B | 10 || 4 | C | 3 || 5 | NULL | NULL |+------+------+----------+5 rows in set (0.00 sec) GROUP BYë¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•  ì  : GROUP BY ì— ì§€ì •í•œ ì—´ ì´ì™¸ì˜ ì—´ì€ ì§‘ê³„í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ì±„ SELECTêµ¬ì— ê¸°ìˆ í•´ì„œëŠ” ì•ˆëœë‹¤. ëª…ë ¹ì–´ SELECT no, name, quantity FROM sample51 GROUP BY name; ê²°ê³¼ ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#x27;sample.sample51.no&#x27; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by GROUP BYë¡œ ê·¸ë£¹í™” í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ë¡œ ë°˜í™˜ë˜ëŠ” ê²°ê³¼ëŠ” ê·¸ë£¹ë‹¹ í•˜ë‚˜ì˜ í–‰ì´ ëœë‹¤. í•˜ì§€ë§Œ, name ì—´ ê°’ì´ Aì¸ ê·¸ë£¹ì˜ quantity ì—´ ê°’ì€ 1ê³¼ 2ë¡œ ë‘ê°œì´ë¯€ë¡œ, ì–´ë–¤ ê°’ì„ ë°˜í™˜í• ì§€ ëª°ë¼ ì—ëŸ¬ê°€ ëœ¬ë‹¤. ëª…ë ¹ì–´ SELECT MIN(no), name, SUM(quantity) FROM sample51 GROUP BY name; ê²°ê³¼ +---------+------+---------------+| MIN(no) | name | SUM(quantity) |+---------+------+---------------+| 1 | A | 3 || 3 | B | 10 || 4 | C | 3 || 5 | NULL | NULL |+---------+------+---------------+4 rows in set (0.00 sec) ê²°ê³¼ ê°’ ì •ë ¬SELECT name, COUNT(name), SUM(quantity) FROM sample51 GROUP BY name ORDER BY SUM(quantity) DESC; +------+-------------+---------------+| name | COUNT(name) | SUM(quantity) |+------+-------------+---------------+| B | 1 | 10 || A | 2 | 3 || C | 1 | 3 || NULL | 0 | NULL |+------+-------------+---------------+4 rows in set (0.01 sec) ì„œë¸Œ ì¿¼ë¦¬DELETEì˜ WHERE êµ¬ì—ì„œ ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš©í•˜ê¸° í…Œì´ë¸” SELECT* FROM sample54;+------+------+| no | a |+------+------+| 1 | 100 || 2 | 900 || 3 | 20 || 4 | 80 |+------+------+4 rows in set (0.01 sec) ìµœì†Ÿê°’ì„ ê°€ì§€ëŠ” í–‰ ì‚­ì œí•˜ê¸° ëª…ë ¹ì–´ DELETE FROM sample54 WHERE a=(SELECT MIN(a) FROM sample54); ê²°ê³¼ ERROR 1093 (HY000): You can&#x27;t specify target table &#x27;sample54&#x27; for update in FROM clause ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ê°±ì‹ í•  ê²½ìš° ë™ì¼í•œ í…Œì´ë¸”ì„ ì„œë¸Œì¿¼ë¦¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë„ë¡ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì´ëŸ° ì—ëŸ¬ê°€ ëœ¬ë‹¤. ëª…ë ¹ì–´ DELETE FROM sample54 WHERE a=(SELECT a FROM(SELECT MIN(a) AS a FROM sample54) AS x); ê²°ê³¼ SELECT* FROM sample54;+------+------+| no | a |+------+------+| 1 | 100 || 2 | 900 || 4 | 80 |+------+------+3 rows in set (0.00 sec) ìŠ¤ì¹¼ë¼ ê°’í•˜ë‚˜ì˜ ê°’ì„ ë°˜í™˜í•˜ëŠ” íŒ¨í„´ ëª…ë ¹ì–´ SELECT MIN(a) FROM sample54; ê²°ê³¼ +--------+| MIN(a) |+--------+| 80 |+--------+1 row in set (0.00 sec) ë³µìˆ˜ì˜ í–‰ì´ ë°˜í™˜ë˜ì§€ë§Œ ì—´ì€ í•˜ë‚˜ì¸ íŒ¨í„´ ëª…ë ¹ì–´ SELECT no FROM sample54; ê²°ê³¼ +------+| no |+------+| 1 || 2 || 4 |+------+3 rows in set (0.00 sec) í•˜ë‚˜ì˜ í–‰ì´ ë°˜í™˜ë˜ì§€ë§Œ ì—´ì´ ë³µìˆ˜ì¸ íŒ¨í„´ ëª…ë ¹ì–´ SELECT MIN(a), MAX(no) FROM sample54; ê²°ê³¼ +--------+---------+| MIN(a) | MAX(no) |+--------+---------+| 80 | 4 |+--------+---------+1 row in set (0.00 sec) ë³µìˆ˜ì˜ í–‰, ë³µìˆ˜ì˜ ì—´ì´ ë°˜í™˜ë˜ëŠ” íŒ¨í„´ ëª…ë ¹ì–´ SELECT no, a FROM sample54; ê²°ê³¼ +------+------+| no | a |+------+------+| 1 | 100 || 2 | 900 || 4 | 80 |+------+------+3 rows in set (0.00 sec) SELECT ëª…ë ¹ì´ í•˜ë‚˜ì˜ ê°’ë§Œ ë°˜í™˜í•˜ëŠ” ê²ƒì„ ìŠ¤ì¹¼ë¼ ê°’ì„ ë°˜í™˜í•œë‹¤.ê³  í•œë‹¤. SELECT êµ¬ì—ì„œ ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš©í•˜ê¸° ëª…ë ¹ì–´ SELECT (SELECT COUNT(*) FROM sample51) AS sq1, (SELECT COUNT(*) FROM sample51) AS sq2; My SQLì—ì„œëŠ” FROM êµ¬ë¥¼ ìƒëµí•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ Oracleë“± ì „í†µì ì¸ ë°ì´í„° ë² ì´ìŠ¤ ì œí’ˆì—ì„œëŠ” FROMì„ ìƒëµí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê²°ê³¼ +------+------+| sq1 | sq2 |+------+------+| 5 | 5 |+------+------+1 row in set (0.00 sec) SET êµ¬ì—ì„œ ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš©í•˜ê¸° ëª…ë ¹ì–´ UPDATE sample54 SET a = (SELECT a FROM (SELECT MAX(a) AS a FROM sample54)as x); ê²°ê³¼ SELECT* FROM sample54;+------+------+| no | a |+------+------+| 1 | 900 || 2 | 900 || 4 | 900 |+------+------+3 rows in set (0.00 sec) FROM êµ¬ì—ì„œ ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš©í•˜ê¸° ëª…ë ¹ì–´ SELECT* FROM (SELECT* FROM sample54) sq; ê²°ê³¼ +------+------+| no | a |+------+------+| 1 | 900 || 2 | 900 || 4 | 900 |+------+------+3 rows in set (0.00 sec) INSERT ëª…ë ¹ê³¼ ì„œë¸Œì¿¼ë¦¬ ëª…ë ¹ì–´ INSERT INTO sample541 VALUES( (SELECT COUNT(*) FROM sample51), (SELECT COUNT(*) FROM sample54)); ê²°ê³¼ SELECT* FROM sample541;+------+------+| a | b |+------+------+| 5 | 3 |+------+------+1 row in set (0.00 sec) INSERT SELECT ëª…ë ¹ì–´ INSERT INTO sample541 SELECT 1,2; ê²°ê³¼ SELECT* FROM sample541;+------+------+| a | b |+------+------+| 5 | 3 || 1 | 2 |+------+------+2 rows in set (0.00 sec) ìƒê´€ ì„œë¸Œì¿¼ë¦¬EXISTS í…Œì´ë¸” SELECT* FROM sample551;+------+------+| no | a |+------+------+| 1 | NULL || 2 | NULL || 3 | NULL || 4 | NULL || 5 | NULL |+------+------+ í…Œì´ë¸” SELECT* FROM sample552;+------+| no2 |+------+| 3 || 5 |+------+2 rows in set (0.00 sec) sample 552 í…Œì´ë¸”ì— ìˆëŠ”ì§€ë¥¼ ì¡°ì‚¬í•œ ê²°ê³¼ ê°’ì„ ë„£ê³  ì‹¶ë‹¤. ëª…ë ¹ì–´ UPDATE sample551 SET a = &#x27;ìˆìŒ&#x27; WHERE EXISTS (SELECT* FROM sample552 WHERE no2 = no); SELECT* FROM sample551;+------+--------+| no | a |+------+--------+| 1 | NULL || 2 | NULL || 3 | ìˆìŒ || 4 | NULL || 5 | ìˆìŒ |+------+--------+5 rows in set (0.00 sec) NOT EXISTS ëª…ë ¹ì–´ UPDATE sample551 SET a = &#x27;ì—†ìŒ&#x27; WHERE NOT EXISTS (SELECT* FROM sample552 WHERE no2 = no); ê²°ê³¼ SELECT* FROM sample551;+------+--------+| no | a |+------+--------+| 1 | ì—†ìŒ || 2 | ì—†ìŒ || 3 | ìˆìŒ || 4 | ì—†ìŒ || 5 | ìˆìŒ |+------+--------+ í…Œì´ë¸” ëª… ë¶™ì´ê¸°ì–‘ìª½ í…Œì´ë¸”ì— ë™ì¼í•œ ì´ë¦„ì˜ ì—´ì´ ìˆì„ ê²½ìš° ìƒê´€ ì„œë¸Œ ì¿¼ë¦¬ê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ í…Œì´ë¸” ëª…ì„ ë¶™ì¼ í•„ìš”ê°€ ìˆë‹¤. UPDATE sample551 SET a = &#x27;ìˆìŒ&#x27; WHERE EXISTS (SELECT* FROM sample552 WHERE sample552.no2 = sample551.no); INì§‘í•© ì•ˆì˜ ê°’ì´ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ ì¡°ì‚¬í•  ìˆ˜ ìˆë‹¤. ëª…ë ¹ì–´ SELECT* FROM sample551 WHERE no IN(3, 5); ê²°ê³¼ +------+--------+| no | a |+------+--------+| 3 | ìˆìŒ || 5 | ìˆìŒ |+------+--------+ INì˜ ì˜¤ë¥¸ìª½ì„ ì„œë¸Œì¿¼ë¦¬ë¡œ ì§€ì •í•˜ê¸° ëª…ë ¹ì–´ SELECT* FROM sample551 WHERE no IN(SELECT no2 FROM sample552); ê²°ê³¼ +------+--------+| no | a |+------+--------+| 3 | ìˆìŒ || 5 | ìˆìŒ |+------+--------+2 rows in set (0.00 sec)","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"SQL","slug":"CS/DataBase/SQL","permalink":"https://ckck803.github.io/categories/CS/DataBase/SQL/"}],"tags":[]},{"title":"ë°ì´í„° ì¶”ê°€, ì‚­ì œ, ê°±ì‹ ","slug":"database/sql/dml","date":"2021-03-06T01:00:09.000Z","updated":"2024-02-18T16:19:54.523Z","comments":true,"path":"2021/03/06/database/sql/dml/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/sql/dml/","excerpt":"ë°ì´í„° ì¶”ê°€, ì‚­ì œ, ê°±ì‹ í–‰ ì¶”ê°€í•˜ê¸° - INSERT ëª…ë ¹ì–´ SELECT * FROM sample41; ê²°ê³¼ Empty set (0.00 sec) í˜„ì¬ëŠ” ë¹„ì–´ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. sample41 ì—´ êµ¬ì„± í™•ì¸í•˜ê¸° ëª…ë ¹ì–´","text":"ë°ì´í„° ì¶”ê°€, ì‚­ì œ, ê°±ì‹ í–‰ ì¶”ê°€í•˜ê¸° - INSERT ëª…ë ¹ì–´ SELECT * FROM sample41; ê²°ê³¼ Empty set (0.00 sec) í˜„ì¬ëŠ” ë¹„ì–´ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. sample41 ì—´ êµ¬ì„± í™•ì¸í•˜ê¸° ëª…ë ¹ì–´ DESC sample41; ê²°ê³¼ +-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| no | int | NO | | NULL | || a | varchar(30) | YES | | NULL | || b | date | YES | | NULL | |+-------+-------------+------+-----+---------+-------+3 rows in set (0.00 sec) no ì—´ì€ int(11)ì´ë¯€ë¡œ ìˆ˜ì¹˜í˜• ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤. a ì—´ì€ varchar(30)ì´ë¯€ë¡œ ìµœëŒ€ ê¸¸ì´ê°€ 30ì¸ ë¬¸ìì—´ì„ ì €ì¥í•  ìˆ˜ ìˆë‹¤. b ì—´ì€ ë‚ ì§œ ì‹œê°„í˜• ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤. í–‰ ì¶”ê°€ í•˜ê¸° ëª…ë ¹ì–´ INSERT INTO sample41 VALUES(1, &#x27;ABC&#x27;, &#x27;2014-01-25&#x27;); ê²°ê³¼ Query OK, 1 row affected (0.00 sec) í™•ì¸í•˜ê¸° ëª…ë ¹ì–´ SELECT* FROM sample41; ê²°ê³¼ +----+------+------------+| no | a | b |+----+------+------------+| 1 | ABC | 2014-01-25 |+----+------+------------+1 row in set (0.00 sec) ê°’ì„ ì €ì¥í•  ì—´ ì§€ì •í•˜ê¸° ëª…ë ¹ì–´ INSERT INTO sample41(a, no) VALUES(&#x27;XYZ&#x27;, 2);Query OK, 1 row affected (0.00 sec) ê²°ê³¼ SELECT* FROM sample41;+----+------+------------+| no | a | b |+----+------+------------+| 1 | ABC | 2014-01-25 || 2 | XYZ | NULL |+----+------+------------+2 rows in set (0.00 sec) NOT NULL ì œì•½ ëª…ë ¹ì–´ INSERT INTO sample41(no, a, b) VALUES(NULL, NULL, NULL);ERROR 1048 (23000): Column &#x27;no&#x27; cannot be null í–‰ì— ê°’ì´ ì—†ëŠ” ìƒíƒœ(NULL)ë¡œ ë‘ê³  ì‹¶ì„ ê²½ìš° VALUESêµ¬ì—ì„œ NULLë¡œ ê°’ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. no ì—´ì— ëŒ€í•´ì„œëŠ” NULLê°’ì„ í—ˆìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìœ„ ëª…ë ¹ì–´ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. ëª…ë ¹ì–´ INSERT INTO sample41(no, a, b) VALUES(3, NULL, NULL);Query OK, 1 row affected (0.01 sec) ê²°ê³¼ SELECT* FROM sample41;+----+------+------------+| no | a | b |+----+------+------------+| 1 | ABC | 2014-01-25 || 2 | XYZ | NULL || 3 | NULL | NULL |+----+------+------------+3 rows in set (0.00 sec) DEFAULTì— ëŒ€í•´ ì•Œì•„ë³´ê¸° ëª…ë ¹ì–´ DESC sample411; ê²°ê³¼ +-------+------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+------+------+-----+---------+-------+| no | int | NO | | NULL | || d | int | YES | | 0 | |+-------+------+------+-----+---------+-------+2 rows in set (0.01 sec) sample411í…Œì´ë¸” d ì—´ì— ëŒ€í•´ì„œëŠ” ë””í´íŠ¸ ê°’ìœ¼ë¡œ 0ì´ ì„¤ì •ë˜ì–´ ìˆë‹¤. ê°’ì„ ìƒëµí•˜ì§€ ì•Ÿê³  í–‰ ì¶”ê°€í•˜ê¸° ëª…ë ¹ì–´ INSERT INTO sample411(no, d) VALUES(1,1);Query OK, 1 row affected (0.00 sec) ê²°ê³¼ SELECT * FROM sample411;+----+------+| no | d |+----+------+| 1 | 1 |+----+------+ DEFAULTë¡œ ê°’ì„ ì§€ì •í•´ í–‰ ì¶”ê°€í•˜ê¸° ëª…ë ¹ì–´ INSERT INTO sample411(no, d) VALUES(2, DEFAULT);Query OK, 1 row affected (0.00 sec) ê²°ê³¼ SELECT * FROM sample411;+----+------+| no | d |+----+------+| 1 | 1 || 2 | 0 |+----+------+ ì•”ë¬µì ìœ¼ë¡œ ë””í´íŠ¸ê°’ì„ ê°€ì§€ëŠ” í–‰ ì¶”ê°€í•˜ê¸° ëª…ë ¹ì–´ INSERT INTO sample411(no) VALUES(3);Query OK, 1 row affected (0.00 sec) ê²°ê³¼ SELECT * FROM sample411;+----+------+| no | d |+----+------+| 1 | 1 || 2 | 0 || 3 | 0 |+----+------+3 rows in set (0.00 sec) ì—´ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ë””í´íŠ¸ê°’ìœ¼ë¡œ í–‰ì´ ì¶”ê°€ëœë‹¤. ì‚­ì œí•˜ê¸° - DELETE í…Œì´ë¸” SELECT* FROM sample41;+----+------+------------+| no | a | b |+----+------+------------+| 1 | ABC | 2014-01-25 || 2 | XYZ | NULL || 3 | NULL | NULL |+----+------+------------+3 rows in set (0.00 sec) DELETE FROM sample41;ë¡œ DELETE ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ sample41 í…Œì´ë¸”ì˜ ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œëœë‹¤. í–‰ ì‚­ì œí•˜ê¸° ëª…ë ¹ì–´ DELETE FROM sample41 WHERE no=3; ê²°ê³¼ +----+------+------------+| no | a | b |+----+------+------------+| 1 | ABC | 2014-01-25 || 2 | XYZ | NULL |+----+------+------------+2 rows in set (0.00 sec) DELETE ëª…ë ¹ì€ WHERE ì¡°ê±´ì— ì¼ì¹˜í•˜ëŠ” ëª¨ë“  í–‰ì„ ì‚­ì œí•œë‹¤. ë°ì´í„° ê°±ì‹ í•˜ê¸° - UPDATE í…Œì´ë¸” SELECT* FROM sample41;+----+------+------------+| no | a | b |+----+------+------------+| 1 | ABC | 2014-01-25 || 2 | XYZ | NULL |+----+------+------------+2 rows in set (0.00 sec) DELETEì™€ ë‹¬ë¦¬UPDATEëŠ” ì…€ ë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ê°±ì‹ í•  ìˆ˜ ìˆë‹¤.UPDATE ëª…ë ¹ì—ì„œëŠ” setêµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°±ì‹ í•  ì—´ê³¼ ê°’ì„ ì§€ì •í•œë‹¤. SET ì—´ëª… = ê°’ ì´ë•Œ =ëŠ” ë¹„êµì—°ì‚°ìê°€ ì•„ë‹Œ, ê°’ì„ ëŒ€ì…í•˜ëŠ” ëŒ€ì… ì—°ì‚°ìì´ë‹¤. ëª…ë ¹ì–´ UPDATE sample41 SET b = &#x27;2014-09-08&#x27; WHERE no=2;Query OK, 1 row affected (0.00 sec)Rows matched: 1 Changed: 1 Warnings: 0 ê²°ê³¼ SELECT* FROM sample41;+----+------+------------+| no | a | b |+----+------+------------+| 1 | ABC | 2014-01-25 || 2 | XYZ | 2014-09-08 |+----+------+------------+2 rows in set (0.00 sec) UPDATE ëª…ë ¹ì—ì„œëŠ” WHERE ì¡°ê±´ì— ì¼ì¹˜í•˜ëŠ” â€˜ëª¨ë“  í–‰â€™ì´ ê°±ì‹ ëœë‹¤. UPDATE ëª…ë ¹ìœ¼ë¡œ ì¦ê°€ ì—°ì‚°í•˜ê¸° ëª…ë ¹ì–´ UPDATE sample41 SET no = no+1;Query OK, 2 rows affected (0.00 sec)Rows matched: 2 Changed: 2 Warnings: 0 ê²°ê³¼ SELECT* FROM sample41;+----+------+------------+| no | a | b |+----+------+------------+| 2 | ABC | 2014-01-25 || 3 | XYZ | 2014-09-08 |+----+------+------------+2 rows in set (0.00 sec) ëª¨ë“  í–‰ì˜ noê°’ì— 1ì”© ë”í•´ì§„ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ë³µìˆ˜ì—´ ê°±ì‹  ëª…ë ¹ì–´ UPDATE sample41 SET a=&#x27;xxx&#x27;, b=&#x27;2014-01-01&#x27; WHERE no=2;Query OK, 1 row affected (0.00 sec)Rows matched: 1 Changed: 1 Warnings: 0 ì½¤ë§ˆ,ë¡œ êµ¬ë¶„í•˜ì—¬ ê°±ì‹ í•  ì—´ì„ ì—¬ëŸ¬ ê°œ ì§€ì •í•  ìˆ˜ ìˆë‹¤. ê²°ê³¼ SELECT* FROM sample41;+----+------+------------+| no | a | b |+----+------+------------+| 2 | xxx | 2014-01-01 || 3 | XYZ | 2014-09-08 |+----+------+------------+2 rows in set (0.00 sec) NULLë¡œ ê°±ì‹ í•˜ê¸° ëª…ë ¹ì–´ UPDATE sample41 SET a=NULL;Query OK, 2 rows affected (0.00 sec)Rows matched: 2 Changed: 2 Warnings: 0 ê²°ê³¼ SELECT* FROM sample41;+----+------+------------+| no | a | b |+----+------+------------+| 2 | NULL | 2014-01-01 || 3 | NULL | 2014-09-08 |+----+------+------------+2 rows in set (0.00 sec) NOT NULL ì œì•½ì´ ì„¤ì •ë˜ì–´ ìˆëŠ” ì—´ì€ NULLì´ í—ˆìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. ë¬¼ë¦¬ ì‚­ì œì™€ ë…¼ë¦¬ ì‚­ì œ ë¬¼ë¦¬ì‚­ì œ : SQLì˜ DELETE ëª…ë ¹ì„ ì‚¬ìš©í•´ ì§ì ‘ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ë°©ë²• ë…¼ë¦¬ì‚­ì œ : ì‚­ì œ í”Œë˜ê·¸ì™€ ê°™ì€ ì—´ì„ ë¯¸ë¦¬ ì¤€ë¹„í•´ ì„œ ì‚­ì œ í”Œë ˆê·¸ì˜ ê°’ì„ ìœ íš¨í•˜ê²Œ ê°±ì‹ í•´ë‘ëŠ” ì‚­ì œ ë°©ë²•(ì‹¤ì œ í…Œì´ë¸”ì•ˆì— ë°ì´í„°ëŠ” ë‚¨ì•„ìˆë‹¤.)","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"SQL","slug":"CS/DataBase/SQL","permalink":"https://ckck803.github.io/categories/CS/DataBase/SQL/"}],"tags":[]},{"title":"ì •ë ¬ê³¼ ì—°ì‚°","slug":"database/sql/sort-and-operation","date":"2021-03-06T00:58:46.000Z","updated":"2024-02-18T16:19:54.524Z","comments":true,"path":"2021/03/06/database/sql/sort-and-operation/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/sql/sort-and-operation/","excerpt":"ì •ë ¬ê³¼ ì—°ì‚°ì •ë ¬í•˜ê¸° - ORDER BY ê¸°ì¡´ í…Œì´ë¸” mysql&gt; SELECT * FROM sample31;+------+------+---------------------------+| name | age | address |+------+------+---------------------------+| Aì”¨ | 36 | ëŒ€êµ¬ê´‘ì—­ì‹œ ì¤‘êµ¬ || Bì”¨ | 18 | ë¶€ì‚°ê´‘ì—­ì‹œ ì—°ì œêµ¬ || Cì”¨ | 25 | ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ |+------+------+---------------------------+3 rows in set (0.00 sec) ageë¥¼ ê¸°ì¤€ìœ¼ë¡œ í…Œì´ë¸” ì •ë ¬í•˜ê¸° ëª…ë ¹ì–´ SELECT* FROM sample31 ORDER BY age; ë‚˜ì´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í…Œì´ë¸”sample31ì„ ì •ë ¬í•˜ì˜€ë‹¤. ê²°ê³¼","text":"ì •ë ¬ê³¼ ì—°ì‚°ì •ë ¬í•˜ê¸° - ORDER BY ê¸°ì¡´ í…Œì´ë¸” mysql&gt; SELECT * FROM sample31;+------+------+---------------------------+| name | age | address |+------+------+---------------------------+| Aì”¨ | 36 | ëŒ€êµ¬ê´‘ì—­ì‹œ ì¤‘êµ¬ || Bì”¨ | 18 | ë¶€ì‚°ê´‘ì—­ì‹œ ì—°ì œêµ¬ || Cì”¨ | 25 | ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ |+------+------+---------------------------+3 rows in set (0.00 sec) ageë¥¼ ê¸°ì¤€ìœ¼ë¡œ í…Œì´ë¸” ì •ë ¬í•˜ê¸° ëª…ë ¹ì–´ SELECT* FROM sample31 ORDER BY age; ë‚˜ì´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í…Œì´ë¸”sample31ì„ ì •ë ¬í•˜ì˜€ë‹¤. ê²°ê³¼ +------+------+---------------------------+| name | age | address |+------+------+---------------------------+| Bì”¨ | 18 | ë¶€ì‚°ê´‘ì—­ì‹œ ì—°ì œêµ¬ || Cì”¨ | 25 | ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ || Aì”¨ | 36 | ëŒ€êµ¬ê´‘ì—­ì‹œ ì¤‘êµ¬ |+------+------+---------------------------+3 rows in set (0.01 sec) ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. addressë¥¼ ê¸°ì¤€ìœ¼ë¡œ í…Œì´ë¸” ì •ë¦¬í•˜ê¸° ëª…ë ¹ì–´ SELECT* FROM sample31 ORDER BY address; addressë¥¼ ê¸°ì¤€ìœ¼ë¡œ í…Œì´ë¸”ì„ ì •ë ¬ ì‹œì¼°ë‹¤. ê²°ê³¼ +------+------+---------------------------+| name | age | address |+------+------+---------------------------+| Aì”¨ | 36 | ëŒ€êµ¬ê´‘ì—­ì‹œ ì¤‘êµ¬ || Bì”¨ | 18 | ë¶€ì‚°ê´‘ì—­ì‹œ ì—°ì œêµ¬ || Cì”¨ | 25 | ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ |+------+------+---------------------------+ ì‚¬ì „ìˆœìœ¼ë¡œ í…Œì´ë¸”ì´ ì •ë ¬ë˜ì—ˆë‹¤. ë‚´ë¦¼ ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê¸° - DESC ëª…ë ¹ì–´ SELECT* FROM sample31 ORDER BY age DESC; DESCë¥¼ ë¶™ì„ìœ¼ë¡œì¨ í…Œì´ë¸”ì„ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•œë‹¤. ê²°ê³¼ +------+------+---------------------------+| name | age | address |+------+------+---------------------------+| Aì”¨ | 36 | ëŒ€êµ¬ê´‘ì—­ì‹œ ì¤‘êµ¬ || Cì”¨ | 25 | ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ || Bì”¨ | 18 | ë¶€ì‚°ê´‘ì—­ì‹œ ì—°ì œêµ¬ |+------+------+---------------------------+3 rows in set (0.00 sec) ì˜¤ë¦„ ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê¸° - AES ëª…ë ¹ì–´ SELECT* FROM sample31 ORDER BY age ASC; ASCë¥¼ ë¶™ì„ìœ¼ë¡œì¨ í…Œì´ë¸”ì„ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•œë‹¤. ASCëŠ” ìƒëµ ê°€ëŠ¥ +------+------+---------------------------+| name | age | address |+------+------+---------------------------+| Bì”¨ | 18 | ë¶€ì‚°ê´‘ì—­ì‹œ ì—°ì œêµ¬ || Cì”¨ | 25 | ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ || Aì”¨ | 36 | ëŒ€êµ¬ê´‘ì—­ì‹œ ì¤‘êµ¬ |+------+------+---------------------------+3 rows in set (0.00 sec) ë³µìˆ˜ì˜ ì—´ì„ ì§€ì •í•´ ì •ë ¬í•˜ê¸°SELECT* FROM sample32 ORDER BY a; ê²°ê³¼+------+------+| a | b |+------+------+| 1 | 1 || 1 | 3 || 1 | 2 || 2 | 1 || 2 | 2 |+------+------+5 rows in set (0.00 sec) SELECT* FROM sample32 ORDER BY b,a; ê²°ê³¼+------+------+| a | b |+------+------+| 1 | 1 || 2 | 1 || 1 | 2 || 2 | 2 || 1 | 3 |+------+------+5 rows in set (0.00 sec) ì •ë ¬ë°©ë²• ì§€ì •í•˜ê¸°SELECT* FROM sample32 ORDER BY a ASC, b DESC; ê²°ê³¼+------+------+| a | b |+------+------+| 1 | 3 || 1 | 2 || 1 | 1 || 2 | 2 || 2 | 1 |+------+------+5 rows in set (0.00 sec) ê²°ê³¼ í–‰ ì œí•œí•˜ê¸° - LIMIT í…Œì´ë¸” +------+| no |+------+| 1 || 2 || 3 || 4 || 5 || 6 || 7 |+------+7 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT* FROM sample33 LIMIT 3; ê²°ê³¼ +------+| no |+------+| 1 || 2 || 3 |+------+3 rows in set (0.00 sec) ì •ë ¬ í›„ LIMITë¡œ í–‰ìˆ˜ ì œí•œí•˜ê¸° ëª…ë ¹ì–´ SELECT* FROM sample33 ORDER BY no DESC LIMIT 3; ê²°ê³¼ +------+| no |+------+| 7 || 6 || 5 |+------+3 rows in set (0.00 sec) LIMITë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œì˜ í–‰ ì œí•œ SQL Server SELECT TOP 3 * FROM sample33; ORACLE SELECT * FROM sample33 WHERE ROWNUM&lt;=3; ì˜¤í”„ì…‹ ì§€ì • - OFFSET ëª…ë ¹ì–´ SELECT* FROM sample33 LIMIT 3 OFFSET 0; ìˆ˜ì¹˜ ì—°ì‚° ê¸°ë³¸ í…Œì´ë¸” mysql&gt; SELECT* FROM sample34;+------+-------+----------+| no | price | quantity |+------+-------+----------+| 1 | 100 | 10 || 2 | 230 | 24 || 3 | 1980 | 1 |+------+-------+----------+3 rows in set (0.01 sec) ëª…ë ¹ì–´ SELECT*, price*quantity FROM sample34; ê²°ê³¼ +------+-------+----------+----------------+| no | price | quantity | price*quantity |+------+-------+----------+----------------+| 1 | 100 | 10 | 1000 || 2 | 230 | 24 | 5520 || 3 | 1980 | 1 | 1980 |+------+-------+----------+----------------+3 rows in set (0.00 sec) ì—´ì˜ ë³„ëª… - AS ëª…ë ¹ì–´ SELECT*, price*quantity AS amount FROM sample34; ê²°ê³¼ +------+-------+----------+--------+| no | price | quantity | amount |+------+-------+----------+--------+| 1 | 100 | 10 | 1000 || 2 | 230 | 24 | 5520 || 3 | 1980 | 1 | 1980 |+------+-------+----------+--------+3 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT*, price*quantity &quot;ê¸ˆì•¡&quot; FROM sample34; ê²°ê³¼ +------+-------+----------+--------+| no | price | quantity | ê¸ˆì•¡ |+------+-------+----------+--------+| 1 | 100 | 10 | 1000 || 2 | 230 | 24 | 5520 || 3 | 1980 | 1 | 1980 |+------+-------+----------+--------+3 rows in set (0.00 sec) WHERE êµ¬ì—ì„œ ê³„ì‚°, ê²€ìƒ‰í•˜ê¸° ëª…ë ¹ì–´ SELECT*, price*quantity AS amount FROM sample34 WHERE price*quantity &gt;= 2000; ê²°ê³¼ +------+-------+----------+--------+| no | price | quantity | amount |+------+-------+----------+--------+| 2 | 230 | 24 | 5520 |+------+-------+----------+--------+1 row in set (0.00 sec) ëª…ë ¹ì–´ SELECT*, price*quantity AS amount FROM sample34 WHERE amount &gt;= 2000; ê²°ê³¼ ERROR 1054 (42S22): Unknown column &#x27;amount&#x27; in &#x27;where clause&#x27; ëª…ë ¹ì–´ SELECT*, price*quantity AS amount FROM sample34 ORDER BY price*quantity DESC; ê²°ê³¼ +------+-------+----------+--------+| no | price | quantity | amount |+------+-------+----------+--------+| 2 | 230 | 24 | 5520 || 3 | 1980 | 1 | 1980 || 1 | 100 | 10 | 1000 |+------+-------+----------+--------+3 rows in set (0.01 sec) ëª…ë ¹ì–´ SELECT*, price*quantity AS amount FROM sample34 ORDER BY amount DESC; ê²°ê³¼ +------+-------+----------+--------+| no | price | quantity | amount |+------+-------+----------+--------+| 2 | 230 | 24 | 5520 || 3 | 1980 | 1 | 1980 || 1 | 100 | 10 | 1000 |+------+-------+----------+--------+3 rows in set (0.01 sec) ROUND í•¨ìˆ˜ - ë°˜ì˜¬ë¦¼ ê¸°ì¡´ í…Œì´ë¸” SELECT* FROM sample341;+---------+| amount |+---------+| 5961.60 || 2138.40 || 1080.00 |+---------+3 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT amount, ROUND(amount) FROM sample341; ê²°ê³¼ +---------+---------------+| amount | ROUND(amount) |+---------+---------------+| 5961.60 | 5962 || 2138.40 | 2138 || 1080.00 | 1080 |+---------+---------------+3 rows in set (0.00 sec) ì†Œìˆ˜ì  ë‘˜ì§¸ ìë¦¬ì—ì„œ ë°˜ì˜¬ë¦¼í•˜ê¸° ëª…ë ¹ì–´ SELECT amount, ROUND(amount, 1) FROM sample341; ê²°ê³¼ +---------+------------------+| amount | ROUND(amount, 1) |+---------+------------------+| 5961.60 | 5961.6 || 2138.40 | 2138.4 || 1080.00 | 1080.0 |+---------+------------------+3 rows in set (0.00 sec) 10 ë‹¨ìœ„ë¥¼ ë°˜ì˜¬ë¦¼ í•˜ê¸° ëª…ë ¹ì–´ SELECT amount, ROUND(amount, -2) FROM sample341; ê²°ê³¼ +---------+-------------------+| amount | ROUND(amount, -2) |+---------+-------------------+| 5961.60 | 6000 || 2138.40 | 2100 || 1080.00 | 1100 |+---------+-------------------+3 rows in set (0.00 sec) ë¬¸ìì—´ ì—°ì‚°ë¬¸ìì—´ ê²°í•© - CONCAT í…Œì´ë¸” select * from sample35;+------+-------+----------+------+| no | price | quantity | unit |+------+-------+----------+------+| 1 | 100 | 10 | ê°œ || 2 | 230 | 24 | í†µ || 3 | 1980 | 1 | ì¥ |+------+-------+----------+------+3 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT CONCAT(quantity, unit) FROM sample35; ê²°ê³¼ +------------------------+| CONCAT(quantity, unit) |+------------------------+| 10ê°œ || 24í†µ || 1ì¥ |+------------------------+3 rows in set (0.04 sec) CASE ë¬¸ìœ¼ë¡œ ë°ì´í„° ë³€í™˜í•˜ê¸°CASEë¡œ NULL ê°’ì„ 0ìœ¼ë¡œ ë³€í™˜í•˜ê¸°SELECT a, CASE WHEN a IS NULL THEN 0 ELSE a END &quot;a(null=0)&quot; FROM sample37; +------+-----------+| a | a(null=0) |+------+-----------+| 1 | 1 || 2 | 2 || NULL | 0 |+------+-----------+3 rows in set (0.00 sec) COALESCE í•¨ìˆ˜ë¥¼ ì´ìš©í•œ NULLê°’ ë³€í™˜ í…Œì´ë¸” SELECT * FROM sample37;+------+| a |+------+| 1 || 2 || NULL |+------+3 rows in set (0.00 sec) ëª…ë ¹ì–´ SELECT a, COALESCE(a,0) FROM sample37; ê²°ê³¼ +------+---------------+| a | COALESCE(a,0) |+------+---------------+| 1 | 1 || 2 | 2 || NULL | 0 |+------+---------------+3 rows in set (0.00 sec) CASEë¡œ NULL ê°’ì„ 0ìœ¼ë¡œ ë°˜í™˜í•˜ê¸° ëª…ë ¹ì–´ SELECT a AS &quot;ì½”ë“œ&quot;, CASE WHEN a=1 THEN &#x27;ë‚¨ì&#x27; WHEN a=2 THEN &#x27;ì—¬ì&#x27; ELSE &#x27;ë¯¸ì§€ì •&#x27; END AS &quot;ì„±ë³„&quot; FROM sample37; ê²°ê³¼ +--------+-----------+| ì½”ë“œ | ì„±ë³„ |+--------+-----------+| 1 | ë‚¨ì || 2 | ì—¬ì || NULL | ë¯¸ì§€ì • |+--------+-----------+3 rows in set (0.00 sec)","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"SQL","slug":"CS/DataBase/SQL","permalink":"https://ckck803.github.io/categories/CS/DataBase/SQL/"}],"tags":[]},{"title":"í…Œì´ë¸”ì—ì„œ ë°ì´í„° ê²€ìƒ‰","slug":"database/sql/search","date":"2021-03-06T00:56:37.000Z","updated":"2024-02-18T16:19:54.524Z","comments":true,"path":"2021/03/06/database/sql/search/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/sql/search/","excerpt":"í…Œì´ë¸”ì—ì„œ ë°ì´í„° ê²€ìƒ‰use sample SELECT ëª…ë ¹ì–´SELECT * FROM sample21; SELECTëŠ” DMLì— ì†í•˜ëŠ” ë©¸ë ¹ìœ¼ë¡œ SQLì—ì„œ ìì£¼ ì‚¬ìš©ëœë‹¤.SELECTëª…ë ¹ìœ¼ë¡œ ë°ì´í„° ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆë‹¤.*ëŠ” ëª¨ë“  ì—´ì„ ì˜ë¯¸í•˜ëŠ” ë©”íƒ€ë¬¸ìì´ë‹¤.FROMì€ ì²˜ë¦¬ ëŒ€ìƒ í…Œì´ë¸”ì„ ì§€ì •í•˜ëŠ” í‚¤ì›Œë“œ ê²°ê³¼+------+-----------+------------+---------------------------+| no | name | birthday | address |+------+-----------+------------+---------------------------+| 1 | ë°•ì¤€ìš© | 1976-10-18 | ëŒ€êµ¬ê´‘ì—­ì‹œ ìˆ˜ì„±êµ¬ || 2 | ê¹€ì¬ì§„ | NULL | ëŒ€êµ¬ê´‘ì—­ì‹œ ë™êµ¬ || 3 | í™ê¸¸ë™ | NULL | ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬ |+------+-----------+------------+---------------------------+3 rows in set (0.00 sec) NULLì€ ë°ì´í„° ê°’ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ì €ì¥ë˜ì–´ ìˆì§€ ì•Šì€ ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤. DESC ëª…ë ¹ì–´","text":"í…Œì´ë¸”ì—ì„œ ë°ì´í„° ê²€ìƒ‰use sample SELECT ëª…ë ¹ì–´SELECT * FROM sample21; SELECTëŠ” DMLì— ì†í•˜ëŠ” ë©¸ë ¹ìœ¼ë¡œ SQLì—ì„œ ìì£¼ ì‚¬ìš©ëœë‹¤.SELECTëª…ë ¹ìœ¼ë¡œ ë°ì´í„° ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆë‹¤.*ëŠ” ëª¨ë“  ì—´ì„ ì˜ë¯¸í•˜ëŠ” ë©”íƒ€ë¬¸ìì´ë‹¤.FROMì€ ì²˜ë¦¬ ëŒ€ìƒ í…Œì´ë¸”ì„ ì§€ì •í•˜ëŠ” í‚¤ì›Œë“œ ê²°ê³¼+------+-----------+------------+---------------------------+| no | name | birthday | address |+------+-----------+------------+---------------------------+| 1 | ë°•ì¤€ìš© | 1976-10-18 | ëŒ€êµ¬ê´‘ì—­ì‹œ ìˆ˜ì„±êµ¬ || 2 | ê¹€ì¬ì§„ | NULL | ëŒ€êµ¬ê´‘ì—­ì‹œ ë™êµ¬ || 3 | í™ê¸¸ë™ | NULL | ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬ |+------+-----------+------------+---------------------------+3 rows in set (0.00 sec) NULLì€ ë°ì´í„° ê°’ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ì €ì¥ë˜ì–´ ìˆì§€ ì•Šì€ ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤. DESC ëª…ë ¹ì–´DESC sample21; í…Œì´ë¸”ì— ì–´ë–¤ ì—´ì´ ì •ì˜ë„ì–´ ìˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤. ê²°ê³¼+----------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+----------+-------------+------+-----+---------+-------+| no | int | YES | | NULL | || name | varchar(20) | YES | | NULL | || birthday | date | YES | | NULL | || address | varchar(40) | YES | | NULL | |+----------+-------------+------+-----+---------+-------+4 rows in set (0.01 sec) int : Integerë¥¼ ì˜ë¯¸í•œë‹¤.char(N) : ë¬¸ìì—´í˜•ì˜ í•˜ë‚˜, ë¬¸ìì—´ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ìë£Œí˜•ì´ë‹¤. ë¬¸ìì—´í˜•ì—ì„œëŠ” ì—´ì˜ ìµœëŒ€ ê¸¸ì´ë¥¼ ì €ì¥í•´ì•¼ í•œë‹¤.VARCHAR : ë¬¸ìì—´ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ìë£Œí˜•. ë°ì´í„° í¬ê¸°ì— ë§ì¶° ì €ì¥ê³µê°„ì˜ í¬ê¸°ë„ ë³€ê²½ëœë‹¤.(ê°€ë³€ ê¸¸ì´ ë¬¸ìì—´)DATE : ë‚ ì§œê°’ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ìë£Œí˜•TIME : ì‹œê°„ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ìë£Œí˜• Null : NULL ê°’ì„ í—ˆìš©í•  ê²ƒì¸ì§€ ì•„ë‹Œì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì œì•½ì‚¬í•­ YES : NULLê°’ì„ í—ˆìš© NO : NULLê°’ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. Default : ì—´ì— ì£¼ì–´ì§„ ê¸°ë³¸ê°’(ìƒëµí–ˆì„ ê²½ìš° ì ìš©ë˜ëŠ” ê°’) WHERE ëª…ë ¹ì–´ì¼ì¹˜í•˜ëŠ” ê²°ê³¼ê°’ë§Œ ê°€ì ¸ì˜¤ê¸°SELECT * FROM sample21 WHERE no = 2; í–‰ ì†ì—ì„œ í•„ìš”í•œ ë°ì´í„°ë§Œ ê²€ìƒ‰í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´WHEREêµ¬ëŠ” ìƒëµì´ ê°€ëŠ¥í•˜ë‹¤. ê²°ê³¼+------+-----------+----------+------------------------+| no | name | birthday | address |+------+-----------+----------+------------------------+| 2 | ê¹€ì¬ì§„ | NULL | ëŒ€êµ¬ê´‘ì—­ì‹œ ë™êµ¬ |+------+-----------+----------+------------------------+1 row in set (0.00 sec) ì œì™¸í•˜ê³  ê²€ìƒ‰í•˜ê¸°SELECT * FROM sample21 WHERE no &lt;&gt; 2; ê²°ê³¼+------+-----------+------------+---------------------------+| no | name | birthday | address |+------+-----------+------------+---------------------------+| 1 | ë°•ì¤€ìš© | 1976-10-18 | ëŒ€êµ¬ê´‘ì—­ì‹œ ìˆ˜ì„±êµ¬ || 3 | í™ê¸¸ë™ | NULL | ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬ |+------+-----------+------------+---------------------------+2 rows in set (0.00 sec) ë¬¸ìì—´ ê²€ìƒ‰í•˜ê¸°SELECT* FROM sample21 WHERE name=&#x27;ë°•ì¤€ìš©&#x27;; (&#39; &#39;)ì‘ì€ ë”°ì˜´í‘œë¡œ ë¬¸ìë¥¼ ë¬¶ì–´ì„œ ê²€ìƒ‰í•´ì•¼ í•œë‹¤. ê²°ê³¼+------+-----------+------------+---------------------------+| no | name | birthday | address |+------+-----------+------------+---------------------------+| 1 | ë°•ì¤€ìš© | 1976-10-18 | ëŒ€êµ¬ê´‘ì—­ì‹œ ìˆ˜ì„±êµ¬ |+------+-----------+------------+---------------------------+1 row in set (0.00 sec) NULLê°’ ê²€ìƒ‰í•˜ê¸°SELECT* FROM sample21 WHERE birthday IS NULL; NULLì¸ í–‰ì€ =ì—°ì‚°ìë¥¼ ì´ìš©í•˜ì—¬ ê²€ìƒ‰í•  ìˆ˜ ì—†ë‹¤.IS NULLì„ ì´ìš©í•˜ì—¬ ê²€ìƒ‰í•´ì•¼ í•œë‹¤. +------+-----------+----------+---------------------------+| no | name | birthday | address |+------+-----------+----------+---------------------------+| 2 | ê¹€ì¬ì§„ | NULL | ëŒ€êµ¬ê´‘ì—­ì‹œ ë™êµ¬ || 3 | í™ê¸¸ë™ | NULL | ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬ |+------+-----------+----------+---------------------------+2 rows in set (0.00 sec) ì¡°ê±´ ì¡°í•©í•˜ê¸°AND ì—°ì‚°ìSELECT * FROM sample24 WHERE a&lt;&gt;0 AND b&lt;&gt;0; ì¢Œìš°ì˜ ì‹ ëª¨ë‘ ì°¸ì¼ ê²½ìš° AND ì—°ì‚°ìëŠ” ì°¸ì„ ë°˜í™˜í•œë‹¤.ëª¨ë“  ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš° ì¡°ê±´ì‹ì€ ì°¸ì´ëœë‹¤ê³  í• ë•Œ AND ì—°ì‚°ìë¡œ ì¡°ê±´ì‹ì„ ì¡°í•©í•œë‹¤.AND ì—°ì‚°ì€ ë…¼ë¦¬ê³±ì„ ê³„ì‚°í•˜ëŠ” ë…¼ë¦¬ ì—°ì‚°ìì´ë‹¤. ê²°ê³¼+------+------+------+------+| no | a | b | c |+------+------+------+------+| 4 | 2 | 2 | 0 |+------+------+------+------+1 row in set (0.00 sec) OR ì—°ì‚°ìSELECT* FROM sample24 WHERE no=1 OR no=2; ì–´ëŠ ìª½ì´ë“  í•˜ë‚˜ë§Œ ì°¸ì´ ë˜ëŠ” ì¡°ê±´ì‹ì€ ì°¸ì´ ëœë‹¤.ë¼ê³  í•  ê²½ìš° ORë¡œ ì¡°ê±´ì‹ì„ ì—°ê²°í•œë‹¤.ORì—°ì‚°ìëŠ” ë…¼ë¦¬í•©ì„ ê³„ì‚°í•˜ëŠ” ë…¼ë¦¬ ì—°ì‚°ìì´ë‹¤. +------+------+------+------+| no | a | b | c |+------+------+------+------+| 1 | 1 | 0 | 0 || 2 | 0 | 1 | 0 |+------+------+------+------+2 rows in set (0.00 sec) NOT ì—°ì‚°ìSELECT* FROM sample24 WHERE NOT(a&lt;&gt;0 OR b&lt;&gt;0); NOTì—°ì‚°ìëŠ” ë‹¨í•­ ì—°ì‚°ìì´ë‹¤. +------+------+------+------+| no | a | b | c |+------+------+------+------+| 3 | 0 | 0 | 1 |+------+------+------+------+1 row in set (0.00 sec) íŒ¨í„´ ë§¤ì¹­ì— ì˜í•œ ê²€ìƒ‰íŠ¹ì • ë¬¸ìë‚˜ ë¬¸ìì—´ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ë¥¼ ê²€ìƒ‰í•˜ê³  ì‹¶ì€ ê²½ìš° ì‚¬ìš©í•œë‹¤. LIKEë¡œ íŒ¨í„´ ë§¤ì¹­í•˜ê¸°SELECT * FROM sample25 WHERE text LIKE &#x27;SQL%&#x27;; LIKEìˆ ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ì—´ ê°’ì´ ë¶€ë¶„ì ìœ¼ë¡œ ì¼ì¹˜í•˜ëŠ” ê²½ìš°ì—ë„ ì°¸ì´ ëœë‹¤.%, _ ê°™ì€ íŠ¹ìˆ˜ ë¬¸ìì™€ í•¨ê»˜ ì‚¬ìš©í•œë‹¤.% : ì„ì˜ì˜ ë¬¸ìì—´ì„ ì˜ë¯¸í•œë‹¤._ :ì„ì˜ì˜ ë¬¸ì í•˜ë‚˜ë¥¼ ì˜ë¯¸í•œë‹¤. +------+---------------------------------------------------+| no | text |+------+---------------------------------------------------+| 1 | SQLì€ RDBMSë¥¼ ì¡°ì‘í•˜ê¸° ìœ„í•œ ì–¸ì–´ì´ë‹¤. |+------+---------------------------------------------------+1 row in set (0.01 sec) SQLë¡œ ì‹œì‘í•˜ëŠ” ë¬¸ìì—´ì„ ê²€ìƒ‰í–ˆë‹¤. SELECT* FROM sample25 WHERE text LIKE &#x27;%SQL%&#x27;; SQLì´ ë“¤ì–´ê°„ ë¬¸ìì—´ ëª¨ë‘ë¥¼ ê²€ìƒ‰í•œë‹¤. +------+-----------------------------------------------------------------+| no | text |+------+-----------------------------------------------------------------+| 1 | SQLì€ RDBMSë¥¼ ì¡°ì‘í•˜ê¸° ìœ„í•œ ì–¸ì–´ì´ë‹¤. || 3 | LIKEëŠ” SQLì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìˆ ì–´ ì¤‘ í•˜ë‚˜ì´ë‹¤. |+------+-----------------------------------------------------------------+2 rows in set (0.00 sec) SELECT* FROM sample25 WHERE text LIKE &#x27;%\\%%&#x27;; +------+------------------------------------------------------------+| no | text |+------+------------------------------------------------------------+| 2 | LIKEì—ì„œëŠ” ë©”íƒ€ë¬¸ì %ì™€ _ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. |+------+------------------------------------------------------------+1 row in set (0.00 sec)","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"SQL","slug":"CS/DataBase/SQL","permalink":"https://ckck803.github.io/categories/CS/DataBase/SQL/"}],"tags":[]},{"title":"ë°ì´í„° ë² ì´ìŠ¤ - B Tree","slug":"database/btree","date":"2021-03-05T16:21:23.000Z","updated":"2024-02-18T16:19:54.522Z","comments":true,"path":"2021/03/06/database/btree/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/btree/","excerpt":"B Treeìì‹ ë…¸ë“œê°€ ìµœëŒ€ ë‘ê°œì¸ ì´ì§„ íŠ¸ë¦¬ì™€ëŠ” ë‹¤ë¥´ê²Œ B-Tree ëŠ” M ê°œì˜ ìì‹ ë…¸ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. Node ì˜ Key ê°œìˆ˜ê°€ N ê°œë©´ ìì‹ Node ì˜ ê°œìˆ˜ëŠ” N+1 ê°œë‹¤. Node ë‚´ Key ê°’ì€ í•­ìƒ ì •ë ¬ëœ ìƒíƒœ ì—¬ì•¼ í•œë‹¤. Root Node ëŠ” í•­ìƒ 2ê°œ ì´ìƒì˜ ìì‹ Node ë¥¼ ê°–ëŠ”ë‹¤. ëª¨ë“  Leaf Node ë“¤ì€ í•­ìƒ ê°™ì€ Level ì— ìˆì–´ì•¼ í•œë‹¤. B treeB-íŠ¸ë¦¬ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê²€ìƒ‰í•˜ê¸° ìœ„í•œ íŠ¸ë¦¬ ìë£Œ êµ¬ì¡°ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¸ë±ìŠ¤ì™€ íŒŒì¼ ì‹œìŠ¤í…œ ë“±ì—ì„œ ë„ë¦¬ ì‚¬ìš©ë©ë‹ˆë‹¤. B-íŠ¸ë¦¬ëŠ” ê° ë…¸ë“œì— ì—¬ëŸ¬ ê°œì˜ ìì‹ì„ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. B-íŠ¸ë¦¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§‘ë‹ˆë‹¤. ê· í˜• íŠ¸ë¦¬: B-íŠ¸ë¦¬ëŠ” ë…¸ë“œì˜ ê· í˜•ì„ ìœ ì§€í•˜ì—¬ ê²€ìƒ‰, ì‚½ì…, ì‚­ì œ ì—°ì‚°ì— ëŒ€í•œ ì‹œê°„ ë³µì¡ë„ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤. ê° ë…¸ë“œëŠ” ì—¬ëŸ¬ ê°œì˜ ìì‹ì„ ê°€ì§€ë©°, ìì‹ ë…¸ë“œì˜ ê°œìˆ˜ê°€ ë¹„ìŠ·í•œ ê²ƒì´ íŠ¹ì§•ì…ë‹ˆë‹¤. ë‹¤ë‹¨ê³„ ì¸ë±ìŠ¤: B-íŠ¸ë¦¬ëŠ” ë§¤ìš° ë†’ì€ ì„±ëŠ¥ìœ¼ë¡œ ì¸ë±ìŠ¤ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ë¯€ë¡œ ëŒ€ë¶€ë¶„ì˜ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¸ë±ìŠ¤ êµ¬ì¡°ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. B-íŠ¸ë¦¬ëŠ” ë‹¤ë‹¨ê³„ ì¸ë±ìŠ¤ë¥¼ êµ¬ì„±í•˜ì—¬ ë¹ ë¥¸ ê²€ìƒ‰ ì„±ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë¸”ë¡ ë‹¨ìœ„ ì…ì¶œë ¥: B-íŠ¸ë¦¬ëŠ” ë¸”ë¡ ë‹¨ìœ„ë¡œ ì…ì¶œë ¥ì„ ìˆ˜í–‰í•˜ì—¬ ì…ì¶œë ¥ ì—°ì‚°ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤. ì´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ë‚˜ íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ ë§¤ìš° íš¨ê³¼ì ì…ë‹ˆë‹¤. ì‚½ì…, ì‚­ì œ ì—°ì‚°: B-íŠ¸ë¦¬ëŠ” ë…¸ë“œì˜ ê· í˜•ì„ ìœ ì§€í•˜ì—¬ ì‚½ì…, ì‚­ì œ ì—°ì‚°ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ë¡œê·¸ ì‹œê°„ìœ¼ë¡œ ë³´ì¥í•©ë‹ˆë‹¤. ì´ëŠ” ëŒ€ê·œëª¨ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ ë§¤ìš° íš¨ê³¼ì ì…ë‹ˆë‹¤. B-íŠ¸ë¦¬ëŠ” ë°ì´í„°ë² ì´ìŠ¤, íŒŒì¼ ì‹œìŠ¤í…œ, ê²€ìƒ‰ ì—”ì§„ ë“±ì—ì„œ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ìë£Œ êµ¬ì¡°ì…ë‹ˆë‹¤. ë˜í•œ B+íŠ¸ë¦¬ì™€ ê°™ì€ ë³€í˜• í˜•íƒœë„ ìˆìœ¼ë©°, ì´ëŸ¬í•œ ë³€í˜• í˜•íƒœëŠ” ëŒ€ê·œëª¨ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ ë”ìš± íš¨ê³¼ì ì…ë‹ˆë‹¤. B tree ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ ë£¨íŠ¸ ë…¸ë“œì—ì„œ ì‹œì‘í•©ë‹ˆë‹¤. í˜„ì¬ ë…¸ë“œì—ì„œ í‚¤ ê°’ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤. ê²€ìƒ‰í•œ í‚¤ ê°’ì´ í˜„ì¬ ë…¸ë“œì— ìˆìœ¼ë©´ í•´ë‹¹ í¬ì¸í„°ë¥¼ ë”°ë¼ í•´ë‹¹ ìì‹ ë…¸ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤. ê²€ìƒ‰í•œ í‚¤ ê°’ì´ í˜„ì¬ ë…¸ë“œì— ì—†ìœ¼ë©´, í‚¤ ê°’ì´ ë“¤ì–´ê°ˆ ìœ„ì¹˜ë¥¼ ì°¾ê³  í•´ë‹¹ ìœ„ì¹˜ì˜ ìì‹ ë…¸ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤. ìì‹ ë…¸ë“œë¡œ ì´ë™í•œ í›„, 2ë‹¨ê³„ë¡œ ëŒì•„ê°€ì„œ ê²€ìƒ‰ì„ ê³„ì†í•©ë‹ˆë‹¤.","text":"B Treeìì‹ ë…¸ë“œê°€ ìµœëŒ€ ë‘ê°œì¸ ì´ì§„ íŠ¸ë¦¬ì™€ëŠ” ë‹¤ë¥´ê²Œ B-Tree ëŠ” M ê°œì˜ ìì‹ ë…¸ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. Node ì˜ Key ê°œìˆ˜ê°€ N ê°œë©´ ìì‹ Node ì˜ ê°œìˆ˜ëŠ” N+1 ê°œë‹¤. Node ë‚´ Key ê°’ì€ í•­ìƒ ì •ë ¬ëœ ìƒíƒœ ì—¬ì•¼ í•œë‹¤. Root Node ëŠ” í•­ìƒ 2ê°œ ì´ìƒì˜ ìì‹ Node ë¥¼ ê°–ëŠ”ë‹¤. ëª¨ë“  Leaf Node ë“¤ì€ í•­ìƒ ê°™ì€ Level ì— ìˆì–´ì•¼ í•œë‹¤. B treeB-íŠ¸ë¦¬ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê²€ìƒ‰í•˜ê¸° ìœ„í•œ íŠ¸ë¦¬ ìë£Œ êµ¬ì¡°ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¸ë±ìŠ¤ì™€ íŒŒì¼ ì‹œìŠ¤í…œ ë“±ì—ì„œ ë„ë¦¬ ì‚¬ìš©ë©ë‹ˆë‹¤. B-íŠ¸ë¦¬ëŠ” ê° ë…¸ë“œì— ì—¬ëŸ¬ ê°œì˜ ìì‹ì„ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. B-íŠ¸ë¦¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§‘ë‹ˆë‹¤. ê· í˜• íŠ¸ë¦¬: B-íŠ¸ë¦¬ëŠ” ë…¸ë“œì˜ ê· í˜•ì„ ìœ ì§€í•˜ì—¬ ê²€ìƒ‰, ì‚½ì…, ì‚­ì œ ì—°ì‚°ì— ëŒ€í•œ ì‹œê°„ ë³µì¡ë„ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤. ê° ë…¸ë“œëŠ” ì—¬ëŸ¬ ê°œì˜ ìì‹ì„ ê°€ì§€ë©°, ìì‹ ë…¸ë“œì˜ ê°œìˆ˜ê°€ ë¹„ìŠ·í•œ ê²ƒì´ íŠ¹ì§•ì…ë‹ˆë‹¤. ë‹¤ë‹¨ê³„ ì¸ë±ìŠ¤: B-íŠ¸ë¦¬ëŠ” ë§¤ìš° ë†’ì€ ì„±ëŠ¥ìœ¼ë¡œ ì¸ë±ìŠ¤ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ë¯€ë¡œ ëŒ€ë¶€ë¶„ì˜ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¸ë±ìŠ¤ êµ¬ì¡°ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. B-íŠ¸ë¦¬ëŠ” ë‹¤ë‹¨ê³„ ì¸ë±ìŠ¤ë¥¼ êµ¬ì„±í•˜ì—¬ ë¹ ë¥¸ ê²€ìƒ‰ ì„±ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë¸”ë¡ ë‹¨ìœ„ ì…ì¶œë ¥: B-íŠ¸ë¦¬ëŠ” ë¸”ë¡ ë‹¨ìœ„ë¡œ ì…ì¶œë ¥ì„ ìˆ˜í–‰í•˜ì—¬ ì…ì¶œë ¥ ì—°ì‚°ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤. ì´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ë‚˜ íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ ë§¤ìš° íš¨ê³¼ì ì…ë‹ˆë‹¤. ì‚½ì…, ì‚­ì œ ì—°ì‚°: B-íŠ¸ë¦¬ëŠ” ë…¸ë“œì˜ ê· í˜•ì„ ìœ ì§€í•˜ì—¬ ì‚½ì…, ì‚­ì œ ì—°ì‚°ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ë¡œê·¸ ì‹œê°„ìœ¼ë¡œ ë³´ì¥í•©ë‹ˆë‹¤. ì´ëŠ” ëŒ€ê·œëª¨ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ ë§¤ìš° íš¨ê³¼ì ì…ë‹ˆë‹¤. B-íŠ¸ë¦¬ëŠ” ë°ì´í„°ë² ì´ìŠ¤, íŒŒì¼ ì‹œìŠ¤í…œ, ê²€ìƒ‰ ì—”ì§„ ë“±ì—ì„œ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ìë£Œ êµ¬ì¡°ì…ë‹ˆë‹¤. ë˜í•œ B+íŠ¸ë¦¬ì™€ ê°™ì€ ë³€í˜• í˜•íƒœë„ ìˆìœ¼ë©°, ì´ëŸ¬í•œ ë³€í˜• í˜•íƒœëŠ” ëŒ€ê·œëª¨ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ ë”ìš± íš¨ê³¼ì ì…ë‹ˆë‹¤. B tree ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ ë£¨íŠ¸ ë…¸ë“œì—ì„œ ì‹œì‘í•©ë‹ˆë‹¤. í˜„ì¬ ë…¸ë“œì—ì„œ í‚¤ ê°’ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤. ê²€ìƒ‰í•œ í‚¤ ê°’ì´ í˜„ì¬ ë…¸ë“œì— ìˆìœ¼ë©´ í•´ë‹¹ í¬ì¸í„°ë¥¼ ë”°ë¼ í•´ë‹¹ ìì‹ ë…¸ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤. ê²€ìƒ‰í•œ í‚¤ ê°’ì´ í˜„ì¬ ë…¸ë“œì— ì—†ìœ¼ë©´, í‚¤ ê°’ì´ ë“¤ì–´ê°ˆ ìœ„ì¹˜ë¥¼ ì°¾ê³  í•´ë‹¹ ìœ„ì¹˜ì˜ ìì‹ ë…¸ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤. ìì‹ ë…¸ë“œë¡œ ì´ë™í•œ í›„, 2ë‹¨ê³„ë¡œ ëŒì•„ê°€ì„œ ê²€ìƒ‰ì„ ê³„ì†í•©ë‹ˆë‹¤. B tree ì—ì„œ ì‚½ì… ì•Œê³ ë¦¬ì¦˜ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì‚½ì…í•  í‚¤ ê°’ì„ ë£¨íŠ¸ ë…¸ë“œì—ì„œë¶€í„° ê²€ìƒ‰í•©ë‹ˆë‹¤. í‚¤ ê°’ì„ ì‚½ì…í•  ìœ„ì¹˜ë¥¼ ì°¾ìŠµë‹ˆë‹¤. í•´ë‹¹ ìœ„ì¹˜ì— ìƒˆë¡œìš´ í‚¤ ê°’ì„ ì‚½ì…í•©ë‹ˆë‹¤. ë…¸ë“œì˜ í‚¤ ê°’ì´ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ìœ ì§€ë˜ë„ë¡ í‚¤ ê°’ì„ ì •ë ¬í•©ë‹ˆë‹¤. ë…¸ë“œì˜ í‚¤ ê°œìˆ˜ê°€ ìµœëŒ€ì¹˜ë¥¼ ì´ˆê³¼í•˜ë©´ ë…¸ë“œë¥¼ ë¶„í• í•©ë‹ˆë‹¤. ë¶„í• ëœ ë…¸ë“œì˜ ì¤‘ê°„ ê°’ì€ ë¶€ëª¨ ë…¸ë“œì— ì‚½ì…ë©ë‹ˆë‹¤. ë¶€ëª¨ ë…¸ë“œì˜ í‚¤ ê°’ë„ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ìœ ì§€ë˜ë„ë¡ í‚¤ ê°’ì„ ì •ë ¬í•©ë‹ˆë‹¤. ì‚½ì…ì´ ì™„ë£Œë©ë‹ˆë‹¤. B-íŠ¸ë¦¬ì—ì„œ ì‚­ì œ ì•Œê³ ë¦¬ì¦˜ ì‚­ì œí•  í‚¤ ê°’ì„ ë£¨íŠ¸ ë…¸ë“œì—ì„œë¶€í„° ê²€ìƒ‰í•©ë‹ˆë‹¤. ì‚­ì œí•  í‚¤ ê°’ì„ ì°¾ìŠµë‹ˆë‹¤. ì‚­ì œí•  í‚¤ ê°’ì„ ê°€ì§„ ë…¸ë“œê°€ ë¦¬í”„ ë…¸ë“œì¸ ê²½ìš°, í•´ë‹¹ í‚¤ ê°’ì„ ì‚­ì œí•©ë‹ˆë‹¤. ì‚­ì œí•  í‚¤ ê°’ì„ ê°€ì§„ ë…¸ë“œê°€ ë¦¬í”„ ë…¸ë“œê°€ ì•„ë‹Œ ê²½ìš°, ëŒ€ì²´ í‚¤ ê°’ì„ ì°¾ì•„ì„œ ì‚­ì œí•©ë‹ˆë‹¤. ëŒ€ì²´ í‚¤ ê°’ì„ ê°€ì§„ ë…¸ë“œë¡œ ì´ë™í•˜ì—¬ 2ë‹¨ê³„ë¡œ ëŒì•„ê°€ì„œ ì‚­ì œë¥¼ ê³„ì†í•©ë‹ˆë‹¤. ì‚­ì œ í›„, ë…¸ë“œì˜ í‚¤ ê°œìˆ˜ê°€ ìµœì†Œì¹˜ë¥¼ ì´ˆê³¼í•˜ì§€ ì•Šë„ë¡ ë…¸ë“œë¥¼ ì¡°ì •í•©ë‹ˆë‹¤. ë…¸ë“œì˜ í‚¤ ê°’ì´ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ìœ ì§€ë˜ë„ë¡ í‚¤ ê°’ì„ ì •ë ¬í•©ë‹ˆë‹¤. ì‚­ì œê°€ ì™„ë£Œë©ë‹ˆë‹¤. Key ê²€ìƒ‰ ê³¼ì •Root Node ë¶€í„° ì‹œì‘í•´ í•˜í–¥ì‹ìœ¼ë¡œ ê²€ìƒ‰ì„ ìˆ˜í–‰í•œë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"Scan","slug":"CS/DataBase/Scan","permalink":"https://ckck803.github.io/categories/CS/DataBase/Scan/"}],"tags":[]},{"title":"ë°ì´í„° ë² ì´ìŠ¤ - Index","slug":"database/index-scan","date":"2021-03-05T16:21:23.000Z","updated":"2024-02-18T16:19:54.522Z","comments":true,"path":"2021/03/06/database/index-scan/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/index-scan/","excerpt":"ë°ì´í„° ë² ì´ìŠ¤ - Index Index ë€ ì˜¤ë¼í´ì—ì„œëŠ” ì¸ë±ìŠ¤ì˜ ëª¨ë“  ì»¬ëŸ¼ì´ NULL ì¸ ê²½ìš° ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤. ë°ì´í„° ë² ì´ìŠ¤ - Index Scan Table Full Scan : í…Œì´ë¸” ì „ì²´ íƒìƒ‰ Index Unique Scan : ì¸ë±ìŠ¤ ìˆ˜ì§ íƒìƒ‰ Index Full Sacn : ì¸ë±ìŠ¤ ì „ì²´ íƒìƒ‰ Index Range Scan : ì¸ë±ìŠ¤ ë²”ìœ„ íƒìƒ‰ Index Skip Scan : ì¸ë±ìŠ¤ ìŠ¤í‚µ íƒìƒ‰ Table Full Scan - í…Œì´ë¸” ì „ì²´ ìŠ¤ìº” ì¸ë±ìŠ¤ ë£¨íŠ¸ì—ì„œ ì‹œì‘í•´ ìˆ˜í‰ì ìœ¼ë¡œ ë¦¬í”„ ë¸”ëŸ­ê¹Œì§€ ìŠ¤ìº”í•˜ëŠ” ë°©ì‹ Index Unique Scan ë‹¨ í•œê±´ì˜ ë°ì´í„°ë¥¼ ì°¾ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” Scan ë°©ì‹","text":"ë°ì´í„° ë² ì´ìŠ¤ - Index Index ë€ ì˜¤ë¼í´ì—ì„œëŠ” ì¸ë±ìŠ¤ì˜ ëª¨ë“  ì»¬ëŸ¼ì´ NULL ì¸ ê²½ìš° ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤. ë°ì´í„° ë² ì´ìŠ¤ - Index Scan Table Full Scan : í…Œì´ë¸” ì „ì²´ íƒìƒ‰ Index Unique Scan : ì¸ë±ìŠ¤ ìˆ˜ì§ íƒìƒ‰ Index Full Sacn : ì¸ë±ìŠ¤ ì „ì²´ íƒìƒ‰ Index Range Scan : ì¸ë±ìŠ¤ ë²”ìœ„ íƒìƒ‰ Index Skip Scan : ì¸ë±ìŠ¤ ìŠ¤í‚µ íƒìƒ‰ Table Full Scan - í…Œì´ë¸” ì „ì²´ ìŠ¤ìº” ì¸ë±ìŠ¤ ë£¨íŠ¸ì—ì„œ ì‹œì‘í•´ ìˆ˜í‰ì ìœ¼ë¡œ ë¦¬í”„ ë¸”ëŸ­ê¹Œì§€ ìŠ¤ìº”í•˜ëŠ” ë°©ì‹ Index Unique Scan ë‹¨ í•œê±´ì˜ ë°ì´í„°ë¥¼ ì°¾ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” Scan ë°©ì‹ ë£¨íŠ¸ ë¸”ë¡ì—ì„œ ì‹œì‘í•´ ë¸Œëœì¹˜ ë¸”ë¡ì„ ê±°ì²˜ ë¦¬í”„ë¸”ë¡ê¹Œì§€ ë‚´ë ¤ê°€ ìµœì¢… ë°ì´í„°ê°€ ì €ì¥ëœ í…Œì´ë¸” ë¸”ë¡ì„ ì½ì–´ ë‹¨ í•œê±´ì„ ì°¾ëŠ”ë‹¤. unique Index ë¥¼ í†µí•´ = ì¡°ê±´ìœ¼ë¡œ íƒìƒ‰í•˜ëŠ” ê²½ìš° Index Range Scan ì¸ë±ìŠ¤ë¥¼ ë£¨íŠ¸ì—ì„œ ìˆ˜ì§ íƒìƒ‰í•˜ë‹¤ê°€ ë¦¬í”„ ë¸”ë¡ì— ë„ë‹¬í•´ ì‹œì‘ì ì„ ì°¾ê³  í•„ìš”í•œ ë²”ìœ„ ë§Œí¼ Scan í•˜ëŠ” ë°©ì‹ Index Full ScanIndex Skip Scan","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"Scan","slug":"CS/DataBase/Scan","permalink":"https://ckck803.github.io/categories/CS/DataBase/Scan/"}],"tags":[]},{"title":"SQL - DDL DML DCL","slug":"database/sql/ddl-dml-dcl","date":"2021-03-05T16:21:23.000Z","updated":"2024-02-18T16:19:54.523Z","comments":true,"path":"2021/03/06/database/sql/ddl-dml-dcl/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/sql/ddl-dml-dcl/","excerpt":"DDL DML DCLDDL ë°ì´í„° ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•˜ê¸° í•˜ê±°ë‚˜ ì¡°ì‘í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ ëª…ë ¹ì–´ ì„¤ëª… CREATE ë°ì´í„° ë² ì´ìŠ¤, í…Œì´ë¸”ì„ ìƒì„±í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ ALTER í…Œì´ë¸”ì„ ìˆ˜ì •í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ DROP ë°ì´í„°ë² ì´ìŠ¤, í…Œì´ë¸”ì„ ì‚­ì œí•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ RENAME TRUNCATE ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì´ˆê¸°í™” ì‹œí‚¤ê¸° ìœ„í•œ ëª…ë ¹ì–´ DML ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ì¡°íšŒ, ìˆ˜ì •, ì‚½ì…, ì‚­ì œí•˜ê¸° ìœ„í•œ ì–¸ì–´ ëª…ë ¹ì–´ ì„¤ëª… SELECT ë°ì´í„°ë¥¼ ì¡°íšŒ í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ INSERT ë°ì´í„°ë¥¼ ì‚½ì…í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ UPDATE ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ DELETE ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ DCL ë°ì´í„° ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ê±°ë‚˜ ê°ì²´ì— ê¶Œí•œì„ ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ì–¸ì–´","text":"DDL DML DCLDDL ë°ì´í„° ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•˜ê¸° í•˜ê±°ë‚˜ ì¡°ì‘í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ ëª…ë ¹ì–´ ì„¤ëª… CREATE ë°ì´í„° ë² ì´ìŠ¤, í…Œì´ë¸”ì„ ìƒì„±í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ ALTER í…Œì´ë¸”ì„ ìˆ˜ì •í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ DROP ë°ì´í„°ë² ì´ìŠ¤, í…Œì´ë¸”ì„ ì‚­ì œí•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ RENAME TRUNCATE ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì´ˆê¸°í™” ì‹œí‚¤ê¸° ìœ„í•œ ëª…ë ¹ì–´ DML ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ì¡°íšŒ, ìˆ˜ì •, ì‚½ì…, ì‚­ì œí•˜ê¸° ìœ„í•œ ì–¸ì–´ ëª…ë ¹ì–´ ì„¤ëª… SELECT ë°ì´í„°ë¥¼ ì¡°íšŒ í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ INSERT ë°ì´í„°ë¥¼ ì‚½ì…í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ UPDATE ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ DELETE ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ DCL ë°ì´í„° ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ê±°ë‚˜ ê°ì²´ì— ê¶Œí•œì„ ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ì–¸ì–´ ëª…ë ¹ì–´ ì„¤ëª… GRANT ë°ì´í„° ë² ì´ìŠ¤ ì‚¬ìš©ìì—ê²Œ íŠ¹ì • ì‘ì—…ì— ëŒ€í•œ ê¶Œí•œì„ ì£¼ê¸° ìœ„í•œ ëª…ë ¹ì–´ REVOKE ë°ì´í„° ë² ì´ìŠ¤ ì‚¬ìš©ìì—ê²Œ íŠ¹ì • ì‘ì—…ì— ëŒ€í•œ ê¶Œí•œì„ íšŒìˆ˜, ë°•íƒˆ í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ COMMIT íŠ¸ëœì­ì…˜ ì‘ì—… ê²°ê³¼ë¥¼ ë°˜ì˜í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ ROLLBACK íŠ¸ëœì­ì…˜ ì‘ì—…ì„ ì·¨ì†Œ ë° ì›ë˜ëŒ€ë¡œ ë³µêµ¬í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"SQL","slug":"CS/DataBase/SQL","permalink":"https://ckck803.github.io/categories/CS/DataBase/SQL/"}],"tags":[]},{"title":"íŠ¸ëœì­ì…˜ê³¼ ACID","slug":"database/transaction/ACID","date":"2021-03-05T16:15:42.000Z","updated":"2024-02-18T16:19:54.525Z","comments":true,"path":"2021/03/06/database/transaction/ACID/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/transaction/ACID/","excerpt":"ëª©ì°¨ íŠ¸ëœì­ì…˜ê³¼ ACID íŠ¸ëœì­ì…˜ ê²©ë¦¬ìˆ˜ì¤€ (Isolation Level) íŠ¸ëœì­ì…˜ê³¼ ACID ì›ìì„±(Atomicity) ì¼ê´€ì„±(Consistency) ê²©ë¦¬ì„±(Isolation) ì§€ì†ì„±(Durability) ì›ìì„± ë³´ì¥ íŠ¸ëœì­ì…˜ ì›ìì„±ì€ All or Nothing ìœ¼ë¡œ ë¶€ë¶„ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê±°ë‚˜ ì¤‘ë‹¨ë˜ì§€ ì•ŠìŒì„ ë³´ì¥í•œë‹¤. ì¦‰, ë¶„í•´ê°€ ë¶ˆê°€ëŠ¥í•œ ìµœì†Œ ë‹¨ìœ„ì¸ í•˜ë‚˜ì˜ ì›ìì²˜ëŸ¼ ë™ì‘í•œë‹¤ëŠ” ì˜ë¯¸ íŠ¸ëœì­ì…˜ì— ì˜í•œ ë³€ê²½ ë‚´ìš©ì„ ìœ ì§€í•˜ë©´ì„œ, ì´ì „ì— Commit ëœ ì‹œì ì˜ ë°ì´í„°ë¥¼ ì„ì‹œì˜ì—­ì— ë”°ë¡œ ì €ì¥í•¨ìœ¼ë¡œì¨ ì›ìì„±ì„ ë³´ì¥í•œë‹¤. í˜„ì¬ ìˆ˜í–‰í•˜ê³  ìˆëŠ” íŠ¸ëœì­ì…˜ì— ì˜¤ë¥˜ê°€ ë‚˜ë©´ í˜„ì¬ ë‚´ì—­ì„ ë‚ ë ¤ë²„ë¦¬ê³  ì„ì‹œ ì˜ì—­ì— ì €ì¥í–ˆë˜ ìƒíƒœë¡œ Rollback ì„ í•œë‹¤. ì´ì „ ë°ì´í„°ë“¤ì´ ì €ì¥ëœ ì˜ì—­ì„ ë¡¤ë°± ì„¸ê·¸ë¨¼íŠ¸ë¼ê³  ë¶€ë¥¸ë‹¤. í˜„ì¬ ìˆ˜í–‰ì¤‘ì¸ íŠ¸ëœì­ì…˜ì— ì˜í•´ ìƒˆë¡­ê²Œ ë³€ê²½ë˜ëŠ” ë‚´ì—­ì„ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ë¼ ë¶€ë¥¸ë‹¤. íŠ¸ëœì­ì…˜ì˜ ì›ìì„±ì€ ë¡¤ë°± ì„¸ê·¸ë¨¼íŠ¸ì— ì˜í•´ ë³´ì¥ì´ ëœë‹¤. Consistency - ì¼ê´€ì„± ë³´ì¥ íŠ¸ëœì­ì…˜ ìˆ˜í–‰ ì „, í›„ ë°ì´í„° ë² ì´ìŠ¤ ì œì•½ ì¡°ê±´ ì´ë‚˜, ìë£Œí˜• ì´ ë³€í•˜ì§€ ì•ŠìŒì„ ë³´ì¥í•œë‹¤.","text":"ëª©ì°¨ íŠ¸ëœì­ì…˜ê³¼ ACID íŠ¸ëœì­ì…˜ ê²©ë¦¬ìˆ˜ì¤€ (Isolation Level) íŠ¸ëœì­ì…˜ê³¼ ACID ì›ìì„±(Atomicity) ì¼ê´€ì„±(Consistency) ê²©ë¦¬ì„±(Isolation) ì§€ì†ì„±(Durability) ì›ìì„± ë³´ì¥ íŠ¸ëœì­ì…˜ ì›ìì„±ì€ All or Nothing ìœ¼ë¡œ ë¶€ë¶„ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê±°ë‚˜ ì¤‘ë‹¨ë˜ì§€ ì•ŠìŒì„ ë³´ì¥í•œë‹¤. ì¦‰, ë¶„í•´ê°€ ë¶ˆê°€ëŠ¥í•œ ìµœì†Œ ë‹¨ìœ„ì¸ í•˜ë‚˜ì˜ ì›ìì²˜ëŸ¼ ë™ì‘í•œë‹¤ëŠ” ì˜ë¯¸ íŠ¸ëœì­ì…˜ì— ì˜í•œ ë³€ê²½ ë‚´ìš©ì„ ìœ ì§€í•˜ë©´ì„œ, ì´ì „ì— Commit ëœ ì‹œì ì˜ ë°ì´í„°ë¥¼ ì„ì‹œì˜ì—­ì— ë”°ë¡œ ì €ì¥í•¨ìœ¼ë¡œì¨ ì›ìì„±ì„ ë³´ì¥í•œë‹¤. í˜„ì¬ ìˆ˜í–‰í•˜ê³  ìˆëŠ” íŠ¸ëœì­ì…˜ì— ì˜¤ë¥˜ê°€ ë‚˜ë©´ í˜„ì¬ ë‚´ì—­ì„ ë‚ ë ¤ë²„ë¦¬ê³  ì„ì‹œ ì˜ì—­ì— ì €ì¥í–ˆë˜ ìƒíƒœë¡œ Rollback ì„ í•œë‹¤. ì´ì „ ë°ì´í„°ë“¤ì´ ì €ì¥ëœ ì˜ì—­ì„ ë¡¤ë°± ì„¸ê·¸ë¨¼íŠ¸ë¼ê³  ë¶€ë¥¸ë‹¤. í˜„ì¬ ìˆ˜í–‰ì¤‘ì¸ íŠ¸ëœì­ì…˜ì— ì˜í•´ ìƒˆë¡­ê²Œ ë³€ê²½ë˜ëŠ” ë‚´ì—­ì„ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ë¼ ë¶€ë¥¸ë‹¤. íŠ¸ëœì­ì…˜ì˜ ì›ìì„±ì€ ë¡¤ë°± ì„¸ê·¸ë¨¼íŠ¸ì— ì˜í•´ ë³´ì¥ì´ ëœë‹¤. Consistency - ì¼ê´€ì„± ë³´ì¥ íŠ¸ëœì­ì…˜ ìˆ˜í–‰ ì „, í›„ ë°ì´í„° ë² ì´ìŠ¤ ì œì•½ ì¡°ê±´ ì´ë‚˜, ìë£Œí˜• ì´ ë³€í•˜ì§€ ì•ŠìŒì„ ë³´ì¥í•œë‹¤. íŠ¸ëœì­ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ë©´ ì¼ê´€ì ì¸ DBìƒíƒœë¥¼ ìœ ì§€í•¨ì„ ë³´ì¥í•œë‹¤. ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ëœ ë°ì´í„°ë“¤ì€ ê° ì œì•½ ì¡°ê±´ì´ë‚˜ ìë£Œí˜•ë“¤ì„ ëª¨ë‘ ë§Œì¡±í•œ ìƒíƒœë¡œ ì €ì¥ë¼ ìˆë‹¤. ì¡°ê±´ì— ìœ„ë°°ë˜ëŠ” ì¿¼ë¦¬ê°€ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ íŠ¸ëœì­ì…˜ì€ ì¢…ë£Œëœë‹¤. Isolation - ê²©ë¦¬ì„± ë³´ì¥ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì´ ìˆ˜í–‰ ì¤‘ì—ëŠ” ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ìˆ˜í–‰ë  ìˆ˜ ì—†ìŒì„ ë³´ì¥í•œë‹¤. íŠ¸ëœì­ì…˜ì´ ìˆ˜í–‰ë˜ê³  ìˆì„ ë•Œ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì˜ ì‘ì—…ì´ ë¼ì–´ë“¤ì§€ ì•ŠìŒì„ ë³´ì¥í•œë‹¤. íŠ¸ëœì­ì…˜ë¼ë¦¬ëŠ” ì„œë¡œ ê°„ì„­í•  ìˆ˜ ì—†ë‹¤. lock &amp; excute unlock ì„ í†µí•´ ê³ ë¦½ì„±ì„ ë³´ì¥í•œë‹¤. ë°ì´í„°ë¥¼ ì“¸ ë•ŒëŠ” ë¬¸ì„ ì ê¶ˆì„œ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ì ‘ê·¼í•˜ì§€ ì•Šë„ë¡ ê³ ë¦½ì„±ì„ ë³´ì¥í•˜ê³ , ìˆ˜í–‰ì„ ë§ˆì¹˜ë©´ unlockì„ í†µí•´ ë°ì´í„°ë¥¼ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. shared lock(ê³µìœ  ë½) íŠ¸ëœì­ì…˜ì—ì„œ ë°ì´í„°ë¥¼ ì½ì„ ë•Œ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ë“¤ì´ ì½ì„ ìˆ˜ëŠ” ìˆë„ë¡ í—ˆìš©í•˜ëŠ” lock exelusive lock(ë² íƒ€ ë½) í•œ íŠ¸ëœì­ì…˜ì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê³  ìˆì„ ê²½ìš° ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ë“¤ì´ ì ‘ê·¼ì„ ëª»í•˜ë„ë¡í•˜ëŠ” lock Durability - ì§€ì†ì„± ë³´ì¥ íŠ¸ëœì­ì…˜ì´ ìˆ˜í–‰ëœ í›„ ì €ì¥ëœ ë°ì´í„°ëŠ” ì˜êµ¬ì ìœ¼ë¡œ ë³´ê´€ë¨ ì„ ë³´ì¥í•œë‹¤. ë°ì´í„°ëŠ” ë¹„íœ˜ë°œì„± ì €ì¥ì†Œì— ê¸°ë¡ë˜ë©° H&#x2F;W, S&#x2F;W ì¥ì• ê°€ ë°œìƒí•˜ë”ë¼ë„ ë°ì´í„°ëŠ” ê³„ì† ë³´ì¡´ë¼ì•¼ í•œë‹¤.","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"SQL","slug":"CS/DataBase/SQL","permalink":"https://ckck803.github.io/categories/CS/DataBase/SQL/"}],"tags":[]},{"title":"sql.md","slug":"database/sql/sql-md","date":"2021-03-05T16:10:22.000Z","updated":"2024-02-18T16:19:54.524Z","comments":true,"path":"2021/03/06/database/sql/sql-md/","link":"","permalink":"https://ckck803.github.io/2021/03/06/database/sql/sql-md/","excerpt":"SQL ì²«ê±¸ìŒ My SQL ì„¤ì¹˜í•˜ê¸° 1ì¥ ë°ì´í„° ë² ì´ìŠ¤ êµ¬ì¶• 2ì¥ í…Œì´ë¸”ì—ì„œ ë°ì´í„° ê²€ìƒ‰ 3ì¥ ì •ë ¬ê³¼ ì—°ì‚° 4ì¥ ë°ì´í„° ì¶”ê°€, ì‚­ì œ, ê°±ì‹  5ì¥ ì§‘ê³„ì™€ ì„œë¸Œì¿¼ë¦¬ 6ì¥ ë°ì´í„°ë² ì´ìŠ¤ ê°ì²´ ì‘ì„±ê³¼ ì‚­ì œ 7ì¥ ë³µìˆ˜ì˜ í…Œì´ë¸” ë‹¤ë£¨ê¸° SELECTFROMWHEREGROUP BYHAVINGORDER BYIFNULL, ISNULL, COALESCE, NVL","text":"SQL ì²«ê±¸ìŒ My SQL ì„¤ì¹˜í•˜ê¸° 1ì¥ ë°ì´í„° ë² ì´ìŠ¤ êµ¬ì¶• 2ì¥ í…Œì´ë¸”ì—ì„œ ë°ì´í„° ê²€ìƒ‰ 3ì¥ ì •ë ¬ê³¼ ì—°ì‚° 4ì¥ ë°ì´í„° ì¶”ê°€, ì‚­ì œ, ê°±ì‹  5ì¥ ì§‘ê³„ì™€ ì„œë¸Œì¿¼ë¦¬ 6ì¥ ë°ì´í„°ë² ì´ìŠ¤ ê°ì²´ ì‘ì„±ê³¼ ì‚­ì œ 7ì¥ ë³µìˆ˜ì˜ í…Œì´ë¸” ë‹¤ë£¨ê¸° SELECTFROMWHEREGROUP BYHAVINGORDER BYIFNULL, ISNULL, COALESCE, NVLJOIN INNER JOIN : ë‘ í…Œì´ë¸”ì´ ê³µí†µì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ë ˆì½”ë“œë¥¼ ë°˜í™˜í•œë‹¤. LEFT JOIN : ë‘ í…Œì´ë¸”ì´ ê³µí†µì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ë ˆì½”ë“œì™€ ì™¼ìª½ í…Œì´ë¸”ì˜ ëª¨ë“  ë ˆì½”ë“œë¥¼ ë°˜í™˜í•œë‹¤. RIGHT JOIN : ë‘ í…Œì´ë¸”ì´ ê³µí†µì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ë ˆì½”ë“œì™€ ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì˜ ëª¨ë“  ë ˆì½”ë“œë¥¼ ë°˜í™˜í•œë‹¤. FULL OUTER JOIN : ë‘ í…Œì´ë¸”ì´ ê³µí†µì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ë ˆì½”ë“œì™€ ì™¼ìª½ ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì˜ ë ˆì½”ë“œë¥¼ ë°˜í™˜í•œë‹¤. SQL ë‚´ í•¨ìˆ˜ìˆ«ì í•¨ìˆ˜ ABS(n) : nì˜ ì ˆëŒ€ê°’ì„ ë°˜í™˜í•œë‹¤. CEIL(n), FLOOR(n) : në³´ë‹¤ ê°™ê±°ë‚˜ í° í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. ROUND(n, i) : nì„ ì†Œìˆ˜ì  i+1ë²ˆì§¸ ìë¦¬ì—ì„œ ë°˜ì˜¬ë¦¼ í•œë‹¤. TRUNC(n, i) : nì„ ì†Œìˆ˜ì  i+1ë²ˆì§¸ ìë¦¬ì—ì„œ ë²„ë¦°ë‹¤. POWER(n1, n2) : n1ì„ n2ë¡œ ê±°ë“­ì œê³±í•œë‹¤. MOD(n1, n2) : n1ì„ n2ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ ê°’ ROUND &amp; TRUNC ìë¦¿ ê°’ ì†Œìˆ˜ìª½ìœ¼ë¡œ ê°€ê²Œ ë˜ë©´ ì–‘ìˆ˜ë¥¼ ì •ìˆ˜ìª½ìœ¼ë¡œ ê°€ê²Œ ë˜ë©´ ìŒìˆ˜ê°’ì„ ì·¨í•˜ë©´ ëœë‹¤. ë¬¸ì í•¨ìˆ˜ UPPER(char) : charë¥¼ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•œë‹¤. LOWER(char) : charë¥¼ ì†Œë¬¸ìë¡œ ë°˜í™˜í•œë‹¤. LENGTH(char) : charì˜ ê¸¸ì´ë¥¼ ë°˜í™˜í•œë‹¤. UPPER ëª…ë ¹ì–´ select UPPER(&#x27;hello&#x27;); ê²°ê³¼ +----------------+| UPPER(&#x27;hello&#x27;) |+----------------+| HELLO |+----------------+1 row in set (0.00 sec) LOWER ëª…ë ¹ì–´ mysql&gt; select LOWER(&#x27;HELLO&#x27;); ê²°ê³¼ +----------------+| LOWER(&#x27;HELLO&#x27;) |+----------------+| hello |+----------------+1 row in set (0.00 sec) LENGTH ëª…ë ¹ì–´ select LENGTH(&#x27;hello&#x27;); ê²°ê³¼ +-----------------+| LENGTH(&#x27;hello&#x27;) |+-----------------+| 5 |+-----------------+1 row in set (0.00 sec) ë‚ ì§œ í•¨ìˆ˜ year(DATE), year(DATETIME) hour(TIME), hour(DATETIME) minute(TIME), minute(DATETIME) second(TIME), second(DATETIME) DATE_FORMAT(DATE, format) year(DATE) ëª…ë ¹ì–´ select year(&#x27;2020-06-05&#x27;); ê²°ê³¼ +--------------------+| year(&#x27;2020-06-05&#x27;) |+--------------------+| 2020 |+--------------------+1 row in set (0.00 sec) hour(TIME) ëª…ë ¹ì–´ select hour(&#x27;11:42:55&#x27;); ê²°ê³¼ +------------------+| hour(&#x27;11:42:55&#x27;) |+------------------+| 11 |+------------------+1 row in set (0.00 sec) minute(TIME) ëª…ë ¹ì–´ select minute(&#x27;11:42:55&#x27;); ê²°ê³¼ +--------------------+| minute(&#x27;11:42:55&#x27;) |+--------------------+| 42 |+--------------------+1 row in set (0.00 sec) second(TIME) ëª…ë ¹ì–´ select second(&#x27;11:42:55&#x27;); ê²°ê³¼ +--------------------+| second(&#x27;11:42:55&#x27;) |+--------------------+| 55 |+--------------------+1 row in set (0.00 sec) DATE_FORMATSELECT ANIMAL_ID, NAME, DATE_FORMAT(DATETIME, &#x27;%y-%m-%d&#x27;) AS &#x27;ë‚ ì§œ&#x27;from ANIMAL_INSorder by ANIMAL_ID ëª¨ë‘ ì†Œë¬¸ìë¡œ ë°ì´í„° í˜•ì‹ì„ í‘œì‹œí•˜ê²Œ ë˜ë©´ 2ê¸€ì í˜•ì‹ìœ¼ë¡œ í‘œí˜„ì„ í•œë‹¤. SELECT ANIMAL_ID, NAME, DATE_FORMAT(DATETIME, &#x27;%Y-%m-%d&#x27;) AS &#x27;ë‚ ì§œ&#x27;from ANIMAL_INSorder by ANIMAL_ID ë…„ë„ë¥¼ ëŒ€ë¬¸ìë¡œ ë°ì´í…¨ í˜•ì‹ì„ í‘œí˜„í•˜ê²Œ ë˜ë©´ êµ¬ì²´ì ì¸ ë…„ë„ë¥¼ í‘œì‹œí•œë‹¤. SELECT ANIMAL_ID, NAME, DATE_FORMAT(DATETIME, &#x27;%y-%M-%d&#x27;) AS &#x27;ë‚ ì§œ&#x27;from ANIMAL_INSorder by ANIMAL_ID ë‹¬ì„ ëŒ€ë¬¸ìë¡œ í‘œì‹œí•˜ê²Œ ë˜ë©´ ì˜ë¬¸ìœ¼ë¡œ í•´ë‹¹ ë‹¬ì„ í‘œì‹œí•´ì¤€ë‹¤. SELECT ANIMAL_ID, NAME, DATE_FORMAT(DATETIME, &#x27;%y-%m-%D&#x27;) AS &#x27;ë‚ ì§œ&#x27;from ANIMAL_INSorder by ANIMAL_ID ì¼ì„ ëŒ€ë¬¸ìë¡œ í‘œì‹œí•˜ê²Œ ë˜ë©´ ê¸°ìˆ˜ë¡œ í•´ë‹¹ ì¼ì„ í‘œì‹œí•´ì¤€ë‹¤. SQLë¬¸ ì²˜ë¦¬ìˆœì„œ FROM WHERE GROUP BY HAVING SELECT ORDER BY ì›í•˜ëŠ” í…Œì´ë¸”ì„ ì°¾ì•„ê°€(FROM) ì¡°ê±´ì„ ì´ìš©í•´ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ê²€ìƒ‰í•œ í›„(WHERE) ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì€ ë’¤(GROUP BY) ê·¸ë£¹í™”ëœ ë°ì´í„°ë¥¼ ì¡°ê±´ì„ ì´ìš©í•´ ê²€ìƒ‰í•œ í›„(HAVING) ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì„ íƒí•´(SELECT) ì •ë ¬í•´ì„œ ë‚´ë³´ë‚¸ë‹¤.(ORDER BY) í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ sqlë¬¸ì œselect ë¬¸ ëª¨ë“  ë ˆì½”ë“œ ì¡°íšŒí•˜ê¸° https://programmers.co.kr/learn/courses/30/lessons/59034 ì—­ìˆœ ì •ë ¬í•˜ê¸° https://programmers.co.kr/learn/courses/30/lessons/59035 ì•„í”ˆ ë™ë¬¼ ì°¾ê¸° https://programmers.co.kr/learn/courses/30/lessons/59036 ì–´ë¦° ë™ë¬¼ ì°¾ê¸° https://programmers.co.kr/learn/courses/30/lessons/59037 ë™ë¬¼ì˜ ì•„ì´ë””ì™€ ì´ë¦„ https://programmers.co.kr/learn/courses/30/lessons/59403 ì—¬ëŸ¬ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•˜ê¸° https://programmers.co.kr/learn/courses/30/lessons/59404 ìƒìœ„ nê°œ ë ˆì½”ë“œ https://programmers.co.kr/learn/courses/30/lessons/59405 ì§‘ê³„í•¨ìˆ˜ (SUM, MAX, MIN) ìµœëŒ“ ê°’ êµ¬í•˜ê¸° https://programmers.co.kr/learn/courses/30/parts/17043 ìµœì†Ÿ ê°’ êµ¬í•˜ https://programmers.co.kr/learn/courses/30/lessons/59038 ë™ë¬¼ ìˆ˜ êµ¬í•˜ê¸° https://programmers.co.kr/learn/courses/30/lessons/59406 ì¤‘ë³µ ì œê±°í•˜ê¸° https://programmers.co.kr/learn/courses/30/lessons/59408 ê·¸ë£¹í™” (GROUP BY) ê³ ì–‘ì´ì™€ ê°œëŠ” ëª‡ë§ˆë¦¬ ìˆì„ê¹Œ https://programmers.co.kr/learn/courses/30/lessons/59040 ë™ëª… ë™ë¬¼ ìˆ˜ ì°¾ê¸° https://programmers.co.kr/learn/courses/30/lessons/59041 ì…ì–‘ ì‹œê° êµ¬í•˜ê¸° https://programmers.co.kr/learn/courses/30/lessons/59412 ì…ì–‘ ì‹œê° êµ¬í•˜ê¸°2 https://programmers.co.kr/learn/courses/30/lessons/59413 NULL ì²˜ë¦¬í•˜ê¸° ì´ë¦„ì´ ì—†ëŠ” ë™ë¬¼ì˜ ì•„ì´ë”” https://programmers.co.kr/learn/courses/30/lessons/59039 ì´ë¦„ì´ ìˆëŠ” ë™ë¬¼ì˜ ì•„ì´ë”” https://programmers.co.kr/learn/courses/30/lessons/59407 NULL ì²˜ë¦¬í•˜ê¸° https://programmers.co.kr/learn/courses/30/lessons/59410 JOINë¬¸ ì—†ì–´ì§„ ê¸°ë¡ ì°¾ê¸° https://programmers.co.kr/learn/courses/30/lessons/59042 ìˆì—ˆëŠ”ë°ìš” ì—†ì—ˆìŠµë‹ˆë‹¤. https://programmers.co.kr/learn/courses/30/lessons/59043 ì˜¤ëœ ê¸°ê°„ ë³´í˜¸í•œ ë™ë¬¼(1) https://programmers.co.kr/learn/courses/30/lessons/59044 ë³´í˜¸ì†Œì—ì„œ ì¤‘ì„±í™”í•œ ë™ë¬¼ https://programmers.co.kr/learn/courses/30/lessons/59045 String, Date ë£¨ì‹œì™€ ì—˜ë¼ ì°¾ê¸° https://programmers.co.kr/learn/courses/30/lessons/59046 ì´ë¦„ì— elì´ ë“¤ì–´ê°€ëŠ” ë™ë¬¼ ì°¾ê¸° https://programmers.co.kr/learn/courses/30/lessons/59047 ì¤‘ì„±í™” ì—¬ë¶€ íŒŒì•…í•˜ê¸° https://programmers.co.kr/learn/courses/30/lessons/59409 ì˜¤ëœê¸°ê°„ ë³´í˜¸í•œ ë™ë¬¼(2) https://programmers.co.kr/learn/courses/30/lessons/59411 DATETIMEì—ì„œ DATEë¡œ í˜• ë³€í™˜ https://programmers.co.kr/learn/courses/30/lessons/59414","categories":[{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"SQL","slug":"CS/DataBase/SQL","permalink":"https://ckck803.github.io/categories/CS/DataBase/SQL/"}],"tags":[]},{"title":"ìŠ¤í”„ë§ MVC ì‹œì‘í•˜ê¸° - XMLë¡œ ì„¸íŒ…í•˜ê¸°","slug":"spring/spring5-mvc/Spring5MVC-1-xml-setting","date":"2021-03-04T06:42:21.000Z","updated":"2024-11-29T06:22:11.161Z","comments":true,"path":"2021/03/04/spring/spring5-mvc/Spring5MVC-1-xml-setting/","link":"","permalink":"https://ckck803.github.io/2021/03/04/spring/spring5-mvc/Spring5MVC-1-xml-setting/","excerpt":"ìŠ¤í”„ë§ MVC ì‹œì‘í•˜ê¸° - XMLë¡œ ì„¸íŒ…í•˜ê¸° Web.xml ì„¤ì •í•˜ê¸° root-context.xml ì„¤ì •í•˜ê¸° servlet-context ì„¤ì •í•˜ê¸° ì˜ì¡´ê´€ê³„ ì„¤ì •í•˜ê¸°&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;org.example&lt;/groupId&gt; &lt;artifactId&gt;springMVCstep3&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;properties&gt; &lt;javax.servlet-version&gt;4.0.1&lt;/javax.servlet-version&gt; &lt;javax.servlet.jsp-version&gt;2.3.3&lt;/javax.servlet.jsp-version&gt; &lt;javax.servlet.jsp.jstl-version&gt;1.2&lt;/javax.servlet.jsp.jstl-version&gt; &lt;org.springframework-version&gt;5.2.2.RELEASE&lt;/org.springframework-version&gt; &lt;!-- &lt;org.springframework-version&gt;4.3.25.RELEASE&lt;/org.springframework-version&gt; --&gt; &lt;/properties&gt; &lt;!-- ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…‹íŒ… --&gt; &lt;dependencies&gt; &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;$&#123;javax.servlet-version&#125;&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/javax.servlet.jsp-api --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt; &lt;version&gt;$&#123;javax.servlet.jsp-version&#125;&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp.jstl/jstl --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;jstl&lt;/artifactId&gt; &lt;version&gt;$&#123;javax.servlet.jsp.jstl-version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;$&#123;org.springframework-version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;finalName&gt;springMVCstep3&lt;/finalName&gt; &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;src/test/java&lt;/testSourceDirectory&gt; &lt;pluginManagement&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.8.0&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt; &lt;version&gt;3.2.1&lt;/version&gt; &lt;configuration&gt; &lt;warSourceDirectory&gt;WebContent&lt;/warSourceDirectory&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/pluginManagement&gt; &lt;/build&gt; &lt;!-- ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ê´€ë¦¬ --&gt;&lt;/project&gt; Web.xml ì„¤ì •í•˜ê¸° í†°ìº£ DispatcherServlet ì„ ìŠ¤í”„ë§ DispatcherServlet ìœ¼ë¡œ ë°”ê¾¸ê¸° Beanì„ ì •ì˜í•  xml íŒŒì¼ì„ ì •ì˜í•˜ê¸° Listener ë¥¼ ì„¤ì •í•œë‹¤. íŒŒë¼ë¯¸í„° ì¸ì½”ë” ë¥¼ ì„¤ì •í•œë‹¤. &lt;!-- í˜„ì¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°›ì•„ë“¤ì´ëŠ” ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ appServletì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì •ì˜ë˜ì–´ ìˆëŠ” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ê² ë‹¤. --&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;&lt;!-- ìš”ì²­ ì •ë³´ë¥¼ ë¶„ì„í•´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì„ íƒí•˜ëŠ” ì„œë¸”ë¦¿ì„ ì§€ì •í•œë‹¤. --&gt;&lt;servlet&gt; &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt; &lt;!-- Spring MVCì—ì„œ ì œê³µí•˜ê³  ìˆëŠ” ê¸°ë³¸ ì„œë¸”ë¦¿ì„ ì§€ì •í•œë‹¤. --&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;!-- Spring MVC ì„¤ì •ì„ ìœ„í•œ xml íŒŒì¼ì„ ì§€ì •í•œë‹¤. --&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/config/servlet-context.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;/servlet&gt; &lt;!-- Beanì„ ì •ì˜í•  xml íŒŒì¼ì„ ì§€ì •í•œë‹¤. --&gt;&lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/config/root-context.xml&lt;/param-value&gt;&lt;/context-param&gt; &lt;!-- ë¦¬ìŠ¤ë„ˆì„¤ì • --&gt;&lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;&lt;/listener&gt;","text":"ìŠ¤í”„ë§ MVC ì‹œì‘í•˜ê¸° - XMLë¡œ ì„¸íŒ…í•˜ê¸° Web.xml ì„¤ì •í•˜ê¸° root-context.xml ì„¤ì •í•˜ê¸° servlet-context ì„¤ì •í•˜ê¸° ì˜ì¡´ê´€ê³„ ì„¤ì •í•˜ê¸°&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;org.example&lt;/groupId&gt; &lt;artifactId&gt;springMVCstep3&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;properties&gt; &lt;javax.servlet-version&gt;4.0.1&lt;/javax.servlet-version&gt; &lt;javax.servlet.jsp-version&gt;2.3.3&lt;/javax.servlet.jsp-version&gt; &lt;javax.servlet.jsp.jstl-version&gt;1.2&lt;/javax.servlet.jsp.jstl-version&gt; &lt;org.springframework-version&gt;5.2.2.RELEASE&lt;/org.springframework-version&gt; &lt;!-- &lt;org.springframework-version&gt;4.3.25.RELEASE&lt;/org.springframework-version&gt; --&gt; &lt;/properties&gt; &lt;!-- ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…‹íŒ… --&gt; &lt;dependencies&gt; &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;$&#123;javax.servlet-version&#125;&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/javax.servlet.jsp-api --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt; &lt;version&gt;$&#123;javax.servlet.jsp-version&#125;&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp.jstl/jstl --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;jstl&lt;/artifactId&gt; &lt;version&gt;$&#123;javax.servlet.jsp.jstl-version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;$&#123;org.springframework-version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;finalName&gt;springMVCstep3&lt;/finalName&gt; &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;src/test/java&lt;/testSourceDirectory&gt; &lt;pluginManagement&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.8.0&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt; &lt;version&gt;3.2.1&lt;/version&gt; &lt;configuration&gt; &lt;warSourceDirectory&gt;WebContent&lt;/warSourceDirectory&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/pluginManagement&gt; &lt;/build&gt; &lt;!-- ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ê´€ë¦¬ --&gt;&lt;/project&gt; Web.xml ì„¤ì •í•˜ê¸° í†°ìº£ DispatcherServlet ì„ ìŠ¤í”„ë§ DispatcherServlet ìœ¼ë¡œ ë°”ê¾¸ê¸° Beanì„ ì •ì˜í•  xml íŒŒì¼ì„ ì •ì˜í•˜ê¸° Listener ë¥¼ ì„¤ì •í•œë‹¤. íŒŒë¼ë¯¸í„° ì¸ì½”ë” ë¥¼ ì„¤ì •í•œë‹¤. &lt;!-- í˜„ì¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°›ì•„ë“¤ì´ëŠ” ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ appServletì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì •ì˜ë˜ì–´ ìˆëŠ” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ê² ë‹¤. --&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;&lt;!-- ìš”ì²­ ì •ë³´ë¥¼ ë¶„ì„í•´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì„ íƒí•˜ëŠ” ì„œë¸”ë¦¿ì„ ì§€ì •í•œë‹¤. --&gt;&lt;servlet&gt; &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt; &lt;!-- Spring MVCì—ì„œ ì œê³µí•˜ê³  ìˆëŠ” ê¸°ë³¸ ì„œë¸”ë¦¿ì„ ì§€ì •í•œë‹¤. --&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;!-- Spring MVC ì„¤ì •ì„ ìœ„í•œ xml íŒŒì¼ì„ ì§€ì •í•œë‹¤. --&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/config/servlet-context.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;/servlet&gt; &lt;!-- Beanì„ ì •ì˜í•  xml íŒŒì¼ì„ ì§€ì •í•œë‹¤. --&gt;&lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/config/root-context.xml&lt;/param-value&gt;&lt;/context-param&gt; &lt;!-- ë¦¬ìŠ¤ë„ˆì„¤ì • --&gt;&lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;&lt;/listener&gt; &lt;!-- íŒŒë¼ë¯¸í„° ì¸ì½”ë”© í•„í„° ì„¤ì • --&gt;&lt;filter&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;forceEncoding&lt;/param-name&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app version=&quot;4.0&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;&gt; &lt;!-- ìš”ì²­ ì •ë³´ë¥¼ ë¶„ì„í•´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì„ íƒí•˜ëŠ” ì„œë¸”ë¦¿ì„ ì§€ì •í•œë‹¤. --&gt; &lt;servlet&gt; &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt; &lt;!-- Spring MVCì—ì„œ ì œê³µí•˜ê³  ìˆëŠ” ê¸°ë³¸ ì„œë¸”ë¦¿ì„ ì§€ì •í•œë‹¤. --&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;!-- Spring MVC ì„¤ì •ì„ ìœ„í•œ xml íŒŒì¼ì„ ì§€ì •í•œë‹¤. --&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/config/servlet-context.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;!-- í˜„ì¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°›ì•„ë“¤ì´ëŠ” ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ appServletì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì •ì˜ë˜ì–´ ìˆëŠ” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ê² ë‹¤. --&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;!-- Beanì„ ì •ì˜í•  xml íŒŒì¼ì„ ì§€ì •í•œë‹¤. --&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/config/root-context.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;!-- ë¦¬ìŠ¤ë„ˆì„¤ì • --&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;!-- íŒŒë¼ë¯¸í„° ì¸ì½”ë”© í•„í„° ì„¤ì • --&gt; &lt;filter&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;forceEncoding&lt;/param-name&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt;&lt;/web-app&gt; root-context.xml ì„¤ì •í•˜ê¸°&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;&lt;/beans&gt; servlet-context ì„¤ì •í•˜ê¸° ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì§„ í´ë˜ìŠ¤ë“¤ì„ Beanìœ¼ë¡œ ë“±ë¡ Componentë“¤ì„ Scaní•  ìœ„ì¹˜ë¥¼ ì§€ì •í•œë‹¤. Viewê²½ë¡œë¥¼ ìœ„í•œ prefix, suffixë¥¼ ì§€ì •í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 21 - ì  í‚¨ìŠ¤ë¥¼ ì´ìš©í•´ ë°°í¬í•˜ê¸°","slug":"spring/sample-board/board-21-jenkins-deploy","date":"2021-03-01T15:13:12.000Z","updated":"2024-02-26T15:50:12.154Z","comments":true,"path":"2021/03/02/spring/sample-board/board-21-jenkins-deploy/","link":"","permalink":"https://ckck803.github.io/2021/03/02/spring/sample-board/board-21-jenkins-deploy/","excerpt":"21. ì  í‚¨ìŠ¤ë¥¼ ì´ìš©í•´ ë°°í¬í•˜ê¸°í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜Jenkins ê´€ë¦¬ &gt; í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ Publish Over SSHë¥¼ ì„¤ì¹˜í•´ì¤€ë‹¤. ì›ê²© ì„œë²„ ì ‘ì† ì„¤ì •í•˜ê¸°","text":"21. ì  í‚¨ìŠ¤ë¥¼ ì´ìš©í•´ ë°°í¬í•˜ê¸°í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜Jenkins ê´€ë¦¬ &gt; í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ Publish Over SSHë¥¼ ì„¤ì¹˜í•´ì¤€ë‹¤. ì›ê²© ì„œë²„ ì ‘ì† ì„¤ì •í•˜ê¸°","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 20 - í”„ë¡ì‹œ ì„œë²„ ì´ìš©í•˜ê¸°","slug":"spring/sample-board/board-20-nginx","date":"2021-03-01T05:07:30.000Z","updated":"2024-02-26T15:48:03.781Z","comments":true,"path":"2021/03/01/spring/sample-board/board-20-nginx/","link":"","permalink":"https://ckck803.github.io/2021/03/01/spring/sample-board/board-20-nginx/","excerpt":"20. í”„ë¡ì‹œ ì„œë²„ ì´ìš©í•˜ê¸°í˜„ì¬ëŠ” client ê°€ Web Applicationì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” 8080í¬íŠ¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. clientê°€ ì‰½ê²Œ ì ‘ê·¼ í•  ìˆ˜ ìˆë„ë¡ 80ë²ˆ í¬íŠ¸ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ì–´ì•¼ í•˜ëŠ”ë° ubuntuì—ì„œëŠ” ì¼ë°˜ ì‚¬ìš©ìê°€ 80ë²ˆ í¬íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ì—†ë‹¤. ë§Œì•½ 80ë²ˆ í¬íŠ¸ë¡œ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê¶Œí•œ ì˜¤ë¥˜ê°€ ëœ¨ê²Œ ëœë‹¤. ê·¸ë ‡ë‹¤ê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ìš¸ ë•Œ ë§ˆë‹¤ ë§¤ë²ˆ sudoê¶Œí•œìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ë„ ì—†ëŠ” ë…¸ë¦‡ì´ë‹¤. ë§¥ì—ì„œëŠ” 80ë²ˆ í¬íŠ¸ë¡œ ì˜ ì—´ë¦¬ëŠ”ë° ìš°ë¶„íˆ¬ì—ì„œ ì˜¤ë¥˜ê°€ ë– ì„œ ë‹¹í™© í–ˆë‹¤. ìš°ë¶„íˆ¬ì—ì„œ 1024ë¯¸ë§Œ í¬íŠ¸ëŠ” ì¼ë°˜ ì‚¬ìš©ìê°€ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” í¬íŠ¸ì´ë‹¤. Caused by: java.net.SocketException: Permission denied at java.base/sun.nio.ch.Net.bind0(Native Method) ~[na:na] at java.base/sun.nio.ch.Net.bind(Net.java:455) ~[na:na] at java.base/sun.nio.ch.Net.bind(Net.java:447) ~[na:na] at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:227) ~[na:na] at java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:80) ~[na:na] at org.apache.tomcat.util.net.NioEndpoint.initServerSocket(NioEndpoint.java:228) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:211) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1159) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1245) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:603) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] at org.apache.catalina.connector.Connector.startInternal(Connector.java:1064) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] ... 29 common frames omitted nginxë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ì„œë²„ ë§Œë“¤ì–´ì£¼ê¸°80ë²ˆ í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Proxy ì„œë²„ë¥¼ ë„ì–´ ë†“ê³  Proxy ì„œë²„ë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ Spring Boot í”„ë¡œê·¸ë¨ìœ¼ë¡œ Forwarding í•´ì£¼ë„ë¡ ì„¤ì •ì„ í•  ê²ƒì´ë‹¤. sudo ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ í”„ë¡œê·¸ë¨ì„ ì‹œí‚¤ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ, ë§¤ë²ˆí•˜ê¸°ì—ëŠ” ë²ˆê±°ë¡­ë‹¤ëŠ” ë‹¨ì ë„ ìˆê³  &#x2F;etc&#x2F;sudoersì— íŒ¨ìŠ¤ì›Œë“œ ê¶Œí•œì„ í’€ì–´ì¤„ ìˆ˜ë„ ìˆì§€ë§Œ ë³´ì•ˆìƒì˜ ë¬¸ì œê°€ ìˆì–´ì„œ ê°€ì¥ ì•ˆì „í•œ ë°©ë²•ìœ¼ë¡œ Proxy ì„œë²„ë¥¼ ì´ìš©í•˜ê¸°ë¡œ í–ˆë‹¤. nginx ì„¤ì¹˜í•˜ê¸°","text":"20. í”„ë¡ì‹œ ì„œë²„ ì´ìš©í•˜ê¸°í˜„ì¬ëŠ” client ê°€ Web Applicationì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” 8080í¬íŠ¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. clientê°€ ì‰½ê²Œ ì ‘ê·¼ í•  ìˆ˜ ìˆë„ë¡ 80ë²ˆ í¬íŠ¸ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ì–´ì•¼ í•˜ëŠ”ë° ubuntuì—ì„œëŠ” ì¼ë°˜ ì‚¬ìš©ìê°€ 80ë²ˆ í¬íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ì—†ë‹¤. ë§Œì•½ 80ë²ˆ í¬íŠ¸ë¡œ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê¶Œí•œ ì˜¤ë¥˜ê°€ ëœ¨ê²Œ ëœë‹¤. ê·¸ë ‡ë‹¤ê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ìš¸ ë•Œ ë§ˆë‹¤ ë§¤ë²ˆ sudoê¶Œí•œìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ë„ ì—†ëŠ” ë…¸ë¦‡ì´ë‹¤. ë§¥ì—ì„œëŠ” 80ë²ˆ í¬íŠ¸ë¡œ ì˜ ì—´ë¦¬ëŠ”ë° ìš°ë¶„íˆ¬ì—ì„œ ì˜¤ë¥˜ê°€ ë– ì„œ ë‹¹í™© í–ˆë‹¤. ìš°ë¶„íˆ¬ì—ì„œ 1024ë¯¸ë§Œ í¬íŠ¸ëŠ” ì¼ë°˜ ì‚¬ìš©ìê°€ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” í¬íŠ¸ì´ë‹¤. Caused by: java.net.SocketException: Permission denied at java.base/sun.nio.ch.Net.bind0(Native Method) ~[na:na] at java.base/sun.nio.ch.Net.bind(Net.java:455) ~[na:na] at java.base/sun.nio.ch.Net.bind(Net.java:447) ~[na:na] at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:227) ~[na:na] at java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:80) ~[na:na] at org.apache.tomcat.util.net.NioEndpoint.initServerSocket(NioEndpoint.java:228) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:211) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1159) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1245) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:603) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] at org.apache.catalina.connector.Connector.startInternal(Connector.java:1064) ~[tomcat-embed-core-9.0.41.jar!/:9.0.41] ... 29 common frames omitted nginxë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ì„œë²„ ë§Œë“¤ì–´ì£¼ê¸°80ë²ˆ í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Proxy ì„œë²„ë¥¼ ë„ì–´ ë†“ê³  Proxy ì„œë²„ë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ Spring Boot í”„ë¡œê·¸ë¨ìœ¼ë¡œ Forwarding í•´ì£¼ë„ë¡ ì„¤ì •ì„ í•  ê²ƒì´ë‹¤. sudo ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ í”„ë¡œê·¸ë¨ì„ ì‹œí‚¤ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ, ë§¤ë²ˆí•˜ê¸°ì—ëŠ” ë²ˆê±°ë¡­ë‹¤ëŠ” ë‹¨ì ë„ ìˆê³  &#x2F;etc&#x2F;sudoersì— íŒ¨ìŠ¤ì›Œë“œ ê¶Œí•œì„ í’€ì–´ì¤„ ìˆ˜ë„ ìˆì§€ë§Œ ë³´ì•ˆìƒì˜ ë¬¸ì œê°€ ìˆì–´ì„œ ê°€ì¥ ì•ˆì „í•œ ë°©ë²•ìœ¼ë¡œ Proxy ì„œë²„ë¥¼ ì´ìš©í•˜ê¸°ë¡œ í–ˆë‹¤. nginx ì„¤ì¹˜í•˜ê¸°sudo apt-get install nginx nginx ì‹¤í–‰sudo service nginx start í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í–‰í•œ í›„ 80ë²ˆ í¬íŠ¸ë¡œ ì ‘ì†í•˜ê²Œ ë˜ë©´ í™˜ì˜í•œë‹¤ëŠ” nginx í˜ì´ì§€ê°€ ë³´ì¸ë‹¤. nginx ì„¤ì • í™•ì¸í•˜ê¸°nignxì˜ ê¸°ë³¸ì ì¸ ì„¤ì •ì€ nginx.confíŒŒì¼ì— ì €ì¥ë¼ ìˆë‹¤. ë§ˆì§€ë§‰ ë¶€ë¶„ì„ ë³´ë©´ conf.dí´ë”ì— nginxì— ì¶”ê°€ì ì¸ ì„¤ì • ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ê²Œ í•˜ëŠ” ì„¤ì •ì´ ìˆë‹¤. ì—¬ê¸°ì— 80ë²ˆ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ 8080í¬íŠ¸ë¡œ í¬ì›Œë”© í•  ìˆ˜ ìˆê²Œ ì„¤ì • íŒŒì¼ì„ ë§Œë“¤ì–´ ì£¼ë„ë¡í•œë‹¤. ì„¤ì • íŒŒì¼ì„ ì‚´í´ë³´ë©´ conf.d ë””ë ‰í„°ë¦¬ì™€ sites-enabled(sites-available) ë””ë ‰í„°ë¦¬ ë‚´ì˜ êµ¬ì„±ì„ ì½ì–´ì˜¤ëŠ” ë¶€ë¶„ì´ ìˆë‹¤.sites-enabledì—ëŠ” nginxì— ëŒ€í•œ ê¸°ë³¸ ì„¤ì •ê°’ì´ ìˆë‹¤. ë‘˜ ì¤‘ ì•„ë¬´ê³³ì—ë‚˜ ì„¤ì • ê°’ì„ ë„£ì–´ë„ ë˜ì§€ë§Œ, ì„¤ì •ê³¼ ê´€ë ¨ëœ ë¶€ë¶„ì´ë¼ conf.d ë””ë ‰í„°ë¦¬ì— ì €ì¥í•˜ë„ë¡ í–ˆë‹¤. &#x2F;etc&#x2F;nginx&#x2F;nginx.conf http &#123; ... include /etc/nginx/conf.d/*.conf; # include /etc/nginx/sites-enabled/*; ë®ì–´ì“°ê¸°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•œ ì£¼ì„ ì²˜ë¦¬&#125; &#x2F;etc&#x2F;nginx&#x2F;conf.d í´ë”ë¡œ ì´ë™í•´ í¬íŠ¸ í¬ì›Œë”© ì„¤ì •ì„ ìœ„í•œ server.confíŒŒì¼ì„ ìƒì„±í•œë‹¤.nginx listen í¬íŠ¸ë¡œëŠ” 80ë²ˆ í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ê³  í•´ë‹¹ urlë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì„ 8080í¬íŠ¸ë¡œ ë³´ë‚´ì£¼ëŠ” ì„¤ì •ì„ ì¶”ê°€í•œë‹¤. proxy_set_header X-Real-Ip $remote_addr : X-Real-Ip í—¤ë” ê°’ìœ¼ë¡œ Clientì˜ IPê°’ì„ ë„£ì–´ì¤€ë‹¤.proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for : X-Forwarded-For í—¤ë” ê°’ìœ¼ë¡œ í¬ì›Œë”© ëœ í”„ë¡ì‹œ ì„œë²„ì˜ IPê°’ì„ ë„£ì–´ì¤€ë‹¤.proxy_set_header Host $http_host : Host í—¤ë”ì—ëŠ” ì„œë²„ì˜ ì£¼ì†Œ or ë„ë©”ì¸ì„ ë„£ì–´ì¤€ë‹¤. (ë„ë©”ì¸ ì •ë³´ë¥¼ ë§¤í•‘í•˜ê³  ì‹¶ì„ ë•Œë„ ì‚¬ìš©) &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;server.conf server &#123; listen 80; server_name localhost; location / &#123; proxy_pass http://localhost:8080; proxy_set_header X-Real-Ip $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; &#125;&#125; 80ë²ˆ í¬íŠ¸ë¡œ ì ‘ê·¼ í–ˆì„ ë•Œ 8080í¬íŠ¸ì— ë– ìˆëŠ” Web Applicationì´ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 19 - Buildì‹œ DB ì—°ê²° Bug Fix ë° Profile ì„¤ì •","slug":"spring/sample-board/board-19-profile","date":"2021-02-25T23:03:09.000Z","updated":"2024-02-26T15:47:47.632Z","comments":true,"path":"2021/02/26/spring/sample-board/board-19-profile/","link":"","permalink":"https://ckck803.github.io/2021/02/26/spring/sample-board/board-19-profile/","excerpt":"19. Buildì‹œ DB ì—°ê²° Bug Fix ë° Profile ì„¤ì •Jenkinsì—ì„œ build ì˜¤ë¥˜Jenkinsì—ì„œ Buildë¥¼ ì§„í–‰í•˜ë©´ Testì‹œ í•´ë‹¹ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. Testë¥¼ ì§„í–‰í•˜ë©´ì„œ DBConfigByYml í´ë˜ìŠ¤ë‚´ í•„ë“œë¥¼ Application-mysql.yml ë¥¼ ì´ìš©í•´ ì±„ìš°ê²Œ ë˜ëŠ”ë° Application-mysql.yml íŒŒì¼ì´ Githubì—ëŠ” ì˜¬ë¼ê°€ ìˆì§€ ì•Šì•„ ë¬¸ì œê°€ ìƒê¸°ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. &gt; Task :testSampleBoardApplicationTests &gt; contextLoads() FAILED java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:132 Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:800 Caused by: org.springframework.beans.factory.BeanCreationException at AutowiredAnnotationBeanPostProcessor.java:405 Caused by: java.lang.IllegalArgumentException at PropertyPlaceholderHelper.java:1782021-02-24 16:17:02.458 INFO 1610 --- [extShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor : Shutting down ExecutorService &#x27;applicationTaskExecutor&#x27;17 tests completed, 1 failed&gt; Task :test FAILEDFAILURE: Build failed with an exception.* What went wrong:Execution failed for task &#x27;:test&#x27;.&gt; There were failing tests. See the report at: file:///var/jenkins_home/workspace/sample-board/build/reports/tests/test/index.html* Try:Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.* Get more help at https://help.gradle.orgBUILD FAILED in 53s7 actionable tasks: 7 executedBuild step &#x27;Invoke Gradle script&#x27; changed build result to FAILUREBuild step &#x27;Invoke Gradle script&#x27; marked build as failureFinished: FAILURE ì—¬ëŸ¬ê°œì˜ @PropertySource ì‚¬ìš©í•˜ê¸°ì²«ë²ˆì§¸ë¡œ í•´ê²°í•œ ë°©ë²•ì€ @PropertySourceë¥¼ ë‘ê°œ ì‚¬ìš©í•˜ì—¬ testë¥¼ ì§„í–‰í•  ì‹œì—ëŠ” H2 databaseë¥¼ ë°”ë¼ë³´ê²Œ í•˜ê³  ìš´ì˜ì‹œì—ëŠ” MySQLì„ ë°”ë¼ ë³¼ ìˆ˜ ìˆê²Œ ì„¤ì • íŒŒì¼ì„ ë‘ê²Œ ë§Œë“¤ì–´ ì‚¬ìš©í–ˆë‹¤. @PropertySourceëŠ” ìˆœì„œì— ë”°ë¼ ì•„ë˜ ê°’ì´ ì´ì „ ê°’ì„ ë®ì–´ ì“°ê²Œ ëœë‹¤. DBConfigByYml.java @Configuration@PropertySource(value = &quot;classpath:application-h2.yml&quot;, factory = YamlPropertySourceFactory.class, ignoreResourceNotFound = true)@PropertySource(value = &quot;classpath:application-mysql.yml&quot;, factory = YamlPropertySourceFactory.class, ignoreResourceNotFound = true)public class DBConfigByYml &#123; @Value(&quot;$&#123;spring.datasource.driver-class-name&#125;&quot;) private String driverClassName; @Value(&quot;$&#123;spring.datasource.url&#125;&quot;) private String url; @Value(&quot;$&#123;spring.datasource.username&#125;&quot;) private String username; @Value(&quot;$&#123;spring.datasource.password&#125;&quot;) private String password; @Bean public DataSource dataSource() &#123; return DataSourceBuilder.create() .driverClassName(driverClassName) .url(url) .username(username) .password(password) .build(); &#125;&#125; ì—¬ëŸ¬ê°œì˜ PropertySource ë¬¶ê¸°","text":"19. Buildì‹œ DB ì—°ê²° Bug Fix ë° Profile ì„¤ì •Jenkinsì—ì„œ build ì˜¤ë¥˜Jenkinsì—ì„œ Buildë¥¼ ì§„í–‰í•˜ë©´ Testì‹œ í•´ë‹¹ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. Testë¥¼ ì§„í–‰í•˜ë©´ì„œ DBConfigByYml í´ë˜ìŠ¤ë‚´ í•„ë“œë¥¼ Application-mysql.yml ë¥¼ ì´ìš©í•´ ì±„ìš°ê²Œ ë˜ëŠ”ë° Application-mysql.yml íŒŒì¼ì´ Githubì—ëŠ” ì˜¬ë¼ê°€ ìˆì§€ ì•Šì•„ ë¬¸ì œê°€ ìƒê¸°ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. &gt; Task :testSampleBoardApplicationTests &gt; contextLoads() FAILED java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:132 Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:800 Caused by: org.springframework.beans.factory.BeanCreationException at AutowiredAnnotationBeanPostProcessor.java:405 Caused by: java.lang.IllegalArgumentException at PropertyPlaceholderHelper.java:1782021-02-24 16:17:02.458 INFO 1610 --- [extShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor : Shutting down ExecutorService &#x27;applicationTaskExecutor&#x27;17 tests completed, 1 failed&gt; Task :test FAILEDFAILURE: Build failed with an exception.* What went wrong:Execution failed for task &#x27;:test&#x27;.&gt; There were failing tests. See the report at: file:///var/jenkins_home/workspace/sample-board/build/reports/tests/test/index.html* Try:Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.* Get more help at https://help.gradle.orgBUILD FAILED in 53s7 actionable tasks: 7 executedBuild step &#x27;Invoke Gradle script&#x27; changed build result to FAILUREBuild step &#x27;Invoke Gradle script&#x27; marked build as failureFinished: FAILURE ì—¬ëŸ¬ê°œì˜ @PropertySource ì‚¬ìš©í•˜ê¸°ì²«ë²ˆì§¸ë¡œ í•´ê²°í•œ ë°©ë²•ì€ @PropertySourceë¥¼ ë‘ê°œ ì‚¬ìš©í•˜ì—¬ testë¥¼ ì§„í–‰í•  ì‹œì—ëŠ” H2 databaseë¥¼ ë°”ë¼ë³´ê²Œ í•˜ê³  ìš´ì˜ì‹œì—ëŠ” MySQLì„ ë°”ë¼ ë³¼ ìˆ˜ ìˆê²Œ ì„¤ì • íŒŒì¼ì„ ë‘ê²Œ ë§Œë“¤ì–´ ì‚¬ìš©í–ˆë‹¤. @PropertySourceëŠ” ìˆœì„œì— ë”°ë¼ ì•„ë˜ ê°’ì´ ì´ì „ ê°’ì„ ë®ì–´ ì“°ê²Œ ëœë‹¤. DBConfigByYml.java @Configuration@PropertySource(value = &quot;classpath:application-h2.yml&quot;, factory = YamlPropertySourceFactory.class, ignoreResourceNotFound = true)@PropertySource(value = &quot;classpath:application-mysql.yml&quot;, factory = YamlPropertySourceFactory.class, ignoreResourceNotFound = true)public class DBConfigByYml &#123; @Value(&quot;$&#123;spring.datasource.driver-class-name&#125;&quot;) private String driverClassName; @Value(&quot;$&#123;spring.datasource.url&#125;&quot;) private String url; @Value(&quot;$&#123;spring.datasource.username&#125;&quot;) private String username; @Value(&quot;$&#123;spring.datasource.password&#125;&quot;) private String password; @Bean public DataSource dataSource() &#123; return DataSourceBuilder.create() .driverClassName(driverClassName) .url(url) .username(username) .password(password) .build(); &#125;&#125; ì—¬ëŸ¬ê°œì˜ PropertySource ë¬¶ê¸°PropertySources ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ê°œì˜ PropertySourceë¥¼ ë¬¶ì„ ìˆ˜ ìˆë‹¤. @PropertySources(&#123; @PropertySource(value = &quot;classpath:application-h2.yml&quot;, factory = YamlPropertySourceFactory.class, ignoreResourceNotFound = true), @PropertySource(value = &quot;classpath:application-mysql.yml&quot;, factory = YamlPropertySourceFactory.class, ignoreResourceNotFound = true)&#125;) Profile ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•œ ë°©ë²•ë‘ë²ˆì§¸ë¡œ í•´ê²°í•œ ë°©ë²•ì€ Profile ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ ìš´ì˜ì‹œì—ë§Œ ì„¤ì •ì„ êµ¬ì„±í•˜ë„ë¡ í–ˆë‹¤. ìš´ì˜ì™¸ì—ëŠ” MySQL ì„¤ì •ì„ êµ¬ì„±í•˜ì§€ ì•Šë„ë¡ í•´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•Šê²Œ í–ˆë‹¤. DBConfigByYml.java @Configuration@Profile(&quot;prod&quot;)@PropertySource(value = &quot;classpath:application-mysql.yml&quot;, factory = YamlPropertySourceFactory.class, ignoreResourceNotFound = true)public class DBConfigByYml &#123; @Value(&quot;$&#123;spring.datasource.driver-class-name&#125;&quot;) private String driverClassName; @Value(&quot;$&#123;spring.datasource.url&#125;&quot;) private String url; @Value(&quot;$&#123;spring.datasource.username&#125;&quot;) private String username; @Value(&quot;$&#123;spring.datasource.password&#125;&quot;) private String password; @Bean public DataSource dataSource() &#123; return DataSourceBuilder.create() .driverClassName(driverClassName) .url(url) .username(username) .password(password) .build(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 18 - ì™¸ë¶€ë¡œë¶€í„° ì„¤ì • ë°›ê¸°(yml)","slug":"spring/sample-board/board-18-yml","date":"2021-02-24T12:34:39.000Z","updated":"2024-02-26T15:47:44.028Z","comments":true,"path":"2021/02/24/spring/sample-board/board-18-yml/","link":"","permalink":"https://ckck803.github.io/2021/02/24/spring/sample-board/board-18-yml/","excerpt":"18. ì™¸ë¶€ë¡œë¶€í„° ì„¤ì • ë°›ê¸°(yml)YamlPropertySourceFactory.java public class YamlPropertySourceFactory implements PropertySourceFactory &#123; @Override public PropertySource&lt;?&gt; createPropertySource(String name, EncodedResource resource) throws IOException &#123; Properties propertiesFromYaml = loadYamlIntoProperties(resource); String sourceName = name != null ? name : resource.getResource().getFilename(); return new PropertiesPropertySource(sourceName, propertiesFromYaml); &#125; private Properties loadYamlIntoProperties(EncodedResource resource) throws FileNotFoundException &#123; try &#123; YamlPropertiesFactoryBean factory = new YamlPropertiesFactoryBean(); factory.setResources(resource.getResource()); factory.afterPropertiesSet(); return factory.getObject(); &#125; catch (IllegalStateException e) &#123; // for ignoreResourceNotFound Throwable cause = e.getCause(); if (cause instanceof FileNotFoundException) &#123; throw (FileNotFoundException) e.getCause(); &#125; throw e; &#125; &#125;&#125; DBConfigByYml.java @Configuration@PropertySource(value = &quot;classpath:application-mysql.yml&quot;, factory = YamlPropertySourceFactory.class)public class DBConfigByYml &#123; @Value(&quot;$&#123;spring.datasource.driver-class-name&#125;&quot;) private String driverClassName; @Value(&quot;$&#123;spring.datasource.url&#125;&quot;) private String url; @Value(&quot;$&#123;spring.datasource.username&#125;&quot;) private String username; @Value(&quot;$&#123;spring.datasource.password&#125;&quot;) private String password; @Bean public DataSource dataSource()&#123; return DataSourceBuilder.create() .driverClassName(driverClassName) .url(url) .username(username) .password(password) .build(); &#125;&#125;","text":"18. ì™¸ë¶€ë¡œë¶€í„° ì„¤ì • ë°›ê¸°(yml)YamlPropertySourceFactory.java public class YamlPropertySourceFactory implements PropertySourceFactory &#123; @Override public PropertySource&lt;?&gt; createPropertySource(String name, EncodedResource resource) throws IOException &#123; Properties propertiesFromYaml = loadYamlIntoProperties(resource); String sourceName = name != null ? name : resource.getResource().getFilename(); return new PropertiesPropertySource(sourceName, propertiesFromYaml); &#125; private Properties loadYamlIntoProperties(EncodedResource resource) throws FileNotFoundException &#123; try &#123; YamlPropertiesFactoryBean factory = new YamlPropertiesFactoryBean(); factory.setResources(resource.getResource()); factory.afterPropertiesSet(); return factory.getObject(); &#125; catch (IllegalStateException e) &#123; // for ignoreResourceNotFound Throwable cause = e.getCause(); if (cause instanceof FileNotFoundException) &#123; throw (FileNotFoundException) e.getCause(); &#125; throw e; &#125; &#125;&#125; DBConfigByYml.java @Configuration@PropertySource(value = &quot;classpath:application-mysql.yml&quot;, factory = YamlPropertySourceFactory.class)public class DBConfigByYml &#123; @Value(&quot;$&#123;spring.datasource.driver-class-name&#125;&quot;) private String driverClassName; @Value(&quot;$&#123;spring.datasource.url&#125;&quot;) private String url; @Value(&quot;$&#123;spring.datasource.username&#125;&quot;) private String username; @Value(&quot;$&#123;spring.datasource.password&#125;&quot;) private String password; @Bean public DataSource dataSource()&#123; return DataSourceBuilder.create() .driverClassName(driverClassName) .url(url) .username(username) .password(password) .build(); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 17 - ì™¸ë¶€ë¡œë¶€í„° ì„¤ì • ë°›ê¸°(property)","slug":"spring/sample-board/board-17-properties","date":"2021-02-24T10:31:58.000Z","updated":"2024-02-26T15:47:39.672Z","comments":true,"path":"2021/02/24/spring/sample-board/board-17-properties/","link":"","permalink":"https://ckck803.github.io/2021/02/24/spring/sample-board/board-17-properties/","excerpt":"17. ì™¸ë¶€ë¡œë¶€í„° ì„¤ì • ë°›ê¸°(property)Githubì— í”„ë¡œì íŠ¸ë¥¼ ì˜¬ë¦´ë•Œ ë°ì´í„° ë² ì´ìŠ¤ ì ‘ì† ì—°ê²°ê³¼ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì´ ì—´ëŒí•´ì„œëŠ” ì•ˆë˜ëŠ” ì •ë³´ë¼ í˜•ìƒê´€ë¦¬ì—ì„œ ì œì™¸í•œ ìƒíƒœë¡œ ì˜¬ë¦¬ê²Œ ëœë‹¤. .gitignore **/application-mysql.yml**/application-mysql.properties ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†ì„ ìœ„í•œ properties ë§Œë“¤ê¸°application-mysql.properties spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driverspring.datasource.url=jdbc:mysql://localhost:3306/&#123;í…Œì´ë¸”&#125;serverTimezone=UTC&amp;characterEncoding=UTF-8spring.datasource.username=&#123;Username&#125;spring.datasource.password=&#123;Password&#125; TransactionManagementConfigurerì€ Springì—ì„œ ë°í‹°ì–´ë² ì´ìŠ¤ ì—°ê²°ì„ ì§€ì›í•œë‹¤. DBConfig.java","text":"17. ì™¸ë¶€ë¡œë¶€í„° ì„¤ì • ë°›ê¸°(property)Githubì— í”„ë¡œì íŠ¸ë¥¼ ì˜¬ë¦´ë•Œ ë°ì´í„° ë² ì´ìŠ¤ ì ‘ì† ì—°ê²°ê³¼ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì´ ì—´ëŒí•´ì„œëŠ” ì•ˆë˜ëŠ” ì •ë³´ë¼ í˜•ìƒê´€ë¦¬ì—ì„œ ì œì™¸í•œ ìƒíƒœë¡œ ì˜¬ë¦¬ê²Œ ëœë‹¤. .gitignore **/application-mysql.yml**/application-mysql.properties ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†ì„ ìœ„í•œ properties ë§Œë“¤ê¸°application-mysql.properties spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driverspring.datasource.url=jdbc:mysql://localhost:3306/&#123;í…Œì´ë¸”&#125;serverTimezone=UTC&amp;characterEncoding=UTF-8spring.datasource.username=&#123;Username&#125;spring.datasource.password=&#123;Password&#125; TransactionManagementConfigurerì€ Springì—ì„œ ë°í‹°ì–´ë² ì´ìŠ¤ ì—°ê²°ì„ ì§€ì›í•œë‹¤. DBConfig.java @Configuration@PropertySource(value = &quot;classpath:/application-mysql.properties&quot;)public class DBConfig implements TransactionManagementConfigurer &#123; @Value(&quot;$&#123;spring.datasource.driver-class-name&#125;&quot;) private String driverClassName; @Value(&quot;$&#123;spring.datasource.url&#125;&quot;) private String url; @Value(&quot;$&#123;spring.datasource.username&#125;&quot;) private String username; @Value(&quot;$&#123;spring.datasource.password&#125;&quot;) private String password; @Bean public DataSource dataSource()&#123; return DataSourceBuilder.create() .driverClassName(driverClassName) .url(url) .username(username) .password(password) .build(); &#125; @Override public TransactionManager annotationDrivenTransactionManager() &#123; return new DataSourceTransactionManager(dataSource()); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬4 - ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ","slug":"spring/spring-core/basic/basic4-singleton","date":"2021-02-22T14:45:34.000Z","updated":"2024-03-04T10:44:12.496Z","comments":true,"path":"2021/02/22/spring/spring-core/basic/basic4-singleton/","link":"","permalink":"https://ckck803.github.io/2021/02/22/spring/spring-core/basic/basic4-singleton/","excerpt":"ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬4 - ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ","text":"ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬4 - ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Core","slug":"Spring/Spring-Core","permalink":"https://ckck803.github.io/categories/Spring/Spring-Core/"}],"tags":[]},{"title":"ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ ì´í•´ - ê°ì²´ ì§€í–¥ ì›ë¦¬ ì ìš©","slug":"spring/spring-core/basic/basic2","date":"2021-02-20T07:58:27.000Z","updated":"2024-03-04T10:44:08.949Z","comments":true,"path":"2021/02/20/spring/spring-core/basic/basic2/","link":"","permalink":"https://ckck803.github.io/2021/02/20/spring/spring-core/basic/basic2/","excerpt":"ëª©ì°¨ Post not found: spring-boot/spring-core/basic/basic2 ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID DIP ì›ì¹™ ìœ„ë°˜ - ì¶”ìƒí™”ì™€ êµ¬ì²´í™” ë‘˜ë‹¤ ì˜ì¡´MemberServiceImpl í´ë˜ìŠ¤ëŠ” MemberRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ì¡´í•˜ë©´ì„œ êµ¬í˜„ í´ë˜ìŠ¤ì¸ MemoryMemberRepositoryë„ ì˜ì¡´í•˜ê³  ìˆë‹¤. public class MemberServiceImpl implements MemberService&#123; // MemberServiceImpl í´ë˜ìŠ¤ëŠ” MemberRepository ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ì¸ MemoryMemberRepository ë‘˜ë‹¤ ì˜ì¡´í•˜ê³  ìˆë‹¤. private final MemberRepository memberRepository = new MemoryMemberRepository(); @Override public void join(Member member) &#123; memberRepository.save(member); &#125; @Override public Member findMember(Long memberId) &#123; return memberRepository.findById(memberId); &#125;&#125; OrderServiceImpl í´ë˜ìŠ¤ëŠ” MemberRepository ì¸í„°í˜ì´ìŠ¤ì™€ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ì¡´í•˜ë©´ì„œ êµ¬í˜„ í´ë˜ìŠ¤ì¸ MemoryMemberRepository ì™€ RateDiscountPolicy ë¥¼ ì˜ì¡´í•˜ê³  ìˆë‹¤. ì¶”ìƒí™”ì™€ êµ¬ì²´í™” ë‘˜ë‹¤ ì˜ì¡´í•˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤.â€“&gt; DIP ìœ„ë°˜ DIPì˜ ì›ì¹™ì„ ì§€í‚¤ê¸° ìœ„í•´ ì˜ì¡´ classë‚´ì—ì„œ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¶€ë¶„ì„ ì‚­ì œí•˜ê²Œ ë˜ë©´ ê°ì²´ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ì„œ nullPointExceptionì´ ë°œìƒí•œë‹¤. public class OrderServiceImpl implements OrderService &#123; // OrderServiceImpl í´ë˜ìŠ¤ëŠ” MemberRepository ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ì¸ MemoryMemberRepository // DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ì¸ RateDiscountPolicy ë¥¼ ì˜ì¡´í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. private final MemberRepository memberRepository = new MemoryMemberRepository(); private final DiscountPolicy discountPolicy = new RateDiscountPolicy(); @Override public Order createOrder(Long memberId, String itemName, int itemPrice) &#123; Member member = memberRepository.findById(memberId); int discountPrice = discountPolicy.discount(member, itemPrice); return new Order(memberId, itemName, itemPrice, discountPrice); &#125;&#125;","text":"ëª©ì°¨ Post not found: spring-boot/spring-core/basic/basic2 ê°ì²´ ì§€í–¥ ì„¤ê³„ 5ì›ì¹™ SOLID DIP ì›ì¹™ ìœ„ë°˜ - ì¶”ìƒí™”ì™€ êµ¬ì²´í™” ë‘˜ë‹¤ ì˜ì¡´MemberServiceImpl í´ë˜ìŠ¤ëŠ” MemberRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ì¡´í•˜ë©´ì„œ êµ¬í˜„ í´ë˜ìŠ¤ì¸ MemoryMemberRepositoryë„ ì˜ì¡´í•˜ê³  ìˆë‹¤. public class MemberServiceImpl implements MemberService&#123; // MemberServiceImpl í´ë˜ìŠ¤ëŠ” MemberRepository ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ì¸ MemoryMemberRepository ë‘˜ë‹¤ ì˜ì¡´í•˜ê³  ìˆë‹¤. private final MemberRepository memberRepository = new MemoryMemberRepository(); @Override public void join(Member member) &#123; memberRepository.save(member); &#125; @Override public Member findMember(Long memberId) &#123; return memberRepository.findById(memberId); &#125;&#125; OrderServiceImpl í´ë˜ìŠ¤ëŠ” MemberRepository ì¸í„°í˜ì´ìŠ¤ì™€ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ì¡´í•˜ë©´ì„œ êµ¬í˜„ í´ë˜ìŠ¤ì¸ MemoryMemberRepository ì™€ RateDiscountPolicy ë¥¼ ì˜ì¡´í•˜ê³  ìˆë‹¤. ì¶”ìƒí™”ì™€ êµ¬ì²´í™” ë‘˜ë‹¤ ì˜ì¡´í•˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤.â€“&gt; DIP ìœ„ë°˜ DIPì˜ ì›ì¹™ì„ ì§€í‚¤ê¸° ìœ„í•´ ì˜ì¡´ classë‚´ì—ì„œ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¶€ë¶„ì„ ì‚­ì œí•˜ê²Œ ë˜ë©´ ê°ì²´ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ì„œ nullPointExceptionì´ ë°œìƒí•œë‹¤. public class OrderServiceImpl implements OrderService &#123; // OrderServiceImpl í´ë˜ìŠ¤ëŠ” MemberRepository ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ì¸ MemoryMemberRepository // DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ì¸ RateDiscountPolicy ë¥¼ ì˜ì¡´í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. private final MemberRepository memberRepository = new MemoryMemberRepository(); private final DiscountPolicy discountPolicy = new RateDiscountPolicy(); @Override public Order createOrder(Long memberId, String itemName, int itemPrice) &#123; Member member = memberRepository.findById(memberId); int discountPrice = discountPolicy.discount(member, itemPrice); return new Order(memberId, itemName, itemPrice, discountPrice); &#125;&#125; OCP ì›ì¹™ ìœ„ë°˜ - ì •ì±… ë³€ê²½ì‹œ client ì½”ë“œë¥¼ ìˆ˜ì •DiscountPolicy ì˜ êµ¬í˜„ì²´ê°€ FixDiscountPolicy ì—ì„œ RateDiscountPolicy ë¡œ ë°”ë€Œê²Œ ë˜ë©´ OrderServiceImpl ì—ì„œ FixDiscountPolicyë¥¼ RateDiscountPolicyë¡œ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì¤˜ì•¼ í•œë‹¤. êµ¬í˜„ ê°ì²´ë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½â€“&gt; OCP ìœ„ë°˜ OrderServiceImpl.java public class OrderServiceImpl implements OrderService &#123; private final MemberRepository memberRepository = new MemoryMemberRepository(); // FixDiscountPolicy ì—ì„œ RateDiscountPolicy ë¡œ êµ¬í˜„ì²´ë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ” Client ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. // private final DiscountPolicy discountPolicy = new FixDiscountPolicy(); private final DiscountPolicy discountPolicy = new RateDiscountPolicy(); @Override public Order createOrder(Long memberId, String itemName, int itemPrice) &#123; Member member = memberRepository.findById(memberId); int discountPrice = discountPolicy.discount(member, itemPrice); return new Order(memberId, itemName, itemPrice, discountPrice); &#125;&#125; ê°ì²´ì˜ ìƒì„± ë° ì—°ê²°ê³¼ ì‹¤í–‰í•˜ëŠ” ë¶€ë¶„ì„ ë¶„ë¦¬ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ë°©ì‹ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ êµ¬í˜„ ê°ì²´ ìƒì„± ë° ì—°ê²° ì„ ìœ„í•œ ë³„ë„ì˜ ì„¤ì • class ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ê°€ ì´ë£¨ì–´ì§€ê²Œ ëë‹¤.â€“&gt; ê°ì²´ ìƒì„± ë° ì—°ê²°ê³¼ ì‹¤í–‰í•˜ëŠ” ë¶€ë¶„ì˜ logicì´ ë¶„ë¦¬ê°€ ëë‹¤. AppConfig í´ë˜ìŠ¤ ë‚´ì˜ memberService ë©”ì†Œë“œëŠ” MemberServiceì˜ êµ¬í˜„ì²´ì¸ MemberServiceImplë¥¼ ë°˜í™˜í•œë‹¤.MemberServiceImpl ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ MemberRepositoryì˜ êµ¬í˜„ì²´ì¸ MemoryMemberRepository ê°ì²´ë¥¼ ì£¼ì…í•´ì¤€ë‹¤. MemberServiceImpl ìƒì„±ìë¥¼ í†µí•´ MemoryMemberRepository ê°ì²´ë¥¼ ì£¼ì…í•´ì£¼ëŠ” ê²ƒì„ ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…ì´ë¼ í•œë‹¤. AppConfig.java public class AppConfig &#123; // memberService ë©”ì†Œë“œì—ì„œ MemberServiceImpl ê°ì²´ ìƒì„± ë° MemberRepository ê°ì²´ì— ëŒ€í•œ ì˜ì¡´ì„± ì£¼ì…ì„ í•´ì¤€ë‹¤. // ì˜ì¡´ì„± ì£¼ì…ì‹œ ì¸í„°í˜ì´ìŠ¤ ë° ì¶”ìƒ í´ë˜ìŠ¤ì— ëŒ€í•œ êµ¬í˜„ ê°ì²´ê°€ ë“¤ì–´ê°€ê¸° ëœë‹¤. MemoryMemberRepository public MemberService memberService()&#123; return new MemberServiceImpl(new MemoryMemberRepository()); &#125; // orderService ë©”ì†Œë“œì—ì„œ OrderServiceImpl ê°ì²´ ìƒì„± ë° MemberRepository ê°ì²´ì™€ DiscountPolicy ê°ì²´ì— ëŒ€í•œ ì˜ì¡´ì„± ì£¼ì…ì„ í•œë‹¤. public OrderService orderService()&#123; return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy()); &#125;&#125; ì˜ì¡´ì„±ì„ ì£¼ì… ë°›ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ ì¤¬ë‹¤. MemberServiceImpl ëŠ” ê°ì²´ ìƒì„±ì‹œ ì™¸ë¶€ë¡œë¶€í„° MemberRepository ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ì£¼ì… ë°›ê²Œ ëœë‹¤. MemberRepository ì— ëŒ€í•œ êµ¬í˜„ í´ë˜ìŠ¤ ê´€ë¦¬ëŠ” ë” ì´ìƒ MemberServiceImpl ì—ì„œ ê´€ë¦¬í•˜ì§€ ì•Šê³  ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ê²Œ ëë‹¤. MemberServiceImpl ëŠ” ì´ì œ MemberRepository ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ê²Œ ë˜ë¯€ë¡œ DIP ì›ì¹™ì„ ì§€í‚¤ê²Œ ëë‹¤. MemberServiceImpl.java public class MemberServiceImpl implements MemberService&#123; private final MemberRepository memberRepository; public MemberServiceImpl(MemberRepository memberRepository)&#123; this.memberRepository = memberRepository; &#125; @Override public void join(Member member) &#123; memberRepository.save(member); &#125; @Override public Member findMember(Long memberId) &#123; return memberRepository.findById(memberId); &#125;&#125; OrderServiceImpl í´ë˜ìŠ¤ ì—­ì‹œ ê°ì²´ ì…ì„±ì‹œ ì˜ì¡´ ê°ì²´ë¥¼ ì£¼ì… ë°›ê¸° ìœ„í•´ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ ì¤¬ë‹¤. OrderServiceImpl ê°ì²´ ì…ì„±ì‹œ MemberRepository ì™€ DiscountPolicy ì— ëŒ€í•œ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ì£¼ì… ë°›ê²Œ ëœë‹¤. OrderServiceImpl í´ë˜ìŠ¤ ë‚´ì—ì„œ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ê³¤ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ ì—†ì–´ì¡Œìœ¼ë¯€ë¡œ DIP ì›ì¹™ ì„ ì§€í‚¤ê²Œ ëë‹¤. OrderServiceImpl.java public class OrderServiceImpl implements OrderService &#123; private final MemberRepository memberRepository; private final DiscountPolicy discountPolicy; public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy)&#123; this.memberRepository = memberRepository; this.discountPolicy = discountPolicy; &#125; @Override public Order createOrder(Long memberId, String itemName, int itemPrice) &#123; Member member = memberRepository.findById(memberId); int discountPrice = discountPolicy.discount(member, itemPrice); return new Order(memberId, itemName, itemPrice, discountPrice); &#125;&#125; MemberServiceImplì™€ OrderServiceImplëŠ” ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ê²Œ í•¨ìœ¼ë¡œ ì½”ë“œìƒìœ¼ë¡œëŠ” ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ë“¤ì–´ì˜¬ì§€ëŠ” ì•Œ ìˆ˜ ì—†ê³ , ìƒì„±ìë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ êµ¬í˜„ê°ì²´ë¥¼ ì£¼ì… ë°›ê²Œ ëœë‹¤. AppConfigë¥¼ í†µí•´ ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì„ ì§„í–‰ í•˜ê³ MemberServiceImplì™€ OrderServiceImplëŠ” ì‹¤í–‰ë§Œ í•˜ë©´ ë˜ë¯€ë¡œ ì—­í• ì´ ë¶„ë¦¬ê°€ ëë‹¤.ë˜í•œ ì™¸ë¶€ì—ì„œ MemberServiceImplì™€ OrderServiceImplì— êµ¬í˜„ê°ì²´ë¥¼ ë„£ì–´ì£¼ëŠ” ê²ƒì„ ë³´ê³  ì˜ì¡´ì„± ì£¼ì…ì´ë¼ í•œë‹¤. AppConfig ë¦¬í™í„°ë§AppConfig.java public class AppConfig &#123; public MemberService memberService()&#123; return new MemberServiceImpl(memberRepository()); &#125; private MemberRepository memberRepository() &#123; return new MemoryMemberRepository(); &#125; public OrderService orderService()&#123; return new OrderServiceImpl(memberRepository(), discountPolicy()); &#125; private DiscountPolicy discountPolicy() &#123; return new FixDiscountPolicy(); &#125;&#125; ë©”ì†Œë“œëª…ê³¼ return íƒ€ì…ì„ í†µí•´ ì—­í• ì„ í•  ìˆ˜ ìˆê²Œ ëê³ , ë°˜í™˜ ê°ì²´ë¥¼ í†µí•´ êµ¬í˜„ ê°ì²´ë¥¼ ì•Œê¸° ì‰½ê²Œ ëë‹¤. êµ¬í˜„ ê°ì²´ ë³€ê²½AppConfig.java public class AppConfig &#123; public MemberService memberService()&#123; return new MemberServiceImpl(memberRepository()); &#125; private MemberRepository memberRepository() &#123; return new MemoryMemberRepository(); &#125; public OrderService orderService()&#123; return new OrderServiceImpl(memberRepository(), discountPolicy()); &#125; private DiscountPolicy discountPolicy() &#123;// return new FixDiscountPolicy(); return new RateDiscountPolicy(); &#125;&#125; êµ¬í˜„ ê°ì²´ë¥¼ ë³€ê²½í•˜ê²Œ ë˜ë©´ AppConfigë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤. AppConfigì˜ ë“±ì¥ìœ¼ë¡œ êµ¬í˜„ ê°ì²´ë“¤ì€ ìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹í•˜ê²Œ ëë‹¤. í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì€ ì´ì œ AppConfigì—ì„œ ë‹´ë‹¹í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Core","slug":"Spring/Spring-Core","permalink":"https://ckck803.github.io/categories/Spring/Spring-Core/"}],"tags":[]},{"title":"Spring Boot - ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ JAR","slug":"spring/spring-framework/springboot-jar","date":"2021-02-18T16:05:00.000Z","updated":"2024-11-27T02:00:28.391Z","comments":true,"path":"2021/02/19/spring/spring-framework/springboot-jar/","link":"","permalink":"https://ckck803.github.io/2021/02/19/spring/spring-framework/springboot-jar/","excerpt":"ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ JARì•±ì„ ì–´ë”˜ê°€ì— ë°°í¬í•˜ê±°ë‚˜ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ê±°ë‚˜ í•˜ê¸° ìœ„í•´ì„œëŠ” jaríŒ¨í‚¤ì§€ë¡œ íŒ¨í‚¤ì§•í•œ í›„ jaríŒŒì¼ì„ ì‹¤í–‰í•˜ëŠ”ê²Œ ìœ ìš©í•˜ë‹¤. jaríŒŒì¼ ìƒì„±mvn package mvn pakcageëª…ë ¹ì–´ë¥¼ í†µí•´ ì•±ì„ jaríŒŒì¼ë¡œ ìƒì„±í•œë‹¤. jaríŒŒì¼ì´ ìƒì„±ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. jaríŒŒì¼ ì•ˆì—ëŠ” ì•±ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ì˜ì¡´ì„±(library)ë“¤ì´ ì „ë¶€ ë‹¤ í¬í•¨ë˜ì–´ ìˆë‹¤. jar íŒŒì¼ ì‹¤í–‰java -jar springinit-1.0-SNAPSHOT.jar","text":"ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ JARì•±ì„ ì–´ë”˜ê°€ì— ë°°í¬í•˜ê±°ë‚˜ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ê±°ë‚˜ í•˜ê¸° ìœ„í•´ì„œëŠ” jaríŒ¨í‚¤ì§€ë¡œ íŒ¨í‚¤ì§•í•œ í›„ jaríŒŒì¼ì„ ì‹¤í–‰í•˜ëŠ”ê²Œ ìœ ìš©í•˜ë‹¤. jaríŒŒì¼ ìƒì„±mvn package mvn pakcageëª…ë ¹ì–´ë¥¼ í†µí•´ ì•±ì„ jaríŒŒì¼ë¡œ ìƒì„±í•œë‹¤. jaríŒŒì¼ì´ ìƒì„±ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. jaríŒŒì¼ ì•ˆì—ëŠ” ì•±ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ì˜ì¡´ì„±(library)ë“¤ì´ ì „ë¶€ ë‹¤ í¬í•¨ë˜ì–´ ìˆë‹¤. jar íŒŒì¼ ì‹¤í–‰java -jar springinit-1.0-SNAPSHOT.jar java -jarëª…ë ¹ì–´ë¥¼ í†µí•´ jaríŒŒì¼ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Spring Framework","slug":"Spring/Spring-Boot/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Spring-Framework/"}],"tags":[]},{"title":"Spring Boot - ë‚´ì¥ ì›¹ ì„œë²„ ì‘ìš© 2ë¶€(HTTPSì™€ HTTP2)","slug":"spring/spring-framework/springboot-http2","date":"2021-02-18T16:01:22.000Z","updated":"2024-11-27T02:00:27.986Z","comments":true,"path":"2021/02/19/spring/spring-framework/springboot-http2/","link":"","permalink":"https://ckck803.github.io/2021/02/19/spring/spring-framework/springboot-http2/","excerpt":"ë‚´ì¥ ì›¹ ì„œë²„ ì‘ìš© 2ë¶€ : HTTPSì™€ HTTP2httpsë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í‚¤ìŠ¤í† ì–´ê°€ í•„ìš”í•˜ë‹¤. í‚¤ìŠ¤í† ì–´ ìƒì„±# ì €ëŠ” ì¤„ ë°”ê¿ˆ ë¬¸ì í•´ê²° í–ˆìŠµë‹ˆë‹¹ ^^keytool -genkey \\ -alias tomcat \\ -storetype PKCS12 \\ -keyalg RSA \\ -keysize 2048 \\ -keystore keystore.p12 \\ -validity 4000 ìœ„ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í‚¤ ìŠ¤í† ì–´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. í‚¤ ì €ì¥ì†Œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:ìƒˆ ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥:ì´ë¦„ê³¼ ì„±ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤. [Unknown]: dongwoo yangì¡°ì§ ë‹¨ìœ„ ì´ë¦„ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤. [Unknown]: islandì¡°ì§ ì´ë¦„ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤. [Unknown]: ceoêµ¬/êµ°/ì‹œ ì´ë¦„ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤? [Unknown]: seongbukì‹œ/ë„ ì´ë¦„ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤. [Unknown]: seoulì´ ì¡°ì§ì˜ ë‘ ìë¦¬ êµ­ê°€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì‹­ì‹œì˜¤. [Unknown]: krCN=dongwoo yang, OU=island, O=ceo, L=seongbuk, ST=seoul, C=krì´(ê°€) ë§ìŠµë‹ˆê¹Œ? [ì•„ë‹ˆì˜¤]: ì˜ˆ í•´ë‹¹ ì§ˆë¬¸ë“¤ì´ ë‚˜ì˜¤ëŠ”ë°, ë§ˆì§€ë§‰ì— â€œë„¤â€ í˜¹ì€ â€œyesâ€ë¥¼ í•˜ê²Œ ë˜ë©´ ë¬´í•œë£¨í”„ì— ë¹ ì§€ê²Œ ëœë‹¤â€¦.. ì˜ˆë¼ê³  ê¼­!!!! ì ì–´ì£¼ë„ë¡â€¦. keyë¥¼ ìƒì„±í•˜ê²Œ ëœ ë‹¤ìŒì— gitì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì¤‘ì´ë¼ë©´ ê¼­!!! gitignoreì— ì¶”ê°€í•˜ì!!! í‚¤ìŠ¤í† ì–´ ì‚¬ìš©ì„ ìœ„í•œ ì„¸íŒ…í•´ì£¼ê¸°","text":"ë‚´ì¥ ì›¹ ì„œë²„ ì‘ìš© 2ë¶€ : HTTPSì™€ HTTP2httpsë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í‚¤ìŠ¤í† ì–´ê°€ í•„ìš”í•˜ë‹¤. í‚¤ìŠ¤í† ì–´ ìƒì„±# ì €ëŠ” ì¤„ ë°”ê¿ˆ ë¬¸ì í•´ê²° í–ˆìŠµë‹ˆë‹¹ ^^keytool -genkey \\ -alias tomcat \\ -storetype PKCS12 \\ -keyalg RSA \\ -keysize 2048 \\ -keystore keystore.p12 \\ -validity 4000 ìœ„ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í‚¤ ìŠ¤í† ì–´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. í‚¤ ì €ì¥ì†Œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:ìƒˆ ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥:ì´ë¦„ê³¼ ì„±ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤. [Unknown]: dongwoo yangì¡°ì§ ë‹¨ìœ„ ì´ë¦„ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤. [Unknown]: islandì¡°ì§ ì´ë¦„ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤. [Unknown]: ceoêµ¬/êµ°/ì‹œ ì´ë¦„ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤? [Unknown]: seongbukì‹œ/ë„ ì´ë¦„ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤. [Unknown]: seoulì´ ì¡°ì§ì˜ ë‘ ìë¦¬ êµ­ê°€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì‹­ì‹œì˜¤. [Unknown]: krCN=dongwoo yang, OU=island, O=ceo, L=seongbuk, ST=seoul, C=krì´(ê°€) ë§ìŠµë‹ˆê¹Œ? [ì•„ë‹ˆì˜¤]: ì˜ˆ í•´ë‹¹ ì§ˆë¬¸ë“¤ì´ ë‚˜ì˜¤ëŠ”ë°, ë§ˆì§€ë§‰ì— â€œë„¤â€ í˜¹ì€ â€œyesâ€ë¥¼ í•˜ê²Œ ë˜ë©´ ë¬´í•œë£¨í”„ì— ë¹ ì§€ê²Œ ëœë‹¤â€¦.. ì˜ˆë¼ê³  ê¼­!!!! ì ì–´ì£¼ë„ë¡â€¦. keyë¥¼ ìƒì„±í•˜ê²Œ ëœ ë‹¤ìŒì— gitì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì¤‘ì´ë¼ë©´ ê¼­!!! gitignoreì— ì¶”ê°€í•˜ì!!! í‚¤ìŠ¤í† ì–´ ì‚¬ìš©ì„ ìœ„í•œ ì„¸íŒ…í•´ì£¼ê¸° application.properties server.ssl.key-store=keystore.p12server.ssl.key-store-type=PKCS12server.ssl.key-store-password=123456server.ssl.key-alias=tomcat Application.java @SpringBootApplication@RestControllerpublic class Application &#123; @GetMapping(&quot;/hello&quot;) public String hello()&#123; return &quot;Hello Spring&quot;; &#125; public static void main(String[] args) &#123; SpringApplication.run(Application.class, args); &#125;&#125; localhost:8080ìœ¼ë¡œ http ì ‘ì†ì„ í•˜ê²Œ ë˜ë©´ í•´ë‹¹ ê²°ê³¼ë¥¼ ë°›ê²Œ ëœë‹¤.ì´ì œë¶€í„° ìš°ë¦¬ëŠ” httpsë¥¼ ì´ìš©í•˜ì—¬ ì ‘ì†í•´ì•¼ í•œë‹¤. https://localhost:8080 í˜•ì‹ìœ¼ë¡œ ì ‘ì†ì„ ì‹œë„ í•˜ë©´ ìœ„ì˜ ë¬¸êµ¬ê°€ ëœ¨ê²Œ ëœë‹¤.(ì›¹ ë¸Œë¼ìš°ì €ë§ˆë‹¤ ì‚´ì§ ë‹¤ë¥´ê²Œ í‘œì‹œë¨.) ì´ëŠ” ì›¹ ë¸Œë¼ìš°ì €ê°€ publicí‚¤ë¥¼ ê°€ì§€ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ì´ë ‡ê²Œ ëœ¨ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ê°€ ë§Œë“  ì¸ì¦ì„œëŠ” ë¸Œë¼ìš°ì €ê°€ ëª¨ë¥´ëŠ” ì¸ì¦ì„œì´ê¸° ë•Œë¬¸ì— ë³´ì•ˆ ë¬¸êµ¬ê°€ ëœ¨ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. (ì´ì   ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ëŠ” ê²ƒë„ ì•ˆë˜ëŠ” ë“¯â€¦.) Curl ëª…ë ¹curl -I -k --http2 https://localhost:8080/hello Get ìš”ì²­í•´ë³´ê¸°curl -k -X GET --http2 https://localhost:8080/hello curl ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ í„°ë¯¸ë„ í™˜ê²½ì—ì„œë„ ë°˜í™˜ ê°’ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. ê²°ê³¼HTTP/1.1 200Content-Type: text/plain;charset=UTF-8Content-Length: 12Date: Sun, 15 Mar 2020 16:50:14 GMT -Iì— ëŒ€í•œ ìš”ì²­ ì •ë³´ë¡œ í•´ë”ë¥¼ ë³´ì—¬ì¤€ë‹¤. Hello Spring Getìš”ì²­ì— ëŒ€í•œ ê²°ê³¼ë¡œ Hello Springì´ ë°˜í™˜ë˜ì—ˆë‹¤. ì»¤ë„¥í„° ìƒì„±í•˜ê¸°httpsë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë” ì´ìƒ httpë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ëœë‹¤. HTTP ì»¤ë„¥í„°ê°€ í•œê°œì¸ë°, ê·¸ ì»¤ë„¥í„°ì— sslì„ ì ìš©í•¨ìœ¼ë¡œì¨ HTTPSë¡œ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤. ë§Œì•½ HTTPë„ ì‚¬ìš©í•˜ê³  ì‹¶ìœ¼ë©´ ë˜ í•˜ë‚˜ì˜ ì»¤ë„¥í„°ë¥¼ ë§Œë“¤ì–´ ì£¼ì–´ì•¼ í•œë‹¤. Application.javaì— ë‚´ìš© ì¶”ê°€ ......@Beanpublic ServletWebServerFactory serverFactory()&#123; TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory(); tomcat.addAdditionalTomcatConnectors(createStandardConnector()); return tomcat;&#125;private Connector createStandardConnector()&#123; Connector connector = new Connector(&quot;org.apache.coyote.http11.Http11NioProtocol&quot;); connector.setPort(8080); return connector;&#125; application.propertiesì— ë‚´ìš© ì¶”ê°€ ......server.port=8443 HTTPì—°ê²°ì˜ ê²½ìš° 8080í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ê³ , HTTPSì—°ê²°ì˜ ê²½ìš°ëŠ” 8443í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤. HTTP2 í™œì„±í™” í•˜ê¸° application.propertiesì— ë‚´ìš© ì¶”ê°€ ...server.http2.enabled=true application.propertiesì— http2ì‚¬ìš©ì— ëŒ€í•œ ì„¤ì •ì„ ì¶”ê°€í•´ì£¼ê³  ê° servlet ì»¨í…Œì´ë„ˆ ë§ˆë‹¤ ë‹¤ë¥¸ ì„¤ì •ì„ í•´ì£¼ì–´ì•¼ í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Spring Framework","slug":"Spring/Spring-Boot/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Spring-Framework/"}],"tags":[]},{"title":"Spring Boot - ë‚´ì¥ ì›¹ ì„œë²„ ì‘ìš© 1ë¶€(ì»¨í…Œì´ë„ˆì™€ í¬íŠ¸)","slug":"spring/spring-framework/springboot-webserver2","date":"2021-02-18T15:58:27.000Z","updated":"2024-11-27T02:00:28.173Z","comments":true,"path":"2021/02/19/spring/spring-framework/springboot-webserver2/","link":"","permalink":"https://ckck803.github.io/2021/02/19/spring/spring-framework/springboot-webserver2/","excerpt":"ë‚´ì¥ ì›¹ ì„œë²„ ì‘ìš© 1ë¶€ : ì»¨í…Œì´ë„ˆì™€ í¬íŠ¸https://docs.spring.io/spring-boot/docs/current/reference/html/howto-embedded-web-servers.htmlì— ë‹¤ë¥¸ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ì í˜€ì ¸ ìˆë‹¤. tomcat ë¹¼ê¸° ì¼ë‹¨, spring-boot-starter-webì— ì ì¬ë˜ì–´ ìˆëŠ” tomcatì„ ëº„ í•„ìš”ê°€ ìˆë‹¤. &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt; í†°ì¼“ì„ ëº€ í›„ ì•„ë¬´ê²ƒë„ ì¶”ê°€í•˜ì§€ ì•Šìœ¼ë©´ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•Šê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì‘ë™í•˜ê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ ì¢…ë£Œëœë‹¤. ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆ ì¶”ê°€í•˜ê¸°Jetty","text":"ë‚´ì¥ ì›¹ ì„œë²„ ì‘ìš© 1ë¶€ : ì»¨í…Œì´ë„ˆì™€ í¬íŠ¸https://docs.spring.io/spring-boot/docs/current/reference/html/howto-embedded-web-servers.htmlì— ë‹¤ë¥¸ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ì í˜€ì ¸ ìˆë‹¤. tomcat ë¹¼ê¸° ì¼ë‹¨, spring-boot-starter-webì— ì ì¬ë˜ì–´ ìˆëŠ” tomcatì„ ëº„ í•„ìš”ê°€ ìˆë‹¤. &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt; í†°ì¼“ì„ ëº€ í›„ ì•„ë¬´ê²ƒë„ ì¶”ê°€í•˜ì§€ ì•Šìœ¼ë©´ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•Šê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì‘ë™í•˜ê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ ì¢…ë£Œëœë‹¤. ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆ ì¶”ê°€í•˜ê¸°Jetty&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;&lt;/dependency&gt; ìƒˆë¡œìš´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¡œ jettyë¥¼ ì¶”ê°€í•´ ì£¼ì—ˆë‹¤. tomcatì€ ë¹ ì§€ê³  jettyê°€ ì¶”ê°€ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ê²°ê³¼Jetty started on port(s) 8080 (http/1.1) with context path &#x27;/&#x27; ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‹¤í–‰í•´ ë³´ë©´ Jettyê°€ ì‹¤í–‰ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. undertow&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;&lt;/dependency&gt; ë‹¤ë¥¸ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¡œ undertowë¥¼ ì¶”ê°€í•´ë´¤ë‹¤. propertiesë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ íƒ€ì… ë„ê¸° application.properties spring.main.web-application-type=none spring.main.web-application-typeì— noneì„ ì£¼ê²Œ ë˜ë©´ ì˜ì¡´ì„±ì´ ìˆë‹¤ê³  í•´ë„ none web-applicationìœ¼ë¡œ ì‘ë™ì„ í•˜ê³  ì‹¤í–‰í•˜ê³  ë°”ë¡œ ëë‚´ê²Œ ëœë‹¤. . ____ _ __ _ _ /\\\\ / ___&#x27;_ __ _ _(_)_ __ __ _ \\ \\ \\ \\( ( )\\___ | &#x27;_ | &#x27;_| | &#x27;_ \\/ _` | \\ \\ \\ \\ \\\\/ ___)| |_)| | | | | || (_| | ) ) ) ) &#x27; |____| .__|_| |_|_| |_\\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot :: (v2.2.5.RELEASE)2020-03-15 23:58:13.136 INFO 80825 --- [ main] com.example.Application : Starting Application on yangdong-uui-MacBookPro.local with PID 80825 (/Users/dongwoo-yang/dev/study/spring/everyday_spring/chapter3/ch3_7/springbootgettingstarted/target/classes started by dongwoo-yang in /Users/dongwoo-yang/dev/study/spring/everyday_spring/chapter3/ch3_7/springbootgettingstarted)2020-03-15 23:58:13.139 INFO 80825 --- [ main] com.example.Application : No active profile set, falling back to default profiles: default2020-03-15 23:58:13.724 INFO 80825 --- [ main] com.example.Application : Started Application in 0.919 seconds (JVM running for 1.529)Process finished with exit code 0 ë°”ë¡œ ì¢…ë£Œê°€ ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í¬íŠ¸ ë³€ê²½ í•˜ê¸° application.properties server.port=7070 7070í¬íŠ¸ë¡œ ë³€ê²½í•˜ì˜€ë‹¤. ê²°ê³¼Undertow started on port(s) 7070 (http) with context path &#x27;&#x27; 8080(ê¸°ë³¸)í¬íŠ¸ì—ì„œ 7070í¬íŠ¸ë¡œ ë°”ë€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë”°. ëœë¤ í¬íŠ¸server.port=0 í¬íŠ¸ë²ˆí˜¸ë¡œ 0ì„ ì£¼ê²Œ ë˜ë©´ ë¹„ì–´ìˆëŠ” í¬íŠ¸ë¥¼ ì„ íƒí•´ì„œ ë§Œë“¤ì–´ì¤€ë‹¤. ì‹¤ì‹œê°„ìœ¼ë¡œ í¬íŠ¸ì •ë³´ ì•Œì•„ë³´ê¸°@Componentpublic class PortListener implements ApplicationListener&lt;ServletWebServerInitializedEvent&gt; &#123; @Override public void onApplicationEvent(ServletWebServerInitializedEvent event) &#123; // getApplicationContext()ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ ApplicationContextë¥¼ ì–»ëŠ”ë‹¤. // ApplicationContextëŠ” servlet ApplicationContextì´ê¸° ë•Œë¬¸ ì›¹ ì„œë²„ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤. ServletWebServerApplicationContext applicationContext = event.getApplicationContext(); // ì–»ì–´ì§„ ì›¹ì„œë²„ë¥¼ í†µí•´ í¬íŠ¸ë¥¼ ì•Œì•„ë‚¼ ìˆ˜ ìˆë‹¤. System.out.println(applicationContext.getWebServer().getPort()); &#125;&#125; ApplicationListner&lt;ServletWebServerInitializedEvent&gt;ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•¨ìœ¼ë¡œì¨ í¬íŠ¸ë²ˆí˜¸ë¥¼ ì•Œì•„ ë‚¼ ìˆ˜ ìˆë‹¤.ApplicationListner&lt;ServletWebServerInitializedEvent&gt;ë¥¼ êµ¬í˜„í•œ PortListenerëŠ” ì›¹ì„œë²„ê°€ ì´ˆê¸°í™”ê°€ ë˜ë©´ í˜¸ì¶œ ëœë‹¤. ì´ë²¤íŠ¸ ë°œìƒì‹œ ì–»ì–´ì§„ ServletWebServerInitializedEventì¸ìŠ¤í„´ìŠ¤ì— getApplicationContext()ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ ApplicationContextê°ì²´ë¥¼ ì–»ì–´ë‚¼ ìˆ˜ ìˆë‹¤. ì–»ì–´ì§„ ApplicationContextê°ì²´ëŠ” servlet ApplicationContext ê°ì²´ì´ë¯€ë¡œ ì›¹ ì„œë²„ë¥¼ ì•Œ ìˆ˜ ìˆê³  ì–»ì–´ì§„ ì›¹ ì„œë²„ë¥¼ í†µí•´ í¬íŠ¸ë¥¼ ì•Œì•„ë‚¼ ìˆ˜ ìˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Spring Framework","slug":"Spring/Spring-Boot/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Spring-Framework/"}],"tags":[]},{"title":"Spring Boot - ë‚´ì¥ ì›¹ ì„œë²„ ì´í•´","slug":"spring/spring-framework/springboot-webserver","date":"2021-02-18T15:56:18.000Z","updated":"2024-11-27T02:00:28.319Z","comments":true,"path":"2021/02/19/spring/spring-framework/springboot-webserver/","link":"","permalink":"https://ckck803.github.io/2021/02/19/spring/spring-framework/springboot-webserver/","excerpt":"ë‚´ì¥ ì›¹ ì„œë²„ ì´í•´ë‚´ì¥ ì„œë²„ë¥¼ ìŠ¤í”„ë§ ë¶€íŠ¸ ì—†ì´ ë§Œë“¤ì–´ ë³´ê¸° springbootgetttingstarted public class Application &#123; public static void main(String[] args) throws LifecycleException &#123; // í†°ìº£ ë§Œë“¤ê¸° Tomcat tomcat = new Tomcat(); tomcat.setPort(8888); Context context = tomcat.addContext(&quot;/&quot;, &quot;/&quot;); // servlet ë§Œë“¤ê¸° HttpServlet servlet = new HttpServlet()&#123; @Override // getìš”ì²­ì— ê´€í•œ ë©”ì†Œë“œ protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123; // response ê°ì²´ì˜ writerê°ì²´ë¥¼ ë°˜í™˜ë°›ì•„ // ì‘ë‹µìœ¼ë¡œ ì „í•´ì¤„ servletì„ ì‘ì„±í•´ì¤€ë‹¤. PrintWriter writer = resp.getWriter(); writer.println(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;&quot;); writer.println(&quot;Hey, Tomcat&quot;); writer.println(&quot;&lt;/title&gt;&lt;/head&gt;&quot;); writer.println(&quot;&lt;body&gt;&lt;h1&gt;Hello Tomcat&lt;/h1&gt;&lt;/body&gt;&quot;); writer.println(&quot;&lt;/html&gt;&quot;); &#125; &#125;; String servletName = &quot;helloServlet&quot;; // í†°ì¼“ì— ì„œë¸”ë¦¿ì„ ì¶”ê°€í•´ì¤€ í›„ tomcat.addServlet(&quot;/&quot;, servletName, servlet); // /hello urlê³¼ í•´ë‹¹ ì„œë¸”ë¦¿ì„ ë§¤í•‘ ì‹œì¼œì¤€ë‹¤. context.addServletMappingDecoded(&quot;/hello&quot;, servletName); tomcat.getConnector(); tomcat.start(); tomcat.getServer().await(); &#125;&#125; tomcat9ë¶€í„°ëŠ” tomcat.start()ë¥¼ í•˜ê¸° ì „ì— tomcat.getConnector()ë¥¼ í•´ì•¼ ì‹¤í–‰ì´ ëœë‹¤. tomcat ê°ì²´ë¥¼ ìƒì„± servlet ê°ì²´ë¥¼ ìƒì„±í–ˆë‹¤. ê²°ê³¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ìœ„ì™€ ê°™ì€ ì„¤ì •ì„ AutoConfigurationì—ì„œ ìë™ìœ¼ë¡œ ì¡ì•„ì¤€ë‹¤.","text":"ë‚´ì¥ ì›¹ ì„œë²„ ì´í•´ë‚´ì¥ ì„œë²„ë¥¼ ìŠ¤í”„ë§ ë¶€íŠ¸ ì—†ì´ ë§Œë“¤ì–´ ë³´ê¸° springbootgetttingstarted public class Application &#123; public static void main(String[] args) throws LifecycleException &#123; // í†°ìº£ ë§Œë“¤ê¸° Tomcat tomcat = new Tomcat(); tomcat.setPort(8888); Context context = tomcat.addContext(&quot;/&quot;, &quot;/&quot;); // servlet ë§Œë“¤ê¸° HttpServlet servlet = new HttpServlet()&#123; @Override // getìš”ì²­ì— ê´€í•œ ë©”ì†Œë“œ protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123; // response ê°ì²´ì˜ writerê°ì²´ë¥¼ ë°˜í™˜ë°›ì•„ // ì‘ë‹µìœ¼ë¡œ ì „í•´ì¤„ servletì„ ì‘ì„±í•´ì¤€ë‹¤. PrintWriter writer = resp.getWriter(); writer.println(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;&quot;); writer.println(&quot;Hey, Tomcat&quot;); writer.println(&quot;&lt;/title&gt;&lt;/head&gt;&quot;); writer.println(&quot;&lt;body&gt;&lt;h1&gt;Hello Tomcat&lt;/h1&gt;&lt;/body&gt;&quot;); writer.println(&quot;&lt;/html&gt;&quot;); &#125; &#125;; String servletName = &quot;helloServlet&quot;; // í†°ì¼“ì— ì„œë¸”ë¦¿ì„ ì¶”ê°€í•´ì¤€ í›„ tomcat.addServlet(&quot;/&quot;, servletName, servlet); // /hello urlê³¼ í•´ë‹¹ ì„œë¸”ë¦¿ì„ ë§¤í•‘ ì‹œì¼œì¤€ë‹¤. context.addServletMappingDecoded(&quot;/hello&quot;, servletName); tomcat.getConnector(); tomcat.start(); tomcat.getServer().await(); &#125;&#125; tomcat9ë¶€í„°ëŠ” tomcat.start()ë¥¼ í•˜ê¸° ì „ì— tomcat.getConnector()ë¥¼ í•´ì•¼ ì‹¤í–‰ì´ ëœë‹¤. tomcat ê°ì²´ë¥¼ ìƒì„± servlet ê°ì²´ë¥¼ ìƒì„±í–ˆë‹¤. ê²°ê³¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ìœ„ì™€ ê°™ì€ ì„¤ì •ì„ AutoConfigurationì—ì„œ ìë™ìœ¼ë¡œ ì¡ì•„ì¤€ë‹¤. spring-boot-autoconfigure&#x2F;spring.factories ServletWebServerFactoryAutoConfigurationëŠ” ì„œë¸”ë¦¿ ì›¹ ì„œë²„ë¥¼ ì„¤ì •í•´ì£¼ëŠ” ìë™ ì„¤ì •ì´ë‹¤.TomcatServletWebServerFactoryCustomizerì„ í†µí•´ í†°ì¼“ì„ ì»¤ìŠ¤í„° ë§ˆì´ì§• í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Spring Framework","slug":"Spring/Spring-Boot/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Spring-Framework/"}],"tags":[]},{"title":"Spring Boot - ìë™ ì„¤ì • ë§Œë“¤ê¸° 1ë¶€","slug":"spring/spring-framework/configuration/springboot-cutome-autoconfigure2","date":"2021-02-18T15:52:54.000Z","updated":"2024-11-27T02:00:28.983Z","comments":true,"path":"2021/02/19/spring/spring-framework/configuration/springboot-cutome-autoconfigure2/","link":"","permalink":"https://ckck803.github.io/2021/02/19/spring/spring-framework/configuration/springboot-cutome-autoconfigure2/","excerpt":"ìë™ ì„¤ì • ë§Œë“¤ê¸° 2ë¶€EnableAutoConfigurationì´ ë¶ˆëŸ¬ì˜¤ëŠ” ê°™ì€ Bean ë¬´ì‹œí•˜ê¸° maplespringbootstarter í”„ë¡œì íŠ¸ @Configurationpublic class HolomanConfiguration &#123; @Bean @ConditionalOnMissingBean public Holoman holoman()&#123; Holoman holoman = new Holoman(); holoman.setHowLong(5); holoman.setName(&quot;maple&quot;); return holoman; &#125;&#125; @ConditionalOnMissingBeanì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ Beanì´ ì—†ëŠ” ê²½ìš°ì—ë§Œ EnableAutoConfigurationì„ í†µí•´ Beanì´ ì¶”ê°€ ëœë‹¤. ê²°ê³¼2020-03-15 21:31:49.936 INFO 67228 --- [ main] com.example.Application : Starting Application on yangdong-uui-MacBookPro.local with PID 67228 (/Users/dongwoo-yang/dev/study/spring/everyday_spring/chapter3/ch3_5/springbootgettingstarted/target/classes started by dongwoo-yang in /Users/dongwoo-yang/dev/study/spring/everyday_spring/chapter3/ch3_5/springbootgettingstarted)2020-03-15 21:31:49.938 INFO 67228 --- [ main] com.example.Application : No active profile set, falling back to default profiles: default2020-03-15 21:31:50.581 INFO 67228 --- [ main] com.example.Application : Started Application in 0.937 seconds (JVM running for 1.598)Holoman&#123;name=&#x27;ë™ì¥êµ°&#x27;, howLong=60&#125;Process finished with exit code 0 springbootgetttingstartedí”„ë¡œì íŠ¸ì˜ Beanì´ ì¶œë ¥ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. application.propertiesë¥¼ ì´ìš©í•œ ë°©ë²•","text":"ìë™ ì„¤ì • ë§Œë“¤ê¸° 2ë¶€EnableAutoConfigurationì´ ë¶ˆëŸ¬ì˜¤ëŠ” ê°™ì€ Bean ë¬´ì‹œí•˜ê¸° maplespringbootstarter í”„ë¡œì íŠ¸ @Configurationpublic class HolomanConfiguration &#123; @Bean @ConditionalOnMissingBean public Holoman holoman()&#123; Holoman holoman = new Holoman(); holoman.setHowLong(5); holoman.setName(&quot;maple&quot;); return holoman; &#125;&#125; @ConditionalOnMissingBeanì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ Beanì´ ì—†ëŠ” ê²½ìš°ì—ë§Œ EnableAutoConfigurationì„ í†µí•´ Beanì´ ì¶”ê°€ ëœë‹¤. ê²°ê³¼2020-03-15 21:31:49.936 INFO 67228 --- [ main] com.example.Application : Starting Application on yangdong-uui-MacBookPro.local with PID 67228 (/Users/dongwoo-yang/dev/study/spring/everyday_spring/chapter3/ch3_5/springbootgettingstarted/target/classes started by dongwoo-yang in /Users/dongwoo-yang/dev/study/spring/everyday_spring/chapter3/ch3_5/springbootgettingstarted)2020-03-15 21:31:49.938 INFO 67228 --- [ main] com.example.Application : No active profile set, falling back to default profiles: default2020-03-15 21:31:50.581 INFO 67228 --- [ main] com.example.Application : Started Application in 0.937 seconds (JVM running for 1.598)Holoman&#123;name=&#x27;ë™ì¥êµ°&#x27;, howLong=60&#125;Process finished with exit code 0 springbootgetttingstartedí”„ë¡œì íŠ¸ì˜ Beanì´ ì¶œë ¥ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. application.propertiesë¥¼ ì´ìš©í•œ ë°©ë²• springbootgetttingstarted í”„ë¡œì íŠ¸ src&#x2F;resourceì— application.propertiesíŒŒì¼ì„ ìƒì„± holoman.name = ì•„ ì§‘ì— ê°€ê³  ì‹¶ë‹¤.holoman.how-long = 10000 application.propertieì— í•´ë‹¹ ë‚´ìš©ì„ ì¶”ê°€ ì˜ì¡´ì„± ì¶”ê°€ maplespringbootstarter í”„ë¡œì íŠ¸ &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt; @ConfigurationPropertiesë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤. HolomanProperties maplespringbootstarter í”„ë¡œì íŠ¸ @ConfigurationProperties(&quot;holoman&quot;)public class HolomanProperties &#123; private String name; private int howLong; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getHowLong() &#123; return howLong; &#125; public void setHowLong(int howLong) &#123; this.howLong = howLong; &#125;&#125; HolomanConfiguration ìˆ˜ì • maplespringbootstarter í”„ë¡œì íŠ¸ @Configuration@EnableConfigurationProperties(HolomanProperties.class)public class HolomanConfiguration &#123; @Bean @ConditionalOnMissingBean public Holoman holoman(HolomanProperties properties)&#123; Holoman holoman = new Holoman(); holoman.setHowLong(properties.getHowLong()); holoman.setName(properties.getName()); return holoman; &#125;&#125; @EnableConfigurationPropertiesë¥¼ ì¶”ê°€Beanì„ ë§Œë“¤ ë•Œ HolomanPropertiesë¥¼ ì°¸ì¡°í•´ì„œ Beanì„ ìƒì„±í•œë‹¤.springbootgetttingstartedì˜ application.propertiesë¥¼ ê°€ì ¸ë‹¤ê°€ Beanì„ ìƒì„±í•œë‹¤. springbootgetttingstartedë‚´ì˜ holoman Beanì„ ì—†ì• ì£¼ì–´ì•¼ í•œë‹¤â€¦. ì˜¤ë¥˜ ì¡ëŠë¼ ì‹œê°„ ì˜¤ë˜ ê±¸ë ¸ë‹¤. ê²°ê³¼2020-03-15 22:07:53.804 INFO 70087 --- [ main] com.example.Application : Starting Application on yangdong-uui-MacBookPro.local with PID 70087 (/Users/dongwoo-yang/dev/study/spring/everyday_spring/chapter3/ch3_5/springbootgettingstarted/target/classes started by dongwoo-yang in /Users/dongwoo-yang/dev/study/spring/everyday_spring/chapter3/ch3_5/springbootgettingstarted)2020-03-15 22:07:53.808 INFO 70087 --- [ main] com.example.Application : No active profile set, falling back to default profiles: default2020-03-15 22:07:54.628 INFO 70087 --- [ main] com.example.Application : Started Application in 1.148 seconds (JVM running for 1.631)Holoman&#123;name=&#x27;A... I want to go home&#x27;, howLong=10000&#125;Process finished with exit code 0","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"}],"tags":[]},{"title":"Spring Boot - ìë™ ì„¤ì • ë§Œë“¤ê¸° 1ë¶€","slug":"spring/spring-framework/configuration/springboot-cutome-autoconfigure","date":"2021-02-18T15:45:34.000Z","updated":"2024-11-27T02:00:28.906Z","comments":true,"path":"2021/02/19/spring/spring-framework/configuration/springboot-cutome-autoconfigure/","link":"","permalink":"https://ckck803.github.io/2021/02/19/spring/spring-framework/configuration/springboot-cutome-autoconfigure/","excerpt":"ìë™ ì„¤ì • ë§Œë“¤ê¸° 1ë¶€ Xxx-Spring-Boot-Autoconfigure ëª¨ë“ˆ: ìë™ ì„¤ì • Xxx-Spring-Boot-Starter ëª¨ë“ˆ: í•„ìš”í•œ ì˜ì¡´ì„± ì •ì˜ ê·¸ëƒ¥ í•˜ë‚˜ë¡œ ë§Œë“¤ê³  ì‹¶ì„ ë•ŒëŠ”?Xxx-Spring-Boot-Starter spring-boot-starter ë§Œë“¤ê¸° í”„ë¡œì íŠ¸ ëª… : maplespringbootstarter ArtifactId : maple-spring-boot-starter ì˜ì¡´ì„± ì¶”ê°€ maplespringbootstarter í”„ë¡œì íŠ¸ &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-autoconfigure-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt; &lt;version&gt;2.0.3.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt;","text":"ìë™ ì„¤ì • ë§Œë“¤ê¸° 1ë¶€ Xxx-Spring-Boot-Autoconfigure ëª¨ë“ˆ: ìë™ ì„¤ì • Xxx-Spring-Boot-Starter ëª¨ë“ˆ: í•„ìš”í•œ ì˜ì¡´ì„± ì •ì˜ ê·¸ëƒ¥ í•˜ë‚˜ë¡œ ë§Œë“¤ê³  ì‹¶ì„ ë•ŒëŠ”?Xxx-Spring-Boot-Starter spring-boot-starter ë§Œë“¤ê¸° í”„ë¡œì íŠ¸ ëª… : maplespringbootstarter ArtifactId : maple-spring-boot-starter ì˜ì¡´ì„± ì¶”ê°€ maplespringbootstarter í”„ë¡œì íŠ¸ &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-autoconfigure-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt; &lt;version&gt;2.0.3.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt; Holoman.java maplespringbootstarter í”„ë¡œì íŠ¸ package com.example;public class Holoman &#123; String name; int howLong; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getHowLong() &#123; return howLong; &#125; public void setHowLong(int howLong) &#123; this.howLong = howLong; &#125; @Override public String toString() &#123; return &quot;Holoman&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, howLong=&quot; + howLong + &#x27;&#125;&#x27;; &#125;&#125; HolomanConfiguration maplespringbootstarter í”„ë¡œì íŠ¸ @Configurationpublic class HolomanConfiguration &#123; @Bean public Holoman holoman()&#123; Holoman holoman = new Holoman(); holoman.setHowLong(5); holoman.setName(&quot;maple&quot;); return holoman; &#125;&#125; Holoman ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ì„¤ì • íŒŒì¼ì„ ë§Œë“¤ì—ˆë‹¤. ìë™ ì„¤ì • íŒŒì¼ ì¶”ê°€ src&#x2F;main&#x2F;resource&#x2F;ìœ„ì¹˜ì— META-INFí´ë”ë¥¼ ìƒì„±í•œë‹¤. org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\ com.example.HolomanConfiguration META-INFí´ë”ì— spring.factoriesíŒŒì¼ì„ ìƒì„±í•œ í›„ ìœ„ ë‚´ìš©ì„ ì¶”ê°€í•´ì¤€ë‹¤.í•´ë‹¹ í”„ë¡œì íŠ¸ë¥¼ ì˜ì¡´ì„±ì— ì¶”ê°€í•œ í”„ë¡œì íŠ¸ëŠ” EnableAutoConfigurationì´ HolomanConfigurationì„ scaní•˜ì—¬ configurationì˜ Beanì„ ì¶”ê°€í•´ ì¤€ë‹¤. mvn install installì„ ë”ë¸”í´ë¦­í•˜ê±°ë‚˜ì½˜ì†”ì—ê°€ì„œ mvn installëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ëœë‹¤. mvn install í”„ë¡œì íŠ¸ê°€ ë¹Œë“œë˜ê³  jaríŒŒì¼ì´ ìƒì„±ëœë‹¤. ë‹¤ë¥¸ maven í”„ë¡œì íŠ¸ì—ì„œ ê°€ì ¸ë‹¤ ì“¸ ìˆ˜ ìˆë„ë¡ local mavenì €ì¥ì†Œì— ì„¤ì¹˜ë¥¼ í•œë‹¤. ì˜ì¡´ì„± ì¶”ê°€ springbootgetttingstarted í”„ë¡œì íŠ¸ë¥¼ ìƒˆë¡œ ìƒì„± &lt;groupId&gt;org.example&lt;/groupId&gt;&lt;artifactId&gt;maple-spring-boot-starter&lt;/artifactId&gt;&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; pom.xmlì— dependencyë¥¼ ì¶”ê°€í•œë‹¤. maple-spring-boot-starterê°€ ì¶”ê°€ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. HolomanRunner.java springbootgettingstarted í”„ë¡œì íŠ¸ @Componentpublic class HolomanRunner implements ApplicationRunner &#123; // maple-spring-boot-starterì—ì„œ Holoman Beanì„ ê°€ì ¸ì™€ ì˜ì¡´ì„±ì„ ì£¼ì…í•´ì¤€ë‹¤. @Autowired Holoman holoman; @Override public void run(ApplicationArguments args) throws Exception &#123; System.out.println(holoman); &#125;&#125; Holoman Beanì´ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•˜ê¸° ìœ„í•œ ì½”ë“œí•´ë‹¹ í”„ë¡œì íŠ¸ì—ëŠ” Holomanì— ê´€í•œ Configurationì´ ì—†ëŠ” ìƒíƒœì´ë¯€ë¡œ Holoman Beanì´ ì¶”ê°€ë˜ì—ˆëŠ”ì§€ í•´ë‹¹ ì½”ë“œë¥¼ í†µí•´ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. ê²°ê³¼ . ____ _ __ _ _ /\\\\ / ___&#x27;_ __ _ _(_)_ __ __ _ \\ \\ \\ \\( ( )\\___ | &#x27;_ | &#x27;_| | &#x27;_ \\/ _` | \\ \\ \\ \\ \\\\/ ___)| |_)| | | | | || (_| | ) ) ) ) &#x27; |____| .__|_| |_|_| |_\\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot :: (v2.2.5.RELEASE)2020-03-15 20:29:06.744 INFO 53354 --- [ main] com.example.Application : Starting Application on yangdong-uui-MacBookPro.local with PID 53354 (/Users/dongwoo-yang/dev/study/spring/everyday_spring/chapter3/ch3_4/springbootgettingstarted/target/classes started by dongwoo-yang in /Users/dongwoo-yang/dev/study/spring/everyday_spring/chapter3/ch3_4/springbootgettingstarted)2020-03-15 20:29:06.749 INFO 53354 --- [ main] com.example.Application : No active profile set, falling back to default profiles: default2020-03-15 20:29:07.495 INFO 53354 --- [ main] com.example.Application : Started Application in 1.395 seconds (JVM running for 2.439)Holoman&#123;name=&#x27;maple&#x27;, howLong=5&#125;Process finished with exit code 0 Holoman&#123;name=&#39;maple&#39;, howLong=5&#125;ì„ í†µí•´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•¨ì„ ì•Œ ìˆ˜ ìˆë‹¤. ë§Œì•½ í”„ë¡œì íŠ¸ì— ê°™ì€ ê°™ì€ Beanì´ ìˆëŠ” ê²½ìš° springbootgettingstarted í”„ë¡œì íŠ¸ @SpringBootApplicationpublic class Application &#123; public static void main(String[] args) &#123; SpringApplication springApplication = new SpringApplication(Application.class); springApplication.setWebApplicationType(WebApplicationType.NONE); springApplication.run(args); &#125; @Bean public Holoman holoman()&#123; Holoman holoman = new Holoman(); holoman.setName(&quot;ë™ì¥êµ°&quot;); holoman.setHowLong(60); return holoman; &#125;&#125; í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ Beanì´ ë¬´ì‹œê°€ ëœë‹¤. ComponentScanì„ í†µí•´ ë¨¼ì € Beanì´ ë“±ë¡ì´ ë˜ê³  EnableAutoConfigurationì„ í†µí•´ Beanì´ ë“±ë¡ì´ ë ë•Œ í•´ë‹¹ Beanì„ ë®ì–´ì“°ê²Œ ëœë‹¤. ë‹¤ë¥¸ ê²°ê³¼***************************APPLICATION FAILED TO START***************************Description:The bean &#x27;holoman&#x27;, defined in class path resource [com/example/HolomanConfiguration.class], could not be registered. A bean with that name has already been defined in com.example.Application and overriding is disabled.Action:Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=trueProcess finished with exit code 1 ìŠ¤í”„ë§ ë¶€íŠ¸ 2.2ë¡œ ì˜¬ë¼ê°€ë©´ì„œ Bean ì˜¤ë²„ë¼ì´ë”©ì´ ë§‰í˜€ì„œ ì—ëŸ¬ ë©”ì‹œì§€ê°€ ëœ¨ê²Œ ëœë‹¤. ë§Œì•½ Bean ì˜¤ë²„ë¼ì´ë”©ì„ í•˜ë ¤ê³  í•˜ë©´ spring.main.allow-bean-definition-overriding=true ì„¤ì •ì„ ì¶”ê°€í•˜ë©´ Bean ì˜¤ë²„ë¼ì´ë”©ì´ ê°€ëŠ¥í•´ ì§„ë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"}],"tags":[]},{"title":"Spring Boot - @SpringBootApplication ì•Œì•„ë³´ê¸°","slug":"spring/spring-framework/configuration/springboot-autoconfiguration","date":"2021-02-17T23:09:05.000Z","updated":"2024-11-27T02:06:36.573Z","comments":true,"path":"2021/02/18/spring/spring-framework/configuration/springboot-autoconfiguration/","link":"","permalink":"https://ckck803.github.io/2021/02/18/spring/spring-framework/configuration/springboot-autoconfiguration/","excerpt":"@SpringBootApplication@SpringBootApplication ì€ Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì§„ì…ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ, Spring Boot ì„¤ì • ë° ì‹¤í–‰ì— í•„ìš”í•œ ì—¬ëŸ¬ ê¸°ëŠ¥ì„ í•œ ê³³ì—ì„œ ì œê³µí•©ë‹ˆë‹¤. @SpringBootApplication ì€ í¬ê²Œ 3ê°€ì§€ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. @ComponentScanì—ì„œ 1ì°¨ì ìœ¼ë¡œ @Beanì„ ì½ì–´ë“¤ì¸ í›„ @EnableAutoConfigurationì—ì„œ 2ì°¨ì ìœ¼ë¡œ @Beanì„ ì½ì–´ë“¤ì¸ë‹¤. @SpringBootConfiguration @SpringBootConfigurationì€ ê¸°ì¡´ì˜ Configurationê³¼ ë¹„ìŠ·í•˜ë‹¤. @ComponentScan ê¸°ë³¸ ê°’ì€ @SpringBootApplication ê°€ ì‘ì„±ëœ íŒ¨í‚¤ì§€ì™€ í•˜ìœ„ íŒ¨í‚¤ì§€ì˜ ëª¨ë“  @Component ì™€ @Bean ì„ ì°¾ì•„ Spring Bean ìœ¼ë¡œ ë“±ë¡í•œë‹¤. @EnableAutoConfiguration Spring Bootì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ ìë™ ì„¤ì •ì„ í™œì„±í™”í•©ë‹ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì„¤ì •ì„ ê¸°ë°˜ìœ¼ë¡œ í•„ìš”í•œ Bean ë“¤ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì¦‰ springbootëŠ” Beanì„ ë‘ë²ˆ ë“±ë¡í•˜ëŠ” ì‘ì—…ì„ ê±°ì¹œë‹¤. @ComponentScan@ComponentScanì€ Application.classì— ìˆë‹¤. ìœ„ ê·¸ë¦¼ì—ì„œëŠ” aì™€ b íŒ¨í‚¤ì§€ì˜ ê²½ìš°ëŠ” ComponentScanì˜ ëŒ€ìƒì´ ë˜ë‚˜ maple íŒ¨í‚¤ì§€ì˜ ê²½ìš° ComponentScanì˜ ëŒ€ìƒì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.","text":"@SpringBootApplication@SpringBootApplication ì€ Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì§„ì…ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ, Spring Boot ì„¤ì • ë° ì‹¤í–‰ì— í•„ìš”í•œ ì—¬ëŸ¬ ê¸°ëŠ¥ì„ í•œ ê³³ì—ì„œ ì œê³µí•©ë‹ˆë‹¤. @SpringBootApplication ì€ í¬ê²Œ 3ê°€ì§€ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. @ComponentScanì—ì„œ 1ì°¨ì ìœ¼ë¡œ @Beanì„ ì½ì–´ë“¤ì¸ í›„ @EnableAutoConfigurationì—ì„œ 2ì°¨ì ìœ¼ë¡œ @Beanì„ ì½ì–´ë“¤ì¸ë‹¤. @SpringBootConfiguration @SpringBootConfigurationì€ ê¸°ì¡´ì˜ Configurationê³¼ ë¹„ìŠ·í•˜ë‹¤. @ComponentScan ê¸°ë³¸ ê°’ì€ @SpringBootApplication ê°€ ì‘ì„±ëœ íŒ¨í‚¤ì§€ì™€ í•˜ìœ„ íŒ¨í‚¤ì§€ì˜ ëª¨ë“  @Component ì™€ @Bean ì„ ì°¾ì•„ Spring Bean ìœ¼ë¡œ ë“±ë¡í•œë‹¤. @EnableAutoConfiguration Spring Bootì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ ìë™ ì„¤ì •ì„ í™œì„±í™”í•©ë‹ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì„¤ì •ì„ ê¸°ë°˜ìœ¼ë¡œ í•„ìš”í•œ Bean ë“¤ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì¦‰ springbootëŠ” Beanì„ ë‘ë²ˆ ë“±ë¡í•˜ëŠ” ì‘ì—…ì„ ê±°ì¹œë‹¤. @ComponentScan@ComponentScanì€ Application.classì— ìˆë‹¤. ìœ„ ê·¸ë¦¼ì—ì„œëŠ” aì™€ b íŒ¨í‚¤ì§€ì˜ ê²½ìš°ëŠ” ComponentScanì˜ ëŒ€ìƒì´ ë˜ë‚˜ maple íŒ¨í‚¤ì§€ì˜ ê²½ìš° ComponentScanì˜ ëŒ€ìƒì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. @ComponentScanì—ì„œ Scan ëŒ€ìƒ @Component @Configuration @Repository @Service @Controller @RestController ìœ„ ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì§„ classë“¤ì„ scaní•˜ì—¬ Beanìœ¼ë¡œ ë“±ë¡ì„ í•œë‹¤. @ComponentScanì„ ê°€ì§„ classë¶€í„° ì‹œì‘í•˜ì—¬ í•˜ìœ„ packageë“¤ì„ scaní•´ ìœ„ ì–´ë…¸í…Œì´ì…˜ì´ ë‹¬ë ¤ ìˆëŠ” ê²ƒë“¤ì„ Beanìœ¼ë¡œ ë“±ë¡í•œë‹¤. scanì„ í•  ë•ŒëŠ” TypeExcludeFilter.classì™€ AutoConfigurationExcludeFilter.classë“¤ì„ ì œì™¸í•˜ì—¬ scaní•œë‹¤. @EnableAutoConfigurationEnableAutoConfiguration ì€ spring-boot-autoconfigure íŒ¨í‚¤ì§€ë‚´ META-INF í´ë”ì— ì •ì˜ëœ spring.factories íŒŒì¼ì„ ì½ì–´ ìë™ìœ¼ë¡œ ì„¤ì •ì„ ì¡ì•„ì¤ë‹ˆë‹¤. spring.factories íŒŒì¼ë‚´ org.springframework.boot.autoconfigure.EnableAutoConfiguration ì„ í‚¤ë¡œ ìë™ìœ¼ë¡œ ì„¤ì •ì„ ì¡ì•„ì¤„ í•­ëª©ë“¤ì´ ì •ì˜ë¼ ìˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì„¤ì •ì„ ê¸°ë°˜ìœ¼ë¡œ, í•„ìš”í•œ ë¹ˆì„ ìë™ìœ¼ë¡œ êµ¬ì„±í•˜ê³  ë“±ë¡í•©ë‹ˆë‹¤. @EnableAutoConfiguration ì œê±°ìŠ¤í”„ë§ë¶€íŠ¸ì—ì„œ @EnableAutoConfiguration ì´ ì—†ì–´ë„ ì‘ë™ì€ í•˜ì§€ë§Œ ë¬¸ì œê°€ ìƒê¸´ë‹¤. @SpringBootConfiguration@ComponentScan// @EnableAutoConfigurationpublic class Application &#123; public static void main(String[] args) &#123; SpringApplication.run(Application.class, args); &#125;&#125; Caused by: org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean. ìë™ ì„¤ì •ì„ ë¹„í™œì„±í™” í•¨ìœ¼ë¡œì¨ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì›¹ìœ¼ë¡œ ë„ìš°ê¸° ìœ„í•œ ì„¤ì •ì´ ì•ˆë¼ ìˆê¸° ë•Œë¬¸ì— ServletWebServerFactory bean ì´ ì—†ë‹¤ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. SpringApplication.run()ì„ ë°”ë¡œ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ í˜•íƒœë¡œ ì‘ë™ì„ í•œë‹¤. EnableAutoConfigurationì—†ì´ëŠ” ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥ í•˜ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. @SpringBootConfiguration@ComponentScan//@EnableAutoConfigurationpublic class Application &#123; public static void main(String[] args) &#123; // SpringApplication.run(Application.class, args); // SpringApplication ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë©´ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•´ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. SpringApplication application = new SpringApplication(Application.class); // webApplicationë§Œë“œëŠ” ì„¤ì •ì„ êº¼ì¤€ë‹¤. application.setWebApplicationType(WebApplicationType.NONE); application.run(args); &#125;&#125; SpringApplication ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œ í›„ì— setWebApplicationType()ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ WebApplicationType.NONEì¸ì ê°’ì„ ë„˜ê²¨ì£¼ë©´ webApplicationìœ¼ë¡œ ë§Œë“¤ì–´ ì£¼ëŠ” ì„¤ì •ì„ ëŒ ìˆ˜ ìˆë‹¤. ì‘ë™ì€ ê°€ëŠ¥í•˜ë‚˜ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì‘ë™í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. @ConditionalOnXxxYyyZzz @ConditionalOnWebApplication(type &#x3D; Type.SERVLET) ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ íƒ€ì…ì— ë”°ë¼ ì„¤ì •ì„ ë‹¤ë¥´ê²Œ í•œë‹¤. @ConditionalOnMissingBean(HiddenHttpMethodFilter.class) í•´ë‹¹ Beanì´ ì—†ìœ¼ë©´ ë‹¤ë¥¸ ê²ƒì„ ë“±ë¡ í•œë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"}],"tags":[]},{"title":"Spring Bootì˜ ì˜ì¡´ì„±","slug":"spring/spring-framework/springboot-dependency","date":"2021-02-17T23:03:58.000Z","updated":"2024-02-26T16:05:43.988Z","comments":true,"path":"2021/02/18/spring/spring-framework/springboot-dependency/","link":"","permalink":"https://ckck803.github.io/2021/02/18/spring/spring-framework/springboot-dependency/","excerpt":"Spring Bootì˜ ì˜ì¡´ì„±pom.xmlíŒŒì¼ì— ì˜ì¡´ì„± ì¶”ê°€&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ì˜ì¡´ì„± ê´€ë¦¬ ê¸°ëŠ¥ ë•ë¶„ì—ì˜ì¡´ì„± ì •ì˜ì‹œ versionì„ ë”°ë¡œ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ ì ì ˆí•œ versionì„ ê°€ì ¸ì˜¨ë‹¤. ì˜ì¡´ì„± ìƒì† ê´€ê³„spring-boot-starter-parent&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.2.5.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&lt;/parent&gt; spring-boot-dependencies","text":"Spring Bootì˜ ì˜ì¡´ì„±pom.xmlíŒŒì¼ì— ì˜ì¡´ì„± ì¶”ê°€&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ì˜ì¡´ì„± ê´€ë¦¬ ê¸°ëŠ¥ ë•ë¶„ì—ì˜ì¡´ì„± ì •ì˜ì‹œ versionì„ ë”°ë¡œ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ ì ì ˆí•œ versionì„ ê°€ì ¸ì˜¨ë‹¤. ì˜ì¡´ì„± ìƒì† ê´€ê³„spring-boot-starter-parent&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.2.5.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&lt;/parent&gt; spring-boot-dependencies&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt; &lt;version&gt;2.2.5.RELEASE&lt;/version&gt; &lt;relativePath&gt;../../spring-boot-dependencies&lt;/relativePath&gt;&lt;/parent&gt;...&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt;... spring-boot-starter-parent -&gt; spring-boot-dependenciesë¡œ ê°€ê²Œ ë˜ë©´dependencyManagementíƒœê·¸ë¥¼ í†µí•´ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ê´€ë¦¬í•˜ëŠ” ì˜ì¡´ì„±ê³¼ versionë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. spring-boot-dependenciesë¼ëŠ” pomì•ˆì— ì •ì˜ ë˜ì–´ ìˆëŠ” ê²ƒë“¤ ì¤‘ì— í•˜ë‚˜ë¼ë„ ì“°ê²Œ ëœë‹¤ë©´ì§ì ‘ versionì„ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ ëœë‹¤. dependencyManagement ê¸°ëŠ¥ì´ ìˆì–´ì„œ ìˆ˜ ë§ì€ Libraryë“¤ì´ ë“¤ì–´ì˜¤ê²Œ ëœë‹¤.ë”°ë¼ì„œ, ìš°ë¦¬ê°€ ê´€ë¦¬í•´ì•¼ í•  ì˜ì¡´ì„±ì˜ ìˆ˜ê°€ ì¤„ì–´ë“ ë‹¤. dependency í™•ì¸ Maven Projects Tabì—ì„œ dependencyë“¤ì„ ì‰½ê²Œ ë³¼ ìˆ˜ ìˆë‹¤. ì˜ì¡´ì„± ì¶”ê°€starter ìœ„ì£¼ë¡œ ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ë©° ëœë‹¤.ë§Œì•½ pomì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ” ì˜ì¡´ì„± ì¶”ê°€ì‹œ versionê¹Œì§€ ëª…ì‹œí•´ ì£¼ì–´ì•¼ í•œë‹¤.springboot dependencyì—ì„œ ê´€ë¦¬í•˜ëŠ” ì˜ì¡´ì„±ì€ êµ³ì´ versionì„ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ ë˜ë‚˜ íŠ¹ë³„íˆ ì›í•˜ëŠ” versionì´ ìˆìœ¼ë©´ versionì„ ëª…ì‹œí•´ ì£¼ë©´ override(ë®ì–´ì“°ê¸°)ê°€ ëœë‹¤. springboot ì˜ì¡´ì„± ê´€ë¦¬&lt;parent&gt;ë¥¼ í†µí•´ì„œ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•´ì¤€ë‹¤. ë§Œì•½, í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œ parent.pomì„ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²½ìš° projectê°€ ìƒì†í•˜ëŠ” parentì— spring-boot-starter-parentë¥¼ ìƒì†í•˜ëŠ” ë°©ë²• &lt;dependencyManagement&gt;ìƒ‰ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²• &lt;dependecyManagement&gt;ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë¬¸ì œì ì´ ìƒê¸°ëŠ”ë°,spring-boot-starter-parentê°€ ë‹¨ìˆœíˆ ì˜ì¡´ì„±ë§Œì„ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì•„ë‹Œ ì—¬ëŸ¬ê°€ì§€ ì„¤ì •ë“¤ì„ í•¨ê»˜ ê°€ì ¸ ì˜¤ê¸° ë•Œë¬¸ì´ë‹¤. ex) ìë°” ë²„ì „, ë¬¸ì ì¸ì½”ë”© ë°©ì‹, resource(ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” propertiesì™€ yamlíŒŒì¼ë“¤)ê³¼ spring-bootë¥¼ ìµœì •í™” ì‹œì¼œì£¼ëŠ” ì—¬ëŸ¬ê°€ì§€ ì„¤ì •ë“¤","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Spring Framework","slug":"Spring/Spring-Boot/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Spring-Framework/"}],"tags":[]},{"title":"Spring-JWT(JSON Web Token) - 1. JWT ì•Œì•„ë³´ê¸°","slug":"spring/spring-security/jwt/spring-jwt-01","date":"2021-02-17T03:41:39.000Z","updated":"2024-02-26T16:21:52.559Z","comments":true,"path":"2021/02/17/spring/spring-security/jwt/spring-jwt-01/","link":"","permalink":"https://ckck803.github.io/2021/02/17/spring/spring-security/jwt/spring-jwt-01/","excerpt":"1. JWT(JSON Web Token) ì•Œì•„ë³´ê¸°ëª©ì°¨ Spring-JWT(JSON Web Token) - 4. JWT ë‹¤ë£¨ê¸° Spring-JWT(JSON Web Token) - 3. Spring Security ì ìš©í•˜ê¸° Spring-JWT(JSON Web Token) - 2. íšŒì›ê°€ì… Spring-JWT(JSON Web Token) - 1. JWT ì•Œì•„ë³´ê¸° ì°¸ê³  https://jwt.io/ JWT ë€? JWTëŠ” JSON Web Tokenì˜ ì•½ìë¡œ ì‚¬ìš©ì ì •ë³´ì™€ ë°ì´í„° ì†ì„±ê³¼ ê°™ì€ Claim ì •ë³´ë¥¼ JSON ì„ ì´ìš©í•´ í‘œí˜„í•œ Web TokenJWTëŠ” Tokenë‚´ì— í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ì „ë‹¬í•´ì£¼ëŠ” ìê°€ìˆ˜ìš©ì ì¸ íŠ¹ì§•ì´ ìˆë‹¤ JWTëŠ” Header, Payload, Signature ì„¸ê°€ì§€ë¡œ êµ¬ì„±ë¼ ìˆë‹¤. ê° ë¶€ë¶„ì€ Json í˜•íƒœ ë¡œ ì´ë¤„ì ¸ ìˆìœ¼ë©° base64ë¡œ ì¸ì½”ë”© ë¼ .ë¡œ ë‚˜ë‰˜ì–´ êµ¬ë¶„ëœë‹¤.","text":"1. JWT(JSON Web Token) ì•Œì•„ë³´ê¸°ëª©ì°¨ Spring-JWT(JSON Web Token) - 4. JWT ë‹¤ë£¨ê¸° Spring-JWT(JSON Web Token) - 3. Spring Security ì ìš©í•˜ê¸° Spring-JWT(JSON Web Token) - 2. íšŒì›ê°€ì… Spring-JWT(JSON Web Token) - 1. JWT ì•Œì•„ë³´ê¸° ì°¸ê³  https://jwt.io/ JWT ë€? JWTëŠ” JSON Web Tokenì˜ ì•½ìë¡œ ì‚¬ìš©ì ì •ë³´ì™€ ë°ì´í„° ì†ì„±ê³¼ ê°™ì€ Claim ì •ë³´ë¥¼ JSON ì„ ì´ìš©í•´ í‘œí˜„í•œ Web TokenJWTëŠ” Tokenë‚´ì— í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ì „ë‹¬í•´ì£¼ëŠ” ìê°€ìˆ˜ìš©ì ì¸ íŠ¹ì§•ì´ ìˆë‹¤ JWTëŠ” Header, Payload, Signature ì„¸ê°€ì§€ë¡œ êµ¬ì„±ë¼ ìˆë‹¤. ê° ë¶€ë¶„ì€ Json í˜•íƒœ ë¡œ ì´ë¤„ì ¸ ìˆìœ¼ë©° base64ë¡œ ì¸ì½”ë”© ë¼ .ë¡œ ë‚˜ë‰˜ì–´ êµ¬ë¶„ëœë‹¤. Header í† í° íƒ€ì… ê³¼ ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ ì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê²¨ ìˆë‹¤. alg Signatureì—ì„œ ì‚¬ìš©í•˜ëŠ” ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ ì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê²¨ ìˆë‹¤. ë³´í†µì€ HMACSHA256(Hash-Based Message Authentication Code) ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ê³µê°œí‚¤&#x2F;ê°œì¸í‚¤ ë°©ì‹ì¸ RSA ì•”í˜¸í™” ë°©ì‹ ë„ ì‚¬ìš©í•œë‹¤ typ í† í° íƒ€ì…ì„ ì§€ì •í•œë‹¤. JWT(JSON Web Token) Payload Claim ì •ë³´ë¥¼ ë‹´ê³  ìˆë‹¤. Payloadì— ë‹´ê¸°ëŠ” key-value í•œìŒì´ Claimì´ë‹¤.Claim ì´ë€ ì‚¬ìš©ì ì •ë³´ë‚˜ ë°ì´í„° ì†ì„± ì •ë³´ë¥¼ ì˜ë¯¸í•œë‹¤. Claimì€ í¬ê²Œ Registered Claim, Public Claim, Private Claim 3ê°€ì§€ë¡œ êµ¬ë¶„ì´ ëœë‹¤. Registered Claim í† í° ì •ë³´ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ ì´ë¯¸ ì •í•´ì§„ ì¢…ë¥˜ì˜ ë°ì´í„°ì´ë©°, ì„ íƒì ìœ¼ë¡œ ì‘ì„±ì´ ê°€ëŠ¥í•˜ë‹¤. Claim Claim Name ì„¤ëª… iss issuer í† í° ë°œê¸‰ì sub subject í† í°ì˜ ì œëª© aud audience í† í° ëŒ€ìƒì exp expiration í† í° ë§Œë£Œ ì‹œê°„, NumericDate í˜•ì‹ìœ¼ë¡œ ì‘ì„± nbf not before í† í° í™œì„± ë‚ ì§œ : ì´ ë‚ ì´ ì§€ë‚˜ê¸° ì „ê¹Œì§€ í† í°ì´ í™œì„±í™” ë˜ì§€ ì•ŠëŠ”ë‹¤. iat issued at í† í° ë°œê¸‰ ì‹œê°„ : í† í° ë°œê¸‰ ì´í›„ì˜ ê²½ê³¼ ì‹œê°„ì„ ì•Œ ìˆ˜ ìˆë‹¤. jti JWT ID JWT í† í° ì‹ë³„ì Public Claim Public Claimì€ ì‚¬ìš©ì ì •ì˜ Claimìœ¼ë¡œ, ë³´í†µ ê³µê°œìš© ì •ë³´ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. ë³´í†µì€ ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ URI í¬ë§·ì„ ì´ìš©í•´ì•¼ í•œë‹¤. Private Claim Public Claimì´ ì•„ë‹ˆë©´ì„œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ì—ì„œ ì„ì˜ë¡œ ì •í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ Claim Signature Signature(ì„œëª…) ì€ Token ì˜ ìœ íš¨ì„± ì„ ì…ì¦í•˜ê¸° ìœ„í•œ ì•”í˜¸í™”ëœ ì½”ë“œë‹¤. ì„œëª…ì€ Base64 ë¡œ ì¸ì½”ë”© ëœ Header ì™€ Payload ë¥¼ í•©ì¹œ í›„ ë¹„ë°€í‚¤(secrete key) ë¥¼ ì´ìš©í•´ Header ì— ì •ì˜ëœ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ í•´ì‹±í•˜ê³  ê²°ê³¼ë¥¼ Base64 ë¡œ ì¸ì½”ë”©í•´ ìƒì„±í•œë‹¤. JWTì˜ ì¥ì JWTì˜ ë‹¨ì  Token íƒˆì·¨ ìœ„í—˜ì´ ë‚¨ì•„ ìˆë‹¤. JWT ëŠ” ê²°êµ­ ì‚¬ìš©ìì—ê²Œ ì €ì¥ë˜ëŠ” ê°’ì´ê¸° ë•Œë¬¸ì— Server ì—ì„œ","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"JWT","slug":"Spring/Spring-Security/JWT","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/JWT/"}],"tags":[]},{"title":"Spring Core - BeanDefinition","slug":"spring/spring-core/spring-BeanDefinition","date":"2021-02-16T20:14:19.000Z","updated":"2024-11-25T00:52:24.902Z","comments":true,"path":"2021/02/17/spring/spring-core/spring-BeanDefinition/","link":"","permalink":"https://ckck803.github.io/2021/02/17/spring/spring-core/spring-BeanDefinition/","excerpt":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ BeanDefinition ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” BeanDefinition ì„ ì´ìš©í•´ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„±í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” BeanDefinition ì— ì •ì˜ëœ ë¹ˆ ë©”íƒ€ì •ë³´ë¥¼ ì´ìš©í•´ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„±í•©ë‹ˆë‹¤. ë¹ˆ ë©”íƒ€ ì •ë³´ëŠ” XML, ìë°”ì½”ë“œ ë“±ìœ¼ë¡œ ì‘ì„±ë˜ë©° @Bean, &lt;bean&gt; ë‹¹ í•˜ë‚˜ì”© ë©”íƒ€ì •ë³´ê°€ ìƒì„±ë©ë‹ˆë‹¤. ìŠ¤í”„ë§ì€ ì •ì˜ëœ ë©”íƒ€ì •ë³´ë“¤ì„ ì½ì–´ì™€ BeanDefinition ì„ ìƒì„±í•©ë‹ˆë‹¤. BeanDefinitionReaderì„œë¡œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì •ì˜ëœ ë¹ˆ ë©”íƒ€ì •ë³´ë¥¼ BeanDefinition ìœ¼ë¡œ ìƒì„±í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë§ì€ ë‹¤ì–‘í•œ BeanDefinitionReader ë¥¼ ì œê³µí•©ë‹ˆë‹¤. AnnotationConfigApplicationContext ëŠ” AnnotatedBeanDefinitionReader ë¥¼ ì‚¬ìš©í•´ì„œ AppConfig.class ë¥¼ ì½ê³  BeanDefinition ì„ ìƒì„±í•©ë‹ˆë‹¤. GenericXmlApplicationContext ëŠ” XmlBeanDefinitionReader ë¥¼ ì‚¬ìš©í•´ì„œ appConfig.xml ì„¤ì • ì •ë³´ë¥¼ ì½ê³  BeanDefinition ì„ ìƒì„±í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ í˜•ì‹ì˜ ì„¤ì • ì •ë³´ê°€ ì¶”ê°€ë˜ë©´, XxxBeanDefinitionReaderë¥¼ ë§Œë“¤ì–´ì„œ BeanDefinition ì„ ìƒì„±í•˜ë©´ ëœë‹¤.","text":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ BeanDefinition ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” BeanDefinition ì„ ì´ìš©í•´ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„±í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” BeanDefinition ì— ì •ì˜ëœ ë¹ˆ ë©”íƒ€ì •ë³´ë¥¼ ì´ìš©í•´ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„±í•©ë‹ˆë‹¤. ë¹ˆ ë©”íƒ€ ì •ë³´ëŠ” XML, ìë°”ì½”ë“œ ë“±ìœ¼ë¡œ ì‘ì„±ë˜ë©° @Bean, &lt;bean&gt; ë‹¹ í•˜ë‚˜ì”© ë©”íƒ€ì •ë³´ê°€ ìƒì„±ë©ë‹ˆë‹¤. ìŠ¤í”„ë§ì€ ì •ì˜ëœ ë©”íƒ€ì •ë³´ë“¤ì„ ì½ì–´ì™€ BeanDefinition ì„ ìƒì„±í•©ë‹ˆë‹¤. BeanDefinitionReaderì„œë¡œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì •ì˜ëœ ë¹ˆ ë©”íƒ€ì •ë³´ë¥¼ BeanDefinition ìœ¼ë¡œ ìƒì„±í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë§ì€ ë‹¤ì–‘í•œ BeanDefinitionReader ë¥¼ ì œê³µí•©ë‹ˆë‹¤. AnnotationConfigApplicationContext ëŠ” AnnotatedBeanDefinitionReader ë¥¼ ì‚¬ìš©í•´ì„œ AppConfig.class ë¥¼ ì½ê³  BeanDefinition ì„ ìƒì„±í•©ë‹ˆë‹¤. GenericXmlApplicationContext ëŠ” XmlBeanDefinitionReader ë¥¼ ì‚¬ìš©í•´ì„œ appConfig.xml ì„¤ì • ì •ë³´ë¥¼ ì½ê³  BeanDefinition ì„ ìƒì„±í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ í˜•ì‹ì˜ ì„¤ì • ì •ë³´ê°€ ì¶”ê°€ë˜ë©´, XxxBeanDefinitionReaderë¥¼ ë§Œë“¤ì–´ì„œ BeanDefinition ì„ ìƒì„±í•˜ë©´ ëœë‹¤. BeanDefinition í™•ì¸Beanì„ ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ ë‘ê°€ì§€ê°€ ìˆë‹¤ Beanì„ ì§ì ‘ ë“±ë¡í•˜ëŠ” ë°©ë²•ê³¼ FactoryMethod ë¥¼ ì´ìš©í•œ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. Bean ì„ ì§ì • ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ XML íŒŒì¼ì— Bean ì •ë³´ë¥¼ ì§ì • ë“±ë¡í•˜ëŠ” ë°©ì‹ì´ê³  FactoryMethod ë¥¼ ì´ìš©í•œ ë°©ì‹ì€ class ì™€ ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ë“±ë¡í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. public class BeanDefinitionTest &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class); @Test @DisplayName(&quot;ë¹ˆ ì„¤ì • ë©”íƒ€ì •ë³´ í™•ì¸&quot;) void findApplicationBean()&#123; String[] beanDefinitionNames = ac.getBeanDefinitionNames(); for(String beanDefinitionName : beanDefinitionNames)&#123; BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName); if(beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION)&#123; System.out.println(&quot;beanDefinition = &quot; + beanDefinition + &quot;beanDefinition = &quot; + beanDefinition); &#125; &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Core","slug":"Spring/Spring-Core","permalink":"https://ckck803.github.io/categories/Spring/Spring-Core/"}],"tags":[]},{"title":"Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì…","slug":"spring/spring-core/spring-container-bean","date":"2021-02-16T17:14:19.000Z","updated":"2024-11-25T02:49:59.495Z","comments":true,"path":"2021/02/17/spring/spring-core/spring-container-bean/","link":"","permalink":"https://ckck803.github.io/2021/02/17/spring/spring-core/spring-container-bean/","excerpt":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ê³¼ì •ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì…ìŠ¤í”„ë§ ì‹¤í–‰ì‹œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë˜ë©´ ì „ë‹¬ ë°›ì€ ì„¤ì • ì •ë³´ë¥¼ ì´ìš©í•´ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„± ë° ë“±ë¡ í•©ë‹ˆë‹¤. ë¹ˆ ë“±ë¡ì´ ì™„ë£Œëœ í›„ì—ëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•´ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ìŠ¤í”„ë§ì€ ë¹ˆì„ ìƒì„±í•˜ê³  ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ê´€ê³„ê°€ ë‚˜ëˆ ì ¸ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìë°” ì½”ë“œë¡œ ë¹ˆì„ ë“±ë¡í•˜ê²Œ ë˜ë©´ ê°ì²´ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…ê¹Œì§€ í•œë²ˆì— ì´ë¤„ì§€ê²Œ ë©ë‹ˆë‹¤. 1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•ŒëŠ” êµ¬ì„± ì •ë³´ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. êµ¬ì„± ì •ë³´ëŠ” ìë°” í´ë˜ìŠ¤ë‚˜ xml ì„ ì´ìš©í•´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ì‹œ ì„¤ì • ì •ë³´ë¥¼ ì´ìš©í•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì•„ë˜ì—ì„œëŠ” ìë°” í´ë˜ìŠ¤ AppConfig.class ë¥¼ ì„¤ì • ì •ë³´ë¡œ ì´ìš©í•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤. //ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);","text":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ê³¼ì •ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì…ìŠ¤í”„ë§ ì‹¤í–‰ì‹œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë˜ë©´ ì „ë‹¬ ë°›ì€ ì„¤ì • ì •ë³´ë¥¼ ì´ìš©í•´ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„± ë° ë“±ë¡ í•©ë‹ˆë‹¤. ë¹ˆ ë“±ë¡ì´ ì™„ë£Œëœ í›„ì—ëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•´ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ìŠ¤í”„ë§ì€ ë¹ˆì„ ìƒì„±í•˜ê³  ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ê´€ê³„ê°€ ë‚˜ëˆ ì ¸ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìë°” ì½”ë“œë¡œ ë¹ˆì„ ë“±ë¡í•˜ê²Œ ë˜ë©´ ê°ì²´ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…ê¹Œì§€ í•œë²ˆì— ì´ë¤„ì§€ê²Œ ë©ë‹ˆë‹¤. 1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•ŒëŠ” êµ¬ì„± ì •ë³´ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. êµ¬ì„± ì •ë³´ëŠ” ìë°” í´ë˜ìŠ¤ë‚˜ xml ì„ ì´ìš©í•´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ì‹œ ì„¤ì • ì •ë³´ë¥¼ ì´ìš©í•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì•„ë˜ì—ì„œëŠ” ìë°” í´ë˜ìŠ¤ AppConfig.class ë¥¼ ì„¤ì • ì •ë³´ë¡œ ì´ìš©í•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤. //ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class); 2. ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ ì„¤ì • í´ë˜ìŠ¤ ì •ë³´ë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•œë‹¤. ì•„ë˜ì—ì„œëŠ” AppConfig.class ì— ì •ì˜ëœ ê°ì²´ë¥¼ Bean ìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. ë¹ˆ ì´ë¦„ì€ ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. @Bean(&quot;Bean ì´ë¦„&quot;) í˜•ì‹ìœ¼ë¡œ ì§ì ‘ ë¹ˆ ì´ë¦„ì„ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹ˆ ì´ë¦„ì„ ì§ì ‘ ë“±ë¡í• ë•Œ ì¤‘ë³µì´ ìƒê¸°ë©´ í”„ë¡œê·¸ë¨ ì‹¤í–‰ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. 3. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì • - ì¤€ë¹„ 4. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì • - ì™„ë£Œ ë“±ë¡ëœ ëª¨ë“  ë¹ˆ í™•ì¸ApplicationContext ì— ë“±ë¡ëœ ëª¨ë“  Bean ì„ ì¡°íšŒí•˜ê³  ì‹¶ì„ ê²½ìš° ApplicationContext ê°ì²´ì˜ getBeanDefinitionNames ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. @Test@DisplayName(&quot;ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°&quot;)void findAllBean()&#123; String[] beanDefinitionNames = ac.getBeanDefinitionNames(); for(String beanDefinitionName : beanDefinitionNames)&#123; Object bean = ac.getBean(beanDefinitionName); System.out.println(&quot;bean = &quot; + beanDefinitionName + &quot; object = &quot; + bean); &#125;&#125;@Test@DisplayName(&quot;ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°&quot;)void findApplicationBean()&#123; String[] beanDefinitionNames = ac.getBeanDefinitionNames(); for(String beanDefinitionName : beanDefinitionNames)&#123; BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName); if(beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION)&#123; Object bean = ac.getBean(beanDefinitionName); System.out.println(&quot;name = &quot; + beanDefinitionName + &quot; object = &quot; + bean); &#125; &#125;&#125; ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ Bean ì¡°íšŒ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ Bean ì¡°íšŒì‹œ getBean ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ApplicationContext ëŠ” ë“±ë¡ëœ Bean ì„ ê°€ì ¸ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ getBean ë©”ì†Œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. getBean ë©”ì†Œë“œë¥¼ í†µí•´ Bean ì •ë³´ë¥¼ ë°©ë²•ìœ¼ë¡œëŠ” ê°ì²´íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” ë°©ë²•, ê°ì²´íƒ€ì…ê³¼ Bean ì´ë¦„ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” ë°©ë²•, êµ¬ì²´ ê°ì²´íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. @Test@DisplayName(&quot;ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ&quot;)void findBeanByName()&#123; MemberService memberService = ac.getBean(&quot;memberService&quot;, MemberService.class); assertThat(memberService).isInstanceOf(MemberServiceImpl.class);&#125;@Test@DisplayName(&quot;ì´ë¦„ì—†ì´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ&quot;)void findBeanByType()&#123; MemberService memberService = ac.getBean(MemberService.class); assertThat(memberService).isInstanceOf(MemberServiceImpl.class);&#125;@Test@DisplayName(&quot;êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ&quot;)void findBeanByType2()&#123; MemberServiceImpl memberService = ac.getBean(&quot;memberService&quot;, MemberServiceImpl.class); // êµ¬ì²´ì ìœ¼ë¡œ ì ëŠ” ê²ƒì€ ë³„ë¡œ ì•Šì¢‹ë‹¤. // ë  ìˆ˜ ìˆëŠ”í•œ ì¶”ìƒí™”í•œ ì¸í„°í˜ì´ìŠ¤ì— í…ŒìŠ¤íŠ¸ë¥¼ ë§ì¶˜ë‹¤. assertThat(memberService).isInstanceOf(MemberServiceImpl.class);&#125;@Test@DisplayName(&quot;ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒX&quot;)void findBeanByNameX()&#123; assertThatThrownBy(()-&gt;&#123; MemberService xxxxx = ac.getBean(&quot;xxxxx&quot;, MemberService.class); &#125;).isInstanceOf(NoSuchBeanDefinitionException.class);&#125; Bean ì˜ ë™ì¼í•œ íƒ€ì…ì´ ë‘˜ ì´ìƒì¸ ê²½ìš°ê°™ì€ íƒ€ì…ìœ¼ë¡œ ë“±ë¡ëœ ë¹ˆì´ ì—¬ëŸ¬ê°œ ìˆì„ ê²½ìš° getBean ì„ ì´ìš©í•´ Bean ì„ ê°€ì ¸ì˜¤ê²Œ ë˜ë©´ NoUniqueBeanDefinitionException ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. ì´ë•ŒëŠ” íŠ¹ì • Bean ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ ë“±ë¡ëœ Bean ì´ë¦„ ê¹Œì§€ ê°™ì´ ì§€ì •í•´ì£¼ë©´ ì—ëŸ¬ë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ApplicationContext ì— íŠ¹ì • íƒ€ì…ìœ¼ë¡œ ë“±ë¡ëœ ëª¨ë“  Bean ëª©ë¡ì„ ì¡°íšŒ í•˜ê³  ì‹¶ì„ ê²½ìš° ApplicationContext ê°ì²´ì˜ getBeansOfType ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ê°™ì€ íƒ€ì…ìœ¼ë¡œ ì—¬ëŸ¬ê°œì˜ Bean ë“±ë¡memberRepository1 ì™€ memberRepository2 ê°€ ApplicationContext ì— MemberRepository íƒ€ì… Bean ìœ¼ë¡œ ë“±ë¡ë©ë‹ˆë‹¤. public class ApplicationContextExtendsFindTest &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(SameBeanConfig.class); @Configuration static class SameBeanConfig &#123; @Bean public MemberRepository memberRepository1() &#123; return new MemoryMemberRepository(); &#125; @Bean public MemberRepository memberRepository2() &#123; return new MemoryMemberRepository(); &#125; &#125;&#125; ê°™ì€ íƒ€ì…ìœ¼ë¡œ ì—¬ëŸ¬ê°œì˜ Bean ì¡°íšŒ@Test@DisplayName(&quot;íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.&quot;)void findBeanByTypeDuplicate()&#123; assertThatThrownBy(() -&gt;&#123; ac.getBean(MemberRepository.class); &#125;).isInstanceOf(NoUniqueBeanDefinitionException.class);&#125;@Test@DisplayName(&quot;íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤.&quot;)void findBeanByName()&#123; MemberRepository memberRepository = ac.getBean(&quot;memberRepository1&quot;, MemberRepository.class); assertThat(memberRepository).isEqualTo(MemberRepository.class);&#125;@Test@DisplayName(&quot;íŠ¹ì • íƒ€ì…ì„ ëª¨ë‘ ì¡°íšŒí•˜ê¸°&quot;)void findAllBeanByType()&#123; Map&lt;String, MemberRepository&gt; beansOfType = ac.getBeansOfType(MemberRepository.class); for(String key : beansOfType.keySet())&#123; System.out.println(&quot;key = &quot; + key + &quot; value =&quot; + beansOfType.get(key)); &#125; System.out.println(&quot;beansOfType = &quot; + beansOfType); assertThat(beansOfType.size()).isEqualTo(2);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Core","slug":"Spring/Spring-Core","permalink":"https://ckck803.github.io/categories/Spring/Spring-Core/"}],"tags":[]},{"title":"Spring Core - ìŠ¤í”„ë§ ë¹ˆ","slug":"spring/spring-core/spring-bean","date":"2021-02-16T16:14:19.000Z","updated":"2024-11-25T00:52:21.662Z","comments":true,"path":"2021/02/17/spring/spring-core/spring-bean/","link":"","permalink":"https://ckck803.github.io/2021/02/17/spring/spring-core/spring-bean/","excerpt":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìŠ¤í”„ë§ ë¹ˆ ìŠ¤í”„ë§ IoC ì»¨í…Œì´ë„ˆì— ì˜í•´ ìƒì„±ë˜ê³  ê´€ë¦¬ë˜ëŠ” ê°ì²´ë¥¼ ë³´ê³  ìŠ¤í”„ë§ ë¹ˆì´ë¼ ë¶€ë¦…ë‹ˆë‹¤. Bean ê°ì²´ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì˜í•´ ìƒì„± ë° ê´€ë¦¬ë˜ë©° ì¼ë°˜ì ìœ¼ë¡œ ì‹±ê¸€í†¤ ê°ì²´ë¡œ ìƒì„±ë©ë‹ˆë‹¤. Bean ë¼ë¦¬ ì˜ì¡´ê´€ê³„ê°€ ìˆì„ ê²½ìš° ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ Bean ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ë°©ë²• XML ì— ì§ì ‘ ë“±ë¡í•˜ëŠ” ë°©ë²• @ComponentScan ì„ ì´ìš©í•´ ìë™ì ìœ¼ë¡œ Bean ì„ ë“±ë¡í•˜ëŠ” ë°©ë²• @Configuration ê³¼ @Bean ì„ ì´ìš©í•˜ì—¬ ì§ì ‘ì ìœ¼ë¡œ ë“±ë¡ì„ í•˜ë©´ ëœë‹¤. Bean ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì •ì˜í•  ë•ŒëŠ” @Configuration ê°€ì§€ê³  ìˆëŠ” í´ë˜ìŠ¤ ì•ˆì— ì •ì˜í•´ì•¼ í•œë‹¤. @Configuration ì•ˆì—ì„œ @Bean ì„ ì‚¬ìš©í•´ì•¼ ì‹±ê¸€í†¤ì„ ë³´ì¥ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. XML ì„ ì´ìš©í•´ Bean ë“±ë¡í•˜ê¸°ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ë“±ì¥ìœ¼ë¡œ xml ì„ ì´ìš©í•´ ìŠ¤í”„ë§ì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì€ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ì‹ì…ë‹ˆë‹¤. xml ì„ ì´ìš©í•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì˜ ì¥ì ì€ ì»´íŒŒì¼ ì—†ì´ ë¹ˆ ì„¤ì • ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤.","text":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìŠ¤í”„ë§ ë¹ˆ ìŠ¤í”„ë§ IoC ì»¨í…Œì´ë„ˆì— ì˜í•´ ìƒì„±ë˜ê³  ê´€ë¦¬ë˜ëŠ” ê°ì²´ë¥¼ ë³´ê³  ìŠ¤í”„ë§ ë¹ˆì´ë¼ ë¶€ë¦…ë‹ˆë‹¤. Bean ê°ì²´ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì˜í•´ ìƒì„± ë° ê´€ë¦¬ë˜ë©° ì¼ë°˜ì ìœ¼ë¡œ ì‹±ê¸€í†¤ ê°ì²´ë¡œ ìƒì„±ë©ë‹ˆë‹¤. Bean ë¼ë¦¬ ì˜ì¡´ê´€ê³„ê°€ ìˆì„ ê²½ìš° ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ Bean ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ë°©ë²• XML ì— ì§ì ‘ ë“±ë¡í•˜ëŠ” ë°©ë²• @ComponentScan ì„ ì´ìš©í•´ ìë™ì ìœ¼ë¡œ Bean ì„ ë“±ë¡í•˜ëŠ” ë°©ë²• @Configuration ê³¼ @Bean ì„ ì´ìš©í•˜ì—¬ ì§ì ‘ì ìœ¼ë¡œ ë“±ë¡ì„ í•˜ë©´ ëœë‹¤. Bean ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì •ì˜í•  ë•ŒëŠ” @Configuration ê°€ì§€ê³  ìˆëŠ” í´ë˜ìŠ¤ ì•ˆì— ì •ì˜í•´ì•¼ í•œë‹¤. @Configuration ì•ˆì—ì„œ @Bean ì„ ì‚¬ìš©í•´ì•¼ ì‹±ê¸€í†¤ì„ ë³´ì¥ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. XML ì„ ì´ìš©í•´ Bean ë“±ë¡í•˜ê¸°ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ë“±ì¥ìœ¼ë¡œ xml ì„ ì´ìš©í•´ ìŠ¤í”„ë§ì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì€ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ì‹ì…ë‹ˆë‹¤. xml ì„ ì´ìš©í•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì˜ ì¥ì ì€ ì»´íŒŒì¼ ì—†ì´ ë¹ˆ ì„¤ì • ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;bean id = &quot;memberService&quot; class = &quot;com.example.springbasic.member.MemberServiceImpl&quot;&gt; &lt;constructor-arg name=&quot;memberRepository&quot; ref=&quot;memberRepository&quot;/&gt; &lt;/bean&gt; &lt;bean id=&quot;memberRepository&quot; class=&quot;com.example.springbasic.member.MemoryMemberRepository&quot;/&gt; &lt;bean id=&quot;orderService&quot; class=&quot;com.example.springbasic.order.OrderServiceImpl&quot;&gt; &lt;constructor-arg name=&quot;memberRepository&quot; ref=&quot;memberRepository&quot;/&gt; &lt;constructor-arg name=&quot;discountPolicy&quot; ref=&quot;discountPolicy&quot;/&gt; &lt;/bean&gt; &lt;bean id=&quot;discountPolicy&quot; class=&quot;com.example.springbasic.discount.RateDiscountPolicy&quot;/&gt;&lt;/beans&gt; xml íŒŒì¼ì„ ì´ìš©í•´ Bean ì„ ë“±ë¡í•˜ê³  ì‚¬ìš©í•˜ê¸° ìœ„í•´ GenericXmlApplicationContext í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. GenericXmlApplicationContext ì— Bean ì„¤ì •ì„ ì •ì˜í•œ appConfig.xml íŒŒì¼ì„ ì¸ìë¡œ ë„˜ê²¨ì£¼ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•œ í›„ xml íŒŒì¼ì— ì •ì˜ëœ ê°ì²´ë“¤ì„ ìŠ¤í”„ë§ Bean ìœ¼ë¡œ ë“±ë¡í•´ì¤ë‹ˆë‹¤. ApplicationContext ê°ì²´ë‚´ getBean ì„ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì €ì¥ëœ Bean ê°ì²´ë¥¼ ê°€ì ¸ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. public class XmlAppContext &#123; @Test void xmlAppContext()&#123; ApplicationContext ac = new GenericXmlApplicationContext(&quot;appConfig.xml&quot;); MemberService memberService = ac.getBean(&quot;memberService&quot;, MemberService.class); assertThat(memberService).isInstanceOf(MemberService.class); &#125;&#125; @ComponentScan ì„ ì´ìš©í•´ ìë™ìœ¼ë¡œ Bean ë“±ë¡@Component ì´ ë¶™ì–´ìˆëŠ” í´ë˜ìŠ¤ë¥¼ ì°¾ì•„ì„œ Beanìœ¼ë¡œ ë“±ë¡í•´ì¤€ë‹¤. Repository Service Controller @Configuration ê³¼ @Bean ì„ ì´ìš©í•´ Bean ë“±ë¡í•˜ê¸°Configuration ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ AppConfigë¥¼ ì„¤ì •(êµ¬ì„±) ì •ë³´ë¡œ ì‚¬ìš©í•œë‹¤.Bean ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•œë‹¤. @Configurationpublic class AppConfig &#123; @Bean public MemberService memberService()&#123; return new MemberServiceImpl(memberRepository()); &#125; @Bean public MemberRepository memberRepository() &#123; return new MemoryMemberRepository(); &#125; @Bean public OrderService orderService()&#123; return new OrderServiceImpl(memberRepository(), discountPolicy()); &#125; @Bean public DiscountPolicy discountPolicy() &#123;// return new FixDiscountPolicy(); return new RateDiscountPolicy(); &#125;&#125; @Configuration ê³¼ @Bean ë¥¼ ì‚¬ìš©í•´ ì •ì˜í•œ Bean ê°ì²´ë¥¼ ë“±ë¡ ë° ì‚¬ìš©í•˜ê¸° ìœ„í•´ AnnotationConfigApplicationContext í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. AnnotationConfigApplicationContext ì— Bean ì„¤ì •ì„ ì •ì˜í•œ AppConfig.class ë¥¼ ë„˜ê²¨ì£¼ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•œ í›„ @Bean ì´ ë¶™ì€ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ ë°˜í™˜ë°›ì€ ê°ì²´ë“¤ì„ ìŠ¤í”„ë§ Bean ìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. public class OrderApp &#123; public static void main(String[] args) &#123;// AppConfig appConfig = new AppConfig();//// MemberService memberService = appConfig.memberService();// OrderService orderService = appConfig.orderService(); ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class); MemberService memberService = applicationContext.getBean(&quot;memberService&quot;, MemberService.class); OrderService orderService = applicationContext.getBean(&quot;orderService&quot;, OrderService.class); Long memberId = 1L; Member member = new Member(memberId, &quot;memberA&quot;, Grade.VIP); memberService.join(member); Order order = orderService.createOrder(memberId, &quot;itemA&quot;, 20000); System.out.println(&quot;order = &quot; + order); &#125;&#125; ìŠ¤í”„ë§ì— ë“±ë¡ëœ ë¹ˆ í™•ì¸í•˜ê¸°ë“±ë¡ëœ ëª¨ë“  ë¹ˆ í™•ì¸@Test@DisplayName(&quot;ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°&quot;)void findAllBean()&#123; String[] beanDefinitionNames = ac.getBeanDefinitionNames(); for(String beanDefinitionName : beanDefinitionNames)&#123; Object bean = ac.getBean(beanDefinitionName); System.out.println(&quot;bean = &quot; + beanDefinitionName + &quot; object = &quot; + bean); &#125;&#125;@Test@DisplayName(&quot;ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°&quot;)void findApplicationBean()&#123; String[] beanDefinitionNames = ac.getBeanDefinitionNames(); for(String beanDefinitionName : beanDefinitionNames)&#123; BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName); if(beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION)&#123; Object bean = ac.getBean(beanDefinitionName); System.out.println(&quot;name = &quot; + beanDefinitionName + &quot; object = &quot; + bean); &#125; &#125;&#125; ë™ì¼í•œ íƒ€ì…ì´ ë‘˜ ì´ìƒpublic class ApplicationContextBasicFindTest &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class); @Test @DisplayName(&quot;ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ&quot;) void findBeanByName()&#123; MemberService memberService = ac.getBean(&quot;memberService&quot;, MemberService.class); assertThat(memberService).isInstanceOf(MemberServiceImpl.class); &#125; @Test @DisplayName(&quot;ì´ë¦„ì—†ì´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ&quot;) void findBeanByType()&#123; MemberService memberService = ac.getBean(MemberService.class); assertThat(memberService).isInstanceOf(MemberServiceImpl.class); &#125; @Test @DisplayName(&quot;êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ&quot;) void findBeanByType2()&#123; MemberServiceImpl memberService = ac.getBean(&quot;memberService&quot;, MemberServiceImpl.class); // êµ¬ì²´ì ìœ¼ë¡œ ì ëŠ” ê²ƒì€ ë³„ë¡œ ì•Šì¢‹ë‹¤. // ë  ìˆ˜ ìˆëŠ”í•œ ì¶”ìƒí™”í•œ ì¸í„°í˜ì´ìŠ¤ì— í…ŒìŠ¤íŠ¸ë¥¼ ë§ì¶˜ë‹¤. assertThat(memberService).isInstanceOf(MemberServiceImpl.class); &#125; @Test @DisplayName(&quot;ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒX&quot;) void findBeanByNameX()&#123; assertThatThrownBy(()-&gt;&#123; MemberService xxxxx = ac.getBean(&quot;xxxxx&quot;, MemberService.class); &#125;).isInstanceOf(NoSuchBeanDefinitionException.class); &#125;&#125; ìƒì† ê´€ê³„public class ApplicationContextSameBeanFindTest &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(SameBeanConfig.class); @Test @DisplayName(&quot;íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.&quot;) void findBeanByTypeDuplicate()&#123; assertThatThrownBy(() -&gt;&#123; ac.getBean(MemberRepository.class); &#125;).isInstanceOf(NoUniqueBeanDefinitionException.class); &#125; @Test @DisplayName(&quot;íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤.&quot;) void findBeanByName()&#123; MemberRepository memberRepository = ac.getBean(&quot;memberRepository1&quot;, MemberRepository.class); assertThat(memberRepository).isEqualTo(MemberRepository.class); &#125; @Test @DisplayName(&quot;íŠ¹ì • íƒ€ì…ì„ ëª¨ë‘ ì¡°íšŒí•˜ê¸°&quot;) void findAllBeanByType()&#123; Map&lt;String, MemberRepository&gt; beansOfType = ac.getBeansOfType(MemberRepository.class); for(String key : beansOfType.keySet())&#123; System.out.println(&quot;key = &quot; + key + &quot; value =&quot; + beansOfType.get(key)); &#125; System.out.println(&quot;beansOfType = &quot; + beansOfType); assertThat(beansOfType.size()).isEqualTo(2); &#125; @Configuration static class SameBeanConfig &#123; @Bean public MemberRepository memberRepository1() &#123; return new MemoryMemberRepository(); &#125; @Bean public MemberRepository memberRepository2() &#123; return new MemoryMemberRepository(); &#125; &#125;&#125; public class ApplicationContextExtendsFindTest &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(TestConfig.class); @Test @DisplayName(&quot;ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ, ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.&quot;) void findBeanByParentTypeDuplicate()&#123; assertThatThrownBy(() -&gt; &#123; ac.getBean(DiscountPolicy.class); &#125;).isInstanceOf(NoUniqueBeanDefinitionException.class); &#125; @Test @DisplayName(&quot;ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ, ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•œë‹¤.&quot;) void findBeanByParentTypeBeanName()&#123; DiscountPolicy rateDiscountPolicy = ac.getBean(&quot;rateDiscountPolicy&quot;, DiscountPolicy.class); assertThat(rateDiscountPolicy).isInstanceOf(RateDiscountPolicy.class); &#125; @Test @DisplayName(&quot;íŠ¹ì • í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ&quot;) void findBeanBySubType()&#123; // êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì§€ì • RateDiscountPolicy bean = ac.getBean(RateDiscountPolicy.class); assertThat(bean).isInstanceOf(RateDiscountPolicy.class); &#125; @Test @DisplayName(&quot;ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸°&quot;) void findAllBeanByParentType()&#123; Map&lt;String, DiscountPolicy&gt; beansOfType = ac.getBeansOfType(DiscountPolicy.class); assertThat(beansOfType.size()).isEqualTo(2); for(String key : beansOfType.keySet())&#123; System.out.println(&quot;key = &quot; + key + &quot; value = &quot; + beansOfType.get(key)); &#125; &#125; @Test @DisplayName(&quot;ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸° - Object&quot;) void findAllBeanByObjectType()&#123; Map&lt;String, Object&gt; beansOfType = ac.getBeansOfType(Object.class); for(String key : beansOfType.keySet())&#123; System.out.println(&quot;key = &quot; + key + &quot; value = &quot; + beansOfType.get(key)); &#125; &#125; @Configuration static class TestConfig&#123; @Bean public DiscountPolicy rateDiscountPolicy()&#123; return new RateDiscountPolicy(); &#125; @Bean public DiscountPolicy fixDiscountPolicy()&#123; return new FixDiscountPolicy(); &#125; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Core","slug":"Spring/Spring-Core","permalink":"https://ckck803.github.io/categories/Spring/Spring-Core/"}],"tags":[]},{"title":"Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ","slug":"spring/spring-core/spring-container","date":"2021-02-16T15:14:19.000Z","updated":"2024-11-25T00:52:34.250Z","comments":true,"path":"2021/02/17/spring/spring-core/spring-container/","link":"","permalink":"https://ckck803.github.io/2021/02/17/spring/spring-core/spring-container/","excerpt":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ IoC(Inversion of Control)ê°ì²´ì˜ ìƒì„±, ê°ì²´ê°„ì˜ ì˜ì¡´ì„± ê³¼ ê°™ì€ í”„ë¡œê·¸ë¨ì˜ íë¦„ ì„ ê°œë°œìê°€ ì•„ë‹ˆë¼ í”„ë ˆì„ì›Œí¬ë‚˜ ì™¸ë¶€ ì»¨í…Œì´ë„ˆì—ê°€ ê´€ë¦¬ í•´ì£¼ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰, í”„ë¡œê·¸ë¨ì— ëŒ€í•œ ì œì–´ê¶Œì´ ê°œë°œìê°€ ì•„ë‹ˆë¼ í”„ë ˆì„ì›Œí¬ë‚˜ ì™¸ë¶€ ì»¨í…Œì´ë„ˆì—ì„œ ê´€ë¦¬ê°€ ë©ë‹ˆë‹¤. ìŠ¤í”„ë§ì˜ í•µì‹¬ìš”ì†Œì¸ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ì˜ ìƒì„±ê³¼ ê´€ë¦¬, ì˜ì¡´ì„± ì£¼ì…, ìƒëª…ì£¼ê¸°ë“±ì„ í•´ì£¼ê¸° ë•Œë¬¸ì— IoC ì»¨í…Œì´ë„ˆ ë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì£¼ìš” ê¸°ëŠ¥ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì»¨í…Œì´ë„ˆì— ë“±ë¡í•©ë‹ˆë‹¤. ì´ë•Œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë“¤ì„ ìŠ¤í”„ë§ Bean ì´ë¼ ë¶€ë¥´ê³  ì»¨í…Œì´ë„ˆëŠ” ë“±ë¡ëœ Bean ì˜ ìƒì„±, ì´ˆê¸°í™”, ì†Œë©¸ê¹Œì§€ì˜ ì „ì²´ì ì¸ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ Bean ë“¤ì´ ìƒì„±ëœ í›„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ê°„ì˜ ê´€ê³„ë¥¼ í™•ì¸ í›„ ì„¤ì •ì— ë”°ë¼ ì˜ì¡´ì„±ì„ ì£¼ì…í•©ë‹ˆë‹¤. Bean ìœ¼ë¡œ ë“±ë¡ë˜ì§€ ì•Šì€ ê°ì²´ì— ëŒ€í•´ì„œëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ ì´ë¤„ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.","text":"ëª©ì°¨ Spring Core - ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ Spring Core - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ì„± ì£¼ì… Spring Core - BeanDefinition Spring Core - ìŠ¤í”„ë§ ë¹ˆ Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±ê³¼ Bean ë“±ë¡, ì˜ì¡´ì„± ì£¼ì… Spring Core - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ IoC(Inversion of Control)ê°ì²´ì˜ ìƒì„±, ê°ì²´ê°„ì˜ ì˜ì¡´ì„± ê³¼ ê°™ì€ í”„ë¡œê·¸ë¨ì˜ íë¦„ ì„ ê°œë°œìê°€ ì•„ë‹ˆë¼ í”„ë ˆì„ì›Œí¬ë‚˜ ì™¸ë¶€ ì»¨í…Œì´ë„ˆì—ê°€ ê´€ë¦¬ í•´ì£¼ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰, í”„ë¡œê·¸ë¨ì— ëŒ€í•œ ì œì–´ê¶Œì´ ê°œë°œìê°€ ì•„ë‹ˆë¼ í”„ë ˆì„ì›Œí¬ë‚˜ ì™¸ë¶€ ì»¨í…Œì´ë„ˆì—ì„œ ê´€ë¦¬ê°€ ë©ë‹ˆë‹¤. ìŠ¤í”„ë§ì˜ í•µì‹¬ìš”ì†Œì¸ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ì˜ ìƒì„±ê³¼ ê´€ë¦¬, ì˜ì¡´ì„± ì£¼ì…, ìƒëª…ì£¼ê¸°ë“±ì„ í•´ì£¼ê¸° ë•Œë¬¸ì— IoC ì»¨í…Œì´ë„ˆ ë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì£¼ìš” ê¸°ëŠ¥ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì»¨í…Œì´ë„ˆì— ë“±ë¡í•©ë‹ˆë‹¤. ì´ë•Œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë“¤ì„ ìŠ¤í”„ë§ Bean ì´ë¼ ë¶€ë¥´ê³  ì»¨í…Œì´ë„ˆëŠ” ë“±ë¡ëœ Bean ì˜ ìƒì„±, ì´ˆê¸°í™”, ì†Œë©¸ê¹Œì§€ì˜ ì „ì²´ì ì¸ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ Bean ë“¤ì´ ìƒì„±ëœ í›„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ê°„ì˜ ê´€ê³„ë¥¼ í™•ì¸ í›„ ì„¤ì •ì— ë”°ë¼ ì˜ì¡´ì„±ì„ ì£¼ì…í•©ë‹ˆë‹¤. Bean ìœ¼ë¡œ ë“±ë¡ë˜ì§€ ì•Šì€ ê°ì²´ì— ëŒ€í•´ì„œëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ ì´ë¤„ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ê¸° - ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì•„ë˜ ì½”ë“œê°€ ë™ì‘í•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ì½”ë“œë¥¼ ë³´ë©´ OwnerController ëŠ” OwnerRepository ê°ì²´ë¥¼ ì˜ì¡´í•˜ëŠ” ìƒí™©ì—ì„œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ê°œë°œì ëŒ€ì‹  ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì˜ì¡´ê´€ê³„ë¥¼ ì„¤ì •í•´ì¤ë‹ˆë‹¤. ì¦‰, OwnerRepository ê°ì²´ë¥¼ ìƒì„±í•˜ê³  OwnerController ì— ì£¼ì…í•©ë‹ˆë‹¤. IoC ì»¨í…Œì´ë„ˆëŠ” ì´ëŸ° ê°ì²´ (Bean) ë¥¼ ìƒì„±í•˜ê³  ì˜ì¡´ì„±ì„ ê´€ë¦¬í•´ì¤ë‹ˆë‹¤. class OwnerController &#123; // new ë¥¼ í†µí•´ ê°œë°œìê°€ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. private OwnerRepository repo; // OwnerRepository ë¥¼ ì™¸ë¶€ë¡œ ë¶€í„° ì£¼ì…ë°›ëŠ”ë‹¤. // ìƒì„±ì ì£¼ì…ì„ í†µí•´ OwnerRepository ê°ì²´ë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤. @Autowired public OwnerController(OwnerRepository repo) &#123; this.repo = repo; &#125;// repoë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. &#125; ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ ì‹±ê¸€í†¤(SingleTon) ì€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ 1ê°œë§Œ ìƒì„±ë˜ëŠ” ê²ƒì„ ë³´ì¥íŒ ë””ìì¸ íŒ¨í„´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ ìƒì„±ì‹œ ì‹±ê¸€í†¤ìœ¼ë¡œ ìƒì„± ë° ê´€ë¦¬í•©ë‹ˆë‹¤. ë•Œë¬¸ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ, ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¼ ë¶ˆë¦¬ê¸°ë„ í•©ë‹ˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Core","slug":"Spring/Spring-Core","permalink":"https://ckck803.github.io/categories/Spring/Spring-Core/"}],"tags":[]},{"title":"ë°±ì¤€ - 14499 ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°","slug":"algorithm/baekjoon/á„‰á…µá„†á…²á†¯á„…á…¦á„‹á…µá„‰á…§á†«/14499","date":"2021-02-15T22:51:54.000Z","updated":"2024-11-28T13:59:37.064Z","comments":true,"path":"2021/02/16/algorithm/baekjoon/á„‰á…µá„†á…²á†¯á„…á…¦á„‹á…µá„‰á…§á†«/14499/","link":"","permalink":"https://ckck803.github.io/2021/02/16/algorithm/baekjoon/%E1%84%89%E1%85%B5%E1%84%86%E1%85%B2%E1%86%AF%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB/14499/","excerpt":"https://www.acmicpc.net/problem/14499 ì²´ì  í˜„í™© ë¬¸ì œ í•´ì„¤ë¬¸ì œë¥¼ ì…ë ¥ë°›ëŠ” ê³³ì—ì„œ í•¨ì •ì´ ìˆë‹¤. í‰ì†Œì— ì„¸ë¡œë¥¼ y, ê°€ë¡œë¥¼ xë¡œ ë†“ê³  ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ì‚¬ëŒë“¤ì—ê²ŒëŠ” í‹€ë¦¬ê¸° ë„ˆë¬´ ì¢‹ì€ ë¬¸ì œì£¼ì‚¬ìœ„ì˜ í˜„ì¬ ìœ„ì¹˜ë¥¼ ê³„ì† ì¶”ì í•˜ë©´ì„œ ì£¼ì‚¬ìœ„ ìƒíƒœë„ ê³„ì†í•´ì„œ ê´€ë¦¬í•´ì•¼ í•œë‹¤. ìœ„ì¹˜ë¥¼ ì‰½ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì „ì—­ë³€ìˆ˜ë¥¼ í†µí•´ ì „ì—­ì ìœ¼ë¡œ ê´€ë¦¬í–ˆë‹¤. #include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int n, m, x, y, k;int map[22][22];int cube[4][3];vector&lt;int&gt; command;void moveUp() &#123; if (x - 1 &gt;= 0) &#123; x -= 1; int temp01, temp11, temp21, temp31; temp01 = cube[0][1]; temp11 = cube[1][1]; temp21 = cube[2][1]; temp31 = cube[3][1]; cube[0][1] = temp11; cube[1][1] = temp21; cube[2][1] = temp31; cube[3][1] = temp01; int next = map[x][y]; if (next == 0) &#123; map[x][y] = cube[3][1]; &#125; else &#123; cube[3][1] = map[x][y]; map[x][y] = 0; &#125; cout &lt;&lt; cube[1][1] &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; return; &#125;&#125;void moveDown() &#123; if (x + 1 &lt; n) &#123; x += 1; int temp01, temp11, temp21, temp31; temp01 = cube[0][1]; temp11 = cube[1][1]; temp21 = cube[2][1]; temp31 = cube[3][1]; cube[1][1] = temp01; cube[2][1] = temp11; cube[3][1] = temp21; cube[0][1] = temp31; int next = map[x][y]; if (next == 0) &#123; map[x][y] = cube[3][1]; &#125; else &#123; cube[3][1] = map[x][y]; map[x][y] = 0; &#125; cout &lt;&lt; cube[1][1] &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; return; &#125;&#125;void moveRight() &#123; if (y + 1 &lt; m) &#123; y += 1; int temp11, temp12, temp31, temp10; temp11 = cube[1][1]; temp12 = cube[1][2]; temp31 = cube[3][1]; temp10 = cube[1][0]; cube[1][1] = temp10; cube[1][2] = temp11; cube[3][1] = temp12; cube[1][0] = temp31; int next = map[x][y]; if (next == 0) &#123; map[x][y] = cube[3][1]; &#125; else &#123; cube[3][1] = map[x][y]; map[x][y] = 0; &#125; cout &lt;&lt; cube[1][1] &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; return; &#125;&#125;void moveLeft() &#123; if (y - 1 &gt;= 0) &#123; y -= 1; int temp11, temp12, temp31, temp10; temp11 = cube[1][1]; temp12 = cube[1][2]; temp31 = cube[3][1]; temp10 = cube[1][0]; cube[1][0] = temp11; cube[1][1] = temp12; cube[1][2] = temp31; cube[3][1] = temp10; int next = map[x][y]; if (next == 0) &#123; map[x][y] = cube[3][1]; &#125; else &#123; cube[3][1] = map[x][y]; map[x][y] = 0; &#125; cout &lt;&lt; cube[1][1] &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; return; &#125;&#125;void moveCube() &#123; int commandNum = command.size(); for (int i = 0; i &lt; commandNum; i++) &#123; int cntCommand = command[i]; if (cntCommand == 1) &#123; moveRight(); &#125; if (cntCommand == 2) &#123; moveLeft(); &#125; if (cntCommand == 3) &#123; moveUp(); &#125; if (cntCommand == 4) &#123; moveDown(); &#125; &#125;&#125;int main(void) &#123; cin &gt;&gt; n &gt;&gt; m &gt;&gt; x &gt;&gt; y &gt;&gt; k; for (int i = 0; i &lt; n; i++) &#123; &#123; for (int j = 0; j &lt; m; j++) &#123; cin &gt;&gt; map[i][j]; &#125; &#125; &#125; map[x][y] = 0; for (int i = 0; i &lt; k; i++) &#123; int temp = 0; cin &gt;&gt; temp; command.push_back(temp); &#125; moveCube(); return 0;&#125;","text":"https://www.acmicpc.net/problem/14499 ì²´ì  í˜„í™© ë¬¸ì œ í•´ì„¤ë¬¸ì œë¥¼ ì…ë ¥ë°›ëŠ” ê³³ì—ì„œ í•¨ì •ì´ ìˆë‹¤. í‰ì†Œì— ì„¸ë¡œë¥¼ y, ê°€ë¡œë¥¼ xë¡œ ë†“ê³  ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ì‚¬ëŒë“¤ì—ê²ŒëŠ” í‹€ë¦¬ê¸° ë„ˆë¬´ ì¢‹ì€ ë¬¸ì œì£¼ì‚¬ìœ„ì˜ í˜„ì¬ ìœ„ì¹˜ë¥¼ ê³„ì† ì¶”ì í•˜ë©´ì„œ ì£¼ì‚¬ìœ„ ìƒíƒœë„ ê³„ì†í•´ì„œ ê´€ë¦¬í•´ì•¼ í•œë‹¤. ìœ„ì¹˜ë¥¼ ì‰½ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì „ì—­ë³€ìˆ˜ë¥¼ í†µí•´ ì „ì—­ì ìœ¼ë¡œ ê´€ë¦¬í–ˆë‹¤. #include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int n, m, x, y, k;int map[22][22];int cube[4][3];vector&lt;int&gt; command;void moveUp() &#123; if (x - 1 &gt;= 0) &#123; x -= 1; int temp01, temp11, temp21, temp31; temp01 = cube[0][1]; temp11 = cube[1][1]; temp21 = cube[2][1]; temp31 = cube[3][1]; cube[0][1] = temp11; cube[1][1] = temp21; cube[2][1] = temp31; cube[3][1] = temp01; int next = map[x][y]; if (next == 0) &#123; map[x][y] = cube[3][1]; &#125; else &#123; cube[3][1] = map[x][y]; map[x][y] = 0; &#125; cout &lt;&lt; cube[1][1] &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; return; &#125;&#125;void moveDown() &#123; if (x + 1 &lt; n) &#123; x += 1; int temp01, temp11, temp21, temp31; temp01 = cube[0][1]; temp11 = cube[1][1]; temp21 = cube[2][1]; temp31 = cube[3][1]; cube[1][1] = temp01; cube[2][1] = temp11; cube[3][1] = temp21; cube[0][1] = temp31; int next = map[x][y]; if (next == 0) &#123; map[x][y] = cube[3][1]; &#125; else &#123; cube[3][1] = map[x][y]; map[x][y] = 0; &#125; cout &lt;&lt; cube[1][1] &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; return; &#125;&#125;void moveRight() &#123; if (y + 1 &lt; m) &#123; y += 1; int temp11, temp12, temp31, temp10; temp11 = cube[1][1]; temp12 = cube[1][2]; temp31 = cube[3][1]; temp10 = cube[1][0]; cube[1][1] = temp10; cube[1][2] = temp11; cube[3][1] = temp12; cube[1][0] = temp31; int next = map[x][y]; if (next == 0) &#123; map[x][y] = cube[3][1]; &#125; else &#123; cube[3][1] = map[x][y]; map[x][y] = 0; &#125; cout &lt;&lt; cube[1][1] &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; return; &#125;&#125;void moveLeft() &#123; if (y - 1 &gt;= 0) &#123; y -= 1; int temp11, temp12, temp31, temp10; temp11 = cube[1][1]; temp12 = cube[1][2]; temp31 = cube[3][1]; temp10 = cube[1][0]; cube[1][0] = temp11; cube[1][1] = temp12; cube[1][2] = temp31; cube[3][1] = temp10; int next = map[x][y]; if (next == 0) &#123; map[x][y] = cube[3][1]; &#125; else &#123; cube[3][1] = map[x][y]; map[x][y] = 0; &#125; cout &lt;&lt; cube[1][1] &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; return; &#125;&#125;void moveCube() &#123; int commandNum = command.size(); for (int i = 0; i &lt; commandNum; i++) &#123; int cntCommand = command[i]; if (cntCommand == 1) &#123; moveRight(); &#125; if (cntCommand == 2) &#123; moveLeft(); &#125; if (cntCommand == 3) &#123; moveUp(); &#125; if (cntCommand == 4) &#123; moveDown(); &#125; &#125;&#125;int main(void) &#123; cin &gt;&gt; n &gt;&gt; m &gt;&gt; x &gt;&gt; y &gt;&gt; k; for (int i = 0; i &lt; n; i++) &#123; &#123; for (int j = 0; j &lt; m; j++) &#123; cin &gt;&gt; map[i][j]; &#125; &#125; &#125; map[x][y] = 0; for (int i = 0; i &lt; k; i++) &#123; int temp = 0; cin &gt;&gt; temp; command.push_back(temp); &#125; moveCube(); return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ì‹œë®¬ë ˆì´ì…˜","slug":"Develop/Beakjoon/ì‹œë®¬ë ˆì´ì…˜","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/"}],"tags":[]},{"title":"ë°±ì¤€ 3190 - ë±€","slug":"algorithm/baekjoon/BFS/3190","date":"2021-02-15T22:44:52.000Z","updated":"2024-11-28T13:59:35.753Z","comments":true,"path":"2021/02/16/algorithm/baekjoon/BFS/3190/","link":"","permalink":"https://ckck803.github.io/2021/02/16/algorithm/baekjoon/BFS/3190/","excerpt":"https://www.acmicpc.net/problem/3190 ì²´ì  í˜„í™© ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;int board[110][110];int board_size;int num_of_apple;int num_of_command;map&lt;int, char&gt; command;// ë™, ë‚¨, ì„œ, ë¶int dx[4] = &#123;1, 0, -1, 0&#125;;int dy[4] = &#123;0, 1, 0, -1&#125;;int direction[4] = &#123;0, 1, 2, 3&#125;;struct snake &#123; int y; int x; int dir;&#125;;int main(void) &#123; cin &gt;&gt; board_size &gt;&gt; num_of_apple; for (int i = 0; i &lt; num_of_apple; i++) &#123; int y, x; cin &gt;&gt; y &gt;&gt; x; board[y][x] = 1; &#125; cin &gt;&gt; num_of_command; for (int i = 0; i &lt; num_of_command; i++) &#123; int time; char dir; cin &gt;&gt; time &gt;&gt; dir; command[time] = dir; &#125; queue&lt;pair&lt;int, int&gt;&gt; snake_tail; int snake_head_y = 1; int snake_haed_x = 1; int snake_dir = 0; snake_tail.push(&#123;1, 1&#125;); board[1][1] = 2; int time = 0; while (true) &#123; time++; snake_head_y += dy[snake_dir]; snake_haed_x += dx[snake_dir]; snake_tail.push(&#123;snake_head_y, snake_haed_x&#125;); if (board[snake_head_y][snake_haed_x] == 2) &#123; cout &lt;&lt; time &lt;&lt; &#x27;\\n&#x27;; return 0; &#125; if (0 &gt;= snake_head_y || snake_head_y &gt; board_size || 0 &gt;= snake_haed_x || snake_haed_x &gt; board_size) &#123; cout &lt;&lt; time &lt;&lt; &#x27;\\n&#x27;; return 0; &#125; if (board[snake_head_y][snake_haed_x] == 1) &#123; board[snake_head_y][snake_haed_x] = 2; &#125; else &#123; board[snake_head_y][snake_haed_x] = 2; board[snake_tail.front().first][snake_tail.front().second] = 0; snake_tail.pop(); &#125; if (command.find(time) != command.end()) &#123; char com = command[time]; command.erase(time); if (com == &#x27;L&#x27;) &#123; snake_dir = (snake_dir + 3) % 4; &#125; else &#123; snake_dir = (snake_dir + 1) % 4; &#125; &#125; &#125; return 0;&#125;","text":"https://www.acmicpc.net/problem/3190 ì²´ì  í˜„í™© ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;int board[110][110];int board_size;int num_of_apple;int num_of_command;map&lt;int, char&gt; command;// ë™, ë‚¨, ì„œ, ë¶int dx[4] = &#123;1, 0, -1, 0&#125;;int dy[4] = &#123;0, 1, 0, -1&#125;;int direction[4] = &#123;0, 1, 2, 3&#125;;struct snake &#123; int y; int x; int dir;&#125;;int main(void) &#123; cin &gt;&gt; board_size &gt;&gt; num_of_apple; for (int i = 0; i &lt; num_of_apple; i++) &#123; int y, x; cin &gt;&gt; y &gt;&gt; x; board[y][x] = 1; &#125; cin &gt;&gt; num_of_command; for (int i = 0; i &lt; num_of_command; i++) &#123; int time; char dir; cin &gt;&gt; time &gt;&gt; dir; command[time] = dir; &#125; queue&lt;pair&lt;int, int&gt;&gt; snake_tail; int snake_head_y = 1; int snake_haed_x = 1; int snake_dir = 0; snake_tail.push(&#123;1, 1&#125;); board[1][1] = 2; int time = 0; while (true) &#123; time++; snake_head_y += dy[snake_dir]; snake_haed_x += dx[snake_dir]; snake_tail.push(&#123;snake_head_y, snake_haed_x&#125;); if (board[snake_head_y][snake_haed_x] == 2) &#123; cout &lt;&lt; time &lt;&lt; &#x27;\\n&#x27;; return 0; &#125; if (0 &gt;= snake_head_y || snake_head_y &gt; board_size || 0 &gt;= snake_haed_x || snake_haed_x &gt; board_size) &#123; cout &lt;&lt; time &lt;&lt; &#x27;\\n&#x27;; return 0; &#125; if (board[snake_head_y][snake_haed_x] == 1) &#123; board[snake_head_y][snake_haed_x] = 2; &#125; else &#123; board[snake_head_y][snake_haed_x] = 2; board[snake_tail.front().first][snake_tail.front().second] = 0; snake_tail.pop(); &#125; if (command.find(time) != command.end()) &#123; char com = command[time]; command.erase(time); if (com == &#x27;L&#x27;) &#123; snake_dir = (snake_dir + 3) % 4; &#125; else &#123; snake_dir = (snake_dir + 1) % 4; &#125; &#125; &#125; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"BFS","slug":"Develop/Beakjoon/BFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/BFS/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"í‹€ë ¸ìŠµë‹ˆë‹¤ 5","slug":"í‹€ë ¸ìŠµë‹ˆë‹¤-5","permalink":"https://ckck803.github.io/tags/%ED%8B%80%EB%A0%B8%EC%8A%B5%EB%8B%88%EB%8B%A4-5/"},{"name":"ì‹œë®¬ë ˆì´ì…˜","slug":"ì‹œë®¬ë ˆì´ì…˜","permalink":"https://ckck803.github.io/tags/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/"},{"name":"ì‚¼ì„± ê¸°ì¶œ","slug":"ì‚¼ì„±-ê¸°ì¶œ","permalink":"https://ckck803.github.io/tags/%EC%82%BC%EC%84%B1-%EA%B8%B0%EC%B6%9C/"}]},{"title":"JPA - Entityì˜ ìƒëª…ì£¼ê¸°","slug":"jpa/jpa-programming/persist/persistence","date":"2021-02-15T15:14:03.000Z","updated":"2024-11-28T13:59:26.544Z","comments":true,"path":"2021/02/16/jpa/jpa-programming/persist/persistence/","link":"","permalink":"https://ckck803.github.io/2021/02/16/jpa/jpa-programming/persist/persistence/","excerpt":"ëª©ì°¨ JPA - Entityì˜ ìƒëª…ì£¼ê¸° JPA - Persist Context (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸) ì—”í‹°í‹° ìƒëª…ì£¼ê¸°ë¹„ì˜ì† (new&#x2F;transient) Entity ê°ì²´ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ì „í˜€ ê´€ê³„ê°€ ì—†ëŠ” ìƒˆë¡œìš´ ìƒíƒœ Entity ê°ì²´ê°€ ìƒì„±ë¼ ì•„ì§ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ë˜ê¸° ì „ ìƒíƒœë‹¤. // ë¹„ì˜ì† ìƒíƒœMember member = new Member();member.setId(101L);member.setName(&quot;HelloJPA&quot;); ì˜ì† (managed) Entity ê°ì²´ê°€ í˜„ì¬ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ê´€ë¦¬ë˜ëŠ” ìƒíƒœ","text":"ëª©ì°¨ JPA - Entityì˜ ìƒëª…ì£¼ê¸° JPA - Persist Context (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸) ì—”í‹°í‹° ìƒëª…ì£¼ê¸°ë¹„ì˜ì† (new&#x2F;transient) Entity ê°ì²´ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ì „í˜€ ê´€ê³„ê°€ ì—†ëŠ” ìƒˆë¡œìš´ ìƒíƒœ Entity ê°ì²´ê°€ ìƒì„±ë¼ ì•„ì§ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ë˜ê¸° ì „ ìƒíƒœë‹¤. // ë¹„ì˜ì† ìƒíƒœMember member = new Member();member.setId(101L);member.setName(&quot;HelloJPA&quot;); ì˜ì† (managed) Entity ê°ì²´ê°€ í˜„ì¬ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ê´€ë¦¬ë˜ëŠ” ìƒíƒœ í•´ë‹¹ ê°ì²´(Entity) ì— ëŒ€í•œ ë³€ê²½ ì‘ì—…ì€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•œë‹¤. EntityManager Persist ë©”ì†Œë“œë¥¼ ì´ìš©í•´ Entity ê°ì²´ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥í•  ìˆ˜ ìˆë‹¤. // ì˜ì† ìƒíƒœem.persist(member); ì¤€ì˜ì† (detached) ê°ì²´ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ë¼ ìˆë‹¤ê°€ í˜„ì¬ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë¶„ë¦¬(ì‚­ì œ)ëœ ìƒíƒœ, ë” ì´ìƒ JPA ê°€ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë¶„ë¦¬(ì‚­ì œ) ëì„ ë¿ì´ì§€ ë°ì´í„°ì ìœ¼ë¡œì˜ ì‚­ì œëŠ” ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤. í•´ë‹¹ ê°ì²´(Entity) ì— ëŒ€í•œ ë³€ê²½ ì‘ì—…ì´ ì¼ì–´ë‚˜ë„ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ë° Databaseì— ë°˜ì˜ë˜ì§€ ì•ŠëŠ”ë‹¤. // ì¤€ ìƒíƒœem.detach(member); ì‚­ì œ (removed) ë°ì´í„° ì ìœ¼ë¡œ ì‚­ì œëœ ìƒíƒœ // ì‚­ì œ ìƒíƒœem.remove(member);","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"ë°±ì¤€ 1753 - ìµœë‹¨ ê²½ë¡œ","slug":"algorithm/baekjoon/á„ƒá…¡á„‹á…µá†¨á„‰á…³á„á…³á„…á…¡/1753","date":"2021-02-15T15:13:22.000Z","updated":"2024-11-28T13:59:35.415Z","comments":true,"path":"2021/02/16/algorithm/baekjoon/á„ƒá…¡á„‹á…µá†¨á„‰á…³á„á…³á„…á…¡/1753/","link":"","permalink":"https://ckck803.github.io/2021/02/16/algorithm/baekjoon/%E1%84%83%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%A1/1753/","excerpt":"https://www.acmicpc.net/problem/1753 ë¬¸ì œ í•´ì„¤ê°€ì¥ ê¸°ë³¸ì ì´ê³  ì •í˜•í™”ëœ ë‹¤ìµìŠ¤íŠ¸ë¼ ë¬¸ì œì´ë‹¤! ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ì—ì„œëŠ” ìš°ì„ ìˆœìœ„ íë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ê¸°ë³¸ì ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ íëŠ” ê°’ì´ í° ê²ƒë¶€í„° ìš°ì„ ì ìœ¼ë¡œ ë‚˜ê°€ê²Œ ëœë‹¤. #include &lt;bits/stdc++.h&gt;using namespace std;#define INF 987654321int V, E;int startPoint;int dist[20002]; // dist[x] : ì‹œì‘ì ìœ¼ë¡œë¶€í„° ì  xê¹Œì§€ì˜ ìµœë‹¨ ê±°ë¦¬ë¥¼ ì €ì¥í•œë‹¤.vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt; graph;void dijkstra(int start) &#123; // ì´ˆê¸°ê°’ì€ ë¬´í•œëŒ€ë¡œ ì„¤ì •í•´ ë†“ëŠ”ë‹¤. for (int i = 1; i &lt; V + 1; i++) &#123; dist[i] = INF; &#125; priority_queue&lt;pair&lt;int, int&gt;&gt; pq; pq.push(&#123;0, start&#125;); dist[start] = 0; while (!pq.empty()) &#123; int cntDist = -pq.top().first; int cntVertex = pq.top().second; pq.pop(); // í˜„ì¬ ì ê¹Œì§€ì˜ ê±°ë¦¬ì™€ ì €ì¥ëœ ìµœë‹¨ê±°ë¦¬ë¥¼ ë¹„êµí•œë‹¤. // í˜„ì¬ ì ê¹Œì§€ì˜ ê±°ë¦¬ê°€ ë” í° ê²½ìš°ëŠ” ë‚˜ì¤‘ì— ìµœë‹¨ê±°ë¦¬ê°€ ê°±ì‹ ëœ ê²ƒì´ë‹¤. // ìš°ë¦¬ëŠ” ê° ì ì— ìµœë‹¨ê±°ë¦¬ë¡œ ê°„ ìƒíƒœì— ëŒ€í•´ì„œë§Œ ê°±ì‹ ì„ ì§„í–‰í•˜ë¯€ë¡œ ë°‘ì˜ ì—°ì‚°ì€ ì§„í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. if (cntDist &gt; dist[cntVertex]) &#123; continue; &#125; // ì•„ë˜ ë¡œì§ì„ ëŒ€ì‹  ì‚¬ìš©í•´ë„ ê²°ê³¼ëŠ” ë˜‘ê°™ì´ ë‚˜ì˜¨ë‹¤. // ì¦‰ í˜„ì¬ ì ê¹Œì§€ì˜ ê±°ë¦¬ê°€ ìµœë‹¨ê±°ë¦¬ê¹Œì§€ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë‹¨ê³„ì´ë‹¤. // if (cntDist != dist[cntVertex]) &#123; // continue; // &#125; for (int i = 0; i &lt; graph[cntVertex].size(); i++) &#123; int nextVertex = graph[cntVertex][i].first; int weight = graph[cntVertex][i].second; // cntDist ëŒ€ì‹  dist[cntVertex]ë¥¼ ì‚¬ìš©í•´ë„ ê²°ê³¼ëŠ” ë™ì¼í•˜ë‹¤ // int nextDist = dist[cntVertex] + weight; int nextDist = cntDist + weight; if (dist[nextVertex] &gt; nextDist) &#123; dist[nextVertex] = nextDist; // ê°’ì„ ìŒìˆ˜ë¡œ ì €ì¥í•´ ìš°ì„ ìˆœìœ„ê°€ ë°˜ëŒ€ê°€ ë˜ë„ë¡ í•œë‹¤. pq.push(&#123;-nextDist, nextVertex&#125;); &#125; &#125; &#125;&#125;int main(void) &#123; cin &gt;&gt; V &gt;&gt; E; cin &gt;&gt; startPoint; graph = vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt;(V + 1); for (int i = 0; i &lt; E; i++) &#123; int a, b, weight; cin &gt;&gt; a &gt;&gt; b &gt;&gt; weight; graph[a].push_back(&#123;b, weight&#125;); &#125; dijkstra(startPoint); for (int i = 1; i &lt;= V; i++) &#123; if (dist[i] == INF) &#123; cout &lt;&lt; &quot;INF&quot; &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; cout &lt;&lt; dist[i] &lt;&lt; &#x27;\\n&#x27;; &#125; &#125; return 0;&#125; priority_queue&lt;pair&lt;int, int&gt;, vector&lt;pair&lt;int, int&gt;&gt;, greater&lt;pair&lt;int, int&gt;&gt;&gt; pq; ìš°ì„ ìˆœìœ„ íì— greater&lt;pair&lt;int, int&gt;&gt;&gt; pq ì •ë ¬ ë°©ì‹ì„ í†µí•´ ê°’ì´ ì‘ì€ ê²ƒë¶€í„° ìš°ì„ ì ìœ¼ë¡œ ë‚˜ê°€ê²Œ ëœë‹¤. #include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;queue&gt;using namespace std;#define INF 2000000000// ì •ì ì˜ ê°œìˆ˜ : v, ê°„ì„ ì˜ ê°œìˆ˜ : eint v, e;vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt; graph;vector&lt;int&gt; dist;vector&lt;bool&gt; check;int start_node;void dijkstra()&#123; for (int i = 1; i &lt;= v; i++) dist[i] = INF; dist[start_node] = 0; priority_queue&lt;pair&lt;int, int&gt;, vector&lt;pair&lt;int, int&gt;&gt;, greater&lt;pair&lt;int, int&gt;&gt;&gt; pq; pq.push(&#123;0, start_node&#125;); while (!pq.empty()) &#123; int weight = pq.top().first; int cnt_node = pq.top().second; pq.pop(); if (check[cnt_node] == true) continue; check[cnt_node] = true; // ì  cnt_nodeì— ì—°ê²°ëœ ê°„ì„ ì˜ ê°œìˆ˜ int edge_num = graph[cnt_node].size(); for (int j = 0; j &lt; edge_num; j++) &#123; // from : í˜„ì¬ ìœ„ì¹˜, to : ë‹¤ìŒ ìœ„ì¹˜, from_to_weight : í˜„ì¬ìœ„ì¹˜ì—ì„œ ë‹¤ìŒìœ„ì¹˜ ê¹Œì§€ì˜ ê°€ì¤‘ì¹˜ int from = cnt_node, to = graph[cnt_node][j].first, from_to_weight = graph[cnt_node][j].second; if (dist[to] &gt; dist[from] + from_to_weight) &#123; dist[to] = dist[from] + from_to_weight; pq.push(&#123;dist[to], to&#125;); &#125; &#125; &#125;&#125;int main(void)&#123; scanf(&quot;%d %d %d&quot;, &amp;v, &amp;e, &amp;start_node); dist = vector&lt;int&gt;(v + 1, INF); check = vector&lt;bool&gt;(v + 1, false); graph = vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt;(v + 1); for (int i = 0; i &lt; e; i++) &#123; int from, to, weight; scanf(&quot;%d %d %d&quot;, &amp;from, &amp;to, &amp;weight); graph[from].push_back(&#123;to, weight&#125;); &#125; dijkstra(); for (int i = 1; i &lt;= v; i++) &#123; if (dist[i] == INF) printf(&quot;INF\\n&quot;); else &#123; printf(&quot;%d\\n&quot;, dist[i]); &#125; &#125; return 0;&#125;","text":"https://www.acmicpc.net/problem/1753 ë¬¸ì œ í•´ì„¤ê°€ì¥ ê¸°ë³¸ì ì´ê³  ì •í˜•í™”ëœ ë‹¤ìµìŠ¤íŠ¸ë¼ ë¬¸ì œì´ë‹¤! ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ì—ì„œëŠ” ìš°ì„ ìˆœìœ„ íë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ê¸°ë³¸ì ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ íëŠ” ê°’ì´ í° ê²ƒë¶€í„° ìš°ì„ ì ìœ¼ë¡œ ë‚˜ê°€ê²Œ ëœë‹¤. #include &lt;bits/stdc++.h&gt;using namespace std;#define INF 987654321int V, E;int startPoint;int dist[20002]; // dist[x] : ì‹œì‘ì ìœ¼ë¡œë¶€í„° ì  xê¹Œì§€ì˜ ìµœë‹¨ ê±°ë¦¬ë¥¼ ì €ì¥í•œë‹¤.vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt; graph;void dijkstra(int start) &#123; // ì´ˆê¸°ê°’ì€ ë¬´í•œëŒ€ë¡œ ì„¤ì •í•´ ë†“ëŠ”ë‹¤. for (int i = 1; i &lt; V + 1; i++) &#123; dist[i] = INF; &#125; priority_queue&lt;pair&lt;int, int&gt;&gt; pq; pq.push(&#123;0, start&#125;); dist[start] = 0; while (!pq.empty()) &#123; int cntDist = -pq.top().first; int cntVertex = pq.top().second; pq.pop(); // í˜„ì¬ ì ê¹Œì§€ì˜ ê±°ë¦¬ì™€ ì €ì¥ëœ ìµœë‹¨ê±°ë¦¬ë¥¼ ë¹„êµí•œë‹¤. // í˜„ì¬ ì ê¹Œì§€ì˜ ê±°ë¦¬ê°€ ë” í° ê²½ìš°ëŠ” ë‚˜ì¤‘ì— ìµœë‹¨ê±°ë¦¬ê°€ ê°±ì‹ ëœ ê²ƒì´ë‹¤. // ìš°ë¦¬ëŠ” ê° ì ì— ìµœë‹¨ê±°ë¦¬ë¡œ ê°„ ìƒíƒœì— ëŒ€í•´ì„œë§Œ ê°±ì‹ ì„ ì§„í–‰í•˜ë¯€ë¡œ ë°‘ì˜ ì—°ì‚°ì€ ì§„í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. if (cntDist &gt; dist[cntVertex]) &#123; continue; &#125; // ì•„ë˜ ë¡œì§ì„ ëŒ€ì‹  ì‚¬ìš©í•´ë„ ê²°ê³¼ëŠ” ë˜‘ê°™ì´ ë‚˜ì˜¨ë‹¤. // ì¦‰ í˜„ì¬ ì ê¹Œì§€ì˜ ê±°ë¦¬ê°€ ìµœë‹¨ê±°ë¦¬ê¹Œì§€ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë‹¨ê³„ì´ë‹¤. // if (cntDist != dist[cntVertex]) &#123; // continue; // &#125; for (int i = 0; i &lt; graph[cntVertex].size(); i++) &#123; int nextVertex = graph[cntVertex][i].first; int weight = graph[cntVertex][i].second; // cntDist ëŒ€ì‹  dist[cntVertex]ë¥¼ ì‚¬ìš©í•´ë„ ê²°ê³¼ëŠ” ë™ì¼í•˜ë‹¤ // int nextDist = dist[cntVertex] + weight; int nextDist = cntDist + weight; if (dist[nextVertex] &gt; nextDist) &#123; dist[nextVertex] = nextDist; // ê°’ì„ ìŒìˆ˜ë¡œ ì €ì¥í•´ ìš°ì„ ìˆœìœ„ê°€ ë°˜ëŒ€ê°€ ë˜ë„ë¡ í•œë‹¤. pq.push(&#123;-nextDist, nextVertex&#125;); &#125; &#125; &#125;&#125;int main(void) &#123; cin &gt;&gt; V &gt;&gt; E; cin &gt;&gt; startPoint; graph = vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt;(V + 1); for (int i = 0; i &lt; E; i++) &#123; int a, b, weight; cin &gt;&gt; a &gt;&gt; b &gt;&gt; weight; graph[a].push_back(&#123;b, weight&#125;); &#125; dijkstra(startPoint); for (int i = 1; i &lt;= V; i++) &#123; if (dist[i] == INF) &#123; cout &lt;&lt; &quot;INF&quot; &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; cout &lt;&lt; dist[i] &lt;&lt; &#x27;\\n&#x27;; &#125; &#125; return 0;&#125; priority_queue&lt;pair&lt;int, int&gt;, vector&lt;pair&lt;int, int&gt;&gt;, greater&lt;pair&lt;int, int&gt;&gt;&gt; pq; ìš°ì„ ìˆœìœ„ íì— greater&lt;pair&lt;int, int&gt;&gt;&gt; pq ì •ë ¬ ë°©ì‹ì„ í†µí•´ ê°’ì´ ì‘ì€ ê²ƒë¶€í„° ìš°ì„ ì ìœ¼ë¡œ ë‚˜ê°€ê²Œ ëœë‹¤. #include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;queue&gt;using namespace std;#define INF 2000000000// ì •ì ì˜ ê°œìˆ˜ : v, ê°„ì„ ì˜ ê°œìˆ˜ : eint v, e;vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt; graph;vector&lt;int&gt; dist;vector&lt;bool&gt; check;int start_node;void dijkstra()&#123; for (int i = 1; i &lt;= v; i++) dist[i] = INF; dist[start_node] = 0; priority_queue&lt;pair&lt;int, int&gt;, vector&lt;pair&lt;int, int&gt;&gt;, greater&lt;pair&lt;int, int&gt;&gt;&gt; pq; pq.push(&#123;0, start_node&#125;); while (!pq.empty()) &#123; int weight = pq.top().first; int cnt_node = pq.top().second; pq.pop(); if (check[cnt_node] == true) continue; check[cnt_node] = true; // ì  cnt_nodeì— ì—°ê²°ëœ ê°„ì„ ì˜ ê°œìˆ˜ int edge_num = graph[cnt_node].size(); for (int j = 0; j &lt; edge_num; j++) &#123; // from : í˜„ì¬ ìœ„ì¹˜, to : ë‹¤ìŒ ìœ„ì¹˜, from_to_weight : í˜„ì¬ìœ„ì¹˜ì—ì„œ ë‹¤ìŒìœ„ì¹˜ ê¹Œì§€ì˜ ê°€ì¤‘ì¹˜ int from = cnt_node, to = graph[cnt_node][j].first, from_to_weight = graph[cnt_node][j].second; if (dist[to] &gt; dist[from] + from_to_weight) &#123; dist[to] = dist[from] + from_to_weight; pq.push(&#123;dist[to], to&#125;); &#125; &#125; &#125;&#125;int main(void)&#123; scanf(&quot;%d %d %d&quot;, &amp;v, &amp;e, &amp;start_node); dist = vector&lt;int&gt;(v + 1, INF); check = vector&lt;bool&gt;(v + 1, false); graph = vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt;(v + 1); for (int i = 0; i &lt; e; i++) &#123; int from, to, weight; scanf(&quot;%d %d %d&quot;, &amp;from, &amp;to, &amp;weight); graph[from].push_back(&#123;to, weight&#125;); &#125; dijkstra(); for (int i = 1; i &lt;= v; i++) &#123; if (dist[i] == INF) printf(&quot;INF\\n&quot;); else &#123; printf(&quot;%d\\n&quot;, dist[i]); &#125; &#125; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"Develop/Beakjoon/ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"}]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 15 - Githubì™€ jenkins ì—°ë™í•˜ê¸°","slug":"spring/sample-board/board-15-github-webhook","date":"2021-02-14T16:47:01.000Z","updated":"2024-02-26T15:47:30.066Z","comments":true,"path":"2021/02/15/spring/sample-board/board-15-github-webhook/","link":"","permalink":"https://ckck803.github.io/2021/02/15/spring/sample-board/board-15-github-webhook/","excerpt":"15. Githubì™€ jenkins ì—°ë™í•˜ê¸°Github webhookngrokì„ ì´ìš©í•´ ì™¸ë¶€ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ ë„¤íŠ¸ì›Œí¬ ì—´ê¸°Push ì´ë²¤íŠ¸ê°€ ì¼ì–´ë‚¬ì„ ë•Œ ë¡œì»¬ Jenkinsê°€ í•´ë‹¹ í›…ì„ ë°›ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ ë„¤íŠ¸ì›Œí¬(í¬íŠ¸)ë¥¼ ì™¸ë¶€ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê²Œ ì—´ì–´ë†”ì•¼ í•œë‹¤.ngrok í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•´ Githubë¡œë¶€í„° hookì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ Jenkins í¬íŠ¸ë¥¼ ì—´ì–´ì¤€ë‹¤. ngrokì€ local PCë¥¼ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ ì—´ì–´ì£¼ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤. Webhook ì¶”ê°€í•˜ê¸°Project Repository &gt; settings &gt; Webhooks &gt; add webhook ë¡œ ì´ë™í•´ Payload URLì— http://[ì„œë²„ IPì£¼ì†Œ]:[Portë²ˆí˜¸]/github-webhook/ í˜•ì‹ìœ¼ë¡œ ë‚ ë¦´ ì£¼ì†Œë¥¼ ê¸°ì…í•˜ë„ë¡í•œë‹¤. ë°˜ë“œì‹œ ì£¼ì†Œ ë’¤ì— &#x2F;github-webhook&#x2F; ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤. Pushê°€ ì¼ì–´ë‚¬ì„ ë•Œ Payload URL(Jenkins)ë¡œ Hookì„ ë‚ ë¦°ë‹¤.","text":"15. Githubì™€ jenkins ì—°ë™í•˜ê¸°Github webhookngrokì„ ì´ìš©í•´ ì™¸ë¶€ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ ë„¤íŠ¸ì›Œí¬ ì—´ê¸°Push ì´ë²¤íŠ¸ê°€ ì¼ì–´ë‚¬ì„ ë•Œ ë¡œì»¬ Jenkinsê°€ í•´ë‹¹ í›…ì„ ë°›ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ ë„¤íŠ¸ì›Œí¬(í¬íŠ¸)ë¥¼ ì™¸ë¶€ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê²Œ ì—´ì–´ë†”ì•¼ í•œë‹¤.ngrok í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•´ Githubë¡œë¶€í„° hookì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ Jenkins í¬íŠ¸ë¥¼ ì—´ì–´ì¤€ë‹¤. ngrokì€ local PCë¥¼ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ ì—´ì–´ì£¼ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤. Webhook ì¶”ê°€í•˜ê¸°Project Repository &gt; settings &gt; Webhooks &gt; add webhook ë¡œ ì´ë™í•´ Payload URLì— http://[ì„œë²„ IPì£¼ì†Œ]:[Portë²ˆí˜¸]/github-webhook/ í˜•ì‹ìœ¼ë¡œ ë‚ ë¦´ ì£¼ì†Œë¥¼ ê¸°ì…í•˜ë„ë¡í•œë‹¤. ë°˜ë“œì‹œ ì£¼ì†Œ ë’¤ì— &#x2F;github-webhook&#x2F; ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤. Pushê°€ ì¼ì–´ë‚¬ì„ ë•Œ Payload URL(Jenkins)ë¡œ Hookì„ ë‚ ë¦°ë‹¤. githubì—ì„œ Webhookì„ ì„¤ì •í•˜ë©´ githubì—ì„œ hookì„ ë‚ ë¦¬ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë¹Œë“œ ì§„í–‰í•˜ê¸°Push í•˜ê¸° ngrok ë¡œê·¸ í™•ì¸githubë¡œ pushë¥¼ í•˜ê²Œ ë˜ë©´ jenkinsì„œë²„ë¡œ hookì„ ë‚ ë¦¬ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. build History í™•ì¸í•˜ê¸°jenkinsì— ìƒˆë¡œìš´ buildê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì½˜ì†” ì¶œë ¥ í™•ì¸buildê°€ ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê³  ìˆëŠ”ì§€ ì•„ë‹ˆë©´ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Github Hook Log í™•ì¸ì½”ë“œì— ë³€í™”ê°€ ìˆì„ ê²½ìš°ì—ëŠ” jenkinsì—ì„œ í•´ë‹¹ í”„ë¡œì íŠ¸ë¥¼ buildí•˜ì§€ë§Œ ì½”ë“œì— ë³€í™”ê°€ ì—†ì„ ê²½ìš°ì—ëŠ” buildë¥¼ ì§„í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. ì½”ë“œì— ë³€í™”ê°€ ìˆì„ ê²½ìš° ë¡œê·¸ ì½”ë“œì— ë³€í™”ê°€ ì—†ì„ ê²½ìš° ë¡œê·¸","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 16 - Githubì™€ jenkins ì—°ë™í•˜ê¸°","slug":"spring/sample-board/board-16-github-webhook","date":"2021-02-14T16:47:01.000Z","updated":"2024-02-26T15:47:34.200Z","comments":true,"path":"2021/02/15/spring/sample-board/board-16-github-webhook/","link":"","permalink":"https://ckck803.github.io/2021/02/15/spring/sample-board/board-16-github-webhook/","excerpt":"16. Githubì™€ jenkins ì—°ë™í•˜ê¸°Github webhookngrokì„ ì´ìš©í•´ ì™¸ë¶€ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ ë„¤íŠ¸ì›Œí¬ ì—´ê¸°Push ì´ë²¤íŠ¸ê°€ ì¼ì–´ë‚¬ì„ ë•Œ ë¡œì»¬ Jenkinsê°€ í•´ë‹¹ í›…ì„ ë°›ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ ë„¤íŠ¸ì›Œí¬(í¬íŠ¸)ë¥¼ ì™¸ë¶€ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê²Œ ì—´ì–´ë†”ì•¼ í•œë‹¤.ngrok í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•´ Githubë¡œë¶€í„° hookì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ Jenkins í¬íŠ¸ë¥¼ ì—´ì–´ì¤€ë‹¤. ngrokì€ local PCë¥¼ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ ì—´ì–´ì£¼ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤. Webhook ì¶”ê°€í•˜ê¸°Project Repository &gt; settings &gt; Webhooks &gt; add webhook ë¡œ ì´ë™í•´ Payload URLì— http://[ì„œë²„ IPì£¼ì†Œ]:[Portë²ˆí˜¸]/github-webhook/ í˜•ì‹ìœ¼ë¡œ ë‚ ë¦´ ì£¼ì†Œë¥¼ ê¸°ì…í•˜ë„ë¡í•œë‹¤. ë°˜ë“œì‹œ ì£¼ì†Œ ë’¤ì— &#x2F;github-webhook&#x2F; ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤. Pushê°€ ì¼ì–´ë‚¬ì„ ë•Œ Payload URL(Jenkins)ë¡œ Hookì„ ë‚ ë¦°ë‹¤.","text":"16. Githubì™€ jenkins ì—°ë™í•˜ê¸°Github webhookngrokì„ ì´ìš©í•´ ì™¸ë¶€ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ ë„¤íŠ¸ì›Œí¬ ì—´ê¸°Push ì´ë²¤íŠ¸ê°€ ì¼ì–´ë‚¬ì„ ë•Œ ë¡œì»¬ Jenkinsê°€ í•´ë‹¹ í›…ì„ ë°›ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ ë„¤íŠ¸ì›Œí¬(í¬íŠ¸)ë¥¼ ì™¸ë¶€ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê²Œ ì—´ì–´ë†”ì•¼ í•œë‹¤.ngrok í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•´ Githubë¡œë¶€í„° hookì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ Jenkins í¬íŠ¸ë¥¼ ì—´ì–´ì¤€ë‹¤. ngrokì€ local PCë¥¼ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ ì—´ì–´ì£¼ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤. Webhook ì¶”ê°€í•˜ê¸°Project Repository &gt; settings &gt; Webhooks &gt; add webhook ë¡œ ì´ë™í•´ Payload URLì— http://[ì„œë²„ IPì£¼ì†Œ]:[Portë²ˆí˜¸]/github-webhook/ í˜•ì‹ìœ¼ë¡œ ë‚ ë¦´ ì£¼ì†Œë¥¼ ê¸°ì…í•˜ë„ë¡í•œë‹¤. ë°˜ë“œì‹œ ì£¼ì†Œ ë’¤ì— &#x2F;github-webhook&#x2F; ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤. Pushê°€ ì¼ì–´ë‚¬ì„ ë•Œ Payload URL(Jenkins)ë¡œ Hookì„ ë‚ ë¦°ë‹¤. githubì—ì„œ Webhookì„ ì„¤ì •í•˜ë©´ githubì—ì„œ hookì„ ë‚ ë¦¬ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë¹Œë“œ ì§„í–‰í•˜ê¸°Push í•˜ê¸° ngrok ë¡œê·¸ í™•ì¸githubë¡œ pushë¥¼ í•˜ê²Œ ë˜ë©´ jenkinsì„œë²„ë¡œ hookì„ ë‚ ë¦¬ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. build History í™•ì¸í•˜ê¸°jenkinsì— ìƒˆë¡œìš´ buildê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì½˜ì†” ì¶œë ¥ í™•ì¸buildê°€ ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê³  ìˆëŠ”ì§€ ì•„ë‹ˆë©´ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Github Hook Log í™•ì¸ì½”ë“œì— ë³€í™”ê°€ ìˆì„ ê²½ìš°ì—ëŠ” jenkinsì—ì„œ í•´ë‹¹ í”„ë¡œì íŠ¸ë¥¼ buildí•˜ì§€ë§Œ ì½”ë“œì— ë³€í™”ê°€ ì—†ì„ ê²½ìš°ì—ëŠ” buildë¥¼ ì§„í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. ì½”ë“œì— ë³€í™”ê°€ ìˆì„ ê²½ìš° ë¡œê·¸ ì½”ë“œì— ë³€í™”ê°€ ì—†ì„ ê²½ìš° ë¡œê·¸","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 14 - Jenkins í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°","slug":"spring/sample-board/board-14-jenkins-plan","date":"2021-02-14T04:11:40.000Z","updated":"2024-02-26T15:47:22.274Z","comments":true,"path":"2021/02/14/spring/sample-board/board-14-jenkins-plan/","link":"","permalink":"https://ckck803.github.io/2021/02/14/spring/sample-board/board-14-jenkins-plan/","excerpt":"14. Jenkins í”„ë¡œì íŠ¸ ë§Œë“¤ê¸° ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸° ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬ ì†ŒìŠ¤ ì½”ë“œë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ê³„ì • ì¶”ê°€í•˜ê¸° ë¹Œë“œ ìœ ë°œ ì„ íƒ Build ì„ íƒí•˜ê¸° í”„ë¡œì íŠ¸ í™•ì¸ í”„ë¡œì íŠ¸ buildí•˜ê¸° í”„ë¡œì íŠ¸ ê²°ê³¼ í™•ì¸ ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°create a Job &gt; FreeStyle project ë¥¼ ì„ íƒí•´ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“ ë‹¤. ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬gitì„ ì„ íƒí•œ í›„ Buildí•  Repository URLì„ ë„£ì–´ì¤€ë‹¤. ê³„ì • ì¶”ê°€í•˜ê¸°","text":"14. Jenkins í”„ë¡œì íŠ¸ ë§Œë“¤ê¸° ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸° ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬ ì†ŒìŠ¤ ì½”ë“œë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ê³„ì • ì¶”ê°€í•˜ê¸° ë¹Œë“œ ìœ ë°œ ì„ íƒ Build ì„ íƒí•˜ê¸° í”„ë¡œì íŠ¸ í™•ì¸ í”„ë¡œì íŠ¸ buildí•˜ê¸° í”„ë¡œì íŠ¸ ê²°ê³¼ í™•ì¸ ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°create a Job &gt; FreeStyle project ë¥¼ ì„ íƒí•´ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“ ë‹¤. ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬gitì„ ì„ íƒí•œ í›„ Buildí•  Repository URLì„ ë„£ì–´ì¤€ë‹¤. ê³„ì • ì¶”ê°€í•˜ê¸°Credential ì¢…ë¥˜(kind)ë¡œëŠ” Username with password ë¥¼ ì„ íƒí•œ ë‹¤ìŒ usernameì—ëŠ” Github Idë¥¼ Passwordì—ëŠ” Github Passwordë¥¼ ê¸°ì…í•´ ê³„ì •ì„ ì¶”ê°€í•œë‹¤. ë¹Œë“œ ìœ ë°œ ì„ íƒGithub hook trigger for GITScm polling ì„ ì„ íƒí•´ Githubì— í”„ë¡œì íŠ¸ë¥¼ Pushí–ˆì„ ë•Œ buildê°€ ì§„í–‰ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤. ê°œë°œì Githubë¡œ PUSHë¥¼ ë‚ ë¦¬ê²Œ ë˜ë©´ GithubëŠ” Web hookì„ Jenkinsìœ¼ë¡œ ë‚ ë ¤ì¤€ë‹¤. Build ì„ íƒí•˜ê¸°shell ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œ í•  ê²ƒì´ë¯€ë¡œ Execute shell ì„ ì„ íƒí•œ í›„ ëª…ë ¹ì–´ëŠ” .&#x2F;gradlew clean build ë¥¼ ê¸°ì…í•œë‹¤. Spring Boot í”„ë¡œì íŠ¸ëŠ” gradle wrapperë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œ gradlewë¥¼ ì‚¬ìš©í•œ Build ë°©ë²•ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê°œì¸ì ìœ¼ë¡  gradlewë¥¼ ì‚¬ìš©í•œ Buildë°©ì‹ì´ ë” ì¢‹ì€ ê²ƒ ê°™ë‹¤. í”„ë¡œì íŠ¸ í™•ì¸Dashboardì— ìƒˆë¡œìš´ Jenkins í”„ë¡œì íŠ¸ê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í”„ë¡œì íŠ¸ buildí•˜ê¸°ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œ í›„ í•´ë‹¹ í”„ë¡œì íŠ¸ê°€ githubë¡œë¶€í„° íŒŒì¼ì„ ì œëŒ€ë¡œ ì½ì–´ì™€ buildí•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ Build Now ë¥¼ ëˆŒëŸ¬ ë¹Œë“œë¥¼ ì§„í–‰í•´ë³¸ë‹¤. í”„ë¡œì íŠ¸ ê²°ê³¼ í™•ì¸ë¹Œë“œ í›„ ì„±ê³µí–ˆë‹¤ëŠ” ë©”ì‹œì§€ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 13 - jenkinsë¥¼ ì´ìš©í•´ build í•˜ê¸°","slug":"spring/sample-board/board-13-jenkins","date":"2021-02-14T03:11:40.000Z","updated":"2024-02-26T15:47:18.295Z","comments":true,"path":"2021/02/14/spring/sample-board/board-13-jenkins/","link":"","permalink":"https://ckck803.github.io/2021/02/14/spring/sample-board/board-13-jenkins/","excerpt":"13. jenkinsë¥¼ ì´ìš©í•´ buildí•˜ê¸°jenkinsë¥¼ ë¡œì»¬ì— ë°”ë¡œ ì„¤ì¹˜í•´ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” dockerë¥¼ ì´ìš©í•´ jenkinsì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì™€ ë¹Œë“œë¥¼ ì§„í–‰í•  ê²ƒì´ë‹¤. docker ì„¤ì¹˜í•˜ê¸°ë„ì»¤ëŠ” https://docs.docker.com/get-docker/ ì—ì„œ ë³¸ì¸ ìš´ì˜ì²´ì œì— ë§ëŠ” ê²ƒì„ ì„ íƒí•´ ë‹¤ìš´ë¡œë“œ í•œë‹¤. ë³¸ì¸ì´ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì íŠ¸ì˜ jdk ë²„ì „ì— ë§ëŠ” jenkins íŒŒì¼ ê°€ì ¸ì™€ì•¼ buildì‹œì— jdk ë²„ì „ ì˜¤ë¥˜ê°€ ì•ˆìƒê¸´ë‹¤. JDK11ë²„ì „ì˜ jenkins ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ë„ë¡ í•œë‹¤. docker images ëª…ë ¹ì–´ë¥¼ í†µí•´ ì´ë¯¸ì§€ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. # ltsë²„ì „ì˜ jenkins ì´ë¯¸ì§€docker pull jenkins/jenkins:lts# jdk11ë²„ì „ì˜ jenkins ì´ë¯¸ì§€docker pull jenkins/jenkins:jdk11# ì„¤ì¹˜ëœ ì´ë¯¸ì§€ë“¤ í™•ì¸docker images jenkins ì´ë¯¸ì§€ ì‹¤í–‰í•˜ê¸°","text":"13. jenkinsë¥¼ ì´ìš©í•´ buildí•˜ê¸°jenkinsë¥¼ ë¡œì»¬ì— ë°”ë¡œ ì„¤ì¹˜í•´ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” dockerë¥¼ ì´ìš©í•´ jenkinsì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì™€ ë¹Œë“œë¥¼ ì§„í–‰í•  ê²ƒì´ë‹¤. docker ì„¤ì¹˜í•˜ê¸°ë„ì»¤ëŠ” https://docs.docker.com/get-docker/ ì—ì„œ ë³¸ì¸ ìš´ì˜ì²´ì œì— ë§ëŠ” ê²ƒì„ ì„ íƒí•´ ë‹¤ìš´ë¡œë“œ í•œë‹¤. ë³¸ì¸ì´ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì íŠ¸ì˜ jdk ë²„ì „ì— ë§ëŠ” jenkins íŒŒì¼ ê°€ì ¸ì™€ì•¼ buildì‹œì— jdk ë²„ì „ ì˜¤ë¥˜ê°€ ì•ˆìƒê¸´ë‹¤. JDK11ë²„ì „ì˜ jenkins ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ë„ë¡ í•œë‹¤. docker images ëª…ë ¹ì–´ë¥¼ í†µí•´ ì´ë¯¸ì§€ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. # ltsë²„ì „ì˜ jenkins ì´ë¯¸ì§€docker pull jenkins/jenkins:lts# jdk11ë²„ì „ì˜ jenkins ì´ë¯¸ì§€docker pull jenkins/jenkins:jdk11# ì„¤ì¹˜ëœ ì´ë¯¸ì§€ë“¤ í™•ì¸docker images jenkins ì´ë¯¸ì§€ ì‹¤í–‰í•˜ê¸°localì˜ 8090í¬íŠ¸ë¥¼ containerì˜ 8080í¬íŠ¸ì— í¬ì›Œë”© ì‹œì¼œì¤€ë‹¤. containerì˜ íŠ¹ì„±ìƒ ë°ì´í„° íœ˜ë°œì„± ë•Œë¬¸ì— container ë‚´ë¶€ì— ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ì—†ë‹¤. v ì˜µì…˜ì„ í†µí•´ localì˜ í´ë”ì™€ conatainerì˜ í´ë”ë¥¼ ê³µìœ í•´ containerì— ì €ì¥í•œ ë‚´ìš©ì´ ê·¸ëŒ€ë¡œ localì—ë„ ì €ì¥ë˜ë„ë¡ í•œë‹¤. 8080í¬íŠ¸ëŠ” í‰ì†Œ ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸°ì— ì¶©ëŒì„ ë§‰ê¸° ìœ„í•´ 8090í¬íŠ¸ë¥¼ ì„ íƒí–ˆë‹¤. # ltsë²„ì „ìœ¼ë¡œ ì‹¤í–‰ì‹œdocker run -d -p 8090:8080 -p 50000:50000 -v ~/docker/jenkins:/var/jenkins_home jenkins/jenkins:lts# jdk11ë²„ì „ìœ¼ë¡œ ì‹¤í–‰ì‹œdocker run -d -p 8090:8080 -p 50000:50000 -v ~/docker/jenkins-jdk11:/var/jenkins_home jenkins/jenkins:jdk11# docker container Id3c29b7adb686ad8310bf474fe91406e1ab8c569568e2ef2b5d09f40525aa78ee jenkins ì„¤ì •jenkins ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸localhost:8090 ìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ë¼ëŠ” ì°½ì´ ëœ¬ë‹¤. dockerì˜ ê²½ìš° logë¥¼ í™•ì¸í•˜ë©´ jenkins ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. docker logs [container Id] ëª…ë ¹ì–´ë¥¼ í†µí•´ consoleì—ì„œ docker ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. dockerë¥¼ í†µí•´ ì²˜ìŒìœ¼ë¡œ jenkins ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ logì— jenkins ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. jenkins í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜Install suggested plugins ë¡œ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì„¤ì¹˜í•œ í›„ ìƒˆë¡œìš´ ê³„ì •ì„ ë§Œë“¤ê²Œ ë˜ë©´ jenkinsì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. jenkins í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°ìƒˆë¡œìš´ Item ë§Œë“¤ê¸° &gt; FreeStyle project ë¥¼ ì„ íƒí•´ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“ ë‹¤. ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬ì—ì„œ git ì„ ì„ íƒí•œ í›„ buildí•  Repository URLì„ ë„£ì–´ì¤€ë‹¤. ê³„ì • ì¶”ê°€í•˜ê¸°Credential ì¢…ë¥˜(kind)ë¡œëŠ” Username with password ë¥¼ ì„ íƒí•œ ë‹¤ìŒ usernameì—ëŠ” Github Idë¥¼ Passwordì—ëŠ” Github Passwordë¥¼ ê¸°ì…í•´ ê³„ì •ì„ ì¶”ê°€í•œë‹¤. ë¹Œë“œ ìœ ë°œ ì„ íƒGithub hook trigger for GITScm polling ì„ ì„ íƒí•´ Githubì— í”„ë¡œì íŠ¸ë¥¼ Pushí–ˆì„ ë•Œ buildê°€ ì§„í–‰ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤. Build ì„ íƒí•˜ê¸°shell ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ SpringBoot í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œ í•  ê²ƒì´ë¯€ë¡œ Execute shell ì„ ì„ íƒí•œ í›„ ëª…ë ¹ì–´ëŠ” ./gradlew clean build ë¥¼ ê¸°ì…í•œë‹¤. í”„ë¡œì íŠ¸ í™•ì¸Dashboardì— ìƒˆë¡œìš´ jenkins í”„ë¡œì íŠ¸ê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í”„ë¡œì íŠ¸ buildí•˜ê¸°ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œ í›„ í•´ë‹¹ í”„ë¡œì íŠ¸ê°€ githubë¡œë¶€í„° íŒŒì¼ì„ ì œëŒ€ë¡œ ì½ì–´ì™€ buildí•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ Build Now ë¥¼ ëˆŒëŸ¬ ë¹Œë“œë¥¼ ì§„í–‰í•´ë³¸ë‹¤. í”„ë¡œì íŠ¸ ê²°ê³¼ í™•ì¸ë¹Œë“œ í›„ ì„±ê³µí–ˆë‹¤ëŠ” ë©”ì‹œì§€ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 12 - íƒ€ì„ë¦¬í”„ ì˜¤ë¥˜ í•´ê²°í•˜ê¸°","slug":"spring/sample-board/board-12-errors","date":"2021-02-13T17:23:28.000Z","updated":"2024-02-26T15:47:12.741Z","comments":true,"path":"2021/02/14/spring/sample-board/board-12-errors/","link":"","permalink":"https://ckck803.github.io/2021/02/14/spring/sample-board/board-12-errors/","excerpt":"12. íƒ€ì„ë¦¬í”„ ì˜¤ë¥˜ í•´ê²°í•˜ê¸°null ì˜¤ë¥˜ê²Œì‹œë¬¼ì´ í•˜ë‚˜ë„ ì—†ì„ ë•Œ Thymeleafì—ì„œ nullì¸ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ì—¬ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. ê°ì²´ë¥¼ ë°˜í™˜í•  ë•Œ ë°ì´í„°ê°€ nullì¸ ê²½ìš° ë¹„ì–´ìˆëŠ” ê°ì²´ë¥¼ ìƒì„±í•´ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. @GetMapping(&quot;/&quot;)public String board(@PageableDefault Pageable pageable, Model model) &#123; Page&lt;Post&gt; posts = postService.getPosts(pageable); if(posts == null)&#123; posts = new PageImpl&lt;Post&gt;(new ArrayList&lt;&gt;()); &#125; model.addAttribute(&quot;PostList&quot;, posts); return &quot;board&quot;;&#125; paging ì˜¤ë¥˜ë°ì´í„°ê°€ í•˜ë‚˜ë„ ì—†ëŠ”ë° pagination ëª©ë¡ì—ì„œ 1ê³¼ 0ì´ ë– ìˆëŠ” ì˜¤ë¥˜ë¥¼ ë°œê²¬í–ˆë‹¤.","text":"12. íƒ€ì„ë¦¬í”„ ì˜¤ë¥˜ í•´ê²°í•˜ê¸°null ì˜¤ë¥˜ê²Œì‹œë¬¼ì´ í•˜ë‚˜ë„ ì—†ì„ ë•Œ Thymeleafì—ì„œ nullì¸ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ì—¬ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. ê°ì²´ë¥¼ ë°˜í™˜í•  ë•Œ ë°ì´í„°ê°€ nullì¸ ê²½ìš° ë¹„ì–´ìˆëŠ” ê°ì²´ë¥¼ ìƒì„±í•´ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. @GetMapping(&quot;/&quot;)public String board(@PageableDefault Pageable pageable, Model model) &#123; Page&lt;Post&gt; posts = postService.getPosts(pageable); if(posts == null)&#123; posts = new PageImpl&lt;Post&gt;(new ArrayList&lt;&gt;()); &#125; model.addAttribute(&quot;PostList&quot;, posts); return &quot;board&quot;;&#125; paging ì˜¤ë¥˜ë°ì´í„°ê°€ í•˜ë‚˜ë„ ì—†ëŠ”ë° pagination ëª©ë¡ì—ì„œ 1ê³¼ 0ì´ ë– ìˆëŠ” ì˜¤ë¥˜ë¥¼ ë°œê²¬í–ˆë‹¤. startIdx= $&#123;PostList.totalPages == 0&#125; ? 0 : $&#123;T(Math).floor(PostList?.number/5)&#125;*5+1 ì¡°ê±´ì„ ì¶”ê°€í•´ pageê°€ í•˜ë‚˜ë„ ì—†ì„ ê²½ìš° 0ì„ ë°˜í™˜í•˜ë„ë¡ í•´ í˜ì´ì§€ ëª©ë¡ì— 0ë§Œ ë‚˜íƒ€ë‚˜ê²Œ í•œë‹¤. &lt;div class=&quot;text-center &quot;&gt; &lt;ul class=&quot;pagination&quot; style=&quot;justify-content: center;&quot; th:with=&quot;startIdx= $&#123;PostList.totalPages == 0&#125; ? 0 : $&#123;T(Math).floor(PostList?.number/5)&#125;*5+1, lastIdx=($&#123;PostList.totalPages&#125; &gt; $&#123;startIdx&#125;+4) ? $&#123;startIdx&#125;+4 : $&#123;PostList.totalPages&#125;&quot; &gt; &lt;li th:class=&quot;$&#123;PostList.first&#125; ? &#x27;disabled&#x27;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;$&#123;PostList.first&#125; ? &#x27;#&#x27; : @&#123;/(page=$&#123;startIdx&#125;-1)&#125;&quot; aria-label=&quot;Previous&quot;&gt;&amp;laquo;&lt;/a&gt; &lt;/li&gt; &lt;li th:style=&quot;$&#123;PostList.first&#125;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;@&#123;/(page=$&#123;PostList.number&#125;)&#125;&quot;&gt;&amp;lsaquo;&lt;/a&gt; &lt;/li&gt; &lt;li th:class=&quot;($&#123;page&#125; == $&#123;PostList.number&#125;+1)&quot; th:each=&quot;page: $&#123;#numbers.sequence(startIdx, lastIdx)&#125;&quot;&gt; &lt;a class=&quot;page-link&quot; th:text=&quot;$&#123;page&#125;&quot; th:href=&quot;@&#123;/(page=$&#123;page&#125;)&#125;&quot;&gt;&lt;/a&gt; &lt;/li&gt; &lt;li th:style=&quot;$&#123;PostList.last&#125;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;@&#123;/(page=$&#123;PostList.number&#125;+2)&#125;&quot;&gt;&amp;rsaquo;&lt;/a&gt; &lt;/li&gt; &lt;li th:class=&quot;$&#123;PostList.last&#125; ? &#x27;disabled&#x27;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;$&#123;PostList.last&#125; ? &#x27;#&#x27; : @&#123;/(page=$&#123;lastIdx&#125;+1)&#125;&quot; aria-label=&quot;Next&quot;&gt;&amp;raquo;&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; pagation ëª©ë¡ì— 0ë§Œ ë–  ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 11 - í˜ì´ì§• ì²˜ë¦¬í•˜ê¸°","slug":"spring/sample-board/board-11-paging","date":"2021-02-13T02:59:50.000Z","updated":"2024-02-26T15:47:08.290Z","comments":true,"path":"2021/02/13/spring/sample-board/board-11-paging/","link":"","permalink":"https://ckck803.github.io/2021/02/13/spring/sample-board/board-11-paging/","excerpt":"11. í˜ì´ì§• ì²˜ë¦¬í•˜ê¸°ë©”ì¸ ê²Œì‹œíŒì„ ì ‘ê·¼í•˜ê²Œ ë˜ë©´ í•œë²ˆì— ë„ˆë¬´ ë§ì€ ê²Œì‹œê¸€ë“¤ì´ ìŸì•„ì ¸ ë‚˜ì˜¤ê²Œ ë¼ ë³´ê¸°ê°€ ì¢‹ì§€ ì•Šê³  ì„œë²„ë„ ë§ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ í•œë²ˆì— ë³´ë‚´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì—ì„œë„ ì¢‹ì§€ ì•Šë‹¤.ì‚¬ìš©ìì—ê²Œ ì „ì²´ ë°ì´í„°ì—ì„œ ì ë‹¹í•œ ì–‘ì˜ ë°ì´í„°ë§Œ ë³´ì—¬ì¤˜ ì‚¬ìš©ì ì…ì¥ì—ì„œë„ ì„œë²„ ì…ì¥ì—ì„œë„ ë¶€ë‹´ì´ ì—†ê²Œ í•œë‹¤. Control ë¡œì§ ìˆ˜ì •í•˜ê¸°Springì—ì„œ ì œê³µí•˜ëŠ” Pageable ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ í˜ì´ì§• ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. BoardController.java @Controller@RequiredArgsConstructorpublic class BoardController &#123; private final PostService postService;// @GetMapping(&quot;/&quot;)// public String board(Model model)&#123;// List&lt;Post&gt; posts = postService.getAllPosts();// model.addAttribute(&quot;PostList&quot;, posts);// return &quot;board&quot;;// &#125; @GetMapping(&quot;/&quot;) public String board(@PageableDefault Pageable pageable, Model model) &#123; Page&lt;Post&gt; posts = postService.getPosts(pageable); model.addAttribute(&quot;PostList&quot;, posts); return &quot;board&quot;; &#125;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¡œì§ ë³€ê²½@Test@DisplayName(&quot;ëª¨ë“  Postë¥¼ ê°€ì ¸ì˜¨ë‹¤.&quot;)public void board() throws Exception &#123; List&lt;Post&gt; posts = new ArrayList&lt;&gt;(); posts.add(Post.builder() .id(1L) .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build() ); Page&lt;Post&gt; pagePosts = new PageImpl&lt;&gt;(posts); PageRequest pageRequest = PageRequest.of(1, 10); given(postService.getPosts(pageRequest)).willReturn(pagePosts); ResultActions resultActions = mockMvc.perform(get(&quot;/&quot;) .param(&quot;page&quot;, &quot;1&quot;)// .flashAttr(&quot;PostList&quot;, new ArrayList&lt;&gt;()) ); resultActions .andExpect(status().isOk()) .andDo(print()); verify(postService).getPosts(pageRequest);&#125; Servic ë¡œì§ ì¶”ê°€","text":"11. í˜ì´ì§• ì²˜ë¦¬í•˜ê¸°ë©”ì¸ ê²Œì‹œíŒì„ ì ‘ê·¼í•˜ê²Œ ë˜ë©´ í•œë²ˆì— ë„ˆë¬´ ë§ì€ ê²Œì‹œê¸€ë“¤ì´ ìŸì•„ì ¸ ë‚˜ì˜¤ê²Œ ë¼ ë³´ê¸°ê°€ ì¢‹ì§€ ì•Šê³  ì„œë²„ë„ ë§ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ í•œë²ˆì— ë³´ë‚´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì—ì„œë„ ì¢‹ì§€ ì•Šë‹¤.ì‚¬ìš©ìì—ê²Œ ì „ì²´ ë°ì´í„°ì—ì„œ ì ë‹¹í•œ ì–‘ì˜ ë°ì´í„°ë§Œ ë³´ì—¬ì¤˜ ì‚¬ìš©ì ì…ì¥ì—ì„œë„ ì„œë²„ ì…ì¥ì—ì„œë„ ë¶€ë‹´ì´ ì—†ê²Œ í•œë‹¤. Control ë¡œì§ ìˆ˜ì •í•˜ê¸°Springì—ì„œ ì œê³µí•˜ëŠ” Pageable ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ í˜ì´ì§• ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. BoardController.java @Controller@RequiredArgsConstructorpublic class BoardController &#123; private final PostService postService;// @GetMapping(&quot;/&quot;)// public String board(Model model)&#123;// List&lt;Post&gt; posts = postService.getAllPosts();// model.addAttribute(&quot;PostList&quot;, posts);// return &quot;board&quot;;// &#125; @GetMapping(&quot;/&quot;) public String board(@PageableDefault Pageable pageable, Model model) &#123; Page&lt;Post&gt; posts = postService.getPosts(pageable); model.addAttribute(&quot;PostList&quot;, posts); return &quot;board&quot;; &#125;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¡œì§ ë³€ê²½@Test@DisplayName(&quot;ëª¨ë“  Postë¥¼ ê°€ì ¸ì˜¨ë‹¤.&quot;)public void board() throws Exception &#123; List&lt;Post&gt; posts = new ArrayList&lt;&gt;(); posts.add(Post.builder() .id(1L) .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build() ); Page&lt;Post&gt; pagePosts = new PageImpl&lt;&gt;(posts); PageRequest pageRequest = PageRequest.of(1, 10); given(postService.getPosts(pageRequest)).willReturn(pagePosts); ResultActions resultActions = mockMvc.perform(get(&quot;/&quot;) .param(&quot;page&quot;, &quot;1&quot;)// .flashAttr(&quot;PostList&quot;, new ArrayList&lt;&gt;()) ); resultActions .andExpect(status().isOk()) .andDo(print()); verify(postService).getPosts(pageRequest);&#125; Servic ë¡œì§ ì¶”ê°€PageRequestëŠ” Pageable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ ë†“ì€ í´ë˜ìŠ¤ì´ë‹¤. page, size, sort ë¥¼ ë³€ìˆ˜ë¥¼ ì„¤ì •í•¨ìœ¼ë¡œì¨ ì‰½ê²Œ paging ìš”ì²­ì„ í•  ìˆ˜ ìˆë‹¤. page : ì°¾ì„ í˜ì´ì§€size : í•œ í˜ì´ì§€ ë‚´ì— ê°€ì ¸ì˜¬ ëª©ë¡(ë°ì´í„°)ì˜ ê°œìˆ˜sort : í˜ì´ì§•ì„ ì •ë ¬í•˜ëŠ” ë°©ì‹ Pagingì€ sortë¥¼ í†µí•´ ë°ì´í„°ë“¤ì„ ì •ë ¬í•˜ê³  sizeë¥¼ í†µí•´ ë°ì´í„°ë“¤ì„ ê·¸ë£¹ìœ¼ë¡œ ë‚˜ëˆˆ í›„ ê° ê·¸ë£¹ì— ë²ˆí˜¸ë¥¼ ë¶™ì´ê³  pageë¥¼ í†µí•´ í•´ë‹¹ ê·¸ë£¹ì„ ê°€ì ¸ì˜¨ë‹¤. PostService.java public Page&lt;Post&gt; getPosts(Pageable pageable) &#123; int page; if(pageable.getPageNumber() &lt;= 0)&#123; page = 0; &#125;else&#123; page = pageable.getPageNumber()-1; &#125; Pageable requestPageable = PageRequest.of(page, pageable.getPageSize()); return postRepository.findAll(requestPageable);&#125; Id ì—­ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê¸°@Transactionalpublic void deletePostById(Long id)&#123; postRepository.deleteById(id);&#125;public Page&lt;Post&gt; getPosts(Pageable pageable) &#123; int page; if(pageable.getPageNumber() &lt;= 0)&#123; page = 0; &#125;else&#123; page = pageable.getPageNumber()-1; &#125; Pageable requestPageable = PageRequest.of(page, pageable.getPageSize(), Sort.by(Sort.Direction.DESC, &quot;id&quot;)); return postRepository.findAll(requestPageable);&#125; íƒ€ì„ë¦¬í”„ì— pagingê´€ë ¨ ì„¤ì •ì„ í•´ì£¼ê¸°Thymeleafì˜ th:with ì†ì„±ì„ ì‚¬ìš©í•˜ë©´ ì§€ì—­ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. startIdx=$&#123;T(Math).floor(PostList.number/5)&#125;*5+1 : pagenationì—ì„œì˜ ì‹œì‘ ë²ˆí˜¸ lastIdx=($&#123;PostList.totalPages&#125; &gt; $&#123;startIdx&#125;+4) ? $&#123;startIdx&#125;+4 : $&#123;PostList.totalPages&#125; : pagenationì—ì„œì˜ ë§ˆì§€ë§‰ ë²ˆí˜¸ &lt;ul class=&quot;pagination&quot; style=&quot;justify-content: center;&quot; th:with=&quot;startIdx=$&#123;T(Math).floor(PostList.number/5)&#125;*5+1, lastIdx=($&#123;PostList.totalPages&#125; &gt; $&#123;startIdx&#125;+4) ? $&#123;startIdx&#125;+4 : $&#123;PostList.totalPages&#125;&quot;&gt; &lt;li th:class=&quot;$&#123;PostList.first&#125; ? &#x27;disabled&#x27;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;$&#123;PostList.first&#125; ? &#x27;#&#x27; : @&#123;/(page=$&#123;startIdx&#125;-1)&#125;&quot; aria-label=&quot;Previous&quot;&gt;&amp;laquo;&lt;/a&gt; &lt;/li&gt; &lt;li th:style=&quot;$&#123;PostList.first&#125;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;@&#123;/(page=$&#123;PostList.number&#125;)&#125;&quot;&gt;&amp;lsaquo;&lt;/a&gt; &lt;/li&gt; &lt;li th:class=&quot;($&#123;page&#125; == $&#123;PostList.number&#125;+1)&quot; th:each=&quot;page: $&#123;#numbers.sequence(startIdx, lastIdx)&#125;&quot;&gt; &lt;a class=&quot;page-link&quot; th:text=&quot;$&#123;page&#125;&quot; th:href=&quot;@&#123;/(page=$&#123;page&#125;)&#125;&quot;&gt;&lt;/a&gt; &lt;/li&gt; &lt;li th:style=&quot;$&#123;PostList.last&#125;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;@&#123;/(page=$&#123;PostList.number&#125;+2)&#125;&quot;&gt;&amp;rsaquo;&lt;/a&gt; &lt;/li&gt; &lt;li th:class=&quot;$&#123;PostList.last&#125; ? &#x27;disabled&#x27;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;$&#123;PostList.last&#125; ? &#x27;#&#x27; : @&#123;/(page=$&#123;lastIdx&#125;+1)&#125;&quot; aria-label=&quot;Next&quot;&gt;&amp;raquo;&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt; ì´ì „ ê·¸ë£¹ìœ¼ë¡œ ì´ë™í•˜ê¸° PostList.first : í˜„ì¬ í˜ì´ì§€ê°€ ì œì¼ ì²«í˜ì¸ì§€ ì•„ë‹Œì§€ (boolean) PostList.last : í˜„ì¬ í˜ì´ì§€ê°€ ì œì¼ ë§ˆì§€ë§‰ í˜ì´ì§€ ì¸ì§€ ì•„ë‹Œì§€ (boolean) &lt;li th:class=&quot;$&#123;PostList.first&#125; ? &#x27;disabled&#x27;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;$&#123;PostList.first&#125; ? &#x27;#&#x27; : @&#123;/(page=$&#123;startIdx&#125;-1)&#125;&quot; aria-label=&quot;Previous&quot;&gt;&amp;laquo;&lt;/a&gt;&lt;/li&gt; ì´ì „ í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸°&lt;li th:style=&quot;$&#123;PostList.first&#125;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;@&#123;/(page=$&#123;PostList.number&#125;)&#125;&quot;&gt;&amp;lsaquo;&lt;/a&gt;&lt;/li&gt; í˜ì´ì§€ ê·¸ë£¹ ë³´ì—¬ì£¼ê¸°&lt;li th:class=&quot;($&#123;page&#125; == $&#123;PostList.number&#125;+1)&quot; th:each=&quot;page: $&#123;#numbers.sequence(startIdx, lastIdx)&#125;&quot;&gt; &lt;a class=&quot;page-link&quot; th:text=&quot;$&#123;page&#125;&quot; th:href=&quot;@&#123;/(page=$&#123;page&#125;)&#125;&quot;&gt;&lt;/a&gt;&lt;/li&gt; ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸°&lt;li th:style=&quot;$&#123;PostList.last&#125;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;@&#123;/(page=$&#123;PostList.number&#125;+2)&#125;&quot;&gt;&amp;rsaquo;&lt;/a&gt;&lt;/li&gt; ë‹¤ìŒ ê·¸ë£¹ìœ¼ë¡œ ì´ë™í•˜ê¸°&lt;li th:class=&quot;$&#123;PostList.last&#125; ? &#x27;disabled&#x27;&quot;&gt; &lt;a class=&quot;page-link&quot; th:href=&quot;$&#123;PostList.last&#125; ? &#x27;#&#x27; : @&#123;/(page=$&#123;lastIdx&#125;+1)&#125;&quot; aria-label=&quot;Next&quot;&gt;&amp;raquo;&lt;/a&gt;&lt;/li&gt; List ë²ˆí˜¸ ìˆ˜ì •í•˜ê¸°í˜ì´ì§€ë¥¼ ì´ë™í•´ë„ Listë²ˆí˜¸ê°€ 1~10 ìœ¼ë¡œ ë°–ì— í‘œí˜„ë˜ì§€ ì•Šì•˜ë‹¤. ê°í˜ì´ì§€ë¥¼ ì´ë™í•  ë•Œ í˜ì´ì§€ ë²ˆí˜¸ì— ê° ì„¸ë¶€ ë²ˆí˜¸ë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë„ë¡ í‘œí˜„ì„ ë°”ê¿”ì¤€ë‹¤. &lt;tbody class=&quot;text-center&quot;&gt;&lt;tr th:each=&quot;Post:$&#123;PostList&#125;&quot; th:id=&quot;*&#123;Post.id&#125;&quot;&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;PostStat.index + 1&#125; + $&#123;PostList.number&#125;*10&quot;&gt;&lt;/td&gt; &lt;td class=&quot;align-middle&quot;&gt; &lt;a th:href=&quot;@&#123;/post/&#123;id&#125;(id=$&#123;Post.id&#125;)&#125;&quot; th:text=&quot;$&#123;Post.title&#125;&quot;&gt;&lt;/a&gt; &lt;/td&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;Post.name&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;Post.writeTime&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;text-center align-middle&quot;&gt; &lt;a class=&quot;btn btn-primary&quot; th:href=&quot;@&#123;/post/&#123;id&#125;/revise(id=$&#123;Post.id&#125;)&#125;&quot;&gt;ìˆ˜ì •&lt;/a&gt; &lt;a href=&quot;#&quot; th:href=&quot;&#x27;javascript:deletePost(&#x27;+$&#123;Post.id&#125;+&#x27;)&#x27;&quot; class=&quot;btn btn-danger&quot;&gt;ì‚­ì œ&lt;/a&gt; &lt;!-- &lt;button id=&quot;delete-btn&quot; type=&quot;submit&quot; class=&quot;btn btn-danger&quot; th:onclick=&quot;deletePost([[ $&#123;Post.id&#125; ]]);&quot;&gt;ì‚­ì œ&lt;/button&gt;--&gt; &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 10 - í¬ìŠ¤íŠ¸ ì‚­ì œí•˜ê¸°","slug":"spring/sample-board/board-10-delete","date":"2021-02-12T16:19:00.000Z","updated":"2024-02-26T15:47:04.330Z","comments":true,"path":"2021/02/13/spring/sample-board/board-10-delete/","link":"","permalink":"https://ckck803.github.io/2021/02/13/spring/sample-board/board-10-delete/","excerpt":"10. í¬ìŠ¤íŠ¸ ì‚­ì œí•˜ê¸°PostController.java @PostMapping(&quot;/post/&#123;postId&#125;/delete&quot;)public String deletePost(@PathVariable(&quot;postId&quot;) Long id)&#123; postService.deletePostById(id); return &quot;redirect:/&quot;;&#125; PostService.java @Transactionalpublic void deletePostById(Long id)&#123; postRepository.deleteById(id);&#125; Post.html &lt;tbody class=&quot;text-center&quot;&gt;&lt;tr th:each=&quot;Post:$&#123;PostList&#125;&quot; th:id=&quot;*&#123;Post.id&#125;&quot;&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;PostStat.index+1&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;align-middle&quot;&gt; &lt;a th:href=&quot;@&#123;/post/&#123;id&#125;(id=$&#123;Post.id&#125;)&#125;&quot; th:text=&quot;$&#123;Post.title&#125;&quot;&gt;&lt;/a&gt; &lt;/td&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;Post.name&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;Post.writeTime&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;text-center align-middle&quot;&gt; &lt;a class=&quot;btn btn-primary&quot; th:href=&quot;@&#123;/post/&#123;id&#125;/revise(id=$&#123;Post.id&#125;)&#125;&quot;&gt;ìˆ˜ì •&lt;/a&gt; &lt;a href=&quot;#&quot; th:href=&quot;&#x27;javascript:deletePost(&#x27;+$&#123;Post.id&#125;+&#x27;)&#x27;&quot; class=&quot;btn btn-danger&quot;&gt;ì‚­ì œ&lt;/a&gt;&lt;!--&lt;button id=&quot;delete-btn&quot; type=&quot;submit&quot; class=&quot;btn btn-danger&quot; th:onclick=&quot;deletePost([[ $&#123;Post.id&#125; ]]);&quot;&gt;ì‚­ì œ&lt;/button&gt;--&gt; &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt; function deletePost(id) &#123; if(confirm(id + &quot;ë²ˆ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?&quot;)) &#123; const action = &quot;/post/&quot; + id + &quot;/delete&quot; let form = document.createElement(&quot;form&quot;); form.setAttribute(&quot;method&quot;, &quot;post&quot;); form.setAttribute(&quot;action&quot;, action); document.body.appendChild(form); form.submit(); &#125;&#125;// var table = document.getElementById(&#x27;PostTable&#x27;);//// async function deletePost(id) &#123;// url = &quot;http://localhost:8080/post/&quot; + id + &quot;/delete&quot;;// console.log(url);// const response = await fetch(url, &#123;// method: &#x27;post&#x27;// &#125;);// &#125;","text":"10. í¬ìŠ¤íŠ¸ ì‚­ì œí•˜ê¸°PostController.java @PostMapping(&quot;/post/&#123;postId&#125;/delete&quot;)public String deletePost(@PathVariable(&quot;postId&quot;) Long id)&#123; postService.deletePostById(id); return &quot;redirect:/&quot;;&#125; PostService.java @Transactionalpublic void deletePostById(Long id)&#123; postRepository.deleteById(id);&#125; Post.html &lt;tbody class=&quot;text-center&quot;&gt;&lt;tr th:each=&quot;Post:$&#123;PostList&#125;&quot; th:id=&quot;*&#123;Post.id&#125;&quot;&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;PostStat.index+1&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;align-middle&quot;&gt; &lt;a th:href=&quot;@&#123;/post/&#123;id&#125;(id=$&#123;Post.id&#125;)&#125;&quot; th:text=&quot;$&#123;Post.title&#125;&quot;&gt;&lt;/a&gt; &lt;/td&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;Post.name&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;Post.writeTime&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;text-center align-middle&quot;&gt; &lt;a class=&quot;btn btn-primary&quot; th:href=&quot;@&#123;/post/&#123;id&#125;/revise(id=$&#123;Post.id&#125;)&#125;&quot;&gt;ìˆ˜ì •&lt;/a&gt; &lt;a href=&quot;#&quot; th:href=&quot;&#x27;javascript:deletePost(&#x27;+$&#123;Post.id&#125;+&#x27;)&#x27;&quot; class=&quot;btn btn-danger&quot;&gt;ì‚­ì œ&lt;/a&gt;&lt;!--&lt;button id=&quot;delete-btn&quot; type=&quot;submit&quot; class=&quot;btn btn-danger&quot; th:onclick=&quot;deletePost([[ $&#123;Post.id&#125; ]]);&quot;&gt;ì‚­ì œ&lt;/button&gt;--&gt; &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt; function deletePost(id) &#123; if(confirm(id + &quot;ë²ˆ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?&quot;)) &#123; const action = &quot;/post/&quot; + id + &quot;/delete&quot; let form = document.createElement(&quot;form&quot;); form.setAttribute(&quot;method&quot;, &quot;post&quot;); form.setAttribute(&quot;action&quot;, action); document.body.appendChild(form); form.submit(); &#125;&#125;// var table = document.getElementById(&#x27;PostTable&#x27;);//// async function deletePost(id) &#123;// url = &quot;http://localhost:8080/post/&quot; + id + &quot;/delete&quot;;// console.log(url);// const response = await fetch(url, &#123;// method: &#x27;post&#x27;// &#125;);// &#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 9 - í˜ì´ì§€ ìˆ˜ì •í•˜ê¸°","slug":"spring/sample-board/board-9-detail-revise","date":"2021-02-12T12:13:28.000Z","updated":"2024-02-26T15:46:59.572Z","comments":true,"path":"2021/02/12/spring/sample-board/board-9-detail-revise/","link":"","permalink":"https://ckck803.github.io/2021/02/12/spring/sample-board/board-9-detail-revise/","excerpt":"9. í˜ì´ì§€ ìˆ˜ì •í•˜ê¸°ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ìˆ˜ì •í•˜ê³ ì í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— idê°’ì´ í•„ìš”í•˜ë‹¤. inputíƒœê·¸ì˜ typeì†ì„±ì„ hiddenìœ¼ë¡œí•´ formì„ ì‘ì„±í•œ í›„ ë‚˜ë¨¸ì§€ ë°ì´í„°ì™€ í•¨ê»˜ idê°’ì„ ë„˜ê²¨ì£¼ë„ë¡ í•œë‹¤. post.html &lt;h2&gt;ê²Œì‹œê¸€ ì‘ì„±&lt;/h2&gt;&lt;div class=&quot;card&quot; style=&quot;padding: 20px; border-radius: 15px; margin: 20px auto;&quot;&gt; &lt;form class=&quot; form-horizontal&quot; method=&quot;post&quot; th:action=&quot;@&#123;/post&#125;&quot; th:object=&quot;$&#123;postDto&#125;&quot;&gt; &lt;input type=&quot;hidden&quot; th:if=&quot;*&#123;id != null and id &gt; 0&#125;&quot; th:field=&quot;*&#123;id&#125;&quot;/&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ì œëª©&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;input type=&quot;text&quot; style=&quot;border-radius: 5px;&quot; class=&quot;form-control&quot; th:field=&quot;*&#123;title&#125;&quot; placeholder=&quot;ì œëª©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot;/&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ì´ë¦„&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;input type=&quot;text&quot; style=&quot;border-radius: 5px;&quot; class=&quot;form-control&quot; th:field=&quot;*&#123;name&#125;&quot;placeholder=&quot;ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot;/&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ë‚´ìš©&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;textarea class=&quot;form-control&quot; style=&quot;height: 300px; border-radius: 5px;&quot; th:field=&quot;*&#123;content&#125;&quot; placeholder=&quot;ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot;&gt;&lt;/textarea&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;btn_wrap text-center&quot;&gt; &lt;a th:href=&quot;@&#123;/&#125;&quot; class=&quot;btn btn-default waves-effect waves-light&quot;&gt;ë’¤ë¡œê°€ê¸°&lt;/a&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary waves-effect waves-light&quot;&gt;ì €ì¥í•˜ê¸°&lt;/button&gt; &lt;/div&gt; &lt;/form&gt;&lt;/div&gt; ìˆ˜ì •í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸°ë°ì´í„°ë¥¼ ìˆ˜ì •ìœ„í•´ì„œ URLê²½ë¡œë¥¼ í†µí•´ ìˆ˜ì •í•  ë°ì´í„°ì˜ idê°’ì„ ë°›ì•„ì˜¨ í›„ í•´ë‹¹ idê°’ì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ì¡°íšŒí•œ ë’¤ ê¸°ì¡´ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. ë‚´ë¶€ ë¡œì§ì€ ìƒì„¸í˜ì´ì§€ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒê³¼ ë˜‘ê°™ê³  ë°˜í™˜í•˜ëŠ” í…œí”Œë¦¿ë§Œ ë‹¤ë¥´ê²Œ ë°˜í™˜í•œë‹¤. PostController.java @GetMapping(&quot;/post/&#123;postId&#125;/revise&quot;)public String getPostDetailsToRevise(@PathVariable(&quot;postId&quot;) Long id, Model model) &#123; Post post = postService.getPostById(id); PostDto postDto = PostDto.builder() .id(post.getId()) .name(post.getName()) .title(post.getTitle()) .content(post.getContent()) .writeTime(post.getWriteTime()) .build(); model.addAttribute(&quot;postDto&quot;, postDto); return &quot;post&quot;;&#125; PostControllerTest.java","text":"9. í˜ì´ì§€ ìˆ˜ì •í•˜ê¸°ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ìˆ˜ì •í•˜ê³ ì í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— idê°’ì´ í•„ìš”í•˜ë‹¤. inputíƒœê·¸ì˜ typeì†ì„±ì„ hiddenìœ¼ë¡œí•´ formì„ ì‘ì„±í•œ í›„ ë‚˜ë¨¸ì§€ ë°ì´í„°ì™€ í•¨ê»˜ idê°’ì„ ë„˜ê²¨ì£¼ë„ë¡ í•œë‹¤. post.html &lt;h2&gt;ê²Œì‹œê¸€ ì‘ì„±&lt;/h2&gt;&lt;div class=&quot;card&quot; style=&quot;padding: 20px; border-radius: 15px; margin: 20px auto;&quot;&gt; &lt;form class=&quot; form-horizontal&quot; method=&quot;post&quot; th:action=&quot;@&#123;/post&#125;&quot; th:object=&quot;$&#123;postDto&#125;&quot;&gt; &lt;input type=&quot;hidden&quot; th:if=&quot;*&#123;id != null and id &gt; 0&#125;&quot; th:field=&quot;*&#123;id&#125;&quot;/&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ì œëª©&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;input type=&quot;text&quot; style=&quot;border-radius: 5px;&quot; class=&quot;form-control&quot; th:field=&quot;*&#123;title&#125;&quot; placeholder=&quot;ì œëª©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot;/&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ì´ë¦„&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;input type=&quot;text&quot; style=&quot;border-radius: 5px;&quot; class=&quot;form-control&quot; th:field=&quot;*&#123;name&#125;&quot;placeholder=&quot;ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot;/&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ë‚´ìš©&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;textarea class=&quot;form-control&quot; style=&quot;height: 300px; border-radius: 5px;&quot; th:field=&quot;*&#123;content&#125;&quot; placeholder=&quot;ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot;&gt;&lt;/textarea&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;btn_wrap text-center&quot;&gt; &lt;a th:href=&quot;@&#123;/&#125;&quot; class=&quot;btn btn-default waves-effect waves-light&quot;&gt;ë’¤ë¡œê°€ê¸°&lt;/a&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary waves-effect waves-light&quot;&gt;ì €ì¥í•˜ê¸°&lt;/button&gt; &lt;/div&gt; &lt;/form&gt;&lt;/div&gt; ìˆ˜ì •í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸°ë°ì´í„°ë¥¼ ìˆ˜ì •ìœ„í•´ì„œ URLê²½ë¡œë¥¼ í†µí•´ ìˆ˜ì •í•  ë°ì´í„°ì˜ idê°’ì„ ë°›ì•„ì˜¨ í›„ í•´ë‹¹ idê°’ì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ì¡°íšŒí•œ ë’¤ ê¸°ì¡´ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. ë‚´ë¶€ ë¡œì§ì€ ìƒì„¸í˜ì´ì§€ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒê³¼ ë˜‘ê°™ê³  ë°˜í™˜í•˜ëŠ” í…œí”Œë¦¿ë§Œ ë‹¤ë¥´ê²Œ ë°˜í™˜í•œë‹¤. PostController.java @GetMapping(&quot;/post/&#123;postId&#125;/revise&quot;)public String getPostDetailsToRevise(@PathVariable(&quot;postId&quot;) Long id, Model model) &#123; Post post = postService.getPostById(id); PostDto postDto = PostDto.builder() .id(post.getId()) .name(post.getName()) .title(post.getTitle()) .content(post.getContent()) .writeTime(post.getWriteTime()) .build(); model.addAttribute(&quot;postDto&quot;, postDto); return &quot;post&quot;;&#125; PostControllerTest.java @Test@DisplayName(&quot;í¬ìŠ¤íŠ¸ ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤.&quot;)public void getPostDetailsToRevise() throws Exception &#123; Post mockPost = Post.builder() .id(1L) .name(&quot;tester&quot;) .title(&quot;test&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postService.getPostById(1L)).willReturn(mockPost); ResultActions resultActions = mockMvc.perform(get(&quot;/post/1/revise&quot;)); verify(postService).getPostById(1L); resultActions .andExpect(status().isOk());&#125; ë°ì´í„° ìˆ˜ì • ìš”ì²­ ì²˜ë¦¬ë¥¼ ìœ„í•œ Controlì…ë ¥ë°›ì€ ë°ì´í„°ë¥¼ í™•ì¸í•´ idê°’ì´ ìˆì„ ê²½ìš°ì—ëŠ” ìƒˆë¡œìš´ Postë¥¼ ìƒì„±í•˜ê²Œ idê°’ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” ê¸°ì¡´ ë°ì´í„°ë¥¼ Updateí•˜ë„ë¡ í•œë‹¤. form íƒœê·¸ëŠ” Getê³¼ Post ë©”ì†Œë“œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. Patch ì‚¬ìš©í•˜ë ¤ê³  methodê¹Œì§€ ë‹¤ ë§Œë“¤ì–´ ë†¨ëŠ”ë° ë‚˜ì¤‘ê°€ì„œ ìƒê°ë‚¨â€¦.. PostController.java @PostMapping(&quot;/post&quot;)public String creatNewPost(@Valid @ModelAttribute(&quot;postDto&quot;) PostDto postDto) &#123; if(postDto.getId() == null) &#123; postService.addPost(postDto); &#125;else&#123; postService.revisePostDetails(postDto); &#125; return &quot;redirect:/&quot;;&#125; ìˆ˜ì •ìš”ì²­ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ë°ì´í„° ìˆ˜ì •ì´ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš° /ë¡œ redirectionì´ ì´ë£¨ì–´ì§„ë‹¤. ê²°ê³¼ê°’ìœ¼ë¡œ ìƒíƒœì½”ë“œê°€ 302ë¡œ ëœ¨ëŠ”ì§€ í™•ì¸í•˜ë„ë¡ í•œë‹¤. PostControllerTest.java @Test@DisplayName(&quot;í¬ìŠ¤íŠ¸ë¥¼ ìˆ˜ì •í•œë‹¤.&quot;)public void creatOrUpdatePost() throws Exception &#123; PostDto postDto = PostDto.builder() .id(1L) .name(&quot;tester&quot;) .title(&quot;test&quot;) .content(&quot;test&quot;) .build(); ResultActions resultActions = mockMvc.perform(post(&quot;/post&quot;) .flashAttr(&quot;postDto&quot;, new PostDto()) .param(&quot;id&quot;, &quot;1&quot;) .param(&quot;name&quot;, &quot;tester&quot;) .param(&quot;title&quot;, &quot;test&quot;) .param(&quot;content&quot;, &quot;test&quot;) ); verify(postService).updatePost(postDto); resultActions .andExpect(status().is3xxRedirection()) .andDo(print()) ;&#125; ë°ì´í„° ìˆ˜ì •ì„ ìœ„í•œ Service ë¡œì§ì—¬ê¸°ì„œëŠ” DBì¡°íšŒì‹œ PostNotExistedException ì˜ˆì™¸ê°€ ì¼ì–´ë‚  ì¼ì´ ì—†ë‹¤. Controlì—ì„œ idê°’ì˜ ìœ ë¬´ë¥¼ í†µí•´ createì™€ updateë¡œ ë‚˜ëˆ„ì–´ ì‹¤í–‰í•˜ê¸° ë•Œë¬¸ì´ë‹¤. PostService.java @Transactionalpublic Post updatePost(PostDto postDto) &#123; Post oldPost = postRepository.findById(postDto.getId()).orElseThrow(() -&gt; new PostNotExistedException(postDto.getId())); oldPost.revise(postDto); return oldPost;&#125; ë°ì´í„° ìˆ˜ì •ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±PostServiceTest.java @Test@DisplayName(&quot;í¬ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.&quot;)public void updatePost()&#123; PostDto postDto = PostDto.builder() .id(1L) .name(&quot;junit&quot;) .title(&quot;junitTest&quot;) .content(&quot;content&quot;) .build(); Post mockPost = Post.builder() .id(1L) .name(&quot;tester&quot;) .title(&quot;test&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postRepository.findById(1L)).willReturn(Optional.of(mockPost)); Post post = postService.updatePost(postDto); verify(postRepository).findById(1L); assertThat(post.getName()).isEqualTo(postDto.getName()); assertThat(post.getTitle()).isEqualTo(postDto.getTitle()); assertThat(post.getContent()).isEqualTo(postDto.getContent());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 8 - ìƒì„¸ í˜ì´ì§€","slug":"spring/sample-board/board-8-detail-post","date":"2021-02-12T11:42:27.000Z","updated":"2024-02-26T15:46:55.903Z","comments":true,"path":"2021/02/12/spring/sample-board/board-8-detail-post/","link":"","permalink":"https://ckck803.github.io/2021/02/12/spring/sample-board/board-8-detail-post/","excerpt":"&lt;!DOCTYPE html&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head th:replace=&quot;/fragments/head :: main-head&quot;&gt;&lt;/head&gt;&lt;body class=&quot;bg-light&quot;&gt;&lt;nav th:replace=&quot;/fragments/navbar :: main-nav&quot;&gt;&lt;/nav&gt;&lt;div class=&quot;container col-lg-6 &quot;&gt; &lt;h2&gt;ìƒì„¸ í˜ì´ì§€&lt;/h2&gt; &lt;div class=&quot;card&quot; style=&quot;padding: 20px; border-radius: 15px; margin: 20px auto;&quot;&gt; &lt;form class=&quot; form-horizontal&quot; method=&quot;post&quot; th:object=&quot;$&#123;postDto&#125;&quot;&gt; &lt;h1 th:text=&quot;*&#123;title&#125;&quot;&gt;ì œëª©&lt;/h1&gt; &lt;span&gt;ì‘ì„±ì : &lt;/span&gt; &lt;span th:text=&quot;*&#123;name&#125;&quot;&gt;Tester &lt;/span&gt; &lt;hr&gt; &lt;p class=&quot;lead&quot; style=&quot;height: 300px; border-radius: 5px;&quot; th:text=&quot;*&#123;content&#125;&quot;&gt;&lt;/p&gt; &lt;hr&gt; &lt;div class=&quot;text-right&quot; style=&quot;padding-right: 10px;&quot;&gt; &lt;span class=&quot;text-right&quot;&gt;ì‘ì„±ì¼ : &lt;/span&gt; &lt;span class=&quot;text-right&quot; th:text=&quot;*&#123;writeTime&#125;&quot;&gt;ì‘ì„±ì¼ &lt;/span&gt; &lt;/div&gt; &lt;hr&gt; &lt;div class=&quot;btn_wrap text-center&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-default waves-effect waves-light&quot;&gt;ë’¤ë¡œê°€ê¸°&lt;/a&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary waves-effect waves-light&quot;&gt;ìˆ˜ì •í•˜ê¸°&lt;/button&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-danger waves-effect waves-light&quot;&gt;ì‚­ì œí•˜ê¸°&lt;/button&gt; &lt;/div&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;","text":"&lt;!DOCTYPE html&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head th:replace=&quot;/fragments/head :: main-head&quot;&gt;&lt;/head&gt;&lt;body class=&quot;bg-light&quot;&gt;&lt;nav th:replace=&quot;/fragments/navbar :: main-nav&quot;&gt;&lt;/nav&gt;&lt;div class=&quot;container col-lg-6 &quot;&gt; &lt;h2&gt;ìƒì„¸ í˜ì´ì§€&lt;/h2&gt; &lt;div class=&quot;card&quot; style=&quot;padding: 20px; border-radius: 15px; margin: 20px auto;&quot;&gt; &lt;form class=&quot; form-horizontal&quot; method=&quot;post&quot; th:object=&quot;$&#123;postDto&#125;&quot;&gt; &lt;h1 th:text=&quot;*&#123;title&#125;&quot;&gt;ì œëª©&lt;/h1&gt; &lt;span&gt;ì‘ì„±ì : &lt;/span&gt; &lt;span th:text=&quot;*&#123;name&#125;&quot;&gt;Tester &lt;/span&gt; &lt;hr&gt; &lt;p class=&quot;lead&quot; style=&quot;height: 300px; border-radius: 5px;&quot; th:text=&quot;*&#123;content&#125;&quot;&gt;&lt;/p&gt; &lt;hr&gt; &lt;div class=&quot;text-right&quot; style=&quot;padding-right: 10px;&quot;&gt; &lt;span class=&quot;text-right&quot;&gt;ì‘ì„±ì¼ : &lt;/span&gt; &lt;span class=&quot;text-right&quot; th:text=&quot;*&#123;writeTime&#125;&quot;&gt;ì‘ì„±ì¼ &lt;/span&gt; &lt;/div&gt; &lt;hr&gt; &lt;div class=&quot;btn_wrap text-center&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-default waves-effect waves-light&quot;&gt;ë’¤ë¡œê°€ê¸°&lt;/a&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary waves-effect waves-light&quot;&gt;ìˆ˜ì •í•˜ê¸°&lt;/button&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-danger waves-effect waves-light&quot;&gt;ì‚­ì œí•˜ê¸°&lt;/button&gt; &lt;/div&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 7 - íŠ¹ì • í˜ì´ì§€ë¥¼ ê°€ì ¸ì˜¤ê¸°","slug":"spring/sample-board/board-7-detail","date":"2021-02-12T08:17:44.000Z","updated":"2024-02-26T15:46:51.955Z","comments":true,"path":"2021/02/12/spring/sample-board/board-7-detail/","link":"","permalink":"https://ckck803.github.io/2021/02/12/spring/sample-board/board-7-detail/","excerpt":"7. íŠ¹ì • í¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸°íŠ¹ì • í¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸° ìš”ì²­ ì²˜ë¦¬í•˜ê¸° PostController @GetMapping(&quot;/post/&#123;postId&#125;&quot;)public String getPostDetails(@PathVariable(&quot;postId&quot;)Long id, Model model)&#123; Post post = postService.getPostById(id); PostDto postDto = PostDto.builder() .id(post.getId()) .name(post.getName()) .title(post.getTitle()) .content(post.getContent()) .writeTime(post.getWriteTime()) .build(); model.addAttribute(&quot;postDto&quot;, postDto); return &quot;details&quot;;&#125; PostControllerTest.java @Test@DisplayName(&quot;ìƒì„¸ í˜ì´ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤.&quot;)public void getPostDetails() throws Exception&#123; Post mockPost = Post.builder() .id(1L) .name(&quot;tester&quot;) .title(&quot;test&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postService.getPostById(any())).willReturn(mockPost); ResultActions resultActions = mockMvc.perform(get(&quot;/post/1&quot;)); resultActions .andExpect(status().isOk()); verify(postService).getPostById(any());&#125; PostControllerTest.java @Test@DisplayName(&quot;ìƒì„¸ í˜ì´ì§€ë¥¼ ëª» ê°€ì ¸ì˜¨ë‹¤.&quot;)public void getPostDetailsException() throws Exception&#123; given(postService.getPostById(any())).willThrow(new PostNotExistedException(1L)); ResultActions resultActions = mockMvc.perform(get(&quot;/post/1&quot;)); resultActions .andExpect(status().isNotFound()); verify(postService).getPostById(any());&#125; í¬ìŠ¤íŠ¸ê°€ ì—†ëŠ” ê²½ìš°ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬í•˜ê¸°","text":"7. íŠ¹ì • í¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸°íŠ¹ì • í¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸° ìš”ì²­ ì²˜ë¦¬í•˜ê¸° PostController @GetMapping(&quot;/post/&#123;postId&#125;&quot;)public String getPostDetails(@PathVariable(&quot;postId&quot;)Long id, Model model)&#123; Post post = postService.getPostById(id); PostDto postDto = PostDto.builder() .id(post.getId()) .name(post.getName()) .title(post.getTitle()) .content(post.getContent()) .writeTime(post.getWriteTime()) .build(); model.addAttribute(&quot;postDto&quot;, postDto); return &quot;details&quot;;&#125; PostControllerTest.java @Test@DisplayName(&quot;ìƒì„¸ í˜ì´ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤.&quot;)public void getPostDetails() throws Exception&#123; Post mockPost = Post.builder() .id(1L) .name(&quot;tester&quot;) .title(&quot;test&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postService.getPostById(any())).willReturn(mockPost); ResultActions resultActions = mockMvc.perform(get(&quot;/post/1&quot;)); resultActions .andExpect(status().isOk()); verify(postService).getPostById(any());&#125; PostControllerTest.java @Test@DisplayName(&quot;ìƒì„¸ í˜ì´ì§€ë¥¼ ëª» ê°€ì ¸ì˜¨ë‹¤.&quot;)public void getPostDetailsException() throws Exception&#123; given(postService.getPostById(any())).willThrow(new PostNotExistedException(1L)); ResultActions resultActions = mockMvc.perform(get(&quot;/post/1&quot;)); resultActions .andExpect(status().isNotFound()); verify(postService).getPostById(any());&#125; í¬ìŠ¤íŠ¸ê°€ ì—†ëŠ” ê²½ìš°ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬í•˜ê¸°BoardErrorAdvice.java @ControllerAdvicepublic class BoardErrorAdvice &#123; @ResponseBody @ResponseStatus(HttpStatus.NOT_FOUND) @ExceptionHandler(PostNotExistedException.class) public void handleNotFound()&#123; &#125;&#125; PostNotExistedException.java public class PostNotExistedException extends RuntimeException&#123; public PostNotExistedException(Long id)&#123; super(&quot;Post id : &quot; + id + &quot; is not Existed&quot;); &#125;&#125; PostService.java public Post getPostById(Long id) &#123; Post post = postRepository.findById(id).orElseThrow(() -&gt; new PostNotExistedException(id)); return post;&#125; PostServiceTest.java @Test@DisplayName(&quot;íŠ¹ì • í¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜¨ë‹¤.&quot;)public void getPostById()&#123; Post mockPost = Post.builder() .id(1L) .name(&quot;tester&quot;) .title(&quot;test&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postRepository.findById(1L)).willReturn(Optional.of(mockPost)); Post post = postService.getPostById(1L); verify(postRepository).findById(1L); assertThat(post.getId()).isEqualTo(mockPost.getId()); assertThat(post.getTitle()).isEqualTo(mockPost.getTitle()); assertThat(post.getName()).isEqualTo(mockPost.getName()); assertThat(post.getContent()).isEqualTo(mockPost.getContent()); assertThat(post.getWriteTime()).isEqualTo(mockPost.getWriteTime());&#125;@Test@DisplayName(&quot;íŠ¹ì • í¬ìŠ¤íŠ¸ë¥¼ ëª» ê°€ì ¸ì˜¨ë‹¤.&quot;)public void getPostByIdException()&#123; Post mockPost = Post.builder() .id(1L) .name(&quot;tester&quot;) .title(&quot;test&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postRepository.findById(1L)).willThrow(new PostNotExistedException(1L)); assertThatThrownBy(() -&gt;&#123; postService.getPostById(1L); &#125;).isInstanceOf(PostNotExistedException.class); verify(postRepository).findById(1L);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 6 - ê²Œì‹œíŒ í˜ì´ì§€ ë§Œë“¤ê¸°","slug":"spring/sample-board/board-6-list","date":"2021-02-12T08:10:45.000Z","updated":"2024-02-26T15:46:45.341Z","comments":true,"path":"2021/02/12/spring/sample-board/board-6-list/","link":"","permalink":"https://ckck803.github.io/2021/02/12/spring/sample-board/board-6-list/","excerpt":"ê²Œì‹œíŒ í˜ì´ì§€ í…œí”Œë¦¿ê²Œì‹œíŒ í˜ì´ì§€ë„ ê²Œì‹œíŒ ì‘ì„±í˜ì´ì§€ì™€ ë˜‘ê°™ì´ Bootstrap ê³¼ BootWatch ë¥¼ ì´ìš©í•´ ë§Œë“¤ì—ˆë‹¤. &lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;./css/bootstrap.css&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;./css/custom.min.css&quot;&gt; &lt;title&gt;ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€&lt;/title&gt;&lt;/head&gt;&lt;body class=&quot;bg-light&quot;&gt;&lt;nav class=&quot;navbar navbar-expand-lg navbar-dark bg-primary fixed-top&quot;&gt; &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;ê²Œì‹œíŒ&lt;/a&gt;&lt;/nav&gt;&lt;div class=&quot;container col-lg-6 &quot;&gt; &lt;form class=&quot;form-inline my-2 my-lg-0 float-right&quot; style=&quot;padding-bottom : 16px;&quot;&gt; &lt;input class=&quot;form-control mr-sm-2&quot; type=&quot;text&quot; placeholder=&quot;Search&quot;&gt; &lt;button class=&quot;btn btn-secondary my-2 my-sm-0&quot; type=&quot;submit&quot;&gt;Search&lt;/button&gt; &lt;/form&gt; &lt;div class=&quot;table-responsive clearfix&quot;&gt; &lt;table class=&quot;table table-hover&quot;&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;ë²ˆí˜¸&lt;/th&gt; &lt;th&gt;ì œëª©&lt;/th&gt; &lt;th&gt;ì‘ì„±ì&lt;/th&gt; &lt;th&gt;ë“±ë¡ì¼&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class=&quot;btn_wrap text-right&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-primary waves-effect waves-light&quot;&gt;Write&lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;text-center &quot;&gt; &lt;ul class=&quot;pagination&quot; style=&quot;justify-content: center;&quot;&gt; &lt;li class=&quot;page-item disabled&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;&amp;laquo;&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item active&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;1&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;2&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;3&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;4&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;5&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;&amp;raquo;&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; íƒ€ì„ë¦¬í”„ ë¬¸ë²• ì ìš©í•˜ê¸°&lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head th:replace=&quot;fragments/head :: main-head&quot;/&gt;&lt;body class=&quot;bg-light&quot;&gt;&lt;nav th:replace=&quot;fragments/navbar :: main-nav&quot;/&gt;&lt;div class=&quot;container col-lg-6 &quot;&gt; &lt;form class=&quot;form-inline my-2 my-lg-0 float-right&quot; style=&quot;padding-bottom : 16px;&quot;&gt; &lt;input class=&quot;form-control mr-sm-2&quot; type=&quot;text&quot; placeholder=&quot;Search&quot;&gt; &lt;button class=&quot;btn btn-secondary my-2 my-sm-0&quot; type=&quot;submit&quot;&gt;Search&lt;/button&gt; &lt;/form&gt; &lt;div class=&quot;table-responsive clearfix&quot;&gt; &lt;table class=&quot;table table-hover&quot;&gt; &lt;thead class=&quot;text-center&quot;&gt; &lt;tr&gt; &lt;th&gt;ë²ˆí˜¸&lt;/th&gt; &lt;th&gt;ì œëª©&lt;/th&gt; &lt;th&gt;ì‘ì„±ì&lt;/th&gt; &lt;th&gt;ë“±ë¡ì¼&lt;/th&gt; &lt;th &gt;ìˆ˜ì •/ì‚­ì œ&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody class=&quot;text-center&quot;&gt; &lt;tr th:each=&quot;Post:$&#123;PostList&#125;&quot;&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;PostStat.index+1&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;align-middle&quot;&gt; &lt;a th:text=&quot;$&#123;Post.title&#125;&quot;&gt;&lt;/a&gt; &lt;/td&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;Post.name&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;Post.writeTime&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;text-center align-middle&quot;&gt; &lt;button class=&quot;btn btn-primary&quot;&gt;ìˆ˜ì •&lt;/button&gt; &lt;button class=&quot;btn btn-danger&quot;&gt;ì‚­ì œ&lt;/button&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class=&quot;btn_wrap text-right&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-primary waves-effect waves-light&quot;&gt;Write&lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;text-center &quot;&gt; &lt;ul class=&quot;pagination&quot; style=&quot;justify-content: center;&quot;&gt; &lt;li class=&quot;page-item disabled&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;&amp;laquo;&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item active&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;1&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;2&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;3&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;4&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;5&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;&amp;raquo;&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;","text":"ê²Œì‹œíŒ í˜ì´ì§€ í…œí”Œë¦¿ê²Œì‹œíŒ í˜ì´ì§€ë„ ê²Œì‹œíŒ ì‘ì„±í˜ì´ì§€ì™€ ë˜‘ê°™ì´ Bootstrap ê³¼ BootWatch ë¥¼ ì´ìš©í•´ ë§Œë“¤ì—ˆë‹¤. &lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;./css/bootstrap.css&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;./css/custom.min.css&quot;&gt; &lt;title&gt;ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€&lt;/title&gt;&lt;/head&gt;&lt;body class=&quot;bg-light&quot;&gt;&lt;nav class=&quot;navbar navbar-expand-lg navbar-dark bg-primary fixed-top&quot;&gt; &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;ê²Œì‹œíŒ&lt;/a&gt;&lt;/nav&gt;&lt;div class=&quot;container col-lg-6 &quot;&gt; &lt;form class=&quot;form-inline my-2 my-lg-0 float-right&quot; style=&quot;padding-bottom : 16px;&quot;&gt; &lt;input class=&quot;form-control mr-sm-2&quot; type=&quot;text&quot; placeholder=&quot;Search&quot;&gt; &lt;button class=&quot;btn btn-secondary my-2 my-sm-0&quot; type=&quot;submit&quot;&gt;Search&lt;/button&gt; &lt;/form&gt; &lt;div class=&quot;table-responsive clearfix&quot;&gt; &lt;table class=&quot;table table-hover&quot;&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;ë²ˆí˜¸&lt;/th&gt; &lt;th&gt;ì œëª©&lt;/th&gt; &lt;th&gt;ì‘ì„±ì&lt;/th&gt; &lt;th&gt;ë“±ë¡ì¼&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class=&quot;btn_wrap text-right&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-primary waves-effect waves-light&quot;&gt;Write&lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;text-center &quot;&gt; &lt;ul class=&quot;pagination&quot; style=&quot;justify-content: center;&quot;&gt; &lt;li class=&quot;page-item disabled&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;&amp;laquo;&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item active&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;1&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;2&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;3&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;4&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;5&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;&amp;raquo;&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; íƒ€ì„ë¦¬í”„ ë¬¸ë²• ì ìš©í•˜ê¸°&lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head th:replace=&quot;fragments/head :: main-head&quot;/&gt;&lt;body class=&quot;bg-light&quot;&gt;&lt;nav th:replace=&quot;fragments/navbar :: main-nav&quot;/&gt;&lt;div class=&quot;container col-lg-6 &quot;&gt; &lt;form class=&quot;form-inline my-2 my-lg-0 float-right&quot; style=&quot;padding-bottom : 16px;&quot;&gt; &lt;input class=&quot;form-control mr-sm-2&quot; type=&quot;text&quot; placeholder=&quot;Search&quot;&gt; &lt;button class=&quot;btn btn-secondary my-2 my-sm-0&quot; type=&quot;submit&quot;&gt;Search&lt;/button&gt; &lt;/form&gt; &lt;div class=&quot;table-responsive clearfix&quot;&gt; &lt;table class=&quot;table table-hover&quot;&gt; &lt;thead class=&quot;text-center&quot;&gt; &lt;tr&gt; &lt;th&gt;ë²ˆí˜¸&lt;/th&gt; &lt;th&gt;ì œëª©&lt;/th&gt; &lt;th&gt;ì‘ì„±ì&lt;/th&gt; &lt;th&gt;ë“±ë¡ì¼&lt;/th&gt; &lt;th &gt;ìˆ˜ì •/ì‚­ì œ&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody class=&quot;text-center&quot;&gt; &lt;tr th:each=&quot;Post:$&#123;PostList&#125;&quot;&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;PostStat.index+1&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;align-middle&quot;&gt; &lt;a th:text=&quot;$&#123;Post.title&#125;&quot;&gt;&lt;/a&gt; &lt;/td&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;Post.name&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;align-middle&quot; th:text=&quot;$&#123;Post.writeTime&#125;&quot;&gt;&lt;/td&gt; &lt;td class=&quot;text-center align-middle&quot;&gt; &lt;button class=&quot;btn btn-primary&quot;&gt;ìˆ˜ì •&lt;/button&gt; &lt;button class=&quot;btn btn-danger&quot;&gt;ì‚­ì œ&lt;/button&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class=&quot;btn_wrap text-right&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-primary waves-effect waves-light&quot;&gt;Write&lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;text-center &quot;&gt; &lt;ul class=&quot;pagination&quot; style=&quot;justify-content: center;&quot;&gt; &lt;li class=&quot;page-item disabled&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;&amp;laquo;&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item active&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;1&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;2&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;3&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;4&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;5&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;page-item&quot;&gt; &lt;a class=&quot;page-link&quot; href=&quot;#&quot;&gt;&amp;raquo;&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 5 - ëª¨ë“  Post ê°€ì ¸ì˜¤ê¸°","slug":"spring/sample-board/board-5-all","date":"2021-02-12T01:06:30.000Z","updated":"2024-02-26T15:46:31.466Z","comments":true,"path":"2021/02/12/spring/sample-board/board-5-all/","link":"","permalink":"https://ckck803.github.io/2021/02/12/spring/sample-board/board-5-all/","excerpt":"5. ëª¨ë“  í¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°ëª¨ë“  í¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° ìš”ì²­ ì²˜ë¦¬í•˜ê¸°BoardController.java @Controller@RequiredArgsConstructorpublic class BoardController &#123; private final PostService postService; @GetMapping(&quot;/&quot;) public String board(Model model)&#123; List&lt;Post&gt; posts = postService.getAllPost(); model.addAttribute(&quot;PostList&quot;, posts); return &quot;board&quot;; &#125;&#125; ëª¨ë“  Post ê°€ì ¸ì˜¤ê¸° ìš”ì²­ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±BoardControllerTest.java @WebMvcTestclass BoardControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private PostService postService; @Test @DisplayName(&quot;ëª¨ë“  Postë¥¼ ê°€ì ¸ì˜¨ë‹¤.&quot;) public void board() throws Exception &#123; List&lt;Post&gt; posts = new ArrayList&lt;&gt;(); posts.add(Post.builder() .id(1L) .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build() ); given(postService.getAllPost()).willReturn(posts); ResultActions resultActions = mockMvc.perform(get(&quot;/&quot;)); resultActions .andExpect(status().isOk()) .andDo(print()); verify(postService).getAllPost(); &#125;&#125; ë°ì´í„° ì¡°íšŒ@Service@RequiredArgsConstructorpublic class PostService &#123; private final PostRepository postRepository; public Post addPost(Post newPost) &#123; return postRepository.save(newPost); &#125; public List&lt;Post&gt; getAllPost() &#123; return postRepository.findAll(); &#125;&#125;","text":"5. ëª¨ë“  í¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°ëª¨ë“  í¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° ìš”ì²­ ì²˜ë¦¬í•˜ê¸°BoardController.java @Controller@RequiredArgsConstructorpublic class BoardController &#123; private final PostService postService; @GetMapping(&quot;/&quot;) public String board(Model model)&#123; List&lt;Post&gt; posts = postService.getAllPost(); model.addAttribute(&quot;PostList&quot;, posts); return &quot;board&quot;; &#125;&#125; ëª¨ë“  Post ê°€ì ¸ì˜¤ê¸° ìš”ì²­ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±BoardControllerTest.java @WebMvcTestclass BoardControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private PostService postService; @Test @DisplayName(&quot;ëª¨ë“  Postë¥¼ ê°€ì ¸ì˜¨ë‹¤.&quot;) public void board() throws Exception &#123; List&lt;Post&gt; posts = new ArrayList&lt;&gt;(); posts.add(Post.builder() .id(1L) .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build() ); given(postService.getAllPost()).willReturn(posts); ResultActions resultActions = mockMvc.perform(get(&quot;/&quot;)); resultActions .andExpect(status().isOk()) .andDo(print()); verify(postService).getAllPost(); &#125;&#125; ë°ì´í„° ì¡°íšŒ@Service@RequiredArgsConstructorpublic class PostService &#123; private final PostRepository postRepository; public Post addPost(Post newPost) &#123; return postRepository.save(newPost); &#125; public List&lt;Post&gt; getAllPost() &#123; return postRepository.findAll(); &#125;&#125; ë°ì´í„° ì¡°íšŒì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Test@DisplayName(&quot;ëª¨ë“  í¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜¨ë‹¤.&quot;)public void getAllPosts() &#123; List&lt;Post&gt; mockPosts = new ArrayList&lt;&gt;(); mockPosts.add(Post.builder() .id(1L) .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build() ); given(postRepository.findAll()).willReturn(mockPosts); List&lt;Post&gt; posts = postService.getAllPosts(); verify(postRepository).findAll(); Post post = posts.get(0); assertThat(post.getId()).isEqualTo(mockPosts.get(0).getId()); assertThat(post.getTitle()).isEqualTo(mockPosts.get(0).getTitle()); assertThat(post.getName()).isEqualTo(mockPosts.get(0).getName()); assertThat(post.getContent()).isEqualTo(mockPosts.get(0).getContent()); assertThat(post.getWriteTime()).isEqualTo(mockPosts.get(0).getWriteTime());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 4 - My SQLê³¼ ì—°ë™í•˜ê¸°","slug":"spring/sample-board/board-4-mysql","date":"2021-02-11T23:47:12.000Z","updated":"2024-02-26T15:46:26.511Z","comments":true,"path":"2021/02/12/spring/sample-board/board-4-mysql/","link":"","permalink":"https://ckck803.github.io/2021/02/12/spring/sample-board/board-4-mysql/","excerpt":"4. My SQLê³¼ ì—°ë™ì˜ì¡´ì„± ì¶”ê°€My Sqlê³¼ ì—°ë™í•˜ê¸° ìœ„í•´ì„œëŠ” Springbootí”„ë¡œì íŠ¸ì— ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤. build.gradle implementation &#x27;mysql:mysql-connector-java&#x27; ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì† ì„¤ì •í•˜ê¸°application-mysql.yml spring: datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/[DB]?serverTimezone=UTC&amp;characterEncoding=UTF-8 username: [DB ì ‘ì† Id] password: [DB ì ‘ì†¡ Password] ì ‘ì† ì„¤ì • ê°€ì ¸ì˜¤ê¸°","text":"4. My SQLê³¼ ì—°ë™ì˜ì¡´ì„± ì¶”ê°€My Sqlê³¼ ì—°ë™í•˜ê¸° ìœ„í•´ì„œëŠ” Springbootí”„ë¡œì íŠ¸ì— ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤. build.gradle implementation &#x27;mysql:mysql-connector-java&#x27; ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì† ì„¤ì •í•˜ê¸°application-mysql.yml spring: datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/[DB]?serverTimezone=UTC&amp;characterEncoding=UTF-8 username: [DB ì ‘ì† Id] password: [DB ì ‘ì†¡ Password] ì ‘ì† ì„¤ì • ê°€ì ¸ì˜¤ê¸°ì„¤ì •ì— show_sql ê³¼ format_sql ë¥¼ ì¶”ê°€í•´ ì¿¼ë¦¬ë¬¸ë“¤ì´ ì–´ë–»ê²Œ ì¶œë ¥ë˜ëŠ”ì§€ ëˆˆìœ¼ë¡œ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆë‹¤. spring.jpa.properties.hibernate.show_sql=true : JPA(hibernamte)ê°€ ì‹¤í–‰í•˜ëŠ” SQL ì¿¼ë¦¬ë¬¸ ë¡œê·¸ë¥¼ ì¶œë ¥í•œë‹¤. spring.jpa.properties.hibernate.format_sql=true : SQLë¬¸ì„ ë³´ê¸° ì¢‹ê²Œ ì •ë ¬í•´ ì¶œë ¥í•´ì¤€ë‹¤. application.yml spring: jpa: hibernate: ddl-auto: create properties: hibernate: show_sql: true format_sql: true profiles: include: mysql Springbootë¥¼ ì‹¤í–‰í•˜ë©´ ë¡œê·¸ì— create ì¿¼ë¦¬ë¬¸ì´ ì°íˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆê³  DBë¡œ ê°€ê²Œ ë˜ë©´ post í…Œì´ë¸”ì´ ìƒì„±ë¬ìŒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì„ì˜ ë°ì´í„° ì¶”ê°€í•˜ê¸°CommandLineRunnerë¥¼ ì‚¬ìš©í•´ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•˜ë©´ì„œ ë°ì´í„°ë¥¼ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ì‹œí‚¨ë‹¤. ìµëª…ê°ì²´ ìƒì„± @Beanpublic CommandLineRunner runner(PostRepository postRepository) throws Exception &#123; return new CommandLineRunner() &#123; @Override public void run(String... args) throws Exception &#123; IntStream.rangeClosed(1, 200).forEach(index -&gt; postRepository.save(Post.builder() .title(&quot;ê²Œì‹œê¸€&quot; + index) .name(&quot;tester&quot;) .content(&quot;ë‚´ìš©&quot; + index) .writeTime(LocalDateTime.now()) .build())); &#125; &#125;;&#125; ëŒë‹¤ì‹ìœ¼ë¡œ ì§ì„± @Beanpublic CommandLineRunner runner(PostRepository postRepository) throws Exception &#123; return args -&gt; &#123; IntStream.rangeClosed(1, 200).forEach(index -&gt; postRepository.save(Post.builder() .title(&quot;ê²Œì‹œê¸€&quot; + index) .name(&quot;tester&quot;) .content(&quot;ë‚´ìš©&quot; + index) .writeTime(LocalDateTime.now()) .build())); &#125;;&#125; ë°ì´í„° ë² ì´ìŠ¤ë¥¼ í™•ì¸í•´ ë³´ë‹ˆ ë°ì´í„°ë“¤ì´ ì •ìƒì ìœ¼ë¡œ ì…ë ¥ëœê±¸ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. ë¬¼ë¡  ìˆ˜ì—†ì´ ë§ì€ ì¿¼ë¦¬ë¬¸ë“¤ì´ ë‚ ë¼ê°„ ê²ƒë„ ëˆˆìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤!","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 3 - ê²Œì‹œê¸€ ì‘ì„±í•˜ê¸°","slug":"spring/sample-board/board-3-post-write","date":"2021-02-11T13:53:28.000Z","updated":"2024-02-26T15:46:22.728Z","comments":true,"path":"2021/02/11/spring/sample-board/board-3-post-write/","link":"","permalink":"https://ckck803.github.io/2021/02/11/spring/sample-board/board-3-post-write/","excerpt":"3. ìƒˆë¡œìš´ Post ìƒì„± ìš”ì²­ ì²˜ë¦¬í•˜ê¸°ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë¡œì§ì€ DBì— ì ‘ê·¼ì„ í•˜ê¸° ë•Œë¬¸ì— ë‹¤ìŒê³¼ ê°™ì€ ë¡œì§ì„ ì¶”ê°€í•´ DBì— ë°ì´í„°ë“¤ì´ ì œëŒ€ë¡œ ì €ì¥ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í•¸í•œ í›„ http://localhost:8080/h2-console ë¥¼ í†µí•´ ë°ì´í„° ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. application.yml spring: h2: console: enabled: true path: /h2-console datasource: username: sa password: url: jdbc:h2:mem:testdb driver-class-name: org.h2.Driver /postê²½ë¡œë¡œ post ìš”ì²­ì´ ë“¤ì–´ì˜¬ ê²½ìš° ì…ë ¥ëœ ì •ë³´ë“¤ì´ ì œëŒ€ë¡œ ë“¤ì–´ì™”ëŠ”ì§€ Validationì„ ì§„í–‰í•˜ê³  ë¬¸ì œê°€ ì—†ì„ ê²½ìš° ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤. PostController.java @PostMapping(&quot;/post&quot;)public String creatNewPost(@Valid @ModelAttribute(&quot;postDto&quot;) PostDto postDto) &#123; postService.addPost(postDto); return &quot;redirect:/&quot;;&#125; ìƒì„± ìš”ì²­ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°MockBean ì¶”ê°€í•˜ê¸°","text":"3. ìƒˆë¡œìš´ Post ìƒì„± ìš”ì²­ ì²˜ë¦¬í•˜ê¸°ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë¡œì§ì€ DBì— ì ‘ê·¼ì„ í•˜ê¸° ë•Œë¬¸ì— ë‹¤ìŒê³¼ ê°™ì€ ë¡œì§ì„ ì¶”ê°€í•´ DBì— ë°ì´í„°ë“¤ì´ ì œëŒ€ë¡œ ì €ì¥ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í•¸í•œ í›„ http://localhost:8080/h2-console ë¥¼ í†µí•´ ë°ì´í„° ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. application.yml spring: h2: console: enabled: true path: /h2-console datasource: username: sa password: url: jdbc:h2:mem:testdb driver-class-name: org.h2.Driver /postê²½ë¡œë¡œ post ìš”ì²­ì´ ë“¤ì–´ì˜¬ ê²½ìš° ì…ë ¥ëœ ì •ë³´ë“¤ì´ ì œëŒ€ë¡œ ë“¤ì–´ì™”ëŠ”ì§€ Validationì„ ì§„í–‰í•˜ê³  ë¬¸ì œê°€ ì—†ì„ ê²½ìš° ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤. PostController.java @PostMapping(&quot;/post&quot;)public String creatNewPost(@Valid @ModelAttribute(&quot;postDto&quot;) PostDto postDto) &#123; postService.addPost(postDto); return &quot;redirect:/&quot;;&#125; ìƒì„± ìš”ì²­ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°MockBean ì¶”ê°€í•˜ê¸°PostControllerì˜ creatNewPostë©”ì†Œë“œ ë‚´ì—ì„œëŠ” PostServiceê°ì²´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ì„œ í•´ë‹¹ Mock ì„ ì¶”ê°€í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. PostControllerTest.java @MockBeanprivate PostService postService; PostServiceê°ì²´ì˜ MockBeanì„ ìƒì„±í•´ì£¼ì§€ ì•Šìœ¼ë©´ ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. creatNewPostë©”ì†Œë“œ /postê²½ë¡œë¡œ post ìš”ì²­ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ê²ƒì´ë‹¤. givenë©”ì†Œë“œë¥¼ ì´ìš©í•´ PostServiceê°€ ë°˜í™˜í•  ê°ì²´ì— ëŒ€í•´ ì •ì˜ë¥¼ í•œë‹¤. /postê²½ë¡œë¡œ postìš”ì²­ì„ ë³´ë‚´ë„ë¡í•œë‹¤. ë°ì´í„°ë¥¼ ë³´ë‚´ê¸° ìœ„í•´ì„œëŠ” flashAttr ë©”ì†Œë“œë¥¼ ì´ìš©í•´ í”Œë˜ì‹œ ìŠ¤ì½”í”„ì— ê°ì²´ë¥¼ ì„¤ì •í•˜ë„ë¡í•œë‹¤. ìš”ì²­ì´ ì™„ë£Œëœ í›„ ë¦¬ë‹¤ì´ë ‰ì…˜(Status Code : 302) ì´ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ëŠ”ì§€ í™•ì¸í•œë‹¤. PostControllerTest.java @Test@DisplayName(&quot;ìƒˆë¡œìš´ ê²Œì‹œê¸€ ìƒì„±ì„ ì„±ê³µí•œë‹¤.&quot;)public void successCreateNewPost() throws Exception &#123; Post mockPost = Post.builder() .id(1L) .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postService.addPost(any())).willReturn(mockPost); ResultActions resultActions = mockMvc.perform(post(&quot;/post&quot;) .flashAttr(&quot;postDto&quot;, new PostDto())// .sessionAttr(&quot;postDto&quot;, new PostDto()) .param(&quot;title&quot;, &quot;test&quot;) .param(&quot;name&quot;, &quot;tester&quot;) .param(&quot;content&quot;, &quot;test&quot;) ); resultActions .andExpect(status().is3xxRedirection()) // Response Headerì— ìˆëŠ” Location ì •ë³´ë¥¼ ë¹„êµí•œë‹¤. .andDo(print()); verify(postService).addPost(any());&#125; ì‹¤íŒ¨ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì§„í–‰Controllerë‹¨ì—ì„œì˜ Data Validationì´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë“¤ì´ë‹¤. title, name, content ì— ëŒ€í•œ ê°’ì˜ ê²€ì¦ì„ í•´ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì„¸ê°€ì§€ ê²½ìš°ë¡œ í™•ì¸í–ˆë‹¤. PostControllerTest.java @Test@DisplayName(&quot;ìƒˆë¡œìš´ ê²Œì‹œê¸€ ìƒì„±ì„ ì‹¤íŒ¨í•œë‹¤.&quot;)public void failCreateNewFailWithNoTitle() throws Exception &#123; Post mockPost = Post.builder() .id(1L) .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postService.addPost(any())).willReturn(mockPost); ResultActions resultActions = mockMvc.perform(post(&quot;/post&quot;) .flashAttr(&quot;postDto&quot;, new PostDto()) .param(&quot;name&quot;, &quot;tester&quot;) .param(&quot;content&quot;, &quot;test&quot;) ); resultActions .andExpect(status().isBadRequest()) .andDo(print());&#125;@Test@DisplayName(&quot;ìƒˆë¡œìš´ ê²Œì‹œê¸€ ìƒì„±ì„ ì‹¤íŒ¨í•œë‹¤.&quot;)public void failCreateNewFailWithNoName() throws Exception &#123; Post mockPost = Post.builder() .id(1L) .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postService.addPost(any())).willReturn(mockPost); ResultActions resultActions = mockMvc.perform(post(&quot;/post&quot;) .flashAttr(&quot;postDto&quot;, new PostDto()) .param(&quot;title&quot;, &quot;test&quot;) .param(&quot;content&quot;, &quot;test&quot;) ); resultActions .andExpect(status().isBadRequest()) .andDo(print());&#125;@Test@DisplayName(&quot;ìƒˆë¡œìš´ ê²Œì‹œê¸€ ìƒì„±ì„ ì‹¤íŒ¨í•œë‹¤.&quot;)public void failCreateNewFailWithNoContent() throws Exception &#123; Post mockPost = Post.builder() .id(1L) .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postService.addPost(any())).willReturn(mockPost); ResultActions resultActions = mockMvc.perform(post(&quot;/post&quot;) .flashAttr(&quot;postDto&quot;, new PostDto()) .param(&quot;title&quot;, &quot;test&quot;) .param(&quot;name&quot;, &quot;tester&quot;) ); resultActions .andExpect(status().isBadRequest()) .andDo(print());&#125; ë°ì´í„° ì €ì¥í•˜ê¸°PostRepository ê°ì²´ë¥¼ í†µí•´ ë°ì´í„° ì €ì¥ì„ ì§„í–‰í•œë‹¤. PostService.java @Service@RequiredArgsConstructorpublic class PostService &#123; private final PostRepository postRepository; @Transactional public Post addPost(PostDto postDto) &#123; Post post = Post.builder() .title(postDto.getTitle()) .name(postDto.getName()) .content(postDto.getContent()) .writeTime(LocalDateTime.now()) .build(); return postRepository.save(post); &#125;&#125; ì €ì¥ë¡œì§ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±PostService ê°ì²´ì˜ addPostê°€ ì‹¤í–‰ëœ í›„ ê°’ì´ ì œëŒ€ë¡œ ë°˜í™˜ëëŠ”ì§€ í™•ì¸í•œ í›„ PostRepository ê°ì²´ì—ì„œ save ë©”ì†Œë“œê°€ í˜¸ì¶œëëŠ”ì§€ í™•ì¸í•œë‹¤. PostServiceTest.java class PostServiceTest &#123; @Mock private PostRepository postRepository; private PostService postService; @BeforeEach public void init() &#123; MockitoAnnotations.openMocks(this); postService = new PostService(postRepository); &#125; @Test @DisplayName(&quot;ìƒˆë¡œìš´ í¬ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•œë‹¤.&quot;) @Transactional public void addPost() &#123; PostDto postDto = PostDto.builder() .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); Post mockPost = Post.builder() .id(1L) .title(&quot;test&quot;) .name(&quot;tester&quot;) .content(&quot;test&quot;) .writeTime(LocalDateTime.now()) .build(); given(postRepository.save(any())).willReturn(mockPost); Post returnPost = postService.addPost(postDto); assertThat(returnPost.getId()).isEqualTo(mockPost.getId()); assertThat(returnPost.getTitle()).isEqualTo(mockPost.getTitle()); assertThat(returnPost.getName()).isEqualTo(mockPost.getName()); assertThat(returnPost.getContent()).isEqualTo(mockPost.getContent()); assertThat(returnPost.getWriteTime()).isEqualTo(mockPost.getWriteTime()); verify(postRepository).save(any()); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 2 - ê²Œì‹œê¸€ ì‘ì„±í˜ì´ì§€ ë§Œë“¤ê¸°","slug":"spring/sample-board/board-2-post","date":"2021-02-11T10:53:28.000Z","updated":"2024-02-26T15:46:12.192Z","comments":true,"path":"2021/02/11/spring/sample-board/board-2-post/","link":"","permalink":"https://ckck803.github.io/2021/02/11/spring/sample-board/board-2-post/","excerpt":"2. ê²Œì‹œê¸€ ì‘ì„±í˜ì´ì§€ ì„¤ê³„ë„ë©”ì¸ ì„¤ê³„í•˜ê¸°ì‚¬ìš©ìë¡œë¶€í„° ê²Œì‹œê¸€ ì œëª©, ì‘ì„±ì ì´ë¦„, ê²Œì‹œê¸€ ë‚´ìš©ê³¼ ê²Œì‹œê¸€ë“¤ì„ êµ¬ë³„í•´ì£¼ê¸° ìœ„í•´ Idê°’ê³¼ ê²Œì‹œê¸€ì´ ì–¸ì œ ì‘ì„±ë˜ì—ˆëŠ”ì§€ ì•Œê¸° ìœ„í•œ ì‘ì„±ì‹œê°„ì„ ì¶”ê°€í•´ ë„ë©”ì¸ì„ ë§Œë“ ë‹¤. Post.java @Entity@NoArgsConstructor@AllArgsConstructor@Builder@Getterpublic class Post &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @NotEmpty private String title; @NotEmpty private String name; @NotEmpty private String content; @NotNull private LocalDateTime writeTime;&#125; DTO ì‘ì„±í•˜ê¸°ì‚¬ìš©ìë¡œë¶€í„° Formì„ í†µí•´ title, name, contentë¥¼ ì…ë ¥ ë°›ëŠ”ë‹¤. Post ê°ì²´ë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆì§€ë§Œ Viewë¡œì§ì´ ì¶”ê°€ë˜ê²Œ ëœë‹¤. EntityëŠ” DBì™€ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ” ê°ì²´ì´ê¸°ì— DTOë¥¼ ë§Œë“¤ì–´ Entityë¥¼ Viewë¡œì§ìœ¼ë¡œë¶€í„° ë¶„ë¦¬í•´ ì¶”í›„ ìƒê¸¸ ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ ì—†ì• ë„ë¡ í•œë‹¤.","text":"2. ê²Œì‹œê¸€ ì‘ì„±í˜ì´ì§€ ì„¤ê³„ë„ë©”ì¸ ì„¤ê³„í•˜ê¸°ì‚¬ìš©ìë¡œë¶€í„° ê²Œì‹œê¸€ ì œëª©, ì‘ì„±ì ì´ë¦„, ê²Œì‹œê¸€ ë‚´ìš©ê³¼ ê²Œì‹œê¸€ë“¤ì„ êµ¬ë³„í•´ì£¼ê¸° ìœ„í•´ Idê°’ê³¼ ê²Œì‹œê¸€ì´ ì–¸ì œ ì‘ì„±ë˜ì—ˆëŠ”ì§€ ì•Œê¸° ìœ„í•œ ì‘ì„±ì‹œê°„ì„ ì¶”ê°€í•´ ë„ë©”ì¸ì„ ë§Œë“ ë‹¤. Post.java @Entity@NoArgsConstructor@AllArgsConstructor@Builder@Getterpublic class Post &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @NotEmpty private String title; @NotEmpty private String name; @NotEmpty private String content; @NotNull private LocalDateTime writeTime;&#125; DTO ì‘ì„±í•˜ê¸°ì‚¬ìš©ìë¡œë¶€í„° Formì„ í†µí•´ title, name, contentë¥¼ ì…ë ¥ ë°›ëŠ”ë‹¤. Post ê°ì²´ë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆì§€ë§Œ Viewë¡œì§ì´ ì¶”ê°€ë˜ê²Œ ëœë‹¤. EntityëŠ” DBì™€ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ” ê°ì²´ì´ê¸°ì— DTOë¥¼ ë§Œë“¤ì–´ Entityë¥¼ Viewë¡œì§ìœ¼ë¡œë¶€í„° ë¶„ë¦¬í•´ ì¶”í›„ ìƒê¸¸ ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ ì—†ì• ë„ë¡ í•œë‹¤. @Data@Builder@NoArgsConstructor@AllArgsConstructorpublic class PostDto &#123; @NotEmpty private String title; @NotEmpty private String name; @NotEmpty private String content;&#125; Viewì— Thymeleafë¬¸ë²• ì ìš©í•˜ê¸°xmlns:th=&quot;http://www.thymeleaf.org&quot;ë¥¼ ì¶”ê°€í•˜ë©´ Thymeleafë¬¸ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ThymeleafëŠ” htmlì†ì„±ì— th: ë¥¼ ë¶™ì—¬ ì‚¬ìš©í•œë‹¤. th:replace=&quot;/fragments/head :: main-head&quot; : ë”°ë¡œ ì„ ì–¸ë¼ ìˆëŠ” htmlíŒŒì¼ë¡œ ì¹˜í™˜í•  ìˆ˜ ìˆë‹¤. th:action=&quot;@&#123;/post&#125;&quot; : Thymeleafë¥¼ ì‚¬ìš©í•´ URLì„ ê¸°ì…í•˜ê¸° ìœ„í•´ì„œëŠ” @ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤. th:object=&quot;$&#123;postDto&#125;&quot; : ì„œë²„ë¡œë¶€í„° ë°›ì€ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” $ë¥¼ ë¶™ì—¬ì„œ ì‚¬ìš©í•œë‹¤. th:field=&quot;*&#123;title&#125;&quot; : ì„œë²„ë¡œë¶€í„° ë°›ì€ ë°ì´í„°ë‚´ì˜ fieldê°’ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” *ë¥¼ ë¶™ì—¬ì„œ ì‚¬ìš©í•œë‹¤. post.html &lt;!DOCTYPE html&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head th:replace=&quot;/fragments/head :: main-head&quot;&gt;&lt;/head&gt;&lt;body class=&quot;bg-light&quot;&gt;&lt;nav th:replace=&quot;/fragments/navbar :: main-nav&quot;&gt;&lt;/nav&gt;&lt;div class=&quot;container col-lg-6 &quot;&gt; &lt;h2&gt;ê²Œì‹œê¸€ ì‘ì„±&lt;/h2&gt; &lt;div class=&quot;card&quot; style=&quot;padding: 20px; border-radius: 15px; margin: 20px auto;&quot;&gt; &lt;form class=&quot; form-horizontal&quot; method=&quot;post&quot; th:action=&quot;@&#123;/post&#125;&quot; th:object=&quot;$&#123;postDto&#125;&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ì œëª©&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; th:field=&quot;*&#123;title&#125;&quot; placeholder=&quot;ì œëª©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot;/&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ì´ë¦„&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; th:field=&quot;*&#123;name&#125;&quot; placeholder=&quot;ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot;/&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ë‚´ìš©&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;textarea class=&quot;form-control&quot; style=&quot;height: 300px;&quot; th:field=&quot;*&#123;content&#125;&quot; placeholder=&quot;ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot;&gt;&lt;/textarea&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;btn_wrap text-center&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-default waves-effect waves-light&quot;&gt;ë’¤ë¡œê°€ê¸°&lt;/a&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary waves-effect waves-light&quot;&gt;ì €ì¥í•˜ê¸°&lt;/button&gt; &lt;/div&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” Html headerë¶€ë¶„ì„ ë”°ë¡œ ì •ì˜í•´ êµ¬ì„±ìš”ì†Œë¥¼ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•œë‹¤. head.html &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head th:fragment=&quot;main-head&quot;&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;./css/bootstrap.css&#125;&quot;&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;./css/custom.min.css&#125;&quot;&gt; &lt;title&gt;ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€&lt;/title&gt;&lt;/head&gt;&lt;/html&gt; navigation barì˜ ê²½ìš°ì—ë„ ëª¨ë“  í˜ì´ì§€ì—ì„œ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•¨ìœ¼ë¡œ fragmentí˜•ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•œë‹¤. navbar.html &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;nav th:fragment=&quot;main-nav&quot; class=&quot;navbar navbar-expand-lg navbar-dark bg-primary fixed-top&quot;&gt; &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;ê²Œì‹œíŒ&lt;/a&gt;&lt;/nav&gt;&lt;/html&gt;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"Spring Boot ê²Œì‹œíŒ ë§Œë“¤ê¸° 1 - ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€","slug":"spring/sample-board/board-1-init","date":"2021-02-11T07:53:15.000Z","updated":"2024-02-26T15:46:07.674Z","comments":true,"path":"2021/02/11/spring/sample-board/board-1-init/","link":"","permalink":"https://ckck803.github.io/2021/02/11/spring/sample-board/board-1-init/","excerpt":"1. ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€ ë§Œë“¤ê¸°ê°„ë‹¨í•˜ê²Œ ê²Œì‹œê¸€ ì œëª©, ì‚¬ìš©ì ì´ë¦„, ê²Œì‹œê¸€ ë‚´ìš© ì„¸ê°€ì§€ë§Œ ì…ë ¥ ë°›ëŠ” í¼ì„ ë§Œë“¤ ê²ƒì´ë‹¤. ê²Œì‹œê¸€ ì‘ì„±í˜ì´ì§€ëŠ” Bootstrapì„ ì´ìš©í•´ ë§Œë“¤ê±´ë°, BootsWatchì˜ Cosmo navbarê°€ ë§ˆìŒì— ë“¤ì–´ ì´ê²ƒë„ ì‚¬ìš©í•  ê²ƒì´ë‹¤. ë¨¼ì €, Bootstrap ì‚¬ì´íŠ¸ì—ì„œ css, js, fontsë¥¼ ë‹¤ìš´ ë°›ê³  BootsWatchì‚¬ì´íŠ¸ Cosmo í˜ì´ì§€ì—ì„œ custom.min.cssì„ ë‹¤ìš´ ë°›ì€ í›„ springboot í”„ë¡œì íŠ¸ë‚´ì˜ resources/staticìœ„ì¹˜ì— í´ë”ë“¤ì€ ë„£ëŠ”ë‹¤. Bootstrap ì‚¬ì´íŠ¸ : https://getbootstrap.com/docs/4.6/getting-started/introduction/Bootswatch ì‚¬ì´íŠ¸ : https://bootswatch.com/","text":"1. ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€ ë§Œë“¤ê¸°ê°„ë‹¨í•˜ê²Œ ê²Œì‹œê¸€ ì œëª©, ì‚¬ìš©ì ì´ë¦„, ê²Œì‹œê¸€ ë‚´ìš© ì„¸ê°€ì§€ë§Œ ì…ë ¥ ë°›ëŠ” í¼ì„ ë§Œë“¤ ê²ƒì´ë‹¤. ê²Œì‹œê¸€ ì‘ì„±í˜ì´ì§€ëŠ” Bootstrapì„ ì´ìš©í•´ ë§Œë“¤ê±´ë°, BootsWatchì˜ Cosmo navbarê°€ ë§ˆìŒì— ë“¤ì–´ ì´ê²ƒë„ ì‚¬ìš©í•  ê²ƒì´ë‹¤. ë¨¼ì €, Bootstrap ì‚¬ì´íŠ¸ì—ì„œ css, js, fontsë¥¼ ë‹¤ìš´ ë°›ê³  BootsWatchì‚¬ì´íŠ¸ Cosmo í˜ì´ì§€ì—ì„œ custom.min.cssì„ ë‹¤ìš´ ë°›ì€ í›„ springboot í”„ë¡œì íŠ¸ë‚´ì˜ resources/staticìœ„ì¹˜ì— í´ë”ë“¤ì€ ë„£ëŠ”ë‹¤. Bootstrap ì‚¬ì´íŠ¸ : https://getbootstrap.com/docs/4.6/getting-started/introduction/Bootswatch ì‚¬ì´íŠ¸ : https://bootswatch.com/ Post í˜ì´ì§€&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;./css/bootstrap.css&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;./css/custom.min.css&quot;&gt; &lt;title&gt;ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€&lt;/title&gt;&lt;/head&gt;&lt;body class=&quot;bg-light&quot;&gt; &lt;nav class=&quot;navbar navbar-expand-lg navbar-dark bg-primary fixed-top&quot;&gt; &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;ê²Œì‹œíŒ&lt;/a&gt; &lt;/nav&gt; &lt;!-- &lt;div class=&quot;container bg-white&quot; style=&quot;padding: 20px; border-radius: 15px;&quot;&gt; --&gt; &lt;div class=&quot;card col-lg-6&quot; style=&quot;padding: 20px; border-radius: 15px; margin: 50px auto;&quot;&gt; &lt;form class=&quot; form-horizontal&quot; method=&quot;post&quot; onsubmit=&quot;return registerBoard(this)&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ì œëª©&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;ì œëª©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot; /&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ì´ë¦„&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot; /&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;ë‚´ìš©&lt;/label&gt; &lt;div class=&quot;col-sm-12&quot;&gt; &lt;textarea class=&quot;form-control&quot; style=&quot;height: 300px;&quot; placeholder=&quot;ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.&quot;&gt;&lt;/textarea&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;btn_wrap text-center&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-default waves-effect waves-light&quot;&gt;ë’¤ë¡œê°€ê¸°&lt;/a&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary waves-effect waves-light&quot;&gt;ì €ì¥í•˜ê¸°&lt;/button&gt; &lt;/div&gt; &lt;/form&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°ê²Œì‹œíŒ ë§Œë“¤ê¸° í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ Thymeleafë¼ëŠ” í…œí”Œë¦¿ ì—”ì§„ì„ ì‚¬ìš©í•  ê²ƒì´ê³ , ì´ 7ê°€ì§€ ì˜ì¡´ì„±ì„ ì‚¬ìš©í•  ê²ƒì´ë‹¤. JPA Thymeleaf Web Lombok Devtools H2 validation build.gradle dependencies &#123; implementation &#x27;org.springframework.boot:spring-boot-starter-data-jpa&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-thymeleaf&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-web&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-validation&#x27; compileOnly &#x27;org.projectlombok:lombok&#x27; developmentOnly &#x27;org.springframework.boot:spring-boot-devtools&#x27; runtimeOnly &#x27;com.h2database:h2&#x27; annotationProcessor &#x27;org.projectlombok:lombok&#x27; testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27;&#125; ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸°/postê²½ë¡œë¥¼ í†µí•´ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ê²Œì‹œê¸€ì„ ì‘ì„±í•˜ëŠ” í˜ì´ì§€ë¡œ ì´ë™ì‹œí‚¬ ì˜ˆì •ì´ë‹¤. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±/postê²½ë¡œë¡œ ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ ì •ìƒì ìœ¼ë¡œ controlì´ ì‘ë™í•˜ëŠ” ê²½ìš° ok(status code : 200)ì„ ë°˜í™˜í•œë‹¤. @WebMvcTestclass PostControllerTest &#123; @Autowired MockMvc mockMvc; @Test @DisplayName(&quot;ê²Œì‹œê¸€ ì‘ì„±í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.&quot;) public void movePost() throws Exception&#123; ResultActions resultActions = mockMvc.perform(get(&quot;/post&quot;)); resultActions .andExpect(status().isOk()) .andDo(print()); &#125;&#125; control êµ¬í˜„/postê²½ë¡œë¡œ ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ post.htmlì„ ë°˜í™˜í•´ ì‚¬ìš©ìì—ê²Œ ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤. @Controllerpublic class PostController &#123; @GetMapping(&quot;/post&quot;) public String post()&#123; return &quot;post&quot;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"}],"tags":[]},{"title":"JPA ë€?","slug":"jpa/jpa","date":"2021-02-09T19:31:46.000Z","updated":"2024-11-28T13:59:26.188Z","comments":true,"path":"2021/02/10/jpa/jpa/","link":"","permalink":"https://ckck803.github.io/2021/02/10/jpa/jpa/","excerpt":"JPA ë€?ê°ì²´ë¥¼ ì´ìš©í•´ DataBase í…Œì´ë¸”ì„ ë‹¤ë£¨ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ORM(Object Relation Mapping) ê¸°ìˆ ","text":"JPA ë€?ê°ì²´ë¥¼ ì´ìš©í•´ DataBase í…Œì´ë¸”ì„ ë‹¤ë£¨ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ORM(Object Relation Mapping) ê¸°ìˆ ","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"}],"tags":[{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"}]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 14 - í…Œì´ë¸” ì˜ˆì•½","slug":"spring/fastcampus-eatgo/eat-go14-table-reservation","date":"2021-02-07T09:46:44.000Z","updated":"2024-02-26T15:43:39.180Z","comments":true,"path":"2021/02/07/spring/fastcampus-eatgo/eat-go14-table-reservation/","link":"","permalink":"https://ckck803.github.io/2021/02/07/spring/fastcampus-eatgo/eat-go14-table-reservation/","excerpt":"íŒ¨ìŠ¤íŠ¸ ìº í¼ìŠ¤ì—ì„œ @RestController@RequiredArgsConstructorpublic class ReservationController &#123; private final ReservationService reservationService; @GetMapping(&quot;/reservations&quot;) public List&lt;Reservation&gt; list(Authentication authentication)&#123; Claims claims = (Claims) authentication.getPrincipal(); Long restaurantId = claims.get(&quot;restaurantId&quot;, Long.class);// Long restaurantId = 1004L; List&lt;Reservation&gt; reservations = reservationService.getReservations(restaurantId); return reservations; &#125;&#125; @WebMvcTest(ReservationController.class)class ReservationControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private ReservationService reservationService; @Test @DisplayName(&quot;ì˜ˆì•½ëª©ë¡ì„ ê°€ì ¸ì˜¨ë‹¤.&quot;) public void list() throws Exception &#123; String token = &quot;eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEwMDQsIm5hbWUiOiJPd25lciIsInJlc3RhdXJhbnRJZCI6MTAwNH0.cQTXhzTW48F5Nj3eXa80Y9J4OJryzFvoHtT8ELl4kTw&quot;; ResultActions resultActions = mockMvc.perform(get(&quot;/reservations&quot;) .header(&quot;Authorization&quot;, &quot;Bearer &quot; + token)); resultActions .andExpect(status().isOk()); verify(reservationService).getReservations(1004L); &#125;&#125; @Service@RequiredArgsConstructorpublic class ReservationService &#123; private final ReservationRepository reservationRepository; public List&lt;Reservation&gt; getReservations(Long restaurantId) &#123; return reservationRepository.findAllByRestaurantId(restaurantId); &#125;&#125; class ReservationServiceTest &#123; @Mock private ReservationRepository reservationRepository; private ReservationService reservationService; @BeforeEach public void setUp()&#123; MockitoAnnotations.openMocks(this); this.reservationService = new ReservationService(reservationRepository); &#125; @Test @DisplayName(&quot;ì˜ˆì•½ëª©ë¡ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤.&quot;) public void getReservation()&#123; Long restaurantId = 1004L; List&lt;Reservation&gt; reservations = reservationService.getReservations(restaurantId); verify(reservationRepository).findAllByRestaurantId(restaurantId); &#125;&#125; public class JwtAuthenticationFilter extends BasicAuthenticationFilter &#123; private final JwtUtil jwtUtil; public JwtAuthenticationFilter(AuthenticationManager authenticationManager, JwtUtil jwtUtil) &#123; super(authenticationManager); this.jwtUtil = jwtUtil; &#125; @Override protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; Authentication authentication = getAuthentication(request); if(authentication != null)&#123; SecurityContext context = SecurityContextHolder.getContext(); context.setAuthentication(authentication); &#125; chain.doFilter(request, response); &#125; private Authentication getAuthentication(HttpServletRequest request)&#123; // Headerì—ì„œ Dataë¥¼ ì–»ì–´ì•¼ í•œë‹¤. String token = request.getHeader(&quot;Authorization&quot;); if(token == null)&#123; return null; &#125; Claims claims = jwtUtil.getClaims(token.substring(&quot;Bearer &quot;.length())); Authentication authentication = new UsernamePasswordAuthenticationToken(claims, null); return authentication; &#125;&#125; @Configuration@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Value(&quot;$&#123;jwt.secret&#125;&quot;) private String secret; @Override protected void configure(HttpSecurity http) throws Exception &#123; Filter filter = new JwtAuthenticationFilter(authenticationManager(), jwtUtil()); http .cors().disable() .csrf().disable() .formLogin().disable() .headers().frameOptions().disable(); http .addFilter(filter) .sessionManagement() // Sessionì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ .sessionCreationPolicy(SessionCreationPolicy.STATELESS); &#125; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125; @Bean public JwtUtil jwtUtil()&#123; return new JwtUtil(secret); &#125;&#125;","text":"íŒ¨ìŠ¤íŠ¸ ìº í¼ìŠ¤ì—ì„œ @RestController@RequiredArgsConstructorpublic class ReservationController &#123; private final ReservationService reservationService; @GetMapping(&quot;/reservations&quot;) public List&lt;Reservation&gt; list(Authentication authentication)&#123; Claims claims = (Claims) authentication.getPrincipal(); Long restaurantId = claims.get(&quot;restaurantId&quot;, Long.class);// Long restaurantId = 1004L; List&lt;Reservation&gt; reservations = reservationService.getReservations(restaurantId); return reservations; &#125;&#125; @WebMvcTest(ReservationController.class)class ReservationControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private ReservationService reservationService; @Test @DisplayName(&quot;ì˜ˆì•½ëª©ë¡ì„ ê°€ì ¸ì˜¨ë‹¤.&quot;) public void list() throws Exception &#123; String token = &quot;eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEwMDQsIm5hbWUiOiJPd25lciIsInJlc3RhdXJhbnRJZCI6MTAwNH0.cQTXhzTW48F5Nj3eXa80Y9J4OJryzFvoHtT8ELl4kTw&quot;; ResultActions resultActions = mockMvc.perform(get(&quot;/reservations&quot;) .header(&quot;Authorization&quot;, &quot;Bearer &quot; + token)); resultActions .andExpect(status().isOk()); verify(reservationService).getReservations(1004L); &#125;&#125; @Service@RequiredArgsConstructorpublic class ReservationService &#123; private final ReservationRepository reservationRepository; public List&lt;Reservation&gt; getReservations(Long restaurantId) &#123; return reservationRepository.findAllByRestaurantId(restaurantId); &#125;&#125; class ReservationServiceTest &#123; @Mock private ReservationRepository reservationRepository; private ReservationService reservationService; @BeforeEach public void setUp()&#123; MockitoAnnotations.openMocks(this); this.reservationService = new ReservationService(reservationRepository); &#125; @Test @DisplayName(&quot;ì˜ˆì•½ëª©ë¡ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤.&quot;) public void getReservation()&#123; Long restaurantId = 1004L; List&lt;Reservation&gt; reservations = reservationService.getReservations(restaurantId); verify(reservationRepository).findAllByRestaurantId(restaurantId); &#125;&#125; public class JwtAuthenticationFilter extends BasicAuthenticationFilter &#123; private final JwtUtil jwtUtil; public JwtAuthenticationFilter(AuthenticationManager authenticationManager, JwtUtil jwtUtil) &#123; super(authenticationManager); this.jwtUtil = jwtUtil; &#125; @Override protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; Authentication authentication = getAuthentication(request); if(authentication != null)&#123; SecurityContext context = SecurityContextHolder.getContext(); context.setAuthentication(authentication); &#125; chain.doFilter(request, response); &#125; private Authentication getAuthentication(HttpServletRequest request)&#123; // Headerì—ì„œ Dataë¥¼ ì–»ì–´ì•¼ í•œë‹¤. String token = request.getHeader(&quot;Authorization&quot;); if(token == null)&#123; return null; &#125; Claims claims = jwtUtil.getClaims(token.substring(&quot;Bearer &quot;.length())); Authentication authentication = new UsernamePasswordAuthenticationToken(claims, null); return authentication; &#125;&#125; @Configuration@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Value(&quot;$&#123;jwt.secret&#125;&quot;) private String secret; @Override protected void configure(HttpSecurity http) throws Exception &#123; Filter filter = new JwtAuthenticationFilter(authenticationManager(), jwtUtil()); http .cors().disable() .csrf().disable() .formLogin().disable() .headers().frameOptions().disable(); http .addFilter(filter) .sessionManagement() // Sessionì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ .sessionCreationPolicy(SessionCreationPolicy.STATELESS); &#125; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125; @Bean public JwtUtil jwtUtil()&#123; return new JwtUtil(secret); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 13 - ì¸ê°€","slug":"spring/fastcampus-eatgo/eat-go13-authorization","date":"2021-02-07T03:53:14.000Z","updated":"2024-02-26T15:43:34.136Z","comments":true,"path":"2021/02/07/spring/fastcampus-eatgo/eat-go13-authorization/","link":"","permalink":"https://ckck803.github.io/2021/02/07/spring/fastcampus-eatgo/eat-go13-authorization/","excerpt":"JWTë¡œë¶€í„° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°public class JwtUtil &#123; private Key key; public JwtUtil(String secret) &#123; this.key = Keys.hmacShaKeyFor(secret.getBytes()); &#125; public String createToken(Long userId, String name) &#123; String token = Jwts.builder() .claim(&quot;userId&quot;, 1004L) .claim(&quot;name&quot;, name) .signWith(key, SignatureAlgorithm.HS256) .compact(); return token; &#125; public Claims getClaims(String token)&#123; Claims claims = Jwts.parserBuilder() .setSigningKey(key) .build() .parseClaimsJws(token) .getBody(); return claims; &#125;&#125; @Test@DisplayName(&quot;Claimsë¥¼ ê°€ì ¸ì˜¨ë‹¤.&quot;)public void getClaims()&#123; String token = &quot;eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEwMDQsIm5hbWUiOiJUZXN0ZXIifQ.I4DNdunio2m54tfUEaXHC_E-gvCQo6ZhHO15Ewkat6U&quot;; Claims claims = jwtUtil.getClaims(token); assertThat(claims.get(&quot;userId&quot;, Long.class)).isEqualTo(1004L); assertThat(claims.get(&quot;name&quot;)).isEqualTo(&quot;Tester&quot;);&#125; JWTFilterì¶”ê°€@Configuration@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Value(&quot;$&#123;jwt.secret&#125;&quot;) private String secret; @Override protected void configure(HttpSecurity http) throws Exception &#123; Filter filter = new JwtAuthenticationFilter(authenticationManager(), jwtUtil()); http .cors().disable() .csrf().disable() .formLogin().disable() .headers().frameOptions().disable(); http .addFilter(filter) .sessionManagement() // Sessionì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ .sessionCreationPolicy(SessionCreationPolicy.STATELESS); ; &#125; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125; @Bean public JwtUtil jwtUtil()&#123; return new JwtUtil(secret); &#125;&#125; JWT ì¸ì¦ Filterpublic class JwtAuthenticationFilter extends BasicAuthenticationFilter &#123; private JwtUtil jwtUtil; public JwtAuthenticationFilter(AuthenticationManager authenticationManager, JwtUtil jwtUtil) &#123; super(authenticationManager); this.jwtUtil = jwtUtil; &#125; @Override protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; Authentication authentication = getAuthentication(request); if(authentication != null)&#123; SecurityContext context = SecurityContextHolder.getContext(); context.setAuthentication(authentication); &#125; chain.doFilter(request, response); &#125; private Authentication getAuthentication(HttpServletRequest request)&#123; // Headerì—ì„œ Dataë¥¼ ì–»ì–´ì•¼ í•œë‹¤. String token = request.getHeader(&quot;Authorization&quot;); if(token == null)&#123; return null; &#125; Claims claims = jwtUtil.getClaims(token.substring(&quot;Bearer &quot;.length())); Authentication authentication = new UsernamePasswordAuthenticationToken(claims, null); return authentication; &#125;&#125; ìš”ì²­ì‹œ Tokenê°’ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸@RestController@RequiredArgsConstructorpublic class ReviewController &#123; private final ReviewService reviewService; @PostMapping(&quot;/restaurants/&#123;restaurantId&#125;/reviews&quot;) public ResponseEntity&lt;?&gt; create( Authentication authentication, @PathVariable Long restaurantId, @Valid @RequestBody Review resource ) throws URISyntaxException &#123; Claims claims = (Claims) authentication.getPrincipal(); String name = claims.get(&quot;name&quot;, String.class); Review review = reviewService.addReview(restaurantId, resource); String url = &quot;/restaurants/&quot; + restaurantId + &quot;/reviews/&quot; + review.getId(); return ResponseEntity.created(new URI (url)).body(&quot;&#123;&#125;&quot;); &#125;&#125;","text":"JWTë¡œë¶€í„° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°public class JwtUtil &#123; private Key key; public JwtUtil(String secret) &#123; this.key = Keys.hmacShaKeyFor(secret.getBytes()); &#125; public String createToken(Long userId, String name) &#123; String token = Jwts.builder() .claim(&quot;userId&quot;, 1004L) .claim(&quot;name&quot;, name) .signWith(key, SignatureAlgorithm.HS256) .compact(); return token; &#125; public Claims getClaims(String token)&#123; Claims claims = Jwts.parserBuilder() .setSigningKey(key) .build() .parseClaimsJws(token) .getBody(); return claims; &#125;&#125; @Test@DisplayName(&quot;Claimsë¥¼ ê°€ì ¸ì˜¨ë‹¤.&quot;)public void getClaims()&#123; String token = &quot;eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEwMDQsIm5hbWUiOiJUZXN0ZXIifQ.I4DNdunio2m54tfUEaXHC_E-gvCQo6ZhHO15Ewkat6U&quot;; Claims claims = jwtUtil.getClaims(token); assertThat(claims.get(&quot;userId&quot;, Long.class)).isEqualTo(1004L); assertThat(claims.get(&quot;name&quot;)).isEqualTo(&quot;Tester&quot;);&#125; JWTFilterì¶”ê°€@Configuration@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Value(&quot;$&#123;jwt.secret&#125;&quot;) private String secret; @Override protected void configure(HttpSecurity http) throws Exception &#123; Filter filter = new JwtAuthenticationFilter(authenticationManager(), jwtUtil()); http .cors().disable() .csrf().disable() .formLogin().disable() .headers().frameOptions().disable(); http .addFilter(filter) .sessionManagement() // Sessionì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ .sessionCreationPolicy(SessionCreationPolicy.STATELESS); ; &#125; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125; @Bean public JwtUtil jwtUtil()&#123; return new JwtUtil(secret); &#125;&#125; JWT ì¸ì¦ Filterpublic class JwtAuthenticationFilter extends BasicAuthenticationFilter &#123; private JwtUtil jwtUtil; public JwtAuthenticationFilter(AuthenticationManager authenticationManager, JwtUtil jwtUtil) &#123; super(authenticationManager); this.jwtUtil = jwtUtil; &#125; @Override protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; Authentication authentication = getAuthentication(request); if(authentication != null)&#123; SecurityContext context = SecurityContextHolder.getContext(); context.setAuthentication(authentication); &#125; chain.doFilter(request, response); &#125; private Authentication getAuthentication(HttpServletRequest request)&#123; // Headerì—ì„œ Dataë¥¼ ì–»ì–´ì•¼ í•œë‹¤. String token = request.getHeader(&quot;Authorization&quot;); if(token == null)&#123; return null; &#125; Claims claims = jwtUtil.getClaims(token.substring(&quot;Bearer &quot;.length())); Authentication authentication = new UsernamePasswordAuthenticationToken(claims, null); return authentication; &#125;&#125; ìš”ì²­ì‹œ Tokenê°’ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸@RestController@RequiredArgsConstructorpublic class ReviewController &#123; private final ReviewService reviewService; @PostMapping(&quot;/restaurants/&#123;restaurantId&#125;/reviews&quot;) public ResponseEntity&lt;?&gt; create( Authentication authentication, @PathVariable Long restaurantId, @Valid @RequestBody Review resource ) throws URISyntaxException &#123; Claims claims = (Claims) authentication.getPrincipal(); String name = claims.get(&quot;name&quot;, String.class); Review review = reviewService.addReview(restaurantId, resource); String url = &quot;/restaurants/&quot; + restaurantId + &quot;/reviews/&quot; + review.getId(); return ResponseEntity.created(new URI (url)).body(&quot;&#123;&#125;&quot;); &#125;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void ë¦¬ë·°ë¥¼_ìƒì„±í•œë‹¤() throws Exception &#123; String token = &quot;eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEwMDQsIm5hbWUiOiJUZXN0ZXIifQ.I4DNdunio2m54tfUEaXHC_E-gvCQo6ZhHO15Ewkat6U&quot;; given(reviewService.addReview(eq(1L), any())).willReturn( Review.builder() .id(1004L) .name(&quot;JOKER&quot;) .score(3) .description(&quot;Mat-it-da&quot;) .build()); mockMvc.perform(post(&quot;/restaurants/1/reviews&quot;) .header(&quot;Authorization&quot;, &quot;Bearer &quot; + token) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;name\\&quot;:\\&quot;JOKER\\&quot;, \\&quot;score\\&quot;:3,\\&quot;description\\&quot; : \\&quot;Mat-it-da\\&quot;&#125;&quot;)) .andExpect(status().isCreated()) .andExpect(header().string(&quot;location&quot;, &quot;/restaurants/1/reviews/1004&quot;)); verify(reviewService).addReview(eq(1L), any());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 12 - JWT","slug":"spring/fastcampus-eatgo/eat-go12-jwt","date":"2021-02-06T16:03:35.000Z","updated":"2024-02-26T15:43:29.669Z","comments":true,"path":"2021/02/07/spring/fastcampus-eatgo/eat-go12-jwt/","link":"","permalink":"https://ckck803.github.io/2021/02/07/spring/fastcampus-eatgo/eat-go12-jwt/","excerpt":"JWTë¥¼ ì´ìš©í•´ AccesTokenê´€ë¦¬í•˜ê¸°JwtUtil í´ë˜ìŠ¤ì—ì„œëŠ” JWTë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ createTokenë©”ì„œë“œê°€ ì¡´ì¬í•œë‹¤. JWTì—ëŠ” userIdì™€ nameì„ ë„£ì„ ê²ƒì´ê³  HMAC-SHA256 í•´ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ í† í°ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•  ê²ƒì´ë‹¤. public class JwtUtil &#123; private String secret; public JwtUtil(String secret) &#123; this.secret = secret; &#125; public String createToken(Long userId, String name) &#123; Key key = Keys.hmacShaKeyFor(secret.getBytes()); String token = Jwts.builder() .claim(&quot;userId&quot;, 1004L) .claim(&quot;name&quot;, name) .signWith(key, SignatureAlgorithm.HS256) .compact(); return token; &#125;&#125; JWTê°€ ì˜¬ë°”ë¥´ê²Œ ìƒì„±ëëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œclass JwtUtilTest &#123; @Test public void createToken()&#123; String secret = &quot;12345678901234567890123456789012&quot;; JwtUtil jwtUtil = new JwtUtil(secret); String token = jwtUtil.createToken(1004L, &quot;&quot;); assertThat(token).contains(&quot;.&quot;); &#125;&#125; JwtUtilì„ Beanìœ¼ë¡œ ë“±ë¡@Configuration@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; // application.ymlì— ì •ì˜ëœ JWT Secretê°’ì„ ê°€ì ¸ì˜¨ë‹¤. @Value(&quot;$&#123;jwt.secret&#125;&quot;) private String secret; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .cors().disable() .csrf().disable() .formLogin().disable() .headers().frameOptions().disable(); &#125; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125; @Bean public JwtUtil jwtUtil()&#123; return new JwtUtil(secret); &#125;&#125; ì‚¬ìš©ì ìš”ì²­ ê²°ê³¼ë¡œ JWTë°˜í™˜í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„/session ê²½ë¡œë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ë°›ìœ¼ë©´ ìš°ì„  ì‚¬ìš©ì ìœ íš¨ì„±ì„ í™•ì¸í•œ ë’¤, ë“±ë¡ëœ ì‚¬ìš©ìì¸ ê²½ìš° ì‚¬ìš©ì ì •ë³´ë¥¼ JWTì— ì¼ë¶€ ë‹´ì•„ Response Bodyì— ë„£ì–´ ì‚¬ìš©ìì—ê²Œ ë°˜í™˜í•œë‹¤.","text":"JWTë¥¼ ì´ìš©í•´ AccesTokenê´€ë¦¬í•˜ê¸°JwtUtil í´ë˜ìŠ¤ì—ì„œëŠ” JWTë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ createTokenë©”ì„œë“œê°€ ì¡´ì¬í•œë‹¤. JWTì—ëŠ” userIdì™€ nameì„ ë„£ì„ ê²ƒì´ê³  HMAC-SHA256 í•´ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ í† í°ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•  ê²ƒì´ë‹¤. public class JwtUtil &#123; private String secret; public JwtUtil(String secret) &#123; this.secret = secret; &#125; public String createToken(Long userId, String name) &#123; Key key = Keys.hmacShaKeyFor(secret.getBytes()); String token = Jwts.builder() .claim(&quot;userId&quot;, 1004L) .claim(&quot;name&quot;, name) .signWith(key, SignatureAlgorithm.HS256) .compact(); return token; &#125;&#125; JWTê°€ ì˜¬ë°”ë¥´ê²Œ ìƒì„±ëëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œclass JwtUtilTest &#123; @Test public void createToken()&#123; String secret = &quot;12345678901234567890123456789012&quot;; JwtUtil jwtUtil = new JwtUtil(secret); String token = jwtUtil.createToken(1004L, &quot;&quot;); assertThat(token).contains(&quot;.&quot;); &#125;&#125; JwtUtilì„ Beanìœ¼ë¡œ ë“±ë¡@Configuration@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; // application.ymlì— ì •ì˜ëœ JWT Secretê°’ì„ ê°€ì ¸ì˜¨ë‹¤. @Value(&quot;$&#123;jwt.secret&#125;&quot;) private String secret; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .cors().disable() .csrf().disable() .formLogin().disable() .headers().frameOptions().disable(); &#125; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125; @Bean public JwtUtil jwtUtil()&#123; return new JwtUtil(secret); &#125;&#125; ì‚¬ìš©ì ìš”ì²­ ê²°ê³¼ë¡œ JWTë°˜í™˜í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„/session ê²½ë¡œë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ë°›ìœ¼ë©´ ìš°ì„  ì‚¬ìš©ì ìœ íš¨ì„±ì„ í™•ì¸í•œ ë’¤, ë“±ë¡ëœ ì‚¬ìš©ìì¸ ê²½ìš° ì‚¬ìš©ì ì •ë³´ë¥¼ JWTì— ì¼ë¶€ ë‹´ì•„ Response Bodyì— ë„£ì–´ ì‚¬ìš©ìì—ê²Œ ë°˜í™˜í•œë‹¤. @PostMapping(&quot;/session&quot;)public ResponseEntity&lt;SessionResponseDto&gt; create(@RequestBody SessionRequestDto resource)&#123; String email = resource.getEmail(); String password = resource.getPassword(); User user = userService.authenticate(email, password); String url = &quot;/session&quot;; String accessToken = jwtUtil.createToken(user.getId(), user.getName()); SessionResponseDto sessionResponseDto = SessionResponseDto.builder() .accessToken(accessToken) .build(); return ResponseEntity.created(URI.create(url)).body(sessionResponseDto);&#125; ì‚¬ìš©ì ìš”ì²­ì— JWTë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Autowiredprivate ObjectMapper objectMapper;...@MockBeanprivate JwtUtil jwtUtil;@Test@DisplayName(&quot;AccessTokenì„ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.&quot;)public void create() throws Exception &#123; Long id = 1004L; String email = &quot;tester@example.com&quot;; String password = &quot;test&quot;; String name = &quot;Tester&quot;; User mockUser = User.builder() .id(id) .email(email) .name(name) .password(password) .level(3L) .build(); String content = objectMapper.writeValueAsString(mockUser); given(userService.authenticate(email, password)).willReturn(mockUser); given(jwtUtil.createToken(id, name)).willReturn(&quot;header.payload.signature&quot;); ResultActions resultActions = mockMvc.perform(post(&quot;/session&quot;) .contentType(MediaType.APPLICATION_JSON)// .content(&quot;&#123;\\&quot;email\\&quot;:\\&quot;tester@example.com\\&quot;,\\&quot;password\\&quot;:\\&quot;test\\&quot;&#125;&quot;) .content(content) ); resultActions .andExpect(status().isCreated()) .andExpect(header().string(&quot;location&quot;, &quot;/session&quot;)) // AccessTokenì„ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. .andExpect(content().string(containsString(&quot;&#123;\\&quot;accessToken\\&quot;:\\&quot;header.payload.signature\\&quot;&#125;&quot;))); verify(userService).authenticate(eq(email), eq(password));&#125; @Test@DisplayName(&quot;ì‚¬ìš©ìë¥¼ ìƒì„±í•œë‹¤.&quot;)public void create() throws Exception &#123; String email = &quot;tester@example.com&quot;; String name = &quot;Tester&quot;; String password = &quot;test&quot;; User mockUser = User.builder() .id(1004L) .email(email) .password(password) .name(name) .build(); given(userService.registerUser(email, name, password)) .willReturn(mockUser); ResultActions resultActions = mockMvc.perform(post(&quot;/users&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot; : \\&quot;tester@example.com\\&quot;, \\&quot;name\\&quot; : \\&quot;Tester\\&quot;, \\&quot;password\\&quot; : \\&quot;test\\&quot;&#125;&quot;)); resultActions .andExpect(status().isCreated()) .andExpect(header().string(&quot;location&quot;, &quot;/users/1004&quot;)); verify(userService).registerUser(any(), any(), any());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 11 - ì¸ì¦","slug":"spring/fastcampus-eatgo/eat-go11-authentication","date":"2021-02-06T10:17:28.000Z","updated":"2024-02-26T15:43:25.098Z","comments":true,"path":"2021/02/06/spring/fastcampus-eatgo/eat-go11-authentication/","link":"","permalink":"https://ckck803.github.io/2021/02/06/spring/fastcampus-eatgo/eat-go11-authentication/","excerpt":"AccessTokenì„ ì´ìš©í•œ ì¸ì¦@RestController@RequiredArgsConstructorpublic class SessionController &#123; private final UserService userService; @PostMapping(&quot;/session&quot;) public ResponseEntity&lt;SessionResponseDto&gt; create(@RequestBody SessionRequestDto resource)&#123; String email = resource.getEmail(); String password = resource.getPassword(); User user = userService.authenticate(email, password); String url = &quot;/session&quot;; String accessToken = user.getAccessToken(); SessionResponseDto sessionResponseDto = SessionResponseDto.builder() .accessToken(accessToken) .build(); return ResponseEntity.created(URI.create(url)).body(sessionResponseDto); &#125;&#125; @WebMvcTest(SessionController.class)class SessionControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private UserService userService; @Test @DisplayName(&quot;AccessTokenì„ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.&quot;) public void create() throws Exception &#123; String email = &quot;tester@example.com&quot;; String password = &quot;test&quot;; User mockUser = User.builder().password(&quot;ACCESSTOKEN&quot;).build(); given(userService.authenticate(email, password)).willReturn(mockUser); ResultActions resultActions = mockMvc.perform(post(&quot;/session&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot;:\\&quot;tester@example.com\\&quot;,\\&quot;password\\&quot;:\\&quot;test\\&quot;&#125;&quot;)); resultActions .andExpect(status().isCreated()) .andExpect(header().string(&quot;location&quot;, &quot;/session&quot;)) // AccessTokenì„ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. .andExpect(content().string(&quot;&#123;\\&quot;accessToken\\&quot;:\\&quot;ACCESSTOKE\\&quot;&#125;&quot;)); verify(userService).authenticate(eq(email), eq(password)); &#125; @Test @DisplayName(&quot;ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ì„ ì´ìš©í•œ ìš”ì²­ì„ ì‹œë„&quot;) public void createWithNotExistedEmail() throws Exception &#123; String email = &quot;x@example.com&quot;; String password = &quot;test&quot;; given(userService.authenticate(email, password)).willThrow(EmailNotExistedException.class); ResultActions resultActions = mockMvc.perform(post(&quot;/session&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot;:\\&quot;x@example.com\\&quot;,\\&quot;password\\&quot;:\\&quot;test\\&quot;&#125;&quot;)); resultActions .andExpect(status().isBadRequest()); verify(userService).authenticate(eq(email), eq(password)); &#125; @Test @DisplayName(&quot;ì˜¬ë°”ë¥´ì§€ ì•Šì€ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì´ìš©í•œ ìš”ì²­ì„ ì‹œë„&quot;) public void createWithInvalidAttributes() throws Exception &#123; String email = &quot;tester@example.com&quot;; String password = &quot;x&quot;; given(userService.authenticate(email, password)).willThrow(PasswordWrongException.class); ResultActions resultActions = mockMvc.perform(post(&quot;/session&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot;:\\&quot;tester@example.com\\&quot;,\\&quot;password\\&quot;:\\&quot;x\\&quot;&#125;&quot;)); resultActions .andExpect(status().isBadRequest()); verify(userService).authenticate(eq(email), eq(password)); &#125;&#125; public class EmailNotExistedException extends RuntimeException&#123; public EmailNotExistedException()&#123; super(&quot;Email is Not registered&quot;); &#125;&#125; public class PasswordWrongException extends RuntimeException&#123; public PasswordWrongException()&#123; super(&quot;Password is Wrong&quot;); &#125;&#125; @ControllerAdvicepublic class SessionErrorAdvice &#123; @ResponseBody @ResponseStatus(HttpStatus.BAD_REQUEST) @ExceptionHandler(PasswordWrongException.class) public String handlePasswordWrong()&#123; return &quot;&#123;&#125;&quot;; &#125; @ResponseBody @ResponseStatus(HttpStatus.BAD_REQUEST) @ExceptionHandler(EmailNotExistedException.class) public String handleEmailNotExisted()&#123; return &quot;&#123;&#125;&quot;; &#125;&#125; @Service@RequiredArgsConstructorpublic class UserService &#123; private final UserRepository userRepository; private final PasswordEncoder passwordEncoder; public User registerUser(String email, String name, String password) &#123; // íšŒì›ì´ ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ Emailì„ í†µí•´ ìœ íš¨ì„± ê²€ì‚¬ Optional&lt;User&gt; optional = userRepository.findByEmail(email); // íšŒì›ì´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ìš° ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•œë‹¤. if(optional.isPresent())&#123; throw new EmailExistedException(email); &#125;// // íŒ¨ìŠ¤ì›Œë“œë¥¼ ì•”í˜¸í™”í•´ì„œ ì €ì¥í•œë‹¤.// // ì•”í˜¸í™” ë°©ì‹ì€ BCryptë°©ì‹ì„ ì´ìš©í•´ ì•”í˜¸í™”ë¥¼ ì§„í–‰// BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder(); String encodedPassword = passwordEncoder.encode(password); User user = User.builder() .email(email) .name(name) .password(encodedPassword) .level(1L) .build(); userRepository.save(user); return user; &#125; public User authenticate(String email, String password) &#123; User user = userRepository.findByEmail(email) .orElseThrow(() -&gt; new EmailNotExistedException()); String encodedPassword = passwordEncoder.encode(password); if(!passwordEncoder.matches(password, user.getPassword()))&#123; throw new PasswordWrongException(); &#125; return user; &#125;&#125; @Test@DisplayName(&quot;ì˜¬ë°”ë¥¸ íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•´ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•œë‹¤.&quot;)public void authenticateWithValidAttributes()&#123; String email = &quot;test@example.com&quot;; String name = &quot;Tester&quot;; String password = &quot;test&quot;; User mockUser = User.builder() .Id(1004L) .email(email) .name(name) .password(password) .build(); given(userRepository.findByEmail(email)).willReturn(Optional.of(mockUser)); given(passwordEncoder.matches(any(), any())).willReturn(true); User user = userService.authenticate(email, password); assertThat(user.getEmail()).isEqualTo(email);&#125;@Test@DisplayName(&quot;ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ì„ ì´ìš©í•´ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•œë‹¤.&quot;)public void authenticateNotValidEmail()&#123; String email = &quot;x@example.com&quot;; String password = &quot;test&quot;; given(userRepository.findByEmail(email)).willThrow(EmailNotExistedException.class); assertThatThrownBy(()-&gt;&#123; User user = userService.authenticate(email, password); &#125;).isInstanceOf(EmailNotExistedException.class);&#125;@Test@DisplayName(&quot;ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ì„ ì´ìš©í•´ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•œë‹¤.&quot;)public void authenticateNotValidPassword()&#123; String email = &quot;test@example.com&quot;; String name = &quot;Tester&quot;; String password = &quot;x&quot;; User mockUser = User.builder() .Id(1004L) .email(email) .name(name) .password(password) .build(); given(userRepository.findByEmail(email)).willReturn(Optional.of(mockUser)); given(passwordEncoder.matches(password, mockUser.getPassword())).willReturn(false); assertThatThrownBy(()-&gt;&#123; User user = userService.authenticate(email, password); &#125;).isInstanceOf(PasswordWrongException.class);&#125; @Configuration@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .cors().disable() .csrf().disable() .formLogin().disable() .headers().frameOptions().disable(); &#125; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125;&#125;","text":"AccessTokenì„ ì´ìš©í•œ ì¸ì¦@RestController@RequiredArgsConstructorpublic class SessionController &#123; private final UserService userService; @PostMapping(&quot;/session&quot;) public ResponseEntity&lt;SessionResponseDto&gt; create(@RequestBody SessionRequestDto resource)&#123; String email = resource.getEmail(); String password = resource.getPassword(); User user = userService.authenticate(email, password); String url = &quot;/session&quot;; String accessToken = user.getAccessToken(); SessionResponseDto sessionResponseDto = SessionResponseDto.builder() .accessToken(accessToken) .build(); return ResponseEntity.created(URI.create(url)).body(sessionResponseDto); &#125;&#125; @WebMvcTest(SessionController.class)class SessionControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private UserService userService; @Test @DisplayName(&quot;AccessTokenì„ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.&quot;) public void create() throws Exception &#123; String email = &quot;tester@example.com&quot;; String password = &quot;test&quot;; User mockUser = User.builder().password(&quot;ACCESSTOKEN&quot;).build(); given(userService.authenticate(email, password)).willReturn(mockUser); ResultActions resultActions = mockMvc.perform(post(&quot;/session&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot;:\\&quot;tester@example.com\\&quot;,\\&quot;password\\&quot;:\\&quot;test\\&quot;&#125;&quot;)); resultActions .andExpect(status().isCreated()) .andExpect(header().string(&quot;location&quot;, &quot;/session&quot;)) // AccessTokenì„ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. .andExpect(content().string(&quot;&#123;\\&quot;accessToken\\&quot;:\\&quot;ACCESSTOKE\\&quot;&#125;&quot;)); verify(userService).authenticate(eq(email), eq(password)); &#125; @Test @DisplayName(&quot;ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ì„ ì´ìš©í•œ ìš”ì²­ì„ ì‹œë„&quot;) public void createWithNotExistedEmail() throws Exception &#123; String email = &quot;x@example.com&quot;; String password = &quot;test&quot;; given(userService.authenticate(email, password)).willThrow(EmailNotExistedException.class); ResultActions resultActions = mockMvc.perform(post(&quot;/session&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot;:\\&quot;x@example.com\\&quot;,\\&quot;password\\&quot;:\\&quot;test\\&quot;&#125;&quot;)); resultActions .andExpect(status().isBadRequest()); verify(userService).authenticate(eq(email), eq(password)); &#125; @Test @DisplayName(&quot;ì˜¬ë°”ë¥´ì§€ ì•Šì€ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì´ìš©í•œ ìš”ì²­ì„ ì‹œë„&quot;) public void createWithInvalidAttributes() throws Exception &#123; String email = &quot;tester@example.com&quot;; String password = &quot;x&quot;; given(userService.authenticate(email, password)).willThrow(PasswordWrongException.class); ResultActions resultActions = mockMvc.perform(post(&quot;/session&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot;:\\&quot;tester@example.com\\&quot;,\\&quot;password\\&quot;:\\&quot;x\\&quot;&#125;&quot;)); resultActions .andExpect(status().isBadRequest()); verify(userService).authenticate(eq(email), eq(password)); &#125;&#125; public class EmailNotExistedException extends RuntimeException&#123; public EmailNotExistedException()&#123; super(&quot;Email is Not registered&quot;); &#125;&#125; public class PasswordWrongException extends RuntimeException&#123; public PasswordWrongException()&#123; super(&quot;Password is Wrong&quot;); &#125;&#125; @ControllerAdvicepublic class SessionErrorAdvice &#123; @ResponseBody @ResponseStatus(HttpStatus.BAD_REQUEST) @ExceptionHandler(PasswordWrongException.class) public String handlePasswordWrong()&#123; return &quot;&#123;&#125;&quot;; &#125; @ResponseBody @ResponseStatus(HttpStatus.BAD_REQUEST) @ExceptionHandler(EmailNotExistedException.class) public String handleEmailNotExisted()&#123; return &quot;&#123;&#125;&quot;; &#125;&#125; @Service@RequiredArgsConstructorpublic class UserService &#123; private final UserRepository userRepository; private final PasswordEncoder passwordEncoder; public User registerUser(String email, String name, String password) &#123; // íšŒì›ì´ ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ Emailì„ í†µí•´ ìœ íš¨ì„± ê²€ì‚¬ Optional&lt;User&gt; optional = userRepository.findByEmail(email); // íšŒì›ì´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ìš° ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•œë‹¤. if(optional.isPresent())&#123; throw new EmailExistedException(email); &#125;// // íŒ¨ìŠ¤ì›Œë“œë¥¼ ì•”í˜¸í™”í•´ì„œ ì €ì¥í•œë‹¤.// // ì•”í˜¸í™” ë°©ì‹ì€ BCryptë°©ì‹ì„ ì´ìš©í•´ ì•”í˜¸í™”ë¥¼ ì§„í–‰// BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder(); String encodedPassword = passwordEncoder.encode(password); User user = User.builder() .email(email) .name(name) .password(encodedPassword) .level(1L) .build(); userRepository.save(user); return user; &#125; public User authenticate(String email, String password) &#123; User user = userRepository.findByEmail(email) .orElseThrow(() -&gt; new EmailNotExistedException()); String encodedPassword = passwordEncoder.encode(password); if(!passwordEncoder.matches(password, user.getPassword()))&#123; throw new PasswordWrongException(); &#125; return user; &#125;&#125; @Test@DisplayName(&quot;ì˜¬ë°”ë¥¸ íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•´ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•œë‹¤.&quot;)public void authenticateWithValidAttributes()&#123; String email = &quot;test@example.com&quot;; String name = &quot;Tester&quot;; String password = &quot;test&quot;; User mockUser = User.builder() .Id(1004L) .email(email) .name(name) .password(password) .build(); given(userRepository.findByEmail(email)).willReturn(Optional.of(mockUser)); given(passwordEncoder.matches(any(), any())).willReturn(true); User user = userService.authenticate(email, password); assertThat(user.getEmail()).isEqualTo(email);&#125;@Test@DisplayName(&quot;ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ì„ ì´ìš©í•´ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•œë‹¤.&quot;)public void authenticateNotValidEmail()&#123; String email = &quot;x@example.com&quot;; String password = &quot;test&quot;; given(userRepository.findByEmail(email)).willThrow(EmailNotExistedException.class); assertThatThrownBy(()-&gt;&#123; User user = userService.authenticate(email, password); &#125;).isInstanceOf(EmailNotExistedException.class);&#125;@Test@DisplayName(&quot;ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ì„ ì´ìš©í•´ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•œë‹¤.&quot;)public void authenticateNotValidPassword()&#123; String email = &quot;test@example.com&quot;; String name = &quot;Tester&quot;; String password = &quot;x&quot;; User mockUser = User.builder() .Id(1004L) .email(email) .name(name) .password(password) .build(); given(userRepository.findByEmail(email)).willReturn(Optional.of(mockUser)); given(passwordEncoder.matches(password, mockUser.getPassword())).willReturn(false); assertThatThrownBy(()-&gt;&#123; User user = userService.authenticate(email, password); &#125;).isInstanceOf(PasswordWrongException.class);&#125; @Configuration@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .cors().disable() .csrf().disable() .formLogin().disable() .headers().frameOptions().disable(); &#125; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125;&#125; @Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class User &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long Id; @NotEmpty private String email; @NotEmpty private String name; @NotNull private Long level; @NotEmpty private String password; public boolean isAdmin() &#123; return level &gt; 2L; &#125; public void deactivate()&#123; level = 0L; &#125; public boolean isActive() &#123; return level &gt; 0L; &#125; @JsonIgnore public String getAccessToken() &#123; if(password == null)&#123; return &quot;&quot;; &#125; return password.substring(0, 10); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 10 - íšŒì› ê°€ì…","slug":"spring/fastcampus-eatgo/eat-go10-signup","date":"2021-02-06T03:30:41.000Z","updated":"2024-02-26T15:43:20.400Z","comments":true,"path":"2021/02/06/spring/fastcampus-eatgo/eat-go10-signup/","link":"","permalink":"https://ckck803.github.io/2021/02/06/spring/fastcampus-eatgo/eat-go10-signup/","excerpt":"Security ì„¤ì •í•˜ê¸°@Configuration@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .cors().disable() .csrf().disable() .formLogin().disable() .headers().frameOptions().disable(); &#125;&#125; @Service@RequiredArgsConstructorpublic class UserService &#123; private final UserRepository userRepository; public User registerUser(String email, String name, String password) &#123; User user = User.builder() .email(email) .name(name) .password(encodedPassword) .level(1L) .build(); userRepository.save(user); return user; &#125;&#125; íŒ¨ìŠ¤ì›Œë“œì— ì•”í˜¸í™” í•˜ê¸°@Service@RequiredArgsConstructorpublic class UserService &#123; private final UserRepository userRepository; public User registerUser(String email, String name, String password) &#123; // íŒ¨ìŠ¤ì›Œë“œë¥¼ ì•”í˜¸í™”í•´ì„œ ì €ì¥í•œë‹¤. BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder(); String encodedPassword = passwordEncoder.encode(password); User user = User.builder() .email(email) .name(name) .password(encodedPassword) .level(1L) .build(); userRepository.save(user); return user; &#125;&#125; class UserServiceTest &#123; @Mock private UserRepository userRepository; private UserService userService; @BeforeEach public void setUp()&#123; MockitoAnnotations.openMocks(this); userService = new UserService(userRepository); &#125; @Test @DisplayName(&quot;ì‚¬ìš©ìë¥¼ ë“±ë¡í•œë‹¤.&quot;) public void registerUser()&#123; String email = &quot;test@example.com&quot;; String name = &quot;Tester&quot;; String password = &quot;test&quot;; User user = userService.registerUser(email, name, password); assertThat(user.getEmail()).isEqualTo(email); assertThat(user.getName()).isEqualTo(name); assertThat(user.getPassword()).isEqualTo(password); verify(userRepository).save(any()); &#125;&#125; @RestController@RequiredArgsConstructorpublic class UserController &#123; private final UserService userService; @PostMapping(&quot;/users&quot;) public ResponseEntity&lt;?&gt; create(@RequestBody User resource)&#123; String email = resource.getEmail(); String name = resource.getName(); String password = resource.getPassword(); User user = userService.registerUser(email, name, password); String url = &quot;/users/&quot; + user.getId(); return ResponseEntity.created(URI.create(url)).body(&quot;&#123;&#125;&quot;); &#125;&#125; @WebMvcTest(UserController.class)class UserControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private UserService userService; @Test @DisplayName(&quot;ì‚¬ìš©ìë¥¼ ìƒì„±í•œë‹¤.&quot;) public void create() throws Exception &#123; String email = &quot;tester@example.com&quot;; String name = &quot;Tester&quot;; String password = &quot;test&quot;; User mockUser = User.builder() .Id(1004L) .email(email) .password(password) .name(name) .build(); given(userService.registerUser(email, name, password)) .willReturn(mockUser); ResultActions resultActions = mockMvc.perform(post(&quot;/users&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot; : \\&quot;tester@example.com\\&quot;, \\&quot;name\\&quot; : \\&quot;Tester\\&quot;, \\&quot;password\\&quot; : \\&quot;test\\&quot;&#125;&quot;)); resultActions .andExpect(status().isCreated()) .andExpect(header().string(&quot;location&quot;, &quot;/users/1004&quot;)); verify(userService).registerUser(any(), any(), any()); &#125;&#125; ì¡´ì¬í•˜ëŠ” íšŒì›ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬","text":"Security ì„¤ì •í•˜ê¸°@Configuration@EnableWebSecuritypublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .cors().disable() .csrf().disable() .formLogin().disable() .headers().frameOptions().disable(); &#125;&#125; @Service@RequiredArgsConstructorpublic class UserService &#123; private final UserRepository userRepository; public User registerUser(String email, String name, String password) &#123; User user = User.builder() .email(email) .name(name) .password(encodedPassword) .level(1L) .build(); userRepository.save(user); return user; &#125;&#125; íŒ¨ìŠ¤ì›Œë“œì— ì•”í˜¸í™” í•˜ê¸°@Service@RequiredArgsConstructorpublic class UserService &#123; private final UserRepository userRepository; public User registerUser(String email, String name, String password) &#123; // íŒ¨ìŠ¤ì›Œë“œë¥¼ ì•”í˜¸í™”í•´ì„œ ì €ì¥í•œë‹¤. BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder(); String encodedPassword = passwordEncoder.encode(password); User user = User.builder() .email(email) .name(name) .password(encodedPassword) .level(1L) .build(); userRepository.save(user); return user; &#125;&#125; class UserServiceTest &#123; @Mock private UserRepository userRepository; private UserService userService; @BeforeEach public void setUp()&#123; MockitoAnnotations.openMocks(this); userService = new UserService(userRepository); &#125; @Test @DisplayName(&quot;ì‚¬ìš©ìë¥¼ ë“±ë¡í•œë‹¤.&quot;) public void registerUser()&#123; String email = &quot;test@example.com&quot;; String name = &quot;Tester&quot;; String password = &quot;test&quot;; User user = userService.registerUser(email, name, password); assertThat(user.getEmail()).isEqualTo(email); assertThat(user.getName()).isEqualTo(name); assertThat(user.getPassword()).isEqualTo(password); verify(userRepository).save(any()); &#125;&#125; @RestController@RequiredArgsConstructorpublic class UserController &#123; private final UserService userService; @PostMapping(&quot;/users&quot;) public ResponseEntity&lt;?&gt; create(@RequestBody User resource)&#123; String email = resource.getEmail(); String name = resource.getName(); String password = resource.getPassword(); User user = userService.registerUser(email, name, password); String url = &quot;/users/&quot; + user.getId(); return ResponseEntity.created(URI.create(url)).body(&quot;&#123;&#125;&quot;); &#125;&#125; @WebMvcTest(UserController.class)class UserControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private UserService userService; @Test @DisplayName(&quot;ì‚¬ìš©ìë¥¼ ìƒì„±í•œë‹¤.&quot;) public void create() throws Exception &#123; String email = &quot;tester@example.com&quot;; String name = &quot;Tester&quot;; String password = &quot;test&quot;; User mockUser = User.builder() .Id(1004L) .email(email) .password(password) .name(name) .build(); given(userService.registerUser(email, name, password)) .willReturn(mockUser); ResultActions resultActions = mockMvc.perform(post(&quot;/users&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot; : \\&quot;tester@example.com\\&quot;, \\&quot;name\\&quot; : \\&quot;Tester\\&quot;, \\&quot;password\\&quot; : \\&quot;test\\&quot;&#125;&quot;)); resultActions .andExpect(status().isCreated()) .andExpect(header().string(&quot;location&quot;, &quot;/users/1004&quot;)); verify(userService).registerUser(any(), any(), any()); &#125;&#125; ì¡´ì¬í•˜ëŠ” íšŒì›ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬public class EmailExistedException extends RuntimeException&#123; public EmailExistedException(String email)&#123; super(&quot;Email is already registered: &quot; + email); &#125;&#125; @Service@RequiredArgsConstructorpublic class UserService &#123; private final UserRepository userRepository; public User registerUser(String email, String name, String password) &#123; // íšŒì›ì´ ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ Emailì„ í†µí•´ ìœ íš¨ì„± ê²€ì‚¬ Optional&lt;User&gt; optional = userRepository.findByEmail(email); // íšŒì›ì´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ìš° ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•œë‹¤. if(optional.isPresent())&#123; throw new EmailExistedException(email); &#125; // íŒ¨ìŠ¤ì›Œë“œë¥¼ ì•”í˜¸í™”í•´ì„œ ì €ì¥í•œë‹¤. // ì•”í˜¸í™” ë°©ì‹ì€ BCryptë°©ì‹ì„ ì´ìš©í•´ ì•”í˜¸í™”ë¥¼ ì§„í–‰ BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder(); String encodedPassword = passwordEncoder.encode(password); User user = User.builder() .email(email) .name(name) .password(encodedPassword) .level(1L) .build(); userRepository.save(user); return user; &#125;&#125; @Test@DisplayName(&quot;ì‚¬ìš©ìê°€ ì´ë¯¸ ë“±ë¡ë¼ ìˆëŠ”ê²½ìš° ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•œë‹¤.&quot;)public void registerUserWithExistedEmail()&#123; String email = &quot;test@example.com&quot;; String name = &quot;Tester&quot;; String password = &quot;test&quot;; User mockUser = User.builder() .email(email) .name(name) .password(password) .build(); given(userRepository.findByEmail(email)).willReturn(Optional.of(mockUser)); // ì˜ˆì™¸ì²˜ë¦¬ê°€ ë°œìƒë˜ëŠ”ì§€ í™•ì¸í•œë‹¤. assertThatThrownBy(() -&gt; &#123; userService.registerUser(email, name, password); &#125;).isInstanceOf(EmailExistedException.class); verify(userRepository).findByEmail(any());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 9 - ì‚¬ìš©ì ê´€ë¦¬","slug":"spring/fastcampus-eatgo/eat-go9-user","date":"2021-02-05T15:01:54.000Z","updated":"2024-02-26T15:43:14.726Z","comments":true,"path":"2021/02/06/spring/fastcampus-eatgo/eat-go9-user/","link":"","permalink":"https://ckck803.github.io/2021/02/06/spring/fastcampus-eatgo/eat-go9-user/","excerpt":"@Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class User &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long Id; @NotEmpty private String email; @NotEmpty private String name; @NotNull private Long level; public boolean isAdmin() &#123; return level &gt; 2L; &#125; public void deactivate()&#123; level = 0L; &#125; public boolean isActive() &#123; return level &gt; 0L; &#125;&#125; @Repositorypublic interface UserRepository extends JpaRepository&lt;User, Long&gt; &#123;&#125; @Service@RequiredArgsConstructorpublic class UserService &#123; private final UserRepository userRepository; public List&lt;User&gt; getUsers() &#123; return userRepository.findAll(); &#125; public User addUser(String email, String name) &#123; User user = User.builder() .email(email) .name(name) .level(1L) .build(); userRepository.save(user); return user; &#125; public User updateUser(Long id, String email, String name, Long level ) &#123; User user = userRepository.findById(id).orElse(null); user.setEmail(email); user.setName(name); user.setLevel(level); return user; &#125; public User deactivateUser(Long userId) &#123; User user = userRepository.findById(userId).orElse(null); user.deactivate(); return user; &#125;&#125; class UserServiceTest &#123; @Mock private UserRepository userRepository; private UserService userService; @BeforeEach private void setUp() &#123; MockitoAnnotations.openMocks(this); userService = new UserService(userRepository); &#125; @Test @DisplayName(&quot;ìœ ì €ëª©ë¡ì„ ê°€ì ¸ì˜¨ë‹¤.&quot;) public void getUsers() &#123; List&lt;User&gt; mockUsers = new ArrayList&lt;&gt;(); mockUsers.add(User.builder() .name(&quot;tester&quot;) .email(&quot;test@example.com&quot;) .level(3L) .build()); given(userRepository.findAll()).willReturn(mockUsers); List&lt;User&gt; users = userService.getUsers(); User user = users.get(0); assertThat(user.getName()).isEqualTo(&quot;tester&quot;); assertThat(user.getEmail()).isEqualTo(&quot;test@example.com&quot;); &#125; @Test @DisplayName(&quot;ìœ ì €ë¥¼ ì¶”ê°€í•œë‹¤.&quot;) public void addUser()&#123; String email = &quot;test@example.com&quot;; String name = &quot;tester&quot;; User mockUser = User.builder() .name(name) .email(email) .build(); given(userRepository.save(any())).willReturn(mockUser); User user = userService.addUser(email, name); assertThat(user.getName()).isEqualTo(name); assertThat(user.getEmail()).isEqualTo(email); &#125; @Test @DisplayName(&quot;ìœ ì €ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.&quot;) public void updateUser()&#123; Long id = 1004L; Long level = 3L; String email = &quot;test@example.com&quot;; String name = &quot;Superman&quot;; User mockUser = User.builder() .Id(id) .name(&quot;Administrator&quot;) .level(1L) .email(email) .build(); given(userRepository.findById(id)).willReturn(Optional.of(mockUser)); User user = userService.updateUser(id, email, name, level); verify(userRepository).findById(id); assertThat(user.getName()).isEqualTo(&quot;Superman&quot;); assertThat(user.isAdmin()).isEqualTo(true); &#125; @Test @DisplayName(&quot;ìœ ì €ë¥¼ ì‚­ì œí•œë‹¤.&quot;) public void deactiveUser()&#123; Long id = 1004L; Long level = 2L; String email = &quot;test@example.com&quot;; String name = &quot;Superman&quot;; User mockUser = User.builder() .Id(id) .level(level) .email(email) .name(name) .build(); given(userRepository.findById(id)).willReturn(Optional.of(mockUser)); User user = userService.deactivateUser(1004L); verify(userRepository).findById(1004L); assertThat(user.isAdmin()).isEqualTo(false); assertThat(user.isActive()).isEqualTo(false); &#125;&#125; @RestController@RequiredArgsConstructorpublic class UserController &#123; // 1. User list // 2. User create -&gt; íšŒì›ê°€ì… // 3. User update // 4. User delete -&gt; level: 0 =&gt; ì•„ë¬´ê²ƒë„ ëª» í•¨. // (1: customer 2: restaurant owner 3: admin) private final UserService userService; @GetMapping(&quot;/users&quot;) public List&lt;User&gt; list()&#123; return userService.getUsers(); &#125; @PostMapping(&quot;/users&quot;) public ResponseEntity&lt;?&gt; create(@RequestBody User resource) throws URISyntaxException &#123; User user = userService.addUser(resource.getEmail(), resource.getName()); String url = &quot;/users&quot; + user.getId(); return ResponseEntity.created(URI.create(url)).body(&quot;&#123;&#125;&quot;); &#125; @PatchMapping(&quot;/users/&#123;userId&#125;&quot;) public void udpate(@PathVariable(&quot;userId&quot;) Long id, @RequestBody User user)&#123; userService.updateUser(id, user.getEmail(), user.getName(), user.getLevel()); &#125; @DeleteMapping(&quot;/users/&#123;userId&#125;&quot;) public String deactivate(@PathVariable(&quot;userId&quot;)Long userId)&#123; userService.deactivateUser(userId); return &quot;&#123;&#125;&quot;; &#125;&#125; @WebMvcTest(UserController.class)class UserControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private UserService userService; @Test @DisplayName(&quot;ìœ ì €ëª©ë¡ì„_ê°€ì ¸ì˜¨ë‹¤&quot;) public void list() throws Exception &#123; List&lt;User&gt; users = new ArrayList&lt;&gt;(); users.add(User.builder() .email(&quot;tester@example.com&quot;) .name(&quot;tester&quot;) .level(1L) .build()); given(userService.getUsers()).willReturn(users); mockMvc.perform(get(&quot;/users&quot;)) .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;tester&quot;))); &#125; @Test @DisplayName(&quot;ìœ ì €ë¥¼ ì¶”ê°€í•œë‹¤.&quot;) public void create() throws Exception &#123; String email = &quot;admin@example.com&quot;; String name = &quot;Administrator&quot;; User user = User.builder() .email(email) .name(name) .build(); given(userService.addUser(email, name)).willReturn(user); ResultActions resultActions = mockMvc.perform(post(&quot;/users&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot; : \\&quot;admin@example.com\\&quot;, \\&quot;name\\&quot; : \\&quot;Administrator\\&quot;&#125;&quot;)); verify(userService).addUser(email, name) ; resultActions .andExpect(status().isCreated()); &#125; @Test @DisplayName(&quot;ìœ ì €ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤&quot;) public void update() throws Exception &#123; Long id = 1004L; String email = &quot;admin@example.com&quot;; String name = &quot;Administrator&quot;; Long level = 3L; User user = User.builder() .email(email) .name(name) .level(level) .build(); given(userService.updateUser(id, email, name, level)).willReturn(user); ResultActions resultActions = mockMvc.perform(patch(&quot;/users/1004&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;level\\&quot;: 3&quot; + &quot;,\\&quot;email\\&quot; : \\&quot;admin@example.com\\&quot;&quot; + &quot;, \\&quot;name\\&quot; : \\&quot;Administrator\\&quot;&#125;&quot;)); verify(userService).updateUser(eq(id), eq(email), eq(name), eq(level)); resultActions .andExpect(status().isOk()); &#125; @Test @DisplayName(&quot;ìœ ì €ë¥¼ ì‚­ì œí•œë‹¤.&quot;) public void deactivate() throws Exception &#123; mockMvc.perform(delete(&quot;/users/1004&quot;)) .andExpect(status().isOk()); verify(userService).deactivateUser(1004L); &#125;&#125;","text":"@Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class User &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long Id; @NotEmpty private String email; @NotEmpty private String name; @NotNull private Long level; public boolean isAdmin() &#123; return level &gt; 2L; &#125; public void deactivate()&#123; level = 0L; &#125; public boolean isActive() &#123; return level &gt; 0L; &#125;&#125; @Repositorypublic interface UserRepository extends JpaRepository&lt;User, Long&gt; &#123;&#125; @Service@RequiredArgsConstructorpublic class UserService &#123; private final UserRepository userRepository; public List&lt;User&gt; getUsers() &#123; return userRepository.findAll(); &#125; public User addUser(String email, String name) &#123; User user = User.builder() .email(email) .name(name) .level(1L) .build(); userRepository.save(user); return user; &#125; public User updateUser(Long id, String email, String name, Long level ) &#123; User user = userRepository.findById(id).orElse(null); user.setEmail(email); user.setName(name); user.setLevel(level); return user; &#125; public User deactivateUser(Long userId) &#123; User user = userRepository.findById(userId).orElse(null); user.deactivate(); return user; &#125;&#125; class UserServiceTest &#123; @Mock private UserRepository userRepository; private UserService userService; @BeforeEach private void setUp() &#123; MockitoAnnotations.openMocks(this); userService = new UserService(userRepository); &#125; @Test @DisplayName(&quot;ìœ ì €ëª©ë¡ì„ ê°€ì ¸ì˜¨ë‹¤.&quot;) public void getUsers() &#123; List&lt;User&gt; mockUsers = new ArrayList&lt;&gt;(); mockUsers.add(User.builder() .name(&quot;tester&quot;) .email(&quot;test@example.com&quot;) .level(3L) .build()); given(userRepository.findAll()).willReturn(mockUsers); List&lt;User&gt; users = userService.getUsers(); User user = users.get(0); assertThat(user.getName()).isEqualTo(&quot;tester&quot;); assertThat(user.getEmail()).isEqualTo(&quot;test@example.com&quot;); &#125; @Test @DisplayName(&quot;ìœ ì €ë¥¼ ì¶”ê°€í•œë‹¤.&quot;) public void addUser()&#123; String email = &quot;test@example.com&quot;; String name = &quot;tester&quot;; User mockUser = User.builder() .name(name) .email(email) .build(); given(userRepository.save(any())).willReturn(mockUser); User user = userService.addUser(email, name); assertThat(user.getName()).isEqualTo(name); assertThat(user.getEmail()).isEqualTo(email); &#125; @Test @DisplayName(&quot;ìœ ì €ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.&quot;) public void updateUser()&#123; Long id = 1004L; Long level = 3L; String email = &quot;test@example.com&quot;; String name = &quot;Superman&quot;; User mockUser = User.builder() .Id(id) .name(&quot;Administrator&quot;) .level(1L) .email(email) .build(); given(userRepository.findById(id)).willReturn(Optional.of(mockUser)); User user = userService.updateUser(id, email, name, level); verify(userRepository).findById(id); assertThat(user.getName()).isEqualTo(&quot;Superman&quot;); assertThat(user.isAdmin()).isEqualTo(true); &#125; @Test @DisplayName(&quot;ìœ ì €ë¥¼ ì‚­ì œí•œë‹¤.&quot;) public void deactiveUser()&#123; Long id = 1004L; Long level = 2L; String email = &quot;test@example.com&quot;; String name = &quot;Superman&quot;; User mockUser = User.builder() .Id(id) .level(level) .email(email) .name(name) .build(); given(userRepository.findById(id)).willReturn(Optional.of(mockUser)); User user = userService.deactivateUser(1004L); verify(userRepository).findById(1004L); assertThat(user.isAdmin()).isEqualTo(false); assertThat(user.isActive()).isEqualTo(false); &#125;&#125; @RestController@RequiredArgsConstructorpublic class UserController &#123; // 1. User list // 2. User create -&gt; íšŒì›ê°€ì… // 3. User update // 4. User delete -&gt; level: 0 =&gt; ì•„ë¬´ê²ƒë„ ëª» í•¨. // (1: customer 2: restaurant owner 3: admin) private final UserService userService; @GetMapping(&quot;/users&quot;) public List&lt;User&gt; list()&#123; return userService.getUsers(); &#125; @PostMapping(&quot;/users&quot;) public ResponseEntity&lt;?&gt; create(@RequestBody User resource) throws URISyntaxException &#123; User user = userService.addUser(resource.getEmail(), resource.getName()); String url = &quot;/users&quot; + user.getId(); return ResponseEntity.created(URI.create(url)).body(&quot;&#123;&#125;&quot;); &#125; @PatchMapping(&quot;/users/&#123;userId&#125;&quot;) public void udpate(@PathVariable(&quot;userId&quot;) Long id, @RequestBody User user)&#123; userService.updateUser(id, user.getEmail(), user.getName(), user.getLevel()); &#125; @DeleteMapping(&quot;/users/&#123;userId&#125;&quot;) public String deactivate(@PathVariable(&quot;userId&quot;)Long userId)&#123; userService.deactivateUser(userId); return &quot;&#123;&#125;&quot;; &#125;&#125; @WebMvcTest(UserController.class)class UserControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private UserService userService; @Test @DisplayName(&quot;ìœ ì €ëª©ë¡ì„_ê°€ì ¸ì˜¨ë‹¤&quot;) public void list() throws Exception &#123; List&lt;User&gt; users = new ArrayList&lt;&gt;(); users.add(User.builder() .email(&quot;tester@example.com&quot;) .name(&quot;tester&quot;) .level(1L) .build()); given(userService.getUsers()).willReturn(users); mockMvc.perform(get(&quot;/users&quot;)) .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;tester&quot;))); &#125; @Test @DisplayName(&quot;ìœ ì €ë¥¼ ì¶”ê°€í•œë‹¤.&quot;) public void create() throws Exception &#123; String email = &quot;admin@example.com&quot;; String name = &quot;Administrator&quot;; User user = User.builder() .email(email) .name(name) .build(); given(userService.addUser(email, name)).willReturn(user); ResultActions resultActions = mockMvc.perform(post(&quot;/users&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;email\\&quot; : \\&quot;admin@example.com\\&quot;, \\&quot;name\\&quot; : \\&quot;Administrator\\&quot;&#125;&quot;)); verify(userService).addUser(email, name) ; resultActions .andExpect(status().isCreated()); &#125; @Test @DisplayName(&quot;ìœ ì €ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤&quot;) public void update() throws Exception &#123; Long id = 1004L; String email = &quot;admin@example.com&quot;; String name = &quot;Administrator&quot;; Long level = 3L; User user = User.builder() .email(email) .name(name) .level(level) .build(); given(userService.updateUser(id, email, name, level)).willReturn(user); ResultActions resultActions = mockMvc.perform(patch(&quot;/users/1004&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;level\\&quot;: 3&quot; + &quot;,\\&quot;email\\&quot; : \\&quot;admin@example.com\\&quot;&quot; + &quot;, \\&quot;name\\&quot; : \\&quot;Administrator\\&quot;&#125;&quot;)); verify(userService).updateUser(eq(id), eq(email), eq(name), eq(level)); resultActions .andExpect(status().isOk()); &#125; @Test @DisplayName(&quot;ìœ ì €ë¥¼ ì‚­ì œí•œë‹¤.&quot;) public void deactivate() throws Exception &#123; mockMvc.perform(delete(&quot;/users/1004&quot;)) .andExpect(status().isOk()); verify(userService).deactivateUser(1004L); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 8 - ê°€ê²Œëª©ë¡ í•„í„°ë§","slug":"spring/fastcampus-eatgo/eat-go8-category","date":"2021-02-05T03:21:36.000Z","updated":"2024-02-26T15:43:07.619Z","comments":true,"path":"2021/02/05/spring/fastcampus-eatgo/eat-go8-category/","link":"","permalink":"https://ckck803.github.io/2021/02/05/spring/fastcampus-eatgo/eat-go8-category/","excerpt":"@Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class Region &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private String name;&#125; @Repositorypublic interface RegionRepository extends JpaRepository&lt;Region,Long&gt; &#123;&#125; @Service@RequiredArgsConstructorpublic class RegionService &#123; private final RegionRepository regionRepository; public List&lt;Region&gt; getRegions() &#123; return regionRepository.findAll(); &#125;&#125; @Service@RequiredArgsConstructorpublic class RegionService &#123; private final RegionRepository regionRepository; public List&lt;Region&gt; getRegions() &#123; return regionRepository.findAll(); &#125;&#125; class RegionServiceTest &#123; private RegionService regionService; @Mock private RegionRepository regionRepository; @BeforeEach public void setUp()&#123; MockitoAnnotations.openMocks(this ); regionService = new RegionService(regionRepository); &#125; @Test public void ì§€ì—­ì •ë³´ë“¤ì„_ê°€ì ¸ì˜¨ë‹¤() &#123; List&lt;Region&gt; mockRegions = new ArrayList&lt;&gt;(); mockRegions.add(Region.builder() .name(&quot;Seoul&quot;) .build()); given(regionRepository.findAll()).willReturn(mockRegions); List&lt;Region&gt; regions = regionService.getRegions(); Region region = regions.get(0); assertThat(region.getName()).isEqualTo(&quot;Seoul&quot;); &#125;&#125; @RestController@RequiredArgsConstructorpublic class RegionController &#123; private final RegionService regionService; @GetMapping(&quot;/regions&quot;) public List&lt;Region&gt; list()&#123; List&lt;Region&gt; regions = regionService.getRegions(); return regions; &#125;&#125; @WebMvcTest(RegionController.class)class RegionControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private RegionService regionService; @Test public void ì§€ì—­ëª©ë¡ë“¤ì„_ê°€ì ¸ì˜¨ë‹¤() throws Exception &#123; List&lt;Region&gt; regions = new ArrayList&lt;&gt;(); regions.add(Region.builder().name(&quot;Seoul&quot;).build()); given(regionService.getRegions()).willReturn(regions); mockMvc.perform(get(&quot;/regions&quot;)) .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;Seoul&quot;))); &#125;&#125; ì¹´í…Œê³ ë¦¬ ë§Œë“¤ê¸°@Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class Category &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) public Long id; public String name;&#125;","text":"@Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class Region &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private String name;&#125; @Repositorypublic interface RegionRepository extends JpaRepository&lt;Region,Long&gt; &#123;&#125; @Service@RequiredArgsConstructorpublic class RegionService &#123; private final RegionRepository regionRepository; public List&lt;Region&gt; getRegions() &#123; return regionRepository.findAll(); &#125;&#125; @Service@RequiredArgsConstructorpublic class RegionService &#123; private final RegionRepository regionRepository; public List&lt;Region&gt; getRegions() &#123; return regionRepository.findAll(); &#125;&#125; class RegionServiceTest &#123; private RegionService regionService; @Mock private RegionRepository regionRepository; @BeforeEach public void setUp()&#123; MockitoAnnotations.openMocks(this ); regionService = new RegionService(regionRepository); &#125; @Test public void ì§€ì—­ì •ë³´ë“¤ì„_ê°€ì ¸ì˜¨ë‹¤() &#123; List&lt;Region&gt; mockRegions = new ArrayList&lt;&gt;(); mockRegions.add(Region.builder() .name(&quot;Seoul&quot;) .build()); given(regionRepository.findAll()).willReturn(mockRegions); List&lt;Region&gt; regions = regionService.getRegions(); Region region = regions.get(0); assertThat(region.getName()).isEqualTo(&quot;Seoul&quot;); &#125;&#125; @RestController@RequiredArgsConstructorpublic class RegionController &#123; private final RegionService regionService; @GetMapping(&quot;/regions&quot;) public List&lt;Region&gt; list()&#123; List&lt;Region&gt; regions = regionService.getRegions(); return regions; &#125;&#125; @WebMvcTest(RegionController.class)class RegionControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private RegionService regionService; @Test public void ì§€ì—­ëª©ë¡ë“¤ì„_ê°€ì ¸ì˜¨ë‹¤() throws Exception &#123; List&lt;Region&gt; regions = new ArrayList&lt;&gt;(); regions.add(Region.builder().name(&quot;Seoul&quot;).build()); given(regionService.getRegions()).willReturn(regions); mockMvc.perform(get(&quot;/regions&quot;)) .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;Seoul&quot;))); &#125;&#125; ì¹´í…Œê³ ë¦¬ ë§Œë“¤ê¸°@Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class Category &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) public Long id; public String name;&#125; @Service@RequiredArgsConstructorpublic class CategoryService &#123; private final CategoryRepository categoryRepository; public List&lt;Category&gt; getCategories() &#123; List&lt;Category&gt; categories = categoryRepository.findAll(); return categories; &#125; public Category addCategory(String name) &#123; Category category = Category.builder().name(name).build(); categoryRepository.save(category); return category; &#125;&#125; @RestController@RequiredArgsConstructorpublic class CategoryController &#123; @Autowired private final CategoryService categoryService; @GetMapping(&quot;/categories&quot;) public List&lt;Category&gt; list()&#123; List&lt;Category&gt; categories = categoryService.getCategories(); return categories; &#125; @PostMapping(&quot;/categories&quot;) public ResponseEntity&lt;?&gt; create(@RequestBody Category resource)&#123; String name = resource.getName(); Category category = categoryService.addCategory(name); String url = &quot;/categories&quot; + category.getId(); return ResponseEntity.created(URI.create(url)).body(&quot;&#123;&#125;&quot;); &#125;&#125; @WebMvcTest(CategoryController.class)class CategoryControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private CategoryService categoryService; @Test public void ì¹´í…Œê³ ë¦¬ë“¤_ê°€ì ¸ì˜¤ê¸°() throws Exception &#123; List&lt;Category&gt; categories = new ArrayList&lt;&gt;(); categories.add(Category.builder() .name(&quot;Korean Food&quot;) .build()); given(categoryService.getCategories()).willReturn(categories); mockMvc.perform(get(&quot;/categories&quot;)) .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;Korean Food&quot;))); &#125; @Test public void ì¹´í…Œê³ ë¦¬_ìƒì„±í•˜ê¸°() throws Exception &#123; Category category = Category.builder() .name(&quot;Korean Food&quot;) .build(); given(categoryService.addCategory(&quot;Korean Food&quot;)).willReturn(category); mockMvc.perform(post(&quot;/categories&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123; \\&quot;name\\&quot; :\\&quot;Korean Food\\&quot; &#125;&quot;)) .andExpect(status().isCreated()) .andExpect(content().string(&quot;&#123;&#125;&quot;)); &#125;&#125; class CategoryServiceTest &#123; private CategoryService categoryService; @Mock private CategoryRepository categoryRepository; @BeforeEach public void setUp() &#123; MockitoAnnotations.openMocks(this); categoryService = new CategoryService(categoryRepository); &#125; @Test public void ì¹´í…Œê³ ë¦¬_ëª©ë¡ì„_ê°€ì ¸ì˜¨ë‹¤() &#123; List&lt;Category&gt; mockCategories = new ArrayList&lt;&gt;(); mockCategories.add(Category.builder() .name(&quot;Korean Food&quot;) .build()); given(categoryRepository.findAll()).willReturn(mockCategories); List&lt;Category&gt; categories = categoryService.getCategories(); Category category = categories.get(0); assertThat(category.getName()).isEqualTo(&quot;Korean Food&quot;); &#125; @Test public void ì¹´í…Œê³ ë¦¬ë¥¼_ì¶”ê°€í•œë‹¤()&#123; Category category = categoryService.addCategory(&quot;Korean Food&quot;); verify(categoryRepository).save(any()); assertThat(category.getName()).isEqualTo(&quot;Korean Food&quot;); &#125;&#125; Request Parameterë¥¼ ì´ìš©í•œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ëŠ” ê²½ìš°public List&lt;Restaurant&gt; getRestaurants(String region) &#123; List&lt;Restaurant&gt; restaurants = restaurantRepository.findAllByAddressContaining(region); return restaurants;&#125; @Testpublic void ëª¨ë“ _ë ˆìŠ¤í† ë‘ì„_ê°€ì ¸ì˜¨ë‹¤() &#123; List&lt;Restaurant&gt; restaurants = restaurantService.getRestaurants(&quot;Seoul&quot;); Restaurant restaurant = restaurants.get(0); assertThat(restaurant.getId()).isEqualTo(1004L);&#125; @GetMapping(&quot;/restaurants&quot;)public List&lt;Restaurant&gt; list(@RequestParam(&quot;region&quot;) String region) &#123; List&lt;Restaurant&gt; restaurants = restaurantService.getRestaurants(region); return restaurants;&#125; @Testpublic void listë¥¼_í™•ì¸í•œë‹¤() throws Exception &#123; List&lt;Restaurant&gt; restaurants = new ArrayList&lt;&gt;(); restaurants.add(Restaurant.builder() .id(1004L) .name(&quot;JOKER House&quot;) .address(&quot;Seoul&quot;) .build()); given(restaurantService.getRestaurants(&quot;Seoul&quot;)).willReturn(restaurants); ResultActions resultActions = mockMvc.perform(get(&quot;/restaurants?region=Seoul&quot;)); resultActions .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;\\&quot;id\\&quot;:1004&quot;))) .andExpect(content().string(containsString(&quot;\\&quot;name\\&quot;:\\&quot;JOKER House\\&quot;&quot;))) .andDo(print());&#125; @Testpublic void RequestHeaderë¥¼_ì´ìš©í•œ_listë¥¼_í™•ì¸í•œë‹¤() throws Exception &#123; List&lt;Restaurant&gt; restaurants = new ArrayList&lt;&gt;(); restaurants.add(Restaurant.builder() .id(1004L) .name(&quot;JOKER House&quot;) .address(&quot;Seoul&quot;) .build()); given(restaurantService.getRestaurants(&quot;Seoul&quot;)).willReturn(restaurants); ResultActions resultActions = mockMvc.perform(get(&quot;/restaurants?region=Seoul&quot;)); resultActions .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;\\&quot;id\\&quot;:1004&quot;))) .andExpect(content().string(containsString(&quot;\\&quot;name\\&quot;:\\&quot;JOKER House\\&quot;&quot;))) .andDo(print());&#125;```java@Testpublic void ìƒˆë¡œìš´_ë ˆìŠ¤í† ë‘_ì €ì¥_ë°_ì¡°íšŒí•˜ê¸°() throws Exception &#123; String BobZip = &quot;BobZip&quot;; String Seoul = &quot;Seoul&quot;; Restaurant restaurant = Restaurant.builder() .name(BobZip) .address(Seoul) .build(); String content = objectMapper.writeValueAsString(restaurant); ResultActions postResultActions = mockMvc.perform(post(&quot;/restaurants&quot;) .content(content) .contentType(MediaType.APPLICATION_JSON)); postResultActions .andExpect(status().isCreated()) .andDo(print()); List&lt;Restaurant&gt; restaurants = new ArrayList&lt;&gt;(); restaurants.add(restaurant); given(restaurantService.getRestaurants(&quot;Seoul&quot;)).willReturn(restaurants); ResultActions getResultActions = mockMvc.perform(get(&quot;/restaurants?region=Seoul&quot;)); getResultActions .andExpect(status().isOk()) .andExpect(jsonPath(&quot;$[0].name&quot;).value(BobZip)) .andExpect(jsonPath(&quot;$[0].address&quot;).value(Seoul)) .andDo(print());&#125; private void mockRestaurantRepository() &#123; List&lt;Restaurant&gt; restaurants = new ArrayList&lt;&gt;(); Restaurant restaurant = Restaurant.builder() .id(1004L) .address(&quot;Seoul&quot;) .name(&quot;Bob zip&quot;) .build(); restaurants.add(restaurant); given(restaurantRepository.findAllByAddressContaining(&quot;Seoul&quot;)).willReturn(restaurants); given(restaurantRepository.findById(1004L)) .willReturn(Optional.of(restaurant));&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 7 - ë©€í‹°ëª¨ë“ˆ","slug":"spring/fastcampus-eatgo/eat-go7-multimodule","date":"2021-02-04T17:42:22.000Z","updated":"2024-02-26T15:43:03.291Z","comments":true,"path":"2021/02/05/spring/fastcampus-eatgo/eat-go7-multimodule/","link":"","permalink":"https://ckck803.github.io/2021/02/05/spring/fastcampus-eatgo/eat-go7-multimodule/","excerpt":"dependencies &#123; implementation project(&#x27;:eatgo-common&#x27;) implementation &#x27;org.springframework.boot:spring-boot-starter-data-jpa&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-thymeleaf&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-web&#x27; // https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-validation implementation &#x27;org.springframework.boot:spring-boot-starter-validation&#x27; compileOnly &#x27;org.projectlombok:lombok&#x27; developmentOnly &#x27;org.springframework.boot:spring-boot-devtools&#x27; runtimeOnly &#x27;com.h2database:h2&#x27; annotationProcessor &#x27;org.projectlombok:lombok&#x27; testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27;&#125; jar &#123; enabled = true&#125;bootJar &#123; enabled = false&#125; @Testpublic void ë ˆìŠ¤í† ë‘ì—_í•´ë‹¹ë˜ëŠ”_ë©”ë‰´ë“¤ì„_ë°˜í™˜í•œë‹¤() &#123; List&lt;MenuItem&gt; mockMenuItems = new ArrayList&lt;&gt;(); mockMenuItems.add(MenuItem.builder() .name(&quot;Kimchi&quot;) .build()); given(menuItemRepository.findAllByRestaurantId(1004L)).willReturn(mockMenuItems); List&lt;MenuItem&gt; menuItems = menuItemService.getMenuItems(1004L); MenuItem menuItem = menuItems.get(0); assertThat(menuItem.getName()).isEqualTo(&quot;Kimchi&quot;);&#125; public List&lt;MenuItem&gt; getMenuItems(Long restaurantId) &#123; return menuItemRepository.findAllByRestaurantId(restaurantId);&#125; ë¦¬ë·° ì •ë³´ ê°€ì ¸ì˜¤ê¸°@GetMapping(&quot;/reviews&quot;)public List&lt;Review&gt; list()&#123; List&lt;Review&gt; reviews = reivewService.getReviews(); return reviews;&#125; @Testpublic void ë ˆìŠ¤í† ë‘ì—_í•´ë‹¹ë˜ëŠ”_ë¦¬ë·°ë“¤ì„_ê°€ì ¸ì˜¨ë‹¤() throws Exception &#123; List&lt;Review&gt; mockReviews = new ArrayList&lt;&gt;(); mockReviews.add(Review.builder() .description(&quot;Cool!&quot;) .build()); given(reviewService.getReviews()).willReturn(mockReviews); mockMvc.perform(get(&quot;/reviews&quot;)) .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;Cool!&quot;)));&#125; public List&lt;Review&gt; getReviews() &#123; return reviewRepository.findAll();&#125; @Testpublic void ë¦¬ë·°ë“¤ì„_ê°€ì ¸ì˜¨ë‹¤()&#123; List&lt;Review&gt; mockReviews = new ArrayList&lt;&gt;(); mockReviews.add(Review.builder() .description(&quot;Cool!&quot;) .build()); given(reviewRepository.findAll()).willReturn(mockReviews); List&lt;Review&gt; reviews = reviewService.getReviews(); Review review = reviews.get(0); assertThat(review.getDescription()).isEqualTo(&quot;Cool!&quot;);&#125;","text":"dependencies &#123; implementation project(&#x27;:eatgo-common&#x27;) implementation &#x27;org.springframework.boot:spring-boot-starter-data-jpa&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-thymeleaf&#x27; implementation &#x27;org.springframework.boot:spring-boot-starter-web&#x27; // https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-validation implementation &#x27;org.springframework.boot:spring-boot-starter-validation&#x27; compileOnly &#x27;org.projectlombok:lombok&#x27; developmentOnly &#x27;org.springframework.boot:spring-boot-devtools&#x27; runtimeOnly &#x27;com.h2database:h2&#x27; annotationProcessor &#x27;org.projectlombok:lombok&#x27; testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27;&#125; jar &#123; enabled = true&#125;bootJar &#123; enabled = false&#125; @Testpublic void ë ˆìŠ¤í† ë‘ì—_í•´ë‹¹ë˜ëŠ”_ë©”ë‰´ë“¤ì„_ë°˜í™˜í•œë‹¤() &#123; List&lt;MenuItem&gt; mockMenuItems = new ArrayList&lt;&gt;(); mockMenuItems.add(MenuItem.builder() .name(&quot;Kimchi&quot;) .build()); given(menuItemRepository.findAllByRestaurantId(1004L)).willReturn(mockMenuItems); List&lt;MenuItem&gt; menuItems = menuItemService.getMenuItems(1004L); MenuItem menuItem = menuItems.get(0); assertThat(menuItem.getName()).isEqualTo(&quot;Kimchi&quot;);&#125; public List&lt;MenuItem&gt; getMenuItems(Long restaurantId) &#123; return menuItemRepository.findAllByRestaurantId(restaurantId);&#125; ë¦¬ë·° ì •ë³´ ê°€ì ¸ì˜¤ê¸°@GetMapping(&quot;/reviews&quot;)public List&lt;Review&gt; list()&#123; List&lt;Review&gt; reviews = reivewService.getReviews(); return reviews;&#125; @Testpublic void ë ˆìŠ¤í† ë‘ì—_í•´ë‹¹ë˜ëŠ”_ë¦¬ë·°ë“¤ì„_ê°€ì ¸ì˜¨ë‹¤() throws Exception &#123; List&lt;Review&gt; mockReviews = new ArrayList&lt;&gt;(); mockReviews.add(Review.builder() .description(&quot;Cool!&quot;) .build()); given(reviewService.getReviews()).willReturn(mockReviews); mockMvc.perform(get(&quot;/reviews&quot;)) .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;Cool!&quot;)));&#125; public List&lt;Review&gt; getReviews() &#123; return reviewRepository.findAll();&#125; @Testpublic void ë¦¬ë·°ë“¤ì„_ê°€ì ¸ì˜¨ë‹¤()&#123; List&lt;Review&gt; mockReviews = new ArrayList&lt;&gt;(); mockReviews.add(Review.builder() .description(&quot;Cool!&quot;) .build()); given(reviewRepository.findAll()).willReturn(mockReviews); List&lt;Review&gt; reviews = reviewService.getReviews(); Review review = reviews.get(0); assertThat(review.getDescription()).isEqualTo(&quot;Cool!&quot;);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 6 - ë¦¬ë·° ê¸°ëŠ¥","slug":"spring/fastcampus-eatgo/eat-go6-review","date":"2021-02-04T06:17:44.000Z","updated":"2024-02-26T15:42:56.503Z","comments":true,"path":"2021/02/04/spring/fastcampus-eatgo/eat-go6-review/","link":"","permalink":"https://ckck803.github.io/2021/02/04/spring/fastcampus-eatgo/eat-go6-review/","excerpt":"ìƒˆë¡œìš´ ë¦¬ë·° ìƒì„± ì˜¤ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ control@RestController@RequiredArgsConstructorpublic class ReviewController &#123; private final ReviewService reivewService; @PostMapping(&quot;/restaurants/&#123;restaurantId&#125;/reviews&quot;) public ResponseEntity&lt;?&gt; create( @PathVariable Long restaurantId, @Valid @RequestBody Review resource ) throws URISyntaxException &#123; Review review = reivewService.addReview(restaurantId, resource); String url = &quot;/restaurants/&quot; + restaurantId + &quot;/reviews/&quot; + review.getId(); return ResponseEntity.created(new URI (url)).body(&quot;&#123;&#125;&quot;); &#125;&#125; @WebMvcTest(ReviewController.class)class ReviewControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private ReviewService reviewService; @Test public void ë¦¬ë·°ë¥¼_ìƒì„±í•œë‹¤() throws Exception &#123; given(reviewService.addReview(eq(1L), any())).willReturn( Review.builder() .id(1004L) .name(&quot;JOKER&quot;) .score(3) .description(&quot;Mat-it-da&quot;) .build()); mockMvc.perform(post(&quot;/restaurants/1/reviews&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;name\\&quot;:\\&quot;JOKER\\&quot;, \\&quot;score\\&quot;:3,\\&quot;description\\&quot; : \\&quot;Mat-it-da\\&quot;&#125;&quot;)) .andExpect(status().isCreated()) .andExpect(header().string(&quot;location&quot;, &quot;/restaurants/1/reviews/1004&quot;)); verify(reviewService).addReview(eq(1L), any()); &#125;&#125; Review ë„ë©”ì¸ ê°ì²´ë¥¼ ìƒì„±@Entity@Builder@NoArgsConstructor@AllArgsConstructor@Getter@Setterpublic class Review &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @NotNull private Long restaurantId; @NotEmpty private String name; @NotNull private Integer score; @NotEmpty private String description;&#125; Reviewë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ Repository ìƒì„±@Repositorypublic interface ReviewRepository extends JpaRepository&lt;Review, Long&gt; &#123; List&lt;Review&gt; findAllByRestaurantId(Long restaurantId);&#125; Review Service í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.@Service@RequiredArgsConstructorpublic class ReviewService &#123; private final ReviewRepository reviewRepository; public Review addReview(Long restaurantId, Review review) &#123; review.setRestaurantId(restaurantId); reviewRepository.save(review); return review; &#125;&#125;","text":"ìƒˆë¡œìš´ ë¦¬ë·° ìƒì„± ì˜¤ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ control@RestController@RequiredArgsConstructorpublic class ReviewController &#123; private final ReviewService reivewService; @PostMapping(&quot;/restaurants/&#123;restaurantId&#125;/reviews&quot;) public ResponseEntity&lt;?&gt; create( @PathVariable Long restaurantId, @Valid @RequestBody Review resource ) throws URISyntaxException &#123; Review review = reivewService.addReview(restaurantId, resource); String url = &quot;/restaurants/&quot; + restaurantId + &quot;/reviews/&quot; + review.getId(); return ResponseEntity.created(new URI (url)).body(&quot;&#123;&#125;&quot;); &#125;&#125; @WebMvcTest(ReviewController.class)class ReviewControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private ReviewService reviewService; @Test public void ë¦¬ë·°ë¥¼_ìƒì„±í•œë‹¤() throws Exception &#123; given(reviewService.addReview(eq(1L), any())).willReturn( Review.builder() .id(1004L) .name(&quot;JOKER&quot;) .score(3) .description(&quot;Mat-it-da&quot;) .build()); mockMvc.perform(post(&quot;/restaurants/1/reviews&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;\\&quot;name\\&quot;:\\&quot;JOKER\\&quot;, \\&quot;score\\&quot;:3,\\&quot;description\\&quot; : \\&quot;Mat-it-da\\&quot;&#125;&quot;)) .andExpect(status().isCreated()) .andExpect(header().string(&quot;location&quot;, &quot;/restaurants/1/reviews/1004&quot;)); verify(reviewService).addReview(eq(1L), any()); &#125;&#125; Review ë„ë©”ì¸ ê°ì²´ë¥¼ ìƒì„±@Entity@Builder@NoArgsConstructor@AllArgsConstructor@Getter@Setterpublic class Review &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @NotNull private Long restaurantId; @NotEmpty private String name; @NotNull private Integer score; @NotEmpty private String description;&#125; Reviewë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ Repository ìƒì„±@Repositorypublic interface ReviewRepository extends JpaRepository&lt;Review, Long&gt; &#123; List&lt;Review&gt; findAllByRestaurantId(Long restaurantId);&#125; Review Service í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.@Service@RequiredArgsConstructorpublic class ReviewService &#123; private final ReviewRepository reviewRepository; public Review addReview(Long restaurantId, Review review) &#123; review.setRestaurantId(restaurantId); reviewRepository.save(review); return review; &#125;&#125; ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±class ReviewServiceTest &#123; @Mock private ReviewRepository reviewRepository; private ReviewService reviewService; @BeforeEach public void setUp()&#123; MockitoAnnotations.initMocks(this); reviewService = new ReviewService(reviewRepository); &#125; @Test public void ë¦¬ë·°ë¥¼_ì¶”ê°€í•œë‹¤()&#123; Review review = Review.builder() .name(&quot;JOKER&quot;) .score(3) .description(&quot;Mat-it-da&quot;) .build(); reviewService.addReview(1004L, review); verify(reviewRepository).save(any()); &#125;&#125; ì˜¬ë°”ë¥´ì§€ ì•ŠëŠ” ë¦¬ë·° ìš”ì²­ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void ì˜¬ë°”ë¥´ì§€_ì•ŠëŠ”_ë¦¬ë·°ìƒì„±_ìš”ì²­() throws Exception &#123; mockMvc.perform(post(&quot;/restaurants/1/reviews&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;&#123;&#125;&quot;)) .andExpect(status().isBadRequest()); verify(reviewService, never()).addReview(1004L, any());&#125; Restaurant ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ë‚´ì— review ì»¨í…ì¸ public Restaurant getRestaurant(Long id) &#123; Optional&lt;Restaurant&gt; optional = restaurantRepository.findById(id); if (optional.isPresent()) &#123; Restaurant restaurant = optional.get(); // í•´ë‹¹ restaurant idê°’ì„ ê°–ëŠ” ëª¨ë“  Menuë“¤ì„ ê°€ì ¸ì˜¨ë‹¤. List&lt;MenuItem&gt; menuItems = menuItemRepository.findAllByRestaurantId(id); restaurant.setMenuItems(menuItems); // í•´ë‹¹ restaurant idê°’ì„ ê°–ëŠ” ëª¨ë“  reviewë“¤ì„ ê°€ì ¸ì˜¨ë‹¤. List&lt;Review&gt; reviews = reviewRepository.findAllByRestaurantId(id); restaurant.setReviews(reviews); return restaurant; &#125;else&#123; throw new RestaurantNotFoundException(id); &#125;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void íŠ¹ì •_ë ˆìŠ¤í† ë‘ì„_ê°€ì ¸ì˜¨ë‹¤() &#123; Restaurant restaurant = restaurantService.getRestaurant(1004L); // ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ”ì§€ í™•ì¸í•œë‹¤. verify(restaurantRepository).findById(eq(1004L)); // ë©”ë‰´ì •ë³´ë„ ê°€ì ¸ì˜¤ëŠ”ì§€ í™•ì¸í•œë‹¤. verify(menuItemRepository).findAllByRestaurantId(eq(1004L)); // ë¦¬ë·°ì •ë³´ë„ ê°€ì ¸ì˜¤ëŠ”ì§€ í™•ì¸í•œë‹¤. verify(reviewRepository).findAllByRestaurantId(eq(1004L)); // ê°€ì ¸ì˜¨ ì •ë³´ë“¤ì„ í™•ì¸í•œë‹¤. // ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ í™•ì¸í•œë‹¤. assertThat(restaurant.getId()).isEqualTo(1004L); // ë©”ë‰´ì •ë³´ë“¤ì„ í™•ì¸í•œë‹¤. MenuItem menuItem = restaurant.getMenuItems().get(0); assertThat(menuItem.getName()).isEqualTo(&quot;Kimchi&quot;); // ë¦¬ë·°ì •ë³´ë“¤ì„ í™•ì¸í•œë‹¤. Review review = restaurant.getReviews().get(0); assertThat(review.getDescription()).isEqualTo(&quot;Bad&quot;);&#125; ë ˆìŠ¤í† ë‘ ìš”ì²­ì—ì„œ Reviewì •ë³´ê°€ ì¡°íšŒë˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void íŠ¹ì •_ê°€ê²Œ_ìƒì„¸ì •ë³´ë¥¼_ê°€ì ¸ì˜¨ë‹¤() throws Exception &#123; Restaurant restaurant = Restaurant.builder() .id(1004L) .name(&quot;JOKER House&quot;) .address(&quot;Seoul&quot;) .build(); // ë©”ë‰´ ì •ë³´ë¥¼ ìƒì„± MenuItem menuItem = MenuItem.builder() .name(&quot;Kimchi&quot;) .build(); // ë¦¬ë·° ì •ë³´ë¥¼ ìƒì„± Review review = Review.builder() .name(&quot;JOKER&quot;) .score(5) .description(&quot;Great!&quot;) .build(); // ë ˆìŠ¤í† ë‘ ê°ì²´ì— ë©”ë‰´ ì •ë³´ë“¤ì„ ì €ì¥í•œë‹¤. restaurant.setMenuItems(Arrays.asList(menuItem)); // ë ˆìŠ¤í† ë‘ ê°ì²´ì— ë¦¬ë·° ì •ë³´ë“¤ì„ ì €ì¥í•œë‹¤. restaurant.setReviews(Arrays.asList(review)); given(restaurantService.getRestaurant(1004L)).willReturn(restaurant); ResultActions resultActions = mockMvc.perform(get(&quot;/restaurants/1004&quot;)); resultActions .andExpect(status().isOk()) // ë ˆìŠ¤í† ë‘ ì •ë³´ê°€ ë“¤ì–´ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. .andExpect(content().string(containsString(&quot;\\&quot;id\\&quot;:1004&quot;))) .andExpect(content().string(containsString(&quot;\\&quot;name\\&quot;:\\&quot;JOKER House\\&quot;&quot;))) // ë©”ë‰´ ì •ë³´ê°€ ë“¤ì–´ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. .andExpect(content().string(containsString(&quot;Kimchi&quot;))) // ë¦¬ë·° ì •ë³´ê°€ ë“¤ì–´ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. .andExpect(content().string(containsString(&quot;Great!&quot;))) .andDo(print());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 5 - ë©”ë‰´ ê´€ë¦¬","slug":"spring/fastcampus-eatgo/eat-go5-menuitems","date":"2021-02-04T03:27:21.000Z","updated":"2024-02-26T15:42:50.203Z","comments":true,"path":"2021/02/04/spring/fastcampus-eatgo/eat-go5-menuitems/","link":"","permalink":"https://ckck803.github.io/2021/02/04/spring/fastcampus-eatgo/eat-go5-menuitems/","excerpt":"ë©”ë‰´ë¥¼ ì¶”ê°€í•˜ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ control@RestController@RequiredArgsConstructorpublic class MenuItemController &#123; private final MenuItemService menuItemService; @PatchMapping(&quot;/restaurants/&#123;restaurantId&#125;/menuitems&quot;) public String buikUpdate()&#123; List&lt;MenuItem&gt; menuItems = new ArrayList&lt;&gt;(); menuItemService.bulkUpdate(menuItems); return &quot;&quot;; &#125;&#125; @WebMvcTest(MenuItemController.class)class MenuItemControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private MenuItemService menuItemService; @Test public void bulkUpdate() throws Exception &#123; ResultActions resultActions = mockMvc.perform(patch(&quot;/restaurants/1/menuitems&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;[]&quot;)); resultActions .andExpect(status().isOk()); verify(menuItemService).bulkUpdate(any()); &#125;&#125; @Service@RequiredArgsConstructorpublic class MenuItemService &#123; private final MenuItemRepository menuItemRepository; public void bulkUpdate(Long restaurantId, List&lt;MenuItem&gt; menuItems) &#123; for(MenuItem menuItem : menuItems)&#123; menuItem.setRestaurantId(restaurantId); menuItemRepository.save(menuItem); &#125; &#125;&#125; class MenuItemServiceTest &#123; private MenuItemService menuItemService; @Mock private MenuItemRepository menuItemRepository; @BeforeEach public void setUp()&#123; MockitoAnnotations.initMocks(this); menuItemService = new MenuItemService(menuItemRepository); &#125; @Test public void bulkUpdate() &#123; List&lt;MenuItem&gt; menuItems = new ArrayList&lt;&gt;(); menuItems.add(MenuItem.builder() .name(&quot;Kimchi&quot;) .build()); menuItems.add(MenuItem.builder() .name(&quot;Gukbob&quot;) .build()); menuItemService.bulkUpdate(1L, menuItems); verify(menuItemRepository, times(2)).save(any());; &#125;&#125; ë©”ë‰´ ì‚­ì œ ìš”ì²­@Builder@Entity@Setter@Getter@NoArgsConstructor@AllArgsConstructorpublic class MenuItem &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private Long restaurantId; private String name; @Transient private boolean destroy; public MenuItem(String name)&#123; this.name = name; &#125;&#125; @Service@RequiredArgsConstructorpublic class MenuItemService &#123; private final MenuItemRepository menuItemRepository; public void bulkUpdate(Long restaurantId, List&lt;MenuItem&gt; menuItems) &#123; for(MenuItem menuItem : menuItems)&#123; updateOrDeleteMenuItems(restaurantId, menuItem); &#125; &#125; private void updateOrDeleteMenuItems(Long restaurantId, MenuItem menuItem) &#123; if(menuItem.isDestroy())&#123; menuItemRepository.deleteById(menuItem.getId()); &#125;else &#123; menuItem.setRestaurantId(restaurantId); menuItemRepository.save(menuItem); &#125; &#125;&#125; @Testpublic void ë©”ë‰´ë¥¼_ì‚­ì œí•œë‹¤() &#123; List&lt;MenuItem&gt; menuItems = new ArrayList&lt;&gt;(); menuItems.add(MenuItem.builder() .name(&quot;Kimchi&quot;) .build()); menuItems.add(MenuItem.builder() .name(&quot;Gukbob&quot;) .build()); menuItems.add(MenuItem.builder() .id(1004L) .destroy(true) .build()); menuItemService.bulkUpdate(1L, menuItems); verify(menuItemRepository, times(2)).save(any()); verify(menuItemRepository, times(1)).deleteById(eq(1004L));&#125;","text":"ë©”ë‰´ë¥¼ ì¶”ê°€í•˜ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ control@RestController@RequiredArgsConstructorpublic class MenuItemController &#123; private final MenuItemService menuItemService; @PatchMapping(&quot;/restaurants/&#123;restaurantId&#125;/menuitems&quot;) public String buikUpdate()&#123; List&lt;MenuItem&gt; menuItems = new ArrayList&lt;&gt;(); menuItemService.bulkUpdate(menuItems); return &quot;&quot;; &#125;&#125; @WebMvcTest(MenuItemController.class)class MenuItemControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private MenuItemService menuItemService; @Test public void bulkUpdate() throws Exception &#123; ResultActions resultActions = mockMvc.perform(patch(&quot;/restaurants/1/menuitems&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;[]&quot;)); resultActions .andExpect(status().isOk()); verify(menuItemService).bulkUpdate(any()); &#125;&#125; @Service@RequiredArgsConstructorpublic class MenuItemService &#123; private final MenuItemRepository menuItemRepository; public void bulkUpdate(Long restaurantId, List&lt;MenuItem&gt; menuItems) &#123; for(MenuItem menuItem : menuItems)&#123; menuItem.setRestaurantId(restaurantId); menuItemRepository.save(menuItem); &#125; &#125;&#125; class MenuItemServiceTest &#123; private MenuItemService menuItemService; @Mock private MenuItemRepository menuItemRepository; @BeforeEach public void setUp()&#123; MockitoAnnotations.initMocks(this); menuItemService = new MenuItemService(menuItemRepository); &#125; @Test public void bulkUpdate() &#123; List&lt;MenuItem&gt; menuItems = new ArrayList&lt;&gt;(); menuItems.add(MenuItem.builder() .name(&quot;Kimchi&quot;) .build()); menuItems.add(MenuItem.builder() .name(&quot;Gukbob&quot;) .build()); menuItemService.bulkUpdate(1L, menuItems); verify(menuItemRepository, times(2)).save(any());; &#125;&#125; ë©”ë‰´ ì‚­ì œ ìš”ì²­@Builder@Entity@Setter@Getter@NoArgsConstructor@AllArgsConstructorpublic class MenuItem &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private Long restaurantId; private String name; @Transient private boolean destroy; public MenuItem(String name)&#123; this.name = name; &#125;&#125; @Service@RequiredArgsConstructorpublic class MenuItemService &#123; private final MenuItemRepository menuItemRepository; public void bulkUpdate(Long restaurantId, List&lt;MenuItem&gt; menuItems) &#123; for(MenuItem menuItem : menuItems)&#123; updateOrDeleteMenuItems(restaurantId, menuItem); &#125; &#125; private void updateOrDeleteMenuItems(Long restaurantId, MenuItem menuItem) &#123; if(menuItem.isDestroy())&#123; menuItemRepository.deleteById(menuItem.getId()); &#125;else &#123; menuItem.setRestaurantId(restaurantId); menuItemRepository.save(menuItem); &#125; &#125;&#125; @Testpublic void ë©”ë‰´ë¥¼_ì‚­ì œí•œë‹¤() &#123; List&lt;MenuItem&gt; menuItems = new ArrayList&lt;&gt;(); menuItems.add(MenuItem.builder() .name(&quot;Kimchi&quot;) .build()); menuItems.add(MenuItem.builder() .name(&quot;Gukbob&quot;) .build()); menuItems.add(MenuItem.builder() .id(1004L) .destroy(true) .build()); menuItemService.bulkUpdate(1L, menuItems); verify(menuItemRepository, times(2)).save(any()); verify(menuItemRepository, times(1)).deleteById(eq(1004L));&#125; @Builder@Entity@Setter@Getter@NoArgsConstructor@AllArgsConstructorpublic class MenuItem &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private Long restaurantId; private String name; @Transient @JsonInclude(JsonInclude.Include.NON_DEFAULT) private boolean destroy; public MenuItem(String name)&#123; this.name = name; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 4 - ì˜ˆì™¸ ì²˜ë¦¬","slug":"spring/fastcampus-eatgo/eat-go4-exception","date":"2021-02-04T00:37:02.000Z","updated":"2024-02-26T15:42:39.467Z","comments":true,"path":"2021/02/04/spring/fastcampus-eatgo/eat-go4-exception/","link":"","permalink":"https://ckck803.github.io/2021/02/04/spring/fastcampus-eatgo/eat-go4-exception/","excerpt":"ì—†ëŠ” í˜ì´ì§€ ìš”ì²­ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬@Testpublic void ì—†ëŠ”_í˜ì´ì§€ì—ëŒ€í•œ_ì˜ˆì™¸ì²˜ë¦¬ë¥¼_í•œë‹¤() throws Exception&#123; given(restaurantService.getRestaurant(404L)).willThrow(new RestaurantNotFoundException(404L)); ResultActions resultActions = mockMvc.perform(get(&quot;/restaurants/404&quot;)); resultActions .andExpect(status().isNotFound()) .andExpect(content().string(&quot;&#123;&#125;&quot;));&#125; public class RestaurantNotFoundException extends RuntimeException&#123; public RestaurantNotFoundException(Long id) &#123; super(&quot;Could not find Restaurant&quot; + id ); &#125;&#125; @ControllerAdvicepublic class RestaurantErrorAdvice &#123; @ResponseBody @ResponseStatus(HttpStatus.NOT_FOUND) @ExceptionHandler(RestaurantNotFoundException.class) public String handleNotFound()&#123; return &quot;&#123;&#125;&quot;; &#125;&#125; Service ê³„ì¸µì—ì„œì˜ ì˜ˆì™¸ì²˜ë¦¬@Testpublic void ì—†ëŠ”_ë ˆìŠ¤í† ë‘ì„_ê°€ì ¸ì˜¨ë‹¤() &#123; assertThatThrownBy(() -&gt; &#123; Restaurant restaurant = restaurantService.getRestaurant(404L); &#125;).isInstanceOf(RestaurantNotFoundException.class);// Restaurant restaurant = restaurantService.getRestaurant(404L);&#125; public Restaurant getRestaurant(Long id) &#123; Optional&lt;Restaurant&gt; optional = restaurantRepository.findById(id); if (optional.isPresent()) &#123; List&lt;MenuItem&gt; menuItems = menuItemRepository.findAllByRestaurantId(id); Restaurant restaurant = new Restaurant(); restaurant.setMenuItems(menuItems); return restaurant; &#125;else&#123; throw new RestaurantNotFoundException(id); &#125;&#125;","text":"ì—†ëŠ” í˜ì´ì§€ ìš”ì²­ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬@Testpublic void ì—†ëŠ”_í˜ì´ì§€ì—ëŒ€í•œ_ì˜ˆì™¸ì²˜ë¦¬ë¥¼_í•œë‹¤() throws Exception&#123; given(restaurantService.getRestaurant(404L)).willThrow(new RestaurantNotFoundException(404L)); ResultActions resultActions = mockMvc.perform(get(&quot;/restaurants/404&quot;)); resultActions .andExpect(status().isNotFound()) .andExpect(content().string(&quot;&#123;&#125;&quot;));&#125; public class RestaurantNotFoundException extends RuntimeException&#123; public RestaurantNotFoundException(Long id) &#123; super(&quot;Could not find Restaurant&quot; + id ); &#125;&#125; @ControllerAdvicepublic class RestaurantErrorAdvice &#123; @ResponseBody @ResponseStatus(HttpStatus.NOT_FOUND) @ExceptionHandler(RestaurantNotFoundException.class) public String handleNotFound()&#123; return &quot;&#123;&#125;&quot;; &#125;&#125; Service ê³„ì¸µì—ì„œì˜ ì˜ˆì™¸ì²˜ë¦¬@Testpublic void ì—†ëŠ”_ë ˆìŠ¤í† ë‘ì„_ê°€ì ¸ì˜¨ë‹¤() &#123; assertThatThrownBy(() -&gt; &#123; Restaurant restaurant = restaurantService.getRestaurant(404L); &#125;).isInstanceOf(RestaurantNotFoundException.class);// Restaurant restaurant = restaurantService.getRestaurant(404L);&#125; public Restaurant getRestaurant(Long id) &#123; Optional&lt;Restaurant&gt; optional = restaurantRepository.findById(id); if (optional.isPresent()) &#123; List&lt;MenuItem&gt; menuItems = menuItemRepository.findAllByRestaurantId(id); Restaurant restaurant = new Restaurant(); restaurant.setMenuItems(menuItems); return restaurant; &#125;else&#123; throw new RestaurantNotFoundException(id); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 3","slug":"spring/fastcampus-eatgo/eat-go-client","date":"2021-02-03T15:59:58.000Z","updated":"2024-02-26T15:42:33.690Z","comments":true,"path":"2021/02/04/spring/fastcampus-eatgo/eat-go-client/","link":"","permalink":"https://ckck803.github.io/2021/02/04/spring/fastcampus-eatgo/eat-go-client/","excerpt":"&lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;app&quot;&gt;Hello, world!&lt;/div&gt;&lt;script src=&quot;./src/index.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; (async () =&gt; &#123; const url = &quot;http://localhost:8080/restaurants&quot;; const response = await fetch(url); const restaurants = await response.json(); console.log(restaurants); const element = document.getElementById(&#x27;app&#x27;); element.innerHTML = JSON.stringify(restaurants);&#125;)(); (async () =&gt; &#123; const url = &quot;http://localhost:8080/restaurants&quot;; const response = await fetch(url); const restaurants = await response.json(); console.log(restaurants); const element = document.getElementById(&#x27;app&#x27;); element.innerHTML = ` $&#123;restaurants[0].id&#125; $&#123;restaurants[0].name&#125; `&#125;)(); (async () =&gt; &#123; const url = &quot;http://localhost:8080/restaurants&quot;; const response = await fetch(url); const restaurants = await response.json(); console.log(restaurants); const element = document.getElementById(&#x27;app&#x27;); element.innerHTML = ` $&#123;restaurants.map(restaurant =&gt; ` &lt;p&gt; $&#123;restaurant.id&#125; $&#123;restaurant.name&#125; $&#123;restaurant.address&#125; &lt;/p&gt; `).join(&#x27;&#x27;)&#125; `;&#125;)();","text":"&lt;!DOCTYPE html&gt;&lt;html lang=&quot;ko&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;app&quot;&gt;Hello, world!&lt;/div&gt;&lt;script src=&quot;./src/index.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; (async () =&gt; &#123; const url = &quot;http://localhost:8080/restaurants&quot;; const response = await fetch(url); const restaurants = await response.json(); console.log(restaurants); const element = document.getElementById(&#x27;app&#x27;); element.innerHTML = JSON.stringify(restaurants);&#125;)(); (async () =&gt; &#123; const url = &quot;http://localhost:8080/restaurants&quot;; const response = await fetch(url); const restaurants = await response.json(); console.log(restaurants); const element = document.getElementById(&#x27;app&#x27;); element.innerHTML = ` $&#123;restaurants[0].id&#125; $&#123;restaurants[0].name&#125; `&#125;)(); (async () =&gt; &#123; const url = &quot;http://localhost:8080/restaurants&quot;; const response = await fetch(url); const restaurants = await response.json(); console.log(restaurants); const element = document.getElementById(&#x27;app&#x27;); element.innerHTML = ` $&#123;restaurants.map(restaurant =&gt; ` &lt;p&gt; $&#123;restaurant.id&#125; $&#123;restaurant.name&#125; $&#123;restaurant.address&#125; &lt;/p&gt; `).join(&#x27;&#x27;)&#125; `;&#125;)();","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° 2 - ë©”ë‰´ ì •ë³´ ì¶”ê°€(ê´€ë¦¬ì)","slug":"spring/fastcampus-eatgo/2. menuitem/eat-go2-restaurant","date":"2021-02-03T04:46:52.000Z","updated":"2024-02-26T15:42:29.516Z","comments":true,"path":"2021/02/03/spring/fastcampus-eatgo/2. menuitem/eat-go2-restaurant/","link":"","permalink":"https://ckck803.github.io/2021/02/03/spring/fastcampus-eatgo/2.%20menuitem/eat-go2-restaurant/","excerpt":"ë ˆìŠ¤í† ë‘ì— ë©”ë‰´ì •ë³´ë¥¼ ë‹´ê¸°@Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class Restaurant &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @NotNull private Long categoryId; @NotEmpty private String name; @NotEmpty private String address; @Transient @JsonInclude(JsonInclude.Include.NON_NULL) private List&lt;MenuItem&gt; menuItems; public void addMenuItem(MenuItem menuItem)&#123; menuItems.add(menuItem); &#125; public void setMenuItems(List&lt;MenuItem&gt; menuItems)&#123; this.menuItems = new ArrayList&lt;&gt;(menuItems); &#125; public String getInformation()&#123; return name + &quot; in &quot; + address; &#125;&#125; ë©”ë‰´ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ê³ ìˆëŠ” MenuItem í´ë˜ìŠ¤@Builder@Entity@Setter@Getter@NoArgsConstructor@AllArgsConstructorpublic class MenuItem &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private Long restaurantId; private String name; @Transient @JsonInclude(JsonInclude.Include.NON_DEFAULT) private boolean destroy; public MenuItem(String name)&#123; this.name = name; &#125;&#125; ë ˆìŠ¤í† ë‘ì—ì„œ ë©”ë‰´ì •ë³´ ê°€ì ¸ì˜¤ê¸°public interface MenuItemRepository extends JpaRepository&lt;MenuItem, Long&gt; &#123; List&lt;MenuItem&gt; findAllByRestaurantId(Long restaurantId);&#125; ë ˆìŠ¤í† ë‘ì— ë©”ë‰´ë“±ë¡ ìš”ì²­ ë³´ë‚´ê¸°ì¶”ê°€í•˜ê³ ì í•˜ëŠ” ë°ì´í„°ëŠ” Http Bodyì— ë„£ì–´ì„œ ë³´ë‚¸ë‹¤.","text":"ë ˆìŠ¤í† ë‘ì— ë©”ë‰´ì •ë³´ë¥¼ ë‹´ê¸°@Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class Restaurant &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @NotNull private Long categoryId; @NotEmpty private String name; @NotEmpty private String address; @Transient @JsonInclude(JsonInclude.Include.NON_NULL) private List&lt;MenuItem&gt; menuItems; public void addMenuItem(MenuItem menuItem)&#123; menuItems.add(menuItem); &#125; public void setMenuItems(List&lt;MenuItem&gt; menuItems)&#123; this.menuItems = new ArrayList&lt;&gt;(menuItems); &#125; public String getInformation()&#123; return name + &quot; in &quot; + address; &#125;&#125; ë©”ë‰´ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ê³ ìˆëŠ” MenuItem í´ë˜ìŠ¤@Builder@Entity@Setter@Getter@NoArgsConstructor@AllArgsConstructorpublic class MenuItem &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private Long restaurantId; private String name; @Transient @JsonInclude(JsonInclude.Include.NON_DEFAULT) private boolean destroy; public MenuItem(String name)&#123; this.name = name; &#125;&#125; ë ˆìŠ¤í† ë‘ì—ì„œ ë©”ë‰´ì •ë³´ ê°€ì ¸ì˜¤ê¸°public interface MenuItemRepository extends JpaRepository&lt;MenuItem, Long&gt; &#123; List&lt;MenuItem&gt; findAllByRestaurantId(Long restaurantId);&#125; ë ˆìŠ¤í† ë‘ì— ë©”ë‰´ë“±ë¡ ìš”ì²­ ë³´ë‚´ê¸°ì¶”ê°€í•˜ê³ ì í•˜ëŠ” ë°ì´í„°ëŠ” Http Bodyì— ë„£ì–´ì„œ ë³´ë‚¸ë‹¤. @RestController@RequiredArgsConstructorpublic class MenuItemController &#123; private final MenuItemService menuItemService; @PatchMapping(&quot;/restaurants/&#123;restaurantId&#125;/menuitems&quot;) public String bulkUpdate(@PathVariable Long restaurantId , @RequestBody List&lt;MenuItem&gt; menuItems)&#123; menuItemService.bulkUpdate(restaurantId, menuItems); return &quot;&quot;; &#125;&#125; ë ˆìŠ¤í† ë‘ ë©”ë‰´ë“±ë¡ ìš”ì²­ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ@WebMvcTest(MenuItemController.class)class MenuItemControllerTest &#123; @Autowired private MockMvc mockMvc; @MockBean private MenuItemService menuItemService; @Test public void bulkUpdate() throws Exception &#123; ResultActions resultActions = mockMvc.perform(patch(&quot;/restaurants/1/menuitems&quot;) .contentType(MediaType.APPLICATION_JSON) .content(&quot;[]&quot;)); resultActions .andExpect(status().isOk()); verify(menuItemService).bulkUpdate(eq(1L), any()); &#125;&#125; ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ê°€ì ¸ì™€ ë©”ë‰´ì •ë³´ ë„£ê¸°@Service@RequiredArgsConstructorpublic class MenuItemService &#123; private final MenuItemRepository menuItemRepository; public void bulkUpdate(Long restaurantId, List&lt;MenuItem&gt; menuItems) &#123; for(MenuItem menuItem : menuItems)&#123; updateOrDeleteMenuItems(restaurantId, menuItem); &#125; &#125; private void updateOrDeleteMenuItems(Long restaurantId, MenuItem menuItem) &#123; if(menuItem.isDestroy())&#123; menuItemRepository.deleteById(menuItem.getId()); &#125;else &#123; menuItem.setRestaurantId(restaurantId); menuItemRepository.save(menuItem); &#125; &#125;&#125; @Testpublic void bulkUpdate() &#123; List&lt;MenuItem&gt; menuItems = new ArrayList&lt;&gt;(); menuItems.add(MenuItem.builder() .name(&quot;Kimchi&quot;) .build()); menuItems.add(MenuItem.builder() .name(&quot;Gukbob&quot;) .build()); menuItemService.bulkUpdate(1L, menuItems); verify(menuItemRepository, times(2)).save(any());&#125;@Testpublic void ë©”ë‰´ë¥¼_ì‚­ì œí•œë‹¤() &#123; List&lt;MenuItem&gt; menuItems = new ArrayList&lt;&gt;(); menuItems.add(MenuItem.builder() .name(&quot;Kimchi&quot;) .build()); menuItems.add(MenuItem.builder() .name(&quot;Gukbob&quot;) .build()); menuItems.add(MenuItem.builder() .id(1004L) .destroy(true) .build()); menuItemService.bulkUpdate(1L, menuItems); verify(menuItemRepository, times(2)).save(any()); verify(menuItemRepository, times(1)).deleteById(eq(1004L));&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ 1 - ë ˆìŠ¤í† ë‘ ê´€ë¦¬(ì‚¬ìš©ì) ë ˆìŠ¤í† ë‘ ì •ë³´ ê°€ì ¸ì˜¤ê¸°","slug":"spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-customer","date":"2021-02-03T01:20:02.000Z","updated":"2024-02-26T15:42:14.859Z","comments":true,"path":"2021/02/03/spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-customer/","link":"","permalink":"https://ckck803.github.io/2021/02/03/spring/fastcampus-eatgo/1.%20restaurant/eat-go-restaurant-customer/","excerpt":"ì‚¬ìš©ì í˜ì´ì§€ì‚¬ìš©ìì˜ ê²½ìš° ë ˆìŠ¤í† ë‘ì„ ê´€ë¦¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í• í•„ìš”ëŠ” ì—†ê³  ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ë§Œ ìˆìœ¼ë©´ ëœë‹¤. ëª¨ë“  Restaurantì •ë³´ ê°€ì ¸ì˜¤ê¸° íŠ¹ì • Restaurantì •ë³´ ê°€ì ¸ì˜¤ê¸° Request Parameterë¥¼ í†µí•œ ë ˆìŠ¤í† ë‘ ì¡°íšŒ controlìš”ì²­ì‹œ RequestParameterë¥¼ í†µí•´ ì›í•˜ëŠ” ì§€ì—­, ì¹´í…Œê³ ë¦¬ë¥¼ í†µí•´ í•´ë‹¹ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ëª¨ë‘ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ í•œë‹¤. íŠ¹ì • Restaurant ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ë“¤ì€ ê´€ë¦¬ìì—ì„œ ë§Œë“¤ì—ˆë˜ ë‚´ìš©ê³¼ ê°™ìœ¼ë¯€ë¡œ ìƒê°í•œë‹¤. @CrossOrigin@RestController@RequiredArgsConstructorpublic class RestaurantController &#123; private final RestaurantService restaurantService; @GetMapping(&quot;/restaurants&quot;) public List&lt;Restaurant&gt; list(@RequestParam(&quot;region&quot;) String region, @RequestParam(&quot;category&quot;) Long category) &#123; List&lt;Restaurant&gt; restaurants = restaurantService.getRestaurants(region, category); return restaurants; &#125; @GetMapping(&quot;/restaurants/&#123;id&#125;&quot;) public Restaurant detail(@PathVariable Long id) throws Exception &#123; Restaurant restaurant = restaurantService.getRestaurant(id); return restaurant; &#125;&#125; Request Parameterë¥¼ í†µí•œ ë ˆìŠ¤í† ë‘ ì¡°íšŒ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void RequestParameterë¥¼_ì´ìš©í•œ_listë¥¼_í™•ì¸í•œë‹¤() throws Exception &#123; List&lt;Restaurant&gt; restaurants = new ArrayList&lt;&gt;(); restaurants.add(Restaurant.builder() .id(1004L) .categoryId(1L) .name(&quot;JOKER House&quot;) .address(&quot;Seoul&quot;) .build()); given(restaurantService.getRestaurants(&quot;Seoul&quot;, 1L)).willReturn(restaurants); ResultActions resultActions = mockMvc.perform(get(&quot;/restaurants?region=Seoul&amp;category=1&quot;)); resultActions .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;\\&quot;id\\&quot;:1004&quot;))) .andExpect(content().string(containsString(&quot;\\&quot;name\\&quot;:\\&quot;JOKER House\\&quot;&quot;))) .andDo(print());&#125;","text":"ì‚¬ìš©ì í˜ì´ì§€ì‚¬ìš©ìì˜ ê²½ìš° ë ˆìŠ¤í† ë‘ì„ ê´€ë¦¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í• í•„ìš”ëŠ” ì—†ê³  ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ë§Œ ìˆìœ¼ë©´ ëœë‹¤. ëª¨ë“  Restaurantì •ë³´ ê°€ì ¸ì˜¤ê¸° íŠ¹ì • Restaurantì •ë³´ ê°€ì ¸ì˜¤ê¸° Request Parameterë¥¼ í†µí•œ ë ˆìŠ¤í† ë‘ ì¡°íšŒ controlìš”ì²­ì‹œ RequestParameterë¥¼ í†µí•´ ì›í•˜ëŠ” ì§€ì—­, ì¹´í…Œê³ ë¦¬ë¥¼ í†µí•´ í•´ë‹¹ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ëª¨ë‘ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ í•œë‹¤. íŠ¹ì • Restaurant ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ë“¤ì€ ê´€ë¦¬ìì—ì„œ ë§Œë“¤ì—ˆë˜ ë‚´ìš©ê³¼ ê°™ìœ¼ë¯€ë¡œ ìƒê°í•œë‹¤. @CrossOrigin@RestController@RequiredArgsConstructorpublic class RestaurantController &#123; private final RestaurantService restaurantService; @GetMapping(&quot;/restaurants&quot;) public List&lt;Restaurant&gt; list(@RequestParam(&quot;region&quot;) String region, @RequestParam(&quot;category&quot;) Long category) &#123; List&lt;Restaurant&gt; restaurants = restaurantService.getRestaurants(region, category); return restaurants; &#125; @GetMapping(&quot;/restaurants/&#123;id&#125;&quot;) public Restaurant detail(@PathVariable Long id) throws Exception &#123; Restaurant restaurant = restaurantService.getRestaurant(id); return restaurant; &#125;&#125; Request Parameterë¥¼ í†µí•œ ë ˆìŠ¤í† ë‘ ì¡°íšŒ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void RequestParameterë¥¼_ì´ìš©í•œ_listë¥¼_í™•ì¸í•œë‹¤() throws Exception &#123; List&lt;Restaurant&gt; restaurants = new ArrayList&lt;&gt;(); restaurants.add(Restaurant.builder() .id(1004L) .categoryId(1L) .name(&quot;JOKER House&quot;) .address(&quot;Seoul&quot;) .build()); given(restaurantService.getRestaurants(&quot;Seoul&quot;, 1L)).willReturn(restaurants); ResultActions resultActions = mockMvc.perform(get(&quot;/restaurants?region=Seoul&amp;category=1&quot;)); resultActions .andExpect(status().isOk()) .andExpect(content().string(containsString(&quot;\\&quot;id\\&quot;:1004&quot;))) .andExpect(content().string(containsString(&quot;\\&quot;name\\&quot;:\\&quot;JOKER House\\&quot;&quot;))) .andDo(print());&#125; Serviceì—ì„œ Regionê³¼ CategoryIdë¥¼ ì´ìš©í•œ ì¡°íšŒ ë©”ì†Œë“œ êµ¬í˜„controlë¡œë¶€í„° ë°›ì€ regionê³¼ categoryIdë¥¼ ê°–ê³  í•´ë‹¹ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ê°€ì ¸ì™€ ë°˜í™˜í•œë‹¤. ë§Œì•½ ë ˆìŠ¤í† ë‘ ì •ë³´ê°€ ì—†ë‹¤ê³  í•˜ë©´ RestaurantNotFoundExceptionì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¨ë‹¤. @Service@RequiredArgsConstructorpublic class RestaurantService &#123; private final RestaurantRepository restaurantRepository; public List&lt;Restaurant&gt; getRestaurants(String region, long categoryId) &#123; List&lt;Restaurant&gt; restaurants = restaurantRepository.findAllByAddressContainingAndCategoryId(region, categoryId); return restaurants; &#125; public Restaurant getRestaurant(Long id) &#123; Optional&lt;Restaurant&gt; optional = restaurantRepository.findById(id); if (optional.isPresent()) &#123; Restaurant restaurant = optional.get(); return restaurant; &#125;else&#123; throw new RestaurantNotFoundException(id); &#125; &#125;&#125; public List&lt;Restaurant&gt; getRestaurants(String region, long categoryId) &#123; List&lt;Restaurant&gt; restaurants = restaurantRepository.findAllByAddressContainingAndCategoryId(region, categoryId); return restaurants;&#125; Repositoryì— methodì¶”ê°€@Repositorypublic interface RestaurantRepository extends JpaRepository&lt;Restaurant, Long&gt; &#123; List&lt;Restaurant&gt; findAllByAddressContainingAndCategoryId(String region, long categoryId);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ 1 - ë ˆìŠ¤í† ë‘ ê´€ë¦¬(ê´€ë¦¬ì) ë ˆìŠ¤í† ë‘ ì •ë³´ ì—…ë°ì´íŠ¸","slug":"spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-admin-update","date":"2021-02-03T00:22:02.000Z","updated":"2024-02-26T15:41:57.164Z","comments":true,"path":"2021/02/03/spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-admin-update/","link":"","permalink":"https://ckck803.github.io/2021/02/03/spring/fastcampus-eatgo/1.%20restaurant/eat-go-restaurant-admin-update/","excerpt":"4. ë ˆìŠ¤í† ë‘ ì •ë³´ ì—…ë°ì´íŠ¸ë ˆìŠ¤í† ë‘ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•œ control ì¶”ê°€ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•´ì„œëŠ” ì—…ë°ì´íŠ¸ í•˜ê³ ì í•˜ëŠ” ë ˆìŠ¤í† ë‘ì„ ê°€ì§€ê³  ì™€ì•¼ í•œë‹¤. /restaurantsê²½ë¡œë’¤ì— ë ˆìŠ¤í† ë‘ idë¥¼ ë¶™ì—¬ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ idë¥¼ ì´ìš©í•´ ë ˆìŠ¤í† ë‘ì„ ì°¾ê³  request bodyì— ë“¤ì–´ìˆëŠ” ì •ë³´ë¡œ ë ˆìŠ¤í† ë‘ì„ ì—…ë°ì´íŠ¸ í•œë‹¤. ì—…ë°ì´íŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ Http ë©”ì†Œë“œ ì¤‘ì—ì„œ patchë©”ì†Œë“œë¥¼ ì´ìš©í•  ê²ƒì´ë‹¤. @PatchMapping(&quot;/restaurants/&#123;id&#125;&quot;)public String update(@PathVariable(&quot;id&quot;) Long id, @RequestBody Restaurant restaurant) throws Exception &#123; restaurantService.updateRestaurant(id, restaurant.getName(), restaurant.getAddress()); return &quot;&#123;&#125;&quot;;&#125; ì—…ë°ì´íŠ¸ ìš”ì²­ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void ë ˆìŠ¤í† ë‘ì •ë³´_ì—…ë°ì´íŠ¸() throws Exception &#123; String JOKER = &quot;JOKER Bar&quot;; String Busan = &quot;Busan&quot;; Restaurant restaurant = Restaurant.builder() .categoryId(1L) .name(JOKER) .address(Busan) .build(); String content = objectMapper.writeValueAsString(restaurant); ResultActions resultActions = mockMvc.perform(patch(&quot;/restaurants/1004&quot;) .contentType(MediaType.APPLICATION_JSON) .content(content)); resultActions .andExpect(status().isOk()) .andDo(print()); verify(restaurantService).updateRestaurant(1004L, JOKER, Busan);&#125; ë ˆìŠ¤í† ë‘ ì—…ë°ì´íŠ¸ë¥¼ í•˜ê¸° ìœ„í•œ Service ë©”ì†Œë“œë¨¼ì € idë¥¼ ê°–ê³  ì €ì¥ë¼ ìˆëŠ” í•´ë‹¹ ë ˆìŠ¤í† ë‘ì„ ê°€ì ¸ì˜¨ í›„ ì „ë‹¬ ë°›ì€ nameê°’ê³¼ addressê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤. ë§Œì•½ í•´ë‹¹ ë ˆìŠ¤í† ë‘ì´ ì—†ì„ ê²½ìš° RestaurantNotFoundExceptionì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¤ë„ë¡ í•œë‹¤.","text":"4. ë ˆìŠ¤í† ë‘ ì •ë³´ ì—…ë°ì´íŠ¸ë ˆìŠ¤í† ë‘ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•œ control ì¶”ê°€ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•´ì„œëŠ” ì—…ë°ì´íŠ¸ í•˜ê³ ì í•˜ëŠ” ë ˆìŠ¤í† ë‘ì„ ê°€ì§€ê³  ì™€ì•¼ í•œë‹¤. /restaurantsê²½ë¡œë’¤ì— ë ˆìŠ¤í† ë‘ idë¥¼ ë¶™ì—¬ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ idë¥¼ ì´ìš©í•´ ë ˆìŠ¤í† ë‘ì„ ì°¾ê³  request bodyì— ë“¤ì–´ìˆëŠ” ì •ë³´ë¡œ ë ˆìŠ¤í† ë‘ì„ ì—…ë°ì´íŠ¸ í•œë‹¤. ì—…ë°ì´íŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ Http ë©”ì†Œë“œ ì¤‘ì—ì„œ patchë©”ì†Œë“œë¥¼ ì´ìš©í•  ê²ƒì´ë‹¤. @PatchMapping(&quot;/restaurants/&#123;id&#125;&quot;)public String update(@PathVariable(&quot;id&quot;) Long id, @RequestBody Restaurant restaurant) throws Exception &#123; restaurantService.updateRestaurant(id, restaurant.getName(), restaurant.getAddress()); return &quot;&#123;&#125;&quot;;&#125; ì—…ë°ì´íŠ¸ ìš”ì²­ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void ë ˆìŠ¤í† ë‘ì •ë³´_ì—…ë°ì´íŠ¸() throws Exception &#123; String JOKER = &quot;JOKER Bar&quot;; String Busan = &quot;Busan&quot;; Restaurant restaurant = Restaurant.builder() .categoryId(1L) .name(JOKER) .address(Busan) .build(); String content = objectMapper.writeValueAsString(restaurant); ResultActions resultActions = mockMvc.perform(patch(&quot;/restaurants/1004&quot;) .contentType(MediaType.APPLICATION_JSON) .content(content)); resultActions .andExpect(status().isOk()) .andDo(print()); verify(restaurantService).updateRestaurant(1004L, JOKER, Busan);&#125; ë ˆìŠ¤í† ë‘ ì—…ë°ì´íŠ¸ë¥¼ í•˜ê¸° ìœ„í•œ Service ë©”ì†Œë“œë¨¼ì € idë¥¼ ê°–ê³  ì €ì¥ë¼ ìˆëŠ” í•´ë‹¹ ë ˆìŠ¤í† ë‘ì„ ê°€ì ¸ì˜¨ í›„ ì „ë‹¬ ë°›ì€ nameê°’ê³¼ addressê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤. ë§Œì•½ í•´ë‹¹ ë ˆìŠ¤í† ë‘ì´ ì—†ì„ ê²½ìš° RestaurantNotFoundExceptionì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¤ë„ë¡ í•œë‹¤. @Transactionalpublic Restaurant updateRestaurant(Long id, String name, String address) throws Exception &#123; Optional&lt;Restaurant&gt; optional = restaurantRepository.findById(id); if (optional.isPresent()) &#123; Restaurant restaurant = optional.get(); restaurant.setName(name); restaurant.setAddress(address); return restaurant; &#125; else &#123; throw new RestaurantNotFoundException(id); &#125;&#125; ì—…ë°ì´íŠ¸ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ@Testpublic void ë ˆìŠ¤í† ë‘ì •ë³´_ì—…ë°ì´íŠ¸() throws Exception &#123; Restaurant restaurant = Restaurant.builder() .id(1004L) .name(&quot;Bob zip&quot;) .address(&quot;Seoul&quot;) .build(); given(restaurantRepository.findById(1004L)) .willReturn(Optional.of(restaurant)); Restaurant updated = restaurantService.updateRestaurant(1004L, &quot;Sool zip&quot;, &quot;Busan&quot;); assertThat(updated.getName()).isEqualTo(&quot;Sool zip&quot;); assertThat(updated.getAddress()).isEqualTo(&quot;Busan&quot;);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ 1 - ë ˆìŠ¤í† ë‘ ê´€ë¦¬(ê´€ë¦¬ì) ë ˆìŠ¤í† ë‘ ìƒì„±","slug":"spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-admin-create","date":"2021-02-03T00:21:02.000Z","updated":"2024-02-26T15:41:45.084Z","comments":true,"path":"2021/02/03/spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-admin-create/","link":"","permalink":"https://ckck803.github.io/2021/02/03/spring/fastcampus-eatgo/1.%20restaurant/eat-go-restaurant-admin-create/","excerpt":"3. ë ˆìŠ¤í† ë‘ ì¶”ê°€í•˜ê¸°ë ˆìŠ¤í† ë‘ ìƒì„± ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ control ì¶”ê°€Http ë©”ì†Œë“œë“¤ ì¤‘ì—ì„œ postë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ìƒˆë¡œìš´ ë ˆìŠ¤í† ë‘ì„ ì¶”ê°€í•˜ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•  ê²ƒì´ê³ , /restaurntê²½ë¡œë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ê²½ìš° request bodyì— ë“¤ì–´ê°€ ìˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ìƒˆë¡œìš´ ë ˆìŠ¤í† ë‘ì„ ìƒì„±í•œë‹¤. @PostMapping(&quot;/restaurants&quot;)public ResponseEntity&lt;?&gt; create(@RequestBody Restaurant resource) throws URISyntaxException &#123; String name = resource.getName(); String address = resource.getAddress(); Restaurant restaurant = Restaurant.builder() .name(name) .address(address) .build(); restaurantService.addRestaurant(restaurant); URI location = new URI(&quot;/restaurants/&quot; + restaurant.getId()); return ResponseEntity.created(location).body(&quot;&#123;&#125;&quot;);&#125; ìš”ì²­ì— ëŒ€í•œ ë ˆìŠ¤í† ë‘ ìƒì„± í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±POJOë¥¼ JSONí˜•íƒœë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ Jacksonë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ObjectMapperë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤.ObjectMapperë¥¼ í†µí•´ Restaurantê°ì²´ë¥¼ JSON String í˜•íƒœë¡œ ë³€í™˜í•´ request bodyì— ë„£ì–´ /restaurantsê²½ë¡œë¡œ postìš”ì²­ì„ í•œë‹¤. @Autowiredprivate ObjectMapper objectMapper;@Testpublic void ìƒˆë¡œìš´_ë ˆìŠ¤í† ë‘_ì €ì¥í•˜ê¸°() throws Exception &#123; String BobZip = &quot;BobZip&quot;; String Seoul = &quot;Seoul&quot;; Restaurant restaurant = Restaurant.builder() .categoryId(1L) .name(BobZip) .address(Seoul) .build(); // POJOë¥¼ JSONí˜•íƒœë¡œ ë³€í™˜í•´ì¤€ë‹¤. String content = objectMapper.writeValueAsString(restaurant); ResultActions resultActions = mockMvc.perform(post(&quot;/restaurants&quot;) .content(content) .contentType(MediaType.APPLICATION_JSON)); resultActions .andExpect(status().isCreated()) .andDo(print());&#125; ìƒˆë¡œìš´ ë ˆìŠ¤í† ë‘ì„ ìƒì„±í•˜ëŠ” ìš”ì²­ì„ í•œ í›„ ë ˆìŠ¤í† ë‘ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ìš”ì²­ì„ í•´ í•´ë‹¹ ì •ë³´ê°€ ì œëŒ€ë¡œ ìƒì„± ëëŠ”ì§€ í™•ì¸í•œë‹¤. @Testpublic void ìƒˆë¡œìš´_ë ˆìŠ¤í† ë‘_ì €ì¥_ë°_ì¡°íšŒí•˜ê¸°() throws Exception &#123; String BobZip = &quot;BobZip&quot;; String Seoul = &quot;Seoul&quot;; Restaurant restaurant = Restaurant.builder() .categoryId(1L) .name(BobZip) .address(Seoul) .build(); String content = objectMapper.writeValueAsString(restaurant); ResultActions postResultActions = mockMvc.perform(post(&quot;/restaurants&quot;) .content(content) .contentType(MediaType.APPLICATION_JSON)); postResultActions .andExpect(status().isCreated()) .andDo(print()); List&lt;Restaurant&gt; restaurants = new ArrayList&lt;&gt;(); restaurants.add(restaurant); given(restaurantService.getRestaurants()).willReturn(restaurants); ResultActions getResultActions = mockMvc.perform(get(&quot;/restaurants&quot;)); getResultActions .andExpect(status().isOk()) .andExpect(jsonPath(&quot;$[0].name&quot;).value(BobZip)) .andExpect(jsonPath(&quot;$[0].address&quot;).value(Seoul)) .andDo(print());&#125;","text":"3. ë ˆìŠ¤í† ë‘ ì¶”ê°€í•˜ê¸°ë ˆìŠ¤í† ë‘ ìƒì„± ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ control ì¶”ê°€Http ë©”ì†Œë“œë“¤ ì¤‘ì—ì„œ postë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ìƒˆë¡œìš´ ë ˆìŠ¤í† ë‘ì„ ì¶”ê°€í•˜ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•  ê²ƒì´ê³ , /restaurntê²½ë¡œë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ê²½ìš° request bodyì— ë“¤ì–´ê°€ ìˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ìƒˆë¡œìš´ ë ˆìŠ¤í† ë‘ì„ ìƒì„±í•œë‹¤. @PostMapping(&quot;/restaurants&quot;)public ResponseEntity&lt;?&gt; create(@RequestBody Restaurant resource) throws URISyntaxException &#123; String name = resource.getName(); String address = resource.getAddress(); Restaurant restaurant = Restaurant.builder() .name(name) .address(address) .build(); restaurantService.addRestaurant(restaurant); URI location = new URI(&quot;/restaurants/&quot; + restaurant.getId()); return ResponseEntity.created(location).body(&quot;&#123;&#125;&quot;);&#125; ìš”ì²­ì— ëŒ€í•œ ë ˆìŠ¤í† ë‘ ìƒì„± í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±POJOë¥¼ JSONí˜•íƒœë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ Jacksonë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ObjectMapperë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤.ObjectMapperë¥¼ í†µí•´ Restaurantê°ì²´ë¥¼ JSON String í˜•íƒœë¡œ ë³€í™˜í•´ request bodyì— ë„£ì–´ /restaurantsê²½ë¡œë¡œ postìš”ì²­ì„ í•œë‹¤. @Autowiredprivate ObjectMapper objectMapper;@Testpublic void ìƒˆë¡œìš´_ë ˆìŠ¤í† ë‘_ì €ì¥í•˜ê¸°() throws Exception &#123; String BobZip = &quot;BobZip&quot;; String Seoul = &quot;Seoul&quot;; Restaurant restaurant = Restaurant.builder() .categoryId(1L) .name(BobZip) .address(Seoul) .build(); // POJOë¥¼ JSONí˜•íƒœë¡œ ë³€í™˜í•´ì¤€ë‹¤. String content = objectMapper.writeValueAsString(restaurant); ResultActions resultActions = mockMvc.perform(post(&quot;/restaurants&quot;) .content(content) .contentType(MediaType.APPLICATION_JSON)); resultActions .andExpect(status().isCreated()) .andDo(print());&#125; ìƒˆë¡œìš´ ë ˆìŠ¤í† ë‘ì„ ìƒì„±í•˜ëŠ” ìš”ì²­ì„ í•œ í›„ ë ˆìŠ¤í† ë‘ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ìš”ì²­ì„ í•´ í•´ë‹¹ ì •ë³´ê°€ ì œëŒ€ë¡œ ìƒì„± ëëŠ”ì§€ í™•ì¸í•œë‹¤. @Testpublic void ìƒˆë¡œìš´_ë ˆìŠ¤í† ë‘_ì €ì¥_ë°_ì¡°íšŒí•˜ê¸°() throws Exception &#123; String BobZip = &quot;BobZip&quot;; String Seoul = &quot;Seoul&quot;; Restaurant restaurant = Restaurant.builder() .categoryId(1L) .name(BobZip) .address(Seoul) .build(); String content = objectMapper.writeValueAsString(restaurant); ResultActions postResultActions = mockMvc.perform(post(&quot;/restaurants&quot;) .content(content) .contentType(MediaType.APPLICATION_JSON)); postResultActions .andExpect(status().isCreated()) .andDo(print()); List&lt;Restaurant&gt; restaurants = new ArrayList&lt;&gt;(); restaurants.add(restaurant); given(restaurantService.getRestaurants()).willReturn(restaurants); ResultActions getResultActions = mockMvc.perform(get(&quot;/restaurants&quot;)); getResultActions .andExpect(status().isOk()) .andExpect(jsonPath(&quot;$[0].name&quot;).value(BobZip)) .andExpect(jsonPath(&quot;$[0].address&quot;).value(Seoul)) .andDo(print());&#125; ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” Service ë©”ì†Œë“œ ì¶”ê°€@Service@RequiredArgsConstructorpublic class RestaurantService &#123; private final RestaurantRepository restaurantRepository; // ì „ë‹¬ë°›ì€ Restaurantì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ì„œë¹„ìŠ¤ public Restaurant addRestaurant(Restaurant restaurant) &#123; restaurantRepository.save(restaurant); return restaurant; &#125; public List&lt;Restaurant&gt; getRestaurants() &#123; List&lt;Restaurant&gt; restaurants = restaurantRepository.findAll(); return restaurants; &#125; public Restaurant getRestaurant(Long id) &#123; Restaurant restaurant = restaurantRepository.findById(id) .orElseThrow(() -&gt; new RestaurantNotFoundException(id)); return restaurant; &#125;&#125; ë ˆìŠ¤í† ë‘ì„ ì¶”ê°€í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€@Testpublic void ë ˆìŠ¤í† ë‘_ì¶”ê°€í•˜ê¸°() &#123; given(restaurantRepository.save(any())).will(invocation -&gt; &#123; Restaurant restaurant = invocation.getArgument(0); restaurant.setId(1234L); return restaurant; &#125;); Restaurant restaurant = Restaurant.builder() .name(&quot;BeRyong&quot;) .address(&quot;Busan&quot;) .build(); Restaurant created = restaurantService.addRestaurant(restaurant); assertThat(created.getId()).isEqualTo(1234L);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ 1 - ë ˆìŠ¤í† ë‘ ê´€ë¦¬(ê´€ë¦¬ì) íŠ¹ì • ë ˆìŠ¤í† ë‘ ê°€ì ¸ì˜¤ê¸°","slug":"spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-admin-specific","date":"2021-02-03T00:20:02.000Z","updated":"2024-02-26T15:41:53.025Z","comments":true,"path":"2021/02/03/spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-admin-specific/","link":"","permalink":"https://ckck803.github.io/2021/02/03/spring/fastcampus-eatgo/1.%20restaurant/eat-go-restaurant-admin-specific/","excerpt":"2. íŠ¹ì • ë ˆìŠ¤í† ë‘ì— ëŒ€í•œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°íŠ¹ì •ê°€ê²Œì— ëŒ€í•œ ìƒì„¸ì •ë³´ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ control ì¶”ê°€íŠ¹ì • ë ˆìŠ¤í† ë‘ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  ì‹¶ì„ ê²½ìš° restaurantì˜ Idê°’ì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤. /restaurantê²½ë¡œì— ì‚¬ìš©ìê°€ ì›í•˜ëŠ” restaurantId ë¥¼ ë”í•´ í•´ë‹¹ ë ˆìŠ¤í† ë‘ì— ëŒ€í•œ ì •ë³´ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. @GetMapping(&quot;/restaurants/&#123;id&#125;&quot;)public Restaurant detail(@PathVariable Long id) throws Exception &#123; Restaurant restaurant = restaurantService.getRestaurant(id); return restaurant;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±íŠ¹ì • idê°’ìœ¼ë¡œ ê°–ëŠ” restaurantì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ êµ¬í˜„í•œë‹¤. ìš”ì²­ì´ ì •ìƒì ìœ¼ë¡œ ì§„í–‰ëœ ê²½ìš°ì—ëŠ” Statusìœ¼ë¡œ 200ê³¼ í•¨ê»˜ í•´ë‹¹ ë ˆìŠ¤í† ë‘ì— ëŒ€í•œ ì •ë³´ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. @Testpublic void íŠ¹ì •_ê°€ê²Œ_ìƒì„¸ì •ë³´ë¥¼_ê°€ì ¸ì˜¨ë‹¤() throws Exception &#123; Restaurant restaurant = Restaurant.builder() .id(1004L) .categoryId(1L) .name(&quot;JOKER House&quot;) .address(&quot;Seoul&quot;) .build(); given(restaurantService.getRestaurant(1004L)).willReturn(restaurant); ResultActions resultActions = mockMvc.perform(get(&quot;/restaurants/1004&quot;)); resultActions .andExpect(status().isOk()) // ë ˆìŠ¤í† ë‘ ì •ë³´ê°€ ë“¤ì–´ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. .andExpect(content().string(containsString(&quot;\\&quot;id\\&quot;:1004&quot;))) .andExpect(content().string(containsString(&quot;\\&quot;name\\&quot;:\\&quot;JOKER House\\&quot;&quot;)));&#125; íŠ¹ì • ë ˆìŠ¤í† ë‘ì„ ê°€ì ¸ì˜¤ëŠ” Serviceë¡œì§RestaurantRepository ê°ì²´ë¥¼ ì´ìš©í•´ DBë¡œë¶€í„° idê°’ì´ ì¼ì¹˜í•˜ëŠ” ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ë§Œì•½ í•´ë‹¹ë˜ëŠ” Restaurantì •ë³´ê°€ ì—†ë‹¤ë©´ RestaurantNotFoundExceptionì„ ë°œìƒì‹œí‚¨ë‹¤.","text":"2. íŠ¹ì • ë ˆìŠ¤í† ë‘ì— ëŒ€í•œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°íŠ¹ì •ê°€ê²Œì— ëŒ€í•œ ìƒì„¸ì •ë³´ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ control ì¶”ê°€íŠ¹ì • ë ˆìŠ¤í† ë‘ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  ì‹¶ì„ ê²½ìš° restaurantì˜ Idê°’ì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤. /restaurantê²½ë¡œì— ì‚¬ìš©ìê°€ ì›í•˜ëŠ” restaurantId ë¥¼ ë”í•´ í•´ë‹¹ ë ˆìŠ¤í† ë‘ì— ëŒ€í•œ ì •ë³´ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤. @GetMapping(&quot;/restaurants/&#123;id&#125;&quot;)public Restaurant detail(@PathVariable Long id) throws Exception &#123; Restaurant restaurant = restaurantService.getRestaurant(id); return restaurant;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±íŠ¹ì • idê°’ìœ¼ë¡œ ê°–ëŠ” restaurantì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ êµ¬í˜„í•œë‹¤. ìš”ì²­ì´ ì •ìƒì ìœ¼ë¡œ ì§„í–‰ëœ ê²½ìš°ì—ëŠ” Statusìœ¼ë¡œ 200ê³¼ í•¨ê»˜ í•´ë‹¹ ë ˆìŠ¤í† ë‘ì— ëŒ€í•œ ì •ë³´ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. @Testpublic void íŠ¹ì •_ê°€ê²Œ_ìƒì„¸ì •ë³´ë¥¼_ê°€ì ¸ì˜¨ë‹¤() throws Exception &#123; Restaurant restaurant = Restaurant.builder() .id(1004L) .categoryId(1L) .name(&quot;JOKER House&quot;) .address(&quot;Seoul&quot;) .build(); given(restaurantService.getRestaurant(1004L)).willReturn(restaurant); ResultActions resultActions = mockMvc.perform(get(&quot;/restaurants/1004&quot;)); resultActions .andExpect(status().isOk()) // ë ˆìŠ¤í† ë‘ ì •ë³´ê°€ ë“¤ì–´ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. .andExpect(content().string(containsString(&quot;\\&quot;id\\&quot;:1004&quot;))) .andExpect(content().string(containsString(&quot;\\&quot;name\\&quot;:\\&quot;JOKER House\\&quot;&quot;)));&#125; íŠ¹ì • ë ˆìŠ¤í† ë‘ì„ ê°€ì ¸ì˜¤ëŠ” Serviceë¡œì§RestaurantRepository ê°ì²´ë¥¼ ì´ìš©í•´ DBë¡œë¶€í„° idê°’ì´ ì¼ì¹˜í•˜ëŠ” ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ë§Œì•½ í•´ë‹¹ë˜ëŠ” Restaurantì •ë³´ê°€ ì—†ë‹¤ë©´ RestaurantNotFoundExceptionì„ ë°œìƒì‹œí‚¨ë‹¤. @Service@RequiredArgsConstructorpublic class RestaurantService &#123; private final RestaurantRepository restaurantRepository; public List&lt;Restaurant&gt; getRestaurants() &#123; List&lt;Restaurant&gt; restaurants = restaurantRepository.findAll(); return restaurants; &#125; public Restaurant getRestaurant(Long id) &#123; Restaurant restaurant = restaurantRepository.findById(id) .orElseThrow(() -&gt; new RestaurantNotFoundException(id)); return restaurant; &#125;&#125; Serviceë¡œì§ í…ŒìŠ¤íŠ¸ì½”ë“œ êµ¬í˜„íŠ¹ì • ë ˆìŠ¤í† ë‘ì •ë³´ë¥¼ ì •ìƒì ìœ¼ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²½ìš°ì™€ íŠ¹ì • ë ˆìŠ¤í† ë‘ì •ë³´ë¥¼ ëª»ê°€ì ¸ì˜¤ëŠ” ê²½ìš° ë‘ê°€ì§€ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤. @Testpublic void íŠ¹ì •_ë ˆìŠ¤í† ë‘ì„_ê°€ì ¸ì˜¨ë‹¤() &#123; Restaurant restaurant = restaurantService.getRestaurant(1004L); // restaurantRepositoryê°ì²´ì˜ findByIdë©”ì„œë“œê°€ ì‹¤í–‰ë¬ëŠ”ì§€ í™•ì¸í•œë‹¤. verify(restaurantRepository).findById(eq(1004L)); // ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ í™•ì¸í•œë‹¤. assertThat(restaurant.getId()).isEqualTo(1004L);&#125;@Testpublic void ì—†ëŠ”_ë ˆìŠ¤í† ë‘ì„_ê°€ì ¸ì˜¨ë‹¤() &#123; assertThatThrownBy(() -&gt; &#123; Restaurant restaurant = restaurantService.getRestaurant(404L); &#125;).isInstanceOf(RestaurantNotFoundException.class);&#125; public class RestaurantNotFoundException extends RuntimeException&#123; public RestaurantNotFoundException(Long id) &#123; super(&quot;Could not find Restaurant &quot; + id ); &#125;&#125; @ControllerAdvicepublic class RestaurantErrorAdvice &#123; @ResponseBody @ResponseStatus(HttpStatus.NOT_FOUND) @ExceptionHandler(RestaurantNotFoundException.class) public String handleNotFound()&#123; return &quot;&#123;&#125;&quot;; &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ 1 - ë ˆìŠ¤í† ë‘ ê´€ë¦¬(ê´€ë¦¬ì) ëª¨ë“  ë ˆìŠ¤í† ë‘ ê°€ì ¸ì˜¤ê¸°","slug":"spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-admin","date":"2021-02-03T00:19:02.000Z","updated":"2024-02-26T15:42:06.341Z","comments":true,"path":"2021/02/03/spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-admin/","link":"","permalink":"https://ckck803.github.io/2021/02/03/spring/fastcampus-eatgo/1.%20restaurant/eat-go-restaurant-admin/","excerpt":"íŒ¨ìŠ¤íŠ¸ ìº í¼ìŠ¤ì—ì„œ ë ˆìŠ¤í† ëŸ‰ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“œëŠ” Toy projectë¥¼ ì§„í–‰ í–ˆë‹¤. í•´ë‹¹ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ë°°ìš¸ ìˆ˜ ìˆì—ˆë˜ ê²ƒì€ TDD, ìŠ¤í”„ë§ë¶€íŠ¸ë¥¼ ì´ìš©í•œ Rest-Apiì‘ì„± Multi-Moduleì„ ì´ìš©í•œ í”„ë¡œì íŠ¸ ì§„í–‰ì„ ë°°ìš¸ ìˆ˜ ìˆì—ˆë‹¤. ê°•ì˜ ë‚´ìš©ë“¤ì„ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ í†µí•´ ë‹¤ì‹œ ë˜ì§‘ì–´ ë³´ë ¤ê³  í•œë‹¤. ê´€ë¦¬ì í˜ì´ì§€ ëª¨ë“  Restaurantì •ë³´ ê°€ì ¸ì˜¤ê¸° íŠ¹ì • Restaurantì •ë³´ ê°€ì ¸ì˜¤ê¸° Restaurant ì¶”ê°€í•˜ê¸° Restaurantì •ë³´ ìˆ˜ì •í•˜ê¸° 1. ëª¨ë“  ë ˆìŠ¤í† ë‘ì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸°Restaurant Controller ìƒì„±ë ˆìŠ¤í† ë‘ì„ ì˜ˆì•½í•˜ê¸° ìœ„í•´ì„œ ì˜ˆì•½í•  ìˆ˜ ìˆëŠ” ë ˆìŠ¤í† ë‘ ëª©ë¡ì„ ì•Œì•„ì•¼ í•œë‹¤. /restaurantë¡œ ì ‘ê·¼í•˜ë©´ ëª¨ë“  ë ˆìŠ¤í† ë‘ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ í•œë‹¤. RestaurantRepository ë¡œë¶€í„° ë°”ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ì‚¬ìš©ìì—ê²Œ ë„˜ê²¨ì¤˜ë„ ë˜ì§€ë§Œ, Service ê³„ì¸µì„ ë„£ì–´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ê³¼ ì‚¬ìš©ìì—ê²Œ Viewë¥¼ ë³´ì—¬ì£¼ëŠ” controlë¡œì§ì„ ë¶„ë¦¬í•˜ë„ë¡ í•œë‹¤. @RestController@RequiredArgsConstructorpublic class RestaurantController &#123; private final RestaurantService restaurantService; @GetMapping(&quot;/restaurants&quot;) public List&lt;Restaurant&gt; list() &#123; List&lt;Restaurant&gt; restaurants = restaurantService.getRestaurants(); return restaurants; &#125;&#125;","text":"íŒ¨ìŠ¤íŠ¸ ìº í¼ìŠ¤ì—ì„œ ë ˆìŠ¤í† ëŸ‰ ì˜ˆì•½ ì‚¬ì´íŠ¸ ë§Œë“œëŠ” Toy projectë¥¼ ì§„í–‰ í–ˆë‹¤. í•´ë‹¹ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ë°°ìš¸ ìˆ˜ ìˆì—ˆë˜ ê²ƒì€ TDD, ìŠ¤í”„ë§ë¶€íŠ¸ë¥¼ ì´ìš©í•œ Rest-Apiì‘ì„± Multi-Moduleì„ ì´ìš©í•œ í”„ë¡œì íŠ¸ ì§„í–‰ì„ ë°°ìš¸ ìˆ˜ ìˆì—ˆë‹¤. ê°•ì˜ ë‚´ìš©ë“¤ì„ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ í†µí•´ ë‹¤ì‹œ ë˜ì§‘ì–´ ë³´ë ¤ê³  í•œë‹¤. ê´€ë¦¬ì í˜ì´ì§€ ëª¨ë“  Restaurantì •ë³´ ê°€ì ¸ì˜¤ê¸° íŠ¹ì • Restaurantì •ë³´ ê°€ì ¸ì˜¤ê¸° Restaurant ì¶”ê°€í•˜ê¸° Restaurantì •ë³´ ìˆ˜ì •í•˜ê¸° 1. ëª¨ë“  ë ˆìŠ¤í† ë‘ì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸°Restaurant Controller ìƒì„±ë ˆìŠ¤í† ë‘ì„ ì˜ˆì•½í•˜ê¸° ìœ„í•´ì„œ ì˜ˆì•½í•  ìˆ˜ ìˆëŠ” ë ˆìŠ¤í† ë‘ ëª©ë¡ì„ ì•Œì•„ì•¼ í•œë‹¤. /restaurantë¡œ ì ‘ê·¼í•˜ë©´ ëª¨ë“  ë ˆìŠ¤í† ë‘ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ í•œë‹¤. RestaurantRepository ë¡œë¶€í„° ë°”ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ì‚¬ìš©ìì—ê²Œ ë„˜ê²¨ì¤˜ë„ ë˜ì§€ë§Œ, Service ê³„ì¸µì„ ë„£ì–´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ê³¼ ì‚¬ìš©ìì—ê²Œ Viewë¥¼ ë³´ì—¬ì£¼ëŠ” controlë¡œì§ì„ ë¶„ë¦¬í•˜ë„ë¡ í•œë‹¤. @RestController@RequiredArgsConstructorpublic class RestaurantController &#123; private final RestaurantService restaurantService; @GetMapping(&quot;/restaurants&quot;) public List&lt;Restaurant&gt; list() &#123; List&lt;Restaurant&gt; restaurants = restaurantService.getRestaurants(); return restaurants; &#125;&#125; ìš”ì²­ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@WebMvcTest(RestaurantController.class)@AutoConfigureMockMvcclass RestaurantControllerTest &#123; @Autowired MockMvc mockMvc; @Test public void listë¥¼_í™•ì¸í•œë‹¤() throws Exception&#123; ResultActions resultActions = mockMvc.perform(get(&quot;/restaurant&quot;)); resultActions .andExpect(status().isOk()) .andDo(print()); &#125;&#125; Restaurant Service ìƒì„±@Service@RequiredArgsConstructorpublic class RestaurantService &#123; private final RestaurantRepository restaurantRepository; public List&lt;Restaurant&gt; getRestaurants() &#123; List&lt;Restaurant&gt; restaurants = restaurantRepository.findAll(); return restaurants; &#125;&#125; Service ê³„ì¸µì— ëŒ€í•œ Testì½”ë“œ ì‘ì„±class RestaurantServiceTest &#123; @Autowired private MockMvc mockMvc; @InjectMocks private RestaurantService restaurantService; @Mock private RestaurantRepository restaurantRepository; @Mock private MenuItemRepository menuItemRepository; @Mock private ReviewRepository reviewRepository; @BeforeEach public void setUp() &#123; MockitoAnnotations.openMocks(this); mockRestaurantRepository(); mockMenuItemRepository(); mockReviewRepository(); &#125; private void mockRestaurantRepository() &#123; List&lt;Restaurant&gt; restaurants = new ArrayList&lt;&gt;(); Restaurant restaurant = Restaurant.builder() .id(1004L) .address(&quot;Seoul&quot;) .categoryId(1L) .name(&quot;Bob zip&quot;) .build(); restaurants.add(restaurant); // addressì™€ categoryë¥¼ ì‚¬ìš©í•´ ê²€ìƒ‰í•œë‹¤. given(restaurantRepository .findAllByAddressContainingAndCategoryId(&quot;Seoul&quot;, 1L)) .willReturn(restaurants); given(restaurantRepository.findById(1004L)) .willReturn(Optional.of(restaurant)); &#125; private void mockMenuItemRepository() &#123; List&lt;MenuItem&gt; menuItems = new ArrayList&lt;&gt;(); menuItems.add((MenuItem.builder() .name(&quot;Kimchi&quot;) .build())); given(menuItemRepository.findAllByRestaurantId(1004L)).willReturn(menuItems); &#125; private void mockReviewRepository() &#123; List&lt;Review&gt; reviews = new ArrayList&lt;&gt;(); reviews.add(Review.builder() .name(&quot;BeRyong&quot;) .score(1) .description(&quot;Bad&quot;) .build()); given(reviewRepository.findAllByRestaurantId(1004L)).willReturn(reviews); &#125; @Test @DisplayName(&quot;ëª¨ë“  ë ˆìŠ¤í† ë‘ì„ ê°€ì ¸ì˜¨ë‹¤.&quot;) public void list() &#123; String region = &quot;Seoul&quot;; Long categoryId = 1L; List&lt;Restaurant&gt; restaurants = restaurantService.getRestaurants(region, categoryId); Restaurant restaurant = restaurants.get(0); assertThat(restaurant.getId()).isEqualTo(1004L); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"Spring Rest API - ExceptionHandling","slug":"spring/spring-rest/rest-api-04-exceptionhandling","date":"2021-02-02T18:02:37.000Z","updated":"2024-02-26T16:14:05.568Z","comments":true,"path":"2021/02/03/spring/spring-rest/rest-api-04-exceptionhandling/","link":"","permalink":"https://ckck803.github.io/2021/02/03/spring/spring-rest/rest-api-04-exceptionhandling/","excerpt":"ëª©ì°¨ Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Spring Rest API - ExceptionHandling Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸° Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸° Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„± Spring Boot Rest API - ExceptionHandlingì¡´ì¬í•˜ì§€ ì•ŠëŠ” idê°’ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ ì¶”ê°€ì €ì¥ë˜ì§€ ì•Šì€ Userë¥¼ ì¡°íšŒí•  ê²½ìš° UserNotFoundException ì˜ˆì™¸ê°€ ë°œìƒí•˜ë„ë¡ ì˜ˆì™¸ì²˜ë¦¬í•œë‹¤. UserController.java @GetMapping(&quot;/users/&#123;id&#125;&quot;)public User retrieveUser(@PathVariable int id)&#123; User user = service.findOne(id); if(user == null)&#123; throw new UserNotFoundException(String.format(&quot;ID[%s] not found&quot;, id )); &#125; return user;&#125; ì˜ˆì™¸ì²˜ë¦¬í•˜ëŠ” Exception í´ë˜ìŠ¤ ìƒì„±ResponseStatus ë¥¼ ì´ìš©í•´ HttpStatus.NOT_FOUND ì˜µì…˜ì„ ì„¤ì •í•  ê²½ìš° UserNotFoundException ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ë•Œ Http Status Code 404(Not Found) ê°€ ë°˜í™˜ëœë‹¤.","text":"ëª©ì°¨ Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Spring Rest API - ExceptionHandling Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸° Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸° Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„± Spring Boot Rest API - ExceptionHandlingì¡´ì¬í•˜ì§€ ì•ŠëŠ” idê°’ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ ì¶”ê°€ì €ì¥ë˜ì§€ ì•Šì€ Userë¥¼ ì¡°íšŒí•  ê²½ìš° UserNotFoundException ì˜ˆì™¸ê°€ ë°œìƒí•˜ë„ë¡ ì˜ˆì™¸ì²˜ë¦¬í•œë‹¤. UserController.java @GetMapping(&quot;/users/&#123;id&#125;&quot;)public User retrieveUser(@PathVariable int id)&#123; User user = service.findOne(id); if(user == null)&#123; throw new UserNotFoundException(String.format(&quot;ID[%s] not found&quot;, id )); &#125; return user;&#125; ì˜ˆì™¸ì²˜ë¦¬í•˜ëŠ” Exception í´ë˜ìŠ¤ ìƒì„±ResponseStatus ë¥¼ ì´ìš©í•´ HttpStatus.NOT_FOUND ì˜µì…˜ì„ ì„¤ì •í•  ê²½ìš° UserNotFoundException ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ë•Œ Http Status Code 404(Not Found) ê°€ ë°˜í™˜ëœë‹¤. UserNotFoundException.java @ResponseStatus(HttpStatus.NOT_FOUND)public class UserNotFoundException extends RuntimeException &#123; public UserNotFoundException(String message) &#123; super(message); &#125;&#125; ì˜ˆì™¸ì‹œ ë³´ë‚´ëŠ” ìƒˆë¡œìš´ ë©”ì‹œì§€ í˜•ì‹ì„ ì •ì˜ìœ„ì™€ ê°™ì´ ì—ëŸ¬ ë©”ì‹œì§€ê°€ ë°˜í™˜ë˜ë©´ ë¶ˆí•„ìš”í•œ ë‚´ìš©ë“¤ì´ ë§ë‹¤. ì–¸ì œ, ì–´ë–¤ ë©”ì‹œì§€ê°€ ë°œìƒí–ˆëŠ”ì§€, ì–´ë–¤ ì›ì¸ì— ì˜í•´ ë°œìƒí–ˆëŠ”ì§€ í•„ìš”í•œ ì •ë³´ë§Œ ë‹´ëŠ” ExceptionResponse í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. ExceptionResponse.java @Data@AllArgsConstructor@NoArgsConstructorpublic class ExceptionResponse &#123; private Date timestamp; private String message; private String details;&#125; ExceptionHandler ë¥¼ ì´ìš©í•œ ì˜ˆì™¸ ì²˜ë¦¬í•˜ê¸° Controllerì—ì„œ ë°œìƒí•œ Exceptionì„ ë‹¤ë£¨ê¸° ìœ„í•œ ë°©ë²•, ExceptionHandler ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ëª…ì‹œëœ ì˜ˆì™¸, ëª…ì‹œëœ ì˜ˆì™¸ ìì‹ í´ë˜ìŠ¤ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤. ì˜ˆì™¸ë¥¼ ìƒëµí•œ ê²½ìš°ì—ëŠ” Method íŒŒë¼ë¯¸í„°ì— ëª…ì‹œëœ ì˜ˆì™¸ê°€ ì§€ì •ëœë‹¤. Controller ì—ì„œ ë“±ë¡ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì— ëŒ€í•œ ì¡°íšŒ ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ UserNotFoundException ì´ ë°œìƒí•œë‹¤. UserNotFoundException ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ ExceptionHandler ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ í•´ë‹¹ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•œë‹¤. UserController.class // path variableì„ ì´ìš©í•œ ìš”ì²­ì„ ì²˜ë¦¬@GetMapping(&quot;/users/&#123;id&#125;&quot;)public User retrieveUser(@PathVariable int id)&#123; User user = service.findOne(id); if(user == null)&#123; throw new UserNotFoundException(String.format(&quot;ID[%s] not found&quot;, id )); &#125; return user;&#125;@ExceptionHandler(UserNotFoundException.class)public final ExceptionResponse handleUserNotFoundException(Exception ex, WebRequest request)&#123; ExceptionResponse exceptionResponse = new ExceptionResponse(new Date(), ex.getMessage(), request.getDescription(false)); return exceptionResponse;&#125; Http Status Code ë‹¤ë£¨ê¸°ExceptionHandler ë¥¼ ì´ìš©í•´ Controllerì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²½ìš° ì˜ˆì™¸ê°€ ë°œìƒí–ˆìŒì—ë„ Http Status Codeê°€ 200 ìœ¼ë¡œ ë–¨ì–´ì§€ê²Œ ëœë‹¤. ResponseStatus ì–´ë…¸í…Œì´ì…˜, ResponseEntity ë¥¼ ì‚¬ìš©í•´ í´ë¦¬ì–¸íŠ¸ì—ê²Œ ì ì ˆí•œ ìƒíƒœ ì½”ë“œë¥¼ ë°˜í™˜í•´ì¤„ ìˆ˜ ìˆë‹¤. ResponseStatus ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©í•œ ë°©ë²•@ResponseStatus(HttpStatus.NOT_FOUND)@ExceptionHandler(UserNotFoundException.class)public final ExceptionResponse handleUserNotFoundException(Exception ex, WebRequest request)&#123; ExceptionResponse exceptionResponse = new ExceptionResponse(new Date(), ex.getMessage(), request.getDescription(false)); return exceptionResponse;&#125; ResponseEntity ì‚¬ìš©í•œ ë°©ë²•@ExceptionHandler(UserNotFoundException.class)public final ResponseEntity&lt;Object&gt; handleUserNotFoundException(Exception ex, WebRequest request)&#123; ExceptionResponse exceptionResponse = new ExceptionResponse(new Date(), ex.getMessage(), request.getDescription(false)); return new ResponseEntity(exceptionResponse, HttpStatus.NOT_FOUND);&#125; @ControllerAdvice @RestControllerAdvice @ControllerAdvice @RestControllerAdvice ëŠ” Controller, RestController ë§ˆë‹¤ ì •ì˜ëœ ExceptionHandlerë¥¼ í•œ ê³³ì— ëª¨ì•„ ê´€ë¦¬í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤. ì§€ì •ëœ Controller, RestController ì— ExceptionHandler, InitBinder ê¸°ëŠ¥ì„ ë¶€ì—¬í•œë‹¤. ì§€ì •ëœ Controllerê°€ ì—†ì„ ê²½ìš° ëª¨ë“  Controllerì— ì ìš©í•œë‹¤. ìš°ì„ ìˆœìœ„ëŠ” ìì„¸í•œ ê²ƒì´ ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°–ëŠ”ë‹¤. CustomizedResponseEntityExceptionHandler.java @RestController@ControllerAdvicepublic class CustomizedResponseEntityExceptionHandler extends ResponseEntityExceptionHandler &#123; @ExceptionHandler(Exception.class) public final ResponseEntity&lt;Object&gt; handleAllExceptions(Exception ex, WebRequest request)&#123; ExceptionResponse exceptionResponse = new ExceptionResponse(new Date(), ex.getMessage(), request.getDescription(false)); return new ResponseEntity(exceptionResponse, HttpStatus.INTERNAL_SERVER_ERROR); &#125; @ExceptionHandler(UserNotFoundException.class) public final ResponseEntity&lt;Object&gt; handleUserNotFoundException(Exception ex, WebRequest request)&#123; ExceptionResponse exceptionResponse = new ExceptionResponse(new Date(), ex.getMessage(), request.getDescription(false)); return new ResponseEntity(exceptionResponse, HttpStatus.NOT_FOUND); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Rest","slug":"Spring/Spring-Rest","permalink":"https://ckck803.github.io/categories/Spring/Spring-Rest/"}],"tags":[]},{"title":"Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸°","slug":"spring/spring-rest/rest-api-03-http-status-code","date":"2021-02-02T17:02:37.000Z","updated":"2024-02-26T16:13:53.600Z","comments":true,"path":"2021/02/03/spring/spring-rest/rest-api-03-http-status-code/","link":"","permalink":"https://ckck803.github.io/2021/02/03/spring/spring-rest/rest-api-03-http-status-code/","excerpt":"ëª©ì°¨ Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Spring Rest API - ExceptionHandling Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸° Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸° Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„± Spring Boot Rest API - HTTP Status Code ë‹¤ë£¨ê¸°201(Created) ì½”ë“œ ë°˜í™˜í•˜ê¸° ì‚¬ìš©ìê°€ ìš”ì²­ìœ¼ë¡œ ìƒˆë¡œìš´ Userê°€ ìƒì„±ë¨ì„ í™•ì¸í•˜ê¸° ìœ„í•´ 201(Created) ì½”ë“œë¥¼ ë°˜í™˜í•œë‹¤. @PostMapping(&quot;/users&quot;)public ResponseEntity&lt;User&gt; createUser(@RequestBody @Valid User user)&#123; User savedUser = service.save(user); URI location = ServletUriComponentsBuilder.fromCurrentRequest() .path(&quot;/&#123;id&#125;&quot;) .buildAndExpand(savedUser.getId()) .toUri(); return ResponseEntity.created(location).build();&#125; 201(Created) ì½”ë“œë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ Test Code ì‘ì„±@Testpublic void ìœ ì €ë¥¼_ë“±ë¡í•˜ê³ _ìƒíƒœì½”ë“œ_201ì„_í™•ì¸í•œë‹¤() throws Exception &#123; User user = new User(); String name = &quot;dongwoo&quot;; Date date = new Date(); user.setName(name); user.setJoinDate(date); String content = objectMapper.writeValueAsString(user); ResultActions resultActions = mockMvc.perform(post(&quot;/users&quot;) .content(content) .contentType(MediaType.APPLICATION_JSON)); resultActions .andExpect(status().isCreated()) .andDo(print());&#125;","text":"ëª©ì°¨ Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Spring Rest API - ExceptionHandling Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸° Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸° Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„± Spring Boot Rest API - HTTP Status Code ë‹¤ë£¨ê¸°201(Created) ì½”ë“œ ë°˜í™˜í•˜ê¸° ì‚¬ìš©ìê°€ ìš”ì²­ìœ¼ë¡œ ìƒˆë¡œìš´ Userê°€ ìƒì„±ë¨ì„ í™•ì¸í•˜ê¸° ìœ„í•´ 201(Created) ì½”ë“œë¥¼ ë°˜í™˜í•œë‹¤. @PostMapping(&quot;/users&quot;)public ResponseEntity&lt;User&gt; createUser(@RequestBody @Valid User user)&#123; User savedUser = service.save(user); URI location = ServletUriComponentsBuilder.fromCurrentRequest() .path(&quot;/&#123;id&#125;&quot;) .buildAndExpand(savedUser.getId()) .toUri(); return ResponseEntity.created(location).build();&#125; 201(Created) ì½”ë“œë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ Test Code ì‘ì„±@Testpublic void ìœ ì €ë¥¼_ë“±ë¡í•˜ê³ _ìƒíƒœì½”ë“œ_201ì„_í™•ì¸í•œë‹¤() throws Exception &#123; User user = new User(); String name = &quot;dongwoo&quot;; Date date = new Date(); user.setName(name); user.setJoinDate(date); String content = objectMapper.writeValueAsString(user); ResultActions resultActions = mockMvc.perform(post(&quot;/users&quot;) .content(content) .contentType(MediaType.APPLICATION_JSON)); resultActions .andExpect(status().isCreated()) .andDo(print());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Rest","slug":"Spring/Spring-Rest","permalink":"https://ckck803.github.io/categories/Spring/Spring-Rest/"}],"tags":[]},{"title":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸ 1 - ë ˆìŠ¤í† ë‘ ê´€ë¦¬ Domain ìƒì„±","slug":"spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-common","date":"2021-02-02T15:21:08.000Z","updated":"2024-02-26T15:42:10.928Z","comments":true,"path":"2021/02/03/spring/fastcampus-eatgo/1. restaurant/eat-go-restaurant-common/","link":"","permalink":"https://ckck803.github.io/2021/02/03/spring/fastcampus-eatgo/1.%20restaurant/eat-go-restaurant-common/","excerpt":"Restaurant Entity í´ë˜ìŠ¤Restaurant í´ë˜ìŠ¤ì—ëŠ” id , name, addressë¥¼ ì €ì¥í•œë‹¤. id : ë ˆìŠ¤í† ë‘ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•œ Idê°’ name : ë ˆìŠ¤í† ë‘ì˜ ì´ë¦„ address : ë ˆìŠ¤í† ë‘ì˜ ìœ„ì¹˜ @Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class Restaurant &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @NotEmpty private String name; @NotEmpty private String address;&#125; Restaurant í´ë˜ìŠ¤ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void creation()&#123; String name = &quot;OutBack&quot;; String address = &quot;Seoul&quot;; long id = 1004L; Restaurant restaurant = new Restaurant(id, name, address); assertThat(restaurant).isNotNull(); assertThat(restaurant.getId()).isEqualTo(id); assertThat(restaurant.getName()).isEqualTo(name); assertThat(restaurant.getAddress()).isEqualTo(address);&#125; Restaurant Repository ìƒì„±Restaurantì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  ì €ì¥í•˜ê³  ìˆ˜ì •í•˜ê¸° ìœ„í•œ Repositoryë¥¼ ìƒì„±í•œë‹¤. RepositoryëŠ” DBì— ì ‘ê·¼í•´ CRUDë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. @Repositorypublic interface RestaurantRepository extends JpaRepository&lt;Restaurant, Long&gt; &#123;&#125;","text":"Restaurant Entity í´ë˜ìŠ¤Restaurant í´ë˜ìŠ¤ì—ëŠ” id , name, addressë¥¼ ì €ì¥í•œë‹¤. id : ë ˆìŠ¤í† ë‘ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•œ Idê°’ name : ë ˆìŠ¤í† ë‘ì˜ ì´ë¦„ address : ë ˆìŠ¤í† ë‘ì˜ ìœ„ì¹˜ @Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builderpublic class Restaurant &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @NotEmpty private String name; @NotEmpty private String address;&#125; Restaurant í´ë˜ìŠ¤ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±@Testpublic void creation()&#123; String name = &quot;OutBack&quot;; String address = &quot;Seoul&quot;; long id = 1004L; Restaurant restaurant = new Restaurant(id, name, address); assertThat(restaurant).isNotNull(); assertThat(restaurant.getId()).isEqualTo(id); assertThat(restaurant.getName()).isEqualTo(name); assertThat(restaurant.getAddress()).isEqualTo(address);&#125; Restaurant Repository ìƒì„±Restaurantì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  ì €ì¥í•˜ê³  ìˆ˜ì •í•˜ê¸° ìœ„í•œ Repositoryë¥¼ ìƒì„±í•œë‹¤. RepositoryëŠ” DBì— ì ‘ê·¼í•´ CRUDë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. @Repositorypublic interface RestaurantRepository extends JpaRepository&lt;Restaurant, Long&gt; &#123;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"}],"tags":[]},{"title":"Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸°","slug":"spring/spring-rest/rest-api-02-service","date":"2021-02-02T15:04:00.000Z","updated":"2024-02-26T16:13:57.822Z","comments":true,"path":"2021/02/03/spring/spring-rest/rest-api-02-service/","link":"","permalink":"https://ckck803.github.io/2021/02/03/spring/spring-rest/rest-api-02-service/","excerpt":"ëª©ì°¨ Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Spring Rest API - ExceptionHandling Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸° Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸° Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„± Spring Boot Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸°User ë„ë©”ì¸ í´ë˜ìŠ¤ ìƒì„±@Data@AllArgsConstructor@NoArgsConstructorpublic class User &#123; private Integer id; private String name; private Date joinDate;&#125; ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ìƒì„±@Servicepublic class UserDaoService &#123; // ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  Memory ë°ì´í„°ë¥¼ ì‚¬ìš© private static List&lt;User&gt; users = new ArrayList&lt;&gt;(); private static int usersCount = 3; static&#123; users.add(new User(1, &quot;Kenneth&quot;, new Date())); users.add(new User(2, &quot;Alice&quot;, new Date())); users.add(new User(3, &quot;Elena&quot;, new Date())); &#125; // ì „ì²´ ì‚¬ìš©ì ì¡°íšŒ public List&lt;User&gt; findAll()&#123; return users; &#125; // ê°œë³„ ì‚¬ìš©ì ì¡°íšŒ public User save(User user)&#123; if(user.getId() == null)&#123; user.setId(++usersCount); &#125; users.add(user); return user; &#125; // idê°’ì„ ì´ìš©í•œ ì‚¬ìš©ì ì¡°íšŒ public User findOne(int id)&#123; for (User user : users)&#123; if(user.getId() == id)&#123; return user; &#125; &#125; return null; &#125;&#125; ì‚¬ìš©ì ìš”ì²­ ì²˜ë¦¬ Controller ì¶”ê°€@RestController@RequiredArgsConstructorpublic class UserController &#123; private final UserDaoService service; @GetMapping(&quot;/users&quot;) public List&lt;User&gt; retrieveAllUsers()&#123; return service.findAll(); &#125; // path variableì„ ì´ìš©í•œ ìš”ì²­ì„ ì²˜ë¦¬ @GetMapping(&quot;/users/&#123;id&#125;&quot;) public User retrieveUser(@PathVariable int id)&#123; User user = service.findOne(id); return user; &#125;&#125;","text":"ëª©ì°¨ Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Spring Rest API - ExceptionHandling Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸° Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸° Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„± Spring Boot Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸°User ë„ë©”ì¸ í´ë˜ìŠ¤ ìƒì„±@Data@AllArgsConstructor@NoArgsConstructorpublic class User &#123; private Integer id; private String name; private Date joinDate;&#125; ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ìƒì„±@Servicepublic class UserDaoService &#123; // ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  Memory ë°ì´í„°ë¥¼ ì‚¬ìš© private static List&lt;User&gt; users = new ArrayList&lt;&gt;(); private static int usersCount = 3; static&#123; users.add(new User(1, &quot;Kenneth&quot;, new Date())); users.add(new User(2, &quot;Alice&quot;, new Date())); users.add(new User(3, &quot;Elena&quot;, new Date())); &#125; // ì „ì²´ ì‚¬ìš©ì ì¡°íšŒ public List&lt;User&gt; findAll()&#123; return users; &#125; // ê°œë³„ ì‚¬ìš©ì ì¡°íšŒ public User save(User user)&#123; if(user.getId() == null)&#123; user.setId(++usersCount); &#125; users.add(user); return user; &#125; // idê°’ì„ ì´ìš©í•œ ì‚¬ìš©ì ì¡°íšŒ public User findOne(int id)&#123; for (User user : users)&#123; if(user.getId() == id)&#123; return user; &#125; &#125; return null; &#125;&#125; ì‚¬ìš©ì ìš”ì²­ ì²˜ë¦¬ Controller ì¶”ê°€@RestController@RequiredArgsConstructorpublic class UserController &#123; private final UserDaoService service; @GetMapping(&quot;/users&quot;) public List&lt;User&gt; retrieveAllUsers()&#123; return service.findAll(); &#125; // path variableì„ ì´ìš©í•œ ìš”ì²­ì„ ì²˜ë¦¬ @GetMapping(&quot;/users/&#123;id&#125;&quot;) public User retrieveUser(@PathVariable int id)&#123; User user = service.findOne(id); return user; &#125;&#125; Service ë¡œì§ í™•ì¸ì„ ìœ„í•œ Test ì½”ë“œ ì‘ì„±í•˜ê¸°@Testpublic void ëª¨ë“ _ìœ ì €ë“¤ì„_ê°€ì ¸ì˜¨ë‹¤() throws Exception &#123; ResultActions resultActions = mockMvc.perform(get(&quot;/users&quot;)); resultActions .andExpect(status().isOk()) .andDo(print());&#125; PathVariable ë¡œ ë³´ë‚¸ ìš”ì²­ìœ¼ë¡œ Service ë¡œì§ì´ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ê³  ë°˜í™˜ ê°’ì´ ì •ìƒì ìœ¼ë¡œ ì™”ëŠ”ì§€ í™•ì¸í•œë‹¤. @Testpublic void íŠ¹ì •_ìœ ì €ë¥¼_ê°€ì ¸ì˜¨ë‹¤() throws Exception &#123; ResultActions resultActions = mockMvc.perform(get(&quot;/users/1&quot;)); resultActions .andExpect(status().isOk()) .andExpect(jsonPath(&quot;id&quot;).value(1)) .andDo(print());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Rest","slug":"Spring/Spring-Rest","permalink":"https://ckck803.github.io/categories/Spring/Spring-Rest/"}],"tags":[]},{"title":"Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„±","slug":"spring/spring-rest/rest-api-01-controller","date":"2021-02-02T14:47:05.000Z","updated":"2024-02-26T16:13:18.099Z","comments":true,"path":"2021/02/02/spring/spring-rest/rest-api-01-controller/","link":"","permalink":"https://ckck803.github.io/2021/02/02/spring/spring-rest/rest-api-01-controller/","excerpt":"ëª©ì°¨ Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Spring Rest API - ExceptionHandling Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸° Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸° Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„± Spring Boot Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„±@RestControllerpublic class HelloWorldController &#123; @GetMapping(&quot;/hello-world&quot;) public String Hello()&#123; return &quot;Hello World&quot;; &#125; // SpringBootì—ì„œëŠ” HelloWorldBeanì´ë¼ëŠ” ê°ì²´ë¥¼ JSONíƒ€ì…ì˜ í˜•íƒœë¡œ ë°˜í™˜í•´ì¤€ë‹¤. @GetMapping(&quot;/hello-world-bean/&quot;) public HelloWorldBean helloWorldBean()&#123; return new HelloWorldBean(&quot;Hello World&quot;); &#125; @GetMapping(&quot;/hello-world-bean/path-variable/&#123;name&#125;&quot;) public HelloWorldBean helloWorldBean(@PathVariable String name)&#123; return new HelloWorldBean(String.format(&quot;Hello World, %s&quot;, name)); &#125;&#125; HelloWorldBean í´ë˜ìŠ¤ ìƒì„±@Data@NoArgsConstructor@AllArgsConstructorpublic class HelloWorldBean &#123; private String message;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± MockMvc ê°ì²´ë¥¼ ì´ìš©í•´ ê° Controllerì— ëŒ€í•œ Test ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤. MockMvc ê°ì²´ì˜ ë°˜í™˜ ê°’ìœ¼ë¡œëŠ” ResultActions ë¥¼ ì´ìš©í•´ ë°›ëŠ”ë‹¤. ResultActions ê°ì²´ë‚´ andExpect ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ìš”ì²­ì´ ì •ìƒì (200) ìœ¼ë¡œ ìˆ˜í–‰ ëëŠ”ì§€ ë°˜í™˜ ê°’ì´ ì •ìƒì ìœ¼ë¡œ ì™”ëŠ”ì§€ ê²€ì¦í•œë‹¤. @Testpublic void Hello_Worldê°€_ë¦¬í„´ëœë‹¤() throws Exception&#123; ResultActions actions = mockMvc.perform(get(&quot;/hello-world&quot;)); actions .andExpect(status().isOk()) .andExpect(content().string(&quot;Hello World&quot;)) .andDo(print()) ;&#125;","text":"ëª©ì°¨ Spring Rest API - Spring Boot Swagger ì‚¬ìš©í•˜ê¸° Spring Rest API - ExceptionHandling Spring Rest API - HTTP Status Code ë‹¤ë£¨ê¸° Spring Rest API - ë„ë©”ì¸ ë° ì„œë¹„ìŠ¤ ë¡œì§ ì‘ì„±í•˜ê¸° Spring Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„± Spring Boot Rest API - Rest API ì‹œì‘í•˜ê¸° Controller ì‘ì„±@RestControllerpublic class HelloWorldController &#123; @GetMapping(&quot;/hello-world&quot;) public String Hello()&#123; return &quot;Hello World&quot;; &#125; // SpringBootì—ì„œëŠ” HelloWorldBeanì´ë¼ëŠ” ê°ì²´ë¥¼ JSONíƒ€ì…ì˜ í˜•íƒœë¡œ ë°˜í™˜í•´ì¤€ë‹¤. @GetMapping(&quot;/hello-world-bean/&quot;) public HelloWorldBean helloWorldBean()&#123; return new HelloWorldBean(&quot;Hello World&quot;); &#125; @GetMapping(&quot;/hello-world-bean/path-variable/&#123;name&#125;&quot;) public HelloWorldBean helloWorldBean(@PathVariable String name)&#123; return new HelloWorldBean(String.format(&quot;Hello World, %s&quot;, name)); &#125;&#125; HelloWorldBean í´ë˜ìŠ¤ ìƒì„±@Data@NoArgsConstructor@AllArgsConstructorpublic class HelloWorldBean &#123; private String message;&#125; í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± MockMvc ê°ì²´ë¥¼ ì´ìš©í•´ ê° Controllerì— ëŒ€í•œ Test ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤. MockMvc ê°ì²´ì˜ ë°˜í™˜ ê°’ìœ¼ë¡œëŠ” ResultActions ë¥¼ ì´ìš©í•´ ë°›ëŠ”ë‹¤. ResultActions ê°ì²´ë‚´ andExpect ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ìš”ì²­ì´ ì •ìƒì (200) ìœ¼ë¡œ ìˆ˜í–‰ ëëŠ”ì§€ ë°˜í™˜ ê°’ì´ ì •ìƒì ìœ¼ë¡œ ì™”ëŠ”ì§€ ê²€ì¦í•œë‹¤. @Testpublic void Hello_Worldê°€_ë¦¬í„´ëœë‹¤() throws Exception&#123; ResultActions actions = mockMvc.perform(get(&quot;/hello-world&quot;)); actions .andExpect(status().isOk()) .andExpect(content().string(&quot;Hello World&quot;)) .andDo(print()) ;&#125; ë°˜í™˜ë˜ëŠ” JSON ê°ì²´ ì— ëŒ€í•´ jsonPath ë¥¼ ì´ìš©í•´ ë°˜í™˜ ê°’ì— ëŒ€í•œ ê²€ì¦ì„ í•œë‹¤. @Testpublic void Hello_World_Bean_test() throws Exception&#123; ResultActions action = mockMvc.perform(get(&quot;/hello-world-bean&quot;)); action .andExpect(status().isOk()) .andExpect(jsonPath(&quot;message&quot;).value(&quot;Hello World&quot;)) .andDo(print());&#125; @Testpublic void Hello_World_Bean_Name_test() throws Exception&#123; ResultActions actions = mockMvc.perform(get(&quot;/hello-world-bean/path-variable/dongwoo&quot;)); actions .andExpect(status().isOk()) .andExpect(jsonPath(&quot;message&quot;).value(&quot;Hello World, dongwoo&quot;)) .andDo(print());&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Rest","slug":"Spring/Spring-Rest","permalink":"https://ckck803.github.io/categories/Spring/Spring-Rest/"}],"tags":[]},{"title":"Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°","slug":"spring/spring-security/oauth2/oauth2-05-config","date":"2021-02-01T04:56:10.000Z","updated":"2024-02-26T16:23:56.067Z","comments":true,"path":"2021/02/01/spring/spring-security/oauth2/oauth2-05-config/","link":"","permalink":"https://ckck803.github.io/2021/02/01/spring/spring-security/oauth2/oauth2-05-config/","excerpt":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° 2. Resource Serverë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°Spring Security ì„¤ì •í•˜ê¸°OAuth2 ì¸ì¦ì„ ë§ˆì¹œ í›„ì— Resource Serverë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œëŠ” UserInfo EndPointì— ì ‘ê·¼í•  í•„ìš”ê°€ ìˆë‹¤. HttpSecurityê°ì²´ì˜ oauth2Login().userInfoEndpoint().userService() ë©”ì†Œë“œë¥¼ ì´ìš©í•´ì„œ UserInfo EndPointë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ Serviceë¥¼ ë“±ë¡í•œë‹¤. @EnableWebSecurity@RequiredArgsConstructorpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; private final CustomOAuth2UserService customOAuth2UserService; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .antMatcher(&quot;/**&quot;).authorizeRequests() .antMatchers(&quot;/&quot;).permitAll() .anyRequest().authenticated(); http .oauth2Login() .userInfoEndpoint() .userService(customOAuth2UserService); &#125;&#125; ìŠ¤í”„ë§ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” OAuth2ProviderGoogle, Facebook, Github ë“±ì„ í†µí•´ OAuth2ì¸ì¦í•˜ê¸° ìœ„í•œ ê¸°ë³¸ì ì¸ ì„¤ì •ê°’ë“¤ì´ ë“¤ì–´ê°€ ìˆë‹¤. í•´ë‹¹ ì •ë³´ë¥¼ í†µí•´ ClientRegistration ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. authorizationUri ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” URI tokenUri Resource serverë¡œë¶€í„° access tokenì„ ë°›ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” URI jwkSetUri tokenì˜ ìœ íš¨ì„±(ì„œëª…)ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” public key(JSON Web Key)ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” URI userInfoUri Resource Server(ex. Google)ë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ URI userNameAttributeName Resource serverê°€ ì œê³µí•˜ëŠ” idê°’ clientName Resource Server ì´ë¦„(client Nameì„ ì‚¬ìš©í•  ë•Œë„ ìˆë‹¤.)","text":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° 2. Resource Serverë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°Spring Security ì„¤ì •í•˜ê¸°OAuth2 ì¸ì¦ì„ ë§ˆì¹œ í›„ì— Resource Serverë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œëŠ” UserInfo EndPointì— ì ‘ê·¼í•  í•„ìš”ê°€ ìˆë‹¤. HttpSecurityê°ì²´ì˜ oauth2Login().userInfoEndpoint().userService() ë©”ì†Œë“œë¥¼ ì´ìš©í•´ì„œ UserInfo EndPointë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ Serviceë¥¼ ë“±ë¡í•œë‹¤. @EnableWebSecurity@RequiredArgsConstructorpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; private final CustomOAuth2UserService customOAuth2UserService; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .antMatcher(&quot;/**&quot;).authorizeRequests() .antMatchers(&quot;/&quot;).permitAll() .anyRequest().authenticated(); http .oauth2Login() .userInfoEndpoint() .userService(customOAuth2UserService); &#125;&#125; ìŠ¤í”„ë§ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” OAuth2ProviderGoogle, Facebook, Github ë“±ì„ í†µí•´ OAuth2ì¸ì¦í•˜ê¸° ìœ„í•œ ê¸°ë³¸ì ì¸ ì„¤ì •ê°’ë“¤ì´ ë“¤ì–´ê°€ ìˆë‹¤. í•´ë‹¹ ì •ë³´ë¥¼ í†µí•´ ClientRegistration ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. authorizationUri ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” URI tokenUri Resource serverë¡œë¶€í„° access tokenì„ ë°›ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” URI jwkSetUri tokenì˜ ìœ íš¨ì„±(ì„œëª…)ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” public key(JSON Web Key)ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” URI userInfoUri Resource Server(ex. Google)ë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ URI userNameAttributeName Resource serverê°€ ì œê³µí•˜ëŠ” idê°’ clientName Resource Server ì´ë¦„(client Nameì„ ì‚¬ìš©í•  ë•Œë„ ìˆë‹¤.) CommonOAuth2Provider.enum public enum CommonOAuth2Provider &#123; GOOGLE &#123; @Override public Builder getBuilder(String registrationId) &#123; ClientRegistration.Builder builder = getBuilder(registrationId, ClientAuthenticationMethod.BASIC, DEFAULT_REDIRECT_URL); builder.scope(&quot;openid&quot;, &quot;profile&quot;, &quot;email&quot;); builder.authorizationUri(&quot;https://accounts.google.com/o/oauth2/v2/auth&quot;); builder.tokenUri(&quot;https://www.googleapis.com/oauth2/v4/token&quot;); builder.jwkSetUri(&quot;https://www.googleapis.com/oauth2/v3/certs&quot;); builder.issuerUri(&quot;https://accounts.google.com&quot;); builder.userInfoUri(&quot;https://www.googleapis.com/oauth2/v3/userinfo&quot;); builder.userNameAttributeName(IdTokenClaimNames.SUB); builder.clientName(&quot;Google&quot;); return builder; &#125; &#125;, ... private static final String DEFAULT_REDIRECT_URL = &quot;&#123;baseUrl&#125;/&#123;action&#125;/oauth2/code/&#123;registrationId&#125;&quot;; protected final ClientRegistration.Builder getBuilder(String registrationId, ClientAuthenticationMethod method, String redirectUri) &#123; ClientRegistration.Builder builder = ClientRegistration.withRegistrationId(registrationId); builder.clientAuthenticationMethod(method); builder.authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE); builder.redirectUri(redirectUri); return builder; &#125;&#125; Service ìƒì„±í•˜ê¸°ì•„ë˜ ì„œë¹„ìŠ¤ëŠ” DefaultOAuth2UserService ì— êµ¬í˜„ëœ ì½”ë“œë“¤ì„ ê°€ì ¸ì™€ ë‹¤ì‹œ ì •ì˜ í–ˆë‹¤. Spring Bootì—ì„œ OAuth2 ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” OAuth2UserServiceì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ loadUser ë©”ì†Œë“œë¥¼ ì •ì˜í•´ì•¼ í•œë‹¤. OAuth2UserService ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ë§Œë“ ë‹¤. DefaultOAuth2UserService ëŠ” ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” OAuth2UserService ë¥¼ êµ¬í˜„í•œ ê¸°ë³¸ Classì´ë‹¤. CustomOAuth2UserService.class @Service@RequiredArgsConstructorpublic class CustomOAuth2UserService implements OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; &#123; private final OAuth2Repository oAuth2Repository; private RestTemplate restTemplate = new RestTemplate(); private final Converter&lt;OAuth2UserRequest, RequestEntity&lt;?&gt;&gt; requestEntityConverter = new OAuth2UserRequestEntityConverter(); @Override public OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException &#123; String userNameAttributeName = userRequest .getClientRegistration() .getProviderDetails() .getUserInfoEndpoint() .getUserNameAttributeName(); // userRequestê°ì²´ë¥¼ requestê°ì²´ë¡œ ë³€í™˜í•´ Resouce Serverì— ìš”ì²­ì„ ë³´ë‚´ User ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. RequestEntity&lt;?&gt; request = this.requestEntityConverter.convert(userRequest); ResponseEntity&lt;Map&lt;String, Object&gt;&gt; response = restTemplate.exchange(request, new ParameterizedTypeReference&lt;Map&lt;String, Object&gt;&gt;() &#123;&#125;); Map&lt;String, Object&gt; userAttributes = response.getBody(); // ì‚¬ìš©ì ê¶Œí•œ ëª©ë¡ì„ ì €ì¥í•œë‹¤. Set&lt;GrantedAuthority&gt; authorities = new LinkedHashSet&lt;&gt;(); authorities.add(new OAuth2UserAuthority(userAttributes)); // tokenê°’ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•œ scopeë¥¼ ê°™ì´ ì €ì¥í•œë‹¤. OAuth2AccessToken token = userRequest.getAccessToken(); for (String authority : token.getScopes()) &#123; authorities.add(new SimpleGrantedAuthority(&quot;SCOPE_&quot; + authority)); &#125; OAuth2User oAuth2User = new DefaultOAuth2User(authorities, userAttributes, userNameAttributeName); return oAuth2User; &#125;&#125; OAuth2UserService ëŠ” clinetRegistration ê°ì²´ì™€ accessToken ì„ ê°€ì§€ê³  ìˆëŠ” OAuth2UserRequest ë¥¼ ì´ìš©í•´ UserInfo EndPointë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ë””ë²„ê¹…ì„ í†µí•´ Spring OAuth2 ìì„¸íˆ ì‚´í´ë³´ê¸° userNameAttributeName ì‚¬ìš©ìë¥¼ ì¸ì‹í•  ìˆ˜ ìˆëŠ” field êµ¬ê¸€ì—ì„œëŠ” subí•„ë“œë¥¼ ì´ìš©í•œë‹¤. OAuth2User ìŠ¤í”„ë§ì—ì„œëŠ” ê¸°ë³¸ êµ¬í˜„ì²´ë¡œ DefaultOAuth2User ê°ì²´ë¥¼ ì œê³µí•œë‹¤. authorities, userAttributes, userNameAttributeName 3ê°€ì§€ ì†ì„±ì„ ê°€ì§„ OAuth2 Userê°ì²´ì´ë‹¤. OAuth2AccessToken OAuth2 Access Tokenì„ í‘œí˜„í•˜ê¸° ìœ„í•œ ê°ì²´ tokenType : OAuth ì¸ì¦ì„ ìœ„í•œ Bearer Token íƒ€ì…ì„ì„ ë‚˜íƒ€ë‚¸ë‹¤. scope : í•´ë‹¹ í† í° ê°’ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì •ë³´ë“¤ì„ ë‚˜íƒ€ë‚¸ë‹¤. toeknValue : í† í° ê°’ì´ ë“¤ì–´ ìˆë‹¤. OAuth2UserRequest OAuth2UserRequestê°ì²´ëŠ” ClientRegistration ê°ì²´ì™€, OAuth2AccessToken ê°ì²´ ê·¸ë¦¬ê³  ì¶”ê°€ì ì¸ ë°ì´í„°ë¥¼ ë‹´ê¸° ìœ„í•œ Map&lt;String, Object&gt; ê°ì²´ê°€ ì¡´ì¬í•œë‹¤. ClientRegistration ê°ì²´ì—ëŠ” Resource Serverì— ë“±ë¡ ì •ë³´ì™€ Resourceì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ URIë“¤ì´ ìˆë‹¤. OAuth2AccessToken ê°ì²´ì—ëŠ” Resource Serverë¡œë¶€í„° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ í•„ìš”í•œ Tokenê°’ì´ ë‹´ê²¨ ìˆë‹¤. request ê°ì²´ë¥¼ ë³´ë©´ Headerê°’ì— Access Tokenê°’ì´ ìˆë‹¤. UserInfo URIì— ì ‘ê·¼í•´ Access Tokenì„ ì´ìš©í•´ ì¸ì¦ì„ ë°›ê³  ì‚¬ìš©ì ì •ë³´ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆë‹¤. OAuth2UserRequest ê°ì²´ë‚´ additionalParamater ì— id_tokenìœ¼ë¡œ JWT(JSON Web Token) ì´ ë“¤ì–´ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. JWT ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ëŠ” jwkSetUri ì—ì„œ Public Key ê°’ì„ ê°€ì ¸ì™€ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì§„í–‰í•œë‹¤. https://jwt.io/ ì‚¬ì´íŠ¸ì— ì „ë‹¬ ë°›ì€ JWT ì™€ Public Keyë¥¼ ì´ìš©í•˜ë©´ ìœ íš¨ì„± ê²€ì¦ê³¼ JWT ë‚´ìš©ì„ ë³¼ ìˆ˜ ìˆë‹¤. response ê°ì²´ë¥¼ ì‚´í´ ë³´ë©´ UserInfo URIë¡œ ì ‘ê·¼í•´ ì¸ì¦ì„ ì„±ê³µì ìœ¼ë¡œ ë§ˆì³¤ì„ ë•Œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜´ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. ê°€ì ¸ì˜¤ëŠ” ì‚¬ìš©ì ì •ë³´ëŠ” scopeë¡œ ëª…ì‹œí•œ ë°ì´í„°ë§Œ ê°€ì ¸ì˜¨ë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Oauth2","slug":"Spring/Spring-Security/Oauth2","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Oauth2/"}],"tags":[]},{"title":"Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸°","slug":"spring/spring-security/oauth2/oauth2-03-modeling","date":"2021-02-01T04:26:33.000Z","updated":"2024-02-26T16:23:14.700Z","comments":true,"path":"2021/02/01/spring/spring-security/oauth2/oauth2-03-modeling/","link":"","permalink":"https://ckck803.github.io/2021/02/01/spring/spring-security/oauth2/oauth2-03-modeling/","excerpt":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° 1. OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸°ì°¸ê³  https://www.docs4dev.com/docs/en/spring-security/5.1.2.RELEASE/reference/jc.html#oauth2client Googleì— Web Application ë“±ë¡í•˜ê¸°Googleì˜ OAuth2 ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•  Web Applicationì„ ë“±ë¡í•´ Client Idì™€ Client Secretì„ ë°›ì•„ì•¼ í•œë‹¤. êµ¬ê¸€ í´ë¼ìš°ë“œ í”Œë«í¼ : https://console.cloud.google.com/ APIë° ì„œë¹„ìŠ¤ &gt; OAuth ë™ì˜ í™”ë©´ì„ í´ë¦­","text":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° 1. OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸°ì°¸ê³  https://www.docs4dev.com/docs/en/spring-security/5.1.2.RELEASE/reference/jc.html#oauth2client Googleì— Web Application ë“±ë¡í•˜ê¸°Googleì˜ OAuth2 ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•  Web Applicationì„ ë“±ë¡í•´ Client Idì™€ Client Secretì„ ë°›ì•„ì•¼ í•œë‹¤. êµ¬ê¸€ í´ë¼ìš°ë“œ í”Œë«í¼ : https://console.cloud.google.com/ APIë° ì„œë¹„ìŠ¤ &gt; OAuth ë™ì˜ í™”ë©´ì„ í´ë¦­ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸° &gt; OAuth í´ë¼ì´ì–¸íŠ¸ IDë¥¼ ì„ íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜•ìœ¼ë¡œëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„ íƒí•œë‹¤.ìŠ¹ì¸ëœ ë¦¬ë””ë™ì…˜ URIë¡œëŠ” http://localhost:8080/login/oauth2/code/google ë¥¼ ê¸°ì…í•´ì¤€ë‹¤. OAuth í´ë¼ì´ì–¸íŠ¸ê°€ ìƒì„±ëë‹¤ëŠ” ì•Œë¦¼ê³¼ í•¨ê»˜ Client IDì™€ Client Secretì´ ìƒì„±ëœë‹¤. OAuth2 ì„¤ì • ì ìš©í•˜ê¸°SpringBootì—ì„œ Google OAuth2 ì¸ì¦ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ Googleë¡œë¶€í„° ìƒì„±ëœ Client IDì™€ Client Secretì„ ê¸°ì…í•´ì¤€ë‹¤. application.yml spring: security: oauth2: client: registration: google: client-id: Googleë¡œë¶€í„° ë°›ì€ Client ID client-secret: Googleë¡œë¶€í„° ë°›ì€ Client Secret Control êµ¬í˜„/ ê²½ë¡œëŠ” ëˆ„êµ¬ë‚˜ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ í•´ Hello World ë¬¸êµ¬ê°€ ë°˜í™˜ë˜ì§€ë§Œ /restricted ê²½ë¡œëŠ” ì¸ì¦ëœ ì‚¬ìš©ìë§Œ restricted ë¬¸êµ¬ë¥¼ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•  ê²ƒì´ë‹¤. Oauth2Controller.class @RestControllerpublic class Oauth2Controller &#123; @GetMapping(&quot;/&quot;) public String Hello()&#123; return &quot;Hello World&quot;; &#125; @GetMapping(&quot;/restricted&quot;) public String restricted()&#123; return &quot;restricted&quot;; &#125;&#125; Spring Security ì„¤ì •í•˜ê¸°/ ê²½ë¡œëŠ” ëˆ„êµ¬ë‚˜ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ í•˜ê³  ê·¸ì™¸ ëª¨ë“  ê²½ë¡œëŠ” ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤.HttpSecurityê°ì²´ì˜ oauth2Login() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ OAuth2 ì¸ì¦ë°©ì‹ì„ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤. SecurityConfig.class @EnableWebSecurity@RequiredArgsConstructorpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; private final CustomOAuth2UserService customOAuth2UserService; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .antMatcher(&quot;/**&quot;).authorizeRequests() .antMatchers(&quot;/&quot;).permitAll() .anyRequest().authenticated(); http .oauth2Login(); &#125;&#125; ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì„¤ì •ì„ ì™„ë£Œí•œ í›„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•œ ë‹¤ìŒ localhost:8080/restricted ë¡œ ì´ë™í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ Google OAuth2ì¸ì¦ í˜ì´ì§€ë¡œ ì´ë™í•˜ê²Œ ëœë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Oauth2","slug":"Spring/Spring-Security/Oauth2","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Oauth2/"}],"tags":[]},{"title":"Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸°","slug":"spring/spring-security/oauth2/oauth2-02-google","date":"2021-02-01T03:56:10.000Z","updated":"2024-02-26T16:22:56.229Z","comments":true,"path":"2021/02/01/spring/spring-security/oauth2/oauth2-02-google/","link":"","permalink":"https://ckck803.github.io/2021/02/01/spring/spring-security/oauth2/oauth2-02-google/","excerpt":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° Google Oauth2 ì¸ì¦ ì‹œë‚˜ë¦¬ì˜¤ ì‚´í´ë³´ê¸° Web Serverê°€ Googleì— Access Token ì„ ìš”ì²­í•œë‹¤. ì‚¬ìš©ìê°€ êµ¬ê¸€ IDì™€ Passwordë¥¼ ì´ìš©í•´ ë¡œê·¸ì¸ì„ í•œë‹¤. Web Serverìª½ìœ¼ë¡œ Authorization code ê°€ ë°˜í™˜ëœë‹¤. Authorization codeë¥¼ ì´ìš©í•´ Access Tokenì„ ìš”ì²­ êµ¬ê¸€ì—ì„œ Access Tokenê°’ì„ ë°˜í™˜í•œë‹¤. Access Tokenì„ ì´ìš©í•´ ì‚¬ìš©ìì˜ profileê³¼ ê°™ì€ ì •ë³´ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤. ìŠ¤í”„ë§ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” OAuth2Provider https://docs.aws.amazon.com/ko_kr/cognito/latest/developerguide/amazon-cognito-user-pools-using-tokens-verifying-a-jwt.html Google, Facebook, Github ë“±ì„ í†µí•´ OAuth2ì¸ì¦í•˜ê¸° ìœ„í•œ ê¸°ë³¸ì ì¸ ì„¤ì •ê°’ë“¤ì´ ë“¤ì–´ê°€ ìˆë‹¤. authorizationUri ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” URI tokenUri Resource server ë¡œë¶€í„° Access token ì„ ë°›ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” URI jwkSetUri Googleë¡œ ë¶€í„° ë°›ì€ JWT(JSON Web Token) ì˜ ìœ íš¨ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” Public key(JSON Web Key) ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” URI userInfoUri Resource Server (ex. Google) ë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ URI userNameAttributeName Resource server ê°€ ì œê³µí•˜ëŠ” idê°’ clientName Resource Server ì´ë¦„ (client Nameì„ ì‚¬ìš©í•  ë•Œë„ ìˆë‹¤.) public enum CommonOAuth2Provider &#123; GOOGLE &#123; @Override public Builder getBuilder(String registrationId) &#123; ClientRegistration.Builder builder = getBuilder(registrationId, ClientAuthenticationMethod.BASIC, DEFAULT_REDIRECT_URL); builder.scope(&quot;openid&quot;, &quot;profile&quot;, &quot;email&quot;); builder.authorizationUri(&quot;https://accounts.google.com/o/oauth2/v2/auth&quot;); builder.tokenUri(&quot;https://www.googleapis.com/oauth2/v4/token&quot;); builder.jwkSetUri(&quot;https://www.googleapis.com/oauth2/v3/certs&quot;); builder.issuerUri(&quot;https://accounts.google.com&quot;); builder.userInfoUri(&quot;https://www.googleapis.com/oauth2/v3/userinfo&quot;); builder.userNameAttributeName(IdTokenClaimNames.SUB); builder.clientName(&quot;Google&quot;); return builder; &#125; &#125;, ... private static final String DEFAULT_REDIRECT_URL = &quot;&#123;baseUrl&#125;/&#123;action&#125;/oauth2/code/&#123;registrationId&#125;&quot;; protected final ClientRegistration.Builder getBuilder(String registrationId, ClientAuthenticationMethod method, String redirectUri) &#123; ClientRegistration.Builder builder = ClientRegistration.withRegistrationId(registrationId); builder.clientAuthenticationMethod(method); builder.authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE); builder.redirectUri(redirectUri); return builder; &#125;&#125;","text":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° Google Oauth2 ì¸ì¦ ì‹œë‚˜ë¦¬ì˜¤ ì‚´í´ë³´ê¸° Web Serverê°€ Googleì— Access Token ì„ ìš”ì²­í•œë‹¤. ì‚¬ìš©ìê°€ êµ¬ê¸€ IDì™€ Passwordë¥¼ ì´ìš©í•´ ë¡œê·¸ì¸ì„ í•œë‹¤. Web Serverìª½ìœ¼ë¡œ Authorization code ê°€ ë°˜í™˜ëœë‹¤. Authorization codeë¥¼ ì´ìš©í•´ Access Tokenì„ ìš”ì²­ êµ¬ê¸€ì—ì„œ Access Tokenê°’ì„ ë°˜í™˜í•œë‹¤. Access Tokenì„ ì´ìš©í•´ ì‚¬ìš©ìì˜ profileê³¼ ê°™ì€ ì •ë³´ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤. ìŠ¤í”„ë§ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” OAuth2Provider https://docs.aws.amazon.com/ko_kr/cognito/latest/developerguide/amazon-cognito-user-pools-using-tokens-verifying-a-jwt.html Google, Facebook, Github ë“±ì„ í†µí•´ OAuth2ì¸ì¦í•˜ê¸° ìœ„í•œ ê¸°ë³¸ì ì¸ ì„¤ì •ê°’ë“¤ì´ ë“¤ì–´ê°€ ìˆë‹¤. authorizationUri ì¸ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” URI tokenUri Resource server ë¡œë¶€í„° Access token ì„ ë°›ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” URI jwkSetUri Googleë¡œ ë¶€í„° ë°›ì€ JWT(JSON Web Token) ì˜ ìœ íš¨ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” Public key(JSON Web Key) ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” URI userInfoUri Resource Server (ex. Google) ë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ URI userNameAttributeName Resource server ê°€ ì œê³µí•˜ëŠ” idê°’ clientName Resource Server ì´ë¦„ (client Nameì„ ì‚¬ìš©í•  ë•Œë„ ìˆë‹¤.) public enum CommonOAuth2Provider &#123; GOOGLE &#123; @Override public Builder getBuilder(String registrationId) &#123; ClientRegistration.Builder builder = getBuilder(registrationId, ClientAuthenticationMethod.BASIC, DEFAULT_REDIRECT_URL); builder.scope(&quot;openid&quot;, &quot;profile&quot;, &quot;email&quot;); builder.authorizationUri(&quot;https://accounts.google.com/o/oauth2/v2/auth&quot;); builder.tokenUri(&quot;https://www.googleapis.com/oauth2/v4/token&quot;); builder.jwkSetUri(&quot;https://www.googleapis.com/oauth2/v3/certs&quot;); builder.issuerUri(&quot;https://accounts.google.com&quot;); builder.userInfoUri(&quot;https://www.googleapis.com/oauth2/v3/userinfo&quot;); builder.userNameAttributeName(IdTokenClaimNames.SUB); builder.clientName(&quot;Google&quot;); return builder; &#125; &#125;, ... private static final String DEFAULT_REDIRECT_URL = &quot;&#123;baseUrl&#125;/&#123;action&#125;/oauth2/code/&#123;registrationId&#125;&quot;; protected final ClientRegistration.Builder getBuilder(String registrationId, ClientAuthenticationMethod method, String redirectUri) &#123; ClientRegistration.Builder builder = ClientRegistration.withRegistrationId(registrationId); builder.clientAuthenticationMethod(method); builder.authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE); builder.redirectUri(redirectUri); return builder; &#125;&#125; jwkSetUriì˜ URIë¡œ ì ‘ì†https://www.googleapis.com/oauth2/v3/certs // 20210131104458// https://www.googleapis.com/oauth2/v3/certs&#123; &quot;keys&quot;: [ &#123; &quot;use&quot;: &quot;sig&quot;, &quot;kid&quot;: &quot;eea1b1f42807a8cc136a03a3c16d29db8296daf0&quot;, &quot;n&quot;: &quot;0zNdxOgV5VIpoeAfj8TMEGRBFg-gaZWz94ePR1yxTKzScHakH4F4wcMEyL0vNE-yW_u4pOl9E-hAalPa2tFv4fCVNMMkmKwcf0gm9wNFWXGakVQ8wER4iUg33MyUGOWj2RGX1zlZxCdFoZRtshLx8xcpL3F5Hlh6m8MqIAowWtusTf5TtYMXFlPaWLQgRXvoOlLZ-muzEuutsZRu-agdOptnUiAZ74e8BgaKN8KNEZ2SqP6vE4w16mgGHQjEPUKz9exxcsnbLru6hZdTDvXbX9IduabyvHy8vQRZsqlE9lTiOOOC9jwh27TXsD05HAXmNYiR6voekzEvfS88vnot2Q&quot;, &quot;e&quot;: &quot;AQAB&quot;, &quot;kty&quot;: &quot;RSA&quot;, &quot;alg&quot;: &quot;RS256&quot; &#125;, &#123; &quot;n&quot;: &quot;rKZ-1zdz_CoLekSynOtyWv6cPSSkV28Kb9kZZHyYL-yhkKnH_bHl8OpWiGxQiKP0ulLRIaq1IhSMetkZ8FfXH-iptIDu4lPb8gt0HQYkjcy3HoaKRXBw2F8fJQO4jQ-ufR4l-E0HRqwLywzdtAImNWmju3A4kx8s0iSGHGSHyE4EUdh5WKt-NMtfUPfB5v9_2bC-w6wH7zAEsI5nscMXnvz1u8w7g2_agyhKSK0D9OkJ02w3I4xLMlrtKEv2naoBGerWckKcQ1kBYUh6WASPdvTqX4pcAJi7Tg6jwQXIP1aEq0JU8C0zE3d33kaMoCN3SenIxpRczRzUHpbZ-gk5PQ&quot;, &quot;e&quot;: &quot;AQAB&quot;, &quot;use&quot;: &quot;sig&quot;, &quot;kid&quot;: &quot;03b2d22c2fecf873ed19e5b8cf704afb7e2ed4be&quot;, &quot;kty&quot;: &quot;RSA&quot;, &quot;alg&quot;: &quot;RS256&quot; &#125; ]&#125; userInfoUri EndPointì— ì ‘ì†token_urië¡œë¶€í„° ë°›ì€ access tokenì„ ì‚¬ìš©í•˜ì—¬ https://www.googleapis.com/oauth2/v3/userinfo?access_token=&#123;Googleë¡œë¶€í„° ë°›ì€ Access Token&#125; í•´ë‹¹ í˜•ì‹ìœ¼ë¡œ URIì— ì ‘ì†í•˜ê²Œ ë˜ë©´ Userì™€ ê´€ë ¨ëœ JSONê°’ì„ ë°›ì„ ìˆ˜ ìˆë‹¤. &#123; &quot;sub&quot;: &quot;&quot;, &quot;name&quot;: &quot;ì‚¬ìš©ì ì„±+ì´ë¦„&quot;, &quot;given_name&quot;: &quot;ì‚¬ìš©ì ì´ë¦„&quot;, &quot;family_name&quot;: &quot;ì‚¬ìš©ì ì„±&quot;, &quot;picture&quot;: &quot;êµ¬ê¸€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë‚´ ì‚¬ì§„&quot;, &quot;email&quot;: &quot;êµ¬ê¸€ email&quot;, &quot;email_verified&quot;: true, &quot;locale&quot;: &quot;ko&quot;&#125; sub í•„ë“œëŠ” Googleì„œë¹„ìŠ¤ì—ì„œ ê³„ì •ë§ˆë‹¤ ë¶€ì—¬í•˜ëŠ” id ê°’ì´ë‹¤.","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Oauth2","slug":"Spring/Spring-Security/Oauth2","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Oauth2/"}],"tags":[]},{"title":"OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸°","slug":"spring/spring-security/oauth2/oauth2-01","date":"2021-01-29T11:47:30.000Z","updated":"2024-02-26T16:22:30.852Z","comments":true,"path":"2021/01/29/spring/spring-security/oauth2/oauth2-01/","link":"","permalink":"https://ckck803.github.io/2021/01/29/spring/spring-security/oauth2/oauth2-01/","excerpt":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸°OAuthë€? OAuthë€ Open Authorizationì˜ ì•½ìì´ë©° ì‚¬ìš©ì ì¸ì¦ì„ ëŒ€ì‹ í•´ì„œ í•´ì£¼ê³  Clientì—ê²Œ Access Tokenì„ ë°œê¸‰í•´ ì‚¬ìš©ì Resourceì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œ(Authorization)ì„ ì œê³µí•˜ëŠ” ë°©ë²•ì´ë‹¤. OAuthê°€ ë“±ì¥í•˜ê¸° ì´ì „ì—ëŠ” ê° ì‚¬ì´íŠ¸ ë³„ë¡œ ì‚¬ìš©ì Idì™€ Passwordë¥¼ ì…ë ¥í•´ ì¸ì¦ì„ í•˜ê³  ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ì˜€ë‹¤. ë•Œë¬¸ì— ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” ë³¸ì¸ì˜ Idì™€ Passwordë¥¼ ê° ì‚¬ì´íŠ¸ì— ë“±ë¡í•´ì•¼ í•œë‹¤ëŠ” ì‹ ë¢°ì„± ì ì¸ ë¬¸ì œì™€ ê° ì‚¬ì´íŠ¸ì—ì„œëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê³  ì±…ì„ì ¸ì•¼ í•˜ëŠ” ë¬¸ì œì ì´ ìˆì—ˆë‹¤. í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ë°©ë²•ì´ OAuth ì¸ì¦ ë°©ì‹ì´ë‹¤. OAuth2 ì‚¬ìš©í•˜ê¸°Web Applicationì„ ê¸°ì¤€ìœ¼ë¡œ OAuth2ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë°©ë²•ì€ í¬ê²Œ 3ê°€ì§€ê°€ ìˆë‹¤. Resource Server(Google, Naver ë“±) ì— Applicationì„ ë“±ë¡ Resource Owner ì‚¬ìš©ì ì¸ì¦ì„ í†µí•´ Autorization Code ë¥¼ ê°€ì ¸ì˜¤ê¸° Clientê°€ íšë“í•œ Autorization Codeë¥¼ ì´ìš©í•´ Access Token ì„ ë°œê¸‰ ë°›ê¸°","text":"ëª©ì°¨ Spring Security OAuth2 - Handler Spring Security OAuth2 - Login í˜ì´ì§€ Customizing í•˜ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - Spring boot OAuth2 ì¸ì¦ ì‚´í´ë³´ê¸° Spring Security OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ - OAuth2ë¥¼ ì´ìš©í•œ ì¸ì¦ ì‚¬ìš©í•˜ê¸° Google OAuth2 ì¸ì¦ ë°©ì‹ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸° OAuth2ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ì´í•´í•˜ê¸°OAuthë€? OAuthë€ Open Authorizationì˜ ì•½ìì´ë©° ì‚¬ìš©ì ì¸ì¦ì„ ëŒ€ì‹ í•´ì„œ í•´ì£¼ê³  Clientì—ê²Œ Access Tokenì„ ë°œê¸‰í•´ ì‚¬ìš©ì Resourceì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œ(Authorization)ì„ ì œê³µí•˜ëŠ” ë°©ë²•ì´ë‹¤. OAuthê°€ ë“±ì¥í•˜ê¸° ì´ì „ì—ëŠ” ê° ì‚¬ì´íŠ¸ ë³„ë¡œ ì‚¬ìš©ì Idì™€ Passwordë¥¼ ì…ë ¥í•´ ì¸ì¦ì„ í•˜ê³  ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ì˜€ë‹¤. ë•Œë¬¸ì— ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” ë³¸ì¸ì˜ Idì™€ Passwordë¥¼ ê° ì‚¬ì´íŠ¸ì— ë“±ë¡í•´ì•¼ í•œë‹¤ëŠ” ì‹ ë¢°ì„± ì ì¸ ë¬¸ì œì™€ ê° ì‚¬ì´íŠ¸ì—ì„œëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê³  ì±…ì„ì ¸ì•¼ í•˜ëŠ” ë¬¸ì œì ì´ ìˆì—ˆë‹¤. í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ë°©ë²•ì´ OAuth ì¸ì¦ ë°©ì‹ì´ë‹¤. OAuth2 ì‚¬ìš©í•˜ê¸°Web Applicationì„ ê¸°ì¤€ìœ¼ë¡œ OAuth2ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë°©ë²•ì€ í¬ê²Œ 3ê°€ì§€ê°€ ìˆë‹¤. Resource Server(Google, Naver ë“±) ì— Applicationì„ ë“±ë¡ Resource Owner ì‚¬ìš©ì ì¸ì¦ì„ í†µí•´ Autorization Code ë¥¼ ê°€ì ¸ì˜¤ê¸° Clientê°€ íšë“í•œ Autorization Codeë¥¼ ì´ìš©í•´ Access Token ì„ ë°œê¸‰ ë°›ê¸° 1. Resource Serverì— Application ë“±ë¡í•˜ê¸° Resource Serverì— Applicationì„ ë“±ë¡í•˜ê²Œ ë˜ë©´ Clinet Id ì™€ Client Secret ê·¸ë¦¬ê³  Authorized redirect URIs ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. 2. Resource Owner ì¸ì¦ URI Reousrce Ownerê°€ OAuth ë°©ì‹ìœ¼ë¡œ Clientì— ì‚¬ìš©ì ì¸ì¦ì„ ì‹œë„í•˜ë©´ íŠ¹ì • URLë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ ì§„í–‰í•œë‹¤.Clientì—ì„œ Resource Serverë¡œ Redirectí•œ ì£¼ì†ŒëŠ” ì•„ë˜ì™€ ê°™ë‹¤. https://accounts.google.com/o/oauth2/v2/auth/oauthchooseaccount? response_type=code &amp;client_id=406416755620-r1h48em5g68qqh34pq277o80sc9qpb05.apps.googleusercontent.com &amp;scope=profile%20email &amp;state=qc0AqQVml_2waASthQKINHS6vGvC2HbjdWKmfWBFSkk%3D &amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Flogin%2Foauth2%2Fcode%2Fgoogle &amp;flowName=GeneralOAuthFlow Request Parameter response_type Google OAuth 2.0 End-Point ê°€ ì¸ì¦ ì½”ë“œë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•œë‹¤. ì›¹ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš° ë§¤ê°œ ë³€ìˆ˜ ê°’ì„ codeë¡œ ì„¤ì •(resource serverê°€ authorization code ë¥¼ ë°œí–‰) client_id Resource Serverì—ì„œ Clientì— ë°œí–‰í•´ì¤€ Id scope clientê°€ resource serverì— í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ accessë²”ìœ„ ë¥¼ ì§€ì •í•œë‹¤. state ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê¶Œí•œ ìš”ì²­ê³¼ ê¶Œí•œ ì„œë²„ì˜ ì‘ë‹µ ì‚¬ì´ì˜ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë¬¸ìì—´ ê°’ì„ ì§€ì •í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ê¶Œí•œì„ ì¸ì¦í•œ í›„ ë™ì¼í•œ ê°’ì´ ë°˜í™˜ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤. CSRF ê³µê²©ì„ ë§‰ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ê°’ redirect_uri Oauth2ë¥¼ ì´ìš©í•´ Resource Serverë¡œë¶€í„° ì¸ì¦ì„ ë§ˆì¹œ ì‚¬ìš©ê°€ì ì´ë™í•  URI authorization code ë¥¼ ë°›ê¸° ìœ„í•œ URI ì¼ë°˜ì ì¸ redirect_uriëŠ” {baseUrl}&#x2F;login&#x2F;oauth2&#x2F;code&#x2F;{registrationId} ì˜ í˜•ì‹ì„ ëˆë‹¤. googleì˜ ê²½ìš° redirect_uriì˜ ê²½ìš° localhost:8080&#x2F;login&#x2F;oauth2&#x2F;code&#x2F;google ì´ë‹¤. flowName ë¬´ì—‡ì„ ìœ„í•œ ì ‘ê·¼ì¸ì§€ ë‚˜íƒ€ë‚´ê¸° ìœ„í•œ parameter 3. Authorization code ì‚¬ìš©ìê°€ Resource Server ID ì™€ Password ë¥¼ ì´ìš©í•´ ì¸ì¦ì„ ë§ˆì¹˜ê²Œ ë˜ë©´ Clientë¡œ Authorization codeê°€ ì „ì†¡ëœë‹¤. 4. Access Token íšë“í•˜ê¸° Resource Serverë¡œë¶€í„° Access Tokenì„ ë°œê¸‰ ë°›ê¸° ìœ„í•œ ìš”ì²­ìœ¼ë¡œ Resource Serverë¡œë¶€í„° ë°›ì€Authorization Code ì™€ Client Id , Client Secret , Redirect URI ë¥¼ Parameterë¡œ ë³´ë‚¸ë‹¤. ì„œë²„ì¸¡ìœ¼ë¡œ Acces Tokenì„ íšë“í•˜ê¸° ìœ„í•œ ìš”ì²­ https://www.googleapis.com/oauth2/v4/token? code=4/P7q7W91a-oMsCeLvIaQm6bTrgtp7 &amp;client_id=your_client_id &amp;client_secret=your_client_secret &amp;redirect_uri=https%3A//oauth2.example.com/code &amp;grant_type=authorization_code ì‘ë‹µê°’ìœ¼ë¡œ Resource Serverë¡œë¶€í„° Access Tokeníšë“ &#123; &quot;access_token&quot;: &quot;1/fFAGRNJru1FTz70BzhT3Zg&quot;, &quot;expires_in&quot;: 3920, &quot;token_type&quot;: &quot;Bearer&quot;, &quot;scope&quot;: &quot;https://www.googleapis.com/auth/drive.metadata.readonly&quot;, &quot;refresh_token&quot;: &quot;1//xEoDL4iW3cxlI7yDbSRFYNG01kVKM2C-259HOF2aQbI&quot;&#125; ì°¸ê³ Open-Id : https://openid.net/specs/openid-connect-discovery-1_0.htmlOauth2 : https://tools.ietf.org/html/rfc6749êµ¬ê¸€ Oauth2 API : https://developers.google.com/identity/protocols/oauth2ìƒí™œì½”ë”© Oauth2(êµ¬) : https://www.youtube.com/watch?v=y5nNX5w0eqc&amp;t=1sìƒí™œì½”ë”© Oauth2 : https://www.youtube.com/watch?v=hm2r6LtUbk8&amp;list=PLuHgQVnccGMA4guyznDlykFJh28_R08Q-","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Oauth2","slug":"Spring/Spring-Security/Oauth2","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Oauth2/"}],"tags":[]},{"title":"Spring Security Form Login - 4. íšŒì›ê°€ì… í˜ì´ì§€ ë§Œë“¤ê¸°","slug":"spring/spring-security/form-login/form-signup-md","date":"2021-01-29T02:10:40.000Z","updated":"2024-02-26T16:21:08.940Z","comments":true,"path":"2021/01/29/spring/spring-security/form-login/form-signup-md/","link":"","permalink":"https://ckck803.github.io/2021/01/29/spring/spring-security/form-login/form-signup-md/","excerpt":"íšŒì›ê°€ì…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Controller ì¶”ê°€ ìš”ì²­ìœ¼ë¡œ ë“¤ì–´ì˜¨ ë°ì´í„°ë¥¼ ë°›ê¸° ìœ„í•œ DTOê°ì²´ ìƒì„± íšŒì›ê°€ì… pageìƒì„±í•˜ê¸° íšŒì› ê°€ì…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Controller ì¶”ê°€/signupìœ¼ë¡œ ë“¤ì–´ì˜¨ ì‚¬ìš©ì ì •ë³´ë¥¼ DTOê°ì²´ë¡œ ë°›ê³  Accountê°ì²´ë¥¼ ìƒì„±í•œ í›„ DBì— ì €ì¥í•œë‹¤. @Controller@RequiredArgsConstructorpublic class SecurityController &#123; private final CustomUserDetailsService customUserDetailsService; private final PasswordEncoder passwordEncoder; @GetMapping(&quot;/&quot;) public String index()&#123; return &quot;index&quot;; &#125; @GetMapping(&quot;/login&quot;) public String login()&#123; return &quot;login&quot;; &#125; @GetMapping(&quot;/logout&quot;) public void logout()&#123; &#125; @GetMapping(&quot;/signup&quot;) public String signup(@ModelAttribute(&quot;signupDto&quot;) AccountDto accountDto, Model model)&#123; return &quot;signup&quot;; &#125; @PostMapping(&quot;/signup&quot;) public String createNewAccount(@ModelAttribute(&quot;signupDto&quot;) @Validated AccountDto accountDto, Model model)&#123; Account account = Account.builder() .username(accountDto.getUsername()) .email(accountDto.getEmail()) .password(passwordEncoder.encode(accountDto.getPassword())) .role(Role.USER) .build(); customUserDetailsService.saveAccount(account); return &quot;redirect:&quot;; &#125;&#125; Userì •ë³´ë¥¼ ë°›ê¸°ìœ„í•œ DTOë§Œë“¤ê¸°@Datapublic class AccountDto &#123; private String username; private String email; private String password;&#125; íšŒì›ê°€ì… template ë§Œë“¤ê¸°&lt;!DOCTYPE html&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head&gt; &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt; &lt;title&gt;Bootstrap Registration Page with Floating Labels&lt;/title&gt; &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt; &lt;meta name=&quot;robots&quot; content=&quot;noindex, nofollow&quot;&gt; &lt;meta name=&quot;googlebot&quot; content=&quot;noindex, nofollow&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;&lt;!-- &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/result-light.css&quot;&gt;--&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/dummy.js&#125;&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/jquery.slim.min.js&#125;&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/bootstrap.bundle.min.js&#125;&quot;&gt;&lt;/script&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/bootstrap.min.css&#125;&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/all.css&#125;&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/style.css&#125;&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; th:href=&quot;@&#123;/css/signup.css&#125;&quot;/&gt; &lt;script id=&quot;insert&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-lg-10 col-xl-9 mx-auto&quot;&gt; &lt;div class=&quot;card card-signin flex-row my-5&quot;&gt; &lt;div class=&quot;card-img-left d-none d-md-flex&quot;&gt; &lt;!-- Background image for card set in CSS! --&gt; &lt;/div&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;h5 class=&quot;card-title text-center&quot;&gt;Register&lt;/h5&gt; &lt;form class=&quot;form-signin&quot; th:object=&quot;$&#123;signupDto&#125;&quot; th:action=&quot;@&#123;/signup&#125;&quot; th:method=&quot;post&quot;&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input th:field=&quot;*&#123;username&#125;&quot; type=&quot;text&quot; id=&quot;inputUserame&quot; class=&quot;form-control&quot; placeholder=&quot;Username&quot; required autofocus&gt; &lt;label for=&quot;inputUserame&quot;&gt;Username&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input th:field=&quot;*&#123;email&#125;&quot; type=&quot;email&quot; id=&quot;inputEmail&quot; class=&quot;form-control&quot; placeholder=&quot;Email address&quot; required&gt; &lt;label for=&quot;inputEmail&quot;&gt;Email address&lt;/label&gt; &lt;/div&gt; &lt;hr&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input th:field=&quot;*&#123;password&#125;&quot; type=&quot;password&quot; id=&quot;inputPassword&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; required&gt; &lt;label for=&quot;inputPassword&quot;&gt;Password&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input type=&quot;password&quot; id=&quot;inputConfirmPassword&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; required&gt; &lt;label for=&quot;inputConfirmPassword&quot;&gt;Confirm password&lt;/label&gt; &lt;/div&gt; &lt;button class=&quot;btn btn-lg btn-primary btn-block text-uppercase&quot; type=&quot;submit&quot;&gt;Register&lt;/button&gt; &lt;/form&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;//&lt;![CDATA[//]]&gt;&lt;/script&gt;&lt;script&gt; // tell the embed parent frame the height of the content if (window.parent &amp;&amp; window.parent.parent) &#123; window.parent.parent.postMessage([&quot;resultsFrame&quot;, &#123; height: document.body.getBoundingClientRect().height, slug: &quot;1nu8g6e5&quot; &#125;], &quot;*&quot;) &#125; // always overwrite window.name, in case users try to set it manually window.name = &quot;result&quot;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; Formì—ì„œ ê¸°ì…ëœ ë°ì´í„° ë³´ë‚´ê¸°","text":"íšŒì›ê°€ì…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Controller ì¶”ê°€ ìš”ì²­ìœ¼ë¡œ ë“¤ì–´ì˜¨ ë°ì´í„°ë¥¼ ë°›ê¸° ìœ„í•œ DTOê°ì²´ ìƒì„± íšŒì›ê°€ì… pageìƒì„±í•˜ê¸° íšŒì› ê°€ì…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Controller ì¶”ê°€/signupìœ¼ë¡œ ë“¤ì–´ì˜¨ ì‚¬ìš©ì ì •ë³´ë¥¼ DTOê°ì²´ë¡œ ë°›ê³  Accountê°ì²´ë¥¼ ìƒì„±í•œ í›„ DBì— ì €ì¥í•œë‹¤. @Controller@RequiredArgsConstructorpublic class SecurityController &#123; private final CustomUserDetailsService customUserDetailsService; private final PasswordEncoder passwordEncoder; @GetMapping(&quot;/&quot;) public String index()&#123; return &quot;index&quot;; &#125; @GetMapping(&quot;/login&quot;) public String login()&#123; return &quot;login&quot;; &#125; @GetMapping(&quot;/logout&quot;) public void logout()&#123; &#125; @GetMapping(&quot;/signup&quot;) public String signup(@ModelAttribute(&quot;signupDto&quot;) AccountDto accountDto, Model model)&#123; return &quot;signup&quot;; &#125; @PostMapping(&quot;/signup&quot;) public String createNewAccount(@ModelAttribute(&quot;signupDto&quot;) @Validated AccountDto accountDto, Model model)&#123; Account account = Account.builder() .username(accountDto.getUsername()) .email(accountDto.getEmail()) .password(passwordEncoder.encode(accountDto.getPassword())) .role(Role.USER) .build(); customUserDetailsService.saveAccount(account); return &quot;redirect:&quot;; &#125;&#125; Userì •ë³´ë¥¼ ë°›ê¸°ìœ„í•œ DTOë§Œë“¤ê¸°@Datapublic class AccountDto &#123; private String username; private String email; private String password;&#125; íšŒì›ê°€ì… template ë§Œë“¤ê¸°&lt;!DOCTYPE html&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head&gt; &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt; &lt;title&gt;Bootstrap Registration Page with Floating Labels&lt;/title&gt; &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt; &lt;meta name=&quot;robots&quot; content=&quot;noindex, nofollow&quot;&gt; &lt;meta name=&quot;googlebot&quot; content=&quot;noindex, nofollow&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;&lt;!-- &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/result-light.css&quot;&gt;--&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/dummy.js&#125;&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/jquery.slim.min.js&#125;&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/bootstrap.bundle.min.js&#125;&quot;&gt;&lt;/script&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/bootstrap.min.css&#125;&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/all.css&#125;&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/style.css&#125;&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; th:href=&quot;@&#123;/css/signup.css&#125;&quot;/&gt; &lt;script id=&quot;insert&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-lg-10 col-xl-9 mx-auto&quot;&gt; &lt;div class=&quot;card card-signin flex-row my-5&quot;&gt; &lt;div class=&quot;card-img-left d-none d-md-flex&quot;&gt; &lt;!-- Background image for card set in CSS! --&gt; &lt;/div&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;h5 class=&quot;card-title text-center&quot;&gt;Register&lt;/h5&gt; &lt;form class=&quot;form-signin&quot; th:object=&quot;$&#123;signupDto&#125;&quot; th:action=&quot;@&#123;/signup&#125;&quot; th:method=&quot;post&quot;&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input th:field=&quot;*&#123;username&#125;&quot; type=&quot;text&quot; id=&quot;inputUserame&quot; class=&quot;form-control&quot; placeholder=&quot;Username&quot; required autofocus&gt; &lt;label for=&quot;inputUserame&quot;&gt;Username&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input th:field=&quot;*&#123;email&#125;&quot; type=&quot;email&quot; id=&quot;inputEmail&quot; class=&quot;form-control&quot; placeholder=&quot;Email address&quot; required&gt; &lt;label for=&quot;inputEmail&quot;&gt;Email address&lt;/label&gt; &lt;/div&gt; &lt;hr&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input th:field=&quot;*&#123;password&#125;&quot; type=&quot;password&quot; id=&quot;inputPassword&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; required&gt; &lt;label for=&quot;inputPassword&quot;&gt;Password&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input type=&quot;password&quot; id=&quot;inputConfirmPassword&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; required&gt; &lt;label for=&quot;inputConfirmPassword&quot;&gt;Confirm password&lt;/label&gt; &lt;/div&gt; &lt;button class=&quot;btn btn-lg btn-primary btn-block text-uppercase&quot; type=&quot;submit&quot;&gt;Register&lt;/button&gt; &lt;/form&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;//&lt;![CDATA[//]]&gt;&lt;/script&gt;&lt;script&gt; // tell the embed parent frame the height of the content if (window.parent &amp;&amp; window.parent.parent) &#123; window.parent.parent.postMessage([&quot;resultsFrame&quot;, &#123; height: document.body.getBoundingClientRect().height, slug: &quot;1nu8g6e5&quot; &#125;], &quot;*&quot;) &#125; // always overwrite window.name, in case users try to set it manually window.name = &quot;result&quot;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; Formì—ì„œ ê¸°ì…ëœ ë°ì´í„° ë³´ë‚´ê¸°@ModelAttributeë¥¼ í†µí•´ accountDTOê°ì²´ì˜ ë°ì´í„°ê°€ íšŒì›ê°€ì… í˜ì´ì§€ì˜signupDtoì—ê²Œ ì „ë‹¬ë˜ê³  ì „ë‹¬ ë°›ì„ ìˆ˜ ìˆë‹¤. Thymeleafì˜ fieldì†ì„±ì„ í†µí•´ ê¸°ì…ëœ ê°’ë“¤ì€ accountDTOê°ì²´ë¡œ ë³€í™˜ë˜ì–´ ìš”ì²­ì´ ë“¤ì–´ê°€ê²Œ ëœë‹¤. &lt;form class=&quot;form-signin&quot; th:object=&quot;$&#123;signupDto&#125;&quot; th:action=&quot;@&#123;/signup&#125;&quot; th:method=&quot;post&quot;&gt;...&lt;input th:field=&quot;*&#123;username&#125;&quot; type=&quot;text&quot; id=&quot;inputUserame&quot; class=&quot;form-control&quot; placeholder=&quot;Username&quot; required autofocus&gt;...&lt;input th:field=&quot;*&#123;email&#125;&quot; type=&quot;email&quot; id=&quot;inputEmail&quot; class=&quot;form-control&quot; placeholder=&quot;Email address&quot; required&gt;...&lt;input type=&quot;password&quot; id=&quot;inputConfirmPassword&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; required&gt;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Form login","slug":"Spring/Spring-Security/Form-login","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Form-login/"}],"tags":[]},{"title":"Spring Security Form Login - 3. í…œí”Œë¦¿ ë§Œë“¤ê¸°","slug":"spring/spring-security/form-login/form-template-md","date":"2021-01-29T00:48:42.000Z","updated":"2024-02-26T16:21:12.758Z","comments":true,"path":"2021/01/29/spring/spring-security/form-login/form-template-md/","link":"","permalink":"https://ckck803.github.io/2021/01/29/spring/spring-security/form-login/form-template-md/","excerpt":"Springì—ì„œ ì œê³µí•˜ëŠ” Thymeleafí…œí”Œë¦¿ ì—”ì§„ì„ ì´ìš©í•´ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ êµ¬í˜„í–ˆë‹¤. Form Login Page&lt;!DOCTYPE html&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head&gt; &lt;title&gt;Bootstrap Login Page Card with Floating Labels&lt;/title&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/dummy.js&#125;&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/jquery.slim.min.js&#125;&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/bootstrap.bundle.min.js&#125;&quot;&gt;&lt;/script&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/bootstrap.min.css&#125;&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/all.css&#125;&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/style.css&#125;&quot;/&gt;&lt;/head&gt;&lt;body&gt;&lt;div th:class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-sm-9 col-md-7 col-lg-5 mx-auto&quot;&gt; &lt;div class=&quot;card card-signin my-5&quot;&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;h5 class=&quot;card-title text-center&quot;&gt;Sign In&lt;/h5&gt; &lt;form class=&quot;form-signin&quot; th:action=&quot;@&#123;/login&#125;&quot; method=&quot;post&quot;&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input type=&quot;text&quot; th:name=&quot;username&quot; class=&quot;form-control&quot; placeholder=&quot;Email address&quot; required autofocus&gt; &lt;label th:for=&quot;username&quot;&gt;Email address&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input type=&quot;password&quot; th:name=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; required&gt; &lt;label th:for=&quot;password&quot;&gt;Password&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;custom-control custom-checkbox mb-3&quot;&gt; &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot; id=&quot;customCheck1&quot;&gt; &lt;label class=&quot;custom-control-label&quot; for=&quot;customCheck1&quot;&gt;Remember password&lt;/label&gt; &lt;/div&gt; &lt;button class=&quot;btn btn-lg btn-primary btn-block text-uppercase&quot; type=&quot;submit&quot;&gt;Sign in&lt;/button&gt; &lt;/form&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; Form ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•˜ëŠ” urlë¡œ postìš”ì²­ì„ ë³´ë‚¸ë‹¤. &lt;form class=&quot;form-signin&quot; th:action=&quot;@&#123;/login&#125;&quot; method=&quot;post&quot;&gt; usernameê³¼ passwordë¥¼ ë°›ëŠ” inputíƒœê·¸ì—ì„œ nameì†ì„±ì— usernameê³¼ passwordë¥¼ í™•ì‹¤íˆ ê¸°ì…í•´ì¤˜ì•¼ Securityê°€ í•´ë‹¹ ë°ì´í„°ë¥¼ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤. &lt;input type=&quot;text&quot; th:name=&quot;username&quot; class=&quot;form-control&quot; placeholder=&quot;Email address&quot; required autofocus&gt;...&lt;input type=&quot;password&quot; th:name=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; required&gt; ë¡œê·¸ì¸ í›„ ì§„ì… í™”ë©´&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;ì‹œì‘í˜ì´ì§€&lt;/h1&gt;&lt;form action=&quot;/logout&quot; th:action=&quot;@&#123;/logout&#125;&quot; th:method=&quot;post&quot; sec:authorize=&quot;isAuthenticated()&quot;&gt; &lt;button type=&quot;submit&quot; value=&quot;logout&quot;&gt;ë¡œê·¸ ì•„ì›ƒ&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;","text":"Springì—ì„œ ì œê³µí•˜ëŠ” Thymeleafí…œí”Œë¦¿ ì—”ì§„ì„ ì´ìš©í•´ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ êµ¬í˜„í–ˆë‹¤. Form Login Page&lt;!DOCTYPE html&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;head&gt; &lt;title&gt;Bootstrap Login Page Card with Floating Labels&lt;/title&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/dummy.js&#125;&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/jquery.slim.min.js&#125;&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; th:src=&quot;@&#123;/js/bootstrap.bundle.min.js&#125;&quot;&gt;&lt;/script&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/bootstrap.min.css&#125;&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/all.css&#125;&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/css/style.css&#125;&quot;/&gt;&lt;/head&gt;&lt;body&gt;&lt;div th:class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-sm-9 col-md-7 col-lg-5 mx-auto&quot;&gt; &lt;div class=&quot;card card-signin my-5&quot;&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;h5 class=&quot;card-title text-center&quot;&gt;Sign In&lt;/h5&gt; &lt;form class=&quot;form-signin&quot; th:action=&quot;@&#123;/login&#125;&quot; method=&quot;post&quot;&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input type=&quot;text&quot; th:name=&quot;username&quot; class=&quot;form-control&quot; placeholder=&quot;Email address&quot; required autofocus&gt; &lt;label th:for=&quot;username&quot;&gt;Email address&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;form-label-group&quot;&gt; &lt;input type=&quot;password&quot; th:name=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; required&gt; &lt;label th:for=&quot;password&quot;&gt;Password&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;custom-control custom-checkbox mb-3&quot;&gt; &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot; id=&quot;customCheck1&quot;&gt; &lt;label class=&quot;custom-control-label&quot; for=&quot;customCheck1&quot;&gt;Remember password&lt;/label&gt; &lt;/div&gt; &lt;button class=&quot;btn btn-lg btn-primary btn-block text-uppercase&quot; type=&quot;submit&quot;&gt;Sign in&lt;/button&gt; &lt;/form&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; Form ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•˜ëŠ” urlë¡œ postìš”ì²­ì„ ë³´ë‚¸ë‹¤. &lt;form class=&quot;form-signin&quot; th:action=&quot;@&#123;/login&#125;&quot; method=&quot;post&quot;&gt; usernameê³¼ passwordë¥¼ ë°›ëŠ” inputíƒœê·¸ì—ì„œ nameì†ì„±ì— usernameê³¼ passwordë¥¼ í™•ì‹¤íˆ ê¸°ì…í•´ì¤˜ì•¼ Securityê°€ í•´ë‹¹ ë°ì´í„°ë¥¼ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤. &lt;input type=&quot;text&quot; th:name=&quot;username&quot; class=&quot;form-control&quot; placeholder=&quot;Email address&quot; required autofocus&gt;...&lt;input type=&quot;password&quot; th:name=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; required&gt; ë¡œê·¸ì¸ í›„ ì§„ì… í™”ë©´&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;ì‹œì‘í˜ì´ì§€&lt;/h1&gt;&lt;form action=&quot;/logout&quot; th:action=&quot;@&#123;/logout&#125;&quot; th:method=&quot;post&quot; sec:authorize=&quot;isAuthenticated()&quot;&gt; &lt;button type=&quot;submit&quot; value=&quot;logout&quot;&gt;ë¡œê·¸ ì•„ì›ƒ&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; ì¸ì¦ì‹œì—ë§Œ ë³´ì´ëŠ” formíƒœê·¸xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;ì„ ì´ìš©í•˜ë©´ securityë¥¼ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìì—ê²Œë§Œ ë³´ì´ëŠ” í™”ë©´ì„ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤. &lt;form action=&quot;/logout&quot; th:action=&quot;@&#123;/logout&#125;&quot; th:method=&quot;post&quot; sec:authorize=&quot;isAuthenticated()&quot;&gt;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Form login","slug":"Spring/Spring-Security/Form-login","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Form-login/"}],"tags":[]},{"title":"Spring Security Form Login - 2. Security ì„¤ì • ë° UserDetailsService ì •ì˜í•˜ê¸°","slug":"spring/spring-security/form-login/form-login-config","date":"2021-01-29T00:38:37.000Z","updated":"2024-02-26T16:20:48.782Z","comments":true,"path":"2021/01/29/spring/spring-security/form-login/form-login-config/","link":"","permalink":"https://ckck803.github.io/2021/01/29/spring/spring-security/form-login/form-login-config/","excerpt":"ë¡œê·¸ì¸ ë¡œê·¸ì•„ì›ƒì„ ì²˜ë¦¬ë¥¼ ìœ„í•œ Controller ìƒì„± Spring Security ì„¤ì •í•˜ê¸° UserDetailsService êµ¬í˜„í•˜ê¸° ë¡œê·¸ì¸ ë¡œê·¸ì•„ì›ƒì„ ì²˜ë¦¬ë¥¼ ìœ„í•œ Controller/loginìœ¼ë¡œ ì‚¬ìš©ì ë¡œê·¸ì¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  /logoutìœ¼ë¡œ ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤. @Controller@RequiredArgsConstructorpublic class SecurityController &#123; private final CustomUserDetailsService customUserDetailsService; private final PasswordEncoder passwordEncoder; @GetMapping(&quot;/&quot;) public String index()&#123; return &quot;index&quot;; &#125; @GetMapping(&quot;/login&quot;) public String login()&#123; return &quot;login&quot;; &#125; @GetMapping(&quot;/logout&quot;) public void logout()&#123; &#125;&#125; Spring Security ì„¤ì •í•˜ê¸°Spring Securityë¥¼ ì„¤ì •í•˜ê³  ì‹¶ìœ¼ë©´ EnableWebSecurityì–´ë…¸í…Œì´ì…˜ê³¼ WebSecurityConfigurerAdapter í´ë˜ìŠ¤ë¥¼ ìƒì†í•´ methodë“¤ì„ overridingí•œë‹¤. configure(AuthenticationManagerBuilder auth) AuthenticationManagerë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” method configure(WebSecurity web) ì „ì—­ì ì¸ securityë¥¼ ì„¤ì •í•  ë•Œ ì‚¬ìš©í•˜ëŠ” method, ë³´í†µì€ ë³´ì•ˆ ì˜ˆì™¸ì²˜ë¦¬ì— ì‚¬ìš©í•œë‹¤. configure(HttpSecurity http) request ë‹¨ìœ„ë¡œ ë³´ì•ˆì„ ê±¸ë•Œ ì‚¬ìš©í•˜ëŠ” method configure(HttpSecurity http)ì„ ì´ìš©í•´ í—ˆê°€ë¥¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” Spring Filter Chainì„ ê±°ì²˜ì•¼ í•˜ì§€ë§Œ configure(WebSecurity web)ë¥¼ ì´ìš©í•˜ë©´ Spring Filter Chainì„ ê±°ì¹˜ì§€ ì•ŠëŠ”ë‹¤. @EnableWebSecurity@RequiredArgsConstructorpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; private final CustomUserDetailsService customUserDetailsService; @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.userDetailsService(customUserDetailsService); &#125; @Override public void configure(WebSecurity web) throws Exception &#123; web .ignoring() .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;) .antMatchers(&quot;/favicon.ico&quot;, &quot;/resources/**&quot;, &quot;/error&quot;) ; &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http. authorizeRequests() .anyRequest().authenticated(); http .formLogin() // Form Loginì„ ì´ìš©í•œ ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš© .loginPage(&quot;/login&quot;) // Login Pageë¡œ redirectí•  ê²½ë¡œë¥¼ ì ì–´ì¤€ë‹¤. .defaultSuccessUrl(&quot;/&quot;, true) // ë¡œê·¸ì¸ ì„±ê³µí›„ ì´ë™í•  ê²½ë¡œ .permitAll() ; &#125; @Bean public PasswordEncoder passwordEncoder() &#123; return new BCryptPasswordEncoder(); &#125;&#125;","text":"ë¡œê·¸ì¸ ë¡œê·¸ì•„ì›ƒì„ ì²˜ë¦¬ë¥¼ ìœ„í•œ Controller ìƒì„± Spring Security ì„¤ì •í•˜ê¸° UserDetailsService êµ¬í˜„í•˜ê¸° ë¡œê·¸ì¸ ë¡œê·¸ì•„ì›ƒì„ ì²˜ë¦¬ë¥¼ ìœ„í•œ Controller/loginìœ¼ë¡œ ì‚¬ìš©ì ë¡œê·¸ì¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  /logoutìœ¼ë¡œ ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤. @Controller@RequiredArgsConstructorpublic class SecurityController &#123; private final CustomUserDetailsService customUserDetailsService; private final PasswordEncoder passwordEncoder; @GetMapping(&quot;/&quot;) public String index()&#123; return &quot;index&quot;; &#125; @GetMapping(&quot;/login&quot;) public String login()&#123; return &quot;login&quot;; &#125; @GetMapping(&quot;/logout&quot;) public void logout()&#123; &#125;&#125; Spring Security ì„¤ì •í•˜ê¸°Spring Securityë¥¼ ì„¤ì •í•˜ê³  ì‹¶ìœ¼ë©´ EnableWebSecurityì–´ë…¸í…Œì´ì…˜ê³¼ WebSecurityConfigurerAdapter í´ë˜ìŠ¤ë¥¼ ìƒì†í•´ methodë“¤ì„ overridingí•œë‹¤. configure(AuthenticationManagerBuilder auth) AuthenticationManagerë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” method configure(WebSecurity web) ì „ì—­ì ì¸ securityë¥¼ ì„¤ì •í•  ë•Œ ì‚¬ìš©í•˜ëŠ” method, ë³´í†µì€ ë³´ì•ˆ ì˜ˆì™¸ì²˜ë¦¬ì— ì‚¬ìš©í•œë‹¤. configure(HttpSecurity http) request ë‹¨ìœ„ë¡œ ë³´ì•ˆì„ ê±¸ë•Œ ì‚¬ìš©í•˜ëŠ” method configure(HttpSecurity http)ì„ ì´ìš©í•´ í—ˆê°€ë¥¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” Spring Filter Chainì„ ê±°ì²˜ì•¼ í•˜ì§€ë§Œ configure(WebSecurity web)ë¥¼ ì´ìš©í•˜ë©´ Spring Filter Chainì„ ê±°ì¹˜ì§€ ì•ŠëŠ”ë‹¤. @EnableWebSecurity@RequiredArgsConstructorpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; private final CustomUserDetailsService customUserDetailsService; @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.userDetailsService(customUserDetailsService); &#125; @Override public void configure(WebSecurity web) throws Exception &#123; web .ignoring() .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;) .antMatchers(&quot;/favicon.ico&quot;, &quot;/resources/**&quot;, &quot;/error&quot;) ; &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http. authorizeRequests() .anyRequest().authenticated(); http .formLogin() // Form Loginì„ ì´ìš©í•œ ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš© .loginPage(&quot;/login&quot;) // Login Pageë¡œ redirectí•  ê²½ë¡œë¥¼ ì ì–´ì¤€ë‹¤. .defaultSuccessUrl(&quot;/&quot;, true) // ë¡œê·¸ì¸ ì„±ê³µí›„ ì´ë™í•  ê²½ë¡œ .permitAll() ; &#125; @Bean public PasswordEncoder passwordEncoder() &#123; return new BCryptPasswordEncoder(); &#125;&#125; UserDetailsService ë“±ë¡í•˜ê¸°AuthenticationManagerBuilderê°ì²´ë¥¼ ì´ìš©í•´ ì¸ì¦ì‹œ ì‚¬ìš©í•˜ëŠ” UserDetailsServiceë¥¼ ì§€ì •í•´ì¤€ë‹¤. @Overrideprotected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.userDetailsService(customUserDetailsService);&#125; ì •ì íŒŒì¼ì„ Security Filterì—ì„œ ì œì™¸ ì‹œí‚¤ê¸°cssíŒŒì¼ì´ë‚˜ jsíŒŒì¼ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•ŠëŠ” ê²½ìš° í™”ë©´ì„ ê·¸ë¦´ë•Œ í•´ë‹¹ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ í•˜ì§€ ëª»í•˜ë¯€ë¡œ í™”ë©´ì´ ê¹¨ì ¸ ë‚˜ì˜¤ê²Œ ëœë‹¤. @Overridepublic void configure(WebSecurity web) throws Exception &#123; web .ignoring() .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;) .antMatchers(&quot;/favicon.ico&quot;, &quot;/resources/**&quot;, &quot;/error&quot;) ;&#125; ìš”ì²­ì— ë”°ë¼ì„œ ì¸ì¦&#x2F;ì¸ê°€ë¥¼ ì„¤ì •ë¡œê·¸ì¸ì„ í•˜ê¸° ìœ„í•œ loginí˜ì´ì§€ì— ëŒ€í•œ ì ‘ê·¼ì€ í—ˆìš©í•˜ê³ , ê·¸ ì™¸ì˜ ëª¨ë“  ìì›ì— ëŒ€í•œ ìš”ì²­ì€ ì¸ì¦ì„ ìš”êµ¬í•˜ë„ë¡ í•œë‹¤. @Overrideprotected void configure(HttpSecurity http) throws Exception &#123; http. authorizeRequests() .anyRequest().authenticated(); http .formLogin() // Form Loginì„ ì´ìš©í•œ ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš© .loginPage(&quot;/login&quot;) // Login Pageë¡œ redirectí•  ê²½ë¡œë¥¼ ì ì–´ì¤€ë‹¤. .defaultSuccessUrl(&quot;/&quot;, true) // ë¡œê·¸ì¸ ì„±ê³µí›„ ì´ë™í•  ê²½ë¡œ .permitAll() ;&#125; Serviceìƒì„±í•˜ê¸°Spring SecurityëŠ” ì¸ì¦ ê³¼ì •ì—ì„œ UserDetailsë¥¼ êµ¬í˜„í•œ ê°ì²´ë¥¼ ì´ìš©í•œë‹¤. ë”°ë¼ì„œ Serviceë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” UserDetailsServiceë¥¼ ì´ìš©í•´ Serviceë¥¼ ë§Œë“ ë‹¤. UserDetialsService ì¸í„°í˜ì´ìŠ¤ëŠ” loadUserByUsername ë©”ì„œë“œê°€ ìˆëŠ”ë°, usernameì„ ì´ìš©í•´ DBë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ì–»ì–´ì™€ UserDetailsë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œì´ë‹¤. @Service@RequiredArgsConstructorpublic class CustomUserDetailsService implements UserDetailsService &#123; private final AccountRepository accountRepository; @Autowired private PasswordEncoder passwordEncoder; @Override public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException &#123; // return new User(&quot;user&quot;, passwordEncoder.encode( &quot;1234&quot;), new ArrayList&lt;&gt;()); Optional&lt;Account&gt; optional = accountRepository.findByEmail(email); if(optional.isPresent())&#123; Account account = optional.get(); return new SecurityAccount(account); &#125;else&#123; throw new UsernameNotFoundException(email + &quot;ì‚¬ìš©ì ì—†ìŒ&quot;); &#125; &#125; public void saveAccount(Account account)&#123; accountRepository.save(account); &#125;&#125; DBë¡œë¶€í„° Userì •ë³´ë¥¼ ê°€ì ¸ì™€ UserDetailsê°ì²´ë¡œ ë°˜í™˜UserDetailsServiceì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ì„œusernameì„ ë§¤ê²Œë³€ìˆ˜ë¡œ ë°›ëŠ” loadUserByUsernameë©”ì†Œë“œë¥¼ Overridingí•´,DBì— ì ‘ê·¼í•´ Userì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  í•´ë‹¹ ê°ì²´ë¥¼ UserDetailsê°ì²´ë¥¼ ë°˜í™˜í•˜ë„ë¡ Overriding í•´ì¤€ë‹¤. loadUserByUsernameë©”ì†Œë“œë¥¼ Overriding í•´ì¤˜ì•¼ í•œë‹¤. loadUserByUsernameë©”ì†Œë“œëŠ” usernameì„ ë§¤ê²Œë³€ìˆ˜ë¡œ ë°›ì•„ usernameì„ ì´ìš©í•´ DBë¡œë¶€í„° Userì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  í•´ë‹¹ ê°ì²´ë¥¼ UserDetailsê°ì²´ë¡œ ë°˜í™˜í•˜ë„ë¡ Overriding í•´ì¤€ë‹¤. @Overridepublic UserDetails loadUserByUsername(String email) throws UsernameNotFoundException &#123; // return new User(&quot;user&quot;, passwordEncoder.encode( &quot;1234&quot;), new ArrayList&lt;&gt;()); Optional&lt;Account&gt; optional = accountRepository.findByEmail(email); if(optional.isPresent())&#123; Account account = optional.get(); return new SecurityAccount(account); &#125;else&#123; throw new UsernameNotFoundException(email + &quot;ì‚¬ìš©ì ì—†ìŒ&quot;); &#125;&#125; Userê°ì²´ ìƒì„±í•˜ê¸°Spring SecurityëŠ” ì¸ì¦ì‹œ UserDetailsê°ì²´ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ Accountê°ì²´ë¥¼ UserDetailsê°ì²´ë¡œ ë³€í™˜í•´ì¤˜ì•¼ í•œë‹¤. Spring Securityì—ì„œëŠ” UserDetailsë¥¼ ê°ì²´ë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ UserDetailsë¥¼ êµ¬í˜„í•œ Userê°ì²´ë¥¼ ì§€ì›í•œë‹¤. public class SecurityAccount extends User &#123; public SecurityAccount(Account account)&#123; super(account.getEmail() , account.getPassword() , AuthorityUtils.createAuthorityList(account.getRole().getValue())); &#125;&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Form login","slug":"Spring/Spring-Security/Form-login","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Form-login/"}],"tags":[]},{"title":"Spring Security Form Login - 1. ê¸°ë³¸ì ì¸ ëª¨ë¸ ì •ì˜í•˜ê¸°","slug":"spring/spring-security/form-login/form-login-modeling","date":"2021-01-27T18:54:27.000Z","updated":"2024-02-26T16:21:04.187Z","comments":true,"path":"2021/01/28/spring/spring-security/form-login/form-login-modeling/","link":"","permalink":"https://ckck803.github.io/2021/01/28/spring/spring-security/form-login/form-login-modeling/","excerpt":"Spring properties ì„¤ì •í•˜ê¸°Spring Securityì—ì„œ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ì ì¸ userì •ë³´ë¥¼ ë“±ë¡í•œë‹¤. jpaë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ê´€ë ¨ ì˜µì…˜ë„ ì¶”ê°€í•´ì¤€ë‹¤. application.ymlspring: security: user: name: user password: 1234 jpa: hibernate: ddl-auto: create-drop properties: hibernate: show_sql: true format_sql: true profiles: include: mysqllogging: level: org.springframework.security: DEBUG application-mysql.ymlspring: datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/&#123;í…Œì´ë¸”ëª…&#125;?serverTimezone=UTC&amp;characterEncoding=UTF-8 username: user_id password: user_password jpa: database: mysql database-platform: org.hibernate.dialect.MySQL5InnoDBDialect Entity ìƒì„±í•˜ê¸°ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ Account Entityë¥¼ ë§Œë“ ë‹¤. @Entity@NoArgsConstructor@AllArgsConstructor@Getterpublic class Account &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long idx; private String username; @Column(unique = true, nullable = false) private String email; private String password; @Enumerated(EnumType.STRING) private Role role; private String getRoleValue()&#123; return this.role.getValue(); &#125; @Builder public Account(String username, String email, String password, Role role)&#123; this.username = username; this.email = email; this.password = password; this.role = role; &#125;&#125;","text":"Spring properties ì„¤ì •í•˜ê¸°Spring Securityì—ì„œ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ì ì¸ userì •ë³´ë¥¼ ë“±ë¡í•œë‹¤. jpaë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ê´€ë ¨ ì˜µì…˜ë„ ì¶”ê°€í•´ì¤€ë‹¤. application.ymlspring: security: user: name: user password: 1234 jpa: hibernate: ddl-auto: create-drop properties: hibernate: show_sql: true format_sql: true profiles: include: mysqllogging: level: org.springframework.security: DEBUG application-mysql.ymlspring: datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/&#123;í…Œì´ë¸”ëª…&#125;?serverTimezone=UTC&amp;characterEncoding=UTF-8 username: user_id password: user_password jpa: database: mysql database-platform: org.hibernate.dialect.MySQL5InnoDBDialect Entity ìƒì„±í•˜ê¸°ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ Account Entityë¥¼ ë§Œë“ ë‹¤. @Entity@NoArgsConstructor@AllArgsConstructor@Getterpublic class Account &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long idx; private String username; @Column(unique = true, nullable = false) private String email; private String password; @Enumerated(EnumType.STRING) private Role role; private String getRoleValue()&#123; return this.role.getValue(); &#125; @Builder public Account(String username, String email, String password, Role role)&#123; this.username = username; this.email = email; this.password = password; this.role = role; &#125;&#125; ê¶Œí•œì„ ì§€ì •í•˜ê¸°ìœ„í•œ Rolepublic enum Role &#123; USER(&quot;ROLE_USER&quot;), ADMIN(&quot;ROLE_ADMIN&quot;); private String value; Role(String value)&#123; this.value = value; &#125; public String getValue()&#123; return this.value; &#125;&#125; DBë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Repository@Repositorypublic interface AccountRepository extends JpaRepository&lt;Account, Long&gt; &#123; public Optional&lt;Account&gt; findByEmail(String email);&#125;","categories":[{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Form login","slug":"Spring/Spring-Security/Form-login","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Form-login/"}],"tags":[]},{"title":"ë°±ì¤€ 1726 - ë¡œë´‡","slug":"algorithm/baekjoon/BFS/1726","date":"2020-01-29T06:28:53.000Z","updated":"2024-11-28T13:59:36.013Z","comments":true,"path":"2020/01/29/algorithm/baekjoon/BFS/1726/","link":"","permalink":"https://ckck803.github.io/2020/01/29/algorithm/baekjoon/BFS/1726/","excerpt":"ë§í¬https://www.acmicpc.net/problem/1726 ì±„ì  í˜„í™© ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;iostream&gt;#include &lt;queue&gt;using namespace std;int M, N;int map[101][101];bool check[101][101][4];int dx[4] = &#123;0, 1, -1, 0&#125;;int dy[4] = &#123;-1, 0, 0, 1&#125;;// char dir[4] = &#123; &#x27;N&#x27;, &#x27;E&#x27;, &#x27;W&#x27;, &#x27;S&#x27; &#125;;struct point &#123; int y; int x; int dir;&#125;;int main(void) &#123; cin &gt;&gt; M &gt;&gt; N; for (int i = 1; i &lt;= M; i++) &#123; for (int j = 1; j &lt;= N; j++) &#123; cin &gt;&gt; map[i][j]; &#125; &#125; point start, goal; int tempY, tempX, tempD; cin &gt;&gt; tempY &gt;&gt; tempX &gt;&gt; tempD; start.y = tempY; start.x = tempX; start.dir = tempD % 4; cin &gt;&gt; tempY &gt;&gt; tempX &gt;&gt; tempD; goal.y = tempY; goal.x = tempX; goal.dir = tempD % 4; queue&lt;point&gt; q; q.push(start); check[start.y][start.x][start.dir] = true; int num = 0; while (!q.empty()) &#123; int q_size = q.size(); while (q_size--) &#123; int y = q.front().y; int x = q.front().x; int d = q.front().dir; q.pop(); if (y == goal.y &amp;&amp; x == goal.x &amp;&amp; d == goal.dir) &#123; cout &lt;&lt; num &lt;&lt; &#x27;\\n&#x27;; return 0; &#125; int nextR, nextL; if (d == 0) &#123; nextR = 1; nextL = 2; &#125; else if (d == 1) &#123; nextR = 3; nextL = 0; &#125; else if (d == 2) &#123; nextR = 0; nextL = 3; &#125; else if (d == 3) &#123; nextR = 2; nextL = 1; &#125; if (check[y][x][nextR] == false) &#123; check[y][x][nextR] = true; q.push(&#123;y, x, nextR&#125;); &#125; if (check[y][x][nextL] == false) &#123; check[y][x][nextL] = true; q.push(&#123;y, x, nextL&#125;); &#125; for (int i = 1; i &lt;= 3; i++) &#123; int nx = x + dx[d] * i; int ny = y + dy[d] * i; if (1 &lt;= ny &amp;&amp; ny &lt;= M &amp;&amp; 1 &lt;= nx &amp;&amp; nx &lt;= N) &#123; if (map[ny][nx] == 1) &#123; break; &#125; if (check[ny][nx][d] == false) &#123; check[ny][nx][d] = true; q.push(&#123;ny, nx, d&#125;); &#125; &#125; &#125; &#125; num++; // for (int i = 1; i &lt;= M; i++) &#123; // for (int j = 1; j &lt;= N; j++) &#123; // cout &lt;&lt; check[i][j][3] &lt;&lt; &quot; &quot;; // &#125; // cout &lt;&lt; endl; // &#125; // cout &lt;&lt; endl; &#125;&#125;","text":"ë§í¬https://www.acmicpc.net/problem/1726 ì±„ì  í˜„í™© ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;iostream&gt;#include &lt;queue&gt;using namespace std;int M, N;int map[101][101];bool check[101][101][4];int dx[4] = &#123;0, 1, -1, 0&#125;;int dy[4] = &#123;-1, 0, 0, 1&#125;;// char dir[4] = &#123; &#x27;N&#x27;, &#x27;E&#x27;, &#x27;W&#x27;, &#x27;S&#x27; &#125;;struct point &#123; int y; int x; int dir;&#125;;int main(void) &#123; cin &gt;&gt; M &gt;&gt; N; for (int i = 1; i &lt;= M; i++) &#123; for (int j = 1; j &lt;= N; j++) &#123; cin &gt;&gt; map[i][j]; &#125; &#125; point start, goal; int tempY, tempX, tempD; cin &gt;&gt; tempY &gt;&gt; tempX &gt;&gt; tempD; start.y = tempY; start.x = tempX; start.dir = tempD % 4; cin &gt;&gt; tempY &gt;&gt; tempX &gt;&gt; tempD; goal.y = tempY; goal.x = tempX; goal.dir = tempD % 4; queue&lt;point&gt; q; q.push(start); check[start.y][start.x][start.dir] = true; int num = 0; while (!q.empty()) &#123; int q_size = q.size(); while (q_size--) &#123; int y = q.front().y; int x = q.front().x; int d = q.front().dir; q.pop(); if (y == goal.y &amp;&amp; x == goal.x &amp;&amp; d == goal.dir) &#123; cout &lt;&lt; num &lt;&lt; &#x27;\\n&#x27;; return 0; &#125; int nextR, nextL; if (d == 0) &#123; nextR = 1; nextL = 2; &#125; else if (d == 1) &#123; nextR = 3; nextL = 0; &#125; else if (d == 2) &#123; nextR = 0; nextL = 3; &#125; else if (d == 3) &#123; nextR = 2; nextL = 1; &#125; if (check[y][x][nextR] == false) &#123; check[y][x][nextR] = true; q.push(&#123;y, x, nextR&#125;); &#125; if (check[y][x][nextL] == false) &#123; check[y][x][nextL] = true; q.push(&#123;y, x, nextL&#125;); &#125; for (int i = 1; i &lt;= 3; i++) &#123; int nx = x + dx[d] * i; int ny = y + dy[d] * i; if (1 &lt;= ny &amp;&amp; ny &lt;= M &amp;&amp; 1 &lt;= nx &amp;&amp; nx &lt;= N) &#123; if (map[ny][nx] == 1) &#123; break; &#125; if (check[ny][nx][d] == false) &#123; check[ny][nx][d] = true; q.push(&#123;ny, nx, d&#125;); &#125; &#125; &#125; &#125; num++; // for (int i = 1; i &lt;= M; i++) &#123; // for (int j = 1; j &lt;= N; j++) &#123; // cout &lt;&lt; check[i][j][3] &lt;&lt; &quot; &quot;; // &#125; // cout &lt;&lt; endl; // &#125; // cout &lt;&lt; endl; &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"BFS","slug":"Develop/Beakjoon/BFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/BFS/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"BFS","slug":"BFS","permalink":"https://ckck803.github.io/tags/BFS/"},{"name":"í‹€ë ¸ìŠµë‹ˆë‹¤ 1","slug":"í‹€ë ¸ìŠµë‹ˆë‹¤-1","permalink":"https://ckck803.github.io/tags/%ED%8B%80%EB%A0%B8%EC%8A%B5%EB%8B%88%EB%8B%A4-1/"}]},{"title":"1707 ì´ë¶„ ê·¸ë˜í”„","slug":"algorithm/baekjoon/BFS/1707","date":"2020-01-29T06:23:28.000Z","updated":"2024-11-28T13:59:35.681Z","comments":true,"path":"2020/01/29/algorithm/baekjoon/BFS/1707/","link":"","permalink":"https://ckck803.github.io/2020/01/29/algorithm/baekjoon/BFS/1707/","excerpt":"ë§í¬https://www.acmicpc.net/problem/1707 ì±„ì  í˜„í™© ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int T, V, E;vector&lt;vector&lt;int&gt;&gt; arr;bool check[20002];bool colorCheck[20002];int color[20002];void paintColor(int cnt, int cntColor) &#123; for (int i = 0; i &lt; arr[cnt].size(); i++) &#123; int next = arr[cnt][i]; if (check[next] == false) &#123; if (cntColor == 1) &#123; color[next] = 2; check[next] = true; paintColor(next, 2); &#125; else &#123; color[next] = 1; check[next] = true; paintColor(next, 1); &#125; &#125; &#125;&#125;bool confirmColor(int cnt) &#123; bool isTrue = true; for (int i = 0; i &lt; arr[cnt].size(); i++) &#123; int next = arr[cnt][i]; if (color[cnt] != color[next]) &#123; if (colorCheck[next] == false) &#123; colorCheck[next] = true; isTrue = confirmColor(next); &#125; &#125; else &#123; return false; &#125; &#125; return isTrue;&#125;int main(void) &#123; cin &gt;&gt; T; while (T--) &#123; cin &gt;&gt; V &gt;&gt; E; arr = vector&lt;vector&lt;int&gt;&gt;(V + 1); for (int i = 0; i &lt; E; i++) &#123; int x, y; cin &gt;&gt; x &gt;&gt; y; arr[x].push_back(y); arr[y].push_back(x); &#125; for (int i = 1; i &lt;= V; i++) &#123; if (check[i] == false) &#123; check[i] = true; color[i] = 1; paintColor(i, 1); &#125; &#125; bool isTrue; for (int i = 1; i &lt;= V; i++) &#123; if (colorCheck[i] == false) &#123; colorCheck[i] = true; isTrue = confirmColor(i); if (isTrue == false) &#123; cout &lt;&lt; &quot;NO&quot; &lt;&lt; &#x27;\\n&#x27;; break; &#125; &#125; &#125; if (isTrue == true) &#123; cout &lt;&lt; &quot;YES&quot; &lt;&lt; &#x27;\\n&#x27;; &#125; for (int i = 1; i &lt;= V; i++) &#123; check[i] = 0; colorCheck[i] = false; color[i] = 0; &#125; &#125;&#125;","text":"ë§í¬https://www.acmicpc.net/problem/1707 ì±„ì  í˜„í™© ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int T, V, E;vector&lt;vector&lt;int&gt;&gt; arr;bool check[20002];bool colorCheck[20002];int color[20002];void paintColor(int cnt, int cntColor) &#123; for (int i = 0; i &lt; arr[cnt].size(); i++) &#123; int next = arr[cnt][i]; if (check[next] == false) &#123; if (cntColor == 1) &#123; color[next] = 2; check[next] = true; paintColor(next, 2); &#125; else &#123; color[next] = 1; check[next] = true; paintColor(next, 1); &#125; &#125; &#125;&#125;bool confirmColor(int cnt) &#123; bool isTrue = true; for (int i = 0; i &lt; arr[cnt].size(); i++) &#123; int next = arr[cnt][i]; if (color[cnt] != color[next]) &#123; if (colorCheck[next] == false) &#123; colorCheck[next] = true; isTrue = confirmColor(next); &#125; &#125; else &#123; return false; &#125; &#125; return isTrue;&#125;int main(void) &#123; cin &gt;&gt; T; while (T--) &#123; cin &gt;&gt; V &gt;&gt; E; arr = vector&lt;vector&lt;int&gt;&gt;(V + 1); for (int i = 0; i &lt; E; i++) &#123; int x, y; cin &gt;&gt; x &gt;&gt; y; arr[x].push_back(y); arr[y].push_back(x); &#125; for (int i = 1; i &lt;= V; i++) &#123; if (check[i] == false) &#123; check[i] = true; color[i] = 1; paintColor(i, 1); &#125; &#125; bool isTrue; for (int i = 1; i &lt;= V; i++) &#123; if (colorCheck[i] == false) &#123; colorCheck[i] = true; isTrue = confirmColor(i); if (isTrue == false) &#123; cout &lt;&lt; &quot;NO&quot; &lt;&lt; &#x27;\\n&#x27;; break; &#125; &#125; &#125; if (isTrue == true) &#123; cout &lt;&lt; &quot;YES&quot; &lt;&lt; &#x27;\\n&#x27;; &#125; for (int i = 1; i &lt;= V; i++) &#123; check[i] = 0; colorCheck[i] = false; color[i] = 0; &#125; &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"DFS","slug":"Develop/Beakjoon/DFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/DFS/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"BFS","slug":"BFS","permalink":"https://ckck803.github.io/tags/BFS/"},{"name":"í‹€ë ¸ìŠµë‹ˆë‹¤ 4","slug":"í‹€ë ¸ìŠµë‹ˆë‹¤-4","permalink":"https://ckck803.github.io/tags/%ED%8B%80%EB%A0%B8%EC%8A%B5%EB%8B%88%EB%8B%A4-4/"}]},{"title":"ë°±ì¤€ 1600 - ë§ì´ ë˜ê³ í”ˆ ì›ìˆ­ì´","slug":"algorithm/baekjoon/BFS/1600","date":"2020-01-29T06:19:42.000Z","updated":"2024-11-28T13:59:36.085Z","comments":true,"path":"2020/01/29/algorithm/baekjoon/BFS/1600/","link":"","permalink":"https://ckck803.github.io/2020/01/29/algorithm/baekjoon/BFS/1600/","excerpt":"ë§í¬https://www.acmicpc.net/problem/1600 ì²´ì  í˜„í™© ë¬¸ì œ í’€ì´ ë§ì²˜ëŸ¼ ë›¸ ìˆ˜ ìˆëŠ” íšŸìˆ˜(k), width, heightë¥¼ ì…ë ¥ ë°›ëŠ”ë‹¤. fieldì— ëŒ€í•œ ì •ë³´ë¥¼ ì…ë ¥ ë°›ëŠ”ë‹¤. (0, 0)ì—ì„œ ì‹œì‘í•´ (width-1, height-1)ê¹Œì§€ ê°ˆ ìˆ˜ ìˆëŠ” ìµœì†Œ íšŸìˆ˜ë¥¼ íƒìƒ‰í•œë‹¤. ì›ìˆ­ì´ê°€ ì›€ì§ì¼ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë‘ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤. ë§ì²˜ëŸ¼ ë›¸ ìˆ˜ ìˆëŠ” ë°©ë²•(kë‚´ì˜ íšŸìˆ˜ì—ì„œ) ìƒí•˜ì¢Œìš°ë¡œ ì›€ì§ì¼ ìˆ˜ ìˆëŠ” ë°©ë²• ë§ì´ (width-1, height-1)ì— ë„ì°©í•˜ë©´ ê·¸ íšŸìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. ë§Œì•½ ë„ì°©í•˜ì§€ ëª»í•  ê²½ìš° -1ì„ ë°˜í™˜í•œë‹¤. ë§ì´ ì›€ì§ì¸ íšŸìˆ˜ë¥¼ ì¶œë ¥í•´ì¤€ë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;int numOfKnight;int width, height;int field[202][202];bool check[31][202][202];int dx[4] = &#123;1, -1, 0, 0&#125;;int dy[4] = &#123;0, 0, 1, -1&#125;;int horse_dx[8] = &#123;1, 2, 2, 1, -1, -2, -2, -1&#125;;int horse_dy[8] = &#123;2, 1, -1, -2, -2, -1, 1, 2&#125;;struct point &#123; int k; int y; int x;&#125;;int bfs(int y, int x) &#123; check[0][y][x] = true; queue&lt;point&gt; q; q.push(&#123;0, y, x&#125;); int count = 0; while (!q.empty()) &#123; int q_size = q.size(); while (q_size--) &#123; int cntK = q.front().k; int cntY = q.front().y; int cntX = q.front().x; q.pop(); if (cntY == height - 1 &amp;&amp; cntX == width - 1) &#123; return count; &#125; if (cntK &lt; numOfKnight) &#123; for (int i = 0; i &lt; 8; i++) &#123; int ny = cntY + horse_dy[i]; int nx = cntX + horse_dx[i]; if (0 &gt; ny || ny &gt;= height || 0 &gt; nx || nx &gt;= width) continue; if (field[ny][nx] == 0 &amp;&amp; check[cntK + 1][ny][nx] == false) &#123; check[cntK + 1][ny][nx] = true; q.push(&#123;cntK + 1, ny, nx&#125;); &#125; &#125; &#125; for (int i = 0; i &lt; 4; i++) &#123; int ny = cntY + dy[i]; int nx = cntX + dx[i]; if (0 &gt; ny || ny &gt;= height || 0 &gt; nx || nx &gt;= width) continue; if (field[ny][nx] == 0 &amp;&amp; check[cntK][ny][nx] == false) &#123; check[cntK][ny][nx] = true; q.push(&#123;cntK, ny, nx&#125;); &#125; &#125; &#125; count++; &#125; return -1;&#125;int main(void) &#123; cin &gt;&gt; numOfKnight &gt;&gt; width &gt;&gt; height; for (int i = 0; i &lt; height; i++) &#123; for (int j = 0; j &lt; width; j++) &#123; cin &gt;&gt; field[i][j]; &#125; &#125; int minValueOfMove = bfs(0, 0); cout &lt;&lt; minValueOfMove &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","text":"ë§í¬https://www.acmicpc.net/problem/1600 ì²´ì  í˜„í™© ë¬¸ì œ í’€ì´ ë§ì²˜ëŸ¼ ë›¸ ìˆ˜ ìˆëŠ” íšŸìˆ˜(k), width, heightë¥¼ ì…ë ¥ ë°›ëŠ”ë‹¤. fieldì— ëŒ€í•œ ì •ë³´ë¥¼ ì…ë ¥ ë°›ëŠ”ë‹¤. (0, 0)ì—ì„œ ì‹œì‘í•´ (width-1, height-1)ê¹Œì§€ ê°ˆ ìˆ˜ ìˆëŠ” ìµœì†Œ íšŸìˆ˜ë¥¼ íƒìƒ‰í•œë‹¤. ì›ìˆ­ì´ê°€ ì›€ì§ì¼ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë‘ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤. ë§ì²˜ëŸ¼ ë›¸ ìˆ˜ ìˆëŠ” ë°©ë²•(kë‚´ì˜ íšŸìˆ˜ì—ì„œ) ìƒí•˜ì¢Œìš°ë¡œ ì›€ì§ì¼ ìˆ˜ ìˆëŠ” ë°©ë²• ë§ì´ (width-1, height-1)ì— ë„ì°©í•˜ë©´ ê·¸ íšŸìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. ë§Œì•½ ë„ì°©í•˜ì§€ ëª»í•  ê²½ìš° -1ì„ ë°˜í™˜í•œë‹¤. ë§ì´ ì›€ì§ì¸ íšŸìˆ˜ë¥¼ ì¶œë ¥í•´ì¤€ë‹¤. ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;int numOfKnight;int width, height;int field[202][202];bool check[31][202][202];int dx[4] = &#123;1, -1, 0, 0&#125;;int dy[4] = &#123;0, 0, 1, -1&#125;;int horse_dx[8] = &#123;1, 2, 2, 1, -1, -2, -2, -1&#125;;int horse_dy[8] = &#123;2, 1, -1, -2, -2, -1, 1, 2&#125;;struct point &#123; int k; int y; int x;&#125;;int bfs(int y, int x) &#123; check[0][y][x] = true; queue&lt;point&gt; q; q.push(&#123;0, y, x&#125;); int count = 0; while (!q.empty()) &#123; int q_size = q.size(); while (q_size--) &#123; int cntK = q.front().k; int cntY = q.front().y; int cntX = q.front().x; q.pop(); if (cntY == height - 1 &amp;&amp; cntX == width - 1) &#123; return count; &#125; if (cntK &lt; numOfKnight) &#123; for (int i = 0; i &lt; 8; i++) &#123; int ny = cntY + horse_dy[i]; int nx = cntX + horse_dx[i]; if (0 &gt; ny || ny &gt;= height || 0 &gt; nx || nx &gt;= width) continue; if (field[ny][nx] == 0 &amp;&amp; check[cntK + 1][ny][nx] == false) &#123; check[cntK + 1][ny][nx] = true; q.push(&#123;cntK + 1, ny, nx&#125;); &#125; &#125; &#125; for (int i = 0; i &lt; 4; i++) &#123; int ny = cntY + dy[i]; int nx = cntX + dx[i]; if (0 &gt; ny || ny &gt;= height || 0 &gt; nx || nx &gt;= width) continue; if (field[ny][nx] == 0 &amp;&amp; check[cntK][ny][nx] == false) &#123; check[cntK][ny][nx] = true; q.push(&#123;cntK, ny, nx&#125;); &#125; &#125; &#125; count++; &#125; return -1;&#125;int main(void) &#123; cin &gt;&gt; numOfKnight &gt;&gt; width &gt;&gt; height; for (int i = 0; i &lt; height; i++) &#123; for (int j = 0; j &lt; width; j++) &#123; cin &gt;&gt; field[i][j]; &#125; &#125; int minValueOfMove = bfs(0, 0); cout &lt;&lt; minValueOfMove &lt;&lt; &#x27;\\n&#x27;; return 0;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"BFS","slug":"Develop/Beakjoon/BFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/BFS/"}],"tags":[{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"BFS","slug":"BFS","permalink":"https://ckck803.github.io/tags/BFS/"},{"name":"í‹€ë ¸ìŠµë‹ˆë‹¤ 5","slug":"í‹€ë ¸ìŠµë‹ˆë‹¤-5","permalink":"https://ckck803.github.io/tags/%ED%8B%80%EB%A0%B8%EC%8A%B5%EB%8B%88%EB%8B%A4-5/"}]},{"title":"ë°±ì¤€ 1260 - DFSì™€ BFS","slug":"algorithm/baekjoon/DFS/1260","date":"2020-01-29T06:16:03.000Z","updated":"2024-11-28T13:59:37.143Z","comments":true,"path":"2020/01/29/algorithm/baekjoon/DFS/1260/","link":"","permalink":"https://ckck803.github.io/2020/01/29/algorithm/baekjoon/DFS/1260/","excerpt":"ë§í¬https://www.acmicpc.net/problem/1260 ë¬¸ì œ í’€ì´ê·¸ë˜í”„íƒìƒ‰ì— ìˆì–´ ê°€ì¥ ê¸°ë³¸ì ì¸ DFS, BFSë¥¼ ì‚¬ìš©í•´ë³¼ ìˆ˜ ìˆëŠ” ìœ í˜•ì´ë‹¤. ì¢Œí‘œ ìì²´ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ 1ì°¨ì›ì ì¸ checkë°©ì‹ì„ í†µí•´ íƒìƒ‰í•´ ë‚˜ê°„ë‹¤. cpp ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;// ì ì ì˜ ê°œìˆ˜ : N, ê°„ì‚°ì˜ ê°œìˆ˜ M, íƒìƒ‰ì„ ì‹œì‘í•  ì •ì ì˜ ë²ˆí˜¸ Vint N, M, V;bool check_dfs[1010];bool check_bfs[1010];int graph[1010][1010];void bfs(int start) &#123; queue&lt;int&gt; q; q.push(start); check_bfs[start] = true; while (!q.empty()) &#123; int cnt = q.front(); q.pop(); cout &lt;&lt; cnt &lt;&lt; &#x27; &#x27;; for (int i = 1; i &lt;= N; i++) &#123; if (graph[cnt][i] == 1 &amp;&amp; check_bfs[i] == false) &#123; check_bfs[i] = true; q.push(i); &#125; &#125; &#125;&#125;void dfs(int depth, int cnt) &#123; check_dfs[cnt] = true; if (N &lt;= depth) &#123; return; &#125; cout &lt;&lt; cnt &lt;&lt; &#x27; &#x27;; for (int i = 1; i &lt;= N; i++) &#123; if (graph[cnt][i] == 1 &amp;&amp; check_dfs[i] == false) &#123; dfs(depth + 1, i); &#125; &#125;&#125;int main(void) &#123; cin &gt;&gt; N &gt;&gt; M &gt;&gt; V; for (int i = 0; i &lt; M; i++) &#123; int a, b; cin &gt;&gt; a &gt;&gt; b; graph[a][b] = 1; graph[b][a] = 1; &#125; dfs(0, V); cout &lt;&lt; &#x27;\\n&#x27;; bfs(V); return 0;&#125; java ì½”ë“œimport java.io.IOException;import java.util.LinkedList;import java.util.Queue;import java.util.Scanner;public class Main &#123; static int n, m, v; static int map[][]; static boolean bfs_check[]; static boolean dfs_check[]; public static void main(String[] args) throws IOException &#123; Scanner sc = new Scanner(System.in); n = sc.nextInt(); m = sc.nextInt(); v = sc.nextInt(); map = new int[n + 1][n + 1]; for (int i = 0; i &lt; m; i++) &#123; int from, to; from = sc.nextInt(); to = sc.nextInt(); map[from][to] = 1; map[to][from] = 1; &#125; bfs_check = new boolean[n + 1]; dfs_check = new boolean[n + 1]; dfs(v); System.out.println(); bfs(v); sc.close(); &#125; static void dfs(int node) &#123; System.out.print(Integer.toString(node) + &#x27; &#x27;); dfs_check[node] = true; for (int i = 1; i &lt;= n; i++) &#123; if (map[node][i] == 1 &amp;&amp; dfs_check[i] == false) &#123; dfs(i); &#125; &#125; &#125; static void bfs(int start) &#123; Queue&lt;Integer&gt; q = new LinkedList&lt;Integer&gt;(); q.offer(start); bfs_check[start] = true; System.out.print(Integer.toString(start) + &#x27; &#x27;); while (!q.isEmpty()) &#123; int cnt = q.remove(); for (int i = 1; i &lt;= n; i++) &#123; if (map[cnt][i] == 1 &amp;&amp; bfs_check[i] == false) &#123; bfs_check[i] = true; q.offer(i); System.out.print(Integer.toString(i) + &#x27; &#x27;); &#125; &#125; &#125; &#125;&#125; python ì½”ë“œ","text":"ë§í¬https://www.acmicpc.net/problem/1260 ë¬¸ì œ í’€ì´ê·¸ë˜í”„íƒìƒ‰ì— ìˆì–´ ê°€ì¥ ê¸°ë³¸ì ì¸ DFS, BFSë¥¼ ì‚¬ìš©í•´ë³¼ ìˆ˜ ìˆëŠ” ìœ í˜•ì´ë‹¤. ì¢Œí‘œ ìì²´ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ 1ì°¨ì›ì ì¸ checkë°©ì‹ì„ í†µí•´ íƒìƒ‰í•´ ë‚˜ê°„ë‹¤. cpp ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;// ì ì ì˜ ê°œìˆ˜ : N, ê°„ì‚°ì˜ ê°œìˆ˜ M, íƒìƒ‰ì„ ì‹œì‘í•  ì •ì ì˜ ë²ˆí˜¸ Vint N, M, V;bool check_dfs[1010];bool check_bfs[1010];int graph[1010][1010];void bfs(int start) &#123; queue&lt;int&gt; q; q.push(start); check_bfs[start] = true; while (!q.empty()) &#123; int cnt = q.front(); q.pop(); cout &lt;&lt; cnt &lt;&lt; &#x27; &#x27;; for (int i = 1; i &lt;= N; i++) &#123; if (graph[cnt][i] == 1 &amp;&amp; check_bfs[i] == false) &#123; check_bfs[i] = true; q.push(i); &#125; &#125; &#125;&#125;void dfs(int depth, int cnt) &#123; check_dfs[cnt] = true; if (N &lt;= depth) &#123; return; &#125; cout &lt;&lt; cnt &lt;&lt; &#x27; &#x27;; for (int i = 1; i &lt;= N; i++) &#123; if (graph[cnt][i] == 1 &amp;&amp; check_dfs[i] == false) &#123; dfs(depth + 1, i); &#125; &#125;&#125;int main(void) &#123; cin &gt;&gt; N &gt;&gt; M &gt;&gt; V; for (int i = 0; i &lt; M; i++) &#123; int a, b; cin &gt;&gt; a &gt;&gt; b; graph[a][b] = 1; graph[b][a] = 1; &#125; dfs(0, V); cout &lt;&lt; &#x27;\\n&#x27;; bfs(V); return 0;&#125; java ì½”ë“œimport java.io.IOException;import java.util.LinkedList;import java.util.Queue;import java.util.Scanner;public class Main &#123; static int n, m, v; static int map[][]; static boolean bfs_check[]; static boolean dfs_check[]; public static void main(String[] args) throws IOException &#123; Scanner sc = new Scanner(System.in); n = sc.nextInt(); m = sc.nextInt(); v = sc.nextInt(); map = new int[n + 1][n + 1]; for (int i = 0; i &lt; m; i++) &#123; int from, to; from = sc.nextInt(); to = sc.nextInt(); map[from][to] = 1; map[to][from] = 1; &#125; bfs_check = new boolean[n + 1]; dfs_check = new boolean[n + 1]; dfs(v); System.out.println(); bfs(v); sc.close(); &#125; static void dfs(int node) &#123; System.out.print(Integer.toString(node) + &#x27; &#x27;); dfs_check[node] = true; for (int i = 1; i &lt;= n; i++) &#123; if (map[node][i] == 1 &amp;&amp; dfs_check[i] == false) &#123; dfs(i); &#125; &#125; &#125; static void bfs(int start) &#123; Queue&lt;Integer&gt; q = new LinkedList&lt;Integer&gt;(); q.offer(start); bfs_check[start] = true; System.out.print(Integer.toString(start) + &#x27; &#x27;); while (!q.isEmpty()) &#123; int cnt = q.remove(); for (int i = 1; i &lt;= n; i++) &#123; if (map[cnt][i] == 1 &amp;&amp; bfs_check[i] == false) &#123; bfs_check[i] = true; q.offer(i); System.out.print(Integer.toString(i) + &#x27; &#x27;); &#125; &#125; &#125; &#125;&#125; python ì½”ë“œdef bfs(start): queue = [start] bfs_check = [start] while queue: cnt_node = queue.pop(0) for next_node in range(len(matrix[cnt_node])): if(matrix[cnt_node][next_node] == 1 and next_node not in bfs_check): bfs_check.append(next_node) queue.append(next_node) return bfs_checkdef dfs(cnt_node): dfs_check.append(cnt_node) for next_node in range(len(matrix[cnt_node])): if(matrix[cnt_node][next_node] == 1 and next_node not in dfs_check): dfs(next_node)N, M, V = map(int, input().split())matrix = [[0] * (N+1) for i in range(N+1)]dfs_check = []for i in range(M): point = list(map(int, input().split())) matrix[point[0]][point[1]] = 1 matrix[point[1]][point[0]] = 1dfs(V)print(*dfs_check)print(*bfs(V))","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"DFS","slug":"Develop/Beakjoon/DFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/DFS/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"},{"name":"BFS","slug":"BFS","permalink":"https://ckck803.github.io/tags/BFS/"},{"name":"beakjoon","slug":"beakjoon","permalink":"https://ckck803.github.io/tags/beakjoon/"},{"name":"C++","slug":"C","permalink":"https://ckck803.github.io/tags/C/"},{"name":"DFS","slug":"DFS","permalink":"https://ckck803.github.io/tags/DFS/"},{"name":"Python","slug":"Python","permalink":"https://ckck803.github.io/tags/Python/"}]},{"title":"ë°±ì¤€ 1012 - ìœ ê¸°ë† ë°°ì¶”","slug":"algorithm/baekjoon/BFS/1012","date":"2020-01-29T04:08:11.000Z","updated":"2024-11-28T13:59:35.939Z","comments":true,"path":"2020/01/29/algorithm/baekjoon/BFS/1012/","link":"","permalink":"https://ckck803.github.io/2020/01/29/algorithm/baekjoon/BFS/1012/","excerpt":"ë§í¬https://www.acmicpc.net/problem/1012 ì±„ì  í˜„í™© ë¬¸ì œ í’€ì´ì „í˜•ì ì¸ ìƒ‰ì¹ í•˜ê¸° ìœ í˜•íˆë‹¤.ì´ ë¬¸ì œëŠ” testcaseë¬¸ì œì´ê¸° ë•Œë¬¸ì— ê° caseë§ˆë‹¤ ë°ì´í„°ë¥¼ ì´ˆê¸°í™” í•´ì¤˜ì•¼ í•œë‹¤. fieldë¥¼ íƒìƒ‰í•˜ë©´ì„œ ë°°ì¶”ê°€ ì‹¬ì–´ì ¸ ìˆëŠ” ìœ„ì¹˜ë¥¼ ì°¾ëŠ”ë‹¤. ë°°ì¶”ê°€ ì‹¬ì–´ì ¸ ìˆëŠ” ê³³ì„ ì°¾ì•˜ë‹¤ë©´ ì´ì „ì— íƒìƒ‰ì„ í–ˆëŠ”ì§€ í™•ì¸í•œë‹¤. íƒìƒ‰í•œ ì ì´ ì—†ë‹¤ë©´ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤. íƒìƒ‰í•œ ì ì´ ìˆë‹¤ë©´ 1ë¡œ ëŒì•„ê°„ë‹¤. ë°°ì¶”ê°€ ì‹¬ì–´ì ¸ ìˆëŠ” ì£¼ë³€ì— ë‹¤ë¥¸ ë°°ì¶”ë“¤ì´ ìˆëŠ”ì§€ íƒìƒ‰í•œë‹¤. íƒìƒ‰íšŸìˆ˜ê°€ ë°°ì¶” í° ì§€ë ì´ì˜ ê°¯ìˆ˜ê°€ ëœë‹¤. BFSë¥¼ ì´ìš©í•œ ì½”ë“œ","text":"ë§í¬https://www.acmicpc.net/problem/1012 ì±„ì  í˜„í™© ë¬¸ì œ í’€ì´ì „í˜•ì ì¸ ìƒ‰ì¹ í•˜ê¸° ìœ í˜•íˆë‹¤.ì´ ë¬¸ì œëŠ” testcaseë¬¸ì œì´ê¸° ë•Œë¬¸ì— ê° caseë§ˆë‹¤ ë°ì´í„°ë¥¼ ì´ˆê¸°í™” í•´ì¤˜ì•¼ í•œë‹¤. fieldë¥¼ íƒìƒ‰í•˜ë©´ì„œ ë°°ì¶”ê°€ ì‹¬ì–´ì ¸ ìˆëŠ” ìœ„ì¹˜ë¥¼ ì°¾ëŠ”ë‹¤. ë°°ì¶”ê°€ ì‹¬ì–´ì ¸ ìˆëŠ” ê³³ì„ ì°¾ì•˜ë‹¤ë©´ ì´ì „ì— íƒìƒ‰ì„ í–ˆëŠ”ì§€ í™•ì¸í•œë‹¤. íƒìƒ‰í•œ ì ì´ ì—†ë‹¤ë©´ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤. íƒìƒ‰í•œ ì ì´ ìˆë‹¤ë©´ 1ë¡œ ëŒì•„ê°„ë‹¤. ë°°ì¶”ê°€ ì‹¬ì–´ì ¸ ìˆëŠ” ì£¼ë³€ì— ë‹¤ë¥¸ ë°°ì¶”ë“¤ì´ ìˆëŠ”ì§€ íƒìƒ‰í•œë‹¤. íƒìƒ‰íšŸìˆ˜ê°€ ë°°ì¶” í° ì§€ë ì´ì˜ ê°¯ìˆ˜ê°€ ëœë‹¤. BFSë¥¼ ì´ìš©í•œ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;int dx[4] = &#123;1, -1, 0, 0&#125;;int dy[4] = &#123;0, 0, 1, -1&#125;;int field[55][55];bool check[55][55];int width, height;int test_case;int num_of_cabbage;int num_of_warm;void init() &#123; for (int i = 0; i &lt; 55; i++) &#123; for (int j = 0; j &lt; 55; j++) &#123; field[i][j] = 0; check[i][j] = false; &#125; &#125; num_of_warm = 0;&#125;void bfs(int y, int x) &#123; num_of_warm++; check[y][x] = true; queue&lt;pair&lt;int, int&gt;&gt; q; q.push(&#123;y, x&#125;); while (!q.empty()) &#123; int cnt_y = q.front().first; int cnt_x = q.front().second; q.pop(); for (int i = 0; i &lt; 4; i++) &#123; int ny = cnt_y + dy[i]; int nx = cnt_x + dx[i]; if (0 &gt; ny || ny &gt;= height || 0 &gt; nx || nx &gt;= width) &#123; continue; &#125; if (check[ny][nx] == true) &#123; continue; &#125; if (field[ny][nx] == 0) &#123; continue; &#125; check[ny][nx] = true; q.push(&#123;ny, nx&#125;); &#125; &#125;&#125;int main(void) &#123; cin &gt;&gt; test_case; while (test_case--) &#123; cin &gt;&gt; width &gt;&gt; height &gt;&gt; num_of_cabbage; init(); for (int i = 0; i &lt; num_of_cabbage; i++) &#123; int x, y; cin &gt;&gt; x &gt;&gt; y; field[y][x] = 1; &#125; for (int i = 0; i &lt; height; i++) &#123; for (int j = 0; j &lt; width; j++) &#123; if (field[i][j] == 1 &amp;&amp; check[i][j] == false) &#123; bfs(i, j); &#125; &#125; &#125; cout &lt;&lt; num_of_warm &lt;&lt; &#x27;\\n&#x27;; &#125; return 0;&#125; DFSë¥¼ ì´ìš©í•œ ì½”ë“œ#include &lt;bits/stdc++.h&gt;using namespace std;int field[55][55];bool check[55][55];int test_case, width, height;int num_of_cabbage;int num_of_warm;int dx[4] = &#123;1, -1, 0, 0&#125;;int dy[4] = &#123;0, 0, 1, -1&#125;;void init() &#123; for (int i = 0; i &lt; 55; i++) &#123; for (int j = 0; j &lt; 55; j++) &#123; field[i][j] = 0; check[i][j] = false; &#125; &#125; num_of_warm = 0;&#125;void dfs(int y, int x) &#123; check[y][x] = true; for (int i = 0; i &lt; 4; i++) &#123; int ny = y + dy[i]; int nx = x + dx[i]; if (0 &gt; ny || ny &gt;= height || 0 &gt; nx || nx &gt;= width) &#123; continue; &#125; if (check[ny][nx] == true) &#123; continue; &#125; if (field[ny][nx] == 0) &#123; continue; &#125; dfs(ny, nx); &#125;&#125;int main(void) &#123; cin &gt;&gt; test_case; while (test_case--) &#123; cin &gt;&gt; width &gt;&gt; height &gt;&gt; num_of_cabbage; init(); for (int i = 0; i &lt; num_of_cabbage; i++) &#123; int x, y; cin &gt;&gt; x &gt;&gt; y; field[y][x] = true; &#125; for (int i = 0; i &lt; height; i++) &#123; for (int j = 0; j &lt; width; j++) &#123; if (field[i][j] == 1 &amp;&amp; check[i][j] == false) &#123; num_of_warm++; dfs(i, j); &#125; &#125; &#125; cout &lt;&lt; num_of_warm &lt;&lt; &#x27;\\n&#x27;; &#125; return 0;&#125; ìë°”ë¥¼ ì´ìš©í•œ í’€ì´import java.util.LinkedList;import java.util.Queue;import java.util.Scanner;public class Main &#123; static int Map[][] = new int[55][55]; static boolean check[][] = new boolean[55][55]; static int dy[] = &#123; 1, 0, -1, 0 &#125;; static int dx[] = &#123; 0, 1, 0, -1 &#125;; static int testCase; static int row; static int col; static int num; static int result; public static void main(String[] args) &#123; Scanner sc = new Scanner(System.in); testCase = sc.nextInt(); while (testCase-- &gt; 0) &#123; result = 0; for (int i = 0; i &lt; 55; i++) &#123; for (int j = 0; j &lt; 55; j++) &#123; Map[i][j] = 0; check[i][j] = false; &#125; &#125; row = sc.nextInt(); col = sc.nextInt(); num = sc.nextInt(); for (int i = 0; i &lt; num; i++) &#123; int x, y; x = sc.nextInt(); y = sc.nextInt(); Map[y][x] = 1; &#125; for (int i = 0; i &lt; col; i++) &#123; for (int j = 0; j &lt; row; j++) &#123; if (Map[i][j] == 1 &amp;&amp; check[i][j] == false) &#123; bfs(i, j); &#125; &#125; &#125; System.out.println(result); &#125; &#125; static void bfs(int y, int x) &#123; result++; Queue&lt;int[]&gt; q = new LinkedList(); q.add(new int[] &#123; y, x &#125;); check[y][x] = true; while (!q.isEmpty()) &#123; int point[] = q.remove(); int cntY = point[0]; int cntX = point[1]; for (int i = 0; i &lt; 4; i++) &#123; int ny = cntY + dy[i]; int nx = cntX + dx[i]; if (0 &lt;= ny &amp;&amp; ny &lt; col &amp;&amp; 0 &lt;= nx &amp;&amp; nx &lt; row) &#123; if (check[ny][nx] == false &amp;&amp; Map[ny][nx] == 1) &#123; check[ny][nx] = true; q.add(new int[] &#123; ny, nx &#125;); &#125; &#125; &#125; &#125; &#125;&#125;","categories":[{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"DFS","slug":"Develop/Beakjoon/DFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/DFS/"}],"tags":[{"name":"BFS","slug":"BFS","permalink":"https://ckck803.github.io/tags/BFS/"},{"name":"beakjoon","slug":"beakjoon","permalink":"https://ckck803.github.io/tags/beakjoon/"},{"name":"í‹€ë ¸ìŠµë‹ˆë‹¤ 2","slug":"í‹€ë ¸ìŠµë‹ˆë‹¤-2","permalink":"https://ckck803.github.io/tags/%ED%8B%80%EB%A0%B8%EC%8A%B5%EB%8B%88%EB%8B%A4-2/"},{"name":"C++","slug":"C","permalink":"https://ckck803.github.io/tags/C/"}]}],"categories":[{"name":"Frontend","slug":"Frontend","permalink":"https://ckck803.github.io/categories/Frontend/"},{"name":"Vue","slug":"Frontend/Vue","permalink":"https://ckck803.github.io/categories/Frontend/Vue/"},{"name":"Tailwind","slug":"Frontend/Vue/Tailwind","permalink":"https://ckck803.github.io/categories/Frontend/Vue/Tailwind/"},{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://ckck803.github.io/categories/Kubernetes/"},{"name":"DevOps","slug":"DevOps","permalink":"https://ckck803.github.io/categories/DevOps/"},{"name":"KeyCloak","slug":"DevOps/KeyCloak","permalink":"https://ckck803.github.io/categories/DevOps/KeyCloak/"},{"name":"Spring","slug":"Spring","permalink":"https://ckck803.github.io/categories/Spring/"},{"name":"Spring Boot","slug":"Spring/Spring-Boot","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/"},{"name":"Redis","slug":"Spring/Spring-Boot/Redis","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Redis/"},{"name":"CS","slug":"CS","permalink":"https://ckck803.github.io/categories/CS/"},{"name":"ìš´ì˜ì²´ì œ","slug":"CS/ìš´ì˜ì²´ì œ","permalink":"https://ckck803.github.io/categories/CS/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/"},{"name":"Vue3","slug":"Frontend/Vue3","permalink":"https://ckck803.github.io/categories/Frontend/Vue3/"},{"name":"Spring Core","slug":"Spring/Spring-Core","permalink":"https://ckck803.github.io/categories/Spring/Spring-Core/"},{"name":"Vite","slug":"Frontend/Vite","permalink":"https://ckck803.github.io/categories/Frontend/Vite/"},{"name":"Spring Security","slug":"Spring/Spring-Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/"},{"name":"Filter","slug":"Spring/Spring-Security/Filter","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Filter/"},{"name":"Develop","slug":"Develop","permalink":"https://ckck803.github.io/categories/Develop/"},{"name":"Django","slug":"Develop/Django","permalink":"https://ckck803.github.io/categories/Develop/Django/"},{"name":"React Query","slug":"Frontend/React-Query","permalink":"https://ckck803.github.io/categories/Frontend/React-Query/"},{"name":"JPA","slug":"Develop/JPA","permalink":"https://ckck803.github.io/categories/Develop/JPA/"},{"name":"Network","slug":"CS/Network","permalink":"https://ckck803.github.io/categories/CS/Network/"},{"name":"Spring Cloud","slug":"Spring/Spring-Cloud","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/"},{"name":"Service Discovery","slug":"Spring/Spring-Cloud/Service-Discovery","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Service-Discovery/"},{"name":"Spring Batch","slug":"Spring/Spring-Batch","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/"},{"name":"Config","slug":"Kubernetes/Config","permalink":"https://ckck803.github.io/categories/Kubernetes/Config/"},{"name":"Istio","slug":"Kubernetes/Istio","permalink":"https://ckck803.github.io/categories/Kubernetes/Istio/"},{"name":"Custom","slug":"Kubernetes/Custom","permalink":"https://ckck803.github.io/categories/Kubernetes/Custom/"},{"name":"Autoscaler","slug":"Kubernetes/Autoscaler","permalink":"https://ckck803.github.io/categories/Kubernetes/Autoscaler/"},{"name":"MySQL","slug":"Develop/MySQL","permalink":"https://ckck803.github.io/categories/Develop/MySQL/"},{"name":"Step","slug":"Spring/Spring-Batch/Step","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/"},{"name":"Chunk","slug":"Spring/Spring-Batch/Step/Chunk","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Step/Chunk/"},{"name":"Helm","slug":"Kubernetes/Helm","permalink":"https://ckck803.github.io/categories/Kubernetes/Helm/"},{"name":"ì„œë¹„ìŠ¤","slug":"Kubernetes/ì„œë¹„ìŠ¤","permalink":"https://ckck803.github.io/categories/Kubernetes/%EC%84%9C%EB%B9%84%EC%8A%A4/"},{"name":"Job","slug":"Spring/Spring-Batch/Job","permalink":"https://ckck803.github.io/categories/Spring/Spring-Batch/Job/"},{"name":"Kiali","slug":"DevOps/Kiali","permalink":"https://ckck803.github.io/categories/DevOps/Kiali/"},{"name":"Jmeter","slug":"DevOps/Jmeter","permalink":"https://ckck803.github.io/categories/DevOps/Jmeter/"},{"name":"OpenSearch","slug":"DevOps/OpenSearch","permalink":"https://ckck803.github.io/categories/DevOps/OpenSearch/"},{"name":"SonarQube","slug":"DevOps/SonarQube","permalink":"https://ckck803.github.io/categories/DevOps/SonarQube/"},{"name":"DataBase","slug":"CS/DataBase","permalink":"https://ckck803.github.io/categories/CS/DataBase/"},{"name":"Scan","slug":"CS/DataBase/Scan","permalink":"https://ckck803.github.io/categories/CS/DataBase/Scan/"},{"name":"Repository","slug":"DevOps/Repository","permalink":"https://ckck803.github.io/categories/DevOps/Repository/"},{"name":"Gitea","slug":"DevOps/Repository/Gitea","permalink":"https://ckck803.github.io/categories/DevOps/Repository/Gitea/"},{"name":"Maven","slug":"DevOps/Maven","permalink":"https://ckck803.github.io/categories/DevOps/Maven/"},{"name":"CICD","slug":"DevOps/CICD","permalink":"https://ckck803.github.io/categories/DevOps/CICD/"},{"name":"Jenkins","slug":"DevOps/CICD/Jenkins","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Jenkins/"},{"name":"ì›Œí¬ë¡œë“œ","slug":"Kubernetes/ì›Œí¬ë¡œë“œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%93%9C/"},{"name":"AWS","slug":"AWS","permalink":"https://ckck803.github.io/categories/AWS/"},{"name":"EKS","slug":"AWS/EKS","permalink":"https://ckck803.github.io/categories/AWS/EKS/"},{"name":"Repository","slug":"DevOps/CICD/Repository","permalink":"https://ckck803.github.io/categories/DevOps/CICD/Repository/"},{"name":"Docker","slug":"Docker","permalink":"https://ckck803.github.io/categories/Docker/"},{"name":"êµ¬ì„±ìš”ì†Œ","slug":"Kubernetes/êµ¬ì„±ìš”ì†Œ","permalink":"https://ckck803.github.io/categories/Kubernetes/%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/"},{"name":"Redux","slug":"Frontend/Redux","permalink":"https://ckck803.github.io/categories/Frontend/Redux/"},{"name":"React","slug":"Frontend/React","permalink":"https://ckck803.github.io/categories/Frontend/React/"},{"name":"TypeScript","slug":"Frontend/React/TypeScript","permalink":"https://ckck803.github.io/categories/Frontend/React/TypeScript/"},{"name":"Spring WebSocket","slug":"Spring/Spring-WebSocket","permalink":"https://ckck803.github.io/categories/Spring/Spring-WebSocket/"},{"name":"Spring Framework","slug":"Spring/Spring-Boot/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Spring-Framework/"},{"name":"Redis","slug":"Develop/Redis","permalink":"https://ckck803.github.io/categories/Develop/Redis/"},{"name":"Spring Data JPA","slug":"Spring/Spring-Data-JPA","permalink":"https://ckck803.github.io/categories/Spring/Spring-Data-JPA/"},{"name":"QueryDSL","slug":"Develop/QueryDSL","permalink":"https://ckck803.github.io/categories/Develop/QueryDSL/"},{"name":"ì—°ê´€ê´€ê³„","slug":"Develop/JPA/ì—°ê´€ê´€ê³„","permalink":"https://ckck803.github.io/categories/Develop/JPA/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/"},{"name":"Oauth2","slug":"Spring/Spring-Security/Oauth2","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Oauth2/"},{"name":"ì»´í“¨í„° êµ¬ì¡°","slug":"CS/ì»´í“¨í„°-êµ¬ì¡°","permalink":"https://ckck803.github.io/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/"},{"name":"ë©”ëª¨ë¦¬ ê´€ë¦¬","slug":"CS/ì»´í“¨í„°-êµ¬ì¡°/ë©”ëª¨ë¦¬-ê´€ë¦¬","permalink":"https://ckck803.github.io/categories/CS/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B4%80%EB%A6%AC/"},{"name":"Spring Test","slug":"Spring/Spring-Test","permalink":"https://ckck803.github.io/categories/Spring/Spring-Test/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"ë¬¸ìì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/"},{"name":"ì •ê·œ í‘œí˜„ì‹","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ë¬¸ìì—´/ì •ê·œ-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EB%AC%B8%EC%9E%90%EC%97%B4/%EC%A0%95%EA%B7%9C-%ED%91%9C%ED%98%84%EC%8B%9D/"},{"name":"Oracle","slug":"Develop/Oracle","permalink":"https://ckck803.github.io/categories/Develop/Oracle/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"},{"name":"ì¤‘ë³µ ìˆœì—´","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ê²½ìš°ì˜-ìˆ˜/ì¤‘ë³µ-ìˆœì—´","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/%EC%A4%91%EB%B3%B5-%EC%88%9C%EC%97%B4/"},{"name":"Beakjoon","slug":"Develop/Beakjoon","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/"},{"name":"ê·¸ë˜í”„","slug":"Develop/Beakjoon/ê·¸ë˜í”„","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EA%B7%B8%EB%9E%98%ED%94%84/"},{"name":"Kafka","slug":"Spring/Spring-Boot/Kafka","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/Kafka/"},{"name":"Kafka","slug":"Develop/Kafka","permalink":"https://ckck803.github.io/categories/Develop/Kafka/"},{"name":"ê²½ìš°ì˜ ìˆ˜","slug":"Develop/Beakjoon/ê²½ìš°ì˜-ìˆ˜","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98/"},{"name":"Security","slug":"CS/Network/Security","permalink":"https://ckck803.github.io/categories/CS/Network/Security/"},{"name":"BFS","slug":"Develop/Beakjoon/BFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/BFS/"},{"name":"SAMSUNG","slug":"Develop/Beakjoon/SAMSUNG","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/SAMSUNG/"},{"name":"ì‹œë®¬ë ˆì´ì…˜","slug":"Develop/Beakjoon/SAMSUNG/ì‹œë®¬ë ˆì´ì…˜","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/SAMSUNG/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/"},{"name":"HTTP","slug":"CS/Network/HTTP","permalink":"https://ckck803.github.io/categories/CS/Network/HTTP/"},{"name":"Spring AOP","slug":"Spring/Spring-AOP","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/"},{"name":"Pointcut í‘œí˜„ì‹","slug":"Spring/Spring-AOP/Pointcut-í‘œí˜„ì‹","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut-%ED%91%9C%ED%98%84%EC%8B%9D/"},{"name":"Pointcut","slug":"Spring/Spring-AOP/Pointcut","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Pointcut/"},{"name":"JAVA","slug":"Develop/JAVA","permalink":"https://ckck803.github.io/categories/Develop/JAVA/"},{"name":"Collection","slug":"Develop/JAVA/Collection","permalink":"https://ckck803.github.io/categories/Develop/JAVA/Collection/"},{"name":"AOP Aspect","slug":"Spring/Spring-AOP/AOP-Aspect","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/AOP-Aspect/"},{"name":"Git","slug":"Develop/Git","permalink":"https://ckck803.github.io/categories/Develop/Git/"},{"name":"Develop Lanuage","slug":"CS/Develop-Lanuage","permalink":"https://ckck803.github.io/categories/CS/Develop-Lanuage/"},{"name":"JAVA","slug":"CS/Develop-Lanuage/JAVA","permalink":"https://ckck803.github.io/categories/CS/Develop-Lanuage/JAVA/"},{"name":"AspectJ","slug":"Spring/Spring-AOP/AspectJ","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/AspectJ/"},{"name":"Bean Post Processor","slug":"Spring/Spring-AOP/Bean-Post-Processor","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Bean-Post-Processor/"},{"name":"Spring Proxy","slug":"Spring/Spring-AOP/Spring-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-AOP/Spring-Proxy/"},{"name":"Spring ê³ ê¸‰í¸","slug":"Spring/Spring-ê³ ê¸‰í¸","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/"},{"name":"CGLIB","slug":"Spring/Spring-ê³ ê¸‰í¸/CGLIB","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/CGLIB/"},{"name":"Dynamic Proxy","slug":"Spring/Spring-ê³ ê¸‰í¸/Dynamic-Proxy","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Dynamic-Proxy/"},{"name":"Decorator íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Decorator-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Decorator-%ED%8C%A8%ED%84%B4/"},{"name":"Proxy íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Proxy-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Proxy-%ED%8C%A8%ED%84%B4/"},{"name":"Template Callback íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Template-Callback-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Template-Callback-%ED%8C%A8%ED%84%B4/"},{"name":"Strategy íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Strategy-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Strategy-%ED%8C%A8%ED%84%B4/"},{"name":"Template Method íŒ¨í„´","slug":"Spring/Spring-ê³ ê¸‰í¸/Template-Method-íŒ¨í„´","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/Template-Method-%ED%8C%A8%ED%84%B4/"},{"name":"ThreadLocal","slug":"Spring/Spring-ê³ ê¸‰í¸/ThreadLocal","permalink":"https://ckck803.github.io/categories/Spring/Spring-%EA%B3%A0%EA%B8%89%ED%8E%B8/ThreadLocal/"},{"name":"Cpp","slug":"Develop/Cpp","permalink":"https://ckck803.github.io/categories/Develop/Cpp/"},{"name":"STL","slug":"Develop/Cpp/STL","permalink":"https://ckck803.github.io/categories/Develop/Cpp/STL/"},{"name":"Transaction","slug":"CS/DataBase/Transaction","permalink":"https://ckck803.github.io/categories/CS/DataBase/Transaction/"},{"name":"Docker","slug":"Develop/Docker","permalink":"https://ckck803.github.io/categories/Develop/Docker/"},{"name":"Docker Compose","slug":"Develop/Docker/Docker-Compose","permalink":"https://ckck803.github.io/categories/Develop/Docker/Docker-Compose/"},{"name":"Process","slug":"CS/Process","permalink":"https://ckck803.github.io/categories/CS/Process/"},{"name":"Spring Rest","slug":"Spring/Spring-Rest","permalink":"https://ckck803.github.io/categories/Spring/Spring-Rest/"},{"name":"ì¸ì¦ ê³¼ì •","slug":"Spring/Spring-Security/ì¸ì¦-ê³¼ì •","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95/"},{"name":"Login","slug":"Frontend/Login","permalink":"https://ckck803.github.io/categories/Frontend/Login/"},{"name":"Security","slug":"Spring/Spring-Security/Security","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Security/"},{"name":"Config","slug":"Spring/Spring-Security/Security/Config","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Security/Config/"},{"name":"File","slug":"Spring/Spring-Boot/File","permalink":"https://ckck803.github.io/categories/Spring/Spring-Boot/File/"},{"name":"Rest","slug":"Develop/JAVA/Rest","permalink":"https://ckck803.github.io/categories/Develop/JAVA/Rest/"},{"name":"REST","slug":"Develop/JAVA/REST","permalink":"https://ckck803.github.io/categories/Develop/JAVA/REST/"},{"name":"Spring MVC","slug":"Spring/Spring-MVC","permalink":"https://ckck803.github.io/categories/Spring/Spring-MVC/"},{"name":"Spring Framework","slug":"Spring/Spring-Framework","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/"},{"name":"lifecycle","slug":"Spring/Spring-Framework/lifecycle","permalink":"https://ckck803.github.io/categories/Spring/Spring-Framework/lifecycle/"},{"name":"ìë£Œêµ¬ì¡°","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/"},{"name":"List","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°/List","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/List/"},{"name":"Kafka","slug":"Spring/Spring-Cloud/Kafka","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Kafka/"},{"name":"Feign Client","slug":"Spring/Spring-Cloud/Feign-Client","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Feign-Client/"},{"name":"Config","slug":"Spring/Spring-Cloud/Config","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Config/"},{"name":"Gateway","slug":"Spring/Spring-Cloud/Gateway","permalink":"https://ckck803.github.io/categories/Spring/Spring-Cloud/Gateway/"},{"name":"JPA í”„ë¡œê·¸ë˜ë°(ê¸°ë³¸í¸)","slug":"Develop/JPA/JPA-í”„ë¡œê·¸ë˜ë°-ê¸°ë³¸í¸","permalink":"https://ckck803.github.io/categories/Develop/JPA/JPA-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EA%B8%B0%EB%B3%B8%ED%8E%B8/"},{"name":"ToastUI","slug":"Frontend/ToastUI","permalink":"https://ckck803.github.io/categories/Frontend/ToastUI/"},{"name":"ë¡œê·¸ì¸","slug":"Frontend/ë¡œê·¸ì¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%A1%9C%EA%B7%B8%EC%9D%B8/"},{"name":"To do List","slug":"Frontend/To-do-List","permalink":"https://ckck803.github.io/categories/Frontend/To-do-List/"},{"name":"ë¸”ë¡œê·¸","slug":"Frontend/ë¸”ë¡œê·¸","permalink":"https://ckck803.github.io/categories/Frontend/%EB%B8%94%EB%A1%9C%EA%B7%B8/"},{"name":"ìë£Œêµ¬ì¡°","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ìë£Œêµ¬ì¡°","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/"},{"name":"SET","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ìë£Œêµ¬ì¡°/SET","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/SET/"},{"name":"SET","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°/SET","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/SET/"},{"name":"ì‹œë®¬ë ˆì´ì…˜","slug":"Develop/Beakjoon/ì‹œë®¬ë ˆì´ì…˜","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/"},{"name":"ì´ë¶„íƒìƒ‰","slug":"Develop/Beakjoon/ì´ë¶„íƒìƒ‰","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9D%B4%EB%B6%84%ED%83%90%EC%83%89/"},{"name":"ìŠ¤íƒ","slug":"Develop/Beakjoon/ìë£Œêµ¬ì¡°/ìŠ¤íƒ","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/"},{"name":"ì¹´í…Œê³ ë¦¬","slug":"Develop/Beakjoon/ì¹´í…Œê³ ë¦¬","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC/"},{"name":"ìŠ¤íƒ","slug":"Develop/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤/ìë£Œêµ¬ì¡°/ìŠ¤íƒ","permalink":"https://ckck803.github.io/categories/Develop/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/%EC%8A%A4%ED%83%9D/"},{"name":"JWT","slug":"Spring/Spring-Security/JWT","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/JWT/"},{"name":"ê²Œì‹œíŒ ë§Œë“¤ê¸°","slug":"Spring/ê²Œì‹œíŒ-ë§Œë“¤ê¸°","permalink":"https://ckck803.github.io/categories/Spring/%EA%B2%8C%EC%8B%9C%ED%8C%90-%EB%A7%8C%EB%93%A4%EA%B8%B0/"},{"name":"SQL","slug":"CS/DataBase/SQL","permalink":"https://ckck803.github.io/categories/CS/DataBase/SQL/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"Develop/Beakjoon/ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"},{"name":"ê°•ì˜","slug":"Spring/ê°•ì˜","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/"},{"name":"ë ˆìŠ¤í† ë‘ ì˜ˆì•½ ì‚¬ì´íŠ¸","slug":"Spring/ê°•ì˜/ë ˆìŠ¤í† ë‘-ì˜ˆì•½-ì‚¬ì´íŠ¸","permalink":"https://ckck803.github.io/categories/Spring/%EA%B0%95%EC%9D%98/%EB%A0%88%EC%8A%A4%ED%86%A0%EB%9E%91-%EC%98%88%EC%95%BD-%EC%82%AC%EC%9D%B4%ED%8A%B8/"},{"name":"Form login","slug":"Spring/Spring-Security/Form-login","permalink":"https://ckck803.github.io/categories/Spring/Spring-Security/Form-login/"},{"name":"DFS","slug":"Develop/Beakjoon/DFS","permalink":"https://ckck803.github.io/categories/Develop/Beakjoon/DFS/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://ckck803.github.io/tags/Spring-Boot/"},{"name":"Spring Security","slug":"Spring-Security","permalink":"https://ckck803.github.io/tags/Spring-Security/"},{"name":"JPA","slug":"JPA","permalink":"https://ckck803.github.io/tags/JPA/"},{"name":"React","slug":"React","permalink":"https://ckck803.github.io/tags/React/"},{"name":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","slug":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤","permalink":"https://ckck803.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"},{"name":"Cpp","slug":"Cpp","permalink":"https://ckck803.github.io/tags/Cpp/"},{"name":"Java","slug":"Java","permalink":"https://ckck803.github.io/tags/Java/"},{"name":"beakjoon","slug":"beakjoon","permalink":"https://ckck803.github.io/tags/beakjoon/"},{"name":"Beakjoon","slug":"Beakjoon","permalink":"https://ckck803.github.io/tags/Beakjoon/"},{"name":"BFS","slug":"BFS","permalink":"https://ckck803.github.io/tags/BFS/"},{"name":"ì‹œë®¬ë ˆì´ì…˜","slug":"ì‹œë®¬ë ˆì´ì…˜","permalink":"https://ckck803.github.io/tags/%EC%8B%9C%EB%AE%AC%EB%A0%88%EC%9D%B4%EC%85%98/"},{"name":"ì‚¼ì„± ê¸°ì¶œ","slug":"ì‚¼ì„±-ê¸°ì¶œ","permalink":"https://ckck803.github.io/tags/%EC%82%BC%EC%84%B1-%EA%B8%B0%EC%B6%9C/"},{"name":"ë‹¤ìµìŠ¤íŠ¸ë¼","slug":"ë‹¤ìµìŠ¤íŠ¸ë¼","permalink":"https://ckck803.github.io/tags/%EB%8B%A4%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%9D%BC/"},{"name":"í‹€ë ¸ìŠµë‹ˆë‹¤ 5","slug":"í‹€ë ¸ìŠµë‹ˆë‹¤-5","permalink":"https://ckck803.github.io/tags/%ED%8B%80%EB%A0%B8%EC%8A%B5%EB%8B%88%EB%8B%A4-5/"},{"name":"í‹€ë ¸ìŠµë‹ˆë‹¤ 1","slug":"í‹€ë ¸ìŠµë‹ˆë‹¤-1","permalink":"https://ckck803.github.io/tags/%ED%8B%80%EB%A0%B8%EC%8A%B5%EB%8B%88%EB%8B%A4-1/"},{"name":"í‹€ë ¸ìŠµë‹ˆë‹¤ 4","slug":"í‹€ë ¸ìŠµë‹ˆë‹¤-4","permalink":"https://ckck803.github.io/tags/%ED%8B%80%EB%A0%B8%EC%8A%B5%EB%8B%88%EB%8B%A4-4/"},{"name":"C++","slug":"C","permalink":"https://ckck803.github.io/tags/C/"},{"name":"DFS","slug":"DFS","permalink":"https://ckck803.github.io/tags/DFS/"},{"name":"Python","slug":"Python","permalink":"https://ckck803.github.io/tags/Python/"},{"name":"í‹€ë ¸ìŠµë‹ˆë‹¤ 2","slug":"í‹€ë ¸ìŠµë‹ˆë‹¤-2","permalink":"https://ckck803.github.io/tags/%ED%8B%80%EB%A0%B8%EC%8A%B5%EB%8B%88%EB%8B%A4-2/"}]}